<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ•°æ®ç¼ºå¤±å€¼å¡«å……çš„ä¸‰å¤§ç»Ÿè®¡æ–¹æ³•æ€»ç»“å®ç° | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ•°æ®ç¼ºå¤±å€¼å¡«å……çš„ä¸‰å¤§ç»Ÿè®¡æ–¹æ³•æ€»ç»“å®ç° - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="http://p1.pstatp.com/large/pgc-image/1342cf1d8e144ff7a70ca5131c77cb53"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/2171f6b.html><link rel=canonical href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/2171f6b.html><meta property="article:published_time" content="2020-10-29T20:48:06+08:00"><meta property="article:modified_time" content="2020-10-29T20:48:06+08:00"><meta name=Keywords content><meta name=description content="æ•°æ®ç¼ºå¤±å€¼å¡«å……çš„ä¸‰å¤§ç»Ÿè®¡æ–¹æ³•æ€»ç»“å®ç°"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E6%B8%B8%E6%88%8F/2171f6b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ•°æ®ç¼ºå¤±å€¼å¡«å……çš„ä¸‰å¤§ç»Ÿè®¡æ–¹æ³•æ€»ç»“å®ç°</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E6%B8%B8%E6%88%8F.html>æ¸¸æˆ</a></span></div><div class=post-content><div><div class=pgc-img><img alt=æ•°æ®ç¼ºå¤±å€¼å¡«å……çš„ä¸‰å¤§ç»Ÿè®¡æ–¹æ³•æ€»ç»“å®ç° onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/1342cf1d8e144ff7a70ca5131c77cb53><p class=pgc-img-caption></p></div><p>åœ¨æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« é‡Œé¢å†™åˆ°äº†å¹³æ—¶å·¥ä½œç§¯ç´¯åˆ°çš„ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç§‘å­¦å¤„ç†æ–¹æ³•ï¼Œå…¶ä¸­ç¬¬ä¸€å¤§éƒ¨åˆ†ä¸»è¦å°†çš„å°±æ˜¯æ•°æ®ç¼ºå¤±å€¼ç›¸å…³çš„å†…å®¹ï¼Œåœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œæ•°æ®ç¼ºå¤±å€¼æ˜¯ä¸€ä¸ªä¸å¯é¿å…çš„é—®é¢˜ï¼Œé€ æˆæ•°æ®ä¸­æœ‰ç¼ºå¤±å€¼çš„åŸå› æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä»¬æ›´é‡è¦çš„æ˜¯è¦èšç„¦å¦‚ä½•å»è¿›è¡Œç¼ºå¤±æ•°æ®çš„å¡«å……ï¼Œè¿›å¯èƒ½é™ä½ç¼ºå¤±å€¼æ•°æ®å¸¦æ¥çš„å½±å“ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘åŸºäºè‡ªå·±å®é™…é¡¹ç›®ç»éªŒï¼Œæ€»ç»“äº†ä¸‰ç§ç»Ÿè®¡ä¸Šçš„æ•°æ®ç¼ºå¤±å€¼å¡«å……æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼šæ»‘åŠ¨å¹³å‡æ•°æ®å¡«å……æ–¹æ³•ã€ç§»åŠ¨åŠ æƒæ•°æ®å¡«å……æ–¹æ³•å’Œå¡å°”æ›¼æ»¤æ³¢æ•°æ®å¡«å……æ–¹æ³•ï¼Œç›¸å…³çš„ä»‹ç»å’ŒåŸç†ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œå°±ä¸å†ç´¯èµ˜äº†ï¼Œè¿™é‡Œç»™å‡ºæ¥å…·ä½“çš„ä»£ç å®ç°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æ‹¿å»ä½¿ç”¨ï¼Œæ¬¢è¿äº¤æµæŠ€æœ¯é—®é¢˜ï¼Œå…±åŒè¿›æ­¥ã€‚</p><p>å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre>#!usr/bin/env python#encoding:utf-8from __future__ import division'''__Author__:æ²‚æ°´å¯’åŸåŠŸèƒ½ï¼š ç¼ºå¤±æ•°æ®å¡«å……æ¨¡å—ä¸»è¦åŒ…æ‹¬ï¼š æ»‘åŠ¨å¹³å‡ç¼ºå¤±å€¼å¡«å……ç®—æ³•ã€ç§»åŠ¨åŠ æƒç¼ºå¤±å€¼å¡«å……ç®—æ³•ã€å¡å°”æ›¼æ»¤æ³¢ç¼ºå¤±å€¼å¡«å……ç®—æ³•'''import sysfrom pykalman import KalmanFilterreload(sys)sys.setdefaultencoding("utf-8")def sliceWindowAverage(one_all_list,num=10,flag=False): ''' æ»‘åŠ¨å¹³å‡ç¼ºå¤±å€¼å¡«å……ç®—æ³•ï¼š åŸºäºæ»‘çª—åœ¨æ—¶åºæ•°æ®ä¸Šçš„æ»‘åŠ¨å®ç°å¯¹çª—å£å†…ç¼ºå¤±å€¼çš„å¡«å……ï¼ˆä½¿ç”¨çª—å£å†…å…¶ä½™å€¼çš„å‡å€¼è¿›è¡Œå¡«å……ï¼‰ ''' nozero_list=[one for one in one_all_list if one&gt;0] before_avg,last_avg=sum(nozero_list[:num])/num,sum(nozero_list[-1*num:])/num res_list=[] for i in range(len(one_all_list)): if one_all_list[i]!=0: res_list.append(one_all_list[i]) else: tmp=int(num/2) if i&lt;=tmp: if flag: res_list.append(float(before_avg)) else: res_list.append(int(before_avg)) elif i&gt;=len(one_all_list)-tmp: if flag: res_list.append(float(last_avg)) else: res_list.append(int(last_avg)) else: one_index_list=list(range(i-tmp,i))+list(range(i+1,i+tmp+1)) one_value=[one_all_list[h] for h in one_index_list] one_value=[one for one in one_value if one&gt;0] if len(one_value): if flag: res_list.append(float(sum(one_value)/len(one_value))) else: res_list.append(int(sum(one_value)/len(one_value))) return res_listdef weightGenerate(weight_list): ''' åŸºäºæ—¶é—´æ­¥é•¿ç”Ÿæˆæƒé‡å€¼ ''' total=sum(weight_list) return [one/total for one in weight_list]def sliceWindowWeight(one_all_list,num=7,flag=False): ''' ç§»åŠ¨åŠ æƒç¼ºå¤±å€¼å¡«å……ç®—æ³•ï¼š åŸºäºæ»‘çª—åœ¨æ—¶åºæ•°æ®ä¸Šçš„æ»‘åŠ¨å®ç°å¯¹çª—å£å†…ç¼ºå¤±å€¼çš„å¡«å……ï¼ˆä½¿ç”¨çª—å£å†…å…¶ä½™å€¼çš„åŠ æƒå‡å€¼è¿›è¡Œå¡«å……ï¼‰ ''' nozero_list=[one for one in one_all_list if one&gt;0] before_avg,last_avg=sum(nozero_list[:num])/num,sum(nozero_list[-1*num:])/num res_list=[] for i in range(len(one_all_list)): if one_all_list[i]&gt;0: res_list.append(one_all_list[i]) else: tmp=int(num/2)+1 if i&lt;=tmp: if flag: res_list.append(float(before_avg)) else: res_list.append(int(before_avg)) elif i&gt;=len(one_all_list)-tmp: if flag: res_list.append(float(last_avg)) else: res_list.append(int(last_avg)) else:  one_index_list=range(i-tmp,i)+range(i+1,i+tmp) #å»é™¤iä½ç½® one_value=[one_all_list[h] for h in one_index_list] weight_list=[abs(1/(B-i)) for B in range(i-tmp,i)]+[abs(1/(L-i)) for L in range(i+1,i+tmp)] one_w=weightGenerate(weight_list) one_weight_value=[one_value[j]*one_w[j] for j in range(len(one_w))] res_list.append(int(sum(one_weight_value))) return res_listdef kaerman(one_all_list): ''' å¡å°”æ›¼æ»¤æ³¢å™¨ç¼ºå¤±å€¼å¡«å……ç®—æ³•ï¼š åŸºäºè§‚æµ‹å€¼å’Œä¼°è®¡å€¼æ¥è¿˜åŸç³»ç»ŸçœŸå®çš„çŠ¶æ€å€¼ ''' observations=measurements=one_all_list kf=KalmanFilter(initial_state_mean=observations[0]) kf=kf.em(observations,n_iter=5,em_vars='all') measurements_predicted=(kf.smooth(measurements)[0])[:, 0] res_list=measurements_predicted.tolist() return [int(one) for one in res_list]if __name__ == '__main__': print 'missingDataHandle!!!' data=[19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 0, 18, 20, 22, 23, 24, 24, 24, 24, 26, 0, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122] D1=sliceWindowAverage(data,num=7,flag=False) D2=sliceWindowWeight(data,num=7,flag=False) D3=kaerman(data) print 'D1: ',D1 print 'D2: ',D2 print 'D3: ',D3</pre><p>ç®€å•çš„æµ‹è¯•ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p><pre>missingDataHandle!!!D1: [19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 18, 18, 20, 22, 23, 24, 24, 24, 24, 26, 25, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122]D2: [19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 17, 18, 20, 22, 23, 24, 24, 24, 24, 26, 25, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122]D3: [18, 18, 17, 17, 17, 16, 16, 16, 16, 14, 9, 15, 19, 21, 22, 23, 23, 23, 23, 21, 13, 22, 24, 24, 24, 25, 26, 27, 29, 31, 32, 31, 31, 32, 33, 34, 35, 38, 40, 41, 39, 35, 34, 35, 36, 36, 37, 37, 35, 34, 34, 33, 34, 35, 34, 33, 33, 32, 32, 31, 31, 32, 35, 37, 38, 39, 39, 35, 32, 33, 34, 36, 36, 35, 36, 39, 41, 43, 44, 45, 46, 49, 53, 59, 63, 67, 70, 71, 69, 68, 66, 66, 69, 72, 74, 78, 86, 96, 109, 118][Finished in 0.9s]</pre><p>å­¦ä¹ è®°å½•äº†ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æ•°æ®','ä¸‰å¤§','ç»Ÿè®¡'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>