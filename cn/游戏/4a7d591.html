<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>é—ä¼ ç®—æ³•(Python) #5 ç”¨DEAPæ¡†æ¶è§£å†³OneMaxé—®é¢˜ | æå®¢å¿«è¨Š</title><meta property="og:title" content="é—ä¼ ç®—æ³•(Python) #5 ç”¨DEAPæ¡†æ¶è§£å†³OneMaxé—®é¢˜ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="http://p1.pstatp.com/large/pgc-image/3279ffb8082c491a967c683ae24bdfcb"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/4a7d591.html><link rel=canonical href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/4a7d591.html><meta property="article:published_time" content="2020-10-29T20:46:33+08:00"><meta property="article:modified_time" content="2020-10-29T20:46:33+08:00"><meta name=Keywords content><meta name=description content="é—ä¼ ç®—æ³•(Python) #5 ç”¨DEAPæ¡†æ¶è§£å†³OneMaxé—®é¢˜"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E6%B8%B8%E6%88%8F/4a7d591.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>é—ä¼ ç®—æ³•(Python) #5 ç”¨DEAPæ¡†æ¶è§£å†³OneMaxé—®é¢˜</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E6%B8%B8%E6%88%8F.html>æ¸¸æˆ</a></span></div><div class=post-content><p>é—ä¼ ç®—æ³•ç³»åˆ—çš„ç¬¬ä¸‰æœŸä»‹ç»äº†å¦‚ä½•ä¸ç”¨ä»»ä½•æ¡†æ¶ä»é›¶å¼€å§‹è§£å†³OneMaxé—®é¢˜ï¼Œç¬¬å››æœŸä»‹ç»äº†DEAPæ¡†æ¶çš„åŸºæœ¬ç”¨æ³•ã€‚è‹¥è¯»è€…å¯¹ä¸‹æ–‡ä¸­å®šä¹‰æˆ–æœ¯è¯­ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡æ–‡ç« ã€‚æœ¬æœŸæ–‡ç« å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨DEAPè§£å†³OneMaxé—®é¢˜ã€‚</p><h2 class=pgc-h-arrow-right>1.OneMaxé—®é¢˜(OneMax problem)</h2><p>OneMaxé—®é¢˜æ˜¯é—ä¼ ç®—æ³•çš„å…¥é—¨é—®é¢˜ï¼Œå…¶å†…å®¹æ˜¯ï¼šå¦‚ä½•ä½¿ä¸€æ®µé•¿åº¦å›ºå®šçš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ‰€æœ‰ä½ç½®ä¸Šæ•°å­—ä¹‹å’Œæœ€å¤§ã€‚</p><p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªé•¿åº¦ä¸º5çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ä¸ºä¾‹ï¼š</p><ul><li>10010 -> å’Œä¸º2</li><li>00111 -> å’Œä¸º3</li><li>11111 -> å’Œä¸º5(æœ€å¤§å€¼)</li></ul><p>å¯¹ä¸€èˆ¬äººï¼Œæ˜¾è€Œæ˜“è§ï¼Œå½“æ‰€æœ‰ä½æ•°éƒ½ä¸º1æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²çš„å’Œæœ€å¤§ï¼Œä½†åœ¨æˆ‘ä»¬ç”¨é—ä¼ ç®—æ³•è§£å†³è¯¥é—®é¢˜æ—¶ï¼Œç®—æ³•æœ¬èº«å¹¶ä¸å…·å¤‡è¿™æ ·çš„çŸ¥è¯†ã€‚</p><h2 class=pgc-h-arrow-right>2.é—®é¢˜çš„è§£å†³æ€è·¯</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—æŠŠè¿™ä¸ªé—®é¢˜è½¬æ¢æˆä¸€ä¸ªé—ä¼ ç®—æ³•é—®é¢˜ï¼Œå³ï¼šæˆ‘ä»¬å¾—å®šä¹‰ä¸ªä½“ã€ç§ç¾¤ï¼Œé€‰æ‹©ã€æ‚äº¤ã€çªå˜æ–¹æ³•ã€é€‚åº”åº¦å‡½æ•°ç­‰ã€‚å‡è®¾æœ‰ä¸€ä¸ªé•¿åº¦ä¸º100çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºä»¥ä¸‹å®šä¹‰ï¼š</p><ul><li>ä¸ªä½“ï¼šä¸ªä½“å³ä¸ºé—®é¢˜çš„è§£ï¼Œè¿™ä¸ªé—®é¢˜ä¸­ä¸ªä½“å¯ä»¥ç›´è§‚çš„å®šä¹‰ä¸ºä¸€ä¸ªé•¿åº¦ä¸º100åˆ—è¡¨ï¼ˆListï¼‰ï¼Œåˆ—è¡¨ä¸Šæ¯ä¸ªå…ƒç´ ä¸º0æˆ–1.</li><li>ç§ç¾¤ï¼šç§ç¾¤å³æ‰€æœ‰ä¸ªä½“çš„åˆé›†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç§ç¾¤å®šä¹‰ä¸ºæ‰€æœ‰ä¸ªä½“ç»„æˆçš„åˆ—è¡¨ã€‚</li><li>é€‰æ‹©ï¼šä½¿ç”¨é”¦æ ‡èµ›æ³•(Tournament Selection)</li><li>æ‚äº¤ï¼šä½¿ç”¨å•ç‚¹æ‚äº¤æ³•(Singe-Point Crossover)</li><li>çªå˜ï¼šä½¿ç”¨ä½ç¿»è½¬çªå˜æ³•(Flip Bit Mutation)</li><li>é€‚åº”åº¦å‡½æ•°ï¼š æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿å­—ç¬¦ä¸²ä¸Šæ‰€æœ‰æ•°å­—ä¹‹å’Œæœ€å¤§ï¼Œé€‚åº”åº¦å‡½æ•°å¯ä»¥ç›´è§‚çš„å®šä¹‰ä¸ºåˆ—è¡¨ä¸­æ‰€æœ‰æ•°å­—ä¹‹å’Œã€‚</li></ul><p>è‹¥å¯¹ä¸Šè¿°å®šä¹‰ä¸å¤ªäº†è§£çš„ï¼Œå¯ä»¥å›çœ‹é—ä¼ ç®—æ³•ç³»åˆ—çš„ç¬¬äºŒæœŸã€‚</p><h2 class=pgc-h-arrow-right>3.ç”¨DEAPæ¡†æ¶å®ç°é—ä¼ ç®—æ³•</h2><p>ä»¥ä¸‹å°†åˆ†æ­¥éª¤è§£é‡Šæ¯ä¸€éƒ¨åˆ†çš„ä»£ç ï¼Œå®Œæ•´ä»£ç åœ¨æœ¬æ–‡çš„æœ€åå¯è§ã€‚</p><h3 class=pgc-h-arrow-right>3.1. å‡†å¤‡å·¥ä½œ</h3><pre><code># 1.load modulesfrom deap import base,creator,tools,algorithmsimport randomimport numpy as npimport matplotlib.pyplot as plttoolbox = base.Toolbox()</code></pre><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥é—ä¼ ç®—æ³•æ‰€å¿…é¡»çš„æ¨¡ç»„ï¼š</p><ul><li>baseï¼Œcreatorï¼Œtoolsï¼Œalgorithmsï¼š è¿™å››ä¸ªæ¨¡ç»„æ˜¯DEAPæ¡†æ¶å†…æœ€å¸¸ç”¨çš„æ¨¡ç»„</li><li>random: ç”¨ä»¥ç”Ÿæˆéšæœºæ•°</li><li>numpyï¼šæˆ‘ä»¬å°†ç”¨åˆ° numpy ä¸­çš„ mean å’Œ max æ–¹ç¨‹ã€‚</li><li>matplotlibï¼š ç”¨ä»¥ç»˜å›¾</li><li>toolboxï¼šDEAPæ¡†æ¶ä¸­çš„æ ¸å¿ƒï¼Œå½“ä½¿ç”¨deap.algorithmsæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠé—ä¼ ç®—æ³•çš„è¿ç®—ç¬¦å­˜å…¥toolboxå†…ã€‚ åŒæ—¶toolbox.registerä¹Ÿæ˜¯DEAPä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</li></ul><h3 class=pgc-h-arrow-right>3.2. åˆå§‹åŒ–ç®—æ³•å‚æ•°</h3><pre><code># 2.parameters:INDIVIDUAL_LENGTH = 100  # length of bit string to be optimizedPOPULATION_SIZE = 200P_CROSSOVER = 0.9  # probability for crossoverP_MUTATION = 0.1   # probability for mutating an individualMAX_GENERATIONS = 50random.seed(39)</code></pre><ul><li>INDIVIDUAL_LENGTHï¼šä¸ªä½“çš„â€œé•¿åº¦â€ï¼Œå³äºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„é•¿åº¦</li><li>POPULATION_SIZE: ç§ç¾¤ä¸­ä¸ªä½“çš„æ•°ç›®</li><li>P_CROSSOVER: ä¸ªä½“é—´äº¤æ‚çš„æ¦‚ç‡</li><li>P_MUTATION: ä¸ªä½“çªå˜çš„æ¦‚ç‡</li><li>MAX_GENERATIONS: ç®—æ³•è¿­ä»£æ¬¡æ•°ä¸Šé™</li><li>random.seedï¼šä¸ºäº†ä¿è¯æ¯æ¬¡è¿è¡Œçš„ç»“æœç›¸åŒï¼Œè®¾å®šäº†éšæœºç§å­</li></ul><h3 class=pgc-h-arrow-right>3.3. å®šä¹‰ä¸ªä½“ä¸ç§ç¾¤</h3><pre><code># 3.create individual and populationtoolbox.register("genBinary", random.randint, 0, 1) # 1creator.create("FitnessMax", base.Fitness, weights=(1.0,)) # 2creator.create("Individual", list, fitness=creator.FitnessMax) # 3toolbox.register("createIndividual", tools.initRepeat, creator.Individual, toolbox.genBinary, INDIVIDUAL_LENGTH) # 4toolbox.register("createPopulation", tools.initRepeat, list, toolbox.createIndividual) # 5</code></pre><ol start=1><li>è¿™ä¸€åˆ—å®šäº†genBinaryæ–¹ç¨‹ï¼šè¯¥å‡½æ•°å¯ä»¥éšæœºç”Ÿæˆ0æˆ–1ï¼›é€šè¿‡toolbox.register()å®šä¹‰åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡toolbox.genBinary()ç›´æ¥ä½¿ç”¨è¯¥å‡½æ•°ã€‚</li><li>å› ä¸ºåœ¨OneMaxé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€‚åº”åº¦çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹“å±•base.Fitnessç±»ï¼Œå¹¶å°†æ‹“å±•åçš„ç±»å‘½åä¸ºFitnessMaxï¼Œå¹¶è®¾å®šå…¶æƒé‡ä¸º(1.0,)ï¼Œä»£è¡¨æ±‚æœ€å¤§å€¼ï¼ˆåœ¨å…¶ä»–é—®é¢˜ä¸­ï¼Œå¦‚æœéœ€è¦æ±‚æœ€å°å€¼çš„ï¼Œå¯ä»¥å®šä¹‰æƒé‡ä¸º(-1.0,)ï¼‰ã€‚</li></ol><ul><li>åœ¨è¿™é‡Œæ³¨æ„æˆ‘ä»¬å®šä¹‰æƒé‡æ˜¯(1.0,)è€Œä¸æ˜¯1.0ï¼Œå…¶åŸå› æ˜¯DEAPæ¡†æ¶æ”¯æŒæ±‚å¤šä¸ªç›®æ ‡çš„çš„æœ€å¤§/æœ€å°å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å®šä¹‰æƒé‡ä¸ºå…ƒç»„ï¼ˆtupleï¼‰ã€‚</li><li>å½“åœ¨å…¶ä»–é—®é¢˜ä¸­æˆ‘ä»¬çš„é€‚åº”åº¦æ–¹ç¨‹æœ‰å¤šä¸ªç›®æ ‡ï¼šå¦‚å½“æˆ‘ä»¬éœ€è¦ç¬¬ä¸€ä¸ªç›®æ ‡æœ€å¤§ï¼ŒåŒæ—¶ç¬¬äºŒä¸ªç›®æ ‡æœ€å°ï¼Œä¸”ç¬¬ä¸€ä¸ªç›®æ ‡çš„é‡è¦æ€§æ˜¯ç¬¬äºŒä¸ªç›®æ ‡çš„ä¸¤å€æ—¶ï¼Œæƒé‡å¯ä»¥å®šä¹‰ä¸ºï¼š(1.0,-0.5)</li></ul><ol start=3><li>åˆ›å»ºIndividualç±»ï¼Œå¹¶è®©FitnessMaxåšä¸ºIndividualçš„fitnessç‰¹æ€§(attribute)</li></ol><ol start=4><li>å®šä¹‰createIndividualæ–¹ç¨‹ï¼šè¯¥æ–¹ç¨‹å¯ä»¥ç”Ÿæˆé•¿åº¦ä¸ºINDIVIDUAL_LENGTHçš„åˆ—è¡¨ï¼Œé€šè¿‡è°ƒç”¨genBinaryå‡½æ•°ï¼Œåˆ—è¡¨å†…æ¯ä¸ªå…ƒç´ éšæœºä¸º0æˆ–1.</li></ol><ol start=5><li>å®šä¹‰createPopulationæ–¹ç¨‹ï¼šè¯¥æ–¹ç¨‹å¯ä»¥ç”Ÿæˆé•¿åº¦å¾…å®šçš„åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ ç”±createIndividualæ–¹ç¨‹åˆ›å»ºã€‚</li></ol><ul><li>æ³¨æ„createPopulationæ–¹ç¨‹å¹¶æ²¡æœ‰å®šä¹‰åˆ—è¡¨çš„é•¿åº¦ï¼Œè¿™æ˜¯å› ä¸ºtoolbox.registerä¸­ç”¨åˆ°äº†functools.partialæ–¹ç¨‹ï¼Œå°šæœªå®šä¹‰çš„å‚æ•°ä¼šä»¥*argsæˆ–**kwargsçš„å½¢å¼ä¼ é€’ç»™tools.initRepeatæ–¹ç¨‹ã€‚</li></ul><p>å¦‚æœè¯»è€…å¯¹DEAPæ¡†æ¶å†…çš„æ–¹ç¨‹ä¸å¤ªäº†è§£ï¼Œçœ‹å®Œä¸Šè¿°è§£é‡Šåè¿˜æ˜¯æ„Ÿè§‰äº”é‡Œé›¾ä¸­ï¼Œå»ºè®®æŸ¥çœ‹æœ¬ç³»åˆ—å‰ä¸¤æœŸæ–‡ç« ï¼Œæˆ–è€…åˆ°DEAPå®˜ç½‘ä¸Šå¤šäº†è§£ä¸‹è¿™äº›æ–¹ç¨‹çš„å®šä¹‰ã€‚</p><h3 class=pgc-h-arrow-right>3.4. å®šä¹‰é€‚åº”åº¦å‡½æ•°</h3><pre><code># 4. define evaluation functiontoolbox.register("evaluate", lambda ind: (sum(ind),))</code></pre><p>åœ¨OneMaxé—®é¢˜ä¸­ï¼Œé€‚åº”åº¦å‡½æ•°å³ä¸ºä¸ªä½“ï¼ˆç”¨äºŒè¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ä¸Šæ‰€æœ‰æ•°å­—ä¹‹å’Œ,å› æ­¤æˆ‘ä»¬å°†é€‚åº”åº¦å‡½æ•°å®šä¹‰ä¸º(sum(ind),)ã€‚</p><p><strong>åœ¨è¿™é‡Œè¯·ç‰¹åˆ«æ³¨æ„</strong>ï¼š</p><ul><li>å› ä¸ºDEAPæ¡†æ¶æ”¯æŒæœ‰å¤šä¸ªç›®æ ‡çš„é€‚åº”åº¦å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠé€‚åº”åº¦å‡½æ•°çš„è¾“å‡ºå®šä¹‰ä¸ºå…ƒç»„ã€‚</li><li>evaluateæ˜¯å…³é”®è¯ï¼Œè‹¥è¦ä½¿ç”¨DEAPæ¡†æ¶ï¼Œå¿…é¡»ä½¿ç”¨evaluateè¿™ä¸ªå•è¯æ¥å‘½åé€‚åº”åº¦å‡½æ•°ã€‚</li></ul><h3 class=pgc-h-arrow-right>3.5. å®šä¹‰é—ä¼ ç®—æ³•è¿ç®—ç¬¦ï¼ˆé€‰æ‹©ï¼Œæ‚äº¤ï¼Œçªå˜ï¼‰</h3><pre><code># 5. define operatorstoolbox.register("select", tools.selTournament, tournsize=2)toolbox.register("mate", tools.cxOnePoint)toolbox.register("mutate", tools.mutFlipBit, indpb=1.0/INDIVIDUAL_LENGTH)</code></pre><ul><li>select:é”¦æ ‡èµ›æ³•ä½œä¸ºé€‰æ‹©è¿ç®—ç¬¦,tournsizeè¡¨ç¤ºé”¦æ ‡èµ›çš„å¤§å°</li><li>mate:å•ç‚¹æ‚äº¤ä½œä¸ºæ‚äº¤è¿ç®—ç¬¦</li><li>mutate:å¤šä½ç¿»è½¬çªå˜ä½œä¸ºçªå˜è¿ç®—ç¬¦ï¼Œindpbè¡¨ç¤ºäº†æ¯ä¸€ä¸ªä½ç½®ä¸ŠåŸºå› çªå˜çš„æ¦‚ç‡ã€‚åœ¨æœ¬æ–‡ä¸­INDIVIDUAL_LENGTHé»˜è®¤ä¸º100ï¼Œ å³æ¯ä¸ªä½“æ ¼ç”±ä¸€ç™¾ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦çªå˜çš„æ¦‚ç‡ä¸º1%</li></ul><p><strong>è¯·ç‰¹åˆ«æ³¨æ„ï¼š</strong></p><p>select, mate, mutateéƒ½æ˜¯DEAPæ¡†æ¶ä¸­çš„å…³é”®è¯ï¼Œåœ¨å®šä¹‰è¿ç®—ç¬¦æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ä½¿ç”¨è¿™å‡ ä¸ªå•è¯ã€‚</p><h3 class=pgc-h-arrow-right>3.6. è¿è¡Œé—ä¼ ç®—æ³•</h3><pre><code># Genetic Algorithm flow:def main():    # create population    population = toolbox.createPopulation(n=POPULATION_SIZE)    # initialize statistics    stats = tools.Statistics(lambda ind: ind.fitness.values)    stats.register("max", np.max)    stats.register("avg", np.mean)    # Genetic Algorithm    population, logbook = algorithms.eaSimple(population, toolbox, cxpb=P_CROSSOVER,     mutpb=P_MUTATION, ngen=MAX_GENERATIONS,stats=stats, verbose=True)    # gather statistics    maxFitnessValues, meanFitnessValues = logbook.select("max", "avg")    # plot statistics:    plt.plot(maxFitnessValues, color='red',label="Max Fitness")    plt.plot(meanFitnessValues, color='green',label="Average Fitness")    plt.legend()    plt.xlabel('Generation')    plt.ylabel('Fitness')    plt.title('Max and Average Fitness over Generations')    plt.show()    print(max(population,key=lambda ind:sum(ind)))if __name__ == "__main__":    main()</code></pre><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†main()æ–¹ç¨‹ï¼Œè¿è¡Œè¯¥æ–¹ç¨‹å°±å¯ä»¥è¿›è¡Œé—ä¼ ç®—æ³•çš„è¿ç®—ï¼ŒåŒæ—¶ç”Ÿæˆå¯¹åº”çš„ç»Ÿè®¡æ•°æ®ä¸å›¾è¡¨ã€‚</p><p>è¯¥æ–¹ç¨‹ä¸­æœ‰ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol start=1><li>åˆ›å»ºç§ç¾¤:ç§ç¾¤å¤§å°ä¸ºPOPULATION_SIZE</li><li>åˆå§‹åŒ–stats: æŠŠä¸ªä½“çš„é€‚åº”åº¦æ”¶é›†è¿›tools.Statisticså¯¹è±¡ã€‚</li><li>é€šè¿‡algorithms.eaSimpleæ–¹ç¨‹è¿è¡Œé—ä¼ ç®—æ³•ï¼Œå¹¶å°†æœ€ç»ˆçš„ç§ç¾¤ä¸ç»Ÿè®¡æ•°æ®åˆ†åˆ«å­˜å…¥populationå’Œlogbbokå˜é‡ï¼š</li></ol><ul><li>populationï¼šåˆå§‹çš„ç§ç¾¤</li><li>toolboxï¼štoolboxå˜é‡ï¼Œè¯¥å˜é‡å†…åŒ…æ‹¬äº†æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„evaluate, select, mate å’Œ mutateæ–¹ç¨‹</li><li>cxpbï¼šæ‚äº¤æ¦‚ç‡</li><li>mutpbï¼šçªå˜æ¦‚ç‡</li><li>ngenï¼šæœ€å¤§è¿­ä»£ä»£æ•°</li><li>statsï¼šStatisticså¯¹è±¡ï¼Œç”¨ä»¥å‚¨å­˜è¿­ä»£è¿‡ç¨‹ä¸­æ¯ä¸€ä»£ç§ç¾¤çš„æ•°æ®</li><li>verboseï¼šåœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ˜¯å¦å°†Statisticsè¾“å‡ºè‡³æ ‡å‡†è¾“å‡º</li></ul><ol start=4><li>ä»logbookå˜é‡ä¸­è·å–æ¯ä¸€ä»£é€‚åº”åº¦çš„æœ€å¤§å€¼å’Œå‡å€¼</li></ol><ol start=5><li>ä½¿ç”¨æ”¶é›†çš„æ•°æ®ç”»å›¾ï¼Œå¹¶æ˜¾ç¤ºé€‚åº”åº¦æœ€é«˜çš„ä¸ªä½“ï¼Œå³æœ€ä¼˜è§£ã€‚</li></ol><div class=pgc-img><img alt="é—ä¼ ç®—æ³•(Python) #5 ç”¨DEAPæ¡†æ¶è§£å†³OneMaxé—®é¢˜" onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/3279ffb8082c491a967c683ae24bdfcb><p class=pgc-img-caption></p></div><h2 class=pgc-h-arrow-right>4. è¿ç®—ç»“æœ</h2><p>ç”±ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ç¬¬38ä»£ç®—æ³•å·²ç»äº§ç”Ÿäº†æœ€ä¼˜è§£ï¼Œå³ä¸ªä½“æ‰€æœ‰ä½ç½®ä¸Šéƒ½ä¸º1ï¼š[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</p><p><br></p><p>å½“æˆ‘ä»¬è®¾ç½®verbose=Trueæ—¶ï¼Œalgorithms.eaSimpleä¼šåœ¨è¿­ä»£è¿‡ç¨‹ä¸­å®æ—¶ç”Ÿæˆæ¯ä¸€ä»£çš„æ•°æ®å¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼š</p><pre><code>gen     nevals  max     avg  0       200     65      50.351       191     62      52.9052       175     65      55.2253       189     67      57.3454       169     68      59.25 5       176     72      61.2856       170     73      63.3457       182     73      65.1658       179     74      66.8359       181     78      68.47510      188     80      70.13 11      178     82      71.95 12      189     81      73.75513      188     82      75.14514      194     83      76.75515      176     83      78.29 16      182     83      79.35 17      169     85      80.34 18      177     86      81.37 19      178     86      82.43520      184     87      83.31 21      179     88      84.17522      179     89      84.83523      179     90      85.57524      188     91      86.52525      189     93      87.55 26      181     94      88.44 27      190     94      89.31 28      185     95      89.94 29      174     96      90.7  30      188     98      91.41 31      180     98      92.19532      177     98      93.00533      179     98      93.83 34      175     98      94.55535      185     99      95.16536      179     99      95.72537      188     99      96.34538      182     100     97.0439      184     100     97.6340      183     100     98.0341      177     100     98.3742      192     100     98.68543      186     100     98.98544      175     100     99.32545      187     100     99.56546      171     100     99.7347      180     100     99.8948      186     100     99.8749      189     100     99.9150      187     100     99.9</code></pre><h2 class=pgc-h-arrow-right>5. å°ç»“</h2><p>æœ¬æ–‡ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨DEAPæ¡†æ¶æ¥è§£å†³OneMaxé—®é¢˜,æœ¬ç³»åˆ—çš„æ¥ä¸‹æ¥å‡ ç¯‡æ–‡ä¸­ï¼Œæˆ‘å°†è¯¦ç»†è§£é‡Šalgorithms.eaSimpleå¦‚ä½•è¿ä½œï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰tools.Statisticså’Œlogbookã€‚</p><h2 class=pgc-h-arrow-right>6. å®Œæ•´ä»£ç </h2><pre><code># 1.load modulesfrom deap import base,creator,tools,algorithmsimport randomimport numpy as npimport matplotlib.pyplot as plttoolbox = base.Toolbox()# 2.parameters:INDIVIDUAL_LENGTH = 100  # length of bit string to be optimizedPOPULATION_SIZE = 200P_CROSSOVER = 0.9  # probability for crossoverP_MUTATION = 0.1   # probability for mutating an individualMAX_GENERATIONS = 50random.seed(39)# 3.create individual and populationtoolbox.register("genBinary", random.randint, 0, 1)creator.create("FitnessMax", base.Fitness, weights=(1.0,))creator.create("Individual", list, fitness=creator.FitnessMax)toolbox.register("createIndividual", tools.initRepeat, creator.Individual, toolbox.genBinary, INDIVIDUAL_LENGTH)toolbox.register("createPopulation", tools.initRepeat, list, toolbox.createIndividual)# 4. define evaluation functiontoolbox.register("evaluate", lambda ind: (sum(ind),))# 5. define operatorstoolbox.register("select", tools.selTournament, tournsize=2)toolbox.register("mate", tools.cxOnePoint)toolbox.register("mutate", tools.mutFlipBit, indpb=1.0/INDIVIDUAL_LENGTH)# Genetic Algorithm flow:def main():    # create population    population = toolbox.createPopulation(n=POPULATION_SIZE)    # initialize statistics    stats = tools.Statistics(lambda ind: ind.fitness.values)    stats.register("max", np.max)    stats.register("avg", np.mean)    # Genetic Algorithm    population, logbook = algorithms.eaSimple(population, toolbox, cxpb=P_CROSSOVER,     mutpb=P_MUTATION, ngen=MAX_GENERATIONS,stats=stats, verbose=True)    # gather statistics    maxFitnessValues, meanFitnessValues = logbook.select("max", "avg")    # plot statistics:    plt.plot(maxFitnessValues, color='red',label="Max Fitness")    plt.plot(meanFitnessValues, color='green',label="Average Fitness")    plt.legend()    plt.xlabel('Generation')    plt.ylabel('Fitness')    plt.title('Max and Average Fitness over Generations')    plt.show()if __name__ == "__main__":    main()</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é—ä¼ ','Python','DEAP'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>