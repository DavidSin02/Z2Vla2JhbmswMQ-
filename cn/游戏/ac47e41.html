<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>用进化论解决算法问题？——遗传算法简介 | 极客快訊</title><meta property="og:title" content="用进化论解决算法问题？——遗传算法简介 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="http://p1.pstatp.com/large/pgc-image/672297c1092746e4b6207ce5465ba759"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/ac47e41.html><link rel=canonical href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/ac47e41.html><meta property="article:published_time" content="2020-10-29T20:46:33+08:00"><meta property="article:modified_time" content="2020-10-29T20:46:33+08:00"><meta name=Keywords content><meta name=description content="用进化论解决算法问题？——遗传算法简介"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E6%B8%B8%E6%88%8F/ac47e41.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>用进化论解决算法问题？——遗传算法简介</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E6%B8%B8%E6%88%8F.html>游戏</a></span></div><div class=post-content><div><p>说起生物进化论，几乎每个人都耳熟能详：例如物竞天择、适者生存、优胜劣汰等等。生物进化论是近两百年前英国科学家查尔斯·达尔文（Charles Darwin）提出的，虽然从提出开始就饱受争议，但并不妨碍其成为当代生物学的核心思想之一。你知道吗，这个理论不仅可用于生物学领域，还可以用来构建计算机算法呢！</p><p><strong>遗传算法（Genetic Algorithm，GA）是计算数学中用于解决最优化问题的搜索算法，是进化算法的一种。进化算法最初就是借鉴了达尔文进化论中的一些现象而发展起来的，这些现象包括遗传、突变、自然选择以及杂交等。</strong></p><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/672297c1092746e4b6207ce5465ba759><p class=pgc-img-caption></p></div><p>遗传算法由密歇根大学的约翰·霍兰德（John Holland）于二十世纪六十年代率先提出。在二十世纪八十年代中期之前，对于遗传算法的研究还仅仅限于理论方面，直到在匹兹堡召开了第一届世界遗传算法大会。随着计算机计算能力的发展和实际应用需求的增多，越来越多种类的遗传算法出现并被用于许多领域中。财富杂志500强企业中大多数都用它进行时间表安排、数据分析、未来趋势预测、预算、以及解决很多其他商业智能中的组合优化问题。日本新干线N700系列车型独特的空气动力造型车鼻，就是遗传算法计算出来的结果。</p><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/pgc-image/7ef61762a46347b384ffb53c970e8ed3><p class=pgc-img-caption></p></div><p>遗传算法通常的实现方式，就是用程序来模拟生物种群进化的过程。对于一个求最优解的问题，我们可以把一定数量的候选解（称为个体）抽象地表示为染色体，使种群向更好的解来进化。大家知道，使用算法解决问题的时候，解通常都是用数据或者字符串等表示的，而这个数据或字符串对应到生物中就是某个个体的“染色体”。进化从完全随机个体的种群开始，之后一代一代发生。在每一代中评价其在整个种群的适应度，从当前种群中随机地选择多个个体（基于它们的适应度），通过自然选择和突变产生新的种群，该种群在算法的下一次迭代中成为当前种群。其具体的计算步骤如下：</p><ol><li><strong>编码</strong>：将问题空间转换为遗传空间；</li><li><strong>生成初始种群</strong>：随机生成P个染色体；</li><li><strong>种群适应度计算</strong>：按照确定的适应度函数，计算各个染色体的适应度；</li><li><strong>选择</strong>：根据染色体适应度，按照选择算子进行染色体的选择；</li><li><strong>交叉</strong>：按照交叉概率对被选择的染色体进行交叉操作，形成下一代种群；</li><li><strong>突变</strong>：按照突变概率对下一代种群中的个体进行突变操作；</li><li>返回第3步<strong>继续迭代</strong>，直到满足终止条件。</li></ol><p>看到这里你也许会问：这里说的算法，好像就是高中课本上讲的生物遗传学呀？没错，遗传算法就是这样模拟生物遗传过程的，下面让我们看一些具体例子吧。</p><hr><h1><strong>0/1揹包问题</strong></h1><p>揹包问题是一个典型的优化组合问题：有一个容量固定的揹包，已知n个物品的体积及其价值，我们该选择哪些物品装入揹包使得在其容量约束限制之内所装物品的价值最大？比如：揹包容量限制为9，有4个物品的体积为{2,3,4,5}，其价值则分别是{3,4,5,7}。</p><p>揹包问题在计算理论中属于NP-完全问题，传统的算法是动态规划法，可求出最优总价值为12，其时间复杂度对于输入是指数级的。而如果用贪心算法，计算物品性价比依次为{1.5,1.33,1.25,1.4}，依次选择物品1和4，总价值只能达到10，这并非最优解。</p><p>现在我们试用遗传算法求解这个问题：</p><p><strong>1. 编码</strong></p><p>将待求解的各量表示成长度为n的二进制串。例如：1010代表一个解，它表示将第1、3号物体放入揹包中，其它的物体则不放入。</p><p><strong>2. 生成初始种群</strong></p><p>本例中，群体规模的大小取为4，即群体由4个个体组成，每个个体可通过随机的方法产生。例如：</p><p><strong>a1 = [1, 1, 1, 1]</strong></p><p><strong>a2 = [1, 0, 1, 0]</strong></p><p><strong>a3 = [1, 0, 0, 1]</strong></p><p><strong>a4 = [1, 0, 0, 0]</strong></p><p><strong>3. 种群适应度计算</strong></p><p>对每个个体，计算所有物体的体积totalSize，所有物体的价值totalValue，以及个体适应度fit。若所有物体的体积小于揹包容量C，fit就是totalValue，否则应进行惩罚，fit应减去alpha∗(totalSize−C) ，这里我们取alpha=2，得到如下结果：</p><p><strong>a1 = [1, 1, 1, 1], totalSize = 14, totalValue = 19, fit = 9</strong></p><p><strong>a2 = [1, 0, 1, 0], totalSize = 6, totalValue = 8, fit = 8</strong></p><p><strong>a3 = [1, 0, 0, 1], totalSize = 7, totalValue = 10, fit = 10</strong></p><p><strong>a4 = [1, 0, 0, 0], totalSize = 2, totalValue = 3, fit = 3</strong></p><p><strong>4. 选择</strong></p><p>根据染色体适应度，我们可以采用轮盘赌进行染色体的选择，即与适应度成正比的概率来确定每个个体复制到下一代群体中的数量。具体操作过程如下：</p><ul><li>先计算出群体中所有个体的适应度的总和。</li><li>然后用每个个体适应度除以总和，结果就是个体被遗传到下一代群体中的概率。</li><li>每个概率值组成一个区间，全部概率值之和为1。</li><li>最后再产生一个0到1之间的随机数，依据该随机数出现在上述哪一个区间内来确定各个个体被选中的次数。</li></ul><p>在本例中，适应度总和为30，p(a1)=30.00%，p(a2)=26.66%，p(a3)=33.33%，p(a4)=10.00%。因此区间1为[0,0.3]，区间2为[0.3,0.5666]，区间3为[0.5666,0.9]，区间4为[0.9,1]。 经过4次选择，a1被选1次，a2被选2次，a3被选1次， a4落选：</p><p><strong>b1 = [1, 0, 1, 0], totalSize = 6, totalValue = 8, fitValue = 8</strong></p><p><strong>b2 = [1, 0, 0, 1], totalSize = 7, totalValue = 10, fitValue = 10</strong></p><p><strong>b3 = [1, 0, 1, 0], totalSize = 6, totalValue = 8, fitValue = 8</strong></p><p><strong>b4 = [1, 1, 1, 1], totalSize = 14, totalValue = 19, fitValue = 9</strong></p><p>经过选择，我们淘汰了适应度最差的个体a4。</p><p><strong>5. 交叉</strong></p><p>采用单点交叉的方法，先对群体进行随机配对，其次随机设置交叉点位置，最后再相互交换配对染色体之间的部分基因。</p><p>在本例中， b1与b4在第3位后交叉，生成后代：</p><p><strong>c1 = [1, 0, 1, 1], totalSize = 11, totalValue = 15, fitValue = 11</strong></p><p><strong>c2 = [1, 1, 1, 0], totalSize = 9, totalValue = 12, fitValue = 12</strong></p><p>b2与b3在第2位后交叉，生成后代：</p><p><strong>c3 = [1, 0, 1, 0], totalSize = 6, totalValue = 8, fitValue = 8</strong></p><p><strong>c4 = [1, 0, 0, 1], totalSize = 7, totalValue = 10, fitValue = 10</strong></p><p>我们可以看出，经过交叉，后代的适应值相比前代有所提高。</p><p><strong>6. 突变</strong></p><p>我们采用基本位变异的方法来进行变异运算，首先确定出各个个体的基因变异位置，然后依照某一概率将变异点的原有基因值取反。</p><p>本例中，c1的第1位发生突变：</p><p><strong>c1 = [0, 0, 1, 1], totalSize = 9, totalValue = 12, fitValue = 12</strong></p><p><strong>c2 = [1, 1, 1, 0], totalSize = 9, totalValue = 12, fitValue = 12</strong></p><p><strong>c3 = [1, 0, 1, 0], totalSize = 6, totalValue = 8, fitValue = 8</strong></p><p><strong>c4 = [1, 0, 0, 1], totalSize = 7, totalValue = 10, fitValue = 10</strong></p><p>若突变之后最大的适应值个体已经符合期望的价值则停止，否则返回第3步继续迭代。可以看出我们已经找到了2个最优解c1与c2。</p><hr><h1>八皇后问题</h1><p>八皇后问题是算法学中一个古老而著名的问题，由国际象棋棋手马克斯·贝瑟尔（Max Bezzel）于1848年提出：如何能够在8×8的国际象棋棋盘上放置八个皇后，使得任何一个皇后都无法直接吃掉其他的皇后？为了达到此目的，任两个皇后都不能处于同一条横行、纵行或斜线上。</p><p>下图就是八皇后问题的一个解：</p><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/8775015cc49346e3b7896df3fc26f577><p class=pgc-img-caption></p></div><p>以往我们解决八皇后问题都是采用穷举法或者回溯法，然而即使采用回溯法，需要搜索的空间仍然很大。这里我们试用遗传算法解决这个问题：</p><p><strong>1. 编码</strong></p><p>染色体的长度取决于皇后的个数，本例中染色体长度即为8。染色体中每个基因所处的位置表示其在棋盘上的行号，基因值表示其所在的列号。例如，上图可以表示为染色体53607142，表示第0行皇后放在第5列，第1行皇后放在第3列，第2行皇后放在第6列，第3行皇后放在第0列，以此类推。八皇后问题中的任意两个皇后不能出现在同列，因此染色体中的基因取值（0~7）不可重复。</p><p><strong>2. 生成初始种群</strong></p><p>随机生成8个初始染色体，他们的染色体中的基因取值各不相同，也就是满足所有皇后都不处于同行同列，但是可能并不满足对角线上是否出现互攻。</p><p><strong>3. 种群适应度计算</strong></p><p>在对某一染色体上某两个皇后的位置进行比较的时候，可以求其行号之差的绝对值与列号之差的绝对值， 若相等则说明互攻成立。</p><p>设某一染色体的互攻次数用N表示，其初始值等于0；将第0行皇后与第1~7行皇后进行比较，每出现一次互攻则N的值加1；将第1行皇后与第2~7行皇后进行比较，每出现一次互攻则N的值加1；以此类推。 如果染色体的N值为0则表示未发生互攻，表示已找到一个可行解。如果N不为0，一般说来适应度越大则N的值越小，也就是说适应度与N成反比。在这里对染色体的N求倒数就得到其适应度。例如，所有皇后都排在对角线上时，染色体01234567的N为7+6+5+4+3+2+1=28，其适应度仅为0.0357。</p><p><strong>4. 选择</strong></p><p>我们同样采用轮盘赌进行染色体的选择。</p><p><strong>5. 交叉</strong></p><p>我们采用单点交叉的方法，先对群体进行随机配对，对于每一对染色体，首先随机选取两点截取一段基因，例如：染色体01|24|3675和12|30|4576交换基因后变为01|30|3675和12|24|4576，这样生成的两条染色体并不合法，因此要对中间段外的基因进行交换，从而生成合法的染色体：41|30|2675与13|24|0576，交叉完成。</p><p><strong>6. 突变</strong></p><p>按照突变概率对下一代种群中的个体进行突变操作，这里对突变个体的染色体随机选择两个基因进行互换，例如对第1和6进行互换： 突变之前的染色体是72061453，突变之后变为42061753（这其实就是一个最优解）。</p><p><strong>7. 继续迭代</strong></p><p>返回第3步继续迭代，直到取得N为0的解。</p><p>采用随机的穷举法或者回溯法得到八皇后问题的一个解，需要几千次甚至上万次的迭代，而采用遗传算法，只需要百余次甚至数十次的迭代就能找到，厉害吧！</p><hr><h1>遗传算法特点</h1><p>最后，让我们归纳一下遗传算法在解决优化问题过程中的一些特点：</p><ul><li>遗传算法在适应度函数选择不当的情况下有可能收敛于局部最优，而不能达到全局最优。如同爬山一样，有时你爬到了一座山的最高点，但周围也许还有更高的山可以爬。</li></ul><ul><li>初始种群的数量很重要，如果初始种群数量过多，算法会占用大量系统资源；如果初始种群数量过少，算法很可能忽略掉最优解。</li></ul><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/pgc-image/8d26b9e9be894ed19418941791f3c08e><p class=pgc-img-caption></p></div><ul><li>对于每个解，一般根据实际情况进行编码，这样有利于编写突变函数和适应度函数。在编码过的遗传算法中，每次变异的编码长度以及变异率也影响到遗传算法的效率。如果变异代码长度过长，变异的多样性会受到限制；如果变异代码过短，变异的效率会非常低下，选择适当的变异长度是提高效率的关键。</li></ul><ul><li>对于动态数据，用遗传算法求最优解比较困难，因为染色体种群很可能过早地收敛，而对以后变化了的数据不再产生变化。对于这个问题，学者提出了一些方法增加基因的多样性，从而防止过早的收敛。其中一种是所谓触发式超级变异，就是当染色体群体的质量下降（彼此的区别减少）时增加变异概率；另一种叫随机外来染色体，是偶尔加入一些全新的随机生成的染色体个体，从而增加染色体多样性。</li></ul><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/a75f6921c9bf4dedb6ba5ba7d5aa64bb><p class=pgc-img-caption></p></div><p>​</p><ul><li>选择过程很重要，但交叉和变异的重要性存在争议。一种观点认为交叉比变异更重要，因为变异仅仅是保证不丢失某些可能的解；而另一种观点则认为交叉过程的作用只不过是在种群中推广变异过程所造成的更新，对于初期的种群来说，交叉几乎等效于一个非常大的变异率，而这么大的变异很可能影响进化过程。</li></ul><ul><li>遗传算法很快就能找到良好的解，即使解空间很复杂。然而遗传算法并不一定总是最好的优化策略，优化问题要具体情况具体分析。所以在使用遗传算法的同时，也可以尝试其他算法，互相补充，甚至根本不用遗传算法。</li></ul><div class=pgc-img><img alt=用进化论解决算法问题？——遗传算法简介 onerror=errorimg.call(this); src=http://p9.pstatp.com/large/pgc-image/9ba050cc642f4f7297f922228f93d6c7><p class=pgc-img-caption></p></div><ul><li>遗传算法不能解决那些“大海捞针”的问题，所谓“大海捞针”问题就是没有一个确切的适应度函数表征个体好坏的问题，使得算法的进化失去导向。</li></ul><ul><li>对于任何一个具体的优化问题，调节遗传算法的参数可能会有利于更好更快收敛，这些参数包括个体数目、交叉率、变异率以及适应度函数。例如太大的变异率会导致丢失最优解，而过小的变异率会导致算法过早的收敛于局部最优点。</li></ul><p>参考文献</p><ol><li>维基百科.</li><li><em>Banzhaf, Wolfgang; Nordin, Peter; Keller, Robert; Francone, Frank: Genetic Programming – An Introduction</em>.</li><li>周明; 孙树栋. 遗传算法原理及应用.</li><li><em>Alsuwaiyel M H. Algorithms: Design Techniques and Analysis.</em></li></ol><p>我们会每周推送商业智能、数据分析资讯、技术干货和程序员日常生活，欢迎关注我们的头条&知乎公众号“<strong>微策略中国</strong>”或微信公众号“<strong>微策略 商业智能</strong>"。本期公众号有奖互动话题：<strong>除了本文里介绍的例子，你还知道遗传算法其他的应用吗？</strong>欢迎大家积极留言~~</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'算法','进化论','解决'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>