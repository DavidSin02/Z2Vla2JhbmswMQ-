<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>遗传算法-理解与实战 | 极客快訊</title><meta property="og:title" content="遗传算法-理解与实战 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="http://p3.pstatp.com/large/dfic-imagehandler/d816218a-77fb-426d-b163-aff1377d0a51"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e6%b8%b8%e6%88%8f/fdf46c8.html><link rel=canonical href=https://geekbank.cf/tw/%e6%b8%b8%e6%88%8f/fdf46c8.html><meta property="article:published_time" content="2020-10-29T20:46:33+08:00"><meta property="article:modified_time" content="2020-10-29T20:46:33+08:00"><meta name=Keywords content><meta name=description content="遗传算法-理解与实战"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E6%B8%B8%E6%88%8F/fdf46c8.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>遗传算法-理解与实战</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E6%B8%B8%E6%88%8F.html>游戏</a></span></div><div class=post-content><div><p>想要快速的了解一个算法，最好的方式便是拿个例子手动进行实现算一遍。这里借鉴了网络上的一个例子，求解如下的一个函数：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/dfic-imagehandler/d816218a-77fb-426d-b163-aff1377d0a51><p class=pgc-img-caption></p></div><p>其函数图像为：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p9.pstatp.com/large/dfic-imagehandler/9a5dcf22-736a-4aae-8aae-2fc0ec1ef75d><p class=pgc-img-caption></p></div><p><strong>求解流程与概念</strong></p><p><strong>染色体（编码）</strong></p><p>在遗传算法中，一个个体一般只包含一条染色体。染色体上包含这一组基因组。</p><ul><li>基因 ( Gene ) ：一个遗传因子。</li><li>染色体 ( Chromosome ) ：一组的基因。</li><li>个体 ( individual )：单个生物。</li><li>群体：一群个体</li></ul><p>在上述的例子中自变量只有x，所有只有一个gene，因此在本例子中：</p><p class=ql-align-center>一个个体=一条染色体=一个基因</p><p class=ql-align-center>一个个体=一条染色体=一个基因</p><ul><li>将x表达为gene的过程，称之为编码，常见的编码格式有二进制编码和浮点编码。本文采用2进制编码：设我们求解精度为 e=0.01</li><li>e=0.01，</li><li>那么我们需要将x的区间【-1，2】，切分成(2−−1)/0.01=300</li><li>(2−−1)/0.01=300 份。</li><li>又因为采用二进制编码所以实际需要的编码位数为</li></ul><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/pgc-image/1538296347762618449a9f8><p class=pgc-img-caption></p></div><ul><li>那么实际的求解精度为：</li></ul><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/78c53543-a45b-49c3-8309-b970441c1736><p class=pgc-img-caption></p></div><p class=ql-align-justify>有编码就存在着解码，按照本文的例子，可以想到以下的映射：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/ab009742-591e-4283-9be8-33bdc162e859><p class=pgc-img-caption></p></div><p>所以我们的解码公式为：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/3b46cf10-c056-473b-b5a8-444503bcbb58><p class=pgc-img-caption></p></div><p>ps:忽略上述由二进制转换为十进制的写法细节，不知道怎么写其数学表达式。</p><pre> 其中编码和解码的R代码GetCodeParameter &lt;- function(e, limitX){ # 获取编码的缩放比例，用于解码或者编码（二进制） # Args ： e:求解精度 # limitX:X的范围 # return: bitsPower:二进制编码位数 # e:真实求解精度 # diff:解码公式的中的常数 range &lt;- limitX[2] - limitX[1] # 区间长度 splitNum &lt;- range/e # 需要切割位数 bitsPower &lt;- 1  while(2^bitsPower &lt;= splitNum ){ bitsPower &lt;- bitsPower + 1 } xMax &lt;- max(limitX) e &lt;- range/2^bitsPower # 精度大小 diff &lt;- 2^bitsPower*e - xMax # 缩放差值 1  c(bitsPower, e, diff) # 返还结果 }DeCode &lt;- function(x, limitX, codeParameter){ # 解码 # Args: x:需要解码的个体 # limitX: x的取值范围 # codeParameter：包含bitsPower、e、diff # return:x：解码后的x x &lt;- strtoi(x, base = 2) # 转换为10进制 x &lt;- x*codeParameter[2]-codeParameter[3] x}</pre><p><strong>适者生存</strong></p><p>适者生存 ( The survival of the fittest )：对环境适应度高的个体参与繁殖的机会比较多，后代就会越来越多。适应度低的个体参与繁殖的机会比较少，后代就会越来越少。</p><p>适应度指的是求解的目标，该例子中适应度计算公式便是求解的目标：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/dfic-imagehandler/d816218a-77fb-426d-b163-aff1377d0a51><p class=pgc-img-caption></p></div><p>其中f(x) 便是适应度计算公式。</p><p>适者生存其实指的是对后代的一种选择策略，常见的选择策略有轮盘赌、锦标赛、精英保留策略。轮盘赌就是按照一定的概率抽取子代，重复n次，每个个体被抽中的概率为：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/884872da-c06f-40ba-9760-3a61d8cf5045><p class=pgc-img-caption></p></div><p># 有这么一个由10个个体组成的群体</p><p>group &lt;- CreateGroup(groupNum, codeParameter)</p><p># "101100100" "010001100" "000010010" "010010011" "000011101" # "011001111" "000001100" "000011010" "111100000" "000001011"</p><p># 计算每人的适应度</p><p>adaptive &lt;- myFun(group) # myFun = x*sin(10pi*x)+2</p><p># 2.464 1.893 2.153 1.870 2.673 # 2.084 1.253 2.845 2.694 1.159</p><p># 每人的生存概率 existProb &lt;- adaptive/sum(adaptive)</p><p># 0.117 0.090 0.102 0.089 0.127 # 0.099 0.059 0.135 0.128 0.055</p><p># 按照生存概率生成下一代，即重复放回抽取N次。</p><p>group &lt;- sample(group, groupNum,prob = existProb, replace = T)</p><p># 新的群体# "000001100" "000010010" "101100100" "010010011" "010001100" # "000011010" "000010010" "011001111" "000011010" "000001011"</p><p># 产生的下一代中有一些人被淘汰了</p><p>length(unique(group))</p><p>8</p><p class=ql-align-justify>锦标赛进行优胜劣汰的方法是：每次从群体中随机抽取p个人，将p个人中适应度最好的保留下来，重复N次，得到N个保留下的个体形成下一代。</p><p><strong>交叉</strong></p><p class=ql-align-justify>交叉指的是交换染色体片段产生后代两个新的后代，例如典型的单点交叉方式：随机选择两个个体进行交叉，按照以下的方式产生新的子代。</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/74a3dcf6-4897-4a92-b55b-474a7a34d97e><p class=pgc-img-caption></p></div><p>配上代码</p><pre>candidate &lt;- 1:groupNum # 可以进行配对的下标parentNum &lt;- floor(groupNum/2) # 父母对，这里10个群体有5对# 随机配成5对parentInx1 &lt;- sample(candidate, parentNum, replace = F) parentInx2 &lt;- sample(candidate[!candidate %in% parentInx1], parentNum, replace = F) parentInx1 # 3 5 8 9 6parentInx2# 10 4 1 7 2# 这里便形成了5对， 3与10配对， 5与4配对···# 以其中一对举例，"101100100" "000001011"# 随机产生交换点，codeParameter[1] = 9为编码的长度matingPoint &lt;- sample(2:(codeParameter[1]-1), 1, replace = T) matingPoint# 6previousGene_1 &lt;- substr(parent1, 1, matingPoint[i2]) # 提取前半段lastGene_1 &lt;- substr(parent1, matingPoint[i2]+1, codeParameter[1]) # 提取后半段previousGene_2 &lt;- substr(parent2, 1, matingPoint[i2])lastGene_2 &lt;- substr(parent2, matingPoint[i2]+1, codeParameter[1])# 交叉，产生后代child_1 &lt;- paste(previousGene_1, lastGene_2, sep="")child_2 &lt;- paste(previousGene_2, lastGene_1, sep="")child_1；child_2 #"101100011" "000001100"</pre><p>交叉操作存在着多种方式，例如：多点杂交、均匀杂交，离散杂交、中间杂交、线性杂交和扩展线性杂交等算法。其中有些交叉操作是基于编码的方式的。</p><p><strong>变异</strong></p><p>变异的作用，指的是染色体的某个基因片段或者某个基因点发生突变。例如单点突变可以通过下图进行表示：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p3.pstatp.com/large/dfic-imagehandler/621202bd-16cd-46cb-9412-776f59169d5a><p class=pgc-img-caption></p></div><p>突变的作用，是希望能够摆脱局部最优点，往更好的地方去。但是效果具有很大的随机性。</p><pre>mutationProb &lt;- 0.01 # 变异概率# 按照突变概率生成10个0和1，1表示发生突变，0表示没有发生突变mutationGene &lt;- sample(c(0,1), groupNum, replace = T, prob = c(1-mutationProb, mutationProb))mutationGene# 0 0 0 0 0 1 0 0 0 0# 变异位置下标mutationIdx &lt;- which(mutationGene==1)lenMutation &lt;- length(mutationIdx)if (lenMutation&gt; 0) { # 当存在变异的基因时 # 根据变异个数，随机k个产生变异位置 matingPoint &lt;- sample(1:codeParameter[1], lenMutation, replace = T)  for (i in 1:lenMutation){ # 变异 group[mutationIdx[i]] &lt;- Mutation(group[mutationIdx[i]], matingPoint[i])  } }</pre><p><strong>总流程</strong></p><p class=ql-align-justify>遗传算法的求解过程，是一个不断重复的过程，其流程如图所示：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/c6d97570-d6eb-4ac9-b58c-97f08ee5fd4f><p class=pgc-img-caption></p></div><p><strong>求解结果</strong></p><p class=ql-align-justify>贴图比较好展示：</p><div class=pgc-img><img alt=遗传算法-理解与实战 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/dfic-imagehandler/2a879d56-fe3b-44dc-8dc9-5fed8b2e63e4><p class=pgc-img-caption></p></div><p>这里附上一个小知识：</p><p>假如在R中想要将其过程以一个动态过程展示出来，可以通过animation包进行实现。其中HTML格式输出的话，还能进行交互式的调整展示的速度。</p><p>其过程也很简单，每次迭代时，都将图画扔进一个list当中然后print出来。例如：</p><pre>library(animation)saveHTML({ for(i in 1:93){ print(plotGA[[i]]) }})</pre><p><strong>代码汇总</strong></p><pre>#1. 初始化#--- 目标函数myFun &lt;- function(x){ # 求解函数 亦 适应度函数 x*sin(10*pi * x) + 2}#--- 求解参数limitX &lt;- c(-1, 2) # 【-1，2】之间取值e &lt;- 0.01 # 小数点后2位 groupNum &lt;- 50 # 产生的群体数mutationProb &lt;- 0.01 # 变异概率generation &lt;- 500 # 迭代数目plotGA &lt;- list() # 存储图片，画连续图用#2. 编码#--- 获取编码参数codeParameter &lt;- GetCodeParameter(e, limitX)#--- 产生群体group &lt;- CreateGroup(groupNum, codeParameter)#3. 种群繁衍过程for(i in 1:generation){ #3.1 计算适应度 deCodeGroup &lt;- DeCode(group, limitX, codeParameter)  adaptive &lt;- myFun(deCodeGroup)   #3.2 适者生存 existProb &lt;- adaptive/sum(adaptive)# 计算生存概率 group &lt;- sample(group, groupNum,prob = existProb, replace = T) # 生存的个体 #--- plot meanAdaptive &lt;- mean(adaptive) maxAdaptive &lt;- max(adaptive) main &lt;- paste("generation", i) plotGA[[i]] &lt;- plotShow(x = deCodeGroup, y = adaptive, limitX, main, meanAdaptive, maxAdaptive) #3.3 杂交（两两配对） #--- 选择配对对象 candidate &lt;- 1:groupNum parentNum &lt;- floor(groupNum/2) parentInx1 &lt;- sample(candidate, parentNum, replace = F) # parentInx2 &lt;- sample(candidate[!candidate %in% parentInx1], parentNum, replace = F)  #--- 选择配对点 matingPoint &lt;- sample(2:(codeParameter[1]-1), parentNum, replace = T) #--- 配对 newgroup &lt;- NULL for(i2 in 1:parentNum){ previousGene_1 &lt;- substr(group[parentInx1[i2]], 1, matingPoint[i2]) lastGene_1 &lt;- substr(group[parentInx1[i2]], matingPoint[i2]+1, codeParameter[1]) previousGene_2 &lt;- substr(group[parentInx2[i2]], 1, matingPoint[i2]) lastGene_2 &lt;- substr(group[parentInx2[i2]], matingPoint[i2]+1,codeParameter[1]) child_1 &lt;- paste(previousGene_1, lastGene_2, sep="") child_2 &lt;- paste(previousGene_2, lastGene_1, sep="") newgroup &lt;- c(newgroup, child_1, child_2) } single &lt;- which(!candidate %in% c(parentInx1, parentInx2)) # 将单身狗添加回去 group &lt;- c(newgroup, group[single]) #3.4 变异 #--- 选择变异基因 mutationGene &lt;- sample(c(0,1), groupNum, prob = c(1-mutationProb, mutationProb), replace = T) #--- 变异位置点 mutationIdx &lt;- which(mutationGene==1) #--- 变异(0 -&gt; 1; 1 -&gt; 0) lenMutation &lt;- length(mutationIdx) if( lenMutation&gt; 0){ matingPoint &lt;- sample(1:codeParameter[1], lenMutation, replace = F) for (i in 1:lenMutation){ group[mutationIdx[i]] &lt;- Mutation(group[mutationIdx[i]], matingPoint[i]) } } #3.5 结束条件 if((maxAdaptive - meanAdaptive) &lt;= e) break()}</pre><p>参考：https://blog.csdn.net/qq_27755195/article/details/56597467</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'遗传','实战','算法'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>