<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Android 你不知道的调试技巧（Debug操作汇总） | 极客快訊</title><meta property="og:title" content="Android 你不知道的调试技巧（Debug操作汇总） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/07a1f56522de4fa5a6b1a81191718b88"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/03aa40b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/03aa40b.html><meta property="article:published_time" content="2020-10-29T21:02:12+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:12+08:00"><meta name=Keywords content><meta name=description content="Android 你不知道的调试技巧（Debug操作汇总）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/03aa40b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Android 你不知道的调试技巧（Debug操作汇总）</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><blockquote class=warning><p>作者：金灿灿 来源：掘金</p></blockquote><p><strong>前言</strong></p><p>本文通过Android Studio工具来讲述你不曾知道的一些Debug小技巧。文中有许多操作，不需要死记硬背，只需浏览一遍，了解一番，增加个印象。等到要上手操作的时候，再忆起本文，回来查看查看。久而久之你就能熟能生巧，成为一代Debug大师！</p><h1 class=heading>Android Studio 版本</h1><p>使用版本为3.5.3</p><h1 class=heading>调试项目</h1><p>调试的项目只有一张页面，由 RecyclerView + 底部一个Button组成。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/07a1f56522de4fa5a6b1a81191718b88><p class=pgc-img-caption></p></div><p><br></p><h1 class=heading>使用Logcat查看日志技巧</h1><h2 class=heading>去除多余信息</h2><p>为了方便举例，我使用addOnScrollListener(...)方法来监听RecyclerView的滑动事件，然后在onScrolled(...)方法里，通过Log.d("recycler_view", "recycler view was Scrolled...")把信息打印到控制台，如下图所示：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/067b6316954f4f52b0a413fb20236d05><p class=pgc-img-caption></p></div><p>大家可能注意到，上图中有许多内容是我们不需要关心的，例如红圈里面的<strong>时间</strong>、<strong>线程</strong>与<strong>包名</strong>。这时我们可以点击右边工具栏的Logcat Header图标，来把这些信息移除，如：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e3f756b44a634a30a6d19a32e4e4794e><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e4ff32af05b34c74896265110a6171af><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1fcb636e8f43425cb7d218d4a85c3cb1><p class=pgc-img-caption></p></div><p>我们只保留一个TAG，这样我们Logcat界面就会变得清爽很多，看下效果：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0948754eb5f94483b07cf5855edd3990><p class=pgc-img-caption></p></div><h2 class=heading>过滤结果</h2><p>在Logcat界面的搜索栏中，我们可以输入自定义的TAG来过滤结果：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2a711a679d62439ea1ab2504212d9f34><p class=pgc-img-caption></p></div><p>但如果存在多个TAG的时候，我们应该把它们保存起来，这样才不仅方便我们回过头来继续查看，也无须在脑中开辟块空间把TAG名记住。来来来，一起动手来编辑一下过滤器配置：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/88a065a540d440d6a0c77d82f59b01fc><p class=pgc-img-caption></p></div><blockquote class=warning><p>图中左上角的“+”是添加，“-”是移除。</p><p><br></p></blockquote><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7a56753af01740be8e5309dd67b18ac8><p class=pgc-img-caption></p></div><p>添加完成之后，我们就不用在搜索栏中输入相应的TAG了，取而代之的是，直接点击右上角的<strong>过滤器</strong>，选择我们添加进去的TAG即可。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/57e3f299413d4174b2e8c859b7ae8384><p class=pgc-img-caption></p></div><h2 class=heading>折叠信息</h2><p>为了方便讲解，我在监听中的onScrollStateChanged(...)方法里，使用同一个TAG向控制台打印一条信息：Log.d("recycler_view", "state:" + newState)，如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/96353ae4ee664219b95ca017b7a4cb53><p class=pgc-img-caption></p></div><p><br></p><p>此时我们只想查看有关它state的值，并不关心其他信息。那么我们可以选中那些多余且不关心的<strong>子字符串</strong>，右键它，点击Fold lines like this。这样就为我们创建了一个<strong>过滤器</strong>。</p><p><strong>可以折叠所有包含我们选中的子字符串的字符串！</strong> 留下我们关心的信息：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d62517e2f6d24cf68a53290212abf536><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3855ef101e2b466c8b2c6be08cf2aee7><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0696f7d366454dc980689c2a50f771c7><p class=pgc-img-caption></p></div><p><br></p><p>现在我们再回过头看看刚才打印出来的这些Log，是不是顿时觉得眼睛<strong>轻松</strong>了很多！当然点击红圈里面的‘+’，可以随时展开或折叠。</p><h1 class=heading>Debug断点跟踪调试技巧</h1><h2 class=heading>基本使用</h2><p>启动Debug有<strong>两种方式</strong>，一种是点击Debug，即中间的那只小虫子，另一种是点击Attach debugger to Android process，即靠近右边带箭头的小虫子。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1ec43bdb66bf42f39dc9648e8f60e067><p class=pgc-img-caption></p></div><p><br></p><p>一般我推荐使用Attach debugger to Android process来进入调试模式，它能够在App处于运行状态时<strong>进入调试模式</strong>，而要是通过Debug进入调试，它会<strong>停止应用并重启</strong>。这样我们还需要一路寻找回我们需要调试的状态，就稍微有点烦心了。</p><p>我们点击带箭头的小虫子，弹出Choose Process窗口，选择对应进程，点击‘OK‘按钮，进入调试模式。</p><p>现在我们可以在代码中打上断点，打断点的方法就是点击目标行代码<strong>行号右侧的空白处</strong>，再点击一次就是取消断点，<strong>断点是可以上下拖动</strong>。</p><p>当App在运行时，如果击中了断点，则会在Debug窗口中显示断点信息。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7e3419c951574cf4b92da1b735db44e8><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cfd79c5ffe574a0e809cb35703c99f5a><p class=pgc-img-caption></p></div><h2 class=heading>工具栏操作按钮</h2><p>接着，来了解下Debug的操作按钮：</p><p><strong>断点管理区</strong>操作按钮：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b961b5ee395942f196e8210b513392f0><p class=pgc-img-caption></p></div><p><br></p><p>顺序从上到下：</p><ul><li>Resume Program：一是可从当前断点<strong>移动</strong>到下一个断点，断点间的代码自动执行；二是让App从暂停状态<strong>恢复</strong>到运行状态。</li><li>Pause Program：暂停App。</li><li>Stop：对于普通的JAVA项目则是退出调试，对于Android项目则是<strong>结束</strong>App运行。</li><li>View Breakpoints：查看所有断点，并可以<strong>管理配置</strong>断点的行为。</li><li>Mute Breakpoints：切换启用或禁用<strong>所有</strong>断点的状态。</li><li>Get Thread Dump：进入线程Dunmp界面。</li></ul><p><strong>调试区</strong>操作按钮：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3a6036b559a34749a5e5db035f64ddbf><p class=pgc-img-caption></p></div><p>顺序从左往右：</p><p><br></p><ul><li>Show Excution Point：<strong>定位</strong>到正在被执行的断点位置。</li><li>Step Over：单步执行，即<strong>前进到下一行</strong>代码。</li><li>Step Into：<strong>进入调用方法</strong>的第一行，不能跳到类库方法。</li><li>Force Step Info：与Step Into方法类似，只不过他<strong>能跳到类库的方法里</strong>。</li><li>Step Out：前进<strong>到当前方法之外</strong>的下一行，可与Step Into配合使用。</li><li>Drop Frame：返回到方法执行的<strong>初始点</strong>（下方有演示）。</li><li>Run to Cursor：跳转到<strong>光标所在处</strong>，需要当前断点已经执行到最后一个，且光标所在的代码行要符合<strong>由上到下的执行顺序</strong>，不能颠倒。</li></ul><p><strong>Drop Frame</strong>：可以用来在调试的时候，原本想点击Step Into进入方法内部看看，却<strong>不小心</strong>点了Step Over向下走了一行。如果调试运行的设备是Android10以上的版本，那么我们可以点击Drop Frame按钮——它的作用是可以把我们从当前方法<strong>拉出来</strong>，<strong>放回方法开始前的地方</strong>。接着点击Resume Program按钮，就相当于获取到了一次<strong>重新开始的机会</strong>！演示如下：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24fd16fed7ab4c28b40b2fab220bbac9><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>条件断点</h2><p>我们把断点打到循环体里的某行代码，想看看循环到某一次时的运行状态。难道此时我们要<strong>不停</strong>的点Resume Program按钮，直到跳转到满足我们要求的断点吗？</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/57b676ecaaee4bc6aa84b0b962871278><p class=pgc-img-caption></p></div><p>不，当然不需要。假如我们想查看断点在运行到第二十次时的状态，可以右击这个断点，在弹出的窗口中的Condition里加入任何<strong>布尔表达式</strong>：i==20（可以选择语句的语言），点击‘Done’按钮完成配置：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b8bdcb0d2d7540e998636892778f6e49><p class=pgc-img-caption></p></div><p>如果条件为“<strong>true</strong>”，当代码命中这个条件时，那么就会到达这个断点！</p><h2 class=heading>日志断点</h2><p>App在运行时击中我们打上的断点，立马会把断点信息显示在在Variables菜单中，然后我们就需要在整个菜单中<strong>找出我们想要的信息</strong>：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/119599d828d34276b322d42cfcf2b66d><p class=pgc-img-caption></p></div><p>这样有时还蛮麻烦的，我们真正想做的是直接在代码中打上Log，但却<strong>不想把Log语句在代码中打得到处都是</strong>，这时日志断点就派上用场了！</p><p>操作步骤：右击需要打Log的断点，在它弹出的窗口中<strong>取消选中</strong>Suspend（下面会介绍到），此时窗口会向下展开一些新内容。我们<strong>勾选</strong>Evaluate and log选项，并在其中添加上Log语句，点击‘Done’按钮。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/83e0d90c71d948a5b667530dac414352><p class=pgc-img-caption></p></div><p>现在，当线程遇上这个断点的时候并<strong>不会停止</strong>，它只会计算断点里的Log表达式，并把它<strong>记录到控制台</strong>，然后<strong>继续运行</strong>。</p><h2 class=heading>异常断点</h2><p>想必App在运行的过程中遇到各式各样未知性的异常导致的Crash常常令你抓狂，不过强大的Android Studio提供了<strong>异常断点</strong>的功能。帮助我们在调试运行的App遇到异常，能够<strong>先快速准确的定位到产生异常的地方</strong>，而非第一时间停止App的运行。</p><p>我们点击断点区工具栏上面的View Breakpoints按钮，呼出断点管理界面。然后点击‘+’，选择Java Exception Breakpoints。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15003277ed204b5bb1e1d35547e5af85><p class=pgc-img-caption></p></div><p>点击后呼出Enter Exception Class界面，我们在搜索栏中填入想要监控异常的关键字。Java代码选择NullPointerException，Kotlin代码选择KotlinNullPointerException，点击‘OK’按钮即可，如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/12f30739bdf54ef6a9d2d8d81889089a><p class=pgc-img-caption></p></div><p>不过！！在我模拟空指针异常的时候发现，如果用Java代码写的话，调试器确实能监控的到异常，并能定位产生异常的代码。但是！！我用Kotlin写的话，App直接Crash掉了。并未监控到异常，也没定位到产生异常的代码。</p><blockquote class=warning><p>不知道是我调试姿势有问题，还是暂时不支持Kotlin代码。</p></blockquote><h2 class=heading>变量赋值</h2><p>可以让我们在调试期间，<strong>通过更改断点监控到变量的值，来改变App执行的结果！</strong></p><p>具体操作如下：</p><p>首先我们在获取数据的循环体里打上断点。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b44260d527fb40d7bdbe237ce59348e3><p class=pgc-img-caption></p></div><p><br></p><p>通过Debug进入调试模式，在Variables菜单中，选中我们要改变的变量，右击它，在打开的选项中点击Set Value...。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a521938f8e424f4abf424d064c2f532c><p class=pgc-img-caption></p></div><p><br></p><p>我们把i=1更改为i=28，此时能清楚得看到，在代码中显示的变量i信息也从i:1变成了i:28。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/26ba3ac3b7e84c9f91c929c5c1b33589><p class=pgc-img-caption></p></div><p><br></p><p>在循环中，原本变量i的值是从1到30，但我们已经把初始i的值改为了28，点击断点区工具栏上的Resume Program按钮，原本需要循环30下才执行完毕的断点现在点3下便可完成。</p><p>现在来看看更改变量值后App的情况吧：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ee32686f40084108825ab9792a8c3e2d><p class=pgc-img-caption></p></div><h2 class=heading>Suspend 选项</h2><p>在我们右击断点的时候，你可能留意到Suspend选项，如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ae1d4ec7b2cf4041ac3f45999067f567><p class=pgc-img-caption></p></div><p><br></p><p>目前我们“All”与“Thread”之中选择了“All”，意味着在当前执行线程遇到该断点的时候，<strong>会停止App内的所有线程</strong>，这样就会停止App整个运行状态。</p><p>但是如果你正在处理一个多线程App，而你正在寻找一些特别麻烦的异步问题，你可以试着只去<strong>暂停那个撞到断点的线程</strong>。可把选中“All”改为选中“Thread”。</p><h2 class=heading>直到击中某一断点才启用</h2><p>为了方便举例，我在示例中RecyclerView的<strong>滑动监听里面</strong>与<strong>按钮的点击监听</strong>中分别打上断点。</p><p>由于断点被打在RecyclerView的滑动监听里，那么我们手指稍微一滑动，就会立即执行该断点。那么在调试的时候<strong>我想必须先击中按钮监听里面的断点，才允许执行RecyclerView的滑动监听里面的断点。</strong></p><p>此时，Disable until breakpoint is hit功能就派上用场了。</p><p>右击RecyclerView的滑动监听里断点，在弹出的窗口里面点击More：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/16eea623130c4feeace48b5864ddab27><p class=pgc-img-caption></p></div><p>我们就会进入到<strong>断点管理界面</strong>，在该断点的Disable until breakpoint is hit选项中，<strong>禁用断点，直到我们选择的按钮监听里断点被命中为止</strong>。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/920892d5204f424cbdcddee4717b6f58><p class=pgc-img-caption></p></div><p><br></p><p>现在手指滑动屏幕的时候并<strong>不会触发</strong>RecyclerVie滑动监听里面的断点，<strong>直到点击了按钮</strong>，触发了点击监听里面的断点，才被<strong>激活一次</strong>。意味着每次执行完该断点，就会被禁用掉，<strong>除非再点击一次按钮才被重新激活</strong>。演示如下：</p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/08905792cfe34c0c8ca2b527478fd3ae><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>禁用断点</h2><p>当已被打上的断点，我们暂时<strong>不需要</strong>命中它的时候，我们可以把它给<strong>禁用</strong>掉，右键断点，在弹出的窗口来取消勾选Enable选择。此时断点会变成一个<strong>空心圆</strong>。不过更方便的做法是通过“Alt + 点击”，Mac是“Opt + 点击”。这样就能让它在<strong>开/关的状态下切换</strong>：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d6fd2974e70441eb93c1a2c64f780d4c><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>断点组</h2><p>有时候我们在执行调试App功能的时候会遇到<strong>一些暂时不需要使用的断点</strong>，我们又不想把它们删掉，也许调试下个功能可能会用上，所以只能一个一个禁掉它们。</p><p>其实，只要我们学会使用<strong>断点组</strong>，这就方便多了！</p><p>右键断点，点击窗口的More，前往断点管理界面。我们还可以点击Debug窗口里的断点区工具栏中的View Breakpoint按钮也能前往。</p><p>在该界面中，可以看到所有断点都在上面。我们<strong>多选它们</strong>，右击，创建一个新的组，<strong>你可以把它们起名为你正在处理Bug的名字</strong>。</p><p>这里我起名为OnScrollListener，意味着该组的断点都来自addOnScrollListener(...)的监听里。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c493aa0c687f4ee2b6e61c8ffc1b8512><p class=pgc-img-caption></p></div><p><br></p><p>分组完毕后，你可以通过点击组的单选框来<strong>切换组内断点开/关的状态</strong>。当你处理完Bug后，可以选中组，并点击“-”，即可把它们<strong>全部删掉</strong>。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e6c027a4cbcc43919af4017357bca8be><p class=pgc-img-caption></p></div><h2 class=heading>Evaluate expression</h2><p>系统给Variables区的变量对象提供了<strong>表达式求值的功能</strong>。在抵达断点后，如果有变量对象。我们可以输入任何表达式，来<strong>实时查看</strong>表达式的计算结果。</p><p>首先，可通过点击工具栏上面的Evaluate expression按钮，或者右键目标代码选择Evaluate expression来呼出操作界面。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/2b96bd6637dc496f8e12b7b7837039f3><p class=pgc-img-caption></p></div><p><br></p><p>一般首次打开它的时候，是<strong>单行输入模式</strong>，我们输入一条textList[position]，点击‘Evaluate’按钮，就能在下方Result中浏览对象。如下图所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/805a908a0eda44998273b8c02e33b165><p class=pgc-img-caption></p></div><p><br></p><p>如果我们想输入<strong>更加丰富的表达式</strong>，那么单行模式不能满足我们的需求。点击输入框的右上角，将单行模式<strong>扩展为多行</strong>。这样，我们就能够输入更加丰富的表达式：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a9664d3b85a0490db025fd2c8357c892><p class=pgc-img-caption></p></div><p><br></p><blockquote class=warning><p>Evaluate expression 是非常适合充当实时检测器，它能够让我们清楚的观察到当前应用的状态。</p></blockquote><h1 class=heading>分析堆栈轨迹</h1><p>在合作开发项目中，也许我们会收到来自同事发来的一份包含调用栈的Bug报告，其实也就是一堆文本。我们复制Bug报告，回到Android Studio，点击工具栏上面的Analyze，然后点击Analyze Stack Trace...，我们会发现它找到了粘贴板上面的内容：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/11515ca2145d4009b21c67bf54787741><p class=pgc-img-caption></p></div><p><br></p><p>点击‘OK’按钮后，它会对我们的调用栈作一个全面的注解，并显示在控制台中。我们点击其中的<strong>链接</strong>，就会对我们的代码库进行一个快速的检索并<strong>定位</strong>代码：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的调试技巧（Debug操作汇总）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7c7d59cc77644a4cb31283fd8d64f4b4><p class=pgc-img-caption></p></div><p><br></p><h1 class=heading>总结</h1><p>本篇文章大部分内容来自谷歌官方的视频Android Studio: 调试的技巧与心得，我推荐大家可以关注下谷歌的官方账号。里面有很多优质的视频，都是由开发者本人来讲解的。</p><p>希望本文能给大家在调试App的时候提供多一条思路。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Android','调试','Debug'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>