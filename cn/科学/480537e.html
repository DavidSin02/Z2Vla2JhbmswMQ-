<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>CRC校验的原理 | 极客快訊</title><meta property="og:title" content="CRC校验的原理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/a212e57c64924087bce967236d9e3ab4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/480537e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/480537e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/480537e.html><meta property="article:published_time" content="2020-10-29T21:03:56+08:00"><meta property="article:modified_time" content="2020-10-29T21:03:56+08:00"><meta name=Keywords content><meta name=description content="CRC校验的原理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/480537e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>CRC校验的原理</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><h1>什么是CRC</h1><p>CRC（Cyclic Redundancy Check）中文译为循环冗余校验码。CRC被广泛应用于网络数据传输、软件保护等领域。</p><blockquote><p>它是一种根据网络数据数据包或电脑文件等数据产生简短固定位数校验码的一种散列函数，主要用来检测或校验数据传输或者保存后可能出现的错误。生成的数字在传输或者存储之前计算出来并且附加到数据后面，然后接收方进行检验确定数据是否发生变化。一般来说，循环冗余校验的值都是32位的整数。由于本函数易于用二进制的电脑硬件使用、容易进行数学分析并且尤其善于检测传输通道干扰引起的错误，因此获得广泛应用。此方是由W. Wesley Peterson于1961年发表。</p></blockquote><h1>CRC的特点</h1><p>CRC的主要特点就是:检错能力极强，开销很小，易于实现。从性能和开销上综合考虑，其远远优于奇偶校验及算术和校验等方式。</p><h1>CRC的原理</h1><p><strong>CRC生成基本理论</strong></p><p>由于计算机数据在计算机底层的表现为二进制串，所以任何数据都可以看成如下的多项式。</p><div class=pgc-img><img alt=CRC校验的原理 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a212e57c64924087bce967236d9e3ab4><p class=pgc-img-caption></p></div><p>多项式系数为0或者1，x为伪变量，x的指数表示系数在二进制中排列的位数。例如二进制数据01001001可以表示为如下的多项式：</p><div class=pgc-img><img alt=CRC校验的原理 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e2d014ba0ea945e0ace33d4cfb38da55><p class=pgc-img-caption></p></div><p>好叻，我们知道了数据如何表示为多项式了，那么如何得到这个校验码呢？其实是这样的啦：数据P(x)通过除以选定的多项式G(x)得到一个商Q(x)和余数R(x)。这个余数R(x)就是我们的校验码啦。公式表示如下：</p><blockquote>P(x)=Q(x)×G(x)+R(x)</blockquote><p>通常G(x)为16位或32位，由于P(x)原本的数据位数可能少于R(x)，为了得到16位或32位的R(x)我们需要将P(x)扩充到至少16位或32位以上，通常的做法是在P(x)后加上CRC的位数，如果是16位的CRC则需要添加16位，如果是32位则需要添加32位。如何得到R(x)呢？根据上面公式用P(x)除以G(x)得到的余数就是R(x)了，注意，这里的除法使用的是模2除法。</p><blockquote><p>模2除（按位除）做法与算术除法类似，但每一位除（减）的结果不影响其它位，即不向上一位借位。所以实际上就是异或。然后再移位移位做下一位的模2减。步骤如下：</p><p>a、用除数对被除数最高几位做模2减，没有借位。</p><p>b、除数右移一位，若余数最高位为1，商为1，并对余数做模2减。若余数最高位为0，商为0，除数继续右移一位。</p><p>c、一直做到余数的位数小于除数时，该余数就是最终余数。</p></blockquote><p>举例如下：</p><pre>假设有8位的数据P(x)为0100 1001（0x49），16位的标准CRC多项式G(x)为1000 0000 0000 0101（0x8005），则得到余数R(x)为0000 0010 1101 1010（0x02DA）</pre><p><strong>CRC校验基本理论</strong></p><p>发送端想要发送数据P(x)，接收端在收到数据之后为了校验数据是否损坏需要对接收到的数据进行校验。经过上述CRC生成基本原理我们可以计算得到余数R(x)即为CRC校验码，原始数据P(x)经过扩展后加上校验码R(x)即为发送端发送给接收端的数据:</p><div class=pgc-img><img alt=CRC校验的原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f64898896e3f4edb9f77a69de03550c2><p class=pgc-img-caption></p></div><p>接收端接到数据之后，做如下校验:</p><div class=pgc-img><img alt=CRC校验的原理 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b5636aebbe674761a2d95271511eee79><p class=pgc-img-caption></p></div><p><strong>注意：由于是模2除（模2减），所以R(x)+R(x)=0</strong>很明显如果信息传输的过程中没有发生错误,则接收到的数据信息多项式</p><div class=pgc-img><img alt=CRC校验的原理 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c4b3fd62da8b4b32805b36608ea914b2><p class=pgc-img-caption></p></div><p>一定可以被生成多项式（G(x)）整除,这就是CRC的检错原理。</p><p><strong>但是这一命题的逆命题并不成立,也就是说接收到的信息多项式可以被生成多项式整除,并不代表信息在传输中没有发生错误。</strong>CRC的检错能力</p><ol><li>CRC校验码能检查出全部单个错</li><li>CRC校验码能检查出全部离散的二位错</li><li>CRC校验码能检查出全部奇数个错</li><li>CRC校验码能检查出全部长度小于或等于K位的突发错</li><li>CRC校验码能以[1-（1/2）K-1]的概率检查出长度为（K+1）位的突发错</li></ol><blockquote><p>例如，如果K=16，CRC校验码能检查出小于或等于16位的所有突发错，并能以99.997%的概率检查出长度为17位的突发错，漏检的概率为0.003%。</p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'CRC','校验','原理'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>