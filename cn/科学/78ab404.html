<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ | æå®¢å¿«è¨Š</title><meta property="og:title" content="åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/5b3a5789ae2f47f89971a60551cc5128"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/78ab404.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/78ab404.html><meta property="article:published_time" content="2020-10-29T20:56:28+08:00"><meta property="article:modified_time" content="2020-10-29T20:56:28+08:00"><meta name=Keywords content><meta name=description content="åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/78ab404.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>ç§‘å­¦</a></span></div><div class=post-content><p>æœ¬é¢˜ä¸»è¦å’Œå›¾çš„éå†æ±‚è§£æœ€çŸ­è·¯å¾„ç›¸å…³ï¼Œå¯ä»¥ç”¨ Dijkstra æˆ–è€… Bellman-Ford ç®—æ³•è¿›è¡Œè§£å†³ã€‚</p><h1 class=pgc-h-arrow-right>åŸé¢˜</h1><p>ç»™ä½ ä¸€ä¸ªç”± n ä¸ªèŠ‚ç‚¹ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ç»„æˆçš„æ— å‘åŠ æƒå›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæè¿°è¾¹çš„åˆ—è¡¨ç»„æˆï¼Œå…¶ä¸­ edges[i] = [a, b] è¡¨ç¤ºè¿æ¥èŠ‚ç‚¹ a å’Œ b çš„ä¸€æ¡æ— å‘è¾¹ï¼Œä¸”è¯¥è¾¹éå†æˆåŠŸçš„æ¦‚ç‡ä¸º succProb[i] ã€‚</p><p>æŒ‡å®šä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«ä½œä¸ºèµ·ç‚¹ start å’Œç»ˆç‚¹ end ï¼Œè¯·ä½ æ‰¾å‡ºä»èµ·ç‚¹åˆ°ç»ˆç‚¹æˆåŠŸæ¦‚ç‡æœ€å¤§çš„è·¯å¾„ï¼Œå¹¶è¿”å›å…¶æˆåŠŸæ¦‚ç‡ã€‚</p><p>å¦‚æœä¸å­˜åœ¨ä» start åˆ° end çš„è·¯å¾„ï¼Œè¯· è¿”å› 0 ã€‚åªè¦ç­”æ¡ˆä¸æ ‡å‡†ç­”æ¡ˆçš„è¯¯å·®ä¸è¶…è¿‡ 1e-5 ï¼Œå°±ä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5b3a5789ae2f47f89971a60551cc5128><p class=pgc-img-caption></p></div><pre><code>è¾“å…¥ï¼šn = 3, edges = [[0,1],[1,2],[0,2]], succProb = [0.5,0.5,0.2], start = 0, end = 2è¾“å‡ºï¼š0.25000è§£é‡Šï¼šä»èµ·ç‚¹åˆ°ç»ˆç‚¹æœ‰ä¸¤æ¡è·¯å¾„ï¼Œå…¶ä¸­ä¸€æ¡çš„æˆåŠŸæ¦‚ç‡ä¸º 0.2 ï¼Œè€Œå¦ä¸€æ¡ä¸º 0.5 * 0.5 = 0.25</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5bd4088dab6743bf9bc34832848b47bf><p class=pgc-img-caption></p></div><pre><code>è¾“å…¥ï¼šn = 3, edges = [[0,1],[1,2],[0,2]], succProb = [0.5,0.5,0.3], start = 0, end = 2è¾“å‡ºï¼š0.30000</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e808bd20f85b47d391fdf998cc4483ce><p class=pgc-img-caption></p></div><pre><code>è¾“å…¥ï¼šn = 3, edges = [[0,1]], succProb = [0.5], start = 0, end = 2è¾“å‡ºï¼š0.00000è§£é‡Šï¼šèŠ‚ç‚¹ 0 å’Œ èŠ‚ç‚¹ 2 ä¹‹é—´ä¸å­˜åœ¨è·¯å¾„</code></pre><p>æç¤ºï¼š</p><ul><li>2 &lt;= n &lt;= 10^4</li><li>0 &lt;= start, end &lt; n</li><li>start != end</li><li>0 &lt;= a, b &lt; n</li><li>a != b</li><li>0 &lt;= succProb.length == edges.length &lt;= 2*10^4</li><li>0 &lt;= succProb[i] &lt;= 1</li><li>æ¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€å¤šæœ‰ä¸€æ¡è¾¹</li></ul><h1 class=pgc-h-arrow-right>è§£é¢˜</h1><h1 class=pgc-h-arrow-right>é¦–æ¬¡å°è¯•</h1><p>åŸæœ¬ï¼Œæˆ‘æƒ³åˆ©ç”¨æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢éå†ï¼ŒåŠ ä¸Šä¸€å®šç¨‹åº¦çš„å‰ªæï¼ˆå°±æ˜¯æ’é™¤å·²ç»éå†è¿‡çš„èŠ‚ç‚¹ï¼‰ï¼Œå®Œæˆè¿™é“é¢˜ç›®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>class Solution {    /**     * keyä¸ºèµ·å§‹ç‚¹ï¼Œvalueä¸ºæ‰€æœ‰ç›¸è¿çš„ç‚¹     */    Map&lt;Integer, Set&lt;Integer&gt;&gt; map;    /**     * keyä¸º"ç‚¹A_ç‚¹B"(A &lt; B)ï¼Œvalueä¸ºå¯¹åº”çš„æ¦‚ç‡     */    Map&lt;String, Double&gt; probMap;    double maxProb = -1;    int end;    public double maxProbability(int n, int[][] edges, double[] succProb, int start, int end) {        map = new HashMap&lt;&gt;(n * 4 / 3 + 1);        probMap = new HashMap&lt;&gt;(succProb.length * 4 / 3 + 1);        this.end = end;        // æ„é€ æ¯ä¸ªç‚¹çš„ç›¸è¿å…³ç³»        for (int i = 0; i &lt; edges.length; i++) {            int[] edge = edges[i];            Set&lt;Integer&gt; set = map.computeIfAbsent(edge[0], k -&gt; new HashSet&lt;&gt;());            set.add(edge[1]);            set = map.computeIfAbsent(edge[1], k -&gt; new HashSet&lt;&gt;());            set.add(edge[0]);            String key = edge[0] &lt; edge[1] ? (edge[0] + "_" + edge[1]) : (edge[1] + "_" + edge[0]);            probMap.put(key, succProb[i]);        }        boolean[] visited = new boolean[n];        dp(start, 1, visited);        return maxProb == -1 ? 0 : maxProb;    }    public void dp(int index, double prob, boolean[] visited) {        // å·²åˆ°ç»ˆç‚¹        if (index == end) {            maxProb = prob &gt; maxProb ? prob : maxProb;            return;        }        // è·å–å½“å‰ç‚¹å¯ä»¥åˆ°è¾¾çš„æ‰€æœ‰ç‚¹        Set&lt;Integer&gt; set = map.get(index);        // å¦‚æœå½“å‰ç‚¹åˆ°è¾¾ä¸äº†å…¶ä½™ç‚¹        if (set == null) {            return;        }        // æ ‡è®°å½“å‰ç‚¹å·²è®¿é—®        visited[index] = true;        // éå†ç›¸é‚»çš„ç‚¹        for (int next : set) {            if (visited[next]) {                continue;            }            String key = index &lt; next ? (index + "_" + next) : (next + "_" + index);                        // è®¿é—®ä¸‹ä¸€ä¸ªç‚¹            dp(next, prob * probMap.get(key), visited);        }        // é€€å‡ºï¼Œå°†è¯¥ç‚¹æ ‡è®°ä¸ºæœªè®¿é—®        visited[index] = false;    }}</code></pre><p>ä½†å¾ˆå¯æƒœï¼Œè¶…æ—¶äº†ã€‚æˆ‘æƒ³äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å› ä¸ºæ²¡æœ‰å€Ÿç”¨ä¹‹å‰å·²ç»è®¡ç®—å‡ºæ¥çš„ç»“æœï¼Œå› æ­¤æ¯”è¾ƒæµªè´¹æ—¶é—´ã€‚</p><p>å…¶æ—¶é—´å¤æ‚åº¦å–å†³äºè¾¹çš„æ•°é‡ï¼Œå‡è®¾è¾¹çš„æ•°é‡æ˜¯ m ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸ºO(m^2)ã€‚</p><p>è€Œè¾¹ m ä¸ç‚¹ n çš„å…³ç³»ï¼Œm æœ€å°æ˜¯ 0ï¼ˆä¹Ÿå°±æ˜¯ç‚¹ä¹‹é—´æ²¡æœ‰çº¿ï¼‰ï¼Œæœ€å¤§æ˜¯ (n - 1) * n / 2ï¼Œæ¯ä¸ªç‚¹ä¹‹é—´éƒ½æœ‰è¿çº¿ã€‚</p><p>å› æ­¤å¯ä»¥é¢„è§ï¼Œè¿™æ ·çš„ç®—æ³•æ•ˆç‡ç¡®å®å¾ˆå·®ã€‚</p><h1 class=pgc-h-arrow-right>Dijkstra ç®—æ³•</h1><h1 class=pgc-h-arrow-right>å®šä¹‰æ¦‚è§ˆ</h1><p>Dijkstra (è¿ªæ°æ–¯ç‰¹æ‹‰)ç®—æ³•æ˜¯å…¸å‹çš„å•æºæœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ä¸»è¦ç‰¹ç‚¹æ˜¯ä»¥èµ·å§‹ç‚¹ä¸ºä¸­å¿ƒå‘å¤–å±‚å±‚æ‰©å±•ï¼Œç›´åˆ°æ‰©å±•åˆ°ç»ˆç‚¹ä¸ºæ­¢ã€‚</p><p>æ³¨æ„è¯¥ç®—æ³•è¦æ±‚å›¾ä¸­ä¸å­˜åœ¨è´Ÿæƒè¾¹ã€‚</p><h1 class=pgc-h-arrow-right>ç®—æ³•æ€æƒ³</h1><p>è®¾ G=(V,E) æ˜¯ä¸€ä¸ªå¸¦æƒæœ‰å‘å›¾ï¼ŒæŠŠå›¾ä¸­é¡¶ç‚¹é›†åˆ V åˆ†æˆä¸¤ç»„ï¼š</p><p>ç¬¬ä¸€ç»„ä¸ºå·²æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹é›†åˆï¼ˆç”¨ S è¡¨ç¤ºï¼Œåˆå§‹æ—¶ S ä¸­åªæœ‰ä¸€ä¸ªæºç‚¹ï¼Œä»¥åæ¯æ±‚å¾—ä¸€æ¡æœ€çŸ­è·¯å¾„ , å°±å°†åŠ å…¥åˆ°é›†åˆ S ä¸­ï¼Œç›´åˆ°å…¨éƒ¨é¡¶ç‚¹éƒ½åŠ å…¥åˆ° S ä¸­ï¼Œç®—æ³•å°±ç»“æŸäº†ï¼‰ã€‚</p><p>ç¬¬äºŒç»„ä¸ºå…¶ä½™æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹é›†åˆï¼ˆç”¨ U è¡¨ç¤ºï¼‰ï¼ŒæŒ‰æœ€çŸ­è·¯å¾„é•¿åº¦çš„é€’å¢æ¬¡åºä¾æ¬¡æŠŠç¬¬äºŒç»„çš„é¡¶ç‚¹åŠ å…¥ S ä¸­ã€‚</p><p>åœ¨åŠ å…¥çš„è¿‡ç¨‹ä¸­ï¼Œæ€»ä¿æŒä»æºç‚¹ v åˆ° S ä¸­å„é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸å¤§äºä»æºç‚¹ v åˆ° U ä¸­ä»»ä½•é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚</p><p>æ­¤å¤–ï¼Œæ¯ä¸ªé¡¶ç‚¹å¯¹åº”ä¸€ä¸ªè·ç¦»ï¼ŒS ä¸­çš„é¡¶ç‚¹çš„è·ç¦»å°±æ˜¯ä» v åˆ°æ­¤é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚U ä¸­çš„é¡¶ç‚¹çš„è·ç¦»ï¼Œæ˜¯ä» v åˆ°æ­¤é¡¶ç‚¹åªåŒ…æ‹¬ S ä¸­çš„é¡¶ç‚¹ä¸ºä¸­é—´é¡¶ç‚¹çš„å½“å‰æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚</p><h1 class=pgc-h-arrow-right>ç®—æ³•æ­¥éª¤</h1><ol start=1><li>åˆå§‹æ—¶ï¼ŒS åªåŒ…å«æºç‚¹ï¼Œå³ S ï¼{v}ï¼Œv çš„è·ç¦»ä¸º0ã€‚U åŒ…å«é™¤ v å¤–çš„å…¶ä»–é¡¶ç‚¹ï¼Œå³: U ={å…¶ä½™é¡¶ç‚¹}ï¼Œè‹¥ v ä¸ U ä¸­é¡¶ç‚¹ u æœ‰è¾¹ï¼Œåˆ™æ­£å¸¸æœ‰æƒå€¼ï¼Œè‹¥uä¸æ˜¯vçš„å‡ºè¾¹é‚»æ¥ç‚¹ï¼Œåˆ™æƒå€¼ä¸ºâˆã€‚</li><li>ä»Uä¸­é€‰å–ä¸€ä¸ªè·ç¦»væœ€å°çš„é¡¶ç‚¹kï¼ŒæŠŠkï¼ŒåŠ å…¥Sä¸­ï¼ˆè¯¥é€‰å®šçš„è·ç¦»å°±æ˜¯våˆ°kçš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼‰ã€‚</li><li>ä»¥kä¸ºæ–°è€ƒè™‘çš„ä¸­é—´ç‚¹ï¼Œä¿®æ”¹Uä¸­å„é¡¶ç‚¹çš„è·ç¦»ï¼›è‹¥ä»æºç‚¹våˆ°é¡¶ç‚¹uçš„è·ç¦»ï¼ˆç»è¿‡é¡¶ç‚¹kï¼‰æ¯”åŸæ¥è·ç¦»ï¼ˆä¸ç»è¿‡é¡¶ç‚¹kï¼‰çŸ­ï¼Œåˆ™ä¿®æ”¹é¡¶ç‚¹uçš„è·ç¦»å€¼ï¼Œä¿®æ”¹åçš„è·ç¦»å€¼çš„é¡¶ç‚¹kçš„è·ç¦»åŠ ä¸Šè¾¹ä¸Šçš„æƒã€‚</li><li>é‡å¤æ­¥éª¤bå’Œcç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½åŒ…å«åœ¨Sä¸­ã€‚</li></ol><p>æ‰§è¡ŒåŠ¨ç”»è¿‡ç¨‹å¦‚ä¸‹å›¾</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ee6b41c1e6244534b608e52efb071632><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>æœ¬é¢˜è§£æ³•</h1><pre><code>class Solution {    public double maxProbability(int n, int[][] edges, double[] succProb, int start, int end) {        // records[i]ä»£è¡¨ç‚¹iç›¸é‚»çš„æ‰€æœ‰ç‚¹ï¼Œä»¥åŠå…¶æ¦‚ç‡        List&lt;List&lt;Record&gt;&gt; allRecords = new ArrayList&lt;&gt;(n + 1);        for (int i = 0; i &lt; n + 1; i++) {            allRecords.add(new LinkedList&lt;&gt;());        }        // æ„é€ æ¯ä¸ªç‚¹çš„ç›¸è¿å…³ç³»        for (int i = 0; i &lt; edges.length; i++) {            int[] edge = edges[i];            List&lt;Record&gt; records = allRecords.get(edge[0]);            records.add(new Record(edge[1], succProb[i]));            records = allRecords.get(edge[1]);            records.add(new Record(edge[0], succProb[i]));        }        // åˆ©ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œè¿›è¡Œéå†        // å€Ÿç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¿è¯ä¼˜å…ˆéå†å½“å‰æ¦‚ç‡é«˜çš„        PriorityQueue&lt;Record&gt; queue = new PriorityQueue&lt;&gt;();        // è®°å½•ä»startåˆ°æ¯ä¸€ä¸ªç‚¹çš„æ¦‚ç‡        double[] result = new double[n];        // ä»startå¼€å§‹éå†        queue.offer(new Record(start, 1));        result[start] = 1;        // å¼€å§‹        while (!queue.isEmpty()) {            // å½“å‰èŠ‚ç‚¹            Record record = queue.poll();            int node = record.node;            double prob = record.prob;            // è·å–å½“å‰ç‚¹æ‰€èƒ½è¾¾åˆ°çš„å…¶ä»–èŠ‚ç‚¹            List&lt;Record&gt; otherNodes = allRecords.get(node);            // éå†å…¶ä½™èŠ‚ç‚¹            for (Record next : otherNodes) {                int nextNode = next.node;                double nextProb = prob * next.prob;                // å¦‚æœå½“å‰è®¡ç®—å‡ºçš„æ¦‚ç‡ï¼Œå°äºç­‰äºä¹‹å‰è®¡ç®—çš„æ¦‚ç‡                if (nextProb &lt;= result[nextNode]) {                    // é‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦ç»§ç»­ç®—äº†ï¼Œç›´æ¥ç”¨ä¹‹å‰çš„å³å¯                    continue;                }                // æ›´æ–°æ¦‚ç‡                result[nextNode] = nextProb;                // å¦‚æœå·²åˆ°ç»“å°¾æˆ–è€…å½“å‰çš„æ¦‚ç‡å·²ç»æ¯”åˆ°endçš„å°                if (nextNode == end || nextProb &lt; result[end]) {                    // é‚£ä¹ˆä¹Ÿæ²¡æœ‰å¿…è¦ç»§ç»­äº†                    continue;                }                // æ·»åŠ èŠ‚ç‚¹                queue.offer(new Record(nextNode, nextProb));            }        }        return result[end];    }    class Record implements Comparable&lt;Record&gt; {        int node;        double prob;        public Record(int node, double prob) {            this.node = node;            this.prob = prob;        }        @Override        public int compareTo(Record other) {            if (other == null) {                return -1;            }            if (this.prob == other.prob) {                return this.node - other.node;            }            return this.prob - other.prob &gt; 0 ? -1 : 1;        }    }}</code></pre><p>æäº¤OKï¼Œæ‰§è¡Œç”¨æ—¶è¶…è¿‡äº†69%çš„ java æäº¤è®°å½•ï¼Œçœ‹æ¥è¿˜æœ‰å€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p><p>å‡è®¾è¾¹çš„æ•°é‡ä¸º m ï¼Œç‚¹çš„æ•°é‡ä¸º n ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸ºO(n + m + nlogn)ã€‚</p><h1 class=pgc-h-arrow-right>Bellman-Ford ç®—æ³•</h1><p>ä¹‹å‰æœ‰è¯´åˆ° Dijkstra ç®—æ³•è¦æ±‚ä¸èƒ½æœ‰è´Ÿæƒè¾¹ï¼Œè€Œè¿™ä¸ª Bellman-Ford ç®—æ³•æ˜¯æ”¯æŒçš„ã€‚</p><h1 class=pgc-h-arrow-right>ç®—æ³•æ­¥éª¤</h1><ol start=1><li>åˆ›å»ºæºé¡¶ç‚¹ v åˆ°å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„è·ç¦»çš„é›†åˆ distSetï¼Œä¸ºå›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹æŒ‡å®šä¸€ä¸ªè·ç¦»å€¼ï¼Œåˆå§‹å‡ä¸º Infiniteï¼Œæºé¡¶ç‚¹è·ç¦»ä¸º 0ï¼›</li><li>è®¡ç®—æœ€çŸ­è·¯å¾„ï¼Œæ‰§è¡Œ V - 1 æ¬¡éå†ï¼›å¯¹äºå›¾ä¸­çš„æ¯æ¡è¾¹ï¼šå¦‚æœèµ·ç‚¹ u çš„è·ç¦» d åŠ ä¸Šè¾¹çš„æƒå€¼ w å°äºç»ˆç‚¹ v çš„è·ç¦» dï¼Œåˆ™æ›´æ–°ç»ˆç‚¹ v çš„è·ç¦»å€¼ dï¼›</li><li>æ£€æµ‹å›¾ä¸­æ˜¯å¦æœ‰è´Ÿæƒè¾¹å½¢æˆäº†ç¯ï¼Œéå†å›¾ä¸­çš„æ‰€æœ‰è¾¹ï¼Œè®¡ç®— u è‡³ v çš„è·ç¦»ï¼Œå¦‚æœå¯¹äº v å­˜åœ¨æ›´å°çš„è·ç¦»ï¼Œåˆ™è¯´æ˜å­˜åœ¨ç¯ï¼›</li></ol><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„æœ‰å‘å›¾ G ä¸­åŒ…å« 5 ä¸ªé¡¶ç‚¹å’Œ 8 æ¡è¾¹ã€‚å‡è®¾æºç‚¹ ä¸º Aã€‚åˆå§‹åŒ– distSet æ‰€æœ‰è·ç¦»ä¸º INFIï¼Œæºç‚¹ A ä¸º 0ã€‚</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d72280c1217b40a29220771adc0f78cd><p class=pgc-img-caption></p></div><p>ç”±äºå›¾ä¸­æœ‰ 5 ä¸ªé¡¶ç‚¹ï¼ŒæŒ‰ç…§æ­¥éª¤ 1 éœ€è¦éå† 4 æ¬¡ï¼Œç¬¬ä¸€æ¬¡éå†çš„ç»“æœå¦‚ä¸‹ã€‚</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/dd8dd027e6d946fa9466ee8281ffe3c0><p class=pgc-img-caption></p></div><p>ç¬¬äºŒæ¬¡éå†çš„ç»“æœå¦‚ä¸‹ã€‚</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/72bd754e8863432194caba5990e62464><p class=pgc-img-caption></p></div><p>ä»¥æ­¤ç±»æ¨å¯ä»¥å¾—å‡ºå®Œå…¨éå†çš„ç»“æœã€‚</p><h1 class=pgc-h-arrow-right>æœ¬é¢˜è§£æ³•</h1><pre><code>class Solution {  public double maxProbability(int n, int[][] edges, double[] succProb, int start, int end) {    // è®°å½•ç»“æœ    double[] result = new double[n];    // èµ·ç‚¹    result[start] = 1;    // ä»startç‚¹å‡ºå‘ï¼Œå…ˆæ›´æ–°ç›´æ¥ä¸startç‚¹ç›¸è¿çš„ç‚¹çš„æ¦‚ç‡ï¼Œç„¶åé€æ­¥æ›´æ–°ï¼Œç›´åˆ°ä¸éœ€è¦æ›´æ–°ä¸ºæ­¢    while (true) {      // æ˜¯å¦æœ‰è¿‡å˜åŠ¨      boolean changed = false;      // éå†æ‰€æœ‰è¾¹      for (int j = 0; j &lt; edges.length; j++) {        int[] edge = edges[j];        // å¦‚æœä»å½“å‰ç‚¹edge[0]å‡ºå‘ï¼Œåˆ°edge[1]çš„æ¦‚ç‡ï¼Œå¤§äºä¹‹å‰è®°å½•çš„ç»“æœ        if (result[edge[0]] * succProb[j] &gt; result[edge[1]]) {          // åˆ™æ›´æ–°          result[edge[1]] = result[edges[j][0]] * succProb[j];          changed = true;        }        // å› ä¸ºæ˜¯æ— å‘å›¾,æ‰€ä»¥å†åå‘éå†        if (result[edge[1]] * succProb[j] &gt; result[edge[0]]) {          result[edge[0]] = result[edge[1]] * succProb[j];          changed = true;        }      }      // ä¸€éæœªä¿®æ”¹åˆ™è¡¨ç¤ºå›¾å·²éå†å®Œæˆ      if (!changed) {        break;      }    }    return result[end];  }}</code></pre><p>æäº¤OKï¼Œæ‰§è¡Œç”¨æ—¶è¶…è¿‡äº†95%çš„ java æäº¤è®°å½•ã€‚</p><p>å…¶æ—¶é—´å‡è®¾è¾¹çš„æ•°é‡ä¸º m ï¼Œç‚¹çš„æ•°é‡ä¸º n ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸ºO(mn)ã€‚</p><h1 class=pgc-h-arrow-right>æ€»ç»“</h1><p>ä»¥ä¸Šå°±æ˜¯è¿™é“é¢˜ç›®æˆ‘çš„è§£ç­”è¿‡ç¨‹äº†ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯å¦ç†è§£äº†ã€‚æœ¬é¢˜ä¸»è¦å’Œå›¾çš„éå†æ±‚è§£æœ€çŸ­è·¯å¾„ç›¸å…³ï¼Œå¯ä»¥ç”¨ Dijkstra æˆ–è€… Bellman-Ford ç®—æ³•è¿›è¡Œè§£å†³ã€‚</p><p>æœ‰å…´è¶£çš„è¯å¯ä»¥è®¿é—®æˆ‘çš„åšå®¢æˆ–è€…å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€å¤´æ¡å·ï¼Œè¯´ä¸å®šä¼šæœ‰æ„å¤–çš„æƒŠå–œã€‚</p><p>https://death00.github.io/</p><p>å…¬ä¼—å·ï¼šå¥ç¨‹ä¹‹é“</p><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/03169d2510f2499da433d9b20ea9a3d8><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bea144449ad344a7874a2a083341874c><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'åŠ›æ‰£','1514','è·¯å¾„'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>