<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>常用的数据差错控制技术(2)-奇偶校验 | 极客快訊</title><meta property="og:title" content="常用的数据差错控制技术(2)-奇偶校验 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RpDS5dsBQ8obMn"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/7e1dabe2.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/7e1dabe2.html><meta property="article:published_time" content="2020-11-14T20:50:52+08:00"><meta property="article:modified_time" content="2020-11-14T20:50:52+08:00"><meta name=Keywords content><meta name=description content="常用的数据差错控制技术(2)-奇偶校验"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/7e1dabe2.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>常用的数据差错控制技术(2)-奇偶校验</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><p>大家好，我是痞子衡，是正经搞技术的痞子。今天痞子衡给大家讲的是嵌入式里数据差错控制技术 - 奇偶校验。</p><p>在系列第一篇文章里，痞子衡给大家介绍了最简单的校验法 - 重复校验，该校验法实现简单，检错纠错能力都还不错，但传输效率实在是不高，在效率至上的大背景下，这种方法是不能容忍的。今天痞子衡继续给大家介绍另一种也非常简单但效率较高的校验法 - 即奇偶校验法。</p><p><strong>一、奇偶校验法基本原理</strong></p><p><strong>1.1 校验依据</strong></p><p>奇偶校验法的校验依据就是判断一次传输的一组二进制数据中 bit "1"的奇偶性(奇数个还是偶数个)在传输前后是否一致，所以其实奇偶检验法有两个子类：</p><p>奇校验：如果以二进制数据中 1 的个数是奇数为依据，则是奇校验</p><p>偶校验：如果以二进制数据中 1 的个数是偶数为依据，则是偶校验</p><p>一般在同步传输方式中常采用奇校验，而在异步传输方式中常采用偶校验。</p><p><strong>1.2 奇偶校验位</strong></p><p>为了实现奇偶校验，通常会在传输的这组二进制数据中插入一个额外的奇偶校验位(bit)，用它来确保发送出去的这组二进制数据中“1”的个数为奇数或偶数。</p><p>划重点，奇偶校验位并不是用来标记原始传输数据中 1 的个数是奇数还是偶数，而是用来确保原始数据加上奇偶校验位后的合成数据中 1 的个数是奇数或者偶数。</p><p><strong>1.3 校验方法</strong></p><p>常用的奇偶校验共有三种：水平奇偶校验，垂直奇偶校验校验和水平垂直奇偶校验。以对 32 位数据：10100101 10111001 10000100 00011010 进行校验为例讲解：</p><p>水平奇偶校验：对每一种数据的编码添加校验位，使信息位与校验位处于同一行。</p><img alt=常用的数据差错控制技术(2)-奇偶校验 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RpDS5dsBQ8obMn><p>所以加上水平偶校验位后应传输的数据是：101001010 101110011 100001000 000110101</p><p>垂直奇偶校验：将数据分为若干组，一组一行，再加上一行校验位，针对每一列采样奇校验或偶校验。</p><img alt=常用的数据差错控制技术(2)-奇偶校验 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RpDS5ePJ8kAMjn><p>所以加上垂直偶校验位后应传输的数据是：10100101 10111001 10000100 0001101010000010</p><p>水平垂直奇偶校验：也叫 Hamming Code，其是在水平和垂直方向上进行双校验，其不仅可以检测 2bit 错误的具体位置，还可纠正 1bit 错误，常用于 NAND Flash里。这部分不属于本文要讨论的内容，痞子衡后续会专门介绍 Hamming Code。</p><p><strong>1.4 C 代码实现</strong></p><p>实际中水平校验法应用比较多，此处示例代码以水平奇校验为例：</p><p>安装包:codeblocks-17.12mingw-setup.exe</p><p>集成环境:CodeBlocks 17.12 rev 11256</p><p>编译器:GNU GCC 5.1.0</p><p>调试器:GNU gdb (GDB) 7.9.1</p><img alt=常用的数据差错控制技术(2)-奇偶校验 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RpDS5ew5R8NhYj><img alt=常用的数据差错控制技术(2)-奇偶校验 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RpDS5fTCIO2DlM><img alt=常用的数据差错控制技术(2)-奇偶校验 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RpDS5fmCLZfKVG><p><strong>1.5 行业应用</strong></p><p>奇偶检验比较典型的应用是在串口 UART 上，玩过 UART 的朋友肯定了解串口奇偶检验位的作用，包括下位机 MCU UART 驱动的编写，上位机串口调试助手的设置都需要注意奇偶校验位。下图是 UART 传输时序图，奇偶校验位是可选位，仅当使能时才会生效。不过作为嵌入式开发者，倒不必关注奇偶校验的具体实现，因为 MCU 的 UART 模块已经在硬件上支持了奇偶检验，我们只需要操作 UART 对应寄存器的控制位去使能奇偶检验功能即可。</p><p><strong>二、奇偶校验法失效分析</strong></p><p>在现实数据传输中，偶尔 1 位出错的机会最多，2 位及以上发生错误的概率比较低，且由于奇偶校验实现简单，具有相对理想的检错能力，因此得到广泛使用。但奇偶校验法有如下 2 个明显的缺陷：</p><p>奇数位误码能检出，偶数位误码不能检出</p><p>不能纠错，在发现错误后，只能要求重发。</p><p>前面讲的两种校验法实际上更多是针对 byte 传输校验，而在实际应用中我们校验的对象往往是数据包 packet，有没有其他比奇偶校验法更好且针对 packet 的检错方法呢？痞子衡在下篇会继续聊。</p><p>至此，嵌入式里数据差错控制技术之奇偶校验痞子衡便介绍完毕了，掌声在哪里~~~</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'奇偶','数据','差错'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>