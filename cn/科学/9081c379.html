<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>是时候展现真正的技术了！关于V-Ray“线性空间流” | 极客快訊</title><meta property="og:title" content="是时候展现真正的技术了！关于V-Ray“线性空间流” - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1535697022387fd4677693b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/9081c379.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/9081c379.html><meta property="article:published_time" content="2020-11-14T20:52:43+08:00"><meta property="article:modified_time" content="2020-11-14T20:52:43+08:00"><meta name=Keywords content><meta name=description content="是时候展现真正的技术了！关于V-Ray“线性空间流”"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/9081c379.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>是时候展现真正的技术了！关于V-Ray“线性空间流”</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><p>早在2004年，在VRay的官方论坛上，有一些大神们发布了一批“线性空间流”的帖子，得到了很多粉丝的追捧，这个话题一下子就爆了！好多人都开始尝试去理解这么做的道理，因为这套流程虽然能做出好看的图来，但玩起来有点复杂。</p><p>其实它背后的原理非常简单：VRay和MAX的计算原理是基于“线性空间”的——VRay的相机对光的捕捉也是“线性”的。这一切都在告诉人们：</p><p><strong>MAX和VRay是在伽马1.0环境下工作的</strong>。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697022387fd4677693b><p class=pgc-img-caption></p></div><p>这些都没问题，但是，</p><p>也正是由于VRay和MAX都是默认为伽马1.0环境的，那么你浏览渲染图的显示器也要与之同步才会看到正确的颜色。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697022197fcab3fefb3><p class=pgc-img-caption></p></div><p>电脑显示器并不是基于伽马1.0的！</p><p>最要紧的是：除非有人告诉，否则VR和MAX打死也不知道这件事情！所以呢，我们看到的渲染图就总是很暗！</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15356970223007adc68f376><p class=pgc-img-caption></p></div><p><strong>1</strong></p><p><strong>伽马1.0与伽马2.2</strong></p><p>这里有个简单的例子：</p><p>一个带开口的室内渲染，尽量让光从那个开口里照射进来。左边那张是伽马1.0，右边是伽马2.2。可以明显看到左边那张黑了好多，而你要想在这个设置下将整个房间里面继续提亮，那你开口处肯定曝光了！</p><p>而右边这张是用伽马2.2渲染的，亮了很多，应该和你想要的结果很接近了吧。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15356970223036faa0533a5><p class=pgc-img-caption></p></div><p>2</p><p><strong>HDRI和伽马</strong></p><p><strong>另一个常见的问题是HDRI打光时的反射问题。</strong></p><p>下面这个例子你就可以看到，中间是那张HDRI的图，左侧的伽马1.0的反射里，图片显得暗了很多，而右侧图设置成伽马2.2后，反射看起来就和那张原图很接近了，而且亮度也很舒服。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697022268e57b550892><p class=pgc-img-caption></p></div><p>3</p><p><strong>纹理，颜色总是发灰，对比度不强</strong></p><p>对于刚刚用伽马2.2来渲染的新手们来说，这些问题总是会遇到，图总是看起来发灰，缺少对比度。之所以会造成这种问题，是因为在设置一个用伽马2.2场景的时候，你还要记得<strong>将你的颜色也变成伽马2.2的环境</strong>。</p><p>纹理贴图也是如此，每一张图片其实已经都是基于伽马2.2的了。所以假如你在MAX里又再次设置了伽马2.2，那等于是变成了两倍的伽马2.2！也就会显得很灰！</p><p>所以，正确的设置对于最后的效果尤为关键，不论是选取纯色还是使用贴图，都必须让它们在最后的渲染里呈现正确的颜色。</p><p>下面是一些老版本里的MAX设置和新版本里的默认设置的对比，左侧是老版本设置，没有经过任何修正，而右侧是伽马2.2的设置。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15356970223919a46d00ec1><p class=pgc-img-caption></p></div><p><strong>你要改的选项有这么几个</strong></p><p><strong>Enable gamma/LUT correction</strong></p><p>这个是打开这套工作流程的总开关</p><p><strong>Gamma</strong></p><p>设置你需要的伽马数值，这里我们用2.2</p><p><strong>Materials and colors</strong></p><p>这里选择你是否需要材质编辑器里的颜色选取也按照伽马2.2来显示。这个设置最 关键！</p><p><strong>Bitmap files input gamma</strong></p><p>这里是你选择是否需要将所有的贴图也按照伽马2.2来加载到材质编辑器里，以此来避免重复修正和贴图发灰的问题。</p><p><strong>Bitmap files output gamma</strong></p><p>这里决定了最后的渲染图要是否要以伽马2.2来保存。</p><p>改完之后，对比左右两套材质编辑器的颜色选取框，你会发现右边的变亮了。这时假如你还想得到刚才伽马1.0里的那个深红色，你得在新的伽马2.2设置里重新选择一次那个颜色。</p><p>4</p><p><strong>帧缓存与sRGB</strong></p><p>以上这些只是保证你的颜色和贴图最终会正确的显示。</p><p>在VRay的帧缓存里，有个容易被忽略的小按钮：<strong>sRGB</strong>。这个按钮给最后渲染图加上一个伽马2.2的曲线。换句话说，让你的渲染结果以伽马2.2来显示。</p><p>下面的图就是开关时两者的区别，左上角那个是开了的，右下角是关闭的。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697022467346959cf3f><p class=pgc-img-caption></p></div><p>5</p><p><strong>如何从帧缓存里保存图片</strong></p><p>那么如何把渲染图正确的保存出来呢？</p><p>我们先回到刚才的设置环节。在那里将<strong>output gamma</strong>设置成了2.2的，这一点极为重要！</p><p>因为那个sRGB的小按钮只是一个预览工具，所以我们在正式保存渲染图的时候，还是要将其以伽马2.2的形式保存的，否则的话，你会发现你保存出来的渲染图又再次变得很暗了！（<strong>因为伽马2.2其实并没有真正作用到你的渲染图上，只是预览而已</strong>）</p><p>那么问题来了，那个sRGB的小按钮给了渲染预览一个伽马2.2，那么保存出来的图是不是也会自动继承同样的效果呢，也就是说，会一模一样吗？</p><p>答案是：</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697022534d388c2234f><p class=pgc-img-caption></p></div><p>当然这种区别不是很大很明显。你可以将预览图截图出来，和你最终保存的图做个对比，会发现：保存出来的图会稍微亮那么一点点。这就反证出sRGB的曲线和MAX的伽马2.2曲线是有一点不同的。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697022639549c24f612><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697022649e93c67deb8><p class=pgc-img-caption></p></div><p>6</p><p><strong>保存EXR格式文件</strong></p><p>在真正的线性工作流里，你的渲染图需要保存为32比特的图片格式，比如EXR文件格式。这样才能保证你的线性工作流在每一个环节里都是正确无误的显示。</p><p>当你保存这种格式的时候，按理说伽马不会作用于之上。然而我却发现，在PS里打开一个EXR渲染图的时候，时而正确，时而发灰（双倍伽马问题）。</p><p>在下面的例子，PS里，这个图显示正确一样，和MAX里的渲染预览图几乎一样。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/153569702268395e0697233><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15356970227167b8242208c><p class=pgc-img-caption></p></div><p>7</p><p><strong>非线性工作流的伽马2.2</strong></p><p>假如我不想保存一个32比特的图的话，需要怎么做呢？</p><p>这个需求对于大部分要在PS里继续后期处理渲染图的人来说，是很有必要的。</p><p><strong>打开VRay面板里的color mapping卷展栏，切换到专家模式</strong>，你就可以看到全部的参数设置了，你会发现伽马是2.2。</p><p>但是在<strong>模式</strong>（MODE）选项里，默认的是<strong>color mapping only</strong>，这意味着没有伽马，保存出来的图是不会自动修正为伽马2.2的。哪怕我们在打开sRGB按钮的时候，确实看到一张你想要的渲染结果，你也没可能保存出这样的一个图。</p><p>那么，就来试试另一个模式<strong>color mapping and gamma</strong>，改为这个模式后，你需要<strong>关闭sRGB按钮来避免双倍伽马效果</strong>。</p><p>除此之外，你还要回到最初的设置里，将output gamma改回原来的1.0，否则你在保存图的时候，又再次做了一个双倍伽马。</p><p><strong>正确的设置其实是这样的</strong>：</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1535697022928c1c9d5a5e3><p class=pgc-img-caption></p></div><p>头晕了吗？还有更复杂的情况：</p><p>下面的图，一张是带伽马效果的预览，一个是保存出来的不带伽马效果的EXR文件。你可以发现前者稍微亮一些。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697022848627e57b391><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697022965f736ed67c3><p class=pgc-img-caption></p></div><p>不过我们不需要管这种情况，因为我们的伽马2.2的效果是通过<strong>color mapping</strong>卷展栏里的模式设置来产生的，而不再是靠sRGB这个按钮了，这样我们保存出来的图就会和预览里看到图完全一样！</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697022874fb7ba14f92><p class=pgc-img-caption></p></div><p><strong>线性工作流伽马2.2设置已经在新版本里是默认设置了。</strong></p><p>所有用VR渲染的图都默认是这种格式了。假如你是VR新手，你甚至都不会留意到这些，除非你保存的图32位的，你才会发现你保存的图和预览到的图有点不同。</p><p><strong>最佳的最专业的保存图的格式就是32位的EXR文件，那才是最正宗的线性工作流！</strong></p><p>还有一种就是用color mapping来达到伽马2.2, 而关闭sRGB按钮，这样就不会让保存出来的图发灰了。</p><p>两种办法都可以，只要你喜欢就好。下面是两套办法的设置截屏：</p><p>正宗的线性工作流设置：</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697023005657417b07e><p class=pgc-img-caption></p></div><p>用伽马2.2效果的设置：</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1535697022928c1c9d5a5e3><p class=pgc-img-caption></p></div><p>8</p><p><strong>颜色的RGB数值怎么用</strong></p><p>在遇到LOGO这类贴图的时候，会需要颜色非常精确。</p><p>很多人会在PS里吸取这个颜色，然后在MAX里复制黏贴它的RGB。</p><p>下图里，你会发现最后的颜色明显不对！</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535697023132f349be146e><p class=pgc-img-caption></p></div><p>问题出在了哪里？</p><p><strong>因为MAX被我们设置为2.2了，但PS却没有，所以你复制PS里的RGB，放到MAX里就不对了</strong>。</p><p>有个简单的办法可以解决这个问题，那就是你<strong>做一个纯色贴图来取代RGB数值</strong>。那样的话，颜色就准确了。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535697023136c722ad77fc><p class=pgc-img-caption></p></div><p>或者，将那个贴图在材质编辑器里打开，然后吸取那个颜色，这样也可以得到正确的结果。</p><div class=pgc-img><img alt=是时候展现真正的技术了！关于V-Ray“线性空间流” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15356970231739e755f53fd><p class=pgc-img-caption></p></div><p><strong>最后还要注意：本教程是基于V-Ray3.0版本的！其他版本使用请谨慎。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'时候','展现','技术'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>