<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>作为一个程序员，CPU的这些硬核知识你必须会 | 极客快訊</title><meta property="og:title" content="作为一个程序员，CPU的这些硬核知识你必须会 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/d40dc70a9ea6401e86a847e47677acdc"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/91505bd1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/91505bd1.html><meta property="article:published_time" content="2020-11-14T20:57:21+08:00"><meta property="article:modified_time" content="2020-11-14T20:57:21+08:00"><meta name=Keywords content><meta name=description content="作为一个程序员，CPU的这些硬核知识你必须会"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/91505bd1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>作为一个程序员，CPU的这些硬核知识你必须会</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><p>CPU对每个程序员来说，是个既熟悉又陌生的东西？</p><p>如果你只知道CPU是中央处理器的话，那可能对你并没有什么用，那么作为程序员的我们，必须要搞懂的就是CPU这家伙是如何运行的，尤其要搞懂它里面的寄存器是怎么一回事，因为这将让你从底层明白程序的运行机制。</p><p>随我一起，来好好认识下CPU这货吧</p><p><strong>把CPU掰开来看</strong></p><p>对于CPU来说，我们首先就要搞明白它是怎么回事，也就是它的内部构造，当然，CPU那么牛的一个东西，构造一定是极其复杂的，毕竟是超高科技玩意，所以啊，我们今天说的组成什么的，都是指的主要的，对我们程序员有用的，需要了解的那一部分，切莫抬杠哦</p><p>首先嘞，我希望你先记住这句话：</p><p>CPU所负责的就是解释和运行最终转换成机器语言的程序内容</p><p>另外啊，说起CPU，一定离不开内存，在今天的介绍中，也会简单的说说内存，因为后期也会单独出一篇讲解下内存，毕竟了解这些对我们程序员来说很重要的，所以CPU和内存经常在一块来讲，他们其实是有很多的晶体管组成的，一般称他们为IC，也就是集成电路的意思。</p><p>接下来我们就来看看CPU的组成，注意我之前说的，这里说的组成一般是指的主要部分，毕竟CPU结构复杂。</p><p><strong>我们需要知道的CPU结构</strong></p><p><strong>重点需要关注寄存器</strong></p><p><strong>运算器</strong></p><p>字面意思理解就是跟运算有关的，简单说就是负责运算从内存读取到寄存器中的数据，可以看作一个数据加工厂，就是对寄存器中的数据做运算，这些运算包含基本的算术和逻辑运算。</p><p>然后对于运算器来说，我们要了解其中的几个重要角色，接下来我会挨个介绍：</p><p><strong>算术逻辑单元（ALU）</strong></p><p>这个是运算器中重要的一个组成，主要负责的就是对数据的处理，从而实现对数据的算术和逻辑运算</p><p><strong>累计寄存器（AC）</strong></p><p>通常叫做累计器，是一个通用寄存器，这个有啥用呢？上面说的ALU，当ALU处理完算术运算或者逻辑运算之后，会得到一个结果，这个结果就会保存在AC中</p><p><strong>数据缓冲寄存器（DR）</strong></p><p>这个DR也是存放数据的，存放的主要是从内存读取过来的数据，会暂时存放在这个DR中，这里就相当于内存和CPU之间做数据传送的一个中转站，为啥会有这个，大家都是到CPU和内存的速度是有很大差别的，中间引入一个DR，一定程度上起到了速度上的缓冲作用，不至于速度相差太猛</p><p><strong>状态条件寄存器（PSW）</strong></p><p>这个貌似有点不好理解，首先寄存器还是保存数据的，所以PSW自然也是保存某一类数据的，它保存的主要是由算术指令和逻辑指令运行或者测试的结果建立的各种条件码内容，一般分为状态标志和控制标志，知道就行</p><p>我们需要了解以上的这几个组成部分，这都是运算器的核心，另外需要特别说一下的就是它们每一个其实都有一个英文缩写，比如ALU就是算术逻辑单元的意思，为啥要说这个嘞，因为英文缩写毕竟简便而且有逼格，所以我们一般交流的时候会说ALU而不是算术逻辑单元，因此，记住他们的缩写也很重要哦。</p><p>不然跟别人交流起来的话，别人一出口就是ALU，DR啥的，你很容易跟不上节奏啊。</p><p>对CPU中的运算器有个基本认识以后，我们再来看看另外一个重要组成 控制器</p><p><strong>控制器</strong></p><p>控制控制，也就是起到一个控制作用，上面介绍的运算器只是起到了运算的功能，但是控制器就比较牛，它是控制整个CPU的工作，对于控制器，一般要能够保证程序的正确执行以及能够处理异常事件</p><p>同样的，对于控制器来说，我们需要重点关注如下几个：</p><p><strong>指令寄存器（IR）</strong></p><p>寄存器是保存东西的，指令寄存器自然就是保存指令的，也就是说CPU要执行一条指令的话，需要先把指令从内存上读取，然后放到我们上面说的数据缓冲寄存器中，之后再从DR放到IR中，接着嘞，会有一个叫做指令译码器的东西根据IR的内容生成很多的微操作指令，从而去控制其他部件已完成相应的功能</p><p><strong>程序计数器（PC）</strong></p><p>这个学过Java内存结构的应该了解，它保存着下一条要执行的指令，也就是说当一个程序要执行的时候，会把这个程序的起始地址存到这个PC中，如果这个指令被执行的话也不用担心，CPU会自动修改，使得PC存放下一条要执行的指令</p><p><strong>地址寄存器（AR）</strong></p><p>这个就是保存着CPU访问内存上的那一块内存的内存地址，为啥要保存这个，因为CPU和内存速度相差比较大，所以CPU要保存着正在访问的那块内存的地址，直到内存的读写操作完成，不然，找不到之前访问的是哪个内存单元了啊</p><p><strong>指令译码器（ID）</strong></p><p>简单点就是对指令做分析的，看看你这个指令要干啥</p><p>不知道你有没有发现，我们上面无论再介绍运算器还是控制器的时候，都大量提及寄存器，这足以说明寄存器的重要性，不是有句话说其实CPU就是寄存器的集合体，不过在说寄存器之前，我们还是很有必要先来简单的看看内存。</p><p><strong>简单说下内存（以后会单独说）</strong></p><p>CPU和内存总是分不开的，这里简单对内存坐下介绍，方便对CPU的理解，内存自然而然是存储部件，存储的是啥呢？一般来说，就是数据和指令，而且我们常说的内存指的就是电脑中的内存条，就是用来存储程序啊，数据啊，指令啊这些东西。</p><p>形象点说，其实内存可以看作一个个的小格子，每个格子都是用来存储数据的，而且每个格子还有编号，也就是内存地址，根据它可与拿到对应内存存储的数据，还需要知道的就是，如果断电的话，内存中的数据会被清除的。</p><p><strong>CPU的大部分都是寄存器</strong></p><p>上面说了CPU其实由运算器和控制器两大部分组成，其实无论是运算器还是控制器，都离不开寄存器，可以说，CPU就是寄存器的天下，因此，对于CPU，一定要掌握好寄存器，CPU做的一些运算其实就是通过寄存器来实现的，可以看看这篇文章：一个程序在计算机中是怎么运行的？</p><p>先记住一句话：</p><p>我们使用的Java，python这些都是高级语言，编写的程序最终会转成机器语言，之后就会进入CPU运算，实质就是通过CPU内部的寄存器来做相应的处理的</p><p><strong>寄存器</strong></p><p>这个是我们需要掌握的，寄存器这玩意，不同的CPU中含有的寄存器数量和种类都不同，不过大体有如下几种寄存器，按照功能来分的</p><p>另外其实就可以把CPU理解为是寄存器的集合体，然后你需要知道程序计数器，累加寄存器，标志寄存器，指令寄存器和栈寄存器只有一个，其他的寄存器一般会有多个。</p><p><strong>说说这个程序计数器</strong></p><p>为啥要说这个，因为这玩意决定着程序的执行流程，我们进一步来看看</p><p>比如看这个，这个表示的是两个数相加的操作，关于这个操作涉及到的数据和指令都保存在了内存中，而且每个数据和指令所在的内存单元都是有编号的，也就是内存地址，就是图中0100，0101那些，自上而下就是该操作的执行顺序。</p><p>上面也提到过，程序计数器是保存程序执行的指令的，准确说保存的是程序执行指令的地址值，怎么理解呢？也就是说程序的每一步操作，底层来说都是有一系列指令对应着的，这些指令就是表明这一步该怎么操作，比如a＋b这个操作，加载进内存后就是对应着一系列的指令。</p><p>首先就是一个指令，表明要把a这个数值做相加操作，需要先把a保存到累加寄存器，而这个指令被保存在内存中的一个内存单元中，这个内存地址比如说就是0100，而此时程序计数器就是保存的这个0100内存地址，要执行程序的时候，CPU去看看程序计数器保存的第一个地址，发现是0100，然后去内存这个0100的位置，看看保存的是啥，一看是一个指令，分析指令，原来是要把0105地址中的值保存到累加寄存器中，然后就开始干活……</p><p>所以说啊，程序计数器其实我是决定管理程序的执行流程的</p><p><strong>CPU是如何做比较的</strong></p><p>这个也需要了解一下，CPU的比较其实就是再内部做减法运算，什么意思呢？比如要比较a和b，就是再内部做一个a－b的操作，然后依据得到的结果来对a和b做比较，这里面肯定是要借助寄存器来完成，比如得到的结果就会放到标志寄存器中。</p><p><strong>CPU做的事其实很简单</strong></p><p>我们在之前的文章说过，CPU其实主要就是干如下的四件事情：</p><p>从内存中读取数据，然后放到寄存器中</p><p>把寄存器中的数据写入到内存</p><p>进行数学运算和逻辑运算（加减乘除，AND，OR）</p><p>依据相应的条件进行跳转，执行其他指令（一条指令跳转到另外一条指令）</p><p>我们知道，CPU是依据指令做事情的，为什么CPU只做上面的四件事情，主要就是看CPU 能执行的机器语言指令有哪些，主要就是如下这些</p><p>这么一看，CPU能干的事也没有那么复杂啊。</p><p><strong>CPU指令执行过程</strong></p><p>经过上面的讲解，我们应该知道CPU就是看指令做事情的，那么关于指令，CPU又是怎么操作的呢？ 我们要知道的是几乎所有的冯·诺伊曼型计算机的CPU，其工作都可以分为5个步骤：取指令、指令译码、执行指令、访问取数、结果写回。</p><p>可能你不懂了，没啥，其实不就是这五个步骤嘛，搞清楚他们不就ok，接下来咱们来看看：</p><p>第一：取指令</p><p>字面意思很好理解啊，不就是拿到需要的指令嘛，那么指令在哪嘞，必须是在内存啊，也就是需要从内存中取出我们需要的指令，然后干嘛，不就是把指令放到CPU中的寄存器嘛，这个取指令就是这么一个过程。</p><p>第二：指令译码</p><p>这个是不是很快想到我们上面说的指令译码器，这个不就是对上一步拿到的指令做分析嘛，干嘛要分析，我得看看你这个指令到底要干啥啊，不然CPU怎么干活嘞</p><p>第三：执行指令</p><p>这个不就更好理解了，就是开始干活啦，实现相应的功能了</p><p>第四：访问取数</p><p>直观上好像没有那么好理解，其实啊，说的就是，我们根据上面的操作，有可能需要从内存中去拿数据，啥意思嘞，要知道，内存存放的是数据和指令，比如执行a＋b的操作，我们得到相加的指令，对于a和b都是操作数，它们也是存放在内存中的，是不是也需要去内存中去拿到它们</p><p>看上面那个图，0100对应的指令是不是要去0105对应的地址中去拿数据123，这不就是访问取数嘛。</p><p>第五：结果写回</p><p>这又是啥，经过上面那么些个步骤，做的运算肯定得有结果啊，这结果咋弄，你不得保存在哪啊，通常是保存在CPU内部的寄存器中，一般是标志寄存器，这不是就是结果写回嘛</p><p>好啦，到这里，关于CPU的知识咱们就介绍的差不多了，当然，CPU的知识远远不止如此，但是作为程序员的你，最起码也得知道这些啊。</p><p><br></p><div class=pgc-img><img alt=作为一个程序员，CPU的这些硬核知识你必须会 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d40dc70a9ea6401e86a847e47677acdc><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'硬核','作为','一个'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>