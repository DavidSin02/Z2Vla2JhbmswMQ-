<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>系统引导 Legacy+MBR 和UEFI+ GPT | 极客快訊</title><meta property="og:title" content="系统引导  Legacy+MBR 和UEFI+ GPT - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a4c912073bc343d2ab936837bfb4d7db"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/93e971c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/93e971c.html><meta property="article:published_time" content="2020-10-29T21:03:57+08:00"><meta property="article:modified_time" content="2020-10-29T21:03:57+08:00"><meta name=Keywords content><meta name=description content="系统引导  Legacy+MBR 和UEFI+ GPT"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/93e971c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>系统引导 Legacy+MBR 和UEFI+ GPT</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><p>GPT和MBR是硬盘分区格式；主要区别如下</p><p>MBR</p><p>MBR：Master Boot Record，主分区引导记录。最早在1983年在IBM PC DOS 2.0中提出。前面说过，每个扇区/区块都被分配了一个逻辑块地址，即LBA，而引导扇区则是每个分区的第一扇区，而主引导扇区则是整个硬盘的第一扇区（主分区的第一个扇区）。MBR就保存在主引导扇区中。另外，这个扇区里还包含了硬盘分区表DPT（Disk Partition Table），和结束标志字（Magic number）。扇区总计512字节，MBR占446字节（0000H - 01BDH），DPT占据64个字节（01BEH - 01FDH），最后的magic number占2字节（01FEH – 01FFH）。</p><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a4c912073bc343d2ab936837bfb4d7db><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2a26fa6a147c4da5953ba7067b1a5212><p class=pgc-img-caption></p></div><p>GPT</p><p>GUID磁碟分割表（GUID Partition Table，缩写：GPT）是一个实体硬盘的分区表的结构布局的标准。它是可扩展固件接口（UEFI）标准（被Intel用于替代个人计算机的BIOS）的一部分，被用于替代BIOS系统中的一32bits来存储逻辑块地址和大小信息的主开机纪录（MBR）分区表。对于那些扇区为512字节的磁盘，MBR分区表不支持容量大于2.2TB（2.2×1012字节）[1]的分区，然而，一些硬盘制造商（诸如希捷和西部数据）注意到这个局限性，并且将他们的容量较大的磁盘升级到4KB的扇区，这意味着MBR的有效容量上限提升到16 TiB。这个看似“正确的”解决方案，在临时地降低人们对改进磁盘分配表的需求的同时，也给市场带来关于在有较大的块（block）的设备上从BIOS启动时，如何最佳的划分磁盘分区的困惑。GPT分配64bits给逻辑块地址，因而使得最大分区大小在264-1个扇区成为可能。对于每个扇区大小为512字节的磁盘，那意味着可以有9.4ZB（9.4×1021字节）或8 ZiB个512字节(9,444,732,965,739,290,426,880字节或18,446,744,073,709,551,615（264-1）个扇区×512（29）字节每扇区）[1][2]。</p><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/236c3e86821f4ec7a1134bc5ff9aa775><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/45dc35b61b544fd3ac8e75cf419027d3><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/27678915949e4015a09261328ce45961><p class=pgc-img-caption></p></div><p>相较于MBR，GPT具有以下优点：</p><p>（1）得益于LBA提升至64位，以及分区表中每项128位设定，GPT可管理的空间近乎无限大，假设一个扇区大小仍为512字节，可表示扇区数为，算下来，可管理的硬盘容量=18EB(1EB=1024PB=1,048,576TB)，2T在它面前完全不在话下。按目前的硬盘技术来看，确实近乎无限，不过，以后的事谁知道呢。</p><p>（2）分区数量几乎没有限制，由于可在表头中设置分区数量的大小，如果愿意，设置个分区也可以（有人愿意管理这么多分区吗），不过，目前windows仅支持最大128个分区。</p><p>（3）自带保险，由于在磁盘的首尾部分各带一个GPT表头，任何一个受到破坏后都可以通过另一份恢复，极大地提高了磁盘的抗性（两个一起坏的请出门买彩票）。</p><p>（4）循环冗余检验值针对关键数据结构而计算，提高了数据崩溃的检测机率。</p><p>（5）尽管目前分区类型不超过百数（十数也没有吧。），GPT仍提供了16字节的GUID来标识分区类型，使其更不容易产生冲突。</p><p>（6）每个分区都可以拥有一个特别的名字，最长72字节，足够写一首七律了。满足你的各种奇葩起名需求。</p><p>完美支持UEFI，毕竟它就是UEFI规范的衍生品。在将来全行业UEFI的情境下，GPT必将更快淘汰MBR。</p><p><strong>启动方式</strong></p><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/967d7a3513684f288b6969bb3776bef6><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f059f415821f434bb771bc84beb33298><p class=pgc-img-caption></p></div><p><strong>Legacy mode</strong></p><p>即通过MBR/BIOS进行引导的传统模式，流程如下：</p><ol><li>BIOS加电自检（Power On Self Test -- POST）。</li><li>读取主引导记录（MBR）。BIOS根据CMOS中的设置依次检查启动设备：将相应启动设备的第一个扇区（也就是MBR扇区）读入内存。</li><li class=ql-indent-1>检查MBR的结束标志位是否等于55AAH，若不等於则转去尝试其他启动设备，如果没有启动设备满足要求则显示"NO ROM BASIC"然后死机。</li><li class=ql-indent-1>当检测到有启动设备满足要求后，BIOS将控制权交给相应启动设备的MBR。</li><li>根据MBR中的引导代码启动引导程序</li></ol><p>UEFI+ GPT</p><p>UEFI启动不依赖于Boot Sector（比如MBR），大致流程如下：</p><ol><li>Pre-EFI初始化模块运行，自检</li><li>加载DXE（EFI驱动程序执行环境），枚举并加载EFI驱动程序（设备ROM或ESP中）</li><li>找到ESP中的引导程序，通过其引导操作系统。</li></ol><ul><li>CSM mode</li></ul><p>UEFI中的兼容性支持模块（Compatible Support Module）提供了引导UEFI固件的PC上的传统磁盘（MBR格式）的方法</p><p><strong>GPT+UEFI与BIOS+MBR区别</strong></p><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/badad05ebddd459f9c97fb8605d02ba5><p class=pgc-img-caption></p></div><p>不同点：</p><p>1.BIOS+MBR安装系统要求硬盘只要存在非隐藏、活动的主分区就可以了；而UEFI+GPT要求硬盘上除了存在ESP分区，还必须存在至少一个主分区；</p><p>2.BIOS+MBR一旦系统安装好之后，如果系统引导文件在单独的分区，此分区可以在操作系统中可见，也可以设置此分区为隐藏，系统都可以正常启动；而UEFI+GPT系统引导文件所在的ESP分区在操作系统中为不可见；</p><p>3.BIOS+MBR启动要求的活动的主分区不是唯一固定的，可以任意设定某一分区为活动的主分区，然后MBR就可以通过分区表指引操作系统从此分区启动，也就是说，可以在任意分区（主分区无论是否活动或者扩展分区）安装操作系统，只要存在任意的活动主分区，就可以从此分区启动操作系统；而UEFI+GPT只能把系统引导文件放置在ESP分区；</p><p>4.BIOS+MBR的系统引导文件可以和系统文件在同一分区的根目录，也可以不与系统文件同一分区，只要系统引导文件所在分区为活动的主分区即可启动操作系统；而UEFI+GPT只能把系统引导文件放置在ESP分区，且操作系统必须在另外的主分区，也就是说，UEFI+GPT强制要求系统启动文件与系统文件必须分离，不在同一分区；</p><p>5.从上图可知，理论上GPT+UEFI比BIOS+MBR模式的开机速度更快，但事实上并不明显。</p><p>相同点：</p><p>1.BIOS+MBR和UEFI+GPT的系统引导文件都可以放置在单独的分区，这一点在上面不同点的第四点可以知晓；</p><p>2.BIOS+MBR的系统引导文件所在的活动主分区位置不是固定的，可以随意设置任意分区满足此条件，UEFI+GPT的ESP的位置也是可以随意设置的，在硬盘起始位置、中间位置、末尾，都可以，只要分区属性和其中的引导文件正确，就可以引导启动操作系统；</p><p>3.BIOS+MBR的系统引导文件所在的分区和UEFI+GPT的ESP分区都可以分配任意大小，而不是ESP必须100M；</p><p>4.BIOS+MBR安装系统所需的非隐藏、活动主分区和UEFI+GPT的系统的ESP分区，都可以同时设置多个，但是即使有多个相同属性的分区，系统安装时安装程序都是自动写入第一个，启动时也都是从第一个启动</p><p><strong>两个硬盘分区格式可以利用工具进行动态切换，引导需重新建立！！！</strong></p><div class=pgc-img><img alt="系统引导  Legacy+MBR 和UEFI+ GPT" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f64f2a6055a24844b17fe087a2288e7e><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'系统','引导','Legacy'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>