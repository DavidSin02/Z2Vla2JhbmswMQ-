<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>五步掌握主成分分析法：数据少少，信息多多！ | 极客快訊</title><meta property="og:title" content="五步掌握主成分分析法：数据少少，信息多多！ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/6819e08baece40f8b9b9c319064a88f8"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/a7bb21c2.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/a7bb21c2.html><meta property="article:published_time" content="2020-11-14T20:56:36+08:00"><meta property="article:modified_time" content="2020-11-14T20:56:36+08:00"><meta name=Keywords content><meta name=description content="五步掌握主成分分析法：数据少少，信息多多！"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/a7bb21c2.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>五步掌握主成分分析法：数据少少，信息多多！</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6819e08baece40f8b9b9c319064a88f8><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>本文的目的是为主成分分析（PCA）提供一个完整且简单的解释，特别是其运作方式，以增进大家对该分析法的理解并加以利用，而不必具有强大的数学背景。</p><p class=ql-align-justify>PCA实际上是网上广泛提及的一种方法，很多文章都有涉及。但是，只有极少数文章能直接切入主题，并在不过多钻研技术细节的前提下解释PCA的工作原理以及“为什么”。这就是这篇文章的目的：以更简单的方式解释主成分分析法。</p><p class=ql-align-justify>在开始解释之前，本文提供了PCA在每一步骤的运作原理的逻辑解释，简化了其背后的数学概念，如标准化，协方差，特征向量和特征值，而暂未关注如何运算的问题。</p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/79d943df19554f0b8a61ead8182ac3c9><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><strong>什么是PCA？</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>PCA是一种常用于减少大数据集维数的降维方法，把大变量集转换为仍包含大变量集中大部分信息的较小变量集。</p><p class=ql-align-justify>减少数据集的变量数量，自然是以牺牲精度为代价的，降维的好处是以略低的精度换取简便。因为较小的数据集更易于探索和可视化，并且使机器学习算法更容易和更快地分析数据，而不需处理无关变量。</p><p class=ql-align-justify>总而言之，PCA的概念很简单——减少数据集的变量数量，同时保留尽可能多的信息。</p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/79d943df19554f0b8a61ead8182ac3c9><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><strong>逐步解释</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>第1步：标准化</p><p class=ql-align-justify>这一步的目的是把输入数据集变量的范围标准化，以使它们中的每一个均可大致成比例地分析。</p><p class=ql-align-justify>更具体地说，在使用PCA之前必须标准化数据的原因是PCA对初始变量的方差非常敏感。也就是说，如果初始变量的范围之间存在较大差异，那么范围较大的变量将占据范围较小的变量（例如，范围介于0和100之间的变量将占据0到1之间的变量），这将导致主成分的偏差。因此，将数据转换为可比较的比例可避免此问题。</p><p class=ql-align-justify>在数学上，这一步可以通过减去平均值，再除以每个变量值的标准偏差来完成。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ec8e84b26be64fa3bbb6194e71c062c0><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>只要标准化完成后，所有变量都将转换为相同的范围[0,1]。</p><p class=ql-align-justify>第2步：协方差矩阵计算</p><p class=ql-align-justify>这一步的目的是：了解输入数据集的变量是如何相对于平均值变化的。或者换句话说，是为了查看它们之间是否存在任何关系。因为有时候，变量间高度相关是因为它们包含大量的信息。因此，为了识别这些相关性，我们进行协方差矩阵计算。</p><p class=ql-align-justify>协方差矩阵是p×p对称矩阵（其中p是维数），其所有可能的初始变量与相关联的协方差作为条目。例如，对于具有3个变量x，y和z的三维数据集，协方差矩阵是以下的3×3矩阵：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/247696d5d3564f3bbe974527ba14ce97><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>由于变量与其自身的协方差是其方差（Cov（a，a）= Var（a）），因此在主对角线（左上角到右下角）中，实际上有每个起始变量的方差。并且由于协方差是可交换的（Cov（a，b）= Cov（b，a）），协方差矩阵的条目相对于主对角线是对称的，这意味着上三角形部分和下三角形部分是相等的。</p><p class=ql-align-justify>作为矩阵条目的协方差告诉我们变量之间的相关性是什么呢？</p><p class=ql-align-justify>协方差的重要标志如下：</p><p class=ql-align-justify>· 如果为正，则两个变量同时增加或减少（相关）</p><p class=ql-align-justify>· 如果为负，则一个减少，另一个增加（不相关）</p><p class=ql-align-justify>好了，现在我们知道协方差矩阵只不过是一个表，汇总了所有可能配对的变量间相关性。让我们继续下一步。</p><p class=ql-align-justify>第3步：计算协方差矩阵的特征向量和特征值，用以识别主成分</p><p class=ql-align-justify>特征向量和特征值都是线性代数概念，需要从协方差矩阵计算得出，以便确定数据的主成分。开始解释这些概念之前，让我们首先理解主成分的含义。</p><p class=ql-align-justify>主成分是由初始变量的线性组合或混合构成的新变量。该组合中新变量（如主成分）之间彼此不相关，且大部分初始变量都被压缩进首个成分中。所以，10维数据会显示10个主成分，但是PCA试图在第一个成分中得到尽可能多的信息，然后在第二个成分中得到尽可能多的剩余信息，以此类推。</p><p class=ql-align-justify>例如，假设你有一个10维数据，你最终将得到的内容如下面的屏幕图所示，其中第一个主成分包含原始数据集的大部分信息，而最后一个主成分只包含其中的很少部分。因此，以这种方式组织信息，可以在不丢失太多信息的情况下减少维度，而这需要丢弃携带较少信息的成分。</p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/140674ed45e446879a6fa92e05706d02><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>要认识到一件重要的事情是，既然新变量被构造为初始变量的线性组合，它们将更加难以解释，并且对我们没有任何实际意义。</p><p class=ql-align-justify>从几何学上讲，主成分代表了解释最大方差量的数据方向，也就是说，它们是捕获数据中大部分信息的线。在这里，方差和信息间的关系是，线所承载的方差越大，数据点沿着它的分散也越大，沿着线的散点越多，它所携带的信息也越多。简单地说，只要把主成分看作是提供最佳角度来观察和评估数据的新轴，这样观测结果之间的差异就会更明显。</p><p class=ql-align-justify><strong>PCA如何构建主成分？</strong></p><p class=ql-align-justify>由于主成分的数量，如同数据中存在的变量一样多，因此主成分根据第一主成分占数据集中最大可能方差的方式进行构造。例如，假设我们的数据集的散点图如下所示，可以猜出第一个主成分吗？是的，就是大致与紫色标记匹配的线。因为它穿过原点，并且它是点（红点）的投影最分散的线。或者从数学上来讲，它是方差最大化的线（从投影点（红点）到原点的平方距离的平均值）。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e15bf4c98f9d4d4a81d6745da1c6d382><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>第二主成分以相同的方式计算，条件是它与第一主成分并不相关（即垂直），并且它占第二高方差。</p><p class=ql-align-justify>直到计算出p个主成分数量，等于原始变量数。</p><p class=ql-align-justify>现在我们理解了主成分的含义，让我们回到特征向量和特征值。首先，你需要知道的是它们总是成对出现，因此每个特征向量都有一个特征值，它们的数量等于数据的维数。例如，对于三维数据集，存在3个变量，因此存在3个具有对应特征值的特征向量。</p><p class=ql-align-justify>不用多说，上面解释的所有“魔法”都是特征向量和特征值，因为协方差矩阵的特征向量实际上是方差最多的轴的方向（或最多的信息），我们称之为主成分。并且，特征值只是附加到特征向量上的系数，它们给出了每个主成分中携带的方差量。</p><p class=ql-align-justify>通过特征值的顺序对特征向量进行排序，从最高到最低，你就得到了按重要性排序的主成分。</p><p class=ql-align-justify><strong>举例：</strong></p><p class=ql-align-justify>假设我们的数据集是2维的，有2个变量x，y，并且协方差矩阵的特征向量和特征值如下：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c395534f432b43659b59e9fe73acd37d><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>如果我们按降序对特征值进行排序，则得到λ1>λ2，这意味着与第一主成分（PC1）对应的特征向量是v1，而与第二成分（PC2）对应的特征向量是v2。</p><p class=ql-align-justify>在有了主成分之后，为了计算每个成分所占的方差（信息）百分比，我们将每个成分的特征值除以特征值的总和。如果我们把这个计算法应用到上面的例子中，我们会发现，PC1和PC2分别携带了96％和4％的数据方差。</p><p class=ql-align-justify>第4步：特征向量</p><p class=ql-align-justify>正如我们在上一步中所看到的，计算特征向量并按其特征值依降序排列，使我们能够按重要性顺序找到主成分。在这个步骤中我们要做的，是选择保留所有成分还是丢弃那些重要性较低的成分（低特征值），并与其他成分形成一个向量矩阵，我们称之为特征向量。</p><p class=ql-align-justify>因此，特征向量只是一个矩阵，其中包含我们决定保留的成分的特征向量作为列。这是降维的第一步，因为如果我们选择只保留n个特征向量（分量）中的p个，则最终数据集将只有p维。</p><p class=ql-align-justify><strong>举例：</strong></p><p class=ql-align-justify>接着上一步的例子，我们可以用v1或v2向量来形成一个特征向量。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/46311922332545bfa84088a3ae014807><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>或者丢弃重要性较小的向量v2,仅用v1形成一个特征向量。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/37517788c8bc426f84386f246caa1072><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>丢弃特征向量v2将使维数减少1，并且将导致最终数据集中的信息丢失。 但鉴于v2仅携带4％的信息，因此损失并不重要，我们仍将拥有v1所携带的96％的信息。</p><p class=ql-align-justify>因此，正如我们在例子中看到的那样，你可以选择是保留所有成分还是丢弃不重要的成分，具体取决于你要查找的内容。如果你不追求降维，只是想利用不相关的新变量（主成分）描述你的数据，则不需要保留重要性较次的成分。</p><p class=ql-align-justify>最后一步：沿主成分轴重新绘制数据</p><p class=ql-align-justify>在前面的步骤中，除了标准化之外，你不需要更改任何数据，只需选择主成分，形成特征向量，但输入数据集时要始终与原始轴统一（即初始变量）。</p><p class=ql-align-justify>这一步，也是最后一步，目标是使用协方差矩阵的特征向量去形成新特征向量，将数据从原始轴重新定位到由主成分轴中（因此称为主成分分析）。这可以通过将原始数据集的转置乘以特征向量的转置来完成。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=五步掌握主成分分析法：数据少少，信息多多！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/663783d8b7874e06ac75e400620bf8ef><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'少少','数据','五步'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>