<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>使用fswatch命令监控Linux中的文件和目录的变化工具 | 极客快訊</title><meta property="og:title" content="使用fswatch命令监控Linux中的文件和目录的变化工具 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/7986828023d3499ab392ead70688697b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/ab108ed2.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/ab108ed2.html><meta property="article:published_time" content="2020-10-29T21:13:10+08:00"><meta property="article:modified_time" content="2020-10-29T21:13:10+08:00"><meta name=Keywords content><meta name=description content="使用fswatch命令监控Linux中的文件和目录的变化工具"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/ab108ed2.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>使用fswatch命令监控Linux中的文件和目录的变化工具</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><p><br></p><blockquote><p>请关注本头条号，每天坚持更新原创干货技术文章。</p><p>如需学习视频，请在微信搜索公众号<strong>“智传网优”</strong>直接开始自助<strong>视频学习</strong></p></blockquote><h2 class=pgc-h-arrow-right>1. 前言</h2><p>fswatch是一个跨平台的文件修改监视工具，当指定文件或目录的内容被更改时，它会收到告警通知。</p><p>它在不同的操作系统上执行四种类型的监视，例如:</p><ul><li>一个建立在苹果OS X的File System Events API 。</li><li>基于kqueue的监视器，FreeBSD 4.1中出现的通知接口也支持许多类BSD系统，包括OS X。</li><li>一个基于Solaris内核的File Events Notification API 及其派生的监视器。</li><li>一个基于inotify的监视器，inotify是一个内核子系统，用于显示应用程序对文件系统的修改。</li><li>一个基于ReadDirectoryChangesW的监视器，这是一种Windows API，用于记录对目录的更改。</li><li>一个定期检查文件系统状态的监视器，将文件修改时间保存在内存中，并手动检测文件系统的变化(在任何地方都可以使用stat)。</li></ul><p>fswatch的特点</p><ul><li>支持几个特定操作系统的api</li><li>允许递归目录监视</li><li>使用包含和排除正则表达式执行路径筛选</li><li>支持自定义记录格式<br>此外，它还支持周期性的空闲事件</li></ul><p><br></p><div class=pgc-img><img alt=使用fswatch命令监控Linux中的文件和目录的变化工具 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7986828023d3499ab392ead70688697b><p class=pgc-img-caption>监视Linux中的文件和目录的变化工具之fswatch</p></div><p><br></p><h2 class=pgc-h-arrow-right>2. 如何在Linux系统中安装`fswatch`</h2><p>值得注意的是，在任何Linux发行版中的默认系统仓库中都无法安装fswatch包。安装最新版本的fswatch的唯一方法是从源代码开始构建，如下面的安装说明所示。</p><p>首先获取最新的fswatch源代码，使用以下wget命令，并安装如下:</p><pre><code>wget https://github.com/emcrisostomo/fswatch/releases/download/1.9.3/fswatch-1.9.3.tar.gztar -xvzf fswatch-1.9.3.tar.gzcd fswatch-1.9.3./configuremakesudo make install </code></pre><div class=pgc-img><img alt=使用fswatch命令监控Linux中的文件和目录的变化工具 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5bd5e7a471604eee9e87c3a8fdc73e75><p class=pgc-img-caption>如何在Linux系统中安装fswatch</p></div><p><br></p><p>重要提示:在从源代码编译fswatch之前，请确保在系统上安装了GNU GCC (C和c++编译器)和开发工具(在Debian/Ubuntu上是必需的)。如果没有，使用以下命令在各自的Linux发行版上安装它。基于红帽CentOS/RHEL系统</p><pre><code>yum group install 'Development Tools'</code></pre><p>基于红帽Fedora 22+系统</p><pre><code>dnf group install 'Development Tools'</code></pre><p>基于Debian/Ubuntu系统</p><pre><code>sudo apt-get install build-essential</code></pre><p>在Debian/Ubuntu发行版上，执行fswatch命令时可能会出现以下错误。</p><pre><code>fswatch: error while loading shared libraries: libfswatch.so.6: cannot open shared object file: No such file or directory</code></pre><p>要修复它，您需要执行下面的命令，这将有助于在开始使用fswatch之前刷新到动态库的链接和缓存。</p><pre><code>sudo ldconfig</code></pre><h2 class=pgc-h-arrow-right>3. 如何在Linux上使用fswatch ?</h2><p>运行fswatch的一般语法是:</p><pre><code>fswatch [option] [path]</code></pre><p>在Linux上，建议您使用默认的inotify监视器，您可以使用-M或- list-monitors选项来列出可用的监视器:</p><pre><code>fswatch -Mfswatch --list-monitors</code></pre><div class=pgc-img><img alt=使用fswatch命令监控Linux中的文件和目录的变化工具 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6b6f8dc22c7449dcb1622d98cb30e27f><p class=pgc-img-caption>如何在Linux上使用fswatch</p></div><p><br></p><p>下面的命令允许您监控当前目录(/home/zcwyou)中的变化，每4秒做一次标准输出。</p><p>-l或--latency选项允许您以秒为单位设置延迟，默认为1秒。</p><pre><code>fswatch -l 4 . </code></pre><pre><code>fswatch --timestamp /var/log/auth.log</code></pre><p>接下来，-x或--event-flags告诉fswatch沿事件路径打印事件标志。您可以使用–event-field-seperator选项来使用特定的分隔符打印事件。</p><pre><code>fswatch --events-flags ~ /var/log/auth.log</code></pre><p>要打印主目录和/var/log/auth.log文件中发生变化事件数值，请使用-n或--numeric选项，如下所示:</p><pre><code>fswatch --numeric ~ /var/log/auth.log </code></pre><p>也许你可以通过fswatch手册页查看详细的使用选项和信息:</p><pre><code>man fswatch</code></pre><h2 class=pgc-h-arrow-right>4. 总结</h2><p>有关更多信息和用法，请访问fswatch Github repository: https://github.com/emcrisostomo/fswatch</p><p>在这篇文章中，我们介绍了一个简单的命令行实用程序，它可以帮助Linux用户在修改指定文件或目录层次结构的内容时得到通知。</p><p>另外，如果你以前用过它，您可以给我们一些关于使用fswatch的建议。</p><p>本文已同步至博客站，尊重原创，转载时请在正文中附带以下链接：https://www.linuxrumen.com/cyml/1705.html</p><p><strong>点击了解更多，快速查看更多的技术文章列表。</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'fswatch','监控','Linux'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>