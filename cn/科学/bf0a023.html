<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>教你公式入门 | 极客快訊</title><meta property="og:title" content="教你公式入门 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1537537085411b26694b07f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/bf0a023.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/bf0a023.html><meta property="article:published_time" content="2020-10-29T21:03:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:03:51+08:00"><meta name=Keywords content><meta name=description content="教你公式入门"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/bf0a023.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>教你公式入门</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><p>学习编写公式入门之前，电脑上最好安装一个通达信内核的软件。因为通达信内核的软件对公式语句有简单翻译的功能。</p><p>下面所说的只对初入公式的股友说说，高手就不用看了。但请高手批评指正。</p><p>开始接触到有提示买卖功能软件的股友觉得很神奇，软件还有提示买卖的？</p><p>更是有的人把自己的公式称为千金不卖，或千金难求的东西。真的是这样吗？</p><p>其实，公式并不神秘。没有接触过公式编写的可以跟着一步一步地学会公式入门。</p><p>这里要提醒一下，玩公式是为了更好地玩股票。</p><p><strong>一、编写股票公式最基本的元素</strong></p><p>几乎所有的公式都离不开一根小小的K柱，也就是K柱里包含的五个基本元素，开盘价，收盘价，最高价，量低价和成交量。</p><p>开盘价，收盘价，最高价，最低价和成交量分别由(open),C(close),H(high)，L(Low)和V(volume)来表示。</p><p>对这几个元素的不同运算，就造成了千百种不同的公式。</p><p><strong>二、从最简单的公式指标——移动平均线入手</strong></p><p>以下所以图形都是海通通达信的截图。</p><p>1、打开任意一支股票的K线图。图一</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1537537085411b26694b07f><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>2、在主图的任意线条上单击，出现白色的小方块。图二</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15375370854622d41a8a64a><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>3、右键带小方块的线，选择“修改当前指标公式”，图三</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1537537085571ed87a1bf73><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>4、调出公示编辑窗口。图四</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15375370855173a864b4e4f><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>各部分简单功能</p><p>（1）公式名称，对每一个公式都要取一个名。这个名称是唯一的，不能重复。</p><p>（2）变量赋值。对公示中要遇到的变量进行赋值。公式中可以有另一种赋值方式。下面会说到。</p><p>（3）公式主窗口。所有的公示都编写在这里。</p><p>（4）公式副窗口。根据右边的分类可分为动态翻译等四个类型。</p><p>（5）测试公式。对完成的公式进行测试。如果有错误，会在副窗口的“测试结果”内提示。</p><p>（6）确定按钮。对通过测试的公式进行保存。</p><p>现在来仔细看看都说了些什么。</p><p>在变量赋值处，看到M1、M2、M3、M4这几项。公式里把它们叫做变量。</p><p>这里给M1赋值5，给M2的赋值是10，给M3的赋值是20，给M4的赋值是60 。</p><p>现在看看主窗口里的语句。</p><p>MA1:MA(CLOSE,M1);</p><p>MA2:MA(CLOSE,M2);</p><p>MA3:MA(CLOSE,M3);</p><p>MA4:MA(CLOSE,M4);</p><p>（1）结构。每一句语句的结构都公成四个部分。第一是部分命名，第二部分是冒号，或是冒号等号；第三部分是运算；第四部分是语句结束，也就是分号。这里要提醒的是，<strong>所有的标点符号都必须是在英文状态下进行</strong>。这点很重要。有时候一些莫名其妙的错误就是使用了中文状态下的标点引起的。</p><p>在这句“MA1:MA(CLOSE,M1);”中，MA1的后面只有一人冒号，说明MA1是输出结果的名称。如果是冒号等号，那么就是赋值的变量名称了。输出结果有好多种，如有划线、有文字、有图标等。但这种“名称:”的多半都是画一条线。“MA”叫做运算函数，意思是“返回X的M日简单移动平均.”。当然还有其它很多的运算函数，具体见http://www.redphon.com/istock/formularinfo.php；至于“close”就是前面提到的五个元素之一，收盘价。也可以用C来表示。这句中的M1就是调用已经为变量M1赋那个值。这里是5 。好了这句的意思就是：画一条以5日的收盘价来计算的平均线。计算方式是将最近5日的收盘价加起来再除以5。</p><p>大多数主图的四条平均线分别是以5日，10日，20日，60日的数值来表现的结果。</p><p>下面再重复地说明一下。</p><p>完整的语句要用到赋值和输出。</p><p>赋值的格式为：名字:=（需要赋值的内容）</p><p>输出的格式为：名字:（需要输出的内容）</p><p>每句的结束用英文状态下的分号。如为四个名字赋值</p><p>M1:=5;</p><p>M2:=10;</p><p>M3:=20;</p><p>M4:=60;</p><p>这里取了四个名字，M1,M2,M3,M4。说明一点，这四个名字的取名是任意的。</p><p>在标准的程序语言里，这四个名字叫做变量。英文是variables。所以在许多公式里，就看到Ver1,Ver2等。其实就是这个单词的缩写，翻译为：变量1，变量2........ 然后再输出计算的结果：MA1:MA(CLOSE,M1);MA2:MA(CLOSE,M2);MA3:MA(CLOSE,M3);MA4:MA(CLOSE,M4); 把它完整地写下来就是： M1:=5;</p><p>M2:=10;</p><p>M3:=20;</p><p>M4:=60;MA1:MA(CLOSE,M1);MA2:MA(CLOSE,M2);MA3:MA(CLOSE,M3);MA4:MA(CLOSE,M4); 或者： M1:=5;</p><p>M2:=10;</p><p>M3:=20;</p><p>M4:=60;MA1:MA(C,M1);MA2:MA(C,M2);MA3:MA(C,M3);MA4:MA(C,M4); 就成了一个完整的移动平均线指标了。</p><p>有的股友介绍经验说，以5日的均线上穿13日均线为买点。可是许多新股友说，怎样找到13日均线啊！现在就可以把M2:=10; 改成M2:=13; 13日的均线就出来了。</p><p><strong>三、一个指标的变演</strong> 下面来看看一个指标是怎样变化的。</p><p>有一套比较有名的股票软件，叫益萌操盘手。里面有一个比较经典的公式，叫做顶底趋势。</p><p>见下图。其实，这个公式是由传统的W&R公式引伸来的。</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15375370854657fb7bb24da><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>在原始的W&R公式中(在通达信里叫做WR)，只有这么一句：WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N)); 它的意思是：输出WR1:100*(N日内最高价的最高值-收盘价)/(N日内最高价的最高值-N日内最低价的最低值)。而且它表示的趋势要均线是相反的。（见图二）</p><p><strong>四、传统的几个公式</strong></p><p>观察已有的公式，是最好的学习方法。</p><p>1、KDJ随机指标。打开KDJ公式，看到这么几句：</p><p>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;</p><p>K:SMA(RSV,M1,1);</p><p>D:SMA(K,M2,1);</p><p>J:3*K-2*D;</p><p>这里再啰嗦几句。我们看到第一句</p><p>RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;最前面是一个名字RSV，RawStochastic Value的缩写，中文意思是未成熟随机值。是股票里面的一个概念。</p><p>由于这个指标是由美国的乔治*莱恩（George Lane）博士所创，他取的变量名就要表达“未成熟随机值”这个意思。但对我们初学公式的人来说，它就是一个变量名。我们知道，除了保留字以外，变量名是可以任意取的。什么是保留字？就是公式的函数名之类的。如MA、EMA等等。</p><p>这句中看到，冒号等号的后面不是数字，而是一个计算。翻译成白话，就是：RSV赋值:(收盘价-N日内最低价的最低值)/(N日内最高价的最高值-N日内最低价的最低值)*100。这里我们就引入了赋值的概念。在股票公式中，赋值有两种，一种叫静态赋值，这咱赋值一般情况下是赋予一个不变的值，如50 。另一种是动态赋值，这种就是根据动态计算的结果来赋值。</p><p>既然变量是随便取的，那不用RSV，用ROV行不行？当然行。只是，在调用的时候要完全一致。在下一句输出K的语句中，就调用了变量RSV。如果给第一个变量取名为ROV，在K:SMA(RSV,M1,1);中也要改成K:SMA(ROV,M1,1);才行。</p><p>2、MACD</p><p>在MACD中看到的是这样几句</p><p>DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);</p><p>DEA:EMA(DIF,MID);</p><p>MACD:(DIF-DEA)*2,COLORSTICK;</p><p>和KDJ指标写法不同的是，这些语句中没有看到等号，是不是没有赋值了？不是。只有冒号的语句是输出语句，其结果要显示在指标窗口里。但它也可以作为接下去继续运算的变量。而冒号等号的语句就只能参与运算，不能在指标窗口输出结果了。</p><p><strong>五、一般性的输出标志</strong></p><p>公式的计算结果的输出，都是为了提示买卖点为目的。一般情况下都是以某一条线上穿另外的某条线，或是上穿某一个值为目买入点。如在KDJ里，有J线上穿K线为买入点，还有J线上穿0值为买入点，也有J值上穿100值为买入点（这里因为讲的是公式本身，因此为评价买入点）。但有的为了方便好看，就有了图标输出。股票公式里有几个常用的输出：输出一条线，输出一个图标(DRAWICON)，输出文字(DRAWTEXT)，输出一根柱形图(STICKLINE)。</p><p>首先引入“交叉”概念。短周期的线从下向上交叉长周期的线叫做上穿，短周期的线从止向下交叉长周期的线叫做下破。公式里的交叉用Cross(X,Y)函数。表示X从下向上交叉Y。在KDJ里，表示J向上交叉K，就写成：Cross(J,K)。</p><p>现在我们在KDJ公式里加上一句DRAWICON(CROSS(J,K),L*0.995,1); 意思是：当J上穿K时画一个向上的箭头。</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15375370853576ea43365de><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>注意，cross(X,Y)是X向上交叉Y，即X上穿Y。那么X下破Y怎样表示？这时我们只需要将X与Y互换位置就行了。即cross(Y,X)它的意思是，Y从下向上交叉X，反过来，就是X下破Y。那么，再加上一句DRAWICON(CROSS(K,J),L*0.995,4); 当J下破K时画一个哭脸。</p><div class=pgc-img><img alt=教你公式入门 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1537537085342f4453ac68e><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"><section></section></div><div class="pgc-img-button setImageCover fix-android"><section></section></div><div class="pgc-img-button deleteImage fix-android"><section></section></div></div><div class=pgc-img-border></div></div><p>知道了这个原理，那些很神奇的，有买卖提示的就不神奇了。练习：把向上箭头换成“买”字，把哭脸换成“卖”字，怎样做？</p><p><strong>六、公式入门学习结语</strong> 正如前面所说，公式并不神秘。网上出现的许多公式收费的软件，说穿了只不过是K柱的演变。记得有个软件，吹嘘说他们的公式有多牛，准确率有多高。所以不免费。在咨询客服时，就问是不是有第六元素。他问什么是第六元素，我就说是除了OCHLV以外的第六元素。后来，网上有的高手也把他们的公式破译了。把代码放到通达信里一测试，成功率并不比KDJ好多少。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'入门','公式'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>