<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>项目实践篇二：S71500高速脉冲计数及工程应用 | 极客快訊</title><meta property="og:title" content="项目实践篇二：S71500高速脉冲计数及工程应用 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/68616a9bb9f8497195a3181852e39f3b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/cfa9e27c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/cfa9e27c.html><meta property="article:published_time" content="2020-11-14T20:55:56+08:00"><meta property="article:modified_time" content="2020-11-14T20:55:56+08:00"><meta name=Keywords content><meta name=description content="项目实践篇二：S71500高速脉冲计数及工程应用"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/cfa9e27c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>项目实践篇二：S71500高速脉冲计数及工程应用</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><p>先说几句很有用的废话，据小编多年项目实践经验，先后经过了PLC200,300,1200,1500，总的来说随着市场需求的变化，西门子PLC产品越来越人性化，但也越来越复杂，有些功能或工况下200PLC简单又好用，有些工控下300PLC款式也多，选型也好选，还简单好用。拿高速计数模块来说，S7300 中有一款314C 2PNDP的CPU模块，小编很喜欢用。带四路高速脉冲采集通道，自带DI，DO模块，可以作为备用通道，项目中不可避免的经常用到高速脉冲信号的传感器，用起来很方便。但近两年，S7-200、300逐渐被1200和1500所替代，侧重点不一样了，有些工况下用1200方便，有些工况下用1500方便。所以写一些关于1200和1500的一些数据采集方面的东西，作为备忘，或给各位初学者一些指导。不同于S71200（每一款1200CPU都自带3-6路不等的高速采集通道） ，S71500CPU一般本身是不带高速脉冲计数的，所以要选用高速计数模块，一般最常用的模块为TMcount2X24 ，其提供两路24V高速脉冲采集信号。两路高速脉冲采集通道，在一般项目应用中有点少，所以小编在做项目的时候会多买两个个，作为备用。废话少说进入正题。</p><p>在工业领域数据采集和处理中，经常会遇到如流量、转速、扭矩等高速脉冲信号形式的传感器。这种类型的传感器精确度高，抗干扰能力强，得到技术人员的青睐。本文在小编真实项目的基础上，举例说明西门子S7-1500高速脉冲采集功能和应用，包括数据的处理。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/68616a9bb9f8497195a3181852e39f3b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1ec64d555a8f4e15a396261d47fea16f><p class=pgc-img-caption>图1.DC24V脉冲信号的转速扭矩传感器</p></div><p><strong>1. 高速计数模块TM count2X24属性</strong></p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d6af66f7866b4098b55d59a5426362cc><p class=pgc-img-caption></p></div><p>1>.支持的编码器类型</p><p>●24V增量编码器；</p><p>●具有方向信号的24V脉冲编码器</p><p>●布局有方向信号的24V脉冲编码器</p><p>●用于向上和向下计数脉冲的24V脉冲编码器</p><p>2>.支持的技术功能</p><p>●高速计数</p><p>●测量评率</p><p>●作为运动控制的位置反馈</p><p>3>.接线（图）端子</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ecd8f7e200d749189ad0982afae0e6f6><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/723882be3858406385bdb3664eb4e2d8><p class=pgc-img-caption></p></div><p><strong>2. 高速计数模块的组态和应用</strong></p><p>下面举一个小编在工作项目中遇到的一个例子，来说明西门子S71500系列PLC高速脉冲采集的用法。</p><p><strong>工况：</strong>如图所示的扭矩转速传感器，转速码盘数为60，扭矩-50N.m-50 N.m对应5K-15K脉冲。本应用实例在小编写的1200实例中用到过，可以对比看看有什么异同。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e1fc52a0bc914ae7998d574b82d99319><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>2.1硬件配置及组态</strong></p><p>插入一个CPU模块，本例中用CPU1515，并插入TM count2X24模块，订货号：6ES7550-1AA00-0AB0</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/95933b5e8d18450f9a8d001ccca5e003><p class=pgc-img-caption>图.硬件配置图</p></div><p><strong>2.2 配置通道属性</strong></p><p>双击模块2，下面出现高速计数模块的属性。</p><p>选择工作模式：<strong>通过工艺对象组态通道</strong>。当然也可以选用手动操作，手动操作和1200中的配置方法一样，各位看官可以试一试，就是配置为测量，配置为频率，配置更新时间，这些都可以在工艺里面完成，大同小异。</p><p>此处我们选择通过工艺对象组态通道。选择了通过工艺对象组态通道，下面的手动选项就会变灰，只能在工艺对象里面进行配置。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5ec84309db4d490daf1fda3c6696d0a4><p class=pgc-img-caption></p></div><p><strong>2.3新增工艺对象</strong></p><p>在项目树底下的CPPU下面，找到工艺对象，新增对象。如图所示的方法，增加两个对象，一个命名为转速频率测量，一个命名为扭矩频率测量。完成这一步后，就可以在项目数下面看到新增的两个工艺对象。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2096b02dbd034bb999773170a18a7cde><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/37407d794ec746d69e45a6d2fb4f023a><p class=pgc-img-caption></p></div><p><strong>2.4组态工艺对象</strong></p><p>点击组态，配置相关参数。在参数选项卡，可以看到组态的相关参数及配置，还可以看到状态：公司图标表示参数里包含错误或不可用的参数；绿色图标表示参数配置里面包含修改过的参数；蓝色图标表示系统默认的配置参数，没经过修改。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7bbcd7a511414f2e85e92a8cf9d05b75><p class=pgc-img-caption></p></div><p>下面完成上图中的参数配置</p><p>1>.基本参数</p><p><strong>模块</strong>：选择我们插入的模块：TM COUNT 2×24</p><p><strong>通道</strong>：模块有两个通道，转速分配第1通道，扭矩分配第2通道。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a282e9b1f42e456190213312da07a602><p class=pgc-img-caption></p></div><p>2>.配置计数器</p><p>选择技术器信号类型，这里选择脉冲A相。选择滤波器频率。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f1f18b2884b440e19c3aa495d731fb9c><p class=pgc-img-caption></p></div><p>信号类型大概有以下几种：</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/885f430bb4dd4592bfbb934a11428d24><p class=pgc-img-caption></p></div><p>3>.测量值</p><p><strong>测量变量</strong>：频率</p><p><strong>更新时间</strong>：100ms，0-25000ms可选。</p><p>通常，如高速脉冲型式的传感器，如流量传感器，转速扭矩传感器等，测量其相应的流量，转速、扭矩等，最终都是先得到其频率值，再对频率直接进行数据处理，即可得到相应的流量、转速、扭矩等物理量。S71200系列CPU直接可以通过硬件组态，将计数通道设置为频率测量。S71200系列CPU高速脉冲采集频率测量功能，有3种不同的评率测量周期：1.0秒，0.1秒和0.01秒，不同工况需求下，可以选择不同的测量周期。在1500PLC里面可以0-2500ms选择，根据不同的工况进行配置即可。</p><p>其余都选择默认即可，有兴趣的读者可以都试着做一下，比如上下限的配置和DI，DO的配置，比较等功能。这里提一下即可，等用到的时候知道有这么一个功能，再去配置就行。</p><p><strong>2.4调试工艺对象</strong></p><p>计数工艺对象提供了一个可以调试的控制面板，在这个调试界面下可以进行技术器的基本操作和错误诊断。<strong>需要注意的是，使用调试界面前，需要在主程序中调用高速计数功能块才能正常使用。</strong></p><p>1>.插入指令模块</p><p>在Main中，从指令表里面找到工艺类->计数和测量，找到High_Speed_Counter功能并拖拽到程序段中，并在背景数据块中选择之前建立的计数器工艺对象。</p><p>将项目存盘编译并下载后，就可以到项目树下面找到调试功能进行调试。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b67bf2adbc324156a1041ca92b1dfa69><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dba6a0b4c9d94aebac5d1a7c9f394115><p class=pgc-img-caption></p></div><p>2>.工艺对象的调试</p><p>进入调试界面后，首先点击左上角的在线标志，使得PLC处于工作状态，在线模式下，使得软件门“SWGate”为真，观察反馈的门状态“StatusHW”是否为真，如果为真说明计数器已经开始工作，这时候如果外部有脉冲信号的话，计数器将进行计数并将计数值反馈到“CountValue”。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a8a36ff9c08d4bd9a20581420063819a><p class=pgc-img-caption></p></div><p><strong>2.5编程</strong></p><p>如果调试界面没问题，就可以回到Main程序块中进行编程，程序块的使用方法与调试界面完全一致。</p><p>有几个参数值得注意：</p><p>软件门：可以控制计数器什么时候开始计数。</p><p>countValue：计数值，这里区别与测量值。</p><p>MeasuredValue：测量值，此处就显示测得的频率值。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/550c4d1909fd4c5ea25aefd9c24772ba><p class=pgc-img-caption></p></div><p><strong>2.6数据处理</strong></p><p>在上面一小节详细介绍了，S71500高速脉冲采集通道的硬件配置和组态，本小节介绍此类工况的数据处理。</p><p><strong>转速的处理</strong>：评率为f，表示一秒钟采集f个脉冲，则一分钟采集60f个脉冲。码盘数为60，表示转一转，转速传感器发出60个脉冲。则，一分钟60f个脉冲表示转了60f/60转，转速为f转/分。</p><p>及：转速的处理公式为：转速=60f/码盘数 （转/分）</p><p><strong>扭矩的处理：</strong>扭矩处理比较简单，5K—15K线性对应-50N.m—50N.m。对评率值进行线性变换即可。</p><p>注意：无论是高速计数还是频率测量，读取到的ID1000值都是整数，要换算为相应的物理量，首先要进行数据转换，把双整数换算为浮点数，再进行数据转换。</p><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e377b70e473e41b4bf1b0df122c13de3><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=项目实践篇二：S71500高速脉冲计数及工程应用 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6cea9763116e4ee4863638935dd9b9ab><p class=pgc-img-caption></p></div><p><strong>2.7其余注意点，非常重要</strong></p><p><strong>注意1</strong>：要注意滤波频率的匹配问题，这个小编在做项目的时候吃过亏，小编在左具体项目的时候，就是因为没注意这一点，自己用手模拟脉冲可以采集到，但转速扭矩传感器就是采集不到，怀疑人家传感器坏了，最后费了很大劲才找到原因。</p><p>各位看官遇到类似的问题，可以变换和配置一下输入通道的滤波器试一下。</p><p><strong>注意2：注意加小编关注，共同学习交流关于测控的相关问题。</strong></p><p><strong>注意3：真实项目，协作不易，有用请点赞，谢谢观看。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'项目','实践','S71500'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>