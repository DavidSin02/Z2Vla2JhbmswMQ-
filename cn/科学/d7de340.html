<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>一种新型的程控多频雾化电路设计方案 | 极客快訊</title><meta property="og:title" content="一种新型的程控多频雾化电路设计方案 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RQzOoTnEoh23jK"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/d7de340.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/d7de340.html><meta property="article:published_time" content="2020-10-29T21:02:50+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:50+08:00"><meta name=Keywords content><meta name=description content="一种新型的程控多频雾化电路设计方案"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/d7de340.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>一种新型的程控多频雾化电路设计方案</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><p>超声雾化一直被应用在众多方面，如清洗<sup>[1]</sup>、医疗、加湿、工业等方面。其中，以超声雾化为代表的气溶胶制备材料技术如喷雾干燥、喷雾热解<sup>[2-3]</sup>、液相气相化学沉积以及熔融液滴沉积等<sup>[4]</sup>应用尤其广泛。通过振荡器的振荡，应用压电材料的逆压电效应产生超声振动<sup>[5]</sup>，达到雾化的效果。很多的雾化电路都是利用振荡电路的自激振荡产生振荡信号，这种设计的不足是各元件参数设置相对复杂致使调试周期较长，而且因其不易调整驱动频率，所以无法通过对驱动频率进行实时调整来寻找到最佳谐振频率。本文旨在设计一种他激振荡的雾化电路，即基于AD9833芯片的编程生成目标信号，在驱动电路的辅助增强下刺激振荡器振荡。同时电路通过程序控制可平滑地调整频率，并以此特点增加采样反馈电路使振荡器始终保持工作在最佳谐振状态。</p><p><strong>1 电路设计方案</strong></p><p>雾化电路主要由五部分组成：频率合成器模块、驱动电路模块、振荡电路模块、采样反馈电路模块与DC电源模块。</p><p>频率合成器模块负责合成目标频率的正弦波信号，并将目标信号传输到驱动电路；驱动电路模块负责增强信号的方波特性，使其更好地控制MOS管的开启与关断；振荡电路模块主要负责刺激压电晶体的振荡；采样反馈电路模块的设置有助于雾化电路寻找最佳谐振频率，当振荡器谐振时其两端电压与电流的相位差几乎为零，因此通过检测振荡器两端电压与电流的相位差来判断其是否为最佳谐振频率，如果检测到相位差不为零，将信息传递给主控制器修改频率直到相位差接近于零，此时即为最佳谐振频率；DC电源模块主要负责为电路整体提供稳定的直流电源保护，此模块采用LM2596开关电压调节器，该调节器功耗小效率高，具有输出线性好和负载可调节等特点，输出电压范围为1.2 V~37 V±4%。</p><p><strong>2 基于AD9833的频率合成器设计</strong></p><p>为提升雾化效果，本文设计的雾化罐将采用4个雾化片同时工作，对应需要四块雾化电路。因此，结合整体电路的功耗、发射频率和控制以及引脚数目等需求，选择STM32F系列为主控制器。</p><p><strong>2.1 主控制器</strong></p><p>主控制器采用STM32F103C8T6，STM32F103C8T6是一款基于ARM32位的CortextM3内核的单片机，2.0～3.6 V的宽电压供电范围，CPU工作频率最大可达72 MHz<sup>[6]</sup>。其还拥有20 KB的SRAM存储器和64 KB的Flash存储器。STM32F103C8T6满足对于雾化电路的开关以及频率调整等控制需求，具有速度快、成本低、性价比高等优点。</p><p><strong>2.2 频率合成器设计</strong></p><p>频率合成器是通信、雷达和电子对抗等设备的重要组成部分，其输出信号的稳定与准确程度直接影响通信、电子对抗等系统的整体性能<sup>[7]</sup>。本文以可编程芯片AD9833为核心设计了一种频率合成器，频率合成器可通过数码管来显示相对应的芯片编号、频率数值以及幅值。其中，AD9833芯片包含一个16位的控制寄存器可控制生成波形的种类，两个28位的频率寄存器可以决定信号频率，两个12位的相位寄存器确定初相位。在不同的主频时钟下，其精度可达到0.01 Hz或0.004 Hz。另外，AD9833芯片是运用DDS技术来进行频率的合成。</p><p><strong>2.3 直接数字频率合成技术（DDS）原理</strong></p><p>DDS(Direct Digital Synthesis)直接数字频率合成技术和传统频率合成器的信号产生方法有着一定的区别。利用该技术可获得高频率精度和高相位精度的矩形、正弦信号<sup>[8]</sup>。</p><p>正弦波幅值是非线性的，但相位是线性的，按相位将一个周期（360°）分成n等份，将这n个相位点对应的n个幅值存储在DDS芯片内部ROM中查询表<sup>[9]</sup>，不同的频率控制字会引起累加器相位增量不同，这样通过查询表就得到不同频率的数字正弦序列<sup>[10]</sup>，再经过D/A转换（D/A为10位）、低通滤波便可生成正弦波信号，图1即为DDS的原理框图。</p><p>输出波形频率值的计算公式为：</p><p>其中k为频率控制字，f<sub>mclk</sub>为参考时钟频率。</p><p>AD9833生成的信号频率最高可达12.5 MHz。其不仅可以生成正弦波还可以通过控制其内部寄存器生成方波和三角波信号，完全满足本雾化电路的设计需求。</p><p>通过大量的测试发现，若通过AD9833直接生成方波，由于需要生成的信号频率过高，结果导致生成的方波发生变形，并不是标准的方波，不利于驱动MOS管的开关，最终导致MOS管的烧毁或者雾化电路突然性的不工作等后果。因此本文提出一种新的优化方案，选择使用1.7 MHz、2.4 MHz、3.0 MHz三种高频率正弦波，并通过光耦和驱动电路来增强信号的方波特性来达到要求，经过一系列实验表明这种方式生成的波形的方波特性优于前方案，良好的方波特性促使MOS管的工作更加稳定，使外接信号可以更充分地激励压电晶体振荡，最终缩短了起振时间、提升了雾化效果。</p><p><strong>3 核心驱动及采样反馈电路设计</strong></p><p><strong>3.1 核心驱动电路设计</strong></p><p>此部分驱动电路是整个振荡器部分的关键，核心驱动电路接收频率合成器生成的高频正弦波信号并进行一系列的增强，提升其方波特性，加快信号高电平与低电平的转换时间，达到有效驱动MOS管工作的作用。其对信号方波特性增强效果的好坏直接影响雾化电路的工作性能，因此本文提出了以下的设计。</p><p>其中，在电路前端采用光耦合器6N137用于控制电路和外部电路的隔离，6N137光耦合器具有高速、兼容以及温度、电压和电流补偿等特点，因此6N137光耦除了隔离的作用还有着对信号上拉的作用，可以用于初步增强信号的方波特性。在信号经过光耦上拉的基础之上，驱动电路的后面部分将对信号进行进一步增强，其中12 V的直流电压输入既提升了信号的电压幅度也起到了一定的上拉作用，之后的两个三极管的推挽相连也缩短了信号高低电平的转换时间，很好地提升了信号的方波特性。图2即为驱动电路的硬件电路图。</p><img alt=一种新型的程控多频雾化电路设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RQzOoTnEoh23jK><p><strong>3.2 采样反馈电路模块设计</strong></p><p>该雾化电路采用程序控制，可实现频率的实时调整，因此在此基础之上增加了采样反馈电路的设计，通过采集振荡器两端电压与电流相位差，反馈给主控制器，不断调整输入频率至最佳谐振频率。因为实际电路中很难达到相位差为零，因此设定阈值，如果相位差低于阈值即认定此时为最佳谐振频率。图3为采样反馈电路工作流程图。</p><img alt=一种新型的程控多频雾化电路设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RQzOoU18aE2qNN><p><strong>4 实验测试结果</strong></p><p>图4即为通过示波器（固纬GDS-2202数字示波器）显示的针对三种频率信号增强其方波特性的效果图。其中，图4(a)为AD9833芯片最初生成的频率1.7 MHz的正弦波波形图；图4(b)为将生成的正弦波经光耦上拉调整后的波形图；图4(c)为正弦波经过光耦和驱动电路同时增强后，并最终用于驱动MOS管的波形图。图4(d)、(e)、(f)为信号频率2.4 MHz相对应的波形图。图4(g)、(h)、(i)为信号频率3.0 MHz相对应的波形图。可以看出，经过一系列的信号调整与增强，最终可以将高频正弦波信号近乎调整为方波信号，达到有效驱动MOS管开关的目的。通过实验证明，采用芯片生成高频正弦波信号并增强其方波特性这种方法使振荡器起振速度更快、雾化电路工作更加稳定。</p><img alt=一种新型的程控多频雾化电路设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RQzOoUEBlWYiEv><p>通过测试，雾化频率为1.7 MHz、2.4 MHz、3.0 MHz三种型号的雾化电路均可正常工作，起振速度快，振荡效果良好，雾化量满足要求。</p><p>表1中的第一列为三种频率型号的振荡器，本文设计的雾化电路实现了一块雾化电路适用于多个频率振荡器。第二列为经过采样反馈电路调整后使振荡器达到最佳谐振状态的驱动信号频率。第三、四列为雾化电路使振荡器雾化的工作电压范围，当工作电压达到起振电压后振荡器开始振荡，随着电压的升高雾化量增加，直至其所能承受的最高电压。</p><p><strong>5 结论</strong></p><p>本文设计了一种通过程序调整外接信号频率的雾化电路，利用外接信号激励振荡器工作。它可控制四块雾化电路同步工作，包含1.7 MHz、2.4 MHz、3.0 MHz三种工作频率。通过采样反馈及时寻找最佳谐振频率，可实现对驱动信号频率的实时调整。该设计提高了雾化电路的稳定性能，缩短了电路的调试周期，精简了电路结构。</p><p><strong>参考文献</strong></p><p>[1] RAJAN R，PANDIT A B.Correlations to predict droplet size in ultrasonic atomisation[J].Ultrasonics，2001，39(4)：235-255.</p><p>[2] SHIFLETT M B，FOLEY H C.Ultrasonic deposition of high-selectivity nanoporous carbon membranes[J].Science，1999，285(5435)：1902.</p><p>[3] HUANG C S，CHEN J S，LEE C H.Nebulized spray deposition of PLT thin film[J].Journal of Materials Science，1999，34(4)：727-733.</p><p>[4] 黄晖，姚熹，汪敏强，等.超声雾化系统的雾化性能测试[J].压电与声光，2004(1)：62-64.</p><p>[5] 甘云华，金龙，王心坚，等.超声波电机自激振荡驱动电路的变频控制特性[J].中国电机工程学报，2008(9)：93-97.</p><p>[6] 杨伟，肖义平.基于STM32F103C8T6单片机的LCD显示系统设计[J].微型机与应用，2014，33(20)：29-31，34.</p><p>[7] 蒋佳男，马忠松.具有小步进和低相噪的频率合成器的设计[J].现代电子技术，2018，41(16)：9-12.</p><p>[8] 刘改琴，胡南.应用STM32和DDS的便携式简谐振动合成演示频率合成器[J].重庆理工大学学报(自然科学)，2015，29(10)：127-131.</p><p>[9] 姜平，周根荣，王海军.基于AD9833的SPWM波形硬件生成方法[J].仪表技术与传感器，2007(10)：56-57，61.</p><p>[10] 亢凯，阎渊海，胡泽民，等.基于DDS技术的杂散抑制和正弦信号源的实现[J].电子技术应用，2017，43(12)：9-12.</p><p><strong>作者信息:</strong></p><p>孙成胜，张红民，龚恒翔，巴忠镭</p><p>(重庆理工大学，重庆400054)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'一种','多频','雾化'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>