<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>《计算机网络（谢希仁）》学习笔记 | 极客快訊</title><meta property="og:title" content="《计算机网络（谢希仁）》学习笔记 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a96e779a7dd349438784c6b1d15be14b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%a6/dcd4e82.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%a6/dcd4e82.html><meta property="article:published_time" content="2020-10-29T21:03:56+08:00"><meta property="article:modified_time" content="2020-10-29T21:03:56+08:00"><meta name=Keywords content><meta name=description content="《计算机网络（谢希仁）》学习笔记"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E5%AD%A6/dcd4e82.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>《计算机网络（谢希仁）》学习笔记</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E5%AD%A6.html>科学</a></span></div><div class=post-content><div><p class=ql-align-justify>​</p><p>1.1</p><p>计算机网络在信息时代的作用</p><p>三网: 电信网络,有线电视网络,计算机网络</p><p>计算机网络的重要功能:</p><p>1) 连通性 彼此连通,交换信息</p><p>2) 共享 信息共享,软硬件共享</p><p>1.2</p><p>因特网概述</p><p>我们先给出关于网络,互联网,因特网的一些最基本概念.</p><p><strong>网络</strong>:许多计算机连接在一起</p><p><strong>互联网</strong>:internet 许多网络连接在一起</p><p><strong>因特网</strong>:Internet 全球最大的,开放的,有众多网络相互连接而成的计算机</p><p>网络(一个互联网),其采用TCP/IP协议。</p><p>因特网发展的三个阶段:</p><p>1. 单个网络ARPANET向互联网发展的过程.1983年,TCP/IP协议成为ARPANET上的标准协议.人们把1983年看成是现在因特网的诞生时间.</p><p>2. 三级结构的因特网.分为主干网,地区网,校园网(企业网).</p><p>3. 多层次ISP结构的因特网.ISP称为因特网服务提供商.</p><p>1.3</p><p>因特网组成</p><p><strong>从工作形式上分为两大块:</strong></p><p>1) 边缘部分 由所连接在因特网上的主机组成.这部分使用户直接使用的.</p><p>2) 核心部分 由大量网络和连接这些网络的路由器组成,这部分是为边缘部分提供服务的.</p><p>在往里边缘的端系统之间的通信方式可划分为两大类:客户-服务器方式(C/S方式)和对等方式(P2P方式)</p><p>1. <strong>客户-服务器方式</strong></p><p>特征:客户是服务的请求方,服务器是服务的提供方.服务请求方和服务提供方都要使用网络核心部分所提供的的服务</p><p>2. <strong>对等连接(peer-to-peer,简写P2P)</strong>指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方.</p><p><strong>因特网的核心部分</strong></p><p><strong>1. 电路交换</strong></p><p>从通信资源的分配角度来看,交换(switching)就是按照某种方式动态地分配传输线的资源.在使用电路交换打电话之前,必须先拨号请求连接.</p><p>这种必须经过”建立连接(占用通信资源) 通话(一直占用通信资源) 释放资源(归还通信资源)”三个步骤的交换方式称为电路交换.</p><p>其一个重要特点:在通话的全部时间内,通话的两个用户是指占用端到端的通信资源.</p><p><strong>2. 分组交换</strong></p><p>分组交换采用存储转发技术.把要发送的的整块数据称为一个报文(message).在发送之前,先把其分为一个个小的等长数据段.在每一个数据段前面加上一些必要控制信息组成的首部(header)后,就构成了一个分组(packet),其又称为包.</p><p>分组是在因特网中传送的数据单元,分组中的首部包含了如目的地址和原地址等重要信息,每一个分组才能在因特网中独立地选择传输路径,并最终正确地交付到分组传输的终点.</p><p>位于网络边缘的主机和网络核心部分的路由器都是计算机,但它们的作用却不一样.主机是为用户进行信息处理的,并且可以和其他主机通过网络交换信息.路由器是用来转发分组的,即进行分组交换的.</p><p>优点: 高效 灵活 迅速 可靠</p><p>缺点:分组在各路由器存储转发时需要排队,这就会造成一定时延.另外,各分组必须携带的控制信息也造成了一定的开销.</p><p>3. 报文交换</p><p>整个报文先传送到相邻结点,全部存储下来后查找转发表,转到下一个结点.</p><p>1.4</p><p>计算机网络类别</p><p>按照作用范围分类:</p><p>广域网WAN(运用了广域网技术)</p><p>城域网MAN</p><p>局域网LAN(运用了局域网技术)</p><p>个人区域网PAN</p><p>1.5</p><p>计算机网络性能</p><p>7个性能指标.速率、带宽、吞吐量、时延、时延带宽积、往返时间、利用率</p><p><strong>1、速率</strong></p><p>连接在计算机网络上的主机在数字信号道上传送数据位数的速率,单位b/s,kb/s,Mb/s</p><p><strong>2、带宽</strong></p><p>计算机领域中,带宽来表示网络的通信线路传送数据的能力,表示单位时间内从网络中的某一点到另一点所通过的”最高数据率”</p><p>数据通信领域中,数字信道所传送的最高数据率单位b/s,kb/s,Mb/s</p><p><strong>3、吞吐量</strong></p><p>即在单位时间内通过某个网络的数据量;单位b/s,Mb/s等</p><p><strong>4、时延</strong></p><p>是指数据从网络的一端传送到另一端所需的时间</p><p>(1) 发送时延 是主机或路由器发送数据帧所需要的时间</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a96e779a7dd349438784c6b1d15be14b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center><br></p><p>(2) 传播时延 是电磁波在信道中传播一定的距离需要发费的时间</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4964480d60b8450ebc8e1e4f15909825><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>（3）处理时延 主机或路由器在收到分组是要花费一定的时间进行处理,例如分析分组的首部,从分组中提取数据部分.</p><p>（4）排队时延 分组在经过网络传输时,要经过许多路由器.但分组在进入路由器后要先在输入队列中等待处理.在路由器确定了转发接口后,还要在输出队列中排队等待转发.这就产生了排队延时.</p><p><strong>5、时延带宽积</strong></p><p>时延带宽积=传播时延×带宽</p><p>表示这样的链路可容纳多少个比特.又称以比特为单位的链路长度</p><p><strong>6、往返时间RTT</strong></p><p>表示从发送方发送数据开始,到发送方收到来自接收方的确认,总共经历的时间.</p><p><strong>7、利用率</strong></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a8f294407db54603971eb6c700ffd645><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>1.6</p><p>计算机网络体系结构</p><p>开放系统信息交换涉及的几个概念：</p><p><strong>实体(entry): </strong>交换信息的硬件或软件进程</p><p><strong>协议(protrocol):</strong> 控制两个对等实体通信的规则</p><p><strong>服务(service): </strong>下层向上层提供服务,上层需要下层提供的服务来实现本层功能</p><p><strong>服务访问点(SAP): </strong>相邻两层实体间交换信息的地方</p><p><strong>开发系统胡来年基本参考模型OSI/RM(Open Systems Interconnection Reference Model) 七层</strong></p><p>应用层 能够产生流量能够和用户交互的应用程序</p><p>表示层 加密 压缩 开发人员</p><p>会话层 服务和客户端建立的会话 查木马 netstat –nb</p><p>传输层 可靠传输(要建立回话的) 不可靠传输 流量控制</p><p>网络层 IP地址编址 选择最佳路径</p><p>数据链路层 输入如何封装 添加物理层地址 MAC</p><p>物理层 电压 接口标准</p><p>网络排错 从底层到高层</p><p><strong>网络安全和OSI参考模型</strong></p><p><strong>物理层安全</strong></p><p>数据链路层安全 ADSL</p><p>网络层安全</p><p>应用层安全 SQL注入漏洞 上传漏洞</p><p><strong>TCP/IP四层模型</strong></p><p>应用层 运输层(TCP或UDP) 网际层IP 网络接口层</p><p><strong>综合OSI和TCP/IP的优点,采用一种五层协议的体系结构</strong></p><p>应用层 应用层(传输数据单元PDU)</p><p>运输层 运输层报文</p><p>网络层 IP数据报(IP分组)</p><p>数据链路层 数据帧</p><p>物理层 001010101010000110101</p><p>2.1</p><p>物理层的基本概念</p><p><strong>物理层</strong>解决如何在连接各种计算机的传输媒体上数据比特流,而不指具体的传输媒体.</p><p>可以将物理层的主要任务描述为确定与传输媒体的接口有关的一些特性.</p><p>机械特性 接口形状,尺寸,引脚数目和排列</p><p>2.2</p><p>数据通信的基础知识</p><p>一个数据通信系统可划为三大部分: 原系统(或发送端,发送方) 传输系统(传输网络) 目的系统(接收端,接收方)</p><p>相关术语</p><p>通信的目的是<strong>传送消息</strong>.</p><p><strong>数据（data）</strong>——运送消息的实体</p><p><strong>信号（signal）</strong>——数据二等电气的或电磁的表现</p><p><strong>“模拟信号”</strong>——代表消息的参数的取值是连续的</p><p><strong>“数字信号”</strong>——代表消息的参数的取值是离散的</p><p><strong>码元（code）</strong>——在使用时间域的波形表示数字信号时，则代表不同</p><p>离散数值的基本波形就形成码元</p><p>有关信道的几个基本概念</p><p><strong>信道</strong>一般表示一个方向传送信息的媒体。所以我们说平常的信道线路往往包含一条发送信息的信道和一条接收信息的信道</p><p><strong>单向通信（单工通信）</strong>——只能有一个方向的信号没有反方向的交互</p><p><strong>双向交替通信（半双工通信）</strong>——通信的双方都可以发送信息，但不能双方同时发送（当然也就不能同时接收）</p><p><strong>双向同时通信（全双工通信</strong>）——通信的双方可以同时发送和接收信息</p><p>基带型号和带通信号</p><p><strong>基带信号（即基本频带信号）</strong>——来自信号源的信号，像计算机输出的代表各种文字图像文件的数据信号都属于基带型号。基带信号就是发出来的直接表达了要传输信息的信号，比如我们说话的声波就是基带信号。</p><p><strong>带通信号</strong>——把基带信号经过载波调制后，把信号频率范围搬移到较高的频段以便在信道中传输（即仅在一段频率范围内能够通过信道）</p><p>信道的极限容量</p><p>奈氏准则:其给出了在假定的立项条件下,为了避免码间串扰,码元的传输速率的上限值在任何信道中,码元传输的速率是有上限的,传输速率超过此上限,都会出现严重的码间串扰问题,使接收端对码元的识别成为不可能</p><p>信噪比</p><p>信噪比就是信号的平均功率和噪声的平均功率之比,记为S/N.</p><p>香农公式指出:信道的极限信息传输速率C是</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3f01c67b30ee4af381928d3b5b4e9d54><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>式中,W为信道的带宽(以Hz为单位);</p><p>S为信道内所传信号的平均功率</p><p>N为信道内部的高斯噪声功率</p><p>香农公式表名,信道的带宽或信道中的信噪比越大,信息的极限传输速率就越高.</p><p>香农公式的意义在于:<strong>只要信息传输速率低于信道的极限传输速率</strong>,就一定可以找到某种方法来实现无差错的传输</p><p>若信道带宽W或信噪比S/N没有上限(当然实际不可能这样),则信道的极限信息传输速率C也就没有上限</p><p>实际信道上能够达到的信息传输速率要比香农公式的极限传输速率低不少.</p><p>2.3</p><p>物理层下面的传输媒体</p><p>导向传输媒体 导向传输媒体中,电磁波沿着固体媒体传播</p><p>双绞线</p><p>屏蔽双绞线STP</p><p>无屏蔽双绞线UTP</p><p>同轴电缆</p><p>50Ω同轴电缆 由于数字传输,多用于基带传输</p><p>75Ω同轴电缆 用于模拟传输,即宽带同轴电缆</p><p>光纤</p><p>非导向传输媒体 就是指自由空间,其中的电磁波传输被称为无线传输 无线传输所使用的频段很广</p><p>短波通讯主要是靠电离层的反射,但短波信道的通信质量较差</p><p>微波在空间主要是直线传播 地面微波接力传播 卫星通信</p><p>2.4</p><p>信道复用技术</p><p>频分复用,时分复用,统计时分复用</p><p>频分复用</p><p>在分配到一定的频率后,在通信过程中自始至终都占用这个频带.</p><p>频分复用的所用用户在同样的时间占用不同的带宽资源(这里的带宽指的是频率带宽而不是数据的发送频率)</p><p>时分复用</p><p>是将时间划分为一段段等长的时分复用帧.每一个时分复用的用户在每一个TDM帧占用固定的时隙.</p><p>时分复用的所有用户是在不同的时间占用同样的频带宽度.</p><p>统计时分复用</p><p>是一种改进的时分复用,他能明显地提高信道的利用率,</p><p>波分复用1</p><p>就是光的频分复用.</p><p>码分复用 CDM</p><p>是另一种共享信道的方法,实际上更常用的是码分多址CDMA.每个用户可以在同样的时间使用同样的频带进行通信.由于个用户使用经过特殊挑选的不同码型,因此各用户之间不会造成干扰.</p><p>在CDMA中,每一个比特时间在划分为m个短时间,称为码片.</p><p>CDMA系统的一个重要特点就是这种体制给每一个站分配的码片序列不仅必须相同,且还必须正交.</p><p>3.1</p><p>数据链路层</p><p>数据链路层使用的信道主要有以下两种类型:</p><p>(1) 点对点信道. 这种信道使用一对一的点对点通信方式</p><p>(2) 广播通信. 这种信道使用一对多的广播通信方式.</p><p>链路与数据链路</p><p>链路(link)是一条点到点的物理路段,中间没有其他任何点.</p><p> 一条链路只是一条通路的一个组成部分</p><p>数据链路(data link)除了物理线路外,还必须有通信协议来控制这些数据的传输.若把实现这些协议的硬件和软件加到链路上,就构成了数据链路.</p><p> 现最常用的方法是使用适配器(即网卡)来实现这些协议的硬件和软件</p><p> 一般的适配器都包括了数据链路层和物理层这两层功能.</p><p>下面介绍点对点信道的数据链层协议数据单元——帧.</p><p>数据链路层把网络层交下来的数据构成帧发送到链路上,以及把接收到的帧中的数据取出上交给网络层.在因特网中,网络协议数据单元就是IP数据报(简称数据报,分组或包)</p><p>数据链路层的三个基本问题</p><p>1. 封装成帧(framing)</p><p>就是在一段数据的前后分别添加首部和尾部,这样就构成了一个帧,确定帧的界限.</p><p>我们知道:所有在因特网上传送的数据都是以分组(即IP数据报)为传送单位的,网络层饿IP数据传送到数据链路层就成为帧的数据部分.帧的数据部分的前面和后面分别添加上首部和尾部,就构成了一个完整的帧.这样的帧就是数据链路层的数据传输单元.</p><p>首部和尾部的一个重要作用就是进行帧定界</p><p>2. 透明传输</p><p>由于帧的开始和结束的标记是使用专门指明的控制字符,因此,所传输的数据中的任何8比特的组合一定不允许和用作帧定界的控制字符的比特编码一样,否则就会出现帧定界错误.</p><p>数据链路层对这些数据来说是透明的:表示无论什么样的比特组合的数据都能够通过数据链路层.</p><p>3. 差错检测</p><p>在一段时间内,传输错误的比特占所传输比特总数的比率称为误码率(BER)</p><p>为了保证数据传输的可靠性,在计算机网络传输数据时,必须采用各种差错检测措施.目前在数据链路层广泛使用了循环冗余检验CRC的检测技术.</p><p>仅用循环冗余检验CRC差错检测技术只能做到无差错接受,即近似地认为:”反是接收端数据链路层接受的帧均无差错”</p><p>3.2</p><p>点对点协议PPP</p><p>PPP协议就是用户计算机和ISP进行通信时所使用的数据链路层协议.</p><p>PPP协议的组成:</p><p>(1) 一个将IP数据报封装到串行链路的方法.</p><p>(2) 一个用来建立,配置和测试数据链路连接的链路控制协议LCP</p><p>(3) 一套网络控制协议NCP,其中每一个协议支持不同的网络层协议,如IP,OSI的网络层,DECnet,以及AppleTalk等.</p><p>PPP协议的帧格式</p><p>3.3</p><p>使用广播信道的数据链路层</p><p>局域网最主要特点是:网络为一个单位所有拥有,且地理范围和结点数目均有限.</p><p>局域网具有如下的一些主要优点:</p><p> 具有广播功能,从一个站点点可很方便地访问全网.局域网上的主机可共享连接在局域网上的各种硬件和软件资源.</p><p> 便于系统的扩展和逐渐地演变,各设备的位置灵活调整和改变</p><p> 提高了系统的可靠,可用性好生存性.</p><p>为了使数据链路层能够更好地适应多种局域网标准,IEEE 802 委员会就把局域网的数据链路层拆成两个子层,即逻辑链路控制层LLC子层和媒体接入层(MAC)子层.与接入到传输媒体有关的内容都放在MAC子层,LLC子层则与传输媒体无关,不管采用何种传输媒体和MAC子层的局域网对LLC子层来说都是透明的.</p><p>CDSMA/CD协议</p><p>最早的以太网是将许多计算机都连接到一根总线上.当初认为这样的连接方法既简单有可靠,因为总线上没有有源器件.</p><p>总线的特点:当一台计算机发送数据时,总线上的所有计算机都能检测到这个数据.这就是广播通信方式.为了在总线上实现一对一的通信,可以使买一台计算机拥有一个与其他适配器都不同的地址.</p><p>以太网使用的协议是<strong>CSMA/CD</strong>,意思是<strong>载波监听多点接入碰撞检测</strong></p><p>“多点接入”表示许多计算机以多点接入的方式连接在一根总线上</p><p>“载波监听”每一个站在发送数据之前先要检测一个总线上是否有其他计算机在没发送数据,如果有,则暂时不要发送数据,以免发生碰撞.就是用电子技术检测总线上有没有其他计算机发送的数据信号.</p><p>“碰撞检测”就是计算机边发送数据边检查信道上的信号电压变化情况</p><p>争用期</p><p>最先发送数据的站,在发送数据帧后之多经历2τ(两倍的端到端往返传播时延)就可以知道发送的数据帧是否遭到了碰撞</p><p>经过争用期这段时间还没有检测到碰撞,才能肯定这次发送不会发送碰撞.</p><p>以太网的争用期</p><p> 以太网的端到端往返时间时延2τ称为争用期,或碰撞窗口.通常,取51.2微秒为争用期的长度.</p><p> 对于10Mb/s以太网,在争用期内可发送512bit,即64字节.</p><p> 以太网在发送数据时,若前64字节未发生冲突,则后续的数据就不会发送冲突.</p><p>最短有效帧长</p><p> 由于一检测到冲突就立即终止发送,这时已经发送出去的数据一定小于64字节.</p><p> 以太网规定了最短有效帧长为64字节,凡长度小于64字节的帧都是由于冲突而异常终止的无效帧.</p><p>二进制指数类型退避算法</p><p>发生碰撞的站在停止发送数据后,要推迟(退避)一个随机时间在发送数据.</p><p> 确定基本退避时间,一般是取争用期2τ</p><p> 定义参数k</p><p><strong>K=Min[重传次数,10]</strong></p><p> 从整数集合[0,1,…,(2k-1)]中随机地取一个数,记为r.重传所需的时延就是r倍的基本退避时间</p><p> 当重传16次仍不能成功时即丢弃该帧,并向高层报告.</p><p>3.4</p><p>以太网</p><p class=ql-align-justify>以太网的两个标准</p><p class=ql-align-justify>DIX Ethernet V2是世界上第一个局域网产品(以太网)的规定</p><p class=ql-align-justify>IEEE 的 802.3标准.</p><p class=ql-align-justify>以太网与数据链路层的两个子层</p><p class=ql-align-justify>为了使数据链路层能够更好地适应多种局域网标准,IEEE 802 委员会就把局域网的数据链路层拆成两个子层,</p><p class=ql-align-justify>即逻辑链路控制层LLC子层和媒体接入层MAC子层.</p><p class=ql-align-justify>与接入到传输媒体有关的内容都放在MAC子层,LLC子层则与传输媒体无关,不管采用何种传输媒体和MAC子层的局域网对LLC子层来说都是透明的.</p><p class=ql-align-justify>以太网提供的服务</p><p class=ql-align-justify>以太网提供的服务是不可靠的交付,基金最大努力的交付.</p><p class=ql-align-justify>当接收站收到有差错的数据帧时就丢弃此帧,其他什么也不做.差错的纠正由高层决定.</p><p class=ql-align-justify>如果高层发现丢失了一些数据而进行重传,但以太网并不知道这是一个重传的帧,而是当作一个新的数据帧来发送.</p><p class=ql-align-justify>MAC层的硬件地址</p><p class=ql-align-justify>局域网中,硬件地址又称物理地址,或MAC地址</p><p>3.5</p><p>扩展以太网</p><p>在数据链路层扩展以太网要使用网桥.网桥工作在数据链路层,它根据,MAC帧的目的地址对收到的帧进行转发和过滤.当网桥收到一个帧时,并不是向所有的接口转发此帧,而是先检查次真的目的MAC地址,然后再确定将该帧转发到哪一个接口,或者把它丢弃(即过滤)</p><p>使用网桥可以带来以下好处:</p><p>(1) 过滤通信量,增加吞吐量</p><p>(2) 扩大了物理范围</p><p>(3) 提高了可靠性</p><p>(4) 可互联不同的物理层,不同MAC子层和不同速率</p><p>透明网桥</p><p>透明是指以太网上的站点并不知道所发送的帧将经过哪几个网桥,以太网上的站点都看不见以太网上的网桥.</p><p>4.1</p><p>网络层提供两种服务</p><p>网络层关注的是如何将分组从源端沿着网络路径送达目的地.</p><p>在计算机网络领域,网络层应该向运输层提供怎样的服务(“面向连接”还是”无连接”)曾引起了长期的争论.</p><p>争论点的实质就是:在计算机通信中,可靠交付应当由谁来负责?是网络层还是端系统?</p><p>两种服务:网络层应该向运输层提供怎样的服务?</p><p> 虚电路服务</p><p> 数据报服务</p><p>虚电路:</p><p>虚电路表示这只是一条逻辑上的连接,分组都沿着这条逻辑连接存储转发方式传送,而并不是真正建立了一条物理连接.</p><p>请注意,电路交换的电话通信是先建立了一条真正的连接.因此分组交换的虚连接只是类似,但并不完全一样.</p><p>数据报服务</p><p>网络层向上只提供简单灵活的,无连接的,尽量大努力交付的数据报服务.(虽然并不表示路由器可以任意丢弃分组,但在网络层上的这种交付实质上就是不可靠交付.)</p><p>网络在发送分组时不需要先建立连接.每一个分组(即IP数据报)独立发送,与其前后的分组无关(不进行编号)</p><p>网络层不提供服务质量承诺.即所传送的分组可能出错,丢失,重复和失序(既不按序到达终点)当然也不保证分组交付的时限</p><p>4.2</p><p>网际协议</p><p>网络互连的设备</p><p>中间设备又称为中间系统或中继系统</p><p> 物理层中继系统:转发器</p><p> 数据链路层中继系统:网桥或桥接器</p><p> 网络层中继系统:路由器</p><p> 网络层以上的中继系统:网关</p><p>IP协议简介</p><p>网际协议IP是TCP/IP体系中两个最主要的协议之一.与IP协议配套使用的还有四个协议:</p><p>网络地址</p><p>网络地址(也可以称为网络号)唯一指定了每个网络.同一网络中的每台计算机都共享相同的网络地址,并用它作为自己IP地址的一部分</p><p>IP地址</p><p>整个因特网就是一个单一的,抽象的网络.IP地址就是给因特网上的每一个主机(或路由器)的每一个接口分配一个在全世界范围是唯一的32位标识.IP地址的结构使我们能够在因特网上很方便地进行寻址查询</p><p>分类的IP地址,由网络号和主机号---常用的三种类别的IP地址</p><p>注意:主机部分不能全为0(从1开始)也不能全为1(二进制下,如果在子网掩码划到64时,其实连63是用来广播的,是不能用的)</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/10a4b8ef11604805831d0fecf41e313f><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>特殊的几个地址</p><p>127.0.0.1 本地环回地址</p><p>169.254.0.0 Windows自己给自己配的地址</p><p>保留的私网地址(在互联网上没有给服务器来用,可以给企业,政府,学校来用)</p><p>10.0.0.0 (每一个学校都可以用10网段,因为学校与学校之间也并不打算通信)</p><p>172.16.0.0 ----- 172.31.0.0</p><p>192.168.0.0 ---- 192.168.255.0</p><p>子网掩码(subnet mask)的作用</p><p>又叫网络掩码,地址掩码,它是一种用来指明一个IP地址的哪些位标识的主机所在的子网以及哪些是主机的位掩码.</p><p>子网掩码只有一个作用,就是将某个IP地址划分成网络地址和主机地址两部分</p><p>假如一台计算机的IP地址配置为172.16.122.204,子网掩码为255.255.0.0,将其IP地址和子网掩码都写成二进制,进行与运算.这样经过IP地址和子网掩码做完与运算后主机位不管是什么值都归零,网络位的值保持不变,这样就得到该计算机所处的网段为172.16.0.0</p><p>得到计算机所处网段和目标地址是不是在一个网段,如果是的话,计算机就想直接解析对方计算机MAC地址(即把数据报给发过去),如果不一样,就把数据包发给路由器.</p><p>子网划分</p><p>子网掩码不一定要用255,也可以用其他的数字,如C类网络中等分成两个子网时,可用子网掩码:255.255.255.128</p><p>再比如,你只想将2台电脑进行合理分配,那么将子网掩码就要写到252去</p><p>练习:</p><p>192.168.80.249</p><p>255.255.255.224 其网段在224这个网段</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/65ae406e0ba641eb9bf8de001c358156><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>172.16.0.0将这个B类网等分成两个子网:</p><p>255.255.0.0—255.255.128.0</p><p>172.16.0.1---172.16.127.254</p><p>172.16.128.1—172.16.255.254</p><p>超网</p><p>如何让两个子网的计算机划分在一个网段呢?</p><p>如图所示,将192.168.0.0和192.168.1.0两个C类网络合并.将IP地址第3个字节和4字节写二进制,可以看到将子网掩码往左移动1位,网络部分就一样了,这两个网段就在一个网断了</p><p>合并两个网段</p><p>192.168.0.0 255.255.255.0 192.168.1.0 . 255.255.255.0</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/adc6c2eaa0e14afeaa43f38d9b5539d7><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>IP地址和MAC硬件地址</p><p>从层次的角度,物理地址是数据链路层和物理层使用的地址,而IP地址是网络层和以上各层使用的地址.</p><p>MAC地址决定了下一票给谁,IP地址决定终点去哪.</p><p>地址解析协议ARP</p><p>将IP地址解释成物理地址.</p><p>IP数据报</p><p>一个数据报由首部和数据两部分组成</p><p> 首部的前一部分是固定长度,共20字节,是所有IP数据报必须具有的</p><p> 在首部的固定部分的后面是一些可选字段,其长度是可变的.</p><p>下面看看抓包实验</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/cab92cb5c8b0443196754e7ca7af78e0><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center>这是数据链路层,里面有数据源MAC地址和目标MAC地址,下面是网络层</p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0c9734644ff249f8b7a61222f07a9d40><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>数据转发分组</p><p>数据路由 路由器在不同网段转发数据包(报)</p><p>网络通畅的条件 能去能回</p><p>沿途的路由器必须知道目标网络下一跳给哪个接口</p><p>沿途的路由器必须知道源网络下一跳给哪个接口</p><p>ICMP简介</p><p>为了提高IP数据交付成功的机会,在网际层使用了网际控制报文协议</p><p>ICMP允许主机或路由器报告差错情况和提供有关异常的报告</p><p>ICMP报文作为IP层数据报的数据,加入数据的首部,组成IP数据报发送出去</p><p>ICMP报文类型</p><p>ICMP报文的类型有两个,即ICMP差错报和IMP询问报文</p><p>ICMP报文的前4个字节是统一的格式,共有三个字段:即类型,代码和检验和.接着4个字节的内容与ICMP的类型有关.</p><p>ping命令诊断网络故障</p><p>ping(Packet Internet Grope),因特网包探索器,用于测试网络连接量的程序,Ping发送一个ICMP回声请求消息给目的地址并报告是否收到所希望的ICMP回声应答.</p><p>Ping所指的是端对端连通,通常用来作为可用性的检查,但是某些病毒木马会强行大量远程执行ping命令抢占你的网络资源,导致系统变慢,网速变慢.严禁ping入侵作为大多数防火墙的一个基本功能提升给用户的选择.</p><p>如果打开IE浏览器访问网站失效,可以通过ping命令测试到Internet的网络连通,可以为你排除网络故障提供线索.</p><p>动态路由协议</p><p>RIP 最早 周期性广播 30秒 跳数(最大16跳)</p><p>内部网关协议 OSPF(Open Shortest Path First)</p><p>向本治系统中所有的路由器发送信息,这使用的方法是洪泛法,</p><p>发送的信息是与本路由器相邻的所有路由器的链路状态.但这只是路由器所知道的部分信息</p><p>只有当链路状态发送变化时,路由器才用洪泛法向所有路由器发送此信息.</p><p>4.3</p><p>虚拟专用网和NAT</p><p>虚拟机专用网V P N</p><p>由于IP地址的紧缺,一个机构能购申请到的IP地址数远小于本机构所拥有的主机数,考虑到因特网并不很安全,一个机构也不需要把所有的主机接入到外部因特网.实际上,很多主机主要还是和本机构内的其他主机进行通信(例如宾馆,商场中很多用于营业管理的计算机,医院,政府中的计算机).假定一个机构内部计算机通信也采用TCP/IP,那么从原则上来讲,对于这些仅在机构内部使用的计算机就可以由本机构自行分配其IP地址.这就是说,让这些计算机仅在本机构使用有效的IP地址(本机地址),而不需要向因特网的管理机构申请全球唯一的IP地址(这种地址称为全球地址).这样可以大大节约IP地址资源.</p><p>但是,任意选择一些IP地址作为本机构内部使用的本地地址,那么在某种情况下可能引起一些麻烦.例如,有时机构内部某主机需要和因特网连接,那么这种内部使用的本地地址就有可能和因特网某个IP地址重合,这样会出现地址二义性问题.</p><p>为了解决这一问题,RFC1918指明了一些专用地址.这些地址只能用于一个机构内部通信,而不能用于和因特网上的主机通信.在因特网中的所有路由器,对目的地址是专用地址的数据报一律不进行转发。</p><p>(1) 10.0.0.0到10.255.255.255</p><p>(2) 172.16.0.0到172.31.255.255</p><p>(3) 192.168.0.0到192.168.255.255</p><p>有时一个很大的机构有许多部门分布在相距很远的一些地点,而在每个地点都有自己的专用网.假定这些分布在不同地方的专用网需要经常通信.这时,可以利用公用的因特网作为本机构个专用网之间的通信载体,这样的专用网又称为虚拟专用网V P N</p><p>5.1</p><p>运输层</p><p>应用层 http https ftp DNS SMTP PoP3 RDP</p><p>传输层 TCP UDP</p><p>网络层 IP(RIP OSPF BGP) ICMP IGMP ARP</p><p>传输层两个协议应用场景</p><p>TCP 分段 编号 流量控制 建立会话 netstat –n</p><p>UDP 一个数据包就能完成数据通信 不建立会话 多播</p><p>传输层和应用层之间的关系</p><p>运输层向它上面的应用层提供通信服务.真正进行通信的实体是在主机中的进程,是这个主机中的一个进程和另一个主机中的一个进程在交换数据.因此严格讲,两个主机进行通信就是两个主机中的应用进程互相通信.</p><p>应用层协议和服务之间的关系</p><p>服务运行后在TCP或UDP的某个端口侦听客户端请求,端口代表服务.</p><p>我安装了一个服务,他就会侦听一个端口,比如打开一个web服务,他就会侦听80端口</p><p>查看自己计算机侦听的端口 netstat –an 远程控制桌面 mstsc</p><p>三类端口</p><p>熟知端口,数值一般为 0~1023</p><p>FTP:21</p><p>TELENT:23</p><p>SWTP:25</p><p>DNS:53</p><p>HTTP:80</p><p>https:443</p><p>RDP:3389</p><p>登记端口号,数值为1024~49151</p><p>客户端口号,数组为49152~65535</p><p>01</p><p>请输入标题</p><p>TCP是面向连接的传输协议.</p><p>每一条TCP连接只能有两个端点(endpoint,一个发,一个收),每一条TCP连接只能是点对点的(一对一)</p><p>TCP提供可靠交付的服务.</p><p>TCP提供全双工通信</p><p>面向字节流</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6ac852949fcc40379072f09f92b2563a><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e2b50f4afdbf4dd982de0e7879fc44ff><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2682ca8116e94daeb58f51fa629df480><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>看一个抓包实验</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/57ed269afff24515a6eb4310e4a9e51b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>第一个请求: 我方向目标IP发送建立会话请求,SYN=1,序号=0,确认号=0</p><p>窗口大小:32768</p><p>确认号是告诉我方计算机下一次发送是从哪一个字节开始</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/225a89566f2e419f82cfb66650c3a1c2><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>然后目标IP地址响应: 确认号=1,SYN=1,序号=0,窗口大小=16776960</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/67b74588a9a8435ab230d69ae1f0655d><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>接着我方发送信息:嗯好的,我知道你能收到(会话建立),我将发送信息(请求)</p><p>序号=1,确认号=1</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a5131908f52746b8814f5ec78f5bb81c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>TCP协议主要特点</p><p>TCP把连接作为最基本抽象</p><p>每一条连接有两个端点</p><p>TCP连接的端点不是主机,不是主机的IP地址,不是应用进程,也不是传输层的协议端口,TCP连接的端点叫做套接字(socket)</p><p>端口号拼接ip地址构成套接字</p><p>TCP如何实现可靠传输</p><p>无差错情况 超时重传 确认丢失 确认迟到</p><p>使用上述的确认和重传机制,我们就可以在不可靠传输网络上实现可靠的通信.</p><p>这种可靠传输协议常称为自动重传请求ARQ</p><p>ARQ表明重传的请求时自动进行的,接收方不需要请求发送方重传某个出错的分组</p><p>发送方可连续发送多个分组,不必每发完一个分组就停顿下来等待对方确认.由于信道一直有数据不间断的传送,这种传输方式可获得很高的信道利用率</p><p>TCP协议如何实现流量控制</p><p>TCP协议如何避免网络拥塞(拥塞控制)</p><p>出现资源拥塞的条件:对资源的需求总和＞可用资源</p><p>拥塞控制是一个全局性的过程,涉及到所有的主机,所有的路由器,以及与降低网络传输性能有关的所有因素</p><p>流量控制往往只在给定的发送端和接收端之间的点对点通信量的控制,他所要做的就是抑制发送端发送数据的速率,以便使接收端来得及接收</p><p>TCP的传输连接管理</p><p>传输连接有三个阶段: 连接建立,数据传送,连接释放</p><p>TCP连接的建立都是采用客户服务器方式</p><p>主动发起连接建立的应用进程叫做客户(client)</p><p>被动等待连接建立的应用进程叫做服务器(server)</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/76e469c1f91048138731e88b5820c768><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6fd09910451646d0ac7eb0790aa2cdb7><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>6</p><p>应用层</p><p>DNS服务的作用</p><p>负责解析域名 将域名解析成IP</p><p>什么是域名</p><p>根</p><p>顶级域名 com edu cn org gov</p><p>二级域名 baidu sina</p><p>域名解析测试</p><p>Ping www.baidu.com</p><p>Nslookup</p><p>安装自己的DNS服务器</p><p>1. 解析内网自己的域名</p><p>2. 降低到Internet的域名解析流量</p><p>3. 域环境</p><p>DHCP动态主机配置</p><p>静态IP地址</p><p>动态IP地址</p><p>FTP协议</p><p>FTP连接方式</p><p>控制连接:标准端口21,用于发送FTP命令信息</p><p>数据连接:标准端口20,用于上传,下载数据</p><p>数据连接的建立类型:</p><p>主动模式:服务端从20端口主动向客户端发起连接</p><p>被动模式:服务端在指定范围内的某个端口被动等待客户端发起连接.</p><p>FTP传输模式:</p><p>文本模式:ASSCII模式,以文本序列传输数据</p><p>二进制模式:Binary模式,以二进制序列传输数据</p><p>FTP服务端 如果有防火墙 需要在防火墙开21和20端口 使用主动模式进行数据连接</p><p>telnet 使用TCP的23端口</p><p>万维网</p><p>客户端程序向服务器程序发送请求,服务器程序向客户程序送回客户所要的万维网文档.在一个客户程序主窗口上显示出万维网文档称为页面(page)</p><p>万维网需要解决的问题:</p><p>(1) 怎眼标志分布在整个因特网上的万维网文档? URL</p><p>(2) 用什么样的协议来实现万维网上的各种连接? HTTP</p><p>(3) 怎样使不同作者创作的不同风格的万维网文档,都能在因特网上的各种主机上显示出来,同时使用用户清楚地知道在什么地方存在这链接? HTML</p><p>(4) 怎样才能使用户很方便地知道在什么地方存在着链接?</p><p>统一资源定位符URL 是用来表示从因特网上得到的资源位置和访问这些资源方法.URL相当于一个文件名在网络范围的扩展.因此URL是与因特网相连的机器上的任何访问对象的一个指针.由于访问不同对象所使用的协议不同,所以URL还指出读取某个对象时所使用的协议.</p><p>&lt;协议>://&lt;主机>:&lt;端口>/&lt;路径></p><p>HTTP的报文结构</p><p>HTTP请求报文和响应报文都是由三个部分组成.这两种报文的区别就是开始行不同.</p><p>(1) 开始行,用于区别是请求报文还是响应报文.在请求报文中的开始行叫做请求行,而在响应报文中的开始行叫做状态行.在开始行的三个字段之间都可以用空格分隔开,最后的”CR”和”LF”分别表示”回车””换行”</p><p>(2) 首部行,用来说明浏览器,服务器或报文主体的一些信息.</p><p>(3) 报文实体(entity body),在请求报文中一般都不用这个字段,我在响应报文中也可能没有这个字段.</p><p>请求报文的第一行”请求行”只有三个内容,方法,请求资源的url,以及HTTP的版本.</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=《计算机网络（谢希仁）》学习笔记 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/33336781498e4e2482f67527181bfdf8><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>如果您是初学者，猜您可能感兴趣的文章：</strong></p><p>《网工必备技术命令大全》（豪华升级版上线）</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'希仁','计算机','网络'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>