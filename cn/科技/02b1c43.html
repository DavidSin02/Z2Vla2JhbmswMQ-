<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「硬见小百科」单片机串行口介绍 | 极客快訊</title><meta property="og:title" content="「硬见小百科」单片机串行口介绍 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/cace3b27eaf54d9a9f8ff21faf9e8a53"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/02b1c43.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/02b1c43.html><meta property="article:published_time" content="2020-10-29T21:05:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:51+08:00"><meta name=Keywords content><meta name=description content="「硬见小百科」单片机串行口介绍"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/02b1c43.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「硬见小百科」单片机串行口介绍</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/cace3b27eaf54d9a9f8ff21faf9e8a53><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>串行口是单片机与外界进行信息交换的工具。</strong></p><p>■ 8051单片机的通信方式有两种：</p><p>并行通信:数据的各位同时发送或接收。</p><p>串行通信:数据一位一位次序发送或接收。</p><p>参看下图：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2bf155e7507c49f09431ebd5df8d378c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>串行通信的方式包括异步通信和同步通信。</strong></p><p><strong>异步通信</strong></p><p>它用一个起始位表示字符的开始，用停止位表示字符的结束。其每帧的格式如下：</p><p>在一帧格式中，先是一个起始位0，然后是8个数据位，规定低位在前，高位在后，接下来是奇偶校验位（能省略），最后是停止位1。用这种格式表示字符，则字符能一个接一个地传送。</p><p>在异步通信中，CPU与外设之间必须有两项规定，即字符格式和波特率。字符格式的规定是双方能够在对同一种0和1的串理解成同一种意义。原则上字符格式能由通信的双方自由制定，但从通用、方便的角度出发，一般还是使用一些标准为好，如采用ASCII标准。</p><p>波特率即数据传送的速率，其定义是每秒钟传送的二进制数的位数。例如，数据传送的速率是120字符/s，而每个字符如上述规定包含10数位，则传送波特率为1200波特。</p><p><strong>同步通信</strong></p><p>在同步通信中，每个字符要用起始位和停止位作为字符开始和结束的标志，占用了时间；所以在数据块传递时，为了提高速度，常去掉这些标志，采用同步传送。由于数据块传递开始要用同步字符来指示，同时要求由时钟来实现发送端与接收端之间的同步，故硬件较复杂。</p><p><strong>通信方向</strong></p><p>在串行通信中，把通信接口只能发送或接收的单向传送办法叫单工传送；而把数据在甲乙两机之间的双向传递，称之为双工传送。在双工传送方式中又分为半双工传送和全双工传送。半双工传送是两机之间不能同时进行发送和接收，任一时该，只能发或者只能收信息。</p><p><strong>8051单片机的串行接口结构</strong></p><p>8051单片机串行接口是一个可编程的全双工串行通信接口。它可用作异步通信方式（UART），与串行传送信息的外部设备相连接，或用于通过标准异步通信协议进行全双工的8051多机系统也能通过同步方式，使用TTL或CMOS移位寄存器来扩充I/O口。</p><p>8051单片机通过管脚RXD（P3.0，串行数据接收端）和管脚TXD（P3.1，串行数据发送端）与外界通信。SBUF是串行口缓冲寄存器，包括发送寄存器和接收寄存器。它们有相同名字和地址空间，但不会出现冲突，因为它们两个一个只能被CPU读出数据，一个只能被CPU写入数据。</p><p><strong>▲串行口的控制与状态寄存器</strong></p><p>串行口控制寄存器SCON</p><p>它用于定义串行口的工作方式及实施接收和发送控制。字节地址为98H，其各位定义如下表：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bb46dc9cd325480ca345c576cacd4ea9><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>SM0、SM1：串行口工作方式选择位，其定义如下：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/79dbb762cbd74910b2e4dbff42cadb93><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>(注：其中fosc为晶体震荡器频率）</p><p>SM2：多机通信控制位。在方式0时，SM2一定要等于0。在方式1中，当（SM2）=1则只有接收到有效停止位时，RI才置1。在方式2或方式3当（SM2）=1且接收到的第九位数据RB8=0时，RI才置1。</p><p>REN：接收允许控制位。由软件置位以允许接收，又由软件清0来禁止接收。</p><p>TB8: 是要发送数据的第9位。在方式2或方式3中，要发送的第9位数据，根据需要由软件置1或清0。例如，可约定作为奇偶校验位，或在多机通信中作为区别地址帧或数据帧的标志位。</p><p>RB8：接收到的数据的第9位。在方式0中不使用RB8。在方式1中，若（SM2）=0，RB8为接收到的停止位。在方式2或方式3中，RB8为接收到的第9位数据。</p><p>TI：发送中断标志。在方式0中，第8位发送结束时，由硬件置位。在其它方式的发送停止位前，由硬件置位。TI置位既表示一帧信息发送结束，同时也是申请中断，可根据需要，用软件查询的办法获得数据已发送完毕的信息，或用中断的方式来发送下一个数据。TI必须用软件清0。</p><p>RI：接收中断标志位。在方式0，当接收完第8位数据后，由硬件置位。在其它方式中，在接收到停止位的中间时刻由硬件置位（例外情况见于SM2的说明）。RI置位表示一帧数据接收完毕，可用查询的办法获知或者用中断的办法获知。RI也必须用软件清0。</p><p><strong>▲特殊功能寄存器PCON</strong></p><p>PCON是为了在CHMOS的80C51单片机上实现电源控制而附加的。其中最高位是SMOD。</p><p><strong>串行口的工作方式</strong></p><p>8051单片机的全双工串行口可编程为4种工作方式，现分述如下：</p><p><strong>方式0 移位寄存器输入/输出方式。</strong></p><p>可外接移位寄存器以扩展I/O口，也能外接同步输入/输出设备。8位串行数据者是从RXD输入或输出，TXD用来输出同步脉冲。</p><p>输出 串行数据从RXD管脚输出，TXD管脚输出移位脉冲。CPU将数据写入发送寄存器时，立即启动发送，将8位数据以fos/12的固定波特率从RXD输出，低位在前，高位在后。发送完一帧数据后，发送中断标志TI由硬件置位。</p><p>输入 当串行口以方式0接收时，先置位允许接收控制位REN。此时，RXD为串行数据输入端，TXD仍为同步脉冲移位输出端。当（RI）=0和（REN）=1同时满足时，开始接收。当接收到第8位数据时，将数据移入接收寄存器，并由硬件置位RI。</p><p>下面两图分别是方式0扩展输出和输入的接线图。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/31b18a6382494e5eb4e1533a7e7a9f4c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>&lt;单片机串行口接线图></p><p><strong>方式1 波特率可变的10位异步通信接口方式</strong>。</p><p>发送或接收一帧信息，包括1个起始位0，8个数据位和1个停止位1。</p><p>输出 当CPU执行一条指令将数据写入发送缓冲SBUF时，就启动发送。串行数据从TXD管脚输出，发送完一帧数据后，就由硬件置位TI。</p><p>输入 在（REN）=1时，串行口采样RXD管脚，当采样到1至0的跳变时，确认是开始位0，就开始接收一帧数据。只有当（RI）=0且停止位为1或者（SM2）=0时，停止位才进入RB8，8位数据才能进入接收寄存器，并由硬件置位中断标志RI；不然信息丢失。所以在方式1接收时，应先用软件清零RI和SM2标志。</p><p><strong>方式2 固定波特率的11位UART方式。</strong></p><p>它比方式1增加了一位可程控为1或0的第9位数据。</p><p>输出: 发送的串行数据由TXD端输出一帧信息为11位，附加的第9位来自SCON寄存器的TB8位，用软件置位或复位。它可作为多机通信中地址/数据信息的标志位，也能作为数据的奇偶校验位。当CPU执行一条数据写入SUBF的指令时，就启动发送器发送。发送一帧信息后，置位中断标志TI。</p><p>输入: 在（REN）=1时，串行口采样RXD管脚，当采样到1至0的跳变时，确认是开始位0，就开始接收一帧数据。在接收到附加的第9位数据后，当（RI）=0或者（SM2）=0时，第9位数据才进入RB8，8位数据才能进入接收寄存器，并由硬件置位中断标志RI；不然信息丢失。且不置位RI。再过一位时间后，不管上述条件时否满足，接收电路即行复位，并重新检测RXD上从1到0的跳变。</p><p><strong>方式3 波特率可变的11位UART方式。</strong></p><p>除波特率外，其余与方式2相同。</p><p><strong>关于波特率选择</strong></p><p>如前所述，在串行通信中，收发双方的数据传送率（波特率）要有一定的约定。在8051串行口的四种工作方式中，方式0和2的波特率是固定的，而方式1和3的波特率是可变的，由定时器T1的溢出率控制。</p><p>▲ 方式0</p><p>方式0的波特率固定为主振频率的1/12。</p><p>▲ 方式2</p><p>方式2的波特率由PCON中的选择位SMOD来决定，可由下式表示：</p><p>波特率=2的SMOD次方除以64再乘一个fosc，也就是当SMOD=1时，波特率为1/32fosc，当SMOD=0时，波特率为1/64fosc</p><p>▲ 方式1和方式3</p><p>定时器T1作为波特率发生器，其公式如下：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机串行口介绍 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0df25cea38664a1788528c05eb5f87c7><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>式中T1计数率取决于它工作在定时器状态还是计数器状态。当工作于定时器状态时，T1计数率为fosc/12;当工作于计数器状态时，T1计数率为外部输入频率，此频率应小于fosc/24。产生溢出所需周期与定时器T1的工作方式、T1的预置值有关。</p><p>定时器T1工作于方式0：溢出所需周期数=8192-x；</p><p>定时器T1工作于方式1：溢出所需周期数=65536-x；</p><p>定时器T1工作于方式2：溢出所需周期数=256-x。</p><p>因为方式2为自动重装入初值的8位定时器/计数器模式，所以用它来做波特率发生器最恰当。</p><p>当时钟频率选用11.0592MHZ时，取易获得标准的波特率，所以很多单片机系统选用这个看起来“怪”的晶体震荡器就是这个道理。</p><p>下表列出了定时器T1工作于方式2常用波特率及初值。</p><p><strong>以上所有信息仅作为学习交流使用，不作为任何学习和商业标准。若您对文中任何信息有异议，欢迎随时提出，谢谢！</strong></p><p>关于云创硬见</p><p class=ql-align-center>云创硬见是国内最具特色的电子工程师社区，融合了行业资讯、社群互动、培训学习、活动交流、设计与制造分包等服务，以开放式硬件创新技术交流和培训服务为核心，连接了超过30万工程师和产业链上下游企业，聚焦电子行业的科技创新，聚合最值得关注的产业链资源， 致力于为百万工程师和创新创业型企业打造一站式公共设计与制造服务平台。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'硬见','单片机','串行口'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>