<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 | 极客快訊</title><meta property="og:title" content="Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/4e948564af644a2594abe48d6891a289"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/051e158.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/051e158.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/051e158.html><meta property="article:published_time" content="2020-10-29T20:53:12+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:12+08:00"><meta name=Keywords content><meta name=description content="Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/051e158.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p></p><p>作为一名过来人，uboot、kernel对每个学linux的来说都有很深的情谊，因为它们是一个系统跑起来的最基础，每个学linux的都会首先接触到。而它们本身就是一个精美的小系统，里边代码所体现的逻辑、算法以及每个绝妙的C知识点都让你沉醉其中。</p><p>uboot 属于bootloader的一种，是用来引导启动内核的，它的最终目的就是，从flash中读出内核，放到内存中，启动内核。具体内容如下：</p><p>1 u­boot 的介绍及系统结构</p><p>1.1 u­boot 介绍</p><p>1.2 获取 u­boot</p><p>1.3 u­boot 体系结构</p><p>1.3.1 u­boot 目录结构</p><p>2 uboot 的启动过程及工作原理</p><p>2.1 启动模式介绍</p><p>2.2 阶段 1 介绍</p><p>2.2.1 定义入口</p><p>2.2.2 设置异常向量</p><p>2.2.3 设置 CPU 的模式为 SVC 模式</p><p>2.2.4 关闭看门狗</p><p>2.2.5 禁掉所有中断</p><p>2.2.6 设置以 CPU 的频率</p><p>2.2.7 设置 CP15</p><p>2.2.8 配置内存区控制寄存器</p><p>2.2.9 安装 U­BOOT 使的栈空间</p><p>2.2.10 BSS 段清 0</p><p>2.2.11 搬移 Nand Flash 代码</p><p>2.2.12 进入 C 代码部分</p><p>2.3 阶段 2 的 C 语言代码部分　</p><p>2.3.1 调用一系列的初始化函数</p><p>2.3.2 初始化网络设备</p><p>2.3.3 进入主 UBOOT 命令行</p><p>2.4 代码搬运</p><p>3 uboot 的移 植过程</p><p>3.1 环境</p><p>3.2 步骤</p><p>3.2.1 修改 Makefile</p><p>3.2.2 在 board 子目录中建立 crane2410</p><p>3.2.3 在 include/configs/中建立配置头文件</p><p>3.2.4 指定交叉编译工具的路径</p><p>3.2.5 测试编译能否成功</p><p>3.2.6 修改 lowlevel_init.S 文件</p><p>2.9 UBOOT 的 Nand Flash 移植</p><p>3.2.8 重新编译 u­boot</p><p>3.2.9 把 u­boot 烧入 flash</p><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4e948564af644a2594abe48d6891a289><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f92d05a318f5452b8bc897d7e0864e73><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/837813b380404b298e9025e67aaf9337><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/704af26977d04d118db931e1b534ff8f><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0a6931978ba24744b9aeb299a39ccda6><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3f9a9d009a6d41b2860a76cff9fb28ba><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/66869dfd140e4093abb834a9bdc5367a><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7fc2995d8462429a8930740589e3e448><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a27a0b5e8fe24bdc9e69b64f9e261522><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f58ae21dec4944f39e4e3ae52a3cbc7a><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=Linux系统移植之—uboot移植，你们要的uboot终于来了，堪称精品 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2c2999c7d4c348c0972697b0d5a06cbe><p class=pgc-img-caption></p></div><p><strong>4.2 常用命令使用说明</strong></p><p><strong>4.2.1 askenv(F)</strong></p><p>在标准输入（stdin）获得环境变量。</p><p><strong>4.2.2 autoscr</strong></p><p>从内存（Memory）运行脚本。（注意，从下载地址开始，例如我们的开发板是从 0x30008000 处开始运</p><p>行).</p><p>CRANE2410 # autoscr 0x30008000</p><p>## Executing script at 30008000</p><p><strong>4.2.3 base</strong></p><p>打印或者设置当前指令与下载地址的地址偏移。</p><p><strong>4.2.4 bdinfo</strong></p><p>打印开发板信息</p><p>CRANE2410 # bdinfo</p><p>-arch_number = 0x000000C1 （CPU 体系结构号）</p><p>-env_t = 0x00000000 （环境变量）</p><p>-boot_params = 0x30000100 （启动引导参数）</p><p>-DRAM bank = 0x00000000 （内存区）</p><p>--> start = 0x30000000 （SDRAM 起始地址）</p><p>--> size = 0x04000000 （SDRAM 大小）</p><p>-ethaddr = 01:23:45:67:89:AB （以太网地址）</p><p>-ip_addr = 192.168.1.5 （IP 地址）</p><p>-baudrate = 115200 bps （波特率）</p><p><strong>4.2.5 bootp</strong></p><p>通过网络使用 Bootp 或者 TFTP 协议引导境像文件。</p><p>CRANE2410 # help bootp</p><p>bootp [loadAddress] [bootfilename]</p><p><strong>4.2.6 bootelf</strong></p><p>默认从 0x30008000 引导 elf 格式的文件(vmlinux)</p><p>CRANE2410 # help bootelf</p><p>bootelf [address] - load address of ELF image.</p><p><strong>4.2.7 bootd(=boot)</strong></p><p>引导的默认命令，即运行 U-BOOT 中在“include/configs/smdk2410.h” 中设置的“bootcmd” 中</p><p>的命令。如下：</p><p>#define CONFIG_BOOTCOMMAND "tftp 0x30008000 uImage; bootm 0x30008000";</p><p>在命令下做如下试验:</p><p>CRANE2410 # set bootcmd printenv</p><p>CRANE2410 # boot</p><p>bootdelay=3</p><p>baudrate=115200</p><p>ethaddr=01:23:45:67:89:abCRANE2410 # bootd</p><p>bootdelay=3</p><p>baudrate=115200</p><p>ethaddr=01:23:45:67:89:ab</p><p><strong>4.2.8 tftp(tftpboot)</strong></p><p>即将内核镜像文件从 PC 中下载到 SDRAM 的指定地址，然后通过 bootm 来引导内核，前提是所用 PC 要安装设</p><p>置 tftp 服务。</p><p>下载信息：</p><p>CRANE2410 # tftp 0x30008000 zImage</p><p>TFTP from server 10.0.0.1; our IP address is 10.0.0.110</p><p>Filename 'zImage'.</p><p>Load address: 0x30008000</p><p>Loading: #################################################################</p><p>#################################################################</p><p>#################################################</p><p>done</p><p>Bytes transferred = 913880 (df1d8 hex)</p><p><strong>4.2.9 bootm</strong></p><p>内核的入口地址开始引导内核。</p><p>CRANE2410 # bootm 0x30008000</p><p>## Booting image at 30008000 ...</p><p>Starting kernel ...</p><p>Uncompressing</p><p>Linux......................................................................</p><p>done, .</p><p><strong>4.2.10 go</strong></p><p>直接跳转到可执行文件的入口地址，执行可执行文件。</p><p>CRANE2410 # go 0x30008000</p><p>## Starting application at 0x30008000 ...</p><p><strong>4.2.11 cmp</strong></p><p>对输入的两段内存地址进行比较。</p><p>CRANE2410 # cmp 0x30008000 0x30008040 64</p><p>word at 0x30008000 (0xe321f0d3) != word at 0x30008040 (0xc022020c)</p><p>Total of 0 words were the same</p><p>CRANE2410 # cmp 0x30008000 0x30008000 64</p><p>Total of 100 words were the same</p><p><strong>4.2.12 coninfo</strong></p><p>打印所有控制设备和信息，例如</p><p>-List of available devices:</p><p>-serial 80000003 SIO stdin stdout stderr</p><p><strong>4.2.13 cp</strong></p><p>内存拷贝，cp 源地址 目的地址 拷贝大小（字节）</p><p>CRANE2410 # help cp</p><p>cp [.b, .w, .l] source target count</p><p>ANE2410 # cp 0x30008000 0x3000f000 64<strong>4.2.14 date</strong></p><p>获得/设置/重设日期和时间</p><p>CRANE2410 # date</p><p>Date: 2006-6-6 (Tuesday) Time: 06:06:06</p><p><strong>4.2.15 erase(F)</strong></p><p>擦除 FLASH MEMORY, 由于该 ARM 板没有 Nor Flash, 所有不支持该命令.</p><p>CRANE2410 # help erase</p><p>erase start end</p><p>- erase FLASH from addr 'start' to addr 'end'</p><p>erase start +len</p><p>- erase FLASH from addr 'start' to the end of sect w/addr 'start'+'len'-1</p><p>erase N:SF[-SL]</p><p>- erase sectors SF-SL in FLASH bank # N</p><p>erase bank N</p><p>- erase FLASH bank # N</p><p>erase all</p><p>- erase all FLASH banks</p><p><strong>4.2.16 flinfo(F)</strong></p><p>打印 Nor Flash 信息, 由于该 ARM 板没有 Nor Flash, 所有不支持该命令.</p><p><strong>4.2.17 iminfo</strong></p><p>打印和校验内核镜像头, 内核的起始地址由 CFG_LOAD_ADDR 指定:</p><p>#define CFG_LOAD_ADDR 0x30008000 /* default load address */</p><p>该宏在 include/configs/crane2410.h 中定义.</p><p>CRANE2410 # iminfo</p><p>## Checking Image at 30008000 ...</p><p>Image Name: Linux-2.6.14.1</p><p>Created: 2006-06-28 7:43:01 UTC</p><p>Image Type: ARM Linux Kernel Image (uncompressed)</p><p>Data Size: 1047080 Bytes = 1022.5 kB</p><p>Load Address: 30008000</p><p>Entry Point: 30008040</p><p>Verifying Checksum ... OK</p><p><strong>4.2.18 loadb</strong></p><p>从串口下载二进制文件</p><p>CRANE2410 # loadb</p><p>## Ready for binary (kermit) download to 0x30008000 at 115200 bps...</p><p>## Total Size = 0x00000000 = 0 Bytes</p><p>## Start Addr = 0x30008000</p><p><strong>4.2.19 md</strong></p><p>显示指定内存地址中的内容</p><p>CRANE2410 # md 0</p><p>00000000: ea000012 e59ff014 e59ff014 e59ff014 ................</p><p>00000010: e59ff014 e59ff014 e59ff014 e59ff014 ................</p><p>00000020: 33f80220 33f80280 33f802e0 33f80340 ..3...3...3@..3</p><p>00000030: 33f803a0 33f80400 33f80460 deadbeef ...3...3`..3....</p><p>00000040: 33f80000 33f80000 33f9c0b4 33fa019c ...3...3...3...3</p><p>00000050: e10f0000 e3c0001f e38000d3 e129f000 ..............).00000060: e3a00453 e3a01000 e5801000 e3e01000 S...............</p><p>00000070: e59f0444 e5801000 e59f1440 e59f0440 D.......@...@...</p><p>00000080: e5801000 e59f043c e3a01003 e5801000 ....&lt;...........</p><p>00000090: eb000051 e24f009c e51f1060 e1500001 Q.....O.`.....P.</p><p>000000a0: 0a000007 e51f2068 e51f3068 e0432002 ....h ..h0... C.</p><p>000000b0: e0802002 e8b007f8 e8a107f8 e1500002 . ............P.</p><p>000000c0: dafffffb e51f008c e2400803 e2400080 ..........@...@.</p><p>000000d0: e240d00c e51f0094 e51f1094 e3a02000 ..@.......... ..</p><p>000000e0: e5802000 e2800004 e1500001 dafffffb . ........P.....</p><p>000000f0: eb000006 e59f13d0 e281f000 e1a00000 ................</p><p><strong>4.2.20 mm</strong></p><p>顺序显示指定地址往后的内存中的内容,可同时修改,地址自动递增。</p><p>CRANE2410 # mm 0x30008000</p><p>30008000: e1a00000 ? fffff</p><p>30008004: e1a00000 ? eeeeee</p><p>30008008: e1a00000 ? q</p><p>CRANE2410 # md 30008000</p><p>30008000: 000fffff 00eeeeee e1a00000 e1a00000 ................</p><p>30008010: e1a00000 e1a00000 e1a00000 e1a00000 ................</p><p>30008020: ea000002 016f2818 00000000 000df1d8 .....(o.........</p><p>30008030: e1a07001 e3a08000 e10f2000 e3120003 .p....... ......</p><p><strong>4.2.21 mtest</strong></p><p>简单的 RAM 检测</p><p>CRANE2410 # mtest</p><p>Pattern FFFFFFFD Writing... Reading...</p><p><strong>4.2.22 mw</strong></p><p>向内存地址写内容</p><p>CRANE2410 # md 30008000</p><p>30008000: ffffdffd ffffdffc ffffdffb ffffdffa ................</p><p>CRANE2410 # mw 30008000 0 4</p><p>CRANE2410 # md 30008000</p><p>30008000: 00000000 00000000 00000000 00000000 ................</p><p><strong>4.2.23 nm</strong></p><p>修改内存地址, 地址不递增</p><p>CRANE2410 # nm 30008000</p><p>30008000: de4c457f ? 00000000</p><p>30008000: 00000000 ? 11111111</p><p>30008000: 11111111 ?</p><p><strong>4.2.24 printenv</strong></p><p>打印环境变量</p><p>CRANE2410 # printenv</p><p>bootdelay=3</p><p>baudrate=115200</p><p>ethaddr=01:23:45:67:89:ab</p><p>ipaddr=10.0.0.110</p><p>serverip=10.0.0.1</p><p>netmask=255.255.255.0</p><p>stdin=serial</p><p>stdout=serialstderr=serial</p><p>Environment size: 153/65532 bytes</p><p><strong>4.2.25 ping</strong></p><p>ping 主机</p><p>CRANE2410 # ping 10.0.0.1</p><p>host 10.0.0.1 is alive</p><p><strong>4.2.26 reset</strong></p><p>复位 CPU</p><p><strong>4.2.27 run</strong></p><p>运行已经定义好的 U-BOOT 的命令</p><p>CRANE2410 # set myenv ping 10.0.0.1</p><p>CRANE2410 # run myenv</p><p>host 10.0.0.1 is alive</p><p><strong>4.2.28 saveenv(F)</strong></p><p>保存设定的环境变量</p><p><strong>4.2.29 setenv</strong></p><p>设置环境变量</p><p>CRANE2410 # setenv ipaddr 10.0.0.254</p><p>CRANE2410 # printenv</p><p>ipaddr=10.0.0.254</p><p><strong>4.2.30 sleep</strong></p><p>命令延时执行时间</p><p>CRANE2410 # sleep 1</p><p><strong>4.2.31 version</strong></p><p>打印 U-BOOT 版本信息</p><p>CRANE2410 # version</p><p>U-Boot 1.1.4 (Jul 4 2006 - 12:42:27)</p><p><strong>4.2.32 nand info</strong></p><p>打印 nand flash 信息</p><p>CRANE2410 # nand info</p><p>Device 0: Samsung K9F1208U0B at 0x4e000000 (64 MB, 16 kB sector)</p><p><strong>4.2.33 nand device &lt;n></strong></p><p>显示某个 nand 设备</p><p>CRANE2410 # nand device 0</p><p>Device 0: Samsung K9F1208U0B at 0x4e000000 (64 MB, 16 kB sector)</p><p>... is now current device</p><p><strong>4.2.34 nand bad</strong></p><p>CRANE2410 # nand bad</p><p>Device 0 bad blocks:<strong>4.2.35 nand read</strong></p><p>nand read InAddr FlAddr size</p><p>InAddr: 从 nand flash 中读到内存的起始地址。</p><p>FlAddr: nand flash 的起始地址。</p><p>size: 从 nand flash 中读取的数据的大小。</p><p>CRANE2410 # nand read 0x30008000 0 0x100000</p><p>NAND read: device 0 offset 0, size 1048576 ...</p><p>1048576 bytes read: OK</p><p><strong>4.2.36 nand erease</strong></p><p>nand erase FlAddr size</p><p>FlAddr: nand flash 的起始地址</p><p>size: 从 nand flash 中擦除数据块的大小</p><p>CRANE2410 # nand erase 0x100000 0x20000</p><p>NAND erase: device 0 offset 1048576, size 131072 ... OK</p><p><strong>4.2.37 nand write</strong></p><p>nand write InAddr FlAddr size</p><p>InAddr: 写到 Nand Flash 中的数据在内存的起始地址</p><p>FlAddr: Nand Flash 的起始地址</p><p>size: 数据的大小</p><p>CRANE2410 # nand write 0x30f00000 0x100000 0x20000</p><p>NAND write: device 0 offset 1048576, size 131072 ...</p><p>131072 bytes written: OK</p><p><strong>4.2.37 nboot</strong></p><p>u-boot-1.1.4 代码对于 nboot 命令的帮助不正确，修改如下:</p><p>正确的顺序为：</p><p>nboot InAddr dev FlAddr</p><p>InAddr: 需要装载到的内存的地址。</p><p>FlAddr: 在 nand flash 上 uImage 存放的地址</p><p>dev: 设备号</p><p>需要提前设置环境变量，否则 nboot 不会调用 bootm</p><p>CRANE2410 #setenv autostart yes</p><p>CRANE2410 # nboot 30008000 0 100000</p><p>Loading from device 0: &lt;NULL> at 0x4e000000 (offset 0x100000)</p><p>Image Name: Linux-2.6.14.3</p><p>Created: 2006-07-06 7:31:52 UTC</p><p>Image Type: ARM Linux Kernel Image (uncompressed)</p><p>Data Size: 897428 Bytes = 876.4 kB</p><p>Load Address: 30008000</p><p>Entry Point: 30008040</p><p>Automatic boot of image at addr 0x30008000 ...</p><p>## Booting image at 30008000 ...</p><p>Starting kernel ...</p><p><strong>4.3 命令简写说明</strong></p><p>所以命令都可以简写，只要命令前面的一部分不会跟其它命令相同,就可以不用写全整个命令.save 命令</p><p>CRANE2410 # sa</p><p>Saving Environment to Flash...</p><p>Un-Protected 1 sectors</p><p>Erasing Flash...Erasing sector 10 ... Erased 1 sectors</p><p><strong>4.4 把文件写入 NandFlash</strong></p><p>如果把一个传到内存中的文件写入到 Nand Flash 中, 如：新的 uboot.bin, zImage(内核),</p><p>rootfs 等, 如果做呢？我们可以用 Nand Flash 命令来完成. 但是 Nand Flash 写时,必须先要把 Nand</p><p>Flash 的写入区全部擦除后,才能写. 下面以把内存 0x30008000 起长度为 0x20000 的内容写到 Nand</p><p>Flash 中的 0x100000 为例.</p><p>CRANE2410 # nand erase 0x100000 20000</p><p>NAND erase: device 0 offset 1048576, size 131072 ... OK</p><p>CRANE2410 # nand write 0x30008000 0x100000 0x20000</p><p>NAND write: device 0 offset 1048576, size 131072 ...</p><p>131072 bytes written: OK</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'uboot','移植','Linux'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>