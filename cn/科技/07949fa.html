<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>RS485接口实际应用的常见问题 | 极客快訊</title><meta property="og:title" content="RS485接口实际应用的常见问题 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07949fa.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07949fa.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07949fa.html><meta property="article:published_time" content="2020-10-29T21:06:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:51+08:00"><meta name=Keywords content><meta name=description content="RS485接口实际应用的常见问题"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/07949fa.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>RS485接口实际应用的常见问题</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>深入的了解RS485的话，你会发现里面的知识确实有很多，那么我们就选择一些平时在弱电中会考虑到的问题供大家了解。</p><p><strong>一、什么是RS-485接口？它比RS-232-C接口相比有何特点？</strong></p><p>答：由于RS-232-C接口标准出现较早，难免有不足之处，主要有以下四点：</p><p>（1）接口的信号电平值较高，易损坏接口电路的芯片，又因为与TTL电平不兼容故需使用电平转换电路方能与TTL电路连接。</p><p>（2）传输速率较低，在异步传输时，波特率为20Kbps。</p><p>（3）接口使用一根信号线和一根信号返回线而构成共地的传输形式，这种共地传输容易产生共模干扰，所以抗噪声干扰性弱。</p><p>（4）传输距离有限，最大传输距离标准值为50英尺，实际上也只能用在15米左右。</p><p><strong>针对RS-232-C的不足，于是就不断出现了一些新的接口标准，RS-485就是其中之一，它具有以下特点：</strong></p><p>（1）RS-485的电气特性：逻辑"1"以两线间的电压差为+（2-6）V表示；逻辑"0"以两线间的电压差为-（2-6）V表示。接口信号电平比RS-232-C降低了，就不易损坏接口电路的芯片，且该电平与TTL电平兼容，可方便与TTL电路连接。</p><p>（2）RS-485的数据最高传输速率为10Mbps</p><p>（3）RS-485接口是采用平衡驱动器和差分接收器的组合，抗共模干能力增强，即抗噪声干扰性好。</p><p>（4）RS-485接口的最大传输距离标准值为4000英尺，实际上可达3000米，另外RS-232-C接口在总线上只允许连接1个收发器，即单站能力。而RS-485接口在总线上是允许连接多达128个收发器。即具有多站能力,这样用户可以利用单一的RS-485接口方便地建立起设备网络。</p><p>（5）因RS-485接口具有良好的抗噪声干扰性，长的传输距离和多站能力等上述优点就使其成为首选的串行接口。因为RS485接口组成的半双工网络，一般只需二根连线，所以RS485接口均采用屏蔽双绞线传输。RS485接口连接器采用DB-9的9芯插头座，与智能终端RS485接口采用DB-9（孔），与键盘连接的键盘接口RS485采用DB-9（针）。</p><p><strong>二、RS-422与RS-485串行接口标准</strong></p><p><strong>1．平衡传输</strong></p><p>RS-422、RS-485与RS-232不一样，数据信号采用差分传输方式，也称作平衡传输，它使用一对双绞线，将其中一线定义为A，另一线定义为B</p><p>通常情况下，发送驱动器A、B之间的正电平在+2～+6V，是一个逻辑状态，负电平在-2～6V，是另一个逻辑状态。另有一个信号地C，在RS-485中还有一"使能"端，而在RS-422中这是可用可不用的。"使能"端是用于控制发送驱动器与传输线的切断与连接。当"使能"端起作用时，发送驱动器处于高阻状态，称作"第三态"，即它是有别于逻辑"1"与"0"的第三态。</p><p>接收器也作与发送端相对的规定，收、发端通过平衡双绞线将AA与BB对应相连，当在收端AB之间有大于+200mV的电平时，输出正逻辑电平，小于-200mV时，输出负逻辑电平。接收器接收平衡线上的电平范围通常在200mV至6V之间。</p><p><strong>2．RS-422电气规定</strong></p><p>RS-422标准全称是"平衡电压数字接口电路的电气特性"，它定义了接口电路的特性。图2是典型的RS-422四线接口。实际上还有一根信号地线，共5根线。图1是其DB9连接器引脚定义。由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，最多可接10个节点。即一个主设备（Master），其余为从设备（Salve），从设备之间不能通信，所以RS-422支持点对多的双向通信。接收器输入阻抗为4k，故发端最大负载能力是10×4k+100Ω（终接电阻）。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。</p><p>RS-422的最大传输距离为4000英尺（约1219米），最大传输速率为10Mb/s。其平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mb/s。</p><p>RS-422需要一终接电阻，要求其阻值约等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输电缆的最远端。</p><p><strong>3．RS-485电气规定</strong></p><p>由于RS-485是从RS-422基础上发展而来的，所以RS-485许多电气规定与RS-422相仿。如都采用平衡传输方式、都需要在传输线上接终接电阻等。RS-485可以采用二线与四线方式，二线制可实现真正的多点双向通信</p><p>而采用四线连接时，与RS-422一样只能实现点对多的通信，即只能有一个主（Master）设备，其余为从设备，但它比RS-422有改进，无论四线还是二线连接方式总线上可多接到32个设备。</p><p>RS-485与RS-422的不同还在于其共模输出电压是不同的，RS-485是-7V至+12V之间，而RS-422在-7V至+7V之间，RS-485接收器最小输入阻抗为12k剑鳵S-422是4k健；旧峡梢运礡S-485满足所有RS-422的规范，所以RS-485的驱动器可以用在RS-422网络中应用。</p><p>RS-485与RS-422一样，其最大传输距离约为1219米，最大传输速率为10Mb/s。平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能使用规定最长的电缆长度。只有在很短的距离下才能获得最高速率传输。一般100米长双绞线最大传输速率仅为1Mb/s。</p><p>RS-485需要2个终接电阻，其阻值要求等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输总线的两端。</p><p><strong>三、RS-422与RS-485的网络安装注意要点</strong></p><p>RS-422可支持10个节点，RS-485支持32个节点，因此多节点构成网络。网络拓扑一般采用终端匹配的总线型结构，不支持环形或星形网络。在构建网络时，应注意如下几点：</p><p>1．采用一条双绞线电缆作总线，将各个节点串接起来，从总线到每个节点的引出线长度应尽量短，以便使引出线中的反射信号对总线信号的影响最低。图8所示为实际应用中常见的一些错误连接方式（a，c，e）和正确的连接方式（b，d，f）。a，c，e这三种网络连接尽管不正确，在短距离、低速率仍可能正常工作，但随着通信距离的延长或通信速率的提高，其不良影响会越来越严重，主要原因是信号在各支路末端反射后与原信号叠加，会造成信号质量下降。</p><p>2．应注意总线特性阻抗的连续性，在阻抗不连续点就会发生信号的反射。下列几种情况易产生这种不连续性：总线的不同区段采用了不同电缆，或某一段总线上有过多收发器紧靠在一起安装，再者是过长的分支线引出到总线。</p><p>总之，应该提供一条单一、连续的信号通道作为总线。</p><p><strong>四、RS-422与RS-485传输线上匹配的一些说明</strong></p><p>对RS-422与RS-485总线网络一般要使用终接电阻进行匹配。但在短距离与低速率下可以不用考虑终端匹配。那么在什么情况下不用考虑匹配呢？理论上，在每个接收数据信号的中点进行采样时，只要反射信号在开始采样时衰减到足够低就可以不考虑匹配。但这在实际上难以掌握，美国MAXIM公司有篇文章提到一条经验性的原则可以用来判断在什么样的数据速率和电缆长度时需要进行匹配：当信号的转换时间（上升或下降时间）超过电信号沿总线单向传输所需时间的3倍以上时就可以不加匹配。例如具有限斜率特性的RS-485接口MAX483输出信号的上升或下降时间最小为250ns，典型双绞线上的信号传输速率约为0.2m/ns（24AWGPVC电缆），那么只要数据速率在250kb/s以内、电缆长度不超过16米，采用MAX483作为RS-485接口时就可以不加终端匹配。</p><p>一般终端匹配采用终接电阻方法，前文已有提及，RS-422在总线电缆的远端并接电阻，RS-485则应在总线电缆的开始和末端都需并接终接电阻。终接电阻一般在RS-422网络中取100Ω，在RS-485网络中取120Ω。相当于电缆特性阻抗的电阻，因为大多数双绞线电缆特性阻抗大约在100～120Ω。这种匹配方法简单有效，但有一个缺点，匹配电阻要消耗较大功率，对于功耗限制比较严格的系统不太适合。</p><p>另外一种比较省电的匹配方式是RC匹配，如图1。利用一只电容C隔断直流成分可以节省大部分功率。但电容C的取值是个难点，需要在功耗和匹配质量间进行折衷。</p><p>还有一种采用二极管的匹配方法，如图2。这种方案虽未实现真正的"匹配"，但它利用二极管的钳位作用能迅速削弱反射信号，达到改善信号质量的目的。节能效果显著。</p><p><strong>五、RS-422与RS-485的网络失效保护</strong></p><p>RS-422与RS-485标准都规定了接收器门限为±200mV。这样规定能够提供比较高的噪声抑制能力，如前文所述，当接收器A电平比B电平高+200mV以上时，输出为正逻辑，反之，则输出为负逻辑。但由于第三态的存在，即在主机在发端发完一个信息数据后，将总线置于第三态，即总线空闲时没有任何信号驱动总线，使AB之间的电压在-200～+200mV直至趋于0V，这带来了一个问题：接收器输出状态不确定。如果接收机的输出为0V，网络中从机将把其解释为一个新的启动位，并试图读取后续字节，由于永远不会有停止位，产生一个帧错误结果，不再有设备请求总线，网络陷于瘫痪状态。除上述所述的总线空闲会造成两线电压差低于200mV的情况外，开路或短路时也会出现这种情况。故应采取一定的措施避免接收器处于不确定状态。</p><p>通常是在总线上加偏置，当总线空闲或开路时，利用偏置电阻将总线偏置在一个确定的状态（差分电压≥-200mV）。如图1。将A上拉到地，B下拉到5V，电阻的典型值是1kΩ，具体数值随电缆的电容变化而变化。</p><p>上述方法是比较经典的方法，但它仍然不能解决总线短路时的问题，有些厂家将接收门限移到-200mV/-50mV，可解决这个问题。例如Maxim公司的MAX3080系列RS-485接口，不仅省去了外部偏置电阻，而且解决了总线短路情况下的失效保护问题。</p><p><strong>六、采用RS485接口时，传输电缆的长度如何考虑？</strong></p><p>答：在使用RS485接口时，对于特定的传输线经，从发生器到负载其数据信号传输所允许的最大电缆长度是数据信号速率的函数，这个长度数据主要是受信号失真及噪声等影响所限制。下图所示的最大电缆长度与信号速率的关系曲线是使用24AWG铜芯双绞电话电缆（线径为0.51mm），线间旁路电容为52.5PF/M，终端负载电阻为100欧时所得出。（曲线引自GB11014-89附录A）。由图中可知，当数据信号速率降低到90Kbit/S以下时，假定最大允许的信号损失为6dBV时，则电缆长度被限制在1200M。实际上，图中的曲线是很保守的，在实用时是完全可以取得比它大的电缆长度。</p><p>当使用不同线径的电缆。则取得的最大电缆长度是不相同的。例如：当数据信号速率为600Kbit/S时，采用24AWG电缆，由图可知最大电缆长度是200m，若采用19AWG电缆（线径为0。91mm）则电缆长度将可以大于200m；若采用28AWG电缆（线径为0。32mm）则电缆长度只能小于200m。</p><p><strong>七、如何实现RS-485/422多点通讯</strong></p><p>答：RS-485总线上任何时候只能有一发送器发送。半双工方式，主从只能一个发。全双工方式，主站总可发送，从站只能有一个发送。（靠和DE控制）</p><p><strong>八、RS-485/RS422接口通讯时，在什么条件下需要采用终端匹配？电阻值如何确定？如何配置终端匹配电阻？</strong></p><p>答：在长线信号传输时，一般为了避免信号的反射和回波，需要在接收端接入终端匹配电阻。其终端匹配电阻值取决于电缆的阻抗特性，与电缆的长度无关。RS-485/RS-422一般采用双绞线（屏蔽或非屏蔽）连接，终端电阻一般介于100至140Ω之间，典型值为120Ω。在实际配置时，在电缆的两个终端节点上，即最近端和最远端，各接入一个终端电阻，而处于中间部分的节点则不能接入终端电阻，否则将导致通讯出错。</p><p><strong>九、RS-485/RS-422接口为何在停止通信时接收器仍有数据输出？</strong></p><p>答：由于RS-485/RS-422在发送数据完成后，要求所有的发送使能控制信号关闭且保持接收使能有效，此时，总线驱动器进入高阻状态且接收器能够监测总线上是否有新的通信数据。但是由于此时总线处于无源驱动状态（若总线有终端匹配电阻时，A和B线的差分电平为0，接收器的输出不确定，且对AB线上的差分信号的变化很敏感；若无终端匹配，则总线处于高阻态，接收器的输出不确定）,容易受到外界的噪声干扰。当噪声电压超过输入信号门限时（典型值±200mV），接收器将输出数据，导致对应的UART接收无效的数据，使紧接着的正常通讯出错；另外一种情况可能发生在打开/关闭发送使能控制的瞬间，使接收器输出信号，也会导致UART错误地接收。解决方法：1）在通讯总线上采用同相输入端上拉（A线）、反相输入端下拉（B线）的方法对总线进行钳位，保证接收器输出为固定的"1"电平；2）采用内置防故障模式的MAX308x系列的接口产品替换该接口电路；3）通过软件方式消除，即在通信数据包内增加2-5个起始同步字节，只有在满足同步头后才开始真正的数据通讯。</p><p><strong>十、在通讯电缆中的信号衰减</strong></p><p>第二个影响信号传输的因素是信号在电缆的传输过程中衰减。一条传输电缆可以把它看出由分布电容、分布电感和电阻联合组成的等效电路。</p><p>电缆的分布电容C主要是由双绞线的两条平行导线产生。导线的电阻在这里对信号的影响很小，可以忽略不计。信号的损失主要是由于电缆的分布电容和分布电感组成的LC低通滤波器。PROFIBUS用的LAN标准型二芯电感（西门子为DP总线选用的标准电缆），在不同波特率时的衰减系数如表1所示。</p><p><strong>十一、分布电容对RS-485总线传输性能的影响</strong></p><p>电缆的分布电容主是由双绞线的两条平行导线产生。另外，导线和地之间也存在分布电容，虽然很小，但在分析时也不能忽视。分布电容对总线传输性能的影响，主要是因为总线上传输的是基波信号，信号的表达方式只有"1"和"0"。在特殊的字节中，例如0x01，信号"0"使得分布电容有足够的充电时间，而信号"1"到来时，由于分布电容中的电荷，来不及放电，(Vin+)-(Vin-)-还大于200mV，结果使接爱误认为是"0"，而最终导致CRC校验错误，整个数据帧传输错误。</p><p>由于总线上分布影响，导致数据传输错误，从而使整个网络性能降低。解决这个问题有两种方法：</p><p>（1）降低数据传输的波特率；</p><p>（2）使用分布电容小的电缆，提高传输线的质量。</p><p>高耐特十三年专业从事工业交换机、光端机、光纤收发器等工业通信设备的研发，生产和销售，欢迎了解更多</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'RS485','实际','应用'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>