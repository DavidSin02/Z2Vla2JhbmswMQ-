<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Spring Boot配置文件yml格式详解 | 极客快訊</title><meta property="og:title" content="Spring Boot配置文件yml格式详解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/c60ba743367141da8cddac4cb8bd7412"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07c6935.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/07c6935.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/07c6935.html><meta property="article:published_time" content="2020-10-29T20:59:54+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:54+08:00"><meta name=Keywords content><meta name=description content="Spring Boot配置文件yml格式详解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/07c6935.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Spring Boot配置文件yml格式详解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt="Spring Boot配置文件yml格式详解" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c60ba743367141da8cddac4cb8bd7412><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>在Spring Boot项目中配置文件格式可以是.properties格式，也可以是yml格式，但是一般使用yml格式的比较多，yml格式都有什么语法？yml格式怎么配置？本文将详细的讲解yml的具体使用。</h1><p><br></p><div class=pgc-img><img alt="Spring Boot配置文件yml格式详解" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e0daf36cdb7744e0ac97d97c6c39dd03><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>简介</h1><p>YAML 是一种简洁的非标记语言(YAML Ain’t Markup Language),YAML以数据为中心，使用空白，缩进，分行组织数据，从而使得表示更加简洁易读， 常用于作为配置文件, 比json更加简洁。</p><ul><li>YAML 1.2 (3rd Edition): http://yaml.org/spec/1.2/spec.html</li><li>js-yaml: https://github.com/nodeca/js-yaml</li><li>YAML转化JSON: http://nodeca.github.io/js-yaml/</li></ul><h1 class=pgc-h-arrow-right>YAML 的设计目标：</h1><ul><li>人类容易阅读</li><li>可用于不同程序间的数据交换</li><li>适合描述程序所使用的数据结构，特别是脚本语言</li><li>丰富的表达能力与可扩展性</li><li>易于使用</li></ul><h1 class=pgc-h-arrow-right>YAML与XML、JSON比较</h1><ul><li>YAML 与 XML：具有 XML 同样的优点，但比 XML 更加简单、敏捷等</li><li>YAML 与 JSON</li><li>JSON 可以看作是 YAML 的子集，也就是说 JSON 能够做的事情，YAML 也能够做</li><li>YAML 能表示得比 JSON 更加简单和阅读，例如“字符串不需要引号”。所以 YAML 容易可以写成 JSON 的格式，但并不建议这种做</li><li>YAML 能够描述比 JSON 更加复杂的结构，例如“关系锚点”可以表示数据引用（如重复数据的引用）</li></ul><h1 class=pgc-h-arrow-right>YAML的适用范围</h1><ul><li>由于实现简单，解析成本很低，YAML特别适合在脚本语言中使用。列一下现有的语言实现：Ruby，Java，Perl，Python，PHP，OCaml，JavaScript。除了Java，其他都是脚本语言.</li><li>YAML比较适合做序列化。因为它是宿主语言数据类型直转的，由于兼容性问题，不同语言间的数据流转建议现在不要用YAML.</li><li>YAML做配置文件也不错。比如Ruby on Rails的配置就选用的YAML。对ROR而言，这很自然，也很省事.</li></ul><h1 class=pgc-h-arrow-right>语法：</h1><ul><li>大小写敏感</li><li>使用缩进表示层级关系</li><li>禁止使用tab缩进，只能使用空格键 , 建议使用两个空格</li><li>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</li><li># 表示注释，从这个字符一直到行尾，都会被解析器忽略。</li><li>字符串可以不用引号，也可以使用单引号或者双引号</li></ul><h1 class=pgc-h-arrow-right>数据结构</h1><ul><li>对象(键值表): 键值对的集合，又称为映射（mapping）/ 哈希（hashes） / 字典（dictionary）冒号分隔键值对(Key: Value), Key需要顶格写，前面不能有空格，冒号后面需要有一个空格然后再跟值, 相同的缩进属于同一个map 例如age: 12</li><li>数组(列表): 一组按次序排列的值，又称为序列（sequence） / 列表（list）</li><li>纯量scalar: 数据最小的单位，不可以再分割。</li></ul><p>对象和数组可以任意嵌套组合成负责的数据结构。</p><p>数据类型: 支持字符串、整数、浮点数、布尔、日期、null、对象、数组</p><h1 class=pgc-h-arrow-right>示例</h1><p>在一个文件中，可同时包含多个文件，并用 ---分隔。选择性的符号"..."可以用来表示文件结尾（在利用流的通信中，这非常有用，可以在不关闭流的情况下，发送结束信号）</p><pre><code>---# 使用冒号：表示键值对, 冒号后面需要有一个空格， key需要顶格写，前面不能有空格 同一缩进的所有键值对属于一个mapstr: 这是一行字符串 # 字符串默认不使用引号表示str2: '内容： 字符串' # 如果字符串之中包含空格或特殊字符，需要放在引号之中str3: '内容\n字符串' # 单引号和双引号都可以使用，双引号不会对特殊字符转义str4: "内容\n字符串" # 双引号对特殊字符不转义str5: 'labor''s day' # 单引号之中如果还有单引号，需要使用单引号转义# 字符串可以写成多行，从第二行开始，必须有一个单空格缩进。换行符会被转为空格str6: 这是一段  多行 字符串str7: | # "|"表示每行末尾都跟一个换行符 Foo Barstr8: &gt; # “&gt;” 最后一行跟一个换行符 Foo Barstr9: | Foostr10: |+ # +表示保留文字块末尾的换行 Foostr11: |- # -表示删除字符串末尾的换行 Foostr12: | # 字符串之中可以插入 HTML 标记 &lt;p style="color: red"&gt; 段落 &lt;/p&gt;int: 10float: 9.99bool: true # true、false# 时间采用 ISO8601 格式 1点被转成9点date: 2015-08-23 # 日期datetime: 2015-08-23T02:02:00.1z # 日期时间iso8601: 2015-08-23t21:59:43.10-05:00 # iso8601 日期格式spaced: 2015-08-23 21:59:43.10 -5 ## 对象：缩进方式obj:  field1: x field2: field21: xx field22: xxx# 对象：行内方式(和json格式差不多)obj2: { field1: 'x', field2: { field21: 'xx', field22: 'xxx' } }# 数组：连字符方式，如果元素也是数组就再使用一层缩进array: - ele1 - ele2 - - ele31 - ele32# 行内方式array2: [ 'ele1', 'ele2', [ 'ele31', 'ele32' ] ]# 数组中的原始是对象array3: - field1: x field2: xx field3: xxx - field1: x field2: xx field3: xxxset:  ? ele ? ele2# 嵌套方式nested: field1: x arr: - {field1: x, field2: x, field3: [1, 2, 3]} - {field1: x, field2: x, field3: [2, 3, 4]} arr2: - - a - b -  - c - c# 类型转换: 使用两个感叹号跟要转换的基本数据类型，单引号：用于转换自定义对象#下面是内置类型#!!int # 整数类型#!!float # 浮点类型#!!bool # 布尔类型#!!str # 字符串类型#!!binary # 也是字符串类型#!!timestamp # 日期时间类型#!!null # 空值#!!set # 集合#!!omap, !!pairs # 键值列表或对象列表#!!seq # 序列，也是列表#!!map # 键值表test: !!str 123# 当键是数组或者对象时需要使用问号来标记?[blue, reg, green]: xxx?{a:xx, b:xx}: xx# 锚点和引用ref: - &amp;index1 a - b - *index1... </code></pre><p>yaml转成json的结果对比</p><pre><code>{ str: '这是一行字符串', str2: '内容： 字符串', str3: '内容\\n字符串', str4: '内容\n字符串', str5: 'labor\'s day', str6: '这是一段 多行 字符串', str7: 'Foo\nBar\n', str8: 'Foo Bar\n', str9: 'Foo\n', str10: 'Foo\n\n', str11: 'Foo', str12: '&lt;p style="color: red"&gt;\n 段落\n&lt;/p&gt;\n', int: 10, float: 9.99, bool: true, date: Sun Aug 23 2015 08:00:00 GMT+0800 (CST), datetime: '2015-08-23T02:02:00.1z', iso8601: Mon Aug 24 2015 10:59:43 GMT+0800 (CST), spaced: Mon Aug 24 2015 10:59:43 GMT+0800 (CST), obj: { field1: 'x', field2: { field21: 'xx', field22: 'xxx' } }, obj2: { field1: 'x', field2: { field21: 'xx', field22: 'xxx' } }, array: [ 'ele1', 'ele2', [ 'ele31', 'ele32' ] ], array2: [ 'ele1', 'ele2', [ 'ele31', 'ele32' ] ], array3:  [ { field1: 'x', field2: 'xx', field3: 'xxx' }, { field1: 'x', field2: 'xx', field3: 'xxx' } ], set: { ele: null, ele2: null }, nested:  { field1: 'x', arr:  [ { field1: 'x', field2: 'x', field3: [ 1, 2, 3 ] }, { field1: 'x', field2: 'x', field3: [ 2, 3, 4 ] } ], arr2: [ [ 'a', 'b' ], [ 'c', 'c' ] ] }, test: '123', '?[blue, reg, green]': 'xxx', '?{a:xx, b:xx}': 'xx', ref: [ 'a', 'b', 'a' ] }</code></pre><h1 class=pgc-h-arrow-right><strong>Java解析</strong></h1><p>引入依赖</p><pre><code>&lt;!-- https://mvnrepository.com/artifact/org.yaml/snakeyaml --&gt;&lt;dependency&gt; &lt;groupId&gt;org.yaml&lt;/groupId&gt; &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt; &lt;version&gt;1.20&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>实体类</p><pre><code>public class Address { private Long id; private String address;}public class UserInfo { private Long userId; private String username;}public class User { private Long id; private String name; private Integer age; private Date birthday; private float height; private double score; private boolean isVip; private String[] hobbies; private List&lt;Address&gt; addresses; private UserInfo userInfo;}</code></pre><p>测试</p><pre><code>public static void main(String[] args) throws Exception { UserInfo userInfo = new UserInfo(1L, "xiaoming"); Address address = new Address(1L, "上海市浦东新区"); Address address2 = new Address(2L, "北京市朝阳区"); List&lt;Address&gt; addresses = new ArrayList&lt;Address&gt;(); addresses.add(address); addresses.add(address2); User user = new User(1L, "小明", 20, new Date(), 178.88f, 99999.99, true, new String[]{"eat", "drink", "play", "happy"}, addresses, userInfo); Yaml yaml = new Yaml(); // 写入文件 yaml.dump(user, new FileWriter("/Users/mengday/Desktop/user.yml")); // 从文件中读 User user1 = yaml.loadAs(new FileInputStream(new File("/Users/mengday/Desktop/user.yml")), User.class); System.out.println(user1.toString());}</code></pre><p>结果</p><pre><code>!!com.example.demo.Useraddresses:- {address: 上海市浦东新区, id: 1}- {address: 北京市朝阳区, id: 2}age: 20birthday: 2018-03-13T09:30:38.586Zheight: 178.88hobbies: [eat, drink, play, happy]id: 1name: 小明score: 99999.99userInfo: {userId: 1, username: xiaoming}vip: trueUser{id=1, name=’小明’, age=20, birthday=Tue Mar 13 17:30:38 CST 2018, height=178.88, score=99999.99, isVip=true, hobbies=[eat, drink, play, happy], addresses=[Address{id=1, address=’上海市浦东新区’}, Address{id=2, address=’北京市朝阳区’}], userInfo=UserInfo{userId=1, username=’xiaoming’}}</code></pre><h1 class=pgc-h-arrow-right>本号主要用于分享企业中常用的技术，更加侧重于实用，欢迎关注，便于浏览其它更多实用的历史文章。</h1></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'配置文件','Spring','Boot'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/4ad16f9.html alt="Spring Boot 入门系列（二十五）读取配置文件的三种方式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/4ad16f9.html title="Spring Boot 入门系列（二十五）读取配置文件的三种方式">Spring Boot 入门系列（二十五）读取配置文件的三种方式</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/3312eb6.html alt="Spring Boot 在启动时进行配置文件加解密" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/677858a9ea4e455e840b8fb8dc7656b9 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/3312eb6.html title="Spring Boot 在启动时进行配置文件加解密">Spring Boot 在启动时进行配置文件加解密</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>