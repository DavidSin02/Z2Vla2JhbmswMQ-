<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>时序约束是如何影响数字系统的，具体如何做时序分析？ | 极客快訊</title><meta property="og:title" content="时序约束是如何影响数字系统的，具体如何做时序分析？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/S7TMgbZ6pelMuY"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0a53677e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0a53677e.html><meta property="article:published_time" content="2020-11-14T21:04:01+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:01+08:00"><meta name=Keywords content><meta name=description content="时序约束是如何影响数字系统的，具体如何做时序分析？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0a53677e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>时序约束是如何影响数字系统的，具体如何做时序分析？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>在进行数字电路系统的设计时，时序是否能够满足要求直接影响着电路的功能和性能。本文首先讲解了时序分析中重要的概念，并将这些概念同数字系统的性能联系起来，最后结合FPGA的设计指出时序约束的内容和时序约束中的注意事项。</p><p><strong class=highlight-text toutiao-origin=strong>一、时序分析中的重要概念</strong></p><p><strong>在数字系统中有两个非常重要的概念：建立时间和保持时间</strong>，其示意图如图1所示。一个数字系统能否正常工作跟这两个概念密切相关。只有建立时间和保持时间都同时得到满足时，数字系统才能可靠的、正常的工作。</p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7TMgbZ6pelMuY><p>当寄存器的建立时间或保持时间不能得到满足时，寄存器有可能会进入亚稳态( Metastable)。亚稳态是一种电压的中间态，假设寄存器的输出电压大于3V判决为逻辑1，小于0.3V判决为逻辑0，那么电压处于0.3V到3V之间并且能够短时间稳定的状态就是亚稳态。寄存器在进入亚稳态一段时间后会回复到正常的状态，但是有可能回到逻辑1的状态，也有可能回到逻辑0的状态。这种不确定性就有可能引起数字系统的错误。</p><p><strong>建立时间和保持时间是一个寄存器的固有属性，是由其内部的结构、工艺等因素决定的</strong>，因而在进行数字系统设计时只能通过改变电路结构使其满足建立时间和保持时间的要求，而不能改变建立时间和保持时间的值。</p><p><strong class=highlight-text toutiao-origin=strong>二、建立时间和保持时间对电路性能的影响</strong></p><p>首先来看一个典型的同步数字系统的示意图，见图2。</p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S7TMgbmAlmdtZy><p>在图2中，FF1和FF2代表两个寄存器，在两个寄存器中间存在组合逻辑。同步的数字系统正是由许多的寄存器，以及寄存器中间的组合逻辑构成的(也包括寄存器间的直接连接)。</p><p>显然，如果要数字系统正常工作，每个寄存器的建立时间和保持时间都必须得到满足。假设时钟信号ck到达所有寄存器的时间相同，图3画出了这两个寄存器间的时序关系。</p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7TMgbuDOa2tYA><p>从图中可以看到，如果要FF2的建立时间和保持时间得到满足，必须要满足以下公式：</p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7TMgc77rqxiZv><p>其中Ts建立时间，Th为保持时间，Tclock为时钟周期，Tclk2q为寄存器的传输延时(从时钟有效沿到输出的时间)，Tdelay为两个寄存器之间的组合逻辑延时。</p><p>从公式(1)中可以看出，<strong>建立时间是否能得到满足取决于3个参数：时钟周期、寄存器传输延时以及组合逻辑延时。</strong>其中寄存器的输出延时是寄存器的固有属性，不可更改，因而在设计中只能靠调节时钟周期和组合逻辑的延时来满足寄存器对于建立时间的要求。</p><p>从公式(2)中可以看出，保持时间能否得到满足取决于2个参数：寄存器的传输延时和组合逻辑的延时，设计者能做的仅仅是调节组合逻辑的延时。</p><p>图3仅仅是两个寄存器之间的时序关系，在一个数字系统中往往包含有成千上万个寄存器，任意两个相邻的寄存器之间的时序关系都必须满足公式(1)和公式(2)的约束，只有如此数字系统才能正常工作。在数字系统可以正常工作的前提下，组合逻辑的延时就决定了数字系统能够工作的时钟频率的上限。组合逻辑的延时越短，系统的工作频率的上限就越高，这里的组合逻辑的延时指的是任意两个相邻的寄存器之间的最长的组合逻辑延时，也就是关键路径的延时。当然，组合逻辑的延时也不能无限短，必须要满足公式(2) 的要求。</p><p><strong class=highlight-text toutiao-origin=strong>三、在FPGA中对时序进行约束</strong></p><p>在FPGA设计中，时序约束占有重要的地位。时序约束主要有两方面的作用：第一，EDA工具会根据设计者的约束努力尝试布局布线，尽量满足设计者提出的时序方面的要求；第二，在EDA工具经过努力仍不能满足设计者提出的时序要求时会给出警告信息，用以提示设计者。</p><p>在对设计进行约束时要做到恰到好处，太松或者太紧的约束都不能使电路达到最好的状态。约束过松自不必提，约束过紧之后EDA软件经过努力尝试仍不能达到要求，但其不会取最接近目标的一次，而是将最后一次作为结果，可能导致电路性能更加恶化。</p><p><strong>当今的FPGA设计中时序约束主要包括3种：</strong>一是寄存器到寄存器的约束，二是引脚到寄存器的约束，三是寄存器到引脚的约束。</p><p>寄存器到寄存器的约束是对时钟周期的约束，对应于公式(1)中的Tclk2q+Tdelay+Ts，通常来讲设计者应该对其所设计的系统需要多快的时钟频率有所了解，只要结合需求给出时钟周期的约束即可。</p><p>在约束时钟周期时，实际上保证的是两个寄存器中后一级的寄存器。第一级寄存器连接在FPGA的外部引脚上，那么第一级寄存器能否满足其建立时间和保持时间的约束就取决于引脚上时钟和数据的关系以及各自到达寄存器的延时。假设引脚时钟和内部时钟是同步的(频率和相位都同步)，那么数据引脚和时钟引脚的时序关系以及从引脚到寄存器输入端的延时共同决定了第一个寄存器的建立时间和保持时间能否得到满足，设计者可以对数据引脚到寄存器输入端的延时进行约束。</p><p>为了保证FPGA的输出信号和时钟的时序关系达到预期的效果，比如达到后一级芯片对时钟和数据时序关系的要求，设计者可以对寄存器的输出到引脚所经历的延时进行约束。</p><p><strong>以上三种约束就可以涵盖设计中的所有寄存器。</strong>但是在某些特定的情况下，比如异步时钟域时，我们清楚地知道某些寄存器会发生建立时间或者保持时间不满足的情况，但这是不可避免的，设计者也已经对其进行了处理。在这种情况下，设计者最好告诉EDA软件忽略这些路径，否则EDA软件会努力尝试解决这些路径的时序冲突，既费时又没有效果。</p><p>为帮助更多的新手学员，入门工程师深入掌握FPGA时序分析与约束，熟练掌握FPGA时钟信号与寄存器设计，本周三晚上8点，我将在电子发烧友直播间举行<strong>《时序约束在FPGA高速数字系统中的重要作用》直播</strong>在线讲座，欢迎大家提前报名参加直播！</p><p><strong>直播主题：</strong>时序约束在FPGA高速数字系统中的重要作用</p><p><strong>直播时间：</strong><strong class=highlight-text toutiao-origin=span>2020年8月12日 （周三）晚8点</strong></p><p><strong>直播嘉宾：</strong>小梅哥，资深FPGA工程师，武汉芯路恒科技CEO，常年全功能FPGA平台电商销量TOP1</p><p><strong>直播简介：</strong></p><p>在上一场直播之后，很多参与直播的网友都提问，表示对时序分析和时序约束的知识感兴趣，但是又存在一些很合理的疑问，比如怎样的系统才算是高速系统，时序约束的方法在实际应用中究竟能够起到怎样的效果，所以特安排本次直播进一步介绍。</p><p>本次直播内容将通过几个具体的实例，来演示时序约束对高速并行接口电路的工作情况的影响。通过这次直播，希望能让大家一定要重视时序约束的内容，在调试过程中，很多问题，可能并不是你的代码功能写的不对，而是接口时序没有满足要求。</p><p><strong class=highlight-text toutiao-origin=span>FPGA从零入门资料（硬件基础+入门基础篇）</strong></p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S7TMh4P9ycKYse><p><strong class=highlight-text toutiao-origin=span>FPGA基础应用实例与开发</strong></p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7TMh5rEFZCDnN><p><strong class=highlight-text toutiao-origin=span>FPGA实战项目分享</strong></p><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7TMh68GIR2RMq><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7TMh6QjRyNNN><img alt=时序约束是如何影响数字系统的，具体如何做时序分析？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S6eelqQ2FOx3Oz></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'时序','约束','影响'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>