<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的 | 极客快訊</title><meta property="og:title" content="一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/46d2353552404b7fa41d627b3bf140dc"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c169b1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c169b1.html><meta property="article:published_time" content="2020-10-29T21:05:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:51+08:00"><meta name=Keywords content><meta name=description content="一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0c169b1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>串口是串行接口（serial port）的简称，也称为串行通信接口或COM接口。</strong></p><p><br></p><p><strong>串口通信是指采用串行通信协议（serial communication）在一条信号线上将数据一个比特一个比特地逐位进行传输的通信模式。</strong></p><p><br></p><p><strong>串口按电气标准及协议来划分，包括RS-232-C、RS-422、RS485等。</strong></p><p><br></p><p><strong>1.串行通信</strong></p><p><br></p><p>在串行通信中，数据在1位宽的单条线路上进行传输，一个字节的数据要分为8次，由低位到高位按顺序一位一位的进行传送。</p><p><br></p><p>串行通信的数据是逐位传输的，发送方发送的每一位都具有固定的时间间隔，这就要求接收方也要按照发送方同样的时间间隔来接收每一位。不仅如此，接收方还必须能够确定一个信息组的开始和结束。</p><p><br></p><p>常用的两种基本串行通信方式包括同步通信和异步通信。</p><p><br></p><p><strong>1.1串行同步通信</strong></p><p><br></p><p>同步通信（SYNC:synchronous data communication）是指在约定的通信速率下，发送端和接收端的时钟信号频率和相位始终保持一致（同步），这样就保证了通信双方在发送和接收数据时具有完全一致的定时关系。</p><p><br></p><p>同步通信把许多字符组成一个信息组（信息帧），每帧的开始用同步字符来指示，一次通信只传送一帧信息。在传输数据的同时还需要传输时钟信号，以便接收方可以用时针信号来确定每个信息位。</p><p><br></p><p>同步通信的优点是传送信息的位数几乎不受限制，一次通信传输的数据有几十到几千个字节，通信效率较高。同步通信的缺点是要求在通信中始终保持精确的同步时钟，即发送时钟和接收时钟要严格的同步（常用的做法是两个设备使用同一个时钟源）。</p><p><br></p><p>在后续的串口通信与编程中将只讨论异步通信方式，所以在这里就不对同步通信做过多的赘述了。</p><p><br></p><p><strong>1.2串行异步通信</strong></p><p><br></p><p>异步通信（ASYNC:asynchronous data communication），又称为起止式异步通信，是以字符为单位进行传输的，字符之间没有固定的时间间隔要求，而每个字符中的各位则以固定的时间传送。</p><p><br></p><p>在异步通信中，收发双方取得同步是通过在字符格式中设置起始位和停止位的方法来实现的。具体来说就是，在一个有效字符正式发送之前，发送器先发送一个起始位，然后发送有效字符位，在字符结束时再发送一个停止位，起始位至停止位构成一帧。停止位至下一个起始位之间是不定长的空闲位，并且规定起始位为低电平（逻辑值为0），停止位和空闲位都是高电平（逻辑值为1），这样就保证了起始位开始处一定会有一个下跳沿，由此就可以标志一个字符传输的起始。而根据起始位和停止位也就很容易的实现了字符的界定和同步。</p><p><br></p><p>显然，采用异步通信时，发送端和接收端可以由各自的时钟来控制数据的发送和接收，这两个时钟源彼此独立，可以互不同步。</p><p><br></p><p>下面简单的说说异步通信的数据发送和接收过程。</p><p><br></p><p><strong>1.2.1异步通信的数据格式</strong></p><p><br></p><p>在介绍异步通信的数据发送和接收过程之前，有必要先弄清楚异步通信的数据格式。</p><p><br></p><p>异步通信规定传输的数据格式由起始位（start bit）、数据位（data bit）、奇偶校验位（parity bit）和停止位（stop bit）组成，如图1所示（该图中未画出奇偶校验位，因为奇偶检验位不是必须有的，如果有奇偶检验位，则奇偶检验位应该在数据位之后，停止位之前）。</p><p><br></p><div class=pgc-img><img alt=一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/46d2353552404b7fa41d627b3bf140dc><p class=pgc-img-caption></p></div><p><br></p><p>（1）起始位：起始位必须是持续一个比特时间的逻辑0电平，标志传输一个字符的开始，接收方可用起始位使自己的接收时钟与发送方的数据同步。</p><p><br></p><p>（2）数据位：数据位紧跟在起始位之后，是通信中的真正有效信息。数据位的位数可以由通信双方共同约定，一般可以是5位、7位或8位，标准的ASCII码是0~127（7位），扩展的ASCII码是0~255（8位）。传输数据时先传送字符的低位，后传送字符的高位。</p><p><br></p><p>（3）奇偶校验位：奇偶校验位仅占一位，用于进行奇校验或偶校验，奇偶检验位不是必须有的。如果是奇校验，需要保证传输的数据总共有奇数个逻辑高位；如果是偶校验，需要保证传输的数据总共有偶数个逻辑高位。</p><p><br></p><p>举例来说，假设传输的数据位为01001100，如果是奇校验，则奇校验位为0（要确保总共有奇数个1），如果是偶校验，则偶校验位为1（要确保总共有偶数个1）。</p><p><br></p><p>由此可见，奇偶校验位仅是对数据进行简单的置逻辑高位或逻辑低位，不会对数据进行实质的判断，这样做的好处是接收设备能够知道一个位的状态，有可能判断是否有噪声干扰了通信以及传输的数据是否同步。</p><p><br></p><p>（4）停止位：停止位可以是是1位、1.5位或2位，可以由软件设定。它一定是逻辑1电平，标志着传输一个字符的结束。</p><p><br></p><p>（5）空闲位：空闲位是指从一个字符的停止位结束到下一个字符的起始位开始，表示线路处于空闲状态，必须由高电平来填充。</p><p><br></p><p><strong>1.2.2异步通信的数据发送过程</strong></p><p><br></p><p>清楚了异步通信的数据格式之后，就可以按照指定的数据格式发送数据了，发送数据的具体步骤如下：</p><p><br></p><p>（1）初始化后或者没有数据需要发送时，发送端输出逻辑1，可以有任意数量的空闲位。</p><p><br></p><p>（2）当需要发送数据时，发送端首先输出逻辑0，作为起始位。</p><p><br></p><p>（3）接着就可以开始输出数据位了，发送端首先输出数据的最低位D0，然后是D1，最后是数据的最高位。</p><p><br></p><p>（4）如果设有奇偶检验位，发送端输出检验位。</p><p><br></p><p>（5）最后，发送端输出停止位（逻辑1）。</p><p><br></p><p>（6）如果没有信息需要发送，发送端输出逻辑1（空闲位），如果有信息需要发送，则转入步骤（2）。</p><p><br></p><p><strong>1.2.3异步通信的数据接收过程</strong></p><p><br></p><p>在异步通信中，接收端以接收时钟和波特率因子决定每一位的时间长度。下面以波特率因子等于16（接收时钟每16个时钟周期使接收移位寄存器移位一次）为例来说明。</p><p><br></p><p>（1）开始通信，信号线为空闲（逻辑1），当检测到由1到0的跳变时，开始对接收时钟计数。</p><p><br></p><p>（2）当计到8个时钟的时候，对输入信号进行检测，若仍然为低电平，则确认这是起始位，而不是干扰信号。</p><p><br></p><p>（3）接收端检测到起始位后，隔16个接收时钟对输入信号检测一次，把对应的值作为D0位数据。</p><p><br></p><p>（4）再隔16个接收时钟，对输入信号检测一次，把对应的值作为D1位数据，直到全部数据位都输入。</p><p><br></p><p>（5）检验奇偶检验位。</p><p><br></p><p>（6）接收到规定的数据位个数和校验位之后，通信接口电路希望收到停止位（逻辑1），若此时未收到逻辑1，说明出现了错误，在状态寄存器中置“帧错误”标志；若没有错误，对全部数据位进行奇偶校验，无校验错时，把数据位从移位寄存器中取出送至数据输入寄存器，若校验错，在状态寄存器中置“奇偶错”标志。</p><p><br></p><p>（7）本帧信息全部接收完，把线路上出现的高电平作为空闲位。</p><p><br></p><p>（8）当信号再次变为低时，开始进入下一帧的检测。</p><p><br></p><p>以上就是异步通信中数据发送和接收的全过程了。</p><p><br></p><p><strong>1.3几个概念</strong></p><p><br></p><p>为了更好的理解串口通信，我们还需要了解几个串口通信当中的基本概念。</p><p><br></p><p>（1）发送时钟：发送数据时，首先将要发送的数据送入移位寄存器，然后在发送时钟的控制下，将该并行数据逐位移位输出。</p><p><br></p><p>（2）接收时钟：在接收串行数据时，接收时钟的上升沿对接收数据采样，进行数据位检测，并将其移入接收器的移位寄存器中，最后组成并行数据输出。</p><p><br></p><p>（3）波特率因子：波特率因子是指发送或接收1个数据位所需要的时钟脉冲个数。</p><p><br></p><p><strong>2.串口接头</strong></p><p><br></p><p>常用的串口接头有两种，一种是9针串口（简称DB-9），一种是25针串口（简称DB-25）。每种接头都有公头和母头之分，其中带针状的接头是公头，而带孔状的接头是母头。</p><p><br></p><div class=pgc-img><img alt=一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0aa5b1e0064245ef90e52d5d341e29c3><p class=pgc-img-caption></p></div><p><br></p><p><strong>3.RS-232C标准</strong></p><p><br></p><p>常用的串行通信接口标准有RS-232C、RS-422、RS-423和RS-485。其中，RS-232C作为串行通信接口的电气标准定义了数据终端设备（DTE:data terminal equipment）和数据通信设备（DCE:data communication equipment）间按位串行传输的接口信息，合理安排了接口的电气信号和机械要求，在世界范围内得到了广泛的应用。</p><p><br></p><p><strong>3.1电气特性</strong></p><p><br></p><p>RS-232C对电器特性、逻辑电平和各种信号功能都做了规定，如下：</p><p><br></p><p>在TXD和RXD数据线上：</p><p><br></p><p>（1）逻辑1为-3~-15V的电压</p><p><br></p><p>（2）逻辑0为3~15V的电压</p><p><br></p><p>在RTS、CTS、DSR、DTR和DCD等控制线上：</p><p><br></p><p>（1）信号有效（ON状态）为3~15V的电压</p><p><br></p><p>（2）信号无效（OFF状态）为-3~-15V的电压</p><p><br></p><p>由此可见，RS-232C是用正负电压来表示逻辑状态，与晶体管-晶体管逻辑集成电路（TTL）以高低电平表示逻辑状态的规定正好相反。</p><p><br></p><p><strong>3.2信号线分配</strong></p><p><br></p><p>RS-232C标准接口有25条线，其中，4条数据线、11条控制线、3条定时线以及7条备用和未定义线。那么，这些信号线在9针串口和25针串口的管脚上是如何分配的呢？</p><p><br></p><div class=pgc-img><img alt=一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/52035d48f10e4c0b8718bbeca4777a51><p class=pgc-img-caption></p></div><p><br></p><p>下面对这些信号线做个简单的介绍。</p><p><br></p><p>（1）数据装置准备好（DSR），有效状态（ON）表示数据通信设备处于可以使用状态。</p><p><br></p><p>（2）数据终端准备好（DTR），有效状态（ON）表示数据终端设备处于可以使用状态。</p><p><br></p><p>这两个设备状态信号有效，只表示设备本身可用，并不说明通信链路可以开始进行通信了，能否开始进行通信要由下面的一些控制信号决定。</p><p><br></p><p>（3）请求发送（RTS），用来表示数据终端设备（DTE）请求数据通信设备（DCE）发送数据。</p><p><br></p><p>（4）允许发送（CTS），用来表示数据通信设备（DCE）已经准备好了数据，可以向数据终端设备（DTE）发送数据，是对请求发送信号RTS的响应。请求发送（RTS）和允许发送（CTS）用于半双工的通信系统中，在全双工的系统中，不需要使用请求发送（RTS）和允许发送（CTS）信号，直接将其置为ON即可。</p><p><br></p><p>（5）数据载波检出（DCD），用于表示数据通信设备（DCE）已接通通信链路，告知数据终端设备（DTE）准备接收数据。</p><p><br></p><p>（6）振铃指示（RI），当数据通信设备收到交换台送来的振铃呼叫信号时，使该信号有效（ON），通知终端，已被呼叫。</p><p><br></p><p>（7）发送数据（TXD），数据终端设备（DTE）通过该信号线将串行数据发送到数据通信设备（DCE）。</p><p><br></p><p>（8）接收信号（RXD），数据终端设备（DTE）通过该信号线接收从数据通信设备（DCE）发来的串行数据。</p><p><br></p><p>（9）地线（SG、PG），分别表示信号地和保护地信号线。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'串口','给你讲','通讯'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/1c52dc8.html alt=一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e7d5c418edb74c5696521880c89e29bc style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/1c52dc8.html title=一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的！>一文给你讲清楚串口通讯的起始、数据、停止位都是怎么分配的！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>