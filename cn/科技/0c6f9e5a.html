<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>让PWM DAC以一个周期的脉冲序列稳定 | 极客快訊</title><meta property="og:title" content="让PWM DAC以一个周期的脉冲序列稳定 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/f9c3337f4ff14bb1b65befa7d929a8ec"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c6f9e5a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c6f9e5a.html><meta property="article:published_time" content="2020-11-14T21:05:35+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:35+08:00"><meta name=Keywords content><meta name=description content="让PWM DAC以一个周期的脉冲序列稳定"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0c6f9e5a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>让PWM DAC以一个周期的脉冲序列稳定</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>对于要求高精度和高分辨率的数控可变直流电压源来说，脉宽调制（PWM）是可使用的最佳转换方法。PWM方法于50年前发明1,2，如今已广泛用于开关电源3，尤其是对于直流校准器4,5，这种方法可以实现26位分辨率和0.2ppm的线性度6。</p><p>PWM数模转换器（DAC）是系统的核心，它定义了脉冲序列中的直流分量，并具有固定的周期和可变的占空比。从理论上讲，这类信号的直流分量为：</p><p>通用PWM方程：VDC = (VP∙tP)/T (1)</p><p>其中：VP是脉冲幅度，tP是脉冲持续时间，T是信号周期。</p><p>为了加快转换过程，现代DAC使用了由积分器和S/H（采样保持）电路组成的同步低通滤波器。在每个周期结束时，积分器的电压都会存储在S/H电路中，这就是整个转换器的输出电压。</p><p>一些转换器在S/H电路的输出和积分器之间使用了反馈电阻。为了获得快速准确的转换，必须使两个时间常数与脉冲序列的周期相等。参考文献2明确说明了RF*C = T的需求。第二个需求RI*C = T没有进行讨论，但可以通过将上述通用PWM方程代入该文公式4而轻松求得。</p><p>调整两个时间常数归结为调整积分电容器C或脉冲序列的周期T。两种方法都面临一定的困难。最重要的细节是，没有方案表明应如何自动地进行调整。</p><p>这篇设计实例提出了一个电路和一个简单步骤，填补了空白——使用这种方法仅需进行一次调整。它不是对时间常数，而是对积分器的充电电流进行调整，从而可提供更好的分辨率和线性性能。</p><p>图1说明了这一概念。在输入脉冲期间，开关S断开，积分电容通过两个电流充电。第一个电流I1 = VP/R1来自脉冲序列，它是标称电流的95%。第二个电流来自辅助DAC，它提供0至10%的标称电流，从而为积分器电压的斜率提供±5%的调节范围。在脉冲结束时，积分器的电压存储在S/H单元中，积分器通过将开关S闭合来放电。</p><div class=pgc-img><img alt="让PWM DAC以一个周期的脉冲序列稳定" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f9c3337f4ff14bb1b65befa7d929a8ec><p class=pgc-img-caption>图1：辅助DAC为积分器的充电电流提供±5%的调节范围；比较器可帮助微处理器为DAC选择合适的数字。</p></div><p><br></p><p>将适当的数字写入DAC，可设置第二个电流的值。可使用逐次逼近技术分别定义数字的每一位。调整标准来自公式1：当占空比为50%时，输出电压必须为输入脉冲幅度的一半。电阻器R3和R4以及比较器Cmp可告诉微处理器输出电压与所需值的接近程度。</p><p>图2给出了硬件。它的工作由一个时序电路控制，该时序电路包含G1到G4四个门，可以为Q1、复位积分器开关和S/H单元内部的存储开关生成脉冲。</p><div class=pgc-img><img alt="让PWM DAC以一个周期的脉冲序列稳定" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f93e28d9a5ab49e494f052f0fc61a147><p class=pgc-img-caption>图2：完整的硬件使用时序电路（G1-G4）控制积分器和S/H工作，使用放大器（IC4a）提高比较器灵敏度，并使用</p></div><p><br></p><p>如图3的时序图所示，VG4在PWM信号的上升沿变为高电平。复位开关Q1打开，使积分器产生负斜坡。在PWM脉冲的下降沿，G1和G2产生一个10µs的触发脉冲，使S/H电路捕获积分器电压。G3将VPWM和VG2脉冲相加，在完成积分和存储之前，保持复位开关断开。在存储脉冲结束时，开关接通。积分器复位为零，等待下一个PWM脉冲。</p><div class=pgc-img><img alt="让PWM DAC以一个周期的脉冲序列稳定" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1e6d61625be643c3929a01a575fafe3b><p class=pgc-img-caption>图3：前两个转换周期中电路关键点的时序图。</p></div><p><br></p><p>理想情况下，当脉冲幅度为5V且占空比为50%时，输出电压应为-2.5V。校准首先是在微控制器（MCU）内配置PWM系统，产生具有1kHz频率和50%占空比的脉冲序列。然后，MCU将二进制数“100000000000”发送到DAC，并等待RstInt脉冲的下降沿。当下降沿到来时，微控制器读取比较器输出。R3-R4网络和IC4将VOUT与-2.5V的理想值进行比较。如果VOUT比-2.5V正，则比较器输出为0，也就是说DAC数字的第一位必须变为0；否则，该位保持预设值1。然后，微控制器向DAC发送数字“x10000000000”，并根据比较器的反应调整第二位的值。第三个数字是“xx1000000000”，在定义完DAC数字的所有12位之前，该过程继续进行。</p><p>图4演示了实际的校准过程。黄色迹线标出了该过程的开始——它发生在RstInt脉冲的下降沿。蓝色迹线是IC4a的输出信号；它在零电压的两侧反弹并逐渐到达零电压。零值表示S/H电路的输出电压是宽度已调脉冲幅度的一半。4.5位数字万用表测量的实际比率为0.49947。使用专业制造的pcb和高分辨率万用表可能会实现更好的匹配。</p><div class=pgc-img><img alt="让PWM DAC以一个周期的脉冲序列稳定" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/47af3495b31a4856aa43a627cd840eb4><p class=pgc-img-caption>图4：逐次逼近法可使输出逐渐逼近VP/2的期望值。</p></div><p><br></p><p>校准完成后，MCU可以根据客户设置调整PWM信号的占空比。正确设置积分器斜坡的斜率后，只需要经过一个周期的脉冲序列，输出端就会出现新的电压。根据理论定义，输出电压将精确等于PWM信号中的直流分量，并且不会产生纹波。重要的是，转换器可以随时完全自动地实现校准。</p><p>专家提示：为了获得最佳的调节精度，请使用专用的参考电压而不是+5V电源。应确保R3/R4之比尽可能接近2:1，并且IC2和IC4的失调电压尽可能低。R1和R2是1%的金属膜电阻器。C1是具有低介电吸收率的2%的电容器。开关晶体管Q1应具有较小的RON电阻。本设计也可以使用更高分辨率的DAC。</p><p>–Jordan Dimitrov是一位电气工程师和博士，并拥有30年的经验。他在一所多伦多社区大学教授电气与电子课程。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'PWM','DAC','以一个'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>