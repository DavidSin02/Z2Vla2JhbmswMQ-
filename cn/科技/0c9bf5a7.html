<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>带你走进JavaScript世界系列——面向对象的程序设计 | 极客快訊</title><meta property="og:title" content="带你走进JavaScript世界系列——面向对象的程序设计 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/2c88caf287484aa4805d1991b1a92e45"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0c9bf5a7.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0c9bf5a7.html><meta property="article:published_time" content="2020-10-29T21:10:37+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:37+08:00"><meta name=Keywords content><meta name=description content="带你走进JavaScript世界系列——面向对象的程序设计"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0c9bf5a7.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>带你走进JavaScript世界系列——面向对象的程序设计</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>面向对象的语言有一个标志，就是他们都有类的概念，而通过类可以创建任意多个具有相同属性和方法的对象。ECMA 把对象定义为：“无序属性的集合，其属性可以包含基本值、对象或者函数”。这就是说对象是一组没有特定顺序的值。</p><h1>理解对象</h1><p>前面已经介绍过，创建自定义的对象最简单的方式就是创建一个 Object 的实例，然后给它添加属性和方法：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/2c88caf287484aa4805d1991b1a92e45><p class=pgc-img-caption>创建一个简单对象</p></div><p>上面的例子创建了一个名为 person 的对象，并给它添加了三个属性和一个方法。这种创建对象的方法逐渐被以下（对象字面量）这种方式所取代：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b7e5d330533e49ca921069dfd7345a7d><p class=pgc-img-caption>使用对象字面量方式创建对象</p></div><h1>属性类型</h1><p>ECMA第5版在定义只有内部才用的特性时，描述了属性的各种特征。定义这些特性是为了实现JavaScript引擎用的，因此在JavaScript中不能直接访问它们。为了表示特性是内部值，该规范把它们放在了两对方括号(例如：[[xxx]])中。ECMAScript 中有两种属性：数据属性和访问器属性。</p><p><strong>数据属性</strong></p><p><strong></strong>数据属性包含了一个数值的位置。在这个位置可以读取和写入值。数据属性有4个描述其行为的特性。</p><ol><li>[[Configurable]]：表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把这个属性修改为访问器属性。像上面的例子中直接在对象上定义的属性，它们的这个特性值默认为 true。</li><li>[[Enumerable]]：表示能否通过 for-in 循环返回属性。像上面的例子中直接在对象上定义的属性，它们的这个特性默认值为 true。</li><li>[[Writable]]：表示能否修改属性的值。像上面的例子中直接在对象上定义的属性，它们的这个特性默认值为 true。</li><li>[[Value]]：包含这个属性的数据值。读取属性值的时候，从这个位置读；写入属性值的时候，把新值保存在这个位置。这个特性的默认值为 undefined。</li></ol><p>像上面例子中那样直接在对象上定义属性，它们的[[Configurable]]、[[Enumerable]]、[[Writable]]的特性都被设置成 true，而[[Value]]特性被设置为指定的值。例如：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/96c7facdd81c4044b390fadba4466960><p class=pgc-img-caption>[[Value]]特性介绍</p></div><p>这里创建了一个名为 name 的属性，为它指定的值是"Tom"。也就是说，[[Value]]特性将被设置成"Tom"，而对于这个值的任何修改都将反映在这个位置。</p><p>想要修改属性默认的特性，必须使用 ECMAScript 5的 Object.defineProperty()方法。这个方法接收三个参数：属性所在的对象、属性的名字和一个描述符对象。其中，描述符对象的属性必须是：configurable、enumerable、writable 和 value 。设置其中的一个或多个值，可以修改对应的特性值。例如：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e94f5a3f482f4ddfaabc494312a568be><p class=pgc-img-caption>修改属性默认的特性示例一</p></div><p>上面的例子创建了一个名为 name 的属性，它的值为"Tom"是只读的。这个属性的值是不能被修改的，如果尝试为它指定新值，在非严格模式下，赋值操作被忽略；在严格模式下，赋值操作将会导致抛出错误。</p><p>类似的规则也适用于不可配置的属性，例如：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/86e2ee229b314193b73bdd448a686125><p class=pgc-img-caption>修改属性默认的特性示例二</p></div><p>把 configurable 设置为 false，表示不能从对象中删除属性。如果对这个属于调用 delete ，在非严格模式下什么也不会发生，在严格模式下，会导致错误。而且，一旦把属性定义为不可配置的，就不能再把它变回可配置了。此时，再调用 Object.defineProperty() 方法修改 writable 之外的特性，都会导致错误。</p><p>也就是说，可以多次调用 Object.defineProperty() 方法修改同一个属性，但是在把 configurable 特性值设置为 false 之后就有了限制了。在调用 Object.defineProperty() 方法创建一个新的属性是，如果不指定 configurable、enumerable 和 writable 特性的默认值都是 false 。如果调用 Object.defineProperty() 只是修改已定义的属性的特性，则无此限制。</p><p><strong>访问器属性</strong></p><p>访问器属性不包含数据值；它们包含一对 getter 和setter 函数（这两个属性都不是必需的）。在读取访问器属性时，会调用 getter 函数，这个函数负责返回有效的值；在写入访问器属性时，会调用 setter 函数并传入新值，这个函数负责决定如何处理数据。访问器属性有如下4个特性。</p><ol><li>[[Configurable]]：表示能否通过 delete 删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为数据属性。对于直接在对象上定义的属性，这个特性的默认值为 true。</li><li>[[Enumerable]]：表示能否通过 for-in 循环返回属性。对于直接在对象上定义的属性，这个特性的默认值为 true。</li><li>[[Get]]：在读取属性时调用的函数。默认值为 undefined。</li><li>[[Set]]：在写入属性时调用的函数。默认值为 undefined。</li></ol><p>访问器属性不能直接定义，必须使用 Object.defineProperty() 来定义：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2a6a5615996f4e32b67362d0d6f92916><p class=pgc-img-caption>访问器属性示例</p></div><p>以上的例子创建了一个 book 对象，并给它定义了两个默认属性：_year 和 edition。访问器属性year则包含一个getter函数和一个setter函数。getter函数返回_year的值，setter函数用来计算正确的edition。不一定非要同时指定 getter 和 setter 。只指定 getter 意味着属性是不能写。尝试写入属性会被忽略（在严格模式下，会抛出错误）。同样地，只指定 setter 函数的属性也不能读，在非严格模式下会返回undefined，在严格模式下会报错。</p><p><strong>定义多个属性</strong></p><p>由于为对象定义多个属性的可能性很大，ECMAScript 5 又定义了一个 Object.defineProperties() 方法。利用这个方法可以通过描述符一次定义多个属性。这个方法接收两个对象参数：第一个对象是要添加和修改其属性的对象，第二个对象是属性与第一个对象中要添加或修改的属性一一对应。例：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ab30054b7de049009f650d2b685950bf><p class=pgc-img-caption>Object.defineProperties 方法示例</p></div><p>以上代码在 book 对象中定义两个数据属性（_year 和 edition ）和一个访问器属性（year）。支持该方法的浏览器有 IE9+、Firefox4+、Safari5+、Opera12+ 和 Chrome。</p><p><strong>读取属性的特性</strong></p><p>使用 ECMAScript 5 的 Object.getOwnPropertyDescriptor() 方法，可以取得给定属性的描述符。这个方法接收两个参数：属性所在的对象和要读取其描述符的属性名称。返回值是一个对象，如果是访问器属性，这个对象的属性有 configurable、enumerable、get 和 set；如果是数据属性，这个对象的属性有configurable、enumerable、writable 和 value。例：</p><div class=pgc-img><img alt=带你走进JavaScript世界系列——面向对象的程序设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5c03979387b749bab98c0462afb849b2><p class=pgc-img-caption>Object.getOwnPropertyDescriptor() 方法</p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'JavaScript','对象','设计'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>