<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「硬见小百科」单片机中断系统 | 极客快訊</title><meta property="og:title" content="「硬见小百科」单片机中断系统 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8ec9b20334bf4852a4fa5c94cc98b877"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><meta property="article:published_time" content="2020-10-29T20:50:02+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:02+08:00"><meta name=Keywords content><meta name=description content="「硬见小百科」单片机中断系统"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0d17c4f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「硬见小百科」单片机中断系统</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=「硬见小百科」单片机中断系统 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8ec9b20334bf4852a4fa5c94cc98b877><p class=pgc-img-caption></p></div><p><strong>单片机中断系统的概念</strong></p><p>什么是中断，我们从一个生活中的例程引入。</p><p>你正在家中看书，突然电话铃响了，你放下书本，去接电话，和来电话的人交谈，然后放下电话，回来继续看你的书。这就是生活中的“中断”的现象，就是正常的工作过程被外部的事件打断了。仔细研究一下生活中的中断，对于我们学习单片机的中断也很有好处。</p><p>第一、什么可经引起中断。生活中很多事件能引起中断：有人按了门铃了，电话铃响了，你的闹钟闹响了，你烧的水开了….等等诸如此类的事件，我们把能引起中断的称之为中断源。<strong>单片机中也有一些能引起中断的事件，8031中一共有5个：两个外部中断，两个计数/定时器中断，一个串行口中断。</strong></p><p>第二、中断的嵌套与优先级处理。设想一下，我们正在看书，电话铃响了，同时又有人按了门铃，你该先做那样呢？如果你正是在等一个很重要的电话，你一般不会去理会门铃的，而反之，你正在等一个重要的客人，则可能就不会去理会电话了。如果不是这两者（即不等电话，也不是等人上门），你可能会按你常常的习惯去处理。总之这里存在一个优先级的问题，单片机中也是如此，也有优先级的问题。优先级的问题不仅仅发生在两个中断同时产生的情况，也发生在一个中断已产生，又有一个中断产生的情况，比如你正接电话，有人按门铃的情况，或你正开门与人交谈，又有电话响了情况。考虑一下我们会怎么办吧。</p><p>第三、中断的响应过程。当有事件产生，进入中断之前我们必须先记住现在看书的第几页了，或拿一个书签放在当前页的位置，然后去处理不一样的事情（因为处理完了，我们还要回来继续看书）：电话铃响我们要到放电话的地方去，门铃响我们要到门那边去，也说是不一样的中断，我们要在不一样的地点处理，而这个地点常常还是固定的。计算机中也是采用的这种办法，五个中断源，每个中断产生后都到一个固定的地方去找处理这个中断的程序，当然在去之前首先要保存下面将执行的指令的地址，以便处理完中断后回到原来的地方继续往下执行程序。具体地说，中断响应能分为以下几个步骤：1、保护断点，即保存下一将要执行的指令的地址，就是把这个地址送入堆栈。2、寻找中断入口，根据5个不一样的中断源所产生的中断，查找5个不一样的入口地址。以上工作是由计算机自动完成的，与编程者无关。在这5个入口地址处存放有中断处理程序（这是程序编写时放在那儿的，如果没把中断程序放在那儿，就错了，中断程序就不能被执行到）。3、执行中断处理程序。4、中断返回：执行完中断指令后，就从中断处返回到主程序，继续执行。</p><p><strong>MCS-51单片机中断系统的结构</strong></p><p>5个中断源的符号、名称及产生的条件如下。</p><p><strong>INT0</strong>：外部中断0，由P3．2端口线引入，低电平或下跳沿引起。</p><p><strong>INT1</strong>：外部中断1，由P3．3端口线引入，低电平或下跳沿引起。</p><p><strong>T0</strong>：定时器／计数器0中断，由T0计满回零引起。</p><p><strong>T1</strong>：定时器／计数器l中断，由T1计满回零引起。</p><p><strong>TI／RI</strong>：串行I／O中断，串行端口完成一帧字符发送／接收后引起。</p><p>整个中断系统的结构框图见下图所示。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬见小百科」单片机中断系统 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/25ad517ec6e94e90ad7b1503fa594475><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center>&lt;51单片机中断系统结构></p><p>如图所示，由与中断有关的特殊功能寄存器、中断入口、次序查询逻辑电路等组成，包括5个中断请求源，4个用于中断控制的寄存器IE、IP、ECON和SCON来控制中断类弄、中断的开、关和各种中断源的优先级确定。</p><p><strong>中断请求源</strong></p><p>（1）<strong>外部中断请求源</strong>：</p><p>即外中断0和1，经由外部管脚引入的，在单片机上有两个管脚，名称为INT0、INT1，也就是P3.2、P3.3这两个管脚。在内部的TCON中有四位是与外中断有关的。</p><p>IT0：INT0触发方式控制位，可由软件进和置位和复位，IT0=0，INT0为低电平触发方式，IT0=1，INT0为负跳变触发方式。这两种方式的差异将在以后再谈。</p><p>IE0：INT0中断请求标志位。当有外部的中断请求时，这位就会置1（这由硬件来完成），在CPU响应中断后，由硬件将IE0清0。</p><p>IT1、IE1的用途和IT0、IE0相同。</p><p>（2）<strong>内部中断请求源TF0</strong>：</p><p>定时器T0的溢出中断标记，当T0计数产生溢出时，由硬件置位TF0。当CPU响应中断后，再由硬件将TF0清0。</p><p>TF1：与TF0类似。</p><p>TI、RI：串行口发送、接收中断，在串行口中再讲解。</p><p>中断允许寄存器IE在MCS－51中断系统中，中断的允许或禁止是由片内可进行位寻址的8位中断允许寄存器IE来控制的。</p><p><strong>中断系统的控制寄存器</strong></p><p>中断系统有两个控制寄存器IE和IP，它们分别用来设定各个中断源的打开／关闭和中断优先级。此外，在TCON中另有4位用于选择引起外部中断的条件并作为标志位。</p><p><strong>1．中断允许寄存器--IE</strong></p><p>IE在特殊功能寄存器中，字节地址为A8H，位地址(由低位到高位)分别是A8H-AFH。</p><p>IE用来打开或关断各中断源的中断请求，基本格式如下图1所示：</p><div class=pgc-img><img alt=「硬见小百科」单片机中断系统 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ead045c9d0734a99ac38f279ed3c6d42><p class=pgc-img-caption></p></div><p class=ql-align-center>图1</p><p>EA：全局中断允许位。EA＝0，关闭全部中断；EA＝1，打开全局中断控制，在此条件下，由各个中断控制位确定相应中断的打开或关闭。</p><p>×：无效位。</p><p>ES：串行I／O中断允许位。ES＝1，打开串行I／O中断；ES＝0，关闭串行I／O中断。</p><p>ETl：定时器／计数器1中断允许位。ETl＝1，打开T1中断；ETl＝O，关闭T1中断。</p><p>EXl：外部中断l中断允许位。EXl＝1，打开INT1；EXl＝0，关闭INT1。</p><p>ET0：定时器／计数器0中断允许位。ET0＝1，打开T0中断；ET0＝0，关闭TO中断。</p><p>EXO：外部中断0中断允许位。Ex0＝1，打开INT0;EX0=0,关闭INT0.</p><p><strong>2、中断优先寄存器--IP</strong></p><p>IP在特殊功能寄存器中，字节地址为B8H，位地址(由低位到高位)分别是B8H一BFH,IP用来设定各个中断源属于两级中断中的哪一级，IP的基本格式如下图2所示：</p><div class=pgc-img><img alt=「硬见小百科」单片机中断系统 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d3acc58786e04bbf958570be0ca6fa84><p class=pgc-img-caption></p></div><p class=ql-align-center>图2</p><p>×：无效位。</p><p>PS：串行I／O中断优先级控制位。PS＝1，高优先级；PS＝0，低优先级。</p><p>PTl：定时器／计数器1中断优先级控制位。PTl＝1，高优先级；PTl＝0，低优先级。</p><p>Pxl：外部中断1中断优先级控制位。Pxl＝1，高优先级；PXl＝O，低优先级。</p><p>PT0：定时器／计数器o中断优先级控制位。PT0＝1，高优先级；PTO＝0，低优先级。</p><p>Px0：外部中断0中断优先级控制位。Px0＝1，高优先级；Px0＝0，伤优先级。</p><p>在MCS-51单片机系列中，高级中断能够打断低级中断以形成中断嵌套；同级中断之间，或低级对高级中断则不能形成中断嵌套。若几个同级中断同时向CPU请求中断响应，则CPU按如下顺序确定响应的先后顺序：</p><p><strong>INT0一T0---INT1一T1一RI／T1.</strong></p><hr><p><strong>以上所有信息仅作为学习交流使用，不作为任何学习和商业标准。若您对文中任何信息有异议，欢迎随时提出，谢谢！</strong></p><p class=ql-align-justify><strong>关于云创硬见</strong></p><p class=ql-align-justify>云创硬见是国内最具特色的电子工程师社区，融合了行业资讯、社群互动、培训学习、活动交流、设计与制造分包等服务，以开放式硬件创新技术交流和培训服务为核心，连接了超过30万工程师和产业链上下游企业，聚焦电子行业的科技创新，聚合最值得关注的产业链资源， 致力于为百万工程师和创新创业型企业打造一站式公共设计与制造服务平台。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'硬见','单片','机中断'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>