<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>100%原生的JavaScript多线程和并行执行库——Hamsters.js | 极客快訊</title><meta property="og:title" content="100%原生的JavaScript多线程和并行执行库——Hamsters.js - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3d772ca3ebe2438ba3ebcd741832e61c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f1ef02.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f1ef02.html><meta property="article:published_time" content="2020-10-29T21:04:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:30+08:00"><meta name=Keywords content><meta name=description content="100%原生的JavaScript多线程和并行执行库——Hamsters.js"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/0f1ef02.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>100%原生的JavaScript多线程和并行执行库——Hamsters.js</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>介绍</h1><p>Hamsters是一个能让JavaScript代码并行执行的原生库，它可以让你面向高性能的JavaScript编程，它是一个开源项目，Github上标星4k+。它的目的就是让你更加容易的利用多线程的强大功能来并行编程实现性能的提升！</p><hr><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3d772ca3ebe2438ba3ebcd741832e61c><p class=pgc-img-caption></p></div><hr><h1>Github</h1><blockquote><p>https://github.com/austinksmith/Hamsters.js</p></blockquote><h1>特性</h1><ul><li>多功能，通过跨多个线程来最大限度地提高性能。</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dd17bd4580f64577a22ec47c7383d9fe><p class=pgc-img-caption></p></div><ul><li>自动数据聚合，自动将问题分解成较小的部分，并与单个输出并行执行。</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9f6482fb3349426fab654b8b5c6b22da><p class=pgc-img-caption></p></div><ul><li>自动分类，按字母顺序或数字自动排序输出。</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf6bb04fd1474ae3b5767ae6fd989d7f><p class=pgc-img-caption></p></div><ul><li>LEGACY 支持。</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b78535d8f6b546f19a144ecd92e8a9f0><p class=pgc-img-caption></p></div><ul><li>备忘，计算一次后不再浪费 cpu 周期做同样的工作</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e46daf9c9d19469cad54570b9449bb5e><p class=pgc-img-caption></p></div><ul><li>开放源代码，100％开源代码库，根据Artistic License 2.0发布</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/04567ae9a6e54a2fab91360a42bee19b><p class=pgc-img-caption></p></div><h1>支持的环境</h1><ul><li>所有主流浏览器、IE9 +</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a65d3e16210849ca8f641140d73a4d80><p class=pgc-img-caption></p></div><ul><li>现有 Web workers</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3cc331a6412a48a68767d7693a3aec6b><p class=pgc-img-caption></p></div><ul><li>Javascript shell 环境</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/061bb6dd77ef4520b0be2c19f2319a9a><p class=pgc-img-caption></p></div><ul><li>React Native</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e05d03f5080547728d3f51c9bb3a2e16><p class=pgc-img-caption></p></div><ul><li>Node.js</li></ul><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/75bce1d14e8b4545a408e892281ec497><p class=pgc-img-caption></p></div><hr><h1>如何使用？</h1><p>安装使用</p><hr><pre> bower install WebHamsters//ORnpm install hamsters.js</pre><hr><ul><li><strong>1、普通HTMl项目中使用</strong></li></ul><pre>&lt;!-- HTML4 and (x)HTML --&gt; &lt;script type="text/javascript" src="path/to/hamsters.js"&gt; &lt;!-- HTML5 --&gt; &lt;script src="path/to/hamsters.js"&gt;&lt;/script&gt;</pre><hr><ul><li><strong>2、React Native</strong></li></ul><pre> import hamsters from 'path/to/hamsters';</pre><hr><pre> import Worker from '...'; import hamsters from 'hamsters.js'; hamsters.init({ Worker: Worker });</pre><hr><ul><li><strong>3、Nodejs</strong></li></ul><pre>var hamsters = require('hamsters.js');</pre><hr><pre> var Worker = require('...').Worker; var hamsters = require('hamsters.js'); hamsters.init({ Worker: Worker });</pre><hr><ul><li><strong>4、入门使用</strong></li></ul><p>第一个要理解的是Hamsters.js是一个传递interfafce的消息，因此在使用库调用函数时，我们需要通过将params对象（消息）传递给库来指示库如何操作。</p><hr><pre> var params = { bar: 'foo' }; hamsters.run(params, ....);</pre><hr><p>我们将使用的下一个参数将是我们想要在一个线程或线程中执行的逻辑，我们之前传递的params对象将在我们的函数的上下文中可访问。现在应该能够看到如何确保可以在线程中访问变量和函数等不同的东西。</p><pre> hamsters.run(params, function() { var foo = params.bar; }); </pre><hr><p>第三个也是最后一个参数将是我们的onSuccess回调方法，此函数所需的唯一参数是输出。</p><pre> hamsters.run(params, function() { var foo = params.bar; }, function(results) { console.log(results); });</pre><hr><p>回到原始的params对象，为了从库中获得最佳性能和可靠性，需遵循一些约定。Hamsters.js的构建目标是并行而不是并发，尽管库很好地实现了并行执行的主要目标。由于这样做的各种设计决策是为了帮助实现这一目标，其中一个决定是库如何在线程之间分割数据以便执行，因此您希望在多个线程中访问的任何数组必须在您的参数内具有数组索引宾语。</p><pre>var params = { array: [1, 2, 3, 4]; }; hamsters.run(params, function() { for(var i = 0; i &lt; params.array; i++) { rtn.data.push(params.array[i] * 4); } }, function(results) { });</pre><hr><p>使用此约定，通过简单地更改params对象中的一个选项，可以非常简单地并行化上述方法。现在使用下面的方法，4个线程将完成相同的任务，每个线程仅在数组的一个数字上运行。</p><pre> var params = { array: [1, 2, 3, 4]; threads: 4 }; hamsters.run(params, function() { for(var i = 0; i &lt; params.array; i++) { rtn.data.push(params.array[i] * 4); } }, function(results) { });</pre><hr><p>更进一步，库使用一个名为rtn的内部返回对象，这个rtn对象对于库具有一致的方式来处理线程输出是至关重要的。因此，当我们想要从线程返回一个值时，我们需要将结果推送到rtn.data数组中。或者你可以让你的rtn.data输出，但只有<em>当</em>你的输出已经是一个数组。</p><pre> hamsters.run(params, function() { rtn.data.push(params.bar); }, function(results) { console.log(results); // 'foo'; });</pre><hr><p>通过以上代码来看下它传递的参数</p><pre>var params = { threads: Integer, aggregate: Boolean, dataType: String, memoize: Boolean sort: String, };</pre><hr><p>1、threads这个可选参数将告诉库执行先前声明的函数的线程数，这允许在非常简单的级别上更改您执行的线程数。如果您在此处未提供值，则库默认值为1。</p><p><em>2、aggregate</em>此可选参数将告诉库我们是否要在执行后将各个线程输出聚合在一起，这仅在您跨多个线程执行并且默认为相关时才相关false。</p><p><em>3、dataType</em>此可选参数将通知库我们的数据数组是JavaScript的类型化数组之一，在使用此参数时，库将自动格式化输出以匹配指定的输出dataType。</p><p><em>4、memoize</em>此可选参数旨在与memoization模式结合使用，当启用memoization模式时，此参数允许用户控制单个函数级别是否缓存该函数的结果，其默认值为false。</p><p><em>5、sort</em>此可选参数将告诉库按字母顺序或数字顺序自动对最终输出进行排序，此参数的默认值为，null并且可以使用排序选项进行配置。</p><blockquote><p>params对象中包含的任何其他内容都可以在线程的执行上下文或多个线程中访问，具体取决于您使用库的方式。</p></blockquote><hr><blockquote><p>除了以上基本使用方式，你可以查看官方的相关文档，有详细的介绍和使用方式，如Promise、排序、memoization、可转移对象、persistence、线程池、限制、设备等</p></blockquote><hr><h1>总结</h1><p>多线程和并行编程在Javascript中本身不是一件容易的事情，但是可借助第三方原生库来弥补它，能让你更加方便的进行多线程的编程，笔者可能并未介绍的非常清楚，如果你有这方面的需求，可以去查案Hamsters.js的相关文档来体验这种编程，希望对你有所帮助!</p><hr><div class=pgc-img><img alt=100%原生的JavaScript多线程和并行执行库——Hamsters.js onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ea02bebbb6a2464fb6c542ada49bfd18><p class=pgc-img-caption></p></div><hr></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'100%','JavaScript','多线程'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>