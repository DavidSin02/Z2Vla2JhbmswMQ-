<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>汇编语言相关知识点总结 | 极客快訊</title><meta property="og:title" content="汇编语言相关知识点总结 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10b4af6d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10b4af6d.html><meta property="article:published_time" content="2020-11-14T21:04:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:32+08:00"><meta name=Keywords content><meta name=description content="汇编语言相关知识点总结"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/10b4af6d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>汇编语言相关知识点总结</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>微机的硬件</h1><p>对于汇编程序员来说，主要关心的是cpu中的寄存器。主存储器和I/O接口是以通过地址的形式供程序员使用</p><h1>寄存器</h1><p>数据寄存器AX/BX/CX/DX(存放操作数和计算结果)</p><p>变址寄存器SI/DI(用来确定主存储器中储存单元的地址)</p><p>堆栈指针寄存器SP/BP/SS(用来确定堆栈段中储存单元的地址)</p><p>指令指针寄存器CS/IP(用来控制指令序列的执行流程)</p><p>标志寄存器CF/ZF/SF/OF/PF/AF(条件标志)DF/IF/TF(状态标志)</p><p>注意：</p><p>1. PF标志仅反映最低8位中“1”的个数是偶或奇，即使是进行16位字操作。低字节中“1”的个数为0或者偶数时，PF=1.</p><p>2. 注意溢出和进位的区别。处理器在进行运算时，根据无符号数设置进位标志，根据是否超出有符号数范围设置溢出标志</p><p>段寄存器DS/CS/SS/ES</p><p>因为8086有20跟地址线，要解决16位的机器字长处理20为地址的问题，采取分段的形式访问内存，段内最大64KB</p><h1>外部设备</h1><p>CPU通过接口与外设通信，每一个接口有一组寄存器(数据寄存器、状态寄存器、命令寄存器)，每一个寄存器都有一个独立于内存的I/O地址空间</p><p>寻址方式</p><p>由于指令系统设计了多种操作数的来源，寻找操作数的过程就是操作数的寻址，不同的寻址方式执行的速度和效率不一样。</p><p>跟数据有关的寻址方式(MOV)(注意两个操作数字长要一致)</p><p>立即寻址方式 MOV AX, 5 (直接给出操作数)</p><p>寄存器寻址方式 MOV AX, BX (在寄存器中给出操作数，CS指令不能用MOV改变)</p><p>直接寻址方式 MOV AX, VALUE 或 MOV AX, [VALUE] 或 MOV AX, [2000H] (直接给出有效地址，在内存中寻找操作数，隐含段为DS，可使用段跨越前缀指定其它段)</p><p>寄存器间接寻址方式 MOV AX, [BX](有效地址在寄存器中，不允许使用AX/CX/DX存放有效地址)</p><p>寄存器相对寻址方式 MOV AX, COUNT[SI] 或 MOV AX, [COUNT+SI](可用寄存器BX/BP/SI/DI)</p><p>基址变址寻址方式 MOV AX, [BX][SI](必须是一个基址寄存器和一个变址寄存器的组合)</p><p>相对基址变址寻址方式 MOV AX, MASK[BX][SI]</p><p>比例变址寻址方式 MOV EAX, ARRAY[ESI*4]</p><p>基址变址寻址方式 MOV EAX, [EBX][ESI*6]</p><p>相对比例变址寻址方式 MOV EAX, ARRAY[EBX][ESI*8]</p><p>与转移地址有关的寻址方式(JMP)</p><p>段内直接寻址 JMP (NEAR PTR/SHROT)NEXT (NEAR PTR----16位位移量， SHORT----8位位移量，有效地址为当前IP+位移量(8/16位))</p><p>段内间接寻址 JMP BX或JMP TABLE[BX](转向的有效地址是一个寄存器或存储单元的内容)</p><p>段间直接寻址 JMP FAR PTR NEXT(转向另一个代码段中的地址，修改CS和IP)</p><p>段间间接寻址 JMP DWORD PTR [INTERS+BX](用存储器中的两个相继字的内容取代CS和IP)</p><h1>指令系统</h1><p>数据传送指令(不影响标志位)</p><p>MOV DST, SRC(DST不能是CS，立即数不能直接送段寄存器，两个操作数不能同时为段寄存器)</p><p>MOVSX 带符号扩展传送指令，MOVZX 不带符号扩展传送指令(源操作数长度一定小于目的操作数长度)</p><p>PUSH SCR (必须以字为单位，DST不能是CS)</p><p>PUSHA/POPA (AX/CX/DX/BX依次入/出栈)</p><p>XCHG OPR1, OPR2 交换操作数(不允许使用段寄存器)</p><p>IN AL/AX, PORT/DX (I/O->CPU)</p><p>OUT AL/AX, PORT/DX (CPU->I/O)</p><p>LEA REG, SRC (有效地址送寄存器指令，REG不能是段寄存器，SRC必须是存储器寻址方式)</p><h1>算数指令(影响标志位)</h1><p>ADD/ADC/INC (除INC不影响CF标志外，都对条件标志位有影响) &lt;OF=1, 两个操作数符号相同，而结果符号与之相反></p><p>SUB/SBB/NEG/CMP (除DEC不影响CF标志外，都对条件标志位有影响) &lt;OF=1, 两个操作数符号相反，而结果符号与减数符号相同></p><p>MUL/IMUL (AL/AX为隐含的乘数寄存器、AX/AX&DX为隐含的乘积寄存器，SRC不能是立即数，除CF/OF，对条件标志位无定义)&lt;MUL: CF/OF=0, 乘积的高一半为0，IMUL: CF/OF=0，乘积的高一半是低一半的符号扩展></p><p>DIV/IDIV ( AX(DA&AX)为隐含的被除数寄存器，AL(AX)为隐含的商寄存器，AH(DX)为隐含的余数寄存器，SRC不能是立即数， 对多有条件标志位无定义)</p><p>CBW/CWD (无操作数，隐含对AL/AX进行符号扩展，不影响标志位)</p><p>DAA/DAS(压缩的BCD码加/减法调整指令，隐含的操作寄存器为AL，紧接在加减指令之后使用，除AF/CF外，对其他条件标志位无定义)</p><p>AF＝1或(AL)0~3＝A~F，则(AL) &lt;-(AL) ±06H，AF＝1</p><p>CF＝1或(AL)4~7＝A~F，则(AL) &lt;-AL) ± 60H，CF＝1</p><p>AAA/AAS(非压缩的BCD码加/减法调整指令)</p><p>AAM/AAD(非压缩的BCD码乘/除法调整指令)</p><p>NOT/AND/OR/XOR/TEST(CF/OF=0; AF无定义; 其余按照运算结果设置)</p><p>移位指令 S/R(简单移位/循环)，H/A(逻辑/算数S)或O/C(不带进位/带进位R)，L/R(左移/右移) (当移位超过1位时，不能使用立即数，条件标志位CF为移入的数值，只移一位时，OF=1最高有效位的值发生变化，根据结果设置SF/ZF/PF)</p><p>串传送指令(不影响条件标志位)</p><p>REP MOVS/STOS/LODS(目的串默认附加段，源串默认数据段，CX=串长度，CLD/STD建立方向标志DF，0表示从低到高)</p><p>REPE/REPZ(相等继续比较)REPNE/REPNZ(不相等继续比较)CMPS/SCAS (DI:相比配/不匹配的字符的下一个地址，CX: 剩下的还未比较的字符的个数)</p><p>控制转移指令(不影响条件标志位)</p><p>JMP 无条件转移</p><p>JZ(JE): ZF=1转移，JNZ(JNE): ZF=0转移</p><p>JS/JNS/JO/JNO...</p><p>JC(JB/JNAE) CF=1转移，JNC(JNB/JAE) CF=0转移</p><p>JA/JAE/JB/JBE CF&ZF=1/0</p><p>JL/JLE/JG/JGE SF&ZF=1/0</p><p>JCXZ CX=0转移</p><p>LOOP CX=0转移，否则循环</p><p>LOOPE/LOOPZ CX≠0&ZF=1循环</p><p>LOOPNE/LOOPNZ CX≠0&ZF=0循环</p><p>CALL 段内直接调用/段内间接调用 IP压栈</p><p>段间直接调用/段间间接调用 CS/IP压栈</p><p>RET (立即数) 段内调用 弹IP，段间调用 弹IP/CS, 立即数表示弹出IP/CS后堆栈弹出多少个字节</p><p>INT TYPE(压标志->压CS->压IP，新 IP=TYPE*4, CS=TYPE*4+2)</p><p>IRET 从中断返回指令(INT 指令执行时，把IF和TF置零，但不影响其他标志位)</p><h1>伪操作</h1><p>段定义伪操作</p><p>PARA: 段起始地址的最低十六进制数位必须为0, PRIVATE: 私有段，不与其他同名段合并(这两个位默认的定位类型和组合类型)</p><p>PUBLIC: 与其他同名段合并，由连接命令决定连接顺序，每一小分段从小段(16个字节)的边界开始</p><p>COMMON: 覆盖</p><p>符号定义伪指令</p><p>等价伪指令EQU 等号伪指令= 定义符号名伪指令LABEL</p><p>WBUF LABLE WORD</p><p>BUF DB 200 DUP(0)</p><p>汇编地址计数器 $ (当前正在汇编的指令的偏移地址)</p><p>置汇编地址计数器 ORG 常数表达式 (设置当前地址计数器的值，使下一字节的地址成为参数表达式的值)</p><p>EVEN (使下一变量或指令开始于偶字节地址)</p><p>ALIGN 常数 (使下一变量或指令开始于常数的倍数)</p><p>基数控制伪操作 .RADIX expression (当使用其他基数表示的常数时，使用此指令)</p><p>表达式与运算符</p><h1>算数运算符</h1><p>+ -*/ MOD SHL SHR</p><p>既可以用于数值表达式也可以用于地址表达式</p><h1>逻辑运算符</h1><p>AND ORXORNOT</p><h1>关系运算符</h1><p>EQ(相等) NE(不相等)LT(小于)GT(大于)LE(小于等于)GE(大于等于)</p><p>属性运算符 PTR</p><p>数值返回运算符</p><p>SEG 分离变量或标号所在段的首地址</p><p>TYPE 分离变量或标号的类型</p><p>LENGTH 对于变量中使用DUP的情况，汇编程序将回送分配给该变量的单元数，而对于其他情况则送1。</p><p>SIZE 取出变量所含的数据存储区的大小，返回值为LENGTH*TYPE</p><p>字节分离运算符</p><p>HIGH 分离出高字节， LOW 分离出低字节</p><p>CONST DW 0ABCDH</p><p>MOV AH, HIGH CONST ; 0ABHàAH</p><h1>子程序</h1><p>同一模块的不同过程之间的参数传递</p><p>通过寄存器传递参数</p><p>直接访问模块中的变量</p><p>通过地址表穿传送参数地址</p><p>通过堆栈传送参数或参数地址</p><p>子程序的重入是只子程序被中断后又被中断服务程序说调用，子程序的冲入是被动的进入，递归是主动的进入</p><h1>宏汇编</h1><p>宏：具有宏名的一段汇编语句序列(宏定义时书写)</p><p>宏指令：这段汇编语句序列的缩写(宏调用时书写)</p><p>红展开：宏指令出用这段宏代替的过程(宏汇编时实现)</p><p>宏调用的实质是在汇编的过程进行宏展开，用宏定义的代码序列替代宏指令的过程</p><h1>伪指令</h1><p>LOCAL：宏定义体采用了标号，要用LOCAL进行说明，必须是宏定义MACRO语句之后的第一条语句</p><p>.XALL列出只产生目标代码的宏展开</p><p>.LALL列出包括注释项在内的所有宏展开</p><p>.SALL不列出任何展开信息</p><p>%和&，作为哑元的前缀</p><p>重复汇编</p><p>在汇编过程中，重复展开一段基本相同的语句</p><p>条件汇编</p><p>在汇编过程中，根据条件决定汇编的语句</p><p>输入输出程序设计</p><h1>中断的分类</h1><p>内部中断(软中断): CPU内部原因产生的中断，CPU错误、由INT指令引起的中断、DEBUG设置的中断</p><p>外部中断(硬中断): 非CPU内部原因产生的中断，分可屏蔽中断和不可屏蔽中断</p><p>从外设发出中断请求道CPU相应中断，有两个决定性的条件</p><p>1.该外设的中断请求是否被屏蔽，通过端口21H的中断相应位来决定，相应位为0表示允许中断</p><p>2.CPU是否允许响应中断，由CPU的标志寄存器FLAGS中的IF位决定</p><p>在一次中断程序处理完成后，应对20H端口发中断结束命令，第5位(EOI)置1.否则以后将屏蔽掉对同级中断的请求</p><p>主程序为响应中断应做的准备工作,以及硬件(CPU和外设接口)自动完成的工作:</p><p>主程序:(1)设置中断向量</p><p>(2)设置8259A的中断屏蔽位</p><p>(3)设置CPU的中断允许位</p><p>硬件: (4)外设接口送中断请求给CPU</p><p>(5)当前指令执行完后,CPU送响应信号给外设接口</p><p>(6)CPU接收中断类型号</p><p>(7)当前的FLAGS,CS和IP入栈</p><p>(8)清除IF和TF</p><p>(9)中断向量送IP和CS</p><p>中断处理程序</p><p>(1)保护寄存器的内容</p><p>(2)如允许中断嵌套,则开中断(STI)</p><p>(3)处理中断</p><p>(4)关中断</p><p>(5)送中断结束命令(EOI)给中断命令寄存器</p><p>(6)恢复寄存器内容</p><p>(7)返回被中断的程序(IRET)</p><p>键盘I/O</p><p>每当按键动作产生，系统做如下处理：</p><p>1.主板上的键盘微控制器获得按键的扫描码，将扫描码放入I/O端口60H，并触发键盘终端INT 09H的中断请求。</p><p>2.若允许键盘中断，且CPU开中断，可进入INT 09H的ISR</p><p>3.INT 09H的ISR从端口60H读扫描码，并根据对应按键动作做出相应处理。如果是非变 换键和非特殊请求键，则生成一个16位值，存入键盘缓冲区，低字节ASCII码，高位字节扫描码。INT 09H的ISR不将按键的断码放入BUFFER</p><p>BIOS键盘中断INT 16H</p><p>显示器I/O</p><p>显存地址B000:0000、B800:0000，低字节ASCII码，高字节属性值，BIOS显示终端INT 10H</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'编语','相关','知识点'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>