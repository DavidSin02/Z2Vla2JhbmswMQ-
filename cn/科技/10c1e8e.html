<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>技术文章—玩转HDMI2.1 源端测试之「入门基础篇」 | 极客快訊</title><meta property="og:title" content="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3d070b1543b64fa5b26dd9672a4cb9df"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/10c1e8e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/10c1e8e.html><meta property="article:published_time" content="2020-10-29T21:08:28+08:00"><meta property="article:modified_time" content="2020-10-29T21:08:28+08:00"><meta name=Keywords content><meta name=description content="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/10c1e8e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>技术文章—玩转HDMI2.1 源端测试之「入门基础篇」</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>在HDMI2.1源端测试中，示波器模拟了sink的行为，提供了端接电阻和端接电压。EDID 仿真器模拟sink的EDID，提供分辨率/速率信息，HDMI2.0 的EDID仿真器也提供SCDC信息， 完成与source的沟通，使source输出需要TMDS信号。测试项目分为单端信号测试和差分信号测试，对应的连接方式分别为单端连接和差分连接，用于采集单端信号和差分信号，以便完成相应的测试项目。</p><p><strong>HDMI1.4b/2.0的测试难点：</strong></p><p>一些方案端接电压需要外接电源提供，或者端接电压不可调，无法验证极限情况；</p><p>单端测试和差分测试信号采集需要更改硬件连接，过程繁琐耗时；</p><p>测试信号速率随着分辨率变化，需要手动设置分辨率，测试无法自动化；</p><p>这些问题在泰克HDMI2.1 FRL 测试方案中都得到了完美的解决。</p><p>为了追求更好的视觉效果和体验，人们不满足于4Kp60Hz显示分辨率，也在追求8Kp60Hz和 4Kp120Hz的体验。但是8Kp60Hz 需要的带宽约64G（RGB/YCbCr 4:4:4格式），远远超过了HDMI2. 0的支持范围。所以HDMI协会增加HDMI2.1 FRL（Fixed Rate Link）模式，实现接口带宽的增加，满足8Kp60Hz需要。同时需要结合相应的YCbCr 4:2: 0编码和视频压缩技术。</p><p><strong>FRL模式如何实现带宽的增加</strong></p><p>FRL模式增加带宽的常用方法有两种，方法一：提升通道数据速率；方法二：速率不变时，增量通道数量。FRL模式这两种方法都有使用。在保持HDMI物理接口不变的情况，每个通道支持的速率增加到了12Gbps ；另外，原来的TMDS Clock channel重定义为FRL Lane3（时钟嵌入在数据流中）； TMDS Data 0/1/2 分别对应FRL lane 0/1/2，如下图所示，共计有4个数据通道。这样就实现了最高48Gbps的带宽。信号的编码方式从TMDS的 8b/10b改变为FRL 16b/18b格式，编码效率更高。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3d070b1543b64fa5b26dd9672a4cb9df><p class=pgc-img-caption></p></div><p>FRL mode 可以分为两种模式：3 lanes 工作模式下， 仅仅支持3 Gbps和6Gbps 两种速率；未使用的Lane3， source 和sink 都需要使用差分50Ω～150Ω端接。4 lanes 工作模式下， 支持6/8/10/12 Gbps 四种速率。</p><p><strong>HDMI2.1源端测试</strong></p><p>总的测试项目有9个，如下表所示，以测试Lane0 为例。</p><p>Measurement</p><p>Victim Lane（Lane0）</p><p>Aggressor Lane（Lane1/2/3）</p><p>HFR1-1: DC Common Mode</p><p>LTP5</p><p>LTP6/7/8</p><p>HFR1-2: Vse_Max, Vse_Min</p><p>LTP5</p><p>LTP6/7/8</p><p>HFR1-3: TRise, TFall</p><p>LTP4</p><p>LTP2</p><p>HFR1-4: Inter pair Skew</p><p>LTP5</p><p>LTP6/7/8</p><p>HFR1-5: FRL Rate</p><p>LTP3</p><p>LTP2</p><p>HFR1-6: Random Jitter</p><p>LTP3</p><p>LTP2</p><p>HFR1-7: Data lane Eye Diagram</p><p>LTP5</p><p>LTP6/7/8</p><p>HFR1-8: AC Common Mode Noise</p><p>LTP5</p><p>LTP2</p><p>HFR1-9: FFE Monotonicity</p><p>LTP4</p><p>LTP1</p><p>LTP1 – All 1’ pattern</p><p>LTP2 – All 0’ pattern</p><p>LTP3 – Clock pattern</p><p>LTP4 – 128 zeros followed by 128 ones pattern</p><p>LTP5/6/7/8 - Predefined sequence of 4096 FRL characters</p><p>测试信号是固定的码型，测试共定义8种码型Link training pattern 1～8，简写为LTP1～8。不像HDMI1.4b/2.0 ，对码型没有要求。</p><p>测试信号速率是固定的，不需要随分辨率变化。</p><p>需要考虑其他lane的干扰，例如HFR1-1项目，测试Lane0时，需要Lane0 发出LTP5 码型， Lane1/2/3 分别发出LTP6/7/8的码型， 测试方法更复杂。</p><p>源端测试的难点解决</p><p><strong>端接电压的实现</strong></p><p>泰克示波器和探棒，不需要外接电源，本身不仅可以提供标准的3.3V端接电压，用于协会要求的一致性测试。在用户自定义模式下，还提供可调的端接电压，例如设置3.0V的端接电压，用于验证源端芯片在端接电压变化时的情况。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/68e8e475ce104f6cb210834e62bba0a4><p class=pgc-img-caption></p></div><p><strong>单端和差分信号的自动采集</strong></p><p>对应单端项目和差分项目，测试时需要分别采集单端信号和差分信号；在HDMI1.4b/2.0测试中，都是通过差分探棒采集差分信号；手动更改探棒硬件连接后，采集单端信号。更改连接繁琐，无法自动化，造成了测试效率低。</p><p>泰克Tri-mode 探棒（三模探棒）， 在测试软件控制下，交替工作在单端模式（A-GND和B-GND），无需硬件连接的改变，可以实现8个单端信号的采集，再自动计算差分信号，从而实现了全部项目的自动化。除了三模探棒方案外， 泰克还提供两台示波器级联自动化方案，通过8个channel 实现对8个单端信号的同时采集，测试效率更高。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/fad39675b2394abe9827019625f7e3e2><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c35c41674a934678a563d318ee3ef468><p class=pgc-img-caption></p></div><p><strong>解决测试复杂化的问题</strong></p><p>随着速率的提升，HDMI规范定义新的均衡技术和cable 模型，也造成了测试过程的复杂化。规范定义两种Cable mode: Category 3 Worst Cable Mode（WCM3）和 Category 3 Short Cable Mode （SCM3）。两种均衡： CTLE1～8 dB和 DFE 1-tap d1 value 25mV。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/027132355d5f4861be4c6bf976c86a8a><p class=pgc-img-caption></p></div><p>在TP1采集信号后，应用 cable 模型，得到TP2位置的波形，再应用参考均衡后得到TP2_EQ位置的波形。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e0f2b406e5d541158f9d499eb4b21241><p class=pgc-img-caption></p></div><p>眼图计算方法更为复杂，既要考虑Cable 模型的插入损耗，也要考虑其他数据线引入的串扰。</p><p>泰克方案针对以上情况，优化了算法， 测试时间短。</p><p><strong></strong></p><p><strong>测试速率和码型自动切换</strong></p><p>以前测试需要手动更改分辨率，才能实现测试信号速率的变更。现在泰克通过测试软件与EDID/SCDC模拟器的配合，在SCDC（Status and Control Data Channel） offset 0x31中FRL_Rate设置测试信号速率， 在offset 0x41/42中为每个Lane 设置码型。实现了测试需要的速率和码型的自动切换，实现了测试完全自动化，提高了测试效率。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/675aa05f1d9448f59aee319dfd3aa447><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/78d46655f0394307b2862135a63262f5><p class=pgc-img-caption></p></div><p><strong></strong></p><p><strong>泰克HDMI2.1 FRL自动化方案</strong></p><p>配置一：DPO 70000 SX示波器级联方案。两台DPO 70000 SX示波器，使用UltraSync cable同步级联，可以把8个通道的skew调整到1ps内，确保所有单端信号采集的同步性。同时采集8个单端信号后，再自动计算生成4对差分信号。 测试过程不需要更改硬件连接， 信号路径衰减小，测试速度快，效率高。搭配EDID emulator，实现速率和码型的自动切换。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6a5285344d324cb4ade444847df72663><p class=pgc-img-caption></p></div><p>配置二：DPO70000SX示波器搭配Tri-mode探棒。利用Tri-mode探棒的特性，在测试软件控制下，交替工作在单端模式（A-GND和B-GND），分次完成对8个单端信号的采集。 测试过程也不需要更改硬件连接。连接示意图如下，示波器会对探棒进行自动去嵌，消除探棒对信号的影响。兼顾了成本和效率，同样通过EDID emulator实现自动化的测试。</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3c8b2e6917ef4d76a6017585f9d74c5f><p class=pgc-img-caption></p></div><p><strong>示波器带宽的考量</strong></p><p>在HDMI2.1规范中推荐示波器带宽是23GHz或者以上。出于成本考虑，大家也许会问，16GHz 或者20GHz带宽的示波器可以吗？一方面可以从上升时间和带宽的角度来看，HDMI2.1 信号允许的最快上升时间22.5ps（20%-80%）。示波器测量到上升时间可以用如下公式计算：</p><div class=pgc-img><img alt="技术文章—玩转HDMI2.1 源端测试之「入门基础篇」" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dd344907ba854a368376dc7a4dcdb1af><p class=pgc-img-caption></p></div><p>示波器带宽</p><p>16GHz BW</p><p>20GHz BW</p><p>23GHz BW</p><p>33GHz BW</p><p>典型上升时间</p><p>（20%-80%）</p><p>18ps</p><p>15ps</p><p>13ps</p><p>9ps</p><p>实际测量时间</p><p>28.8ps</p><p>27.0ps</p><p>26.0ps</p><p>24.2ps</p><p>与实际上升时间差△t</p><p>Trise(displayed) -22.5ps</p><p>6.3ps</p><p>4.5ps</p><p>3.5ps</p><p>1.7ps</p><p>测量误差比</p><p>△t/22.5ps</p><p>28.1%</p><p>20.2%</p><p>15.5%</p><p>7.7%</p><p>从上表可以看到带宽越高，上升时间的测量误差就越小。从带宽角度看，示波器的带宽定义是示波器观察到的正弦波幅度衰减-3dB的频率。在实际测试过程中，非正弦波信号需要考虑3次～5次谐波。HDMI2.1 信号速率最高12Gbps，基频是6GHz， 3次谐波频率是18GHz，16GHz带宽的示波器测量到3次谐波成分会被衰减超过-3dB。另一方面被测HDMI2.1 DUT的FRL最高速率没有达到上限12Gbps的话，可以按照上面的计算方法实际评估示波器的带宽需求。</p><p>简单来说，为了保证更好的测量精度以及测试的合规性，示波器的带宽越高越好。</p><p><strong>总结</strong></p><p>泰克示波器利用通道可调端接电压，Tri-mode 探棒的单端特性/示波器级联特性，以及与EDID/SCDC模拟器配合，实现了HDMI2.1 FRL 源端测试的真正自动化，提高了测试效率。从而帮助客户快速验证HDMI2.1 产品， 加速客户产品市场化的过程。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'技术','玩转','HDMI2.1'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>