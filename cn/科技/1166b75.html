<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await | æå®¢å¿«è¨Š</title><meta property="og:title" content="å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/470800027f460ef29831"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1166b75.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1166b75.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1166b75.html><meta property="article:published_time" content="2020-10-29T20:50:33+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:33+08:00"><meta name=Keywords content><meta name=description content="å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1166b75.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä¹¦æ¥ä¸Šç¯‡ã€‚æˆ‘ä»¬å·²ç»ä»‹ç»äº†äº‹ä»¶å¾ªç¯å’ŒJob Queueçš„æœºåˆ¶ï¼Œç°åœ¨åˆ†äº«çš„æ˜¯åŸæ–‡çš„ååŠéƒ¨åˆ†â€”â€”å¼‚æ­¥ä»£ç çš„å‘å±•å†ç¨‹ï¼Œå¹¶æ¯”è¾ƒä¸‰ç§å¼‚æ­¥æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼Œå¸Œæœ›å¤§å®¶çœ‹å®Œèƒ½å¤Ÿæ”¶è·æ–°çŸ¥è¯†ï½</p><p><img alt=å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await onerror=errorimg.call(this); src=https://p3.pstatp.com/large/470800027f460ef29831></p><p>ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰</p><p><strong>å›è°ƒ</strong></p><p>ä½ å·²ç»çŸ¥é“ï¼Œå›è°ƒæ˜¯ç›®å‰ä¸ºæ­¢åœ¨JavaScriptç¨‹åºä¸­è¡¨è¾¾å’Œç®¡ç†å¼‚æ­¥çš„æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚å®é™…ä¸Šï¼Œå›è°ƒæ˜¯JavaScriptè¯­è¨€ä¸­æœ€åŸºæœ¬çš„å¼‚æ­¥æ¨¡å¼ã€‚æ— æ•°çš„JSç¨‹åºï¼Œç”šè‡³æ˜¯éå¸¸å¤æ‚çš„ç¨‹åºï¼Œéƒ½æ˜¯åŸºäºå›è°ƒç¼–å†™çš„ï¼Œé™¤äº†å›è°ƒå¹¶æ²¡æœ‰ç”¨åˆ°å…¶ä»–çš„å¼‚æ­¥åŸºç¡€ã€‚</p><p>ä¸è¿‡å›è°ƒå¹¶ä¸å®Œç¾ã€‚è®¸å¤šå¼€å‘äººå‘˜éƒ½åœ¨å°è¯•å¯»æ‰¾æ›´å¥½çš„å¼‚æ­¥æ¨¡å¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸ç†è§£åº•å±‚çš„å®é™…æƒ…å†µï¼Œå°±ä¸å¯èƒ½æœ‰æ•ˆåœ°ä½¿ç”¨ä»»ä½•æŠ½è±¡ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿™äº›æŠ½è±¡æ¦‚å¿µï¼Œä»¥è¯´æ˜ä¸ºä»€ä¹ˆæ›´å¤æ‚çš„å¼‚æ­¥æ¨¡å¼(å°†åœ¨åç»­æ–‡ç« ä¸­è®¨è®º)æ˜¯å¿…è¦çš„ï¼Œç”šè‡³æ˜¯æ¨èçš„ã€‚</p><p>åµŒå¥—å›è°ƒ</p><p>çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç </p><blockquote><pre>listen('click', function (e){ setTimeout(function(){ ajax('https://api.example.com/endpoint', function (text){ if (text == "hello") { doSomething(); } else if (text == "world") { doSomethingElse(); } }); }, 500);});</pre></blockquote><p>æˆ‘ä»¬å·²ç»å°†ä¸‰ä¸ªå‡½æ•°çš„åµŒå¥—æˆäº†ä¸€æ¡é“¾ï¼Œæ¯ä¸€ç¯éƒ½è¡¨ç¤ºå¼‚æ­¥åºåˆ—ä¸­çš„ä¸€ä¸ªæ­¥éª¤ã€‚</p><p>è¿™ç§ä»£ç é€šå¸¸è¢«ç§°ä¸ºâ€œå›è°ƒåœ°ç‹±â€ã€‚ä½†æ˜¯â€œå›è°ƒåœ°ç‹±â€å®é™…ä¸Šä¸ç¼©è¿›/ç¼©è¿›å‡ ä¹æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ç­‰å¾…â€œclickâ€äº‹ä»¶ï¼Œç„¶åç­‰å¾…è®¡æ—¶å™¨è§¦å‘ï¼Œç„¶åç­‰å¾…Ajaxå“åº”è¿”å›ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå†æ¬¡å‡ºç°ã€‚</p><p>ä¹ä¸€çœ‹ï¼Œè¿™æ®µä»£ç ä¼¼ä¹å¯ä»¥è‡ªç„¶åœ°å°†å®ƒçš„å¼‚æ­¥æ˜ å°„ä¸ºè¿ç»­çš„æ­¥éª¤:</p><blockquote><pre>listen('click', function (e) { // ..});</pre></blockquote><p>ç„¶åæˆ‘ä»¬æœ‰:</p><blockquote><pre>setTimeout(function(){ // ..}, 500);</pre></blockquote><p>ç„¶åæˆ‘ä»¬æœ‰:</p><blockquote><pre>ajax('https://api.example.com/endpoint', function (text){ // ..});</pre></blockquote><p>æœ€åï¼š</p><blockquote><pre>if (text == "hello") { doSomething();}else if (text == "world") { doSomethingElse();}</pre></blockquote><p>å› æ­¤ï¼Œè¿™æ ·ä¸€ç§é¡ºåºçš„æ–¹å¼æ¥è¡¨è¾¾æ‚¨çš„å¼‚æ­¥ä»£ç ä¼¼ä¹æ›´è‡ªç„¶ï¼Œä¸æ˜¯å—ï¼Ÿä¸€å®šæœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œå¯¹å§ï¼Ÿ</p><p>Promise</p><p>çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç :</p><blockquote><pre>var x = 1;var y = 2;console.log(x + y);</pre></blockquote><p>è¿™æ®µä»£ç éå¸¸ç®€å•ï¼šå®ƒå¯¹xå’Œyçš„å€¼è¿›è¡Œæ±‚å’Œï¼Œå¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚ä½†æ˜¯ï¼Œå¦‚æœxæˆ–yçš„å€¼ç¼ºå¤±äº†ï¼Œè¿˜æœ‰å¾…ç¡®å®šå‘¢ï¼Ÿæ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä»æœåŠ¡å™¨æ£€ç´¢xå’Œyçš„å€¼ï¼Œç„¶åæ‰èƒ½åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨å®ƒä»¬ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°loadXå’ŒloadY ï¼Œåˆ†åˆ«ä»æœåŠ¡å™¨åŠ è½½xå’Œyçš„å€¼ã€‚ç„¶åï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°sumï¼Œä¸€æ—¦å®ƒä»¬éƒ½è¢«åŠ è½½äº†ï¼Œå®ƒå°±å°†xå’Œyçš„å€¼ç›¸åŠ ã€‚ å®ƒå¯èƒ½æ˜¯è¿™æ ·çš„(å¾ˆéš¾çœ‹ï¼Œä¸æ˜¯å—)</p><blockquote><pre>function sum(getX, getY, callback) { var x, y; getX(function(result) { x = result; if (y !== undefined) { callback(x + y); } }); getY(function(result) { y = result; if (x !== undefined) { callback(x + y); } });}// A sync or async function that retrieves the value of `x`function fetchX() { // ..}// A sync or async function that retrieves the value of `y`function fetchY() { // ..}sum(fetchX, fetchY, function(result) { console.log(result);});</pre></blockquote><p>è¿™é‡Œæœ‰ä¸€äº›éå¸¸é‡è¦çš„ä¸œè¥¿â€”â€”åœ¨è¿™ä¸ªç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬å°†xå’Œyä½œä¸º<strong>æœªæ¥</strong>çš„å€¼ï¼Œå¹¶è¡¨ç¤ºäº†ä¸€ä¸ªæ“ä½œsum(â€¦)(ä»å¤–éƒ¨çœ‹)ï¼Œå®ƒå¹¶ä¸å…³å¿ƒxå’Œyå½“å‰å¯ä¸å¯ç”¨ã€‚</p><p>å½“ç„¶ï¼Œè¿™ç§ç²—ç³™çš„åŸºäºè°ƒç”¨çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šå€¼å¾—æœŸå¾…çš„ã€‚è¿™åªæ˜¯è¿ˆå‘ç†è§£æœªæ¥å€¼çš„å¥½å¤„çš„ç¬¬ä¸€æ­¥ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ—¶é—´çš„é—®é¢˜ã€‚</p><p>Promise å€¼</p><p>è®©æˆ‘ä»¬ç®€è¦åœ°çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•ç”¨Promiseæ¥è¡¨è¾¾x+yçš„ä¾‹å­:</p><blockquote><pre>function sum(xPromise, yPromise) { // `Promise.all([ .. ])` takes an array of promises, // and returns a new promise that waits on them // all to finish return Promise.all([xPromise, yPromise]) // when that promise is resolved, let's take the // received `X` and `Y` values and add them together. .then(function(values){ // `values` is an array of the messages from the // previously resolved promises return values[0] + values[1]; } );}// `fetchX()` and `fetchY()` return promises for// their respective values, which may be ready// *now* or *later*.sum(fetchX(), fetchY())// we get a promise back for the sum of those// two numbers.// now we chain-call `then(...)` to wait for the// resolution of that returned promise..then(function(sum){ console.log(sum);});</pre></blockquote><p>åœ¨è¿™æ®µä»£ç ä¸­æœ‰ä¸¤å±‚Promiseã€‚</p><p>fetchX()å’ŒfetchY()è¢«ç›´æ¥è°ƒç”¨ï¼Œå®ƒä»¬è¿”å›çš„å€¼(Promiseï¼)è¢«ä¼ é€’ç»™sum(...)ã€‚è¿™äº›Promiseæ‰€ä»£è¡¨çš„æ½œåœ¨å€¼å¯èƒ½åœ¨ç°åœ¨æˆ–è€…å°†æ¥å‡†å¤‡å¥½ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•ï¼Œæ¯ä¸ªPromiseéƒ½å°†å…¶è¡Œä¸ºè§„èŒƒåŒ–ä¸ºç›¸åŒçš„ã€‚æˆ‘ä»¬ä»¥ä¸€ç§ç‹¬ç«‹äºæ—¶é—´çš„æ–¹å¼æ¥è§£é‡Šxå’Œyçš„å€¼ã€‚å®ƒä»¬åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ˜¯æœªæ¥å€¼ã€‚</p><p>ç¬¬äºŒå±‚æ˜¯sum(...) åˆ›å»º(é€šè¿‡Promise.all([ ... ]))å’Œè¿”å›çš„promiseï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ then(...)æ¥ç­‰å¾…å®ƒå®Œæˆã€‚å½“sum(...)æ“ä½œå®Œæˆï¼Œæˆ‘ä»¬çš„æœªæ¥å€¼ï¼Œå³æ±‚å’Œç»“æœå·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ¥ã€‚æˆ‘ä»¬éšè—äº†åœ¨sum(...) ä¸­ç­‰å¾…xå’Œy æœªæ¥å€¼çš„é€»è¾‘ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šåœ¨sum(â€¦)å†…éƒ¨ï¼ŒPromise.all([ â€¦ ])è°ƒç”¨åˆ›å»ºäº†ä¸€ä¸ªpromiseï¼ˆå®ƒç­‰å¾…promiseXå’ŒpromiseY å®Œæˆï¼‰ï¼Œé“¾å¼è°ƒç”¨.then(...)æ¥åˆ›å»ºå¦ä¸€ä¸ªpromiseï¼Œè¿”å›çš„values[0]+ values[1]ä¼šç«‹å³å†³è®®ï¼ˆè¿”å›ç›¸åŠ çš„ç»“æœï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨sum(...)è°ƒç”¨ååŠ ä¸Šçš„then(...)â€”â€”åœ¨ä»£ç æ®µçš„æœ€åâ€”â€”å®é™…ä¸Šæ˜¯åœ¨ç¬¬äºŒä¸ªpromiseçš„è¿”å›åæ‰§è¡Œï¼Œè€Œä¸æ˜¯ç¬¬ä¸€ä¸ªåˆ›å»ºçš„Promise.all([ ... ])ã€‚è¿˜æœ‰ï¼Œè™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨ç¬¬äºŒä¸ªthen(...)åé¢ç»§ç»­æ·»åŠ thenï¼Œå®ƒä¹Ÿåˆ›é€ äº†å¦ä¸€ä¸ªpromiseï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è§‚å¯Ÿ/ä½¿ç”¨å®ƒã€‚æœ¬ç« åé¢çš„å†…å®¹å°†åœ¨åé¢è¯¦ç»†è§£é‡Šã€‚ ä½¿ç”¨Promiseï¼Œthen(...) çš„è°ƒç”¨å®é™…ä¸Šå¯ä»¥æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯å®Œæˆ(å¦‚ä¸Šæ‰€ç¤º)ï¼Œç¬¬äºŒä¸ªæ˜¯æ‹’ç»:</p><blockquote><pre>sum(fetchX(), fetchY()).then( // fullfillment handler function(sum) { console.log( sum ); }, // rejection handler function(err) { console.error( err ); // bummer! });</pre></blockquote><p>å¦‚æœåœ¨å¾—åˆ°xæˆ–yçš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œæˆ–è€…åœ¨æ·»åŠ çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€äº›å¤±è´¥ï¼Œé‚£ä¹ˆå¯ä»¥sum(â€¦)è¿”å›çš„promiseå°†è¢«æ‹’ç»ï¼Œä¼ é€’ç»™then(...)çš„ç¬¬äºŒä¸ªå›è°ƒé”™è¯¯å¤„ç†ç¨‹åºï¼Œå®ƒå°†æ”¶åˆ°æ¥è‡ªpromiseæ‹’ç»çš„å€¼ã€‚ å› ä¸ºPromises å°è£…äº†ä¾èµ–äºæ—¶é—´çš„çŠ¶æ€â€”â€”ç­‰å¾…å†…åœ¨å€¼çš„å®ç°æˆ–æ‹’ç»â€”â€”ä»å¤–éƒ¨æ¥çœ‹ï¼ŒPromises æœ¬èº«æ˜¯æ—¶é—´ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥ä»¥å¯é¢„æµ‹çš„æ–¹å¼ç»„åˆï¼Œè€Œä¸è€ƒè™‘åº•å±‚çš„æ—¶é—´å’Œç»“æœã€‚</p><p>è€Œä¸”ï¼Œä¸€æ—¦ä¸€ä¸ªPromiseå¾—åˆ°å†³è®®ï¼Œå®ƒå°±ä¼šæ°¸è¿œä¿æŒè¿™ç§çŠ¶æ€â€”â€”åœ¨é‚£ä¸ªæ—¶å€™å®ƒå°±å˜æˆäº†ä¸€ä¸ªä¸å¯æ”¹å˜çš„å€¼â€”â€”ç„¶åå°±å¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™å¤šæ¬¡è¢«è§‚å¯Ÿã€‚</p><p>å®é™…ä¸Šä½ å¯ä»¥é“¾å¼Promiseéå¸¸æœ‰ç”¨ï¼š</p><blockquote><pre>function delay(time) { return new Promise(function(resolve, reject){ setTimeout(resolve, time); });}delay(1000).then(function(){ console.log("after 1000ms"); return delay(2000);}).then(function(){ console.log("after another 2000ms");}).then(function(){ console.log("step 4 (next Job)"); return delay(5000);})// ...</pre></blockquote><p>è°ƒç”¨delay(2000)åˆ›é€ ä¸€ä¸ªåœ¨2000mså®Œæˆçš„Promiseï¼Œç„¶åæˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªthen(â€¦)å®Œæˆå›è°ƒä¸­è¿”å›ï¼Œå¯¼è‡´ç¬¬äºŒä¸ªthen(...)çš„promiseå†ç­‰å¾…2000msæ‰§è¡Œã€‚</p><p><strong>æ³¨æ„</strong>ï¼š å› ä¸ºPromise ä¸€æ—¦å†³è®®ï¼Œä»å¤–éƒ¨å°±ä¸å¯æ”¹å˜äº†ï¼Œæ‰€ä»¥ç°åœ¨å¯ä»¥å®‰å…¨åœ°å°†è¿™ä¸ªå€¼ä¼ é€’ç»™ä»»ä½•ä¸€æ–¹ï¼Œå› ä¸ºå®ƒçŸ¥é“å®ƒä¸èƒ½è¢«æ„å¤–æˆ–æ¶æ„åœ°ä¿®æ”¹ã€‚å¯¹äºè§‚å¯Ÿè¯¥promiseçš„å¤šæ–¹æ¥è¯´ï¼Œè¿™ä¸€ç‚¹å°¤å…¶æ­£ç¡®ã€‚ä»»æ„ä¸€æ–¹ä¸å¯èƒ½å½±å“å¦ä¸€æ–¹è§‚å¯Ÿåˆ°çš„å†³è®®ç»“æœã€‚ä¸å˜æ€§å¯èƒ½å¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªå­¦æœ¯è¯é¢˜ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯Promise è®¾è®¡æœ€åŸºæœ¬å’Œæœ€é‡è¦çš„æ–¹é¢ä¹‹ä¸€ï¼Œä¸åº”è¯¥è¢«éšæ„åœ°å¿½ç•¥ã€‚</p><p>å¦‚ä½•è¾¨åˆ«<strong>Promise</strong>ï¼Ÿ</p><p>å…³äºPromisesçš„ä¸€ä¸ªé‡è¦ç»†èŠ‚æ˜¯ç¡®å®šæ˜¯å¦æŸäº›å€¼æ˜¯çœŸæ­£çš„Promiseã€‚æ¢å¥è¯è¯´ï¼Œå®ƒçš„å€¼ä¼šåƒä¸€ä¸ªPromiseå—?</p><p>æˆ‘ä»¬çŸ¥é“Promisesæ˜¯ç”±new Promise(â€¦)è¯­æ³•æ„é€ çš„ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸º p instanceof Promise æ˜¯ä¸€ä¸ªå……åˆ†çš„æ£€æŸ¥ã€‚å¥½å§ï¼Œä¸å®Œå…¨æ˜¯ã€‚</p><p>ä¸»è¦æ˜¯å› ä¸ºä½ å¯ä»¥ä»å¦ä¸€ä¸ªæµè§ˆå™¨çª—å£(ä¾‹å¦‚iframe)è·å¾—ä¸€ä¸ª Promiseçš„å€¼ï¼Œå®ƒæœ‰è‡ªå·±ç‹¬ç«‹çš„Promiseç±»ï¼Œä¸åŒäºå½“å‰çª—å£æˆ–æ¡†æ¶ä¸­çš„ä¸€ä¸ªï¼Œå› æ­¤è¯¥æ£€æŸ¥å°†æ— æ³•è¯†åˆ«Promiseå®ä¾‹ã€‚</p><p>è€Œä¸”ï¼Œä¸€ä¸ªåº“æˆ–æ¡†æ¶å¯ä»¥é€‰æ‹©å‘å¸ƒå®ƒè‡ªå·±çš„Promiseï¼Œè€Œä¸æ˜¯ä½¿ç”¨ES6åŸç”Ÿçš„Promiseå®ç°ã€‚äº‹å®ä¸Šï¼Œä½ å¾ˆå¯èƒ½ä¼šåœ¨æ²¡æœ‰ä»»ä½•Promiseçš„è€å¼æµè§ˆå™¨ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ Promiseã€‚</p><p>åæ‰å¼‚å¸¸</p><p>å¦‚æœåœ¨åˆ›å»ºPromiseçš„ä»»ä½•æ—¶å€™ï¼Œæˆ–è€…åœ¨å¯¹å…¶å†³è®®çš„è§‚å¯Ÿä¸­ï¼ŒæŠ›å‡ºäº†ä¸€ä¸ªJavaScriptå¼‚å¸¸é”™è¯¯ï¼Œæ¯”å¦‚â€œTypeErrorâ€æˆ–â€œReferenceErrorâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸å°±ä¼šè¢«æ•è·ï¼Œå®ƒå°†è¿«ä½¿è¿™ä¸ªPromiseè¢«æ‹’ç»ã€‚</p><p>ä¾‹å¦‚:</p><blockquote><pre>var p = new Promise(function(resolve, reject){ foo.bar(); // `foo` is not defined, so error! resolve(374); // never gets here :(});p.then( function fulfilled(){ // never gets here :( }, function rejected(err){ // `err` will be a `TypeError` exception object // from the `foo.bar()` line. });</pre></blockquote><p>ä½†æ˜¯å¦‚æœä¸€ä¸ªPromiseå®Œæˆäº†ï¼Œå´åœ¨è§‚å¯Ÿç»“æœæ—¶(åœ¨ then(â€¦) æ³¨å†Œå›è°ƒ)å‘ç”Ÿäº†JSå¼‚å¸¸ä¼šæ€æ ·å‘¢ï¼Ÿå³ä½¿è¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«ä¸¢å¤±ï¼Œä½ å¯èƒ½ä¼šå¯¹å®ƒä»¬å¤„ç†çš„æ–¹å¼æ„Ÿåˆ°æƒŠè®¶ã€‚é™¤éä½ è¿›ä¸€æ­¥æŒ–æ˜ï¼š</p><blockquote><pre>var p = new Promise( function(resolve,reject){ resolve(374);});p.then(function fulfilled(message){ foo.bar(); console.log(message); // never reached}, function rejected(err){ // never reached });</pre></blockquote><p>å®ƒçœ‹èµ·æ¥åƒâ€œfoo . bar()â€çœŸçš„æ˜¯è¢«åæ²¡äº†ã€‚å…¶å®å¹¶ä¸æ˜¯ã€‚ä¸è¿‡ï¼Œä¸€äº›æ›´æ·±å±‚æ¬¡çš„é—®é¢˜å‡ºç°äº†ï¼Œæˆ‘ä»¬æ²¡èƒ½ç›‘å¬åˆ°ã€‚â€œp.then(â€¦)è°ƒç”¨æœ¬èº«ä¼šè¿”å›å¦ä¸€ä¸ªpromiseï¼Œè€Œè¿™ä¸ªpromiseå°†ä¼šè¢«TypeErrorå¼‚å¸¸æ‰€æ‹’ç»ã€‚</p><p><strong>å¤„ç†æœªæ•è·å¼‚å¸¸</strong></p><p>è¿˜æœ‰å…¶ä»–â€œæ›´å¥½â€çš„æ–¹æ³•ã€‚ å¸¸è§çš„ä¸€ä¸ªå»ºè®®æ˜¯åº”è¯¥ç»™Promiseå¢åŠ ä¸€ä¸ªdone(â€¦)ï¼Œç”¨äºæ ‡å¿—Promiseé“¾çš„ç»“æŸã€‚done(â€¦)ä¸ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªPromiseï¼Œæ‰€ä»¥ä¼ é€’åˆ°done(â€¦)çš„å›è°ƒæ˜¾ç„¶ä¸ä¼šæŠŠé—®é¢˜æŠ¥å‘Šç»™ä¸€ä¸ªä¸å­˜åœ¨çš„é“¾å¼Promiseã€‚ åœ¨æœªæ•è·é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä¼šæŒ‰ç…§ä½ æœŸæœ›çš„æ–¹å¼å¤„ç†:åœ¨done(..)ä¸­çš„æ‹’ç»å¤„ç†å‡½æ•°ä¸­å¦‚æœæœ‰ä»»ä½•å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å°†è¢«æŠ›å‡ºä¸ºä¸€ä¸ªå…¨å±€æœªæ•è·çš„é”™è¯¯ï¼ˆé€šå¸¸åœ¨å¼€å‘äººå‘˜æ§åˆ¶å°èƒ½çœ‹åˆ°ï¼‰ï¼š</p><blockquote><pre>var p = Promise.resolve(374);p.then(function fulfilled(msg){ // numbers don't have string functions, // so will throw an error console.log(msg.toLowerCase());}).done(null, function() { // If an exception is caused here, it will be thrown globally});</pre></blockquote><p><strong>åœ¨ES8é‡Œ Async/awaitä¼šå‘ç”Ÿä»€ä¹ˆ</strong></p><p>JavaScript ES8å¼•å…¥äº†async/awaitï¼Œä½¿å¾—Promiseæ›´å®¹æ˜“ä½¿ç”¨ã€‚æˆ‘ä»¬å°†ç®€è¦ä»‹ç»async/awaitæä¾›çš„å¯èƒ½æ€§ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒä»¬æ¥ç¼–å†™å¼‚æ­¥ä»£ç ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹async/awaitå¦‚ä½•å·¥ä½œã€‚</p><p>ä½¿ç”¨asyncå‡½æ•°å£°æ˜æ¥å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚è¿™æ ·çš„å‡½æ•°è¿”å›ä¸€ä¸ªAsyncFunctionå¯¹è±¡ï¼ŒAsyncFunctionå¯¹è±¡ä»£è¡¨äº†æ‰§è¡Œä»£ç çš„å¼‚æ­¥å‡½æ•°ï¼ŒAsyncFunctionåŒ…å«åœ¨è¯¥å‡½æ•°ä¸­ã€‚ å½“è°ƒç”¨asyncå‡½æ•°æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromise ã€‚å½“asyncå‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªPromise ã€‚è€Œæ˜¯ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªPromise ï¼Œå®ƒå°†ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼æ¥å†³è®®ã€‚å½“async å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒPromise å°†ä½¿ç”¨æŠ›å‡ºçš„å€¼æ¥æ‹’ç»ã€‚ ä¸€ä¸ªasync å‡½æ•°å¯ä»¥åŒ…å«ä¸€ä¸ªawaitè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼æš‚åœæ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¹¶ç­‰å¾…ä¼ é€’ç»™å®ƒçš„Promiseè¢«å†³è®®ï¼Œç„¶åæ¢å¤asyncå‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›å†³è®®å€¼ã€‚ ä½ å¯ä»¥æŠŠJavaScriptçš„Promiseçœ‹ä½œæ˜¯Javaçš„Futureæˆ–c#çš„ä»»åŠ¡ã€‚</p><blockquote><p>async/await çš„ç›®çš„æ˜¯ç®€åŒ–ä½¿ç”¨Promiseçš„è¡Œä¸ºã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­:</p></blockquote><blockquote><pre>// Just a standard JavaScript functionfunction getNumber1() { return Promise.resolve('374');}// This function does the same as getNumber1async function getNumber2() { return 374;}</pre></blockquote><p>åŒæ ·ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ç­‰ä»·äºè¿”å›å·²è¢«æ‹’ç»çš„promiseçš„å‡½æ•°:</p><blockquote><pre>function f1() { return Promise.reject('Some error');}async function f2() { throw 'Some error';}</pre></blockquote><p>awaitå…³é”®å­—åªèƒ½åœ¨async å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¹¶å…è®¸æ‚¨åŒæ­¥ç­‰å¾…ä¸€ä¸ªPromiseã€‚å¦‚æœæˆ‘ä»¬åœ¨async å‡½æ•°ä¹‹å¤–ä½¿ç”¨Promiseï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä½¿ç”¨thenå›è°ƒï¼š</p><blockquote><pre>async function loadData() { // `rp` is a request-promise function. var promise1 = rp('https://api.example.com/endpoint1'); var promise2 = rp('https://api.example.com/endpoint2'); // Currently, both requests are fired, concurrently and // now we'll have to wait for them to finish var response1 = await promise1; var response2 = await promise2; return response1 + ' ' + response2;}// Since, we're not in an `async function` anymore// we have to use `then`.loadData().then(() =&gt; console.log('Done'));</pre></blockquote><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨â€œasyncå‡½æ•°è¡¨è¾¾å¼â€æ¥å®šä¹‰asyncå‡½æ•°ã€‚ä¸€ä¸ªasyncå‡½æ•°è¡¨è¾¾å¼éå¸¸ç±»ä¼¼ï¼Œå®ƒçš„è¯­æ³•å’Œasyncå‡½æ•°å£°æ˜å·®ä¸å¤šã€‚asyncå‡½æ•°è¡¨è¾¾å¼å’Œasyncå‡½æ•°å£°æ˜ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯å‡½æ•°åï¼Œå®ƒå¯ä»¥åœ¨asyncå‡½æ•°è¡¨è¾¾å¼ä¸­çœç•¥ï¼Œä»¥åˆ›å»ºåŒ¿åå‡½æ•°ã€‚ä¸€ä¸ªasyncå‡½æ•°è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºä¸€ä¸ªIIFE(ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼)æ¥ä½¿ç”¨ï¼Œå½“IIFEè¢«å®šä¹‰å®Œå°±ä¼šè¿è¡Œã€‚ å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><blockquote><pre>var loadData = async function() { // `rp` is a request-promise function. var promise1 = rp('https://api.example.com/endpoint1'); var promise2 = rp('https://api.example.com/endpoint2'); // Currently, both requests are fired, concurrently and // now we'll have to wait for them to finish var response1 = await promise1; var response2 = await promise2; return response1 + ' ' + response2;}</pre></blockquote><p>æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¸­éƒ½æ”¯æŒasync/await:</p><p>å¦‚æœè¿™ä¸ªå…¼å®¹æ€§ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œé‚£ä¹ˆä¹Ÿæœ‰å‡ ä¸ªJSçš„è½¬æ¢å™¨ï¼Œæ¯”å¦‚Babelå’ŒTypeScript</p><p>åœ¨ä¸€å¤©ç»“æŸçš„æ—¶å€™ï¼Œé‡è¦çš„æ˜¯ä¸è¦ç›²ç›®åœ°é€‰æ‹©â€œæœ€æ–°â€çš„æ–¹æ³•æ¥ç¼–å†™å¼‚æ­¥ä»£ç ã€‚ç†è§£å¼‚æ­¥JavaScriptçš„å†…éƒ¨åŸç†æ˜¯å¾ˆé‡è¦çš„ï¼Œäº†è§£å®ƒä¸ºä»€ä¹ˆå¦‚æ­¤é‡è¦ï¼Œå¹¶æ·±å…¥ç†è§£æ‚¨é€‰æ‹©çš„æ–¹æ³•çš„å†…éƒ¨åŸç†ã€‚æ¯ç§æ–¹æ³•éƒ½æœ‰åˆ©æœ‰å¼Šã€‚</p><p>ç¼–å†™é«˜åº¦å¯ç»´æŠ¤çš„ã€å¥å£®çš„å¼‚æ­¥ä»£ç çš„5ä¸ªæŠ€å·§</p><p>1. <strong>å¹²å‡€çš„ä»£ç :</strong> ä½¿ç”¨async/awaitå…è®¸æ‚¨ç¼–å†™æ›´å°‘çš„ä»£ç ã€‚æ¯æ¬¡ä½¿ç”¨async/awaitä½ èƒ½è·³è¿‡ä¸€äº›ä¸å¿…è¦çš„æ­¥éª¤ï¼šå†™.thenï¼Œåˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°æ¥å¤„ç†å“åº”ï¼Œåœ¨è¯¥å›è°ƒä¸­å‘½åå“åº”å˜é‡ï¼Œæ¯”å¦‚ï¼š</p><blockquote><pre>// `rp` is a request-promise function.rp(â€˜https://api.example.com/endpoint1').then(function(data) { // â€¦});</pre></blockquote><p>å¯¹æ¯”ï¼š</p><blockquote><pre>// `rp` is a request-promise function.var response = await rp(â€˜https://api.example.com/endpoint1');</pre></blockquote><p>2. <strong>é”™è¯¯å¤„ç†:</strong> Async/await ä½¿å¾—å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç ç»“æ„æ¥å¤„ç†åŒæ­¥å’Œå¼‚æ­¥é”™è¯¯â€”è‘—åçš„try / catchå£°æ˜ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ç”¨Promiseå¦‚ä½•å®ç°ï¼š</p><blockquote><pre>function loadData() { try { // Catches synchronous errors. getJSON().then(function(response) { var parsed = JSON.parse(response); console.log(parsed); }).catch(function(e) { // Catches asynchronous errors console.log(e); }); } catch(e) { console.log(e); }}</pre></blockquote><p>å¯¹æ¯”ï¼š</p><blockquote><pre>async function loadData() { try { var data = JSON.parse(await getJSON()); console.log(data); } catch(e) { console.log(e); }}</pre></blockquote><p>3. <strong>æ¡ä»¶è¯­å¥ï¼š</strong>ç”¨async/awaitç¼–å†™æ¡ä»¶ä»£ç è¦ç®€å•å¾—å¤šï¼š</p><blockquote><pre>function loadData() { return getJSON() .then(function(response) { if (response.needsAnotherRequest) { return makeAnotherRequest(response) .then(function(anotherResponse) { console.log(anotherResponse) return anotherResponse }) } else { console.log(response) return response } })}</pre></blockquote><p>å¯¹æ¯”:</p><blockquote><pre>async function loadData() { var response = await getJSON(); if (response.needsAnotherRequest) { var anotherResponse = await makeAnotherRequest(response); console.log(anotherResponse) return anotherResponse } else { console.log(response); return response; }}</pre></blockquote><p>4. <strong>å †æ ˆå¸§ï¼š</strong>ä¸async/awaitä¸åŒçš„æ˜¯ï¼Œä»ä¸€ä¸ªPromiseé“¾è¿”å›çš„é”™è¯¯å †æ ˆæ²¡æœ‰ç»™å‡ºé”™è¯¯å‘ç”Ÿçš„ä½ç½®ã€‚å¦‚ä¸‹:</p><blockquote><pre>function loadData() { return callAPromise() .then(callback1) .then(callback2) .then(callback3) .then(() =&gt; { throw new Error("boom"); })}loadData() .catch(function(e) { console.log(err);// Error: boom at callAPromise.then.then.then.then (index.js:8:13)});</pre></blockquote><p>å¯¹æ¯”:</p><blockquote><pre>async function loadData() { await callAPromise1() await callAPromise2() await callAPromise3() await callAPromise4() await callAPromise5() throw new Error("boom");}loadData() .catch(function(e) { console.log(err); // output // Error: boom at loadData (index.js:7:9)});</pre></blockquote><p>5. <strong>è°ƒè¯•ï¼š</strong> å¦‚æœä½ ä½¿ç”¨äº†Promiseï¼Œä½ çŸ¥é“è°ƒè¯•å®ƒä»¬æ˜¯ä¸€åœºå™©æ¢¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ä¸€ä¸ª.thenä¸­è®¾ç½®äº†æ–­ç‚¹ã€‚ç„¶åï¼Œé˜»å¡å¹¶ä½¿ç”¨è¯¸å¦‚ â€œstop-overâ€ä¹‹ç±»çš„è°ƒè¯•å¿«æ·æ–¹å¼ï¼Œè°ƒè¯•å™¨å°†ä¸ä¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ª.thenï¼Œå› ä¸ºå®ƒä»…å¯¹åŒæ­¥ä»£ç æä¾›è¯¥åŠŸèƒ½ã€‚é€šè¿‡async/awaitï¼Œæ‚¨å¯ä»¥é€æ­¥è°ƒè¯•awaitè°ƒç”¨ï¼Œå°±åƒå®ƒä»¬æ˜¯æ­£å¸¸çš„åŒæ­¥å‡½æ•°ä¸€æ ·ã€‚ ä¸ä»…å¯¹äºåº”ç”¨ç¨‹åºæœ¬èº«ï¼Œå¯¹äºé‚£äº›<strong>åº“</strong>æ¥è¯´ï¼Œå†™<strong>å¼‚æ­¥çš„JavaScriptä»£ç ä¹Ÿå¾ˆé‡è¦</strong>ã€‚</p><p>ä¾‹å¦‚, SessionStackåº“è®°å½•Webåº”ç”¨ç¨‹åºï¼ç½‘ç«™ä¸­çš„æ‰€æœ‰å†…å®¹ï¼šæ‰€æœ‰DOMæ›´æ”¹ã€ç”¨æˆ·äº¤äº’ã€JavaScriptå¼‚å¸¸ã€å †æ ˆè·Ÿè¸ªã€å¤±è´¥çš„ç½‘ç»œè¯·æ±‚å’Œè°ƒè¯•æ¶ˆæ¯ã€‚ è¿™ä¸€åˆ‡éƒ½å¿…é¡»å‘ç”Ÿåœ¨ä½ çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè€Œä¸å½±å“ä»»ä½•ç”¨æˆ·ä½“éªŒã€‚æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œå¤§é‡ä¼˜åŒ–ï¼Œå¹¶å°½å¯èƒ½ä½¿å…¶å¼‚æ­¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¢åŠ è¢«äº‹ä»¶å¾ªç¯å¤„ç†çš„äº‹ä»¶çš„æ•°é‡ã€‚ è€Œä¸”ä¸ä»…æ˜¯åº“ï¼å½“æ‚¨åœ¨SessionStackä¸­é‡æ’­ä¸€ä¸ªç”¨æˆ·ä¼šè¯æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨é—®é¢˜å‘ç”Ÿæ—¶åœ¨æ‚¨çš„ç”¨æˆ·çš„æµè§ˆå™¨ä¸­å‘ˆç°æ‰€æœ‰å‘ç”Ÿçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¿…é¡»é‡ç°æ•´ä¸ªçŠ¶æ€ï¼Œå…è®¸æ‚¨åœ¨ä¼šè¯æ—¶é—´è½´ä¸Šæ¥å›è·³è½¬ã€‚ä¸ºäº†ä½¿è¿™æˆä¸ºå¯èƒ½ï¼Œæˆ‘ä»¬å¤§é‡ä½¿ç”¨äº†JavaScriptæä¾›çš„å¼‚æ­¥åŠŸèƒ½ã€‚</p><p>æœ‰ä¸€ä¸ªå…è´¹çš„è®¡åˆ’å¯ä»¥è®©ä½ å¼€å§‹å…è´¹ä½¿ç”¨ã€‚</p><p><img alt=å¼‚æ­¥ä»£ç çš„è¿›åŒ–ä¹‹è·¯ï¼šå›è°ƒï¼ŒPromiseï¼Œasync/await onerror=errorimg.call(this); src=https://p3.pstatp.com/large/470800027f4508cb6e3d></p><p>å…è´£å£°æ˜ï¼šè½¬è½½è‡ªç½‘ç»œ ä¸ç”¨äºå•†ä¸šå®£ä¼  ç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ ä¾µæƒåˆ </p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å¼‚æ­¥','ä»£ç ','è¿›åŒ–'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>