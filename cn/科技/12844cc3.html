<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>C# 基础知识系列- 14 IO篇 文件的操作（2） | 极客快訊</title><meta property="og:title" content="C# 基础知识系列- 14 IO篇 文件的操作（2） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/94228adcc29149689b6b45658262e74b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/12844cc3.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/12844cc3.html><meta property="article:published_time" content="2020-11-14T20:59:46+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:46+08:00"><meta name=Keywords content><meta name=description content="C# 基础知识系列- 14 IO篇 文件的操作（2）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/12844cc3.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>C# 基础知识系列- 14 IO篇 文件的操作（2）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><blockquote><p>前接上一篇内容。</p><p>如果是第一次捧场的小伙伴，为了您阅读的连贯性，烦请扫一眼《C# 基础知识系列- 14 IO篇 文件的操作（1）》。本篇是IO之文件操作的第二篇，介绍一下目录和路径的相关类。下一篇介绍如何通过流来操作文件。</p></blockquote><p><br></p><div class=pgc-img><img alt="C# 基础知识系列- 14 IO篇 文件的操作（2）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/94228adcc29149689b6b45658262e74b><p class=pgc-img-caption></p></div><p><br></p><h2 class="md-end-block md-heading">1.2 Directory和DirectoryInfo</h2><h3 class="md-end-block md-heading">1.2.1 Directory</h3><p><strong>d. 返回目录下的所有子目录：</strong></p><pre><code>public static string[] GetDirectories (string path);public static string[] GetDirectories (string path, string searchPattern);public static string[] GetDirectories (string path, string searchPattern, System.IO.EnumerationOptions enumerationOptions);public static string[] GetDirectories (string path, string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>除了上文提到的 GetDirectories 方法可以直接返回目录下所有子目录以外，还有一组方法也可以<strong>枚举</strong>出当前目录下的子目录：</p><pre><code>public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateDirectories (string path);</code></pre><p>枚举 path 目录下的所有子目录。</p><pre><code>public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateDirectories (string path, string searchPattern);</code></pre><p>searchPattern，搜索名称字符串，可以包含有效文本路径和通配符（* 和 ?）的组合，但不支持正则表达式。</p><pre><code>public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateDirectories (string path, string searchPattern, System.IO.EnumerationOptions enumerationOptions);public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateDirectories (string path, string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>这两个方法放在一起讲，这两个是对上一个方法的增强和补充。其中 EnumerationOptions 是类，可以配置查询的条件；SearchOption 是个枚举，选择只查询当前目录的子目录名称还是继续深入查询子孙目录。</p><p><br></p><div class=pgc-img><img alt="C# 基础知识系列- 14 IO篇 文件的操作（2）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/eb666144-ffaa-4e48-831c-ebca47a078ea><p class=pgc-img-caption></p></div><p><br></p><p><strong>e.查看目录下的所有文件-补充</strong></p><p>与子目录查询相同，Directory也支持这么几组查询方法：</p><pre><code>public static string[] GetFiles (string path);public static string[] GetFiles (string path, string searchPattern);public static string[] GetFiles (string path, string searchPattern, System.IO.EnumerationOptions enumerationOptions);public static string[] GetFiles (string path, string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>从参数上看，可以看出来这是返回子目录下的文件列表。其中使用 searchPattern查询名称，enumerationOptions 作为查询条件，searchOption 作为查询的深度。</p><p>同样，查询文件也可以使用枚举方法：</p><pre><code>public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateFiles (string path);public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateFiles (string path, string searchPattern);public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateFiles (string path, string searchPattern, System.IO.EnumerationOptions enumerationOptions);public static System.Collections.Generic.IEnumerable&lt;string&gt; EnumerateFiles (string path, string searchPattern, System.IO.SearchOption searchOption);</code></pre><p><strong>f.获取当前目录</strong></p><pre><code>public static string GetCurrentDirectory ();</code></pre><p>在程序中调用这个方法可以获取程序执行时的目录，如果是在调试阶段，目录是指程序的主方法所在目录；如果在发布之后，也就是运行阶段，该目录指程序所在目录。</p><p><strong>g.获取上级目录</strong></p><pre><code>public static System.IO.DirectoryInfo GetParent (string path);</code></pre><p>获取传入目录的上级目录信息。</p><p><br></p><div class=pgc-img><img alt="C# 基础知识系列- 14 IO篇 文件的操作（2）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/cbf2a1cc-a032-4592-9f9e-1fa41460ae62><p class=pgc-img-caption></p></div><p><br></p><p><strong>h.目录移动</strong></p><pre><code>public static void Move (string sourceDirName, string destDirName);</code></pre><p>sourceDirName 移动到 destDirName，其中destDirName所代表的目录不能存在。这个方法有个很有意思的特点，它也支持移动文件。也就是说，如果sourceDirNanme指向的是一个文件，那么destDirName也必须是一个文件类型的路径字符串。</p><p><strong>i.删除目录</strong></p><pre><code>public static void Delete (string path);//删除 path所代表的目录，如果目录非空则提示无法删除public static void Delete (string path, bool recursive);// recursive指示是否同时删除子目录和文件</code></pre><p>以上是Directory类的一些常用方法，当然还有更多的内容留待小伙伴一起发掘。传送门==>https://docs.microsoft.com/zh-cn/dotnet/api/system.io.directory?view=netcore-3.1</p><p><br></p><div class=pgc-img><img alt="C# 基础知识系列- 14 IO篇 文件的操作（2）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/bec082d4-c8d2-4ea0-8faf-e78d555fbf55><p class=pgc-img-caption></p></div><p><br></p><h3 class="md-end-block md-heading">1.2.2 DirectoryInfo</h3><p>之前的篇幅我们介绍了Directory的工具类所支持的方法，接下来我们看一下 DirectoryInfo有哪些属性和方法吧。</p><pre><code>public DirectoryInfo (string path);</code></pre><p>初始化的方式很简单，直接传递一个目录的路径字符串，就可以获取一个目录信息类了。</p><p>接下来看看，DirectoryInfo支持的属性：</p><pre><code>public override bool Exists { get; }// 目录是否存在public override string Name { get; }// 目录名称，不是路径public System.IO.DirectoryInfo Parent { get; }//如果有上级目录，则返回上级目录，如果没有则返回 nullpublic System.IO.DirectoryInfo Root { get; }//获取目录的根目录</code></pre><p>我们路过了DirectoryInfo的属性，看到了它一部分特点，那么我们该怎么使用呢?</p><pre><code>public void Create ();</code></pre><p>创建目录信息所代表的目录，如果目录已存在，则不会有任何变化 。如果这个目录的父目录也不存在，则自动创建父目录</p><pre><code>public System.IO.DirectoryInfo CreateSubdirectory (string path);</code></pre><p>创建 pathi指定的子目录。</p><pre><code>public override void Delete ();</code></pre><p>如果当前目录是空目录，调用可直接删除，如果非空则会提示错误。</p><pre><code>public void Delete (bool recursive);</code></pre><p>根据参数 recursive指定是否删除当前目录的子目录。</p><pre><code>public System.IO.DirectoryInfo[] GetDirectories ();public System.IO.DirectoryInfo[] GetDirectories (string searchPattern);public System.IO.DirectoryInfo[] GetDirectories (string searchPattern, System.IO.EnumerationOptions enumerationOptions);public System.IO.DirectoryInfo[] GetDirectories (string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>获取子目录的数组，参数与 Directory 的同名方法一致。</p><pre><code>public System.Collections.Generic.IEnumerable&lt;System.IO.DirectoryInfo&gt; EnumerateDirectories ();public System.Collections.Generic.IEnumerable&lt;System.IO.DirectoryInfo&gt; EnumerateDirectories (string searchPattern);public System.Collections.Generic.IEnumerable&lt;System.IO.DirectoryInfo&gt; EnumerateDirectories (string searchPattern, System.IO.EnumerationOptions enumerationOptions);public System.Collections.Generic.IEnumerable&lt;System.IO.DirectoryInfo&gt; EnumerateDirectories (string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>返回一个子目录信息的可枚举集合。</p><pre><code>public System.IO.FileInfo[] GetFiles ();public System.IO.FileInfo[] GetFiles (string searchPattern);public System.IO.FileInfo[] GetFiles (string searchPattern, System.IO.EnumerationOptions enumerationOptions);public System.IO.FileInfo[] GetFiles (string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>嗯，依旧类似的写法，获取文件信息的数组</p><pre><code>public System.Collections.Generic.IEnumerable&lt;System.IO.FileInfo&gt; EnumerateFiles ();public System.Collections.Generic.IEnumerable&lt;System.IO.FileInfo&gt; EnumerateFiles (string searchPattern);public System.Collections.Generic.IEnumerable&lt;System.IO.FileInfo&gt; EnumerateFiles (string searchPattern, System.IO.EnumerationOptions enumerationOptions);public System.Collections.Generic.IEnumerable&lt;System.IO.FileInfo&gt; EnumerateFiles (string searchPattern, System.IO.SearchOption searchOption);</code></pre><p>返回文件的可枚举集合。</p><pre><code>public void MoveTo (string destDirName);</code></pre><p>把当前目录移动到对应的目录。</p><p><br></p><blockquote><p>依旧未完待续，下一篇将为大家介绍一下 Path类和FileInfo与DirectoryInfo的父类 FileSystemInfo 这两个类的API，然后演示一下如何使用流来读写文件。在文件和目录这块内容里，我故意忽略了权限的介绍，这部分我将会放在进阶篇中介绍。</p><p>API的介绍总是这么枯燥乏味，不过请期待一下，在IO篇完成后，我会演示一下如何做一个简单的文件查找工具。</p><p>简单介绍一下这个工具的内容：它会遍历系统里所有文件的路径信息，然后记录到一个缓存文件中，用户输入一个要查询的文件名时，我们可以通过读取缓存文件确认文件所在目录。</p></blockquote><p><br></p><div class=pgc-img><img alt="C# 基础知识系列- 14 IO篇 文件的操作（2）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/51e06223-b125-48f7-978a-8031f3d6e9b0><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'C#','基础','知识'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>