<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 | 极客快訊</title><meta property="og:title" content="继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/46e600029753e04e1b28"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><meta property="article:published_time" content="2020-11-14T21:03:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:32+08:00"><meta name=Keywords content><meta name=description content="继续榨干一元pos机价值！制作TC35661蓝牙透传转接板"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1474eb45.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>继续榨干一元pos机价值！制作TC35661蓝牙透传转接板</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>本来半年前就做好的东西了，因为各种各样的原因拖到现在才得闲发出来，算是让大伙久等了</p><p>相信大家之前都撸了不少一元pos机吧。</p><p>上面有款蓝牙模块tc35661，因为需要协议栈才能使用，所以困扰了不少人，大家基本的处理方法都是弃之堆灰。</p><p>直到论坛大神@yht7891984 给出了初始化和协议转接的方法，见：</p><p>stm32驱动蓝牙pos机里面的蓝牙模块 tc35661:http://bbs.mydigit.cn/read.php?tid=1682908</p><p>于是这个芯片得以能玩转。然而因为需要一些编程水平，所以大家的选择还是继续让这个模块继续堆灰。</p><p>于是我就有了个想法，做个透传模块，于是有了这个帖子：</p><p>不用拆芯片，不用调程序，直接在pos机板上玩TC35661蓝牙模块|http://bbs.mydigit.cn/read.php?tid=1690088</p><p>但是这样离方便使用，可以零基础玩转还有一些距离，为了达到最终完美，于是就有了本贴</p><p>首先需要找一款有两个串口的MCU，而且要体积小，成本低，于是选择了efm32tg110这个芯片（具体为什么成本低，楼下细说）</p><p>这款芯片的手册截图</p><p>arm cortex m3内核 运行在32mhz（强大运算足够处理大数据量下的协议栈）</p><p>32k flash+4kram</p><p>两个串口（这是最关键的）</p><p>有一路12位dac，两路12位adc（麻雀虽小，五脏俱全），方便和蓝牙搭配做便携式小设备</p><p>体积小，qfn封装</p><p>功耗低</p><p>等等</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e600029753e04e1b28></p><p>原理图</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027a02693168c5></p><p>pcb</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002974f8dd41d4f></p><p>pcb的面积很小，就是一个正常蓝牙模块大小+天线+排针占用的面积</p><p>30mm*16mm</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e90000a5a4fcc9306f></p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e400029fe700d70086></p><p>没有用上的引脚全部引出，其中包括完整的dac和adc，这样的好处是，以后如果有余力开发，可以直接用这个最小蓝牙板做一个无线的测量仪器，或者无线小控制器</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e5000279fda5a70b1a></p><p>打好的pcb</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027a072ba068e6></p><p>焊接完成的模块正面</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e800024213edd21dea></p><p>焊接完成的模块背面</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002975c59f4181b></p><p>上电以后，可以在手机或者带蓝牙的电脑上搜搜到蓝牙模块 默认名称是 POSYSTORAGE_TC35661</p><p>设备地址码是唯一的，防止冲突（使用了单片机的唯一uid）</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000002ef15129e2b></p><p>连接成功，正常通讯中</p><p>电脑通过串口发送mydigit</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a5a789584e54></p><p>手机通过蓝牙发送2545889167 posystorage</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027a0870392914></p><p>正常联机的各种状态指示信息</p><p>第一行提示当前波特率</p><p>第二行提示已经初始化成功啦</p><p>第三行提示蓝牙已连接</p><p>第四号提示蓝牙已断开</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e70002551b431a33c4></p><p>板子正面有个LED</p><p>在初始化过程中快速闪烁。当初始化成功后，转为慢闪</p><p>当连接后，变成常亮。断开连接则为慢闪</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027a4f1320cd66></p><p>板子有6个排针孔。</p><p>vcc和gnd是电源，不多说</p><p>rx tx为透传串口</p><p>swd和sck为板载mcu调试和程序下载接口。也可做普通io使用</p><p>BT指令的详细解释</p><p>为了方便使用，实现一键零基础操作，我就搞了个BT指令集（参考市面上的某些无线模块的AT指令集）。这样一些简单的配置，比如模块改名或者更改波特率什么的就不需要程序编译程序，直接BT指令操作就行。</p><p>BT指令的使用方法：首先连接串口，给蓝牙模块上电，等待初始化完成（指示灯由快闪变为慢闪为初始化成功，或者串口提示初始化成功）</p><p>不用连接蓝牙（即在非连接状态下）</p><p>输入BT和BT+xxx指令来实现操作。</p><p>注意，所有的指令均不需要换行，不需要加回车</p><p>比如说，输入BT</p><p>回复BT OK！</p><p>表示串口正常，指令正确，工作正常</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e6000297f4fba04989></p><p>输入BT_ABOUT 显示关于信息，版本信息，设备mac，固件版本，作者信息</p><p>1.0版本的消息</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea00000374348ea46c></p><p>1.1版本的消息</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a64b639c1896></p><p>输入BT_LIST</p><p>将罗列 BT指令集支持的所有指令</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f5db93ef23></p><p>BT_MSG_ON打开提示信息</p><p>如果打开了提示信息，会提示初始化状态，是否联机得到信息</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000297f209478687></p><p>BT_MSG_OFF关闭提示信息</p><p>所有提示信息均不显示</p><p>这样的好处是，如果是外接MCU使用，就可以真正透传消息，而不受提示信息的干扰</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f348dd9527></p><p>BT_RES_FAC 恢复原始出厂状态，没啥好讲的</p><p>蓝牙名称恢复TC35661_POSYSTORAGE</p><p>波特率恢复115200</p><p>默认消息提示打开</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f7b66a0bdb></p><p>BT_HELP 帮助信息，提示有些BT指令怎么使用，比如说，怎么设置串口波特率和结束符，奇偶校验什么的</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a64fd19683ce></p><p>BT_RENAME 更改蓝牙的名称。更改后下次上电生效</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027aa483ef4eca></p><p>BT_UART_BPS 更改波特率。更改后下次上电生效</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027aa57fa04252></p><p>如果输入了错误指令，会这样提示。比如说输了小写什么的</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e7000255a7b07a9ebc></p><p>开始讲述制作心路历程</p><p>之前楼上不是说了，一直在苦苦寻觅 “两个串口，而且要体积小，成本低的MCU”</p><p>找了一久，突然一日在某论坛商家看见一款拆机的板子，价格便宜（为了避免打广告嫌疑，就不说商家明和价格了）</p><p>卖家的图</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000003e41c2fb346></p><p>这个板子，上面有一个似MCU的芯片，没有主丝印，数了下24脚，封装应该是QFN24</p><p>然后就开始脑洞了~</p><p>以下几个条件判断出了大概80%的概率是efm32的MCU</p><p>如图</p><p>1、封装是QFN24，能对应上</p><p>2、芯片侧面所有脚都是io或者电源，没有gnd脚，说明gnd只有中间大焊盘有</p><p>3、电源引脚能对上三，其中两个104的电容颜色是一样的，另外一个是105，不是一个材质（颜色有微差异）</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a6d3059353aa></p><p>这样确定下来可能有三款芯片</p><p>efm32tg110</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027b1993a9226a></p><p>efm32zg110</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027b1e6de4dd27></p><p>和efm32hg110</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027b1879cb9a91></p><p>三款是属于不同的产品系列线，但是引脚和封装都是一样的，看外观无法辨别。</p><p>犹豫许久，决定买来碰碰运气</p><p>因为便宜嘛，买少了邮费不划算，所以买了一小包</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e60002986c8f9d87a6></p><p>体积很小的pos机（又是pos机，摔~~~~~）</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000003e1eb3a9dc8></p><p>拆开，第一个拆的有点失败哈，太暴力了，不过主要元件没事</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0ee85aaba63></p><p>各部分拆开对照图</p><p>22合一友情上镜~~</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0ef26665a77></p><p>后面的电池基本没电了</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e40002a0f164763e11></p><p>板子正面</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e700025634e551dde8></p><p>板子背面</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0f212918ba2></p><p>小6脚芯片特写。到现在我也不知道这是啥功能</p><p>反正不是猪脚，不重要，不管了</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002431e8682035c></p><p>右上角有个双运放</p><p>注意到板子是4年前的老东西了，怪不得电池都没电了</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000298792565de94></p><p>继续排除走线，发现和efm32吻合度99%，所有电源脚都能对上，切引出来调试接口，就是图上上锡的那两个焊盘</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256380ca246e1></p><p>掏出自制jlink（做个小巧漂亮的jlink调试器|http://bbs.mydigit.cn/read.php?tid=2037182）</p><p>按手册接线开始测试</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256af2e3d0334></p><p>配套好simplicity和jlink软件</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027b938b87ae04></p><p>一联机，果然大惊喜，啊hhhhhh</p><p>赚翻了赚翻了</p><p>果然赌对了</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000298e7d2d7c332></p><p>这样看不出来是吧，我圈圈重点</p><p>看到没 energy micro</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256b136812ed0></p><p>energy micro被silion lab收购</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256ae0cd5aef9></p><p>这尼玛不就是efm32 哈哈哈哈哈哈</p><p>图上说芯片被锁住了，那就尝试解锁 使用unnlock efm32gxxxx指令</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a74b37ba1da7></p><p>解锁成功 so easy~~</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002439dc8d7e72b></p><p>再次联机</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002439e35023a55></p><p>看到没有 arm cortex m3内核，这样果断确定是efm32tg110</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e40002a178f396e8f0></p><p>因为只有他是cortex m3内核，另外两个是cortex m0内核</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a75087dcb0bb></p><p>继续来确定下芯片容量</p><p>使用jflash</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea0000046c79a43e08></p><p>先选该系列最大容量，尝试能不能读写成功</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46ea0000046b0fb85439></p><p>显然是可以的</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256b416a7438d></p><p>没问题~~</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a752a9ed621e></p><p>最终确定型号EFM32TG110F32</p><p>得到整个“赌”芯片中最好的结局，三个系列中配置最好的mcu，通型号中储存空间最大的，哈哈哈~</p><p>继续玩，焊接个led上去，尝试成功点灯</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000298eaf4efdd30></p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea0000046ee63925c2></p><p>吧外壳都拆掉，元件进行分拣，方便保存</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e8000243a31b966d5b></p><p>这些是不要的垃圾</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea00000470d452c513></p><p>先说说怎么靠使用Simplicity Studio 来进行快速的，简单的，图形化傻瓜配置的点灯实验，以方便快速测试</p><p>首先下载安装并打开Simplicity Studio，新建工程</p><p>选择本贴的猪脚efm32tg110f32</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c0d5ab8374a></p><p>选择Simplicity configurator program，图形化配置工程</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e8000244193aa5dfa2></p><p>名字随便写</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000299492369c145></p><p>选择led引脚</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e80002441a5d9d08a3></p><p>配置为推挽</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e564d42a51></p><p>main函数很简单</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7ca3fdb9984></p><p>很简单，是不是</p><p>复制代码</p><ol class=list-paddingleft-2><li><p>#include "em_device.h"</p></li><li><p>#include "em_chip.h"</p></li><li><li><li><li><li><p>int main(void)</p></li><li><p>{</p></li><li><p>int i;</p></li><li><p>CHIP_Init();</p></li><li><p>enter_DefaultMode_from_RESET();</p></li><li><p>while (1)</p></li><li><p>{</p></li><li><p>for(i = 0; i &lt; 200000; i++);//做延时作用</p></li><li><p>GPIO_PinOutToggle(gpioPortC, 15);//翻转LED</p></li><li><p>}</p></li><li><p>}</p></li><li><li><li><li></li></li></li></li></li></li></li></li></ol><p>然后，编译下载，就可以看见led开始卖力的闪烁了</p><p>好了，说是制作心路历程，现在说的有点跑题了，拉回来哈</p><p>拿出之前玩efm32tg剩下的转接板。反正引脚都一样，直接往上怼呗</p><p>这里吐槽下垃圾板厂的v割工，都吧丝印割没了你知道么。精度这么差，哎~</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7cfce7f283c></p><p>拆下芯片</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002994b2ee8e2fe></p><p>焊接过程略过不表</p><p>qfn总体不怎么好焊接，需要耐心和细心</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e73335de4a></p><p>背面全是容阻元件。这MCU电源脚奇多</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e80002441c61360853></p><p>日常成功点灯</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c117cf35ee3></p><p>这里放下这个小核心板的原理图和pcb截图</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002994c24d111d7></p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e500027c14041cd371></p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e60002994e763c1a33></p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a7d19afbef8d></p><p>背面用丝印画了个mini小壁虎，结果实物出来，这都啥玩意啊？四不像？</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000004e817c74b60></p><p>继续哈，拆完芯片的板子不能浪费</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e957a96b3f></p><p>来跑下走线，方便在板玩耍</p><p>跑走线第一步，日常先上锉刀嘛</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e800024420902a35c0></p><p>最终标注出所有io的走线结果，这里还需要感谢坛友 @shi988</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002442182e1c825></p><p>好了，一个破板子研究了半天，终于要步入正题了</p><p>开始研究蓝牙透传</p><p>初期测试是这样的</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7d4efc66723></p><p>调通透传程序以后</p><p>画了1.0版本的转接板</p><p>打样归来如图</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000005424e415ffc></p><p>开始焊接蓝牙转接板</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e40002a2238071d23a></p><p>拆下芯片+转接板背面</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a8167ef41b1b></p><p>tc35661模块来自某pos板子</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea0000054040fc63de></p><p>焊接过程略过不表</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea00000541bc901c3a></p><p>焊完才发现，疏忽大意阴沟里面翻船了</p><p>引脚接错了，只能靠飞线补救了</p><p></p><p>好吧，修改好再打一版，哎</p><p>v1.1来了</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a818924098b8></p><p>这次就不用飞线了嘛，舒服</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e800024465cff257be></p><p>可以用直排针这样焊，能比弯排针显著减小体积，不过也牺牲了些许牢固程度</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e8000244671a02ac5e></p><p>因为板子位置有限。部分元件标注了参数值</p><p>剩下没标的，都是104电容 100nF</p><p>图中红圈圈中</p><p>板子上的元件，除了106电容，基本都可以从原芯片的小板子上拆到</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46ea00000545d0d89d72></p><p>为了保护元件，建议套个热缩管</p><p>左边的板子是拆完有用元件后的样子~</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a81949dcd9f9></p><p>最后来个大合影</p><p><img alt=继续榨干一元pos机价值！制作TC35661蓝牙透传转接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c548a68ae28></p><p>源代码，固件和原理图需至原帖中获取：http://bbs.mydigit.cn/read.php?tid=2281216</p><p>谢谢观看！</p><p>浏览更多精彩内容请登录数码之家网站</p><p>技术交流请联系原作者</p><p>作者：2545889167</p><p>本文来源：数码之家</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'继续','榨干','pos'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>