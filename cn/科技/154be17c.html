<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º | æå®¢å¿«è¨Š</title><meta property="og:title" content="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/649441a963e5442397dd58994f8d3f31"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/154be17c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/154be17c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/154be17c.html><meta property="article:published_time" content="2020-11-14T21:01:37+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:37+08:00"><meta name=Keywords content><meta name=description content="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/154be17c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p class=ql-align-justify>æœ¬æ–‡å°†ä¼šå¯¹å¸¸ç”¨çš„å‡ ä¸ªå‹ç¼©ç®—æ³•çš„æ€§èƒ½ä½œä¸€ä¸‹æ¯”è¾ƒã€‚ç»“æœè¡¨æ˜ï¼ŒæŸäº›ç®—æ³•åœ¨æç«¯è‹›åˆ»çš„CPUé™åˆ¶ä¸‹ä»èƒ½æ­£å¸¸å·¥ä½œã€‚</p><p class=ql-align-justify><strong>æ–‡ä¸­è¿›è¡Œæ¯”è¾ƒçš„ç®—æœ‰ï¼š</strong></p><ul><li class=ql-align-justify>JDK GZIP â€”â€”è¿™æ˜¯ä¸€ä¸ªå‹ç¼©æ¯”é«˜çš„æ…¢é€Ÿç®—æ³•ï¼Œå‹ç¼©åçš„æ•°æ®é€‚åˆé•¿æœŸä½¿ç”¨ã€‚JDKä¸­çš„java.util.zip.GZIPInputStream / GZIPOutputStreamä¾¿æ˜¯è¿™ä¸ªç®—æ³•çš„å®ç°ã€‚</li><li class=ql-align-justify>JDK deflate â€”â€”è¿™æ˜¯JDKä¸­çš„åˆä¸€ä¸ªç®—æ³•ï¼ˆzipæ–‡ä»¶ç”¨çš„å°±æ˜¯è¿™ä¸€ç®—æ³•ï¼‰ã€‚å®ƒä¸gzipçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ å¯ä»¥æŒ‡å®šç®—æ³•çš„å‹ç¼©çº§åˆ«ï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨å‹ç¼©æ—¶é—´å’Œè¾“å‡ºæ–‡ä»¶å¤§å°ä¸Šè¿›è¡Œå¹³è¡¡ã€‚å¯é€‰çš„çº§åˆ«æœ‰0ï¼ˆä¸å‹ç¼©ï¼‰ï¼Œä»¥åŠ1(å¿«é€Ÿå‹ç¼©)åˆ°9ï¼ˆæ…¢é€Ÿå‹ç¼©ï¼‰ã€‚å®ƒçš„å®ç°æ˜¯java.util.zip.DeflaterOutputStream / InflaterInputStreamã€‚</li><li class=ql-align-justify>LZ4å‹ç¼©ç®—æ³•çš„Javaå®ç°â€”â€”è¿™æ˜¯æœ¬æ–‡ä»‹ç»çš„ç®—æ³•ä¸­å‹ç¼©é€Ÿåº¦æœ€å¿«çš„ä¸€ä¸ªï¼Œä¸æœ€å¿«é€Ÿçš„deflateç›¸æ¯”ï¼Œå®ƒçš„å‹ç¼©çš„ç»“æœè¦ç•¥å¾®å·®ä¸€ç‚¹ã€‚å¦‚æœæƒ³ææ¸…æ¥šå®ƒçš„å·¥ä½œåŸç†ï¼Œæˆ‘å»ºè®®ä½ è¯»ä¸€ä¸‹è¿™ç¯‡æ–‡ç« ã€‚å®ƒæ˜¯åŸºäºå‹å¥½çš„Apache 2.0è®¸å¯è¯å‘å¸ƒçš„ã€‚</li><li class=ql-align-justify>Snappyâ€”â€”è¿™æ˜¯Googleå¼€å‘çš„ä¸€ä¸ªéå¸¸æµè¡Œçš„å‹ç¼©ç®—æ³•ï¼Œå®ƒæ—¨åœ¨æä¾›é€Ÿåº¦ä¸å‹ç¼©æ¯”éƒ½ç›¸å¯¹è¾ƒä¼˜çš„å‹ç¼©ç®—æ³•ã€‚æˆ‘ç”¨æ¥æµ‹è¯•çš„æ˜¯è¿™ä¸ªå®ç°ã€‚å®ƒä¹Ÿæ˜¯éµå¾ªApache 2.0è®¸å¯è¯å‘å¸ƒçš„ã€‚</li></ul><p class=ql-align-justify><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>å‹ç¼©æµ‹è¯•</strong></p><p class=ql-align-justify>è¦æ‰¾å‡ºå“ªäº›æ—¢é€‚åˆè¿›è¡Œæ•°æ®å‹ç¼©æµ‹è¯•åˆå­˜åœ¨äºå¤§å¤šæ•°Javaå¼€å‘äººå‘˜çš„ç”µè„‘ä¸­ï¼ˆæˆ‘å¯ä¸å¸Œæœ›ä½ ä¸ºäº†è¿è¡Œè¿™ä¸ªæµ‹è¯•è¿˜å¾—ä¸ªå‡ ç™¾å…†çš„æ–‡ä»¶ï¼‰çš„æ–‡ä»¶ä¹Ÿç€å®è´¹äº†æˆ‘ä¸å°‘å·¥å¤«ã€‚æœ€åæˆ‘æƒ³åˆ°ï¼Œå¤§å¤šæ•°äººåº”è¯¥éƒ½ä¼šåœ¨æœ¬åœ°å®‰è£…æœ‰JDKçš„æ–‡æ¡£ã€‚å› æ­¤æˆ‘å†³å®šå°†javadocçš„ç›®å½•æ•´ä¸ªåˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶â€”â€”æ‹¼æ¥æ‰€æœ‰æ–‡ä»¶ã€‚è¿™ä¸ªé€šè¿‡tarå‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“å®Œæˆï¼Œä½†å¹¶éæ‰€æœ‰äººéƒ½æ˜¯Linuxç”¨æˆ·ï¼Œå› æ­¤æˆ‘å†™äº†ä¸ªç¨‹åºæ¥ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ï¼š</p><blockquote>public class InputGenerator { private static final String JAVADOC_PATH = "your_path_to_JDK/docs"; public static final File FILE_PATH = new File( "your_output_file_path" ); static { try { if ( !FILE_PATH.exists() ) makeJavadocFile(); } catch (IOException e) { e.printStackTrace(); } } private static void makeJavadocFile() throws IOException { try( OutputStream os = new BufferedOutputStream( new FileOutputStream( FILE_PATH ), 65536 ) ) { appendDir(os, new File( JAVADOC_PATH )); } System.out.println( "Javadoc file created" ); } private static void appendDir( final OutputStream os, final File root ) throws IOException { for ( File f : root.listFiles() ) { if ( f.isDirectory() ) appendDir( os, f ); else Files.copy(f.toPath(), os); } }}</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify>åœ¨æˆ‘çš„æœºå™¨ä¸Šæ•´ä¸ªæ–‡ä»¶çš„å¤§å°æ˜¯354,509,602å­—èŠ‚ï¼ˆ338MBï¼‰ã€‚</p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>æµ‹è¯•</strong></p><p class=ql-align-justify>ä¸€å¼€å§‹æˆ‘æƒ³æŠŠæ•´ä¸ªæ–‡ä»¶è¯»è¿›å†…å­˜é‡Œï¼Œç„¶åå†è¿›è¡Œå‹ç¼©ã€‚ä¸è¿‡ç»“æœè¡¨æ˜è¿™ä¹ˆåšçš„è¯å³ä¾¿æ˜¯4Gçš„æœºå™¨ä¸Šä¹Ÿå¾ˆå®¹æ˜“æŠŠå †å†…å­˜ç©ºé—´è€—å°½ã€‚</p><p class=ql-align-justify>äºæ˜¯æˆ‘å†³å®šä½¿ç”¨æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç¼“å­˜ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨çš„æµ‹è¯•æ¡†æ¶æ˜¯JMHã€‚è¿™ä¸ªæ–‡ä»¶åœ¨é¢„çƒ­é˜¶æ®µä¼šè¢«æ“ä½œç³»ç»ŸåŠ è½½åˆ°ç¼“å­˜ä¸­ï¼ˆåœ¨é¢„çƒ­é˜¶æ®µä¼šå…ˆå‹ç¼©ä¸¤æ¬¡ï¼‰ã€‚æˆ‘ä¼šå°†å†…å®¹å‹ç¼©åˆ°ByteArrayOutputStreamæµä¸­ï¼ˆæˆ‘çŸ¥é“è¿™å¹¶ä¸æ˜¯æœ€å¿«çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºå„ä¸ªæµ‹è¯•è€Œè¨€å®ƒçš„æ€§èƒ½æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œå¹¶ä¸”ä¸éœ€è¦èŠ±è´¹æ—¶é—´å°†å‹ç¼©åçš„æ•°æ®å†™å…¥åˆ°ç£ç›˜é‡Œï¼‰ï¼Œå› æ­¤è¿˜éœ€è¦ä¸€äº›å†…å­˜ç©ºé—´æ¥å­˜å‚¨è¿™ä¸ªè¾“å‡ºç»“æœã€‚</p><p class=ql-align-justify>ä¸‹é¢æ˜¯æµ‹è¯•ç±»çš„åŸºç±»ã€‚æ‰€æœ‰çš„æµ‹è¯•ä¸åŒçš„åœ°æ–¹éƒ½åªåœ¨äºå‹ç¼©çš„è¾“å‡ºæµçš„å®ç°ä¸åŒï¼Œå› æ­¤å¯ä»¥å¤ç”¨è¿™ä¸ªæµ‹è¯•åŸºç±»ï¼Œåªéœ€ä»StreamFactoryå®ç°ä¸­ç”Ÿæˆä¸€ä¸ªæµå°±å¥½äº†ï¼š</p><blockquote>@OutputTimeUnit(TimeUnit.MILLISECONDS)@State(Scope.Thread)@Fork(1)@Warmup(iterations = 2)@Measurement(iterations = 3)@BenchmarkMode(Mode.SingleShotTime)public class TestParent { protected Path m_inputFile; @Setup public void setup() { m_inputFile = InputGenerator.FILE_PATH.toPath(); } interface StreamFactory { public OutputStream getStream( final OutputStream underlyingStream ) throws IOException; } public int baseBenchmark( final StreamFactory factory ) throws IOException { try ( ByteArrayOutputStream bos = new ByteArrayOutputStream((int) m_inputFile.toFile().length()); OutputStream os = factory.getStream( bos ) ) { Files.copy(m_inputFile, os); os.flush(); return bos.size(); } }}</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>è¿™äº›æµ‹è¯•ç”¨ä¾‹éƒ½éå¸¸ç›¸ä¼¼ï¼ˆåœ¨æ–‡æœ«æœ‰å®ƒä»¬çš„æºä»£ç ï¼‰ï¼Œè¿™é‡Œåªåˆ—å‡ºäº†å…¶ä¸­çš„ä¸€ä¸ªä¾‹å­â€”â€”JDK deflateçš„æµ‹è¯•ç±»ï¼›</p><blockquote>public class JdkDeflateTest extends TestParent { @Param({"1", "2", "3", "4", "5", "6", "7", "8", "9"}) public int m_lvl; @Benchmark public int deflate() throws IOException { return baseBenchmark(new StreamFactory() { @Override public OutputStream getStream(OutputStream underlyingStream) throws IOException { final Deflater deflater = new Deflater( m_lvl, true ); return new DeflaterOutputStream( underlyingStream, deflater, 512 ); } }); }}</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>æµ‹è¯•ç»“æœ</strong></p><p class=ql-align-justify><strong>è¾“å‡ºæ–‡ä»¶çš„å¤§å°</strong></p><p class=ql-align-justify>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹è¾“å‡ºæ–‡ä»¶çš„å¤§å°ï¼š</p><p class=ql-align-justify>||å®ç°||æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰|| ||GZIP||64ï¼Œ200ï¼Œ201|| ||Snappy (normal)||138,250,196|| ||Snappy (framed)|| 101,470,113|| ||LZ4 (fast)|| 98,316,501|| ||LZ4 (high) ||82,076,909|| ||Deflate (lvl=1) ||78,369,711|| ||Deflate (lvl=2) ||75,261,711|| ||Deflate (lvl=3) ||73,240,781|| ||Deflate (lvl=4) ||68,090,059|| ||Deflate (lvl=5) ||65,699,810|| ||Deflate (lvl=6) ||64,200,191|| ||Deflate (lvl=7) ||64,013,638|| ||Deflate (lvl=8) ||63,845,758|| ||Deflate (lvl=9) ||63,839,200||</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/649441a963e5442397dd58994f8d3f31><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>å¯ä»¥çœ‹å‡ºæ–‡ä»¶çš„å¤§å°ç›¸å·®æ‚¬æ®Šï¼ˆä»60Mbåˆ°131Mbï¼‰ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸‹ä¸åŒçš„å‹ç¼©æ–¹æ³•éœ€è¦çš„æ—¶é—´æ˜¯å¤šå°‘ã€‚</p><p class=ql-align-justify>å‹ç¼©æ—¶é—´</p><p class=ql-align-justify>||å®ç°||å‹ç¼©æ—¶é—´(ms)|| ||Snappy.framedOutput ||2264.700|| ||Snappy.normalOutput ||2201.120|| ||Lz4.testFastNative ||1056.326|| ||Lz4.testFastUnsafe ||1346.835|| ||Lz4.testFastSafe ||1917.929|| ||Lz4.testHighNative ||7489.958|| ||Lz4.testHighUnsafe ||10306.973|| ||Lz4.testHighSafe ||14413.622|| ||deflate (lvl=1) ||4522.644|| ||deflate (lvl=2) ||4726.477|| ||deflate (lvl=3) ||5081.934|| ||deflate (lvl=4) ||6739.450|| ||deflate (lvl=5) ||7896.572|| ||deflate (lvl=6) ||9783.701|| ||deflate (lvl=7) ||10731.761|| ||deflate (lvl=8) ||14760.361|| ||deflate (lvl=9) ||14878.364|| ||GZIP ||10351.887||</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8951d6a3d6f94bbbbaea1cf0f8fb551b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>æˆ‘ä»¬å†å°†å‹ç¼©æ—¶é—´å’Œæ–‡ä»¶å¤§å°åˆå¹¶åˆ°ä¸€ä¸ªè¡¨ä¸­æ¥ç»Ÿè®¡ä¸‹ç®—æ³•çš„ååé‡ï¼Œçœ‹çœ‹èƒ½å¾—å‡ºä»€ä¹ˆç»“è®ºã€‚</p><p class=ql-align-justify>ååé‡åŠæ•ˆç‡</p><p class=ql-align-justify>||å®ç°||æ—¶é—´ï¼ˆmsï¼‰||æœªå‹ç¼©æ–‡ä»¶å¤§å°||ååé‡ï¼ˆMb/ç§’ï¼‰||å‹ç¼©åæ–‡ä»¶å¤§å°(Mb)|| ||Snappy.normalOutput ||2201.12 ||338 ||153.5581885586 ||131.8454742432|| ||Snappy.framedOutput ||2264.7 ||338 ||149.2471409017 ||96.7693328857|| ||Lz4.testFastNative ||1056.326 ||338 ||319.9769768045 ||93.7557220459|| ||Lz4.testFastSafe ||1917.929 ||338 ||176.2317583185 ||93.7557220459|| ||Lz4.testFastUnsafe ||1346.835 ||338 ||250.9587291688 ||93.7557220459|| ||Lz4.testHighNative ||7489.958 ||338 ||45.1270888301 ||78.2680511475|| ||Lz4.testHighSafe ||14413.622 ||338 ||23.4500391366 ||78.2680511475|| ||Lz4.testHighUnsafe ||10306.973 ||338 ||32.7933332124 ||78.2680511475|| ||deflate (lvl=1) ||4522.644 ||338 ||74.7350443679 ||74.7394561768|| ||deflate (lvl=2) ||4726.477 ||338 ||71.5120374012 ||71.7735290527|| ||deflate (lvl=3) ||5081.934 ||338 ||66.5101120951 ||69.8471069336|| ||deflate (lvl=4) ||6739.45 ||338 ||50.1524605124 ||64.9452209473|| ||deflate (lvl=5) ||7896.572 ||338 ||42.8033835442 ||62.6564025879|| ||deflate (lvl=6) ||9783.701 ||338 ||34.5472536415 ||61.2258911133|| ||deflate (lvl=7) ||10731.761 ||338 ||31.4952969974 ||61.0446929932|| ||deflate (lvl=8) ||14760.361 ||338 ||22.8991689295 ||60.8825683594|| ||deflate (lvl=9) ||14878.364 ||338 ||22.7175514727 ||60.8730316162|| ||GZIP ||10351.887 ||338 ||32.651051929 ||61.2258911133||</p><div class=pgc-img><img alt="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ef5d54ae5b5f4ce9b6649e2783c8cbd3><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­å¤§å¤šæ•°å®ç°çš„æ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼šåœ¨Xeon E5-2650å¤„ç†å™¨ä¸Šï¼Œé«˜çº§åˆ«çš„deflateå¤§çº¦æ˜¯23ï¼­b/ç§’ï¼Œå³ä½¿æ˜¯GZIPä¹Ÿå°±åªæœ‰33Mb/ç§’ï¼Œè¿™å¤§æ¦‚å¾ˆéš¾ä»¤äººæ»¡æ„ã€‚åŒæ—¶ï¼Œæœ€å¿«çš„defalteç®—æ³•å¤§æ¦‚èƒ½åˆ°75Mb/ç§’,Snappyæ˜¯150Mb/ç§’ï¼Œè€ŒLZ4(å¿«é€Ÿï¼ŒJNIå®ç°)èƒ½è¾¾åˆ°éš¾ä»¥ç½®ä¿¡çš„320Mb/ç§’!</p><p class=ql-align-justify>ä»è¡¨ä¸­å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºç›®å‰æœ‰ä¸¤ç§å®ç°æ¯”è¾ƒå¤„äºåŠ£åŠ¿ï¼šSnappyè¦æ…¢äºLZ4(å¿«é€Ÿå‹ç¼©)ï¼Œå¹¶ä¸”å‹ç¼©åçš„æ–‡ä»¶è¦æ›´å¤§ã€‚ç›¸åï¼ŒLZ4ï¼ˆé«˜å‹ç¼©æ¯”ï¼‰è¦æ…¢äºçº§åˆ«1åˆ°4çš„deflateï¼Œè€Œè¾“å‡ºæ–‡ä»¶çš„å¤§å°å³ä¾¿å’Œçº§åˆ«1çš„deflateç›¸æ¯”ä¹Ÿè¦å¤§ä¸Šä¸å°‘ã€‚</p><p class=ql-align-justify>å› æ­¤å¦‚æœéœ€è¦è¿›è¡Œâ€œå®æ—¶å‹ç¼©â€çš„è¯æˆ‘è‚¯å®šä¼šåœ¨LZ4(å¿«é€Ÿ)çš„JNIå®ç°æˆ–è€…æ˜¯çº§åˆ«1çš„deflateä¸­è¿›è¡Œé€‰æ‹©ã€‚å½“ç„¶å¦‚æœä½ çš„å…¬å¸ä¸å…è®¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ä½ ä¹Ÿåªèƒ½ä½¿ç”¨deflateäº†ã€‚ä½ è¿˜è¦ç»¼åˆè€ƒè™‘æœ‰å¤šå°‘ç©ºé—²çš„CPUèµ„æºä»¥åŠå‹ç¼©åçš„æ•°æ®è¦å­˜å‚¨åˆ°å“ªé‡Œã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ è¦å°†å‹ç¼©åçš„æ•°æ®å­˜å‚¨åˆ°HDDçš„è¯ï¼Œé‚£ä¹ˆä¸Šè¿°100Mb/ç§’çš„æ€§èƒ½å¯¹ä½ è€Œè¨€æ˜¯æ¯«æ— å¸®åŠ©çš„ï¼ˆå‡è®¾ä½ çš„æ–‡ä»¶è¶³å¤Ÿå¤§çš„è¯ï¼‰â€”â€”HDDçš„é€Ÿåº¦ä¼šæˆä¸ºç“¶é¢ˆã€‚åŒæ ·çš„æ–‡ä»¶å¦‚æœè¾“å‡ºåˆ°SSDç¡¬ç›˜çš„è¯â€”â€”å³ä¾¿æ˜¯LZ4åœ¨å®ƒé¢å‰ä¹Ÿæ˜¾å¾—å¤ªæ…¢äº†ã€‚å¦‚æœä½ æ˜¯è¦å…ˆå‹ç¼©æ•°æ®å†å‘é€åˆ°ç½‘ç»œä¸Šçš„è¯ï¼Œæœ€å¥½é€‰æ‹©LZ4ï¼Œå› ä¸ºdeflate75Mb/ç§’çš„å‹ç¼©æ€§èƒ½è·Ÿç½‘ç»œ125Mb/ç§’çš„ååé‡ç›¸æ¯”çœŸæ˜¯å°å·«è§å¤§å·«äº†ï¼ˆå½“ç„¶ï¼Œæˆ‘çŸ¥é“ç½‘ç»œæµé‡è¿˜æœ‰åŒ…å¤´ï¼Œä¸è¿‡å³ä½¿ç®—ä¸Šäº†å®ƒè¿™ä¸ªå·®è·ä¹Ÿæ˜¯ç›¸å½“å¯è§‚çš„ï¼‰ã€‚</p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>æ€»ç»“</strong></p><p class=ql-align-justify>å¦‚æœä½ è®¤ä¸ºæ•°æ®å‹ç¼©éå¸¸æ…¢çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ä¸‹LZ4ï¼ˆå¿«é€Ÿï¼‰å®ç°ï¼Œå®ƒè¿›è¡Œæ–‡æœ¬å‹ç¼©èƒ½è¾¾åˆ°å¤§çº¦320Mb/ç§’çš„é€Ÿåº¦â€”â€”è¿™æ ·çš„å‹ç¼©é€Ÿåº¦å¯¹å¤§å¤šæ•°åº”ç”¨è€Œè¨€åº”è¯¥éƒ½æ„ŸçŸ¥ä¸åˆ°ã€‚</p><p class=ql-align-justify>å¦‚æœä½ å—é™äºæ— æ³•ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æˆ–è€…åªå¸Œæœ›æœ‰ä¸€ä¸ªç¨å¾®å¥½ä¸€ç‚¹çš„å‹ç¼©æ–¹æ¡ˆçš„è¯ï¼Œå¯ä»¥è€ƒè™‘ä¸‹ä½¿ç”¨JDK deflate(lvl=1)è¿›è¡Œç¼–è§£ç â€”â€”åŒæ ·çš„æ–‡ä»¶å®ƒçš„å‹ç¼©é€Ÿåº¦èƒ½è¾¾åˆ°75Mb/ç§’ã€‚</p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>æƒ³è¦å‹ç¼©æµ‹è¯•æºä»£ç çš„å¯ä»¥ç§ä¿¡æˆ‘è·å–</strong></p><h1 class=ql-align-justify><strong>ç§ä¿¡æˆ‘ï¼šâ€œèµ„æ–™â€ï¼Œè¿˜å¯å…è´¹é¢†å–æ›´å¤šå­¦ä¹ èµ„æ–™</strong></h1><div class=pgc-img><img alt="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ed343a37c48740ebbe72797d27f47eb3><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Java å‹ç¼©ç®—æ³•å“ªå®¶å¼º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6303af21f6ef4fe78917986fe5be6b62><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Java','å‹ç¼©','å“ªå®¶'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>