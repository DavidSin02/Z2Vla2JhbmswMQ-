<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Linux ä¸‹duå‘½ä»¤è¯¦è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Linux ä¸‹duå‘½ä»¤è¯¦è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/2bbb187c04f24ba1a9492d266e315244"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/15905e0f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/15905e0f.html><meta property="article:published_time" content="2020-11-14T20:59:46+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:46+08:00"><meta name=Keywords content><meta name=description content="Linux ä¸‹duå‘½ä»¤è¯¦è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/15905e0f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Linux ä¸‹duå‘½ä»¤è¯¦è§£</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt="Linux ä¸‹duå‘½ä»¤è¯¦è§£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2bbb187c04f24ba1a9492d266e315244><p class=pgc-img-caption></p></div><p><br></p><p>du æ˜¯ Disk Usage çš„ç¼©å†™ï¼Œ Linux ä¸Šæœ€å—æ¬¢è¿çš„å‘½ä»¤ä¹‹ä¸€ï¼Œå®ƒç”¨æ¥ä¼°ç®—æ–‡ä»¶æˆ–ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´, å®ƒä¹Ÿæ˜¯å¾ˆåŸºç¡€çš„å‘½ä»¤ï¼Œä½¿ç”¨Linuxçš„äººéƒ½åº”è¯¥æŒæ¡å®ƒçš„ç”¨æ³•</p><p><br></p><p><strong>du å‘½ä»¤åŠè¯­æ³•</strong></p><pre><code>Usage: du [OPTION]... [FILE]...       du [OPTION]... --files0-from=F</code></pre><p>å¸¸ç”¨çš„é€‰é¡¹å¦‚ä¸‹ï¼š</p><pre><code>[root@ecs-centos-7 tt]# du -a temp/4       temp/suba.txt4       temp/test/abc.txt4       temp/test/ha/ha.txt8       temp/test/ha16      temp/test4       temp/time.txt28      temp/</code></pre><p><br></p><p><strong>æ˜¾ç¤ºæ‰€æœ‰ç›®å½•åŠæ–‡ä»¶å¤§å°</strong></p><p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†æ‰€æœ‰ç›®å½•ä»¥åŠç›®å½•ä¸‹æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½é»˜è®¤æ˜¯ Kb</p><pre><code>[root@ecs-centos-7 tt]# du -b temp/4117    temp/test/ha8218    temp/test12326   temp/[root@ecs-centos-7 tt]# du -h temp/8.0K    temp/test/ha16K     temp/test28K     temp/[root@ecs-centos-7 tt]# du --si temp/8.2k    temp/test/ha17k     temp/test29k     temp/</code></pre><p>æ³¨æ„: ä¸Šé¢çš„ä¾‹å­å¦‚æœä¸ä½¿ç”¨ -a é€‰é¡¹,é»˜è®¤æƒ…å†µä¸‹åªæ˜¾ç¤ºç›®å½•å¤§å°ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶å¤§å°ã€‚å³æ‰§è¡Œdu temp/ åªä¼šæ˜¾ç¤ºç›®å½•å¤§å°,è¯·çœ‹ä»¥ä¸‹çš„ä¾‹å­:</p><pre><code>[root@ecs-centos-7 tt]# du temp8       temp/test/ha16      temp/test28      temp</code></pre><p><br></p><p><strong>ä»¥æ˜“è¯»çš„æ–¹å¼æ˜¾ç¤º</strong></p><p>é»˜è®¤æ˜¾ç¤ºçš„å¤§å°åªæœ‰ä¸€ä¸ªå­¤é›¶é›¶çš„æ•°å­—ï¼Œè¿å•ä½ä¹Ÿæ²¡æœ‰ï¼Œè®©äººç¬¬ä¸€çœ¼çœ‹ä¸Šå»æœ‰ç‚¹ç–‘æƒ‘ï¼Œé€šè¿‡ -h é€‰é¡¹å¯ä»¥è®©å¤§å°æ˜¾ç¤ºæˆäººç±»æ˜“è¯»çš„æ–¹å¼ï¼Œè¿™ä¸ªé€‰é¡¹åº”è¯¥æ˜¯æœ€å¸¸ç”¨çš„äº†</p><pre><code>[root@ecs-centos-7 tt]# du -sh .72K     .[root@ecs-centos-7 tt]# du -sh temp/28K     temp/</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­, -h é€‰é¡¹é»˜è®¤è®¡ç®—åŸºæ•°æ˜¯ 1024 ï¼Œ --si é€‰é¡¹é»˜è®¤è®¡ç®—åŸºæ•°æ˜¯ 1000 æ‰€ä»¥temp/test/haç›®å½•ä»¥ -h é€‰é¡¹è®¡ç®—çš„å¤§å°æ˜¯ 8.0Kï¼Œè€Œä»¥ --si é€‰é¡¹è®¡ç®—çš„å¤§å°æ˜¯ 8.2K</p><p>-h ä»¥åŠ --si é€‰é¡¹çš„å¤§å°å•ä½éšç€ç›®å½•åŠæ–‡ä»¶çš„å¤§å°è‡ªåŠ¨çš„è°ƒæ•´</p><p><br></p><p><strong>ç›®å½•æ€»å¤§å°</strong></p><p>æœ‰æ—¶æˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€ä¸ªç›®å½•çš„æ€»å¤§å°ï¼Œä¸éœ€è¦çŸ¥é“å­ç›®å½•åŠå­ç›®å½•ä¸‹æ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥é€šè¿‡ -s é€‰é¡¹è·å–ç›®å½•æ€»å¤§å°</p><pre><code>[root@ecs-centos-7 tt]# du -sh .72K     .[root@ecs-centos-7 tt]# du -sh temp/28K     temp/</code></pre><p>ä¸Šé¢çš„ä¾‹å­åˆ†åˆ«è·å–å½“å‰ç›®å½•çš„æ€»å¤§å°ä»¥åŠ temp/ ç›®å½•çš„æ€»å¤§å°</p><p>é€šè¿‡ -c é€‰é¡¹ä¹Ÿèƒ½è·å–ç›®å½•æ€»å¤§å°ï¼Œä¸è¿‡å®ƒå…ˆæ˜¾ç¤ºå­ç›®å½•å¤§å°ï¼Œæœ€åä¸€è¡Œæ˜¾ç¤ºæ€»å¤§å°ï¼Œä¸‹é¢ä¾‹å­æœ€åä¸€è¡Œ total å­—ç¬¦ä¸²å‰é¢çš„ 28K è¡¨ç¤º temp/ ç›®å½•çš„æ€»å¤§å°</p><pre><code>[root@ecs-centos-7 tt]# tree -d temp/temp/â””â”€â”€ test    â””â”€â”€ ha2 directories</code></pre><p><br></p><p><strong>æŒ‡å®šç›®å½•æ·±åº¦</strong></p><p>å¦‚æœä¸€ä¸ªç›®å½•æœ‰å¾ˆå¤šå­ç›®å½•ï¼Œåªæƒ³æ˜¾ç¤ºæŒ‡å®šå±‚æ•°ç›®å½•å¤§å°çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ -d é€‰é¡¹å®ç°</p><p>temp/ çš„å­ç›®å½•ç»“æ„å¦‚ä¸‹:</p><pre><code>[root@ecs-centos-7 tt]# tree -d temp/temp/â””â”€â”€ test    â””â”€â”€ ha2 directories</code></pre><p>æŒ‡å®šç›®å½•æ·±åº¦</p><pre><code>[root@ecs-centos-7 tt]# du -d 0 temp/28      temp/[root@ecs-centos-7 tt]# du -d 1 temp/16      temp/test28      temp/[root@ecs-centos-7 tt]# du --max-depth=2 temp/8       temp/test/ha16      temp/test28      temp/</code></pre><p>du -d 0 temp/: æ˜¾ç¤ºç¬¬0å±‚ç›®å½•,ä¹Ÿå³å½“å‰ç›®å½•æ€»å¤§å°ï¼Œæ­¤æ—¶ç›¸å½“äº -s é€‰é¡¹</p><p>du -d 1 temp/: æ˜¾ç¤ºç¬¬1å±‚ç›®å½•,ä¹Ÿå³ temp/test ç›®å½•çš„æ€»å¤§å°</p><p>du --max-depth=2 temp/: æ˜¾ç¤ºç¬¬2å±‚ç›®å½•,ä¹Ÿå³ temp/test/ha ç›®å½•æ€»å¤§å°</p><p><br></p><p><strong>æ˜¾ç¤ºæœ€è¿‘ä¿®æ”¹æ—¶é—´</strong></p><pre><code>[root@ecs-centos-7 tt]# du --time temp8       2020-07-21 20:11        temp/test/ha16      2020-07-21 20:11        temp/test28      2020-07-21 20:13        temp</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­æ˜¾ç¤ºäº†æ¯ä¸ªç›®å½•æœ€è¿‘ä¿®æ”¹æ—¶é—´ï¼Œæ—¶é—´çš„ç²’åº¦åªç²¾ç¡®åˆ°åˆ†é’Ÿ</p><p>å¦‚æœæƒ³æ˜¾ç¤ºç²’åº¦æ›´ç»†äº›çš„è¯ï¼Œå¯ä»¥ç”¨ --time-syle=STYLE é€‰é¡¹æ¥æŒ‡å®šæ—¶é—´çš„è¾“å‡ºæ ¼å¼,å…¶ä¸­ STYLE è¡¨ç¤ºæ—¥æœŸçš„æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ï¼Œå’Œ date å‘½ä»¤çš„æ ¼å¼åŒ–è¾“å‡ºçš„æ ¼å¼ä¸€æ ·çš„</p><p>ä¾‹1ï¼šæ˜¾ç¤º UTC æ—¶é—´çš„ç§’æ•°(ä»1970å¹´1æœˆ1æ—¥åˆ°ç°åœ¨çš„ç§’æ•°)</p><pre><code>[root@ecs-centos-7 tt]# du --time --time-style="+%s" temp/      8       1595333498      temp/test/ha16      1595333514      temp/test28      1595333582      temp/</code></pre><p>ä¾‹2ï¼šæ˜¾ç¤ºå®Œæ•´çš„å¹´æœˆæ—¥æ—¶åˆ†ç§’</p><pre><code>[root@ecs-centos-7 tt]# du --time --time-style="+%F %T" temp/  8       2020-07-21 20:11:38     temp/test/ha16      2020-07-21 20:11:54     temp/test28      2020-07-21 20:13:02     temp/</code></pre><p><br></p><p><strong>æŒ‰ç…§å¤§å°è¿‡æ»¤</strong></p><p>ä»æ˜¾ç¤ºçš„ç»“æœä¸­ï¼Œè¿‡æ»¤æ‰æŒ‡å®šå¤§å°çš„ç›®å½•ä»¥åŠæ–‡ä»¶</p><pre><code>[root@ecs-centos-7 tt]# du -b temp/4117    temp/test/ha8218    temp/test12326   temp/[root@ecs-centos-7 tt]# du -b -t 4118 temp/8218    temp/test12326   temp/</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­,è¿‡æ»¤æ‰å°äº 4118 bytes çš„ç›®å½•</p><p><br></p><p><strong>æŒ‰ç…§ç›®å½•åæˆ–æ–‡ä»¶åè¿‡æ»¤</strong></p><p>å‡å¦‚ä¸€ä¸ªç›®å½•ä¸‹å­ç›®å½•å¤ªå¤šï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å­ç›®å½•åæˆ–è€…æ–‡ä»¶åå’ŒæŒ‡å®šçš„æ¨¡å¼ä¸²åŒ¹é…ï¼Œä»è€Œè¿‡æ»¤æ‰åŒ¹é…ä¸Šçš„ç›®å½•å’Œæ–‡ä»¶</p><pre><code>[root@ecs-centos-7 tt]# du -a temp4       temp/suba.txt4       temp/test/abc.txt4       temp/test/ha/ha.txt8       temp/test/ha16      temp/test4       temp/time.txt28      temp[root@ecs-centos-7 tt]# du -a --exclude=*a* temp/4       temp/test4       temp/time.txt12      temp/   </code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­, è¿‡æ»¤çš„æ¨¡å¼ä¸²æ˜¯ï¼š *a*</p><p>å®ƒè¡¨ç¤ºè¿‡æ»¤æ‰ç›®å½•åæˆ–è€…æ–‡ä»¶åä¸­å«æœ‰å­—ç¬¦ açš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œä¾‹å­ä¸­å‰é¢å››è¡Œçš„ç›®å½•æˆ–æ–‡ä»¶åä¸­éƒ½åŒ…å«äº† aå­—ç¬¦ï¼Œæ‰€ä»¥éƒ½è¢«è¿‡æ»¤æ‰äº†</p><p><br></p><p><strong>å æ»¡ç£ç›˜çš„éƒ½æ˜¯ä»€ä¹ˆæ–‡ä»¶</strong></p><p>å¼€å‘è€…ç»å¸¸é‡åˆ°çš„é—®é¢˜æ˜¯ç£ç›˜æ»¡äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ç»„åˆä½¿ç”¨ du å’Œ sort æ¥æŸ¥å‡º â€œå…ƒå‡¶â€</p><ul><li>å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ä»å¤§åˆ°å°æ’åº</li></ul><pre><code>[root@ecs-centos-7 tt]# du -sh temp/* | sort -hr10M     temp/clpay.tar16K     temp/test4.0K    temp/time.txt4.0K    temp/lnsuba</code></pre><ul><li>å½“å‰ç›®å½•ä»¥åŠå­ç›®å½•ä»å¤§åˆ°å°æ’åº</li></ul><pre><code>[root@ecs-centos-7 tt]# du -ah temp/* | sort -hr10M     temp/clpay.tar16K     temp/test8.0K    temp/test/ha4.0K    temp/time.txt4.0K    temp/test/ha/ha.txt4.0K    temp/test/abc.txt4.0K    temp/lnsuba</code></pre><ul><li>ç£ç›˜å ç”¨æœ€å¤§çš„ä¸‰ä¸ªç›®å½•ä»¥åŠå­ç›®å½•</li></ul><pre><code>[root@ecs-centos-7 tt]# du -ah temp/* | sort -hr | head -n 310M     temp/clpay.tar16K     temp/test8.0K    temp/test/ha</code></pre><p>é€šè¿‡ä¸Šé¢ä»‹ç»çš„å‡ ç§æ–¹å¼å¯ä»¥æ‰¾å‡ºæŒ‡å®šç›®å½•ä¸­å“ªäº›æ–‡ä»¶æˆ–ç›®å½•å ç”¨ç£ç›˜ç©ºé—´æ¯”è¾ƒå¤§ï¼Œæ¸…ç†çš„æ—¶å€™ä¼˜å…ˆæ¸…ç†å®ƒä»¬</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Linux','du','è¯¦è§£'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>