<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Dos 命令进阶(三)---批处理(中) | 极客快訊</title><meta property="og:title" content="Dos 命令进阶(三)---批处理(中) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/4ae10002ce86a9ed7e42"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><meta property="article:published_time" content="2020-10-29T21:04:54+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:54+08:00"><meta name=Keywords content><meta name=description content="Dos 命令进阶(三)---批处理(中)"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/19147ee.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Dos 命令进阶(三)---批处理(中)</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae10002ce86a9ed7e42></p><p class=pgc-img-caption>变量, set命令, IF命令的讲解思路</p><hr><h1><strong>接上篇: <a href=https://www.toutiao.com/i6494459604687127054/>Dos 命令进阶(三)---批处理(上)</a></strong></h1><hr><h1><strong>变量</strong></h1><hr><p><strong>1. 在windows操作系统中，变量可分为两种</strong>:</p><p>一种是系统已经定义好的变量，叫做“<strong>系统变量</strong>”；</p><p>一种就是用户自己定义的变量。也叫做“<strong>自定义变量</strong>”。</p><hr><p>系统变量如下图：</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4add000485e139aca797></p><p class=pgc-img-caption>使用 set 命令获取系统中的环境变量列表</p><p><strong>注：</strong>可以通过在CMD下输入“<strong>set</strong>”命令就可以看见系统中变量</p><p>那么我们<strong>如何</strong>获取单个系统变量的值呢，可以通过在CMD下输入</p><p><strong>echo %windir% </strong>就可以打印系统变量对应的值</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ade00047ceb29fe1a36></p><p class=pgc-img-caption>获取系统环境变量所对应的值</p><p>举例说明：</p><p>copy copy c:\cdir.txt %windir%\</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ade00048d027cabe05a></p><p class=pgc-img-caption>环境变更的应用</p><p>%WINDIR%\ 是一个系统变量(不区分大小写)，表示的值可通过上面介绍的方法来查看</p><p>如: copy c:\IPList.txt "%USERPROFILE%\「开始」菜单\程序\Startup\"</p><p><strong>注意: </strong>如果路径中带有空格, 这个""符号(上节讲的定界符)最好不要省哦。</p><hr><p><strong>2. </strong><strong>以上系统变量只是返回一些具体的值, 还有一些系统变量，它们是代表一个意思，或者一个操作</strong></p><p>分别是<strong>%0 %1 %2 %3 %4 %5....</strong>到<strong>%9</strong>，还有一个<strong>%*</strong></p><p>我们先来说一下<strong>%1-%9</strong>的意思(上节也有提到过, 在变量里再叙一遍, 一起复习一下)。</p><p>%1 返回批处理的<strong>第一个参数</strong></p><p>%2 返回批处理的<strong>第二个参数</strong></p><p>%3-%9 同样如此</p><p><strong>什么是返回批处理参数呢?</strong>我们先来看个例子来理解一下</p><p>第九个实例.bat 的代码：</p><p>@echo off</p><p>echo %1 %2 %3 %4 %5 %6</p><p>echo %1</p><p>echo %2</p><p>echo %3</p><p>echo %4</p><p>echo %5</p><p>echo %6</p><p>打开CMD，输入"第九个实例.bat 条 友 们 万 岁 !"</p><p>注意中间的空格，主要是用来区分各个参数的</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ade000494c0a4aa3870></p><p class=pgc-img-caption>系统变量%1-%9的应用</p><p>那么这里还有一个<strong>%*</strong>，它的作用是<strong>返回所有参数的值</strong>.</p><p>例子：</p><p>@echo off</p><p>echo %*</p><p>打开CMD，输入"第九个实例.bat 条 友 们 万 岁 !"</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4add0004a572ce4ef4a0></p><p class=pgc-img-caption>%* 可以匹配所有外部参数</p><p><strong>再唠叨一下:</strong> 注意参数之间的空格，主要是用来区分各个参数的</p><p>再来讲一下 <strong>%0</strong> 这个参数，它有<strong>两个意思</strong></p><p>第<strong>一个</strong>意思，用%0可以返回批处理<strong>脚本文件本身所在的绝对路径</strong></p><p>例子：</p><p>@echo off</p><p>echo %0</p><p>pause</p><p>说白了就是把批处理所在的路径给打印出来了</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ade00049daf0c70575b></p><p class=pgc-img-caption>%0 这个系统变量的使用方法</p><p>第<strong>二</strong>个意思就是用它来<strong>无限循环</strong>执行批处理程序</p><p>例子：</p><p>@echo off</p><p>echo 广大条友们万岁!万万岁!!!</p><p>%0</p><p>这样的话，它就会无限循环的执行批处理程序(无限调用自身)</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae100002226683ef08c></p><p class=pgc-img-caption>无限循环</p><hr><p><strong>3.</strong> <strong>我们现在来说说自定义变量的实用性</strong></p><p>如果要自定义一个批处理变量，那么我们就要用到系统中的一个<strong>set命令,</strong></p><p><strong>请使用"set /?" 看一下它的帮助文档</strong></p><p>例子代码：</p><p>@echo off</p><p>set var=感谢条友们的关注支持, 条友们万万岁!</p><p>echo %var%</p><p>pause</p><p>这样系统就会将我们自定义变量的值给输出了，即字符串“感谢条友们的关注支持, 条友们万万岁!”</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae300001f1d81ef3ae1></p><p class=pgc-img-caption>自定义变量的定义方式</p><hr><p>我们还可以<strong>让用户自己给它赋予任意一个值</strong></p><p>这时就会用到<strong>set /p</strong>这个参数了</p><p>例子代码：</p><p>@echo off</p><p>set /p var=请给变量赋个值：</p><p>::打印出用户输入的数据</p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4add0004ba8c70436ed7></p><p class=pgc-img-caption>提示用户输入信息</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4add0004ba4aca47735e></p><p class=pgc-img-caption>打印输出用户输入的信息</p><p>这样的话，我们就可以<strong>使用批处理程序与用户进行交互</strong>。这个变量的值也就是用户自己任意输入的。系统只是将它所对应的值给输出了而已</p><hr><h1><strong>Set命令详解</strong><br></h1><hr><h1><strong>一. </strong>回顾上面提到过的<strong>set命令的使用</strong>(重复的实例就不再重复截图浪费大家流量了)</h1><p><strong>(1)</strong>代码例子：</p><p>@echo off</p><p>set var=<strong>感谢条友们的关注支持, 条友们万万岁!</strong></p><p>echo %var%</p><p>pause</p><p>这个例子中var这个变量我们已经定义好了并且给它赋了一个初值就是<strong>“感谢条友们的关注支持, 条友们万万岁!”</strong>, 那么这也是它<strong>最简单的用法</strong>。这个我相信大家都已经明白了.</p><p><strong>(2)</strong>代码例子：</p><p>@echo off</p><p>set /p var=请给变量赋个值：</p><p>echo %var%</p><p>pause</p><p><strong>向上滑两下就能看到刚讲过, 跟着操作一遍的条友肯定已经搞明白了, 还不懂的请私信我或留言.</strong></p><hr><h1><strong>二. 我们现在来学习下 set /a 这个参数的使用</strong></h1><p>首先说明下，这个<strong>/a参数</strong>主要是用来进行<strong>数学运算</strong>的。</p><p>就好比是1+1=2，4-2=2，2*2=4，6/3=2</p><p>很简单吧，先列下参数/a有那些运算符</p><p>(这些是Set命令帮助中内容, 可以通过CMD窗口执行 "<strong>set /?</strong>" 获取)</p><p><strong>() - 分组</strong></p><p><strong>! ~ - - 一元运算符</strong></p><p><strong>* / % - 算数运算符</strong></p><p><strong>+ - - 算数运算符</strong></p><p><strong>&lt;&lt; >> - 逻辑移位</strong></p><p><strong>& - 按位“与”</strong></p><p><strong>^ - 按位“异”</strong></p><p><strong>| - 按位“或”</strong></p><p><strong>= *= /= %= += -= - 赋值</strong></p><p><strong>&= ^= |= &lt;&lt;= >>= </strong><strong>- 表达式分隔符</strong></p><p><strong>这么多的运算符, 都需要在 /a 参数下才能发挥作用</strong></p><p>看几个例子来理解一下<strong> set /a </strong>这个参数的使用：</p><p><strong>set /a var=1+1</strong> 当你需要获取1+1这个表达式的结果时, 就必须使用 /a 这个参数, 否则返回就是 "1+1"</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000a48127a55fae></p><p class=pgc-img-caption>无 /a 参数set命令的不运算 = 号右边的算术表达式</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf0003d0f19b43e113></p><p class=pgc-img-caption>使用了 /a 参数后进行前后对比看看</p><p>set /a var=4-2</p><p>set /a var=2*2</p><p>set /a var=6/3</p><p>set /a var=(1+1)+(1+1)</p><hr><p>set /a a=1+1,b=1+2,c=1+3 还可以多个变量同时定义</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000ab8cb5143d91></p><p class=pgc-img-caption>多变量同时定义的操作</p><p>好，再来看看在<strong>原变量上进行加减乘除的操作</strong></p><hr><p><strong>set /a var+=1</strong></p><p>这是一种简写方法，其原形原形就是</p><p>set /a var=%var%+1</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae60000765e181266dd></p><p class=pgc-img-caption>+= 运算符的使用, 其它组合运算符作用类似</p><p>那么<strong>加减乘除同样是如此</strong>，这些就不用小编啰嗦了吧, 如果真的还有条友不理解, 请私信我, 定回复.</p><p>还有一些<strong>“与”，“或”<strong>，“异或”</strong></strong>运算符，跟学校学过的C语言运算符一样，同样先看几个例子</p><p>set /a var= 1 <strong>"|"</strong> 1 <strong>注意这里对运算符使用了 "" 定界符号, 或运算, 一真则真</strong></p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae10000c914fed983fe></p><p class=pgc-img-caption>1 或 1 的运算</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae000037bf197f0182f></p><p class=pgc-img-caption>1 或 0 , 0 或 1 的运算</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000c38d8bb175e9></p><p class=pgc-img-caption>0 或 0的运算</p><p>set /a var= 1 <strong>"^"</strong> 1 <strong>异或运算, 同为假, 异为真</strong></p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae60000fa2838707143></p><p class=pgc-img-caption>异或运算 1 ^ 1</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae60000fa36b53b7835></p><p class=pgc-img-caption>异或运算 1 ^ 0 或 0 ^ 1</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae200013eab047704c4></p><p class=pgc-img-caption>异或运算 0 ^ 0</p><p>set /a var= 1 <strong>"&"</strong> 1 <strong>与运算, 一假则假</strong></p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae200028313d94ea783></p><p class=pgc-img-caption>与运算 1 & 1</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae60002417f24966017></p><p class=pgc-img-caption>与运算 1&0 或 0&1</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae200028356307fecab></p><p class=pgc-img-caption>与运算 0&0</p><hr><p>与, 或, 异或 这些运算符在使用时如果不使用 "" 定界符包括, 就会报错, 看演示:</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf00047a66976cffe1></p><p class=pgc-img-caption>逻辑运算符不加定界符 "" 会报异常</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae1000155d7203c7526></p><p class=pgc-img-caption>基础运算的加减乘除则不会, 但建议统一对所有运算符使用定界符</p><p>set /a var= 1 "+" 1</p><p>set /a var= 1 "%" 1 <strong>模运算, 即取余运算, 只返回运算的余数, 整除的返回0</strong></p><p>set /a var= 2 "&lt;&lt;" 2</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4adf00048a98012a5c59></p><p class=pgc-img-caption>位运算之左移操作</p><p>set /a var= 4 ">>" 2</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae2000164278531e7ca></p><p class=pgc-img-caption>位运算之右移操作</p><p>学过二进制的条友可以看出, <strong>与, 或, 非, 异或, 位运算等都是在二进制上操作的</strong>, 即运算前先将操作数都转换为二进制, 再进行, 与, 或, 非, 异或, 位移等运算. 建议有时间多玩玩, 再百度一下二进制, 几个小时就搞懂了.</p><p><strong>注意再注意: </strong>通过演练可以看到有的运算符号可以不用 "" 这个定界符, 有的必须用, 那么就<strong>统一起来</strong>, <strong>所有运算符使用中都使用 "" 包括起来</strong>, 以避免不必要的异常.</p><hr><h1><strong>三、环境变量替换增强用法</strong></h1><p><strong>(1)%PATH:str1=str2%</strong></p><p>会扩展 PATH 环境变量，用 "str2" 代替扩展结果中的每个 "str1".</p><p>要有效地从扩展结果中删除所有的 "str1"，"str2" 可以是空的。</p><p>"str1" 可以以星号打头；在这种情况下，"str1" 会从扩展结果的开始到 str1 剩余部分第一次出现的地方，都一直保持相配。</p><hr><p><strong>示例(1)：</strong></p><p>@echo off</p><p>set var=感谢条友们的关注支持, 条友们万万岁!</p><p>echo 原样输出:“%var%”</p><p><strong>set var=%var:条友=朋友%</strong></p><p>echo 修改后的:“%var%”</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae30001b4ccc6542da9></p><p class=pgc-img-caption>就是一个字符串替换操作</p><hr><p><strong>示例(2)：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p>echo 原样输出:“%var%”</p><p><strong>set var=%var:.=替换的字符%</strong></p><p>echo 修改后的:“%var%”</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae10001cc26448f38b1></p><p class=pgc-img-caption>字符替换操作</p><p>只要是认真看了图解的, <strong>比着葫芦画个瓢</strong>之后, 肯定也能理解了吧, 不懂就问, 或留言大家讨论 或私信我.</p><p>大家不要被 "环境变量替换增强" 这个标题给整蒙圈了, 看实例, 操作一下就懂了.</p><hr><p><strong>(2)%PATH:~10,5%</strong></p><p><strong>例1：</strong></p><p>@echo off</p><p>set var=www.baidu.com</p><p><strong>set var=%var:~1,3%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf000503271ae3d8db></p><p class=pgc-img-caption>从指定位置开始截取指定长度的字符串</p><p>首先说明下，这是一种<strong>截取字符串的用法</strong>。用上例中我们可以看出要截取的字符是从第一个字符开始，然后截取它后面的三个字符。请看图理解一下, 最好敲一下.</p><hr><p>好，再来看看下面的这种用法</p><p><strong>%PATH:~-10%</strong></p><p><strong>例2：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4adf000503dfac9c65d4></p><p class=pgc-img-caption>截取字符串最后几位字符</p><p>它就是<strong>截取变量var值的最后五位</strong>，看下结果就知道了。那么改成正数也是一样的</p><hr><p>还可以这样子<strong>%PATH:~0,-2%</strong></p><p><strong>例3：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~0,-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae4000186d3828863a3></p><p class=pgc-img-caption>截取 从正向指定位置到反向指定位置 长度的字符串</p><p>解释下这种截取的方法，它就是从0开始一直到最后的五个字符之前的位置，看文字太枯燥, 建议有兴趣的条友实际操作一下.</p><hr><p><strong>例4：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~3,-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae000049231023fa8cd></p><p class=pgc-img-caption>截取 从正向指定位置到反向指定位置 长度的字符串</p><hr><h1><strong>IF命令详解</strong></h1><hr><h1><strong>一、if的三种用法(可通过"IF /?"命令获取帮助文档)</strong></h1><p>IF [NOT] <strong>ERRORLEVEL number</strong> command</p><p>IF [NOT] <strong>string1==string2</strong> command</p><p>IF [NOT] <strong>EXIST filename</strong> command</p><p><strong>NOT</strong> 指定<strong>只有条件为 false 的情况下</strong>，Windows 才应该执行该命令。</p><p><strong>ERRORLEVEL number</strong> 如果最后运行的程序返回一个等于或大于指定数字的<strong>返回代码</strong>，指定条件为 true。</p><p><strong>string1==string2</strong> 如果指定的文字字符串匹配(可理解成<strong>相同的字符串</strong>)，指定条件为 true。</p><p><strong>EXIST filename</strong> 如果<strong>指定的文件名存在</strong>，指定条件为 true。</p><p><strong>command</strong> 如果符合条件，指定<strong>要执行的命令</strong>。如果指定的条件为 FALSE，命令后可跟 ELSE 命令，该命令将在 ELSE 关键字之后执行该命令。</p><hr><p><strong>(1)、IF [NOT] ERRORLEVEL number do something</strong> 如果返回码是什么, 就做某事儿</p><p>ERRORLEVEL number 是错误码也称返回码。（只是这么个理解，但它与错误没有必然联系。）</p><p>如果最后运行的程序返回一个错误码（返回码），或它等于或大于指定数字number，则指定条件为 true。</p><p><strong>示例代码1：</strong></p><p>@echo off</p><p>ipconfig</p><p>if errorlevel 1 goto a</p><p>if errorlevel 0 goto b</p><p>:a</p><p>echo 结果为 ipconfig 执行失败!</p><p>pause</p><p>exit</p><p>:b</p><p>echo 结果为 ipconfig 正确执行!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae700005655496c6e1a></p><p class=pgc-img-caption>单分支判断语句操作实例</p><p><strong>说明：“ipconfig”执行成功，则返回码为0</strong></p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae100024f326e0033f9></p><p class=pgc-img-caption>这是关于errorlevel的返回码的操作演示</p><hr><p><strong>(2)、IF [NOT] string1==string2 do something</strong> 如果字符串相等或不等, 就做某事儿<br></p><p>如果与指定的文字字符串匹配，指定条件为 true。</p><p><strong>示例代码2：</strong></p><p>@echo off</p><p>if "abcd" =="abcd" echo 我们相等!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002546d55e9d3b0></p><p class=pgc-img-caption>字符串比较判断</p><p>当然，也可以用于字符串变量的比较，如下：</p><p>@echo off</p><p>set str1=abcd</p><p>set str2=abcd</p><p>if %str1% == %str2% echo 我们相等!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae2000254d4c403e618></p><p class=pgc-img-caption>字符串比较判断</p><p>这里去掉两个变量的值，在加个<strong>/p</strong>来理解这个参数的作用吧!</p><p><strong>set /p </strong>这个参数的作用, 相必大家还没忘, 如果忘了, 就滑到上面再看看, 就是<strong>用于脚本与用户交互</strong>的.</p><p>@echo off</p><p>set /p str1=请输入第一个值:</p><p>set /p str2=请输入第二个值:</p><p>if %str1% == %str2% (echo 你输入的两个值是相等的!) else echo 你输入的两个值不相等!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae3000259ab07957ea7></p><p class=pgc-img-caption>输入相等的值</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae100026369e43fd294></p><p class=pgc-img-caption>输入不相等的值</p><hr><p><strong>(3)、IF [NOT] EXIST filename do something </strong>如果某个文件存在, 就做某事儿</p><p>如果指定的文件名存在，指定条件为 true。</p><p>例:</p><p>@echo off</p><p>if not exist mstsc.exe echo 当前目录下存在文件mstsc.exe</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002657ba0f4d281></p><p class=pgc-img-caption>如果存在或不存在某个文件时</p><p><strong>说明：</strong>如果当前文件夹下存在mstsc.exe则打印“当前目录下存在文件mstsc.exe”，否则不显示。</p><p>以上各句中的[NOT]是可选项，表示只有条件为 false 的情况下，才应该执行该命令。</p><hr><h1><strong>二、if...else...语句</strong></h1><p><strong>ELSE 子句必须在 IF 之后且必须出现在同一行上(重点)。</strong></p><p><strong>示例1：</strong></p><p>@echo off</p><p>IF EXIST a.txt (del a.txt) ELSE echo 不存在文件!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae700007d39f3416e50></p><p class=pgc-img-caption>分支判断的使用</p><p><strong>说明：</strong><strong>如果</strong>存在文件 a.txt <strong>则</strong>删除，<strong>否则</strong>显示 “不存在文件!”。</p><p>本程序段的这种写法是<strong>ELSE 子句</strong><strong>在 IF 之后出现在同一行上的特殊形式</strong>，<strong>它是通过括号“(”和“)”相连接的</strong>。</p><hr><p><strong>下面说明几种错误理解的用法</strong></p><p>由于 ELSE 命令必须与 IF 命令的尾端在同一行上，<strong>以下子句 不会 有效:</strong></p><p>IF EXIST a.txt del a.txt</p><p>ELSE echo a.txt 不存在文件!</p><p>因为 del 命令需要用一个新行终止，<strong>以下子句 不会 有效:</strong></p><p>IF EXIST a.txt del a.txt ELSE echo 不存在文件!</p><p><strong>需要用括号扩上(重点)。</strong></p><p><strong>IF EXIST a.txt (del a.txt) ELSE echo 不存在文件!</strong></p><hr><h1><strong>三、IF 的嵌套用法</strong></h1><p><strong>示例1:</strong></p><p>@echo off</p><p>set /p var=请输入一个数字：</p><p>if %var% gtr 5 if %var% lss 10 echo 这是一个大于5小于10的数!</p><p>pause</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae6000238ac8a31bf20></p><p class=pgc-img-caption>双重判断的操作</p><p><strong>说明：</strong>首先要注意“%var%”，若要取出变量的值要用%%将变量括起来。其次运算符gtr代表大于，lss代表小于，类似的运算符还有(不区分大小写, 如上图示)：</p><p><strong>EQU - 等于</strong></p><p><strong>NEQ - 不等于</strong></p><p><strong>LSS - 小于</strong></p><p><strong>LEQ - 小于或等于</strong></p><p><strong>GTR- 大于</strong></p><p><strong>GEQ- 大于或等于</strong></p><hr><p><strong>综合实例：</strong></p><p>@echo off</p><p>:again</p><p>s=</p><p>cls</p><p>color f</p><p>set /p p=please input password:</p><p>set s=abcd</p><p>if"%p%"=="%s%" (</p><p>echo 密码输入正确, 即将为你打开新的CMD窗口! & start cmd.exe) else (echo 密码错误!)</p><p>pause >nul 进入暂停状态,但不显示暂停提示字符.</p><p>goto again</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002b03b15f0c5fe></p><p class=pgc-img-caption>密码输入正确时</p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae70000bc6b2fb4b10f></p><p class=pgc-img-caption>密码输入错误时</p><hr><p>这一篇就先到这里吧, 可能是小编想简单了, 没有变量, SET命令, IF 命令会占这么长的篇幅.</p><p>明天就FOR一个命令可能都要占一篇, 因为这个循环命令较常用, 我要更加认真的去细化梳理, 所以内容可能还会很长.<br></p><p>有兴趣条友不要太急于求成, 慢慢嚼, 学到顺手拈来才应该是你们的目标.</p><p><strong>非常感谢大家的关注与支持!!!我会继续努力的-_-</strong><br></p><p><img alt="Dos 命令进阶(三)---批处理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae2000298c5e2fa1116></p><p class=pgc-img-caption>谢谢各条友的关注与支持</p><hr></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Dos','进阶','---'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>