<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/Rf2kPw8IkWbqVk"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1932ce9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1932ce9.html><meta property="article:published_time" content="2020-10-29T20:54:42+08:00"><meta property="article:modified_time" content="2020-10-29T20:54:42+08:00"><meta name=Keywords content><meta name=description content="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1932ce9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/Rf2kPw8IkWbqVk><p>ä½œè€… | éº¦æ´›_</p><p>è´£ç¼– | å¤•é¢œ</p><p>å¤´å›¾ | CSDNä»˜è´¹ä¸‹è½½è‡ªè§†è§‰ä¸­å›½</p><p>å‡ºå“ | CSDNåšå®¢</p><p><strong>å‰è¨€</strong></p><p>åœ¨å®˜ç½‘ä¸­ï¼Œæˆ‘ä»¬å‘ç°å®ƒçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼šDependency Injectionï¼Œç®€ç§°ï¼šDI ,ç¿»è¯‘è¿‡æ¥å°±æ˜¯ä¾èµ–æ³¨å…¥ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ç›˜ä¸€ç›˜å®ƒã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S0eL1K5GzxB7RA><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶ Spring æ¡†æ¶ DIèƒŒåçš„æ•…äº‹ï¼ŒåŒ…æ‹¬ Spring Inversion of Control(æ§åˆ¶åè½¬)ã€ DI å’Œ ApplicationContext æ¥å£ã€‚åŸºäºè¿™äº›åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•ä½¿ç”¨åŸºäº java å’ŒåŸºäº XML çš„é…ç½®æ¥ åˆ›å»ºSpring åº”ç”¨ç¨‹åºã€‚æœ€åï¼Œæˆ‘ä»¬å°†æ¢è®¨åœ¨åˆ›å»º Spring åº”ç”¨ç¨‹åºæ—¶é‡åˆ°çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼ŒåŒ…æ‹¬ beanå†²çªå’Œå¾ªç¯ä¾èµ–æ€§ã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT4Gwk56bt5iOJ><p><strong>æ§åˆ¶åè½¬(Inversion of Control)</strong></p><p>åœ¨å­¦ä¹ DIä¹‹å‰,æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ IoCï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼Œæ¥ä¸‹æ¥çš„ä¸€æ®µå¯èƒ½è¯»èµ·æ¥ä¼šè®©ä½ æ„Ÿè§‰æ¯”è¾ƒå•°å—¦,ä½†æ˜¯è¦ç»†ç»†ä½“ä¼šæ¯ä¸€æ¬¡æ”¹å˜çš„æ„å›¾,å’Œæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼Œå¯¹äºç†è§£æ§åˆ¶åè½¬éå¸¸é‡è¦ã€‚</p><p>é¦–å…ˆæ¥äº†è§£ä¸‹æˆ‘ä»¬é€šå¸¸å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨ å¹³æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ new å…³é”®å­—å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ª Car ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ Car</p><pre><code>Car car = new Car;</code></pre><p>å› ä¸ºæ±½è½¦æœ‰å¾ˆå¤šé›¶éƒ¨ä»¶ç»„æˆ,æˆ‘ä»¬å®šä¹‰Engineæ¥å£æ¥æ¨¡æ‹Ÿæ±½è½¦å¼•æ“,ç„¶åå°†engineå¯¹è±¡ä½œä¸ºæˆå‘˜å˜é‡æ”¾åœ¨Carç±»</p><pre><code>public interface Engine {</code><code> void turnOn;</code><code>}</code><br><br><code>public class Car {</code><br><br><code> private Engine engine;</code><br><code> public Car {}</code><br><code> public void start {</code><br><br><code> engine.turnOn;</code><br><br><code> }</code><br><br><code>}</code></pre><p>ç°åœ¨,æˆ‘ä»¬å¯ä»¥è°ƒç”¨startæ–¹æ³•å—?æ˜¾ç„¶æ˜¯ä¸è¡Œçš„,ä¸€çœ¼å¯ä»¥çœ‹å‡ºä¼šæŠ¥PointerException (NPE)ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨Carçš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–engineã€‚é€šå¸¸æˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ¡ˆå°±æ˜¯åœ¨Carçš„æ„é€ å‡½æ•°ä¸­è§‰å¾—ä½¿ç”¨Engineæ¥å£çš„å“ªä¸ªå®ç°,å¹¶ç›´æ¥å°†è¯¥å®ç°åˆ†é…ç»™engineå­—æ®µ;</p><p>ç°åœ¨,æˆ‘ä»¬æ¥é¦–å…ˆåˆ›å»ºEngineæ¥å£çš„å®ç°ç±»ï¼š</p><pre><code>public class ElectricEngine implements Engine {</code><code> @Override</code><code> public void turnOn {</code><code> System.out.println("ç”µåŠ¨å¼•æ“å¯åŠ¨");</code><code> }</code><code>}</code><br><br><code>public class CombustionEngine implements Engine {</code><code> @Override</code><code> public void turnOn {</code><code> System.out.println("ç‡ƒæ²¹å¼•æ“å¯åŠ¨");</code><code> }</code><code>}</code></pre><p>æˆ‘ä»¬ä¿®æ”¹Carçš„æ„é€ å‡½æ•°,ä½¿ç”¨ElectricEngineå®ç°,å°†æˆ‘ä»¬çš„engineå­—æ®µåˆ†é…ç»™ä¸€ä¸ªå®ä¾‹åŒ–çš„ElectricEngineå¯¹è±¡ï¼š</p><pre><code>public class Car {</code><br><br><code> private Engine engine;</code><br><br><code> public Car {</code><code> this.engine = new ElectricEngine;</code><code> }</code><br><br><code> public void start {</code><br><br><code> engine.turnOn;</code><br><br><code> }</code><br><br><code> public static void main(String[] args) {</code><code> Car car = new Car;</code><code> car.start;</code><code> }</code><code>}</code></pre><p>ç°åœ¨æˆ‘ä»¬æ‰§è¡Œstartæ–¹æ³•,æˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡º:</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S0eL1KI2xym8uw><p>å¤§åŠŸå‘Šæˆ,æˆ‘ä»¬æˆåŠŸè§£å†³äº† NPE(ç©ºæŒ‡é’ˆ)é—®é¢˜,ä½†æ˜¯æˆ‘ä»¬èƒœåˆ©äº†å—?å“ˆå“ˆå“ˆ,æ˜¾ç„¶æ²¡æœ‰!</p><p>åœ¨è§£å†³é—®é¢˜çš„åŒæ—¶,æˆ‘ä»¬åˆå¼•å…¥äº†å¦ä¸€ä¸ªé—®é¢˜ã€‚å°½ç®¡æˆ‘ä»¬é€šè¿‡æŠ½è±¡Engineæ¥å£ï¼Œç„¶åé€šè¿‡ä¸åŒçš„Engineå®ç°ç±»æ¥è´Ÿè´£ä¸åŒç±»å‹å¼•æ“çš„ä¸šåŠ¡é€»è¾‘ï¼Œçš„ç¡®æ˜¯å¾ˆå¥½çš„è®¾è®¡ç­–ç•¥ã€‚ä½†æ˜¯ç»†å¿ƒçš„ä¼™ä¼´å¯èƒ½å·²ç»å‘ç°äº†ï¼Œæˆ‘ä»¬Carç±»çš„æ„é€ å‡½æ•°ä¸­å°†engineå£°æ˜ä¸ºCombustionEngine,è¿™å°†å¯¼è‡´æ‰€æœ‰è½¦éƒ½æœ‰ä¸€ä¸ªç‡ƒæ²¹å¼•æ“ã€‚å‡å¦‚æˆ‘ä»¬ç°åœ¨è¦åˆ›å»ºä¸åŒçš„æ±½è½¦å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªç”µåŠ¨å¼•æ“ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸æ”¹å˜æˆ‘ä»¬çš„è®¾è®¡ã€‚æ¯”è¾ƒå¸¸è§çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹é‡Œçš„ç±»ï¼Œå„å¸å…¶èŒï¼Œåœ¨ä»–ä»¬çš„æ„é€ å‡½æ•°ä¸­å°†engineåˆ†é…ç»™Engineæ¥å£çš„ä¸åŒå®ç°ï¼›</p><p>ä¾‹å¦‚:</p><pre><code>public class CombustionCar {</code><br><code> private Engine engine;</code><br><code> public CombustionCar {</code><code> this.engine = new CombustionEngine;</code><code> }</code><br><code> public void start {</code><code> engine.turnOn;</code><code> }</code><br><br><code>}</code><br><br><code>public class ElectricCar {</code><code> private Engine engine;</code><br><br><code> public ElectricCar {</code><code> this.engine = new ElectricEngine;</code><code> }</code><br><code> public void start {</code><code> engine.turnOn;</code><code> }</code><br><code>}</code></pre><p>é€šè¿‡ä¸Šé¢çš„ä¸€é¡¿éªšæ“ä½œ,æˆ‘ä»¬æˆåŠŸçš„è§£å†³äº†æˆ‘ä»¬å¼•æ“çš„é—®é¢˜ã€‚å¦‚æœæ˜¯ä¸€ä¸ªæ—¥å¸¸éœ€æ±‚,æˆ‘ä»¬å·²ç»å¯ä»¥æˆåŠŸäº¤å·¥äº†ã€‚ä½†æ˜¯è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ã€‚</p><p>ä»è®¾è®¡çš„è§’åº¦æ¥è¯´ï¼Œç›®å‰çš„ä»£ç æ˜¯ç³Ÿç³•çš„ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç‚¹åŸå› ï¼š</p><ol><li><p>åœ¨ä¸¤ä¸ªä¸åŒçš„ç±»ä¸­ï¼Œå­˜åœ¨é‡å¤çš„startæ–¹æ³•</p></li><li><p>æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªæ–°çš„Engine å®ç°ç±»åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»;</p></li></ol><p>å°¤å…¶åä¸€ä¸ªé—®é¢˜æ›´åŠ éš¾ä»¥è§£å†³,å› ä¸ºæˆ‘ä»¬ä¸æ§åˆ¶Engineçš„å®ç°,éšç€å¼€å‘äººå‘˜ä¸æ–­çš„åˆ›å»ºè‡ªå·±çš„å®ç°ç±»,è¿™ä¸ªé—®é¢˜ä¼šæ›´åŠ æ¶åŒ–;</p><p><strong>å¸¦ç€ä¸Šé¢çš„é—®é¢˜,æˆ‘ä»¬ç»§ç»­æ€è€ƒâ€¦</strong></p><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªçˆ¶ç±»Car,å°†å…¬å…±ä»£ç æŠ½å–åˆ°çˆ¶ç±»ä¸­,å¯ä»¥è½»æ¾è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç”±äºEngineå­—æ®µæ˜¯ç§æœ‰çš„,æˆ‘ä»¬åœ¨çˆ¶ç±»Carçš„æ„é€ å‡½æ•°ä¸­æ¥æ”¶Engineå¯¹è±¡,å¹¶ä¸”è¿›è¡Œèµ‹å€¼ã€‚</p><pre><code>public class Car {</code><br><br><code> private Engine engine;</code><br><br><code> public Car(Engine engine) {</code><code> this.engine = engine;</code><code> }</code><br><br><code> public void start {</code><code> engine.turnOn;</code><code> }</code><code>}</code><br><br><code>public class CombustionCar extends Car{</code><br><br><code> public CombustionCar {</code><code> super(new CombustionEngine);</code><code> }</code><br><br><code>}</code><br><br><code>public class ElectricCar extends Car {</code><br><br><code> public ElectricCar {</code><code> super(new ElectricEngine);</code><code> }</code><br><br><code>}</code></pre><p>é€šè¿‡è¿™ç§æ–¹æ³•,æˆ‘ä»¬æˆåŠŸçš„è§£å†³äº†ä»£ç é‡å¤çš„é—®é¢˜,æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹:</p><pre><code>public class Car {</code><br><br><code> private Engine engine;</code><br><br><code> public Car(Engine engine) {</code><code> this.engine = engine;</code><code> }</code><br><br><code> public void start {</code><code> engine.turnOn;</code><code> }</code><br><br><code> public static void main(String[] args) {</code><br><br><code> CombustionCar combustionCar1 = new CombustionCar;</code><code> combustionCar1.start;</code><code> ElectricCar electricCar1 = new ElectricCar;</code><code> electricCar1.start;</code><code> }</code><code>}</code></pre><p><strong>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³æˆ‘ä»¬æå‡ºçš„ç¬¬äºŒä¸ªé—®é¢˜å‘¢?</strong></p><p>å…¶å®è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥æ¢ä¸ªè§’åº¦çœ‹:ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å»å…³æ³¨CombustionCarå’ŒElectricCar,æˆ‘ä»¬ç°åœ¨å°†å…³æ³¨ç‚¹å›åˆ°æˆ‘ä»¬çš„Car,æˆ‘ä»¬ç°åœ¨å·²ç»å…è®¸å®¢æˆ·ç«¯å®ä¾‹åŒ–Carå¯¹è±¡æ—¶å€™å°†Engineå¯¹è±¡ä½œä¸ºæ„é€ å‡½æ•°çš„å‚æ•°ä¼ å…¥,å…¶å®å·²ç»æ¶ˆé™¤äº†ä¸ºæ¯ä¸ªEngineå¯¹è±¡åˆ›å»ºæ–°Carçš„é—®é¢˜ã€‚å› ä¸ºç°åœ¨Carç±»ä¾èµ–äºEngineæ¥å£,å¹¶ä¸çŸ¥é“ä»»ä½•Engineçš„å®ç°;</p><p>é€šè¿‡å¸¦æœ‰Engineå‚æ•°çš„æ„é€ å‡½æ•°,æˆ‘ä»¬å·²å°†è¦ä½¿ç”¨å“ªä¸ªEngineå®ç°çš„å†³å®šä»Carç±»æœ¬èº«ï¼ˆæœ€åˆç”±CombustionEngineå†³å®šï¼‰æ›´æ”¹ä¸ºå®ä¾‹åŒ–Carç±»çš„å®¢æˆ·ç«¯ã€‚å†³ç­–è¿‡ç¨‹çš„è¿™ç§é€†è½¬ç§°ä¸ºIoCåŸåˆ™ã€‚ç°åœ¨ï¼Œç”±å®¢æˆ·ç«¯æ§åˆ¶ä½¿ç”¨å“ªç§å®ç°ï¼Œè€Œä¸æ˜¯ç”±Carç±»æœ¬èº«æ§åˆ¶ä½¿ç”¨å“ªç§Engineå®ç°ã€‚</p><p>æœ‰ç‚¹ç»•ï¼Œå¤§å®¶ç»“åˆä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼Œç»†ç»†ç¢ç£¨ï¼š</p><pre><code>public class Car {</code><br><br><code> private Engine engine;</code><br><br><code> public Car(Engine engine) {</code><code> this.engine = engine;</code><code> }</code><br><br><code> public void start {</code><code> engine.turnOn;</code><code> }</code><br><br><code> public static void main(String[] args) {</code><br><br><code> /**</code><code> * è€æ³•å­</code><code> * ä¸ºæ¯ä¸€ç±»å‹å‘é€æœºçš„è½¦åˆ›å»ºç±»ï¼Œç„¶åå®ç°çˆ¶ç±»carï¼Œç„¶ååœ¨æ„é€ å‡½æ•°ä¼ å…¥è‡ªå·±çš„å¼•æ“ï¼Œç„¶åè°ƒç”¨start</code><code> */</code><code> CombustionCar combustionCar1 = new CombustionCar;</code><code> combustionCar1.start;</code><code> ElectricCar electricCar1 = new ElectricCar;</code><code> electricCar1.start;</code><br><br><code> /**</code><code> * æ§åˆ¶åè½¬æ€æƒ³</code><code> * æŠŠè‡ªå·±çœ‹ä½œå®ä¾‹åŒ–carçš„å®¢æˆ·ç«¯ï¼Œéœ€è¦ä»€ä¹ˆå¼•æ“ï¼Œç›´æ¥ä¼ å…¥ç›¸å…³å¯¹è±¡</code><code> */</code><code> CombustionEngine combustionEngine = new CombustionEngine;</code><code> Car combustionCar = new Car(combustionEngine);</code><code> combustionCar.start;</code><code> ElectricEngine electricEngine = new ElectricEngine;</code><code> Car electricCar = new Car(electricEngine);</code><code> electricCar.start;</code><code> }</code><code>}</code></pre><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ,æˆ‘ä»¬å‘ç°éƒ½å¯ä»¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç»“æœ:</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S0eL1Kd6gTu1Uf><p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ä¾‹åŒ–Carç±»çš„å®¢æˆ·ç«¯å¯ä»¥æ§åˆ¶æ‰€ä½¿ç”¨çš„Engineå®ç°ï¼Œå¹¶ä¸”å–å†³äºå°†å“ªä¸ªEngineå®ç°ä¼ é€’ç»™Caræ„é€ å‡½æ•°ï¼ŒCarå¯¹è±¡çš„è¡Œä¸ºå‘ç”Ÿå·¨å¤§å˜åŒ–ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œæ¥ç€çœ‹ä¸‹é¢</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT7S2kzFTfre26><p><strong>ä¾èµ–æ³¨å…¥(Dependency Injection)</strong></p><p>åœ¨ä¸Šé¢æ§åˆ¶åè½¬çš„çŸ¥è¯†ç‚¹,æˆ‘ä»¬å·²ç»è§£å†³äº†ç”±è°å†³å®šä½¿ç”¨å“ªç§Engineå®ç°çš„é—®é¢˜,ä½†æ˜¯ä¸å¯é¿å…,æˆ‘ä»¬ä¹Ÿæ›´æ”¹äº†å®ä¾‹åŒ–ä¸€ä¸ªCarå¯¹è±¡çš„æ­¥éª¤;</p><p>æœ€å¼€å§‹,æˆ‘ä»¬å®ä¾‹åŒ–Carä¸éœ€è¦å‚æ•°,å› ä¸ºåœ¨å®ƒçš„æ„é€ å‡½æ•°é‡Œé¢å·²ç»ä¸ºæˆ‘ä»¬newäº†Engineå¯¹è±¡ã€‚ä½¿ç”¨IoCæ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬è¦æ±‚åœ¨å®ä¾‹åŒ–ä¸€ä¸ªCarä¹‹å‰,æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªEngineå¯¹è±¡,å¹¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™Caræ„é€ å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œæœ€åˆï¼Œæˆ‘ä»¬é¦–å…ˆå®ä¾‹åŒ–Carå¯¹è±¡,ç„¶åå®ä¾‹åŒ–Engineå¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨IoCä¹‹å,æˆ‘ä»¬é¦–å…ˆå®ä¾‹åŒ–Engineå¯¹è±¡,ç„¶åå®ä¾‹åŒ–Carå¯¹è±¡;</p><p>å› æ­¤,æˆ‘ä»¬åœ¨ä¸Šé¢çš„è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªä¾èµ–å…³ç³»ã€‚ä¸è¿‡è¿™ç§ä¾èµ–å…³ç³»ä¸æ˜¯æŒ‡ç¼–è¯‘æ—¶å€™Carç±»å¯¹Engineæ¥å£çš„ä¾èµ–å…³ç³»,ç›¸å,æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªè¿è¡Œæ—¶ä¾èµ–å…³ç³»ã€‚åœ¨è¿è¡Œæ—¶ï¼Œå®ä¾‹åŒ–Carå¯¹è±¡ä¹‹å‰,å¿…é¡»é¦–å…ˆå®ä¾‹åŒ–Engineå¯¹è±¡ã€‚</p><p><strong>2.1 ä¾èµ–å…³ç³»æ ‘</strong></p><p><strong>æŸä¸€ä¸ªå…·ä½“çš„ä¾èµ–å¯¹è±¡å¤§å®¶å¯ä»¥ç†è§£ä¸ºSpringä¸­çš„bean,å¯¹äºä¸¤ä¸ªæœ‰ä¾èµ–å…³ç³»çš„bean,å…¶ä¸­è¢«ä¾èµ–çš„é‚£ä¸ªbean,æˆ‘ä»¬æŠŠå®ƒç§°ä¸ºä¾èµ–å¯¹è±¡ã€‚</strong></p><p>æˆ‘ä»¬ç”¨å›¾å½¢åŒ–çš„æ–¹å¼æ¥çœ‹çœ‹å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¸­å›¾å½¢çš„èŠ‚ç‚¹ä»£è¡¨å¯¹è±¡ï¼Œç®­å¤´ä»£è¡¨ä¾èµ–å…³ç³»ï¼ˆç®­å¤´æŒ‡å‘ä¾èµ–å¯¹è±¡ï¼‰ã€‚å¯¹äºæˆ‘ä»¬æˆ‘çš„Carç±»,ä¾èµ–å…³ç³»æ ‘éå¸¸ç®€å•:</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S0eL1MPDsCu99x><p>å¦‚æœ<strong>ä¾èµ–å…³ç³»æ ‘</strong>çš„ç»ˆç«¯ç»“ç‚¹è¿˜æœ‰è‡ªå·±çš„é™„åŠ ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆè¿™ä¸ªä¾èµ–å…³ç³»æ ‘å°†å˜å¾—æ›´åŠ å¤æ‚ã€‚ç°åœ¨å†çœ‹æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœCombustionEngine è¿˜æœ‰å…¶ä»–ä¾èµ–å¯¹è±¡ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºCombustionEngineçš„ä¾èµ–å¯¹è±¡,ç„¶åæ‰èƒ½å®ä¾‹åŒ–ä¸€ä¸ªCombustionEngineå¯¹è±¡ã€‚è¿™æ ·åœ¨åˆ›å»ºCarå¯¹è±¡æ—¶å€™,æ‰èƒ½å°†CombustionEngineä¼ é€’ç»™Carçš„æ„é€ å‡½æ•°;</p><pre><code>//å‡¸è½®è½´ </code><code>public class Camshaft {}</code><code>//æœºè½´</code><code>public class Crankshaft {}</code><br><br><code>public class CombustionEngine implements Engine {</code><br><br><code> //å‡¸è½®è½´</code><code> private Camshaft camshaft;</code><br><br><code> //æœºè½´</code><code> private Crankshaft crankshaft;</code><br><br><code> public CombustionEngine(Camshaft camshaft, Crankshaft crankshaft) {</code><br><br><code> this.camshaft = camshaft;</code><br><br><code> this.crankshaft = crankshaft;</code><code> }</code><br><br><code> @Override</code><br><br><code> public void turnOn {</code><br><br><code> System.out.println("ç‡ƒæ²¹å¼•æ“å¯åŠ¨");</code><br><br><code> }</code><br><br><code>}</code></pre><p>ç»è¿‡æˆ‘ä»¬æ”¹é€ ,æˆ‘ä»¬ç°åœ¨çš„ä¾èµ–å…³ç³»æ ‘å˜ä¸ºä¸‹é¢çš„æ ·å­ï¼š</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S0eL1sVCqsRLm3><p><strong>2.2 ä¾èµ–æ³¨å…¥æ¡†æ¶</strong></p><p>éšç€æˆ‘ä»¬ä¸æ–­å¼•å…¥æ›´å¤šçš„ä¾èµ–å…³ç³»,è¿™ç§å¤æ‚æ€§å°†ç»§ç»­å¢é•¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªå¤æ‚é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºä¾èµ–å…³ç³»æ ‘æŠ½å–å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚è¿™å°±æ˜¯<strong>ä¾èµ–æ³¨å…¥æ¡†æ¶</strong>ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:</p><ol><li><p>å£°æ˜éœ€è¦åˆ›å»ºçš„å¯¹è±¡éœ€è¦å“ªäº›ä¾èµ–å¯¹è±¡</p></li><li><p>æ³¨å†Œåˆ›å»ºè¿™äº›ä¾èµ–å¯¹è±¡æ‰€éœ€è¦çš„ç±»</p></li><li><p>æä¾›ä¸€ç§ä½¿ç”¨1å’Œ2ä¸¤ç‚¹æ€æƒ³åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶</p></li></ol><p>é€šè¿‡åå°„ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ Car ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”çŸ¥é“å®ƒéœ€è¦ä¸€ä¸ª Engine å‚æ•°ã€‚å› æ­¤ä¸ºäº†åˆ›å»ºCarå¯¹è±¡,æˆ‘ä»¬å¿…é¡»åˆ›å»ºè‡³å°‘ä¸€ä¸ªEngineæ¥å£çš„å®ç°ç±»ç”¨ä½œä¾èµ–é¡¹æ¥ä½¿ç”¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªCombustionEngine å¯¹è±¡(<strong>ä¸ºäº†æ–¹ä¾¿,æš‚æ—¶å½“åšåªæœ‰ä¸€ä¸ªå®ç°ç±»,beanå†²çªé—®é¢˜å¾…ä¼šå†è¯´</strong>)æ¥å£°æ˜å®ƒä½œä¸ºä¾èµ–é¡¹æ¥ä½¿ç”¨,å°±æ»¡è¶³Carå¯¹è±¡åˆ›å»ºæ—¶çš„éœ€æ±‚.</p><p>å…¶å®,è¿™ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„,å› ä¸ºCombustionEngine ä¾èµ–äºå…¶ä»–å¯¹è±¡,æˆ‘ä»¬éœ€è¦ä¸æ–­é‡å¤ç¬¬ä¸€ä¸ªè¿‡ç¨‹,ç›´åˆ°æŠŠæ‰€æœ‰ä¾èµ–å¯¹è±¡å£°æ˜å®Œæ¯•,ç„¶åæ³¨å†Œåˆ›å»ºè¿™äº›ä¾èµ–å¯¹è±¡æ‰€éœ€è¦çš„ç±»ã€‚</p><p>ç¬¬ä¸‰ç‚¹å…¶å®å°±æ˜¯å°†å‰é¢ä¸¤ç‚¹æ€æƒ³ä»˜è¯¸å®æ–½ï¼Œä»è€Œå½¢æˆä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶</p><p>ä¸¾ä¸ªä¾‹å­:æ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªCarå¯¹è±¡,æˆ‘ä»¬å¿…é¡»éå†ä¾èµ–å…³ç³»æ ‘å¹¶æ£€æŸ¥æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç±»æ¥æ»¡è¶³æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå£°æ˜CombustionEngineç±»å¯æ»¡è¶³EngineèŠ‚ç‚¹è¦æ±‚ã€‚å¦‚æœå­˜åœ¨è¿™ç§ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å°†å®ä¾‹åŒ–è¯¥ä¾èµ–å…³ç³»ï¼Œç„¶åç§»è‡³ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>å¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç±»æ»¡è¶³æ‰€éœ€çš„ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»æ˜¾å¼å£°æ˜åº”è¯¥é€‰æ‹©å“ªä¸€ç§ä¾èµ–å…³ç³»ã€‚ç¨åæˆ‘ä»¬å°†è®¨è®º Spring æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚</p><p>ä¸€æ—¦æˆ‘ä»¬ç¡®å®šæ‰€æœ‰çš„ä¾èµ–å…³ç³»éƒ½å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ç»ˆç«¯èŠ‚ç‚¹å¼€å§‹åˆ›å»ºä¾èµ–å¯¹è±¡ã€‚å¯¹äº Car å¯¹è±¡ï¼Œæˆ‘ä»¬é¦–å…ˆå®ä¾‹åŒ– Camshaft å’ŒCrankshaftãƒ¼ãƒ¼å› ä¸ºè¿™äº›å¯¹è±¡æ²¡æœ‰ä¾èµ–å…³ç³»ãƒ¼ãƒ¼ç„¶åå°†è¿™äº›å¯¹è±¡ä¼ é€’ç»™ CombustionEngine æ„é€ å‡½æ•°ï¼Œä»¥å®ä¾‹åŒ– CombunstionEngine å¯¹è±¡ã€‚æœ€åï¼Œæˆ‘ä»¬å°† CombunstionEngine å¯¹è±¡ä¼ é€’ç»™ Car æ„é€ å‡½æ•°ï¼Œä»¥å®ä¾‹åŒ–æ‰€éœ€çš„ Car å¯¹è±¡ã€‚</p><p>äº†è§£äº† DI çš„åŸºæœ¬åŸç†ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç»§ç»­è®¨è®º Spring å¦‚ä½•æ‰§è¡Œ DIã€‚</p><p><strong>2.3 Springçš„ä¾èµ–æ³¨å…¥</strong></p><p>Springçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªDIæ¡†æ¶ï¼Œå®ƒå¯ä»¥å°†DIé…ç½®è½¬æ¢ä¸ºJavaåº”ç”¨ç¨‹åºã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬è¦é˜è¿°ä¸€ä¸ªé—®é¢˜:é‚£å°±æ˜¯<strong>åº“å’Œæ¡†æ¶çš„åŒºåˆ«</strong>ã€‚åº“åªæ˜¯ç±»å®šä¹‰çš„é›†åˆã€‚èƒŒåçš„åŸå› ä»…ä»…æ˜¯ä»£ç é‡ç”¨ï¼Œå³è·å–å…¶ä»–å¼€å‘äººå‘˜å·²ç»ç¼–å†™çš„ä»£ç ã€‚è¿™äº›ç±»å’Œæ–¹æ³•é€šå¸¸åœ¨åŸŸç‰¹å®šåŒºåŸŸä¸­å®šä¹‰ç‰¹å®šæ“ä½œã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€äº›æ•°å­¦åº“å¯è®©å¼€å‘äººå‘˜ä»…è°ƒç”¨å‡½æ•°è€Œæ— éœ€é‡åšç®—æ³•å·¥ä½œåŸç†çš„å®ç°ã€‚</p><p>æ¡†æ¶é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªéª¨æ¶ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­æ’å…¥ä»£ç ä»¥åˆ›å»ºåº”ç”¨ç¨‹åºã€‚è®¸å¤šæ¡†æ¶ä¿ç•™äº†ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„éƒ¨åˆ†ï¼Œå¹¶è¦æ±‚æˆ‘ä»¬å¼€å‘äººå‘˜æä¾›é€‚åˆæ¡†æ¶çš„ä»£ç ã€‚åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€ç¼–å†™æ¥å£çš„å®ç°ï¼Œç„¶ååœ¨æ¡†æ¶ä¸­æ³¨å†Œå®ç°ã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S0eL1svIuO9Tqq><p><strong>2.4 ApplicationContext</strong></p><p>åœ¨ Spring ä¸­ï¼Œæ¡†æ¶å›´ç»• ApplicationContext æ¥å£å®ç°ä¸Šä¸€èŠ‚ä¸­æ¦‚è¿°çš„ä¸‰ä¸ª DI èŒè´£ã€‚é€šå¸¸è¿™ä¸ªæ¥å£ä»£è¡¨äº†ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡åŸºäº java æˆ–åŸºäº xml çš„é…ç½®å‘ ApplicationContext æ³¨å†Œåˆé€‚çš„ç±»ï¼Œå¹¶ä» ApplicationContext è¯·æ±‚åˆ›å»º bean å¯¹è±¡ã€‚ç„¶å ApplicationContext æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»æ ‘å¹¶éå†å®ƒä»¥åˆ›å»ºæ‰€éœ€çš„ beanå¯¹è±¡ï¼š</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S0eL1vrGE8aa22><p>Applicationcontext ä¸­åŒ…å«çš„é€»è¾‘é€šå¸¸è¢«ç§°ä¸º Spring å®¹å™¨ã€‚é€šå¸¸ï¼Œä¸€ä¸ª Spring åº”ç”¨ç¨‹åºå¯ä»¥æœ‰å¤šä¸ª ApplicationContextï¼Œæ¯ä¸ª ApplicationContext å¯ä»¥æœ‰å•ç‹¬çš„é…ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª ApplicationContext å¯èƒ½è¢«é…ç½®ä¸ºä½¿ç”¨ CombustionEngine ä½œä¸ºå…¶å¼•æ“å®ç°ï¼Œè€Œå¦ä¸€ä¸ªå®¹å™¨å¯èƒ½è¢«é…ç½®ä¸ºä½¿ç”¨ ElectricEngine ä½œä¸ºå…¶å®ç°ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºæ¯ä¸ªåº”ç”¨ç¨‹åºçš„å•ä¸ª ApplicationContextï¼Œä½†æ˜¯ä¸‹é¢æè¿°çš„æ¦‚å¿µå³ä½¿åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºæœ‰å¤šä¸ª ApplicationContext å®ä¾‹æ—¶ä¹Ÿé€‚ç”¨ã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTJXJ1kBqzfCnu><p><strong>åŸºäº java çš„é…ç½®</strong></p><p>Springä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§åŸºäº java çš„é…ç½®æ–¹å¼</p><ol><li><p>åŸºæœ¬é…ç½®</p></li><li><p>è‡ªåŠ¨é…ç½®</p></li></ol><p><strong>3.1 åŸºäº java çš„åŸºæœ¬é…ç½®</strong></p><p>åŸºäºjavaçš„åŸºæœ¬é…ç½®çš„æ ¸å¿ƒï¼Œå…¶å®æ˜¯ä¸‹é¢ä¸¤ä¸ªæ³¨è§£:</p><ol><li><p>@Configuration: å®šä¹‰é…ç½®ç±»</p></li><li><p>@Bean: åˆ›å»ºä¸€ä¸ªbean</p></li></ol><p>ä¾‹å¦‚ï¼Œç»™å‡ºæˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ Car, CombustionEngine, Camshaft, å’ŒCrankshaft ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸‹é¢ çš„é…ç½®ç±»:</p><pre><code>/**</code><code> * @author milogenius</code><code> * @date 2020/5/17 20:52</code><code> */</code><code>@Configuration</code><code>public class AnnotationConfig {</code><br><code> @Bean</code><code> public Car car(Engine engine) {</code><code> return new Car(engine);</code><code> }</code><br><br><code> @Bean</code><code> public Engine engine(Camshaft camshaft, Crankshaft crankshaft) {</code><code> return new CombustionEngine(camshaft, crankshaft);</code><code> }</code><br><br><code> @Bean</code><code> public Camshaft camshaft {</code><code> return new Camshaft;</code><code> }</code><br><br><code> @Bean</code><code> public Crankshaft crankshaft {</code><code> return new Crankshaft;</code><code> }</code><code>}</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª ApplicationContext å¯¹è±¡ï¼Œä» ApplicationContext å¯¹è±¡è·å–ä¸€ä¸ª Car å¯¹è±¡ï¼Œç„¶ååœ¨åˆ›å»ºçš„ Car å¯¹è±¡ä¸Šè°ƒç”¨ start æ–¹æ³•:</p><pre><code>ApplicationContext context = </code><br><br><code> new AnnotationConfigApplicationContext(AnnotationConfig.class);</code><br><br><code>Car car = context.getBean(Car.class);</code><br><br><code>car.start;</code></pre><p>æ‰§è¡Œç»“æœå¦‚ä¸‹:</p><pre><code>Started combustion engine</code></pre><p>è™½ç„¶@Configuration å’Œ@Bean æ³¨è§£çš„ç»„åˆä¸º Spring æä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥æ‰§è¡Œä¾èµ–æ³¨å…¥ï¼Œä½†æˆ‘ä»¬ä»ç„¶éœ€è¦æ‰‹åŠ¨æ‰‹åŠ¨å®šä¹‰æ¯ä¸ªå°†è¢«æ³¨å…¥çš„ beanï¼Œå¹¶æ˜¾å¼åœ°å£°æ˜å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚ä¸ºäº†å‡å°‘é…ç½® DI æ¡†æ¶æ‰€éœ€çš„å¼€é”€ï¼ŒSpring æä¾›äº†åŸºäºjavaçš„è‡ªåŠ¨é…ç½®ã€‚</p><p><strong>3.2 åŸºäº java çš„è‡ªåŠ¨é…ç½®</strong></p><p>ä¸ºäº†æ”¯æŒåŸºäº java çš„è‡ªåŠ¨é…ç½®ï¼ŒSpring æä¾›äº†é¢å¤–çš„æ³¨è§£ã€‚è™½ç„¶æˆ‘ä»¬å¹³æ—¶å¯èƒ½åŠ è¿‡å¾ˆå¤šè¿™ç§ç±»å‹çš„æ³¨è§£ï¼Œä½†æ˜¯æœ‰ä¸‰ä¸ªæœ€åŸºæœ¬çš„æ³¨è§£:</p><pre><code>@Component: æ³¨å†Œä¸ºç”± Spring ç®¡ç†çš„ç±»</code><code>@Autowired: æŒ‡ç¤º Spring æ³¨å…¥ä¸€ä¸ªä¾èµ–å¯¹è±¡</code><code>@ComponentScan: æŒ‡ç¤ºSpringåœ¨ä½•å¤„æŸ¥æ‰¾å¸¦æœ‰@Componentæ³¨è§£çš„ç±»</code><code>3.2.1 æ„é€ å‡½æ•°æ³¨å…¥</code><code>@Autowiredæ³¨è§£ç”¨æ¥æŒ‡å¯¼ Spring ,æˆ‘ä»¬æ‰“ç®—åœ¨ä½¿ç”¨æ³¨è§£çš„ä½ç½®æ³¨å…¥ä¸€ä¸ªä¾èµ–å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œåœ¨ Car æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æœŸæœ›æ³¨å…¥ä¸€ä¸ª Engine å¯¹è±¡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç»™ Car æ„é€ å‡½æ•°æ·»åŠ @Autowiredæ³¨è§£ã€‚é€šè¿‡ä½¿ç”¨@Component å’Œ@Autowiredæ³¨è§£æ”¹é€ æˆ‘ä»¬Carç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</code><br><br><code>@Component</code><code>public class Car {</code><br><br><code> private Engine engine;</code><br><br><br><code> @Autowired</code><br><br><code> public Car(Engine engine) {</code><br><br><code> this.engine = engine;</code><code> }</code><br><br><code> public void start {</code><br><br><code> engine.turnOn;</code><br><br><code> }</code><br><br><code>}</code></pre><p>æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»–ç±»ä¸­é‡å¤è¿™ä¸ªè¿‡ç¨‹:</p><pre><code>@Component</code><br><br><code>public class Camshaft {}</code><br><br><code>@Component</code><code>public class Crankshaft {}</code><br><br><br><br><code>@Component</code><br><br><code>public class CombustionEngine implements Engine {</code><br><br><br><br><br><code> private Camshaft camshaft;</code><br><br><code> private Crankshaft crankshaft;</code><br><br><br><br><code> @Autowired</code><br><br><code> public CombustionEngine(Camshaft camshaft, Crankshaft crankshaft) {</code><br><br><code> this.camshaft = camshaft;</code><br><br><code> this.crankshaft = crankshaft;</code><br><br><code> }</code><br><br><br><br><code> @Override</code><br><br><code> public void turnOn {</code><br><br><code> System.out.println("Started combustion engine");</code><br><br><code> }</code><br><br><code>}</code></pre><p>æ”¹é€ å®Œæˆç›¸å…³ç±»ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª@Configuration ç±»æ¥æŒ‡å¯¼ Spring å¦‚ä½•è‡ªåŠ¨é…ç½®æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚å¯¹äºåŸºäº java çš„åŸºæœ¬é…ç½®ï¼Œæˆ‘ä»¬æ˜ç¡®æŒ‡ç¤º Spring å¦‚ä½•ä½¿ç”¨@Bean æ³¨è§£åˆ›å»ºæ¯ä¸ª beanï¼Œä½†åœ¨è‡ªåŠ¨é…ç½®ä¸­ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡@Component å’Œ@Autowired æ³¨è§£æä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œè¯´æ˜å¦‚ä½•åˆ›å»ºæ‰€éœ€çš„æ‰€æœ‰ beanã€‚å”¯ä¸€ç¼ºå°‘çš„ä¿¡æ¯æ˜¯ Spring åº”è¯¥åœ¨å“ªé‡Œå¯»æ‰¾æˆ‘ä»¬çš„å¸¦æœ‰@Componentæ³¨è§£çš„ ç±»,å¹¶æŠŠå®ƒæ³¨å†Œä¸ºå¯¹åº”çš„beanã€‚</p><p>@ Componentscan æ³¨é‡ŠåŒ…å«ä¸€ä¸ªå‚æ•° basePackagesï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†åŒ…åç§°æŒ‡å®šä¸ºä¸€ä¸ª Stringï¼ŒSpring å°†é€šè¿‡é€’å½’æœç´¢æ¥æŸ¥æ‰¾@Component ç±»ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼ŒåŒ…æ˜¯ com.milo.domainï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°çš„é…ç½®ç±»æ˜¯:</p><pre><code>@Configuration</code><code>@ComponentScan(basePackages = "com.milo.domain")</code><code>public class AutomatedAnnotationConfig {}</code></pre><pre><code>ApplicationContext context = </code><br><br><code> new AnnotationConfigApplicationContext(AutomatedAnnotationConfig.class);</code><br><br><code>Car car = context.getBean(Car.class); </code><br><br><code>car.start;</code></pre><p>æ‰§è¡Œç»“æœ:</p><pre><code>Started combustion engine</code></pre><p>é€šè¿‡å’ŒåŸºäºjavaçš„åŸºç¡€é…ç½®æ¯”è¾ƒ,æˆ‘ä»¬å‘ç°åŸºäº java çš„è‡ªåŠ¨é…ç½®æ–¹æ³•æœ‰ä¸¤ä¸ªä¸»è¦ä¼˜ç‚¹:</p><ol><li><p>æ‰€éœ€çš„é…ç½®è¦ç®€æ´å¾—å¤š</p></li><li><p>æ³¨è§£ç›´æ¥åº”ç”¨äºç±»ï¼Œè€Œä¸æ˜¯åœ¨é…ç½®ç±»</p></li></ol><p><strong>æ‰€ä»¥æ— ç‰¹æ®Šæƒ…å†µ,è‡ªåŠ¨é…ç½®æ˜¯é¦–é€‰ã€‚</strong></p><p>3.2.2 å­—æ®µæ³¨å…¥</p><p>é™¤äº†æ„é€ å‡½æ•°æ³¨å…¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å­—æ®µç›´æ¥æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥å°†@Autowired æ³¨è§£åº”ç”¨åˆ°æ‰€éœ€çš„å­—æ®µæ¥å®ç°è¿™ä¸€ç‚¹:</p><pre><code>@Component</code><code>public class Car {</code><br><br><br><br><code> @Autowired</code><br><br><code> private Engine engine;</code><br><br><br><br><br><code> public void start {</code><br><br><code> engine.turnOn;</code><br><br><code> }</code><br><br><code>}</code></pre><p>è¿™ç§æ–¹æ³•æå¤§åœ°å‡å°‘äº†æˆ‘ä»¬çš„ç¼–ç å‹åŠ›ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹,å°±æ˜¯åœ¨ä½¿ç”¨å­—æ®µä¹‹å‰ï¼Œæˆ‘ä»¬å°†æ— æ³•æ£€æŸ¥è‡ªåŠ¨æ³¨å…¥çš„å¯¹è±¡æ˜¯å¦ä¸ºç©ºã€‚</p><p>3.2.3 Setteræ³¨å…¥</p><p>æ„é€ å‡½æ•°æ³¨å…¥çš„æœ€åä¸€ç§æ›¿ä»£æ–¹æ³•æ˜¯ setter æ³¨å…¥ï¼Œå…¶ä¸­@Autowired æ³¨è§£åº”ç”¨äºä¸å­—æ®µå…³è”çš„ setterã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜ Car ç±»ï¼Œé€šè¿‡ setter æ³¨å…¥è·å¾— Engine å¯¹è±¡ï¼Œæ–¹æ³•æ˜¯ç”¨@Autowiredæ³¨è§£ setEngine æ–¹æ³•:</p><pre><code>@Component</code><code>public class Car {</code><br><br><br><br><code> private Engine engine;</code><br><br><br><br><br><code> public void start {</code><br><br><code> engine.turnOn;</code><br><br><code> }</code><br><br><br><br><code> public Engine getEngine {</code><br><br><code> return engine;</code><br><br><code> }</code><br><br><br><br><code> @Autowired</code><br><br><code> public void setEngine(Engine engine) {</code><br><br><code> this.engine = engine;</code><br><br><code> }</code><br><br><code>}</code></pre><p>Setter æ³¨å…¥ç±»ä¼¼äºå­—æ®µæ³¨å…¥ï¼Œä½†å®ƒå…è®¸æˆ‘ä»¬ä¸ æ³¨å…¥å¯¹è±¡äº¤äº’ã€‚åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œsetter æ³¨å…¥å¯èƒ½ç‰¹åˆ«æœ‰ç”¨ï¼Œä¾‹å¦‚å…·æœ‰å¾ªç¯ä¾èµ–å…³ç³»ï¼Œä½† setter æ³¨å…¥å¯èƒ½æ˜¯ä¸‰ç§æ³¨å…¥æŠ€æœ¯ä¸­æœ€ä¸å¸¸è§çš„ï¼Œ<strong>å°½å¯èƒ½ä¼˜å…ˆä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ã€‚</strong></p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7YR5xGDl><p><strong>åŸºäº xml çš„é…ç½®</strong></p><p>å¦ä¸€ç§é…ç½®æ–¹æ³•æ˜¯åŸºäº xml çš„é…ç½®ã€‚æˆ‘ä»¬åœ¨ XML é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ bean ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œç„¶åæŒ‡ç¤º Spring åœ¨å“ªé‡Œæ‰¾åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰ beanã€‚æˆ‘ä»¬åŸºæœ¬éµå¾ªä¸åŸºäº java çš„åŸºæœ¬é…ç½®ç›¸åŒçš„æ­¥éª¤ï¼Œä½†ä½¿ç”¨ xmlbean å…ƒç´ ä»£æ›¿ã€‚åœ¨ XML çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æ˜¾å¼åœ°å£°æ˜æˆ‘ä»¬æ‰“ç®—ä½¿ç”¨ constructor-arg å…ƒç´ æ³¨å…¥åˆ°å…¶ä»–æ„é€ å‡½æ•°ä¸­çš„ beanã€‚ç»“åˆ bean å’Œ constructor-arg å…ƒç´ ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ XML é…ç½®:</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code><br><br><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"</code><br><br><code> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</code><br><br><code> xmlns:util="http://www.springframework.org/schema/util"</code><br><br><code> xsi:schemaLocation="</code><br><br><code> http://www.springframework.org/schema/beans</code><br><br><code> http://www.springframework.org/schema/beans/spring-beans.xsd</code><br><br><code> http://www.springframework.org/schema/util</code><br><br><code> http://www.springframework.org/schema/util/spring-util.xsd"&gt;</code><br><br><br><br><code> &lt;bean id="car" class="com.milo.domain.Car"&gt;</code><br><br><code> &lt;constructor-arg ref="engine" /&gt;</code><br><br><code> &lt;/bean&gt;</code><br><br><br><br><br><code> &lt;bean id="engine" class="com.milo.CombustionEngine"&gt;</code><br><br><code> &lt;constructor-arg ref="camshaft" /&gt;</code><br><br><code> &lt;constructor-arg ref="crankshaft" /&gt;</code><br><br><code> &lt;/bean&gt;</code><br><br><br><br><br><code> &lt;bean id="camshaft" class="com.milo.Camshaft" /&gt;</code><br><br><code> &lt;bean id="crankshaft" class="com.milo.Crankshaft" /&gt;</code><br><br><br><br><code>&lt;/beans&gt;</code></pre><p>åœ¨ bean å…ƒç´ ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®šä¸¤ä¸ªå±æ€§:</p><ol><li><p>id : bean çš„å”¯ä¸€ ID (ç›¸å½“äºå¸¦æœ‰@Bean æ³¨è§£æ–¹æ³•å</p></li><li><p>class : ç±»çš„å…¨è·¯å¾„(åŒ…æ‹¬åŒ…å)</p></li></ol><p>å¯¹äº constructor-arg å…ƒç´ ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®š ref å±æ€§ï¼Œå®ƒæ˜¯å¯¹ç°æœ‰ bean ID çš„å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œå…ƒç´ æ„é€ å‡½æ•° &lt;constructor-arg ref="engine" /> è§„å®šï¼Œå…·æœ‰ ID engine(ç›´æ¥å®šä¹‰åœ¨ car bean ä¹‹ä¸‹)çš„ bean åº”è¯¥è¢«ç”¨ä½œæ³¨å…¥ car bean æ„é€ å‡½æ•°çš„ beanã€‚</p><p>æ„é€ å‡½æ•°å‚æ•°çš„é¡ºåºç”± constructor-arg å…ƒç´ çš„é¡ºåºå†³å®šã€‚ä¾‹å¦‚ï¼Œåœ¨å®šä¹‰ engine bean æ—¶ï¼Œä¼ é€’ç»™ CombustionEngine æ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°å‚æ•°æ˜¯ camshaft beanï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ crankshaft beanã€‚</p><p>è·å–ApplicationContextå¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€ä¿®æ”¹ ApplicationContext å®ç°ç±»å‹ã€‚å› ä¸ºæˆ‘ä»¬å°† XML é…ç½®æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ ClassPathXmlApplicationContext:</p><pre><code>ApplicationContext context = </code><br><br><code> new ClassPathXmlApplicationContext("basic-config.xml");</code><br><br><code>Car car = context.getBean(Car.class);</code><br><br><code>car.start;</code></pre><p>æ‰§è¡Œç»“æœ:</p><pre><code>Started combustion engine</code></pre><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7uHXU5GZc><p><strong>å¸¸è§é—®é¢˜</strong></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ‘¸æ¸…äº†Springæ¡†æ¶å¦‚ä½•è¿›è¡ŒDIï¼Œå¹¶æ­£ç¡®åœ°å°†æ‰€æœ‰ä¾èµ–å…³ç³»æ³¨å…¥åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å¤„ç†ä¸¤ä¸ªæ£˜æ‰‹çš„é—®é¢˜:</p><ol><li><p>ä¾èµ–å¯¹è±¡å†²çª</p></li><li><p>ä¾èµ–å¯¹è±¡é—´å­˜åœ¨å¾ªç¯ä¾èµ–</p></li></ol><p>5.1 å…·æœ‰å¤šä¸ªç¬¦åˆæ¡ä»¶çš„ä¾èµ–å¯¹è±¡</p><p>åœ¨åŸºäº java å’ŒåŸºäº xml çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŒ‡ç¤º Spring åªä½¿ç”¨ CombustionEngine ä½œä¸ºæˆ‘ä»¬çš„Engineå®ç°ã€‚å¦‚æœæˆ‘ä»¬å°†ElectricEngineæ³¨å†Œä¸ºç¬¦åˆ di æ ‡å‡†çš„éƒ¨ä»¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¸ºäº†æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬å°†ä¿®æ”¹åŸºäº java çš„è‡ªåŠ¨é…ç½®ç¤ºä¾‹ï¼Œå¹¶ç”¨@Component æ³¨è§£ ElectricEngine ç±»:</p><pre><code>@Component</code><code>public class ElectricEngine implements Engine {</code><br><br><br><br><code> @Override</code><br><br><code> public void turnOn {</code><br><br><code> System.out.println("Started electric engine");</code><br><br><code> }</code><br><code>}</code></pre><p>å¦‚æœæˆ‘ä»¬é‡æ–°è¿è¡ŒåŸºäº java çš„è‡ªåŠ¨é…ç½®åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä»¥ä¸‹é”™è¯¯:</p><pre><code>No qualifying bean of type 'com.dzone.albanoj2.spring.di.domain.Engine' available: expected single matching bean but found 2: combustionEngine,electricEngine</code></pre><p>ç”±äºæˆ‘ä»¬å·²ç»æ³¨é‡Šäº†ç”¨@Component å®ç° Engine æ¥å£çš„ä¸¤ä¸ªç±»ãƒ¼ãƒ¼å³ CombustionEngine å’ŒElectricEngine ãƒ¼ãƒ¼ spring ç°åœ¨æ— æ³•ç¡®å®šåœ¨å®ä¾‹åŒ– Car å¯¹è±¡æ—¶åº”è¯¥ä½¿ç”¨è¿™ä¸¤ä¸ªç±»ä¸­çš„å“ªä¸€ä¸ªæ¥æ»¡è¶³ Engine ä¾èµ–æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®åœ°æŒ‡ç¤º Spring ä½¿ç”¨è¿™ä¸¤ä¸ª bean ä¸­çš„å“ªä¸€ä¸ªã€‚</p><p>5.1.1 @ Qualifier æ³¨è§£</p><p>ä¸€ç§æ–¹æ³•æ˜¯ç»™æˆ‘ä»¬çš„ä¾èµ–å¯¹è±¡å‘½å,å¹¶åœ¨åº”ç”¨@Autowiredæ³¨è§£çš„åœ°æ–¹ä½¿ç”¨@Qualifieræ³¨è§£æ¥ç¡®å®šæ³¨å…¥å“ªä¸€ä¸ªä¾èµ–å¯¹è±¡ã€‚æ‰€ä»¥,@Qualifier æ³¨è§£é™å®šäº†è‡ªåŠ¨æ³¨å…¥çš„ beanï¼Œä»è€Œå°†æ»¡è¶³éœ€æ±‚çš„ bean æ•°é‡å‡å°‘åˆ°ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‘½åæˆ‘ä»¬çš„CombustionEngineä¾èµ–å¯¹è±¡:</p><pre><code>@Component("defaultEngine")</code><code>public class CombustionEngine implements Engine {</code><br><br><br><code> // ...ä»£ç çœç•¥,æœªæ”¹å˜</code><br><br><code>}</code></pre><p>ç„¶åæˆ‘ä»¬å¯ä»¥æ·»åŠ @Qualifier æ³¨è§£,å…¶åç§°å’Œæˆ‘ä»¬æƒ³è¦æ³¨å…¥çš„ä¾èµ–å¯¹è±¡çš„åç§°ä¿æŒä¸€è‡´,è¿™æ ·,æˆ‘ä»¬Engine å¯¹è±¡åœ¨ Car æ„é€ å‡½æ•°ä¸­è¢«è‡ªåŠ¨æ³¨å…¥</p><pre><code>@Component</code><code>public class Car {</code><br><br><code> @Autowired</code><br><br><code> public Car(@Qualifier("defaultEngine") Engine engine) {</code><br><br><code> this.engine = engine;</code><br><br><code> }</code><br><br><br><code> // ...existing implementation unchanged...</code><br><br><code>}</code></pre><p>å¦‚æœæˆ‘ä»¬é‡æ–°è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¸å†æŠ¥ä»¥å‰çš„é”™è¯¯:</p><pre><code>Started combustion engine</code></pre><p>æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼ç”³æ˜beanåç§°çš„ç±»éƒ½æœ‰ä¸€ä¸ªé»˜è®¤åç§°ï¼Œè¯¥é»˜è®¤åç§°å°±æ˜¯ç±»åé¦–å­—æ¯å°å†™ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„ Combusttionengine ç±»çš„é»˜è®¤åç§°æ˜¯ combusttionengine</p><p>5.1.2 @ Primary æ³¨è§£</p><p>å¦‚æœæˆ‘ä»¬çŸ¥é“é»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬æ›´å–œæ¬¢ä¸€ä¸ªå®ç°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ”¾å¼ƒ@Qualifier æ³¨é‡Šï¼Œç›´æ¥å°†@Primary æ³¨é‡Šæ·»åŠ åˆ°ç±»ä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„ Combusttionengineã€ ElectricEngine å’Œ Car ç±»æ›´æ”¹ä¸º:</p><pre><code>@Component</code><code>@Primary</code><br><br><code>public class CombustionEngine implements Engine {</code><br><br><br><br><br><code> // ...existing implementation unchanged...</code><br><br><code>}</code><br><br><code>@Component</code><code>public class ElectricEngine implements Engine {</code><br><br><br><br><br><code> // ...existing implementation unchanged...</code><br><br><code>}</code><br><br><br><br><code>@Component</code><code>public class Car {</code><br><br><br><br><br><code> @Autowired</code><br><br><code> public Car(Engine engine) {</code><br><br><code> this.engine = engine;</code><br><br><code> }</code><br><br><br><br><br><code> // ...existing implementation unchanged...</code><br><br><code>}</code></pre><p>æˆ‘ä»¬é‡æ–°è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡º:</p><pre><code>Started combustion engine</code></pre><p>è¿™è¯æ˜ï¼Œè™½ç„¶æœ‰ä¸¤ç§å¯èƒ½æ€§æ»¡è¶³ Engine ä¾èµ–æ€§ï¼Œå³ CombustionEngine å’Œ Electricengineï¼Œä½† Spring èƒ½å¤Ÿæ ¹æ®@Primary æ³¨é‡Šå†³å®šä¸¤ç§å®ç°ä¸­å“ªä¸€ç§åº”è¯¥ä¼˜å…ˆä½¿ç”¨ã€‚</p><p><strong>5.2 å¾ªç¯ä¾èµ–</strong></p><p>è™½ç„¶æˆ‘ä»¬å·²ç»æ·±å…¥è®¨è®ºäº† Spring DI çš„åŸºç¡€çŸ¥è¯†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªä¸»è¦é—®é¢˜æ²¡æœ‰è§£å†³: å¦‚æœä¾èµ–å…³ç³»æ ‘æœ‰ä¸€ä¸ªå¾ªç¯å¼•ç”¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Foo ç±»ï¼Œå®ƒçš„æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ª Bar å¯¹è±¡ï¼Œä½†æ˜¯ Bar æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ª Foo å¯¹è±¡ã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S0eL2M8CVbPtwY><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç å®ç°ä¸Šé¢é—®é¢˜:</p><pre><code>@Component</code><code>public class Foo {</code><br><br><br><br><br><br><code> private Bar bar;</code><br><br><br><br><code> @Autowired</code><br><br><code> public Foo(Bar bar) {</code><br><br><code> this.bar = bar;</code><br><br><code> }</code><br><br><code>}</code><br><br><br><br><code>@Component</code><code>public class Bar {</code><br><br><br><br><br><br><code> private Foo foo;</code><br><br><br><br><code> @Autowired</code><br><br><code> public Bar(Foo foo) {</code><br><br><code> this.foo = foo;</code><br><br><code> }</code><br><br><code>}</code></pre><p>ç„¶åæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»¥ä¸‹é…ç½®:</p><pre><code>@Configuration</code><code>@ComponentScan(basePackageClasses = Foo.class)</code><code>public class Config {}</code></pre><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæˆ‘ä»¬çš„ ApplicationContext:</p><pre><code>ApplicationContext context = </code><br><code> new AnnotationConfigApplicationContext(Config.class);</code><br><code>Foo foo = context.getBean(Foo.class);</code></pre><p>å½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªä»£ç ç‰‡æ®µæ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹é”™è¯¯:</p><pre><code>Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'bar': Requested bean is currently in creation: Is there an unresolvable circular reference?</code></pre><p>é¦–å…ˆï¼ŒSpring å°è¯•åˆ›å»º Foo å¯¹è±¡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒSpring è®¤è¯†åˆ°éœ€è¦ä¸€ä¸ª Bar å¯¹è±¡ã€‚ä¸ºäº†æ„é€  Bar å¯¹è±¡ï¼Œéœ€è¦ä¸€ä¸ª Foo å¯¹è±¡ã€‚ç”±äº Foo å¯¹è±¡ç›®å‰æ­£åœ¨æ„å»ºä¸­(è¿™ä¹Ÿæ˜¯åˆ›å»º Bar å¯¹è±¡çš„åŸå› ) ï¼Œspring è®¤è¯†åˆ°å¯èƒ½å‘ç”Ÿäº†å¾ªç¯å¼•ç”¨ã€‚</p><p>è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€æ˜¯åœ¨ä¸€ä¸ªç±»å’Œæ³¨å…¥ç‚¹ä¸Šä½¿ç”¨@Lazyæ³¨è§£ã€‚è¿™æŒ‡ç¤º Spring æ¨è¿Ÿå¸¦æ³¨è§£çš„ bean å’Œå¸¦æ³¨é‡Šçš„@Autowired ä½ç½®çš„åˆå§‹åŒ–ã€‚è¿™å…è®¸æˆåŠŸåœ°åˆå§‹åŒ–å…¶ä¸­ä¸€ä¸ª beanï¼Œä»è€Œæ‰“ç ´å¾ªç¯ä¾èµ–é“¾ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜ Foo å’Œ Bar ç±»:</p><pre><code>@Component</code><code>public class Foo {</code><br><br><br><br><br><code> private Bar bar;</code><br><br><br><br><code> @Autowired</code><br><br><code> public Foo(@Lazy Bar bar) {</code><br><br><code> this.bar = bar;</code><br><br><code> }</code><br><br><code>}</code><br><br><br><br><code>@Component</code><br><br><code>@Lazy</code><br><br><code>public class Bar {</code><br><br><br><br><code> @Autowired</code><br><br><code> public Bar(Foo foo) {}</code><br><br><code>}</code></pre><p>å¦‚æœä½¿ç”¨@Lazy æ³¨è§£åé‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰å‘ç°æŠ¥å‘Šä»»ä½•é”™è¯¯ã€‚</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTLSNam5ZxLDlM><p><strong>æ€»ç»“</strong></p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† Spring çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ IoCã€ DI å’Œ Spring ApplicationContextã€‚ç„¶åï¼Œæˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨åŸºäº java çš„é…ç½®å’ŒåŸºäº xml çš„é…ç½®åˆ›å»º Spring åº”ç”¨ç¨‹åºçš„åŸºæœ¬çŸ¥è¯†ï¼ŒåŒæ—¶ç ”ç©¶äº†ä½¿ç”¨ Spring DI æ—¶å¯èƒ½é‡åˆ°çš„ä¸€äº›å¸¸è§é—®é¢˜ã€‚è™½ç„¶è¿™äº›æ¦‚å¿µä¸€å¼€å§‹å¯èƒ½æ™¦æ¶©éš¾æ‡‚ï¼Œä¸ Spring ä»£ç è„±èŠ‚ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä»åŸºåº•å±‚è®¤è¯†Spirng,å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©,è°¢è°¢å¤§å®¶ã€‚</p><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œéº¦æ´›_ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/milogenius/article/details/106255686</p><img alt="ç›˜ä¸€ç›˜ Spring æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¾èµ–æ³¨å…¥ | åŸåŠ›è®¡åˆ’" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S0GVSUiJIQqlmu><pre><pre><pre><p>â˜å¼€æºå…¬å¸ HashiCorp å›½å†…é™©é­ç¦ï¼Œé˜¿é‡Œã€åä¸ºä¹Ÿè¦åšå¥½ B è®¡åˆ’ï¼Ÿ</p><p>â˜èˆªæ‹é«˜æ‰‹ã€å‰ä»–åçº§ï¼Œ6500+Star å¼€æºé¡¹ç›®ä½œè€…ï¼Œåæµªç¨‹åºå‘˜ç»™åŠ›ï¼</p><p>â˜é¢è¯•å®˜ï¼šä½ çš„ SQL ä¸€èˆ¬æœ‰å‡ ä¸ª joinï¼Ÿ| åŸåŠ›è®¡åˆ’</p><p>â˜åŸºäºæ·±åº¦å­¦ä¹ å’Œä¼ ç»Ÿç®—æ³•çš„äººä½“å§¿æ€ä¼°è®¡ï¼ŒæŠ€æœ¯ç»†èŠ‚éƒ½è®²æ¸…æ¥šäº†</p><p>â˜é¢è¯•ä¸­é‡åˆ°è¿™ 3 ä¸ªSQLé—®é¢˜ï¼Œæœ€å®¹æ˜“æ‰å‘é‡Œï¼</p><p>â˜å¥½æ‰‘ç§‘æŠ€ç»“åˆåŒºå—é“¾è¡Œä¸šå‘å±•è¶‹åŠ¿ï¼Œé‡ç£…æ¨å‡ºâ€œå¥½æ‰‘åŒºå—é“¾åˆä¼™äººâ€è®¡åˆ’</p></pre></pre></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'ç›˜ä¸€ç›˜','Spring','æŠ€æœ¯'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>