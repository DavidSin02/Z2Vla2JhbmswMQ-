<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Js获取当前日期时间及其它操作 | 极客快訊</title><meta property="og:title" content="Js获取当前日期时间及其它操作 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1ae24e43.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1ae24e43.html><meta property="article:published_time" content="2020-11-14T21:05:58+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:58+08:00"><meta name=Keywords content><meta name=description content="Js获取当前日期时间及其它操作"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1ae24e43.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Js获取当前日期时间及其它操作</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>var myDate = new Date();</p><p>myDate.getYear(); //获取当前年份(2位)</p><p>myDate.getFullYear(); //获取完整的年份(4位,1970-????)</p><p>myDate.getMonth(); //获取当前月份(0-11,0代表1月)</p><p>myDate.getDate(); //获取当前日(1-31)</p><p>myDate.getDay(); //获取当前星期X(0-6,0代表星期天)</p><p>myDate.getTime(); //获取当前时间(从1970.1.1开始的毫秒数)</p><p>myDate.getHours(); //获取当前小时数(0-23)</p><p>myDate.getMinutes(); //获取当前分钟数(0-59)</p><p>myDate.getSeconds(); //获取当前秒数(0-59)</p><p>myDate.getMilliseconds(); //获取当前毫秒数(0-999)</p><p>myDate.toLocaleDateString(); //获取当前日期</p><p>var mytime=myDate.toLocaleTimeString(); //获取当前时间</p><p>myDate.toLocaleString( ); //获取日期与时间</p><p><strong>日期时间</strong>脚本库方法列表</p><p><strong>Date</strong>.prototype.isLeapYear 判断闰年</p><p>Date.prototype.Format 日期格式化</p><p>Date.prototype.DateAdd 日期计算</p><p>Date.prototype.DateDiff 比较日期差</p><p>Date.prototype.toString 日期转字符串</p><p>Date.prototype.toArray 日期分割为数组</p><p>Date.prototype.DatePart 取日期的部分信息</p><p>Date.prototype.MaxDayOfDate 取日期所在月的最大<strong>天数</strong></p><p>Date.prototype.WeekNumOfYear 判断日期所在年的第几周</p><p>StringToDate 字符串转日期型</p><p>IsValidDate 验证日期有效性</p><p>CheckDateTime 完整日期时间检查</p><p>daysBetween 日期天数差</p><p>js代码：</p><p>//---------------------------------------------------</p><p>// 判断闰年</p><p>//---------------------------------------------------</p><p>Date.prototype.isLeapYear = function()</p><p>{</p><p>return (0==this.getYear()%4&&((this.getYear()%100!=0)||(this.getYear()%400==0)));</p><p>}</p><p>//---------------------------------------------------</p><p>// 日期格式化</p><p>// 格式 YYYY/yyyy/YY/yy 表示年份</p><p>// MM/M 月份</p><p>// W/w 星期</p><p>// dd/DD/d/D 日期</p><p>// hh/HH/h/H 时间</p><p>// mm/m 分钟</p><p>// ss/SS/s/S 秒</p><p>//---------------------------------------------------</p><p>Date.prototype.Format = function(formatStr)</p><p>{</p><p>var str = formatStr;</p><p>var Week = ['日','一','二','三','四','五','六'];</p><p>str=str.replace(/yyyy|YYYY/,this.getFullYear());</p><p>str=str.replace(/yy|YY/,(this.getYear() % 100)>9?(this.getYear() % 100).toString():'0' + (this.getYear() % 100));</p><p>str=str.replace(/MM/,this.getMonth()>9?this.getMonth().toString():'0' + this.getMonth());</p><p>str=str.replace(/M/g,this.getMonth());</p><p>str=str.replace(/w|W/g,Week[this.getDay()]);</p><p>str=str.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():'0' + this.getDate());</p><p>str=str.replace(/d|D/g,this.getDate());</p><p>str=str.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():'0' + this.getHours());</p><p>str=str.replace(/h|H/g,this.getHours());</p><p>str=str.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():'0' + this.getMinutes());</p><p>str=str.replace(/m/g,this.getMinutes());</p><p>str=str.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():'0' + this.getSeconds());</p><p>str=str.replace(/s|S/g,this.getSeconds());</p><p>return str;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 求两个时间的天数差 日期格式为 YYYY-MM-dd</p><p>//+---------------------------------------------------</p><p>function daysBetween(DateOne,DateTwo)</p><p>{</p><p>var OneMonth = DateOne.substring(5,DateOne.lastIndexOf ('-'));</p><p>var OneDay = DateOne.substring(DateOne.length,DateOne.lastIndexOf ('-')+1);</p><p>var OneYear = DateOne.substring(0,DateOne.indexOf ('-'));</p><p>var TwoMonth = DateTwo.substring(5,DateTwo.lastIndexOf ('-'));</p><p>var TwoDay = DateTwo.substring(DateTwo.length,DateTwo.lastIndexOf ('-')+1);</p><p>var TwoYear = DateTwo.substring(0,DateTwo.indexOf ('-'));</p><p>var cha=((Date.parse(OneMonth+'/'+OneDay+'/'+OneYear)- Date.parse(TwoMonth+'/'+TwoDay+'/'+TwoYear))/86400000);</p><p>return Math.abs(cha);</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 日期计算</p><p>//+---------------------------------------------------</p><p>Date.prototype.DateAdd = function(strInterval, Number) {</p><p>var dtTmp = this;</p><p>switch (strInterval) {</p><p>case 's' :return new Date(Date.parse(dtTmp) + (1000 * Number));</p><p>case 'n' :return new Date(Date.parse(dtTmp) + (60000 * Number));</p><p>case 'h' :return new Date(Date.parse(dtTmp) + (3600000 * Number));</p><p>case 'd' :return new Date(Date.parse(dtTmp) + (86400000 * Number));</p><p>case 'w' :return new Date(Date.parse(dtTmp) + ((86400000 * 7) * Number));</p><p>case 'q' :return new Date(dtTmp.getFullYear(), (dtTmp.getMonth()) + Number*3, dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());</p><p>case 'm' :return new Date(dtTmp.getFullYear(), (dtTmp.getMonth()) + Number, dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());</p><p>case 'y' :return new Date((dtTmp.getFullYear() + Number), dtTmp.getMonth(), dtTmp.getDate(), dtTmp.getHours(), dtTmp.getMinutes(), dtTmp.getSeconds());</p><p>}</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 比较日期差 dtEnd 格式为日期型或者有效日期格式字符串</p><p>//+---------------------------------------------------</p><p>Date.prototype.DateDiff = function(strInterval, dtEnd) {</p><p>var dtStart = this;</p><p>if (typeof dtEnd == 'string' )//如果是字符串转换为日期型</p><p>{</p><p>dtEnd = StringToDate(dtEnd);</p><p>}</p><p>switch (strInterval) {</p><p>case 's' :return parseInt((dtEnd - dtStart) / 1000);</p><p>case 'n' :return parseInt((dtEnd - dtStart) / 60000);</p><p>case 'h' :return parseInt((dtEnd - dtStart) / 3600000);</p><p>case 'd' :return parseInt((dtEnd - dtStart) / 86400000);</p><p>case 'w' :return parseInt((dtEnd - dtStart) / (86400000 * 7));</p><p>case 'm' :return (dtEnd.getMonth()+1)+((dtEnd.getFullYear()-dtStart.getFullYear())*12) - (dtStart.getMonth()+1);</p><p>case 'y' :return dtEnd.getFullYear() - dtStart.getFullYear();</p><p>}</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 日期输出字符串，重载了系统的toString方法</p><p>//+---------------------------------------------------</p><p>Date.prototype.toString = function(showWeek)</p><p>{</p><p>var myDate= this;</p><p>var str = myDate.toLocaleDateString();</p><p>if (showWeek)</p><p>{</p><p>var Week = ['日','一','二','三','四','五','六'];</p><p>str += ' 星期' + Week[myDate.getDay()];</p><p>}</p><p>return str;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 日期合法性验证</p><p>//| 格式为：YYYY-MM-DD或YYYY/MM/DD</p><p>//+---------------------------------------------------</p><p>function IsValidDate(DateStr)</p><p>{</p><p>var sDate=DateStr.replace(/(^\s+|\s+$)/g,''); //去两边空格;</p><p>if(sDate=='') return true;</p><p>//如果格式满足YYYY-(/)MM-(/)DD或YYYY-(/)M-(/)DD或YYYY-(/)M-(/)D或YYYY-(/)MM-(/)D就替换为''</p><p>//数据库中，合法日期可以是:YYYY-MM/DD(2003-3/21),数据库会自动转换为YYYY-MM-DD格式</p><p>var s = sDate.replace(/[\d]{ 4,4 }[\-/]{ 1 }[\d]{ 1,2 }[\-/]{ 1 }[\d]{ 1,2 }/g,'');</p><p>if (s=='') //说明格式满足YYYY-MM-DD或YYYY-M-DD或YYYY-M-D或YYYY-MM-D</p><p>{</p><p>var t=new Date(sDate.replace(/\-/g,'/'));</p><p>var ar = sDate.split(/[-/:]/);</p><p>if(ar[0] != t.getYear() || ar[1] != t.getMonth()+1 || ar[2] != t.getDate())</p><p>{</p><p>//alert('错误的日期格式！格式为：YYYY-MM-DD或YYYY/MM/DD。注意闰年。');</p><p>return false;</p><p>}</p><p>}</p><p>else</p><p>{</p><p>//alert('错误的日期格式！格式为：YYYY-MM-DD或YYYY/MM/DD。注意闰年。');</p><p>return false;</p><p>}</p><p>return true;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 日期时间检查</p><p>//| 格式为：YYYY-MM-DD HH:MM:SS</p><p>//+---------------------------------------------------</p><p>function CheckDateTime(str)</p><p>{</p><p>var reg = /^(\d+)-(\d{ 1,2 })-(\d{ 1,2 }) (\d{ 1,2 }):(\d{ 1,2 }):(\d{ 1,2 })$/;</p><p>var r = str.match(reg);</p><p>if(r==null)return false;</p><p>r[2]=r[2]-1;</p><p>var d= new Date(r[1],r[2],r[3],r[4],r[5],r[6]);</p><p>if(d.getFullYear()!=r[1])return false;</p><p>if(d.getMonth()!=r[2])return false;</p><p>if(d.getDate()!=r[3])return false;</p><p>if(d.getHours()!=r[4])return false;</p><p>if(d.getMinutes()!=r[5])return false;</p><p>if(d.getSeconds()!=r[6])return false;</p><p>return true;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 把日期分割成数组</p><p>//+---------------------------------------------------</p><p>Date.prototype.toArray = function()</p><p>{</p><p>var myDate = this;</p><p>var myArray = Array();</p><p>myArray[0] = myDate.getFullYear();</p><p>myArray[1] = myDate.getMonth();</p><p>myArray[2] = myDate.getDate();</p><p>myArray[3] = myDate.getHours();</p><p>myArray[4] = myDate.getMinutes();</p><p>myArray[5] = myDate.getSeconds();</p><p>return myArray;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 取得日期数据信息</p><p>//| 参数 interval 表示数据类型</p><p>//| y 年 m月 d日 w星期 ww周 h时 n分 s秒</p><p>//+---------------------------------------------------</p><p>Date.prototype.DatePart = function(interval)</p><p>{</p><p>var myDate = this;</p><p>var partStr='';</p><p>var Week = ['日','一','二','三','四','五','六'];</p><p>switch (interval)</p><p>{</p><p>case 'y' :partStr = myDate.getFullYear();break;</p><p>case 'm' :partStr = myDate.getMonth()+1;break;</p><p>case 'd' :partStr = myDate.getDate();break;</p><p>case 'w' :partStr = Week[myDate.getDay()];break;</p><p>case 'ww' :partStr = myDate.WeekNumOfYear();break;</p><p>case 'h' :partStr = myDate.getHours();break;</p><p>case 'n' :partStr = myDate.getMinutes();break;</p><p>case 's' :partStr = myDate.getSeconds();break;</p><p>}</p><p>return partStr;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 取得当前日期所在月的最大天数</p><p>//+---------------------------------------------------</p><p>Date.prototype.MaxDayOfDate = function()</p><p>{</p><p>var myDate = this;</p><p>var ary = myDate.toArray();</p><p>var date1 = (new Date(ary[0],ary[1]+1,1));</p><p>var date2 = date1.dateAdd(1,'m',1);</p><p>var result = dateDiff(date1.Format('yyyy-MM-dd'),date2.Format('yyyy-MM-dd'));</p><p>return result;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 取得当前日期所在周是一年中的第几周</p><p>//+---------------------------------------------------</p><p>Date.prototype.WeekNumOfYear = function()</p><p>{</p><p>var myDate = this;</p><p>var ary = myDate.toArray();</p><p>var year = ary[0];</p><p>var month = ary[1]+1;</p><p>var day = ary[2];</p><p>document.write('&lt; script language=VBScript\> \n');</p><p>document.write('myDate = Datue(''+month+'-'+day+'-'+year+'') \n');</p><p>document.write('result = DatePart('ww', myDate) \n');</p><p>document.write(' \n');</p><p>return result;</p><p>}</p><p>//+---------------------------------------------------</p><p>//| 字符串转成日期类型</p><p>//| 格式 MM/dd/YYYY MM-dd-YYYY YYYY/MM/dd YYYY-MM-dd</p><p>//+---------------------------------------------------</p><p>function StringToDate(DateStr)</p><p>{</p><p>var converted = Date.parse(DateStr);</p><p>var myDate = new Date(converted);</p><p>if (isNaN(myDate))</p><p>{</p><p>//var delimCahar = DateStr.indexOf('/')!=-1?'/':'-';</p><p>var arys= DateStr.split('-');</p><p>myDate = new Date(arys[0],--arys[1],arys[2]);</p><p>}</p><p>return myDate;</p><p>}</p><p>若要显示:当前日期加时间(如:2009-06-12 12:00)</p><p>function CurentTime()</p><p>{</p><p>var now = new Date();</p><p>var year = now.getFullYear(); //年</p><p>var month = now.getMonth() + 1; //月</p><p>var day = now.getDate(); //日</p><p>var hh = now.getHours(); //时</p><p>var mm = now.getMinutes(); //分</p><p>var clock = year + "-";</p><p>if(month &lt; 10)</p><p>clock += "0";</p><p>clock += month + "-";</p><p>if(day &lt; 10)</p><p>clock += "0";</p><p>clock += day + " ";</p><p>if(hh &lt; 10)</p><p>clock += "0";</p><p>clock += hh + ":";</p><p>if (mm &lt; 10) clock += '0';</p><p>clock += mm;</p><p>return(clock);</p><p>}</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Js','获取','当前'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>