<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>芯片设计一举定乾坤（功率错误篇） | 极客快訊</title><meta property="og:title" content="芯片设计一举定乾坤（功率错误篇） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/70c05cb51dec4084b9f9302adfffc2a5"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1c964a6f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1c964a6f.html><meta property="article:published_time" content="2020-11-14T21:01:50+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:50+08:00"><meta name=Keywords content><meta name=description content="芯片设计一举定乾坤（功率错误篇）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1c964a6f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>芯片设计一举定乾坤（功率错误篇）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>芯片设计成败标准如何定义</p><p><br></p><p>而器件功率错误在其中是何种角色</p><p><br></p><p>EDA疾行当下 如何有效降低损耗</p><p><br></p><p>是摆在每位电子工程师面前的问题</p><p><br></p><p>文章较长 但试图以多维度呈现解决之道</p><p><br></p><p>本文解读器件浪费的能量去了哪里，如何测量器件的消耗能量，以及能量如何与硅基芯片相关联。</p><p><br></p><p>设计在执行特定功能时打算消耗多少功率？对于许多设计者来说，这个数字会决定设计的成功和失败，但是知道正确的消耗功率数字并不像听起来那么容易。</p><p><br></p><p>在做功率分析时可以预测的功率数字和芯片消耗的功率数字之间存在巨大的差距。如何消除差距？对工具提出了新的挑战和要求。这使功率分析和早期尝试的功率优化成为EDA最具创新性的领域之一。</p><p><br></p><p>为应对挑战，设计和验证团队必须重新配置，同时平衡来自降低功耗和改进设计或更便宜产品的投资回报。“具有功耗意识的设计至关重要，它在市场上得到了很多关注，但实现这根本不是一个简单的过程，它与之前的计算方法完全不同，并且还要取决于设计的种类。“Arm工程师James Myers说。</p><p><br></p><p><strong>寻找功率错误</strong></p><p>如何定义功率错误？Ansys PowerArtist产品管理负责人Preeti Gupta说：“我们将功率错误定义为人们不希望的功率消耗，哪些功率消耗对设计的功能没有帮助。”</p><p><br></p><p>当芯片出厂后消耗的功率比预期更多的能量时，这可能就会问一个更重要的问题。如何找到导致功率错误的原因？可能是什么导致了预测值与实际值之间的差异？设计过程让没有注意到的地方是什么？下图显示了一些潜在的内部消耗功率联系。</p><p><br></p><div class=pgc-img><img alt=芯片设计一举定乾坤（功率错误篇） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/70c05cb51dec4084b9f9302adfffc2a5><p class=pgc-img-caption>一般的临时功率分析 信源 | Cadence</p></div><p><br></p><p>该错误可能随时出现，例如在最高的抽象级别，以及介于两者之间的所有位置出现。设备设计拥有一定的灵活性可能是好事，也可能是坏事。</p><p><br></p><p>如今的设备几乎处于金字塔顶级水平。功率即使有微小的变化，也可极大改变设备的工作方式。我们如何准确测量功率，以及如何将仿真提供的这些功率值与实际硅片相关联？这个问题越来越大，因为在硅片上您无法准确查明某个特定块（例如存储器）的浪费功率程度，我们是无法测量该信息。”</p><p><br></p><p>在系统层次上，存在不同的问题。Ansys的Gupta说：“仿真器固有地受到它们可以模拟的循环数或可以运行的实际方案数的限制。用户需要能够获取真正芯片级功率流量，并在早期建模。他们需要考虑十亿个时钟周期内，有不同的操作模式，这就是相应的功率曲线。这是当我的视频IP打开和关闭时，CPU子系统或GPU子系统处于空闲状态，任何暴露出来的功率错误都会产生非常大的影响时。设想一下您的GPU子系统可能已关闭几秒钟的情况，在简单的模拟场景中，计算机无法识别这一点，但是在实际的应用场景中就人们能够意识到这一点。”</p><p><br></p><p><strong>担忧的日益扩大</strong></p><p>团队必须对功率保持高度关注。Cadence的Knoth问道“你最担心的是什么？”。下图显示了一些潜在的问题。“这是一个热问题吗？是峰值功率问题吗？它是备用电源问题吗？是di / dt问题吗？您担心唤醒冲击电流吗？”</p><p><br></p><div class=pgc-img><img alt=芯片设计一举定乾坤（功率错误篇） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/36c608121f70426fb06289a0bc78248b><p class=pgc-img-caption>五种电源场景 信源 | Cadence</p></div><p><br></p><p>一些设计者承认设计中必须存在反馈环路，以便能够允许就地处理电源问题。Arm公司的Myers说：“在服务器方面，重点可能是在固定散热范围内如何控制最大限度提高吞吐量，这取决于有功功率/ GHz，散热管理和对电源噪声容限，其中一些以功能可以在硅化后通过表征电压和温度传感器然后调整系统管理软件来完成，因此设备可配置性很重要。但是，也存在复杂的硬件设计反馈环路，例如何时对待特定的数据块节约能量，以在对吞吐量影响最小的情况下保持系统完整性。电流尖峰对于系统完整性而言是成问题的，但取决于去耦电容，布局图中的相邻模块，当前DVFS之类的节点，调节器负载，封装布局等。考虑到所有这些因素，反馈回路通常会很长，并且存在不稳定的风险，因此需要新的方法，因为太多的静态余量会直接影响性能。”</p><p><br></p><p>有些人关心功率的整体性。Knoth说：“一些公司正在将对话从我们正在做的最优化功率，变为我们正在做的最优化能量？归根结底，功率才是真正完成工作的要素。能量在很多方面对我们来说都是一件容易的事，对于我们来说也很容易，但功率才是最终目标，我们越能直接测量它，就越能创建有助于理解它并与之匹配的测量工具。”</p><p><br></p><p>曾经被单独分析功率的许多方面现在都已由物理属性联系起来。热量会同时影响静态和动态功率，并且还会影响时序。芯片上的电流活动会产生热量，因此存在反馈回路。仿真场景必须足够长，不仅要产生热量，还要使热量散布在芯片上，以查看其对相邻器件的影响。</p><p><br></p><p>Gupta说：“部分功耗取决于芯片功能的结构。第二部分取决于在设计中程序运行的流动方式。运行对功率有第一级的影响，当然布局和变化效应也很重要。由于时钟是您设计中最快的信号，并且它控制着设计中发生的许多功耗，因此时钟方面引起了很多关注。我们可以关闭时钟，可以节省很多电量。若可以切断电源，从而节省更多功率。”</p><p><br></p><p>功率必须是程序流程不可或缺的一部分。Knoth说：“这是一种多层的计算，你必须考虑可以利用今天掌握的信息得出的各种有效结论。随着设计的进行和事物的成熟，你将能够获得更高的准确性，并且能够对产品有更多的了解，但是有时你可以改变的量却会减少。随着时间的推移，它变少了。您早期拥有的灵活性较多，但准确性最低。什么时候需要确定有关封装，散热器，电路稳定性的某些决定？你必须从整体产品计划的角度来看待这一点。”</p><p><br></p><p>这始终是一种微妙的平衡。Ambiq结构与产品规划副总裁Dan Cermak说：“随着硅晶体使用技术的发展，总是会遇到GIGO效应（垃圾进垃圾出）的挑战和风险，在设计阶段过早进行电源调试可能会给产品造成误导或错误的结果，但是等到最终设计完后启动电源调试为时已晚，无法影响有意义的更改。”</p><p><br></p><p><strong>结果准确度</strong></p><p>模拟结果的准确性取决于对必要的物理效应建模的好坏。功能都是关于1和0，但功率准确度问题可能会是一个大麻烦。</p><p><br></p><div class=pgc-img><img alt=芯片设计一举定乾坤（功率错误篇） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/eecb892f82db41ee8df853dc88988483><p class=pgc-img-caption>图源 | higherincomejobs.com</p></div><p><br></p><p>Synopsys的Thanikasalam说：“你可以考虑一下内存。有一些位线穿过SRAM存储器，而该存储器的主要功率来自这些位线摆动。他们消耗了很多能量。在做模拟仿真时，你可以将其设置为VDD或接地。在真正的芯片中，您无能为力做到这一点。即使位线上升到VDD，随着时间的推移，该位线也将开始泄漏，因为没有任何东西可以使该位线保持在VDD点。这些是差分对，它们可以恰好位于中间，然后消耗大量功率。因此，模拟器与真实芯片的工作方式之间存在很大的相关性差距。”</p><p><br></p><p>即使假设采用数字抽象法，也仍有很大的出错空间。Ambiq的Cermak说：“在仿真过程中确定必须分析的适当工作负载/方案存在问题很重要，这是代表性的工作运行进程吗？它是否涵盖了设计的所有关键操作模式吗？对于较大的设计，这样的问题变得更加复杂，因为您必须将这些工作负载分解为较小的微型工作负载才能进行实际评估。”</p><p><br></p><p>Knoth补充说：“你的功率分析仅与您的向量一样，您必须向上一级看问题，在哪里看，此向量的覆盖范围是多少？活动看起来如何？我们已经投入大量资金来构建实用程序，以帮助客户在仿真本身上做更多的工作，将不同的向量合并在一起以创建新的场景，从而在一个向量与另一个向量之间扩展活动。”</p><p><br></p><p>整个过程比功能验证要复杂得多。Thanikasalam说：“除非你使用激励电路的一部分，否则不会触发该设备，也不会有散发出的热量，在进行模拟仿真时，必须确保电路的每个部分实际上都在使用运行，从而使测试平台更加严格。这会对性能产生负面影响，并且需要更多时间和计算。它不再是一个单一的问题。您必须同时解决所有问题。使隔离单一的仿真结果变得准确异常困难。”</p><p><br></p><p>您不能随意创建大型向量集。Gupta说“我可能有成千上万个向量，如何识别所有这些向量中最活跃的信号。我有时序的关键路径，我该如何表征沿这些路径的时序功率敏感度以便做出设计决策？方法是我们需要能够存储各种与电源相关的数据的能力，然后是框架和API，用户可以在其中查看大型设计，长向量，并帮助他们获得有意义的结果。”</p><p><br></p><p><strong>IP问题</strong></p><div class=pgc-img><img alt=芯片设计一举定乾坤（功率错误篇） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/75abbb0c3dce4abc8ce07fa65aa2a840><p class=pgc-img-caption>图源 | digikey.com</p></div><p><br></p><p>在设计中使用IP时，可能会对所提供电源模型的保真度存在疑问。Myers说：“如果采用数字逻辑，并且您有适当的仿真激励，那么EDA工具会很好地确定功率的消耗方，但是它们对于检查内部宏功能（如内存或设计的混合信号部分）没有帮助，因为你依赖于设计人员或IP提供商。幸运的是，在这方面有一些标准计划，例如IEEE 1801，它正在寻求增强的功耗感知和宏模型标准建立。”</p><p><br></p><p>现在还在测试的早期阶段。Knoth说：“在包装和销售IP时，功率信息与时序信息同等重要，这一事实在标准化方面已经取得了很大的进步，即使您只看时序模型在整个行业的传播情况，自从首次引入Liberty模型以来，发生了令人难以置信的演变，而功率具有比时序更大的维度。”</p><p><br></p><p>目前，问题仍然存在。Thanikasalam表示：“当设计公司为最终客户定义其功率规格时，会有很多假设。这些设置用于那种电源使用情况，在实际的芯片上甚至不可能实现这些特定设置。因此，基于模拟仿真的报告与芯片提供的实际数字之间存在差异。”</p><p><br></p><p><strong>功率错误是谁的责任？</strong></p><div class=pgc-img><img alt=芯片设计一举定乾坤（功率错误篇） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4b7332a7953e47c8ae624c510d08610a><p class=pgc-img-caption>图源 | galco.com</p></div><p><br></p><p>设计和验证团队可以协同工作，但又彼此独立。理解电源比功率验证需要更多的设计知识，那么谁最终负责发现功率错误？</p><p><br></p><p>Gupta说：“在功率方面更成功的公司会创建了一个新的团队，称为功率方法团队。这个团队适合设计团队和验证团队。他们是由RTL设计师创建的设计，并进行这些功耗分析并找出可以进行哪些更改验证人员。然后，他们通过设计分析来管理这些更改。他们与验证工程师合作，帮助他们识别功率矢量应试是什么。”</p><p><br></p><p>验证团队传统上一直是向量集的维护者。Knoth说：“验证行业已经成熟，产品的功能验证与产品的功率分析和优化结合在一起，这两个人真的需要团结一致，否则两个人都不能尽所有可能有效地工作。进行功能验证的人员可以随时注意电源。不应该强迫人们使用完全独立的工具或运行集生态系统。EDA行业有责任使它尽可能轻松地将波形转换为瓦特，方便计算。”</p><p><br></p><p>这可能会造成目标冲突。Gupta说：“随着时间的推移，我看到功率方法团队开始聘请验证工程师，因为他们正在与能量回归资源竞争。没有应用功能，芯片什么都不是。因此，他们很难游说和宣传功率矢量，开始转变的是，功率方法学工程师现在正在为功率编写矢量。”</p><p><br></p><p><strong>写在最后</strong></p><p>当今，大量的投资和创新正在投入到功率分析工具中，并且没有简单的答案。用户被迫在测试的广泛性和结果的真实性之间进行权衡，并评估在开发过程中必须做出的每个决定所必要性。但这仅仅是分析工具开发的开始。</p><p><br></p><p>分析的方法是开发的第一阶段，随后需要提供有一定的芯片浻察力，优化和自动化。随着问题产生的方面不断发展，其中有些问题又会同时出现。</p><p><br></p><p>当专注于能量转向关注功率时，可获得相当的自由设计度。而不管是考虑能量计算还是功率计算时，也可能就会产生一些惊人的创新机会。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'定乾坤','设计','一举'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>