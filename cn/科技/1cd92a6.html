<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>连续型变量的离散化(5)——R软件segmented包 | 极客快訊</title><meta property="og:title" content="连续型变量的离散化(5)——R软件segmented包 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/401e0001c7fa5e6f6f1c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><meta property="article:published_time" content="2020-10-29T20:59:29+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:29+08:00"><meta name=Keywords content><meta name=description content="连续型变量的离散化(5)——R软件segmented包"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1cd92a6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>连续型变量的离散化(5)——R软件segmented包</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>作者：袁联雄 中山大学附属第三医院（微信：boy_for_）</p><p>来源：微信公众号“郑正有词”</p><p>还记得上一个帖子，在用R软件strucchange函数包做Chow test的时候，结果显示的是“Optimal 2-segment partition”吗，实际上关于连续型变量的离散化，R软件中还有1个函数包可供使用，那就是segmented包。那这一期袁老师就给大家介绍一下segmented包的使用方法。</p><p>首先看看segmented包的简介：</p><p>Package segmented is aimed to estimate linear and generalized linear models (and virtually any regression model) having one or more segmented relationships in the linear predictor. Estimates of the slopes and breakpoints are provided along with standard errors.</p><p>从中我们可以看到，几乎对于任意的回归模型（目前最主要还是线性回归、logistics回归等，对于COX回归尚不完善）当自变量有1个或多个分段函数关系时，segmented包都是适用的，而且，对于breakpoints还提供了标准误，有了标准误就代表着置信区间，从此我们高歌在breakpoints的道路上又多了一个亮点了。</p><p>那么具体如何使用呢，还是以上个帖子提到的JCO文章的数据为例，在上个帖子中我们已经提取到了ELN、原始的OR，并得到了LOWESS平滑处理后的OR。Segmented计算breakpoint的过程如下</p><p><img alt=连续型变量的离散化(5)——R软件segmented包 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/401e0001c7fa5e6f6f1c></p><p>结果显示break point为16.6，95%置信区间为16.04~17.17，与Chow test的结果接近！</p><p><img alt=连续型变量的离散化(5)——R软件segmented包 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/401c0001e390779bfc5f></p><p>上图左侧是segmented包得到的结果，黑色线条和红色线图表示两条不同的回归直线，横座标上绿色点的代表的是break point，两侧伸出来的线条表示95%置信区间；图中右侧是JCO文章中的原图，黄色曲线为LOWESS曲线，对应左图中的散点，蓝色的折线为两条回归直线，对应作图中黑色和红色线条，可以看出两个图形基本一致！</p><p>尽管segmented包使用方便，但在实际应用中，与Chow test一样，更适用于明显只有1个拐点的情况，当LOWESS平滑曲线提示存在多个拐点时，segmented包也许就不灵了。</p><p>此外对于上一期的帖子，如果读者模仿JCO的文章进行统计分析，需要注意原文中能通过分别计算各个ELN数量相对于1个ELN的OR值，构建OR关于ELN的函数关系，有两个重要的数据特点支撑：第一，ELN是整数型取值，便于计算各个ELN数量相对于1个ELN的OR值，如果数据是血糖这种指标，那就没办法直接计算了，折中的方法是把两个连续整数之间的数统一按某个值处理；第二，原文中的样本量相对较大，因此各个ELN都能有一定的患者数量，计算得到的OR估计值相对来说较为可靠，若样本量较小，计算得到的OR置信区间很宽，OR估计值本身就不太可靠，此时构建的OR关于ELN的函数关系很可能也是有问题的。但是不用气馁，细心的读者可能会发现本期帖子提到的segment包好像可以直接处理logistics回归模型，也就是说可以不用通过计算各个ELN数量相对于1个ELN的OR值来构建OR关于ELN的函数关系，而是直接通过模型获得结局变量的函数与ELN的关系，从而探索拐点，是不是有种“柳暗花明又一村”的感觉呢！</p><p>责任编辑：肿瘤资讯-Ruby</p><p><img alt=连续型变量的离散化(5)——R软件segmented包 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37f300034759fd2da197></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'连续','变量','散化'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/ed23dd8.html alt=连续型变量的离散化(6)——再谈两类常用方法的比较 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/401e0001e1c0758024ff style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/ed23dd8.html title=连续型变量的离散化(6)——再谈两类常用方法的比较>连续型变量的离散化(6)——再谈两类常用方法的比较</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>