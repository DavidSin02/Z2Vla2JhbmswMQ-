<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>第一章编程控制器概况 | 极客快訊</title><meta property="og:title" content="第一章编程控制器概况 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/8bc79ae889074efaab954b9fab6dede8"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e70dc9f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e70dc9f.html><meta property="article:published_time" content="2020-11-14T20:55:23+08:00"><meta property="article:modified_time" content="2020-11-14T20:55:23+08:00"><meta name=Keywords content><meta name=description content="第一章编程控制器概况"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1e70dc9f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>第一章编程控制器概况</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>可编程控制器（PROGRAMMABLE CONTROLLER，简称PC）。与个人计算机的PC相区别，用PLC表示。</p><p>PLC是在传统的顺序控制器的基础上引入了微电子技术、计算机技术、自动控制技术和通讯技术而形成的一代新型工业控制装置，目的是用来取代继电器、执行逻辑、记时、计数等顺序控制功能，建立柔性的程控系统。国际电工委员会（IEC）颁布了对PLC的规定：可编程控制器是一种数字运算操作的电子系统，专为在工业环境下应用而设计。它采用可编程序的存贮器，用来在其内部存贮执行逻辑运算、顺序控制、定时、计数和算术运算等操作的指令，并通过数字的、模拟的输入和输出，控制各种类型的机械或生产过程。可编程序控制器及其有关设备，都应按易于与工业控制系统形成一个整体，易于扩充其功能的原则设计。</p><p>PLC具有通用性强、使用方便、适应面广、可靠性高、抗干扰能力强、编程简单等特点。可以预料：在工业控制领域中，PLC控制技术的应用必将形成世界潮流</p><p>PLC程序既有生产厂家的系统程序，又有用户自己开发的应用程序，系统程序提供运行平台，同时，还为PLC程序可靠运行及信息与信息转换进行必要的公共处理。用户程序由用户按控制要求设计。</p><p><br></p><p><strong>第二章PLC的结构及基本配置</strong></p><p>一般讲，PLC分为箱体式和模块式两种。但它们的组成是相同的，对箱体式PLC，有一块CPU板、I/O板、显示面板、内存块、电源等，当然按CPU性能分成若干型号，并按I/O点数又有若干规格。对模块式PLC，有CPU模块、I/O模块、内存、电源模块、底板或机架。无任哪种结构类型的PLC，都属于总线式开放型结构，其I/O能力可按用户需要进行扩展与组合。PLC的基本结构框图如下：</p><p>接受 驱动</p><p>现场信号 受控元件</p><p><br></p><p>一、CPU的构成</p><p>PLC中的CPU是PLC的核心，起神经中枢的作用，每台PLC至少有一个CPU，它按PLC的系统程序赋予的功能接收并存贮用户程序和数据，用扫描的方式采集由现场输入装置送来的状态或数据，并存入规定的寄存器中，同时，诊断电源和PLC内部电路的工作状态和编程过程中的语法错误等。进入运行后，从用户程序存贮器中逐条读取指令，经分析后再按指令规定的任务产生相应的控制信号，去指挥有关的控制电路，</p><p>与通用计算机一样，主要由运算器、控制器、寄存器及实现它们之间联系的数据、控制及状态总线构成，还有外围芯片、总线接口及有关电路。它确定了进行控制的规模、工作速度、内存容量等。内存主要用于存储程序及数据，是PLC不可缺少的组成单元。</p><p>CPU的控制器控制CPU工作，由它读取指令、解释指令及执行指令。但工作节奏由震荡信号控制。</p><p>CPU的运算器用于进行数字或逻辑运算，在控制器指挥下工作。</p><p>CPU的寄存器参与运算，并存储运算的中间结果，它也是在控制器指挥下工作。</p><p>CPU虽然划分为以上几个部分，但PLC中的CPU芯片实际上就是微处理器，由于电路的高度集成，对CPU内部的详细分析已无必要，我们只要弄清它在PLC中的功能与性能，能正确地使用它就够了。</p><p>CPU模块的外部表现就是它的工作状态的种种显示、种种接口及设定或控制开关。一般讲，CPU模块总要有相应的状态指示灯，如电源显示、运行显示、故障显示等。箱体式PLC的主箱体也有这些显示。它的总线接口，用于接I/O模板或底板，有内存接口，用于安装内存，有外设口，用于接外部设备，有的还有通讯口，用于进行通讯。CPU模块上还有许多设定开关，用以对PLC作设定，如设定起始工作方式、内存区等。</p><p>二、I/O模块：</p><p>PLC的对外功能，主要是通过各种I/O接口模块与外界联系的，按I/O点数确定模块规格及数量，I/O模块可多可少，但其最大数受CPU所能管理的基本配置的能力，即受最大的底板或机架槽数限制。I/O模块集成了PLC的I/O电路，其输入暂存器反映输入信号状态，输出点反映输出锁存器状态。</p><p>三、电源模块：</p><p>有些PLC中的电源，是与CPU模块合二为一的，有些是分开的，其主要用途是为PLC各模块的集成电路提供工作电源。同时，有的还为输入电路提供24V的工作电源。电源以其输入类型有：交流电源，加的为交流220VAC或110VAC，直流电源，加的为直流电压，常用的为24V。</p><p>四、底板或机架：</p><p>大多数模块式PLC使用底板或机架，其作用是：电气上，实现各模块间的联系，使CPU能访问底板上的所有模块，机械上，实现各模块间的连接，使各模块构成一个整体。</p><p>五、PLC 的外部设备</p><p>外部设备是PLC系统不可分割的一部分，它有四大类</p><p>1. 编程设备：有简易编程器和智能图形编程器，用于编程、对系统作一些设定、监控PLC及PLC所控制的系统的工作状况。编程器是PLC开发应用、监测运行、检查维护不可缺少的器件，但它不直接参与现场控制运行。</p><p>2. 监控设备：有数据监视器和图形监视器。直接监视数据或通过画面监视数据。</p><p>3. 存储设备：有存储卡、存储磁带、软磁盘或只读存储器，用于永久性地存储用户数据，使用户程序不丢失，如EPROM、EEPROM写入器等。</p><p>4. 输入输出设备：用于接收信号或输出信号，一般有条码读人器，输入模拟量的电位器，打印机等。</p><p>六、PLC的通信联网</p><p>PLC具有通信联网的功能，它使PLC与PLC 之间、PLC与上位计算机以及其他智能设备之间能够交换信息，形成一个统一的整体，实现分散集中控制。现在几乎所有的PLC新产品都有通信联网功能，它和计算机一样具有RS-232接口，通过双绞线、同轴电缆或光缆，可以在几公里甚至几十公里的范围内交换信息。</p><p>当然，PLC之间的通讯网络是各厂家专用的，PLC与计算机之间的通讯，一些生产厂家采用工业标准总线，并向标准通讯协议靠拢，这将使不同机型的PLC之间、PLC与计算机之间可以方便地进行通讯与联网。</p><p>了解了PLC的基本结构，我们在购买程控器时就有了一个基本配置的概念，做到既经济又合理，尽可能发挥PLC所提供的最佳功能。</p><p><br></p><p><strong>第三章 基本指令系统和编程方法</strong></p><p><strong>§1 基本指令系统特点</strong></p><p>PLC的编程语言与一般计算机语言相比，具有明显的特点，它既不同于高级语言，也不同与一般的汇编语言，它既要满足易于编写，又要满足易于调试的要求。目前，还没有一种对各厂家产品都能兼容的编程语言。如三菱公司的产品有它自己的编程语言，OMRON公司的产品也有它自己的语言。但不管什么型号的PLC，其编程语言都具有以下特点：</p><p>1. 图形式指令结构：程序由图形方式表达，指令由不同的图形符号组成，易于理解和记忆。系统的软件开发者已把工业控制中所需的独立运算功能编制成象征性图形，用户根据自己的需要把这些图形进行组合，并填入适当的参数。在逻辑运算部分，几乎所有的厂家都采用类似于继电器控制电路的梯形图，很容易接受。如西门子公司还采用控制系统流程图来表示，它沿用二进制逻辑元件图形符号来表达控制关系，很直观易懂。较复杂的算术运算、定时计数等，一般也参照梯形图或逻辑元件图给予表示，虽然象征性不如逻辑运算部分，也受用户欢迎</p><p>2. 明确的变量常数：图形符相当于操作码，规定了运算功能，操作数由用户填人，如：K400，T120等。PLC中的变量和常数以及其取值范围有明确规定，由产品型号决定，可查阅产品目录手册。</p><p>3. 简化的程序结构：PLC的程序结构通常很简单，典型的为块式结构，不同块完成不同的功能，使程序的调试者对整个程序的控制功能和控制顺序有清晰的概念。</p><p>4. 简化应用软件生成过程：使用汇编语言和高级语言编写程序，要完成编辑、编译和连接三个过程，而使用编程语言，只需要编辑一个过程，其余由系统软件自动完成，整个编辑过程都在人机对话下进行的，不要求用户有高深的软件设计能力。</p><p>5. 强化调试手段：无论是汇编程序，还是高级语言程序调试，都是令编辑人员头疼的事，而PLC的程序调试提供了完备的条件，使用编程器，利用PLC和编程器上的按键、显示和内部编辑、调试、监控等，并在软件支持下，诊断和调试操作都很简单。</p><p>总之，PLC的编程语言是面向用户的，对使用者不要求具备高深的知识、不需要长时间的专门训练。</p><p></p><p><strong>§2 编程语言的形式</strong></p><p>本教材采用最常用的两种编程语言，一是梯形图，二是助记符语言表。采用梯形图编程，因为它直观易懂，但需要一台个人计算机及相应的编程软件；采用助记符形式便于实验，因为它只需要一台简易编程器，而不必用昂贵的图形编程器或计算机来编程。</p><p>虽然一些高档的PLC还具有与计算机兼容的C语言、BASIC语言、专用的高级语言（如西门子公司的GRAPH5、三菱公司的MELSAP），还有用布尔逻辑语言、通用计算机兼容的汇编语言等。不管怎么样，各厂家的编程语言都只能适用于本厂的产品。</p><p>l 编程指令：指令是PLC被告知要做什么，以及怎样去做的代码或符号。从本质上讲，指令只是一些二进制代码，这点PLC与普通的计算机是完全相同的。同时PLC也有编译系统，它可以把一些文字符号或图形符号编译成机器码，所以用户看到的PLC指令一般不是机器码而是文字代码，或图形符号。常用的助记符语句用英文文字（可用多国文字）的缩写及数字代表各相应指令。常用的图形符号即梯形图，它类似于电气原理图是符号，易为电气工作人员所接受。</p><p>l 指令系统：一个PLC所具有的指令的全体称为该PLC的指令系统。它包含着指令的多少，各指令都能干什么事，代表着PLC的功能和性能。一般讲，功能强、性能好的PLC，其指令系统必然丰富，所能干的事也就多。我们在编程之前必须弄清PLC的指令系统</p><p>l 程序：PLC指令的有序集合，PLC运行它，可进行相应的工作，当然，这里的程序是指PLC的用户程序。用户程序一般由用户设计，PLC的厂家或代销商不提供。用语句表达的程序不大直观，可读性差，特别是较复杂的程序，更难读，所以多数程序用梯形图表达。</p><p>l 梯形图：梯形图是通过连线把PLC指令的梯形图符号连接在一起的连通图，用以表达所使用的PLC指令及其前后顺序，它与电气原理图很相似。它的连线有两种：一为母线，另一为内部横竖线。内部横竖线把一个个梯形图符号指令连成一个指令组，这个指令组一般总是从装载（LD）指令开始，必要时再继以若干个输入指令（含LD指令），以建立逻辑条件。最后为输出类指令，实现输出控制，或为数据控制、流程控制、通讯处理、监控工作等指令，以进行相应的工作。母线是用来连接指令组的。下图是三菱公司的FX2N系列产品的最简单的梯形图例：</p><p>X000 X001 Y000</p><p></p><p>X010</p><p><br></p><p>它有两组，第一组用以实现启动、停止控制。第二组仅一个END指令，用以 结束程序。</p><p>l 梯形图与助记符的对应关系： 助记符指令与梯形图指令有严格的对应关系，而梯形图的连线又可把指令的顺序予以体现。一般讲，其顺序为：先输入，后输出（含其他处理）；先上，后下；先左，后右。有了梯形图就可将其翻译成助记符程序。上图的助记符程序为：</p><p>地址 指令 变量</p><p>0000 LD X000</p><p>0001 OR X010</p><p>0002 AND NOT X001</p><p>0003 OUT Y000</p><p>0004 END</p><p>反之根据助记符，也可画出与其对应的梯形图。</p><p>l 梯形图与电气原理图的关系：如果仅考虑逻辑控制，梯形图与电气原理图也可建立起一定的对应关系。如梯形图的输出（OUT）指令，对应于继电器的线圈，而输入指令（如LD，AND，OR）对应于接点，互锁指令（IL、ILC）可看成总开关，等等。这样，原有的继电控制逻辑，经转换即可变成梯形图，再进一步转换，即可变成语句表程序。</p><p>有了这个对应关系，用PLC程序代表继电逻辑是很容易的。这也是PLC技术对传统继电控制技术的继承。</p><p></p><p><strong>§3 编程器件</strong></p><p>下面我们着重介绍三菱公司的FX2N系列产品的一些编程元件及其功能。</p><p>FX系列产品，它内部的编程元件，也就是支持该机型编程语言的软元件，按通俗叫法分别称为继电器、定时器、计数器等，但它们与真实元件有很大的差别，一般称它们为“软继电器”。这些编程用的继电器，它的工作线圈没有工作电压等级、功耗大小和电磁惯性等问题；触点没有数量限制、没有机械磨损和电蚀等问题。它在不同的指令操作下，其工作状态可以无记忆，也可以有记忆，还可以作脉冲数字元件使用。一般情况下，X代表输入继电器，Y代表输出继电器，M代表辅助继电器，SPM代表专用辅助继电器，T代表定时器，C代表计数器，S代表状态继电器，D代表数据寄存器，MOV代表传输等。</p><p><strong>一、 </strong>输入继电器 （X）</p><p>PLC的输入端子是从外部开关接受信号的窗口，PLC 内部与输入端子连接的输入继电器X是用光电隔离的电子继电器，它们的编号与接线端子编号一致（按八进制输入），线圈的吸合或释放只取决于PLC外部触点的状态。内部有常开/常闭两种触点供编程时随时使用，且使用次数不限。输入电路的时间常数一般小于10ms。各基本单元都是八进制输入的地址，输入为X000 ～ X007，X010 ～X017，X020 ～X027 。它们一般位于机器的上端。</p><p><strong>二、 </strong>输出继电器（Y）</p><p>PLC的输出端子是向外部负载输出信号的窗口。输出继电器的线圈由程序控制，输出继电器的外部输出主触点接到PLC的输出端子上供外部负载使用，其余常开/常闭触点供内部程序使用。输出继电器的电子常开/常闭触点使用次数不限。输出电路的时间常数是固定的 。各基本单元都是八进制输出，输出为Y000 ～Y007，Y010～Y017，Y020～Y027 。它们一般位于机器的下端。</p><p><strong>三、 </strong>辅助继电器（M）</p><p>PLC内有很多的辅助继电器，其线圈与输出继电器一样，由PLC内各软元件的触点驱动。辅助继电器也称中间继电器，它没有向外的任何联系，只供内部编程使用。它的电子常开/常闭触点使用次数不受限制。但是，这些触点不能直接驱动外部负载，外部负载的驱动必须通过输出继电器来实现。如下图中的M300，它只起到一个自锁的功能。在FX2N中普遍途采用M0～M499，共500点辅助继电器，其地址号按十进制编号。辅助继电器中还有一些特殊的辅助继电器，如掉电继电器、保持继电器等，在这里就不一一介绍了。</p><p>X000 X001 M300</p><p></p><p>M300</p><p></p><p><strong>四、 </strong>定时器（T）</p><p>在PLC内的定时器是根据时钟脉冲的累积形式，当所计时间达到设定值时，其输出触点动作，时钟脉冲有1ms、10ms、100ms。定时器可以用用户程序存储器内的常数K作为设定值，也可以用数据寄存器（D）的内容作为设定值。在后一种情况下，一般使用有掉电保护功能的数据寄存器。即使如此，若备用电池电压降低时，定时器或计数器往往会发生误动作。</p><p>定时器通道范围如下：</p><p>100 ms定时器T0～T199， 共200点，设定值：0.1～ 3276.7秒；</p><p>10 ms定时器T200～TT245，共46点，设定值：0.01～327.67秒；</p><p>1 ms积算定时器 T245～T249，共4点，设定值：0.001～32.767秒；</p><p>100 ms积算定时器T250～T255，共6点，设定值：0.1～3276.7秒；</p><p>定时器指令符号及应用如下图所示：</p><p>X000</p><p>K123 设定值（累积）</p><p>T200 Y000</p><p><br></p><p>当定时器线圈T200的驱动输入X000接通时，T200的当前值计数器对10 ms的时钟脉冲进行累积计数，当前值与设定值K123相等时，定时器的输出接点动作，即输出触点是在驱动线圈后的1.23秒（10 * 123ms = 1.23s）时才动作，当T200触点吸合后，Y000就有输出。当驱动输入X000断开或发生停电时，定时器就复位，输出触点也复位。</p><p>每个定时器只有一个输入，它与常规定时器一样，线圈通电时，开始计时；断电时，自动复位，不保存中间数值。定时器有两个数据寄存器，一个为设定值寄存器，另一个是现时值寄存器，编程时，由用户设定累积值。</p><p>如果是积算定时器，它的符号接线如下图所示：</p><p>X001</p><p>K345</p><p>X002</p><p></p><p>定时器线圈T250的驱动输入X001接通时，T250的当前值计数器对100 ms的时钟脉冲进行累积计数，当该值与设定值K345相等时，定时器的输出触点动作。在计数过程中，即使输入X001在接通或复电时，计数继续进行，其累积时间为34.5s（100 ms*345=34.5s）时触点动作。当复位输入X002接通 ，定时器就复位，输出触点也复位。</p><p><strong>五、 </strong>计数器（C）</p><p>FX2N中的16位增计数器，是16位二进制加法计数器，它是在计数信号的上升沿进行计数，它有两个输入，一个用于复位，一个用于计数。每一个计数脉冲上升沿使原来的数值减1，当现时值减到零时停止计数，同时触点闭合。直到复位控制信号的上升沿输入时，触点才断开，设定值又写入，再又进入计数状态。</p><p>其设定值在K1～K32767范围内有效。</p><p>设定值K0与K1含义相同，即在第一次计数时，其输出触点就动作。</p><p>通用计数器的通道号：C0 ～C99，共100点。</p><p>保持用计数器的通道号：C100～C199，共100点。</p><p>通用与掉电保持用的计数器点数分配，可由参数设置而随意更改。</p><p>举个例子：</p><p>X010</p><p></p><p>X011</p><p>K 计数器</p><p>C 0</p><p></p><p>由计数输入X011每次驱动C0线圈时，计数器的当前值加1。当第10次执行线圈指令时，计数器C0的输出触点即动作。之后即使计数器输入X011再动作，计数器的当前值保持不变。</p><p>l 当复位输入X010接通（ON）时，执行RST指令，计数器的当前值为0，输出接点也复位。</p><p>l 应注意的是， 计数器C100～C199，即使发生停电，当前值与输出触点的动作状态或复位状态也能保持。</p><p><strong>六、 </strong>数据寄存器</p><p>数据寄存器是计算机必不可少的元件，用于存放各种数据。FX2N中每一个数据寄存器都是16bit（最高位为正、负符号位），也可用两个数据寄存器合并起来存储32 bit数据（最高位为正、负符号位）。</p><p>1） 通用数据寄存器D 通道分配 D 0～D199，共200点。</p><p>只要不写入其他数据，已写入的数据不会变化。但是，由RUN→STOP时， 全部数据均清零。（若特殊辅助继电器M8033已被驱动，则数据不被清零）。</p><p>2） 停电保持用寄存器 通道分配 D200～D511，共312点，或D200～D999，共800点（由机器的具体型号定）。</p><p>基本上同通用数据寄存器。除非改写，否则原有数据不会丢失，不论电源接通与否，PLC运行与否，其内容也不变化。然而在二台PLC作点对的通信时， D490～D509被用作通信操作。</p><p>3） 文件寄存器 通道分配 D1000～D2999，共2000点。</p><p>文件寄存器是在用户程序存储器（RAM、EEPROM、EPROM）内的一个存储区，以500点为一个单位，最多可在参数设置时到2000点。用外部设备口进行写入操作。在PLC运行时，可用BMOV指令读到通用数据寄存器中，但是不能用指令将数据写入文件寄存器。用BMOV将 数据写入RAM后，再从RAM中读出。将数据写入EEPROM盒时，需要花费一定的时间，务必请注意。</p><p>4） RAM文件寄存器 通道分配 D6000～D7999，共2000点。</p><p>驱动特殊辅助继电器M8074，由于采用扫描被禁止，上述的数据寄存 器可作为文件寄存器处理，用BMOV指令传送数据（写入或读出）。</p><p>5）特殊用寄存器 通道分配 D8000～D8255，共256点。</p><p>是写入特定目的的数据或已经写入数据寄存器，其内容在电源接通时，写入初始化值（一般先清零，然后由系统ROM来写入）。</p><p><br></p><p><strong>§4 FX2N系列的基本逻辑指令</strong></p><p><strong></strong>基本逻辑指令是PLC中最基本的编程语言，掌握了它也就初步掌握了PLC的使用方法，各种型号的PLC的基本逻辑指令都大台大同小异，现在我们针对FX2N系列，逐条学习其指令的功能和使用方法，。每条指令及其应用实例都以梯形图和语句表两种编程语言对照说明。</p><p>一、 输入输出指令（LD/LDI/OUT）</p><p>下面把LD/LDI/OUT三条指令的功能、梯形图表示形式、操作元件以列表的形式加以说明：</p><p>符号 功 能 梯形图表示 操作元件</p><p>LD（取） 常开触点与母线相连 X，Y，M，T，C,S</p><p>LDI（取反） 常闭触点与母线相连 X，Y，M，T，C,S</p><p>OUT（输出） 线圈驱动 Y，M，T，C，S,F</p><p>LD与LDI指令用于与母线相连的接点，此外还可用于分支电路的起点。</p><p>OUT 指令是线圈的驱动指令，可用于输出继电器、辅助继电器、定时器、计数器、状态寄存器等，但不能用于输入继电器。输出指令用于并行输出，能连续使用多次。</p><p>X000 Y000 地址 指令 数据</p><p>0000 LD X000</p><p>0001 OUT Y000</p><p>二、触点串连指令（AND/ANDI）、并联指令（OR/ORI）</p><p>符号（名称） 功 能 梯形图表示 操作元件</p><p>AND（与） 常开触点串联连接 X，Y，M，T，C,S</p><p>ANDI（与非） 常闭触点串联连接 X，Y，M，T，C,S</p><p>OR（或） 常开触点并联连接 X，Y，M，T，C，S</p><p>ORI （ 或非） 常闭触点并联连接 X，Y，M，T，C，S</p><p>AND、ANDI指令用于一个触点的串联，但串联触点的数量不限，这两个指令可连续使用。</p><p>OR、ORI是用于一个触点的并联连接指令。</p><p>X001 X002 Y001 地址 指令 数据</p><p>0002 LD X001</p><p>X003 0003 ANDI X002</p><p>0004 OR X003</p><p>0005 OUT Y001</p><p>三、电路块的并联和串联指令（ORB、ANB）</p><p>符号（名称） 功 能 梯形图表示 操作元件</p><p>ORB（块或） 电路块并联连接 无</p><p>ANB（块与） 电路块串联连接 无</p><p>含有两个以上触点串联连接的电路称为“串联连接块”，串联电路块并联连接时，支路的起点以LD或LDNOT指令开始，而支路的终点要用ORB指令。ORB指令是一种独立指令，其后不带操作元件号，因此，ORB指令不表示触点，可以看成电路块之间的一段连接线。如需要将多个电路块并联连接，应在每个并联电路块之后使用一个ORB指令，用这种方法编程时并联电路块的个数没有限制；也可将所有要并联的电路块依次写出，然后在这些电路块的末尾集中写出ORB的指令，但这时ORB指令最多使用7次。</p><p>将分支电路（并联电路块）与前面的电路串联连接时使用ANB指令，各并联电路块的起点，使用LD或LDNOT指令；与ORB指令一样，ANB指令也不带操作元件，如需要将多个电路块串联连接，应在每个串联电路块之后使用一个ANB指令，用这种方法编程时串联电路块的个数没有限制，若集中使用ANB指令，最多使用7次。</p><p>ANB</p><p>X000 X002 X003 Y006</p><p></p><p>X001 X004 X005</p><p>ORB</p><p>X006</p><p>X003</p><p><br></p><p>地 址 指 令 数 据</p><p>0000 LD X000</p><p>0001 OR X001</p><p>0002 LD X002</p><p>0003 AND X003</p><p>0004 LDI X004</p><p>0005 AND X005</p><p>0006 OR X006</p><p>0007 ORB</p><p>0008 ANB</p><p>0009 OR X003</p><p>0010 OUT Y006</p><p>四、程序结束指令（END）</p><p>符号（名称） 功 能 梯形图表示 操作元件</p><p>END（结束） 程序结束 无</p><p>在程序结束处写上END指令，PLC只执行第一步至END之间的程序，并立即输出处理。若不写END指令，PLC将以用户存贮器的第一步执行到最后一步，因此，使用END指令可缩短扫描周期。另外。在调试程序时，可以将END指令插在各程序段之后，分段检查各程序段的动作，确认无误后，再依次删去插入的END指令。</p><p>其他的一些指令，如置位复位、脉冲输出、清除、移位、主控触点、空操作、跳转指令等，同学们可以参考一些课外书，在这里我们不详细介绍了。</p><p>下面同学们可练习由梯形图写出与之对应的助记符形式的指令。并由后面的GPP软件传输到PLC中，实时运行。</p><p>1）</p><p>X000 X001 X002 X003 Y000</p><p></p><p>X004</p><p></p><p>X005</p><p><br></p><p>2）</p><p>X000 X001 X004 X005 Y000</p><p></p><p>X002 X003 X006 X007</p><p><br></p><p>3）</p><p>X000 X001 X002 Y000</p><p></p><p>X003 X004 X005</p><p></p><p>X006 X007</p><p><strong></strong></p><p><strong></strong></p><p><strong></strong></p><p><strong></strong></p><p><strong>§5 梯形图的设计与编程方法</strong></p><p><strong></strong>梯形图是各种PLC通用的编程语言，尽管各厂家的PLC所使用的指令符号等不太一致，但梯形图的设计与编程方法基本上大同小异。</p><p>一、 确定各元件的编号，分配I/O地址</p><p>利用梯形图编程，首先必须确定所使用的编程元件编号，PLC是按编号来区别操作元件的 。我们选用的FX2N型号的PLC，其内部元件的地址编号如下表所示，使用时一定要明确，每个元件在同一时刻决不能担任几个角色。一般讲，配置好的PLC，其输入点数与控制对象的输入信号数总是相应的，输出点数与输出的控制回路数也是相应的（如果有模拟量，则模拟量的路数与实际的也要相当），故I/O的分配实际上是把PLC的入、出点号分给实际的I/O电路，编程时按点号建立逻辑或控制关系，接线时按点号“对号入坐”进行接线。FX2N系列的I/O地址分配及一些其他的内存分配前面都已介绍过了，同学们也可以参考FX系列的编程手册。</p><p>二、 梯形图的编程规则</p><p>1、 每个继电器的线圈和它的触点均用同一编号，每个元件的触点使用时没有数量限制。</p><p>2、 梯形图每一行都是从左边开始，线圈接在最右边（线圈右边不允许再有接触点），如图(a)错，图(b)正确。</p><p><br></p><p>图 ( a ) 图 （b）</p><p>3、线圈不能直接接在左边母线上。</p><p>4、在一个程序中，同一编号的线圈如果使用两次，称为双线圈输出，它很容易引起误操作，应尽量避免。</p><p>5、在梯形图中没有真实的电流流动，为了便于分析PLC的周期扫描原理和逻辑上的因果关系，假定在梯形图中有“电流”流动，这个“电流”只能在梯形图中单方向流动——即从左向右流动，层次的改变只能从上向下。</p><p>下图是一个错误的桥式电路梯形图。</p><p><br></p><p>三、 编程实例</p><p>首先介绍一个常用的点动计时器，其功能为每次输入X000时，接通时，Y000输出一个脉宽为定长的脉冲，脉宽由定时器T000设定值设定。它的时序图如下图所示：</p><p>X000</p><p>Y000</p><p>T T</p><p>根据时序图我们就可画出相应的梯形图：</p><p>M000 T0 M000</p><p></p><p>X000</p><p></p><p>M000 T0</p><p></p><p>M000 T0 Y000</p><p><br></p><p>运用定时器还可构成振荡电路，如根据下面的时序图，我们可用两个定时器T001、T002构成振荡电路，其梯形图如下：</p><p>X000</p><p>Y000</p><p>T1 T2</p><p>X000 T002 T001</p><p></p><p>T001 T002 Y000</p><p></p><p>Y000 T002</p><p><br></p><p>下面是一个延时接通/延时断开电路。同学们根据时序图，画出梯形图。</p><p><br></p><p>T1 T2</p><p><br></p><p><strong>第四章 实验部分</strong></p><p>下面我们提供四个实验题目，让同学们自己设计梯形图，并输入到计算机中，带动负载运行。</p><p><br></p><p><strong>实验一、 用可编程控制器控制交流异步电动机</strong></p><p>预习要求</p><p>（1） 复习已学过的磁力启动器、正反转控制线路及异步电动机顺序控制的有关内容。</p><p>（2） 阅读材料中有关可编程控制器和交流异步电动机控制的有关内容。</p><p>（3） 阅读实验指导书，预先设计线路和梯形图。</p><p>（4） 熟悉GPP软件及其应用。</p><p>一、实验目的</p><p>1、 学习自己设计梯形图。</p><p>2、 熟练应用GPP软件进行编程，并在ON LINE 状态下运行负载。</p><p>3、学习用可编程控制器控制交流异步电动机正反转，并对电动机正反转进行接线。</p><p>二、实验器材：</p><p>1． 个人电脑PC。</p><p>2． PLC程控器实验装置。</p><p>3． RS—232数据通信线。</p><p>4． 继电控制装置实验板。</p><p>5． 异步电动机一台。</p><p>6． 导线若干。</p><p>三、实验内容说明</p><p>吊车或某些生产机械的提升机构需要作左右上下两个方向的运动，拖动它们的电动机必须能作正、反两个方向的旋转。由异步电动机的工作原理可知，要使电动机反向旋转，需对调三根电源线中的两根以改变定子电流的相序。因此实现电动机的正、反转需要两个接触器。电机正反转的继电器控制线路实验图如下图4-1所示。</p><p></p><p>A B C</p><p></p><p>FR</p><p></p><p>SB1 SBF KMR KMF</p><p></p><p>KMF KMR KMF</p><p></p><p>SBR KMF KMR</p><p></p><p>FR KMR</p><p><br></p><p>图 4-1</p><p>虚线框部分，我们称为主电路，其余部分称为控制电路。从图中主电路可见，若正转接触器KMF主触点闭合，电动机正转，若KMF主触点断开而反转接触器KMR主触点闭合，电动机接通电源的三根线中有两根对调，因而反向旋转。不难看出，若正、反转接触器主触点同时闭合，将造成电源二相短路。</p><p>用可编程控制器控制电机的正反转时控制电路中的接触器触点逻辑关系可用编程实现从而使线路接线大为简化。用可编程控制器实现电机正反转的接线图，主电路不变，控制电路如图4-2所示。</p><p>正转 反转 正转 反转 停车</p><p>相 相</p><p>KMF KMR ～220V 绿 黄 红 ～220V</p><p>中 中</p><p><br></p><p>Y000 Y001 COM Y005 Y006 Y007 COM</p><p>程控器输出端接线</p><p></p><p>X001 X002 X003 X004 COM</p><p><br></p><p>24VDC</p><p><br></p><p>程控器输入端接线</p><p>图 4-2</p><p>下面是异步电动机正、反转控制输入/输出地址定义表</p><p>输入口地址 定 义 输出口地址 定 义</p><p>X001 正转起动按钮（常开） Y000 正转接触器线圈</p><p>X002 反转起动按钮（常开） Y001 反转接触器线圈</p><p>X003 停止按钮（常闭） Y005 正转运行指示灯（绿色）</p><p>X004 热继电器（常闭） Y006 反转运行指示灯（黄色）</p><p>Y007 停止运行指示灯（红色）</p><p>三、实验步骤</p><p>1. 根据定义表，在GPP下编写正确梯形图。</p><p>2. 将程序传送至程控器，先进行离线调试。</p><p>3. 程序正确后，在断电状态下，按照图4-1、图4-2进行正确接线。</p><p><br></p><p><strong>实验二、十字路口交通信号灯自动控制</strong></p><p>一、实验目的：</p><p>1. 通过实验，了解上位机与PLC之间是通过RS-232口相联的，它们之间的数据通信是网络通信中最基本的一对一的通信。</p><p>2． 进一步熟悉PLC的一些指令、时序图,如定时、计数指令。</p><p>3． 进一步了解软件GPP，并熟练应用。</p><p>二、实验器件：</p><p>1． 个人电脑PC。</p><p>2． PLC程控器实验装置。</p><p>3． RS—232数据通信线。</p><p>4． 十字路口交通信号灯自动控制实验板。</p><p>5． 导线若干。</p><p>三、实验内容：</p><p>模拟十字路口交通灯的信号，控制车辆有次序地在东西向、南北向正常通行，本实验的要求是，红灯亮20秒，绿灯亮15秒，黄灯亮5秒，完成一个循环周期为 40秒，它的时序图如下：</p><p></p><p>东 红灯</p><p></p><p>西 黄灯</p><p></p><p>向 绿灯</p><p></p><p>0 5 10 15 20 25 30 35 40</p><p></p><p>南 红灯</p><p></p><p>北 黄灯</p><p></p><p>向 绿灯</p><p></p><p>0 5 10 15 20 25 30 35 40</p><p></p><p>图1-1</p><p>输入地址： 启动 X000</p><p>复位 X001</p><p>输出地址： 东 红灯 Y000</p><p>西 黄灯 Y002</p><p>向 绿灯 Y003</p><p>南 红灯 Y004</p><p>北 黄灯 Y005</p><p>向 绿灯 Y006</p><p>交通灯的面板示意图如下：</p><p>MG</p><p>MY SR SY SG</p><p>MR 北</p><p></p><p>西 东</p><p></p><p>SG SY SR 南 MG</p><p>MY</p><p>MR</p><p>图 1-2</p><p>该模拟交通信号灯分为南北和东西两个方向，分别由绿、黄、红三种颜色，其标号分别为MG、MY、MR和SG 、SY、SR，其中，交通灯选用5V直流电，COM端为交通灯的公共端。而灯与程控器之间的接线图如下：</p><p></p><p>程 Y000</p><p>控 Y001</p><p>器 Y002</p><p>的 :</p><p>输 :</p><p>出 : 5V</p><p>端 COM</p><p></p><p>图 1- 3</p><p>从上图可看出，程控器的公共端接5V电源的负极，而灯的公共端接电源的正端，灯的另一端接到程控器的输出端，如Y000，Y001 …… 等。</p><p>四、实验步骤</p><p>1． 根据时序图及输入输出地址，应用GPP软件在计算机上编制梯形图。</p><p>2． 根据面板图1-3正确接线。</p><p>3． 将梯形图传输至PLC，并运行，观察交通灯是否正常工作。</p><p></p><p>实验三 舞台艺术灯饰的PLC控制</p><p>一、实验目的：</p><p>1：掌握PLC与上位机的接线。</p><p>2：进一步熟悉PLC的一些指令，如移位寄存器指令。</p><p>3：熟练应用GPP软件。</p><p>二、实验器件：</p><p>1：个人电脑PC。</p><p>2：PLC程控器实验装置，型号FX2N 。</p><p>3：RS—232数据通讯线。</p><p>4：舞台艺术灯饰控制板。</p><p>5：稳压电源一台。</p><p>6：导线若干。</p><p>三、实验内容：</p><p>我们平时看到五光十色的舞台灯光,可以用PLC来控制，如下图2所 示的舞台灯饰，共有7道灯，上方4道呈拱形，下方3道呈阶梯形，现要求1 -- 7 号灯闪亮的时序如下图1：</p><p></p><p>7</p><p><br></p><p>6</p><p><br></p><p>5</p><p><br></p><p>4</p><p><br></p><p>3</p><p><br></p><p>2</p><p>1</p><p><br></p><p>0</p><p>5</p><p>10</p><p>15</p><p>20</p><p>25</p><p>30</p><p>35</p><p>40</p><p>45</p><p>50</p><p>55</p><p>60</p><p><br></p><p>图 1</p><p>7号灯一亮一灭交替进行，6、5、4号3道灯由内到外依次点亮，3、2、1号阶梯灯由上至下依次点亮，再全灭，整个过程需要60秒，循环往复。</p><p>其面板布置图如下图2：</p><p><br></p><p>7 6 5 4</p><p><br></p><p>3</p><p><br></p><p>2</p><p><br></p><p>1</p><p><br></p><p>图 2</p><p><br></p><p>程控器与舞台灯饰面板电路接线图如下图3：</p><p></p><p>Y000</p><p>Y001</p><p>：</p><p>：</p><p>COM</p><p><br></p><p>5V</p><p><br></p><p>图 3</p><p>上图可看出，程控器的COM端接24V电源的负端，所有灯的公共端接5V电源的正端，灯的另一端接到程控器的输出端，Y000，Y001，Y002 …… 等。</p><p>四、实验步骤</p><p>1. 根据时序图，在计算机上编制梯形图。（也可自己设计灯光闪烁时序）。</p><p>2. 由面板图，按图3正确接线。</p><p>3. 运行自己编制的梯形图，观察灯光闪烁的情况，是否与时序图相吻合。</p><p></p><p><strong>第五章</strong></p><p><strong>第六章 GPP软件简介</strong></p><p>一、基本概况</p><p>SW3D5-GPPW-E是三菱电气公司开发的用于可编程控制器的编程软件,可在Windows 3.1及Windows 95下运行，适用于IBM PC/AT (兼容)其CPU为i486SX或更高，内存需 8兆或更高(推荐16兆以上)。该程序可在串行系统中可与可编程控制器进行通讯,文件传送,操作监控以及各种测试功能。</p><p>在GPP软件中,你可通过线路符号,助记符来创建顺控指令程序,建立注释数据及设置寄存器数据，并可将其存储为文件,用打印机打印。</p><p>在PLC与PC之间必须有接口单元及缆线。</p><p>接口单元：</p><p>FX-232AWC型RS-232C/RS-422转换器(便携式).</p><p>FX-232AW型RS-232C/RS-422转换器(内置式)</p><p>缆线： FX-422CAB型RS-422 缆线 [用于 FX1, FX2, FX2C型可编程控制器, 0.3米]； FX-422CAB-150 型 RS-422 缆线 [用于 FX1, FX2, FX2C型可编程控制器, 1.5米。</p><p>二、用GPP编写梯形图</p><p>GPP软件使用起来灵活、简单、方便，我们把它安装在程序中，使用时只要进入程序，选中MELSEC Applications → 在WINDOWS下运行的GPP ,打开工程，选中新建，出现如下图5-1画面，先在PLC系列中选出你所使用的程控器的CPU系列，如在我们的实验中，选用的是FX系列，所以选FXCPU，PLC类型是指选机器的型号，我们实验用FX2N系列，所以选中FX2N（C），确定后出现如图5-2画面，在画面上我们清楚地看到，最左边是根母线，兰色框表示现在可写入区域，上方有菜单，你只要任意点击其中的元件，就可得到你所要的线圈、触点等。</p><p><br></p><p>图 5-1</p><p><br></p><p>图 5-2</p><p><br></p><p>如你要在某处输入X000，只要把兰色光标移动到你所需要写的地方，然后在菜单上选中 ┫┣ 触点，出现如下图5-3画面：</p><p></p><p>图 5-3</p><p>再输入X000，即可完成写入X000。</p><p>如要输入一个定时器,先选中线圈，再输入一些数据，数据的输入标准在第三章中已提过，图5-4显示了其操作过程。</p><p></p><p>图 5-4</p><p>对于计数器，因为它有时要用到两个输入端，所以在操作上既要输入线圈部分，又要输入复位部分，其操作过程如图5-5、5-6所示。</p><p></p><p>图 5-5</p><p>注意，在图5-5中的箭头所示部分，它选中的是应用指令，而不是线圈。</p><p></p><p>图 5-6</p><p>计数器的使用方法及计数范围在第三章中已讲过，同学们可自己查阅。图5-7是一个简单的计数器显示形式。</p><p><br></p><p>图 5-7</p><p>通过上面的举例，同学们就明白了，如果你需要画梯形图中的其他一些线、输出触点、定时器、计时器、辅助继电器等，在菜单上都能方便地找到，再输入元件编号即可。在图5-6的上方还有其它的一些功能菜单,如果你把光标指向菜单上的某处，在屏幕的左下角就会显示其功能，或者打开菜单上的“帮助”，你可找到一些快捷键列表、特殊继电器/寄存器等信息，同学们可自己边学习边练习。</p><p>三、传输、调试</p><p>当你写完梯形图，最后写上END语句后，必须进行程序转换，转换功能键有两种，在下图5-8的箭头所示位置。</p><p><br></p><p>图 5-8</p><p>在程序的转换过程中，如果程序有错，它会显示，也可通过菜单“工具”，查询程序的正确性。</p><p>只有当梯形图转换完毕后，才能进行程序的传送,传送前，必须将FX2N面板上的开关拨向<strong>STOP</strong>状态，再打开“在线”菜单，进行传送设置，如下图5-9所示：</p><p></p><p>图 5-9</p><p>根据图示，你必须确定你的PLC与计算机的连接是通过COM1口还是COM2口连接，在实验中我们已统一将RS-232线连在了计算机的COM1口，你在操作上只要进行设置选择。</p><p>写完梯形图后，在菜单上还是选择“在线”，选中“写入PLC（W）”，就出现如图5-9</p><p></p><p>图 5-9</p><p>从图上可看出，在执行读取及写入前必须先选中<strong>MAIN</strong>、<strong>PLC</strong>参数，否则，不能执行对程序的读取、写入，然后点击“开始执行”即可。</p><p></p><div class=pgc-img><img alt=第一章编程控制器概况 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8bc79ae889074efaab954b9fab6dede8><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'编程','概况','控制器'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>