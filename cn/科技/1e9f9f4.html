<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>充电杂谈No3：快充协议是如何工作的？ | 极客快訊</title><meta property="og:title" content="充电杂谈No3：快充协议是如何工作的？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/5fd4bf3855c341d19a3aea155948f9e8"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e9f9f4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e9f9f4.html><meta property="article:published_time" content="2020-10-29T20:54:24+08:00"><meta property="article:modified_time" content="2020-10-29T20:54:24+08:00"><meta name=Keywords content><meta name=description content="充电杂谈No3：快充协议是如何工作的？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1e9f9f4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>充电杂谈No3：快充协议是如何工作的？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>各位小伙伴们大家好，充电杂谈是充电头网新开设的一期栏目，主要吐槽日常使用过程中遇到各种充电相关，前两期我们探讨了《充电杂谈No.1为何你的充电器老插不稳？》《充电杂谈No.2：快充到底是什么？》，今天栏目第三期我们来聊一下，充电杂谈No.3：快充协议如何工作的？</p><p>快充协议是充电器与设备沟通握手所需的“语言”，只有正确“对话”后，才可以“握手”成功，进行快速充电。我们一步一步来看不同的快充协议是怎样工作的。</p><p><strong>一、旧式快充协议</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5fd4bf3855c341d19a3aea155948f9e8><p class=pgc-img-caption></p></div><p>几年前快充协议十分简单，简单到类似交通信号灯，幼儿园小朋友都可以通过颜色判断信号含义。设备与充电器不需要很“聪明”就可以读懂双方的需求，不管是研发难度还是物料成本都简单便宜。而快充协议的红绿灯，则是采用D+D-电压进行信息传输。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24ec85d1d0654228b35f0ddd6bf3c467><p class=pgc-img-caption></p></div><p>旧式快充协议都是使用USB2.0通讯接口，常见于USB-A接口。图片中是一个在移动电源上的USB-A输出母座，可以看到他与主板连接的只有四个引脚，其中两侧是用于传输电流的VCC、GND引脚，中间的是用于传输数据的D+、D-引脚。D+D-的“D”是数据Data的意思，充电端与接受电力的设备之间通过D+D-进行数据通讯，进而握手快充协议。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/362aa5eb57564cad82592c585aaa0bbf><p class=pgc-img-caption></p></div><p>我们再来看看数据线，一般来说USB2.0数据线USB-A接口上只有4个触点，与USB-A母座定义相同，最外面两个是用来传输电流的，中间两个是用来传输数据的。VCC、GND较长，D+D-较短，那是故意设计，为了拔出时先断开数据连接，后断开电力供给。</p><p><strong>1、APPLE2.4A</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/214986b74cd74875bb6d2ef2fc356e88><p class=pgc-img-caption></p></div><p>在大家都是5V充电的年代，iPhone直接充电只有5W，需要充电器有特殊的识别电阻才可以获得更大充电功率。图中PCB左边是两个USB-A输出口的焊盘，共用了一颗支持双路智能识别的协议芯片，iPhone插入后，协议芯片调整USB-A接口的D+D-电压为2.7V/2.7V，提供APPLE 2.4A的识别。而最右边的USB-A接口，则是简单地将D+D-直接连起来短接，提供DCP 5V1.5A的输出识别。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9a3e55a3ebab4a0bb0c52312e7ba80cc><p class=pgc-img-caption></p></div><p>通过POWER-Z测试仪监测iPhone 8 Plus的充电，可以发现当前D+D-电压为2.66V/2.65V，接近APPLE2.4A识别协议的2.7V/2.7V，iPhone 8 Plus进入APPLE2.4A充电模式，功率达到12W。</p><p><strong>2、QC2.0</strong></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/af37eae63665458e9a50901581a4a2e4><p class=pgc-img-caption></p></div><p>进入QC2.0高压快充年代后，USB-A接口不再是简单的5V输出，而是可以升压至9V甚至12V电压获取大功率电力传输，这存在一定危险，什么情况才需要升压而不会烧坏设备？所以QC年代智能识别芯片做出了较大的进化，包含了多种不同快充协议，QC、FCP、AFC等等，同样是通过控制D+D-电压来进行轮询判断。例如QC2.0快充需要输出9V的话，D+D-电压就是3.3V/0.5V，需要输出12V的话，D+D-电压就调节为0.5v/0.5v，没有反馈就不进行升压，保持5V输出确保安全。</p><p><strong>3、MTK PE</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a4d078b535a4469c8fb8bdfc5fa79af5><p class=pgc-img-caption></p></div><p>如果说QC2.0基于D+D-电压进行通讯的方式类似红绿灯的话，魅族手机采用的MTK PE快充则是类似打电报的摩尔密码，嘀——嘀嘀嘀——嘀嘀——嘀嘀嘀——嘀——嘀——这样进行通讯。PE快充不需要D+D-数据传输，甚至只有VCC GND的两芯数据线都可以成功使用并触发PE快充，并且PE的电流脉冲信号近乎于无损数字传输，不会像D+D-那样出现电压值误差无法触发快充的情况。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0a98101a41574addb2d44528a0eb852b><p class=pgc-img-caption></p></div><p>图中是POWER-Z USB测试仪抓取到魅族触发PE快充时的电流脉冲，可以看到电流的通断与间隔就像打电报一样进行信息传递，信息传递握手正确后，充电器输出电压从5V跳至7V再跳至9V。但PE快充太少众，市场占有率低没有话语权，配件选择面也少，甚至现在连魅族新机型都不再支持PE快充，这就是题外话了。</p><p><strong>二、USB PD高级通讯协议</strong></p><p>在进入USB PD快充时代后，充电器与数码产品的物理接口从USB-A口全面过渡到USB-C接口，USB-C接口拥有更多的Pin脚，支持更高的电力传输上限，并且完全不同于以往简单的D+D-识别，而是智慧式数据包双向沟通的手段进行更加复杂的通讯。如果说旧式快充协议是幼儿园学生看红绿灯过马路的话，USB PD快充协议就是两个成年人在进行微信聊天这种复杂程度。</p><p>我们来先看看接口的区别，USB-C物理接口满pin形态高达24个针脚，但用于充电不管多大功率，都只要USB2.0形态的12个针脚就足够了，满pin多出来的针脚是用于跑USB3.0/3.1/3.2/雷电等高速数据的，与充电无关，下面我们重点介绍一下USB2.0标准pin脚的USB-C接口。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b35cce84777149bab3203dbee5f74118><p class=pgc-img-caption></p></div><p>可以看到USB-C用于电力传输的VBUS、GND一共有两对也就是4根针脚，除了支持正反面盲插外，多了一倍的针脚让他可以支撑更大功率的电力传输。在接口的中间可以看到D+D-这两个USB-A标准上的针脚，所以USB-C可以向下兼容数据通讯。而USB PD最关键的是CC针脚，CC线是USB PD快速充电标准用于信息交换的通道，没有CC针脚的话就无法进行PD快充。一些魔改USB-A口，虽然形态是A口，但中间新增了一根针脚CC线，所以可以在A口上跑USB PD协议。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/264d6f691e444e8583306e6334adaab4><p class=pgc-img-caption></p></div><p>USB-C通讯采用可编程语言进行双向通讯，需要用到高性能USB PD控制器，芯片体积、针脚数量、复杂程度都远超QC年代的协议芯片。下面我们通过POWER-Z USB测试仪抓取充电器与手机之间的通讯包，看看在充电过程中发生了什么事情。</p><p><strong>1、PD2.0</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/49987edcaad84f8cba5f03a2d7e50e03><p class=pgc-img-caption></p></div><p>USB PD快速充电标准现在已经发展到PD 3.0，数字越大的版本所支持的功能越多，我们先看看PD2.0。PD2.0快充支持固定电压档切换，可以根据充电器广播选择需要的固定电压。POWER-Z USB测试仪上可以看到，设备与充电器通讯后从5V3A跳转到了9V3A这个电压档进行充电。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/93b5f926bf054794a32f85afd199945f><p class=pgc-img-caption></p></div><p>我们再通过POWER-Z电脑端APP抓包看看，信息端口栏目分别是两个方向的传输，Source—>Sink、Source&lt;—Sink。其中Source—>Sink是代表发射端向接收端发出的通讯，例如充电器对手机，Source&lt;—Sink是接收端反馈信息给发射端，例如手机对充电器，搞懂了方向那我们接下来就能看懂他们之间的通讯方式。</p><p>USB PD通讯流程我们以PD 2.0充电器作为举例，线缆插上后供电端与设备并不是立刻开始充电，而是先打招呼，充电器进行广播PDO电压，充电器告诉手机，我支持5V2.4A / 9V3A / 15V3A / 20V2.25A四个固定电压输出。</p><p>手机接收到PDO广播信息后，先是反馈给充电器，告知需要5V2.4A这个电压档，充电器收到反馈后回复手机，电力已经调整至5V2.4A。之后手机充电器再互相通讯，手机请求调整输出电压至9V2A，充电器告知请求已经收到，正在调整至9V2A，这样完成一个通讯阶段。</p><p><strong>2、PD 3.0 PPS</strong></p><p>PD3.0 PPS与PD2.0相比原理接近，多了PPS电压子集。PPS电压子集是一组以0.02V跨度为调整幅度的供电电压集，可以精细地进行电压微调，让电荷泵快充、直充变成可能。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e06b19cf0b5848ee8a6f30a0d6585843><p class=pgc-img-caption></p></div><p>PD 3.0 PPS插入线缆后，充电器向手机发出一个数据包（PDO广播），告诉手机我是一个充电器，拥有5V3A / 9V3A / 12V3A / 15V3A / 20V2.25A四个固定PDO与5-11V3A / 5-16V3A两组PPS。手机接收到这个广播后，对充电器反馈信息，请求输出5V3A电压。充电器接受到电压调整请求，并告知手机已经调整OK，手机反馈说已经做好充电准备，开始5V3A进行充电。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4c69fea00fa24d52abd972cc70efa8b6><p class=pgc-img-caption></p></div><p>在充电的途中，手机发出信息告知充电器，我需要调整电压，请求将输出电压调整至8.66V3A，充电器接收到电压调整请求，将输出从5V3A调整至8.66V3A。之后手机每秒发送多次调整电压指令，每次都告知充电器将电压下调0.02V，充电器也如实进行调整。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c3899acc12a7450685089291c4a5fd07><p class=pgc-img-caption></p></div><p>在经过了五百多次的通讯进行电压微调后，最终稳定在了7V3A这一个电压进行充电，以达到充的快温升低的目的，这就是PPS快充协议的通讯过程。</p><p><strong>三、私有协议</strong></p><p><strong>1、全私有协议</strong></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/838c8d22cc024bbbb4274cb8c91297d3><p class=pgc-img-caption></p></div><p>某些厂家会对部分设备开发私有快充协议，在通讯过程中加密了信息流，用户想要获得最佳充电体验只能使用原厂配件。这种做法一来是因为目前的标准无法满足厂家需求，例如USB PD上限只有20V5A 100W，二来可以建设私有配件生态圈，足够的利润支撑技术研发达到良性发展，这么做无可厚非。<br><strong><br>2、半私有协议</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5d606fa2e036428c97068807c2897917><p class=pgc-img-caption></p></div><p>部分厂商则是采用半私有协议，例如三星45W AFC快充，基于PD3.0 PPS开发的快速充电协议进行微调修改，因为未进行加密，所以市面上部分第三方配件也可以通用，用户选择配件范围较大。</p><p><strong>四、USB-C接口统一对快充的好处？</strong></p><p><br></p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/28406532ac3548b7b5f21107d5db03c1><p class=pgc-img-caption></p></div><p>多年前接口未统一时，存在Micro USB、Mini USB、异形排针、DC圆口等多种不同接口，就连供电电压都存在差异，混沌的乱象阻碍着发展。USB-C好比灯泡卡座，淘汰其他接口大统一为USB-C接口标准，让万千设备均处以相同标准下运行，相同的物理接口，相同的通讯标准。生产商技术研发不再需要为各种标准而设计不同规格产品，快充技术得到飞速发展，用户作为消费者也在享受USB-C大统一的便利。</p><div class=pgc-img><img alt=充电杂谈No3：快充协议是如何工作的？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/96dbe4d790d946b78341b22c603a9e5a><p class=pgc-img-caption></p></div><p>USB-C是灯泡卡座的话，充电器就好比灯泡，基于USB-C标准而制造的充电器诞生出18Ｗ、30Ｗ、45Ｗ、65Ｗ、100Ｗ以及未来更大功率，用户可以根据自己需求选择不同功率的产品使用，无需担心接口问题。</p><p><strong>充电头网总结</strong></p><p>这期充电杂谈小编为大家介绍了部分快充协议的工作方式与原理，相信看完大家都会有所了解。对于手机、笔记本等设备来说，快充协议必不可少，没有快充协议支撑的话充电功率会受限在非常低的功率，得益于USB-C统一标准让快充全面普及，不管是入门机型还是旗舰产品都支持快充，不同消费层用户都可以享受快充带来的乐趣。好了， 这期充电杂谈到此结束，我是Yubeii，大家有什么想讨论的话题可以留言告知，我们下一期再见。​​​</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'充电杂','No3','充协议'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>