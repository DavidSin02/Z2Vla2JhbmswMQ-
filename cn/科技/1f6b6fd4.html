<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>â€‹mysql AB å¤åˆ¶æŠ€æœ¯(ä¸»ä»),æ™“æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06 | æå®¢å¿«è¨Š</title><meta property="og:title" content="â€‹mysql AB å¤åˆ¶æŠ€æœ¯(ä¸»ä»),æ™“æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06 - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><meta property="article:published_time" content="2020-10-29T21:09:57+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:57+08:00"><meta name=Keywords content><meta name=description content="â€‹mysql AB å¤åˆ¶æŠ€æœ¯(ä¸»ä»),æ™“æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/1f6b6fd4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>â€‹mysql AB å¤åˆ¶æŠ€æœ¯(ä¸»ä»),æ™“æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä¸‹é¢ç»§ç»­åˆ†äº«æ²¡æœ‰ç”Ÿæ°”äº†æ•°æ®åº“1-6èŠ‚è¯¾ï¼Œä¹‹04</p><p>mysql AB å¤åˆ¶æŠ€æœ¯(ä¸»ä»)<br></p><p>MySQLæ”¯æŒå•å‘ã€å¼‚æ­¥(async)å¤åˆ¶ï¼Œå¤åˆ¶è¿‡ç¨‹ä¸­ä¸€ä¸ªæœåŠ¡å™¨å……å½“ä¸»æœåŠ¡å™¨ï¼Œè€Œä¸€ä¸ªæˆ–å¤šä¸ªå…¶å®ƒæœåŠ¡å™¨å……å½“ä»æœåŠ¡å™¨ã€‚</p><p>åŒæ­¥å¤åˆ¶éœ€è¦ä½¿ç”¨ndbcluster(å„é›†ç¾¤èŠ‚ç‚¹éƒ½å¯è¯»å¯å†™)æˆ–è€…drbd(ç½‘ç»œraid)è¿™äº›æŠ€æœ¯ï¼Œæˆ–è€…æ˜¯æ–°ç‰ˆmysqlçš„åŠåŒæ­¥å¤åˆ¶</p><p>mysqlä¸» - - > mysqlä»</p><p>master slave</p><p>æŠŠä¸»ä¸Šçš„äºŒè¿›åˆ¶æ—¥å¿—(bin-log)çš„å†…å®¹ä¼ åˆ°ä»ä¸Šçš„ä¸€ä¸ªæ–°çš„æ—¥å¿—å«relay-bin-log</p><p>ä»ä¸Šçš„ IO çº¿ç¨‹ è´Ÿè´£ä¼ è¾“</p><p>ä»ä¸Šçš„ SQL çº¿ç¨‹ è´Ÿè´£ä»æœåŠ¡å™¨è§£ææ—¥å¿—</p><p>å¤åˆ¶çš„è¿‡ç¨‹ï¼š</p><p>1ï¼Œslaveç«¯çš„IOçº¿ç¨‹è¿ä¸Šmasterç«¯ï¼Œè¯·æ±‚</p><p>2ï¼Œmasterç«¯è¿”å›ç»™slaveç«¯ï¼Œbin logæ–‡ä»¶åå’Œä½ç½®ä¿¡æ¯</p><p>3ï¼ŒIOçº¿ç¨‹æŠŠmasterç«¯çš„bin logå†…å®¹ä¾æ¬¡å†™åˆ°slaveç«¯relay bin logé‡Œï¼Œå¹¶æŠŠmasterç«¯çš„bin-logæ–‡ä»¶åå’Œä½ç½®è®°å½•åˆ°master.infoé‡Œã€‚</p><p>4ï¼Œsalveç«¯çš„sqlçº¿ç¨‹ï¼Œæ£€æµ‹åˆ°relay bin logä¸­å†…å®¹æ›´æ–°ï¼Œå°±ä¼šè§£ærelay logé‡Œæ›´æ–°çš„å†…å®¹ï¼Œå¹¶æ‰§è¡Œè¿™äº›æ“ä½œï¼›ä¹Ÿå°±æ˜¯è¯´salveæ‰§è¡Œå’Œmasterä¸€æ ·çš„æ“ä½œè€Œè¾¾åˆ°æ•°æ®åŒæ­¥çš„ç›®çš„ï¼›</p><p>å®¢æˆ·</p><p>ï½œ</p><p>ï½œ</p><p>webç¨‹åºï¼Œæ¸¸æˆç¨‹åºï¼ˆc,php,java.......)</p><p>|</p><p>|</p><p>ä»£ç†å±‚ (mysqlproxy,amoeba)</p><p>|</p><p>|</p><p>mysqlä¸» ----> mysqlä»</p><p>æ€è€ƒï¼š</p><p>1ï¼Œä¸»è¦æ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—ï¼Œä»è¦ä¸è¦å¼€äºŒè¿›åˆ¶æ—¥å¿—?</p><p>ä»mysqlå¯å¼€å¯ä¸å¼€ï¼Œè¦çœ‹æƒ…å†µ</p><p>2ï¼Œä¸»å’Œä»çš„è¯»å†™æƒ…å†µæ€ä¹ˆåšï¼Ÿ</p><p>ä»ä¸èƒ½å†™ï¼Œä»åªèƒ½è¯»ï¼›ä¸»å¯è¯»å¯å†™ï¼›</p><p>æ‰€ä»¥æœ‰äº›æ—¶å€™åšä¸»åªå†™ï¼Œä»åªè¯»ï¼Œä¹Ÿå°±æ˜¯è¯»å†™åˆ†ç¦»</p><p>3ï¼Œæˆ‘åšäº†è¯»å†™åˆ†ç¦»çš„ä¸€ä¸»ä¸€ä»çš„æ¶æ„ï¼Œè¯·é—®æˆ‘å‰ç«¯çš„ç¨‹åº(web,æ¸¸æˆ,ä¸šåŠ¡ç­‰)å¦‚ä½•æ¥è®¿é—®æ•°æ®åº“</p><p>å¦‚æœè£…å‰ç«¯webï¼ˆå‡è®¾phpwind)ï¼Œå¡«å†™æ•°æ®åº“çš„IPä¸ºä¸»çš„IPï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µï¼Œ</p><p>mysqlä»å°±å®Œå…¨å˜æˆäº†ä¸€ä¸ªå®æ—¶å¤‡ä»½çš„æœåŠ¡å™¨ï¼Œæ‰€æœ‰çš„è¯»å†™å…¨åœ¨ä¸»ä¸Š</p><p>æ‰€ä»¥è¦åœ¨å‰ç«¯ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´åŠ å…¥ä»£ç†å±‚ç¨‹åºï¼Œä¹Ÿå°±æ˜¯å¡«å†™çš„æ•°æ®åº“IPä¸æ˜¯ä¸»çš„ä¹Ÿä¸æ˜¯ä»çš„ï¼Œ</p><p>è€Œæ˜¯ä»£ç†çš„ï¼Œç”±ä»£ç†æ¥è´Ÿè´£æŠŠå†™æ“ä½œç»™ä¸»ï¼Œè¯»æ“ä½œç»™ä»</p><p>4ï¼Œå…³æ–¼å•ç‚¹æ•…éšœçš„é—®é¢˜,å¦‚æœä»æŒ‚æ‰äº†ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿå¦‚æœä¸»æŒ‚æ‰äº†ï¼Œæ€ä¹ˆè§£å†³?</p><p>ä»æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆä¸»å°±è¦è´Ÿè´£è¯»å’Œå†™çš„æ‰€æœ‰æ“ä½œï¼Œç”±ä»£ç†å±‚å¸®ä½ å®ç°æ“ä½œçš„è½¬æ¢ã€‚ä»ä¿®å¥½åï¼Œç›´æ¥å¯åŠ¨ï¼Œç„¶åå°±è‡ªåŠ¨è¯»å†™åˆ†ç¦»ï¼Œè¿˜æ˜¯ä»£ç†å±‚è‡ªåŠ¨å®ç°æ“ä½œè½¬æ¢.</p><p>ä¸»æŒ‚æ‰äº†ï¼ˆå‡è®¾æŒ‚æ‰ä¸€ä¸ªå°æ—¶)ï¼Œé‚£ä¹ˆå†™æ“ä½œè‚¯å®šéœ€è¦æœ‰äººæ¥åšï¼Œåªèƒ½æ˜¯mysqlä»æœåŠ¡å™¨æ¥è´Ÿè´£è¯»å’Œå†™æ“ä½œã€‚ä¸»ä¿®å¥½å¯åŠ¨åï¼Œå†™æ“ä½œå¯ä»¥å†ç»™å›ä¸»ï¼Œä½†æ˜¯ä»åœ¨è¿™ä¸€å°æ—¶å†…å†™çš„æ“ä½œå¦‚ä½•ç»™ä¸»?(è¿™é‡Œå°±æ¯”è¾ƒéº»çƒ¦ï¼Œåé¢è®²åŒä¸»æ¶æ„å†è®¨è®º)</p><p>å…³äºå¦å‡ ç§æ¶æ„çš„æ¢è®¨ï¼š</p><p>ä¸€ä¸»å¤šä»</p><p>ï¼ï¼> salve</p><p>master ï¼ï¼> salve</p><p>ï¼ï¼> salve</p><p>å†™ è¯»</p><p>--é€‚åˆäºä»¥è¯»ä¸ºä¸»çš„ä¸šåŠ¡ï¼Œä½¿ç”¨å¤šä¸ªsalveåˆ†æ‹…è¯»çš„å‹åŠ›ï¼Œä½†è¦æ³¨æ„çš„æ˜¯è¿™ç§æ¶æ„ï¼Œsalveè¶Šå¤šï¼Œé‚£ä¹ˆmasterå¤åˆ¶çš„å‹åŠ›å°±è¶Šå¤§</p><p>------------------------------------------------</p><p>å¤šä¸»ä¸€ä» --è¿™ç§æ¶æ„ä¸æ”¯æŒ</p><p>ä¸»A phpwind</p><p>ä»C</p><p>ä¸»B discuz</p><p>------------------------------------------------</p><p>åŒä¸»æ¶æ„ master A &lt;ï¼ï¼> master B</p><p>phpwind discuz</p><p>1ï¼Œä¼šå¾ªç¯å¤åˆ¶å—ï¼Ÿ</p><p>ä»–ä»¬ä¸ä¼šå¾ªç¯å¤åˆ¶ï¼Œå› ä¸ºåšå¤åˆ¶æ—¶ä¼šæŒ‡å®šIDå€¼ï¼Œå¹¶ä¸”ä¸ä¸€è‡´</p><p>2ï¼Œä¸¤è¾¹çœŸçš„èƒ½åŒæ—¶å†™ç›¸åŒçš„æ•°æ®å—?</p><p>ä¸å¯ä»¥</p><p>å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p>æ—¶é—´ç‚¹ master A master B</p><p>1 aï¼1æ”¹ä¸ºa=2</p><p>2 a=1æ”¹ä¸ºa=3</p><p>3 açš„æ”¹å˜å¤åˆ¶è¿‡æ¥,å¹¶è§£æ,aä¼šåˆæ”¹ä¸º2</p><p>4 bçš„æ”¹å˜å¤åˆ¶è¿‡æ¥å¹¶è§£æ,aåˆä¼šæ”¹ä¸º3</p><p>é—®é¢˜äº§ç”Ÿï¼Œæ•°æ®ä¸ä¸€è‡´</p><p>3ï¼Œä¸¤è¾¹å¯ä»¥å†™ä¸åŒçš„æ•°æ®å—ï¼Ÿ</p><p>å¯ä»¥</p><p>å¯ä»¥é€šè¿‡ä¸šåŠ¡ç¨‹åºå±‚ï¼ŒæŒ‡å®šä¸€äº›è¡¨çš„å†™æ“ä½œå…¨åœ¨ä¸€ç«¯ï¼Œå¦ä¸€äº›è¡¨çš„å†™æ“ä½œå…¨åœ¨å¦ä¸€ç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤è¾¹ä¸ä¼šåŒæ—¶å†™ç›¸åŒçš„è¡¨ï¼ˆå½“ç„¶è¿™æ˜¯ç†æƒ³çŠ¶æ€ï¼Œå› ä¸ºä¸šåŠ¡å¤æ‚çš„è¯ä¼šæœ‰è¡¨çš„è”ç»“ç­‰æƒ…å†µï¼‰</p><p>ç„¶åé€šè¿‡æŒ‡å®šmysqlå¤åˆ¶çš„å‚æ•°ï¼Œä¸€éƒ¨åˆ†è¡¨æˆ–åº“ä¼šä»Aå¤åˆ¶åˆ°Bï¼Œå¦å¤–ä¸€éƒ¨åˆ†è¡¨æˆ–åº“ä»Bå¤åˆ¶åˆ°Aå°±å¯ä»¥é¿å…ä¸Šé¢çš„é—®é¢˜äº†</p><p>æˆ–è€…ä¸¤ä¸ªåº“ï¼Œä¸€ä¸ªåº“master Aæ¥å†™ï¼Œå¦ä¸€ä¸ªåº“master Bæ¥å†™</p><p>æ•°æ®åˆ‡åˆ†</p><p>----------------------------</p><p>å‰é¢ä¸‰ä¸ªé—®é¢˜ä¹Ÿè¯´æ˜äº†åŒä¸»æ¶æ„çš„ç¬¬ä¸€ç§åº”ç”¨ï¼ˆå°±æ˜¯ä¸¤è¾¹å†™ä¸å…³è”çš„æ•°æ®ï¼Œäº’ç›¸å¤åˆ¶)ï¼ŒåŒä¸»æ¶æ„çš„ç¬¬äºŒç§åº”ç”¨å°±æ˜¯è§£å†³ä¸€ä¸»ä¸€ä»æ¶æ„é‡Œä¸»æŒ‚æ‰äº†çš„é—®é¢˜ã€‚</p><p>çœ‹ä¸‹é¢çš„åˆ†æ</p><p>mysqlä¸» mysqlä»</p><p>æ€è€ƒï¼š</p><p>é—®é¢˜1:å¦‚æœä¸€ä¸»ä¸€ä»ï¼Œä¸»æŒ‚äº†ï¼Œslaveèƒ½ä¸èƒ½å†™ï¼Œå¦‚æœèƒ½å†™ï¼Œä¸»ä¿®å¥½å¯èµ·æ¥åï¼Œsalveå†™çš„æ•°æ®å¦‚ä½•ä¼ å›ç»™ä¸»?</p><p>ç­”æ¡ˆ:ä¸»æŒ‚äº†ï¼Œslaveåº”è¯¥è¦å†™ï¼Œå¦åˆ™è®ºå›ä¸èƒ½å‘è´´ï¼Œåªèƒ½çœ‹è´´ï¼›</p><p>ä¸»ä¿®å¥½åï¼ˆå‡è®¾ä¸€å°æ—¶)ï¼Œslaveå†™äº†è¿™ä¸€å°æ—¶çš„æ•°æ®åº”è¯¥è¦æƒ³åŠæ³•ä¼ å›ä¸»æ‰è¡Œã€‚</p><p>æ–¹æ³•ä¸€ï¼šDBAäººä¸ºçš„æŠŠsalveè¿™ä¸€å°æ—¶å†™çš„æ•°æ®æ‰¾å‡ºæ¥å†å¯¼å…¥åˆ°ä¸»(å¦‚æœå¾ˆå¤šè¡¨ï¼Œä¸€å°æ—¶çš„æ“ä½œä¹Ÿéå¸¸å¤šï¼Œå¯ä»¥è¯´å‡ ä¹ä¸å¯èƒ½æ‰¾å‡ºè¿™å°æ—¶æ”¹å˜äº†å•¥ï¼‰</p><p>æ–¹æ³•äºŒï¼šä½¿ç”¨ç±»ä¼¼rsyncçš„åŒæ­¥æ–¹æ³•,è¿™æ˜¯é€šè¿‡å­˜å‚¨å±‚æ¥å®ç°æ•°æ®åŒæ­¥å›å»ï¼Œä½†æ•ˆæœæ²¡æœ‰éªŒè¯è¿‡ï¼Œæ— æ³•è¯´æ˜</p><p>æ–¹æ³•ä¸‰:DBAäººä¸ºçš„æŠŠä»è¿™ä¸€å°æ—¶æ”¹å˜çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆè¦ç¡®è®¤slaveæ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—)ç»™æ‰¾å‡ºæ¥ç„¶ååº”ç”¨åˆ°ä¸»ä¸Šå»</p><p>é—®é¢˜2:ä¸Šé¢çš„æ–¹æ³•æ— è®ºå“ªä¸€ç§éƒ½ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æŠŠä»å†™çš„ä¸€å°æ—¶æ•°æ®ä¼ å›ç»™ä¸»éœ€è¦ä¸€å®šçš„æ—¶é—´</p><p>å°±æ˜¯å‡è®¾è¿™ä¸€å°æ—¶slaveåˆ›å»ºäº†ä¸€ä¸ªaaaè¡¨ï¼Œä¸»mysqlä¿®å¥½å¯åŠ¨åï¼Œ</p><p>å¦‚æœä¸»é©¬ä¸Šæ¥ç®¡ä»çš„å†™åŠŸèƒ½ï¼Œè¿™æ—¶å‰ç«¯ç¨‹åºé©¬ä¸Šç»™äº†ä¸€ä¸ªinsert into aaaçš„æ’å…¥æ“ä½œï¼Œè¿™æ ·è‚¯å®šä¼šå‡ºé—®é¢˜ï¼Œå› ä¸ºåˆ›å»ºaaaè¡¨çš„æ“ä½œè¿˜æ²¡æœ‰ä»slaveé‚£ä¼ å›æ¥,å¦‚ä½•è§£å†³?</p><p>è§£å†³æ–¹æ³•ä¸€:äººä¸ºæ§åˆ¶ä¸»ç°åœ¨ä¸èƒ½å†™ï¼Œç­‰slaveçš„æ•°æ®ä¼ å›æ¥åå†å†™ï¼›ä½†è¿™æ ·çš„è¯ï¼Œç­‰å¾…æ—¶é—´å¤ªé•¿äº†</p><p>è§£å†³æ–¹æ³•äºŒ:å°±æ˜¯æŠŠä¸€ä¸»ä¸€ä»çš„æ¶æ„æ”¹æˆåŒä¸»çš„æ¶æ„ï¼ˆå‡è®¾master Aå’Œmaster B)</p><p>master A ---> master B (å¹³æ—¶ä¸»Båªè¯»ï¼Œä¸å†™ï¼Œåªæœ‰åˆ°ä¸»AæŒ‚äº†ï¼Œæ‰ä¼šå†™)</p><p>æŒ‚ä¸€ä¸ªå°æ—¶</p><p>è¯»å†™ä¸€ä¸ªå°æ—¶</p><p>ä¿®å¤åå¯åŠ¨äº†</p><p>æŠŠè¯»ç»™A å†™ç•™ç»™B</p><p>é—®é¢˜3:ä½†æ˜¯æ”¹æˆåŒä¸»åï¼Œmaster Båœ¨master AæŒ‚æ‰çš„ä¸€å°æ—¶å†…å¸®ä»–å†™äº†æ•°æ®ï¼ŒAä¿®å¥½å¯èµ·æ¥åï¼ŒBçš„æ•°æ®å¯ä»¥è‡ªåŠ¨ä¼ å›Aï¼›ä½†æ˜¯å¦‚æœæ•°æ®é‡å¤§çš„è¯ï¼Œè¿™ä¸ªä¼ å›ä¹Ÿå¯èƒ½éœ€è¦ä¸€å®šæ—¶é—´ï¼Œå¦‚æœæ­£å¥½åœ¨è¿™ä¸ªä¼ å›æ—¶é—´å†…ä¹Ÿå‡ºç°äº†é—®é¢˜2çš„æƒ…å†µï¼Œåˆå¦‚ä½•è§£å†³?</p><p>è§£å†³æ–¹æ³•ä¸€:äººä¸ºæ§åˆ¶ä¸»ä¸èƒ½å†™ï¼Œè¿™æ ·çš„è¯ç­‰å¾…æ—¶é—´å¾ˆçŸ­ï¼ˆå› ä¸ºæ˜¯è‡ªåŠ¨ä¼ å›æ¥ï¼Œè·Ÿæ‰‹åŠ¨å¯¼å›æ¥é€Ÿåº¦å¿«å¾ˆå¤š)ï¼Œå½±å“ä¸å¤§</p><p>è§£å†³æ–¹æ³•äºŒ:å°±ç›´æ¥æŠŠmaster B åšä¸ºæ–°çš„å†™æœåŠ¡å™¨ï¼Œmaster Aå¯åŠ¨åï¼Œä¹Ÿåªæ˜¯åšä¸ºè¯»æœåŠ¡å™¨ï¼›é™¤éç­‰ä¸‹ä¸€æ¬¡BæŒ‚äº†ï¼ŒAä¼šé‡æ–°æˆä¸ºå†™æœåŠ¡å™¨ï¼ˆå½“ç„¶è¿™æ˜¯åœ¨ä¸¤å°æœåŠ¡å™¨æ€§èƒ½ç›¸ç­‰çš„æƒ…å†µä¸‹)</p><p>æ€»ç»“:ä¸Šé¢è¯´æ˜åŒä¸»æ¶æ„çš„ä¸¤ç§åº”ç”¨</p><p>-------------------------------------------------ï¼ï¼ï¼ï¼ï¼</p><p>master C</p><p>| |</p><p>ç¯å‹æ¶æ„ master A ï¼ï¼ master B</p><p>--ä¸å¯è¡Œ</p><p>------------------------------------------------------</p><p>ï¼ï¼ salve ï¼ï¼ salve</p><p>çº§è”æ¶æ„ master ï¼ï¼ salve ï¼ï¼ salve</p><p>ï¼ï¼ salve ï¼ï¼ salve</p><p>bin-log bin-log ?</p><p>ä¸ºäº†è§£å†³ä¸€ä¸»å¤šä»çš„masterçš„å¤åˆ¶å‹åŠ›</p><p>å¯ä»¥æŠŠslaveåšä¸ºä¸‹ä¸€çº§ä»æœºçš„master</p><p>å¢åŠ å¤åˆ¶çš„çº§è”å±‚æ¬¡ï¼Œé€ æˆçš„å»¶è¿Ÿæ›´é•¿</p><p>æ‰€ä»¥è¿™ç§æ¶æ„å¹¶ä¸æ˜¯å¾ˆæ¨èï¼Œä¸€èˆ¬ä¼šè¿›è¡Œåˆ†æ‹†é›†ç¾¤</p><p>--------------------------------------------------</p><p>åŒä¸»å’Œçº§è”åˆèµ·æ¥</p><p>master ----salve --slave</p><p>|</p><p>| ï¼ï¼ slave</p><p>master ï¼ï¼ salve ï¼ï¼ slave</p><p>ï¼ï¼ slave</p><p>------------------------------------------------------</p><p>ä¼˜åŒ–åŸåˆ™:åˆ†</p><p>å¤§å‹ç»“æ„çš„æ•°æ®é‡å¤ªå¤§ï¼Œè¦ç”¨åˆ°æ•°æ®åˆ‡åˆ†(æ°´å¹³ï¼Œå‚ç›´)</p><p>mysqlproxy</p><p>amoeba</p><p>---------------------------------------------------------</p><p>ABå¤åˆ¶å‰å‡†å¤‡</p><p>æŠŠä¸¤å°mysqlå¯èµ·æ¥ï¼ˆè¦æ±‚ä¸¤å°æ•°æ®ä¸€è‡´)</p><p>/etc/hostsé‡Œéƒ½åŠ ä¸Šä¸»æœºåå’ŒIPå¯¹åº”ï¼Œ</p><p>æ—¶é—´åŒæ­¥å¥½</p><p>é˜²ç«å¢™,selinuxæ£€æŸ¥ä¸€ä¸‹</p><p>yumé…ç½®</p><p>mysql ABå¤åˆ¶å¼€å§‹æ­å»º</p><p>1,ä¸»ä»æ•°æ®å¿…é¡»è¦åŒæ­¥</p><p>2,ä¸»ï¼šè¦å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—</p><p>3,ä¸»å’Œä»éƒ½è¦è®¾ç½® server-idå€¼ï¼Œå¹¶ä¸”ä¸¤è¾¹è¦ä¸ä¸€æ ·</p><p>4,éœ€è¦å»ºç«‹ä¸€ä¸ªç”¨æ¥å¤åˆ¶çš„ç”¨æˆ·ï¼Œå¹¶æˆäºç›¸åº”æƒé™</p><p>master ï¼ï¼ slave</p><p>2.2.2.128 2.2.2.129</p><p>ç”¨rpmç‰ˆçš„mysqlæ¥åšï¼š</p><p>ç¬¬ä¸€æ­¥ï¼›æ”¹é…ç½®æ–‡ä»¶</p><p>master,2.2.2.128 ä¸Šæ·»åŠ 2è¡Œ</p><p>vim /etc/my.cnf</p><p>ï¼»mysqld] --åœ¨mysqldå‚æ•°ç»„ä¸‹æ·»åŠ 2è¡Œ</p><p>log-bin=mysql-bin --æŒ‡å®šäºŒè¿›åˆ¶æ—¥å¿—çš„åå­—</p><p>server-id=2 --æŒ‡å®šidï¼Œidå€¼ä»»æ„</p><p>slave,2.2.2.129 ä¸Šæ·»åŠ 1è¡Œ</p><p>vim /etc/my.cnf</p><p>[mysqld] --åœ¨mysqldå‚æ•°ç»„ä¸‹æ·»åŠ 1è¡Œ</p><p>server-id=3 --æŒ‡å®šidï¼Œidå€¼ä»»æ„ï¼Œä¸ä¸»ä¸ä¸€æ ·</p><p>ç„¶åé‡å¯æœåŠ¡</p><p>master,2.2.2.128 ä¸Šé‡å¯ï¼š</p><p>/etc/init.d/mysqld restart</p><p>slave,2.2.2.129 ä¸Šé‡å¯ï¼š</p><p>/etc/init.d/mysqld restart</p><p>ç¬¬äºŒæ­¥ï¼šæˆæƒ</p><p>åœ¨masterä¸Šåšæˆæƒ,superå’Œreplication slaveéƒ½æ˜¯å¤åˆ¶è¦ç”¨çš„æƒé™</p><p>mysql> grant super,replication slave on *.* to 'slave1'@'2.2.2.129' identified by '123';</p><p>ç”¨æˆ·@ä»çš„ipï¼Œå…è®¸ä»çš„ipè¿æ¥ä¸»</p><p>mysql> flush privileges;</p><p>åœ¨slaveä¸Šæœ€å¥½ä½¿ç”¨åˆšæ‰æˆæƒçš„ç”¨æˆ·æ˜¯è¿œç¨‹ç™»å½•ä¸€ä¸‹ä¸»å»éªŒè¯ä¸€ä¸‹</p><p># mysql -u slave1 -h 2.2.2.128 -p</p><p>ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹masterçš„æ­£åœ¨å†™çš„äºŒè¿›åˆ¶æ–‡ä»¶åå’Œä½ç½®</p><p>mysql> flush tables with read lock; --å…ˆåŠ é”ï¼Œé˜²æ­¢ä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´;å¦‚æœä¸šåŠ¡è¿˜æœªä¸Šçº¿ï¼Œè¿™ä¸ªå°±æ²¡æœ‰å¿…è¦äº†</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>mysql> show master status; --åªæœ‰æ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—ï¼Œè¿™å¥å‘½ä»¤æ‰æœ‰ç»“æœï¼Œè¡¨ç¤ºå½“å‰æ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—å†™åˆ°ä»€ä¹ˆä½ç½®</p><p>+------------------+----------+--------------+------------------+</p><p>| File | Position | Binlog_Do_DB | Binlog_Ignore_DB |</p><p>+------------------+----------+--------------+------------------+</p><p>| mysql-bin.000003 | 336 | | |</p><p>+------------------+----------+--------------+------------------+</p><p>äºŒè¿›åˆ¶æ–‡ä»¶å æ­£åœ¨å†™å…¥çš„ä½ç½®</p><p>slaveç«¯çš„é…ç½®</p><p>mysql> slave stop; --å¦‚æœæ²¡æœ‰å¯è¿‡slaveï¼Œè¿™ä¸€æ­¥ä¹Ÿæ˜¯éå¿…è¦çš„</p><p>Query OK, 0 rows affected, 1 warning (0.00 sec)</p><p>mysql> stop slave; --mysql5.6</p><p>Query OK, 0 rows affected, 1 warning (0.00 sec)</p><p>mysql> show warnings;</p><p>+-------+------+--------------------------------+</p><p>| Level | Code | Message |</p><p>+-------+------+--------------------------------+</p><p>| Note | 1255 | Slave already has been stopped |</p><p>+-------+------+--------------------------------+</p><p>mysql> change master to</p><p>-> master_user='slave1',</p><p>-> master_password='123',</p><p>-> master_host='2.2.2.128', --ä¸»çš„IP</p><p>-> master_port=3306, --ç«¯å£ï¼Œå¦‚æœä¸º3307å°±è¦æ¢æˆ3307</p><p>-> master_log_file='mysql-bin.000003', --ä¸»ä¸Šé¢æŸ¥åˆ°çš„æ–‡ä»¶å</p><p>-> master_log_pos=336; --ä¸»ä¸Šé¢æŸ¥åˆ°çš„ä½ç½®å·</p><p>mysql > mysql -u slave1 -h 2.2.2.128 -p123</p><p>mysql> change master to master_user='slave1', master_password='123', master_host='2.2.2.128', master_port=3306, master_log_file='mysql-bin.000003', master_log_pos=336;</p><p>mysql> start slave;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>mysql> show slave status\G</p><p>*************************** 1. row ***************************</p><p>Slave_IO_State: Waiting for master to send event</p><p>Master_Host: 2.2.2.128</p><p>Master_User: li</p><p>Master_Port: 3306</p><p>Connect_Retry: 60</p><p>Master_Log_File: mysql-bin.000001</p><p>Read_Master_Log_Pos: 681</p><p>Relay_Log_File: mysql55-relay-bin.000002</p><p>Relay_Log_Pos: 253</p><p>Relay_Master_Log_File: mysql-bin.000001</p><p>Slave_IO_Running: Yes</p><p>Slave_SQL_Running: Yes --è¿™é‡Œä¸¤ä¸ªYESï¼Œè¡¨ç¤ºä¸¤ä¸ªçº¿ç¨‹OK</p><p>Replicate_Do_DB:</p><p>Replicate_Ignore_DB:</p><p>Replicate_Do_Table:</p><p>Replicate_Ignore_Table:</p><p>Replicate_Wild_Do_Table:</p><p>Replicate_Wild_Ignore_Table:</p><p>Last_Errno: 0</p><p>Last_Error:</p><p>Skip_Counter: 0</p><p>Exec_Master_Log_Pos: 681</p><p>Relay_Log_Space: 411</p><p>Until_Condition: None</p><p>Until_Log_File:</p><p>Until_Log_Pos: 0</p><p>Master_SSL_Allowed: No</p><p>Master_SSL_CA_File:</p><p>Master_SSL_CA_Path:</p><p>Master_SSL_Cert:</p><p>Master_SSL_Cipher:</p><p>Master_SSL_Key:</p><p>Seconds_Behind_Master: 0</p><p>Master_SSL_Verify_Server_Cert: No</p><p>Last_IO_Errno: 0</p><p>Last_IO_Error:</p><p>Last_SQL_Errno: 0</p><p>Last_SQL_Error:</p><p>Replicate_Ignore_Server_Ids:</p><p>Master_Server_Id: 2</p><p>1 row in set (0.00 sec)</p><p>...................................</p><p>å›åˆ°masterç«¯è§£é”ï¼š</p><p>mysql> unlock tables;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>è¿›è¡Œæµ‹è¯•ï¼š</p><p>1ï¼Œå…ˆæ¯”è¾ƒä¸»ï¼Œä»çš„æ•°æ®ç›®å½•æ–‡ä»¶çš„ä¸åŒ</p><p># ls /var/lib/mysql/ --master</p><p>ibdata1 ib_logfile1 mysql-bin.000001 mysql-bin.000003 mysql.sock</p><p>ib_logfile0 mysql mysql-bin.000002 mysql-bin.index test</p><p># ls /var/lib/mysql/ --slave</p><p>ibdata1 ib_logfile1 mysql mysqld-relay-bin.000002 mysql.sock test</p><p>ib_logfile0 master.info mysqld-relay-bin.000001 mysqld-relay-bin.index relay-log.info</p><p># cat /var/lib/mysql/master.info</p><p># cat /var/lib/mysql/relay-log.info</p><p># mysqlbinlog /var/lib/mysql/mysqld-relay-bin.000002</p><p>éªŒè¯2ï¼šåªæœ‰masterå†™ï¼Œslaveå¯ä»¥çœ‹åˆ°</p><p>slaveå†™ï¼Œmasterçœ‹ä¸åˆ°</p><p>å¦‚æœå¤åˆ¶å‡ºç°é—®é¢˜</p><p>ï¼ˆè¦æ¨¡æ‹Ÿé—®é¢˜çš„è¯ï¼Œåœ¨ä»ä¸Šåˆ›å»ºä¸€ä¸ªåº“ï¼Œç„¶ååœ¨ä¸»ä¸Šä¹Ÿåˆ›å»ºè¿™ä¸ªåº“ï¼Œå°±ä¼šå†²çªï¼Œé€ æˆå¤åˆ¶å‡ºç°é—®é¢˜ï¼‰ï¼Œ</p><p>é‡åšå¤åˆ¶é›†ç¾¤åªéœ€è¦é‡æ–°åœ¨ä»ä¸Šæ‰§è¡Œstop slave; change master to ...... ; start slave;</p><p>éªŒè¯3ï¼šæŠŠä»é‡å¯åï¼Œå†ä¸Šå»æŸ¥çœ‹çŠ¶æ€ï¼Œè¿˜æ˜¯è¿æ¥çš„ï¼Œæ²¡ä»€ä¹ˆå½±å“</p><p>æŠŠä¸»é‡å¯åï¼Œå†å»slaveä¸Šå»æŸ¥çœ‹çŠ¶æ€ï¼Œå‘ç°é‡è¯•æ—¶é—´ä¸º60ç§’ï¼Œç­‰60ç§’ååˆè‡ªåŠ¨è¿æ¥OKäº†</p><p>--å¦‚æœæƒ³è¦æ”¹è¿™ä¸ª60ç§’çš„è¯ï¼Œå¯ä»¥æŠŠä»æœåŠ¡å™¨ä¸Šçš„master.infoæ–‡ä»¶é‡Œçš„60ç›´æ¥æ”¹æˆ30(rpmç‰ˆæµ‹è¯•æœ‰ç‚¹é—®é¢˜)</p><p>------------------------------------------------------------</p><p>ä¸€ä¸»å¤šä»çš„åšæ³•</p><p>å°±æ˜¯ä¸Šé¢çš„æ­¥éª¤æœ‰å‡ ä¸ªä»å°±åšå‡ æ¬¡</p><p>-------------------------------------------------------------------</p><p>åŒä¸»æ¶æ„çš„åšæ³•ï¼š</p><p>åœ¨ä¸Šé¢çš„slaveæœºä¹Ÿæ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—ï¼Œåç€åšä¸€éå°±è¡Œï¼Œæ³¨æ„åšçš„è¿‡ç¨‹ä¸­ï¼Œä¿è¯æ•°æ®ä¸€è‡´</p><p>åšå¥½çš„æ¶æ„ï¼Œåªè¦ä¸¤è¾¹ä¸åŒæ—¶æ“ä½œç›¸åŒçš„æ•°æ®ï¼Œå°±ä¸ä¼šå‡ºç°å¤åˆ¶ä¸ä¸€è‡´çš„é—®é¢˜ï¼›</p><p>æˆ–è€…æ˜¯åœ¨ä¸šåŠ¡ç¨‹åºå±‚ï¼Œå°†ä¸€éƒ¨åˆ†çš„å†™æ“ä½œå®šä¹‰åˆ°master A,å¦ä¸€éƒ¨åˆ†çš„å†™æ“ä½œå®šä¹‰åˆ°master B</p><p>-------------------------------------------------------------</p><p>çº§è”æ¶æ„</p><p>master -slave -slave</p><p>æŠŠä¸­é—´çš„ä»ä¹Ÿè¦æ‰“å¼€äºŒè¿›åˆ¶æ—¥å¿—ã€‚ä½†æ˜¯å®ƒé»˜è®¤ä¸æŠŠåº”ç”¨masterçš„æ“ä½œè®°å½•åˆ°è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—ã€‚æ‰€ä»¥éœ€è¦æ‰“å¼€ä¸€ä¸ªå‚æ•°è®©å®ƒè®°å½•ï¼Œæ‰å¯ä»¥ä¼ ç»™ç¬¬ä¸‰çº§çš„ä»</p><p># /usr/local/mysql/bin/mysqld --verbo --help |grep log-slave</p><p>--log-slave-updates Tells the slave to log the updates from the slave thread</p><p>--log-slave-updates is used.</p><p>log-slave-updates FALSE</p><p>--é»˜è®¤å€¼ä¸ºfalseï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šlog-slave-updates=1ï¼Œç„¶åé‡å¯æœåŠ¡</p><p>æ‰€ä»¥æ‰“å¼€ä¸­é—´ä»çš„é…ç½®æ–‡ä»¶</p><p># vim /usr/local/mysql/etc/my.cnf --åŠ ä¸Šä¸‹é¢ä¸¤å¥ï¼Œç„¶åé‡å¯æœåŠ¡</p><p>log-bin=mid-slave</p><p>log-slave-updates=1</p><p>ç„¶ååœ¨ä¸­é—´ä»å’Œç¬¬ä¸‰çº§çš„ä»ä¹‹é—´å†åšä¸€æ¬¡ABå¤åˆ¶å°±å¯ä»¥äº†</p><p>æˆ‘çš„ç»“æ„å›¾</p><p>master A slave B slave C</p><p>2.2.2.128 2.2.2.129 2.2.2.130</p><p>sever-id=2 server-id=3 server-id=4</p><p>log-bin=mysql-bin-128 log-bin=mysql-bin-129</p><p>log-slave-updates=1</p><p>bin-log relay-bin-log relay-bin-log</p><p>bin-log ------> relay-bin-log</p><p>æ‰“å¼€log-slave-updates=1</p><p>è®©ç¬¬ä¸€å°ä¼ è¿‡æ¥relayæ—¥å¿—è®°å½•</p><p>åˆ°è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—</p><p>bin-log -------> relay-bin-log</p><p>==============================================================</p><p>å…³äºæ§åˆ¶å¤åˆ¶çš„åº“å’Œè¡¨çš„ç›¸å…³å‚æ•°è®¨è®ºï¼š</p><p>Replicate_Do_DB: --æ¥å—å“ªä¸ªåº“çš„å¤åˆ¶</p><p>Replicate_Ignore_DB: --å¿½ç•¥å“ªä¸ªåº“çš„å¤åˆ¶</p><p>Replicate_Do_Table: --æ¥å—å“ªä¸ªè¡¨çš„å¤åˆ¶</p><p>Replicate_Ignore_Table: --å¿½ç•¥å“ªä¸ªè¡¨çš„å¤åˆ¶</p><p>Replicate_Wild_Do_Table: --é€šé…ç¬¦è¡¨ç¤ºå¤åˆ¶å“ªäº›è¡¨</p><p>Replicate_Wild_Ignore_Table: --é€šé…ç¬¦è¡¨ç¤ºå¿½ç•¥å“ªäº›è¡¨</p><p>å®ä¾‹è¯´æ˜ï¼š</p><p>master A slave B</p><p>1ï¼Œå…ˆæŠŠä¸¤å°åšæˆabå¤åˆ¶çš„æ¶æ„</p><p>2ï¼Œåœ¨master aä¸Šåˆ›å»ºaaaåº“åŠå…¶é‡Œé¢çš„aaaè¡¨ï¼Œbbbåº“åŠå…¶é‡Œé¢çš„bbbè¡¨</p><p>é‚£ä¹ˆslave bé‡Œä¹Ÿä¼šå¤åˆ¶äº§ç”Ÿè¿™ä¸¤å¼ æµ‹è¯•è¡¨</p><p>3ï¼Œç°åœ¨çš„ä¸šåŠ¡éœ€æ±‚æ˜¯ï¼š</p><p>æˆ‘åœ¨slave bä¸Šè¦æ±‚å¤åˆ¶çš„ä¸ºaaaåº“é‡Œæ‰€æœ‰è¡¨ï¼›bbbåº“åŠå…¶æ‰€æœ‰è¡¨ä¸è¦æ±‚å¤åˆ¶è¿‡å»</p><p>4ï¼Œåœ¨slave bçš„my.cnfé…ç½®æ–‡ä»¶çš„[mysqld]å‚æ•°ç»„é‡ŒåŠ ä¸Š</p><p>replicate_do_db=aaa --åªæ¥å—aaaåº“çš„å¤åˆ¶</p><p>replicate_ignore_db=bbb --å¿½ç•¥bbbåº“çš„å¤åˆ¶</p><p>5ï¼Œé‡å¯slave bï¼Œç„¶åæµ‹è¯•</p><p>æµ‹è¯•ç»“æœä¸º</p><p>åœ¨master aä¸Šæ“ä½œï¼š</p><p>use aaa;</p><p>insert into aaa values ....;</p><p>slave bä¸Šå¯ä»¥çœ‹åˆ°insertçš„è®°å½• --OK</p><p>åœ¨master a ä¸Šæ“ä½œï¼š</p><p>use bbb;</p><p>insert into bbb values ....;</p><p>slave bä¸Šçœ‹ä¸åˆ°insertçš„è®°å½• --OKï¼›ä½†è¿™é‡Œçš„æ“ä½œè¿˜æ˜¯ä¼šè®°å½•åˆ°slave bçš„relay-bin-logé‡Œ</p><p>åœ¨master aä¸Šæ“ä½œï¼š</p><p>use bbb;</p><p>insert into aaa.aaa values ....;</p><p>slave bä¸Šå´çœ‹ä¸åˆ°insertçš„æ“ä½œ --æœ‰é—®é¢˜</p><p>--åŸå› æ˜¯ï¼šå®ƒé»˜è®¤åªä¼šå¤åˆ¶åœ¨aaaåº“ä¸‹å¯¹å®ƒä¸‹é¢çš„è¡¨çš„æ“ä½œï¼›è€Œåˆ«çš„åº“ä¸‹å¯¹aaaåº“ä¸‹è¡¨çš„æ“ä½œä¼šå¿½ç•¥</p><p>6ï¼Œè§£å†³æ–¹æ³•ï¼š</p><p>åœ¨slave bä¸ŠæŠŠç¬¬4æ­¥åšçš„ä¸¤ä¸ªå‚æ•°æ¢æˆä¸‹é¢ä¸¤ä¸ª</p><p>replicate_wild_do_table=aaa.%</p><p>replicate_wild_ignore_table=bbb.%</p><p>å†æŠŠslave bé‡å¯ï¼›å°±ä¸ä¼šå‡ºç°åˆšæ‰çš„é—®é¢˜äº†</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>æ­å»ºç¯å¢ƒ ä¸¤å°è™šæ‹Ÿæœº</p><p>master ï¼ï¼ slave</p><p>å…ˆå®‰è£…mysql5.5ä¹‹åçš„ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™ä¸ªç‰ˆæœ¬ä¹‹åæ‰å®ç°çš„åŠåŒæ­¥å¤åˆ¶</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>MySQLçš„å¤åˆ¶å…¶å®æ˜¯å¼‚æ­¥æ“ä½œï¼Œè€Œä¸æ˜¯åŒæ­¥ï¼Œä¹Ÿå°±æ„å‘³ç€å…è®¸ä¸»ä»ä¹‹é—´çš„æ•°æ®å­˜åœ¨ä¸€</p><p>å®šçš„å»¶è¿Ÿï¼Œmysqlå½“åˆè¿™æ ·è®¾è®¡çš„ç›®çš„ä¹Ÿæ˜¯åŸºäºå¯ç”¨æ€§çš„è€ƒè™‘ï¼Œä¸ºäº†ä¿è¯master</p><p>ä¸å—slaveçš„å½±å“ï¼Œå¹¶ä¸”å¼‚æ­¥å¤åˆ¶ä½¿å¾—masterå¤„äºä¸€ç§æ€§èƒ½æœ€ä¼˜çš„çŠ¶æ€ï¼š</p><p>å†™å®Œbinlogåå³å¯æäº¤è€Œä¸éœ€è¦ç­‰å¾…slaveçš„æ“ä½œå®Œæˆã€‚è¿™æ ·å­˜åœ¨ä¸€ä¸ªéšæ‚£ï¼Œå½“ä½ ä½¿ç”¨slaveä½œä¸ºå¤‡ä»½æ—¶ï¼Œ</p><p>å¦‚æœmasteræŒ‚æ‰ï¼Œé‚£ä¹ˆä¼šå­˜åœ¨éƒ¨åˆ†å·²æäº¤çš„äº‹åŠ¡æœªèƒ½æˆåŠŸä¼ è¾“åˆ°slaveçš„å¯èƒ½ï¼Œè¿™å°±æ„å‘³ç€æ•°æ®ä¸¢å¤±ï¼</p><p>æ‰€è°“çš„åŠåŒæ­¥å¤åˆ¶å°±æ˜¯masteræ¯commitä¸€ä¸ªäº‹åŠ¡,è¦slaveåº”ç”¨è¿™ä¸ªäº‹ç‰©åå›ç»™masterä¿¡å·ã€‚è¿™æ ·masteræ‰èƒ½æŠŠäº‹ç‰©æˆåŠŸcommitã€‚è¿™æ ·å°±ä¿è¯äº†master-slaveçš„æ•°æ®ç»å¯¹çš„ä¸€è‡´ï¼ˆä½†æ˜¯ä»¥ç‰ºç‰²masterçš„æ€§èƒ½ä¸ºä»£ä»·).ä½†ç­‰å¾…æ—¶é—´ä¹Ÿæ˜¯å¯ä»¥è°ƒæ•´çš„ã€‚</p><p>mysqlåŠåŒæ­¥å¤åˆ¶ç­‰å¾…æ—¶é—´è¶…æ—¶å(é»˜è®¤æ—¶é—´ä¸º10ç§’)ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆå¼‚æ­¥å¤åˆ¶</p><p>--ä¸‹é¢çš„æ­¥éª¤ç”¨5.6.26ç‰ˆæµ‹è¯•æ˜¯ä¸€æ ·çš„åšæ³•</p><p>ï¼ˆæ³¨æ„5.6.xç‰ˆæœ¬é»˜è®¤ä»¥mysql@localhostç™»å½•çš„ï¼Œä½ è¦-u rootæ¥æŒ‡å®šä»¥root@localhostç™»å½•å°±å¯ä»¥äº†)</p><p>æ­å»ºå¥½ mysqlABå¼‚æ­¥å¤åˆ¶å</p><p>åœ¨masterä¸Šå®‰è£…è¿™ä¸ªæ’ä»¶</p><p>master> install plugin rpl_semi_sync_master soname 'semisync_master.so';</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>--åˆ é™¤æ’ä»¶çš„æ–¹æ³• mysql > uninstall plugin rpl_semi_sync_master;</p><p>master> show global variables like 'rpl_semi_sync%'; --å®‰è£…OKåï¼Œä¸»ä¸Šä¼šå¤šå‡ ä¸ªå‚æ•°</p><p>+------------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+------------------------------------+-------+</p><p>| rpl_semi_sync_master_enabled | OFF | --æ˜¯å¦å¯ç”¨masterçš„åŠåŒæ­¥å¤åˆ¶</p><p>| rpl_semi_sync_master_timeout | 10000 | --é»˜è®¤ä¸»ç­‰å¾…ä»è¿”å›ä¿¡æ¯çš„è¶…æ—¶é—´æ—¶é—´ï¼Œ10ç§’ã€‚</p><p>| rpl_semi_sync_master_trace_level | 32 | --ç›‘æ§</p><p>| rpl_semi_sync_master_wait_no_slave | ON | --æ˜¯å¦å…è®¸æ¯ä¸ªäº‹ç‰©çš„æäº¤éƒ½è¦ç­‰å¾…slaveçš„ä¿¡å·.onä¸ºæ¯ä¸€ä¸ªäº‹ç‰©éƒ½ç­‰å¾…</p><p>+------------------------------------+-------+</p><p>åœ¨slaveä¸Šå®‰è£…æ’ä»¶</p><p>slave> install plugin rpl_semi_sync_slave soname 'semisync_slave.so';</p><p>Query OK, 0 rows affected (0.03 sec)</p><p>slave> show global variables like 'rpl_semi_sync%';</p><p>+---------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+---------------------------------+-------+</p><p>| rpl_semi_sync_slave_enabled | OFF |</p><p>| rpl_semi_sync_slave_trace_level | 32 |</p><p>+---------------------------------+-------+</p><p>masterä¸Šæ¿€æ´»åŠåŒæ­¥å¤åˆ¶</p><p>master> set global rpl_semi_sync_master_enabled =on;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>slaveä¸Šæ¿€æ´»åŠåŒæ­¥å¤åˆ¶</p><p>slave> set global rpl_semi_sync_slave_enabled=on;</p><p>slave> stop slave IO_THREAD;</p><p>slave> start slave IO_THREAD;</p><p>åœ¨masteræŸ¥çœ‹çŠ¶æ€</p><p>master > show global status like 'rpl_semi_sync%';</p><p>+--------------------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+--------------------------------------------+-------+</p><p>| Rpl_semi_sync_master_clients | 1 | --æœ‰ä¸€ä¸ªä»æœåŠ¡å™¨å¯ç”¨åŠåŒæ­¥å¤åˆ¶</p><p>| Rpl_semi_sync_master_net_avg_wait_time | 0 | --masterç­‰å¾…slaveå›å¤çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€‚å•ä½æ¯«ç§’</p><p>| Rpl_semi_sync_master_net_wait_time | 0 | --masteræ€»çš„ç­‰å¾…æ—¶é—´ã€‚å•ä½æ¯«ç§’</p><p>| Rpl_semi_sync_master_net_waits | 0 | --masterç­‰å¾…slaveå›å¤çš„æ€»çš„ç­‰å¾…æ¬¡æ•°</p><p>| Rpl_semi_sync_master_no_times | 0 | --masterå…³é—­åŠåŒæ­¥å¤åˆ¶çš„æ¬¡æ•°</p><p>| Rpl_semi_sync_master_no_tx | 0 | --master ç­‰å¾…è¶…æ—¶çš„æ¬¡æ•°</p><p>| Rpl_semi_sync_master_status | ON | --æ ‡è®°masterç°åœ¨æ˜¯å¦æ˜¯åŠåŒæ­¥å¤åˆ¶çŠ¶æ€</p><p>| Rpl_semi_sync_master_timefunc_failures | 0 | --masterè°ƒç”¨æ—¶é—´ï¼ˆå¦‚gettimeofday())å¤±è´¥çš„æ¬¡æ•°</p><p>| Rpl_semi_sync_master_tx_avg_wait_time | 0 | --masterèŠ±åœ¨æ¯ä¸ªäº‹åŠ¡ä¸Šçš„å¹³å‡ç­‰å¾…æ—¶é—´</p><p>| Rpl_semi_sync_master_tx_wait_time | 0 | --masterèŠ±åœ¨äº‹ç‰©ä¸Šæ€»çš„ç­‰å¾…æ—¶é—´</p><p>| Rpl_semi_sync_master_tx_waits | 0 | --masteräº‹ç‰©ç­‰å¾…æ¬¡æ•°</p><p>| Rpl_semi_sync_master_wait_pos_backtraverse | 0 | --åæ¥çš„å…ˆåˆ°äº†ï¼Œè€Œå…ˆæ¥çš„è¿˜æ²¡æœ‰åˆ°çš„æ¬¡æ•°</p><p>| Rpl_semi_sync_master_wait_sessions | 0 | --å½“å‰æœ‰å¤šå°‘ä¸ªsessionå› ä¸ºslaveå›å¤è€Œé€ æˆç­‰å¾…</p><p>| Rpl_semi_sync_master_yes_tx | 0 | --æ ‡è®°slaveæ˜¯å¦åœ¨åŠåŒæ­¥çŠ¶æ€</p><p>+--------------------------------------------+-------+</p><p>åœ¨slaveä¸ŠæŸ¥çœ‹çŠ¶æ€å°±åªæœ‰ä¸‹é¢ä¸€æ¡ä¿¡æ¯</p><p>slave > show global status like 'rpl_semi_sync%';</p><p>+----------------------------+-------+</p><p>| Variable_name | Value |</p><p>+----------------------------+-------+</p><p>| Rpl_semi_sync_slave_status | ON |</p><p>+----------------------------+-------+</p><p>æµ‹è¯•ï¼š</p><p>master > insert into a values (3);</p><p>Query OK, 1 row affected (0.01 sec)</p><p>master > show global status like 'rpl_semi_sync%_yes_tx';</p><p>+-----------------------------+-------+</p><p>| Variable_name | Value |</p><p>+-----------------------------+-------+</p><p>| Rpl_semi_sync_master_yes_tx | 1 | --è¡¨ç¤ºè¿™æ¬¡äº‹ç‰©æˆåŠŸä»slaveè¿”å›ä¸€æ¬¡ç¡®è®¤ä¿¡å·</p><p>+-----------------------------+-------+</p><p>æ¨¡æ‹Ÿé”™è¯¯ï¼ŒæŠŠslaveä¸Šçš„mysqlåœæ‰/etc/init.d/mysql56 stop</p><p>--å†å›åˆ°masterä¸Šæµ‹è¯•</p><p>master> insert into a values (4);</p><p>Query OK, 1 row affected (10.00 sec) --è¿™æ¬¡æ’å…¥ä¸€ä¸ªå€¼éœ€è¦ç­‰å¾…10ç§’ï¼ˆé»˜è®¤çš„ç­‰å¾…æ—¶é—´)</p><p>master> insert into a values (5);</p><p>Query OK, 1 row affected (0.01 sec) --ç°åœ¨è‡ªåŠ¨è½¬æˆäº†åŸæ¥çš„å¼‚æ­¥æ¨¡å¼ï¼ˆç±»ä¼¼oracle DGé‡Œçš„æœ€å¤§æ€§èƒ½æ¨¡å¼)</p><p>å†æ¬¡æŠŠslaveå¯åŠ¨ï¼Œçœ‹åˆ°åŠåŒæ­¥å¤åˆ¶æ²¡å¯æ¥ï¼Œæ˜¯å¼‚æ­¥æ¨¡å¼</p><p>é‡æ–°æŒ‰ä¸‹é¢çš„æ­¥éª¤æŠŠåŒæ­¥æ¨¡å¼å†å¯èµ·æ¥å°±å¯ä»¥äº†</p><p>slave> set global rpl_semi_sync_slave_enabled=on;</p><p>slave> stop slave IO_THREAD;</p><p>slave> start slave IO_THREAD;</p><p>slaveå¯èµ·æ¥åï¼ŒæŸ¥çœ‹è¡¨ï¼Œå‘ç°åˆšæ‰slaveå…³é—­æœŸé—´çš„é‚£å‡ æ¡æ•°æ®è¿˜æ˜¯ä¼šè‡ªåŠ¨å¤åˆ¶è¿‡æ¥ï¼Œæ•°æ®åˆå›åˆ°ä¸€è‡´</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>mysqlçš„å»¶æ—¶å¤åˆ¶</p><p>å¼‚æ­¥æˆ–åŒæ­¥å¤åˆ¶</p><p>A ----------> B</p><p>|</p><p>|-------> C</p><p>å»¶æ—¶1å¤©</p><p>å‡è®¾åœ¨Aä¸Šè¯¯åˆ é™¤ä¸€æ¡æ•°æ®ï¼Œç”¨äºŒè¿›åˆ¶æ—¥å¿—æ¥æ¢å¤ä¸å¤ªæ–¹ä¾¿ï¼Œå› ä¸ºæ—¥å¿—é‡Œè®°å½•çš„æ˜¯åˆ é™¤çš„æ“ä½œï¼Œå¹¶æ²¡æœ‰è®°å½•è¿™æ¡æ•°æ®å…·ä½“æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥ä½ è¦åœ¨æ‰€æœ‰çš„æ—¥å¿—é‡Œæ‰¾åˆ°å½“åˆæ’å…¥è¿™æ¡æ•°æ®æ—¶çš„è®°å½•ï¼Œè¿™æ˜¯å¾ˆéº»çƒ¦çš„ã€‚</p><p>ä¹Ÿæœ‰åˆ«çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠè¯¯åˆ é™¤ä¹‹å‰çš„å¤‡ä»½åœ¨æµ‹è¯•åº“ä¸Šæ¢å¤ï¼Œç„¶åæŠŠæ•°æ®æ‰¾å‡ºæ¥ï¼Œå¹¶å¯¼å›æ¥</p><p>å¤‡ä»½ æ”¹1 æ”¹2 åˆ é™¤</p><p>0 8 12 16</p><p>delete from emp where ename='zhangsan';</p><p>drop table emp;</p><p>è¯¯åˆ é™¤1å¼ è¡¨,ç”¨äºŒè¿›åˆ¶æ—¥å¿—æ¥æ¢å¤,ä¸å¤ªå¥½æ‰¾ç›¸å…³çš„æ•°æ®,å› ä¸ºè¿™å¼ è¡¨å¦‚æœä½¿ç”¨äº†å¥½å‡ å¹´,æ•°æ®æ“ä½œå¤ªå¤š;æœ‰å»¶æ—¶å¤åˆ¶çš„è¯,åœ¨Cä¸Šå¯¼å‡ºè¿™å¼ è¡¨,å¯¼å›A</p><p>è¯¯åˆ é™¤æœ€è¿‘ä¸€æ®µæ—¶é—´ç›¸å…³çš„æ•°æ®,ç”¨äºŒè¿›åˆ¶æ—¥å¿—æ‰¾åˆ°é‚£ä¸ªæ—¶é—´ç‚¹,ä»é‚£ä¸ªæ—¶é—´ç‚¹æ¢å¤åˆ°ç°åœ¨</p><p>mysqlå¼€æºç®¡ç†å·¥å…·</p><p>maatkit --perlå†™çš„ï¼Œè€å¤–å¸¸ç”¨</p><p># ls /share/soft/maatkit/</p><p>maatkit-7410[1].tar.gz maatkit-7540[1].tar.gz</p><p>maatkit-7486[1].tar.gz</p><p>--åœ¨mysql ABçš„slaveä¸Šå®‰è£…ï¼ˆåªéœ€è¦åœ¨slaveä¸Šå®‰è£…)</p><p># tar xf /share/soft/maatkit/maatkit-7540\[1\].tar.gz -C /usr/src/</p><p># cd /usr/src/maatkit-7540/</p><p>å®‰è£…æ–¹æ³•READMEæ–‡ä»¶é‡Œæœ‰å†™</p><p># perl Makefile.PL --å¦‚æœä¸æˆåŠŸï¼Œéœ€è¦å®‰è£…perlæœ‰å…³çš„å¤šä¸ªåŒ…ï¼Œå¯ä»¥yum install perl*</p><p># make install</p><p>[root@li maatkit-7540]# ls bin/ --è¿™äº›å‘½ä»¤ï¼Œå°±æ˜¯å„ä¸ªç®¡ç†å·¥å…·</p><p>mk-archiver mk-purge-logs</p><p>mk-checksum-filter mk-query-advisor</p><p>mk-config-diff mk-query-digest</p><p>mk-deadlock-logger mk-query-profiler</p><p>mk-duplicate-key-checker mk-show-grants</p><p>mk-error-log mk-slave-delay</p><p>mk-fifo-split mk-slave-find</p><p>mk-find mk-slave-move</p><p>mk-heartbeat mk-slave-prefetch</p><p>mk-index-usage mk-slave-restart</p><p>mk-kill mk-table-checksum</p><p>mk-loadavg mk-table-sync</p><p>mk-log-player mk-table-usage</p><p>mk-merge-mqd-results mk-tcp-model</p><p>mk-parallel-dump mk-upgrade</p><p>mk-parallel-restore mk-variable-advisor</p><p>mk-profile-compact mk-visual-explain</p><p>--ä½¿ç”¨--helpæŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•</p><p># mk-slave-delay --help</p><p>mk-slave-delay starts and stops a slave server as needed to make it lag behind</p><p>the master. The SLAVE-HOST and MASTER-HOST use DSN syntax, and values are</p><p>copied from the SLAVE-HOST to the MASTER-HOST if omitted. For more details,</p><p>please use the --help option, or try 'perldoc /usr/bin/mk-slave-delay' for</p><p>complete documentation.</p><p># perldoc /usr/bin/mk-slave-delay --æŸ¥çœ‹æ–‡æ¡£</p><p>æˆ–è€…ç›´æ¥man mk-slave-delay</p><p>--mysql AB(æ— è®ºåŒæ­¥æˆ–å¼‚æ­¥)æ­£åœ¨è¿è¡ŒOKçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨slaveä¸Šè¿è¡Œ;åšä¹‹é—´å»ºè®®æŠŠæ—¶é—´åŒæ­¥ä¸€ä¸‹</p><p># mk-slave-delay --defaults-file=/usr/local/mysql56/etc/my.cnf --delay=1m --interval=15s --user=root --password=123 --socket=/var/run/mysqld/mysql56.socket --quiet localhost &</p><p>--è¡¨ç¤ºå»¶æ—¶1åˆ†é’Ÿï¼Œæ‰ä¼šåº”ç”¨SQLçº¿ç¨‹ï¼›è¿™é‡Œæ˜¯æµ‹è¯•æ‰€ä»¥æ‰ä½¿ç”¨å¾ˆå°çš„æ—¶é—´ï¼Œå®é™…æƒ…å†µå¯ä»¥è°ƒæˆ1å°æ—¶æˆ–2å°æ—¶</p><p>æµ‹è¯•ï¼š</p><p>åœ¨masterä¸Šéšä¾¿æ’å…¥å‡ æ¡æ•°æ®</p><p>ç„¶ååœ¨slaveä¸Šå‘ç°æ²¡æœ‰é©¬ä¸ŠåŒæ­¥è¿‡æ¥</p><p>slave > show slave status\G; --æŸ¥çœ‹çŠ¶æ€ä¼šå‘ç°SQLçº¿ç¨‹çŠ¶æ€ä¸ºNO</p><p>Slave_IO_Running: Yes</p><p>Slave_SQL_Running: NO</p><p>å¤§æ¦‚ç­‰1åˆ†é’Ÿï¼Œå°±ä¼šè‡ªåŠ¨å»¶æ—¶åŒæ­¥è¿‡æ¥äº†ï¼›</p><p>--æ³¨æ„:æ—¥å¿—å·²ç»ä¼ åˆ°slaveçš„relay-bin logé‡Œäº†ï¼Œä½†ç”±SQLçº¿ç¨‹å»¶æ—¶å»è§£æ</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>åŸç†ç†è§£é¢˜</p><p>é¢˜1</p><p>mysqlæ¶æ„ä¸­,ä¸€ä¸»å¤šä»ï¼ŒåŒä¸»ï¼Œçº§è”ï¼ˆå¤šä¸»ä¸€ä»å’Œç¯å‹ä¸æ”¯æŒ)è¿™ä¸‰ç§çš„åŒºåˆ«å’Œä¼˜ç¼ºç‚¹</p><p>é¢˜2</p><p>å¦‚æœç°åœ¨ä¸€ä¸ªå°å…¬å¸mysqlæ•°æ®åº“å·²ç»è·‘äº†ä¸€å¹´ï¼Œç°åœ¨è¦æ­å»ºmysqlABå¤åˆ¶ï¼Œä½ æ£€æŸ¥äº†ä¸»åº“åï¼Œå‘ç°å®ƒè¿™ä¸€å¹´éƒ½æ²¡æœ‰ä½¿ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼Œè¯·é—®å¦‚ä½•åšå¤åˆ¶ï¼Ÿ</p><p>1,å…ˆä¸»åº“å¼€äºŒè¿›åˆ¶æ—¥å¿—</p><p>2,å¤‡ä»½ä¸»åº“ï¼Œæ¢å¤åˆ°ä»åº“</p><p>3ï¼ŒåšABå¤åˆ¶ï¼ŒæŒ‡å®šä»å¤‡ä»½çš„positionå¾€åå¤åˆ¶</p><p>é¢˜3</p><p>åœ¨å®é™…çš„å¤§æ•°æ®é‡çš„æ•°æ®åº“ä¸­ï¼Œå› ä¸ºè´Ÿè½½å¤ªé«˜æˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œç°åœ¨é€ æˆå¤åˆ¶æ—¶çš„æ•°æ®å»¶æ—¶ï¼Œè¯·é—®ä½ å¦‚ä½•åšä¸ºDBAåº”è¯¥å¦‚ä½•å»å¤„ç†ï¼Ÿ</p><p>æ¶æ„æ‰©å±•æ€§</p><p>é¢˜4</p><p>å¦‚æœä¸€ä¸ªlampæ¶æ„åœ¨æ·±åœ³æœºæˆ¿åœ¨è¿è¡Œï¼Œå¦‚ä½•å°½é‡æ— å½±å“çš„æŠŠè¿™ä¸ªlampè¿ç§»åˆ°æƒ å·çš„æœºæˆ¿</p><p>1ï¼Œåœ¨æƒ å·æœºæˆ¿åšä¸€ä¸ªlampï¼ŒmysqlåŒä¸»æ¶æ„ï¼Œwebåšrsyncè¿œç¨‹å®æ—¶åŒæ­¥</p><p>2ï¼ŒæŠŠç½‘ç«™åŸŸåå¯¹åº”çš„IPåœ°å€Aè®°å½•æ”¹æˆæƒ å·çš„IP</p><p>3ï¼Œå½“æ·±åœ³æœºæˆ¿æœåŠ¡å™¨æ— è¿æ¥æ—¶ï¼Œå°±å¯ä»¥å…³é—­æ·±åœ³æœºæˆ¿çš„æœåŠ¡å™¨äº†</p><p>é¢˜5</p><p>åšmysqlABå¤åˆ¶ä¸èƒ½åŒè¯»åŒå†™ï¼Œå¦‚æœæœ‰å‡ ä¸ªåˆ†å…¬å¸ï¼Œå„åˆ†å…¬å¸éƒ½æœ‰mysqlæ•°æ®åº“ï¼Œè¦æ±‚ï¼Œå„åœ°mysqlæ•°æ®åŒæ­¥ï¼Œå¹¶ä¸”å„åœ°éƒ½èƒ½è¯»èƒ½å†™ã€‚</p><p>ndbcluster</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'mysql','AB','ä¸»ä»'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>