<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>MongoDBçš„å­¦ä¹ ï¼Œé…ç½®æ–‡ä»¶è¯¦è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="MongoDBçš„å­¦ä¹ ï¼Œé…ç½®æ–‡ä»¶è¯¦è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/ed9147df6e6d4da59bc0ae7bedb89737"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/20b9be5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/20b9be5.html><meta property="article:published_time" content="2020-10-29T20:59:53+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:53+08:00"><meta name=Keywords content><meta name=description content="MongoDBçš„å­¦ä¹ ï¼Œé…ç½®æ–‡ä»¶è¯¦è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/20b9be5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>MongoDBçš„å­¦ä¹ ï¼Œé…ç½®æ–‡ä»¶è¯¦è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>ä¸Šä¸€ä¸ªç¯‡å¹…ä»‹ç»äº†mongodbçš„ä»‹ç»å’Œå®‰è£…ï¼Œæ¥ä¸‹æ¥ä»‹ç»mongodbçš„é…ç½®æ–‡ä»¶ã€‚</p><div class=pgc-img><img alt=MongoDBçš„å­¦ä¹ ï¼Œé…ç½®æ–‡ä»¶è¯¦è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ed9147df6e6d4da59bc0ae7bedb89737><p class=pgc-img-caption></p></div><p>bsondump:å°†bjsonæ–‡æ¡£è½¬åŒ–ä¸ºjsonæ–‡æ¡£</p><p>mongo:å®¢æˆ·ç«¯ç¨‹åºï¼Œè¿æ¥MongoDB</p><p>mongod:æœåŠ¡ç«¯ç¨‹åºï¼Œå¯åŠ¨MongoDB</p><p>mongodump:å¤‡ä»½ç¨‹åº</p><p>mongoexport:æ•°æ®å¯¼å‡ºç¨‹åº</p><p>mongofiles:GridFSå·¥å…·ï¼Œå†…å»ºçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p><p>mongoimport:æ•°æ®å¯¼å…¥ç¨‹åº</p><p>mongooplog:mongodbçš„oplog</p><p>mongoperf:mongoperfæ˜¯mongoDBè‡ªå¸¦å·¥å…·ï¼Œç”¨äºè¯„ä¼°ç£ç›˜éšæœºIOæ€§èƒ½ã€‚</p><p>mongoreplay:ä¸€ç§å·¥å…·èƒ½å¤ŸæŠŠç¨‹åºåœ¨ç°ç½‘ä¸Šæ¥æ”¶çš„æ‰€æœ‰ç½‘ç»œåŒ…å­˜å‚¨ä¸‹æ¥ï¼Œç„¶ååœ¨æµ‹è¯•ç¯å¢ƒä¸Šå°†è¿™ä¸ªäº›å­˜å‚¨çš„ç½‘ç»œåŒ…è¿›è¡Œé‡æ”¾ï¼Œè¿›è¡Œæµ‹è¯•</p><p>mongorestore:æ•°æ®æ¢å¤ç¨‹åº</p><p>mongos:æ•°æ®åˆ†ç‰‡ç¨‹åºï¼Œæ”¯æŒæ•°æ®çš„æ¨ªå‘æ‰©å±•</p><p>mongostat:ç›‘è§†ç¨‹åº</p><p>mongotop:è·Ÿè¸ªä¸€ä¸ªMongoDBçš„å®ä¾‹ï¼ŒæŸ¥çœ‹å“ªäº›å¤§é‡çš„æ—¶é—´èŠ±è´¹åœ¨è¯»å–å’Œå†™å…¥æ•°æ®</p><p>mongodb.confï¼šæ–°å»ºçš„mongodbçš„é…ç½®æ–‡ä»¶</p><p><br></p><p>mongodb.confé…ç½®æ–‡ä»¶</p><pre><code>storage:    dbPath: "/usr/local/mongodb/mongodb-linux-x86_64-rhel70-3.4.10/data"systemLog:    destination: file    path: "/usr/local/mongodb/mongodb-linux-x86_64-rhel70-3.4.10/logs/mongodb.log"net:    port: 27022    http:        RESTInterfaceEnabled: trueprocessManagement:    fork: false</code></pre><p class=pgc-end-literature>å®˜æ–¹é…ç½®æ–‡ä»¶æ–‡æ¡£ï¼š</p><p class=pgc-end-literature>https://docs.mongodb.com/manual/reference/configuration-options/</p><p><br></p><h1 class=pgc-h-arrow-right>storageé…ç½®é¡¹ï¼š</h1><pre><code>systemLog:   verbosity: &lt;int&gt;   quiet: &lt;boolean&gt;   traceAllExceptions: &lt;boolean&gt;   syslogFacility: &lt;string&gt;   path: &lt;string&gt;   logAppend: &lt;boolean&gt;   logRotate: &lt;string&gt;   destination: &lt;string&gt;   timeStampFormat: &lt;string&gt;   component:      accessControl:         verbosity: &lt;int&gt;      command:         verbosity: &lt;int&gt;</code></pre><p><strong>systemLog.verbosityï¼š</strong>Type: integerï¼ŒDefault: 0</p><p>æ—¥å¿—æ¶ˆæ¯è¯¦ç»†çº§åˆ«ï¼ŒèŒƒå›´æ˜¯0åˆ°5ï¼Œ0æ˜¯MongoDBçš„é»˜è®¤æ—¥å¿—è¯¦ç»†çº§åˆ«ï¼Œå…¶ä¸­åŒ…å«å‚è€ƒæ¶ˆæ¯ã€‚<br>1åˆ°5å¢åŠ äº†è¯¦ç»†ç¨‹åº¦ï¼ŒåŒ…å«Debugæ¶ˆæ¯ã€‚ä»ç‰ˆæœ¬4.2å¼€å§‹ï¼ŒMongoDBåœ¨æ—¥å¿—æ¶ˆæ¯ä¸­åŒ…æ‹¬è°ƒè¯•è¯¦ç»†çº§åˆ«ï¼ˆ1-5ï¼‰ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¯¦ç»†çº§åˆ«ä¸º2ï¼Œåˆ™MongoDBè®°å½•D2ã€‚ åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒMongoDBæ—¥å¿—æ¶ˆæ¯ä»…å°†Debugçº§åˆ«æŒ‡å®šä¸ºDã€‚</p><p><strong>systemLog.quietï¼š</strong>Type: boolean</p><p>ä»¥<strong>quiet</strong>æ¨¡å¼è¿è¡Œmongosæˆ–mongodï¼Œä»¥å°è¯•é™åˆ¶è¾“å‡ºé‡ã€‚ä¸å»ºè®®åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­ä½¿ç”¨systemLog.quietï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šä½¿åœ¨ç‰¹å®šè¿æ¥æœŸé—´çš„è·Ÿè¸ªé—®é¢˜æ›´åŠ å›°éš¾ã€‚</p><p><strong>systemLog.traceAllExceptionsï¼š</strong>Type: boolean</p><p>æ‰“å°è¯¦ç»†ä¿¡æ¯ä»¥è¿›è¡Œè°ƒè¯•ï¼Œ ç”¨äºæ”¯æŒæ’é™¤ç›¸å…³æ•…éšœçš„å…¶ä»–æ—¥å¿—è®°å½•ã€‚</p><p><strong>systemLog.syslogFacilityï¼š</strong>Type: stringï¼ŒDefault: user</p><p>å°†æ¶ˆæ¯è®°å½•åˆ°syslogæ—¶ä½¿ç”¨çš„å·¥å…·ã€‚ æ“ä½œç³»ç»Ÿçš„syslogå®ç°å¿…é¡»æ”¯æŒæ‚¨æŒ‡å®šçš„å€¼ã€‚ è¦ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå¿…é¡»å°†systemLog.destinationè®¾ç½®ä¸ºsyslogã€‚</p><p><strong>systemLog.pathï¼š</strong>Type: string</p><p>mongodæˆ–mongosåº”è¯¥å°†æ‰€æœ‰è¯Šæ–­æ—¥å¿—è®°å½•ä¿¡æ¯å‘é€åˆ°çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å‡ºæˆ–ä¸»æœºçš„syslogã€‚ MongoDBåœ¨æŒ‡å®šè·¯å¾„åˆ›å»ºæ—¥å¿—æ–‡ä»¶ã€‚</p><p><strong>systemLog.logAppendï¼š</strong>Type: booleanï¼ŒDefault: false</p><p>å¦‚æœä¸ºtrueï¼Œåˆ™mongosæˆ–mongodå®ä¾‹é‡æ–°å¯åŠ¨æ—¶ï¼Œmongosæˆ–mongodä¼šå°†æ–°æ¡ç›®è¿½åŠ åˆ°ç°æœ‰æ—¥å¿—æ–‡ä»¶çš„æœ«å°¾ã€‚ å¦‚æœæ²¡æœ‰æ­¤é€‰é¡¹ï¼Œmongodå°†å¤‡ä»½ç°æœ‰æ—¥å¿—å¹¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p><p><strong>systemLog.logRotateï¼š</strong>Type: stringï¼ŒDefault: rename</p><p>æ—¥å¿— â€œå›è½¬â€ï¼Œé˜²æ­¢ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ç‰¹åˆ«å¤§ï¼Œåˆ™ä½¿ç”¨ logRotate æŒ‡ä»¤å°†æ–‡ä»¶ â€œå›è½¬â€ï¼Œå¯é€‰å€¼ï¼š</p><p>1.renameï¼šé‡å‘½åæ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤å€¼ã€‚</p><p>2.reopenï¼šä½¿ç”¨ linux æ—¥å¿— rotate ç‰¹æ€§ï¼Œå…³é—­å¹¶é‡æ–°æ‰“å¼€æ­¤æ—¥å¿—æ–‡ä»¶ï¼Œå¯ä»¥é¿å…æ—¥å¿—ä¸¢å¤±ï¼Œä½†æ˜¯ logAppend å¿…é¡»ä¸º trueã€‚</p><p><strong>systemLog.destinationï¼š</strong>Type: string</p><p>æ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼Œå¯ä»¥æŒ‡å®šä¸º â€œfileâ€ æˆ–è€…â€œsyslogâ€ï¼Œè¡¨è¿°è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼ˆstandard outputï¼‰</p><p class=pgc-end-literature>æ³¨æ„ï¼šsyslogå®ˆæŠ¤ç¨‹åºåœ¨è®°å½•æ¶ˆæ¯æ—¶ï¼ˆè€Œä¸æ˜¯åœ¨MongoDBå‘å‡ºæ¶ˆæ¯æ—¶ï¼‰ç”Ÿæˆæ—¶é—´æˆ³ã€‚ è¿™ä¼šå¯¼è‡´è¯¯å¯¼æ—¥å¿—æ¡ç›®çš„æ—¶é—´æˆ³ï¼Œå°¤å…¶æ˜¯åœ¨ç³»ç»Ÿè´Ÿè½½æ²‰é‡çš„æƒ…å†µä¸‹ã€‚ æˆ‘ä»¬å»ºè®®å¯¹ç”Ÿäº§ç³»ç»Ÿä½¿ç”¨fileé€‰é¡¹ï¼Œä»¥ç¡®ä¿å‡†ç¡®çš„æ—¶é—´æˆ³ã€‚</p><p><strong>systemLog.timeStampFormatï¼š</strong>Type: string,Default: iso8601-local</p><p>æ—¥å¿—æ¶ˆæ¯ä¸­æ—¶é—´æˆ³çš„æ—¶é—´æ ¼å¼ã€‚å¯é€‰å€¼ï¼š</p><p>ctime:æ˜¾ç¤ºæ—¶é—´æ ¼å¼ä¸ºWed Dec 31 18:17:54.811</p><p>iso8601-utcï¼šä»¥å›½é™…æ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰ä»¥ISO-8601æ ¼å¼æ˜¾ç¤ºæ—¶é—´æˆ³ï¼Œ1970-01-01T00:00:00.000Z</p><p>iso8601-localï¼šä»¥ISO-8601æ ¼å¼æ˜¾ç¤ºæœ¬åœ°æ—¶é—´çš„æ—¶é—´æˆ³ï¼Œ1969-12-31T19:00:00.000-0500</p><p><strong>systemLog.componenté…ç½®é€‰é¡¹</strong></p><pre><code>systemLog:   component:      accessControl:         verbosity: &lt;int&gt;      command:         verbosity: &lt;int&gt;      # COMMENT some component verbosity settings omitted for brevity      replication:         verbosity: &lt;int&gt;         election:            verbosity: &lt;int&gt;         heartbeats:            verbosity: &lt;int&gt;         initialSync:            verbosity: &lt;int&gt;         rollback:            verbosity: &lt;int&gt;      storage:         verbosity: &lt;int&gt;         journal:            verbosity: &lt;int&gt;         recovery:            verbosity: &lt;int&gt;      write:         verbosity: &lt;int&gt;</code></pre><p><strong>systemLog.component.accessControl.verbosityï¼š</strong>Type: integer,Default: 0</p><p>ä¸è®¿é—®æ§åˆ¶æœ‰å…³çš„ç»„ä»¶çš„æ—¥å¿—æ¶ˆæ¯è¯¦ç»†çº§åˆ«</p><p>è¯¦ç»†çº§åˆ«çš„èŒƒå›´æ˜¯0åˆ°5ï¼š<br>0æ˜¯MongoDBçš„é»˜è®¤æ—¥å¿—è¯¦ç»†çº§åˆ«ï¼Œå…¶ä¸­åŒ…å«å‚è€ƒæ¶ˆæ¯ã€‚<br>1åˆ°5å¢åŠ äº†è¯¦ç»†ç¨‹åº¦ï¼Œä»¥åŒ…å«Debugæ¶ˆæ¯ã€‚</p><p><strong>é™¤äº†accessControlï¼Œè¿˜æœ‰å¾ˆå¤šçš„ç»„ä»¶éƒ½å¯ä»¥é…ç½®æ—¥å¿—çº§åˆ«ã€‚åœ¨è¿™é‡Œåˆ—å‡ºå¦‚ä¸‹ã€‚</strong></p><p>commandï¼Œcontrolï¼Œftdc(3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½)ï¼Œgeoï¼Œindexï¼Œnetworkï¼Œqueryï¼Œreplicationï¼Œ</p><p>replication.election(4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½),replication.heartbeats(3.6ç‰ˆä¸­çš„æ–°åŠŸèƒ½),replication.initialSync</p><p>(4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½),replication.rollback(3.6ç‰ˆä¸­çš„æ–°åŠŸèƒ½)ï¼Œstorageï¼Œstorage.journalï¼Œ</p><p>storage.recovery(4.0ç‰ˆä¸­çš„æ–°åŠŸèƒ½)ï¼Œtransaction(4.0.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½),writeã€‚</p><h1 class=pgc-h-arrow-right>processManagementé…ç½®å—</h1><pre><code>processManagement:   fork: &lt;boolean&gt;   pidFilePath: &lt;string&gt;   timeZoneInfo: &lt;string&gt;</code></pre><p><strong>processManagement.forkï¼š</strong>Type: boolean,Default: false</p><p>å¯ç”¨åå°è¿è¡Œmongosæˆ–mongodè¿›ç¨‹çš„å®ˆæŠ¤ç¨‹åºæ¨¡å¼ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œmongosæˆ–mongodä¸ä¼šä½œä¸ºå®ˆæŠ¤ç¨‹åºè¿è¡Œï¼šé€šå¸¸ï¼Œæ‚¨å°†é€šè¿‡ä½¿ç”¨processManagement.forkæˆ–ä½¿ç”¨å¤„ç†å®ˆæŠ¤è¿›ç¨‹çš„æ§åˆ¶è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œä¸upstartå’Œsystemdä¸€èµ·ï¼‰å°†mongosæˆ–mongodä½œä¸ºå®ˆæŠ¤ç¨‹åºè¿è¡Œã€‚<br>Windowsä¸æ”¯æŒprocessManagement.forké€‰é¡¹ã€‚<br>Linuxç¨‹åºåŒ…çš„åˆå§‹åŒ–è„šæœ¬ä¸å¸Œæœ›processManagement.forkæ›´æ”¹ä¸ºé»˜è®¤å€¼ã€‚ å¦‚æœä½¿ç”¨Linuxè½¯ä»¶åŒ…å¹¶æ›´æ”¹processManagement.forkï¼Œåˆ™å¿…é¡»ä½¿ç”¨è‡ªå·±çš„åˆå§‹åŒ–è„šæœ¬å¹¶ç¦ç”¨å†…ç½®è„šæœ¬ã€‚</p><p><strong>processManagement.pidFilePathï¼š</strong>Type: string</p><p>æŒ‡å®šæ–‡ä»¶ä½ç½®æ¥å­˜å‚¨mongosæˆ–mongodè¿›ç¨‹çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ã€‚ è¿è¡Œmongodæˆ–mongosè¿›ç¨‹çš„ç”¨æˆ·å¿…é¡»èƒ½å¤Ÿå†™å…¥æ­¤è·¯å¾„ã€‚ å¦‚æœæœªæŒ‡å®šprocessManagement.pidFilePathé€‰é¡¹ï¼Œåˆ™è¯¥è¿‡ç¨‹ä¸ä¼šåˆ›å»ºPIDæ–‡ä»¶ã€‚ æ­¤é€‰é¡¹é€šå¸¸ä»…ä¸processManagement.forkè®¾ç½®ç»“åˆä½¿ç”¨æ‰æœ‰ç”¨ã€‚</p><p><strong>processManagement.timeZoneInfoï¼š</strong>Type: string</p><p>åŠ è½½æ—¶åŒºæ•°æ®åº“çš„å®Œæ•´è·¯å¾„ã€‚ å¦‚æœæœªæä¾›æ­¤é€‰é¡¹ï¼Œåˆ™MongoDBå°†ä½¿ç”¨å…¶å†…ç½®æ—¶åŒºæ•°æ®åº“ã€‚<br>Linuxå’ŒmacOSè½¯ä»¶åŒ…éšé™„çš„é…ç½®æ–‡ä»¶é»˜è®¤å°†æ—¶åŒºæ•°æ®åº“è·¯å¾„è®¾ç½®ä¸º/usr/share/zoneinfoã€‚<br>å†…ç½®æ—¶åŒºæ•°æ®åº“æ˜¯Olson/IANAæ—¶åŒºæ•°æ®åº“çš„å‰¯æœ¬ã€‚ å®ƒéšMongoDBç‰ˆæœ¬ä¸€èµ·æ›´æ–°ï¼Œä½†æ—¶åŒºæ•°æ®åº“çš„å‘å¸ƒå‘¨æœŸä¸MongoDBçš„å‘å¸ƒå‘¨æœŸä¸åŒã€‚ å¯ä»¥ä»https://downloads.mongodb.org/olson_tz_db/timezonedb-latest.zipä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ—¶åŒºæ•°æ®åº“ã€‚</p><h1 class=pgc-h-arrow-right>cloudé…ç½®é€‰é¡¹</h1><p>4.0ç‰ˆæœ¬çš„æ–°åŠŸèƒ½</p><pre><code>cloud:   monitoring:      free:         state: &lt;string&gt;         tags: &lt;string&gt;</code></pre><p><strong>cloud.monitoring.free.stateï¼š</strong>Type: string</p><p>ç‰ˆæœ¬4.0ä¸­çš„æ–°åŠŸèƒ½ï¼šé€‚ç”¨äºMongoDBç¤¾åŒºç‰ˆã€‚<br>å¯ç”¨æˆ–ç¦ç”¨å…è´¹çš„MongoDB Cloudç›‘è§†ã€‚ cloud.monitoring.free.stateæ¥å—ä»¥ä¸‹å€¼ï¼š</p><ul><li>runtimeï¼šé»˜è®¤ã€‚ æ‚¨å¯ä»¥åœ¨è¿è¡Œæ—¶å¯ç”¨æˆ–ç¦ç”¨å…è´¹ç›‘è§†ã€‚</li></ul><p class=pgc-end-literature>è¦åœ¨è¿è¡Œæ—¶å¯ç”¨æˆ–ç¦ç”¨å…è´¹ç›‘è§†ï¼Œè¯·å‚è§db.enableFreeMonitoring()å’Œdb.disableFreeMonitoring()ã€‚<br>è¦åœ¨ä½¿ç”¨è®¿é—®æ§åˆ¶è¿è¡Œæ—¶åœ¨è¿è¡Œæ—¶å¯ç”¨æˆ–ç¦ç”¨å…è´¹ç›‘è§†ï¼Œç”¨æˆ·å¿…é¡»å…·æœ‰å¿…éœ€çš„ç‰¹æƒã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§</p><p class=pgc-end-literature>db.enableFreeMonitoring()å’Œdb.disableFreeMonitoring()ã€‚</p><ul><li>onï¼šåœ¨å¯åŠ¨æ—¶å¯ç”¨å…è´¹ç›‘è§†ï¼› å³æ³¨å†Œå…è´¹ç›‘æ§ã€‚ åœ¨å¯åŠ¨æ—¶å¯ç”¨åï¼Œæ‚¨å°†æ— æ³•åœ¨è¿è¡Œæ—¶ç¦ç”¨å…è´¹ç›‘è§†ã€‚</li><li>offï¼šä¸ç®¡æ‚¨å…ˆå‰æ˜¯å¦æ³¨å†Œäº†å…è´¹ç›‘è§†ï¼Œéƒ½åœ¨å¯åŠ¨æ—¶ç¦ç”¨å…è´¹ç›‘è§†ã€‚ å¦‚æœåœ¨å¯åŠ¨æ—¶ç¦ç”¨å®ƒï¼Œåˆ™æ— æ³•åœ¨è¿è¡Œæ—¶å¯ç”¨å…è´¹ç›‘è§†ã€‚</li></ul><p>å¯ç”¨åï¼Œè‡ªç”±ç›‘è§†çŠ¶æ€å°†ä¿æŒå¯ç”¨çŠ¶æ€ï¼Œç›´åˆ°æ˜ç¡®ç¦ç”¨ä¸ºæ­¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨ä¸å¿…åœ¨æ¯æ¬¡å¯åŠ¨æœåŠ¡å™¨æ—¶éƒ½é‡æ–°å¯ç”¨ã€‚<br>æœ‰å…³ç›¸åº”çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œè¯·å‚è§--enableFreeMonitoringã€‚</p><p><strong>cloud.monitoring.free.tags:</strong>Type: string</p><p>ç‰ˆæœ¬4.0ä¸­çš„æ–°åŠŸèƒ½ï¼šé€‚ç”¨äºMongoDBç¤¾åŒºç‰ˆã€‚<br>æè¿°ç¯å¢ƒä¸Šä¸‹æ–‡çš„å¯é€‰æ ‡ç­¾ã€‚ è¯¥æ ‡ç­¾å¯ä»¥åœ¨å¯åŠ¨æ—¶ä½œä¸ºå…è´¹çš„MongoDB Cloudç›‘è§†æ³¨å†Œçš„ä¸€éƒ¨åˆ†å‘é€ã€‚<br>æœ‰å…³ç›¸åº”çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œè¯·å‚è§--freeMonitoringTagã€‚</p><h1 class=pgc-h-arrow-right>neté…ç½®é€‰é¡¹</h1><pre><code>net:   port: &lt;int&gt;   bindIp: &lt;string&gt;   bindIpAll: &lt;boolean&gt;   maxIncomingConnections: &lt;int&gt;   wireObjectCheck: &lt;boolean&gt;   ipv6: &lt;boolean&gt;   unixDomainSocket:      enabled: &lt;boolean&gt;      pathPrefix: &lt;string&gt;      filePermissions: &lt;int&gt;   tls:      certificateSelector: &lt;string&gt;      clusterCertificateSelector: &lt;string&gt;      mode: &lt;string&gt;      certificateKeyFile: &lt;string&gt;      certificateKeyFilePassword: &lt;string&gt;      clusterFile: &lt;string&gt;      clusterPassword: &lt;string&gt;      CAFile: &lt;string&gt;      clusterCAFile: &lt;string&gt;      CRLFile: &lt;string&gt;      allowConnectionsWithoutCertificates: &lt;boolean&gt;      allowInvalidCertificates: &lt;boolean&gt;      allowInvalidHostnames: &lt;boolean&gt;      disabledProtocols: &lt;string&gt;      FIPSMode: &lt;boolean&gt;   compression:      compressors: &lt;string&gt;   serviceExecutor: &lt;string&gt;</code></pre><p><strong>åœ¨ç‰ˆæœ¬4.2ä¸­è¿›è¡Œäº†æ›´æ”¹ï¼šMongoDB 4.2å¼ƒç”¨sslé€‰é¡¹ï¼Œè½¬è€Œä½¿ç”¨å…·æœ‰ç›¸åŒåŠŸèƒ½çš„tlsé€‰é¡¹ã€‚</strong></p><p><strong>net.portï¼š</strong>Type: integer</p><p>Default:</p><p>27017ï¼šå¦‚æœä¸æ˜¯åˆ†ç‰‡æˆ–è€…configæœåŠ¡æˆå‘˜ï¼Œæˆ–è€…æ˜¯mongoså®ä¾‹<br>27018ï¼šå¦‚æœmongodæ˜¯åˆ†ç‰‡æˆå‘˜<br>27019ï¼š å¦‚æœmongodæ˜¯config æœåŠ¡å™¨æˆå‘˜</p><p>MongoDBå®ä¾‹åœ¨å…¶ä¸Šä¾¦å¬å®¢æˆ·ç«¯è¿æ¥çš„TCPç«¯å£ã€‚</p><p><strong>net.bindIpï¼š</strong>Type: string,Default: localhost</p><p>ä»MongoDB 3.6å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹mongosæˆ–mongodç»‘å®šåˆ°localhostã€‚</p><p>mongosæˆ–mongodåº”è¯¥åœ¨å…¶ä¸Šä¾¦å¬å®¢æˆ·ç«¯è¿æ¥çš„ä¸»æœºå,IPåœ°å€,å®Œæ•´çš„UnixåŸŸå¥—æ¥å­—è·¯å¾„ã€‚ æ‚¨å¯ä»¥å°†mongosæˆ–mongodé™„åŠ åˆ°ä»»ä½•æ¥å£ã€‚ è¦ç»‘å®šåˆ°å¤šä¸ªåœ°å€ï¼Œè¯·è¾“å…¥ä¸€ä¸ªç”¨é€—å·åˆ†éš”çš„å€¼çš„åˆ—è¡¨ã€‚</p><pre><code>localhost,/tmp/mongod.sock</code></pre><p>æ‚¨å¯ä»¥æŒ‡å®šIPv4å’ŒIPv6åœ°å€ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè§£æä¸ºIPv4æˆ–IPv6åœ°å€çš„ä¸»æœºåã€‚</p><pre><code>localhost, 2001:0DB8:e132:ba26:0d5c:2774:e7f9:d513</code></pre><p>å¦‚æœä¸ºnet.bindIpæŒ‡å®šIPv6åœ°å€æˆ–è§£æä¸ºIPv6åœ°å€çš„ä¸»æœºåï¼Œåˆ™å¿…é¡»ä»¥net.ipv6ï¼štrueå¼€å¤´ã€‚</p><p><strong>net.bindIpAllï¼š</strong>Type: booleanï¼ŒDefault: false</p><p>å¦‚æœä¸ºtrueï¼Œåˆ™mongosæˆ–mongodå®ä¾‹ç»‘å®šåˆ°æ‰€æœ‰IPv4åœ°å€ï¼ˆå³0.0.0.0ï¼‰ã€‚ å¦‚æœmongosæˆ–mongodä»¥net.ipv6:trueå¼€å¤´ï¼Œåˆ™net.bindIpAllä¹Ÿå°†ç»‘å®šåˆ°æ‰€æœ‰IPv6åœ°å€ï¼ˆå³::ï¼‰ã€‚<br>net.bindIpå’Œnet.bindIpAllæ˜¯äº’æ–¥çš„ã€‚ åŒæ—¶æŒ‡å®šä¸¤ä¸ªé€‰é¡¹ä¼šå¯¼è‡´mongosæˆ–mongodæŠ›å‡ºé”™è¯¯å¹¶ç»ˆæ­¢ã€‚</p><p><strong>net.maxIncomingConnectionsï¼š</strong>Type: integer,Default: 65536</p><p>mongosæˆ–mongodå°†æ¥å—çš„æœ€å¤§åŒæ—¶è¿æ¥æ•°ã€‚ å¦‚æœæ­¤è®¾ç½®é«˜äºæ“ä½œç³»ç»Ÿé…ç½®çš„æœ€å¤§è¿æ¥è·Ÿè¸ªé˜ˆå€¼ï¼Œåˆ™è¯¥è®¾ç½®æ— æ•ˆã€‚<br>è¯·å‹¿ä¸ºæ­¤é€‰é¡¹åˆ†é…å¤ªä½çš„å€¼ï¼Œå¦åˆ™åœ¨æ­£å¸¸çš„åº”ç”¨ç¨‹åºæ“ä½œè¿‡ç¨‹ä¸­ä¼šé‡åˆ°é”™è¯¯ã€‚<br>å¦‚æœæ‚¨çš„å®¢æˆ·ç«¯åˆ›å»ºå¤šä¸ªè¿æ¥å¹¶å…è®¸å®ƒä»¬è¶…æ—¶è€Œä¸æ˜¯å…³é—­å®ƒä»¬ï¼Œåˆ™è¿™å¯¹äºmongoså°¤å…¶æœ‰ç”¨ã€‚<br>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·å°†maxIncomingConnectionsè®¾ç½®ä¸ºç•¥é«˜äºå®¢æˆ·ç«¯åˆ›å»ºçš„æœ€å¤§è¿æ¥æ•°æˆ–è¿æ¥æ± çš„æœ€å¤§çš„å€¼ã€‚<br>æ­¤è®¾ç½®å¯é˜²æ­¢mongoså¼•èµ·å„ä¸ªåˆ†ç‰‡ä¸Šçš„è¿æ¥å°–å³°ã€‚ æ­¤ç±»å°–å³°å¯èƒ½ä¼šç ´ååˆ†ç‰‡ç¾¤é›†çš„æ“ä½œå’Œå†…å­˜åˆ†é…ã€‚</p><p><strong>net.wireObjectCheckï¼š</strong>Type: boolean,Default: true</p><p>è®¾ç½®ä¸ºtrueæ—¶ï¼Œmongodæˆ–mongoså®ä¾‹ä¼šéªŒè¯æ¥è‡ªå®¢æˆ·ç«¯çš„æ‰€æœ‰è¯·æ±‚ï¼Œä»¥é˜²æ­¢å®¢æˆ·ç«¯å°†æ ¼å¼é”™è¯¯æˆ–æ— æ•ˆçš„BSONæ’å…¥MongoDBæ•°æ®åº“ã€‚<br><strong>net.ipv6ï¼š</strong>Type: boolean,Default: false</p><p>å°†net.ipv6è®¾ç½®ä¸ºtrueä»¥å¯ç”¨IPv6æ”¯æŒã€‚ mongos/mongodé»˜è®¤ç¦ç”¨IPv6æ”¯æŒã€‚</p><p><br><strong>net.unixDomainSockeé…ç½®</strong></p><pre><code>net:   unixDomainSocket:      enabled: &lt;boolean&gt;      pathPrefix: &lt;string&gt;      filePermissions: &lt;int&gt;</code></pre><p><strong>net.unixDomainSocket.enabledï¼š</strong>Type: booleanï¼ŒDefault: true</p><p>åœ¨UNIXåŸŸå¥—æ¥å­—ä¸Šå¯ç”¨æˆ–ç¦ç”¨ä¾¦å¬ã€‚ net.unixDomainSocket.enabledä»…é€‚ç”¨äºåŸºäºUnixçš„ç³»ç»Ÿã€‚<br>å½“net.unixDomainSocket.enabledä¸ºtrueæ—¶ï¼Œmongosæˆ–mongodåœ¨UNIXå¥—æ¥å­—ä¸Šä¾¦å¬ã€‚<br>é™¤éæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œå¦åˆ™mongosæˆ–mongodè¿›ç¨‹å§‹ç»ˆåœ¨UNIXå¥—æ¥å­—ä¸Šä¾¦å¬ï¼š</p><ul><li>net.unixDomainSocket.enabledä¸ºfalse</li><li>--nounixsocketå·²è®¾ç½®ã€‚ å‘½ä»¤è¡Œé€‰é¡¹ä¼˜å…ˆäºé…ç½®æ–‡ä»¶è®¾ç½®ã€‚</li><li>æœªè®¾ç½®net.bindIp</li><li>net.bindIpæœªæŒ‡å®šlocalhostæˆ–å…¶å…³è”çš„IPåœ°å€</li></ul><p><strong>net.unixDomainSocket.pathPrefixï¼š</strong>Type: stringï¼ŒDefault: /tmp</p><p>UNIXå¥—æ¥å­—çš„è·¯å¾„ã€‚ net.unixDomainSocket.pathPrefixä»…é€‚ç”¨äºåŸºäºUnixçš„ç³»ç»Ÿã€‚<br>å¦‚æœæ­¤é€‰é¡¹æ²¡æœ‰å€¼ï¼Œåˆ™mongosæˆ–mongodè¿›ç¨‹å°†åˆ›å»ºä¸€ä¸ªä»¥/ tmpä¸ºå‰ç¼€çš„å¥—æ¥å­—ã€‚ é™¤éæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œå¦åˆ™MongoDBä¼šåœ¨UNIXå¥—æ¥å­—ä¸Šåˆ›å»ºå¹¶ä¾¦å¬ï¼š(åŒä¸Š)</p><p><strong>net.unixDomainSocket.filePermissionsï¼š</strong>Type: int,Default: 0700</p><p>è®¾ç½®UNIXåŸŸå¥—æ¥å­—æ–‡ä»¶çš„æƒé™ã€‚net.unixDomainSocket.filePermissionsä»…é€‚ç”¨äºåŸºäºUnixçš„ç³»ç»Ÿã€‚<br><strong>net.httpé…ç½®</strong></p><p>åœ¨3.6ç‰ˆä¸­è¿›è¡Œäº†æ›´æ”¹ï¼šMongoDB 3.6åˆ é™¤äº†ä¸æ¨èä½¿ç”¨çš„net.httpé€‰é¡¹ã€‚ è‡ª3.2ç‰ˆä»¥æ¥ï¼Œè¯¥é€‰é¡¹å·²è¢«å¼ƒç”¨ã€‚</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼štlsé€‰é¡¹æä¾›çš„åŠŸèƒ½ä¸ä»¥å‰çš„sslé€‰é¡¹ç›¸åŒã€‚</p><pre><code>net:   tls:      mode: &lt;string&gt;      certificateKeyFile: &lt;string&gt;      certificateKeyFilePassword: &lt;string&gt;      certificateSelector: &lt;string&gt;      clusterCertificateSelector: &lt;string&gt;      clusterFile: &lt;string&gt;      clusterPassword: &lt;string&gt;      CAFile: &lt;string&gt;      clusterCAFile: &lt;string&gt;      CRLFile: &lt;string&gt;      allowConnectionsWithoutCertificates: &lt;boolean&gt;      allowInvalidCertificates: &lt;boolean&gt;      allowInvalidHostnames: &lt;boolean&gt;      disabledProtocols: &lt;string&gt;      FIPSMode: &lt;boolean&gt;</code></pre><p><strong>net.tls.mode</strong>ï¼šType: stringï¼Œ</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>å¯ç”¨ç”¨äºæ‰€æœ‰ç½‘ç»œè¿æ¥çš„TLSã€‚ net.tls.modeè®¾ç½®çš„å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p><p>disabledï¼šæœåŠ¡å™¨ä¸ä½¿ç”¨TLS</p><p>allowTLSï¼šæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¸ä½¿ç”¨TLSã€‚ å¯¹äºä¼ å…¥è¿æ¥ï¼ŒæœåŠ¡å™¨åŒæ—¶æ¥å—TLSå’ŒéTLSã€‚</p><p>preferTLSï¼šæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä½¿ç”¨TLSã€‚ å¯¹äºä¼ å…¥è¿æ¥ï¼ŒæœåŠ¡å™¨åŒæ—¶æ¥å—TLSå’ŒéTLSã€‚</p><p>requireTLSï¼šæœåŠ¡å™¨ä»…ä½¿ç”¨å¹¶æ¥å—TLSåŠ å¯†è¿æ¥ã€‚</p><p>å¦‚æœæœªæŒ‡å®š--tlsCAFileæˆ–tls.CAFileå¹¶ä¸”æœªä½¿ç”¨x.509èº«ä»½éªŒè¯ï¼Œåˆ™åœ¨è¿æ¥åˆ°å¯ç”¨TLSçš„æœåŠ¡å™¨æ—¶å°†ä½¿ç”¨ç³»ç»ŸèŒƒå›´çš„CAè¯ä¹¦å­˜å‚¨ã€‚<br>å¦‚æœä½¿ç”¨x.509èº«ä»½éªŒè¯ï¼Œåˆ™å¿…é¡»æŒ‡å®š--tlsCAFileæˆ–tls.CAFileï¼Œé™¤éä½¿ç”¨--tlsCertificateSelectorã€‚<br>æœ‰å…³TLSå’ŒMongoDBçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸ºTLS/SSLå’Œå®¢æˆ·ç«¯çš„TLS/SSLé…ç½®é…ç½®mongodå’Œmongosã€‚</p><p><strong>net.tls.certificateKeyFileï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ã€‚.pemæ–‡ä»¶åŒæ—¶åŒ…å«TLSè¯ä¹¦å’Œå¯†é’¥ã€‚</p><p>ä»macOSæˆ–Windowsä¸Šçš„MongoDB 4.0å¼€å§‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨net.tls.certificateSelectorè®¾ç½®ä»æ“ä½œç³»ç»Ÿçš„å®‰å…¨è¯ä¹¦å­˜å‚¨è€Œä¸æ˜¯PEMå¯†é’¥æ–‡ä»¶ä¸­æŒ‡å®šè¯ä¹¦ã€‚ certificateKeyFileå’Œnet.tls.certificateSelectoræ˜¯äº’æ–¥çš„ã€‚ æ‚¨åªèƒ½æŒ‡å®šä¸€ä¸ªã€‚</p><ul><li>åœ¨Linux/BSDä¸Šï¼Œå¯ç”¨TLSæ—¶å¿…é¡»æŒ‡å®šnet.tls.certificateKeyFileã€‚</li><li>åœ¨Windowsæˆ–macOSä¸Šï¼Œå¯ç”¨TLSæ—¶ï¼Œæ‚¨å¿…é¡»æŒ‡å®šnet.tls.certificateKeyFileæˆ–net.tls.certificateSelectorã€‚</li></ul><p><strong>ä»…å¯¹äºWindowsï¼ŒMongoDB 4.0å’Œæ›´é«˜ç‰ˆæœ¬ä¸æ”¯æŒåŠ å¯†çš„PEMæ–‡ä»¶ã€‚ å¦‚æœmongodé‡åˆ°åŠ å¯†çš„PEMæ–‡ä»¶ï¼Œå®ƒå°†æ— æ³•å¯åŠ¨ã€‚ è¦åœ¨Windowsä¸Šå®‰å…¨åœ°å­˜å‚¨å’Œè®¿é—®ç”¨äºTLSçš„è¯ä¹¦ï¼Œè¯·ä½¿ç”¨net.tls.certificateSelectorã€‚</strong></p><p><strong>net.tls.certificateKeyFilePasswordï¼š</strong>Type: string</p><p>ç‰ˆæœ¬4.2ä¸­çš„æ–°åŠŸèƒ½ï¼šç”¨äºè§£å¯†è¯ä¹¦å¯†é’¥æ–‡ä»¶ï¼ˆå³certificateKeyFileï¼‰çš„å¯†ç ã€‚ ä»…å½“è¯ä¹¦å¯†é’¥æ–‡ä»¶å·²åŠ å¯†æ—¶ï¼Œæ‰ä½¿ç”¨net.tls.certificateKeyPasswordé€‰é¡¹ã€‚ åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œmongosæˆ–mongodéƒ½ä¼šä»æ‰€æœ‰æ—¥å¿—è®°å½•å’ŒæŠ¥å‘Šè¾“å‡ºä¸­åˆ é™¤å¯†ç ã€‚</p><p><strong>net.tls.certificateSelectorï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ã€‚Windowså’ŒmacOSä¸Šå¯ç”¨ï¼Œå¯ä»¥æ›¿ä»£net.tls.certificateKeyFileã€‚</p><p>æŒ‡å®šè¯ä¹¦å±æ€§ï¼Œä»¥ä¾¿ä»æ“ä½œç³»ç»Ÿçš„è¯ä¹¦å­˜å‚¨ä¸­é€‰æ‹©åŒ¹é…çš„è¯ä¹¦ä»¥ç”¨äºTLS/SSLã€‚</p><p><strong>net.tls.clusterCertificateSelectorï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼š.pemæ–‡ä»¶åŒ…å«ç”¨äºç¾¤é›†æˆ–å‰¯æœ¬é›†æˆå‘˜èº«ä»½éªŒè¯çš„x.509è¯ä¹¦å¯†é’¥æ–‡ä»¶ã€‚</p><p><strong>net.tls.clusterPasswordï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼šç”¨äºè§£å¯†ä½¿ç”¨--sslClusterFileæŒ‡å®šçš„x.509è¯ä¹¦å¯†é’¥æ–‡ä»¶çš„å¯†ç ã€‚ ä»…å½“è¯ä¹¦å¯†é’¥æ–‡ä»¶å·²åŠ å¯†æ—¶ï¼Œæ‰ä½¿ç”¨net.tls.clusterPasswordé€‰é¡¹ã€‚ åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œmongosæˆ–mongodéƒ½ä¼šä»æ‰€æœ‰æ—¥å¿—è®°å½•å’ŒæŠ¥å‘Šè¾“å‡ºä¸­åˆ é™¤å¯†ç ã€‚</p><p><strong>net.tls.CAFile:</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼š.pemæ–‡ä»¶åŒ…å«æ¥è‡ªè¯ä¹¦é¢å‘æœºæ„çš„æ ¹è¯ä¹¦é“¾ã€‚ ä½¿ç”¨ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„æŒ‡å®š.pemæ–‡ä»¶çš„æ–‡ä»¶åã€‚</p><p><strong>net.tls.clusterCAFile:</strong>Type: string</p><p>ç‰ˆæœ¬4.2ä¸­çš„æ–°å¢åŠŸèƒ½ï¼š.pemæ–‡ä»¶åŒ…å«æ¥è‡ªè¯ä¹¦é¢å‘æœºæ„çš„æ ¹è¯ä¹¦é“¾ï¼Œè¯¥è¯ä¹¦é¢å‘æœºæ„ç”¨äºéªŒè¯å»ºç«‹è¿æ¥çš„å®¢æˆ·ç«¯æä¾›çš„è¯ä¹¦ã€‚ ä½¿ç”¨ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„æŒ‡å®š.pemæ–‡ä»¶çš„æ–‡ä»¶åã€‚ net.tls.clusterCAFileè¦æ±‚è®¾ç½®net.tls.CAFileã€‚</p><p><strong>net.tls.CRLFileï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>åŒ…å«è¯ä¹¦åŠé”€åˆ—è¡¨çš„.pemæ–‡ä»¶ã€‚ ä½¿ç”¨ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„æŒ‡å®š.pemæ–‡ä»¶çš„æ–‡ä»¶åã€‚</p><p>ä»MongoDB 4.0å¼€å§‹ï¼Œæ‚¨ä¸èƒ½åœ¨macOSä¸ŠæŒ‡å®šnet.tls.CRLFileã€‚ è¯·æ”¹ç”¨net.tls.certificateSelectorã€‚</p><p><strong>net.tls.allowConnectionsWithoutCertificatesï¼š</strong>Type: boolean</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>å¯¹äºä¸æä¾›è¯ä¹¦çš„å®¢æˆ·ç«¯ï¼Œmongosæˆ–mongodåœ¨å»ºç«‹è¿æ¥æ—¶ä¼šç»•è¿‡TLS/SSLè¯ä¹¦éªŒè¯ã€‚</p><p><strong>net.tls.allowInvalidCertificates:</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>å¯¹ç¾¤é›†ä¸­å…¶ä»–æœåŠ¡å™¨ä¸Šçš„TLSè¯ä¹¦å¯ç”¨æˆ–ç¦ç”¨éªŒè¯æ£€æŸ¥ï¼Œå¹¶å…è®¸ä½¿ç”¨æ— æ•ˆè¯ä¹¦è¿›è¡Œè¿æ¥ã€‚</p><p><strong>net.tls.allowInvalidHostnamesï¼š</strong>Type: boolean,Default: false</p><p>å½“net.tls.allowInvalidHostnamesä¸ºtrueæ—¶ï¼ŒMongoDBç¦ç”¨TLSè¯ä¹¦ä¸­ä¸»æœºåçš„éªŒè¯ï¼Œå¦‚æœå…¶è¯ä¹¦çš„ä¸»æœºåä¸æŒ‡å®šçš„ä¸»æœºåä¸åŒ¹é…ï¼Œåˆ™å…è®¸mongodè¿æ¥åˆ°MongoDBå®ä¾‹ã€‚</p><p><strong>net.tls.disabledProtocolsï¼š</strong>Type: string</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>é˜²æ­¢è¿è¡ŒTLSçš„MongoDBæœåŠ¡å™¨æ¥å—ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šåè®®çš„ä¼ å…¥è¿æ¥ã€‚ è¦æŒ‡å®šå¤šä¸ªåè®®ï¼Œè¯·ä½¿ç”¨é€—å·åˆ†éš”çš„åè®®åˆ—è¡¨ã€‚<br>net.tls.disabledProtocolså¯ä»¥è¯†åˆ«ä»¥ä¸‹åè®®ï¼šTLS1_0ï¼ŒTLS1_1ï¼ŒTLS1_2ï¼Œä»¥åŠç‰ˆæœ¬4.0.4ï¼ˆå’Œ3.6.9ï¼‰ä»¥åŠTLS1_3ã€‚</p><p><strong>net.tls.FIPSModeï¼š</strong>Type: boolean</p><p>4.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>ä¸ºmongosæˆ–mongodå¯ç”¨æˆ–ç¦ç”¨TLSåº“çš„FIPSæ¨¡å¼ã€‚ æ‚¨çš„ç³»ç»Ÿå¿…é¡»å…·æœ‰FIPSå…¼å®¹åº“æ‰èƒ½ä½¿ç”¨net.tls.FIPSModeé€‰é¡¹ã€‚</p><p><strong>å…¼å®¹FIPSçš„TLS/SSLä»…åœ¨MongoDB Enterpriseä¸­å¯ç”¨ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸ºFIPSé…ç½®MongoDBã€‚</strong></p><p><strong>net.sslé…ç½®</strong></p><p><strong class=highlight-text>ä»4.2å¼€å§‹ä¸æ¨èä½¿ç”¨æ‰€æœ‰SSLé€‰é¡¹ã€‚ è¯·ä½¿ç”¨TLSå¯¹åº”é¡¹ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸SSLé€‰é¡¹ç›¸åŒçš„åŠŸèƒ½ã€‚ ä¸å»ºè®®ä½¿ç”¨SSLåè®®ï¼ŒMongoDBæ”¯æŒTLS 1.0å’Œæ›´é«˜ç‰ˆæœ¬ã€‚</strong></p><h1 class=pgc-h-arrow-right>securityé…ç½®</h1><pre><code>security:   keyFile: &lt;string&gt;   clusterAuthMode: &lt;string&gt;   authorization: &lt;string&gt;   transitionToAuth: &lt;boolean&gt;   javascriptEnabled:  &lt;boolean&gt;   redactClientLogData: &lt;boolean&gt;   clusterIpSourceWhitelist:     - &lt;string&gt;   sasl:      hostName: &lt;string&gt;      serviceName: &lt;string&gt;      saslauthdSocketPath: &lt;string&gt;   enableEncryption: &lt;boolean&gt;   encryptionCipherMode: &lt;string&gt;   encryptionKeyFile: &lt;string&gt;   kmip:      keyIdentifier: &lt;string&gt;      rotateMasterKey: &lt;boolean&gt;      serverName: &lt;string&gt;      port: &lt;string&gt;      clientCertificateFile: &lt;string&gt;      clientCertificatePassword: &lt;string&gt;      clientCertificateSelector: &lt;string&gt;      serverCAFile: &lt;string&gt;   ldap:      servers: &lt;string&gt;      bind:         method: &lt;string&gt;         saslMechanisms: &lt;string&gt;         queryUser: &lt;string&gt;         queryPassword: &lt;string&gt;         useOSDefaults: &lt;boolean&gt;      transportSecurity: &lt;string&gt;      timeoutMS: &lt;int&gt;      userToDNMapping: &lt;string&gt;      authz:         queryTemplate: &lt;string&gt;      validateLDAPServerConfig: &lt;boolean&gt;</code></pre><p><strong>security.keyFileï¼š</strong>Type: string</p><p>å¯†é’¥æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯¥å¯†é’¥æ–‡ä»¶ç”¨äºå­˜å‚¨MongoDBå®ä¾‹ç”¨äºåœ¨åˆ†ç‰‡ç¾¤é›†æˆ–å‰¯æœ¬é›†ä¸­ç›¸äº’è¿›è¡Œèº«ä»½éªŒè¯çš„å…±äº«å¯†é’¥ã€‚ keyFileè¡¨ç¤ºsecurity.authorizationã€‚</p><p><strong>security.clusterAuthModeï¼š</strong>Type: string,Default: keyFile</p><p>ç”¨äºé›†ç¾¤è®¤è¯çš„è®¤è¯æ–¹å¼ã€‚ å¦‚æœæ‚¨ä½¿ç”¨å†…éƒ¨x.509èº«ä»½éªŒè¯ï¼Œè¯·åœ¨æ­¤å¤„æŒ‡å®šã€‚</p><p><strong>security.authorizationï¼š</strong>Type: stringï¼ŒDefault: disabled</p><p>å¯ç”¨æˆ–ç¦ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œä»¥æ§åˆ¶æ¯ä¸ªç”¨æˆ·å¯¹æ•°æ®åº“èµ„æºå’Œæ“ä½œçš„è®¿é—®ã€‚</p><p><strong>security.transitionToAuthï¼š</strong>Type: booleanï¼ŒDefault: false</p><p>3.4ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼šå…è®¸mongodæˆ–mongosæ¥å—å¹¶åˆ›å»ºä¸éƒ¨ç½²ä¸­å…¶ä»–mongodå’Œmongoså®ä¾‹ä¹‹é—´çš„ç»è¿‡èº«ä»½éªŒè¯å’Œæœªç»èº«ä»½éªŒè¯çš„è¿æ¥ã€‚ ç”¨äºæ‰§è¡Œå‰¯æœ¬é›†æˆ–åˆ†ç‰‡ç¾¤é›†ä»æ— èº«ä»½éªŒè¯é…ç½®åˆ°å†…éƒ¨èº«ä»½éªŒè¯çš„æ»šåŠ¨è¿‡æ¸¡ã€‚ éœ€è¦æŒ‡å®šå†…éƒ¨èº«ä»½éªŒè¯æœºåˆ¶ï¼Œä¾‹å¦‚security.keyFileã€‚</p><p><strong>security.javascriptEnabledï¼š</strong>Type: booleanï¼ŒDefault: true</p><p>å¯ç”¨æˆ–ç¦ç”¨æœåŠ¡å™¨ç«¯JavaScriptæ‰§è¡Œã€‚ ç¦ç”¨åï¼Œæ‚¨å°†æ— æ³•ä½¿ç”¨æ‰§è¡ŒJavaScriptä»£ç åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚$whereæŸ¥è¯¢è¿ç®—ç¬¦ï¼ŒmapReduceå‘½ä»¤å’Œdb.collection.mapReduce()æ–¹æ³•ã€‚</p><p><strong>security.redactClientLogData:</strong>Type: boolean</p><p>3.4ç‰ˆçš„æ–°åŠŸèƒ½ï¼šä»…åœ¨MongoDB Enterpriseä¸­å¯ç”¨ã€‚<br>è¿è¡Œäº†security.redactClientLogDataçš„mongodä¼šåœ¨è®°å½•ä¹‹å‰ç¼–è¾‘ä¼´éšç»™å®šæ—¥å¿—äº‹ä»¶çš„ä»»ä½•æ¶ˆæ¯ã€‚ è¿™æ ·å¯ä»¥é˜²æ­¢mongodæˆ–mongoså°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ½œåœ¨æ•æ„Ÿæ•°æ®å†™å…¥è¯Šæ–­æ—¥å¿—ã€‚ é”™è¯¯æˆ–æ“ä½œä»£ç ï¼Œè¡Œå·å’Œæºæ–‡ä»¶åç­‰å…ƒæ•°æ®ä»åœ¨æ—¥å¿—ä¸­å¯è§ã€‚</p><p><strong>security.clusterIpSourceWhitelist</strong>Type: list</p><p>mongodéªŒè¯IPåœ°å€/CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰èŒƒå›´çš„åˆ—è¡¨ï¼Œmongodä»¥æ­¤èŒƒå›´éªŒè¯æ¥è‡ªå‰¯æœ¬é›†å…¶ä»–æˆå‘˜ï¼ˆå¦‚æœæ˜¯åˆ†ç‰‡ç¾¤é›†çš„ä¸€éƒ¨åˆ†ï¼‰çš„mongoså®ä¾‹çš„èº«ä»½éªŒè¯è¯·æ±‚ã€‚ mongodéªŒè¯åŸå§‹IPæ˜¯å¦åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºæˆ–å±äºåˆ—è¡¨ä¸­çš„CIDRèŒƒå›´ã€‚ å¦‚æœIPåœ°å€ä¸å­˜åœ¨ï¼Œåˆ™æœåŠ¡å™¨ä¸ä¼šå¯¹mongodæˆ–mongosè¿›è¡Œèº«ä»½éªŒè¯ã€‚</p><p><strong>Key Management Configuration</strong></p><pre><code>security:   enableEncryption: &lt;boolean&gt;   encryptionCipherMode: &lt;string&gt;   encryptionKeyFile: &lt;string&gt;   kmip:      keyIdentifier: &lt;string&gt;      rotateMasterKey: &lt;boolean&gt;      serverName: &lt;string&gt;      port: &lt;string&gt;      clientCertificateFile: &lt;string&gt;      clientCertificatePassword: &lt;string&gt;      clientCertificateSelector: &lt;string&gt;      serverCAFile: &lt;string&gt;</code></pre><p><strong>security.enableEncryptionï¼š</strong>Type: booleanï¼ŒDefault: false</p><p>3.2ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼šä¸ºWiredTigerå­˜å‚¨å¼•æ“å¯ç”¨åŠ å¯†ã€‚ æ‚¨å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½ä¼ é€’åŠ å¯†å¯†é’¥å’Œé…ç½®ã€‚</p><p><strong>security.encryptionCipherMode: </strong>Type: string,Default: AES256-CBC</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>ç”¨äºé™æ€åŠ å¯†çš„å¯†ç æ¨¡å¼</p><p><strong>security.encryptionKeyFileï¼š</strong>Type: string</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>é€šè¿‡é™¤KMIPä¹‹å¤–çš„å…¶ä»–è¿›ç¨‹ç®¡ç†å¯†é’¥æ—¶ï¼Œæœ¬åœ°å¯†é’¥æ–‡ä»¶çš„è·¯å¾„ã€‚ ä»…åœ¨é€šè¿‡KMIPä»¥å¤–çš„è¿›ç¨‹ç®¡ç†å¯†é’¥æ—¶è®¾ç½®ã€‚ å¦‚æœæ•°æ®å·²ä½¿ç”¨KMIPåŠ å¯†ï¼Œåˆ™MongoDBå°†å¼•å‘é”™è¯¯ã€‚</p><p><strong>security.kmip.keyIdentifierï¼š</strong>Type: string</p><p>KMIPæœåŠ¡å™¨ä¸­ç°æœ‰å¯†é’¥çš„å”¯ä¸€KMIPæ ‡è¯†ç¬¦ã€‚ åŒ…æ‹¬å°†ä¸æ ‡è¯†ç¬¦å…³è”çš„å¯†é’¥ç”¨ä½œç³»ç»Ÿå¯†é’¥ã€‚ æ‚¨åªèƒ½åœ¨é¦–æ¬¡ä¸ºmongodå®ä¾‹å¯ç”¨åŠ å¯†æ—¶ä½¿ç”¨è¯¥è®¾ç½®ã€‚ è¦æ±‚security.enableEncryptionä¸ºtrueã€‚</p><p><strong>security.kmip.rotateMasterKeyï¼š</strong>Type: booleanï¼ŒDefault: false</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>å¦‚æœä¸ºtrueï¼Œè¯·æ—‹è½¬ä¸»å¯†é’¥å¹¶é‡æ–°åŠ å¯†å†…éƒ¨å¯†é’¥åº“ã€‚</p><p><strong>security.kmip.serverNameï¼š</strong>Type: string</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>è¿è¡ŒKMIPæœåŠ¡å™¨çš„å¯†é’¥ç®¡ç†è§£å†³æ–¹æ¡ˆçš„ä¸»æœºåæˆ–IPåœ°å€ã€‚ è¦æ±‚security.enableEncryptionä¸ºtrueã€‚</p><p><strong>security.kmip.portï¼š</strong>Type: stringï¼ŒDefault: 5696</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>KMIPæœåŠ¡å™¨æ­£åœ¨ä¾¦å¬çš„ç«¯å£å·ã€‚ è¦æ±‚æä¾›security.kmip.serverNameã€‚ è¦æ±‚security.enableEncryptionä¸ºtrueã€‚</p><p><strong>security.kmip.clientCertificateFileï¼š</strong>Type: string</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>å­—ç¬¦ä¸²ï¼ŒåŒ…å«ç”¨äºå‘MongoDBéªŒè¯KMIPæœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦çš„è·¯å¾„ã€‚ è¦æ±‚æä¾›security.kmip.serverNameã€‚</p><p><strong>security.kmip.clientCertificatePasswordï¼š</strong>Type: string</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>ç”¨æ¥è§£å¯†å®¢æˆ·ç«¯è¯ä¹¦çš„å¯†ç ï¼ˆå³security.kmip.clientCertificateFileï¼‰ï¼Œç”¨äºå‘KMIPæœåŠ¡å™¨è®¤è¯MongoDBã€‚ ä»…å½“è¯ä¹¦å·²åŠ å¯†æ—¶æ‰ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p><p><strong>security.kmip.clientCertificateSelectorï¼š</strong>Type: string</p><p>4.0ç‰ˆä¸­çš„æ–°å¢åŠŸèƒ½ï¼šWindowså’ŒmacOSä¸Šå¯ç”¨ï¼Œå¯æ›¿ä»£security.kmip.clientCertificateFileã€‚<br>security.kmip.clientCertificateFileå’Œsecurity.kmip.clientCertificateSelectoré€‰é¡¹æ˜¯äº’æ–¥çš„ã€‚ æ‚¨åªèƒ½æŒ‡å®šä¸€ä¸ªã€‚</p><p><strong>security.kmip.serverCAFileï¼š</strong>Type: string</p><p>3.2ç‰ˆä¸­çš„æ–°åŠŸèƒ½ã€‚<br>CAæ–‡ä»¶çš„è·¯å¾„ã€‚ ç”¨äºéªŒè¯ä¸KMIPæœåŠ¡å™¨çš„å®‰å…¨å®¢æˆ·ç«¯è¿æ¥ã€‚</p><h1 class=pgc-h-arrow-right>setParameteré…ç½®</h1><p>setParameter<br>è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªMongoDBæœåŠ¡å™¨å‚æ•°ä¸­æè¿°çš„å‚æ•°<br>è¦åœ¨YAMLé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å‚æ•°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š</p><pre><code>setParameter:   &lt;parameter1&gt;: &lt;value1&gt;   &lt;parameter2&gt;: &lt;value2&gt;</code></pre><pre><code>#åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šenableLocalhostAuthBypassï¼šsetParameter:   enableLocalhostAuthBypass: false</code></pre><h1 class=pgc-h-arrow-right>storageé…ç½®é¡¹</h1><pre><code>storage:   dbPath: &lt;string&gt;   indexBuildRetry: &lt;boolean&gt;   journal:      enabled: &lt;boolean&gt;      commitIntervalMs: &lt;num&gt;   directoryPerDB: &lt;boolean&gt;   syncPeriodSecs: &lt;int&gt;   engine: &lt;string&gt;   wiredTiger:      engineConfig:         cacheSizeGB: &lt;number&gt;         journalCompressor: &lt;string&gt;         directoryForIndexes: &lt;boolean&gt;         maxCacheOverflowFileSizeGB: &lt;number&gt;      collectionConfig:         blockCompressor: &lt;string&gt;      indexConfig:         prefixCompression: &lt;boolean&gt;   inMemory:      engineConfig:         inMemorySizeGB: &lt;number&gt;</code></pre><p><strong>storage.dbPatï¼š</strong>Type: string<strong></strong></p><p>Default:</p><ul><li>/data/db on Linux and macOS</li><li>\data\db on Windows</li></ul><p><strong>storage.indexBuildRetryï¼š</strong>Type: booleanï¼ŒDefault: true</p><p>æŒ‡å®šmongodåœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶æ˜¯å¦é‡å»ºä¸å®Œæ•´çš„ç´¢å¼•ã€‚ è¿™é€‚ç”¨äºmongodåœ¨å…³é—­æˆ–åœ¨ç´¢å¼•æ„å»ºè¿‡ç¨‹ä¸­åœæ­¢åé‡æ–°å¯åŠ¨çš„æƒ…å†µã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmongodæ€»æ˜¯åˆ é™¤æ‰€æœ‰ä¸å®Œæ•´çš„ç´¢å¼•ï¼Œç„¶åé»˜è®¤æƒ…å†µä¸‹å°è¯•é‡å»ºå®ƒä»¬ã€‚ è¦é˜»æ­¢mongodé‡å»ºç´¢å¼•ï¼Œè¯·å°†æ­¤é€‰é¡¹è®¾ç½®ä¸ºfalseã€‚</p><p><strong>storage.journal.enabledï¼š</strong>Type: boolean</p><p>é»˜è®¤å€¼ï¼šåœ¨64ä½ç³»ç»Ÿä¸Šä¸ºtrueï¼Œåœ¨32ä½ç³»ç»Ÿä¸Šä¸ºfalse<br>å¯ç”¨æˆ–ç¦ç”¨è€ä¹…æ€§æ—¥å¿—ï¼Œä»¥ç¡®ä¿æ•°æ®æ–‡ä»¶ä¿æŒæœ‰æ•ˆå’Œå¯æ¢å¤ã€‚ ä»…å½“æ‚¨æŒ‡å®šstorage.dbPathè®¾ç½®æ—¶ï¼Œæ­¤é€‰é¡¹æ‰é€‚ç”¨ã€‚ mongodé»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ—¥è®°åŠŸèƒ½ã€‚</p><p><strong>storage.journal.commitIntervalMsï¼š</strong>Type: numberï¼ŒDefault: 100</p><p>mongodè¿›ç¨‹åœ¨ä¸¤æ¬¡æ—¥è®°æ“ä½œä¹‹é—´å…è®¸çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ å–å€¼èŒƒå›´æ˜¯1åˆ°500æ¯«ç§’ã€‚ è¾ƒä½çš„å€¼ä¼šå¢åŠ æ—¥å¿—çš„æŒä¹…æ€§ï¼Œä½†ä¼šé™ä½ç£ç›˜æ€§èƒ½ã€‚</p><p><strong>storage.directoryPerDBï¼š</strong>Type: boolean,Default: false</p><p>å¦‚æœä¸ºtrueï¼Œåˆ™MongoDBä½¿ç”¨å•ç‹¬çš„ç›®å½•å­˜å‚¨æ¯ä¸ªæ•°æ®åº“çš„æ•°æ®ã€‚ è¿™äº›ç›®å½•ä½äºstorage.dbPathç›®å½•ä¸‹ï¼Œæ¯ä¸ªå­ç›®å½•åç§°éƒ½ä¸æ•°æ®åº“åç§°ç›¸å¯¹åº”ã€‚</p><p><strong>storage.syncPeriodSecsï¼š</strong>Type: numberï¼ŒDefault: 60</p><p>MongoDBé€šè¿‡fsyncæ“ä½œå°†æ•°æ®åˆ·æ–°åˆ°æ•°æ®æ–‡ä»¶ä¹‹å‰å¯ä»¥ç»è¿‡çš„æ—¶é—´ã€‚</p><p><strong>storage.engineï¼š</strong>Default: wiredTiger</p><p>ä»4.2ç‰ˆå¼€å§‹ï¼ŒMongoDBåˆ é™¤ä¸æ¨èä½¿ç”¨çš„MMAPv1å­˜å‚¨å¼•æ“ã€‚</p><p>mongodæ•°æ®åº“çš„å­˜å‚¨å¼•æ“ã€‚ å¯ç”¨å€¼åŒ…æ‹¬ï¼šinMemory/wiredTiger</p><p>å¦‚æœæ‚¨å°è¯•ä½¿ç”¨storage.dbPathå¯åŠ¨ä¸€ä¸ªmongodï¼Œè¯¥pathåŒ…å«ç”±storage.engineæŒ‡å®šçš„å­˜å‚¨å¼•æ“ä»¥å¤–çš„å…¶ä»–å­˜å‚¨å¼•æ“ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶ï¼Œmongodå°†æ‹’ç»å¯åŠ¨ã€‚</p><h1 class=pgc-h-arrow-right>operationProfilingé…ç½®é¡¹</h1><pre><code>operationProfiling:   mode: &lt;string&gt;   slowOpThresholdMs: &lt;int&gt;   slowOpSampleRate: &lt;double&gt;</code></pre><p><strong>operationProfiling.modeï¼š</strong>Type: stringï¼ŒDefault: off</p><p>æŒ‡å®šåº”åˆ†æå“ªäº›æ“ä½œã€‚ æä¾›ä»¥ä¸‹æ¢æŸ¥å™¨çº§åˆ«ï¼š</p><p>offï¼šæ¢æŸ¥å™¨å·²å…³é—­ï¼Œå¹¶ä¸”ä¸æ”¶é›†ä»»ä½•æ•°æ®ã€‚ è¿™æ˜¯é»˜è®¤çš„æ¢æŸ¥å™¨çº§åˆ«ã€‚</p><p>slowOpï¼šæ¢æŸ¥å™¨æ”¶é›†çš„æ•°æ®èŠ±è´¹çš„æ—¶é—´é•¿äºæ…¢é€Ÿå€¼ã€‚</p><p>allï¼šæ¢æŸ¥å™¨æ”¶é›†æ‰€æœ‰æ“ä½œçš„æ•°æ®ã€‚</p><p><strong>operationProfiling.slowOpThresholdMsï¼š</strong>Type: integerï¼ŒDefault: 100</p><p>æ…¢é€Ÿæ“ä½œæ—¶é—´é˜ˆå€¼ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ è¿è¡Œæ—¶é—´è¶…è¿‡æ­¤é˜ˆå€¼çš„æ“ä½œè¢«è®¤ä¸ºæ˜¯ç¼“æ…¢çš„ã€‚</p><p><strong>operationProfiling.slowOpSampleRateï¼š</strong>Type: double,Default: 1.0</p><h3 class=pgc-h-arrow-right>åº”å½“åˆ†ææˆ–è®°å½•çš„æ…¢é€Ÿæ“ä½œçš„ä¸€éƒ¨åˆ†ã€‚ operationProfiling.slowOpSampleRateæ¥å—0åˆ°1ä¹‹é—´çš„å€¼ï¼ˆåŒ…æ‹¬0å’Œ1ï¼‰ã€‚</h3><h1 class=pgc-h-arrow-right>replicationé…ç½®é¡¹</h1><pre><code>replication:   oplogSizeMB: &lt;int&gt;   replSetName: &lt;string&gt;   enableMajorityReadConcern: &lt;boolean&gt;</code></pre><p><strong>replication.oplogSizeMB</strong></p><p>å¤åˆ¶æ“ä½œæ—¥å¿—ï¼ˆå³oplogï¼‰çš„æœ€å¤§å¤§å°ï¼ˆä»¥å…†å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</p><p>ä»MongoDB 4.0å¼€å§‹ï¼Œæ“ä½œæ—¥å¿—å¯ä»¥è¶…è¿‡å…¶é…ç½®çš„å¤§å°é™åˆ¶ï¼Œä»¥é¿å…åˆ é™¤å¤šæ•°æäº¤ç‚¹ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œmongodè¿›ç¨‹åŸºäºæœ€å¤§å¯ç”¨ç©ºé—´é‡åˆ›å»ºæ“ä½œæ—¥å¿—ã€‚ å¯¹äº64ä½ç³»ç»Ÿï¼Œæ“ä½œæ—¥å¿—é€šå¸¸æ˜¯å¯ç”¨ç£ç›˜ç©ºé—´çš„5ï¼…ã€‚<br>mongodé¦–æ¬¡åˆ›å»ºoplogåï¼Œæ›´æ”¹Replication.oplogSizeMBé€‰é¡¹å°†ä¸ä¼šå½±å“oplogçš„å¤§å°ã€‚<br>è¦æ›´æ”¹æ­£åœ¨è¿è¡Œçš„å‰¯æœ¬é›†æˆå‘˜çš„æ“ä½œæ—¥å¿—å¤§å°ï¼Œè¯·ä½¿ç”¨replSetResizeOplogç®¡ç†å‘½ä»¤ã€‚ replSetResizeOplogä½¿æ‚¨èƒ½å¤ŸåŠ¨æ€è°ƒæ•´æ“ä½œæ—¥å¿—çš„å¤§å°ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨mongodè¿›ç¨‹ã€‚<br></p><p><strong>replication.replSetNameï¼š</strong>Type: string</p><p>mongodæ‰€å±çš„å‰¯æœ¬é›†çš„åç§°ã€‚ å‰¯æœ¬é›†ä¸­çš„æ‰€æœ‰ä¸»æœºå¿…é¡»å…·æœ‰ç›¸åŒçš„é›†åç§°ã€‚<br>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºè¿æ¥åˆ°å¤šä¸ªå‰¯æœ¬é›†ï¼Œåˆ™æ¯ä¸ªå‰¯æœ¬é›†åº”å…·æœ‰ä¸åŒçš„åç§°ã€‚ æŸäº›é©±åŠ¨ç¨‹åºé€šè¿‡å‰¯æœ¬é›†åç§°å¯¹å‰¯æœ¬é›†è¿æ¥è¿›è¡Œåˆ†ç»„ã€‚<br>Replication.replSetNameè®¾ç½®ä»…é€‚ç”¨äºmongodã€‚</p><p>ä»MongoDB 4.0å¼€å§‹ï¼š<br>1.è®¾ç½®Replication.replSetNameä¸èƒ½ä¸storage.indexBuildRetryä¸€èµ·ä½¿ç”¨ã€‚<br>replication.enableMajorityReadConcernå¯¹äºWiredTigerå­˜å‚¨å¼•æ“ï¼Œstorage.journal.enabled:falseä¸èƒ½ä¸Replication.replSetNameä¸€èµ·ä½¿ç”¨ã€‚</p><p><strong>replication.enableMajorityReadConcern:</strong>Default: true</p><p>ä»MongoDB 3.6å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒMongoDBå¯ç”¨â€œmajorityâ€çš„read concernçš„æ”¯æŒã€‚<br></p><h1 class=pgc-h-arrow-right>shardingé…ç½®é¡¹</h1><pre><code>sharding:   clusterRole: &lt;string&gt;   archiveMovedChunks: &lt;boolean&gt;</code></pre><p><strong>sharding.clusterRoleï¼š</strong>Type: string</p><p>mongodå®ä¾‹åœ¨åˆ†ç‰‡ç¾¤é›†ä¸­çš„è§’è‰²ã€‚ å°†æ­¤è®¾ç½®è®¾ç½®ä¸ºä»¥ä¸‹ä¹‹ä¸€ï¼š</p><ul><li>configsvrï¼šå¯åŠ¨æ­¤å®ä¾‹ä½œä¸ºé…ç½®æœåŠ¡å™¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å®ä¾‹ä»ç«¯å£27019å¼€å§‹ã€‚</li><li>shardsvrï¼šå¯åŠ¨æ­¤å®ä¾‹ä½œä¸ºåˆ†ç‰‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å®ä¾‹ä»ç«¯å£27018å¼€å§‹ã€‚</li></ul><p><strong>è®¾ç½®sharding.clusterRoleè¦æ±‚mongodå®ä¾‹ä¸å¤åˆ¶ä¸€èµ·è¿è¡Œã€‚ è¦å°†å®ä¾‹éƒ¨ç½²ä¸ºå‰¯æœ¬é›†æˆå‘˜ï¼Œè¯·ä½¿ç”¨replSetNameè®¾ç½®å¹¶æŒ‡å®šå‰¯æœ¬é›†çš„åç§°ã€‚</strong></p><p><strong>sharding.archiveMovedChunksï¼š</strong>Type: boolean</p><p>åœ¨3.2ç‰ˆä¸­è¿›è¡Œäº†æ›´æ”¹ï¼šä»3.2ç‰ˆå¼€å§‹ï¼ŒMongoDBä½¿ç”¨falseä½œä¸ºé»˜è®¤å€¼ã€‚<br>åœ¨å—è¿ç§»æœŸé—´ï¼Œåˆ†ç‰‡ä¸ä¼šä¿å­˜ä»è¯¥åˆ†ç‰‡è¿ç§»çš„æ–‡æ¡£ã€‚</p><p>å…·ä½“å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.mongodb.com/manual/reference/configuration-options/</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é…ç½®æ–‡ä»¶','MongoDB','å­¦ä¹ '</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>