<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ | æå®¢å¿«è¨Š</title><meta property="og:title" content="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/9050c2396d10468ba999f16bd70ce041"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/245fb59.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/245fb59.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/245fb59.html><meta property="article:published_time" content="2020-10-29T21:04:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:30+08:00"><meta name=Keywords content><meta name=description content="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/245fb59.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>å‰è¨€</h1><p>åœ¨å¼•å…¥ä¸€é¡¹æŠ€æœ¯ä¹‹å‰ï¼Œé¦–å…ˆå¿…é¡»æ¸…æ¥šçš„æ˜¯è¯¥æŠ€æœ¯å¯ä»¥ä¸ºé¡¹ç›®è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚ä¸ªäººåœ¨äº†è§£æ¶ˆæ¯é˜Ÿåˆ—(Message Queue)ä¹‹å‰ï¼Œä»¥ä¸ºæ¶ˆæ¯é˜Ÿåˆ—ä¸»æ˜¯ç”¨äºå‘é€çŸ­ä¿¡ã€é‚®ä»¶ç­‰æ¶ˆæ¯å‘é€(å¼‚æ­¥è§£è€¦)ï¼Œä½†æ·±å…¥ç†è§£æ‰å‘ç°è‡ªå·±çš„ç†è§£é”™äº†ï¼ŒMQçš„ä½œç”¨ä¸æ­¢ä½“ç°åœ¨ä¸€äº›ç”¨æˆ·æ¥æ”¶åˆ°çš„å…·ä½“æ¶ˆæ¯é‡Œï¼Œè¿˜å¯ç”¨äºå…¶å®ƒåº”ç”¨çš„æ•°æ®å‘é€ã€é€šç”¨çš„ä¸šåŠ¡å¤„ç†ç­‰ã€‚æ¶ˆæ¯é˜Ÿåˆ—ä»å­—é¢ä¸Šæ„æ€è§£è¯»å°±æ˜¯å°†æ¶ˆæ¯å­˜æ”¾åˆ°é˜Ÿåˆ—é‡Œï¼Œæ ¹æ®é˜Ÿåˆ—FIFO(å…ˆå…¥å…ˆå‡º)çš„ç‰¹æ€§è¿›è¡Œæ¶ˆæ¯æ¶ˆè´¹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ˜¯ä¸€ç§è·¨è¿›ç¨‹çš„é€šä¿¡æœºåˆ¶ï¼Œç”¨äºåº”ç”¨é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚</p><hr><h1 class=pgc-h-arrow-right>åœ¨å¼•å…¥MQä¹‹å‰ï¼Œéœ€è¦äº†è§£çš„ä¼˜ç¼ºç‚¹ä¸åº”ç”¨åœºæ™¯</h1><p>MQçš„ä¸»è¦ä¼˜ç‚¹ä¸º<strong>è§£è€¦</strong>ã€<strong>å¼‚æ­¥</strong>ã€<strong>å‰Šå³°</strong>ï¼Œä»¥ä¸‹ä¸¾ä¸€ä¸ªç®€å•çš„åœºæ™¯æ¥ååº”è¿™å‡ ä¸ªç‰¹æ€§ã€‚</p><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9050c2396d10468ba999f16bd70ce041><p class=pgc-img-caption></p></div><p>åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¼šæ ¹æ®æ ¸å¿ƒä¸šåŠ¡è¿›è¡Œç³»ç»Ÿçš„å‚ç›´æ‹†åˆ†å†è¿›è¡Œå•ç‹¬éƒ¨ç½²ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œå„ç³»ç»Ÿåœ¨ä¸‹å•ä¸šåŠ¡é‡Œä¸»è¦è´Ÿè´£çš„å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li>è®¢å•ç³»ç»Ÿï¼šåˆ›å»ºè®¢å•ï¼Œå°†ä¸‹å•æ¶ˆæ¯(å¦‚è®¢å•idã€ç”¨æˆ·æ•°æ®)å‘é€åˆ°MQ</li><li>MQï¼šé™åˆ¶æ¯ç§’çš„è®¢å•è¯·æ±‚å¤„ç†æ•°(å¦‚æ¯ç§’æ¥æ”¶2000ä¸ªè¯·æ±‚ä½†æ•°æ®åº“åªèƒ½å¤„ç†1000ä¸ªåˆ™åªå¤„ç†1000ä¸ªï¼Œå¤„ç†ä¸è¿‡æ¥çš„å…ˆåœ¨æ¶ˆæ¯é˜Ÿåˆ—é‡Œå †ç§¯)</li><li>ç‰©æµç³»ç»Ÿï¼šåˆ›å»ºè®¢å•ç‰©æµä¿¡æ¯</li><li>ç§¯åˆ†ç³»ç»Ÿï¼šç”¨æˆ·è´­ç‰©ç§¯åˆ†ä¿¡æ¯æ›´æ–°</li></ul><p>æƒ³è±¡ä¸‹ä»¥ä¸Šåœºæ™¯æ²¡æœ‰MQçš„çš„å­˜åœ¨æ—¶åˆ›å»ºè®¢å•æµç¨‹ä¸­å­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li>è®¢å•ç³»ç»Ÿåˆ›å»ºå®Œè®¢å•ä¿¡æ¯åè¦å»è°ƒç”¨ç‰©æµç³»ç»Ÿã€ç§¯åˆ†ç³»ç»Ÿä¸Šçš„ä¸šåŠ¡æ¥å£ï¼Œç³»ç»Ÿä¸¥é‡çš„<strong>è€¦åˆ</strong>åœ¨ä¸€èµ·(è§£è€¦)</li><li>è®¢å•ç³»ç»Ÿè‹¥éé€šè¿‡çº¿ç¨‹å»è°ƒç”¨å…¶å®ƒç³»ç»Ÿçš„æ¥å£ï¼Œè¿˜éœ€åŒæ­¥ç­‰å¾…è¿”å›æµªè´¹ä¸å°‘æ—¶é—´(å¼‚æ­¥ï¼Œé¿å…åˆ›å»ºçº¿ç¨‹è°ƒç”¨çš„éº»çƒ¦)</li><li>ç”¨æˆ·é«˜å³°æœŸè¯·æ±‚è¿‡å¤šæ•°æ®åº“å¤„ç†ä¸è¿‡æ¥è¿›è€Œå¯¼è‡´åº”ç”¨å´©æºƒ(å‰Šå³°)</li></ul><p>ä»»ä½•äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼Œè™½ç„¶MQå¯ä»¥ç»™ç³»ç»Ÿè§£å†³ä¸å°‘é—®é¢˜ï¼Œä½†ä¹Ÿä¼šå¼•å…¥ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼š</p><ul><li>ç³»ç»Ÿå¤æ‚åº¦æé«˜ï¼Œéœ€è¦è€ƒè™‘æ¶ˆæ¯é‡å¤æ¶ˆè´¹ã€æ¶ˆæ¯ä¸¢å¤±ç­‰é—®é¢˜</li><li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„ç‰©æµæˆ–åº“å­˜ç³»ç»Ÿå†™åº“å‡ºç°å¼‚å¸¸å¦‚ä½•å›æ»šè¡¥å¿</li></ul><p>äº†è§£äº†MQçš„ä¸€äº›ç‰¹æ€§åï¼Œå†è®¨è®ºä¸‹å‡ ä¸ªé€‚åˆä½¿ç”¨MQçš„åœºæ™¯ï¼š</p><ul><li>ä¸Šæ¸¸ç³»ç»Ÿä¸å…³å¿ƒä¸‹æ¸¸çš„æ‰§è¡Œç»“æœ(å¦‚ç”¨æˆ·æ³¨å†ŒæˆåŠŸåç”¨æˆ·ç³»ç»Ÿé€šè¿‡MQå‘ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œä½†å‘é€æˆä¸æˆåŠŸç”¨æˆ·ç³»ç»Ÿæ ¹æœ¬ä¸åœ¨æ„)</li><li>ä¾èµ–äºæ•°æ®çš„å®šæ—¶ä»»åŠ¡(å¦‚ä¸‹å•å24å°æ—¶å†…ä¸æ”¯ä»˜åˆ™å–æ¶ˆè®¢å•ï¼Œç”³è¯·é€€æ¬¾72å°æ—¶å†…å•†å®¶ä¸å¤„ç†åˆ™è‡ªåŠ¨é€€æ¬¾)</li></ul><hr><h1 class=pgc-h-arrow-right>å¼•å…¥MQåçš„ä¸€äº›é—®é¢˜è§£å†³æ€è·¯</h1><li><strong>æ¶ˆæ¯é‡å¤æ¶ˆè´¹(ä¿è¯æ¶ˆæ¯çš„å¹‚ç­‰æ€§)</strong></li><p class=pgc-end-literature>å¹‚ç­‰æ€§ï¼šå¯¹äºåŒä¸€æ“ä½œçš„è¯·æ±‚æ— è®ºè¯·æ±‚å¤šå°‘æ¬¡ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œåœ¨MQä¸­çš„å…·ä½“ä½“ç°ä¸ºåŒä¸€æ¡æ¶ˆæ¯æ— è®ºå‘é€éƒ½å°‘æ¬¡éƒ½åªä¼šè¢«æ¶ˆè´¹ä¸€æ¬¡ã€‚</p><p>ç”±äºç½‘ç»œæŠ–åŠ¨(å»¶è¿Ÿ)çš„åŸå› æ¶ˆæ¯é‡å¤å‘é€çš„é—®é¢˜æ˜¯ä¸å¯é¿å…çš„ï¼Œå¦‚æœåœ¨æ¶ˆè´¹ç«¯æ¶ˆè´¹æ—¶æ²¡æœ‰åšå¥½æ¶ˆæ¯çš„å¹‚ç­‰æ€§ä¿è¯å°±æœ‰å¯èƒ½å‡ºç°é‡å¤æ¶ˆè´¹ï¼Œå¯¼è‡´åŒä¸€æ¡æ¶ˆæ¯è¢«å¤šæ¬¡æ¶ˆè´¹ã€å†™åº“å¤šæ¬¡çš„æƒ…å†µã€‚æ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯ä¸ºæ¶ˆæ¯æ·»åŠ ä¸€ä¸ªå”¯ä¸€æ ‡è¯†(ID)ï¼Œåœ¨æ¶ˆè´¹æ—¶æ ¹æ®IDæŸ¥è¯¢æ•°æ®åº“æ˜¯å¦å­˜åœ¨è¯¥æ¶ˆæ¯è®°å½•ï¼Œå¦‚æœä¸å­˜åœ¨å†æ’å…¥æ¶ˆæ¯ï¼Œå­˜åœ¨åˆ™ä¸è¿›è¡Œæ’å…¥æ¶ˆè´¹ã€‚<br>å½“ç”Ÿæˆä¸æ¶ˆè´¹æ—¶é—´é—´éš”ä¸é•¿æ—¶ï¼Œå¯ä½¿ç”¨Redisæé«˜æ¶ˆæ¯å¹‚ç­‰æ€§çš„æ•ˆç‡ï¼Œå¦‚ï¼š</p><p>1. æ¶ˆè´¹è€…æ¶ˆè´¹å‰æ ¹æ®IDå»æŸ¥è¯¢redisæ˜¯å¦å­˜åœ¨è¯¥æ¶ˆæ¯</p><p>2. ä¸å­˜åœ¨è¯¥æ¶ˆæ¯åˆ™æ¶ˆè´¹å¹¶å†™å…¥redisï¼Œå­˜åœ¨è¯¥æ¶ˆæ¯åˆ™ä¸æ¶ˆè´¹è¿”å›</p><p><br></p><p>å…³äºæ¶ˆæ¯IDï¼š</p><p>1. RocketMQçš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šé…æœ‰å…¨å±€å”¯ä¸€çš„ID</p><p>2. å¦‚æœæ¶ˆæ¯ä¸­é—´ä»¶ä¸ä¼šç”ŸæˆIDï¼Œå¯è€ƒè™‘ä¸€äº›IDæœåŠ¡(å¦‚é›ªèŠ±ç®—æ³•)ç”Ÿæˆå…¨å±€å”¯ä¸€ID</p><p>3. å»ºè®®IDä¸ä¸å®é™…ä¸šåŠ¡å…³è”</p><p>å¦‚ç›®å‰ä¸ªäººå·¥ä½œä¸­è´Ÿè´£çš„æ¶ˆæ¯ä¸­å¿ƒåº”ç”¨æ˜¯åŸºäºMongoDB+RocketMQçš„æŠ€æœ¯æ¶æ„ï¼ŒMongoDBè´Ÿè´£å­˜å‚¨å„ä¸ªåº”ç”¨å‘é€è¿‡æ¥çš„æ¶ˆæ¯(ä¸»è¦ä¸ºSmsã€Emailç­‰)ï¼Œæ¯æ¬¡æ¶ˆè´¹å‰é€šè¿‡RocketMQçš„Message IDæŸ¥è¯¢Mongoä¿è¯æ¶ˆæ¯å¹‚ç­‰æ€§é¿å…é‡å¤æ¶ˆè´¹ï¼Œæ¶ˆè´¹æˆåŠŸåæ›´æ–°DBä¸­çš„æ¶ˆæ¯çŠ¶æ€ã€‚</p><li><strong>æ¶ˆæ¯ä¸¢å¤±(æ¶ˆæ¯çš„å¯é æ€§)</strong></li><p>MQå„ç»„ä»¶çš„æ¶ˆæ¯ä¸¢å¤±å«ä¹‰éƒ½æœ‰æ‰€ä¸åŒï¼Œå¯¼è‡´ä¸è§£å†³æ–¹æ¡ˆä¹Ÿä¸ä¸€å®šç›¸åŒï¼Œä»¥kafkaã€rocketçš„æ¶ˆæ¯ä¼ é€’æ¨¡å‹(Producer->Broker->Consumer)ä¸ºä¾‹ï¼š</p><ul><li>Producerï¼šæ¶ˆæ¯æœªæŒä¹…åŒ–åˆ°Brokerä¸­ï¼Œæˆ–æ¶ˆè´¹è€…æœªèƒ½æˆåŠŸæ¶ˆè´¹åˆ°æ¶ˆæ¯ã€‚Kafkaå¯é€šè¿‡æ›´æ”¹acké…ç½®è§£å†³ï¼ŒrocketMQä¸­ä¼šè¿”å›æ¶ˆæ¯å‘é€çŠ¶æ€ç ã€‚</li><li>Brokerï¼šæ¶ˆæ¯æˆåŠŸä¼ åˆ°åˆ°æˆ‘è¿™é‡Œäº†ï¼Œå¯æˆ‘å› ä¸ºæŸäº›åŸå› (ä¸åŒçš„MQå¯èƒ½å› æœºåˆ¶é—®é¢˜æœ‰ä¸åŒåŸå› )å¼„ä¸¢äº†ï¼Œå¦‚æœæ˜¯ç¡¬ä»¶åŸå› (å¦‚å®•æœºã€ç£ç›˜æŸå)å»ºè®®ä½ copy(é›†ç¾¤éƒ¨ç½²)å‡ ä¸ªæˆ‘</li><li>Consumerï¼šæˆ‘æ‹¿åˆ°äº†æ¶ˆæ¯ï¼Œä½†æ¶ˆè´¹å¤±è´¥äº†æˆ–ä¸­é€”æŒ‚æ‰äº†æ²¡å‘Šè¯‰Brokerã€‚å¯é€šè¿‡å„MQä¸­é—´ä»¶çš„ACKæœºåˆ¶è§£å†³ã€‚</li></ul><hr><h1 class=pgc-h-arrow-right>åŸºäºRocketMQçš„ç®€å•ä¾‹å­æŠ€æœ¯æ¡†æ¶ä¸ä¸šåŠ¡æ¨¡å‹</h1><p>ä»¥ä¸‹ä¾¿ä»¥ä¸€ä¸ªåŸºäºMongoDB+RocketMQ+Eureka+Spring Cloud Configçš„æŠ€æœ¯æ¡†æ¶å¹¶ç»“åˆä½¿ç”¨MQä¸­çš„é—®é¢˜æ­å»ºä¸€ä¸ªç®€å•çš„æ¶ˆæ¯ä¸­å¿ƒé¡¹ç›®æ¡ˆä¾‹ï¼Œå…¶ä¸­å„ç»„ä»¶åœ¨é¡¹ç›®ä¸­çš„ä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li>Spring Cloud Configï¼šæ¶ˆæ¯é…ç½®(å¦‚topicã€ConsumerGroupã€ProducerGroup)ä¸­å¿ƒã€‚</li><li>Eurekaï¼šåº”ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œè´Ÿè´£é¡¹ç›®ä¸­å„æœåŠ¡çš„å‘ç°ä¸æä¾›è°ƒç”¨ã€‚</li><li>MongoDBï¼šç”±äºæ¶ˆæ¯çš„äº‹åŠ¡å…³ç³»ä¸å¼ºä¸”Mongodbæ ¼å¼æ–‡æ¡£è‡ªç”±(jsonå­˜å‚¨ï¼Œéšæ„å¢åˆ å­—æ®µ)ï¼Œæ‰€ä»¥ä½¿ç”¨Mongodbå­˜å‚¨å„ä¸ªåº”ç”¨å‘é€è¿‡æ¥çš„æ¶ˆæ¯(ä¸»è¦ä¸ºSmsã€Emailç­‰)ï¼Œæ¯æ¬¡æ¶ˆè´¹å‰é€šè¿‡RocketMQçš„Message IDæŸ¥è¯¢Mongoä¿è¯æ¶ˆæ¯å¹‚ç­‰æ€§é¿å…é‡å¤æ¶ˆè´¹ï¼Œæ¶ˆè´¹æˆåŠŸåä¿å­˜æ¶ˆæ¯ã€‚</li><li>RocketMQï¼šæ¶ˆæ¯æ¥æ”¶ã€å­˜å‚¨ã€å‘é€ã€‚</li></ul><p>ä¸‹å›¾ä¸ºè¯¥é¡¹ç›®çš„åº”ç”¨å…³ç³»æ¨¡å‹ï¼š</p><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/da8b16e55da34842bf773abf65bddafd><p class=pgc-img-caption></p></div><p>æ¶ˆæ¯ä¸­å¿ƒåº”ç”¨ï¼šç»Ÿä¸€é€šç”¨æ¶ˆæ¯çš„ä¸šåŠ¡å¤„ç†åº”ç”¨ï¼Œå¦‚çŸ­ä¿¡å‘é€ã€é‚®ä»¶å‘é€ã€å‘˜å·¥æœåŠ¡å·æ¨é€ç­‰æ¶ˆæ¯çš„å¤„ç†é—®å·åº”ç”¨ï¼šè´Ÿè´£å‘˜å·¥è°ƒæŸ¥é—®å·çš„åˆ†å‘ï¼Œåœ¨è¯¥ä¾‹å­ä¸­åªæ˜¯ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯å‘é€æµ‹è¯•åº”ç”¨commonï¼šå­˜æ”¾å„åº”ç”¨é€šç”¨ç±»ï¼Œå¦‚çŸ­ä¿¡æ¶ˆæ¯ç±»(SmsMessage)ã€æ¶ˆæ¯å¸¸é‡ç±»config-server-propertiesï¼šé…ç½®ä¸­å¿ƒçš„é…ç½®å­˜æ”¾ç›®å½•ç”±äºè¯¥é¡¹ç›®ä¸»è¦ç”¨äºæ¼”ç¤ºä¸€äº›MQçš„åŠŸèƒ½ä¸ä½¿ç”¨ä¸­çš„é—®é¢˜è§£å†³æ–¹å¼ï¼Œæ‰€ä»¥ç¼–ç éƒ¨åˆ†æ¯”è¾ƒç®€å•ã€‚</p><h1 class=pgc-h-arrow-right>åº”ç”¨ç¼–ç </h1><p><strong class=highlight-text>é€šç”¨æ¨¡å—ç¼–ç (common)</strong></p><p>ä¸»è¦å­˜æ”¾å„åº”ç”¨é€šç”¨ç±»(å¦‚å®ä½“ã€å¸¸é‡ã€é…ç½®ã€åŠŸèƒ½ç­‰)ã€‚</p><p><strong>MessageConstantï¼šç»´æŠ¤æ¶ˆæ¯å¸¸é‡ã€‚</strong></p><pre><code>public interface MessageConstant {    interface System {        String QUESTION = "QUESTION";    }    interface Topic {        String SMS_TOPIC = "rocketmq.topic.sms";        String SMS_TOPIC_TEMPLATE = "${rocketmq.topic.sms}";        String MAIL_TOPIC = "rocketmq.topic.mail";        String MAIL_TOPIC_TEMPLATE = "${rocketmq.topic.mail}";    }    interface Producer {        String SMS_GROUP_TEMPLATE = "${rocketmq.producer.group.sms}";        String MAIL_GROUP_TEMPLATE = "${rocketmq.producer.group.mail}";    }    interface Consumer {        String SMS_GROUP_TEMPLATE = "${rocketmq.consumer.group.sms}";        String MAIL_GROUP_TEMPLATE = "${rocketmq.consumer.group.mail}";    }}</code></pre><p><strong>BaseMessageï¼šåŸºç¡€æ¶ˆæ¯ç±»ï¼Œæ‰€ç”¨çš„é€šç”¨æ¶ˆæ¯éƒ½éœ€ç»§æ‰¿æ­¤ç±»æ–¹ä¾¿ç»Ÿä¸€ä¿¡æ¯çš„ç®¡ç†</strong></p><pre><code>@Data@Accessors(chain = true)public abstract class BaseMessage implements Serializable {    /**     * æ¶ˆæ¯æºç³»ç»Ÿ:{@link io.wilson.common.message.constant.MessageConstant.System}     */    private String system;}</code></pre><p><strong>SmsMessageï¼šé€šç”¨çŸ­ä¿¡æ¶ˆæ¯ç±»ï¼ŒçŸ­ä¿¡å†…å®¹æ•°æ®è½½ä½“</strong></p><pre><code>@EqualsAndHashCode(callSuper = true)@Data@Accessors(chain = true)@ToString(callSuper = true)public class SmsMessage extends BaseMessage {    /**     * çŸ­ä¿¡åˆ›å»ºç”¨æˆ·     */    private String createUserId;    /**     * æ¥æ”¶çŸ­ä¿¡ç”¨æˆ·     */    private String toUserId;    /**     * æ‰‹æœºå·ç      */    private String mobile;    /**     * çŸ­ä¿¡å†…å®¹     */    private String content;}</code></pre><p><strong class=highlight-text>æ¶ˆæ¯ä¸­å¿ƒåº”ç”¨(message-center)</strong></p><p>æ¶ˆæ¯ä¸­å¿ƒåœ¨è¿›è¡Œç¼–ç ä¹‹å‰ï¼Œéœ€ç¡®è®¤æ¶ˆæ¯ä¸­å¿ƒè¯¥å¦‚ä½•è¿›è¡Œæ¶ˆæ¯çš„å¤„ç†ã€‚è¯¥é¡¹ç›®æ‰€å¤„çš„ä¸šåŠ¡ç¯å¢ƒæ˜¯å„åº”ç”¨å¯èƒ½éƒ½éœ€è¦å‘é€ä¸€äº›çŸ­ä¿¡æ¶ˆæ¯ã€é‚®ä»¶ã€æœåŠ¡å·æ¶ˆæ¯ç­‰ï¼Œç›¸åŒæ¶ˆæ¯çš„ä¸šåŠ¡å¤„ç†æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æ¶ˆæ¯ä¸­å¿ƒå¯¹æ¶ˆæ¯æ¥æ”¶æ¶ˆè´¹çš„ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ä¿è¯æ¶ˆæ¯å¹‚ç­‰æ€§(æŸ¥è¯¢æ•°æ®åº“ä½¿ç”¨å·²æœ‰æ¶ˆæ¯è®°å½•é¿å…é‡å¤æ¶ˆè´¹)</li><li>æ¶ˆæ¯ä¸šåŠ¡å¤„ç†</li><li>æ¶ˆæ¯æ—¥å¿—å…¥åº“</li></ul><p>åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œä¸åŒçš„æ¶ˆæ¯ç±»å‹å­˜å‚¨åœ¨ä¸åŒçš„Mongodb collection(åŒMysql tableæ¦‚å¿µ)ï¼Œä½†å…±ç”¨ä¸€ä¸ªæ¶ˆæ¯æ—¥å¿—ç±»MessageLogï¼š</p><pre><code>@Data@Accessors(chain = true)public class MessageLog implements Serializable {    private String msgId;    /**     * å‘é€æ–¹ç³»ç»Ÿåç§° {@link io.wilson.common.message.constant.MessageConstant}     */    private String system;    /**     * æ¶ˆæ¯å¯¹è±¡jsonå­—ç¬¦ä¸²     */    private String msgContent;    /**     * ä¸šåŠ¡æ‰§è¡Œç»“æœ     */    private Boolean success;    private LocalDateTime createTime;    private LocalDateTime updateTime;    /**     * åˆå§‹åŒ–æ¶ˆæ¯è®°å½•     *     * @param message       æ¶ˆæ¯     * @return     */    public static &lt;T extends BaseMessage&gt; MessageLog convertFromMessage(T message) {        LocalDateTime now = LocalDateTime.now();        return new MessageLog()                .setSystem(message.getSystem())                .setSuccess(false)                .setCreateTime(now)                .setUpdateTime(now);    }}</code></pre><p>åœ¨è¯¥æ¶ˆè´¹æµç¨‹è®¾è®¡ä¸å¼€å‘ç¼–ç è¿‡ç¨‹ä¸­ä¸ªäººè€ƒè™‘çš„æ ¸å¿ƒç‚¹å¦‚ä¸‹ï¼š</p><ol start=1><li>å¦‚æœä½¿ç”¨æ™®é€šæ¶ˆæ¯ç±»(å¦‚SmsMessage)ä½œä¸ºdbå­˜å‚¨çš„æ˜ å°„å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ¶ˆæ¯ç±»æºæ‚ä¸å¿…è¦çš„å±æ€§(å¦‚createTimeã€updateTimeã€success)ï¼Œä¸”ä½œä¸ºä¸€ä¸ªé€šç”¨çš„æ¶ˆæ¯æ•°æ®è½½ä½“ï¼Œæ™®é€šæ¶ˆæ¯ç±»æ›´é€‚äºä½œä¸ºä¸€ä¸ªVOè€ŒéDOä½¿ç”¨ï¼Œæ‰€ä»¥æ¶ˆæ¯çš„å¤„ç†ç»“æœã€æ¶ˆæ¯çš„åˆ›å»ºæ›´æ–°æ—¶é—´è¿™äº›ä½œä¸ºåŸæ¶ˆæ¯ä¸Šçš„é™„åŠ å†…å®¹ï¼Œæ›´é€‚åˆæ”¾åˆ°å…¶å®ƒæ•°æ®åº“æ˜ å°„å¯¹è±¡ä¸­ç»´æŠ¤ï¼Œæ‰€ä»¥å®šä¹‰äº†MessageLogä½œä¸ºæ¶ˆæ¯è®°å½•çš„å®ä½“ç±»</li><li>æ—¢ç„¶æ˜¯ä½œä¸ºå„åº”ç”¨éƒ½å¯ä½¿ç”¨çš„é€šç”¨æ¶ˆæ¯æ‰€ä»¥è‚¯å®šéƒ½ä¼šæœ‰ä¸€å®šæ•°æ®é‡ï¼Œè™½ç„¶æ˜ å°„å®ä½“éƒ½ä¸€æ ·ï¼Œä½†å­˜æ”¾åˆ°ä¸åŒçš„collectionå¯ä»¥æé«˜æ“ä½œçš„ä¾¿æ·æ€§å’Œè·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œç³»ç»Ÿç¼–ç å¯ä»¥æ›´å¥½åœ°æ ¹æ®ç³»ç»Ÿè¿›è¡Œæ¶ˆæ¯ç­›é€‰</li><li>åœ¨æ¶ˆæ¯æ¶ˆè´¹æµç¨‹ä¸­ï¼Œä¿è¯æ¶ˆæ¯å¹‚ç­‰æ€§å’Œæ¶ˆæ¯æ—¥å¿—å…¥åº“è¿™ä¸¤æ­¥åªæœ‰æ•°æ®åº“åæ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å¯å®šä¹‰ä¸€ä¸ªçˆ¶Listenerè¿›è¡Œæ¶ˆæ¯ç›‘å¬æ¶ˆè´¹çš„æ–¹æ³•æŠ½è±¡ï¼Œä¸åŒæ¶ˆæ¯çš„ä¸šåŠ¡å¤„ç†äº¤ç»™ä¸åŒçš„æ¶ˆæ¯Serviceï¼ŒåŒä¸€ç±»æ¶ˆæ¯çš„æ¶ˆè´¹å¯èƒ½ä¼šå†ç»†åˆ†è°ƒç”¨ä¸åŒçš„æ¶ˆæ¯ä¸šåŠ¡æ–¹æ³•æ¶ˆè´¹(å¦‚å‘é€å•æ¡çŸ­ä¿¡ã€æ‰¹é‡å‘é€çŸ­ä¿¡)ï¼Œæ‰€ä»¥å¯ä»¥å¯¹å„serviceæŠ½è±¡å‡ºä¸€ä¸ªconsume()æ–¹æ³•æ ¹æ®å‚æ•°è°ƒç”¨å…·ä½“çš„serviceä¸šåŠ¡æ–¹æ³•è¿›è¡Œæ¶ˆæ¯æ¶ˆè´¹</li></ol><p>ä¸ºäº†æ›´å¥½åœ°å±•ç¤ºæ¶ˆæ¯ä¸­å¿ƒç±»ä¹‹é—´çš„å…³ç³»ï¼Œæç»˜ä»¥ä¸‹ç±»å›¾ï¼š</p><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2dc778fc70144f458e6ce83310468166><p class=pgc-img-caption></p></div><p>å½“ä¸€æ¡çŸ­ä¿¡æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯ä¸­å¿ƒæ—¶ï¼Œå…¶æ¶ˆè´¹æµç¨‹å¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d27f5e23855b4241a65f06448b3ca188><p class=pgc-img-caption></p></div><ul><li><strong>æ¶ˆæ¯ä¸šåŠ¡å¤„ç†ç¼–ç </strong></li></ul><p><strong>BaseMessageServiceï¼šæ¶ˆæ¯ä¸šåŠ¡æ¶ˆè´¹æŠ½è±¡æ¥å£ï¼ŒæŠ½è±¡æ¯ä¸ªæ¶ˆè´¹è€…(Listener)è°ƒç”¨çš„ä¸šåŠ¡æ¶ˆè´¹æ–¹æ³•</strong></p><pre><code>public interface BaseMessageService&lt;T extends BaseMessage&gt; {    /**     * æ¶ˆè´¹æ¶ˆæ¯     *     * @param message         æ¶ˆæ¯     * @param consumeFunction æ¶ˆè´¹æ–¹æ³•     */    default boolean consume(T message, Function&lt;T, Boolean&gt; consumeFunction) {        return consumeFunction.apply(message);    }}</code></pre><p><strong>BaseMessageServiceï¼šçŸ­ä¿¡æ¶ˆæ¯ä¸šåŠ¡æŠ½è±¡æ¥å£</strong></p><pre><code>@Servicepublic interface SmsMessageService extends BaseMessageService&lt;SmsMessage&gt; {    /**     * å‘é€å•æ¡çŸ­ä¿¡æ¶ˆæ¯     *     * @param smsMessage     * @return ä¸šåŠ¡å¤„ç†ç»“æœ     */    boolean sendSingle(SmsMessage smsMessage);}</code></pre><p><strong>SmsMessageServiceImplï¼šçŸ­ä¿¡æ¶ˆæ¯ä¸šåŠ¡å®ç°ç±»</strong></p><pre><code>@Service@Slf4jpublic class SmsMessageServiceImpl implements SmsMessageService {    @Override    public boolean sendSingle(SmsMessage smsMessage) {        // çŸ­ä¿¡ä¸šåŠ¡æ“ä½œç»“æœ        boolean isSuccess = true;        /*         * çŸ­ä¿¡ä¸šåŠ¡æ“ä½œå¹¶æŠŠæ“ä½œç»“æœè®¾åˆ°isSuccessä¸­         */        if (Objects.equals(smsMessage.getToUserId(), "Wilson")) {            isSuccess = false;            log.info("çŸ­ä¿¡å‘é€å¤±è´¥,æ¶ˆæ¯å†…å®¹:{}", smsMessage);        }        return isSuccess;    }}</code></pre><ul><li><strong>æ¶ˆæ¯ä¸šåŠ¡å¤„ç†ç¼–ç </strong></li></ul><p><strong>MessageLogConstantï¼šç»´æŠ¤MessageLogçš„ç›¸å…³å¸¸é‡(å¦‚ä¸åŒæ¶ˆæ¯çš„collectionå)</strong></p><pre><code>public interface MessageLogConstant {    /**     * å„æ¶ˆæ¯æ—¥å¿—Mongoé›†åˆå     */    interface CollectionName {        String SMS = "sms_message_log";        String MAIL = "mail_message_log";    }}</code></pre><p><strong>AbstractMQStoreListenerï¼šä¿è¯æ¶ˆæ¯å¹‚ç­‰æ€§ã€æ¶ˆæ¯æ—¥å¿—å…¥åº“æ“ä½œçš„æŠ½è±¡Listenerç±»æ–¹æ³•ä¸­</strong></p><pre><code></code></pre><p><strong>SmsMessageListener:çŸ­ä¿¡æ¶ˆæ¯ç›‘å¬å™¨(æ¶ˆè´¹è€…)ï¼Œå¦‚åœ¨æ¶ˆè´¹è¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼ŒRocketMQä¼šä»¥ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œé‡æ–°æŠ•é€’æ¶ˆè´¹</strong></p><pre><code>@Slf4j@Service@ConditionalOnProperty(MessageConstant.Topic.SMS_TOPIC)@RocketMQMessageListener(topic = MessageConstant.Topic.SMS_TOPIC_TEMPLATE, consumerGroup = MessageConstant.Consumer.SMS_GROUP_TEMPLATE)public class SmsMessageListener extends AbstractMQStoreListener implements RocketMQListener&lt;MessageExt&gt; {    @Resource    private SmsMessageService smsMessageService;    private static final String EXCEPTION_FORMAT = "çŸ­ä¿¡æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œæ¶ˆæ¯å†…å®¹ï¼š%s";    @Override    public void onMessage(MessageExt message) {        String msgId = message.getMsgId();        if (isConsumed(msgId)) {            return;        }        SmsMessage smsMessage = JSONObject.parseObject(message.getBody(), SmsMessage.class);        log.info("æ¥æ”¶åˆ°çŸ­ä¿¡æ¶ˆæ¯{}ï¼š{}", msgId, smsMessage);        /*if (Objects.equals(smsMessage.getToUserId(), "2020")) {            log.error("æ¶ˆæ¯{}æ¶ˆè´¹å¤±è´¥", message.getMsgId());            // æŠ›å‡ºå¼‚å¸¸è®©RocketMQé‡æ–°æŠ•é€’æ¶ˆæ¯é‡æ–°æ¶ˆè´¹            throw new MQConsumeException(String.format(EXCEPTION_FORMAT, smsMessage));        }*/        boolean isSuccess = smsMessageService.consume(smsMessage, smsMessageService::sendSingle);        if (!isSuccess) {            log.info("çŸ­ä¿¡æ¶ˆæ¯ä¸šåŠ¡æ“ä½œå¤±è´¥,æ¶ˆæ¯id: {}", msgId);        }        // ä¿å­˜æ¶ˆæ¯æ¶ˆè´¹è®°å½•        store(isSuccess, msgId, smsMessage);    }    @Override    protected String collection() {        return MessageLogConstant.CollectionName.SMS;    }}</code></pre><p><strong>MessageCenterApplication:ä¸»ç¨‹åº</strong></p><pre><code>@SpringBootApplication@EnableDiscoveryClientpublic class MessageCenterApplication {    public static void main(String[] args) {        SpringApplication.run(MessageCenterApplication.class, args);    }}</code></pre><p><strong>Spring Cloudé…ç½®æ–‡ä»¶bootstrap.yml</strong></p><pre><code>eureka:  client:    service-url:      defaultZone: http://localhost:8000/eurekaspring:  cloud:    config:      discovery:        enabled: true        service-id: config-center      #     èµ„æºæ–‡ä»¶å      profile: dev      name: rocketmq</code></pre><p><strong>SmsSendTestï¼šå•å…ƒæµ‹è¯•ç±»</strong></p><pre><code></code></pre><ul><li><strong>é…ç½®ä¸­å¿ƒ(config-server)</strong></li></ul><p>ä¸»ç¨‹åºConfigServerApplication</p><pre><code>@SpringBootApplication@EnableDiscoveryClient@EnableConfigServerpublic class ConfigServerApplication {   public static void main(String[] args) {      SpringApplication.run(ConfigServerApplication.class, args);   }}</code></pre><p>Spring Cloudé…ç½®æ–‡ä»¶bootstrap.yml:</p><pre><code>spring:  cloud:    config:      server:        git:          uri: https://gitee.com/Wilson-He/rocketmq-message-center-demo.git          username: Wilson-He          force-pull: true          password:          # é…ç½®æ–‡ä»¶åœ¨uriä¸‹çš„ç›®å½•          search-paths: /config-server-propertieseureka:  client:    service-url:      defaultZone: http://localhost:8000/eureka</code></pre><p>é…ç½®æ–‡ä»¶configs-server-properties/rocketmq-dev.properties:</p><pre><code>rocketmq.name-server=127.0.0.1:9876rocketmq.topic.sms=sms-topicrocketmq.producer.group.sms=sms-grouprocketmq.consumer.group.sms=sms-grouprocketmq.topic.mail=mail-topicrocketmq.producer.group.mail=mail-grouprocketmq.consumer.group.mail=mail-group</code></pre><h1 class=pgc-h-arrow-right>è¿è¡Œæµç¨‹</h1><ol start=1><li>è¿è¡ŒRocketMQ name-serverä¸broker,å¦‚mqnamesrv -n 127.0.0.1:9876,mqbroker -n 127.0.0.1:9876</li><li>è¿è¡Œeurekaåº”ç”¨</li><li>è¿è¡Œé…ç½®ä¸­å¿ƒconfig-server</li><li>è¿è¡Œæ¶ˆæ¯ä¸­å¿ƒmessage-center</li><li>è¿è¡Œmessage-centerå•å…ƒæµ‹è¯•ç±»(SmsSendTest)æˆ–è¿è¡Œquestion-appè®¿é—®localhost:8080/question/toUser?userId=xxxè¿›è¡Œæ¶ˆè´¹æµ‹è¯•ï¼Œæ¶ˆæ¯ä¸­å¿ƒæ§åˆ¶å°æ‰“å°å‡ºæ—¥å¿—ä¿¡æ¯ä¸Mongo sms_message_logæˆåŠŸæ–°å¢äº†æ•°æ®å³é¡¹ç›®æ­å»ºå®Œæˆ</li></ol><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/38b7fd8074e54102ac5ce22ef4ca4097><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="èŠèŠMQä¸å¦‚ä½•åŸºäºSpring Boot RocketMQæ­å»ºä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/147ea557bbc840b780259c110753ac5c><p class=pgc-img-caption></p></div><p><strong>(å¾…)æ‰©å±•ç‚¹ï¼š</strong></p><ol start=1><li>RocketMQçš„å‘é€è€…åº”ç”¨å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®rocketmq.producer.retry-times-when-send-failed/retry-times-when-send-async-failedå±æ€§é…ç½®rocketmqåŒæ­¥/å¼‚æ­¥å‘é€æ¶ˆæ¯å¤±è´¥åçš„é‡è¯•æ¬¡æ•°ï¼Œä¸è®¾ç½®åˆ™é»˜è®¤éƒ½ä¸º2</li><li>å½“ä¸šåŠ¡æ‰§è¡Œæ“ä½œç»“æœå¤±è´¥æ—¶ä»ç„¶å…¥åº“çš„åŸå› æ˜¯æœ‰æ—¶ä¸šåŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šåŒ…å«è°ƒç”¨ç¬¬ä¸‰æ–¹çš„æ“ä½œï¼Œå½“ç¬¬ä¸‰æ–¹æŠ¥é”™æ—¶ä¼šå¯¼è‡´ä¸šåŠ¡æ“ä½œç»“æœå¤±è´¥ï¼Œè€Œç¬¬ä¸‰æ–¹çš„æ“ä½œæ˜¯ä¸å¯æ§çš„ï¼Œæ‰€ä»¥å…ˆæŠŠæŠ¥é”™ç»“æœä¿å­˜ä¾¿äºè¿½æº¯ï¼Œä¸”æœ‰ä¸šåŠ¡éœ€è¦æ—¶ä¹Ÿå¯é€šè¿‡å®šæ—¶ä»»åŠ¡æŸ¥åº“é‡æ–°æ‰§è¡Œä¸šåŠ¡</li><li>è¯¥ä¾‹å­ä¸­åªç”¨äº†ä¸€ä¸ªæ¶ˆæ¯é…ç½®æ–‡ä»¶ï¼Œå®é™…å¼€å‘ä¸­æ¶ˆæ¯é…ç½®éœ€æ ¹æ®é¡¹ç›®æ‰€éœ€é…ç½®åˆ°å¯¹åº”çš„é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œå¦‚question-appçš„æ¶ˆæ¯é…ç½®(å¦‚topcã€producerGroup)åº”åœ¨å…¶é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶(å¦‚application.ymlã€apolloçš„namespace)ä¸­é…ç½®</li><li>è¯¥é¡¹ç›®ä¸­çš„NameServerã€Brokerå¹¶æ²¡æœ‰é›†ç¾¤éƒ¨ç½²ï¼ŒBrokeré›†ç¾¤éƒ¨ç½²åé…ç½®åŒæ­¥åŒå†™é¿å…ä¸»æœºå†™å…¥åå°šæœªåŒæ­¥åˆ°ä»æœºå°±å®•æœºå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µ(æœ‰æ„å‘çš„è‡ªè¡Œç™¾åº¦ï¼šRocketMQ åŒæ­¥åŒå†™)</li></ol><h1 class=pgc-h-arrow-right>æœ«</h1><p>è¯¥æ–‡ç« é€šè¿‡ä¸€ä¸ªç®€å•çš„é¡¹ç›®ä¾‹å­æ¼”ç¤ºäº†ä½¿ç”¨Spring Boot RocketMQå¤„ç†MQå¸¸è§é—®é¢˜çš„ä¸€äº›æ–¹å¼ï¼š</p><ul><li>æ¶ˆæ¯é‡å¤æ¶ˆè´¹é—®é¢˜å¯é€šè¿‡æ•°æ®åº“å­˜å‚¨æ¥ä¿è¯å¹‚ç­‰æ€§</li><li>è‹¥æ¶ˆæ¯æ¶ˆè´¹ä¸šåŠ¡æ“ä½œå¤±è´¥æ—¶å¯é€šè¿‡ListeneræŠ›å‡ºå¼‚å¸¸è®©RocketMQé‡æ–°æŠ•é€’æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹</li></ul><p>è¯¥é¡¹ç›®ä¾‹å­å¯é€šè¿‡ä¸ªäººgithub/gitee(github|gitee.com/wilson-he/rocketmq-message-center-demo)æŸ¥çœ‹</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'MQ','Spring','Boot'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>