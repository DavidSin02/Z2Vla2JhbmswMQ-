<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 | 极客快訊</title><meta property="og:title" content="没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/2d906b089a5b448f9cc8c13c1031d4c0"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><meta property="article:published_time" content="2020-11-14T20:59:17+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:17+08:00"><meta name=Keywords content><meta name=description content="没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/27147bdc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>接口（interface）定义了一个对象的行为规范，只定义规范不实现，由具体的对象来实现规范的细节。</p><h1><strong>接口</strong></h1><p><strong>接口类型</strong></p><p>在Go语言中接口（interface）是一种类型，一种抽象的类型。</p><p>interface是一组method的集合，是duck-type programming的一种体现。接口做的事情就像是定义一个协议（规则），只要一台机器有洗衣服和甩干的功能，我就称它为洗衣机。不关心属性（数据），只关心行为（方法）。</p><p>为了保护你的Go语言职业生涯，请牢记接口（interface）是一种类型。</p><p><strong>为什么要使用接口</strong></p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2d906b089a5b448f9cc8c13c1031d4c0><p class=pgc-img-caption></p></div><p>上面的代码中定义了猫和狗，然后它们都会叫，你会发现main函数中明显有重复的代码，如果我们后续再加上猪、青蛙等动物的话，我们的代码还会一直重复下去。那我们能不能把它们当成“能叫的动物”来处理呢？</p><p>像类似的例子在我们编程过程中会经常遇到：</p><p>比如一个网上商城可能使用支付宝、微信、银联等方式去在线支付，我们能不能把它们当成“支付方式”来处理呢？</p><p>比如三角形，四边形，圆形都能计算周长和面积，我们能不能把它们当成“图形”来处理呢？</p><p>比如销售、行政、程序员都能计算月薪，我们能不能把他们当成“员工”来处理呢？</p><p>Go语言中为了解决类似上面的问题，就设计了接口这个概念。接口区别于我们之前所有的具体类型，接口是一种抽象的类型。当你看到一个接口类型的值时，你不知道它是什么，唯一知道的是通过它的方法能做什么。</p><p><strong>接口的定义</strong></p><p>Go语言提倡面向接口编程。</p><p>每个接口由数个方法组成，接口的定义格式如下：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e085341f000f421f8384f4407e1d0178><p class=pgc-img-caption></p></div><p>其中：</p><ul><li>接口名：使用type将接口定义为自定义的类型名。Go语言的接口在命名时，一般会在单词后面添加er，如有写操作的接口叫Writer，有字符串功能的接口叫Stringer等。接口名最好要能突出该接口的类型含义。</li><li>方法名：当方法名首字母是大写且这个接口类型名首字母也是大写时，这个方法可以被接口所在的包（package）之外的代码访问。</li><li>参数列表、返回值列表：参数列表和返回值列表中的参数变量名可以省略。</li></ul><p>举个例子：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/05313d425039478082e7e559a4d59bb6><p class=pgc-img-caption></p></div><p>当你看到这个接口类型的值时，你不知道它是什么，唯一知道的就是可以通过它的Write方法来做一些事情。</p><p><strong>实现接口的条件</strong></p><p>一个对象只要全部实现了接口中的方法，那么就实现了这个接口。换句话说，接口就是一个<strong>需要实现的方法列表</strong>。</p><p>我们来定义一个Sayer接口：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/01b72a4830924ffb8533f1d7ee028201><p class=pgc-img-caption></p></div><p>定义dog和cat两个结构体：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/27e7d7f560624c7e86773d632da219d8><p class=pgc-img-caption></p></div><p>因为Sayer接口里只有一个say方法，所以我们只需要给dog和cat 分别实现say方法就可以实现Sayer接口了。</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/11c8404154a447ec8aa639942a364f24><p class=pgc-img-caption></p></div><p>接口的实现就是这么简单，只要实现了接口中的所有方法，就实现了这个接口。</p><p><strong>接口类型变量</strong></p><p>那实现了接口有什么用呢？</p><p>接口类型变量能够存储所有实现了该接口的实例。 例如上面的示例中，Sayer类型的变量能够存储dog和cat类型的变量。</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/88917c4e65454dc8b2cb292ed4a9334c><p class=pgc-img-caption></p></div><p><strong>值接收者和指针接收者实现接口的区别</strong></p><p>使用值接收者实现接口和使用指针接收者实现接口有什么区别呢？接下来我们通过一个例子看一下其中的区别。</p><p>我们有一个Mover接口和一个dog结构体。</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5c54ab9cadba4f90a6792e410520838f><p class=pgc-img-caption></p></div><p><strong>值接收者实现接口</strong></p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/101caab6b47744aa98cdb1f0f4315ad9><p class=pgc-img-caption></p></div><p>此时实现接口的是dog类型：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1d3c3bf3c0754c119f72a54bcd1546f3><p class=pgc-img-caption></p></div><p>从上面的代码中我们可以发现，使用值接收者实现接口之后，不管是dog结构体还是结构体指针*dog类型的变量都可以赋值给该接口变量。因为Go语言中有对指针类型变量求值的语法糖，dog指针fugui内部会自动求值*fugui。</p><p><strong>指针接收者实现接口</strong></p><p>同样的代码我们再来测试一下使用指针接收者有什么区别：</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c69a4b0f3f004f4a94854208d0887636><p class=pgc-img-caption></p></div><p>此时实现Mover接口的是*dog类型，所以不能给x传入dog类型的wangcai，此时x只能存储*dog类型的值。</p><p><strong>面试题</strong></p><p>请问下面的代码是否能通过编译？</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a3433f19b034379b3319b5b9fb4d65e><p class=pgc-img-caption></p></div><p><strong>类型与接口的关系</strong></p><p><strong>一个类型实现多个接口</strong></p><p>一个类型可以同时实现多个接口，而接口间彼此独立，不知道对方的实现。 例如，狗可以叫，也可以动。我们就分别定义Sayer接口和Mover接口，如下： Mover接口。</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4da6a28ffa39402ab0bee843950c2165><p class=pgc-img-caption></p></div><p>dog既可以实现Sayer接口，也可以实现Mover接口。</p><div class=pgc-img><img alt=没掌握这个知识点，你的Go语言基础是不扎实的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4e48a59876a245129e4265bfb8c0edba><p class=pgc-img-caption></p></div><blockquote><p>原文链接：https://www.liwenzhou.com/posts/Go/12_interface/</p><p>本文作者：李文周</p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'这个','知识点','Go'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>