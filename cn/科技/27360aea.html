<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>可编程控制器RS485通信接口防护设计 | 极客快訊</title><meta property="og:title" content="可编程控制器RS485通信接口防护设计 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/b9c700df44cb414e9183fffb278b09ff"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27360aea.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27360aea.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27360aea.html><meta property="article:published_time" content="2020-10-29T21:11:31+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:31+08:00"><meta name=Keywords content><meta name=description content="可编程控制器RS485通信接口防护设计"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/27360aea.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>可编程控制器RS485通信接口防护设计</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><strong>可编程控制器RS485通信接口防护设计</strong></p><p><strong>罗伯特侯</strong></p><p>这是我多年前发表的一篇论文，分享给大家！</p><p><strong>摘 要</strong></p><p>本文主要阐述了可编程控制器RS485通信接口几种防护设计方法。文章首先分析国家标准，确定可编程控制器RS485抗干扰设计指标，然后依据指标提出针对性的抗干扰设计，同时进行了搭接防护设计，最后通过测试对设计进行了验证。</p><p><strong>1 引言</strong></p><p>RS485是工业控制系统最常用的一种现场总线，也是可编程控制器（PLC）产品最常见的通信接口。</p><p>工业现场充斥着各类干扰噪声，如静电、雷击（直接雷、感应雷）、高频电磁辐射、传导干扰等等。RS485通信接口是可编程控制器与其他设备的数据交换接口，对系统正常运行至关重要。RS485通信线缆一般走线很长，容易感应工业现场各类干扰信号。因此，RS485通信接口抗干扰性能关系到可编程控制器甚至整个控制系统的可靠性。</p><p>同时，在布线或运行过程中，由于接线错误或故障等原因，有一定概率会出现RS485通信线与220V/380V电力线搭接的状况。确保可编程控制器在此类状况下不出现损坏（排除故障后RS485可正常通信），可提高产品容错能力及健壮性，为客户创造价值。</p><p><strong>2可编程控制器抗EMC指标</strong></p><p>可编程控制器产品国家标准GB/T 15969.2-2008(可编程控制器第2部分：设备要求和测试)，根据电源配电、输入输出接线等因素将工厂环境划分为3个EMC抗干扰区。区域划分如图1所示。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b9c700df44cb414e9183fffb278b09ff><p class=pgc-img-caption>图1 EMC抗干扰区划分示意图</p></div><p>3个EMC抗干扰区分别为A区、B区和C区，干扰由弱到强。其中，C区为工厂电网（通过专用变压器与公共电网隔离），第1级浪涌保护和严酷的干扰耦合；B区为专用配电，第2级浪涌保护和中等等级的耦合工业干扰；A区为本地配电，（第3级）保护，I/O阻抗限制和低等级耦合干扰。</p><p>可编程控制器应用场合为A区或B区，因此产品应符合B区（包含A区）的抗EMC要求。</p><p>根据该标准规定，B区场合下，可编程控制器的RS485通信接口需满足的主要EMC指标如表1所示。</p><p>表1 可编程控制器RS485口主要EMC指标</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6f4ec570b9cd456aa8bd1fc8417cb8bc><p class=pgc-img-caption></p></div><p><strong>3防静电措施</strong></p><p>静电放电(ESD)是指两个具有不同静电电位的物体，由于直接接触或静电感应而引起的两物体间静电电荷的转移。当静电能量达到一定程度后，击穿其间介质而进行放电的现象。RS485通信接口A,B接线端子为操作者可触碰的金属部件，具有产生静电放电的可能性。</p><p>RS485通信接口防静电采取在A，B通信线上并联齐纳二极管的措施。静电放电时，齐纳二极管快速击穿，将电压钳位在安全范围，阻断静电高压损坏芯片。</p><p>在设计中选取了一款内置齐纳二极管的RS485芯片，标称ESD防护能力达到16kV（HBM），满足设计需求。</p><p><strong>4防浪涌设计</strong></p><p>浪涌分为共模和差模。共模浪涌防护措施有旁路和隔离两种；差模浪涌防护措施主要是旁路。</p><p>共模浪涌旁路防护是指在RS485信号线与大地之间并联放电管，将浪涌干扰旁路到大地；共模浪涌隔离防护是指采取光耦隔离等隔离方式将RS485参考地与大地隔离开来，达到阻断共模浪涌电流的目的。由于隔离方式还具备抑制其他类型共模干扰作用，因此本设计采取隔离方式进行共模浪涌抑制。差模浪涌防护采用瞬态二极管（TVS管）。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8f00569726c2406f9b44e3eec38ff90c><p class=pgc-img-caption>图2 RS485防浪涌电路示意图</p></div><p>RS485防浪涌电路示意图如图2所示。图中， RS485收发器， MCU的3路信号线RXD、TXD、RTCTL(收发控制信号)，均经过光耦进行电气隔离。光耦使得RS485工作电源与大地进行了电气隔离，实现了电气悬浮。共模浪涌是施加在信号线与大地之间的浪涌信号。当RS485通信信号线A、B上产生对大地的共模浪涌干扰噪声时，隔离将阻断共模电流的形成，从而达到保护电子电路的效果。根据可编程控制器RS485防共模浪涌1kV的指标，设计中选取的光耦和隔离电源模块隔离电压均大于1kV，并且PCB布线时，隔离电气信号距离要足够远。</p><p>瞬态抑制二极管（TVS），与限流电阻共同作用，起到抑制差模浪涌的作用。当信号线上接入差模浪涌信号时，TVS管迅速（ns级）被击穿，从而将差模浪涌信号钳位在较低的安全电平，起到对内部电路保护的目的。2个限流电阻用于限制TVS管电流，使其不会因过流而损坏。设计中采用的TVS管规格为6.8V，600W ，限流电阻可选取阻值为10欧姆、额定功率为1W的绕线电阻（额定功率过小容易被烧断）。</p><p><strong>5故障保护设计</strong></p><p>故障保护是指为处于故障（开路）状态或接收闲置状态的RS485总线提供差分电压的技术，其目的是让RS485总线收发器的接收机输出维持在逻辑高电平状态。</p><p>RS485总线为差分信号驱动，当AB间压差大于200mV时，接收器输出为高；当AB间压差小于-200mV时，接收器输出为低；当AB间压差处于-200mV~200mV时，接收器输出状态不定。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/38d048fac59347cb8f2ff98ac1dab99f><p class=pgc-img-caption>图3 RS485故障保护电路</p></div><p>故障保护电路设计如图3所示。为达到故障保护的目的，将A通过上来电阻上拉到高电平，并将B通过下来电阻下拉到地。上拉电阻与下来电阻一般取相同阻值，阻值有一定要求，需使得在AB端接120欧姆匹配电阻状况下，总线空闲时AB端压差依然大于200mV。上下拉电阻阻值应满足公式1的要求。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f3499d95acba4de187e6cc718ce7ea98><p class=pgc-img-caption></p></div><p>公式中：</p><p>R为上下拉电阻阻值；</p><p>RT为外接匹配电阻阻值；</p><p>V为上拉高电平电压值；</p><p>设计中，取RT为120欧姆，V为5V（5000mV），带入公式计算得出R&lt;1440欧姆。因此，实际应用中选取上拉电阻及下拉电阻阻值为1.2K欧姆。</p><p><strong>6防搭接设计</strong></p><p>RS485总线，由于布线错误或线路故障等因素，有可能与220V/380V电力线搭接。为防止搭接状况下损坏设备，需进行防护设计。</p><p>RS485防搭接设计如图4所示。图4的设计将图3中的限流电阻改为PTC自恢复保险丝。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/26af2cd615464d1c8f94946a5b38a106><p class=pgc-img-caption>图4 RS485防搭接电路图</p></div><p>当A、B信号线搭接在电力线上时，引入的高压通过PTC、TVS形成回路，TVS两端电压被钳位，RS485收发器得以被保护。同时，PTC阻值会迅速增大，限制回路电流值，起到保护TVS的作用。当故障排除后，PTC恢复正常值，RS485仍可正常通信。设计中PTC选用动作电流100mA，抗380过电压PTC自恢复保险丝。</p><p><strong>7 最终电路设计</strong></p><p>图5为最终设计电路图，具有静电防护、浪涌防护和380V搭接防护能力。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5dd2d1b15d674667b60af6e0f6838809><p class=pgc-img-caption>图5 RS485最终电路图</p></div><p><strong>8测试结果</strong></p><p>针对设计完成的可编程控制器RS485口进行了静电放电及浪涌测试，测试结果如下表2所示。测试结果证明，设计达到指标要求。</p><p>表2 可编程控制器RS485口测试结果表</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/277cea150dce499f92a43c5641c521c3><p class=pgc-img-caption></p></div><p>故障保护功能测试也证明故障保护设计是有效的，当A、B通信线悬空，RS485处于接收状态时，接收机稳定在高电平，MCU不会接收到乱码数据。即使外部端接120欧姆匹配电阻后，功能依然正常。</p><div class=pgc-img><img alt=可编程控制器RS485通信接口防护设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4778c46a59e243d7a77c0fc639cfa6bc><p class=pgc-img-caption>图6 接入380V收发器AB端测试波形</p></div><p>搭接防护功能测试中，可编程控制器断电状态下将A、B信号线直接接入380V交流电，此时RS485收发器AB端波形如图6所示，可见保护电路将接入的高压限制到安全电压范围内。将380V交流电保持5分钟之后去除，然后进行测试（如果能配上测试波形更好）， RS485通信口通信正常。在可编程控制器通电状态下进行相同测试后，RS485口依然通信正常。测试结果证明防搭接设计是非常有效的。</p><p><strong>9 结论</strong></p><p>应用于工业现场的可编程控制器RS485口防护对系统稳定性至关重要。本文针对可编程控制器RS485通信口进行了多项抗干扰设计，并通过测试验证。文中提及的防护设计方法对提高可编程控制器及控制系统可靠性具有重要意义。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'通信接口','编程','RS485'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>