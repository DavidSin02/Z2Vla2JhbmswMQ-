<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>内容流量管理的关键技术：多任务保量优化算法实践 | 极客快訊</title><meta property="og:title" content="内容流量管理的关键技术：多任务保量优化算法实践 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/S7ysQbCsXbZNg"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27d1954.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27d1954.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27d1954.html><meta property="article:published_time" content="2020-10-29T21:00:04+08:00"><meta property="article:modified_time" content="2020-10-29T21:00:04+08:00"><meta name=Keywords content><meta name=description content="内容流量管理的关键技术：多任务保量优化算法实践"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/27d1954.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>内容流量管理的关键技术：多任务保量优化算法实践</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysQbCsXbZNg><p>作者 | 阿里文娱高级算法工程师 雷航</p><p>责编 | 李雪敬</p><p>头图 | CSDN下载自视觉中国</p><p>本文章已被KDD2020录用：</p><p>Hang Lei, Yin Zhao, and LongjunCai. 2020. Multi-objective Optimization for Guaranteed Delivery in VideoService Platform. In Proceedings of the 26th ACM SIGKDD Conference on KnowledgeDiscovery and Data Mining (KDD ’20), August 23–27, 2020, Virtual Event, CA,USA. ACM, New York, NY, USA, 9 pages. https://doi.org/10.1145/3394486.3403352</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT4Gwk56bt5iOJ><p><strong>业务背景</strong></p><p>保量策略对于视频内容来说，是一种很重要的投放策略。新热视频内容都需要增加自身的曝光资源来达到播放量最大化，而各场景（首页、频道页等）的总体资源有限且每个抽屉坑位的日曝光资源有限，因此各内容的曝光资源分配存在竞争问题。另外，不同场景之间相互独立，每个场景根据自身的目标进行效率和体验上的优化，但是场景与场景之间流量协同无法通过优化单一场景来完成。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7ysQbk2KxyOO7><p class=pgc-img-caption>图1 剧集频道页和首页</p><p>为内容分配曝光量涉及到关于曝光和点击建模问题，以及内容的未来点击量预测问题。内容曝光、点击和播放等构成了一个复杂的非线性混沌系统，不仅取决于内容质量本身，也取决于内容更新时间、更新策略和用户点击习惯等。传统的统计预测模型无法阐述外部环境的各种干扰因素以及系统的混沌特性，即无法从机理上描述系统本质。针对此问题，我们首先通过分析新热内容的历史曝光点击日志，使用常微分方程建立了新热内容曝光敏感模型，即 pv-click-ctr 模型（简称 P2C 模型）。在 P2C 模型基础上，结合各场景和抽屉的曝光资源约束，给出一种曝光资源约束下的多目标优化保量框架与算法。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysQc8Dx3TWsI><p class=pgc-img-caption>图2 保量策略框架</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT7S2kzFTfre26><p><strong>内容曝光敏感度模型</strong></p><p>通常情况下，点击 PV（click）随曝光 PV 增大而增大，即高曝光带来高点击。但是，内容消费者数量有限，给同一个消费者针对单一内容重复曝光并不会带来更多的点击量。这种点击“饱和”现象可从内容的历史曝光点击日志观察得到。受此现象启发，我们根据内容曝光 PV 和点击 PV 历史数据特点，建立一种能够描述内容点击量随曝光量变化趋势的常微分方程（Ordinary Differential Equation, ODE）模型，即 pv-click-ctr (P2C) 模型，整体结构如图3所示。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysQcb80pcb2G><p class=pgc-img-caption>图3 P2C 模型整体架构图</p><p>一个内容由于自身因素和外部环境的限制，对应的点击量存在最大值或饱和值 ym。当给定一个曝光量 x 时，存在唯一的点击量 y 和饱和度 k。对于一个点击量 y，饱和度 k 定义为当前点击量和饱和值的差距与饱和值的比值，即</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7ysQd4c1C3pn><p>对于任意一个内容，随着 pv 的增大，click 饱和度减小，且单位 pv 带来的 click 增量（简称 click 增量）与当前 click 比值呈下降趋势。也就是说，click 增量与饱和度存在正相关关系，可用下式表示。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7ysRJOGhow0c7><p>其中，r 为正相关系数。根据式(2)，可以得到 click 随 pv 增长的常微分方程模型。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S7ysRJqI9gXy5T><p>对式(3)分离变量后两端进行积分，可以得到</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysRK842FQZYa><p>其中，x<sub>0</sub>和y<sub>0</sub>分别为初始 pv 和 click。</p><p>对于式子 (4) 中的参数 r 和y<sub>m</sub>，可采用最小二乘法拟合。这里首先需要对历史 pv 和 click 数据以及参数进行过滤和预处理。</p><p>（a）样本点过滤原则。分别在日历史 pv 和 click 数据序列选取最大递增子序列；</p><p>（b）参数预处理。由于点击量饱和值y<sub>m</sub>的数量级通常很大，而相关系数 r 数量级通常很小，为了避免“大数吃小数”的现象，分别对这两个参数进行数据变换，即：y<sub>m</sub>®log10(y<sub>m</sub>)，r ® e<sup>r</sup>；</p><p>（c）样本点预处理。为了避免最小二乘法在拟合参数时陷入局部最优，分别对历史样本（click 值 y，pv 值 x）进行数据变换，即：x ®log10(x)，y ®log10(y)。经过参数拟合过程，可得到单一内容 pv-click 函数关系。进而可进行 pv-click-ctr 预测，这里可采用有限差分的数值解法预测，也可将数据点代入式子(4)预测。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTJXJ1kBqzfCnu><p><strong>保量模型&算法</strong></p><p>基于上一节建立的 P2C 模型，本节任务是在各场景和抽屉曝光资源有限的情况下，给出每个内容近似最优的曝光量。整体方案流程如下图：</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysRKQ424l3Kl><p class=pgc-img-caption>图4 保量模型整体架构图</p><p>第一，基于 pv-click-ctr 预测的常微分方程(ODE) 模型，针对内容池中每个内容，采用最小二乘拟合 ODE 中的两个参数：click 饱和值y<sub>m</sub>和 click 随 pv 的固有增长率 r。从而给出每个内容 pv-click 函数关系；</p><p>第二，基于给定的优化目标和约束条件，可建立 pv 分配的多目标非线性优化模型。在将业务问题抽象为数学模型之前，有必要对模型中的符号进行说明，如下所示：</p><table><tbody><tr><td><div><p>变量</p></div></td><td><div><p>说明</p></div></td></tr><tr><td><div><p>x<sub>ijk</sub></p></div></td><td><div><p>内容i在抽屉j中的坑位k分配到的pv量</p></div></td></tr><tr><td><div><p><em>R</em></p></div></td><td><div><p>所有抽屉的pv总量</p></div></td></tr><tr><td><div><p>r<sub>ij</sub></p></div></td><td><div><p>内容i在抽屉j中click与vv的正相关系数</p></div></td></tr><tr><td><div><p><em>C</em>(<em>S</em><sub>j</sub>)</p></div></td><td><div><p>抽屉j对应的总曝光pv</p></div></td></tr><tr><td><div><p><em>f</em>(·)</p></div></td><td><div><p>P2C模型预测函数</p></div></td></tr></tbody></table><p>表1: 保量模型符号说明</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysRKm2U6SU5b><p>上述模型的优化目标包含两个：多场景 vv 最大化，内容池内容 ctr 方差最小。需要注意的是，这里的 ctr 方差最小是曝光公平的一种形式化描述，用以平衡“过曝光”和“欠曝光”。约束条件分别表示了场景、抽屉、坑位和内容的曝光 PV 约束。由于目标函数我们采用数值方法求解，使得上述优化模型无法运用传统的基于梯度的算法求解。而进化算法提供了一种解决方案，这里选取遗传算法(GA)求解。需要说明的是，GA 中的适应值函数计算采用了 P2C 模型。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7YR5xGDl><p><strong>实验结果</strong></p><p>我们选取多个新热内容，分别给出 P2C 模型的预测效果以及保量模型的离线效果。这里的评估指标是均方根误差 (RMSE) 和绝对误差百分比(APE)。分别采用 P2C 模型和平滑 ctr 方法*预测新热内容的点击量。从表中可以看出 P2C 模型可以有效预测点击量，在 RMSE 方面优于平滑 ctr 方法。</p><p>* Xuerui Wang, Wei Li, Ying Cui, Ruofei Zhang, and Jianchang Mao. 2011.Click through rate estimation for rare events in online advertising. In Onlinemultimedia advertising: Techniques and technologies. IGI Global, 1–12.</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7ysS0aFyw7R3c><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysS1EDr2uJ1G><p>线上实验部分，我们建立了分桶实验。基准桶采用人工策略保量；实验桶采用本文提出的策略，实验过程中关注和对比基准桶和实验桶每日投放效果（CTR方差、策略在场景上的整体CTR等）。以下给出30天和7周的保量效果数据，与人工策略结果对比发现，保量策略在 CTR 方差和场景整体 CTR 方面均有不同程度的提升。特别地，在 CTR 方差方面，保量策略效果非常明显，平均相对提升+50%。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7ysS2CAwIXGUS><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S7ysS3r1hePxKe><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7uHXU5GZc><p><strong>总结&展望</strong></p><p>内容保量策略旨在解决流量资源有限与需求过多之间的矛盾，为各内容提供一种优化的曝光量建议，使得各场景的曝光资源能够产生更大价值。本文针对新热内容的多场景VV保量需求，提出了一种资源约束下的保量模型和算法框架，此框架整体由预测和优化两阶段构成。我们在部分场景进行了离线测试及分桶实验，实验结果反映了本文策略的可行性和有效性。未来需要持续探索和完善的有很多方面，如 PUV 保量、保量冷启动问题等。</p><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R69FpRH4d90a7d><img alt=内容流量管理的关键技术：多任务保量优化算法实践 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S7h2VAK1J5CkCF></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'保量','内容','关键'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>