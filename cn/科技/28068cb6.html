<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®® | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®® - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/35a65c1e6e4b489d9b87fd6e169e8b66"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28068cb6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28068cb6.html><meta property="article:published_time" content="2020-11-14T21:04:17+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:17+08:00"><meta name=Keywords content><meta name=description content="æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®®"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/28068cb6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®®</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ç‚¹å‡»ä¸Šæ–¹ "ç¨‹åºå‘˜å°ä¹"å…³æ³¨, æ˜Ÿæ ‡æˆ–ç½®é¡¶ä¸€èµ·æˆé•¿</p><p>æ¯å¤©å‡Œæ™¨00ç‚¹00åˆ†, ç¬¬ä¸€æ—¶é—´ä¸ä½ ç›¸çº¦</p><p><br></p><p>æ¯æ—¥è‹±æ–‡</p><p>It's so hard to tell someone how you really feel about them when you're too afraid of losing what you already have.</p><p>æœ‰æ—¶å€™ï¼Œè¦å¦ç™½å¯¹æŸä¸ªäººçš„æ„Ÿè§‰çœŸçš„å¤ªéš¾äº†ï¼Œå› ä¸ºå¤ªå®³æ€•è¿ç°åœ¨è¿™ç§å…³ç³»éƒ½å¤±å»ã€‚</p><p><br></p><p>æ¯æ—¥æå¿ƒè¯</p><p>æˆ‘ä»¬ä¸è¦å»åšä¸€ä¸ªå•çº¯ä¼˜ç§€çš„äººï¼Œè€Œæ˜¯è¦å»åšä¸€ä¸ªä¸å¯æ›¿ä»£çš„äººã€‚</p><p>æ¥è‡ªï¼šçˆ±å®è´ä¸¶ | è´£ç¼–ï¼šä¹ä¹<br></p><p>é“¾æ¥ï¼šmy.oschina.net/zhangxufeng/blog/3043768</p><p><div class="pgc-image pgc-card-fixWidth"><div class="pgc-img-wrapper ttcore-relative"><img alt="æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®®" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/35a65c1e6e4b489d9b87fd6e169e8b66></div></div></p><p>ç¨‹åºå‘˜å°ä¹(ID:study_tech)ç¬¬ 829 æ¬¡æ¨æ–‡ å›¾ç‰‡æ¥è‡ªç™¾åº¦</p><p><br></p><p>å¾€æ—¥å›é¡¾ï¼šâ€œå¾®ä¿¡é—å˜±â€åŠŸèƒ½å¼€é€šï¼Œç½‘å‹ä½“éªŒåå‘ç°...å¦‚æœçªç„¶ç¦»ä¸–ï¼Œä½ çš„QQã€æ”¯ä»˜å®ç­‰æ€ä¹ˆåŠï¼Ÿ</p><p><br></p><p>æ­£æ–‡</p><p><br><br></p><p>å…³äºåè®®ï¼Œä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æ˜¯HTTPåè®®ï¼Œä½†æ˜¯åœ¨ä¸€äº›æœåŠ¡äº¤äº’é¢†åŸŸï¼Œå…¶ä½¿ç”¨åˆ™ç›¸å¯¹è¾ƒå°‘ï¼Œä¸»è¦åŸå› æœ‰ä¸‰æ–¹é¢ï¼š</p><p><br></p><ul class=list-paddingleft-2><li><p>HTTPåè®®ä¼šæºå¸¦è¯¸å¦‚headerå’Œcookieç­‰ä¿¡æ¯ï¼Œå…¶æœ¬èº«å¯¹å­—èŠ‚çš„åˆ©ç”¨ç‡ä¹Ÿè¾ƒä½ï¼Œè¿™ä½¿å¾—HTTPåè®®æ¯”è¾ƒè‡ƒè‚¿ï¼Œåœ¨æ‰¿è½½ç›¸åŒä¿¡æ¯çš„æƒ…å†µä¸‹ï¼ŒHTTPåè®®å°†éœ€è¦å‘é€æ›´å¤šçš„æ•°æ®åŒ…ï¼›</p></li><li><p>HTTPåè®®æ˜¯åŸºäºTCPçš„çŸ­è¿æ¥ï¼Œå…¶åœ¨æ¯æ¬¡è¯·æ±‚å’Œå“åº”çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œç”±äºæœåŠ¡çš„äº¤äº’è®¾è®¡ä¸€èˆ¬éƒ½è¦æ±‚èƒ½å¤Ÿæ‰¿è½½é«˜å¹¶å‘çš„è¯·æ±‚ï¼Œå› è€ŒHTTPåè®®è¿™ç§é¢‘ç¹çš„æ¡æ‰‹å’ŒæŒ¥æ‰‹åŠ¨ä½œä¼šæå¤§çš„å½±å“æœåŠ¡ä¹‹é—´äº¤äº’çš„æ•ˆç‡ï¼›</p></li><li><p>æœåŠ¡ä¹‹é—´å¾€å¾€æœ‰ä¸€äº›æ ¹æ®å…¶è‡ªèº«ä¸šåŠ¡ç‰¹æ€§æ‰€ç‹¬æœ‰çš„éœ€æ±‚ï¼Œè€ŒHTTPåè®®æ— æ³•å¾ˆå¥½çš„æœåŠ¡äºè¿™äº›ä¸šåŠ¡éœ€æ±‚ã€‚</p></li></ul><p><br></p><p>åŸºäºä¸Šé¢çš„åŸå› ï¼Œä¸€èˆ¬çš„æœåŠ¡ä¹‹é—´è¿›è¡Œäº¤äº’æ—¶éƒ½ä¼šä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œå¸¸è§çš„æ¡†æ¶ï¼Œè¯¸å¦‚dubboï¼Œkafkaï¼Œzookeeperéƒ½å®ç°äº†ç¬¦åˆå…¶è‡ªèº«ä¸šåŠ¡éœ€æ±‚çš„åè®®ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£å¦‚ä½•ä½¿ç”¨Nettyå®ç°ä¸€æ¬¾è‡ªå®šä¹‰çš„åè®®ã€‚</p><p><br></p><p>1. åè®®è§„å®š</p><p>æ‰€è°“åè®®ï¼Œå…¶æœ¬è´¨å…¶å®å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå°†æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚ï¼Œæˆ–è€…å°†å­—èŠ‚è½¬æ¢ä¸ºæ•°æ®çš„ä¸€ä¸ªè§„èŒƒã€‚ä¸€æ¬¾è‡ªå®šä¹‰åè®®ï¼Œå…¶ä¸€èˆ¬åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ã€‚æ¶ˆæ¯å¤´çš„é•¿åº¦ä¸€èˆ¬æ˜¯å›ºå®šçš„ï¼Œæˆ–è€…è¯´æ˜¯å¯ç¡®å®šçš„ï¼Œå…¶å®šä¹‰äº†æ­¤æ¬¡æ¶ˆæ¯çš„ä¸€äº›å…¬æœ‰ä¿¡æ¯ï¼Œæ¯”å¦‚å½“å‰æœåŠ¡çš„ç‰ˆæœ¬ï¼Œæ¶ˆæ¯çš„sessionIdï¼Œæ¶ˆæ¯çš„ç±»å‹ç­‰ç­‰ï¼›æ¶ˆæ¯ä½“åˆ™ä¸»è¦æ˜¯æ­¤æ¬¡æ¶ˆæ¯æ‰€éœ€è¦å‘é€çš„å†…å®¹ï¼Œä¸€èˆ¬åœ¨æ¶ˆæ¯å¤´çš„æœ€åä¸€å®šçš„å­—èŠ‚ä¸­ä¿å­˜äº†å½“å‰æ¶ˆæ¯çš„æ¶ˆæ¯ä½“çš„é•¿åº¦ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬ä¸ºå½“å‰è‡ªå®šä¹‰åè®®æ‰€åšçš„ä¸€äº›è§„å®šï¼š</p><p><div class="pgc-image pgc-card-fixWidth"><div class="pgc-img-wrapper ttcore-relative"><img alt="æ‰‹æŠŠæ‰‹æ•™ä½  Netty å®ç°è‡ªå®šä¹‰åè®®" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e8c4ecfeb9842d9a4fa960360f7ae3b></div></div></p><p></p><p>ä¸Šè¿°åè®®å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬é™¤äº†å®šä¹‰å¸¸ç”¨çš„è¯·æ±‚å’Œå“åº”æ¶ˆæ¯ç±»å‹ä»¥å¤–ï¼Œè¿˜å®šä¹‰äº†Pingå’ŒPongæ¶ˆæ¯ã€‚Pingå’ŒPongæ¶ˆæ¯çš„ä½œç”¨ä¸€èˆ¬æ˜¯ï¼Œåœ¨æœåŠ¡å¤„äºé—²ç½®çŠ¶æ€è¾¾åˆ°ä¸€å®šæ—¶é•¿ï¼Œæ¯”å¦‚2sæ—¶ï¼Œå®¢æˆ·ç«¯æœåŠ¡ä¼šå‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªPingæ¶ˆæ¯ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªPongæ¶ˆæ¯ï¼Œè¿™æ ·æ‰è¡¨ç¤ºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„è¿æ¥æ˜¯å®Œå¥½çš„ã€‚å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰è¿”å›ç›¸åº”çš„æ¶ˆæ¯ï¼Œå®¢æˆ·ç«¯å°±ä¼šå…³é—­ä¸æœåŠ¡ç«¯çš„è¿æ¥æˆ–è€…æ˜¯é‡æ–°å»ºç«‹ä¸æœåŠ¡ç«¯çš„è¿æ¥ã€‚è¿™æ ·çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥é˜²æ­¢çªç„¶ä¼šäº§ç”Ÿçš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„å¤§é‡äº¤äº’ã€‚</p><p><br></p><p>2. åè®®å®ç°</p><p>é€šè¿‡ä¸Šé¢çš„å®šä¹‰å…¶å®æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ‰€è°“åè®®ï¼Œå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªè§„èŒƒï¼ŒåŸºäºè¿™ä¸ªè§„èŒƒï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¶ˆæ¯è½¬æ¢ä¸ºç›¸åº”çš„å­—èŠ‚æµï¼Œç„¶åç»ç”±TCPä¼ è¾“åˆ°ç›®æ ‡æœåŠ¡ï¼Œç›®æ ‡æœåŠ¡åˆ™ä¹ŸåŸºäºè¯¥è§„èŒƒå°†å­—èŠ‚æµè½¬æ¢ä¸ºç›¸åº”çš„æ¶ˆæ¯ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†ç›¸äº’äº¤æµçš„ç›®çš„ã€‚è¿™é‡Œé¢æœ€é‡è¦çš„ä¸»è¦æ˜¯å¦‚ä½•åŸºäºè¯¥è§„èŒƒå°†æ¶ˆæ¯è½¬æ¢ä¸ºå­—èŠ‚æµæˆ–è€…å°†å­—èŠ‚æµè½¬æ¢ä¸ºæ¶ˆæ¯ã€‚è¿™ä¸€æ–¹é¢ï¼ŒNettyä¸ºæˆ‘ä»¬æä¾›äº†ByteToMessageDecoderå’ŒMessageToByteEncoderç”¨äºè¿›è¡Œæ¶ˆæ¯å’Œå­—èŠ‚æµçš„ç›¸äº’è½¬æ¢ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†å¦‚ä¸‹æ¶ˆæ¯å®ä½“ï¼š</p><p>public class Message {<br>private int magicNumber;<br>private byte mainVersion;<br>private byte subVersion;<br>private byte modifyVersion;<br>private String sessionId;<br><br>private MessageTypeEnum messageType;<br>private Map&lt;String, String> attachments = new HashMap&lt;>();<br>private String body;<br><br>public Map&lt;String, String> getAttachments() {<br>return Collections.unmodifiableMap(attachments);<br>}<br><br>public void setAttachments(Map&lt;String, String> attachments) {<br>this.attachments.clear();<br>if (null != attachments) {<br>this.attachments.putAll(attachments);<br>}<br>}<br><br>public void addAttachment(String key, String value) {<br>attachments.put(key, value);<br>}<br><br>// getter and setter...<br>}<br></p><p>ä¸Šè¿°æ¶ˆæ¯ä¸­ï¼Œæˆ‘ä»¬å°†åè®®ä¸­æ‰€è§„å®šçš„å„ä¸ªå­—æ®µéƒ½è¿›è¡Œäº†å®šä¹‰ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªæ ‡å¿—æ¶ˆæ¯ç±»å‹çš„æšä¸¾MessageTypeEnumï¼Œå¦‚ä¸‹æ˜¯è¯¥æšä¸¾çš„æºç ï¼š</p><p>public enum MessageTypeEnum {<br>REQUEST((byte)1), RESPONSE((byte)2), PING((byte)3), PONG((byte)4), EMPTY((byte)5);<br><br>private byte type;<br><br>MessageTypeEnum(byte type) {<br>this.type = type;<br>}<br><br>public int getType() {<br>return type;<br>}<br><br>public static MessageTypeEnum get(byte type) {<br>for (MessageTypeEnum value : values()) {<br>if (value.type == type) {<br>return value;<br>}<br>}<br><br>throw new RuntimeException("unsupported type: " + type);<br>}<br>}<br></p><p>ä¸Šè¿°ä¸»è¦æ˜¯å®šä¹‰äº†æè¿°è‡ªå®šä¹‰åè®®ç›¸å…³çš„å®ä½“å±æ€§ï¼Œå¯¹äºæ¶ˆæ¯çš„ç¼–ç ï¼Œæœ¬è´¨å°±æ˜¯ä¾æ®ä¸Šè¿°åè®®æ–¹å¼å°†æ¶ˆæ¯å®ä½“è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œå¦‚ä¸‹æ˜¯è½¬æ¢å­—èŠ‚æµçš„ä»£ç ï¼š</p><p>public class MessageEncoder extends MessageToByteEncoder&lt;Message> {<br><br>@Override<br>protected void encode(ChannelHandlerContext ctx, Message message, ByteBuf out) {<br>// è¿™é‡Œä¼šåˆ¤æ–­æ¶ˆæ¯ç±»å‹æ˜¯ä¸æ˜¯EMPTYç±»å‹ï¼Œå¦‚æœæ˜¯EMPTYç±»å‹ï¼Œåˆ™è¡¨ç¤ºå½“å‰æ¶ˆæ¯ä¸éœ€è¦å†™å…¥åˆ°ç®¡é“ä¸­<br>if (message.getMessageType() != MessageTypeEnum.EMPTY) {<br>out.writeInt(Constants.MAGIC_NUMBER); // å†™å…¥å½“å‰çš„é­”æ•°<br>out.writeByte(Constants.MAIN_VERSION); // å†™å…¥å½“å‰çš„ä¸»ç‰ˆæœ¬å·<br>out.writeByte(Constants.SUB_VERSION); // å†™å…¥å½“å‰çš„æ¬¡ç‰ˆæœ¬å·<br>out.writeByte(Constants.MODIFY_VERSION); // å†™å…¥å½“å‰çš„ä¿®è®¢ç‰ˆæœ¬å·<br>if (!StringUtils.hasText(message.getSessionId())) {<br>// ç”Ÿæˆä¸€ä¸ªsessionIdï¼Œå¹¶å°†å…¶å†™å…¥åˆ°å­—èŠ‚åºåˆ—ä¸­<br>String sessionId = SessionIdGenerator.generate();<br>message.setSessionId(sessionId);<br>out.writeCharSequence(sessionId, Charset.defaultCharset());<br>}<br><br>out.writeByte(message.getMessageType().getType()); // å†™å…¥å½“å‰æ¶ˆæ¯çš„ç±»å‹<br>out.writeShort(message.getAttachments().size()); // å†™å…¥å½“å‰æ¶ˆæ¯çš„é™„åŠ å‚æ•°æ•°é‡<br>message.getAttachments().forEach((key, value) -> {<br>Charset charset = Charset.defaultCharset();<br>out.writeInt(key.length()); // å†™å…¥é”®çš„é•¿åº¦<br>out.writeCharSequence(key, charset); // å†™å…¥é”®æ•°æ®<br>out.writeInt(value.length()); // å¸Œå°”å€¼çš„é•¿åº¦<br>out.writeCharSequence(value, charset); // å†™å…¥å€¼æ•°æ®<br>});<br><br>if (null == message.getBody()) {<br>out.writeInt(0); // å¦‚æœæ¶ˆæ¯ä½“ä¸ºç©ºï¼Œåˆ™å†™å…¥0ï¼Œè¡¨ç¤ºæ¶ˆæ¯ä½“é•¿åº¦ä¸º0<br>} else {<br>out.writeInt(message.getBody().length());<br>out.writeCharSequence(message.getBody(), Charset.defaultCharset());<br>}<br>}<br>}<br>}<br></p><p>å¯¹äºæ¶ˆæ¯çš„è§£ç ï¼Œå…¶è¿‡ç¨‹ä¸ä¸Šé¢çš„æ¶ˆæ¯ç¼–ç æ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œä¸»è¦æ˜¯åŸºäºåè®®æ‰€è§„å®šçš„å°†å­—èŠ‚æµæ•°æ®è½¬æ¢ä¸ºæ¶ˆæ¯å®ä½“æ•°æ®ã€‚å¦‚ä¸‹æ˜¯å…¶è½¬æ¢è¿‡ç¨‹ï¼š</p><p>public class MessageDecoder extends ByteToMessageDecoder {<br><br>@Override<br>protected void decode(ChannelHandlerContext ctx, ByteBuf byteBuf, List&lt;Object> out) throws Exception {<br>Message message = new Message();<br>message.setMagicNumber(byteBuf.readInt()); // è¯»å–é­”æ•°<br>message.setMainVersion(byteBuf.readByte()); // è¯»å–ä¸»ç‰ˆæœ¬å·<br>message.setSubVersion(byteBuf.readByte()); // è¯»å–æ¬¡ç‰ˆæœ¬å·<br>message.setModifyVersion(byteBuf.readByte()); // è¯»å–ä¿®è®¢ç‰ˆæœ¬å·<br>CharSequence sessionId = byteBuf.readCharSequence(<br>Constants.SESSION_ID_LENGTH, Charset.defaultCharset()); // è¯»å–sessionId<br>message.setSessionId((String)sessionId);<br><br>message.setMessageType(MessageTypeEnum.get(byteBuf.readByte())); // è¯»å–å½“å‰çš„æ¶ˆæ¯ç±»å‹<br>short attachmentSize = byteBuf.readShort(); // è¯»å–é™„ä»¶é•¿åº¦<br>for (short i = 0; i &lt; attachmentSize; i++) {<br>int keyLength = byteBuf.readInt(); // è¯»å–é”®é•¿åº¦å’Œæ•°æ®<br>CharSequence key = byteBuf.readCharSequence(keyLength, Charset.defaultCharset());<br>int valueLength = byteBuf.readInt(); // è¯»å–å€¼é•¿åº¦å’Œæ•°æ®<br>CharSequence value = byteBuf.readCharSequence(valueLength, Charset.defaultCharset());<br>message.addAttachment(key.toString(), value.toString());<br>}<br><br>int bodyLength = byteBuf.readInt(); // è¯»å–æ¶ˆæ¯ä½“é•¿åº¦å’Œæ•°æ®<br>CharSequence body = byteBuf.readCharSequence(bodyLength, Charset.defaultCharset());<br>message.setBody(body.toString());<br>out.add(message);<br>}<br>}<br></p><p>å¦‚æ­¤ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰æ¶ˆæ¯ä¸å­—èŠ‚æµçš„ç›¸äº’è½¬æ¢å·¥ä½œå·²ç»å®Œæˆã€‚å¯¹äºæ¶ˆæ¯çš„å¤„ç†ï¼Œä¸»è¦æ˜¯è¦æ ¹æ®æ¶ˆæ¯çš„ä¸åŒç±»å‹ï¼Œå¯¹æ¶ˆæ¯è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚å¯¹äºrequestç±»å‹æ¶ˆæ¯ï¼Œè¦å†™å…¥å“åº”æ•°æ®ï¼Œå¯¹äºpingæ¶ˆæ¯ï¼Œè¦å†™å…¥pongæ¶ˆæ¯ä½œä¸ºå›åº”ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡å®šä¹‰Netty handlerçš„æ–¹å¼å®ç°å¯¹æ¶ˆæ¯çš„å¤„ç†ï¼š</p><p>// æœåŠ¡ç«¯æ¶ˆæ¯å¤„ç†å™¨<br>public class ServerMessageHandler extends SimpleChannelInboundHandler&lt;Message> {<br><br>// è·å–ä¸€ä¸ªæ¶ˆæ¯å¤„ç†å™¨å·¥å‚ç±»å®ä¾‹<br>private MessageResolverFactory resolverFactory = MessageResolverFactory.getInstance();<br><br>@Override<br>protected void channelRead0(ChannelHandlerContext ctx, Message message) throws Exception {<br>Resolver resolver = resolverFactory.getMessageResolver(message); // è·å–æ¶ˆæ¯å¤„ç†å™¨<br>Message result = resolver.resolve(message); // å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†å¹¶è·å–å“åº”æ•°æ®<br>ctx.writeAndFlush(result); // å°†å“åº”æ•°æ®å†™å…¥åˆ°å¤„ç†å™¨ä¸­<br>}<br><br>@Override<br>public void channelRegistered(ChannelHandlerContext ctx) throws Exception {<br>resolverFactory.registerResolver(new RequestMessageResolver()); // æ³¨å†Œrequestæ¶ˆæ¯å¤„ç†å™¨<br>resolverFactory.registerResolver(new ResponseMessageResolver());// æ³¨å†Œresponseæ¶ˆæ¯å¤„ç†å™¨<br>resolverFactory.registerResolver(new PingMessageResolver()); // æ³¨å†Œpingæ¶ˆæ¯å¤„ç†å™¨<br>resolverFactory.registerResolver(new PongMessageResolver()); // æ³¨å†Œpongæ¶ˆæ¯å¤„ç†å™¨<br>}<br>}<br>// å®¢æˆ·ç«¯æ¶ˆæ¯å¤„ç†å™¨<br>public class ClientMessageHandler extends ServerMessageHandler {<br><br>// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæ¨¡æ‹Ÿç”¨æˆ·å‘é€æ¶ˆæ¯<br>private ExecutorService executor = Executors.newSingleThreadExecutor();<br><br>@Override<br>public void channelActive(ChannelHandlerContext ctx) throws Exception {<br>// å¯¹äºå®¢æˆ·ç«¯ï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼Œåœ¨ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹ä¸­æ¨¡æ‹Ÿç”¨æˆ·å‘é€æ•°æ®ç»™æœåŠ¡ç«¯<br>executor.execute(new MessageSender(ctx));<br>}<br><br>/**<br>* è¿™é‡ŒuserEventTriggered()ä¸»è¦æ˜¯åœ¨ä¸€äº›ç”¨æˆ·äº‹ä»¶è§¦å‘æ—¶è¢«è°ƒç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„äº‹ä»¶æ˜¯è¿›è¡Œå¿ƒè·³æ£€æµ‹çš„<br>* pingå’Œpongæ¶ˆæ¯ï¼Œå½“å‰è§¦å‘å™¨ä¼šåœ¨æŒ‡å®šçš„è§¦å‘å™¨æŒ‡å®šçš„æ—¶é—´è¿”å›å†…å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰è¢«è¯»å–æ¶ˆæ¯æˆ–è€…æ²¡æœ‰å†™å…¥<br>* æ¶ˆæ¯åˆ°ç®¡é“ï¼Œåˆ™ä¼šè§¦å‘å½“å‰æ–¹æ³•<br>*/<br>@Override<br>public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception {<br>if (evt instanceof IdleStateEvent) {<br>IdleStateEvent event = (IdleStateEvent) evt;<br>if (event.state() == IdleState.READER_IDLE) {<br>// ä¸€å®šæ—¶é—´å†…ï¼Œå½“å‰æœåŠ¡æ²¡æœ‰å‘ç”Ÿè¯»å–äº‹ä»¶ï¼Œä¹Ÿå³æ²¡æœ‰æ¶ˆæ¯å‘é€åˆ°å½“å‰æœåŠ¡æ¥æ—¶ï¼Œ<br>// å…¶ä¼šå‘é€ä¸€ä¸ªPingæ¶ˆæ¯åˆ°æœåŠ¡å™¨ï¼Œä»¥ç­‰å¾…å…¶å“åº”Pongæ¶ˆæ¯<br>Message message = new Message();<br>message.setMessageType(MessageTypeEnum.PING);<br>ctx.writeAndFlush(message);<br>} else if (event.state() == IdleState.WRITER_IDLE) {<br>// å¦‚æœå½“å‰æœåŠ¡åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å†™å…¥æ¶ˆæ¯åˆ°ç®¡é“ï¼Œåˆ™å…³é—­å½“å‰ç®¡é“<br>ctx.close();<br>}<br>}<br>}<br><br>private static final class MessageSender implements Runnable {<br><br>private static final AtomicLong counter = new AtomicLong(1);<br>private volatile ChannelHandlerContext ctx;<br><br>public MessageSender(ChannelHandlerContext ctx) {<br>this.ctx = ctx;<br>}<br><br>@Override<br>public void run() {<br>try {<br>while (true) {<br>// æ¨¡æ‹Ÿéšæœºå‘é€æ¶ˆæ¯çš„è¿‡ç¨‹<br>TimeUnit.SECONDS.sleep(new Random().nextInt(3));<br>Message message = new Message();<br>message.setMessageType(MessageTypeEnum.REQUEST);<br>message.setBody("this is my " + counter.getAndIncrement() + " message.");<br>message.addAttachment("name", "xufeng");<br>ctx.writeAndFlush(message);<br>}<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>}<br>}<br>}<br>}<br></p><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦å¤„ç†çš„æ¶ˆæ¯ç±»å‹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œå› è€Œå®¢æˆ·ç«¯å¤„ç†ç±»ç»§æ‰¿äº†æœåŠ¡ç«¯å¤„ç†ç±»ã€‚ä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œå…¶è¿˜éœ€è¦å®šæ—¶å‘æœåŠ¡ç«¯å‘é€å¿ƒè·³æ¶ˆæ¯ï¼Œç”¨äºæ£€æµ‹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„è¿æ¥æ˜¯å¦å¥åœ¨ï¼Œå› è€Œå®¢æˆ·ç«¯è¿˜ä¼šå®ç°userEventTriggered()æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å®šæ—¶å‘æœåŠ¡å™¨å‘é€å¿ƒè·³æ¶ˆæ¯ã€‚userEventTriggered()æ–¹æ³•ä¸»è¦æ˜¯åœ¨å®¢æˆ·ç«¯è¢«é—²ç½®ä¸€å®šæ—¶é—´åï¼Œå…¶ä¼šæ ¹æ®å…¶è¯»å–æˆ–è€…å†™å…¥æ¶ˆæ¯çš„é™åˆ¶æ—¶é•¿æ¥é€‰æ‹©æ€§çš„è§¦å‘è¯»å–æˆ–å†™å…¥äº‹ä»¶ã€‚</p><p>ä¸Šè¿°å®ç°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œå¯¹äºå…·ä½“ç±»å‹æ¶ˆæ¯çš„å¤„ç†ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ä¸€ä¸ªå·¥å‚ç±»æ¥è·å–å¯¹åº”çš„æ¶ˆæ¯å¤„ç†å™¨ï¼Œç„¶åå¤„ç†ç›¸åº”çš„æ¶ˆæ¯ï¼Œä¸‹é¢æˆ‘ä»¬è¯¥å·¥å‚ç±»çš„ä»£ç ï¼š</p><p>public final class MessageResolverFactory {<br><br>// åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»å®ä¾‹<br>private static final MessageResolverFactory resolverFactory = new MessageResolverFactory();<br>private static final List&lt;Resolver> resolvers = new CopyOnWriteArrayList&lt;>();<br><br>private MessageResolverFactory() {}<br><br>// ä½¿ç”¨å•ä¾‹æ¨¡å¼å®ä¾‹åŒ–å½“å‰å·¥å‚ç±»å®ä¾‹<br>public static MessageResolverFactory getInstance() {<br>return resolverFactory;<br>}<br><br>public void registerResolver(Resolver resolver) {<br>resolvers.add(resolver);<br>}<br><br>// æ ¹æ®è§£ç åçš„æ¶ˆæ¯ï¼Œåœ¨å·¥å‚ç±»å¤„ç†å™¨ä¸­æŸ¥æ‰¾å¯ä»¥å¤„ç†å½“å‰æ¶ˆæ¯çš„å¤„ç†å™¨<br>public Resolver getMessageResolver(Message message) {<br>for (Resolver resolver : resolvers) {<br>if (resolver.support(message)) {<br>return resolver;<br>}<br>}<br><br>throw new RuntimeException("cannot find resolver, message type: " + message.getMessageType());<br>}<br><br>}<br></p><p>ä¸Šè¿°å·¥å‚ç±»æ¯”è¾ƒç®€å•ï¼Œä¸»è¦å°±æ˜¯é€šè¿‡å•ä¾‹æ¨¡å¼è·å–ä¸€ä¸ªå·¥å‚ç±»å®ä¾‹ï¼Œç„¶åæä¾›ä¸€ä¸ªæ ¹æ®å…·ä½“æ¶ˆæ¯æ¥æŸ¥æ‰¾å…¶å¯¹åº”çš„å¤„ç†å™¨çš„æ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å„ä¸ªæ¶ˆæ¯å¤„ç†å™¨çš„ä»£ç ï¼š</p><p>// requestç±»å‹çš„æ¶ˆæ¯<br>public class RequestMessageResolver implements Resolver {<br><br>private static final AtomicInteger counter = new AtomicInteger(1);<br><br>@Override<br>public boolean support(Message message) {<br>return message.getMessageType() == MessageTypeEnum.REQUEST;<br>}<br><br>@Override<br>public Message resolve(Message message) {<br>// æ¥æ”¶åˆ°requestæ¶ˆæ¯ä¹‹åï¼Œå¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œä¸»è¦æ˜¯å°†å…¶æ‰“å°å‡ºæ¥<br>int index = counter.getAndIncrement();<br>System.out.println("[trx: " + message.getSessionId() + "]"<br>+ index + ". receive request: " + message.getBody());<br>System.out.println("[trx: " + message.getSessionId() + "]"<br>+ index + ". attachments: " + message.getAttachments());<br><br>// å¤„ç†å®Œæˆåï¼Œç”Ÿæˆä¸€ä¸ªå“åº”æ¶ˆæ¯è¿”å›<br>Message response = new Message();<br>response.setMessageType(MessageTypeEnum.RESPONSE);<br>response.setBody("nice to meet you too!");<br>response.addAttachment("name", "xufeng");<br>response.addAttachment("hometown", "wuhan");<br>return response;<br>}<br>}<br>// å“åº”æ¶ˆæ¯å¤„ç†å™¨<br>public class ResponseMessageResolver implements Resolver {<br><br>private static final AtomicInteger counter = new AtomicInteger(1);<br><br>@Override<br>public boolean support(Message message) {<br>return message.getMessageType() == MessageTypeEnum.RESPONSE;<br>}<br><br>@Override<br>public Message resolve(Message message) {<br>// æ¥æ”¶åˆ°å¯¹æ–¹æœåŠ¡çš„å“åº”æ¶ˆæ¯ä¹‹åï¼Œå¯¹å“åº”æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œä¸»è¦æ˜¯å°†å…¶æ‰“å°å‡ºæ¥<br>int index = counter.getAndIncrement();<br>System.out.println("[trx: " + message.getSessionId() + "]"<br>+ index + ". receive response: " + message.getBody());<br>System.out.println("[trx: " + message.getSessionId() + "]"<br>+ index + ". attachments: " + message.getAttachments());<br><br>// å“åº”æ¶ˆæ¯ä¸éœ€è¦å‘å¯¹æ–¹æœåŠ¡å†å‘é€å“åº”ï¼Œå› è€Œè¿™é‡Œå†™å…¥ä¸€ä¸ªç©ºæ¶ˆæ¯<br>Message empty = new Message();<br>empty.setMessageType(MessageTypeEnum.EMPTY);<br>return empty;<br>}<br>}<br>// pingæ¶ˆæ¯å¤„ç†å™¨<br>public class PingMessageResolver implements Resolver {<br><br>@Override<br>public boolean support(Message message) {<br>return message.getMessageType() == MessageTypeEnum.PING;<br>}<br><br>@Override<br>public Message resolve(Message message) {<br>// æ¥æ”¶åˆ°pingæ¶ˆæ¯åï¼Œè¿”å›ä¸€ä¸ªpongæ¶ˆæ¯è¿”å›<br>System.out.println("receive ping message: " + System.currentTimeMillis());<br>Message pong = new Message();<br>pong.setMessageType(MessageTypeEnum.PONG);<br>return pong;<br>}<br>}<br>// pongæ¶ˆæ¯å¤„ç†å™¨<br>public class PongMessageResolver implements Resolver {<br><br>@Override<br>public boolean support(Message message) {<br>return message.getMessageType() == MessageTypeEnum.PONG;<br>}<br><br>@Override<br>public Message resolve(Message message) {<br>// æ¥æ”¶åˆ°pongæ¶ˆæ¯åï¼Œä¸éœ€è¦è¿›è¡Œå¤„ç†ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªç©ºçš„message<br>System.out.println("receive pong message: " + System.currentTimeMillis());<br>Message empty = new Message();<br>empty.setMessageType(MessageTypeEnum.EMPTY);<br>return empty;<br>}<br>}<br></p><p>å¦‚æ­¤ï¼Œå¯¹äºè‡ªå®šä¹‰åè®®çš„æ¶ˆæ¯å¤„ç†è¿‡ç¨‹å·²ç»å®Œæˆï¼Œä¸‹é¢åˆ™æ˜¯ä½¿ç”¨ç”¨Nettyå®ç°çš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä»£ç ï¼š</p><p>// æœåŠ¡ç«¯<br>public class Server {<br><br>public static void main(String[] args) {<br>EventLoopGroup bossGroup = new NioEventLoopGroup();<br>EventLoopGroup workerGroup = new NioEventLoopGroup();<br>try {<br>ServerBootstrap bootstrap = new ServerBootstrap();<br>bootstrap.group(bossGroup, workerGroup)<br>.channel(NioServerSocketChannel.class)<br>.option(ChannelOption.SO_BACKLOG, 1024)<br>.handler(new LoggingHandler(LogLevel.INFO))<br>.childHandler(new ChannelInitializer&lt;SocketChannel>() {<br>@Override<br>protected void initChannel(SocketChannel ch) throws Exception {<br>ChannelPipeline pipeline = ch.pipeline();<br>// æ·»åŠ ç”¨äºå¤„ç†ç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜çš„å¤„ç†å™¨<br>pipeline.addLast(new LengthFieldBasedFrameDecoder(1024, 0, 4, 0, 4));<br>pipeline.addLast(new LengthFieldPrepender(4));<br>// æ·»åŠ è‡ªå®šä¹‰åè®®æ¶ˆæ¯çš„ç¼–ç å’Œè§£ç å¤„ç†å™¨<br>pipeline.addLast(new MessageEncoder());<br>pipeline.addLast(new MessageDecoder());<br>// æ·»åŠ å…·ä½“çš„æ¶ˆæ¯å¤„ç†å™¨<br>pipeline.addLast(new ServerMessageHandler());<br>}<br>});<br><br>ChannelFuture future = bootstrap.bind(8585).sync();<br>future.channel().closeFuture().sync();<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>} finally {<br>bossGroup.shutdownGracefully();<br>workerGroup.shutdownGracefully();<br>}<br>}<br>}<br>public class Client {<br>public static void main(String[] args) {<br>NioEventLoopGroup group = new NioEventLoopGroup();<br>Bootstrap bootstrap = new Bootstrap();<br>try {<br>bootstrap.group(group)<br>.channel(NioSocketChannel.class)<br>.option(ChannelOption.TCP_NODELAY, Boolean.TRUE)<br>.handler(new ChannelInitializer&lt;SocketChannel>() {<br>@Override<br>protected void initChannel(SocketChannel ch) throws Exception {<br>ChannelPipeline pipeline = ch.pipeline();<br>// æ·»åŠ ç”¨äºè§£å†³ç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜çš„å¤„ç†å™¨<br>pipeline.addLast(new LengthFieldBasedFrameDecoder(1024, 0, 4, 0, 4));<br>pipeline.addLast(new LengthFieldPrepender(4));<br>// æ·»åŠ ç”¨äºè¿›è¡Œå¿ƒè·³æ£€æµ‹çš„å¤„ç†å™¨<br>pipeline.addLast(new IdleStateHandler(1, 2, 0));<br>// æ·»åŠ ç”¨äºæ ¹æ®è‡ªå®šä¹‰åè®®å°†æ¶ˆæ¯ä¸å­—èŠ‚æµè¿›è¡Œç›¸äº’è½¬æ¢çš„å¤„ç†å™¨<br>pipeline.addLast(new MessageEncoder());<br>pipeline.addLast(new MessageDecoder());<br>// æ·»åŠ å®¢æˆ·ç«¯æ¶ˆæ¯å¤„ç†å™¨<br>pipeline.addLast(new ClientMessageHandler());<br>}<br>});<br><br>ChannelFuture future = bootstrap.connect("127.0.0.1", 8585).sync();<br>future.channel().closeFuture().sync();<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>} finally {<br>group.shutdownGracefully();<br>}<br>}<br>}<br></p><p>è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åˆ†åˆ«æ‰“å°äº†å¦‚ä¸‹æ•°æ®ï¼š</p><p>// å®¢æˆ·ç«¯<br>receive pong message: 1555123429356<br>[trx: d05024d2]1. receive response: nice to meet you too!<br>[trx: d05024d2]1. attachments: {hometown=wuhan, name=xufeng}<br>[trx: 66ee1438]2. receive response: nice to meet you too!<br>// æœåŠ¡å™¨<br>receive ping message: 1555123432279<br>[trx: f582444f]4. receive request: this is my 4 message.<br>[trx: f582444f]4. attachments: {name=xufeng}<br></p><p><br></p><p>3. å°ç»“</p><p>æœ¬æ–‡é¦–å…ˆå°†è‡ªå®šä¹‰åè®®ä¸HTTPåè®®è¿›è¡Œäº†å¯¹æ¯”ï¼Œé˜è¿°äº†è‡ªå®šä¹‰åè®®çš„ä¸€äº›ä¼˜ç‚¹ã€‚ç„¶åå®šä¹‰äº†ä¸€ä»½è‡ªå®šä¹‰åè®®ï¼Œå¹¶ä¸”è®²è§£äº†åè®®ä¸­å„ä¸ªå­—èŠ‚çš„å«ä¹‰ã€‚æœ€åé€šè¿‡Nettyå¯¹è‡ªå®šä¹‰åè®®è¿›è¡Œäº†å®ç°ï¼Œå¹¶ä¸”å®ç°äº†åŸºäºè‡ªå®šä¹‰åè®®çš„å¿ƒè·³åŠŸèƒ½ã€‚</p><p><br></p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºç•™ä¸‹ä½ çš„è§‚ç‚¹ï¼Œä¸€èµ·è®¨è®ºæé«˜ã€‚å¦‚æœä»Šå¤©çš„æ–‡ç« è®©ä½ æœ‰æ–°çš„å¯å‘ï¼Œå­¦ä¹ èƒ½åŠ›çš„æå‡ä¸Šæœ‰æ–°çš„è®¤è¯†ï¼Œæ¬¢è¿è½¬å‘åˆ†äº«ç»™æ›´å¤šäººã€‚</p><p><br></p><p>çŒœä½ è¿˜æƒ³çœ‹</p><p><br></p><p>é˜¿é‡Œã€è…¾è®¯ã€ç™¾åº¦ã€åä¸ºã€äº¬ä¸œæœ€æ–°é¢è¯•é¢˜æ±‡é›†</p><p>Javaä¹‹å¼‚å¸¸å¤„ç†ï¼Œçœ‹è¿™ç¯‡å°±å¯¹äº†ï¼<br></p><p>ä¸€ä¸ªç®€å•çš„ä¾‹å­å¸¦ä½ ç†è§£HashMap<br></p><p>ã€æ•´ç†ã€‘Spring å¸¸ç”¨æ³¨è§£ï¼åƒä¸‡ä¸è¦é”™è¿‡ï¼<br><br></p><p>å…³æ³¨è®¢é˜…å·ã€Œç¨‹åºå‘˜å°ä¹ã€ï¼Œæ”¶çœ‹æ›´å¤šç²¾å½©å†…å®¹<br>å˜¿ï¼Œä½ åœ¨çœ‹å—ï¼Ÿ</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Netty','å®ç°','ä¹‰åè®®'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>