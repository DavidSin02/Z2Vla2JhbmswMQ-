<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ | 极客快訊</title><meta property="og:title" content="【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/ad3da37f8f0e4d0eb1220f6c8b0f45e6"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28517eac.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/28517eac.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/28517eac.html><meta property="article:published_time" content="2020-11-14T21:00:31+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:31+08:00"><meta name=Keywords content><meta name=description content="【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/28517eac.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify>本文首发于微信公众号：程序员乔戈里</p><p class=ql-align-justify>前情回顾：【漫画】TCP连接为什么是三次握手，而不是两次握手，也不是四次握手？</p><p class=ql-align-justify>乔戈里和小萌一起去美食城吃了午饭</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ad3da37f8f0e4d0eb1220f6c8b0f45e6><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/801f2c9e390044228ff935c83c0f6dda><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/65fd89a681fe4fe6b1749fa57a8d0b85><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b20e1a299f13497a9f80d3f4604b6839><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a82148681d594446a22c04a96bcdbfa1><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f13396e4827446adbb64074c8c3ccecd><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/999f1f0b02e947e3bd6f5589c2bbcded><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d0143fc1b81e4b6a8fab536d2d8dcb3e><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c61611c79d8f44e1ac1fa9d6a9932e73><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3bd0fda2282c4842aa0db1df3ba920a8><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e7089ca334ed40d19685109a19b72261><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>小萌：额...哦！这就是两次挥手，我这里就好比是服务端还有消息没发送完，乔哥你的客户端就突然把我拉黑（断开了连接），导致我(服务器)这里还有消息给你，但你因为关闭，却接受不到。所以是不能两次挥手断开TCP连接！这样是不可靠的！大体示意图如下图所示。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a71d87119b6c44e681da09822f42a377><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bef936e75cd6414c920178272fa13957><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cccd6618761b4120bb7edbf5d2bc03ed><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2c9cd1b03de2477bb649a8480048c6de><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/529cdb25172a4b75858fa5ed3c3359e6><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/66e2ade047eb4b3cb8c1fff1f979f835><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/4362a9e4e94845c6b914cb00e6be42e3><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>乔戈里：在第一次挥手中，我一开始说，我这里没话说了，代表客户端这里没消息发送了，这是第一次挥手，客户端知道自己没消息发送了;</p><p class=ql-align-justify>在第二次挥手中，小萌你收到我的消息以后，知道了我乔戈里这里没消息发送了，然后继续发送消息因为你还有消息发送，这个时候是小萌你服务器端知道了客户端无消息发送了;</p><p class=ql-align-justify>在第三次挥手中，小萌你说自己说完了没话要说了，准备睡觉，这里代表小萌你这个服务器没消息发送了，所以三次挥手结束，小萌你这个服务器知道了自己没有消息发送，而且小萌你还知道了客户端没有消息发送，但是由于我乔戈里这个客户端没有给你的第三次挥手回复，所以你小萌产生了疑问，乔戈里(客户端)到底知不知道我这里没有消息发送了，三次挥手就有这个问题！</p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4bc86e0c57a54805954a32d8341794a0><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d7e0bf3844f24bd39cb33e8ad038c76e><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fdec71f2cc6c446d9a9f01ceb59802b3><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>小萌：对哦！因为我们讨论的是三次挥手，所以你是不会对收到的消息进行回复，在三次挥手中，我服务器不知道到底你有没有收到我断开的请求，如果你收到了，那还好，皆大欢喜咋两都去睡觉了(客户端和服务器端都断开连接)，如下图所示；</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d5bbc73133414d13bad0f56196f8e9ac><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>小萌：那如果我小萌(服务器)断开的请求丢失了，你不知道我这里(服务器端)要断开，结果小萌我(服务器)去睡觉了(断开连接)，乔戈里你(客户端)由于没有收到睡觉这个消息(断开连接)，还一直傻傻地在那里等着我继续发送消息(虽然服务器没消息发送了，但是客户端不知道呀！客户端没有断开连接浪费了资源)，结果就是，我安安稳稳地睡了一晚上，乔哥你可怜巴巴在那等了一晚上我的消息，大体情况如下图所示。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/08db959c4e1a404aa031d29a5407fea3><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1fed39e74a5542eb9ec1d65faaede61f><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>乔戈里：只有进行第四次挥手，我对你小萌最后说的“睡觉去了”进行回复，这样你小萌(服务器)就知道我乔戈里(客户端)知道你要断开连接了。到这里就圆满了！</p><p class=ql-align-justify>你小萌(服务器)知道了我乔戈里(客户端)没有话说了(服务器知道客户端没有消息发送),你小萌(服务器)最后说完话了也要去睡觉了(服务器知道自己也没消息发送了);</p><p class=ql-align-justify>而我乔戈里(客户端)一开始说自己没有消息发送了(客户端自己知道自己没有消息发送了)，最后通过第四次挥手确定肯定以及一定确保我收到了你小萌（服务器）说也没话说了(客户端知道了服务器没有消息发送了，为啥这么确定，因为客户端只有在收到服务器发送的断开连接的消息，才会进行第四次挥手来进行回复哦~)。这就是四次挥手的妙处！给你花了示例图，方便你理解！</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/73baafdb037e4a15aa8c4c06c9841dea><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5969fb44af81407d9144aa648e1dfd03><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d3555c379b744aac8c32fddb77cac1e3><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f13fb9c0ec7e4a5f908a697781c93955><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt=【漫画】TCP断开连接为什么是四次挥手，不是二次挥手/三次挥手？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3ffbba015daa45b8a96767b035ba2126><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>———— e n d ————</p><p class=ql-align-center><strong>卡通人物出自公众号：</strong>叔婆饭</p><p><strong>觉得文章不错的，欢迎点</strong>在看<strong>和</strong>转发<strong>，长按下图关注公众号 程序员乔戈里，收看更多精彩。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'挥手','漫画','TCP'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>