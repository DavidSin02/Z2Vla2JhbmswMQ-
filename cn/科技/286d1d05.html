<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Linux怎么样编译c程序文件(编译最新版ffmpeg为例) | 极客快訊</title><meta property="og:title" content="Linux怎么样编译c程序文件(编译最新版ffmpeg为例) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/67e5890abdc3408c9e6e28c61ce6c847"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/286d1d05.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/286d1d05.html><meta property="article:published_time" content="2020-11-14T21:07:54+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:54+08:00"><meta name=Keywords content><meta name=description content="Linux怎么样编译c程序文件(编译最新版ffmpeg为例)"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/286d1d05.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Linux怎么样编译c程序文件(编译最新版ffmpeg为例)</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><blockquote><p>请关注本头条号，每天坚持更新原创干货技术文章。</p><p>如需学习视频，请在微信搜索公众号<strong>“智传网优”</strong>直接开始自助<strong>视频学习</strong></p></blockquote><p><strong>前言</strong></p><p>本文主要介绍在Linux上怎样把源代码编译成机器可以识别的二进制文件。</p><p>首先，我们要理解为什么要编译软件。</p><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/67e5890abdc3408c9e6e28c61ce6c847><p class=pgc-img-caption></p></div><p>编译软件的原理：把人类可读的代码翻译成为机器可以直接识别的二进制文件。</p><p>我们安装软件时，一定要编译吗？答案是否定的，因为完全可以使用别人编译好的程序直接安装到我们的系统中。比如常见的Windows安装软件的方式就是直接下载别人编译好的二进制文件。例如，下载最新版的qq安装文件，qq.exe。</p><p>同样的，在Linux上一样可以使用这种方法安装，比如在红帽系列的系统上就可以下载.rpm文件进行安装。Debian系列的系统就可以在网上下载.deb文件在本地进行安装，比如Ubuntu系统。</p><p>如果需要安装一个软件，其实可以不需要编译，直接使用软件包管理工具安装即可，比如在CentOS上，安装xxx软件。</p><pre>[root@centos7 ~]# yum -y install xx</pre><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b711645191734f7583fe06367e722335><p class=pgc-img-caption></p></div><p>Ubuntu系统使用apt命令安装</p><pre>oucanrong@zcwyou:~$ sudo apt install -y xxx</pre><p>那么问题来了，有这样方便的安装方式，为什么还要费劲去编译一个软件呢？</p><p>原因是有以下几种情况需要手动编译软件：</p><ul><li>系统默认仓库没有这个软件</li><li>系统默认仓库的软件过时或者版本太旧不能满意使用要求，比如在Ubuntu 18.04默认仓库上的youtube-dl，已经过时并不能正常使用。</li><li>软件作者需要发布编译好的二进制包。</li></ul><p>本文演示的案例均在CentOS7.6系统上进行记录。</p><p><strong>编译案例</strong></p><p>FFmpeg 是一个自由软件，可以运行音频和视频多种格式的录影、转换、流功能，包含了libavcodec——这是一个用于多个项目中音频和视频的解码器库，以及libavformat，libavformat是一个音频与视频格式转换库。</p><p>安装编译工具及ffmpeg的依赖包。</p><pre>[root@centos7 ~]# yum install -y automake autoconf libtool gcc gcc-c++ yasm bzip2 make svn git</pre><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0b62e21ba7f64f0089ca38f30b943bd0><p class=pgc-img-caption></p></div><p>成功安装编译工具</p><p>解释：</p><p>通用的编辑工具集：</p><ul><li>make</li><li>automake</li><li>autoconf</li><li>libtool</li><li>gcc</li><li>gcc-c++</li><li>bzip2</li><li>wget</li></ul><p>bzip2用于解压缩bzip2文件</p><p>wget用于连接http/https/ftp等协议</p><p>ffmpeg本身需要的依赖包，这个需要提前查清楚</p><ul><li>yasm</li></ul><p>远程源码仓库连接工具：</p><ul><li>svn</li><li>git</li></ul><pre>[root@centos7 ~]# wget https://ffmpeg.org/releases/ffmpeg-4.1.tar.bz2</pre><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0b6a0f2242474dde95ba3252e8e33739><p class=pgc-img-caption></p></div><p>正在下载最新版本的ffmpeg等待编译</p><p>解压压缩包内容：</p><pre>[root@centos7 ~]# tar jxvf ffmpeg-4.1.tar.bz2</pre><p>解压时可以看到很的.c后缀的文件，表示这是C语言写的程序</p><p>进入解压后的目录</p><pre>[root@centos7 ~]# cd ffmpeg-4.1</pre><p>编辑、编译和安装</p><pre>[root@centos7 ffmpeg-4.1]# ./configure &amp;&amp; make &amp;&amp; make install</pre><p>解释以上命令：</p><p>./configure表示软件配置，比如编译哪些组件、开启哪些功能、编译成功后安装到哪些目录等等。</p><p>make表示开始编译，把人类可读的代码编译为机器识别的二进制码。</p><p>make install编译成功后，把相关的二进制文件、帮助文件等等内容复制到指定目录。</p><p>编译一般需要比较长时间，类似于以下输出。</p><p>INSTALL libavutil/tree.h</p><p>INSTALL libavutil/twofish.h</p><p>INSTALL libavutil/version.h</p><p>INSTALL libavutil/xtea.h</p><p>INSTALL libavutil/tea.h</p><p>INSTALL libavutil/lzo.h</p><p>INSTALL libavutil/avconfig.h</p><p>INSTALL libavutil/ffversion.h</p><p>INSTALL libavutil/libavutil.pc</p><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/807a8468ff8c47bebc66d70d84132964><p class=pgc-img-caption></p></div><p>正在编译最新版的ffmpeg</p><p>查看ffmpeg的程序位置</p><pre>[root@zcwyou ffmpeg-4.1]# which ffmpeg</pre><p>/usr/local/bin/ffmpeg</p><p>可以看出，ffmpeg已经编译好了，并且已经复制到了/usr/local/bin/</p><pre>[root@zcwyou ffmpeg-4.1]# ffmpeg</pre><p>ffmpeg version 4.1 Copyright (c) 2000-2018 the FFmpeg developers</p><p>built with gcc 4.8.5 (GCC) 20150623 (Red Hat 4.8.5-36)</p><p>configuration:</p><p>libavutil 56. 22.100 / 56. 22.100</p><p>libavcodec 58. 35.100 / 58. 35.100</p><p>libavformat 58. 20.100 / 58. 20.100</p><p>libavdevice 58. 5.100 / 58. 5.100</p><p>libavfilter 7. 40.101 / 7. 40.101</p><p>libswscale 5. 3.100 / 5. 3.100</p><p>libswresample 3. 3.100 / 3. 3.100</p><p>Hyper fast Audio and Video encoder</p><p>usage: ffmpeg [options][[infile options] -i infile]… {[outfile options] outfile}…</p><p>Use -h to get full help or, even better, run 'man ffmpeg'</p><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bbcbed15014d4dbe94907ab2820a456a><p class=pgc-img-caption></p></div><p>查看ffmpeg的版本</p><p><strong>查看ffmpeg依赖哪些动态库</strong></p><pre>[root@zcwyou ffmpeg-4.1]# ldd ffmpeg</pre><p>linux-vdso.so.1 => (0x00007ffc454d7000)</p><p>libm.so.6 => /lib64/libm.so.6 (0x00007fe6c8f6b000)</p><p>libxcb.so.1 => /lib64/libxcb.so.1 (0x00007fe6c8d43000)</p><p>libxcb-shm.so.0 => /lib64/libxcb-shm.so.0 (0x00007fe6c8b3f000)</p><p>libxcb-shape.so.0 => /lib64/libxcb-shape.so.0 (0x00007fe6c893b000)</p><p>libxcb-xfixes.so.0 => /lib64/libxcb-xfixes.so.0 (0x00007fe6c8733000)</p><p>libva.so.1 => /lib64/libva.so.1 (0x00007fe6c8513000)</p><p>libbz2.so.1 => /lib64/libbz2.so.1 (0x00007fe6c8303000)</p><p>libz.so.1 => /lib64/libz.so.1 (0x00007fe6c80ed000)</p><p>liblzma.so.5 => /lib64/liblzma.so.5 (0x00007fe6c7ec7000)</p><p>libva-drm.so.1 => /lib64/libva-drm.so.1 (0x00007fe6c7cc4000)</p><p>libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fe6c7aa8000)</p><p>libc.so.6 => /lib64/libc.so.6 (0x00007fe6c76db000)</p><p>/lib64/ld-linux-x86-64.so.2 (0x00007fe6c926d000)</p><p>libXau.so.6 => /lib64/libXau.so.6 (0x00007fe6c74d7000)</p><p>libdl.so.2 => /lib64/libdl.so.2 (0x00007fe6c72d3000)</p><p>libdrm.so.2 => /lib64/libdrm.so.2 (0x00007fe6c70c1000)</p><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2296d8e7a8b14b1fbbc30cc5f3b01da1><p class=pgc-img-caption></p></div><p>查看ffmpeg依赖哪些动态库</p><p>如果提示没有找到某某动态库，继续使用yum/RPM/源码安装的方式安装对应的动态库，否则程序不能正常运行。</p><div class=pgc-img><img alt=Linux怎么样编译c程序文件(编译最新版ffmpeg为例) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e77dd36bca9d415aae44f3935f83b820><p class=pgc-img-caption></p></div><p><strong>总结</strong></p><p>至此，已经把一个C程序的源代码文件编译成为二进制文件。现在可以直接使用ffmpeg最新版了。</p><p>本文已同步至博客站，尊重原创，转载时请在正文中附带以下链接：</p><p>https://www.linuxrumen.com/rmxx/920.html</p><p><strong>点击了解更多，快速查看更多的技术文章列表。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'编译','最新版','Linux'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>