<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>交换机级联与堆叠连接对比分析 | 极客快訊</title><meta property="og:title" content="交换机级联与堆叠连接对比分析 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/0015db384eb94c72a2dccc2d2513b7c7"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2b950f2.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2b950f2.html><meta property="article:published_time" content="2020-10-29T21:00:58+08:00"><meta property="article:modified_time" content="2020-10-29T21:00:58+08:00"><meta name=Keywords content><meta name=description content="交换机级联与堆叠连接对比分析"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/2b950f2.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>交换机级联与堆叠连接对比分析</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify><strong>1、交换机级联</strong></p><p class=ql-align-justify>级联是最常见的连接方式，就是使用网线将两个交换机进行连接。 连接的结果是，在实际的网络中，它们仍然各自工作，仍然是两个独立的交换机。需要注意的是交换机不能无限制级联，超过一定数量的交换机进行级联，最终会引起广播风暴，导致网络性能严重下降。</p><p class=ql-align-justify><strong>级联又分为以下两种：</strong></p><p class=ql-align-justify><strong>使用普通端口级联</strong></p><p class=ql-align-justify>所谓普通端口就是通过交换机的某一个常用端口 (如 RJ-45 端口 ) 进行连接。需要注意的是，这时所用的连接双绞线要用反线，即是说双绞线的两端要跳线 (第 1-3 与 2-6 线脚对调)。其连接示意如图 1 所示。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0015db384eb94c72a2dccc2d2513b7c7><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><strong>使用 Uplink 端口级联</strong></p><p class=ql-align-justify>在所有交换机端口中， 都会在旁边包含一个 Uplink 端口， 如图 2 所示。 此端口是专门为上行连接提供的，只需通过直通双绞线将该端口连接至其他交换机上除 “Uplink 端口 ”外的任意端口即可 (注意，并不是 Uplink 端口的相互连接 )。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e4a95890c4a4d70b58aacc94ca68989><p class=pgc-img-caption></p></div><p class=ql-align-center>其连接示意如图 3 所示。</p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/66b9cdc9cbc740c5bd7219a829816b78><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><strong>2、交换机堆叠</strong></p><p class=ql-align-justify>此种连接方式主要应用在大型网络中对端口需求比较大的情况下使用。交换机的堆叠是扩展端口最快捷、最便利的方式，同时堆叠后的带宽是单一交换机端口速率的几十倍。但是，并不是所有的交换机都支持堆叠的， 这取决于交换机的品牌、 型号是否支持堆叠 ; 并且还需要使用专门的堆叠电缆和堆叠模块 ; 最后还要注意同一堆叠中的交换机必须是同一品牌。</p><p class=ql-align-justify>它主要通过厂家提供的一条专用连接电缆，从一台交换机的 “ UP”堆叠端口直接连接到另一台交换机的 “DOWN” 堆叠端口。堆叠中的所有交换机可视为一个整体的交换机来进行管理。</p><p class=ql-align-justify>提示：采用堆叠方式的交换机要受到种类和相互距离的限制。首先实现堆叠的交换机必须是支持堆叠的 ; 另外由于厂家提供的堆叠连接电缆一般都在 1M 左右，故只能在很近的距离内使用堆叠功能。</p><p class=ql-align-justify><strong>不同连接方式的优缺点</strong></p><p class=ql-align-justify>都是为了完成网络的连接， 为什么还要分级联和堆叠呢 ?直接用网络连接的级联方式不是更方便吗 ?为什么还需要堆叠呢 ?两种连接方式的本质是不一样的，用来满足不同的要求，当然从一定程度上说，不能直接说哪一种连接方式好，而是根据实际需要、实际情况选择不同的连接方式。</p><p class=ql-align-justify>级联的优点是可以延长网络的距离， 理论上可以通过双绞线和多级的级联方式无限远的延长网络距离， 级联后， 在网络管理过程中仍然是多个不同的网络设备。另外级联基本上不受设备的限制，不同厂家的设备可以任意级联。 级联的缺点就是多个设备的级联会产生级联瓶颈。</p><p class=ql-align-justify>例如，两个百兆交换机通过一根双绞线级联，这时它们的级联带宽是百兆， 这样不同交换机之间的计算机要通讯，都只能通过这百兆带宽。</p><p class=ql-align-justify>堆叠的优点是不会产生性能瓶颈，因为通过堆叠，可以增加交换机的背板带宽，不会产生性能瓶颈。通过堆叠可以在网络中提供高密度的集中网络端口，根据设备的不同，一般情况下最大可以支持 8 层堆叠，这样就可以在某一位置提供上百个端口。堆叠后的设备在网络管理过程中就变成了一个网络设备，只要赋于一个 IP 地址，方便管理，也节约管理成本。</p><p class=ql-align-justify>堆叠的缺点主要是受设备限制，并不是所有的交换机都支持堆叠字，不同厂家，不同型号，进行堆叠需要特定的设备的支持。 受距离限制， 因为受到堆叠线缆长度的限制，堆叠的交换机之间的距离要求很近。 还有就是不同厂家的设备有时不能很好的兼容， 因此不同厂家的设备想要进行堆叠非常困难。</p><p class=ql-align-justify><strong>总结：</strong></p><p class=ql-align-justify>综合以上两种方式来看， 交换机的级联方式实现简单， 只需一根普通的双绞线即可， 节约成本而且基本不受距离的限制 ; 而堆叠方式投资相对较大，且只能在很短的距离内连接，实现起来比较困难。</p><p class=ql-align-justify>但也要认识到， 堆叠方式比级联方式具有更好的性能， 信号不易衰竭， 且通过堆叠方式，可以集中管理多台交换机，大大减化了管理工作量 ; 如果实在需要采用级联，也最好选用Uplink 端口的连接方式。因为这可以在最大程度上保证信号强度，如果是普通端口之间的连接，必定会使网络信号严重受损。</p><p class=ql-align-justify>Cisco Catalyst 3750 系列堆叠配置实例</p><p class=ql-align-justify>Cisco Catalyst 3750 堆叠区别于Cisco Catalyst 3550，是真正的堆叠，Cisco Catalyst 3750系列使用 StackWise 技术，它是一种创新性的堆叠架构，提供了一个 32Gbps 的堆叠互联，连接多达 9 台交换机，并将它们整合为一个统一的、逻辑的、 针对融合而优化的设备， 从而让客户可以更加放心地部署语音、 视频和数据应用。 （ Cisco Catalyst 3750 做堆叠需要专用堆叠线缆，产品自带 0.5 米堆叠线缆。 ）</p><p class=ql-align-justify><strong>1、基本要求：</strong></p><p class=ql-align-justify>ios 版本要一致</p><p class=ql-align-justify>专用堆叠线缆</p><p class=ql-align-justify>最大堆叠个数 9</p><p class=ql-align-justify>2、3750采用的是背板堆叠的方式，机器本身有堆叠口需专门的堆叠线可以达到32G带宽</p><p class=ql-align-justify>3、交换机堆叠后，从逻辑上来说，它们属于同一个设备。这样，如果你想对这几台交换机进行设置，只要连接到任何一台设备上，就可看到堆叠中的其他交换机。</p><p class=ql-align-justify><strong>4、堆叠的优势：</strong></p><p class=ql-align-justify>高密度端口</p><p class=ql-align-justify>便于管理</p><p class=ql-align-justify>5、堆叠分两种</p><p class=ql-align-justify><strong>一种是硬堆叠，</strong>也就是用专门的堆叠硬件来实现高速度传输，最高可达到 4G 的传输速度，硬堆叠的代表是星型堆叠</p><p class=ql-align-justify><strong>另一种叫软堆叠，</strong>他采用一般的千兆端口来进行连接，也可以看成是千兆端口的级连，通过交换机软件来实现一些堆叠功能，如主交换机管理从交换机，软堆叠的代表是菊花链堆叠，这里不描述。</p><p class=ql-align-justify>如果堆叠设备型号相同，只需按图将交换机堆叠上即可，不需要配置</p><p class=ql-align-justify>a：物理连接好堆叠线缆，连接方法为master的stack1连接到slave 的 stack2 上面。</p><p class=ql-align-justify>b：开 master ，不作任何的配置。等完全启动后。</p><p class=ql-align-justify>c：开 slave 的机器。</p><p class=ql-align-justify>d：不作任何的配置。</p><p class=ql-align-justify>如果型号不同，需要升级 IOS</p><p class=ql-align-justify>连接方式</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b234e8092a734eb697f64c0aebbb787f><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>关闭所有要堆叠交换机的电源</p><p class=ql-align-justify>Default Switch Stack Configuration</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0fb2bf09c7c940bf8efc5a12021513a2><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><strong>配置方法：</strong></p><p class=ql-align-justify><strong>1、将所有要堆叠的交换机的操作系统，保持一致。不一致的升级。</strong></p><p class=ql-align-justify><strong>2、选出你要配置为主的交换机进行配置</strong></p><p class=ql-align-justify>switch current-stack-member-number renumber new-stack-member-number</p><p class=ql-align-justify>switch stack-member-number priority new-priority-number</p><p class=ql-align-justify>reload slot stack-member-number</p><p class=ql-align-justify>show sdm prefer (3750-12T 的sdm为routing，其他型号的为 desktop，如果是混合连接的话，选择 desktop)</p><p class=ql-align-justify>sdm prefer { default | routing | vlan }[ desktop]</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7d8cb8ee5ac04f38a7ec0b33499ed9ea><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><strong>3、 配置堆叠成员交换机</strong></p><p class=ql-align-justify>堆叠成员号码 1到9之间选择 show switch 一般从 2往后排</p><p class=ql-align-justify>switch stack-member-number provision type(堆叠成员交换机型号 show ver)</p><p class=ql-align-justify>4、copy running-config startup-config( 在这里保存不要用 wr)</p><p class=ql-align-justify>5、堆叠组。主交换配置完毕后，先按照连接方式将要堆叠的交换机连接的到一起。然后开启主交换机，待主交换正常启动后，再开启从交换的电源。</p><p class=ql-align-justify>6、按照第 5 步的做法，从交换机不用做任何的配置。</p><p class=ql-align-justify><strong>堆叠信息显示：</strong></p><p class=ql-align-justify>show platform stack-manager all 显示所有交换堆叠的信息</p><p class=ql-align-justify>show switch 显示堆叠交换机的汇总信息</p><p class=ql-align-justify>show switch 1 显示一号交换机的信息</p><p class=ql-align-justify>show switch detail 显示堆叠成员明细的信息</p><p class=ql-align-justify>show switch neighbors 显示堆叠邻居的完整信息</p><p class=ql-align-justify>show switch stack-ports 显示堆叠交换机的完整端口信息</p><p class=ql-align-justify><strong>配置范例：</strong></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=交换机级联与堆叠连接对比分析 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ad4755ac08dd4e28b17187b3d2b319f5><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>以三个交换机堆叠为例。</p><p class=ql-align-justify>交换机一 ws-c3750g-12s</p><p class=ql-align-justify>交换机二 ws-c3750g-24ts</p><p class=ql-align-justify>交换机二 ws-c3750g-48ts</p><p class=ql-align-justify>交换机一 做为主交换 配置如下</p><p class=ql-align-justify>switch 1 provision ws-c3750g-12s 指定成员交换机型号</p><p class=ql-align-justify>switch 1 priority 15 指定成员交换机优先级</p><p class=ql-align-justify>switch 2 provision ws-c3750g-24ts</p><p class=ql-align-justify>switch 2 priority 14</p><p class=ql-align-justify>switch 3 provision ws-c3750g-48ts</p><p class=ql-align-justify>switch 3 priority 13</p><p class=ql-align-justify>sdm prefer desktop</p><p class=ql-align-justify>copy running-config startup-config ( 保存配置在这里不要用 wr)</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'交换','机级联','连接'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>