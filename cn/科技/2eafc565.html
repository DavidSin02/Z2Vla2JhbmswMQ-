<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/2f7e2ee9a1f141b48f2b020e9b49f33a"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2eafc565.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2eafc565.html><meta property="article:published_time" content="2020-11-14T21:01:36+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:36+08:00"><meta name=Keywords content><meta name=description content="ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/2eafc565.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><blockquote><p><strong>å‰è¨€</strong></p></blockquote><p>å‹ç¼©å¯ä»¥å¤§å¤§çš„é™ä½æˆ‘ä»¬WebæœåŠ¡å™¨çš„å“åº”é€Ÿåº¦,å‹ç¼©ä»è€Œæé«˜æˆ‘ä»¬ç½‘é¡µçš„åŠ è½½é€Ÿåº¦,ä»¥åŠèŠ‚çœä¸€å®šçš„å¸¦å®½.</p><blockquote><p><strong>ä½•æ—¶ä½¿ç”¨ç›¸åº”å‹ç¼©ä¸­é—´ä»¶</strong></p></blockquote><p>åœ¨IISï¼ŒApacheï¼ŒNginxä¸­ä½¿ç”¨åŸºäºæœåŠ¡ç«¯çš„å“åº”å‹ç¼©æŠ€æœ¯ã€‚ä¸­é—´ä»¶çš„æ‰§è¡Œå¯èƒ½å’ŒæœåŠ¡ç«¯æ¨¡å—ä¸åŒ¹é…ã€‚HTTP.sys å’ŒKestrel serverç›®å‰æ²¡æœ‰æä¾›å†…ç½®çš„å‹ç¼©æ”¯æŒã€‚</p><p><strong>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Response Compression Middleware:</strong></p><ul><li>æ— æ³•ä½¿ç”¨ä»¥ä¸‹åŸºäºæœåŠ¡å™¨çš„å‹ç¼©æŠ€æœ¯æ—¶:</li></ul><ol><li>IIS åŠ¨æ€å‹ç¼©æ¨¡å—</li><li>apacheçš„GZIPå‹ç¼©</li><li>Nginx å‹ç¼©</li></ol><ul><li>ç›´æ¥æ‰˜ç®¡:</li></ul><ol><li>Http.sys æœåŠ¡å™¨</li><li>Kestrel æœåŠ¡å™¨</li></ol><blockquote><p><strong>å¦‚ä½•æ·»åŠ MIME</strong></p></blockquote><p>ä¸­é—´ä»¶ä¸ºå‹ç¼©æŒ‡å®šäº†ä¸€ç»„é»˜è®¤çš„ MIME ç±»å‹:</p><ul><li>application/javascript</li><li>application/json</li><li>application/xml</li><li>text/css</li><li>text/html</li><li>text/json</li><li>text/plain</li><li>text/xml</li></ul><pre>Copy public void ConfigureServices(IServiceCollection services) { services.AddResponseCompression(); services.AddRazorPages(); } public void Configure(IApplicationBuilder app, IWebHostEnvironment env) { if (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } else { app.UseExceptionHandler("/Error"); app.UseHsts(); } app.UseResponseCompression(); app.UseStaticFiles(); app.UseRouting(); app.UseAuthorization(); app.UseEndpoints(endpoints =&gt; { endpoints.MapRazorPages(); }); }</pre><p>é»˜è®¤æ˜¯é‡‡ç”¨Brotliå‹ç¼©</p><p>Brotli is a generic-purpose lossless compression algorithm that compresses data using a combination of a modern variant of the LZ77 algorithm, Huffman coding and 2nd order context modeling, with a compression ratio comparable to the best currently available general-purpose compression methods. It is similar in speed with deflate but offers more dense compression.</p><p>Brotli æ˜¯åŸºäºLZ77ç®—æ³•çš„ä¸€ä¸ªç°ä»£å˜ä½“ã€éœå¤«æ›¼ç¼–ç å’ŒäºŒé˜¶ä¸Šä¸‹æ–‡å»ºæ¨¡ã€‚Googleè½¯ä»¶å·¥ç¨‹å¸ˆåœ¨2015å¹´9æœˆå‘å¸ƒäº†åŒ…å«é€šç”¨æ— æŸæ•°æ®å‹ç¼©çš„Brotliå¢å¼ºç‰ˆæœ¬ï¼Œç‰¹åˆ«ä¾§é‡äºHTTPå‹ç¼©ã€‚å…¶ä¸­çš„ç¼–ç å™¨è¢«éƒ¨åˆ†æ”¹å†™ä»¥æé«˜å‹ç¼©æ¯”ï¼Œç¼–ç å™¨å’Œè§£ç å™¨éƒ½æé«˜äº†é€Ÿåº¦ï¼Œæµå¼APIå·²è¢«æ”¹è¿›ï¼Œå¢åŠ æ›´å¤šå‹ç¼©è´¨é‡çº§åˆ«ã€‚</p><p>ä¸å¸¸è§çš„é€šç”¨å‹ç¼©ç®—æ³•ä¸åŒï¼ŒBrotliä½¿ç”¨ä¸€ä¸ªé¢„å®šä¹‰çš„120åƒå­—èŠ‚å­—å…¸ã€‚è¯¥å­—å…¸åŒ…å«è¶…è¿‡13000ä¸ªå¸¸ç”¨å•è¯ã€çŸ­è¯­å’Œå…¶ä»–å­å­—ç¬¦ä¸²ï¼Œè¿™äº›æ¥è‡ªä¸€ä¸ªæ–‡æœ¬å’ŒHTMLæ–‡æ¡£çš„å¤§å‹è¯­æ–™åº“ã€‚é¢„å®šä¹‰çš„ç®—æ³•å¯ä»¥æå‡è¾ƒå°æ–‡ä»¶çš„å‹ç¼©å¯†åº¦ã€‚</p><p><strong>æ‘˜è‡ªï¼šhttps://segmentfault.com/a/1190000009383543</strong></p><ul><li>MimeTypes:è®¾å®šè¦è¿›è¡Œå‹ç¼©çš„MimeTypes</li><li>GzipCompressionProviderOptions:è®¾ç½®å‹ç¼©æ–¹å¼(é»˜è®¤æ˜¯CompressionLevel.Fastestå¿«é€Ÿå‹ç¼©)</li></ul><p><strong>å‹ç¼©å‰ï¼š</strong></p><div class=pgc-img><img alt="ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f7e2ee9a1f141b48f2b020e9b49f33a><p class=pgc-img-caption></p></div><p><strong>å‹ç¼©åï¼š</strong></p><div class=pgc-img><img alt="ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d2db9dd8b07c424a8549c10940e43ce5><p class=pgc-img-caption></p></div><p>ä½¿ç”¨å‹ç¼©çš„å¥½å¤„å°±æ˜¯èŠ‚çœç½‘ç»œæµé‡ï¼Œå‹ç¼©èµ„æºæ–‡ä»¶ã€‚ä½†æ˜¯æ¶ˆè€—ä¸€ç‚¹CPUæ€§èƒ½.</p><p><strong>gzip</strong></p><ul><li>é»˜è®¤æƒ…å†µä¸‹, Brotli å‹ç¼©æä¾›ç¨‹åºä¼šéšGzip å‹ç¼©æä¾›ç¨‹åºä¸€èµ·æ·»åŠ åˆ°å‹ç¼©æä¾›ç¨‹åºçš„æ•°ç»„ä¸­ã€‚</li><li>ä»–é»˜è®¤é‡‡ç”¨çš„æ˜¯Brotliå‹ç¼©,å¦‚æœå®¢æˆ·ç«¯ä¸æ”¯æŒBrotli,å®¢æˆ·ç«¯æ”¯æŒGzip,åˆ™é»˜è®¤ä¸ºGzip.</li></ul><pre>Copy public void ConfigureServices(IServiceCollection services) { services.AddResponseCompression(options=&gt; { options.Providers.Add&lt;BrotliCompressionProvider&gt;(); options.Providers.Add&lt;GzipCompressionProvider&gt;(); }); services.AddRazorPages(); }</pre><div class=pgc-img><img alt="ASP.NET Coreå¦‚ä½•ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶æé«˜Webåº”ç”¨ç¨‹åºæ€§èƒ½" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d44d361348394ccdb0290ea76fb57a2a><p class=pgc-img-caption></p></div><p>æœ‰äº›MIMEç±»å‹æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºä»–å°†å…¶åŠ å…¥å‹ç¼©ç±»å‹ä¸­çš„,æˆ‘ä»¬å¯ä»¥ä»å›¾ä¸­çœ‹åˆ°ç›®å‰æœ‰ä¸€äº›æœªè¢«å‹ç¼©,é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ä»–æ‰‹åŠ¨å¢åŠ ä¸€ä¸‹ç±»å‹.</p><p>Copy</p><p>public void ConfigureServices(IServiceCollection services)</p><p>{</p><p>services.AddResponseCompression(options=> {</p><p>options.Providers.Add&lt;BrotliCompressionProvider>();</p><p>options.Providers.Add&lt;GzipCompressionProvider>();</p><p>options.MimeTypes = ResponseCompressionDefaults.MimeTypes.Concat(</p><p>new[] { "image/x-icon" });</p><p>});</p><p>services.AddRazorPages();</p><p>}</p><blockquote><p><strong>å¦‚ä½•é…ç½®å‹ç¼©çº§åˆ«</strong></p></blockquote><p>å‹ç¼©çº§åˆ«æè¿°CompressionLevel.Fastestå‹ç¼©åº”è¯¥å°½å¿«å®Œæˆ, å³ä½¿ç”Ÿæˆçš„è¾“å‡ºæœªä»¥æœ€ä½³æ–¹å¼å‹ç¼©ã€‚CompressionLevel.NoCompressionä¸åº”æ‰§è¡Œå‹ç¼©ã€‚CompressionLevel.Optimalå³ä½¿å‹ç¼©éœ€è¦æ›´é•¿çš„æ—¶é—´, ä¹Ÿåº”ä»¥æœ€ä½³æ–¹å¼å‹ç¼©å“åº”ã€‚</p><pre>Copypublic void ConfigureServices(IServiceCollection services){ services.AddResponseCompression();  services.Configure&lt;GzipCompressionProviderOptions&gt;(options =&gt;  { options.Level = CompressionLevel.Fastest; }); })}</pre><blockquote><p><strong>å®‰å…¨åè®®å‹ç¼©</strong></p></blockquote><p>å¯ä»¥ä½¿ç”¨EnableForHttpsé€‰é¡¹æ§åˆ¶å®‰å…¨è¿æ¥ä¸Šçš„å‹ç¼©å“åº”ï¼Œè¯¥é€‰é¡¹é»˜è®¤æƒ…å†µä¸‹å¤„äºç¦ç”¨çŠ¶æ€ã€‚å¯¹åŠ¨æ€ç”Ÿæˆçš„é¡µé¢ä½¿ç”¨å‹ç¼©å¯èƒ½ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜ï¼Œä¾‹å¦‚CRIMEå’ŒBREACHæ”»å‡»ã€‚</p><ul><li>EnableForHttps:æ˜¯å¦å¯¹HTTPSå°åŒ…è¿›è¡Œå‹ç¼©(é»˜è®¤æ˜¯false)</li></ul><pre>Copy public void ConfigureServices(IServiceCollection services) { services.AddResponseCompression(options=&gt; { options.Providers.Add&lt;BrotliCompressionProvider&gt;(); options.Providers.Add&lt;GzipCompressionProvider&gt;(); options.EnableForHttps = true; options.MimeTypes = ResponseCompressionDefaults.MimeTypes.Concat( new[] { "image/x-icon" }); }); services.AddRazorPages(); }</pre><p>ä½œè€…ï¼šå†¯è¾‰</p><p>å‡ºå¤„ï¼šhttps://www.cnblogs.com/yyfh/p/11796421.html</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'ASP','NET','Core'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/bf86ceae.html alt="å¦‚ä½•åœ¨ASP.NET Coreä¸­å®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/287c0bf906ec4fd88f87bd726019bf06 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/bf86ceae.html title="å¦‚ä½•åœ¨ASP.NET Coreä¸­å®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)">å¦‚ä½•åœ¨ASP.NET Coreä¸­å®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/2c1045a1.html alt="ASP.NET Coreä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸ç®€å•çš„æ–¹å¼ï¼Œæ¥ä½¿ç”¨å“åº”å‹ç¼©" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/7b9fcf79-6ed6-4933-8e57-61f4fa936d65 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/2c1045a1.html title="ASP.NET Coreä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸ç®€å•çš„æ–¹å¼ï¼Œæ¥ä½¿ç”¨å“åº”å‹ç¼©">ASP.NET Coreä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸ç®€å•çš„æ–¹å¼ï¼Œæ¥ä½¿ç”¨å“åº”å‹ç¼©</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/23b34058.html alt="ä¸ºASP.NET Coreå¼€å‘ä¸­é—´ä»¶å‹ç¼©åŠŸèƒ½æé«˜ç³»ç»Ÿæ€§èƒ½" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0e59ba59d6244b84844608d188600738 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/23b34058.html title="ä¸ºASP.NET Coreå¼€å‘ä¸­é—´ä»¶å‹ç¼©åŠŸèƒ½æé«˜ç³»ç»Ÿæ€§èƒ½">ä¸ºASP.NET Coreå¼€å‘ä¸­é—´ä»¶å‹ç¼©åŠŸèƒ½æé«˜ç³»ç»Ÿæ€§èƒ½</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>