<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ–‡æœ¬åˆ†ç±»é—®é¢˜ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ–‡æœ¬åˆ†ç±»é—®é¢˜ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/dfic-imagehandler/1c06c837-18e6-48dd-b015-4275219bdb5d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/317b390.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/317b390.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/317b390.html><meta property="article:published_time" content="2020-10-29T21:07:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:51+08:00"><meta name=Keywords content><meta name=description content="æ–‡æœ¬åˆ†ç±»é—®é¢˜"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/317b390.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ–‡æœ¬åˆ†ç±»é—®é¢˜</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=æ–‡æœ¬åˆ†ç±»é—®é¢˜ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/1c06c837-18e6-48dd-b015-4275219bdb5d><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>æ–‡æœ¬åˆ†ç±»é—®é¢˜</h1><p style=text-align:start>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ–‡æœ¬åˆ†ç±»é—®é¢˜ï¼Œç»å…¸çš„æ–°é—»ä¸»é¢˜åˆ†ç±»ï¼Œç”¨æœ´ç´ è´å¶æ–¯æ€ä¹ˆåšã€‚</p><p style=text-align:start>In [193]:</p><pre><code>import jiebaseg_list = jieba.cut("ä»–æ¥åˆ°ä¸œæµ·è¯†åˆ«åŒº",cut_all=False)print("/" .join(seg_list) )jieba.add_word('ä¸œæµ·è¯†åˆ«åŒº')seg_list = jieba.cut("ä»–æ¥åˆ°ä¸œæµ·è¯†åˆ«åŒº",cut_all=False)print("/ " .join(seg_list) )</code></pre><pre><code>ä»–/æ¥åˆ°/ä¸œæµ·/è¯†åˆ«åŒºä»–/ æ¥åˆ°/ ä¸œæµ·è¯†åˆ«åŒº</code></pre><p style=text-align:start>In [175]:</p><pre><code>#coding: utf-8import osimport timeimport randomimport jieba  #å¤„ç†ä¸­æ–‡import nltk  #å¤„ç†è‹±æ–‡import sklearnfrom sklearn.naive_bayes import MultinomialNBimport numpy as npimport pylab as plimport matplotlib.pyplot as pltimport nltk</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">æ–‡æœ¬å¤„ç†Â¶</span></strong></h1><p style=text-align:start>1ã€æŠŠè®­ç»ƒæ ·æœ¬åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</p><p style=text-align:start>2ã€ç»Ÿè®¡äº†è¯é¢‘ï¼ŒæŒ‰è¯é¢‘é™åºç”Ÿæˆè¯è¢‹</p><p style=text-align:start>In [137]:</p><pre><code># æ–‡æœ¬å¤„ç†ï¼Œä¹Ÿå°±æ˜¯æ ·æœ¬ç”Ÿæˆè¿‡ç¨‹def text_processing(folder_path, test_size=0.2):    folder_list = os.listdir(folder_path)    # os.listdir æ–¹æ³•ç”¨äºè¿”å›è·¯å¾„ä¸‹åŒ…å«çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„åå­—çš„åˆ—è¡¨    # folder_list = ['C000008', 'C000014', 'C000013', 'C000022', 'C000023', 'C000024', 'C000010', 'C000020', 'C000016']        data_list = []    class_list = []    # éå†æ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹é‡Œæ˜¯ä¸€ä¸ªæ–°é—»çš„ç±»åˆ«    for folder in folder_list:        new_folder_path = os.path.join(folder_path, folder)        # os.path.joinå°±æ˜¯æŠŠä¸¤ä¸ªè·¯å¾„æ‹¼æ¥        # new_folder_path = ./Database/SogouC/Sample/C000008                files = os.listdir(new_folder_path)        # è¯»å–new_folder_pathè·¯å¾„ä¸‹çš„æ–‡ä»¶å        # ['15.txt', '14.txt', '16.txt', '17.txt', '13.txt', '12.txt', '10.txt', '11.txt', '19.txt', '18.txt']                # è¯»å–æ–‡ä»¶        j = 1        for file in files:            if j &gt; 100:             # æ€•å†…å­˜çˆ†æ‰ï¼Œåªå–100ä¸ªæ ·æœ¬æ–‡ä»¶ï¼Œä½ å¯ä»¥æ³¨é‡Šæ‰å–å®Œï¼Œ            # è¿™é‡Œæ¯ä¸ªç±»åˆ«ä¸‹åªæœ‰10ä¸ªæ ·æœ¬ï¼Œæ²¡äº‹                break            with open(os.path.join(new_folder_path, file), 'r') as fp:                raw = fp.read()                # read() è¿”å›å€¼ä¸ºstrï¼Œæ¯æ¬¡è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œå°†æ–‡ä»¶æ‰€æœ‰å†…å®¹æ”¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ä¸­                # readline() è¿”å›å€¼ä¸ºstrï¼Œæ¯æ¬¡åªè¯»å–ä¸€è¡Œ,æ¯è¡Œçš„å†…å®¹æ”¾åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ä¸­                # readlines() è¿”å›å€¼ä¸ºlistï¼Œä¸€æ¬¡è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œæ¯è¡Œçš„å†…å®¹æ”¾åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ä¸­ä½œä¸ºåˆ—è¡¨çš„ä¸€ä¸ªå…ƒç´ ã€‚                        ## æ˜¯çš„ï¼Œéšå¤„å¯è§çš„jiebaä¸­æ–‡åˆ†è¯            jieba.enable_parallel(4) # å¼€å¯å¹¶è¡Œåˆ†è¯æ¨¡å¼ï¼Œå‚æ•°ä¸ºå¹¶è¡Œè¿›ç¨‹æ•°ï¼Œä¸æ”¯æŒwindows            word_cut = jieba.cut(raw, cut_all=False) # ç²¾ç¡®æ¨¡å¼ï¼Œè¿”å›çš„ç»“æ„æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„genertor            word_list = list(word_cut) # genertorè½¬åŒ–ä¸ºlistï¼Œæ¯ä¸ªè¯unicodeæ ¼å¼            jieba.disable_parallel() # å…³é—­å¹¶è¡Œåˆ†è¯æ¨¡å¼                        data_list.append(word_list) #è®­ç»ƒé›†list            #class_list.append(folder.decode('utf-8')) #ç±»åˆ«,str.decodeä¼šæŠ¥é”™            class_list.append(folder) #è®­ç»ƒé›†çš„æ ‡ç­¾ç±»åˆ«            j += 1                            ## ä¸‹é¢æ‰‹åŠ¨ç²—æš´åœ°åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†    data_class_list = zip(data_list, class_list) # zip å‡½æ•°è¿”å›ä¸€ä¸ªzipå¯¹è±¡    data_class_list = list(data_class_list) # éœ€è¦ç”¨listè½¬æ¢æˆåˆ—è¡¨        random.shuffle(data_class_list) # shuffleéšæœºæ‰“ä¹±æ ·æœ¬    index = int(len(data_class_list)*test_size)+1    train_list = data_class_list[index:]    test_list = data_class_list[:index]        train_data_list, train_class_list = zip(*train_list)     # è§£å‹ç¼©,æ–‡æœ¬å’Œç±»åˆ«åˆ†å¼€è¿”å›çš„æ˜¯å…ƒç»„æ ¼å¼ï¼Œå¯ä»¥åœ¨ç”¨listè½¬æ¢    test_data_list, test_class_list = zip(*test_list)     #ä»¥ä¸Šåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†å…¶å®å¯ä»¥ç”¨sklearnè‡ªå¸¦çš„éƒ¨åˆ†åš    #train_data_list, test_data_list, train_class_list, test_class_list = \    #sklearn.model_selection.train_test_split(data_list, class_list, test_size=test_size)                # ç»Ÿè®¡è¯é¢‘æ”¾å…¥all_words_dict    all_words_dict = {}    for word_list in train_data_list:        for word in word_list:            #if all_words_dict.has_key(word):å·²åˆ é™¤æ­¤æ–¹æ³•            if word in all_words_dict:                all_words_dict[word] += 1            else:                all_words_dict[word] = 1    # all_words_dict={'\n': 1257, '\u3000': 1986, 'æœ‰': 175, 'æ±Ÿæ¹–': 1,.....}    # åŒæ ·ä»¥ä¸Šæœ‰ç°æˆçš„ç»Ÿè®¡è¯é¢‘çš„APIå¯ä»¥è°ƒç”¨    # from collections import Counter     # Counter(train_data_list)    all_words_tuple_list = sorted(all_words_dict.items(), key=lambda f:f[1], reverse=True)     # å†…å»ºå‡½æ•°sortedç¬¬ä¸€ä¸ªå‚æ•°éœ€ä¸ºlistï¼Œall_words_dict.items()è½¬åŒ–ä¸ºåˆ—è¡¨ï¼Œé”®å’Œå€¼ä¸ºå…ƒç»„    # keyå‡½æ•°ä»£è¡¨æŒ‰å…ƒç»„çš„çš„è¯é¢‘æ’åºï¼Œå¹¶é™åºè¿”å›ç»“æœ    # all_words_tuple_list = [('ï¼Œ', 3424), ('çš„', 2527), ('\u3000', 1734), ('ã€‚', 1482),.....]        #all_words_list = list(zip(*all_words_tuple_list)[0]) æŠ¥é”™ï¼Œéœ€è¦ä¿®æ”¹    all_words_list,_ = zip(*all_words_tuple_list) # è§£å‹ç¼©    all_words_list = list(all_words_list)    # all_words_list = ['ï¼Œ', 'çš„', '\u3000', 'ã€‚', '\n', 'åœ¨', ' ', 'ã€', 'äº†', 'â€œ',.....]    return all_words_list, train_data_list, test_data_list, train_class_list, test_class_list</code></pre><p style=text-align:start>In [138]:</p><pre><code>print ("start")## æ–‡æœ¬é¢„å¤„ç†folder_path = './Database/SogouC/Sample'all_words_list, train_data_list, test_data_list, train_class_list, test_class_list = \text_processing(folder_path, test_size=0.2)print(len(all_words_list)) # 9748ä¸ªä¸é‡å¤å•è¯print(all_words_list[:100])print(len(train_data_list)) # 71ä¸ªè®­ç»ƒé›†æ ·æœ¬print(len(test_data_list))  # 19ä¸ªæµ‹è¯•é›†æ ·æœ¬print(len(train_class_list))  # 71ä¸ªè®­ç»ƒé›†æ ‡ç­¾print(len(test_class_list))  # 19ä¸ªæµ‹è¯•é›†æ ‡ç­¾</code></pre><pre><code>start9481['ï¼Œ', 'çš„', '\u3000', 'ã€‚', '\n', ' ', ';', '&amp;', 'nbsp', 'ã€', 'åœ¨', 'äº†', 'â€œ', 'æ˜¯', 'â€', '00', 'ï¼š', 'å’Œ', 'ä¸­å›½', 'æœ‰', 'ä¹Ÿ', 'æˆ‘', 'å¯¹', 'å°±', 'å°†', 'â€”', 'ä¸Š', 'è¿™', 'æ¸¸å®¢', 'éƒ½', 'æ—…æ¸¸', 'ä¸­', 'ä¸', 'ä¸º', 'è¦', 'ä¸', 'å¹´', 'ç­‰', 'è€Œ', 'ï¼›', 'å¯ä»¥', 'æœˆ', 'ï¼ˆ', 'ï¼‰', 'å¯¼å¼¹', 'å¤§é™†', 'ä¸€ä¸ª', 'ä»', 'äºº', '3', 'åˆ°', 'ä½†', 'ä½ ', 'å…¬å¸', 'è¯´', 'ç«ç‚®', 'æ—¥', '(', ')', 'ä»–', 'è€ƒç”Ÿ', 'å°å†›', 'è®¤ä¸º', 'åŒ—äº¬', 'æ—¶', 'å¤š', 'è¿˜', 'ä¸ª', '1', '.', 'èƒ½', 'ã€Š', 'ã€‹', 'å·²ç»', 'è§£æ”¾å†›', 'ä¸€ç§', 'ä¼š', 'æ—¶é—´', 'è‡ªå·±', 'æ¥', 'æ–°', 'å„ç§', 'å¤§', 'ï¼', '5', 'è¿›è¡Œ', 'å¸‚åœº', 'ä¸»è¦', 'æˆ‘ä»¬', 'ä»¥', 'å', 'ç¾å›½', 'äº”ä¸€', 'è®©', 'æ”¯ä»˜', 'é»„é‡‘å‘¨', 'å¢é•¿', 'å¹¶', 'æˆä¸º', 'æœ€']</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">åœç”¨è¯æ–‡ä»¶å»é‡</span></strong></h1><p style=text-align:start>è¿™ä¸ªåœç”¨è¯æ–‡ä»¶ä¸æ˜¯å¾ˆå®˜æ–¹ï¼Œæ‰€ä»¥éœ€è¦æ¸…æ´—ä¸‹</p><p style=text-align:start>In [140]:</p><pre><code># ç²—æš´çš„è¯å»é‡def make_word_set(words_file):    words_set = set() # é›†åˆæ ¼å¼    with open(words_file, 'r') as fp:        for line in fp.readlines(): # å¾ªç¯å–å‡ºæ¯ä¸€è¡Œ            word = line.strip()            # line.strip() å½“()ä¸ºç©ºæ—¶ï¼Œé»˜è®¤åˆ é™¤ç©ºç™½ç¬¦ï¼ˆåŒ…æ‹¬'\n','\r','\t',' ')            if len(word)&gt;0 and word not in words_set: # å»é‡                words_set.add(word)    return words_set</code></pre><p style=text-align:start>In [145]:</p><pre><code># ç”Ÿæˆstopwords_setstopwords_file = './stopwords_cn.txt' # åœç”¨è¯åˆ—è¡¨æ–‡ä»¶stopwords_set = make_word_set(stopwords_file) # é¦–å…ˆåœç”¨è¯å»é‡print(len(stopwords_set))print(stopwords_set)</code></pre><pre><code>{'å¾—äº†', 'è¿˜æ˜¯', 'æ‰€åœ¨', 'ä¸ºæ­¤', 'å¦‚åŒä¸‹', 'å¹¶ä¸”', 'è®¸å¤š', 'ä½†', 'ä¸å°½ç„¶', 'æ— ', 'å´', 'æ‰€', 'æ®æ­¤', 'åˆ†åˆ«', 'å‘', 'éµç…§', 'å¤šä¼š', 'è€Œå', 'å¦‚ä¸‹', 'å†æœ‰', 'çš„ç¡®', 'æ­¤å¤–', 'è·', 'è€Œå·²', 'ä½•å¤„', 'åœ¨äº', 'è¯´æ¥', 'ä¸æ–™', 'ä¸”', 'äº', 'äº¦', 'ä¸å•', 'è€Œæ˜¯', 'æœ¬äºº', 'æ­£å¦‚', 'å‰è€…', 'åˆ«', 'æ‰èƒ½', 'å•¦', 'åªå› ', 'å—åˆ°', 'ç”šè‡³äº', 'å¦ä¸€æ–¹é¢', 'æ­¤', 'åªæœ‰', 'å¯æ˜¯', 'æ‚¨', 'åˆ«çš„', 'åˆ«å¤„', 'äº›', 'æˆ–', 'ä¸è®º', 'è¿™ä¼š', 'å…¶å®ƒ', 'å†µä¸”', 'æœ‰', 'æ­¤æ¬¡', 'å› æ­¤', 'å»', 'æ¯‹å®', 'å®ƒä»¬', 'æ ¹æ®', 'åŸºäº', 'å½“åœ°', 'ä¾æ®', 'ç„¶è€Œ', 'è™½ç„¶', 'å› ä¸º', 'ä»è€Œ', 'å¯¹æ¯”', 'æ€', 'ä»¥ä¸Š', 'è¯¸å¦‚', 'å€˜è‹¥', 'ä¸€äº›', 'å¦åˆ™', 'æ‰€ä»¥', 'é‚£è¾¹', 'æ¯', 'å¹¶é', 'ä¹‹', 'å¦', 'ç®€è¨€ä¹‹', 'åªé™', 'è¿åŒ', 'åä¹‹', 'è¿™èˆ¬', 'å‡ ', 'å¾€', 'æ˜¯', 'æ—¢', 'å„è‡ª', 'è¯¥', 'å› ä¹‹', 'å¾—', 'æ¥', 'ä¸ç„¶', 'ä¹ˆ', 'ç”šè‡³', 'ä¸º', 'å¤„åœ¨', 'å…¨éƒ¨', 'å¦‚ä¸Š', 'æŒ‰ç…§', 'åŠ ä¹‹', 'ä»‹äº', 'æ­£å·§', 'å¥½', 'ä¼¼çš„', 'ä¸è¿‡', 'æœ‰äº›', 'é‚£æ ·', 'æ­¤åœ°', 'å‡¡æ˜¯', 'æ¯å½“', 'ä¸æ˜¯', 'ä¸‡ä¸€', 'ç”±äº', 'æ›¾', 'è€Œ', 'ç…§ç€', 'ä¾ç…§', 'å½¼æ—¶', 'å°±è¦', 'ç„¶å', 'ä»¥ä¸º', 'åªéœ€', 'ä¸ºä½•', 'è°', 'åˆ°', 'ä¸ä»…ä»…', 'æ—¢ç„¶', 'å½“ç„¶', 'èµ·', 'å—¡', 'æ­¤é—´', 'æœç„¶', 'ä¸å¦', 'éš', 'å› ', 'å€¼æ­¤', 'å³ä¾¿', 'æ ¼é‡Œæ–¯', 'è¶ç€', 'è¦ä¸ç„¶', 'é‚£ä¸ª', 'è‡³äº', 'ä¹ƒ', 'éšå', 'æœ‰æ—¶', 'ä½•å†µ', 'å½“', 'ä½¿', 'åªæ˜¯', 'ä¸ºç€', 'å¯è§', 'å³ä½¿', 'ä»¥æ¥', 'ç€', 'å§', 'æˆªè‡³', 'ä¸ª', 'ä¸ºä»€ä¹ˆ', 'ç”¨', 'é™¤å¤–', 'ä»–ä»¬', 'éšæ—¶', 'è¿™äº›', 'è¿˜', 'äº†', 'è¿˜æœ‰', 'å•¥', 'ç”šè€Œ', 'ä»–', 'ä½†æ˜¯', 'å¹¶ä¸', 'æŸæŸ', 'å¦‚æœè¯´', 'ä»', 'å„', 'åˆ«äºº', 'è¶', 'è¿™é‡Œ', 'åˆ«è¯´', 'ä»¥', 'ä¸å…‰', 'å…¶æ¬¡', 'å°±ç®—', 'æ²¿ç€', 'å¦‚æœ', 'å¤§å®¶', 'æœç€', 'æ­£æ˜¯', 'å¯¹å¾…', 'è‡ªå·±', 'ä¸å°½', 'è™½', 'æœ‰å…³', 'æ›¿ä»£', 'å“Ÿ', 'å¯¹äº', 'ä»¥åŠ', 'è¿™å„¿', 'åŠ ä»¥', 'ä¸€', 'ä¸å¤–ä¹', 'å°½ç®¡å¦‚æ­¤', 'ä¸ªåˆ«', 'å†åˆ™', 'å“ª', 'å¥¹', 'é™¤æ­¤', 'ä¹Ÿ', 'è‡ªèº«', 'ç”¨æ¥', 'ä¸', 'ä»€ä¹ˆ', 'äººä»¬', 'ä¾¿äº', 'åˆ', 'æ­¤å¤„', 'éä½†', 'å¦‚ä½•', 'å“‡', 'é‚£é‡Œ', 'åªæ¶ˆ', 'æ—¢æ˜¯', 'å‡­', 'çš„', 'æ•…è€Œ', 'æ‰“', 'å˜»å˜»', 'å¯¹æ–¹', 'è°äºº', 'ä¹ƒè‡³', 'ä»¥è‡³', 'å†', 'ä»€ä¹ˆæ ·', 'ä½•', 'ä»»ä½•', 'æœ€', 'ç”±æ­¤', 'è€Œä¸”', 'è‡ª', 'ç›´åˆ°', 'ä¸ºäº†', 'å›ºç„¶', 'é™¤äº†', 'å‡å¦‚', 'äºº', 'æ‰æ˜¯', 'æ®', 'çš„è¯', 'æ¥è‡ª', 'æœ‰çš„', 'æˆ‘ä»¬', 'ä»æ­¤', 'å…³äº', 'å‘ç€', 'é‚£ä¹ˆ', 'ç»™', 'æˆ–è€…', 'æŸä¸ª', 'ç­‰ç­‰', 'å…‰æ˜¯', 'æ€ä¹ˆæ ·', 'å˜¿å˜¿', 'å¦‚æ­¤', 'åª', 'å¤šå°‘', 'æ¥è¯´', 'é‚£èˆ¬', 'å“ªä¸ª', 'é‚£æ—¶', 'é¦–å…ˆ', 'èµ–ä»¥', 'è¿™è¾¹', 'æˆ‘', 'äºæ˜¯', 'å¦å¤–', 'å¥¹ä»¬', 'å·²', 'ä¸å¦‚', 'å“ªå„¿', 'åŠ', 'åŠè‡³', 'å¾ˆ', 'å¤šä¹ˆ', 'å“ªäº›', 'åˆåŠ', 'å…¶', 'è¿˜è¦', 'æ—¢å¾€', 'ä»¥è‡´', 'æˆ–è€…è¯´', 'å¦‚æ˜¯', 'ä¸ä»…', 'ä¸ºæ­¢', 'æœ¬ç€', 'é‰´äº', 'ä»€ä¹ˆçš„', 'è€Œå¤–', 'è­¬å¦‚', 'é‚£å„¿', 'å’±ä»¬', 'åªè¦', 'å‡­å€Ÿ', 'åè€…', 'åˆ™', 'æ¯”å¦‚', 'ä¸€åˆ‡', 'ä¸ªäºº', 'ä½•ä»¥', 'é‚£', 'å’±', 'ä¸Š', 'åœ¨', 'å¦‚è‹¥', 'ä»–äºº', 'ä¸€æ—¦', 'å“ªæ€•', 'è¿™æ ·', 'åªé™äº', 'ä»', 'ä¹‹æ‰€ä»¥', 'æ‰€æœ‰', 'æˆ–æ˜¯', 'è¯¸ä½', 'æ€»ä¹‹', 'æ€ä¹ˆåŠ', 'å…¶ä¸­', 'æ€ä¹ˆ', 'è‹¥', 'ä½œä¸º', 'æ€æ ·', 'æœ¬èº«', 'å‡¡', 'è¿å¸¦', 'ç”±', 'ä¸ç®¡', 'ä¸ä½†', 'åªæ€•', 'å’Œ', 'çœ‹', 'åŒ', 'æŠŠ', 'å®å¯', 'é‚£äº›', 'å½¼æ­¤', 'ä¸åª', 'å”¯æœ‰', 'ç»§è€Œ', 'å‘µå‘µ', 'æ­£å€¼', 'è‡³', 'ä½ ä»¬', 'ä¸‹', 'è·Ÿ', 'é’ˆå¯¹', 'å¹¶', 'ä»¥å…', 'ä¸è‡³äº', 'ç»è¿‡', 'ä½ ', 'å°±æ˜¯', 'è™½è¯´', 'å°', 'ä¸å…¶', 'è‡³ä»Š', 'ä¸€æ¥', 'è®©', 'ä»¬', 'å³', 'è¯¸', 'è¦ä¸', 'æ²¿', 'å‡ºæ¥', 'ä¸¤è€…', 'æ­¤æ—¶', 'éµå¾ª', 'å¦‚', 'è¿™', 'è¿™ä¹ˆ', 'å‡ºäº', 'è¾ƒä¹‹', 'æ¯”', 'å˜›', 'æŸäº›', 'ä»¥ä¾¿', 'å¯ä»¥', 'è‹¥é', 'å„ä½', 'ä»Š', 'é€æ­¥', 'è¿™ä¸ª', 'å®ƒ', 'ä¾‹å¦‚', 'å…¶ä»–', 'åè€Œ', 'å°±æ˜¯è¯´', 'éšç€', 'è‡´', 'åŒæ—¶', 'å¯', 'è¢«', 'æ¥ç€', 'é ', 'é™¤é', 'æŸ', 'å', 'å°”', 'å…¶ä½™', 'ä¸', 'å…¨ä½“', 'ä»æ—§', 'è¿›è€Œ', 'å„¿', 'è‡ªä»', 'å¼€å¤–', 'æ‹¿', 'è¦æ˜¯', 'æ— è®º', 'è¦ä¹ˆ', 'è‹¥æ˜¯', 'å› è€Œ', 'æœ¬åœ°', 'å°½ç®¡', 'ä½•æ—¶'}</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">è¯è¢‹ä¸­é€‰å–æœ‰ä»£è¡¨æ€§çš„ç‰¹å¾è¯</span></strong></h1><p style=text-align:start>ç¬¬ä¸€æ­¥ç”Ÿæˆçš„è¯è¢‹é‡Œæœ‰å¾ˆå¤šé€šç”¨çš„ã€æ— æ„ä¹‰çš„è¯è¯­ï¼Œéœ€è¦å»æ‰ã€‚<br>æœ‰ä»£è¡¨æ€§çš„è¯è¯­å¾ˆå¤§æ¦‚ç‡æ˜¯ä¸€äº›å¯¹æœ€ç»ˆç±»åˆ«åŒºåˆ†æœ‰ä½œç”¨çš„è¯è¯­ã€‚å¹¶ä¸”åé¢è¿™äº›è¯è¯­ä¼šä½œä¸ºç‰¹å¾ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ã€‚</p><p style=text-align:start>In [125]:</p><pre><code>def words_dict(all_words_list, deleteN, stopwords_set=set()):    # é€‰å–ç‰¹å¾è¯    feature_words = []    n = 1    for t in range(deleteN, len(all_words_list), 1):        # å¾ªç¯æ—¶ä»ç¬¬20ä¸ªå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯èˆå¼ƒå‰20ä¸ªè¯è¯­        if n &gt; 1000: # feature_wordsçš„ç»´åº¦1000            break                    if not all_words_list[t].isdigit() and \        all_words_list[t] not in stopwords_set and \        1&lt;len(all_words_list[t])&lt;5:        # isdigit() æ–¹æ³•æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦åªç”±æ•°å­—ç»„æˆ,è¿”å›Trueå’ŒFalse        # æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼šä¸æ˜¯æ•°å­—ï¼›ä¸åœ¨åœç”¨è¯è¡¨ï¼›é•¿åº¦2ï½4            feature_words.append(all_words_list[t])            n += 1    return feature_words</code></pre><p style=text-align:start>In [149]:</p><pre><code>deleteN = 20 # åˆ é™¤å‰20ä¸ªè¯è¯­,å¯ä»¥è°ƒæ•´è¿™ä¸ªæ•°å€¼# è¶Šé å‰çš„è¯è¯­å‡ºç°çš„è¶Šé¢‘ç¹ï¼Œæœ‰å¯èƒ½æ‰€æœ‰ç±»åˆ«ä¸­éƒ½å‡ºç°å¾ˆå¤šæ¬¡ï¼Œè¿™ç±»è¯è¯­æ˜¯å¯ä»¥å»æ‰çš„ã€‚feature_words = words_dict(all_words_list, deleteN, stopwords_set)=print(feature_words[:100])</code></pre><pre><code>['æ¸¸å®¢', 'æ—…æ¸¸', 'å¯¼å¼¹', 'å¤§é™†', 'ä¸€ä¸ª', 'å…¬å¸', 'ç«ç‚®', 'è€ƒç”Ÿ', 'å°å†›', 'è®¤ä¸º', 'åŒ—äº¬', 'å·²ç»', 'è§£æ”¾å†›', 'ä¸€ç§', 'æ—¶é—´', 'å„ç§', 'è¿›è¡Œ', 'å¸‚åœº', 'ä¸»è¦', 'ç¾å›½', 'äº”ä¸€', 'æ”¯ä»˜', 'é»„é‡‘å‘¨', 'å¢é•¿', 'æˆä¸º', 'å¤ä¹ ', 'å¾ˆå¤š', 'ç›®å‰', 'æ²¡æœ‰', 'è®°è€…', 'é—®é¢˜', 'åˆ†æ', 'è¿œç¨‹', 'ä¸‡äººæ¬¡', 'å°„ç¨‹', 'æ¥å¾…', 'åŸºç¡€', 'éƒ¨åˆ†', 'éƒ¨ç½²', 'ä½œæˆ˜', 'ä¸€å®š', 'é€‰æ‹©', 'è¾…å¯¼ç­', 'è€ƒè¯•', 'è¯æ±‡', 'æŠ€æœ¯', 'æ¯”èµ›', 'æ–‡ç« ', 'å®Œå…¨', 'å¯èƒ½', 'æ”¶å…¥', 'å·¥ä½œ', 'æ—¶å€™', 'ä»Šå¹´', 'è¡¨ç¤º', 'æœŸé—´', 'ä¼ä¸š', 'VS', 'èƒ½åŠ›', 'è¾¾åˆ°', 'æ¯•ä¸šç”Ÿ', 'ä¸Šæµ·', 'è¡¨ç°', 'å½±å“', 'æ¯”è¾ƒ', 'äººæ•°', 'ç”¨æˆ·', 'ç›¸å¯¹', 'ä¸“å®¶', 'æœåŠ¡', 'é‡è¦', 'æ‹¥æœ‰', 'éœ€è¦', 'è®­ç»ƒ', 'å¼€å§‹', 'é”€å”®', 'é€šè¿‡', 'é˜µåœ°', 'èµ„æ–™', 'æƒ…å†µ', 'è¦æ±‚', 'é˜…è¯»', 'è€å¸ˆ', 'æ–°æµª', 'å¦å…‹', 'ç½‘ç»œ', 'å†›äº‹', 'è‹±è¯­', 'é¡¹ç›®', 'å†å²', 'è®¾è®¡', 'å‡ ä¹', 'è¿™æ˜¯', 'å†™ä½œ', 'æ—¥æœ¬', 'è€ƒå¤', 'ä¸åŒ', 'æé«˜', 'æ´»åŠ¨', 'å…¬é‡Œ']</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">è®­ç»ƒå’Œæµ‹è¯•é›†ç”Ÿæˆå›ºå®šé•¿åº¦çš„è¯å‘é‡ç‰¹å¾</span></strong></h1><p style=text-align:start>è¿™æ­¥ä¸ºåé¢æ•°æ®è¾“å…¥è¿›è´å¶æ–¯æ¨¡å‹è®­ç»ƒåšå‡†å¤‡ã€‚</p><p style=text-align:start>å› ä¸ºæ–‡æœ¬é•¿åº¦ä¸ä¸€ï¼Œæ‰€ä»¥æ¯ä¸ªæ ·æœ¬éœ€è¦å›ºå®šå¥½ç»´åº¦ï¼Œæ‰èƒ½å–‚ç»™æ¨¡å‹è®­ç»ƒã€‚</p><p style=text-align:start>In [153]:</p><pre><code># æ–‡æœ¬ç‰¹å¾def text_features(train_data_list, test_data_list, feature_words, flag='nltk'):    def text_features(text, feature_words): # textçš„å®šä¹‰åœ¨ä¸‹é¢        text_words = set(text) # æ ·æœ¬å»é‡        ## -----------------------------------------------------------------------------------        if flag == 'nltk':            ## nltkç‰¹å¾ dict            features = {word:1 if word in text_words else 0 for word in feature_words}# éå†æ¯ä¸ªæ ·æœ¬è¯è¯­ï¼Œå‡¡æ˜¯æ ·æœ¬çš„è¯è¯­å‡ºç°åœ¨1000ä¸ªç‰¹å¾è¯é‡Œï¼Œå°±è®°å½•ä¸‹æ¥ï¼Œä¿å­˜ä¸ºå­—å…¸æ ¼å¼ï¼Œé”®ä¸ºè¯è¯­ï¼Œå€¼ä¸º1ï¼Œå¦åˆ™å€¼ä¸º0ã€‚                    elif flag == 'sklearn':            ## sklearnç‰¹å¾ list            features = [1 if word in text_words else 0 for word in feature_words] # åŒä¸Šï¼Œéå†æ¯ä¸ªæ ·æœ¬è¯è¯­ï¼Œç»“æœä¸æ˜¯å­—å…¸ï¼Œå‡ºç°å³ä¸º1ï¼Œä¸å‡ºç°ä¸º0        else:            features = []        ## -----------------------------------------------------------------------------------        return features    train_feature_list = [text_features(text, feature_words) for text in train_data_list]    # textä¸ºæ¯ä¸€ä¸ªè®­ç»ƒçš„æ ·æœ¬ï¼Œè¿”å›å€¼æ˜¯äºŒç»´åˆ—è¡¨        test_feature_list = [text_features(text, feature_words) for text in test_data_list]    # trainä¸ºæ¯ä¸€ä¸ªæµ‹è¯•æ ·æœ¬ï¼Œè¿”å›å€¼æ˜¯äºŒç»´åˆ—è¡¨        return train_feature_list, test_feature_list</code></pre><p style=text-align:start>In [169]:</p><pre><code>flag = 'sklearn'train_feature_list, test_feature_list = \text_features(train_data_list, test_data_list, feature_words, flag)print(len(train_feature_list)) #print(len(test_feature_list))  # print(len(test_feature_list[5])) # æ¯ä¸ªæ ·æœ¬çš„ç»´åº¦éƒ½æ˜¯1000 print(test_feature_list[5][0:100]) # æ‰“å°æµ‹è¯•é›†çš„ç¬¬5ä¸ªæ ·æœ¬çš„å‰100ä¸ªå€¼</code></pre><pre><code>71191000[0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0]</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">è´å¶æ–¯æ¨¡å‹å¼€å§‹è®­ç»ƒå’Œé¢„æµ‹</span></strong></h1><p style=text-align:start>In [176]:</p><pre><code># åˆ†ç±»ï¼ŒåŒæ—¶è¾“å‡ºå‡†ç¡®ç‡ç­‰def text_classifier(train_feature_list, test_feature_list,                     train_class_list, test_class_list, flag='nltk'):    ## -----------------------------------------------------------------------------------    if flag == 'nltk':        ## ä½¿ç”¨nltkåˆ†ç±»å™¨        train_flist = zip(train_feature_list, train_class_list)        train_flist = list(train_flist)         test_flist = zip(test_feature_list, test_class_list)        train_flist = list(test_flist)         classifier = nltk.classify.NaiveBayesClassifier.train(train_flist)        test_accuracy = nltk.classify.accuracy(classifier, test_flist)            elif flag == 'sklearn':        ## sklearnåˆ†ç±»å™¨        classifier = MultinomialNB().fit(train_feature_list, train_class_list)        # MultinomialNB()çš„ä½¿ç”¨æ–¹æ³•å’Œå‚æ•°è§ï¼šhttps://www.cnblogs.com/pinard/p/6074222.html                test_accuracy = classifier.score(test_feature_list, test_class_list)    else:        test_accuracy = []    return test_accuracy</code></pre><p style=text-align:start>In [177]:</p><pre><code>flag='sklearn'test_accuracy = text_classifier(train_feature_list, test_feature_list,                                     train_class_list, test_class_list, flag)print(test_accuracy)</code></pre><pre><code>0.7368421052631579</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#66be66;--tt-darkmode-color: #66BE66">å¯è§†åŒ–</span></strong></h1><p style=text-align:start>è¿™æ­¥è°ƒå‚ï¼ŒæŸ¥çœ‹ä¸åŒçš„deleteNså¯¹æ¨¡å‹æ•ˆæœçš„å½±å“</p><p style=text-align:start>In [179]:</p><pre><code>print ("start")## æ–‡æœ¬é¢„å¤„ç†folder_path = './Database/SogouC/Sample'all_words_list, train_data_list, test_data_list, train_class_list, test_class_list = text_processing(folder_path, test_size=0.2)# ç”Ÿæˆstopwords_setstopwords_file = './stopwords_cn.txt'stopwords_set = make_word_set(stopwords_file)## æ–‡æœ¬ç‰¹å¾æå–å’Œåˆ†ç±»# flag = 'nltk'flag = 'sklearn'deleteNs = range(0, 1000, 20)test_accuracy_list = []for deleteN in deleteNs:    # feature_words = words_dict(all_words_list, deleteN)    feature_words = words_dict(all_words_list, deleteN, stopwords_set)    train_feature_list, test_feature_list = text_features(train_data_list, test_data_list, feature_words, flag)    test_accuracy = text_classifier(train_feature_list, test_feature_list, train_class_list, test_class_list, flag)    test_accuracy_list.append(test_accuracy)print (test_accuracy_list)# ç»“æœè¯„ä»·#plt.figure()plt.plot(deleteNs, test_accuracy_list)plt.title('Relationship of deleteNs and test_accuracy')plt.xlabel('deleteNs')plt.ylabel('test_accuracy')plt.show()#plt.savefig('result.png')print ("finished")</code></pre><pre><code>start[0.6842105263157895, 0.6842105263157895, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.6842105263157895, 0.6842105263157895, 0.6842105263157895, 0.6842105263157895, 0.6842105263157895, 0.6842105263157895, 0.7368421052631579, 0.7368421052631579, 0.7894736842105263, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.7368421052631579, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7894736842105263, 0.7368421052631579, 0.6842105263157895, 0.6842105263157895, 0.6842105263157895, 0.7368421052631579, 0.7368421052631579, 0.6842105263157895, 0.7368421052631579, 0.6842105263157895, 0.6842105263157895, 0.7368421052631579, 0.6842105263157895, 0.631578947368421, 0.6842105263157895, 0.6842105263157895, 0.7368421052631579, 0.7894736842105263, 0.7894736842105263, 0.7368421052631579, 0.7368421052631579, 0.7894736842105263]</code></pre><div class=pgc-img><img alt=æ–‡æœ¬åˆ†ç±»é—®é¢˜ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3215fced01ca4a82a890cc4c8539a370><p class=pgc-img-caption></p></div><pre><code>finished</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'åˆ†ç±»','é—®é¢˜','æ–‡æœ¬'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>