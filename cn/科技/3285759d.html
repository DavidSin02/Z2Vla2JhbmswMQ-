<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>2.8 常用的汇编指令 | 极客快訊</title><meta property="og:title" content="2.8 常用的汇编指令 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/1535072325746367d68b787"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3285759d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3285759d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3285759d.html><meta property="article:published_time" content="2020-11-14T21:04:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:32+08:00"><meta name=Keywords content><meta name=description content="2.8 常用的汇编指令"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/3285759d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>2.8 常用的汇编指令</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>2.8 常用的汇编指令</strong></h1><p><strong>本节必须掌握的知识点：</strong></p><p>汇编指令</p><p>多动手实验，知道每个指令的功能</p><p>在此节之前汇编课程主要讲了两个问题，第一个问题是数据可以存哪？内存和寄存器。第二个问题是这些数据是如何存放的？我们介绍了两种模式：一个是小端存储，一个是大端存储。如果要处理数据，我们就要使用汇编指令。什么是汇编指令哪？在介绍汇编指令之前需要把它是什么搞清楚。</p><p><strong>2.8.1【汇编指令】</strong></p><p>汇编指令是汇编语言中使用的一些操作符和助记符,还包括一些伪指令(如assume,end)。用于告诉【汇编程序】如何执行【汇编指令】，它既不控制机器的操作也不被汇编编成机器代码，只能被汇编程序所识别并指导汇编如何执行。如图2-8-1所示，用黑色框框选出来的，就是汇编区域，一行组合在一起就是汇编指令。</p><p>本节介绍MOV、LEA、ADD、SUB 、AND、 OR、 XOR、 NOT和XCHG指令。</p><p><strong>【MOV指令】</strong></p><p>图2-8-1黑色框选区域中，有MOV DWORD PTR SS:[ESP+8],EBX;这条指令无非就是将EBX的数据移动到[ESP+8]对应的内存地址中去，大家可以反复操作观察。到目前为止，我们已经接触了MOV指令。现在回顾一下MOV指令，MOV指令用于数据移动，既然是移动，那么目的操作数的作用应该相当于一个“容器”，必须是具有大小范围的内存单元或寄存器；源操作数也可以是和目的操作数具有相同数据宽度的通用寄存器和内存单元，也可以是立即数。移动的指令只影响目的操作数的内容，不改变源操作数的内容。具体的指令格式如下：</p><p>1. MOV r/m8,r8 （r 通用寄存器）</p><p>2. MOV r/m16,r16 （m代表内存）</p><p>3. MOV r/m32,r32 （imm 代表立即数）</p><p>4. MOV r8,r/m8 （r8 代表8位通用寄存器）</p><p>5. MOV r16,r/m16 （m8 代表8位内存）</p><p>6. MOV r32,r/m32 （imm8 代表8位立即数）</p><p>7. MOV r8, imm8</p><p>8. MOV r16, imm16</p><p>9. MOV r32, imm32</p><p>【这些格式来源于Intel的白皮书，如果想详细了解MOV或其他汇编指令有哪些形式和用法可以查询Intel白皮书第2卷，第三章和第四章介绍的是汇编指令，所有的Intel的指令都在这里，虽然Intel和AMD是不同的CPU，但是它们都遵循的是80X86架构，绝大多数的指令是一样的。】</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1535072325746367d68b787><p class=pgc-img-caption></p></div><p><strong>【LEA指令】</strong></p><p>介绍了MOV指令，看图2-8-1中有LEA指令，LEA指令和MOV指令一样是移动数据，但是与MOV不同的是，它移动的是“[ ]”里面的内容，例如：LEA EAX,[ECX]中，执行这条指令相当于MOV EAX,ECX。而MOV EAX,[ECX]是把“[ ]”里面的数据当成是内存地址编号，取地址里面的内容。</p><p>我们将MOV EAX,ECX，LEA EAX,[ECX]在软件中编写观察。</p><p>第一步：输入指令，如图2-8-2所示，当前EAX存储的数据为0x002D2BA2,ECA存储的数据为0x00000000。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1535072344638d1d3a1b664><p class=pgc-img-caption></p></div><p>第二步：按F8一次观察,如图2-8-3所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153507235925238c3f11b5d><p class=pgc-img-caption></p></div><p>第三步：由于EAX和ECX存储的数据都一样，我们改ECX存储的数据，更改为0x11111111。</p><p>选中ECX存储的数据0x00000000，右键弹出对话框，选择Modify，弹出对话框如图2-8-4所示，在黑色框选部分修改成0x11111111,如图2-8-5所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535072391128482a4de362><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535072396145cdc367b3fc><p class=pgc-img-caption></p></div><p>第四步：按F8观察，如图2-8-6对比这两条指令是否做着同样的工作。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153507241413959b956d784><p class=pgc-img-caption></p></div><p>经过实验表明，两个指令干了同一件事。自己动手实验完成下面例题并观察EAX与EDX里面的数据是否相同，总结这些指令都做了什么。</p><p>例：</p><p>MOV ECX,0x0012FF80 【0x0012FF80,该内存地址是已经申请过的，所以只要堆栈窗口中出现的内存地址，都可以使用】</p><p>MOV EAX,DWORD PTR DS:[ECX]</p><p>LEA EDX,DWORD PTR DS:[ECX]</p><p>LEA指令格式如下：</p><p>1、LEA r16,m16</p><p>2、LEA r32,m32</p><p>LEA指令它的源操作数只能是内存，目标操作数就只能是寄存器，不能操作8位数。</p><p><strong>【ADD指令】</strong></p><p>ADD表示“加”，“ADD 目标操作数，源操作数”：目标操作数+源操作数的结果保存在目标操作数中，举例说明ADD EAX,0x00000004,我们在软件中观察EAX的变化。</p><p>第一步：输入指令，为了方便观察我们手动更改EAX寄存器的数据，更改为：0x00000000，如图2-8-7所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535072431060b1843e3b44><p class=pgc-img-caption></p></div><p>第二步：按F8观察，EAX存储的数据的变化，如图2-8-8所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535072444514f31be07af5><p class=pgc-img-caption></p></div><p>F8单步执行完，我们看到了EAX存储的数据发生了变化，变为了EAX原本存储的数据+0x00000004的数据。这就是ADD指令的大致做的工作。</p><p>ADD指令格式如下：</p><p>1. ADD r/m8,r8</p><p>2. ADD r/m16,r16</p><p>3. ADD r/m32,r32</p><p>4. ADD r8,r/m8</p><p>5. ADD r16,r/m16</p><p>6. ADD r32,r/m32</p><p>7. ADD r8/m8,imm8</p><p>8. ADD r16/m16,imm16</p><p>9. ADD r32/m32,imm32</p><p>例：</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><p>ADD EAX,ECX 寄存器到寄存器</p><p>ADD ECX,DWORD PTR DS:[0x0012FFC4] 内存到寄存器</p><p>ADD DWORD PTR DS:[0x0012FFC4],0x12 立即数到内存</p><p><strong>【SUB指令】</strong></p><p>SUB表示“减”，“SUB 目标操作数，源操作数”：目标操作数-源操作数的结果保存在目标操作数中，它的格式同MOV、ADD一样。举例说明SUB EAX,0x00000004,我们在软件中观察EAX的变化。</p><p>第一步：输入指令，EAX当前存储的数据为0x00000004如图2-8-9所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153507246416881b79ee1bc><p class=pgc-img-caption></p></div><p>第二步：按F8执行之后观察EAX存储的数据变化，如图2-8-10所示。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1535072474982cf04d7fad6><p class=pgc-img-caption></p></div><p>F8单步执行完，我们看到了EAX存储的数据发生了变化，变为了EAX原本存储的数据-0x00000004的数据。这就是SUB指令的大致做的工作。</p><p>例：</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><p>SUB EAX,ECX 寄存器到寄存器</p><p>SUB ECX,DWORD PTR DS:[0x0012FFC4] 内存到寄存器</p><p>SUB DWORD PTR DS:[0x0012FFC4],0x12 立即数到内存</p><p><strong>【AND指令】</strong></p><p>AND表示“与”，“AND 目标操作数，源操作数”：目标操作数与源操作数做“与运算”，结果保存在目标操作数中。</p><p>例：</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><p>MOV AL, 0x01</p><p>AND AL, 0x10</p><p><strong>【OR指令】</strong></p><p>OR表示“或”，“OR 目标操作数，源操作数”：目标操作数与源操作数做“或运算”，结果保存在目标操作数中。</p><p>例：</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><p>MOV AL, 0x11</p><p>OR AL, 0x10</p><p><strong>【XOR指令】</strong></p><p>XOR表示“异或”，“XOR 目标操作数，源操作数”：目标操作数与源操作数做“异或运算”，结果保存在目标操作数中。</p><p>例：</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><p>MOV AL, 0x11</p><p>XOR AL, 0x11</p><p><strong>【NOT指令】</strong></p><p>这个指令和上面的指令有所区别，它的意思是对某个值求反，只涉及一个数，所以它的 格式如下：</p><p>NOT r/m8</p><p>NOT r/m16</p><p>NOT r/m32</p><p><strong>【XCHG指令】</strong></p><p>CHG表示英文change，表示两个容器交换数据，源操作数不能是立即数，主要功能将一个字节或一个字的源操作数和目的操作数相交换。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153507254290196011d7ddd><p class=pgc-img-caption></p></div><p>交换指令可以在寄存器之间，寄存器与存储器之间进行，具体形式如下：</p><p>XCHG r8/m8,r8</p><p>XCHG r16/m16,r16</p><p>XCHG r32/m32,r32</p><p>XCHG r8,m8</p><p>XCHG r16,m16</p><p>XCHG r32,m32</p><p>自己动手实验完成下面例题并观察总结这些指令都做了什么。</p><div class=pgc-img><img alt="2.8 常用的汇编指令" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153507258465426c5ec9b41><p class=pgc-img-caption></p></div><p><strong>注意XCHG指令在使用时记住以下几点：</strong></p><p>1、不能同时都为内存操作数</p><p>2、任何一个操作数都不能为段寄存器</p><p>3、任何一个操作数不能为立即数</p><p>4、两个操作数的长度必须相等</p><p>下节介绍内存复制。</p><p><strong>练习：</strong></p><p>1、已知EAX=0x00000008，ECX=0x0000000F，执行下面语句后，求EDX的数据</p><p>LEA EDX,DWORD PTR DS:[EAX+ECX]</p><p>2、已知EAX=0xFFFFFFFF，ESP=0x00000002，执行下面语句后，求EDX的数据</p><p>LEA EDX,DWORD PTR DS:[EAX+ESP*2]</p><p>3、已知EAX=01011100 ECX=11101111，EDX=11101110,执行下面语句后，求EDX的数据</p><p>LEA EDX,DWORD PTR DS:[EAX+ECX*2]</p><p>4、使用 MOV指令、ADD指令、SUB指令、AND指令、OR指令、XOR指令和 NOT指令 中的每一种格式做一个实验观察执行后的效果。（本节内容中已经把格式写出来，主要目的是锻炼动手能力）。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'2.8','指令','常用'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>