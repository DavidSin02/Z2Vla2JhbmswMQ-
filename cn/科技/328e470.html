<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>华为三层交换机5700系列配置方法示例教程注意事项 | 极客快訊</title><meta property="og:title" content="华为三层交换机5700系列配置方法示例教程注意事项 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/90ba0179312d48dd93e698b18c72a892"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/328e470.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/328e470.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/328e470.html><meta property="article:published_time" content="2020-10-29T20:51:46+08:00"><meta property="article:modified_time" content="2020-10-29T20:51:46+08:00"><meta name=Keywords content><meta name=description content="华为三层交换机5700系列配置方法示例教程注意事项"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/328e470.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>华为三层交换机5700系列配置方法示例教程注意事项</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>说说遇见一个故障，新机5700，连接 5720，光口不亮，测试各部分无故障，百思不得其姐，问华为，告之，结果，是要注意，5720并不是全自适应。</p><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/90ba0179312d48dd93e698b18c72a892><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/78c4f9cf3485455c9a711ed7a3807549><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/21894e743a8c438abf76881db5432e8f><p class=pgc-img-caption></p></div><p>马上换上，光亮，问题解决</p><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a15d043e52884c76be6a9496bc99fb7b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8f055ad727904ef68b908dbeca936c5d><p class=pgc-img-caption></p></div><p>整理一下，方便使用</p><p><strong>　华为交换机配置</strong></p><p>首先需要使用通讯控制线缆(包装中附)连接<u>电脑</u>和交换机，一头接交换机的Console口，一头接电脑com口(应该需要串口,没有的话得用USB转串口).</p><p>在PC机上运行终端仿真程序，设置终端通信参数为：波特率为9600bit/s、8位数据位、1位停止位、无校验和无流控，并选择终端类型为VT100.</p><p>(<u>win7</u>是不带终端仿真程序的，可以自行从网上搜索下载“win7 超级终端”)</p><div class=pgc-img><img alt=华为三层交换机5700系列配置方法示例教程注意事项 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3b6c5a86ca8a474fae5bb78c6a228cdd><p class=pgc-img-caption></p></div><p>第一次连接上交换机后，会提示你配置交换机的管理密码，输入后回车，再输入一次确认回车。</p><p>此时来到<u>命令</u>行</p><p>&lt;Quidway></p><p>默认交换机是没有初始IP的，那么我们先来配置一个(同时将电脑网线与交换机上的任意以太网口连接)</p><p>&lt;Quidway>sys</p><p>[Quidway]int vlan 1</p><p>[Quidway vlan 1]ip add 192.168.1.2 255.255.255.0 (这里配置的IP地址要和电脑网线IP是同个网段哦，访问web界面要用)</p><p>[Quidway vlan 1]q</p><p>[Quidway]q</p><p>好的，交换机IP配置完毕。</p><p>&lt;Quidway>dir</p><p>发现有个web.7z的文件，这就是web管理页面的文件包，记下完整文件名下面要用。</p><p>&lt;Quidway>sys (进入系统视图)</p><p>[Quidway]http server load web.7z (加载web包)</p><p>[Quidway]http server enable (开启http服务)</p><p>[Quidway]aaa (进入aaa视图)</p><p>[Quidway-aaa]local-user admin password cipher admin123 (配置管理账号与密码)</p><p>[Quidway-aaa]local-user admin privilege level 3 (配置管理账号级别)</p><p>[Quidway-aaa]local-user admin service-type http (配置接入类型为http)</p><p>[Quidway-aaa]q (退出)</p><p>[Quidway]q (退出)</p><p>&lt;Quidway>save (保存)</p><p>Y (确认)</p><p>卡摸北鼻~!现在打开浏览器登录你刚才给交换机配置的IP吧，</p><h1>示例教程</h1><p>华为三层交换机5700系列配置示例教程。配置说明 配置华为交换机的注意事项(针对5700系列) 默认情况下，华为设备管理地址为192 168 1 253 24， 账号 admin, 密码 admin@huawei com 如果有web界面管理功能。</p><p>配置说明 配置华为交换机的注意事项(针对5700系列) 默认情况下，华为设备管理地址为192.168.1.253/24， 账号 admin, 密码 admin@huawei.com 如果有web界面管理功能，可以尝试使用ETH口登陆，如果登陆不上，可以按住MODE键6s,重置，打开web登陆功能。 在配三层交换机配置vlan时，默认情况下不同的vlan网段是可以通过路由互通的，不用额外配置(如思科等设备需要开启ip routing) 如果要对端口批量操作，如配置vlan，可以先创建一个组,使用 port-group GROUP-NAME命令创建组，并通过group-member GigabitEthernet 0/0/1 to GigabitEthernet 0/0/20来批量添加组员，以后需要对这些端口操作进入此group就可以了。 如果要对不同的vlan网络隔离，需要配置ACL策略。 在使用PC机进行测试时，要关闭无线和其他的虚拟网卡，并确认关闭防火墙，排除测试干扰因素。 实现方式</p><p>三层核心交换机在配置多个不同网段互联时，有以下两种方式：</p><p>1. 单臂路由方式: 三层核心交换机配置多网络vlan，与上联汇聚层设备接口使用trunk透传，上联防火墙或路由器创建子接口并对应VLAN作为网关，vlan间的数据路由在上联设备完成。</p><p>单臂路由方式：</p><p>2. 静态路由方式: 三层核心交换机作为接入设备，配置多网络vlan，并创建网关，上联接口配置静态IP，交换机和上联设备添加静态路由，vlan之间的数据路由在接入交换机上完成。</p><p>静态路由方式：</p><p>设备配置 单臂路由方式(Trunk)</p><p>路由器：</p><p>LAN1: 192.168.1.1 下一跳地址： 192.168.1.2</p><p>SW1</p><p>GE1/0/1: 192.168.1.2 VLAN 1 GE1/0/2: TRUNK 允许 VLAN 2 3 GE1/0/3: 192.168.4.1 VLAN 4</p><p>SW2</p><p>GE1/0/1: TRUNK VLAN 2 3 GE1/0/23: 192.168.2.1/24 VLAN 2 GE1/0/24: 192.168.3.1/24 VLAN 3</p><p>SW3默认不用配置，充当二层交换机</p><p>配置思路</p><p>采用如下的思路配置汇聚层设备作为网关实现不同网段用户间的通信：</p><p>配置接入交换机，基于接口划分VLAN，实现二层互通。 配置汇聚交换机作为用户PC的网关，实现不同网段用户PC间的三层互通。 配置汇聚交换机与路由器相连的接口，实现与路由器的互连。 1.路由器配置</p><p>路由器(或者防火墙)的配置非常简单，只需要在LAN口配置静态IP，并配置上到网关交换机的静态路由地址。</p><p># 配置子接口，lan</p><p>interface Vlanif1</p><p>ip address 192.168.1.1 255.255.255.0</p><p># 配置静态路由,内网的下一跳地址为汇聚交换机的接口地址</p><p>ip route-static 192.168.0.0 255.255.0.0 192.168.1.2</p><p>2.交换机SW2配置</p><p>1.创建VLAN。</p><p>system-view</p><p>[HUAWEI] sysname SW2 # 修改设备的名称为SW2，便于识别</p><p>[SW2] vlan batch 2 3 //批量创建VLAN 2和VLAN 3</p><p>[SW2] interface gigabitethernet 1/0/23</p><p>[SW2-GigabitEthernet1/0/23] port link-type access //将与PC相连接口的接口类型设置为access</p><p>[SW2-GigabitEthernet1/0/23] port default vlan 2 //将PC1划分到VLAN 2</p><p>[SW2-GigabitEthernet1/0/23] quit</p><p>[SW2] interface gigabitethernet 1/0/24</p><p>[SW2-GigabitEthernet1/0/24] port link-type access</p><p>[SW2-GigabitEthernet1/0/24] port default vlan 3 //将PC2划分到VLAN 3</p><p>[SW2-GigabitEthernet1/0/24] quit</p><p>[SW2] interface gigabitethernet 1/0/1</p><p>[SW2-GigabitEthernet1/0/1] port link-type trunk //将与汇聚交换机相连接口的接口类型设置为trunk</p><p>[SW2-GigabitEthernet1/0/1] port trunk allow-pass vlan 2 3 //透传VLAN 2和VLAN 3到汇聚交换机SW1</p><p>[SW2-GigabitEthernet1/0/1] quit</p><p>3.配置汇聚交换机SW1</p><p>1.创建vlan</p><p>system-view</p><p>[HUAWEI] sysname SW1 //修改设备的名称为SW1</p><p>[SW1] vlan batch 2 to 4 //批量创建VLAN 2到VLAN 4</p><p>2.将连接PC的接口加入相应VLAN。</p><p>[SW1] interface gigabitethernet 1/0/2</p><p>[SW1-GigabitEthernet1/0/2] port link-type trunk //将与SW1相连接口的接口类型设置为trunk</p><p>[SW1-GigabitEthernet1/0/2] port trunk allow-pass vlan 2 3 //透传VLAN 2和VLAN 3</p><p>[SW1-GigabitEthernet1/0/2] quit</p><p>[SW1] interface gigabitethernet 1/0/3</p><p>[SW1-GigabitEthernet1/0/3] port link-type access //将与PC3相连接口的接口类型设置为access</p><p>[SW1-GigabitEthernet1/0/3] port default vlan 4 //将PC3划分到VLAN 4</p><p>[SW1-GigabitEthernet1/0/3] quit</p><p>3.配置VLANIF接口，作为用户PC的网关。</p><p>[SW1] interface vlanif 2 //创建VLANIF2接口</p><p>[SW1-Vlanif2] ip address 192.168.2.1 24 //配置IP地址，此IP地址是PC1的网关地址</p><p>[SW1-Vlanif2] quit</p><p>[SW1] interface vlanif 3 //创建VLANIF3接口</p><p>[SW1-Vlanif3] ip address 192.168.3.1 24 //配置IP地址，此IP地址是PC2的网关地址</p><p>[SW1-Vlanif3] quit</p><p>[SW1] interface vlanif 4 //创建VLANIF4接口</p><p>[SW1-Vlanif4] ip address 192.168.4.1 24 //配置IP地址，此IP地址是PC3的网关地址</p><p>[SW1-Vlanif4] quit</p><p>将连接路由器的接口加入相应VLAN。</p><p>[SW1] interface Vlanif1</p><p>[SW1] ip address 192.168.1.1 255.255.255.0</p><p>[SW1] interface gigabitethernet 1/0/1</p><p>[SW1-GigabitEthernet1/0/1] port link-type access //将与路由器相连接口的接口类型设置为access，与 路由器通过Untagged方式通信 ，默认为VLAN1</p><p>[SW1-GigabitEthernet1/0/1] quit</p><p>[SW1] ip route-static 0.0.0.0 0.0.0.0 192.168.1.1 // 配置一条到路由器的缺省路由</p><p>4. 检查配置结果</p><p>dis cu</p><p>PC1、PC2、PC3之间可以相互访问，同时PC都可以和路由器进行通信。</p><p>静态路由方式(无trunk)</p><p>路由器</p><p>GE1/0/1: 192.168.1.1</p><p>SW1(可按照如下配置，也可以全部配置为vlan1或vlan5)</p><p>GE1/0/1: 192.168.1.2 VLAN 1 GE1/0/2: 192.168.5.1 VLAN 5 GE1/0/3: 192.168.5.1 VLAN 5</p><p>SW2</p><p>GE1/0/1: 192.168.5.2 VLAN 5 GE1/0/23: 192.168.2.1 VLAN 2 GE1/0/24: 192.168.3.1 VLAN 3</p><p>SW3</p><p>GE1/0/1: 192.168.5.3 VLAN 5 GE1/0/2: 192.168.4.1 VLAN 4 配置思路</p><p>采用如下的思路配置接入层设备作为网关实现不同网段用户间的通信：</p><p>配置接入交换机，基于接口划分VLAN，实现二层互通。 配置接入交换机作为PC的网关，实现不同网段用户间通信。 配置汇聚交换机静态路由，实现用户和路由器的互通 1.路由器配置</p><p>路由器(或者防火墙)的配置非常简单，只需要在LAN口配置静态IP，并配置上到网关交换机的静态路由地址。</p><p># 配置子接口，lan</p><p>interface Vlanif1</p><p>ip address 192.168.1.1 255.255.255.0</p><p># 配置静态路由</p><p>ip route-static 192.168.0.0 255.255.0.0 192.168.1.2</p><p>2.交换机SW2配置 创建VLAN。</p><p>system-view</p><p>[HUAWEI] sysname SW2 //修改设备的名称为SW2，便于识别</p><p>[SW2] vlan batch 2 to 3 //批量创建VLAN 2和VLAN</p><p>将接口加入相应VLAN</p><p>[SW2] interface gigabitethernet 1/0/23</p><p>[SW2-GigabitEthernet1/0/23] port link-type access //将与PC相连接口的接口类型设置为access</p><p>[SW2-GigabitEthernet1/0/23] port default vlan 2 //将PC1划分到VLAN 2</p><p>[SW2-GigabitEthernet1/0/23] quit</p><p>[SW2] interface gigabitethernet 1/0/24</p><p>[SW2-GigabitEthernet1/0/24] port link-type access</p><p>[SW2-GigabitEthernet1/0/24] port default vlan 3 //将PC2划分到VLAN 3</p><p>[SW2-GigabitEthernet1/0/24] quit</p><p>配置VLANIF接口，作为用户PC的网关。</p><p>[SW2] interface vlanif 2 //创建VLANIF2接口</p><p>[SW2-Vlanif2] ip address 192.168.2.1 24 //配置IP地址，此IP地址是PC1的网关地址</p><p>[SW2-Vlanif2] quit</p><p>[SW2] interface vlanif 3 //创建VLANIF3接口</p><p>[SW2-Vlanif3] ip address 192.168.3.1 24 //配置IP地址，此IP地址是PC2的网关地址</p><p>[SW2-Vlanif3] quit</p><p>4.配置SW2和SW1互连</p><p>[SW2] vlan batch 5 //创建VLAN 5</p><p>[SW2] interface gigabitethernet 1/0/1</p><p>[SW2-GigabitEthernet1/0/1] port link-type access</p><p>[SW2-GigabitEthernet1/0/1] port default vlan 5 //SW2和SW1以Untagged方式通信</p><p>[SW2-GigabitEthernet1/0/1] quit</p><p>[SW2] interface vlanif 5 //创建VLANIF5接口</p><p>[SW2-Vlanif5] ip address 192.168.5.2 24 //配置IP地址，此IP地址是SW2与SW1互连接口的IP地址</p><p>[SW2-Vlanif5] quit</p><p>[SW2] ip route-static 0.0.0.0 0.0.0.0 192.168.5.1 //配置缺省路由，为PC用户找到访问路由器的出口。 缺省路由的下一跳是SW1相连接口的IP地址</p><p>3.配置接入交换机SW3 创建VLAN</p><p>system-view</p><p>[HUAWEI] sysname SW3 //修改设备的名称为SW3</p><p>[SW3] vlan batch 4 //批量创建VLAN 4</p><p>将接口加入相应VLAN。</p><p>[SW3] interface gigabitethernet 1/0/2</p><p>[SW3-GigabitEthernet1/0/2] port link-type access //将与PC相连接口的接口类型设置为access</p><p>[SW3-GigabitEthernet1/0/2] port default vlan 4 //将PC3划分到VLAN 4</p><p>[SW3-GigabitEthernet1/0/2] quit</p><p>配置SW3和SW1互连</p><p>[SW3] vlan batch 5 //创建VLAN 5</p><p>[SW3] interface gigabitethernet 1/0/1</p><p>[SW3-GigabitEthernet1/0/1] port link-type access</p><p>[SW3-GigabitEthernet1/0/1] port default vlan 5 //SW3和SW1以Untagged方式通信</p><p>[SW3-GigabitEthernet1/0/1] quit</p><p>[SW3] interface vlanif 5 //创建VLANIF5接口</p><p>[SW3-Vlanif5] ip address 192.168.5.3 24 //配置IP地址，此IP地址是SW3与SW1互连接口的IP地址</p><p>[SW3-Vlanif5] quit</p><p>[SW3] ip route-static 0.0.0.0 0.0.0.0 192.168.5.1 //配置缺省路由，为PC用户指定访问路由器的出口。 缺省路由的下一跳是SW1相连接口的IP地址</p><p>4.配置汇聚交换机SW1 创建VLAN</p><p>system-view</p><p>[HUAWEI] sysname SW1 //修改设备的名称为SW1</p><p>[SW1] vlan batch 5 //批量创建VLAN 5</p><p>将连接PC的接口加入相应VLAN</p><p>[SW1] interface gigabitethernet 1/0/1</p><p>[SW1-GigabitEthernet1/0/1] port link-type access //将与路由器相连接口的接口类型设置为access</p><p>[SW1-GigabitEthernet1/0/1] port default vlan 1</p><p>[SW1-GigabitEthernet1/0/1] quit</p><p>[SW1] interface gigabitethernet 1/0/2</p><p>[SW1-GigabitEthernet1/0/2] port link-type access //将与SW2相连接口的接口类型设置为access</p><p>[SW1-GigabitEthernet1/0/2] port default vlan 5</p><p>[SW1-GigabitEthernet1/0/2] quit</p><p>[SW1] interface gigabitethernet 1/0/3</p><p>[SW1-GigabitEthernet1/0/3] port link-type access //将与SW3相连接口的接口类型设置为access</p><p>[SW1-GigabitEthernet1/0/3] port default vlan 5</p><p>[SW1-GigabitEthernet1/0/3] quit</p><p>3.配置VLANIF接口，实现和路由器的互连</p><p>[SW1] interface vlanif 5 //创建VLANIF5接口</p><p>[SW1-Vlanif5] ip address 192.168.5.1 24 //配置IP地址，此IP地址是与接入交换机对接的IP地址</p><p>[SW1-Vlanif5] quit</p><p>[SW1] interface vlanif 1</p><p>[SW1-Vlanif1] ip address 192.168.1.2 24 //配置IP地址，此IP地址是与路由器对接的IP地址</p><p>[SW1-Vlanif1] quit</p><p>配置回程明细路由，实现内网网段之间互访。</p><p>[SW1] ip route-static 192.168.2.0 255.255.255.0 192.168.5.2 //目的IP是192.168.2.0/24网段的，下 一跳是192.168.5.2，该IP地址对应SW2相连接口VLANIF的IP地址</p><p>[SW1] ip route-static 192.168.3.0 255.255.255.0 192.168.5.2 //目的IP是192.168.3.0/24网段的，下 一跳是192.168.5.2，该IP地址对应SW2相连接口VLANIF的IP地址</p><p>[SW1] ip route-static 192.168.4.0 255.255.255.0 192.168.5.3 //目的IP是192.168.4.0/24网段的，下 一跳是192.168.5.3，该IP地址对应SW3相连接口VLANIF的IP地址</p><p>配置缺省路由，实现内网网段到路由器的访问</p><p>[SW1] ip route-static 0.0.0.0 0.0.0.0 192.168.1.1 //假设路由器与SW1相连接口的IP地址是 192.168.1.1</p><p>5.检查配置结果</p><p>PC1、PC2、PC3之间可以相互访问，同时PC都可以和路由器进行通信。</p><p>补充说明 如果要在网关上开启DHCP，使用如下命令</p><p># 全局开启dhcp</p><p>dhcp enable</p><p>dhcp server database enable</p><p># 在子接口上配置dhcp</p><p>interface Vlanif20</p><p>ip address 192.168.20.254 255.255.255.0</p><p>dhcp select interface</p><p># 设置保留分配的IP</p><p>dhcp server excluded-ip-address 192.168.20.201 192.168.20.253</p><p># 设置DHCP缓存时间</p><p>dhcp server lease day 0 hour 8 minute 0</p><p># 设置DNS</p><p>dhcp server dns-list 8.8.8.8 114.114.114.114</p><p>设置ETH管理接口IP</p><p>interface MEth 0/0/1</p><p>ip address 192.168.0.1 24</p><h1>华为S5700交换机初始化和配置SSH和TELNET远程登录方法</h1><p><strong>基础设置：</strong></p><p>配置登陆IP地址</p><p>&lt;Quidway> system-view //进入系统配置模式</p><p>[Quidway]interface Vlanif 1 //进入三层 vlanif 接口</p><p>[Quidway-Vlanif1]ip address 192.168.0.1 255.255.255.0 //配置管理 IP 地址</p><p>创建web登录管理账号</p><p>[Quidway]http server enable ///系统视图下开启http服务</p><p>[Quidway]http secure-server enable ///系统视图下开启http安全服务 即https</p><p>[Quidway]aaa //系统视图下进入aaa模式</p><p>[Quidway-aaa]local-user admin privilege level 15 ///配置 http 登录名权限</p><p>[Quidway-aaa]local-user admin service-type http /// 开启 http 登录服务</p><p>[Quidway-aaa]quit /// 退出aaa模式</p><p>如果telnet能登录，但console反而不能登录的话，则需在aaa里 把要登录的 账户 赋予权限</p><p>[Quidway-aaa]local-user admin service-type terminal ssh telnet ftp</p><p>创建vlan</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]vlan 10 ///创建vlan 10</p><p>[Quidway-vlan10]quit ///退出系统配置模式</p><p>[Quidway]interface Vlanif 10 ///进入配置vlan 10的模式</p><p>[Quidway-Vlanif10]ip address 192.168.0.1 255.255.255.0 ///为vlan 10配置IP地址和掩码</p><p>[Quidway-vlan10]quit ///退出系统配置模式</p><p>[Quidway-GigabitEthernet0/0/2] ///进入端口2</p><p>[Quidway-GigabitEthernet0/0/2]port link-type access ///端口类型设置为access</p><p>[Quidway-GigabitEthernet0/0/2]port default vlan 10 ///将port加入到我们创建好的vlan 10</p><p>[Quidway-GigabitEthernet0/0/2]display vlan ///查看配置的vlan信息</p><p>[Quidway]q ///退出系统设置视图</p><p>批量创建vlan</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]vlan batch 2 to 19 ///批量创建vlan 2-19 ，系统都会有一个默认的vlan 1</p><p>[Quidway]display vlan ///查看vlan信息</p><p>[Quidway]q ///退出系统设置视图</p><p>批量删除vlan</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]undo vlan batch 2 to 19 ///批量删除vlan 2-19 ，系统都会有一个默认的vlan 1</p><p>[Quidway]display vlan ///查看vlan信息</p><p>[Quidway]q ///退出系统设置视图</p><p>批量把端口加入到vlan 10</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]interface range GigabitEthernet 0/0/1 to GigabitEthernet 0/0/6</p><p>///将1口到6口添加到port-group，此处系统默认的给1口到6口添加到1个组里了。</p><p>[Quidway-port-group]port link-type access ///将port-group组内的端口全部改为access口</p><p>[Quidway-port-group]port default vlan 10 ///将port-group组内的端口全部加入到vlan 10</p><p>[Quidway]q ///退出系统设置视图</p><p>或者先创建一个端口组，再添加到vlan中</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]port-group 1 ///创建端口组，组名为1</p><p>[Quidway-port-group-1]group-member GigabitEthernet 0/0/7 to GigabitEthernet 0/0/17 ///把端口7到17添加到端口组1中</p><p>[Quidway-port-group-1]port link-type access　///将port-group-1组内的端口全部改为access口</p><p>[Quidway-port-group-1]port default vlan 20 ///将port-group-1组内的端口全部加入到vlan 20</p><p>[Quidway-port-group-1]display vlan ///查看配置的vlan信息</p><p>[Quidway-port-group-1]q ///退出端口组1的配置模式</p><p>[Quidway]q ///退出系统设置视图</p><p>删除vlan----需要先删除vlanif信息---再删vlan</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]undo interface Vlanif 10 ///删除vlanif 10</p><p>[Quidway]display vlan ///查看vlan配置</p><p>[Quidway]display current-configuration ///发现vlan配置还在，vlanif配置已经不在</p><p>[Quidway]undo vlan 10 ///删除vlan 10</p><p>[Quidway]display vlan ///查看vlan配置，发现vlan 10已经不在</p><p>[Quidway]display current-configuration ///发现vlan配置不在，vlanif配置也不在，但是port信息还有，单独删port信息太慢</p><p>批量删除port信息</p><p>对于上面我们已经把vlanif信息删除，vlan删除，但是display current-configuration发现</p><p>之前创建的port信息还是在的，一个一个删太慢，这里我们还创建组去删</p><p>&lt;Quidway>system-view ///进入系统配置模式</p><p>[Quidway]port-group 2 ///创建port组2</p><p>[Quidway-port-group-2]group-member GigabitEthernet 0/0/1 to GigabitEthernet 0/0/6 ///将1口到6口加入到port组2中</p><p>[Quidway-port-group-2]undo port default vlan ///将port组2内的端口vlan配置全部删除</p><p>[Quidway-port-group-2]undo port link-type ///将port组2内的端口类型全部恢复到默认</p><p>[Quidway-port-group-2]display current-configuration ///查看端口信息</p><p>[Quidway-port-group-2]q ///退出端口组1的配置模式</p><p>[Quidway]q ///退出系统设置视图</p><p>华为S5700交换机初始化和配置TELNET远程登录方法：</p><p>1,交换机开启Telnet服务</p><p>&lt;Huawei>system-view #进入系统视图</p><p>[Huawei]telnet server ？ #查看有enable还是disable选项，选择对应的开启方式。</p><p>[Huawei]telnet server enable #enable选项开启Telnet服务 （普通系列一般为这个）</p><p>[Huawei]undo telnet server disable #disable选项开启Telnet服务 （CE高端系列一般为这个）</p><p>2，配置VTY用户界面的最大个数（同时可以登录的最大数）</p><p>[Huawei]user-interface maximum-vty 15 #默认是5，这个可以不设置</p><p>3，配置VTY用户界面的终端属性</p><p>[Huawei]user-interface vty 0 14 #上面是15所有这里是0 14 如果选择默认这里是0 4</p><p>[Huawei-ui-vty0-14]protocol inbound telnet #配置vty支持telnet协议</p><p>4，配置VTY用户界面的用户验证方式</p><p>[Huawei-ui-vty0-14]authentication-mode aaa #配置用户终端的身份验证模式为aaa认证为aaa认证</p><p>[Huawei-ui-vty0-14]quit #退出vty配置界面</p><p>5，配置登录验证方式</p><p>[Huawei]aaa #进入aaa配置模式</p><p>[Huawei-aaa]local-user admin1234 password ? #查看可以选择的密码选择</p><p>[Huawei-aaa]local-user admin1234 password simple Huawei12#$ #密码选项simple 账号admin1234 密码Huawei12#$ (普通系列一般为这个)</p><p>[Huawei-aaa]local-user admin1234 password irreversible-cipher Huawei12#$ #密码选项irreversible-cipher 账号admin1234 密码Huawei12#$ (CE高端系列一般为这个)</p><p>[Huawei-aaa]local-user admin1234 service-type telnet #配置接入服务类型，如果还需要SSH登录请加上</p><p>[Huawei-aaa]local-user admin1234 privilege level 3 #配置账号的级别，默认3级是超级管理员的权限</p><p>[Huawei-aaa]quit #退出</p><p>&lt;Huawei>telnet 127.0.0.1 #测试telnet配置是否OK</p><p>&lt;Huawei>save #保存配置</p><p>===================================================================</p><p>华为S5700交换机初始化和配置SSH和TELNET远程登录方法：</p><p>AAA是指：authentication（认证）、authorization（授权）、accounting（计费）的简称，是网络安全的一种管理机制；Authentication是本地认证/授权，authorization和accounting是由远处radius（远程拨号认证系统）服务或hwtacacs（华为终端访问控制系统）服务器完成认证/授权；AAA是基于用户进行认证、授权、计费的，而NAC方案是基于接入设备接口进行认证的,在实际应用中，可以使用AAA的一种或两种服务。</p><p>如果是一台刚初始化过的华为交换机，需要输入两次相同的密码作为登录交换机的登录密码</p><p>交换机上有console 端口 MEth管理端口 usb端口</p><p>通过串口线配置S5700 的管理IP地址，串口线接在交换机的console口，ip设置完成后网线接在ETH口：</p><p>&lt;Quidway> system-view</p><p>[Quidway] interface MEth 0/0/1</p><p>[Quidway] interface MEth 0/0/1</p><p>[Quidway-MEth0/0/1]ip address x.x.x.x 255.255.255.0 ///设置MEth管理端口的ip地址</p><p>[Quidway-MEth0/0/1]quit</p><p>[Quidway]ip route-static 0.0.0.0 0.0.0.0 x.x.x.x（gateway）</p><p>[Quidway-MEth0/0/1]display ip interface MEth 0/0/1 ///查看MEth管理端口的配置信息</p><p>[Quidway]</p><p>添加用户,设置ssh telent远程登录</p><p>&lt;Quidway> system-view ///进入系统配置模式</p><p>[Quidway]aaa ///进入AAA模式</p><p>[Quidway-aaa]local-user chy password cipher qaz123456 ///设置本地用户名和密码 cipher加密</p><p>[Quidway-aaa]local-user chy service-type ssh telnet terminal ///设置用户设置登录ssh telnet terminal服务</p><p>[Quidway-aaa]display ssh server status ///查看ssh服务是否生效</p><p>[Quidway-aaa]display telnet server status ///查看telnet服务是否生效</p><p>[Quidway-aaa]local-user chy privilege level 15 ///设置用户级别</p><p>[Quidway-aaa]q ///退出AAA模式</p><p>设置vty 0 4远程登陆的虚拟端口</p><p>VTY是路由器的远程登陆的虚拟端口，0 4表示可以同时打开5个会话，line vty 0 4是进入VTY端口，对VTY端口进行配置，比如说配置密码，或者ACL.</p><p>[Quidway]user-interface vty 0 4 ///进入vty 0 4远程虚拟端口</p><p>[Quidway-ui-vty0-4]authentication-mode aaa ///为虚拟用户终端配置AAA身份验证模式</p><p>[Quidway-ui-vty0-4]user privilege level 15 ///为虚拟用户终端配置用户级别</p><p>[Quidway-ui-vty0-4]protocol inbound all ///为虚拟用户终端配置使用的协议，all即都支持</p><p>[Quidway-ui-vty0-4]protocol inbound telnet ///为虚拟用户终端配置telnet协议，即可以使用telnet远程登录</p><p>[Quidway-ui-vty0-4]protocol inbound ssh ///为虚拟用户终端配置ssh协议，即用户可以使用ssh远程登录</p><p>[Quidway]ssh user chy authentication-type password ///为chy用户设置ssh认证为password，此命令对设置单一用户设置来说比较实用</p><p>[Quidway]ssh authentication-type default password ///设置ssh默认的认证方式为密码认证，对设置多个用户来说很实用</p><p>[Quidway]ssh user chy service-type stelnet ///为chy用户设置ssh认证服务类型为stelnet</p><p>[Quidway]display ssh user-information chy ///查看ssh服务chy用户的配置信息</p><p>[Quidway]q ///退出系统设置视图</p><p>&lt;Quidway>save ///保存设置</p><p>===================================================================</p><p>网摘文章一：</p><p>一、通过串口线配置S5700 的管理IP地址和网关，串口线接在交换机的console口，ip设置完成后网线接在ETH口：</p><p>&lt;Quidway> system-view</p><p>[Quidway] interface Meth 0/0/1</p><p>[Quidway-Meth0/0/1]ip address x.x.x.x 255.255.255.0</p><p>[Quidway-Meth0/0/1]quit</p><p>[Quidway]ip route-static 0.0.0.0 0.0.0.0 x.x.x.x（gateway）</p><p>[Quidway]</p><p>如果交换机没有ETH口，且需要配置VLANIF：</p><p>&lt;Quidway> system-view</p><p>[Quidway] interface vlanif3000</p><p>[Quidway--Vlanif3000]ip address x.x.x.x 255.255.255.0</p><p>[Quidway--Vlanif3000]quit</p><p>[Quidway]ip route-static 0.0.0.0 0.0.0.0 x.x.x.x（gateway）</p><p>[Quidway]</p><p>二、设置telnet登录S5700(eg.设置用户名admin密码112233)：</p><p>&lt;Quidway> system-view</p><p>[Quidway] user-interface vty 0 4</p><p>[Quidway-ui-vty0-4] authentication-mode aaa</p><p>[Quidway-ui-vty0-4]protocal inbound all</p><p>[Quidway-ui-vty0-4] user privilege level 15</p><p>[Quidway-ui-vty0-4]quit</p><p>[Quidway]telnet server enable</p><p>[Quidway] aaa</p><p>[Quidway-aaa] local-user admin password cipher 112233</p><p>[Quidway-aaa] local-user admin service-type telnet</p><p>[Quidway-aaa] local-user admin privilege level 15</p><p>[Quidway-aaa] quit</p><p>三、设置SSH登录5700（eg.设置用户名admin密码112233）:</p><p>[Quidway]rsa local-key-pair create</p><p>The key name will be: Quidway_Host</p><p>% RSA keys defined for Quidway_Host already exist.</p><p>Confirm to replace them? [y/n]:y</p><p>The range of public key size is (512 ~ 2048).</p><p>NOTES: If the key modulus is greater than 512,</p><p>it will take a few minutes.</p><p>Input the bits in the modulus[default = 512]:</p><p>Generating keys...</p><p>...........++++++++++++</p><p>......++++++++++++</p><p>..........++++++++</p><p>...............++++++++</p><p>[Quidway] aaa</p><p>[Quidway-aaa] local-user admin password simple 112233</p><p>[Quidway-aaa] local-user admin service-type ssh</p><p>[Quidway-aaa] local-user admin privilege level 15</p><p>[Quidway-aaa] quit</p><p>[Quidway] stelnet server enable</p><p>Info: Succeeded in starting the Stelnet server.</p><p>[Quidway] ssh authentication-type default password</p><p>[Quidway]quit</p><p>&lt;Quidway> save all</p><p>======================================================================</p><p>华为S5700 Telnet配置</p><p>&lt;Quidway> system-view</p><p>[Quidway] vlan 10</p><p>[Quidway-vlan10] quit</p><p>[Quidway] interface gigabitethernet 0/0/1</p><p>[Quidway-GigabitEthernet0/0/1] port link-type hybrid</p><p>[Quidway-GigabitEthernet0/0/1] port hybrid untagged vlan 10</p><p>[Quidway-GigabitEthernet0/0/1] quit</p><p>[Quidway]interface vlanif 10</p><p>[Quidway-vlanif10] ip address 202.38.160.92 255.255.0.0</p><p>[Quidway-vlanif10] quit</p><p>[Quidway] aaa</p><p>[Quidway-aaa] local-user huawei password cipher hello</p><p>[Quidway-aaa] local-user huawei service-type telnet</p><p>[Quidway-aaa] local-user huawei level 3</p><p>[Quidway-aaa] quit</p><p>[Quidway] user-interface vty 0 4</p><p>[Quidway-ui-vty0-4] authentication-mode aaa</p><p>[Quidway-ui-vty0-4]quit</p><p>[Quidway]quit</p><p>&lt;Quidway>save</p><p>======================================================================</p><p>网摘文章二：</p><p>1.在命令模式下：输入：systerm-view 进入系统视图模式</p><p>2.在系统视图模式命令行下：输入： aaa 进入AAA认证模式</p><p>3.添加远程登陆用户，并设置用户密码及密码加密方式</p><p>进入AAA模式命令行下：</p><p>输入 ：local-user test password cipher welcome</p><p>添加新用户为：test 密码为：welcome 加密模式为：cipher 密文加密</p><p>4.设置完新添加用户后，输入：</p><p>local-user test service-type http ssh telnet web</p><p>设置哪些服务可以通过此test用户进行验证，设置telnet 服务</p><p>5.在AAA模式命令行下：</p><p>设置新添加的用户在命令行可以使用的命令级别，3为最高</p><p>local-user test level 3</p><p>设置完成后输入：quit 退回到系统视图模式</p><p>6.从系统视图模式输入：</p><p>user-interface vty 0 4</p><p>进入远程配置视图模式</p><p>然后在远程配置视图模式下，输入：</p><p>authentication-mode aaa</p><p>此配置意思为，远程连接使用AAA认证模式，远程连接时可以调用AAA模式中的用户来进行登录验证配置完成后保存然后就可以退出交换机了</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'示例','华为','三层'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>