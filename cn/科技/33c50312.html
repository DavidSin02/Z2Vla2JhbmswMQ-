<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 | 极客快訊</title><meta property="og:title" content="编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3746bbc8e4044ff89df7ee405b5a7281"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33c50312.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33c50312.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33c50312.html><meta property="article:published_time" content="2020-11-14T21:04:31+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:31+08:00"><meta name=Keywords content><meta name=description content="编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/33c50312.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>汇编程序从写出到执行的过程：</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3746bbc8e4044ff89df7ee405b5a7281><p class=pgc-img-caption></p></div><p><strong>1 下载汇编器和连接器</strong></p><p>http://xiazai.zol.com.cn/detail/14/132320.shtml#hotArticle</p><p>主要是masm.exe和link.exe，保存到f:\asm目录下</p><p><strong>2 编写汇编程序asm.txt</strong></p><pre>assume CS: codesgcodesg segmentstart: mov AX, 01234 mov BX, 04567 add AX, BX add AX, AX  mov AX, 4C00H int 21Hcodesg endsend</pre><p>assume：含义为“假设”。它假设某一段寄存器和程序中的某一个用 segment … ends 定义的段（指一段内存，通过首地址和偏移来定位内存单元）相关联。</p><p>通过assume说明这种关联，在需要的情况下 ，编译程序可以将段寄存器和某一个具体的段相联系。</p><p>CS（Code Segment），一个代码段寄存器，保存内存段的起始地址。</p><p>codesg：放在segment的前面，作为一个段的名称，这个段的名称最终将被编译、连接程序处理为一个段的段地址。</p><p>segment和ends是一对成对使用的伪指令，这是在写可被编译器编译的汇编程序时，必须要用到的一对伪指令。</p><p>segment和ends的功能是定义一个段，segment说明一个段开始，ends 说明一个段结束。</p><p>一个段必须有一个名称来标识，使用格式为：</p><pre>段名 segment段名 ends</pre><p>一个汇编程序是由多个段组成的，这些段被用来存放代码、数据或当作栈空间来使用。</p><p>一个有意义的汇编程序中至少要有一个段，这个段用来存放代码。</p><p>这个简单的汇编程序实例只用到了三个汇编指令：</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0c73a6aca9534eea98200be6b01f2c38><p class=pgc-img-caption></p></div><p>End 是一个汇编程序的结束标记，编译器在编译汇编程序的过程中，如果碰到了伪指令 end，就结束对源程序的编译。（不要搞混了end和ends）</p><p>如果程序写完了，要在结尾处加上伪指令end 。否则，编译器在编译程序时，无法知道程序在何处结束。</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf31f48b9b5a4d33b2ffb6a5cc9ed065><p class=pgc-img-caption></p></div><p>上面的文件保存到f:\asm下。</p><p><strong>3 编译</strong></p><p>打到cmd，cd /d f:\asm↙</p><p>masm↙asm.txt ↙ ↙ ↙</p><p>会生成一个obj文件；</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/150f63bbf9234df68cb70c11f4910f89><p class=pgc-img-caption></p></div><p><strong>4 连接</strong></p><p>link ↙asm.obj ↙ ↙ ↙ ↙会生成一个asm.exe文件</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e0857a412b2348779015b9c9746737d0><p class=pgc-img-caption></p></div><p><strong>也可以通过以下命令来进行快速编译和连接：</strong></p><p>masm asm.txt↙</p><p>link asm.obj↙</p><p><strong>5 使用Debug 的相关命令来单步执行程序 ，查看每条指令指令的执行结果。</strong></p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/13e044a62d834764965d296ec0effc76><p class=pgc-img-caption></p></div><p>一些寄存器的英文缩写↓</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a421440a31c4b228f7230b7e17fdf7b><p class=pgc-img-caption></p></div><p>cx中存放的是程序的长度。</p><p>在DOS系统中.EXE文件中的程序的加载过程如下：</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/91bb157729bc49c4b3adc636735d6905><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/353124c69dd74a7fb8b8a0a2b56e75d3><p class=pgc-img-caption></p></div><p>程序加载后，ds中存放着程序所在内存区的段地址，这个内存区的偏移地址为 0 ，则程序所在的内存区的地址为：ds:0；</p><p>这个内存区的前256 个字节中存放的是PSP，dos用来和程序进行通信。</p><p>从 256字节处向后的空间存放的是程序。</p><p>所以，我们从ds中可以得到PSP的段地址SA，PSP的偏移地址为 0，则物理地址为SA×16+0。</p><p>因为PSP占256（100H）字节，所以程序的物理地址是：</p><p>SA×16+0+256= SA×16+16×16=（SA+16）×16+0</p><p>可用段地址和偏移地址表示为：SA+10:0。</p><p>用U命令查看一下其他指令：</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e603c876fe84a8b8288840ae8202a8b><p class=pgc-img-caption></p></div><p>用T命令执行程序中的每一条指令，并观察每条指令的执行结果，到了 int 21，我们要用P命令执行：</p><div class=pgc-img><img alt=编程｜汇编器和连接器的下载及汇编、连接、调试一个简单汇编程序 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e9f8914c3b16405b9ef797fcebe39d2e><p class=pgc-img-caption></p></div><p>-End-</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'接器','编程','编器'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>