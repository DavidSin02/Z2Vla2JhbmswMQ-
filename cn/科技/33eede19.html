<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/69f3f9ffaeaa44ddb8450fb744e4013b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33eede19.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/33eede19.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/33eede19.html><meta property="article:published_time" content="2020-11-14T21:04:55+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:55+08:00"><meta name=Keywords content><meta name=description content="ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/33eede19.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p><strong>æ»‘åŠ¨éªŒè¯ç çš„è¯†åˆ«ä»‹ç»</strong></p><p><strong>æœ¬èŠ‚ç›®æ ‡ï¼š</strong></p><p>ç”¨ç¨‹åºè¯†åˆ«æéªŒæ»‘åŠ¨éªŒè¯ç çš„éªŒè¯ï¼ŒåŒ…æ‹¬åˆ†æè¯†åˆ«æ€è·¯ã€è¯†åˆ«ç¼ºå£ä½ç½®ã€ç”Ÿæˆæ»‘å—æ‹–åŠ¨è·¯å¾„ã€æ¨¡æ‹Ÿå®ç°æ»‘å—æ‹¼åˆé€šè¿‡éªŒè¯ç­‰æ­¥éª¤ã€‚</p><div class=pgc-img><img alt=ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/69f3f9ffaeaa44ddb8450fb744e4013b><p class=pgc-img-caption></p></div><p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p><p>æœ¬æ¬¡æ¡ˆä¾‹æˆ‘ä»¬ä½¿ç”¨Pythonåº“æ˜¯Seleniumï¼Œæµè§ˆå™¨ä¸ºChromeã€‚è¯·ç¡®ä¿å·²å®‰è£…Seleniumåº“å’ŒChromeDriveræµè§ˆå™¨é©±åŠ¨ã€‚</p><p><strong>äº†è§£æéªŒæ»‘åŠ¨éªŒè¯ç ï¼š</strong></p><p>æéªŒæ»‘åŠ¨éªŒè¯ç å®˜ç½‘ä¸ºï¼šhttp://www.geetest.com/</p><p>éªŒè¯æ–¹å¼ä¸ºæ‹–åŠ¨æ»‘å—æ‹¼åˆå›¾åƒï¼Œè‹¥å›¾åƒå®Œå…¨æ‹¼åˆï¼Œåˆ™éªŒè¯æˆåŠŸï¼Œå¦åˆ™éœ€è¦é‡æ–°éªŒè¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt=ä¸ƒæ­¥å®Œç¾è§£å†³é—®é¢˜pythonçˆ¬è™«æéªŒæ»‘åŠ¨éªŒè¯ç é—®é¢˜ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b69b93d72ace4607b75606a5f5e36627><p class=pgc-img-caption></p></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬é“¾æ¥åœ°å€ï¼šhttps://account.geetest.com/loginï¼Œæ‰“å¼€æéªŒçš„ç®¡ç†åå°ç™»å½•é¡µé¢ï¼Œå®Œæˆè‡ªåŠ¨åŒ–ç™»å½•æ“ä½œã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><p><strong>â‘  åˆå§‹åŒ–</strong></p><p>åˆå§‹åŒ–é“¾æ¥åœ°å€ã€åˆ›å»ºæ¨¡æ‹Ÿæµè§ˆå™¨å¯¹è±¡ã€è®¾ç½®ç™»å½•è´¦æˆ·å’Œå¯†ç ç­‰ä¿¡æ¯ã€‚</p><pre>EMAIL = 'ç™»å½•è´¦æˆ·'PASSWORD = 'ç™»å½•å¯†ç 'â€‹class CrackGeetest(): def __init__(self): self.url = 'https://account.geetest.com/login' self.browser = webdriver.Chrome() #è®¾ç½®æ˜¾ç¤ºç­‰å¾…æ—¶é—´ self.wait = WebDriverWait(self.browser, 20) self.email = EMAIL self.password = PASSWORDâ€‹ def crack(): passâ€‹# ç¨‹åºä¸»å…¥å£if __name__ == '__main__': crack = CrackGeetest() crack.crack()</pre><p><strong>â‘¡ æ¨¡æ‹Ÿç™»å½•å¡«å†™ï¼Œç‚¹å¼€æ»‘å—éªŒè¯</strong></p><ul><li>åœ¨å®ä¾‹åŒ–CrackGeetestå¯¹è±¡åè°ƒç”¨crack()æ–¹æ³•å¼€å§‹æ¨¡æ‹Ÿç™»å½•éªŒè¯...</li><li>è°ƒç”¨open()æ–¹æ³•ï¼Œæ‰“å¼€ç™»å½•ç•Œé¢ï¼Œè·å–è´¦æˆ·å’Œå¯†ç è¾“å…¥æ¡†èŠ‚ç‚¹ï¼Œå®Œæˆè´¦æˆ·å’Œå¯†ç çš„è¾“å…¥ã€‚</li><li>è°ƒç”¨get_geetest_button()æ–¹æ³•è·å–æ»‘åŠ¨éªŒè¯æŒ‰é’®ï¼Œå¹¶ç‚¹å‡»ã€‚</li></ul><pre>class CrackGeetest(): #...â€‹ def get_geetest_button(self): ''' è·å–åˆå§‹éªŒè¯æŒ‰é’®,returnï¼šæŒ‰é’®å¯¹è±¡ ''' button = self.wait.until(EC.element_to_be_clickable((By.CLASS_NAME, 'geetest_radar_tip'))) return buttonâ€‹ def open(self): ''' æ‰“å¼€ç½‘é¡µè¾“å…¥ç”¨æˆ·åå¯†ç , return: None ''' self.browser.get(self.url) email = self.wait.until(EC.presence_of_element_located((By.ID, 'email'))) password = self.wait.until(EC.presence_of_element_located((By.ID, 'password'))) email.send_keys(self.email) password.send_keys(self.password)â€‹ def crack(self): # è¾“å…¥ç”¨æˆ·åå¯†ç  self.open() # ç‚¹å‡»éªŒè¯æŒ‰é’® button = self.get_geetest_button() button.click() #... #...</pre><p><strong>â‘¢ è·å–å¹¶å‚¨å­˜æœ‰æ— ç¼ºå£çš„ä¸¤å¼ å›¾ç‰‡</strong></p><ul><li>é¦–å…ˆè·å–æ— ç¼ºå£çš„éªŒè¯å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°</li><li>è·å–æ»‘å—å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œç‚¹å‡»ï¼Œè®©æµè§ˆå™¨ä¸­æ˜¾ç¤ºæœ‰ç¼ºå£å›¾ç‰‡</li><li>è·å–æœ‰ç¼ºå£çš„éªŒè¯å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°</li></ul><pre> def get_position(self): ''' è·å–éªŒè¯ç ä½ç½®, return: éªŒè¯ç ä½ç½®(å…ƒç»„) ''' img = self.wait.until(EC.presence_of_element_located((By.CLASS_NAME, 'geetest_canvas_img'))) time.sleep(2) location = img.location size = img.size top,bottom,left,right = location['y'],location['y']+size['height'],location['x'],location['x']+size['width'] return (top, bottom, left, right)â€‹ def get_screenshot(self): ''' è·å–ç½‘é¡µæˆªå›¾, return: æˆªå›¾å¯¹è±¡ ''' #æµè§ˆå™¨æˆªå± screenshot = self.browser.get_screenshot_as_png() screenshot = Image.open(BytesIO(screenshot)) return screenshotâ€‹ def get_geetest_image(self, name='captcha.png'): ''' è·å–éªŒè¯ç å›¾ç‰‡, return: å›¾ç‰‡å¯¹è±¡ ''' top, bottom, left, right = self.get_position() print('éªŒè¯ç ä½ç½®', top, bottom, left, right) screenshot = self.get_screenshot() #ä»ç½‘é¡µæˆªå±å›¾ç‰‡ä¸­è£å‰ªå¤„ç†éªŒè¯å›¾ç‰‡ captcha = screenshot.crop((left, top, right, bottom)) captcha.save(name) return captchaâ€‹ def get_slider(self): ''' è·å–æ»‘å—, return: æ»‘å—å¯¹è±¡ ''' slider = self.wait.until(EC.element_to_be_clickable((By.CLASS_NAME, 'geetest_slider_button'))) return sliderâ€‹ def crack(self): #...â€‹ # è·å–éªŒè¯ç å›¾ç‰‡ image1 = self.get_geetest_image('captcha1.png') # ç‚¹æŒ‰å‘¼å‡ºç¼ºå£ slider = self.get_slider() slider.click() # è·å–å¸¦ç¼ºå£çš„éªŒè¯ç å›¾ç‰‡ image2 = self.get_geetest_image('captcha2.png')â€‹ #...</pre><p><strong>â‘£ è·å–ç¼ºå£ä½ç½®</strong></p><ul><li>å¯¹æ¯”ä¸¤å¼ å›¾ç‰‡çš„æ‰€æœ‰RBGåƒç´ ç‚¹ï¼Œå¾—åˆ°ä¸ä¸€æ ·åƒç´ ç‚¹çš„xå€¼ï¼Œå³è¦ç§»åŠ¨çš„è·ç¦»</li></ul><pre>BORDER = 6INIT_LEFT = 60â€‹class CrackGeetest():  def get_gap(self, image1, image2): ''' è·å–ç¼ºå£åç§»é‡, å‚æ•°ï¼šimage1ä¸å¸¦ç¼ºå£å›¾ç‰‡ã€image2å¸¦ç¼ºå£å›¾ç‰‡ã€‚è¿”å›åç§»é‡ ''' left = 65 for i in range(left, image1.size[0]): for j in range(image1.size[1]): if not self.is_pixel_equal(image1, image2, i, j): left = i return left return leftâ€‹ def is_pixel_equal(self, image1, image2, x, y): ''' åˆ¤æ–­ä¸¤ä¸ªåƒç´ æ˜¯å¦ç›¸åŒ :param image1: å›¾ç‰‡1 :param image2: å›¾ç‰‡2 :param x: ä½ç½®x :param y: ä½ç½®y :return: åƒç´ æ˜¯å¦ç›¸åŒ ''' # å–ä¸¤ä¸ªå›¾ç‰‡çš„åƒç´ ç‚¹ï¼ˆRã€Gã€Bï¼‰ pixel1 = image1.load()[x, y] pixel2 = image2.load()[x, y] threshold = 60 if abs(pixel1[0]-pixel2[0])&lt;threshold and abs(pixel1[1]-pixel2[1])&lt;threshold and abs(pixel1[2]-pixel2[2])&lt;threshold: return True else: return Falseâ€‹ def crack(self): #...â€‹ # è·å–ç¼ºå£ä½ç½® gap = self.get_gap(image1, image2) print('ç¼ºå£ä½ç½®', gap) # å‡å»ç¼ºå£ä½ç§» gap -= BORDER</pre><p><strong>â‘¤ è·å–ç§»åŠ¨è½¨è¿¹</strong></p><p>æ¨¡æ‹Ÿäººçš„è¡Œä¸ºä¹ æƒ¯ï¼ˆå…ˆåŒ€åŠ é€Ÿæ‹–åŠ¨ååŒ€å‡é€Ÿæ‹–åŠ¨ï¼‰ï¼ŒæŠŠéœ€è¦æ‹–åŠ¨çš„æ€»è·ç¦»åˆ†æˆä¸€æ®µä¸€æ®µå°çš„è½¨è¿¹</p><pre> def get_track(self, distance): ''' æ ¹æ®åç§»é‡è·å–ç§»åŠ¨è½¨è¿¹ :param distance: åç§»é‡ :return: ç§»åŠ¨è½¨è¿¹ ''' # ç§»åŠ¨è½¨è¿¹ track = [] # å½“å‰ä½ç§» current = 0 # å‡é€Ÿé˜ˆå€¼ mid = distance * 4 / 5 # è®¡ç®—é—´éš” t = 0.2 # åˆé€Ÿåº¦ v = 0â€‹ while current &lt; distance: if current &lt; mid: # åŠ é€Ÿåº¦ä¸ºæ­£2 a = 2 else: # åŠ é€Ÿåº¦ä¸ºè´Ÿ3 a = -3 # åˆé€Ÿåº¦v0 v0 = v # å½“å‰é€Ÿåº¦v = v0 + at v = v0 + a * t # ç§»åŠ¨è·ç¦»x = v0t + 1/2 * a * t^2 move = v0 * t + 1 / 2 * a * t * t # å½“å‰ä½ç§» current += move # åŠ å…¥è½¨è¿¹ track.append(round(move)) return trackâ€‹ def crack(self): #...â€‹ # è·å–ç§»åŠ¨è½¨è¿¹ track = self.get_track(gap) print('æ»‘åŠ¨è½¨è¿¹', track)</pre><p><strong>â‘¥ æŒ‰ç…§è½¨è¿¹æ‹–åŠ¨ï¼Œå®Œå…¨éªŒè¯</strong></p><pre> def move_to_gap(self, slider, track): ''' æ‹–åŠ¨æ»‘å—åˆ°ç¼ºå£å¤„ :param slider: æ»‘å— :param track: è½¨è¿¹ :return: ''' ActionChains(self.browser).click_and_hold(slider).perform() for x in track: ActionChains(self.browser).move_by_offset(xoffset=x, yoffset=0).perform() time.sleep(0.5) ActionChains(self.browser).release().perform()â€‹ def crack(self): #...â€‹ # æ‹–åŠ¨æ»‘å— self.move_to_gap(slider, track)â€‹ success = self.wait.until( EC.text_to_be_present_in_element((By.CLASS_NAME, 'geetest_success_radar_tip_content'), 'éªŒè¯æˆåŠŸ')) print(success)</pre><p><strong>â‘¦ å®Œæˆç™»å½•</strong></p><pre> def login(self): ''' æ‰§è¡Œç™»å½• return: None ''' submit = self.wait.until(EC.element_to_be_clickable((By.CLASS_NAME, 'login-btn'))) submit.click() time.sleep(10) print('ç™»å½•æˆåŠŸ')â€‹ def crack(self): #...â€‹ # å¤±è´¥åé‡è¯• if not success: self.crack() else: self.login()</pre></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é—®é¢˜','ä¸ƒæ­¥','è§£å†³'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>