<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat | æå®¢å¿«è¨Š</title><meta property="og:title" content="2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/257680b8c2514d67861f1984e8e50cfe"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><meta property="article:published_time" content="2020-10-29T20:50:41+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:41+08:00"><meta name=Keywords content><meta name=description content="2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/34c5ace.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>æ¶æ„è®¾è®¡</p><div class=pgc-img><img alt=2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/257680b8c2514d67861f1984e8e50cfe><p class=pgc-img-caption></p></div><p>æµç¨‹å›¾</p><div class=pgc-img><img alt=2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b7d2e30b10db4f14a388374e3b96d02d><p class=pgc-img-caption></p></div><p>æµç¨‹å›¾åŸç†è¯¦è§£</p><div class=pgc-img><img alt=2é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cee77c89003c492082be9a36b85d1ca0><p class=pgc-img-caption></p></div><p>é¦–å…ˆç”¨æˆ·å‘èµ·requestè¯·æ±‚è¿›å…¥consumeç«¯ï¼ˆä¹Ÿå¯ä»¥æ˜¯controllerå±‚ï¼‰ï¼Œcontrollerå±‚è¿›å…¥AOPåˆ‡é¢ï¼Œå¼€å¯åˆ†å¸ƒå¼äº‹åŠ¡</p><ul><li>ä¼šä¸txManageré€šä¿¡ï¼Œåˆ›å»ºäº‹åŠ¡ç»„</li><li>å‘èµ·ä¸šåŠ¡æ–¹æ³•è°ƒç”¨point.proceed(),è¿™ä¸€æ­¥æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡è°ƒç”¨RPCæ–¹æ³•çš„å…¥å£ï¼Œä¼šä¸€ä¸ªä¸€ä¸ªè°ƒç”¨RPCæ–¹æ³•</li><li>ä¸»çº¿ç¨‹è°ƒç”¨provder1 æä¾›çš„RPCæ–¹æ³•ï¼ŒåŒæ ·ä¼šè¿›å…¥åˆ‡é¢ï¼Œæ­¤æ—¶ï¼Œä¼šå¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨è¯¥RPCæ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹wait</li></ul><pre>è°ƒç”¨å¤±è´¥ï¼Œè°ƒç”¨ä¸šåŠ¡æ–¹æ³•çº¿ç¨‹ï¼Œä¼šå”¤é†’ç­‰å¾…çš„ä¸»çº¿ç¨‹ï¼Œå¹¶æŠŠå¼‚å¸¸ä¿¡æ¯è¿”å›ï¼Œèµ°çš„å°±æ˜¯one fial rollbackè¿™æ¡çº¿ï¼Œæ¶ˆè´¹æ–¹è·å–å¼‚å¸¸ä¿¡æ¯ï¼Œè‡ªåŠ¨å›æ»šå½“å‰äº‹åŠ¡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ç»“æŸã€‚è°ƒç”¨æˆåŠŸ ä¸šåŠ¡çº¿ç¨‹ï¼Œå°†å”¤é†’ä¸»çº¿ç¨‹ï¼Œå¹¶è¿”å›æ•°æ®ã€‚ä¸šåŠ¡çº¿ç¨‹åŒtxManager é€šä¿¡ å°†è‡ªå·±åŠ å…¥åˆ°å½“å‰äº‹åŠ¡ç»„ä¸­ï¼Œä¸šåŠ¡çº¿ç¨‹è¿›å…¥ç­‰å¾…ï¼Œç­‰å¾…txManageræŒ‡ä»¤ï¼Œcommit or rollback å³ å›¾ä¸­çš„4,5,6</pre><ul><li>ä¸»çº¿ç¨‹ç»§ç»­è°ƒç”¨provider2æä¾›çš„RPCæ–¹æ³• ï¼ŒåŒæ ·ä¼šè¿›å…¥AOPåˆ‡é¢ï¼Œå½“å‰ä¸»çº¿ç¨‹ç­‰å¾…ï¼Œå¯åŠ¨ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹å»è°ƒç”¨ä¸šåŠ¡æ–¹æ³•</li></ul><pre>è°ƒç”¨å¤±è´¥ï¼Œè°ƒç”¨ä¸šåŠ¡æ–¹æ³•çº¿ç¨‹ï¼Œä¼šå”¤é†’ç­‰å¾…çš„ä¸»çº¿ç¨‹ï¼Œå¹¶æŠŠå¼‚å¸¸ä¿¡æ¯è¿”å›ï¼Œèµ°çš„å°±æ˜¯two fial rollbackè¿™æ¡çº¿ï¼Œæ¶ˆè´¹æ–¹è·å–å¼‚å¸¸ä¿¡æ¯ï¼Œè‡ªåŠ¨å›æ»šå½“å‰äº‹åŠ¡ï¼Œå¹¶ä¸txManagerè¿›è¡Œé€šä¿¡ï¼ˆtwo TransactionGroup fail è¿™æ¡çº¿ï¼‰ï¼ŒtxManagerå‘èµ·rollbackæŒ‡ä»¤ï¼ˆtwo fail rollback è¿™æ¡çº¿ï¼‰ï¼Œé€šçŸ¥provider1 rollbackè°ƒç”¨æˆåŠŸ ä¸šåŠ¡çº¿ç¨‹ï¼Œå°†å”¤é†’ä¸»çº¿ç¨‹ï¼Œå¹¶è¿”å›æ•°æ®ã€‚ä¸šåŠ¡çº¿ç¨‹åŒtxManager é€šä¿¡ å°†è‡ªå·±åŠ å…¥åˆ°å½“å‰äº‹åŠ¡ç»„ä¸­ï¼Œä¸šåŠ¡çº¿ç¨‹è¿›å…¥ç­‰å¾…ï¼Œç­‰å¾…txManageræŒ‡ä»¤ï¼Œcommit or rollback å³ å›¾ä¸­çš„9,10,11</pre><ul><li>ä¸»çº¿ç¨‹point.proceed()æ–¹æ³•æˆåŠŸæ‰§è¡Œï¼Œä¼šå‘txManagerå‘å‡ºcommitè¯·æ±‚ï¼ŒtxManageræ¥æ”¶è¯·æ±‚åï¼Œä¼šæ£€æŸ¥å„æ¨¡å—çš„ç½‘ç»œé€šä¿¡ç­‰çŠ¶æ€ï¼Œç¬¦åˆæ¡ä»¶åï¼Œå‘å‡ºcommitæŒ‡ä»¤ï¼Œå³ 14ã€‚é€šçŸ¥å„ä¸ªæ¨¡å—æäº¤è‡ªå·±çš„äº‹åŠ¡ã€‚</li></ul><p>ä¸‰é˜¶æ®µæäº¤æœ€å¤§çš„é—®é¢˜ï¼Œåœ¨äºå½“txManagerå‘å‡ºcommitæŒ‡ä»¤åï¼Œä¸šåŠ¡æ–¹downæœºï¼Œæˆ–è€…ç½‘ç»œé€šä¿¡æ–­äº†ã€‚æ€ä¹ˆè§£å†³äº‹åŠ¡ä¸€è‡´æ€§çš„é—®é¢˜ã€‚æˆ‘ä»¬è¿™ä¹ˆæƒ³ï¼Œå½“txManager å‘å‡ºcommitæŒ‡ä»¤çš„æ—¶å€™ï¼Œå…¶å®ä¸šåŠ¡æ–¹æ³•éƒ½æ²¡æœ‰ä»»ä½•å¼‚å¸¸ï¼Œéƒ½æ˜¯æ‰§è¡ŒæˆåŠŸçš„ï¼Œé‚£ä¹ˆæ•°æ®å°±æ˜¯éœ€è¦æäº¤çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬æœ¬åœ°çš„è¡¥å¿æœºåˆ¶æ­£æ˜¯ä¸ºäº†è¯¥åœºæ™¯è€Œè€ƒè™‘ï¼Œå¦‚æœdownæœºï¼Œæˆ–è€…ç½‘ç»œå¼‚å¸¸ã€‚æœ¬åœ°æœåŠ¡æ¢å¤åï¼Œä¼šæ‰§è¡Œè¡¥å¿ï¼Œè¾¾åˆ°æ•°æ®çš„ä¸€è‡´æ€§ã€‚å¦‚æœä¸šåŠ¡æ–¹æ˜¯é›†ç¾¤éƒ¨ç½²çš„è¯ï¼Œä¼šç«‹åˆ»æ‰§è¡Œè¡¥å¿ï¼Œè¾¾åˆ°æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>é‡è¦æé†’ï¼Œå¦‚æœè°ƒç”¨æœåŠ¡æ–¹æ˜¯timeoutï¼Œé‚£ä¹ˆä¼šåˆ¤æ–­å½“å‰äº‹åŠ¡ä¸æˆåŠŸï¼Œè¿™æ¬¡åˆ†å¸ƒå¼äº‹åŠ¡ç»Ÿä¸€ä¸ä¼šæ‰§è¡Œã€‚</p><p>å¿«é€Ÿå¼€å§‹ï¼š</p><h1><strong>Spring-Boot-Starter</strong></h1><p>å¯¼å‡º</p><ul><li>é¦–å…ˆå¼•å…¥rpcæ¡†æ¶æ‰€æ”¯æŒçš„jaråŒ…,æ³¨æ„ï¼šç‰ˆæœ¬å·ï¼Œæ ¹æ®ä½ æ‹‰ä»£ç è‡ªå·±æ‰“åŒ…ä¸Šä¼ åˆ°ç§æœä¸€è‡´</li><li>Dubbo</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-dubbo&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>SpringCloud</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-springcloud&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>Motan</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-motan&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>åœ¨ä½ çš„ application.yml ä¸­æ–°å¢å¦‚ä¸‹é…ç½®ï¼š</li></ul><pre>raincat: tx : txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://10.4.4.202:3306/tx?useUnicode=true&amp;characterEncoding=utf8 username : root password : 123123 # repositorySupport : redis # txRedisConfig : # hostName : 192.168.1.68 # port : 6379 # password : # repositorySupport : zookeeper # tx-zookeeper-config : # host : 92.168.1.73:2181 # sessionTimeOut : 100000 # rootPath : /tx # repositorySupport : mongodb # tx-mongo-config : # mongoDbUrl : localost:27017 # mongoDbName : xiaoyu # mongoUserName : xiaoyu # mongoUserPwd : 123456 # repositorySupport : file # tx-file-config: # path : /consume # prefix : consume</pre><p>TxManageré…ç½®è¯¦è§£</p><ul><li>application.properties ä¸»è¦æ˜¯é…ç½®tmManagerçš„httpæœåŠ¡ç«¯å£ï¼Œredisä¿¡æ¯,nettyç›¸å…³ä¿¡æ¯ æ³¨æ„ï¼šå› ä¸ºç°åœ¨tmManager æ˜¯è‡ªå·±å‘è‡ªå·±æ³¨å†Œï¼Œæ‰€ä»¥httpç«¯å£ï¼ˆserver.portï¼‰åº”è¯¥è¦ä¸eurekaçš„ç«¯å£ä¸€è‡´ã€‚</li></ul><p>server.port=8761 txManager çš„httpç«¯å£</p><p>tx.manager.netty.port=9998 å¯¹ä¸šåŠ¡æ–¹æä¾›çš„TCP ç«¯å£ã€‚</p><p>tx.manager.netty.serialize=kryo netty åºåˆ—åŒ–æ–¹å¼ï¼Œæ³¨æ„åº”è¯¥è¦ä¸ä¸šåŠ¡æ–¹çš„åºåˆ—åŒ–æ–¹å¼ä¸€è‡´ã€‚</p><ul><li>bootstrap.yml ä¸»è¦æ˜¯é…ç½®eurekaçš„ç›¸å…³å±æ€§ï¼Œæ¯”å¦‚renewæ—¶é—´ï¼Œæ³¨å†Œåœ°å€ç­‰</li><li>éƒ¨ç½²é›†ç¾¤é…ç½®ï¼š 1.ä¿®æ”¹application.propertiesä¸­çš„ server.port å¦‚ï¼š ç¬¬ä¸€ä»½æœåŠ¡ä¸º server.port=8761 tx.manager.netty.port=9998; ç¬¬äºŒä»½æœåŠ¡ä¸ºï¼šserver.port=8762 tx.manager.netty.port=9999; 2. ä¿®æ”¹bootstrap.ymlä¸­çš„eureka:client:serviceUrl:defaultZone:http://localhost:8761/eureka/,http://localhost:8762/eureka/ å†ä¾æ¬¡å¯åŠ¨</li></ul><p>ä¸šåŠ¡æ–¹é…ç½®è¯¦è§£</p><pre> @TxTransaction è¯¥æ³¨è§£ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ï¼Œå¦‚æœä¸šåŠ¡æ–¹çš„serviceæœåŠ¡éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ™éœ€è¦åŠ ä¸Šæ­¤æ³¨è§£</pre><p>applicationContext.xml è¯¦è§£ï¼š</p><pre> &lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦å¼€å¯AOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æ‰«æåˆ†å¸ƒå¼äº‹åŠ¡çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å¯åŠ¨ç±»å±æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;TxTransactionBootstrap è¯¦è§£ï¼ˆå…·ä½“å‚è§com.raincat.core.config.TxConfigï¼‰ï¼š &lt;!--è¿™é‡Œé…ç½®çš„TxManager httpè¯·æ±‚çš„IP:PORT (å¦‚æœTxManageræœ‰æ”¹åŠ¨ï¼Œè¿™é‡Œè¦è·Ÿç€æ”¹åŠ¨)--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;!-- ä¸txManageré€šä¿¡çš„åºåˆ—åŒ–æ–¹å¼ï¼Œspiæ‰©å±•æ”¯æŒ kroyï¼Œhessian protostuff æ¨èä½¿ç”¨kroy--&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;!-- çº¿ç¨‹æ± ä¸­çš„é˜Ÿåˆ—ç±»å‹ spiæ‰©å±•æ”¯æŒ Linked Array SynchronousQueue--&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;!--çº¿ç¨‹æ± ä¸­çš„æ‹’ç»ç­–ç•¥ spiæ‰©å±•æ”¯æŒ Abort Blocking CallerRuns Discarded Rejected--&gt; &lt;property name="rejectPolicy" value="Abort"/&gt; &lt;!--å¼€å¯æœ¬åœ°è¡¥å¿ï¼ˆé»˜è®¤å¼€å¯ï¼‰--&gt; &lt;property name="compensation" value="true"/&gt;  &lt;!--æœ¬åœ°æ•°æ®åºåˆ—åŒ–æ–¹å¼ spiæ‰©å±•æ”¯æŒ java kroyï¼Œhessian protostuff æ¨èä½¿ç”¨kroy--&gt; &lt;property name="serializer" value="kryo"/&gt;</pre><p>æœ¬åœ°æ•°æ®ä¿å­˜é…ç½®ä¸è¯¦è§£(spiæ‰©å±•æ”¯æŒdbï¼Œredisï¼Œzookeeperï¼Œmongodbï¼Œfile),è¯¦æƒ…é…ç½®è¯·å‚ç…§sampleå·¥ç¨‹:</p><ol><li>æœ¬åœ°æ•°æ®å­˜å‚¨ä¸ºæ•°æ®åº“ï¼ˆæ•°æ®åº“æ”¯æŒmysqlï¼Œoracle ï¼ŒsqlServerï¼‰ï¼Œå½“ä¸šåŠ¡æ¨¡å—ä¸ºé›†ç¾¤æ—¶ï¼Œæ¨èä½¿ç”¨ ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œè¡¨åç§°ä¸º tx_transaction_æ¨¡å—åç§°ï¼ˆapplicationNameï¼‰,æ¯ä¸ªæ¨¡å—é…ç½®æˆä¸€æ ·çš„è¡¥å¿æ–¹å¼ï¼Œå¦‚æœæ˜¯ç”¨dbè¿›è¡Œå­˜å‚¨ï¼Œè¯·ä½¿ç”¨åŒä¸€ä¸ªåº“æ¥å­˜å‚¨ã€‚</li></ol><pre> &lt;!--é…ç½®è¡¥å¿ç±»å‹ä¸ºdb--&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;!--æ•°æ®åº“url--&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;!--æ•°æ®åº“é©±åŠ¨åç§° --&gt;  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="1234567"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•°æ®å­˜å‚¨ä¸ºredisï¼Œå½“ä¸šåŠ¡æ¨¡å—ä¸ºé›†ç¾¤æ—¶ï¼Œæ¨èä½¿ç”¨ã€‚ï¼ˆæ›´å¤šé…ç½®è¯·å‚è€ƒ com.happylifeplat.transaction.core.config.TxRedisConfigï¼‰</li></ol><pre> &lt;!--é…ç½®è¡¥å¿ç±»å‹ä¸ºreids--&gt; &lt;property name="compensationCacheType" value="redis"/&gt; &lt;property name="txRedisConfig"&gt; &lt;bean class="com.raincat.common.config.TxRedisConfig"&gt; &lt;!--redis host--&gt; &lt;property name="hostName" value="192.168.1.78"/&gt; &lt;!--redis port--&gt; &lt;property name="port" value="6379"/&gt; &lt;!--redis å¯†ç  ï¼ˆæœ‰å¯†ç å°±é…ç½®ï¼Œæ— å¯†ç åˆ™ä¸éœ€è¦é…ç½®ï¼‰--&gt; &lt;property name="password" value=""/&gt;  &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•°æ®å­˜å‚¨ä¸ºzookeeperï¼Œå½“ä¸šåŠ¡æ¨¡å—ä¸ºé›†ç¾¤æ—¶ï¼Œæ¨èä½¿ç”¨</li></ol><pre> &lt;!--é…ç½®è¡¥å¿ç±»å‹ä¸ºzookeeper--&gt; &lt;property name="compensationCacheType" value="zookeeper"/&gt; &lt;property name="txZookeeperConfig"&gt; &lt;bean class="com.raincat.common.config.TxZookeeperConfig"&gt; &lt;!--zookeeper hostï¼šport--&gt; &lt;property name="host" value="192.168.1.66:2181"/&gt; &lt;!--zookeeper sessionè¿‡æœŸæ—¶é—´--&gt; &lt;property name="sessionTimeOut" value="2000"/&gt; &lt;!--zookeeper æ ¹èŠ‚ç‚¹è·¯å¾„--&gt; &lt;property name="rootPath" value="/tx"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•°æ®å­˜å‚¨ä¸ºmongodbï¼Œå½“ä¸šåŠ¡æ¨¡å—ä¸ºå•èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ã€‚ä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆï¼Œé›†åˆåç§°ä¸º tx_transaction_æ¨¡å—åç§°ï¼ˆapplicationNameï¼‰ è¿™é‡Œmongdbè¿æ¥æ–¹å¼é‡‡ç”¨3.4.0ç‰ˆæœ¬æ¨èä½¿ç”¨çš„Sha1,ä¸æ˜¯CRæ¨¡å¼ï¼ŒåŒæ—¶mongdbåº”è¯¥å¼€å¯æƒé™è®¤è¯ï¼Œä½¿ç”¨è€…éœ€è¦æ³¨æ„</li></ol><pre> &lt;!--é…ç½®è¡¥å¿ç±»å‹ä¸ºmongodb--&gt; &lt;property name="compensationCacheType" value="mongodb"/&gt; &lt;property name="txMongoConfig"&gt; &lt;bean class="com.raincat.common.config.TxMongoConfig"&gt; &lt;!--mongodb url--&gt; &lt;property name="mongoDbUrl" value="192.168.1.78:27017"/&gt; &lt;!--mongodb æ•°æ®åº“--&gt; &lt;property name="mongoDbName" value="happylife"/&gt; &lt;!--mongodb ç”¨æˆ·å--&gt; &lt;property name="mongoUserName" value="xiaoyu"/&gt; &lt;!--mongodb å¯†ç --&gt; &lt;property name="mongoUserPwd" value="123456"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•°æ®å­˜å‚¨ä¸ºfileï¼Œå½“ä¸šåŠ¡æ¨¡å—ä¸ºå•èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ã€‚åˆ›å»ºçš„æ–‡ä»¶åç§°TX_ + prefixé…ç½® + æ¨¡å—åç§°</li></ol><pre> &lt;!--é…ç½®è¡¥å¿ç±»å‹ä¸ºfile--&gt; &lt;property name="compensationCacheType" value="file"/&gt; &lt;property name="txFileConfig"&gt; &lt;bean class="com.raincat.common.config.TxFileConfig"&gt; &lt;!--æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼ˆå¯å¡«å¯ä¸å¡«ï¼Œä¸å¡«æ—¶å€™ï¼Œé»˜è®¤å°±æ˜¯å½“å‰é¡¹ç›®æ‰€åœ¨çš„è·¯å¾„ï¼‰--&gt; &lt;property name="path" value=""/&gt; &lt;!--æŒ‡å®šæ–‡ä»¶å‰ç¼€ï¼Œç”Ÿæˆæ–‡ä»¶åç§°--&gt; &lt;property name="prefix" value="consume"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><h1><strong>dubboç”¨æˆ·æŒ‡å—</strong></h1><p>å¯¼å‡º</p><p>dubboç”¨æˆ·æŒ‡å—(jaråŒ…çš„ç‰ˆæœ¬é—®é¢˜å¯ä»¥è‡ªå·±gitæºä»£ç ï¼Œç„¶åç¼–è¯‘ä¸Šä¼ åˆ°è‡ªå·±å…¬å¸çš„ç§æœ)</p><ul><li>é…ç½®å¹¶ä¸”å¯åŠ¨txManager,åœ¨aoolication.propertiesä¿®æ”¹ä½ çš„æœåŠ¡ç«¯å£ï¼Œredisé…ç½®ï¼Œå…·ä½“å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£</li><li>åœ¨ä½ çš„dubboæœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionæ³¨è§£</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-dubbo&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>é…ç½®applicationContext.xml,å¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœ‰å…¶ä»–é—®é¢˜å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£</li></ul><pre>&lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦å¼€å¯AOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æ‰«æåˆ†å¸ƒå¼äº‹åŠ¡çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å¯åŠ¨ç±»å±æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;!--è¿™é‡Œçš„urlæ˜¯txMangagerçš„ip+ç«¯å£--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;</pre><ul><li>åœ¨dubboçš„æ¶ˆè´¹æ–¹ï¼Œä¹Ÿæ˜¯å¦‚ä¸Šé…ç½®ï¼Œé…ç½®å¥½ä»¥åï¼Œå¯åŠ¨é¡¹ç›®.</li></ul><p>å¿«é€Ÿä½“æ£€ï¼Œè¿è¡Œdubbo-sampleï¼ˆ ä½¿ç”¨è€…JDKå¿…é¡»ä¸º1.8ï¼‰</p><p>æ­¥éª¤ä¸€ï¼š</p><p>é…ç½®txManaager, ä¿®æ”¹application.propertiesä¸­ä½ è‡ªå·±çš„redisé…ç½®</p><p>å¯åŠ¨TxManagerApplication</p><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ä¿®æ”¹æœåŠ¡ç«¯å£ï¼Œåˆ™åº”è¯¥ä¿è¯ä¸eureka:client:serviceUrl:defaultZoneä¸­çš„ç«¯å£ä¸€è‡´</p><p>æ­¥éª¤äºŒï¼š</p><ol><li>å¼•å…¥ä¾èµ–åŒ…ï¼ˆsampleå·²ç»å¼•å…¥ï¼‰</li></ol><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-dubbo&lt;/artifactId&gt; &lt;version&gt;${you.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ol><li>æ‰§è¡Œ raincat-dubbo-sample å·¥ç¨‹ sqlæ–‡ä»¶ dubbo-sample.sql</li><li>åœ¨æ¯ä¸ªå·¥ç¨‹ä¸‹çš„application.yml ä¸­é…ç½®æ‚¨çš„æ•°æ®åº“è¿æ¥(åªéœ€è¦æ”¹ipå’Œç«¯å£)</li><li>åœ¨å·¥ç¨‹ä¸‹çš„spring-dubbo.xml ä¸­é…ç½®æ‚¨çš„zookeeperæ³¨å†Œä¸­å¿ƒ</li><li>åœ¨æ¯ä¸ªå·¥ç¨‹ä¸‹ applicationContext.xmlä¸­çš„TxDbConfig é…ç½®æ‚¨çš„è¡¥å¿æ•°æ®åº“è¿æ¥ï¼Œæä¾›å•ç‹¬çš„åº“æ¥å­˜å‚¨ã€‚</li><li>åœ¨éœ€è¦åšåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£ä¸ŠåŠ ä¸Šæ³¨è§£ @TxTransaction ï¼ˆsampleå·²ç»åŠ ä¸Šï¼‰</li><li>ä¾æ¬¡å¯åŠ¨orderæ¨¡å—ï¼Œstock æ¨¡å— ,consumeæ¨¡å—</li><li>è®¿é—®http://localhost:8888/swagger-ui.html è¿›è¡Œæµ‹è¯•ä½“éªŒ</li></ol><h1><strong>springcloudç”¨æˆ·æŒ‡å—</strong></h1><p>å¯¼å‡º</p><p>springcloudç”¨æˆ·æŒ‡å—(jaråŒ…çš„ç‰ˆæœ¬é—®é¢˜å¯ä»¥è‡ªå·±gitæºä»£ç ï¼Œç„¶åç¼–è¯‘ä¸Šä¼ åˆ°è‡ªå·±å…¬å¸çš„ç§æœ)</p><ul><li>é…ç½®å¹¶ä¸”å¯åŠ¨txManager,åœ¨aoolication.propertiesä¿®æ”¹ä½ çš„æœåŠ¡ç«¯å£ï¼Œredisé…ç½®ï¼Œå…·ä½“å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£</li><li>åœ¨ä½ çš„springcloudæœåŠ¡ç«¯æ·»åŠ jaråŒ…ï¼Œå¹¶åœ¨éœ€è¦å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionæ³¨è§£</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-springcloud&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt;&lt;/dependency&gt;</pre><ul><li>é…ç½®applicationContext.xml,å¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœ‰å…¶ä»–é—®é¢˜å¯ä»¥å‚è€ƒé…ç½®è¯¦è§£</li></ul><pre>&lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦å¼€å¯AOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æ‰«æåˆ†å¸ƒå¼äº‹åŠ¡çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å¯åŠ¨ç±»å±æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;!--è¿™é‡Œçš„urlæ˜¯txMangagerçš„ip+ç«¯å£--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;</pre><ul><li>åœ¨springcloudçš„æ¶ˆè´¹æ–¹ï¼Œä¹Ÿæ˜¯å¦‚ä¸Šé…ç½®ï¼Œé…ç½®å¥½ä»¥åï¼Œå¯åŠ¨é¡¹ç›®.</li></ul><p>å¿«é€Ÿä½“æ£€ï¼Œè¿è¡Œspringcloud-sampleï¼ˆ ä½¿ç”¨è€…JDKå¿…é¡»ä¸º1.8ï¼‰</p><p>æ­¥éª¤ä¸€ï¼š</p><pre>é…ç½®txManaager, ä¿®æ”¹application.propertiesä¸­ä½ è‡ªå·±çš„redisé…ç½® å¯åŠ¨TxManagerApplication</pre><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ä¿®æ”¹æœåŠ¡ç«¯å£ï¼Œåˆ™åº”è¯¥ä¿è¯ä¸eureka:client:serviceUrl:defaultZoneä¸­çš„ç«¯å£ä¸€è‡´</p><p>æ­¥éª¤äºŒï¼š</p><ul><li>å¼•å…¥ä¾èµ–åŒ…ï¼ˆsampleå·²ç»å¼•å…¥ï¼‰</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-springcloud&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>æ‰§è¡Œ raincat-springcloud-sample å·¥ç¨‹ sqlæ–‡ä»¶ springcloud-sample.sql</li><li>åœ¨æ¯ä¸ªå·¥ç¨‹ä¸‹ application.yml ä¸­é…ç½®æ‚¨çš„æ•°æ®åº“è¿æ¥(åªéœ€è¦æ”¹ipå’Œç«¯å£)</li><li>åœ¨æ¯ä¸ªå·¥ç¨‹ä¸‹ applicationContext.xmlä¸­çš„TxDbConfig é…ç½®æ‚¨çš„è¡¥å¿æ•°æ®åº“è¿æ¥ï¼Œæä¾›å•ç‹¬çš„æ•°æ®åº“æ¥å­˜å‚¨ã€‚</li><li>åœ¨éœ€è¦åšåˆ†å¸ƒå¼äº‹åŠ¡çš„æ¥å£ä¸ŠåŠ ä¸Šæ³¨è§£ @TxTransaction ï¼ˆsampleå·²ç»åŠ ä¸Šï¼‰</li><li>ä¾æ¬¡å¯åŠ¨AliPayApplicationï¼ŒWechatApplication ,PayApplication</li><li>è®¿é—®http://localhost:8881/pay-service/swagger-ui.html è¿›è¡Œä½“éªŒæµ‹è¯•</li></ul><h1><strong>å¯åŠ¨äº‹åŠ¡ç®¡ç†åå°ï¼ˆadminï¼‰</strong></h1><p>å¯¼å‡º</p><p>raincat-admin å¯åŠ¨æ•™ç¨‹</p><p>å¯åŠ¨å‰æï¼šåˆ†å¸ƒå¼äº‹åŠ¡é¡¹ç›®å·²ç»éƒ¨ç½²å¹¶ä¸”è¿è¡Œèµ·æ¥ï¼Œç”¨æˆ·æ ¹æ®è‡ªå·±çš„RPCæ¡†æ¶è¿›è¡Œä½¿ç”¨ dubbo ç”¨æˆ· springcloud ç”¨æˆ·</p><ul><li>é¦–å…ˆç”¨æˆ·ä½¿ç”¨çš„JDKå¿…é¡»æ˜¯1.8+ æœ¬åœ°å®‰è£…äº†git ,maven ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</li></ul><pre>git clone https://github.com/yu199195/Raincat.gitmaven clean install</pre><ul><li>ä½¿ç”¨ä½ çš„å¼€å‘å·¥å…·æ‰“å¼€é¡¹ç›®ï¼Œæ¯”å¦‚idea Eclipse</li></ul><p>æ­¥éª¤ä¸€ï¼š é…ç½®å¹¶ä¸”å¯åŠ¨transaction-admin</p><ul><li>åœ¨é¡¹ç›®ä¸­çš„application.propertiesæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹æ‚¨çš„æœåŠ¡ç«¯å£ï¼Œredisé…ç½®ç­‰é…ç½®:</li></ul><pre>#adminé¡¹ç›®çš„tomcatç«¯å£server.port=8888#adminé¡¹ç›®çš„ä¸Šä¸‹æ–‡server.context-path=/adminserver.address=0.0.0.0#adminé¡¹ç›®çš„åº”ç”¨åç§°spring.application.name=tx-transaction-admin# adminé¡¹ç›®æ¿€æ´»çš„ç±»å‹ï¼Œæ”¯æŒdbï¼Œfileï¼Œmongoï¼Œzookeeperï¼Œredis ä¸‹æ–‡ä¼šç»§ç»­è®²è§£spring.profiles.active=db# txManager redis é…ç½®#é›†ç¾¤é…ç½®#tx.redis.cluster=true#tx.redis.cluster.nodes=127.0.0.1:70001;127.0.1:7002#tx.redis.cluster.redirects=20#å•æœºé…ç½®tx.redis.cluster=falsetx.redis.hostName=192.168.1.68#redisä¸»æœºç«¯å£tx.redis.port=6379#tx.redis.password=happylifeplat01# adminç®¡ç†åå°çš„ç”¨æˆ·åï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±æ›´æ”¹tx.admin.userName=admin# adminç®¡ç†åå°çš„å¯†ç ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±æ›´æ”¹tx.admin.password=admin#é‡‡ç”¨äºŒé˜¶æ®µæäº¤é¡¹ç›®çš„åº”ç”¨åç§°é›†åˆï¼Œè¿™ä¸ªå¿…é¡»è¦å¡«å†™recover.application.list=alipay-service,wechat-service,pay-service#äº‹åŠ¡è¡¥å¿æœ€å¤§é‡è¯•æ¬¡æ•°recover.retry.max=10#äº‹åŠ¡è¡¥å¿çš„åºåˆ—æ–¹å¼recover.serializer.support=kryo#dbSuport é‡‡ç”¨dbè¿›è¡Œçš„è¡¥å¿æ–¹å¼çš„é…ç½®recover.db.driver=com.mysql.jdbc.Driverrecover.db.url=jdbc:mysql://192.168.1.68:3306/tx?useUnicode=true&amp;characterEncoding=utf8recover.db.username=xiaoyurecover.db.password=Wgj@555888#redis é‡‡ç”¨redisè¿›è¡Œè¡¥å¿æ–¹å¼çš„é…ç½®recover.redis.cluster=falserecover.redis.hostName=192.168.1.68recover.redis.port=6379recover.redis.password=#recover.redis.clusterUrl=127.0.0.1:70001;127.0.1:7002#mongo é‡‡ç”¨mongo è¿›è¡Œè¡¥å¿æ–¹å¼çš„é…ç½®recover.mongo.url=192.168.1.68:27017recover.mongo.dbName=happyliferecover.mongo.userName=xiaoyurecover.mongo.password=123456#zookeeper é‡‡ç”¨zookeeperè¿›è¡Œè¡¥å¿çš„æ–¹å¼é…ç½®recover.zookeeper.host=192.168.1.132:2181recover.zookeeper.sessionTimeOut=200000</pre><p>é…ç½®è§£é‡Š</p><ul><li>å…³äºtxManagerçš„redisé…ç½®:å…¶å®å°±æ˜¯åœ¨txManageré¡¹ç›®ä¸­çš„redisé…ç½®ï¼Œåœ¨è¿™é‡Œéœ€è¦é…ç½®æˆä¸€æ ·çš„ï¼› æ³¨æ„ï¼Œå¦‚æœä½ çš„redisæ˜¯é›†ç¾¤æ¨¡å¼è¯·å‚è€ƒé›†ç¾¤é…ç½®ï¼Œå¹¶æ³¨é‡Šæ‰å•æœºredisé…ç½®ï¼ŒåŒç†rediså•æœºæ¨¡å¼ä¹Ÿä¸€æ ·ã€‚</li><li>å…³äº recover.application.listé…ç½®ï¼šè¿™é‡Œéœ€è¦é…ç½®æ¯ä¸ªå‚ä¸äºŒé˜¶æ®µåˆ†å¸ƒå¼äº‹åŠ¡çš„ç³»ç»Ÿæ¨¡å—çš„applicationNameï¼Œå¤šä¸ªæ¨¡å—ç”¨ "," åˆ†éš”ï¼Œè¿™é‡Œå¿…é¡»è¦é…ç½®ã€‚</li><li>å…³äº recover.serializer.support é…ç½®ï¼Œè¿™é‡Œæ˜¯æŒ‡å‚ä¸äºŒé˜¶æ®µåˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿä¸­ï¼Œé…ç½®äº‹åŠ¡è¡¥å¿ä¿¡æ¯çš„åºåˆ—åŒ–æ–¹å¼ã€‚</li><li>å…³äº spring.profiles.active é…ç½® adminé¡¹ç›®æ¿€æ´»çš„ç±»å‹ï¼Œæ”¯æŒdbï¼Œfileï¼Œmongoï¼Œzookeeperï¼Œ è¿™é‡Œæ˜¯æŒ‡å‚ä¸äºŒé˜¶æ®µåˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿä¸­ï¼Œé…ç½®äº‹åŠ¡è¡¥å¿ä¿¡æ¯å­˜å‚¨æ–¹å¼ï¼Œå¦‚æœæ‚¨ç”¨dbå­˜å‚¨ï¼Œé‚£è¿™é‡Œå°±é…ç½®æˆdbï¼ŒåŒæ—¶é…ç½®å¥½ recover.dbç­‰ä¿¡æ¯ã€‚ å…¶ä»–æ–¹å¼åŒç†ã€‚ æ³¨æ„ï¼Œæ¯ä¸ªæ¨¡å—è¯·ä½¿ç”¨ç›¸åŒçš„åºåˆ—åŒ–æ–¹å¼å’Œå­˜å‚¨ç±»å‹</li><li>å…³äº tx.admin ç­‰é…ç½®ã€‚ è¿™é‡Œå°±æ˜¯ç®¡ç†åå°ç™»å½•çš„ç”¨æˆ·ä¸å¯†ç ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰æ›´æ”¹ã€‚</li></ul><p>æ­¥éª¤äºŒï¼šä¿®æ”¹ index.html</p><pre>&lt;!--href ä¿®æ”¹æˆä½ çš„ip ç«¯å£--&gt;&lt;a id="serverIpAddress" style="display: none" href="http://192.168.1.132:8888/admin"&gt;</pre><p>æ­¥éª¤ä¸‰: è¿è¡Œ AdminApplication ä¸­çš„mainæ–¹æ³•ã€‚</p><p>æ­¥éª¤å››:åœ¨æµè§ˆå™¨è®¿é—® http://ip:prot/admin ,è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç ç™»å½•ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é˜¶æ®µ','äº‹åŠ¡','ä¸­é—´'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>