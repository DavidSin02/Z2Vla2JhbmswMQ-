<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>计算机世界里的“堆栈”你真的懂吗？ | 极客快訊</title><meta property="og:title" content="计算机世界里的“堆栈”你真的懂吗？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/bd5b00e5659c4816accd97fbae66e4e6"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/368c129.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/368c129.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/368c129.html><meta property="article:published_time" content="2020-10-29T21:05:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:30+08:00"><meta name=Keywords content><meta name=description content="计算机世界里的“堆栈”你真的懂吗？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/368c129.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>计算机世界里的“堆栈”你真的懂吗？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>如果你学过数据结构，就一定会遇到“堆”,"栈","堆栈",这些对于小白来说有些头大，下面就来科普一下何谓堆栈？</p><p></p><p><strong>按照WIKI的定义：</strong></p><p></p><p>堆栈（英语：stack），是计算机科学中一种特殊的串列形式的抽象数据类型，其特殊之处在于只能允许在链表或数组的一端（称为堆栈顶端指针，英语：top）进行加入数据（英语：push）和输出数据（英语：pop）的运算。另外堆栈也可以用一维数组或链表的形式来完成。堆栈的另外一个相对的操作方式称为队列。需要记住的是，堆：顺序随意，栈：后进先出(Last-In/First-Out)。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bd5b00e5659c4816accd97fbae66e4e6><p class=pgc-img-caption></p></div><p></p><p>这里的pop和push到都是什么意思？其实这是堆栈数据结构使用两种基本操作：推入（压栈，push）和弹出（弹栈，pop）：</p><p></p><p>推入：将数据放入堆栈的顶端（数组形式或串列形式），堆栈顶端top指针加一。</p><p>弹出：将顶端数据数据输出（回传），堆栈顶端数据减一。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9d1c0ff9817d4cb5bed128ecc6f8d380><p class=pgc-img-caption></p></div><p></p><p>如要了解堆栈，应将之拆开分析。</p><p></p><p><strong>堆</strong><strong>的概念：</strong></p><p></p><p>堆（英语：Heap）是计算机科学中的一种特别的树状数据结构。通常是一个可以被看做一棵树的数组对象。若是满足以下特性，即可称为堆：“给定堆中任意节点 P 和 C，若 P 是 C 的父节点，那么 P 的值会小于等于（或大于等于） C 的值”。若父节点的值恒小于等于子节点的值，此堆称为最小堆（英语：min heap）；反之，若父节点的值恒大于等于子节点的值，此堆称为最大堆（英语：max heap）。在堆中最顶端的那一个节点，称作根节点（英语：root node），根节点本身没有父节点（英语：parent node）。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f604ee6d73f94825933db2c02c074167><p class=pgc-img-caption></p></div><p></p><p><strong>栈的概念</strong></p><p></p><p>栈（stack）又名堆栈，它是一种运算受限的线性表。其限制是仅允许在表的一端进行插入和删除运算。这一端被称为栈顶，相对地，把另一端称为栈底。栈就是一个桶，后放进去的先拿出来，它下面本来有的东西要等它出来之后才能出来（先进后出）</p><p></p><p>栈(Stack)是操作系统在建立某个进程时或者线程（在支持多线程的操作系统中是线程）为这个线程建立的存储区域，该区域具有FIFO的特性，在编译的时候可以指定需要的Stack的大小。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a178731cf2a946239d1fc267a30d5ccd><p class=pgc-img-caption></p></div><p></p><p><strong>堆栈</strong></p><p></p><p>其实堆栈本身就是栈，只是换了个抽象的名字。其特性是： 最后一个放入堆栈中的物体总是被最先拿出来，这个特性通常称为后进先出(LIFO)队列。堆栈中定义了一些操作。 两个最重要就是上述提到的PUSH和POP。PUSH操作在堆栈的顶部加入一个元素，POP操作相反，在堆栈顶部移去一个元素，并将堆栈的大小减一。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f1416e8c9ff74c28aa866fe9f423281d><p class=pgc-img-caption></p></div><p></p><p><strong>工作原理</strong></p><p><strong></strong></p><p>对于工作方式你可能还是一头雾水，以自助餐托盘为例解释一下，你就会更加明了：</p><p></p><p>作为堆栈如何工作的一个例子，可以把它看成一个弹簧加载托盘分发器，这种类型经常在自助餐厅中发现。每个托盘上都刻有数字。托盘依次从顶部装入，每个托盘都放置在已经装入的托盘上，弹簧进行压缩，以便在必要时为更多托盘留出空间。例如，在图中，托盘编号为42、23、2、9，先装载42个托盘，后装载9个托盘。</p><p></p><div class=pgc-img><img alt=计算机世界里的“堆栈”你真的懂吗？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f580ce5d9f0344c8b94b5fb98901aa05><p class=pgc-img-caption></p></div><p>最后一个托盘是9号。因此，“第一个出来”的盘子也是9号。当顾客从托盘堆的顶部取出托盘时，第一个托盘是9号，第二个托盘是2号。然后更多的托盘被添加。这些托盘将不得不在我们装载第一个托盘之前从堆栈上下来。在托盘堆的任意顺序的push和pop出之后，托盘42仍然在底部。只有在42号托盘从堆栈顶部弹出后，堆栈才会再次清空。</p><p></p><p>而堆栈通常被放置在机器的最上面的地址区域。它们通常从最高的内存位置增长到较低的内存位置，允许在程序内存末端和堆栈“顶部”之间的内存使用中获得最大的灵活性。在我们的讨论中，堆栈在内存中是“向上”增长还是“向下”增长基本上是不相关的。堆栈的“top”元素是最后被推入并将首先被弹出的元素。堆栈的“底部”元素在删除时将使堆栈为空。</p><p></p><p><strong>二者区别</strong></p><p></p><p>堆是在程序运行时，而不是在程序编译时，申请某个大小的内存空间。即动态分配内存，对其访问和对一般内存的访问没有区别。它由程序员分配和回收。</p><p></p><p>栈就是一个桶，后放进去的先拿出来，它下面本来有的东西要等它出来之后才能出来。（后进先出）由系统自动分配和回收。</p><p></p><p><strong>堆栈缓存方式</strong></p><p></p><p>栈使用的是一级缓存， 他们通常都是被调用时处于存储空间中，调用完毕立即释放。</p><p></p><p>堆则是存放在二级缓存中，生命周期由虚拟机的垃圾回收算法来决定（并不是一旦成为孤儿对象就能被回收）。所以调用这些对象的速度要相对来得低一些。栈的优势是，存取速度比堆要快，仅次于直接位于CPU中的寄存器。</p><p></p><p>栈：在Windows下,栈是向低地址扩展的数据结构，是一块连续的内存的区域。意思是栈顶的地址和栈的最大容量是系统预先规定好的，在 WINDOWS下，栈的大小是2M（也有的说是1M，总之是一个编译时就确定的常数），如果申请的空间超过栈的剩余空间时，将提示overflow。因此，能从栈获得的空间较小。</p><p></p><p>堆：堆是向高地址扩展的数据结构，是不连续的内存区域。这是由于系统是用链表来存储的空闲内存地址的，自然是不连续的，而链表的遍历方向是由低地址向高地址。堆的大小受限于计算机系统中有效的虚拟内存。由此可见，堆获得的空间比较灵活，也比较大。</p><p></p><p>作为“堆”的数据空间，必须是灵活的，因为成千上万的程序员在写什么程序是未知的。但可知道的一点，就是他们是跑在确定的某个OS里面的。因此，也不过就是给系统管理的数据空间起了个名字，叫栈；给程序员使用的空间，起了个名，叫堆。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'计算机','里的','堆栈'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>