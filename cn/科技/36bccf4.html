<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>操作系统之进程的描述与控制 | 极客快訊</title><meta property="og:title" content="操作系统之进程的描述与控制 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1543401449766b1a896001c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36bccf4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36bccf4.html><meta property="article:published_time" content="2020-10-29T20:59:06+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:06+08:00"><meta name=Keywords content><meta name=description content="操作系统之进程的描述与控制"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/36bccf4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>操作系统之进程的描述与控制</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>1.前趋图和程序执行</strong></h1><p><strong>1）前趋图：</strong></p><p>有向无循环图 （关注的是前趋关系，不能有循环）</p><p><strong>2）程序顺序执行的特征：</strong></p><p>1.顺序性 2.封闭性 3.可再现性</p><p><strong>3）程序的并发执行：</strong></p><p>要符合前趋关系，并发不是随意的</p><p>特征：1.间断性 2.失去封闭性 3.不可再现性</p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1543401449766b1a896001c><p class=pgc-img-caption></p></div><h1>2.进程的描述</h1><p>1）进程的定义：</p><p>进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。</p><p>2）进程的特征：</p><p>1.结构性 2. 动态性 3.并发性 4.独立性 5.异步性</p><p>3）进程的基本状态：</p><p>1.就绪状态 2.执行状态 3.阻塞状态</p><p>4）挂起操作原因：</p><p>（1）终端用户的需要</p><p>（2）父进程请求</p><p>（3）负荷调节的需要</p><p>（4）操作系统的需要</p><p>5）进程控制块PCB</p><p>进程实体：</p><p>代码段+数据段+PCB</p><p>定义：</p><p>存放进程的管理和控制信息的数据结构</p><p>作用：</p><p>（1）作为独立运行基本单位的标志</p><p>（2）能实现间断性运行方式</p><p>（3）提供进程管理所需要的信息</p><p>（4）提供进程调度所需要的信息</p><p>（5）实现与其他进程的同步与通信</p><p>PCB中的信息：</p><p>（1）进程标识等信息</p><p>（2）处理机状态信息</p><p>（3）进程调度信息</p><p>（4）进程控制信息</p><p>PCB信息的存放：</p><p>常驻内存的PCB区</p><p>采用的数据结构：PCB结构体，PCB链表或队列</p><p>PCB的组织方式：</p><p>（1）线性方式 （2）链接方式 （3）索引方式</p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/df0e6165-cc50-4a03-8d52-d6b81e8c6fe2><p class=pgc-img-caption></p></div><h1>3.进程控制</h1><p>1）操作系统内核：</p><p>支撑功能：</p><p>1.中断处理 2.时钟管理 3.原语操作</p><p>资源管理功能：</p><p>1.进程管理 2. 存储器管理 3. 设备管理</p><p>2）进程的创建：（原语操作，不可被打断）</p><p>（1） 申请空白PCB</p><p>（2）为新进程分配其运行所需的资源</p><p>（3）初始化进程控制块</p><p>（4）将新进程插入到就绪队列</p><p>3）进程的终止：（原语操作，不可被打断）</p><p>1.正常结束 2.异常结束 3.外界干预</p><p>4）进程的阻塞</p><p>（1）向系统请求共享资源失败</p><p>（2）等待某种操作的完成</p><p>（3）新数据尚未到达</p><p>（4）等待新任务的到达</p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/860fd5e8-c475-4a44-aa47-190723f00517><p class=pgc-img-caption></p></div><h1>4.进程同步</h1><p>使并发执行的诸进程之间能有效地共享资源和相互合作，从而使程序的执行具有可再现性。</p><p>1）进程同步的两种形式的制约关系：</p><p>间接相互制约关系</p><p>直接相互制约关系</p><p>2）访问临界资源的循环进程：</p><p>while（true）</p><p>{</p><p>进入区</p><p>临界区</p><p>退出区</p><p>剩余区</p><p>}</p><p>3）同步机制应遵循的原则：</p><p>（1）空闲让进：资源使用最基本原则</p><p>（2）忙则等待：保证互斥</p><p>（3）有限等待：合适时被唤醒防止死等</p><p>（4）让权等待：能主动释放CPU防止死等</p><p>4）控制同步的关键？</p><p>不被打断的进行标志值的判断和修改</p><p>5）信号量机制</p><p>（1）整型信号量</p><p>1.信号量定义为一个整型量</p><p>2.根据初始情况赋相应的值</p><p>3.仅能通过两个原子操作来访问</p><p>4. P操作 ：</p><p>wait（s）:</p><p>while s&lt;=0 do no-op;</p><p>s:=s-1;</p><p>V操作:</p><p>signal(s):</p><p>s:s+1;</p><p>（2)记录型信号量：</p><p>1.记录型数据结构：整型变量value 进程链表L</p><p>2.value>0,表示当前可用资源的数量</p><p>value&lt;=0,其绝对值表示等待使用该资源的进程数，即在该信号量队列上排队的PCB的个数</p><p>3.P操作：</p><p>wait（）：</p><p>s.value()=s.value()-1；</p><p>if s.value（）&lt;0 then block(s,L)</p><p>V操作:</p><p>signal():</p><p>s.value()=s.value()+1;</p><p>if s.value&lt;=0 then wakeup(s,L)</p><p>（3)AND型信号量</p><p>设置互斥的信号量：Dmutex、Emutex，令它们的初值为1</p><p>（4）信号量集</p><p>（1）Swait(S,d,d）:此时在信号量集中只有一个信号量S，但允许它每次申请d个资源，当现有资源数少于d时，不予分配</p><p>（2）Swait（S,1,1）:此时的信号量集已蜕化为一般的记录型信号量（S>1时）或互斥信号量（S=1时）</p><p>（3）Swait（S,1,0）:这是一种很特殊且很有用的信号量操作。当S>=1时，允许多个进程进入某特定区；当S变为0后，将阻止任何进程进入特定区。换言之，它相当于一个可控开关。</p><p>6）信号量的应用</p><p>（1）实现有序</p><p>1.前趋关系</p><p>2.为每队前趋关系设置一个同步信号量S，并赋初值为0</p><p>p1: C1;signal(s);</p><p>p2:wait(s);C2;</p><p>3.控制同步顺序的注意点</p><p>①<strong>信号量值为0的点是限制的关键</strong></p><p>②<strong>成对使用P、V原语（在有先后关系的两个进程中），不能次序错误，重复或遗漏。</strong></p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1543401549343f4200c57be><p class=pgc-img-caption></p></div><h1>5.经典进程的同步问题</h1><p>1）生产者-消费者问题</p><p>（1）无论生产者、消费者使用缓冲池时应保证互斥使用（互斥信号量mutex ）</p><p>（2）生产者和消费者间交叉有序：</p><p>有序的控制最根源在产品数量上。</p><p>设置两个信号量：分别针对生产者、消费者设置不同的信号量，empty和full分别表示缓冲池中空缓冲池和满缓冲池（即产品）的数量。</p><p><strong>empty、full两者有天然的数量关系，在PV控制下值不断变化，但在值等于0的点上是控制顺序的关键。</strong></p><p>2）哲学家进餐问题</p><p>（1）记录型信号量解决就餐问题：</p><p><strong>筷子是临界资源</strong>，在一段时间内只允许一个哲学家使用。为实现对筷子的互斥使用，用一个信号量表示一只筷子，五个信号量构成信号量数组。</p><p>Var chopstick: array [0, …, 4] of semaphore;</p><p><strong>所有信号量均被初始化为1。</strong>.</p><p>第i 位哲学家的活动可描述为：</p><p>repeat</p><p>wait(chopstick[ i ]);//<strong>当哲学家饥饿时，总先拿起左边的筷子，再拿起右边的筷子</strong></p><p>wait(chopstick[ ( i +1) mod 5] );</p><p>…</p><p>eat;</p><p>…</p><p>signal(chopstick[ i ]);//<strong>当哲学家饥饿时，总先拿起左边的筷子，再拿起右边的筷子</strong></p><p>signal(chopstick[ ( i +1) mod 5] );</p><p>…</p><p>think;</p><p>until false;</p><p>(2)就餐死锁问题</p><p>解决方法：</p><p>1.数量控制：至多只允许有四位哲学家同时去拿左边的筷子，最终能保证至少有一位哲学家能够进餐，并在用毕后释放出他用过的两只筷子，从而使更多的哲学家能够进餐。</p><p><strong>---限制并发执行的进程数</strong></p><p><strong>2.</strong>规定奇数号哲学家先拿他左边的筷子，然后再去拿右边的筷子；而偶数号哲学家则相反。按此规定，将是1、2号哲学家竞争1号筷子；3、4号哲学家竞争3号筷子。即5位哲学家都先竞争奇数号筷子。获得后，再去竞争偶数号筷子。最后总会有一位哲学家能获得两只筷子而进餐。</p><p>3.仅当哲学家的左右两只筷子均可用时，才允许他拿起筷子进餐。</p><p><strong>---采用AND信号量。</strong></p><p><strong>3）读者-写者问题</strong></p><p><strong>（1）利用记录型信号量</strong></p><p>为实现Reader与Writer进程间在读或写时的互斥而设置了两个互斥信号量wmutex和rmutex。另外，再设置一个整型变量readcount表示正在读的进程数目。</p><p>semaphore rmutex=1,wmutex=1;</p><p>int readcount=0;</p><p>void reader(){</p><p>do{</p><p>wait（rmutex）; //rmutex=0</p><p>if（readcount==0）wait(wmutex); //wmutex=0</p><p>readcount++;</p><p>signal(rmutex);</p><p>……</p><p>perform read operation；</p><p>……</p><p>wait（rmutex）;</p><p>readcount--;</p><p>if（readcount==0）signal(wmutex);</p><p>signal(rmutex);</p><p>}while（TRUE）；</p><p>}</p><p>(2)利用信号量集</p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1543401594512c8ecada0d4><p class=pgc-img-caption></p></div><h1>6.管程机制</h1><p>（把信号量及其操作原语“封装”在一个对象内部）</p><p>1）信号量机制的不足：</p><p>（1）正确性分析困难</p><p>（2）分散的P、V操作：易出错，使用不当可能导致死锁</p><p>（3）修改、维护困难：易读性差，任一修改都可能影响全局；测试期间发现错误困难，即使发现错误也不容易定位出错位置。</p><p>2）管程的组成</p><p>（1）一组局部变量</p><p>（2）对局部变量操作的一组过程</p><p>（3）对局部变量进行初始化的语句。（联想面向对象中的类）</p><div class=pgc-img><img alt=操作系统之进程的描述与控制 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15434016169528d53383feb><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'系统','进程','描述'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>