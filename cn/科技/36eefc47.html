<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ | æå®¢å¿«è¨Š</title><meta property="og:title" content="é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/19a8d23522b640b4a8d8a927514eca33"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/36eefc47.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/36eefc47.html><meta property="article:published_time" content="2020-10-29T21:09:19+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:19+08:00"><meta name=Keywords content><meta name=description content="é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/36eefc47.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p><strong>å‰è¨€</strong></p><p>HashMapæ˜¯Mapä¸­æœ€ä¸ºå¸¸ç”¨çš„ä¸€ç§ï¼Œé¢è¯•ä¸­ä¹Ÿç»å¸¸ä¼šè¢«é—®åˆ°ç›¸å…³çš„é—®é¢˜ã€‚ç”±äºHashMapæ•°æ®ç»“æ„è¾ƒä¸ºå¤æ‚ï¼Œå›ç­”ç›¸å…³é—®é¢˜çš„æ—¶å€™å¾€å¾€ä¸å°½äººæ„ï¼Œå°¤å…¶æ˜¯åœ¨JDK1.8ä¹‹åï¼Œåˆå¼•å…¥äº†çº¢é»‘æ ‘ç»“æ„ï¼Œå…¶æ•°æ®ç»“æ„å˜çš„æ›´åŠ å¤æ‚ï¼Œæœ¬æ–‡å°±JDK1.8æºç ä¸ºä¾‹ï¼Œå¯¹HashMapè¿›è¡Œåˆ†æï¼›</p><p><strong>æºç åˆ†æ</strong></p><p><strong>1. æ„é€ æ–¹æ³•</strong></p><pre>public HashMap(int initialCapacity, float loadFactor) { if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; this.threshold = tableSizeFor(initialCapacity); } public HashMap(int initialCapacity) { this(initialCapacity, DEFAULT_LOAD_FACTOR); } public HashMap() { this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted } public HashMap(Map&lt;? extends K, ? extends V&gt; m) { this.loadFactor = DEFAULT_LOAD_FACTOR; putMapEntries(m, false); }</pre><p>æ„é€ æ–¹æ³•ä¸€å…±é‡è½½äº†å››ä¸ªï¼Œä¸»è¦åˆå§‹åŒ–äº†ä¸‰ä¸ªå‚æ•°ï¼š</p><p><strong>- initialCapacity åˆå§‹å®¹é‡ï¼ˆé»˜è®¤16ï¼‰ï¼š</strong>hashMapåº•å±‚ç”±æ•°ç»„å®ç°+é“¾è¡¨ï¼ˆæˆ–çº¢é»‘æ ‘ï¼‰å®ç°ï¼Œä½†æ˜¯è¿˜æ˜¯ä»æ•°ç»„å¼€å§‹ï¼Œæ‰€ä»¥å½“å‚¨å­˜çš„æ•°æ®è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå°±å¿…é¡»è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œå¦‚æœåœ¨çŸ¥é“éœ€è¦å‚¨å­˜æ•°æ®å¤§å°çš„æƒ…å†µä¸‹ï¼ŒæŒ‡å®šåˆé€‚çš„åˆå§‹å®¹é‡ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„æ‰©å®¹æ“ä½œï¼Œæå‡æ•ˆç‡</p><p><strong>- threshold é˜ˆå€¼ï¼š</strong>hashMapæ‰€èƒ½å®¹çº³çš„æœ€å¤§ä»·å€¼å¯¹æ•°é‡ï¼Œå¦‚æœè¶…è¿‡åˆ™éœ€è¦æ‰©å®¹ï¼Œè®¡ç®—æ–¹å¼ï¼šthreshold=initialCapacity*loadFactorï¼ˆæ„é€ æ–¹æ³•ä¸­ç›´æ¥é€šè¿‡tableSizeFor(initialCapacity)æ–¹æ³•è¿›è¡Œäº†èµ‹å€¼ï¼Œä¸»è¦åŸå› æ˜¯åœ¨æ„é€ æ–¹æ³•ä¸­ï¼Œæ•°ç»„tableå¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œputæ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒæ—¶putæ–¹æ³•ä¸­ä¹Ÿä¼šå¯¹thresholdè¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œè¿™ä¸ªä¼šåœ¨åé¢çš„æºç ä¸­è¿›è¡Œåˆ†æï¼‰</p><p><strong>- loadFactor åŠ è½½å› å­ï¼ˆé»˜è®¤0.75ï¼‰ï¼š</strong>å½“è´Ÿè½½å› å­è¾ƒå¤§æ—¶ï¼Œå»ç»™tableæ•°ç»„æ‰©å®¹çš„å¯èƒ½æ€§å°±ä¼šå°‘ï¼Œæ‰€ä»¥ç›¸å¯¹å ç”¨å†…å­˜è¾ƒå°‘ï¼ˆç©ºé—´ä¸Šè¾ƒå°‘ï¼‰ï¼Œä½†æ˜¯æ¯æ¡entryé“¾ä¸Šçš„å…ƒç´ ä¼šç›¸å¯¹è¾ƒå¤šï¼ŒæŸ¥è¯¢çš„æ—¶é—´ä¹Ÿä¼šå¢é•¿ï¼ˆæ—¶é—´ä¸Šè¾ƒå¤šï¼‰ã€‚åä¹‹å°±æ˜¯ï¼Œè´Ÿè½½å› å­è¾ƒå°‘çš„æ—¶å€™ï¼Œç»™tableæ•°ç»„æ‰©å®¹çš„å¯èƒ½æ€§å°±é«˜ï¼Œé‚£ä¹ˆå†…å­˜ç©ºé—´å ç”¨å°±å¤šï¼Œä½†æ˜¯entryé“¾ä¸Šçš„å…ƒç´ å°±ä¼šç›¸å¯¹è¾ƒå°‘ï¼ŒæŸ¥å‡ºçš„æ—¶é—´ä¹Ÿä¼šå‡å°‘ã€‚æ‰€ä»¥æ‰æœ‰äº†è´Ÿè½½å› å­æ˜¯æ—¶é—´å’Œç©ºé—´ä¸Šçš„ä¸€ç§æŠ˜ä¸­çš„è¯´æ³•ã€‚æ‰€ä»¥è®¾ç½®è´Ÿè½½å› å­çš„æ—¶å€™è¦è€ƒè™‘è‡ªå·±è¿½æ±‚çš„æ˜¯æ—¶é—´è¿˜æ˜¯ç©ºé—´ä¸Šçš„å°‘ã€‚ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦è®¾ç½®ï¼Œç³»ç»Ÿç»™çš„é»˜è®¤å€¼å·²ç»æ¯”è¾ƒé€‚åˆäº†ï¼‰</p><p>æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ ï¼Œåœ¨è¿™ä¸ªæ„é€ æ–¹æ³•é‡Œé¢ä»…ä»…è®¾ç½®äº†åŠ è½½å› å­ä¸ºé»˜è®¤å€¼ï¼Œå…¶ä»–ä¸¤ä¸ªå‚æ•°ä¼šåœ¨resizeæ–¹æ³•é‡Œé¢è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨è¿™é‡ŒçŸ¥é“è¿™ä¸ªç»“è®ºå°±å¯ä»¥äº†ï¼Œä¸‹é¢ä¼šåœ¨æºç é‡Œé¢è¿›è¡Œåˆ†æï¼›å¦å¤–ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œé‡Œé¢å¯¹åˆå§‹å®¹é‡å’Œé˜ˆå€¼è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œå¯¹é˜ˆå€¼çš„åˆå§‹åŒ–æ–¹æ³•ä¸º tableSizeFor(int cap),çœ‹ä¸€ä¸‹æºç ï¼š</p><pre>public HashMap(int initialCapacity, float loadFactor) { /** * æ‰¾åˆ°å¤§äºæˆ–ç­‰äº cap çš„æœ€å°2çš„å¹‚ */ static final int tableSizeFor(int cap) { int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1; }</pre><p>ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘å½“æ—¶çš„å¿ƒæƒ…æ˜¯ï¼š</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/19a8d23522b640b4a8d8a927514eca33><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>æ¥ä¸‹æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œä¸‹é¢å·ä¸€å¼ å›¾ï¼ˆçœŸçš„æ˜¯å€Ÿåˆ«äººçš„å›¾ï¼Œgoogleæœç´¢çš„,ä¸çŸ¥é“æ˜¯è°çš„ï¼Œå¦‚æœå¤§ä½¬è§‰å¾—å¤ªå¯è€»ï¼Œç§ä¿¡æˆ‘æˆ‘åˆ äº†ä»–ï¼‰ä»¥10ä¸ºä¾‹è¿›è¡Œåˆ†æï¼š</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/cabf4b9f4c6e47eaa2fc6215b9041707><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹çš„æ˜¯ï¼Œç¬¬ä¸€æ­¥ int n = cap - 1; è¿™ä¸ªæ“ä½œï¼Œæ‰§è¡Œè¿™ä¸ªæ“ä½œçš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†é˜²æ­¢åœ¨capå·²ç»æ˜¯2çš„næ¬¡å¹‚çš„æƒ…å†µä¸‹ï¼Œç»è¿‡è¿ç®—åå¾—åˆ°çš„ç»“æœæ˜¯capçš„äºŒå€çš„ç»“æœï¼Œä¾‹å¦‚å¦‚æœnä¸ºl6ï¼Œç»è¿‡ä¸€ç³»åˆ—è¿ç®—ä¹‹åï¼Œå¾—åˆ°çš„ç»“æœæ˜¯0001 1111ï¼Œæ­¤æ—¶æœ€åä¸€æ­¥n+1 æ‰§è¡Œä¹‹åï¼Œå°±ä¼šè¿”å›32ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±è¿›è¡Œå°è¯•ï¼›</p><p><strong>2. putæ–¹æ³•</strong></p><p>åœ¨hashMapæºç ä¸­ï¼Œputæ–¹æ³•é€»è¾‘æ˜¯æœ€ä¸ºå¤æ‚çš„ï¼Œæ¥ä¸‹æ¥å…ˆçœ‹ä¸€ä¸‹æºç ï¼š</p><pre>public V put(K key, V value) { return putVal(hash(key), key, value, false, true); } final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) //å¦‚æœtableå°šæœªåˆå§‹åŒ–ï¼Œåˆ™æ­¤å¤„è¿›è¡Œåˆå§‹åŒ–æ•°ç»„ï¼Œå¹¶èµ‹å€¼åˆå§‹å®¹é‡ï¼Œé‡æ–°è®¡ç®—é˜ˆå€¼ n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) //é€šè¿‡hashæ‰¾åˆ°ä¸‹æ ‡ï¼Œå¦‚æœhashå€¼æŒ‡å®šçš„ä½ç½®æ•°æ®ä¸ºç©ºï¼Œåˆ™ç›´æ¥å°†æ•°æ®å­˜æ”¾è¿›å» tab[i] = newNode(hash, key, value, null); else { //å¦‚æœé€šè¿‡hashæ‰¾åˆ°çš„ä½ç½®æœ‰æ•°æ®ï¼Œå‘ç”Ÿç¢°æ’ Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) //å¦‚æœéœ€è¦æ’å…¥çš„keyå’Œå½“å‰hashå€¼æŒ‡å®šä¸‹æ ‡çš„keyä¸€æ ·ï¼Œå…ˆå°†eæ•°ç»„ä¸­å·²æœ‰çš„æ•°æ® e = p; else if (p instanceof TreeNode) //å¦‚æœæ­¤æ—¶æ¡¶ä¸­æ•°æ®ç±»å‹ä¸º treeNodeï¼Œä½¿ç”¨çº¢é»‘æ ‘è¿›è¡Œæ’å…¥ e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else { //æ­¤æ—¶æ¡¶ä¸­æ•°æ®ç±»å‹ä¸ºé“¾è¡¨ // è¿›è¡Œå¾ªç¯ for (int binCount = 0; ; ++binCount) { if ((e = p.next) == null) { //å¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰æœ€æ–°æ’å…¥çš„èŠ‚ç‚¹ï¼Œå°†æ–°æ”¾å…¥çš„æ•°æ®æ”¾åˆ°é“¾è¡¨çš„æœ«å°¾ p.next = newNode(hash, key, value, null); //å¦‚æœé“¾è¡¨è¿‡é•¿ï¼Œè¾¾åˆ°æ ‘åŒ–é˜ˆå€¼ï¼Œå°†é“¾è¡¨è½¬åŒ–æˆçº¢é»‘æ ‘ if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; } //å¦‚æœé“¾è¡¨ä¸­æœ‰æ–°æ’å…¥çš„èŠ‚ç‚¹ä½ç½®æ•°æ®ä¸ä¸ºç©ºï¼Œåˆ™æ­¤æ—¶e èµ‹å€¼ä¸ºèŠ‚ç‚¹çš„å€¼ï¼Œè·³å‡ºå¾ªç¯ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; } } //ç»è¿‡ä¸Šé¢çš„å¾ªç¯åï¼Œå¦‚æœeä¸ä¸ºç©ºï¼Œåˆ™è¯´æ˜ä¸Šé¢æ’å…¥çš„å€¼å·²ç»å­˜åœ¨äºå½“å‰çš„hashMapä¸­ï¼Œé‚£ä¹ˆæ›´æ–°æŒ‡å®šä½ç½®çš„é”®å€¼å¯¹ if (e != null) { // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; } } ++modCount; //å¦‚æœæ­¤æ—¶hashMap sizeå¤§äºé˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null; }</pre><p>ä»ä»£ç çœ‹ï¼Œputæ–¹æ³•åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p><ul><li>tableå°šæœªåˆå§‹åŒ–ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆå§‹åŒ–</li><li>tableå·²ç»åˆå§‹åŒ–ï¼Œä¸”é€šè¿‡hashç®—æ³•æ‰¾åˆ°ä¸‹æ ‡æ‰€åœ¨çš„ä½ç½®æ•°æ®ä¸ºç©º,ç›´æ¥å°†æ•°æ®å­˜æ”¾åˆ°æŒ‡å®šä½ç½®</li><li>tableå·²ç»åˆå§‹åŒ–ï¼Œä¸”é€šè¿‡hashç®—æ³•æ‰¾åˆ°ä¸‹æ ‡æ‰€åœ¨çš„ä½ç½®æ•°æ®ä¸ä¸ºç©ºï¼Œå‘ç”Ÿhashå†²çªï¼ˆç¢°æ’ï¼‰ï¼Œå‘ç”Ÿç¢°æ’åï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</li><li>-- åˆ¤æ–­æ’å…¥çš„keyå¦‚æœç­‰äºå½“å‰ä½ç½®çš„keyçš„è¯ï¼Œå°† e æŒ‡å‘è¯¥é”®å€¼å¯¹</li><li>-- å¦‚æœæ­¤æ—¶æ¡¶ä¸­æ•°æ®ç±»å‹ä¸º treeNodeï¼Œä½¿ç”¨çº¢é»‘æ ‘è¿›è¡Œæ’å…¥</li><li>-- å¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™è¿›è¡Œå¾ªç¯åˆ¤æ–­ï¼Œ å¦‚æœé“¾è¡¨ä¸­åŒ…å«è¯¥èŠ‚ç‚¹ï¼Œè·³å‡ºå¾ªç¯ï¼Œå¦‚æœé“¾è¡¨ä¸­ä¸åŒ…å«è¯¥èŠ‚ç‚¹ï¼Œåˆ™æŠŠè¯¥èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨æœ«å°¾ï¼ŒåŒæ—¶ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡æ ‘åŒ–é˜ˆå€¼ï¼ˆTREEIFY_THRESHOLDï¼‰ä¸”tableå®¹é‡è¶…è¿‡æœ€å°æ ‘åŒ–å®¹é‡ï¼ˆMIN_TREEIFY_CAPACITYï¼‰ï¼Œåˆ™è¿›è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘ï¼ˆç”±äºtableå®¹é‡è¶Šå°ï¼Œè¶Šå®¹æ˜“å‘ç”Ÿhashå†²çªï¼Œå› æ­¤åœ¨tableå®¹é‡&lt;MIN_TREEIFY_CAPACITY çš„æ—¶å€™ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦>TREEIFY_THRESHOLD,ä¼šä¼˜å…ˆé€‰æ‹©æ‰©å®¹ï¼Œå¦åˆ™ä¼šè¿›è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘æ“ä½œï¼‰</li></ul><p>é¦–å…ˆåˆ†ætableå°šæœªåˆå§‹åŒ–çš„æƒ…å†µï¼š</p><p><strong>tableå°šæœªåˆå§‹åŒ–</strong></p><pre>n = (tab = resize()).length;</pre><p>ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼Œtableå°šæœªåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨resize()æ–¹æ³•ï¼š</p><pre>final Node&lt;K,V&gt;[] resize() { Node&lt;K,V&gt;[] oldTab = table; int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; //1ã€tableå·²ç»åˆå§‹åŒ–ï¼Œä¸”å®¹é‡ &gt; 0 if (oldCap &gt; 0) { if (oldCap &gt;= MAXIMUM_CAPACITY) { //å¦‚æœæ—§çš„å®¹é‡å·²è¿‘è¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™ä¸å†æ‰©å®¹ï¼Œé˜ˆå€¼ç›´æ¥è®¾ç½®ä¸ºæœ€å¤§å€¼ threshold = Integer.MAX_VALUE; return oldTab; } else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) //å¦‚æœæ—§çš„å®¹é‡ä¸å°äºé»˜è®¤çš„åˆå§‹å®¹é‡ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ï¼Œå®¹é‡æ‰©å¼ ä¸ºåŸæ¥çš„äºŒå€ newThr = oldThr &lt;&lt; 1; // double threshold } //2ã€é˜ˆå€¼å¤§äº0 threshold ä½¿ç”¨ threshold å˜é‡æš‚æ—¶ä¿å­˜ initialCapacity å‚æ•°çš„å€¼ else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; //3 threshold å’Œ table çš†æœªåˆå§‹åŒ–æƒ…å†µï¼Œæ­¤å¤„å³ä¸ºé¦–æ¬¡è¿›è¡Œåˆå§‹åŒ– //ä¹Ÿå°±åœ¨æ­¤å¤„è§£é‡Šäº†æ„é€ æ–¹æ³•ä¸­æ²¡æœ‰å¯¹threshold å’Œ åˆå§‹å®¹é‡è¿›è¡Œèµ‹å€¼çš„é—®é¢˜ else { // zero initial threshold signifies using defaults //å¦‚æœé˜ˆå€¼ä¸ºé›¶ï¼Œè¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„åˆå§‹åŒ–å€¼ //è¿™ç§æƒ…å†µåœ¨è°ƒç”¨æ— å‚æ„é€ çš„æ—¶å€™ä¼šå‡ºç°ï¼Œæ­¤æ—¶ä½¿ç”¨é»˜è®¤çš„å®¹é‡å’Œé˜ˆå€¼ newCap = DEFAULT_INITIAL_CAPACITY; //æ­¤å¤„é˜ˆå€¼å³ä¸º threshold=initialCapacity*loadFactor newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); } // newThr ä¸º 0 æ—¶ï¼ŒæŒ‰é˜ˆå€¼è®¡ç®—å…¬å¼è¿›è¡Œè®¡ç®—ï¼Œå®¹é‡*è´Ÿè½½å› å­ if (newThr == 0) { float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); } //æ›´æ–°é˜ˆå€¼ threshold = newThr; //æ›´æ–°æ•°ç»„æ¡¶ @SuppressWarnings({"rawtypes","unchecked"}) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; //å¦‚æœä¹‹å‰çš„æ•°ç»„æ¡¶é‡Œé¢å·²ç»å­˜åœ¨æ•°æ®ï¼Œç”±äºtableå®¹é‡å‘ç”Ÿå˜åŒ–ï¼Œhashå€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—ä¸‹æ ‡ if (oldTab != null) { for (int j = 0; j &lt; oldCap; ++j) { Node&lt;K,V&gt; e; //å¦‚æœæŒ‡å®šä¸‹æ ‡ä¸‹æœ‰æ•°æ® if ((e = oldTab[j]) != null) { //1ã€å°†æŒ‡å®šä¸‹æ ‡æ•°æ®ç½®ç©º oldTab[j] = null; //2ã€æŒ‡å®šä¸‹æ ‡åªæœ‰ä¸€ä¸ªæ•°æ® if (e.next == null) //ç›´æ¥å°†æ•°æ®å­˜æ”¾åˆ°æ–°è®¡ç®—çš„hashå€¼ä¸‹æ ‡ä¸‹ newTab[e.hash &amp; (newCap - 1)] = e; //3ã€å¦‚æœæ˜¯TreeNodeæ•°æ®ç»“æ„ else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); //4ã€å¯¹äºé“¾è¡¨ï¼Œæ•°æ®ç»“æ„ else { // preserve order //å¦‚æœæ˜¯é“¾è¡¨ï¼Œé‡æ–°è®¡ç®—hashå€¼ï¼Œæ ¹æ®æ–°çš„ä¸‹æ ‡é‡æ–°åˆ†ç»„ Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do { next = e.next; if ((e.hash &amp; oldCap) == 0) { if (loTail == null) loHead = e; else loTail.next = e; loTail = e; } else { if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; } } while ((e = next) != null); if (loTail != null) { loTail.next = null; newTab[j] = loHead; } if (hiTail != null) { hiTail.next = null; newTab[j + oldCap] = hiHead; } } } } } return newTab; }</pre><p>resizeæ–¹æ³•é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦é™ä¸‹å¿ƒæ¥ä¸€æ­¥æ­¥çš„åˆ†æï¼Œä½†æ˜¯æ€»çš„ä¸‹æ¥ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>é¦–å…ˆå…ˆåˆ¤æ–­å½“å‰tableæ˜¯å¦è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œæ­¤å¤„å°±è§£å†³äº†è°ƒç”¨æ— å‚æ„é€ æ–¹æ³•æ—¶å€™ï¼Œthresholdå’ŒinitialCapacity æœªåˆå§‹åŒ–çš„é—®é¢˜ï¼Œå¦‚æœå·²ç»åˆå§‹åŒ–è¿‡äº†ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ï¼Œå®¹é‡ä¸ºåŸæ¥çš„äºŒå€</li><li>æ‰©å®¹ååˆ›å»ºæ–°çš„tableï¼Œå¹¶å¯¹æ‰€æœ‰çš„æ•°æ®è¿›è¡Œéå†</li><li>-- å¦‚æœæ–°è®¡ç®—çš„ä½ç½®æ•°æ®ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥</li><li>-- å¦‚æœæ–°è®¡ç®—çš„ä½ç½®ä¸ºé“¾è¡¨ï¼Œåˆ™é€šè¿‡hashç®—æ³•é‡æ–°è®¡ç®—ä¸‹æ ‡ï¼Œå¯¹é“¾è¡¨è¿›è¡Œåˆ†ç»„</li><li>-- å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™éœ€è¦è¿›è¡Œæ‹†åˆ†æ“ä½œ</li></ul><p><strong>3. getæ–¹æ³•ï¼ŒæŸ¥æ‰¾</strong></p><p>putæ–¹æ³•åˆ†æå®Œæˆä¹‹åï¼Œå‰©ä¸‹çš„å°±å¾ˆç®€å•äº†ï¼Œå…ˆçœ‹ä¸€ä¸‹æºç ï¼š</p><pre>public V get(Object key) { Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value; } final Node&lt;K,V&gt; getNode(int hash, Object key) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) { //1ã€æ ¹æ®hashç®—æ³•æ‰¾åˆ°å¯¹åº”ä½ç½®çš„ç¬¬ä¸€ä¸ªæ•°æ®ï¼Œå¦‚æœæ˜¯æŒ‡å®šçš„keyï¼Œåˆ™ç›´æ¥è¿”å› if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; if ((e = first.next) != null) { //å¦‚æœè¯¥èŠ‚ç‚¹ä¸ºçº¢é»‘æ ‘ï¼Œåˆ™é€šè¿‡æ ‘è¿›è¡ŒæŸ¥æ‰¾ if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); //å¦‚æœè¯¥èŠ‚ç‚¹æ˜¯é“¾è¡¨ï¼Œåˆ™éå†æŸ¥æ‰¾åˆ°æ•°æ® do { if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; } while ((e = e.next) != null); } } return null; }</pre><p>getæ–¹æ³•ç›¸å¯¹äºputæ¥è¯´ï¼Œé€»è¾‘å®åœ¨æ˜¯ç®€å•å¤ªå¤šäº†</p><ol><li>æ ¹æ®hashå€¼æŸ¥æ‰¾åˆ°æŒ‡å®šä½ç½®çš„æ•°æ®</li><li>æ ¡éªŒæŒ‡å®šä½ç½®ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ˜¯keyæ˜¯å¦ä¸ºä¼ å…¥çš„keyï¼Œå¦‚æœæ˜¯ç›´æ¥è¿”å›ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™ç»§ç»­æŸ¥æ‰¾ç¬¬äºŒä¸ªèŠ‚ç‚¹</li><li>å¦‚æœæ•°æ®æ˜¯TreeNodeï¼ˆçº¢é»‘æ ‘ç»“æ„ï¼‰ï¼Œç›´æ¥é€šè¿‡çº¢é»‘æ ‘æŸ¥æ‰¾èŠ‚ç‚¹æ•°æ®å¹¶è¿”å›</li><li>å¦‚æœæ˜¯é“¾è¡¨ç»“æ„ï¼Œå¾ªç¯æŸ¥æ‰¾æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿”å›æ•°æ®</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„èŠ‚ç‚¹ï¼Œè¿”å›null</li></ol><p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œéœ€è¦æ³¨æ„çš„æœ‰ä¸¤ä¸ªåœ°æ–¹ï¼šhashï¼ˆkeyï¼‰å’Œhashçš„å–æ¨¡è¿ç®— (n - 1) & hash</p><p><strong>hashï¼ˆkeyï¼‰çš„æºç </strong></p><pre> static final int hash(Object key) { int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); }</pre><p>è¿™æ®µä»£ç å«åšæ‰°åŠ¨å‡½æ•°ï¼Œä¹Ÿæ˜¯hashMapä¸­çš„hashè¿ç®—ï¼Œä¸»è¦åˆ†ä¸ºä¸‹é¢å‡ æ­¥ï¼š</p><ul><li>key.hashCode()ï¼Œè·å–keyçš„hashCodeå€¼ï¼Œå¦‚æœä¸è¿›è¡Œé‡å†™çš„è¯è¿”å›çš„æ˜¯æ ¹æ®å†…å­˜åœ°å€å¾—åˆ°çš„ä¸€ä¸ªintå€¼</li><li>key.hashCode() è·å–åˆ°çš„hashcodeæ— ç¬¦å·å³ç§»16ä½å¹¶å’Œå…ƒhashCodeè¿›è¡Œ^ ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†è®©é«˜ä½ä¸ä½è¿›è¡Œæ··åˆï¼Œè®©ä¸¤è€…éƒ½å‚ä¸è¿ç®—ï¼Œä»¥ä¾¿è®©hashå€¼åˆ†å¸ƒæ›´åŠ å‡åŒ€</li></ul><p><strong>å–æ¨¡è¿ç®— (n - 1) & hash</strong></p><p>åœ¨hashMapçš„ä»£ç ä¸­ï¼Œåœ¨å¾ˆå¤šåœ°æ–¹éƒ½ä¼šçœ‹åˆ°ç±»ä¼¼çš„ä»£ç ï¼š</p><pre>first = tab[(n - 1) &amp; hash])</pre><p>hashç®—æ³•ä¸­ï¼Œä¸ºäº†ä½¿å…ƒç´ åˆ†å¸ƒçš„æ›´åŠ å‡åŒ€ï¼Œå¾ˆå¤šéƒ½ä¼šä½¿ç”¨å–æ¨¡è¿ç®—ï¼Œåœ¨hashMapä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ï¼ˆnï¼‰%hashè¿™æ ·è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œè€Œæ˜¯ä½¿ç”¨(n - 1) & hashè¿›è¡Œä»£æ›¿ï¼ŒåŸå› æ˜¯åœ¨è®¡ç®—æœºä¸­ï¼Œ&çš„æ•ˆç‡è¦è¿œé«˜äº%ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å®¹é‡ä¸º2çš„næ¬¡å¹‚çš„æ—¶å€™ï¼Œ(n - 1) & hash æ‰èƒ½ç­‰æ•ˆï¼ˆnï¼‰%hashï¼Œè¿™ä¹Ÿæ˜¯hashMap åˆå§‹åŒ–åˆå§‹å®¹é‡æ—¶ï¼Œæ— è®ºä¼ å…¥ä»»ä½•å€¼ï¼Œéƒ½ä¼šé€šè¿‡tableSizeFor(int cap) æ–¹æ³•è½¬åŒ–æˆ2çš„næ¬¡å¹‚çš„åŸå› ï¼Œè¿™ç§å·§å¦™çš„è®¾è®¡çœŸçš„å¾ˆä»¤äººæƒŠå¹</p><p><strong>removeæ–¹æ³•ï¼Œåˆ é™¤</strong></p><p>äº†è§£å®Œgetæ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬å†æœ€åäº†è§£ä¸€ä¸‹removeæ–¹æ³•ï¼š</p><pre> public V remove(Object key) { Node&lt;K,V&gt; e; return (e = removeNode(hash(key), key, null, false, true)) == null ? null : e.value; } final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, index; //æ ¹æ®keyå’Œkeyçš„hashå€¼ï¼ŒæŸ¥æ‰¾åˆ°å¯¹åº”çš„å…ƒç´  if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) { Node&lt;K,V&gt; node = null, e; K k; V v; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) node = p; else if ((e = p.next) != null) { if (p instanceof TreeNode) node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key); else { do { if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) { node = e; break; } p = e; } while ((e = e.next) != null); } } //å¦‚æœæŸ¥æ‰¾çš„äº†å…ƒç´ nodeï¼Œç§»é™¤å³å¯ if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) { //å¦‚æœæ˜¯TreeNodeï¼Œé€šè¿‡æ ‘è¿›è¡Œç§»é™¤ if (node instanceof TreeNode) ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable); //å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†indexä¸‹æ ‡çš„ä½ç½®æŒ‡å‘ç¬¬äºŒä¸ªèŠ‚ç‚¹ else if (node == p) tab[index] = node.next; else //å¦‚æœä¸æ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™ç§»é™¤è¯¥èŠ‚ç‚¹ p.next = node.next; ++modCount; --size; afterNodeRemoval(node); return node; } } return null; }</pre><p>ä»æºç å¯ä»¥çœ‹å‡ºæ¥ï¼Œé€šè¿‡keyæ‰¾åˆ°éœ€è¦ç§»é™¤çš„å…ƒç´ æ“ä½œè¿‡ç¨‹å’Œgetæ–¹æ³•å‡ ä¹ä¸€è‡´ï¼Œæœ€ååœ¨æŸ¥æ‰¾åˆ°keyå¯¹åº”çš„èŠ‚ç‚¹ä¹‹åï¼Œæ ¹æ®èŠ‚ç‚¹çš„ä½ç½®å’Œç±»å‹ï¼Œè¿›è¡Œç›¸åº”çš„ç§»é™¤æ“ä½œå°±å®Œæˆäº†ï¼Œè¿‡ç¨‹éå¸¸ç®€å•</p><p><strong>å…¶ä»–æºç </strong></p><p>åˆ°è¿™é‡Œï¼ŒhashMapçš„æºç åŸºæœ¬å°±è§£æå®Œæˆäº†ï¼Œå…¶ä½™çš„æ–¹æ³•å’Œæºç é€»è¾‘ç›¸å¯¹éå¸¸ç®€å•ï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯ä½¿ç”¨ä¸Šè¿°ä»£ç æ¥å®ç°çš„ï¼Œä¾‹å¦‚containsKeyï¼ˆjeyï¼‰ï¼Œå°±æ˜¯ä½¿ç”¨getæ–¹æ³•ä¸­çš„getNodeï¼ˆï¼‰æ¥åˆ¤æ–­çš„ï¼Œç”±äºç¯‡å¹…åŸå› å°±ä¸ä¸€ä¸€ä»‹ç»ã€‚</p><p>å¦å¤–ï¼Œä¸­é—´æœ‰å¾ˆéƒ¨åˆ†ä¸å½±å“é€»è¾‘ç†è§£çš„ä»£ç è¢«ä¸€ç¬”å¸¦è¿‡ï¼Œæ¯”å¦‚ çº¢é»‘æ ‘çš„è½¬åŒ–ï¼ŒæŸ¥æ‰¾ï¼Œåˆ é™¤ç­‰æ“ä½œï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±è¿›è¡Œå­¦ä¹ ï¼Œä¸è¿‡è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç‰¹æ€§éœ€è¦æé†’ä¸€ä¸‹</p><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼š</p><ul><li>HashMap åº•å±‚æ•°æ®ç»“æ„åœ¨JDK1.7ä¹‹å‰æ˜¯ç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œ1.8ä¹‹ååˆåŠ å…¥äº†çº¢é»‘æ ‘ï¼›é“¾è¡¨é•¿åº¦å°äº8çš„æ—¶å€™ï¼Œå‘ç”ŸHashå†²çªåä¼šå¢åŠ é“¾è¡¨çš„é•¿åº¦ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ï¼Œä¼šå…ˆåˆ¤è¯»æ•°ç»„çš„å®¹é‡ï¼Œå¦‚æœå®¹é‡å°äº64ä¼šå…ˆæ‰©å®¹ï¼ˆåŸå› æ˜¯æ•°ç»„å®¹é‡è¶Šå°ï¼Œè¶Šå®¹æ˜“å‘ç”Ÿç¢°æ’ï¼Œå› æ­¤å½“å®¹é‡è¿‡å°çš„æ—¶å€™ï¼Œé¦–å…ˆè¦è€ƒè™‘çš„æ˜¯æ‰©å®¹ï¼‰ï¼Œå¦‚æœå®¹é‡å¤§äº64ï¼Œåˆ™ä¼šå°†é“¾è¡¨è½¬åŒ–æˆçº¢é»‘æ ‘ä»¥æå‡æ•ˆç‡</li><li>hashMap çš„å®¹é‡æ˜¯2çš„næ¬¡å¹‚ï¼Œæ— è®ºåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥çš„åˆå§‹å®¹é‡æ˜¯å¤šå°‘ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬åŒ–æˆ2çš„næ¬¡å¹‚ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ä¸ºäº†åœ¨å–æ¨¡è¿ç®—çš„æ—¶å€™å¯ä»¥ä½¿ç”¨&è¿ç®—ç¬¦ï¼Œè€Œä¸æ˜¯%å–ä½™ï¼Œå¯ä»¥æå¤§çš„æä¸Šæ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿé™ä½hashå†²çª</li><li>HashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹çš„æ“ä½œä¸‹ä¼šå­˜åœ¨å¼‚å¸¸æƒ…å†µï¼ˆå¦‚å½¢æˆé—­ç¯ï¼ˆ1.7ï¼‰ï¼Œ1.8å·²ä¿®å¤é—­ç¯é—®é¢˜ï¼Œä½†ä»ä¸å®‰å…¨ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨HashTableæˆ–è€…ConcurrentHashMapè¿›è¡Œä»£æ›¿</li></ul><p><strong>æ–‡æœ«é€ç¦åˆ©å•¦ï¼ï¼</strong></p><p>åŒæ—¶æˆ‘ç»è¿‡å¤šå¹´çš„æ”¶è—ç›®å‰ä¹Ÿç®—æ”¶é›†åˆ°äº†ä¸€å¥—å®Œæ•´çš„å­¦ä¹ èµ„æ–™ä»¥åŠé«˜æ¸…è¯¦ç»†çš„Androidæ¶æ„è¿›é˜¶å­¦ä¹ å¯¼å›¾åŠç¬”è®°å…è´¹åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹æƒ³æˆä¸ºæ¶æ„å¸ˆçš„æœ‹å‹æœ‰ä¸€å®šçš„å‚è€ƒå’Œå¸®åŠ©ã€‚</p><p>**ä¸‹é¢æ˜¯éƒ¨åˆ†èµ„æ–™æˆªå›¾ï¼Œè¯šæ„æ»¡æ»¡ï¼šç‰¹åˆ«é€‚åˆæœ‰å¼€å‘ç»éªŒçš„Androidç¨‹åºå‘˜ä»¬å­¦ä¹ ã€‚</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=é¢è¯•å¿…é—®çš„HashMapï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3b66812ad48148669372a844f8df82aa><p class=pgc-img-caption></p></div><p class=ql-align-center><strong>èµ„æ–™å…è´¹é¢†å–æ–¹å¼ï¼šå…³æ³¨æˆ‘åå°ç§ä¿¡å…³é”®è¯ã€èµ„æ–™ã€‘è·å–ï¼</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é¢è¯•','å¿…é—®','HashMap'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>