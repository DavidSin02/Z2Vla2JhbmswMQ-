<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/722a1fdb2d23493ca176fa5742ea6c56"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37a7779.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37a7779.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37a7779.html><meta property="article:published_time" content="2020-10-29T20:50:33+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:33+08:00"><meta name=Keywords content><meta name=description content="æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/37a7779.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>ä¸€ã€å¼‚æ­¥å¤„ç†</h1><h2 class=pgc-h-arrow-right>1ã€å¼‚æ­¥æ¦‚å¿µ</h2><p>å¼‚æ­¥å¤„ç†ä¸ç”¨é˜»å¡å½“å‰çº¿ç¨‹æ¥ç­‰å¾…å¤„ç†å®Œæˆï¼Œè€Œæ˜¯å…è®¸åç»­æ“ä½œï¼Œç›´è‡³å…¶å®ƒçº¿ç¨‹å°†å¤„ç†å®Œæˆï¼Œå¹¶å›è°ƒé€šçŸ¥æ­¤çº¿ç¨‹ã€‚</p><p>å¿…é¡»å¼ºè°ƒä¸€ä¸ªåŸºç¡€é€»è¾‘ï¼Œå¼‚æ­¥æ˜¯ä¸€ç§è®¾è®¡ç†å¿µï¼Œå¼‚æ­¥æ“ä½œä¸ç­‰äºå¤šçº¿ç¨‹ï¼ŒMQä¸­é—´ä»¶ï¼Œæˆ–è€…æ¶ˆæ¯å¹¿æ’­ï¼Œè¿™äº›æ˜¯å¯ä»¥å®ç°å¼‚æ­¥å¤„ç†çš„æ–¹å¼ã€‚</p><p>åŒæ­¥å¤„ç†å’Œå¼‚æ­¥å¤„ç†ç›¸å¯¹ï¼Œéœ€è¦å®æ—¶å¤„ç†å¹¶å“åº”ï¼Œä¸€æ—¦è¶…è¿‡æ—¶é—´ä¼šç»“æŸä¼šè¯ï¼Œåœ¨è¯¥è¿‡ç¨‹ä¸­è°ƒç”¨æ–¹ä¸€ç›´åœ¨ç­‰å¾…å“åº”æ–¹å¤„ç†å®Œæˆå¹¶è¿”å›ã€‚åŒæ­¥ç±»ä¼¼ç”µè¯æ²Ÿé€šï¼Œéœ€è¦å®æ—¶å¯¹è¯ï¼Œå¼‚æ­¥åˆ™ç±»ä¼¼çŸ­ä¿¡äº¤æµï¼Œå‘é€æ¶ˆæ¯ä¹‹åæ— éœ€ä¿æŒç­‰å¾…çŠ¶æ€ã€‚</p><h2 class=pgc-h-arrow-right>2ã€å¼‚æ­¥å¤„ç†ä¼˜ç‚¹</h2><p>è™½ç„¶å¼‚æ­¥å¤„ç†ä¸èƒ½å®æ—¶å“åº”ï¼Œä½†æ˜¯å¤„ç†å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼Œå¤šæ•°æƒ…å†µéƒ½ä¼šä½¿ç”¨å¼‚æ­¥å¤„ç†ã€‚</p><ul><li>å¼‚æ­¥å¯ä»¥è§£è€¦ä¸šåŠ¡é—´çš„æµç¨‹å…³è”ï¼Œé™ä½è€¦åˆåº¦ï¼›</li><li>é™ä½æ¥å£å“åº”æ—¶é—´ï¼Œä¾‹å¦‚ç”¨æˆ·æ³¨å†Œï¼Œå¼‚æ­¥ç”Ÿæˆç›¸å…³ä¿¡æ¯è¡¨ï¼›</li><li>å¼‚æ­¥å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ï¼Œæå‡ååé‡ï¼›</li><li>æµé‡å‰Šå³°å³æŠŠè¯·æ±‚å…ˆæ‰¿æ¥ä¸‹æ¥ï¼Œç„¶ååœ¨å¼‚æ­¥å¤„ç†ï¼›</li><li>å¼‚æ­¥ç”¨åœ¨ä¸åŒæœåŠ¡é—´ï¼Œå¯ä»¥éš”ç¦»æœåŠ¡ï¼Œé¿å…é›ªå´©ï¼›</li></ul><p>å¼‚æ­¥å¤„ç†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§å¤šçº¿ç¨‹ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå‘å¸ƒè®¢é˜…çš„å¹¿æ’­æ¨¡å¼ï¼Œå…¶æ ¹æ®é€»è¾‘åœ¨äºå…ˆæŠŠè¯·æ±‚æ‰¿æ¥ä¸‹æ¥ï¼Œæ”¾å…¥å®¹å™¨ä¸­ï¼Œåœ¨ä»å®¹å™¨ä¸­æŠŠè¯·æ±‚å–å‡ºï¼Œç»Ÿä¸€è°ƒåº¦å¤„ç†ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä¸€å®šè¦ç›‘æ§ä»»åŠ¡æ˜¯å¦äº§ç”Ÿç§¯å‹è¿‡åº¦æƒ…å†µï¼Œä»»åŠ¡å¦‚æœç§¯å‹åˆ°é›ªå´©ä¹‹åŠ¿çš„åœ°æ­¥ï¼Œä½ ä¼šæ„Ÿè§‰æ¯ä¸€ç‰‡é›ªèŠ±éƒ½æƒ³å‹‡é—¯å¤©æ¶¯ã€‚</p><h2 class=pgc-h-arrow-right>3ã€å¼‚æ­¥å¤„ç†æ¨¡å¼</h2><p>å¼‚æ­¥æµç¨‹å¤„ç†çš„å®ç°æœ‰å¥½å¤šæ–¹å¼ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­å¸¸ç”¨çš„å°±é‚£ä¹ˆå‡ ç§ï¼Œä¾‹å¦‚ï¼š</p><ul><li>åŸºäºæ¥å£å¼‚æ­¥å“åº”ï¼Œå¸¸ç”¨åœ¨ç¬¬ä¸‰æ–¹å¯¹æ¥æµç¨‹ï¼›</li><li>åŸºäºæ¶ˆæ¯ç”Ÿäº§å’Œæ¶ˆè´¹æ¨¡å¼ï¼Œè§£è€¦å¤æ‚æµç¨‹ï¼›</li><li>åŸºäºå‘å¸ƒå’Œè®¢é˜…çš„å¹¿æ’­æ¨¡å¼ï¼Œå¸¸è§ç³»ç»Ÿé€šçŸ¥</li></ul><p>å¼‚æ­¥é€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¯¹æ•°æ®å¼ºä¸€è‡´æ€§çš„è¦æ±‚ä¸é«˜ï¼Œå¼‚æ­¥å¤„ç†çš„æ•°æ®æ›´å¤šæ—¶å€™è¿½æ±‚çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><h1 class=pgc-h-arrow-right>äºŒã€æ¥å£å“åº”å¼‚æ­¥</h1><h2 class=pgc-h-arrow-right>1ã€æµç¨‹æè¿°</h2><p>åŸºäºæ¥å£å¼‚æ­¥å“åº”çš„æ–¹å¼ï¼Œæœ‰ä¸€ä¸ªæœ¬åœ°ä¸šåŠ¡æœåŠ¡ï¼Œç¬¬ä¸‰æ–¹æ¥å£æœåŠ¡ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt="æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/722a1fdb2d23493ca176fa5742ea6c56><p class=pgc-img-caption></p></div><ul><li>æœ¬åœ°æœåŠ¡å‘èµ·è¯·æ±‚ï¼Œè°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡æ¥å£ï¼›</li><li>è¯·æ±‚åŒ…å«ä¸šåŠ¡å‚æ•°ï¼Œå’ŒæˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒåœ°å€ï¼›</li><li>ç¬¬ä¸‰æ–¹æœåŠ¡å®æ—¶å“åº”æµæ°´å·ï¼Œä½œä¸ºè¯¥è°ƒç”¨çš„æ ‡è¯†ï¼›</li><li>ä¹‹åç¬¬ä¸‰æ–¹æœåŠ¡å¤„ç†è¯·æ±‚ï¼Œå¾—åˆ°æœ€ç»ˆå¤„ç†ç»“æœï¼›</li><li>å¦‚æœå¤„ç†æˆåŠŸï¼Œå›è°ƒæœ¬åœ°æœåŠ¡çš„æˆåŠŸé€šçŸ¥æ¥å£ï¼›</li><li>å¦‚æœå¤„ç†å¤±è´¥ï¼Œå›è°ƒæœ¬åœ°æœåŠ¡çš„å¤±è´¥é€šçŸ¥æ¥å£ï¼›</li><li>æ•´ä¸ªæµç¨‹åŸºäºéƒ¨åˆ†å¼‚æ­¥å’Œéƒ¨åˆ†å®æ—¶çš„æ¨¡å¼ï¼Œå®Œæ•´å¤„ç†ï¼›</li></ul><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœæœ¬åœ°æœåŠ¡å¤šæ¬¡è¯·æ±‚ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œéœ€è¦æ ¹æ®æµæ°´å·åˆ¤æ–­è¯¥è¯·æ±‚çš„çŠ¶æ€ï¼Œä¸šåŠ¡çš„çŠ¶æ€è®¾è®¡ä¹Ÿæ˜¯æå…¶å¤æ‚ï¼Œè¦æ ¹æ®æµæ°´å·å’ŒçŠ¶æ€è¿½æº¯æ•´ä¸ªæµç¨‹çš„æ‰§è¡Œè¿›åº¦ï¼Œé¿å…é”™ä¹±ã€‚</p><h2 class=pgc-h-arrow-right>2ã€æµç¨‹å®ç°æ¡ˆä¾‹</h2><p><strong>æ¨¡æ‹ŸåŸºç¡€æ¥å£</strong></p><pre><code>@RestControllerpublic class ReqAsyncWeb {    private static final Logger LOGGER = LoggerFactory.getLogger(ReqAsyncWeb.class);    @Resource    private ReqAsyncService reqAsyncService ;    // æœ¬åœ°äº¤æ˜“æ¥å£    @GetMapping("/tradeBegin")    public String tradeBegin (){        String sign = reqAsyncService.tradeBegin("TradeClient");        return sign ;    }    // äº¤æ˜“æˆåŠŸé€šçŸ¥æ¥å£    @GetMapping("/tradeSucNotify")    public String tradeSucNotify (@RequestParam("param") String param){        LOGGER.info("tradeSucNotify param={"+ param +"}");        return "success" ;    }    // äº¤æ˜“å¤±è´¥é€šçŸ¥æ¥å£    @GetMapping("/tradeFailNotify")    public String tradeFailNotify (@RequestParam("param") String param){        LOGGER.info("tradeFailNotify param={"+ param +"}");        return "success" ;    }    // ç¬¬ä¸‰æ–¹äº¤æ˜“æ¥å£    @GetMapping("/respTrade")    public String respTrade (@RequestParam("param") String param){        LOGGER.info("respTrade param={"+ param +"}");        reqAsyncService.respTrade(param);        return "NO20200520" ;    }}</code></pre><p><strong>æ¨¡æ‹Ÿç¬¬ä¸‰æ–¹å¤„ç†</strong></p><pre><code>@Servicepublic class ReqAsyncServiceImpl implements ReqAsyncService {    private static final String serverUrl = "http://localhost:8005" ;    @Override    public String tradeBegin(String param) {        String orderNo = HttpUtil.get(serverUrl+"/respTrade?param="+param);        if (StringUtils.isEmpty(orderNo)){            return "Trade..Fail...";        }        return orderNo ;    }    @Override    public void respTrade(String param) {        try {            Thread.sleep(10000);        } catch (InterruptedException e) {            e.printStackTrace();        }        Thread thread01 = new Thread(                new RespTask(serverUrl+"/tradeSucNotify?param="+param),"SucNotify");        Thread thread02 = new Thread(                new RespTask(serverUrl+"/tradeFailNotify?param="+param),"FailNotify");        thread01.start();        thread02.start();    }}</code></pre><h1 class=pgc-h-arrow-right>ä¸‰ã€ç”Ÿäº§æ¶ˆè´¹å¼‚æ­¥</h1><h2 class=pgc-h-arrow-right>1ã€æµç¨‹æè¿°</h2><p>è¿™é‡ŒåŸºäºKafkaä¸­é—´ä»¶ï¼Œæ¼”ç¤ºæµç¨‹æ¶ˆæ¯ç”Ÿæˆï¼Œæ¶ˆæ¯å¤„ç†çš„å¼‚æ­¥è§£è€¦æµç¨‹ï¼ŒåŸºæœ¬æ­¥éª¤ï¼š</p><div class=pgc-img><img alt="æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/55dd8323f1c2414896ee6fd672459c32><p class=pgc-img-caption></p></div><ul><li>æ¶ˆæ¯ç”Ÿæˆä¹‹åï¼Œå†™å…¥Kafkaé˜Ÿåˆ— ï¼›</li><li>æ¶ˆæ¯å¤„ç†æ–¹è·å–æ¶ˆæ¯åï¼Œè¿›è¡Œæµç¨‹å¤„ç†ï¼›</li><li>æ¶ˆæ¯åœ¨ä¸­é—´ä»¶æä¾›çš„é˜Ÿåˆ—ä¸­æŒä¹…åŒ–å­˜å‚¨ ï¼›</li><li>æ¶ˆæ¯å‘èµ·æ–¹å¦‚æœæŒ‚æ‰ï¼Œä¸å½±å“æ¶ˆæ¯å¤„ç† ï¼›</li><li>æ¶ˆè´¹æ–¹å¦‚æœæŒ‚æ‰ï¼Œä¸å½±å“æ¶ˆæ¯ç”Ÿæˆï¼›</li></ul><p>åŸºäºè¿™ç§æ¶ˆæ¯ä¸­é—´ä»¶æ¨¡å¼ï¼Œå®Œæˆä¸šåŠ¡è§£è€¦ï¼Œæé«˜ç³»ç»Ÿååé‡ï¼Œæ˜¯æ¶æ„ä¸­å¸¸ç”¨çš„æ–¹å¼ã€‚</p><h2 class=pgc-h-arrow-right>2ã€æµç¨‹å®ç°æ¡ˆä¾‹</h2><p><strong>æ¶ˆæ¯å‘é€</strong></p><pre><code>@Servicepublic class KafkaAsyncServiceImpl implements KafkaAsyncService {    @Resource    private KafkaTemplate&lt;String, String&gt; kafkaTemplate;    @Override    public void sendMsg(String msg) {        // è¿™é‡ŒTopicå¦‚æœä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º        kafkaTemplate.send("kafka-topic", msg);    }}</code></pre><p><strong>æ¶ˆæ¯æ¶ˆè´¹</strong></p><pre><code>@Componentpublic class KafkaConsumer {    private static Logger LOGGER = LoggerFactory.getLogger(KafkaConsumer.class);    @KafkaListener(topics = "kafka-topic")    public void listenMsg (ConsumerRecord&lt;?,String&gt; record) {        String value = record.value();        LOGGER.info("KafkaConsumer01 ==&gt;&gt;"+value);    }}</code></pre><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œå°±ç®—æœ‰å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹æ–¹ï¼Œä¹Ÿåªä¼šåœ¨ä¸€ä¸ªæ¶ˆè´¹æ–¹å¤„ç†æ¶ˆæ¯ï¼Œè¿™å°±æ˜¯è¯¥æ¨¡å¼çš„ç‰¹ç‚¹ã€‚</p><h1 class=pgc-h-arrow-right>å››ã€å‘å¸ƒè®¢é˜…å¼‚æ­¥</h1><h2 class=pgc-h-arrow-right>1ã€æµç¨‹æè¿°</h2><p>è¿™é‡ŒåŸºäºRedisä¸­é—´ä»¶ï¼Œè¯´æ˜æ¶ˆæ¯å¹¿æ’­æ¨¡å¼æµç¨‹ï¼ŒåŸºæœ¬æ­¥éª¤ï¼š</p><div class=pgc-img><img alt="æ¶æ„è®¾è®¡ | å¼‚æ­¥å¤„ç†æµç¨‹ï¼Œå¤šç§å®ç°æ¨¡å¼è¯¦è§£" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1117b3f9715a4c4aab5060324b3d2cbc><p class=pgc-img-caption></p></div><ul><li>æä¾›ä¸€ä¸ªæ¶ˆæ¯ä¼ é€’é¢‘é“channelï¼›</li><li>å¤šä¸ªè®¢é˜…é¢‘é“çš„å®¢æˆ·ç«¯clientï¼›</li><li>æ¶ˆæ¯é€šè¿‡PUBLISHå‘½ä»¤å‘é€ç»™é¢‘é“channel ï¼›</li><li>å®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°é¢‘é“ä¸­ä¼ é€’çš„æ¶ˆæ¯ ï¼›</li></ul><p>ä¹‹æ‰€ä»¥ç§°ä¸ºå¹¿æ’­æ¨¡å¼ï¼Œè¯¥æ¨¡å¼æ›´æ³¨é‡é€šçŸ¥ä¸‹å‘ï¼Œæµç¨‹äº¤äº’æ€§ä¸å¼ºã€‚å®é™…å¼€å‘åœºæ™¯ï¼šè¿ç»´æ€»æ§ç³»ç»Ÿï¼Œæ›´æ–°äº†æŸç±»æœåŠ¡é…ç½®ï¼Œé€šçŸ¥æ¶ˆæ¯å‘é€ä¹‹åï¼Œç›¸å…³ä¸šåŠ¡çº¿ä¸Šçš„æœåŠ¡åœ¨æ‹‰å–æœ€æ–°é…ç½®ï¼Œæ›´æ–°åˆ°æœåŠ¡ä¸­ã€‚</p><h2 class=pgc-h-arrow-right>2ã€æµç¨‹å®ç°æ¡ˆä¾‹</h2><p><strong>å‘é€é€šçŸ¥æ¶ˆæ¯</strong></p><pre><code>@Servicepublic class RedisAsyncServiceImpl implements RedisAsyncService {    @Resource    private StringRedisTemplate stringRedisTemplate ;    @Override    public void sendMsg(String topic, String msg) {        stringRedisTemplate.convertAndSend(topic,msg);    }}</code></pre><p><strong>å®¢æˆ·ç«¯æ¥æ”¶</strong></p><pre><code>@Servicepublic class ReceiverServiceImpl implements ReceiverService {    private static final Logger LOGGER = LoggerFactory.getLogger("ReceiverMsg");    @Override    public void receiverMsg(String msg) {        LOGGER.info("Receiver01 æ”¶åˆ°æ¶ˆæ¯ï¼šmsg-{}",msg);    }}</code></pre><p><strong>é…ç½®å¹¿æ’­æ¨¡å¼</strong></p><pre><code>@Configurationpublic class SubMsgConfig {    @Bean    RedisMessageListenerContainer container(RedisConnectionFactory factory,                                            MessageListenerAdapter msgListenerAdapter,                                            MessageListenerAdapter msgListenerAdapter02){        RedisMessageListenerContainer container = new RedisMessageListenerContainer();        container.setConnectionFactory(factory);        //æ³¨å†Œå¤šä¸ªç›‘å¬,è®¢é˜…ä¸€ä¸ªä¸»é¢˜ï¼Œå®ç°æ¶ˆæ¯å¹¿æ’­        container.addMessageListener(msgListenerAdapter, new PatternTopic("topic:msg"));        container.addMessageListener(msgListenerAdapter02, new PatternTopic("topic:msg"));        return container;    }    @Bean    MessageListenerAdapter msgListenerAdapter(ReceiverService receiverService){        return new MessageListenerAdapter(receiverService, "receiverMsg");    }    @Bean    MessageListenerAdapter msgListenerAdapter02(ReceiverService02 receiverService02){        return new MessageListenerAdapter(receiverService02, "receiverMsg");    }    @Bean    ReceiverService receiverService(){        return new ReceiverServiceImpl();    }    @Bean    ReceiverService02 receiverService02(){        return new ReceiverServiceImpl02();    }}</code></pre><p>è¿™é‡Œé…ç½®äº†å¤šä¸ªè®¢é˜…çš„å®¢æˆ·ç«¯ã€‚</p><h1 class=pgc-h-arrow-right>äº”ã€ä»»åŠ¡ç§¯å‹ç›‘æ§</h1><p>ç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯ï¼Œå°±å› ä¸ºæœ‰ä¸€ä¸ªå¤„ç†è¯¥æ¶ˆæ¯çš„ä»»åŠ¡è¦æ‰§è¡Œï¼Œè¿™å°±å¯¼è‡´ä»»åŠ¡å¯èƒ½å‡ºç°ç§¯å‹çš„æƒ…å†µï¼Œå¸¸è§åŸå› å¤§è‡´æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p><ul><li>ä»»åŠ¡äº§ç”Ÿçš„æœåŠ¡è¿‡å¤šï¼Œä»»åŠ¡å¤„ç†çš„æœåŠ¡è¿‡å°‘ï¼Œä¸å‡è¡¡ï¼›</li><li>ä»»åŠ¡å¤„ç†æ—¶é—´å¤ªé•¿ï¼Œä¹Ÿå¯¼è‡´ç”Ÿäº§è¿‡å‰©ï¼›</li><li>ä¸­é—´ä»¶æœ¬èº«å®¹é‡åå°ï¼Œéœ€è¦æ‰©å®¹æˆ–é›†ç¾¤åŒ–ç®¡ç†ï¼›</li></ul><p>å¦‚æœä»»åŠ¡ç§¯å‹è¿‡å¤šï¼Œå¯èƒ½è¦å¯¹ä»»åŠ¡ç”Ÿæˆè¿›è¡Œæµé‡æ§åˆ¶ï¼Œæˆ–è€…æå‡ä»»åŠ¡çš„å¤„ç†èƒ½åŠ›ï¼Œä»è€Œé¿å…é›ªå´©æƒ…å†µã€‚</p><hr><p><strong>&lt;END></strong></p><p><strong>æ¨èé˜…è¯»ï¼šæºç  -> </strong><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6701651490785722883/?group_id=6701651490785722883" rel="noopener noreferrer" target=_blank>GitHub || GitEE</a></p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6816329819559559687/?group_id=6816329819559559687" rel="noopener noreferrer" target=_blank>æ¶æ„è®¾è®¡åŸºç¡€ï¼šå•æœåŠ¡.é›†ç¾¤.åˆ†å¸ƒå¼ï¼ŒåŸºæœ¬åŒºåˆ«å’Œè”ç³»</a></p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6820410513097228812/?group_id=6820410513097228812" rel="noopener noreferrer" target=_blank>æ¶æ„è®¾è®¡ | åˆ†å¸ƒå¼ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå…¨å±€IDç”Ÿæˆç­–ç•¥</a></p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6825238454146695694/?group_id=6825238454146695694" rel="noopener noreferrer" target=_blank>æ¶æ„è®¾è®¡ | åˆ†å¸ƒå¼ç³»ç»Ÿè°ƒåº¦ï¼ŒZookeeperé›†ç¾¤åŒ–ç®¡ç†</a></p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6829659140554490380/?group_id=6829659140554490380" rel="noopener noreferrer" target=_blank>æ¶æ„è®¾è®¡ | æ¥å£å¹‚ç­‰æ€§åŸåˆ™ï¼Œé˜²é‡å¤æäº¤Tokenç®¡ç†</a></p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6831133787263336972/?group_id=6831133787263336972" rel="noopener noreferrer" target=_blank>æ¶æ„è®¾è®¡ | ç¼“å­˜ç®¡ç†æ¨¡å¼ï¼Œç›‘æ§å’Œå†…å­˜å›æ”¶ç­–ç•¥</a></p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf1-ttcdn-tos.pstatp.com/img/pgc-image/0d275c8faa0d42518fe1eb8c420154b3", "title": "\u5fae\u670d\u52a1\u67b6\u6784\u5b9e\u6218", "url": "", "price": 9.9, "column_id": "6746902053190107395", "content": "", "author_description": "\u77e5\u4e86\u4e00\u7b11", "share_price": 1.58, "thumb_url": "http://p3.pstatp.com/large/pgc-image/0d275c8faa0d42518fe1eb8c420154b3", "sold": 12}'><p class=column-placeholder></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æ¶æ„','è®¾è®¡','å¼‚æ­¥'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>