<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>从5个经典工作开始看语义SLAM | 极客快訊</title><meta property="og:title" content="从5个经典工作开始看语义SLAM - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3dfd8254458d4e0497f5a3024b9e213b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3bcba7d5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3bcba7d5.html><meta property="article:published_time" content="2020-11-14T21:01:41+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:41+08:00"><meta name=Keywords content><meta name=description content="从5个经典工作开始看语义SLAM"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/3bcba7d5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>从5个经典工作开始看语义SLAM</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>本文试图概括Semantic SLAM的主要思路和近年工作，⻓期更新。</p><p>但因水平有限，若有错漏，感谢指正。</p><p><strong>（更好的公式显示效果，可关注文章底部的公众号）</strong></p><h2 class=pgc-h-arrow-right>Semantic SLAM</h2><h3 class=pgc-h-arrow-right>简介</h3><p>至今为止，主流的 SLAM 方案 [1] 基于处于像素层级的**特征点**，更具体地，它们往往只能用**角点或边缘**来提取路标。人类**是通过物体**在图像中的运动来推测相机的运动，而**非特定像素点**。</p><p>Semantic SLAM 是研究者试图利用物体信息的方案，其在Deep Learning的推动下有了较大的发展，成为了相对独立的分支，就方法（非设备）而言，其在整个SLAM领域所处位置如下图：</p><div class=pgc-img><img alt=从5个经典工作开始看语义SLAM onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3dfd8254458d4e0497f5a3024b9e213b><p class=pgc-img-caption></p></div><p>目前而言，所谓 <strong>Semantic</strong> 是将基于神经网络的<strong>语义分割、目标检测、实例分割等技术</strong>用于 SLAM 中，多用于特征点选取、相机位姿估计，更广泛地说，端到端的图像到位姿、从分割结果建标记点云、场景识别、提特征、做回环检测等<strong>使用了神经网络的方法</strong>都可称为 Semantic SLAM [2]。</p><p>语义和 SLAM 的结合的体现有以下两点 [3]：</p><ul><li>SLAM 帮助语义。</li></ul><p>检测和分割任务都需要大量的训练数据，在 SLAM 中，由于我们可以估计相机的运动，那么各个物体在图像中位置的变化也可以被预测出来，<strong>产生大量的新数据为语义任务提供更多优化条件</strong>，且节省人工标定的成本。</p><ul><li>语义帮助 SLAM。</li></ul><p>一方面，语义分割把运动过程中的每一张图片都带上语义标签，随后传统 SLAM 将带标签的像素映射到3D空间中，就能得到一个带有标签的地图。<strong>这提供了高层次的地图，有利于机器人自主理解和人机交互</strong>。</p><p>另一方面，语义信息亦可为回环检测、Bundle Adjustment <strong>带来更多的优化条件，提高定位精度</strong>。</p><p>仅实现前者的工作往往称为 <strong>Semantic Mapping</strong>，后者才认为是真正的 Semantic SLAM。</p><p><br></p><h3 class=pgc-h-arrow-right>发展方向</h3><p>分别从 Semantic Mapping 和 Real Semantic SLAM 两方面，介绍一些主要思路。</p><h4 class=pgc-h-arrow-right>Semantic Mapping</h4><p>这类工作要求特征点是 <strong>dense 或 semi-dense</strong> 的（否则 Mapping 无意义），因此往往用 RGB-D 的 SLAM 方案，亦或是单目相机的 semi-dense LSD-SLAM 方案 [4]。</p><p>有两种 Mapping 方式：</p><ul><li>将2D图像的语义分割结果，即<strong>带标签的像素，映射到3D点云中</strong>。</li></ul><p>研究人员尝试让 SLAM 所得的信息（特别是相机位姿），能够提高语义分割的性能。其中一种是使用 SemanticFusion [5] 的 Recursive Bayes 方法：根据 SLAM 对像素点运动的估计，当前帧的**像素的语义分类概率** 与 前一帧**旧位置上的分类概率**相乘作为最终概率，即像素的概率会沿着各帧累乘，因而增强语义分割的结果。</p><p>这一方法被基於单目相机的工作 [6]沿用，整体框架描述如下。</p><div class=pgc-img><img alt=从5个经典工作开始看语义SLAM onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ed146c2c824248c38612f6890439ab02><p class=pgc-img-caption></p></div><blockquote><p>LSD-SLAM + DeepLab-v2 （语义分割）</p><p>流程：输入 -> 选关键帧并 refine（非关键帧用于增强深度估计）-> 2D语义分割 -> 语义优化+3D重建</p><p>① 为保证速度，仅对关键帧来进行语义分割，</p><p>② 其他帧用 small-baseline stereo comparisons [7] 对关键帧做深度估计的优化</p><p>③ <strong>使用 Recursive Bayes 增强语义分割</strong></p><p>④ 3D重建的优化使用条件随机场（CRF），同 SemanticFusion</p></blockquote><ul><li>第二种 Mapping 方式则<strong>以 Object 为单位构建地图</strong> [8]。相比于一堆标记了类别的 voxel，包含一个个物体的语义地图，将更有价值。</li></ul><p>此部分的重点在于如何做<strong>数据关联</strong>（Data Association），即<strong>跟踪已识别 Object 和发现新 Object</strong>，以 [8] 为例描述如下。</p><div class=pgc-img><img alt=从5个经典工作开始看语义SLAM onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/908032ae5a4445aeaef4af768c960e62><p class=pgc-img-caption></p></div><blockquote><p>使用 RGB-D 和 ORB-SLAM2 可构建一个 dense 的点云。</p><p>对于关键帧，SSD 检测出多个 Object，应用无监督的3D分割方法 [10] **为每一个 Object 分配点云序列，并存储起来**。</p><p>数据关联：得到一组分割结果（Object, 对应点云）后，据点云重心的欧式距离，在找出最接近的一组候选 Object，如果<strong>超过 50% 的点对的距离小于一个阈值（文中 2cm），就认为是匹配到的 Object</strong>，否则认为是新 Object，存储下来。</p><p>匹配为同一 Object 的两个点云，直接<strong>累加分类概率</strong>（置信度）。这和上文提到的 Recursive Bayes 方法很像，<strong>即利用 SLAM 提供的物体多角度信息，增强分割结果。</strong></p><p>（注：本文的 Related Work 写得很好）</p></blockquote><h4 class=pgc-h-arrow-right>Real Semantic SLAM</h4><p>此部分为本文的重点。相对来说，真正的 Semantic SLAM （即语义建图和 SLAM 定位相互促进）发展较晚（基本是2017年后）。</p><p>在 Bundle Adjustment (BA) 方法中，我们同时优化相机位姿和 3D 座标位置，使得<strong>重投影到 2D 图像的像素点与实际观测（多个相机，多个特征点）的总误差最小</strong>。</p><p>那么如何将语义信息融合进来呢？</p><ul><li>思路一：<strong>同个 3D 点重投影之后，应保持语义一致</strong>。</li></ul><p>这又是重投影优化问题，可以加入到 BA 公式中<strong>加强优化目标</strong>，关键是如何<strong>量化重投影误差</strong>，就好像传统 BA 的重投影误差通过与实际观测的像素距离来量化。</p><p>ICRA 2017 的著名工作 Probabilistic Data Association for Semantic SLAM [11] 使用了此思路，其量化重投影误差的方法在于：使用概率模型计算出来的**物体中心，重投影到图像上，应该接近检测框的中心**。而数据关联（到底要接近哪个检测框中心），由一组权重决定，最后 “BA” 和 “权重更新” 通过 EM 算法交替优化。</p><p>ECCV 2018 上的工作 VSO [12]与之类似，重投影误差通过**与目标类别的语义区域的远近**来量化。有几个细节比较巧妙，下面展开说明。</p><div class=pgc-img><img alt=从5个经典工作开始看语义SLAM onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/84255ca78b2f4bd8bae27c66324e6cdb><p class=pgc-img-caption></p></div><blockquote><p>如上图所示，(a) 为语义分割图，(b) 为类别 “Car” 的区域，在(c) (d) 中，根据与 Car 区域的距离，概率值从1 (红) 变为 0 (蓝)。 其他类别如Tree，也会产生此概率分布图。</p><p>其中 <strong>距离 到 概率 的转化</strong>，利用了下方的高斯分布，(c) (d) 的不同是方差导致的。这是在为量化重投影误差做准备。对于一个空间点P（拥有座标 ）来说，重投影之后计算得到一个概率：</p><p>其中 计算了重投影的结果 与类别 c 区域的<strong>最近距离</strong>，最后得到的 用于<strong>计算重投影误差</strong>：</p><p><strong>权重 的存在是为了解决数据关联</strong>，即空间点P应该以哪一个类别的区域为目标，。其由多个相机下的 值累乘，即多个角度观测投票决定。</p><p>会加到普通的 BA 优化公式中，使用 EM 算法进行优化，E 步更新权重，而 M 步优化三维点P座标和相机位姿（普通的 BA 过程）。</p><p>个人理解，之所以使用高斯分布，是因为其函数有“骤降”之处，那么方差 可以起到决定阈值的作用，让<strong>距离超过阈值的类别区域更快得到一个小权重</strong>，多个相机的投票下，数据关联很快就能稳定下来，可以加速优化。</p><p>（为简化说明，上述公式已被简化，去除了对于多个相机、空间点的索引，详见原文）</p></blockquote><ul><li>思路二：<strong>从语义信息可以推断出动态区域</strong>。</li></ul><p>传统 SLAM 方法几乎都是<strong>假设当前场景是静态的</strong>，当面对含有运动物体的场景时，运动物体上的特征点将对相机位姿估计产生巨大的偏差。面对这一困难的主要<strong>解决方式是去掉这些动态的特征点</strong>，而语义分割十分适合找出这些动态区域。</p><p>语义分割有两个特点，一是把平面区域的许多像素点联系起来，二是给区域带上了分类标签。</p><p>前者有利于确定物体是否真的在运动，因为单个特征点的偏移并不能确定运动的发生（可能是 SLAM 系统一直存在的观测噪声），若是<strong>一群有关联的特征点普遍发生了较大的偏移，就可以断定为是动态的</strong>。</p><p>后者有利于<strong>预判物体是否会运动</strong>，比如标签是人的区域几乎是动态的，而墙壁则可断定是静态的（甚至不用去计算偏移）。</p><p>IROS 2018 的 DS-SLAM [13] 基于第一个特点，以区域为单位判断是否动态，而一些工作如 [14] 仅利用了第二个特点，较为暴力地直接排除某些区域（天空，车）的特征点。</p><p>把这两个特点都用上的是 ICRA 2019 的工作 [15]， 简述如下。</p><div class=pgc-img><img alt=从5个经典工作开始看语义SLAM onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/203b412ef7574e658f49326b8ac3766f><p class=pgc-img-caption></p></div><blockquote><p>利用语义分割，将一些类别（A）区域定义为背景（绿色），其他类别（B）区域定义为可移动物体。</p><p>接下来使用<strong>运动判定</strong>，以区分可移动物体当前是静止（蓝色）还是运动（红色）的。</p><p>运动判定的规则如下：对于某一语义区域内，过往估计的特征点的 3D 位置，投影到当前的新图像上，<strong>重投影位置若和对应特征点的欧式距离大于一定阈值，则定义为移动点</strong>，如果该区域<strong>移动点的比例大于一定阈值</strong>则判定为移动区域。</p></blockquote><ul><li>思路三：<strong>语义信息提供的物体级别的描述，拥有季节（光线）不变性</strong>。</li></ul><p>这一思路可以用在如何<strong>用已有的 3D 地图定位</strong>。</p><p>传统的特征点（拥有描述子），在多变的环境下十分不鲁棒，容易跟丢。而语义分割的结果，相对而言是稳定的，此外，若以物体级别来做定位（拿语义标签来匹配地图），更符合人类直觉。</p><p>ICRA 2018 和 2019 的工作 [16] 使用了本思路。</p><p><br></p><ul><li>思路四：待总结</li></ul><p>------</p><p><strong>更好的阅读效果、更多相关内容可关注公众号 【小林同学的脑回路】</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'经典','开始','语义'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>