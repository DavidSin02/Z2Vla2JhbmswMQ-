<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>存储网络 Day33 可移动媒体管理 | 极客快訊</title><meta property="og:title" content="存储网络 Day33 可移动媒体管理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1334ab9a02ff4a60955f690993b6ebf6"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3c76a370.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3c76a370.html><meta property="article:published_time" content="2020-11-14T21:02:52+08:00"><meta property="article:modified_time" content="2020-11-14T21:02:52+08:00"><meta name=Keywords content><meta name=description content="存储网络 Day33 可移动媒体管理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/3c76a370.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>存储网络 Day33 可移动媒体管理</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>11可移动媒体管理</h1><p>可移动存储介质，尤其是磁带，是大型数据中心存储架构的核心组件。存储网络使服务器以及许多不同的应用程序能够共享媒体和库。由于这些网络的使用越来越多，可移动媒体的管理变得非常重要。在本章中，我们将了解可移动媒体管理的特征。</p><p>在下一节中，我们首先解释为什么尽管硬盘和智能磁盘子系统的容量不断增加，但可移动介质是必不可少的（见第11.1节）。然后我们考虑各种类型的可移动媒体（第11.2节）和图书馆（第11.3节），特别考虑媒体管理。然后，我们讨论与可移动介质管理相关的问题和要求（第11.4节）。最后，我们介绍了IEEE 1244可移动媒体管理标准 - 这种方法描述了可移动媒体管理系统的体系结构及其与应用程序的通信（第11.5节）。</p><h1>11.1可移动媒体的意义</h1><p>有关“磁带没有未来”或“磁带已死”等标题的文章仍然出现在报刊上。一些存储制造商已经在几年前宣布了磁带的终结。</p><p>关于磁带结束的天鹅歌曲会定期重复，特别是来自磁盘子系统的供应商。他们说，毕竟硬盘（例如SATA磁盘）现在变得如此便宜，以至于不必将数据移动到其他存储介质。我们认为，可移动媒体是数据中心存储架构中的重要组成部分。</p><p>除了高容量和低价格之外，对于许多公司而言，可移动介质可以与读写设备分开存储并因此从直接访问中退出的事实尤其重要。因此，病毒，蠕虫和其他“动物”被剥夺了无法控制地传播自己的可能性，因为它们可以存储在网上连续可用的存储。此外，利用可移动介质，可以以低存储成本将非常大量的数据存储在非常小且可能受到良好保护的区域中。 WORM（一次写入多次读取）属性现在不仅可用于光学介质，还可用于磁带，还可提高安全性。此外，对存储容量的要求也在不断增加。存储密度和墨盒容量的进步几乎不能满足不断增长的需求，这意味着墨盒的数量也在不断增长。</p><p>对于电影“指环王”而言，160名计算机动画师每天生成并编辑一个TB的数据量，并存储到磁带上。在3年生产期结束时，电影最终版本的数字材料 - 大小为150太字节 - 存放在磁带上。</p><p>科学医学以及医学和生物信息学领域已经长期以数PB的数据量工作。存储空间的巨大需求不能仅通过在线存储（例如硬盘）来满足。仅基于硬盘获取和运行解决方案的成本非常高，以至于这种类型的存储无法通过快速访问时间来经济地证明其合理性。在不久的将来，甚至没有任何可预见的变化可以改变这种情况。相反，主要的努力仍然是针对磁带区域，例如以增加存储密度并因此使该技术更具竞争力。因此，硬盘和磁带之间巨大的成本差异几乎保持不变，就像前几十年的情况一样。最后，正如今天的情况一样，两种类型的媒体的混合将继续确定存储架构，每种媒体的比例取决于个人要求和需求。毕竟，就稳健性而言，可移动介质具有明显优于硬盘的优势：它对浪涌不太敏感，而高端磁带介质如果存储得当，则可以具有几十年的生命周期。</p><h1>11.2可移动媒体</h1><p>目前正在使用各种类型的可移动介质。这些主要是磁带（第11.2.1节），光学介质（如CD和DVD）和磁光介质（第11.2.2节）。在这些部分中，我们主要关注如何在可移动介质的管理中考虑各种介质类型的特殊属性（第11.2.3节）。</p><h1>11.2.1磁带</h1><p>与允许随机访问的磁盘相比，磁带只能按顺序访问。因此，磁带驱动器磁头的位置不能随意选择，但必须通过磁带的适当快进和倒带来确定。磁带的这种移动花费的时间明显多于硬盘驱动器磁头的移动时间，因此，只有当尽可能多的相关数据块被一个接一个地读取和写入时，才能实现最佳速度。 （流）。</p><p>随意访问备份和归档数据通常是不必要的。与单个文件的随机访问相比，可以备份和恢复大量数据的速度可能是一个非常重要的因素。目前可用的备份和归档应用程序利用磁带的这种特殊属性，将要备份的数据聚合到块流中，然后将这些块顺序写入磁带（第7.3.4节）。</p><h1>11.2.2 CD，DVD和磁光介质</h1><p>当写入CD，DVD和磁光介质时，通常应用文件系统（例如ISO-9660）。写入这些媒体时，同样的限制适用于磁带，因为任何时候只有一个应用程序可以写入媒体。通常，此应用程序还会写入很大一部分（如果不是全部）可用存储容量。</p><p>但是，一旦编写了这些介质，应用程序就可以像硬盘驱动器一样访问它们。结果，应用程序可以为操作系统提供对光学介质的读访问的完全支持，这就是为什么在这种情况下它们的行为类似于写保护的硬盘并且可以相应地共享。磁光介质通常在两侧都是可读和可写的。</p><p>根据驱动器，可能必须翻转盒以便进入第二侧。该特性使得管理系统必须能够管理盒的第二侧并控制更换机构，以便可以翻转盒。此外，必须为这些介质适当地表示WORM属性。</p><h1>11.2.3可移动媒体的管理功能</h1><p>在下文中，我们概述了可移动介质的最重要特性和术语，这些特性和术语必须由可移动介质的管理系统建模。</p><p>盒式磁带盒式磁带是可用存储空间的物理介质。盒可以移动并具有一个或多个侧面。</p><p>便签盒一种没有任何内容的新盒式磁带或已经使用过的盒式磁带，其内容不再受关注，其整个存储容量可用于新用途。</p><p>外部盒式磁带标签一种标签，应用于盒式磁带的外部，用于识别盒式磁带，例如机械可读的条形码。</p><p>内部盒式磁带标签磁带介质上特定位置的特定格式的数据集，用于识别盒式磁带。</p><p>侧面盒式磁带的物理部分，提供存储空间。一侧包含一个或多个分区。磁带通常只有一面。 DVD和磁光介质也有双面型可供选择。</p><p>分区一侧的一部分，提供存储空间作为盒式磁带的物理单元。当前（2009）可移动介质通常仅包括每侧的一个分区。</p><p>卷卷是一个逻辑数据容器。它用于为媒体上的应用程序保留存储空间。分区可以根据需要保存任意数量的卷。请注意，术语音量可能具有不同的含义，具体取决于所使用的上下文：就SNIA共享存储模型（第12章）而言，磁带卷称为磁带范围，可能跨越多个物理磁带盒。在备份软件和大型机方面，卷通常与盒式磁带同义使用。</p><p>驱动器可拆卸介质盒必须安装在驱动器中以便读取或写入。访问句柄应用程序可用于访问卷数据的标识符。在UNIX操作系统下，访问句柄等同于设备特殊文件的名称（例如：/ dev / rmt0）。</p><p>装入请求将某个盒式磁带放入驱动器的命令。</p><p>审计跟踪审计跟踪由一系列数据集组成，这些数据集描述了计算机系统执行的过程。审计跟踪主要用于安全关键字段，以便记录和检查对数据的访问。</p><p>可移动介质的管理必须模拟盒式磁带的逻辑和物理特性。目前（2009年）最重要的可移动介质是磁带，它只能在一侧使用，不能分区。然而，考虑到新存储技术的未来发展，今天的管理系统也应该支持具有多个方面和分区的新媒体。例如，光学媒体通常有两面;全息媒体可能会有更多的方面。因此，可移动介质管理的数据模型应接受具有任意数量边的盒式磁带。每一方都可以接受一个或多个分区，每个分区可以容纳任意数量的卷（数据容器）。</p><h1>11.3图书馆和驱动器</h1><p>磁带库具有插槽，当磁带盒不使用时，磁带存储在这些插槽中。磁带库配备有一个或多个机器人（介质更换器），一旦收到磁带盒的安装请求，就会将磁带盒从插槽传输到驱动器。</p><p>使用可移动存储介质的操作系统和应用程序必须处理大量不同的库硬件（第11.3.1节）。即使这种硬件的结构和性能存在很大差异，但某些一般特性仍占主导地位：所有磁带库都有读写磁带的驱动器（第11.3.2节），介质转换器（第11.3.3节）以及插槽收到墨盒。介质更换器从插槽中取出墨盒并将它们传输到驱动器。</p><h1>11.3.1图书馆</h1><p>在自动库中，介质更换器通过接口进行控制。根据所使用的设备，该接口可以作为带内接口（如SCSI）或带外接口（第11.3.3节）实现。这些自动化库的带宽范围从具有一个或两个驱动器和几个插槽的单个小型自动装载机到具有一个或多个介质更换器的大型自动磁带库，这些介质更换器可将数千个盒式磁带传输到数十个甚至数百个驱动器。</p><p>除自动库外，可移动媒体管理还应考虑手动操作的库。在这种情况下，操作员接管介质更换器的功能并将盒式磁带放入适当的驱动器中。这使得甚至可以将单独的单独驱动器集成到管理系统中。</p><p>根据抽象程度，即使是装有墨盒但没有任何驱动器的架子或保险箱也可以被视为库。这些库也称为保管库或存储位置。特别是当使用自动库和库时，为媒体管理选择的抽象级别应该允许将库作为没有驱动器的手动库来处理。这将启用相同的审核程序（查询所有组件，但主要是库中的盒式磁带），导出（从库中删除盒式磁带）和导入（将盒式磁带发送到库）以应用于所有库，而不管类型。</p><h1>11.3.2驱动器</h1><p>与硬盘驱动器一样，可移动介质的驱动器当前在开放系统环境中配备了SCSI或光纤通道接口，并通过这些接口连接到存储网络。在大型机领域，ESCON和FICON占主导地位。</p><p>如前所述，如果磁带驱动器一个接一个地读取和写入许多块（流式传输），则它们只能全速工作。尽管可以在大型机环境中完全正常，但只能将包含一个逻辑块的单个文件写入磁带，或者从磁带读取它们。与Open Systems备份操作中使用的驱动器相比，这需要不同的驱动器。这些企业级驱动器具有更大的电机，可以在某个逻辑块上更快速，更精确地定位读写磁头。</p><h1>11.3.3媒体转换器</h1><p>媒体转换器的任务是在磁带库中传输磁带。运输操作的开始和目的地可以是插槽或驱动器。库还使用库存目录，其中记录了库的所有元素及其属性。媒体转换器可以访问此库存目录。</p><p>应用程序激活自动库中的介质更换器。因此，这些库配备了应用程序用于发送命令和接收确认的适当接口。除了控制传输操作之外，这些接口通常还用于请求库存目录中的数据。因此，可以通过媒体转换器界面请求以下信息：</p><p>驱动器的编号和属性</p><p>插槽的数量和属性</p><p>墨盒的数量和属性</p><p>其他媒体转换者的数量和属性</p><p>在以下部分中，我们将详细介绍某些类型的接口。在开放系统环境中，通过SCSI或光纤通道的直接连接是最广泛使用的带内接口。相比之下，专有的带外接口主要用于大型机领域。</p><p><strong>带内接口：SCSI介质更换器</strong></p><p>对于磁带库的操作，SCSI标准定义了SCSI介质更换器接口，根据所使用的硬件，它可以使用本机SCSI电缆直接连接，或者，如果磁带库是较大网络的一部分，则通过以太网连接（iSCSI和FCoE）或光纤通道电缆。无论底层传输协议如何，都始终使用SCSI介质更换器协议控制介质更换器（第3.3.8节）。</p><p>在这一领域已经建立了三种不同的方法（图11.1）。在第一种情况下，介质更换器配备有自己的控制器，并且可以通过其自己的SCSI目标ID（具有自己的SCSI ID的独立介质更换器）作为单独的设备进行检测。在另外两种情况下，介质更换器与驱动器共享控制器。然后，它可以作为具有单独逻辑单元号（LUN）的独立设备（具有其自己的LUN的独立介质更换器）可见，或者通过驱动器LUN（连接的介质更换器）上的特殊命令进行控制。</p><p>图11.1独立介质更换器要么拥有自己的SCSI目标端口，要么可以作为附加设备到达，并在驱动器的SCSI端口上具有不同的LUN。附加的媒体转换器与驱动器形成一个单元。为了移动介质更换器，必须使用特殊的SCSI命令，例如READ ELEMENT STATUS ATTACHED和MOVE MEDIUM ATTACHED。</p><div class=pgc-img><img alt="存储网络 Day33 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1334ab9a02ff4a60955f690993b6ebf6><p class=pgc-img-caption></p></div><p>正如IT世界中经常出现的情况一样，这里有两种截然不同的哲学，它们根据应用案例揭示了它们的具体优缺点。如果介质更换器与磁带驱动器共享同一个控制器，则驱动器可用的带宽会减少。然而，由于仅为媒体转换器传送和执行相对少量的命令，因此可用于驱动器的带宽的减少很少。在开放系统环境中尤其如此，其中磁带主要用于流模式。</p><p>另一方面，如果访问主要是基于文件的，并且如果文件位于多个磁带上，则介质更换器与驱动器命令的比率相应地增加。在这种情况下，通过附加控制器进行与介质更换器的通信是值得的。然而，这种附加控制器和存储网络中所需的附加组件使得这种解决方案更加昂贵并且涉及额外的管理成本。</p><p>除了低成本之外，介质更换器在驱动器控制器的第二LUN上的寻址具有进一步的主要优点。通常，几个驱动器安装在一个大型库中。通过其他访问路径，还可以通过不同驱动器控制器的第二个LUN控制介质变换器。如果驱动器发生故障，则可通过另一个驱动器访问介质更换器。此外，驱动器通常配备有冗余电源，或者控制器具有附加端口，如果第一路径发生故障，可以自动使用该端口。</p><p><strong>专有接口</strong></p><p>除了SCSI接口之外，还有其他接口已经建立起来，特别是在大型机环境中。这些接口提供比SCSI更高级别的抽象，并且通常还对媒体进行初步管理。通常，此类接口是带外的，即无法通过数据路径（SCSI或光纤通道连接）访问，而是通过TCP / IP或RS-232（图11.2）。</p><p>通过这些接口交换的命令通常由安装在库中的控制单元执行。该控制单元通常可以同时接受和执行来自多个应用程序的命令，而不会导致冲突。同样，可以为所有应用程序提供其他服务，例如临时池管理。</p><p>图11.2带有专有介质更换器接口的磁带库。根据配置，通过TCP / IP或RS / 232接口控制介质更换器。</p><div class=pgc-img><img alt="存储网络 Day33 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f94ef267c4754b319f94c3bfde6344c1><p class=pgc-img-caption></p></div><h1>11.4可移动媒体管理的问题和要求</h1><p>将可移动媒体管理集成到存储网络中的问题和要求可分为“存储媒体管理”和“共享相关资源”区域。在大型环境中，可移动媒体管理必须能够存储数十万个媒体。不仅存储了媒体及其属性，还存储了对此媒体的访问，包括有关错误和使用时间的数据。</p><p>与硬盘存储相反，可移动介质可以与驱动器分开存储，这意味着系统必须始终了解介质的位置。由于该位置可以是手动管理的存储库或自动化库，因此需要特殊的解决方案来反映各自的要求。</p><p>存储网络中可移动介质管理的第二个重要应用领域是库，驱动器和介质的共享（第6.2.2节）。在连接到存储网络的多个应用程序之间共享该磁带库需要适当的访问控制，访问同步和访问优先级的机制。这些机制控制谁可以访问哪些硬件以及何时可能所有应用程序都可以利用存储网络中的所有可用资源。</p><p>为了满足这些要求，存储网络越来越需要可移动媒体的管理层。该层将应用程序与通过存储网络连接的硬件分离（图11.3）。它控制并同步所有访问，尽可能保持对应用程序的透明。作为一个中心实体，该层管理所有资源并简化异构应用程序之间的共享，而不管使用哪些库。</p><p>图11.3中间件界面提供媒体管理服务，同步对硬件的访问，并允许对驱动器和盒式磁带进行分组。</p><div class=pgc-img><img alt="存储网络 Day33 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/93d6c82dbda4465483e5b09668df4883><p class=pgc-img-caption></p></div><p>对磁带硬件的更改（例如更换驱动器和添加其他库）将集中封装，以便这些更改不会影响应用程序本身。因此，例如，先前嵌入在网络备份系统中的可移动介质的管理功​​能现在集中在一起。因此，这种用于可移动介质的中央管理系统代表存储网络内的存储虚拟化层，从而为可移动介质提供存储虚拟化的优点（第5章）。</p><p>我们已经讨论了将可移动媒体的库和驱动器共享实现到存储网络的不同选项（第6.2.2节）。正如我们前面提到的，我们认为提供最佳和最有前途的解决方案的架构是保护应用程序免受管理和共享中涉及的复杂内部流程的架构。事实上，管理系统熟悉所有组件以及它们如何相互作用。这使它能够对资源的使用进行最佳控制。</p><p>可移动媒体管理的个别问题和要求如下：</p><p>通过智能共享有效利用所有可用资源。</p><p>访问控制：必须对应用程序和用户进行身份验证。应用程序和用户只能被授予对存在适当授权的媒体的访问权限。</p><p>访问同步：必须同步对库和驱动器的访问。</p><p>访问优先级：如果同时对资源或驱动器执行多个访问请求，则可以使用优先级。</p><p>分组和池化：应该可以将介质和驱动器动态组合到组或池中，以简化管理和共享。</p><p>媒体跟踪：应始终保证每种媒体都可以检索，即使它已被转移到其他位置。</p><p>生命周期管理：媒体贯穿整个生命周期。它被写入，读取，重写，并在一段时间后从流通中删除。</p><p>监控：自动化系统监控。</p><p>报告：必须记录对媒体的访问。审计跟踪应该是可能的。</p><p>我们将在本节中详细介绍这些问题和要求。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'存储','网络','Day33'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>