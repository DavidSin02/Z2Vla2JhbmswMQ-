<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 | 极客快訊</title><meta property="og:title" content="从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/c44350fc7d5946a7813aeeb2817e9f12"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e13732.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e13732.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e13732.html><meta property="article:published_time" content="2020-10-29T21:06:07+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:07+08:00"><meta name=Keywords content><meta name=description content="从零开始，搭建自己的NAS媒体服务器，附plex和emby对比"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/3e13732.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>从零开始，搭建自己的NAS媒体服务器，附plex和emby对比</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><h2 class="md-end-block md-heading">写在前面</h2><p>这篇文章的初衷很简单，我本来也是比较头疼折腾NAS的，因为NAS并非是小白向家电，它是个比较复杂的系统，成品NAS只是给了你一个硬件平台，安装各类应用都需要有一定基础，所以写了两篇比较详细的NAS原创文后，我决定综合一下，一步一步教大家从零开始，完美搭建属于自己的NAS远程影音服务器，也是基于我自己的原因，这篇文章比较详细，从IOS和安卓，从plex到emby，从局域网到远程访问，每一步骤都均有涉及。</p><p>这应该是最全最小白化的一篇，建议收藏后观看，全文大约7000字。</p><p>好了，不多说了，我们开始。</p><h2 class="md-end-block md-heading">成品NAS的选购经验分享</h2><p>我们考虑的是影音服务器，所以NAS最好是X86架构级别的，核显要足够强大可以解码4k，ARM架构的NAS不适合折腾，第一是因为内存普通偏小，第二就是性能太羸弱，只适合备份文件存个照片什么的，如果需要考虑远程，那么ARM并不是很适合。</p><p>目前NAS方面，入门级别的有J3455处理器，稍微高一些的有J4005和J4115处理器，这三款处理器都可以流畅解码4K H256级别的电影，但是也仅仅适合同一时间内1-2人在线转码观看，所以如果你要求特别高，成品NAS可能要考虑高很多级别的，或者干脆自己DIY NAS服务器，这些都不在我们这次的讨论范畴内了。</p><p>我建议有条件首选J4115服务器的NAS，其次是J4005，最后是J3455。</p><p>这次搭建的NAS有J3455和J4005两台，因为plex购买会员后只能安装在一台NAS上，故此我用了另一台NAS测试Emby。</p><p>先来聊聊威联通新出的这款TS-251D家用级别NAS，处理器为J4005。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c44350fc7d5946a7813aeeb2817e9f12><p class=pgc-img-caption></p></div><p>251D是一款家用入门级别双盘位NAS，众所周知NAS的成本高，硬盘是大头，而很多购买4盘位NAS的消费者，也是一点一点增加硬盘数量，毕竟大容量硬盘成本太高了，所以两盘位的NAS比较适合手头拮据的用户。</p><p>容量真的不够用嘛？</p><p>我觉得未必，毕竟影音存储类NAS，不是存放重要资料的，如果你不用它进行PT下载，或者PT下载挂个移动硬盘，原则上来说损坏概率非常低。</p><p>扯个题外话，如果是重要资料的话，我不会将资料单独放在一个地方，而是至少2个或者3个。</p><p>那么两盘位不能组建RAID怎么办呢？</p><p>对于普通消费者来说，影音NAS服务器是不需要组建任何RAID的，我强烈建议单盘，这样的话如果不能一步到位买齐硬盘，也可以后续增加硬盘，节省成本。</p><p>所以这篇中你不需要看到任何raid以及存储池这些稍微有些复杂的名词，我们不需要，你就当一个可以随意加硬盘的外置存储设备，就和电脑一样随意增加硬盘，这样是不是感觉舒服很多了？</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9afb2588fde847b684828a1b6105ff1f><p class=pgc-img-caption></p></div><p>251D的外观，我个人觉得比较有一些设计感了，至少这种颜色搭配，相对之前的NAS，要进步了很多，至少可以和好看勾搭一点边了。</p><p>上半部为电源按键以及指示灯，从上到下依次是电源指示灯、网络、一键复制、硬盘1以及硬盘2。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/02600f33ca7b4158b7647ce8f773d6e7><p class=pgc-img-caption></p></div><p>前置一个USB3.0接口，方便直接复制或者一键备份，下面则是威联通最常见的一键复制/备份按钮了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b7c7e1a42634466bbfe6779cf6e730f8><p class=pgc-img-caption></p></div><p>251D具备PCI-E拓展，另外自带了一个HDMI接口，这个我后面会聊到。</p><p>其次就是常见的3.0接口以及千兆网口，3.0接口可以外挂移动硬盘进行PT下载，或者作为UPS通信输出口。</p><p>千兆接口一个是完全够用的，目前千兆的带宽，同时播放数十个4k电影，带宽也是足够的。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/86f95b51299445b48efba60e17ff00df><p class=pgc-img-caption></p></div><p>正面左侧有一个滑盖锁定按钮，解锁后就可以打开硬盘盖。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3faeaa9a27914bf78eca83a2f6b526a2><p class=pgc-img-caption></p></div><p>托架同时支持2.5以及3.5英寸硬盘，如果你有淘汰的笔记本机械硬盘也是可以拿过来应急用用的。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8b5def61e35d49d1804f1fe727e789d0><p class=pgc-img-caption></p></div><p>2G内存偏小，我个人是强烈建议拓展内存到6GB或者8GB，251D最大支持8G内存，规格是笔记本内存DDR4 2400。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0827ff4d50484c67b2f07bd6bf66d0fe><p class=pgc-img-caption></p></div><p>我这次准备了两块10T西部数据NAS红盘，这是西部数据专为NAS配置的，我倒是建议西部数据红盘不要作为下载盘，存放电影7X24开启，这才是NAS硬盘的重要用途。</p><p>因为单盘设置，所以，实际容量就是20TB。</p><p>我做PT下载的时候，下载盘永远是那个最破最便宜的硬盘，容量也不大。</p><p>如果你一次不能配置齐全两块硬盘的话，先用一块硬盘也是没有问题的，单盘设置就是这么任性。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d1637e63c16c4be69e26ceafc68587cb><p class=pgc-img-caption></p></div><p>确认到位后我们开始从零开始，一步一步配置。</p><h2 class="md-end-block md-heading">搭建远程影音服务器的一些基础知识</h2><p>我就来详细聊聊一些基础知识，方便第一次接触的小白完完全全了解这是一个什么系统。</p><p>远程影音服务器，你需要能解码的硬件和存储设备，你需要能远程访问，你需要设置PT下载，甚至远程访问PT界面，最后就是基于NAS硬件搭建相应的流媒体系统。</p><p>千兆需不需要呢？</p><p>千兆局域网最好是有，没有的话实用性会大打折扣，百兆局域网传输速度理论上虽然是可以播放4k资源，但是一步到位不是更好么。</p><p>硬件层次我们有了，就是NAS，远程访问也是属于软件层次的涉及，PT下载同样是在NAS方面设置，相应的流媒体系统也有现成的，那就是大名鼎鼎的闭源plex、开源emby以及免费的Jellyfin。</p><p>流媒体系统能帮助你整理电影海报墙、归类、以及远程各种客户端去访问，这是它们的强大之处。</p><p>在NAS上安装上流媒体服务系统，花钱或者不花钱，看你的喜好去选择相应的流媒体系统。</p><p>而另有一些强大的局域网播放软件，类似infuse、kodi，这些相对plex、emby和Jellyfin有什么区别呢？</p><p>infuse、kodi是建立在局域网基础之上的，简单来说，NAS上搭建的流媒体服务器是依靠NAS的处理器去处理视频，比如转码后再播放，这样就会受制于NAS处理器的性能，而infuse、kodi通常是安装在电视盒子或者硬件播放器上的系统，它们同样具备整理海报墙、归类的功能，但是系统所在的硬件性能比较强大。</p><p>infuse、kodi不能远程播放，但是可以作为本地播放器播放你用其他途径连上的资源。</p><p>infuse、kodi同样可以搭配plex或者emby等系统，一起使用，常见的有infuse+plex，kodi+plex。</p><p>在建立海报墙的时候，无论是infuse、kodi、plex还是emby，都需要去自动搜寻相应的海报、演员信息、电影信息等，这个过程叫削刮。</p><p>目前最强大的削刮功能的是infuse，其他的kodi、plex、emby都不是特别完美，但是plex和emby要比kodi更好一些，所以你可以在kodi里安装plex或者emby的插件，借用plex和emby的削刮功能去整理相应的信息。</p><p>削刮功能也有独立专用的削刮插件或者软件，这些就比较复杂了，我们暂时不去聊。</p><h2 class="md-end-block md-heading">从零开始安装NAS系统（小白向）</h2><p><strong>我们以威联通为例，探讨相应的做法。</strong></p><p><strong>这里属于小白向，懂的人可以直接跳过。</strong></p><p><strong>一般来说，我建议先下载一个Qfinder Pro软件，这样当NAS连接上千兆网络后，会自动发现机器指引安装。</strong></p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/32f6748a53b74d71938643e664f31605><p class=pgc-img-caption></p></div><p>智能安装指引界面。</p><p>以下我就简单文字描述了，跟着做就行，如果有疑问，可以评论中咨询。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/64c001e535214eed8d34a0bd809c6e3c><p class=pgc-img-caption></p></div><p>设置用户名和密码，第一次给你的是管理员账号，后续可以自己增加账号和相应权限。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/829fc2234037467aa5a74967008b8105><p class=pgc-img-caption></p></div><p>设置时间，选择东八区。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fb16b839b5c54ba28e410c8464f09d62><p class=pgc-img-caption></p></div><p>IP地址用自动，轻松，其他的设置不要动。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e49e514f58cf4869b2f6875aaa1ee172><p class=pgc-img-caption></p></div><p>勾选传输服务，看需求，如果你有mac和win，就都勾选上，如果只有win设备，勾选第一个就行了，这个选择错了也没关系，后期可以自己设置。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dc42847b03184c91a76214a75552d862><p class=pgc-img-caption></p></div><p>点击套用。</p><p>等待片刻。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/14b571275ee4497c9b7ee736982ec23b><p class=pgc-img-caption></p></div><p>完成设置。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/edf8734fe99e487c8cd67bb189aab89a><p class=pgc-img-caption></p></div><p>进入系统。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f94c6254419343e38c78facd6bfdb363><p class=pgc-img-caption></p></div><p>进入“存储于快照总管”。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/aacd08e37ada44d5b493f20748a91385><p class=pgc-img-caption></p></div><p>会发现没有磁盘区以及没有存储池。</p><p>我们这里不去考虑存储池，那是偏向有一定需求的中高级用户，家庭影音用户可以完全不用考虑。</p><p>这里也聊下存储池，存储池你可以理解为一种高级存储方式，一大堆硬盘，不同容量、不同规格，都可以组建存储池，比较灵活。</p><p>我目前家里两台NAS都没有组建存储池，所以直接点击没有磁盘区去新建磁盘区。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/cd522b7df4744948b1121e6f54fcffad><p class=pgc-img-caption></p></div><p>这里选择静态卷，厚卷和精简卷就是支持快照这类高等恢复功能，对于影音来说没需求。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ba455037d7d64db9af5cf29c5f836d0a><p class=pgc-img-caption></p></div><p>RAID类型单独。</p><p>不是保存重要资料，不需要高读写性能，不需要组建raid。</p><p>此后一路下一步，直到完成。</p><h2 class="md-end-block md-heading">配置远程（公网IP或NAS自带cloudlink）</h2><p>公网IP是做什么的呢？简单来说，这就是网络上你家的唯一位置，只有具备公网IP，才能快速、便捷的远程访问。</p><p><strong>如果你是电信用户，公网IP还是比较好搞的，如果你是联通或者移动，只能采用威联通自带的远程访问或者花生壳内网穿透服务，前者叫cloudlink，具体实现很简单而且免费，去威联通APP中心下载cloudlink，然后去myqnapcloud.com上注册一个账号就可以用了，但是速度相对较慢（远程看电影不成问题）后者速度快慢和你花钱多少有关。</strong></p><p>如何判断是不是公网IP呢，其实很简单，百度下本地IP，再去路由器看下WAN IP，如果一致那就是公网IP，不一致那就是不是公网IP。</p><p>申请公网IP就要靠你们自己了，电信相对容易一些。</p><h3 class="md-end-block md-heading">配置公网IP</h3><p><strong>这一段比较复杂，如果嫌弃看不懂，麻烦，那就直接跳过这块，看后面我对于cloudlink的设置，看电影没问题的，反正你又不是远程传输文件。</strong></p><p>有了动态公网IP后，我们首先要做的是还是注册一个花生壳账号，去申请壳域名和DDNS（动态域名解析）服务。</p><p>壳域名是方便快速远程网页访问的，也就是固定的一个访问域名，DDNS是为了解析你的变化动态公网IP的，因为这个公网IP是实时变动的，不是一成不变的.</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8b4aa96efec9479ab5ce2dad9704d237><p class=pgc-img-caption></p></div><p>注册壳过程不多说了，注册完成后实名认证一下，花几十块钱就能拥有自己永久的壳域名，还是比较方便的。</p><p>这个壳域名加上端口，就可以远程访问自家的NAS了，当然我们还要去路由器下设置下DDNS和端口转发。</p><p>在设置DDNS之前，让我们先固定下NAS的局域网IP地址。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8145ef39a5574b9d9fd73d4bd9a0f0e3><p class=pgc-img-caption></p></div><p>华硕路由器中可以直接手动指定IP地址。</p><p>NAS固定IP设定好后，让我们设定DDNS服务，华硕自家也有相应的服务，不过我还是习惯用花生壳了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/792d1ae9a9544fffa184d0b8df502442><p class=pgc-img-caption></p></div><p>设置也很简单，在外部网络里，有个DDNS，不同路由器大同小异，其中服务器选择花生壳，属入用户名和密码，保存页面设置就可以了。</p><p>设置端口转发前先看看威联通的内部端口。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7def54204bb547b6b5c477f33b703150><p class=pgc-img-caption></p></div><p>打开NAS控制台，找到系统管理，可以看到NAS的系统端口默认为5000，建议修改数值。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8d73688ddd824315bc4fa0f032b20f49><p class=pgc-img-caption></p></div><p>内部端口填写NAS的端口数值，外部端口可以一致，也可以是其他数值。</p><p>通讯协议为TCP，本地IP地址为之前NAS设定的固定IP，点击确认就可以了。</p><h3 class="md-end-block md-heading">配置cloudlink</h3><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7af73e4702c549d5af25a45c95d35829><p class=pgc-img-caption></p></div><p>进入APP cetenr，下载Cloudlink云联通。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/51d7bc57b42349808d8f5b42709b8581><p class=pgc-img-caption></p></div><p>在界面上注册账号，并且激活账号。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7922bbf63e984122837fb9a6a5157ca0><p class=pgc-img-caption></p></div><p>这也是类似花生壳的壳域名，方便直接访问。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6117203e8467427785c511e6b345e86a><p class=pgc-img-caption></p></div><p>完成后可以在这里看到相应的地址，并且启用DDNS服务。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/395e14995a8a416d89f9d171af22792a><p class=pgc-img-caption></p></div><p>远程访问测试成功。</p><h2 class="md-end-block md-heading">设置PT下载（Transmission）</h2><p>如果你有PT账号那就可以看这部分，没有的话，也没什么关系，反正资料可以直接转移到NAS。</p><p>PT账号可以去百度PT吧看看，或者你自己用什么渠道搞到账号，这里我就不多说了。</p><p>威联通自带的下载不好用，所以我们一般选择Transmission这款PT下载程序</p><p>我们要先安装TR的X86版本，ARM版本也有。</p><p>这是官方的下载地址https://qnapclub.eu/fr/qpkg/208。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8846a00341844e7cbaea164be565c00c><p class=pgc-img-caption></p></div><p>这两个版本我在自己的nas上都尝试过了，没有问题，第一个对应TS453Bmini这种X86架构的NAS，第二个对应同TS428这种ARM架构的NAS。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b3dce5005a5543e79cd47988dea72a1a><p class=pgc-img-caption></p></div><p>安装需要在APP中心的右上角，点击后手动安装。</p><p>安装完成后打开transmission，用户名和密码默认是qnap，点击后进去。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/06f23b602c524229a0ed38a95697000b><p class=pgc-img-caption></p></div><p>这个界面太简陋了，也太丑了，也不能自己设置一些下载限制，别急，还要继续改造。</p><p>我们需要的工具有WinSCP，这是非常重要的工具。</p><p>安装好后WinSCP，打开，输入你的登陆名、IP和密码后登陆你的NAS。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6ac87035c888440bb1990430c9acc575><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cfff6d50e50641fda902bcad4dbc1037><p class=pgc-img-caption></p></div><p>在右上角找到NAS根目录(toot)，找到下面这个文件夹。</p><p>/share/CACHEDEV1_DATA/.qpkg/QTransmission/share/transmission</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1f2c8ce2a7ed43128eeedf6ea246771a><p class=pgc-img-caption></p></div><p>看到SRC文件夹了么？这就是接下来我们需要替换的文件夹。</p><p>从百度网盘链接下载transmission-web-control-master zip压缩包并解压。</p><p>https://pan.baidu.com/s/1fIHvMAD2QX88KqUZBMQhSw</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6a0f07361e2b4305ad289f53c5831855><p class=pgc-img-caption></p></div><p>将transmission-web-control-master里面的src改名为src1拷贝到NAS文件夹下，同时将NAS文件夹下的src改名为web文件夹，最后再将src1改为src，这是为了出问题后快速恢复。</p><p>改完后看看是不是界面这样了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/acb0996a563b40ab9194e18bf9d13319><p class=pgc-img-caption></p></div><p>如果还是之前的简陋界面，可以Ctrl+F5强制刷新下，这样就可以看到新的界面了。</p><p><strong>这还没结束，因为默认状态下的TR是无法自定义下载文件夹的，我们还需要做其他修改。</strong></p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bcbfff1bf8834053a5ef76312b13707f><p class=pgc-img-caption></p></div><p>这个界面默认PT保存目录不能在TR里面修改，很不好。</p><p>我因为采用移动硬盘外接作为下载盘，所以我先连接上了移动硬盘。</p><p>还是利用WinSCP打开NAS根目录，找到移动硬盘所在的文件夹。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/97790b18ecb34f36a8a3711be52fd6e3><p class=pgc-img-caption></p></div><p>点击USBdisk1就能发现目录路径为/share/external/DEV3304_1，拷贝一下。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6b37fdb083c3462f98bca11718b2bdcf><p class=pgc-img-caption></p></div><p>直接修改默认保存目录。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8ff5a2162c584c139a3ecd4b9b25e4b3><p class=pgc-img-caption></p></div><p>下载成功，非常棒。</p><p>PT下载一定要外接个破硬盘使用，因为这样可以最大寿命化昂贵的NAS硬盘。</p><h2 class="md-end-block md-heading">搭建相应的流媒体系统</h2><p>如果我们不搭建流媒体系统，有没有什么很好的远程观看解决方法呢？</p><p><strong>嗯，如果你不搭建流媒体系统的话，也是可以的，而且不用花一分钱，或者很少量的资金。</strong></p><p><strong>流媒体是为了让视频可视化，美观化。</strong></p><p><strong>如果你都不在乎，直接选择文件观看，那就太简单了。</strong></p><p><strong>你需要什么呢？</strong></p><p><strong>两个手机APP和一部性能不算太差的手机。</strong></p><p><strong>APP一个是威联通的Qfile，另一个是本地播放APP。</strong></p><p>有人要说了，我直接网页远程访问NAS不可以直接调用电脑的本地播放器播放嘛？</p><p>威联通之前是可以的，但是目前只有移动端可以调用第三方APP播放。</p><p>我用IOS举例。</p><p>手机访问Qfile，找到相应的视频文件。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a6a9ea4c9ac84372961c85bf8c7528de><p class=pgc-img-caption></p></div><p>播放的时候注意选择原始文件，这个时候会弹出来选择播放APP，你可以选择IOS下的infuse或者nplayer，两者都有免费版，只是免费版稍微有一些限制。</p><p>我自己是收费版本infuse Pro，手机是iPhone 11 Prio，带宽够的前提下，甚至可以流畅播放4k H265视频，不过因为我家上传带宽只有2-3MB每秒，所以实测最高只能远程播放1080P H265视频。</p><p>这个时候你再打开苹果的投屏功能。</p><p>实测，我在微投、小米电视上，甚至我的MacBook Pro上都可以投屏远程流畅播放所有的1080P H265。</p><p><strong>安卓Qfile同时可以第三方播放器播放，安卓同样也具备投屏功能，所以，如果不在乎美观方便度的话，这应该是你的最佳解决方案。</strong></p><h3 class="md-end-block md-heading">搭建plex或者emby前聊一聊这两个系统</h3><p>为了方便测试，我将两个系统都安装了，在安卓和苹果客户端也都分别测试了，并且都测试开启了一个月会员，plex和emby只有开启会员才能硬解4K，否则会卡顿无法流畅远程播放，另一个系统Jellyfin倒是免费可以开启硬件加速，但是我总是秉着免费不是最好的看法，这个就留到下次去测试吧，免费终究还是会收费，这世界能用钱解决的就不用折磨自己了。</p><p>首先，如果你不是苹果用户，没有infuse，那么我还是推荐Emby，因为界面真的是太友好了，还特别美观。</p><p><strong>另外，未知原因，我手中J3455的NAS安装plex，网页远程播放4K视频，经过一堆尝试设置后，一点也不卡顿，甚至可以转码用手机4G网络观看4k；但是，我用J4005的251D安装Emby，网页远程播放4k视频会卡顿，而emby在硬件转码设置上相对plex会少一些设置，我也无法确定是不是设置的问题，因为plex未调整设置之前也是卡顿，理论上J4005的核显要强于J3455的核显，不应该卡顿的。</strong></p><p>Plex下载、安装都略复杂，界面也不是特别友好，安卓APP客户端，官网下载不了，目前我测试了，只有安卓手机的应用汇才可以下载到plex最新版。</p><p>Emby下载、安装都比较轻松，安卓app客户端，官网轻松下载。</p><p>IOS就不用说了，下载应用很轻松。</p><p>infuse中可以接入plex服务，这是我最终选择plex 的原因。</p><h3 class="md-end-block md-heading">搭建emby</h3><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/89752195f66849b682c52de0939e712e><p class=pgc-img-caption></p></div><p>官网上可以找到各种类别的服务器版本，基本上你想的到的，想不到的他都有。</p><p>我们在NAS中选择QNAP版本，记得X86是X86的版本，ARM是ARM版本，别选择错了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f7db83dce0184f8b8b395b621267b868><p class=pgc-img-caption></p></div><p>手动安装。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/53ce84c0a4ac49ab93bc5ee8696c7635><p class=pgc-img-caption></p></div><p>注册ID以及密码，地址可以不填写，点击next。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/31c2bd4cc07d4c16a4504f7d8dac7020><p class=pgc-img-caption></p></div><p>添加媒体库，就是你NAS资料所在的文件夹。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3d2a1400f1e5439e89265673bdcec999><p class=pgc-img-caption></p></div><p>选择好后OK。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bc9da9c108444c9d95f2c7189de72ea4><p class=pgc-img-caption></p></div><p>削刮器来源都勾选上，第三个勾选的是支持NFO文件，这个文件就是影片自带的信息文件，勾选上。</p><p>其他不用管。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/71e042c264fb47c191f3c70a6b8f94f4><p class=pgc-img-caption></p></div><p>字幕下载语言选择简体中文，勾选"开放字幕"，第三个我没搞懂是什么。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ee2929b63e0648b58f77183074770078><p class=pgc-img-caption></p></div><p><strong>在后台中可以看到相应的公网地址，如果你是cloulink设置的穿透服务，直接XXXX.myqnapcloud.cn:8096访问网页版本服务器，8096是emby默认端口号，而如果是公网IP，除了有指定端口号外，还需要在路由器中设置下端口转发才可以。</strong></p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/90c0e8a19ac1422e8737cb35a2b952d7><p class=pgc-img-caption></p></div><p>PLEX界面，非常漂亮。</p><p>远程播放1080P电影的时候，非常流畅，软解CPU大约60%左右，这还是没买emby会员。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8df30b139c7f4bbdaf37dd96c2626d0e><p class=pgc-img-caption></p></div><p>买了会员后，会在后台转码这块看到硬件转码器设置，只有开启这个才能硬解4k。</p><p>看CPU数值，硬解4K和软解1080P占有率差不多，同样是60%。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f72f2989f3b54e70a3fcde55c4080c88><p class=pgc-img-caption></p></div><p>可以选择各种码率，局域网测试的话可以选择原盘播放了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9d0a5f4e5a2b4c6eb82ba224f95cb1fd><p class=pgc-img-caption></p></div><p>编辑元数据也容易，自己修改一下就好了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a5cda0297524555bab5de802e60d04d><p class=pgc-img-caption></p></div><p>手机APP访问。</p><h3 class="md-end-block md-heading">搭建plex</h3><p>plex我研究更多一些。</p><p>不过威联通可以在应用中心直接安装plex，这点非常方便。</p><p>我之前写西部数据一款NAS的时候注册过plex，所以注册界面跳过，从建立媒体库开始，因为plex设置更复杂，所以这块多讲一些。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8ec099b7a7cd40b3ba0969f0855a8e61><p class=pgc-img-caption></p></div><p>添加媒体库，比如电影，语言为中文。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/85ffeb6a88674152bb053f52d48cbdce><p class=pgc-img-caption></p></div><p>选择对应的文件夹。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b41a0c1613d14788ae22ff2c3cf4d5ff><p class=pgc-img-caption></p></div><p><strong>高级设置中，第一行“hide itms which are in collections”是指自动将系列电影合并成一个系列。</strong></p><p><strong>扫描器是plex movie scanner不变。</strong></p><p><strong>代理一定要选择 the movie datebase，对中文支持友好。</strong></p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1fbeadf427814f55960761df4389ceb5><p class=pgc-img-caption></p></div><p><strong>地区选择中国。</strong></p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2e1518eb322244408e5866e284fb23f2><p class=pgc-img-caption></p></div><p>plex需要手动指定端口，我手动指定为32400，并且在路由器中设置了端口转发，如果你是cloudink中设置的远程访问，手动指定端口后就可以直接访问。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ef6fbd9f6916472ca1cfbfa06e0b32d1><p class=pgc-img-caption></p></div><p>PLEX界面，也还是比较漂亮的，不过我截图的时候plex尚且没削刮完毕，所以很多电影系列没显示出来，plex削刮速度还是比较慢的，建议一夜过后在看吧。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/19cafeef67e0433d97b60ff71346754f><p class=pgc-img-caption></p></div><p>当然了，更改元数据，海报数据，电影数据也是可以的。</p><p>购买了一个月会员，我总结了一份转码设置，建议上传带宽比较小，J3455的机型按照我这个设置。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c2ac97fc766e41eca978fa2557f8f233><p class=pgc-img-caption></p></div><p>转码质量设置为prefer higher speed encoding，我这里一开始用的auto，远程看4k一卡一卡的。</p><p>X264设置我不太确定和卡顿有没有关系，我个人感觉是第一项导致的，这里我设置成了super fast，原先是fast。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/946c6b40d0ce4129a77452c1b158aee2><p class=pgc-img-caption></p></div><p>远程，1080P 8 Mbps转码播放下不卡顿。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/60012b0df6bb4697be72189a19709d85><p class=pgc-img-caption></p></div><p>能实时在后台看到当前转码的场景。</p><p>用IOS和安卓也测试了。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e5e6d16b63eb46caa0d2edcb4ce153d6><p class=pgc-img-caption></p></div><p>IOS测试4k，手机端为4G网络，非局域网和WiFi网络，手机端画质为720P。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f0d3d39bba7a44e0b377b5f1ae2267d9><p class=pgc-img-caption></p></div><p>播放也是没有压力，非常流畅，4G网络下，720P 2Mbps码率也能接受，毕竟手机屏幕小。</p><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e0801eb850a646f0b0eb54386bde4398><p class=pgc-img-caption></p></div><p>非4G网络下，1080P可以原码观看。</p><p>这是安卓PLEX客户端界面，应用汇上可以下载到最新版本，我之前用了应用宝，虽然也可以搜索到plex客户端，但是版本是非常过时的，无法正常播放视频。</p><p>除了网页版本和APP版本，电视盒子上kodi也有plex插件可供使用，如果你用了plex，就没必要用kodi自己的削刮器，直接使用plex或者emby插件就可以。</p><p>我自己因为家里没有安卓盒子，而且电视安装kodi会不规律闪退，所以没有用kodi测试，我是Apple TV安装了infuse，之前iufuse削刮能力还是相当强悍的，这次搭建plex平台后，就直接在infuse中连接了plex，效果也不错。</p><h2 class="md-end-block md-heading">总结</h2><div class=pgc-img><img alt=从零开始，搭建自己的NAS媒体服务器，附plex和emby对比 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4dcdbc0ecaf6430a9f0b1bcbfd435b17><p class=pgc-img-caption></p></div><p>2盘位作为家用影音NAS够用吗？</p><p>答案是够用的，毕竟如果看中性能，X86处理器中的J3455、J4005以及J4115这些两盘位机型都是完全够用的。</p><p>两盘位组建raid容量会比多盘位有劣势，但是你真的需要raid？</p><p>我以前损失资料的经验让我知道不要把重要文件只备份一份，而是至少2份，在不同的设备中。</p><p>家用NAS无外乎是影音娱乐或者保存一些照片的功能，2盘位的NAS反而具备耗电低和低噪音的特性。</p><p>另外从零开始，搭建NAS影音服务器没有想象中那么困难，毕竟有很多现成的经验可供分享，而NAS发展到今天这个阶段，已经很成熟了。</p><p>当然你也可以自己组建NAS服务器，不过这需要更多知识储备，稳定性也让达不到需求。</p><p>NAS的可玩性非常高，比如web服务器和docker容器，理论上可以化身为各种设备，这些都是日后慢慢琢磨的地方。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'零开始','NAS','媒体'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>