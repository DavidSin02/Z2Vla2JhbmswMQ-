<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>正则表达式详解 | 极客快訊</title><meta property="og:title" content="正则表达式详解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/b9119d719d7546b49252791bbe799d96"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3e45d458.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3e45d458.html><meta property="article:published_time" content="2020-11-14T21:07:13+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:13+08:00"><meta name=Keywords content><meta name=description content="正则表达式详解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/3e45d458.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>正则表达式详解</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>什么是正则？</strong></h1><p>正则表达式（regular expression）是一种表达文本模式（即字符串结构）的方法，有点像字符串的模板，常常用来按照“给定模式”匹配文本。比如，正则表达式给出一个 Email 地址的模式，然后用它来确定一个字符串是否为 Email 地址。JavaScript 的正则表达式体系是参照 Perl 5 建立的。</p><p><strong>建立正则表达式</strong></p><p><strong>使用内置RegExp构造函数</strong></p><pre>var reg=new RegExp("martin")；</pre><p><strong>直接建立</strong></p><pre>var reg=/martin/;</pre><p>以上两种建立正则的方式是等效的,，不过一般第二种方式用的更多一些。</p><p><strong>接受参数</strong></p><p>正则表达式除了接受一个字面量字符参数，还可以接受一个修饰符作为参数。</p><pre>var reg=/martin/g//var reg=new RegExp("martin","g")；</pre><p>说完基本的正则概念和接受参数，接下来说一下正则的匹配规则，这一块也是面试和笔试考察的重点。</p><h1><strong>匹配规则</strong></h1><p>在说匹配规则之前我们先说一下正则中的字符分类。</p><p><strong>字面量字符和元字符</strong></p><p>字面量字符：只表示它字面的含义，就像上面代码中的martin，也就是实际用于匹配的字符。</p><p>元字符：不代表字符本身字面的意思，而是有特殊含义的字符，也就是帮助字面量字符达到更好的匹配效果的辅助字符。</p><p>其中元字符又分为很多类，具体类型如下：</p><div class=pgc-img><img alt=正则表达式详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b9119d719d7546b49252791bbe799d96><p class=pgc-img-caption>元字符分类</p></div><ul><li><strong>点字符（.）</strong></li></ul><pre>var reg=/1.3/; //表示匹配1和3之间包含任意一个字符的情况，除特殊符外，如："1-3","1.3","123"等； //但是一个点只能匹配一个字符，如："1223"则无法匹配成功</pre><ul><li><strong>位置字符(^和$)</strong></li></ul><pre>var reg=/^13/; //表示以"13"字符串开头的字符串reg.test("134") //truevar reg=/13$/; //表示以"13"字符串结束的字符串reg.test("134") //falsereg.test("4 31") //truevar reg=/^13$/; //注意：表示从开始到结束位置只有"13"这个字符串reg.test("13") //truereg.test("1313") //false</pre><p>注意： /^13$/ 这个正则表达式很容易让人理解成匹配以字符串"13"开始和结尾的字符串，如："1313",但实际上它是表示从开始到结束位置只有"13"这个字符串。</p><ul><li><strong>选择符（|）</strong></li></ul><pre>var reg=/11|22||33/; //表示匹配"11"或者"22"或者"33"reg.test("11") //truereg.test("22") //true</pre><p>注意：选择符会匹配包括它前后的多个字符，比如 /11|22/ 指的是匹配"11"或者"22"，而不是指匹配1或者2,。如果想匹配1或者2，可以添加括号来实现，如：</p><pre>var reg=/1(1|2)2/;reg.test("112") //truereg.test("122") //true</pre><p><strong>转义字符</strong></p><p>如果要在正则表达式中使用具有特殊含义的字符，如：$,^等，也就是如果要匹配它们本身，那就需要用到转义字符了，也就是在他们前面加上"\"反斜杠,比如要匹配$，则写成\$。</p><p>正则表达式中，需要反斜杠转义的，一共有12个字符：^、.、[、$、(、)、|、*、+、?、{和\\。需要特别注意的是，如果使用RegExp方法生成正则对象，转义需要使用两个斜杠，因为字符串内部会先转义一次。</p><p>.</p><pre>var reg=/1\$/; //表示匹配字符串"1$",而不是以1结尾的字符串reg.test("1") //falsereg.test("1$") //true</pre><p><strong>特殊字符</strong></p><p>正则表达式对一些不能打印的特殊字符，提供了表达方法。</p><ul><li>\cX 表示Ctrl-[X]，其中的X是A-Z之中任一个英文字母，用来匹配控制字符。</li><li>[\b] 匹配退格键(U+0008)，不要与\b混淆。</li><li>\n 匹配换行键。</li><li>\r 匹配回车键。</li><li>\t 匹配制表符 tab（U+0009）。</li><li>\v 匹配垂直制表符（U+000B）。</li><li>\f 匹配换页符（U+000C）。</li><li>\0 匹配null字符（U+0000）。</li><li>hh 匹配一个以两位十六进制数（00-FF）表示的字符。</li><li>\uhhhh 匹配一个以四位十六进制数（\u0000-\uFFFF）表示的 Unicode 字符。</li></ul><p><strong>字符类</strong></p><p>字符类表示有一系列字符可供选择，只要匹配其中一个就可以。表示方法为将所有可供选择的字符都放在方括号内，比如[xyz]表示匹配x、y、z中的任意一个就可以。</p><pre>var reg=/[abc]/; //表示匹配a,b,c中任一字符皆可reg.test("hello") //falsereg.test("apple") //true</pre><p>说到这里同学们应该会想到之前说过的选择符吧，[xyz]就等效于(x|y|z)，两者可相互转换。</p><p>Q：那既然两种字符功能可以相互转换，为啥有了选择符还要字符类呢？</p><p>A：因为字符类除了能表示选择，还包括另外两种字符，脱字符和连字符，这两种字符又有新的功，可以将字符类理解成选择符的一种超集。</p><ul><li><strong>脱字符(^)</strong></li></ul><p>表示可以匹配除字符类中字符以外的所有字符，因为这个符号和位置字符中的"^"开始位置字符是相同的，所以在使用时要注意区别，直接"^"放在正则表达式开头的是位置字符，放在"[]"中开头的"^"表示的是脱字符。</p><pre>var reg=/^123/; //位置字符reg.test("1234"); //truevar reg=/[^123]/; //脱字符reg.test("123"); //falsereg.test("4") //true</pre><ul><li><strong>连字符(-)</strong></li></ul><p>表示匹配连续字符序列中的任意一个字符，如：[abcdef]可以写成[a-f],[012345678]可以写成[0-9]等，这大大提升了字符类书写的简便性。</p><pre>var reg=/0-9/; //表示匹配字符串"0-9"reg.test("0") //falsereg.test("0-9")//truevar reg=/[0-9]/;reg.test("0") //false</pre><p>==注意：虽然连字符用起来十分简便，但是一定要避免过度使用连字符，因为连字符往往设定的是一个比较大的范围，如果不注意可能会匹配到意料之外的一些字符。比如：[A-z],表面上它是要匹配到A-Z和a-z这52个字符，但是实际上在ASCII编码中，在Z和a之间还有很多其他字符，所以可能机会出现意料之外的匹配效果。</p><pre>var reg=/[A-z]/;reg.test('['); //true</pre><p>分析：因为"["字符在Z和a之间，所以也能被匹配到。</p><p><strong>预定义模式</strong></p><p>预定义模式是指某些常见模式的简写方式，可以理解成是内置的正则表达。</p><ul><li>\d 匹配0-9之间的任一数字，相当于[0-9]。</li><li>\D 匹配所有0-9以外的字符，相当于[^0-9]。</li><li>\w 匹配任意的字母、数字和下划线，相当于[A-Za-z0-9_]。</li><li>\W 除所有字母、数字和下划线以外的字符，相当于[^A-Za-z0-9_]。</li><li>\s 匹配空格（包括换行符、制表符、空格符等），相等于[ \t\r\n\v\f]。</li><li>\S 匹配非空格的字符，相当于[^ \t\r\n\v\f]。</li><li>\b 匹配词的边界。</li><li>\B 匹配非词边界，即在词的内部。</li></ul><p><strong>重复类</strong></p><p>模式的精确匹配次数，使用大括号（{}）表示。{n}表示恰好重复n次，{n,}表示至少重复n次，{n,m}表示重复不少于n次，不多于m次，默认匹配的是单个字符，若想要重复字符串，可以使用括号。</p><pre>var reg=/12{2,5}3/; //默认表示匹配单个字符"2"的次数为2-5次reg.test("1223") //true reg.test("12123") //falsevar reg=/(12){2,5}3/; //表示匹配字符串"12"的次数为2-5次reg.test("1223") //false reg.test("12123") //true</pre><p><strong>量词符</strong></p><p>量词符是内置用来设定某个模式出现的次数的，默认也是匹配单个字符的次数。</p><ul><li>? 问号表示某个模式出现0次或1次，等同于{0, 1}。</li><li>* 星号表示某个模式出现0次或多次，等同于{0,}。</li><li>+ 加号表示某个模式出现1次或多次，等同于{1,}。</li></ul><p><strong>贪婪和非贪婪模式</strong></p><ul><li>贪婪模式(默认)：即最大可能匹配，匹配直到下一个字符不满足匹配规则为止，上面说的三个量词符，默认模式都为贪婪模式。</li></ul><pre>var s = 'aaa';var reg=/a+/;s.match(reg); //["aaa"]</pre><ul><li>非贪婪模式：即最小可能匹配，匹配到一个满足匹配规则的字符就停止，将贪婪模式改为非贪婪模式只需要在量词符后面加一个问号。</li></ul><pre>var s = 'aaa';var reg=/a+?/;s.match(reg); //["a"]</pre><p>总结：</p><ul><li>*?：表示某个模式出现0次或多次，匹配时采用非贪婪模式。</li><li>+?：表示某个模式出现1次或多次，匹配时采用非贪婪模式。</li></ul><p><strong>修饰符</strong></p><p>修饰符（modifier）表示模式的附加规则，放在正则模式的最尾部,有g,i,m三种修饰符。</p><p>修饰符可以单个使用，也可以多个一起使用。</p><pre>// 单个修饰符var reg = /test/i;// 多个修饰符var reg = /test/ig;</pre><ul><li>g修饰符</li></ul><p>默认情况下，第一次匹配成功后，正则对象就停止向下匹配了。g修饰符表示全局匹配（global），加上它以后，正则对象将匹配全部符合条件的结果，主要用于搜索和替换。</p><pre>var s = 'aaa';var reg=/a+?/;s.match(reg); //["a"]var s = 'aaa';var reg=/a+?/g;s.match(reg); //["a","a","a"]</pre><ul><li>i修饰符</li></ul><p>默认情况下，正则对象区分字母的大小写，加上i修饰符以后表示忽略大小写（ignorecase）</p><pre>var s = 'Aaa';var reg=/a/;s.match(reg); //["a"]var s = 'Aaa';var reg=/a/i;s.match(reg); //["A"]</pre><ul><li>m修饰符</li></ul><p>m修饰符表示多行模式（multiline），会修改^和$的行为。默认情况下（即不加m修饰符时），^和$匹配字符串的开始处和结尾处，加上m修饰符以后，^和$还会匹配行首和行尾，即^和$会识别换行符（\n）。</p><pre>var s = 'ab\n ab';var reg=/ab$/m;s.match(reg); //["ab"]var s = 'ab\n ab';var reg=/ab$/gm;s.match(reg); //["ab","ab"]会按行进行匹配，会识别\n换行符,这里的第一行以ab结尾，第二行也以ab结尾</pre><h1>练习题</h1><p>1.常用的11位手机号码验证的正则？</p><p>2.常用的邮箱验证的正则？</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'正则','表达式','详解'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>