<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>电路基础知识：各种IO输出的类型 | 极客快訊</title><meta property="og:title" content="电路基础知识：各种IO输出的类型 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RY30h1TDVXPyMJ"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4147258.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4147258.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4147258.html><meta property="article:published_time" content="2020-10-29T20:50:21+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:21+08:00"><meta name=Keywords content><meta name=description content="电路基础知识：各种IO输出的类型"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4147258.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>电路基础知识：各种IO输出的类型</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>集电极开路（OC）</strong></p><p>集电极开路输出的结构如图1所示，右边的那个三极管集电极什么都不接，所以叫做集电极开路；左边的三极管为反相之用，使输入为“0”时，输出也为“0”。对于图 1，当左端的输入为“0”时，前面的三极管截止，所以5v电源通过1k电阻加到右边的三极管上，右边的三极管导通；当左端的输入为“1”时，前面的三极管导通，而后面的三极管截止。</p><img alt=电路基础知识：各种IO输出的类型 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RY30h1TDVXPyMJ><p>我们将图1简化成图2的样子，很明显可以看出，当开关闭合时，输出直接接地，所以输出电平为0。而当开关断开时，则输出端悬空了，即高阻态。这时电平状态未知，如果后面一个电阻负载到地，那么输出端的电平就被这个负载拉到低电平了，所以这个电路是不能输出高电平的。</p><p>图3中那个1k的电阻即是上拉电阻。如果开关闭合，则有电流从1k电阻及开关上流过，但由于开关闭和时电阻为0（方便我们的讨论，实际情况中开关电阻不为0，另外对于三极管还存在饱和压降），所以在开关上的电压为0，即输出电平为0。如果开关断开，则由于开关电阻为无穷大（同上，不考虑实际中的漏电流），所以流过的电流为0，因此在1k电阻上的压降也为0，所以输出端的电压就是5v了，这样就能输出高电平了。</p><p>但是这个输出的内阻是比较大的 —— 即1k，如果接一个电阻为r的负载，通过分压计算，就可以算得最后的输出电压为5*r/(r+1000)伏，所以，如果要达到一定的电压的话，r就不能太小。如果r真的太小，而导致输出电压不够的话，那我们只有通过减小那个1k的上拉电阻来增加驱动能力。</p><p>但是，上拉电阻又不能取得太小，因为当开关闭合时，将产生电流，由于开关能流过的电流是有限的，因此限制了上拉电阻的取值。另外还需要考虑到，当输出低电平时，负载可能还会给提供一部分电流从开关流过，因此要综合这些电流考虑来选择合适的上拉电阻。</p><p>如果我们将一个读数据用的输入端接在输出端，这样就是一个IO口了，51的IO口就是这样的结构，其中P0口内部不带上拉，而其它三个口带内部上拉。当我们要使用输入功能时，只要将输出口设置为1即可，这样就相当于那个开关断开，而对于P0口来说，就是高阻态了。</p><p><strong>漏极开路（OD）</strong></p><p>对于漏极开路（OD）输出，跟集电极开路输出是十分类似的。将上面的三极管换成场效应管即可。这样集电极就变成了漏极，OC就变成了OD，原理分析是一样的。OC门主要用于3个方面：实现与或非逻辑，用做电平转换，用做驱动器。</p><p><strong>开漏形式的电路有以下几个特点：</strong></p><ul><li><p>利用外部电路的驱动能力，减少IC内部的驱动，或驱动比芯片电源电压高的负载。</p></li><li><p>可以将多个开漏输出的Pin，连接到一条线上。通过一只上拉电阻，在不增加任何器件的情况下，形成“与逻辑”关系。这也是I2C，SMBus等总线判断总线占用状态的原理。</p></li><li><p>由于漏级开路，所以后级电路必须接一上拉电阻，上拉电阻的电源电压就可以决定输出电平。这样就可以进行任意电平的转换了。</p></li><li><p>源极开路提供了灵活的输出方式，但是也有其弱点，就是带来上升沿的延时。因为上升沿是通过外接上拉无源电阻对负载充电，所以当电阻选择小时延时就小，但功耗大；反之延时大功耗小。所以如果对延时有要求，则建议用下降沿输出。</p></li></ul><p><strong>推挽输出</strong></p><p>另一种输出结构是推挽输出。推挽输出的结构就是把上面的上拉电阻也换成一个开关，当要输出高电平时，上面的开关通，下面的开关断；而要输出低电平时，则刚好相反。</p><p>比起OC或者OD来说，这样的推挽结构高、低电平驱动能力都很强。如果两个输出不同电平的输出口接在一起的话，就会产生很大的电流，有可能将输出口烧坏。而上面说的OC或OD输出则不会有这样的情况，因为上拉电阻提供的电流比较小。如果是推挽输出的要设置为高阻态时，则两个开关必须同时断开(或者在输出口上使用一个传输门)，这样可作为输入状态，AVR单片机的一些IO口就是这种结构。</p><p><strong>驱动电路的两种形式：</strong></p><p>单片机内部的逻辑经过内部的逻辑运算后需要输出到外面，外面的器件可能需要较大的电流才能推动，因此在单片机的输出端口必须有一个驱动电路。</p><p><strong>采用一只N型三极管</strong></p><p>其中的一种是采用一只N型三极管 —— NPN或N沟道，以NPN三极管为例，就是e接地，b接内部的逻辑运算，c引出。b受内部驱动可以控制三极管是否导通，但如果三极管的c极一直悬空，尽管b极上发生高低变化，c极上也不会有高低变化，因此在这种条件下必须在外部提供一个电阻，电阻的一端接c(引出脚)另一端接电源，这样当三极管的b有高电压是三极管导通，c电压为低，当b为低电压时三极管不通，c极在电阻的拉动下为高电压。</p><p>这种驱动电路有个特点：低电压是三极管驱动的，高电压是电阻驱动的——上下不对称，三极管导通时的ec内阻很小，因此可以提供很大的电流，可以直接驱动led甚至继电器，但电阻的驱动是有限的，最大高电平输出电流=(VCC-Vh)/r。</p><p><strong>采用两只晶体管</strong></p><p>另一种是互补推挽输出，采用两只晶体管，一只在上一只在下，上面的一只是n型，下面为p型(以三极管为例)，两只管子的连接为：NPN(上)的c连VCC，PNP(下)的c接地，两只管子的ee,bb相连，其中ee作为输出(引出脚)，bb接内部逻辑。这个电路通常用于功率放大点路的末级(音响)，当bb接高电压时NPN管导通输出高电压，由于三极管的ec电阻很小，因此输出的高电压有很强的驱动能力，当bb接低电压时NPN截至，PNP导通，由于三极管的ec电阻很小因此输出的低电压有很强的驱动能力。</p><p>简单的例子，9013导通时ec电阻不到10欧，以Vh=2.5v，VCC=5v计算，高电平输出电流最大=250MA，短路电流500ma，这个计算同时告诉我们采用推挽输出时一定要小心千万不要出现外部电路短路的可能，否则肯定烧毁芯片，特别是外部驱动三极管时别忘了在三极管的基极加限流电阻。推挽输出电路的形式很多，有些单片机上下都采用n型管，但内部逻辑提供互补输出，以上的说明仅仅为了说明推挽的原理，为了更深的理解可以参考功率放大电路。</p><p><strong>上拉电阻和弱上拉</strong></p><p>上拉电阻很大，提供的驱动电流很小叫弱上拉，反之叫强上拉。</p><p><strong>为什么要使用拉电阻：</strong></p><p>上拉就是将不确定的信号通过一个电阻嵌位在高电平，电阻同时起限流作用，下拉同理。上拉是对器件注入电流，下拉是输出电流，弱强只是上拉电阻的阻值不同，没有什么严格区分。</p><p>对于非OC、OD输出型电路提升电流和电压的能力是有限的，上拉电阻的功能主要是为集电极开路输出型电路输出电流通道。</p><p><strong>上拉电阻的主要应用：</strong></p><ul><li><p>当TTL电路驱动COMS电路时，如果TTL电路输出的高电平低于COMS电路的最低高电平(一般为3.5V)，这时就需要在TTL的输出端接上拉电阻，以提高输出高电平的值。</p></li><li><p>OC门电路要输出“1”时需要加上拉电阻，不加根本就没有高电平。</p></li><li><p>为加大输出引脚的驱动能力，有的单片机管脚上也常使用上拉电阻，但在用OC门作驱动(例如：控制一个 LED)灌电流工作时就可以不加上拉电阻。</p></li><li><p>在COMS芯片上，为了防止静电造成损坏，不用的管脚不能悬空，一般接上拉电阻产生降低输入阻抗，提供泄荷通路。</p></li><li><p>提高总线的抗电磁干扰能力。管脚悬空就比较容易接受外界的电磁干扰。</p></li><li><p>长线传输中电阻不匹配容易引起反射波干扰，加上下拉电阻是电阻匹配，有效的抑制反射波干扰。</p></li></ul><p><strong>上拉电阻阻值的选择原则包括：</strong></p><ul><li><p>从节约功耗及芯片的灌电流能力考虑应当足够大；电阻大，电流小。</p></li><li><p>从确保足够的驱动电流考虑应当足够小；电阻小，电流大。</p></li><li><p>对于高速电路，过大的上拉电阻可能边沿变平缓。</p></li></ul><p>综合考虑以上三点，通常在1k到10k之间选取。对下拉电阻也有类似道理。</p><p><strong>三态门</strong></p><p>高阻态时引脚对地电阻无穷，此时读引脚电平时可以读到真实的电平值。高阻态的重要作用就是I/O(输入/输出)口在输入时读入外部电平用。一般门与其它电路的连接，无非是两种状态，1或者0，在比较复杂的系统中，为了能在一条传输线上传送不同部件的信号，研制了相应的逻辑器件称为三态门。</p><img alt=电路基础知识：各种IO输出的类型 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RaDsxS1WFWRjZ><p>三态门，除了有这两种状态以外还有一个高阻态，就是高阻抗(电阻很大，相当于开路)。相当于该门与和它连接的电路处于断开的状态。三态门是一种扩展逻辑功能的输出级，也是一种控制开关。</p><p>主要是用于总线的连接，因为总线只允许同时只有一个使用者。通常在数据总线上接有多个器件，每个器件通过OE/CE之类的信号选通。如器件没有选通的话它就处于高阻态，相当于没有接在总线上，不影响其它器件的工作。</p><p><strong>准双向口</strong></p><p>准双向口只能有效的读取0，而对1则是采用读取非零的方式，就是读入的时候要先向IO上写1，再读。真正的双向口正如其名，就是真正的双向IO不需要任何预操作可直接读入读出。</p><img alt=电路基础知识：各种IO输出的类型 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RRqrcDO9pRNlkn><img alt=电路基础知识：各种IO输出的类型 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RYWf9AR6GKVLEr><p>华秋商城（原“华强芯城”）：中国500强-华强集团旗下电子元器件现货交易平台，与全球1000+品牌原厂、授权分销商建立了长期战略合作关系，自建占地5000平米的大型仓库，可当日发货的自营现货库存 SKU已突破3万+；国际原厂的合作库存 SKU 超过 2000 万+。</p><p><strong>了解华强商城</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'知识','各种','IO'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>