<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ç†¬äº†7å¤©ï¼Œæ€»ç»“å‡ºæ¥äº†Javaä¸­åŠ¨æ€è§„åˆ™çš„å®ç°æ–¹å¼ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ç†¬äº†7å¤©ï¼Œæ€»ç»“å‡ºæ¥äº†Javaä¸­åŠ¨æ€è§„åˆ™çš„å®ç°æ–¹å¼ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/419b9a44.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/419b9a44.html><meta property="article:published_time" content="2020-11-14T20:59:54+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:54+08:00"><meta name=Keywords content><meta name=description content="ç†¬äº†7å¤©ï¼Œæ€»ç»“å‡ºæ¥äº†Javaä¸­åŠ¨æ€è§„åˆ™çš„å®ç°æ–¹å¼"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/419b9a44.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ç†¬äº†7å¤©ï¼Œæ€»ç»“å‡ºæ¥äº†Javaä¸­åŠ¨æ€è§„åˆ™çš„å®ç°æ–¹å¼</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right><strong>èƒŒæ™¯</strong></h1><p style=text-align:start>ä¸šåŠ¡ç³»ç»Ÿåœ¨åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™è¦å¤„ç†â€œç»å¸¸å˜åŒ–â€çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†éœ€æ±‚å¯èƒ½æ˜¯â€œä¸šåŠ¡è§„åˆ™â€ï¼Œä¹Ÿå¯èƒ½æ˜¯â€œä¸åŒçš„æ•°æ®å¤„ç†é€»è¾‘â€ï¼Œè¿™éƒ¨åˆ†åŠ¨æ€è§„åˆ™çš„é—®é¢˜ï¼Œå¾€å¾€éœ€è¦å¯é…ç½®ï¼Œå¹¶å¯¹æ€§èƒ½å’Œå®æ—¶æ€§æœ‰ä¸€å®šè¦æ±‚ã€‚</p><p style=text-align:start>Javaä¸æ˜¯è§£å†³åŠ¨æ€å±‚é—®é¢˜çš„ç†æƒ³è¯­è¨€ï¼Œåœ¨å®è·µä¸­å‘ç°ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼å¯ä»¥å®ç°ï¼š</p><ul><li>è¡¨è¾¾å¼è¯­è¨€ï¼ˆexpression languageï¼‰</li><li>åŠ¨æ€è¯­è¨€ï¼ˆdynamic/script language languageï¼‰ï¼Œå¦‚Groovy</li><li>è§„åˆ™å¼•æ“ï¼ˆrule engineï¼‰</li></ul><h1 class=pgc-h-arrow-right><strong>è¡¨è¾¾å¼è¯­è¨€</strong></h1><p style=text-align:start>Java Unified Expression Languageï¼Œç®€ç§°JUELï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç”¨é€”çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸»è¦åœ¨Java Webåº”ç”¨ç¨‹åºç”¨äºå°†è¡¨è¾¾å¼åµŒå…¥åˆ°webé¡µé¢ã€‚Javaè§„èŒƒåˆ¶å®šè€…å’ŒJava Webé¢†åŸŸæŠ€æœ¯ä¸“å®¶å°ç»„åˆ¶å®šäº†ç»Ÿä¸€çš„è¡¨è¾¾å¼è¯­è¨€ã€‚JUELæœ€åˆåŒ…å«åœ¨JSP 2.1è§„èŒƒJSR-245ä¸­ï¼Œåæ¥æˆä¸ºJava EE 7çš„ä¸€éƒ¨åˆ†ï¼Œæ”¹åœ¨JSR-341ä¸­å®šä¹‰ã€‚</p><p style=text-align:start>ä¸»è¦çš„å¼€æºå®ç°æœ‰ï¼šOGNL ï¼ŒMVEL ï¼ŒSpELï¼ŒJUELï¼ŒJava Expression Language (JEXL)ï¼ŒJEvalï¼ŒJakarta JXPath ç­‰ã€‚</p><p style=text-align:start>è¿™é‡Œä¸»è¦ä»‹ç»åœ¨å®è·µä¸­ä½¿ç”¨è¾ƒå¤šçš„MVELã€OGNLå’ŒSpELã€‚</p><p style=text-align:start><strong>OGNL(Object Graph Navigation Library)</strong></p><p style=text-align:start>åœ¨Struts 2 çš„æ ‡ç­¾åº“ä¸­éƒ½æ˜¯ä½¿ç”¨OGNLè¡¨è¾¾å¼è®¿é—®ApplicationContextä¸­çš„å¯¹è±¡æ•°æ®ï¼Œç®€å•ç¤ºä¾‹ï¼š</p><pre><code>Foo foo = new Foo();foo.setName(&#34;test&#34;);Map&lt;String, Object&gt; context = new HashMap&lt;String, Object&gt;();context.put(&#34;foo&#34;,foo);String expression = &#34;foo.name == &#39;test&#39;&#34;;try {    Boolean result = (Boolean) Ognl.getValue(expression,context);    System.out.println(result);} catch (OgnlException e) {    e.printStackTrace();}</code></pre><p style=text-align:start><strong>MVEL</strong></p><p style=text-align:start>MVELæœ€åˆä½œä¸ºMike Brockåˆ›å»ºçš„ Valhallaé¡¹ç›®çš„è¡¨è¾¾å¼è®¡ç®—å™¨ï¼ˆexpression evaluatorï¼‰ï¼Œç›¸æ¯”æœ€åˆçš„OGNLã€JEXLå’ŒJUELç­‰é¡¹ç›®ï¼Œè€Œå®ƒå…·æœ‰è¿œè¶…å®ƒä»¬çš„æ€§èƒ½ã€åŠŸèƒ½å’Œæ˜“ç”¨æ€§ - ç‰¹åˆ«æ˜¯é›†æˆæ–¹é¢ã€‚å®ƒä¸ä¼šå°è¯•å¦ä¸€ç§JVMè¯­è¨€ï¼Œè€Œæ˜¯ç€é‡è§£å†³åµŒå…¥å¼è„šæœ¬çš„é—®é¢˜ã€‚</p><p style=text-align:start>MVELä¸»è¦ä½¿ç”¨åœ¨Droolsï¼Œæ˜¯Droolsè§„åˆ™å¼•æ“ä¸å¯åˆ†å‰²çš„ä¸€éƒ¨åˆ†ã€‚</p><p style=text-align:start>MVELè¯­æ³•è¾ƒä¸ºä¸°å¯Œï¼Œä¸ä»…åŒ…å«äº†åŸºæœ¬çš„å±æ€§è¡¨è¾¾å¼ï¼Œå¸ƒå°”è¡¨è¾¾å¼ï¼Œå˜é‡å¤åˆ¶å’Œæ–¹æ³•è°ƒç”¨ï¼Œè¿˜æ”¯æŒå‡½æ•°å®šä¹‰ï¼Œè¯¦æƒ…å‚è§MVEL Language Guide ã€‚</p><p style=text-align:start>MVELåœ¨æ‰§è¡Œè¯­è¨€æ—¶ä¸»è¦æœ‰è§£é‡Šæ¨¡å¼ï¼ˆInterpreted Modeï¼‰å’Œç¼–è¯‘æ¨¡å¼ï¼ˆCompiled Mode ï¼‰ä¸¤ç§ï¼š</p><ul><li>è§£é‡Šæ¨¡å¼ï¼ˆInterpreted Modeï¼‰æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ï¼ŒåŠ¨æ€è§£é‡Šæ‰§è¡Œï¼Œä¸éœ€è¦è´Ÿè½½è¡¨è¾¾å¼å°±å¯ä»¥æ‰§è¡Œç›¸åº”çš„è„šæœ¬ã€‚</li><li>ç¼–è¯‘æ¨¡å¼ï¼ˆCompiled Modeï¼‰éœ€è¦åœ¨ç¼“å­˜ä¸­äº§ç”Ÿä¸€ä¸ªå®Œå…¨è§„èŒƒåŒ–è¡¨è¾¾å¼ä¹‹åå†æ‰§è¡Œã€‚</li></ul><pre><code>//è§£é‡Šæ¨¡å¼Foo foo = new Foo();foo.setName(&#34;test&#34;);Map context = new HashMap();String expression = &#34;foo.name == &#39;test&#39;&#34;;VariableResolverFactory functionFactory = new MapVariableResolverFactory(context);context.put(&#34;foo&#34;,foo);Boolean result = (Boolean) MVEL.eval(expression,functionFactory);System.out.println(result);//ç¼–è¯‘æ¨¡å¼Foo foo = new Foo();foo.setName(&#34;test&#34;);Map context = new HashMap();String expression = &#34;foo.name == &#39;test&#39;&#34;;VariableResolverFactory functionFactory = new MapVariableResolverFactory(context);context.put(&#34;foo&#34;,foo);Serializable compileExpression = MVEL.compileExpression(expression);Boolean result = (Boolean) MVEL.executeExpression(compileExpression, context, functionFactory);</code></pre><p style=text-align:start><strong>SpEL</strong></p><p style=text-align:start>SpEl(Springè¡¨è¾¾å¼è¯­è¨€ï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒæŸ¥è¯¢å’Œæ“ä½œè¿è¡Œæ—¶å¯¹è±¡å¯¼èˆªå›¾åŠŸèƒ½çš„å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ã€‚ å®ƒçš„è¯­æ³•ç±»ä¼¼äºä¼ ç»ŸELï¼Œä½†æä¾›é¢å¤–çš„åŠŸèƒ½ï¼Œæœ€å‡ºè‰²çš„å°±æ˜¯å‡½æ•°è°ƒç”¨å’Œç®€å•å­—ç¬¦ä¸²çš„æ¨¡æ¿å‡½æ•°ã€‚SpELç±»ä¼¼äºStruts2xä¸­ä½¿ç”¨çš„OGNLè¡¨è¾¾å¼è¯­è¨€ï¼Œèƒ½åœ¨è¿è¡Œæ—¶æ„å»ºå¤æ‚è¡¨è¾¾å¼ã€å­˜å–å¯¹è±¡å›¾å±æ€§ã€å¯¹è±¡æ–¹æ³•è°ƒç”¨ç­‰ç­‰ï¼Œå¹¶ä¸”èƒ½ä¸SpringåŠŸèƒ½å®Œç¾æ•´åˆï¼Œå¦‚èƒ½ç”¨æ¥é…ç½®Beanå®šä¹‰ã€‚</p><p style=text-align:start>SpELä¸»è¦æä¾›åŸºæœ¬è¡¨è¾¾å¼ã€ç±»ç›¸å…³è¡¨è¾¾å¼åŠé›†åˆç›¸å…³è¡¨è¾¾å¼ç­‰ï¼Œè¯¦ç»†å‚è§Spring è¡¨è¾¾å¼è¯­è¨€ (SpEL) ã€‚</p><p style=text-align:start>ç±»ä¼¼ä¸OGNLï¼ŒSpELå…·æœ‰expression(è¡¨è¾¾å¼)ï¼ŒParserï¼ˆè§£æå™¨ï¼‰ï¼ŒEvaluationContext(ä¸Šä¸‹æ–‡ï¼‰ç­‰åŸºæœ¬æ¦‚å¿µï¼›ç±»ä¼¼äºMVELï¼ŒSpElä¹Ÿæä¾›äº†è§£é‡Šæ¨¡å¼å’Œç¼–è¯‘æ¨¡å¼ä¸¤ç§è¿è¡Œæ¨¡å¼ã€‚</p><pre><code>//è§£é‡Šå™¨æ¨¡å¼Foo foo = new Foo();foo.setName(&#34;test&#34;);// Turn on:// - auto null reference initialization// - auto collection growingSpelParserConfiguration config = new SpelParserConfiguration(true,true);ExpressionParser parser = new SpelExpressionParser(config);String expressionStr = &#34;#foo.name == &#39;test&#39;&#34;;StandardEvaluationContext context = new StandardEvaluationContext();context.setVariable(&#34;foo&#34;,foo);Expression expression = parser.parseExpression(expressionStr);Boolean result = expression.getValue(context,Boolean.class);//ç¼–è¯‘æ¨¡å¼config = new SpelParserConfiguration(SpelCompilerMode.IMMEDIATE, RunSpel.class.getClassLoader());parser = new SpelExpressionParser(config);context = new StandardEvaluationContext();context.setVariable(&#34;foo&#34;,foo);expression = parser.parseExpression(expressionStr);result = expression.getValue(context,Boolean.class);</code></pre><h1 class=pgc-h-arrow-right>è§„åˆ™å¼•æ“</h1><p style=text-align:start>ä¸€äº›è§„åˆ™å¼•æ“ï¼ˆrule engineï¼‰ï¼šaviatorï¼Œeasy-rulesï¼Œdroolsï¼Œesper, siddhi</p><p style=text-align:start><strong>aviator</strong></p><p style=text-align:start>AviatorScript æ˜¯ä¸€é—¨é«˜æ€§èƒ½ã€è½»é‡çº§å¯„å®¿äº JVM ä¹‹ä¸Šçš„è„šæœ¬è¯­è¨€ã€‚</p><p style=text-align:start>ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ol start=1><li>è§„åˆ™åˆ¤æ–­åŠè§„åˆ™å¼•æ“</li><li>å…¬å¼è®¡ç®—</li><li>åŠ¨æ€è„šæœ¬æ§åˆ¶</li><li>é›†åˆæ•°æ® ELT ç­‰</li></ol><pre><code>public class Test {   public static void main(String[] args) {       String expression = &#34;a+(b-c)&gt;100&#34;;       // ç¼–è¯‘è¡¨è¾¾å¼       Expression compiledExp = AviatorEvaluator.compile(expression);       Map&lt;String, Object&gt; env = new HashMap&lt;&gt;();       env.put(&#34;a&#34;, 100.3);       env.put(&#34;b&#34;, 45);       env.put(&#34;c&#34;, -199.100);       // æ‰§è¡Œè¡¨è¾¾å¼       Boolean result = (Boolean) compiledExp.execute(env);       System.out.println(result);   }}</code></pre><p style=text-align:start><strong>easy-rules</strong></p><p style=text-align:start>Easy Rules is a Java rules engineã€‚</p><p style=text-align:start>ä½¿ç”¨POJOå®šä¹‰è§„åˆ™ï¼š</p><pre><code>@Rule(name = &#34;weather rule&#34;, description = &#34;if it rains then take an umbrella&#34;)public class WeatherRule {    @Condition    public boolean itRains(@Fact(&#34;rain&#34;) boolean rain) {        return rain;    }        @Action    public void takeAnUmbrella() {        System.out.println(&#34;It rains, take an umbrella!&#34;);    }}Rule weatherRule = new RuleBuilder()        .name(&#34;weather rule&#34;)        .description(&#34;if it rains then take an umbrella&#34;)        .when(facts -&gt; facts.get(&#34;rain&#34;).equals(true))        .then(facts -&gt; System.out.println(&#34;It rains, take an umbrella!&#34;))        .build();</code></pre><p style=text-align:start>æ”¯æŒä½¿ç”¨è¡¨è¾¾å¼è¯­è¨€ï¼ˆMVEL/SpELï¼‰æ¥å®šä¹‰è§„åˆ™ï¼š</p><p style=text-align:start>weather-rule.yml example:</p><pre><code>name: &#34;weather rule&#34;description: &#34;if it rains then take an umbrella&#34;condition: &#34;rain == true&#34;actions:  - &#34;System.out.println(\&#34;It rains, take an umbrella!\&#34;);&#34;</code></pre><pre><code>MVELRuleFactory ruleFactory = new MVELRuleFactory(new YamlRuleDefinitionReader());Rule weatherRule = ruleFactory.createRule(new FileReader(&#34;weather-rule.yml&#34;));</code></pre><p style=text-align:start>è§¦å‘è§„åˆ™ï¼š</p><pre><code>public class Test {    public static void main(String[] args) {        // define facts        Facts facts = new Facts();        facts.put(&#34;rain&#34;, true);        // define rules        Rule weatherRule = ...        Rules rules = new Rules();        rules.register(weatherRule);        // fire rules on known facts        RulesEngine rulesEngine = new DefaultRulesEngine();        rulesEngine.fire(rules, facts);    }}</code></pre><p style=text-align:start><strong>drools</strong></p><p style=text-align:start>An open source rule engine, DMN engine and complex event processing (CEP) engine for Java and the JVM Platform.</p><p style=text-align:start>å®šä¹‰è§„åˆ™ï¼š</p><pre><code>import com.lrq.wechatDemo.domain.User   // å¯¼å…¥ç±»dialect  &#34;mvel&#34;rule &#34;age&#34;    // è§„åˆ™åï¼Œå”¯ä¸€    when        $user : User(age&lt;15 || age&gt;60)  //è§„åˆ™çš„æ¡ä»¶éƒ¨åˆ†    then        System.out.println(&#34;å¹´é¾„ä¸ç¬¦åˆè¦æ±‚ï¼&#34;);end</code></pre><p style=text-align:start>å‚è€ƒä¾‹å­ï¼š</p><pre><code>public class TestUser {    private static KieContainer container = null;    private KieSession statefulKieSession = null;    @Test    public void test(){        KieServices kieServices = KieServices.Factory.get();        container = kieServices.getKieClasspathContainer();        statefulKieSession = container.newKieSession(&#34;myAgeSession&#34;);        User user = new User(&#34;duval yang&#34;,12);        statefulKieSession.insert(user);        statefulKieSession.fireAllRules();        statefulKieSession.dispose();    }}</code></pre><p style=text-align:start>droolsæ˜¯æ¯”è¾ƒé‡çš„è§„åˆ™å¼•æ“ï¼Œæœ‰è‡ªå·±çš„çŠ¶æ€å­˜å‚¨ï¼Œè¯¦è§å…¶å®˜æ–¹æ–‡æ¡£ã€‚</p><p style=text-align:start><strong>esper</strong></p><p style=text-align:start>Esper is a component for complex event processing (CEP), streaming SQL and event series analysis, available for Java as Esper, and for .NET as NEsper.</p><p style=text-align:start>ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code>public class Test {    public static void main(String[] args) throws InterruptedException {        EPServiceProvider epService = EPServiceProviderManager.getDefaultProvider();         EPAdministrator admin = epService.getEPAdministrator();         String product = Apple.class.getName();        String epl = &#34;select avg(price) from &#34; + product + &#34;.win:length_batch(3)&#34;;         EPStatement state = admin.createEPL(epl);        state.addListener(new AppleListener());         EPRuntime runtime = epService.getEPRuntime();         Apple apple1 = new Apple();        apple1.setId(1);        apple1.setPrice(5);        runtime.sendEvent(apple1);         Apple apple2 = new Apple();        apple2.setId(2);        apple2.setPrice(2);        runtime.sendEvent(apple2);         Apple apple3 = new Apple();        apple3.setId(3);        apple3.setPrice(5);        runtime.sendEvent(apple3);    }}</code></pre><p style=text-align:start><strong>siddhi</strong></p><p style=text-align:start>Siddhi is a cloud native <em>Streaming</em> and <em>Complex Event Processing</em> engine that understands Streaming SQL queries in order to capture events from diverse data sources, process them, detect complex conditions, and publish output to various endpoints in real time.</p><p style=text-align:start>For example:</p><pre><code>package io.siddhi.sample;import io.siddhi.core.SiddhiAppRuntime;import io.siddhi.core.SiddhiManager;import io.siddhi.core.event.Event;import io.siddhi.core.stream.input.InputHandler;import io.siddhi.core.stream.output.StreamCallback;import io.siddhi.core.util.EventPrinter;/** * The sample demonstrate how to use Siddhi within another Java program. * This sample contains a simple filter query. */public class SimpleFilterSample {    public static void main(String[] args) throws InterruptedException {        // Create Siddhi Manager        SiddhiManager siddhiManager = new SiddhiManager();        //Siddhi Application        String siddhiApp = &#34;&#34; +                &#34;define stream StockStream (symbol string, price float, volume long); &#34; +                &#34;&#34; +                &#34;@info(name = &#39;query1&#39;) &#34; +                &#34;from StockStream[volume &lt; 150] &#34; +                &#34;select symbol, price &#34; +                &#34;insert into OutputStream;&#34;;        //Generate runtime        SiddhiAppRuntime siddhiAppRuntime = siddhiManager.createSiddhiAppRuntime(siddhiApp);        //Adding callback to retrieve output events from stream        siddhiAppRuntime.addCallback(&#34;OutputStream&#34;, new StreamCallback() {            @Override            public void receive(Event[] events) {                EventPrinter.print(events);                //To convert and print event as a map                //EventPrinter.print(toMap(events));            }        });        //Get InputHandler to push events into Siddhi        InputHandler inputHandler = siddhiAppRuntime.getInputHandler(&#34;StockStream&#34;);        //Start processing        siddhiAppRuntime.start();        //Sending events to Siddhi        inputHandler.send(new Object[]{&#34;IBM&#34;, 700f, 100L});        inputHandler.send(new Object[]{&#34;WSO2&#34;, 60.5f, 200L});        inputHandler.send(new Object[]{&#34;GOOG&#34;, 50f, 30L});        inputHandler.send(new Object[]{&#34;IBM&#34;, 76.6f, 400L});        inputHandler.send(new Object[]{&#34;WSO2&#34;, 45.6f, 50L});        Thread.sleep(500);        //Shutdown runtime        siddhiAppRuntime.shutdown();        //Shutdown Siddhi Manager        siddhiManager.shutdown();    }}</code></pre><p style=text-align:start>esperå’Œsiddhiéƒ½æ˜¯streaming processï¼Œæ”¯æŒCEPå’ŒSQLï¼Œè¯¦è§å…¶å®˜æ–¹æ–‡æ¡£ã€‚</p><h1 class=pgc-h-arrow-right><strong>åŠ¨æ€JVMè¯­è¨€</strong></h1><p style=text-align:start><strong>Groovy</strong></p><p style=text-align:start>Groovyé™¤äº†Gradle ä¸Šçš„å¹¿æ³›åº”ç”¨ä¹‹å¤–ï¼Œå¦ä¸€ä¸ªå¤§èŒƒå›´çš„ä½¿ç”¨åº”è¯¥å°±æ˜¯ç»“åˆJavaä½¿ç”¨åŠ¨æ€ä»£ç äº†ã€‚Groovyçš„è¯­æ³•ä¸Javaéå¸¸ç›¸ä¼¼ï¼Œä»¥è‡³äºå¤šæ•°çš„Javaä»£ç ä¹Ÿæ˜¯æ­£ç¡®çš„Groovyä»£ç ã€‚Groovyä»£ç åŠ¨æ€çš„è¢«ç¼–è¯‘å™¨è½¬æ¢æˆJavaå­—èŠ‚ç ã€‚ç”±äºå…¶è¿è¡Œåœ¨JVMä¸Šçš„ç‰¹æ€§ï¼ŒGroovyå¯ä»¥ä½¿ç”¨å…¶ä»–Javaè¯­è¨€ç¼–å†™çš„åº“ã€‚</p><p style=text-align:start>Groovyå¯ä»¥çœ‹ä½œç»™Javaé™æ€ä¸–ç•Œè¡¥å……åŠ¨æ€èƒ½åŠ›çš„è¯­è¨€ï¼ŒåŒæ—¶Groovyå·²ç»å®ç°äº†javaä¸å…·å¤‡çš„è¯­è¨€ç‰¹æ€§ï¼š</p><ul><li>å‡½æ•°å­—é¢å€¼ï¼›</li><li>å¯¹é›†åˆçš„ä¸€ç­‰æ”¯æŒï¼›</li><li>å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ç­‰æ”¯æŒï¼›</li><li>å¯¹xmlçš„ä¸€ç­‰æ”¯æŒï¼›</li></ul><p style=text-align:start>Groovyä½œä¸ºåŸºäºJVMçš„è¯­è¨€ï¼Œä¸è¡¨è¾¾å¼è¯­è¨€å­˜åœ¨è¯­è¨€çº§çš„ä¸åŒï¼Œå› æ­¤åœ¨è¯­æ³•ä¸Šæ¯”è¡¨è¾¾è¿˜æ˜¯è¯­è¨€æ›´çµæ´»ã€‚Javaåœ¨è°ƒç”¨Groovyæ—¶ï¼Œéƒ½éœ€è¦å°†Groovyä»£ç ç¼–è¯‘æˆClassæ–‡ä»¶ã€‚</p><p style=text-align:start>Groovy å¯ä»¥é‡‡ç”¨GroovyClassLoaderã€GroovyShellã€GroovyScriptEngineå’ŒJSR223 ç­‰æ–¹å¼ä¸Javaè¯­è¨€é›†æˆã€‚</p><p style=text-align:start>ä¸€ä¸ªä½¿ç”¨GroovyClassLoaderåŠ¨æ€å¯¹jsonå¯¹è±¡è¿›è¡Œfilterçš„ä¾‹å­ï¼š</p><pre><code>public class GroovyFilter implements Filter {    private static String template =  &#34;&#34; +            &#34;package com.alarm.eagle.filter;&#34; +            &#34;import com.fasterxml.jackson.databind.node.ObjectNode;&#34; +            &#34;def match(ObjectNode o){[exp]}&#34;;    private static String method = &#34;match&#34;;    private String filterExp;    private transient GroovyObject filterObj;    public GroovyFilter(String filterExp) throws Exception {        ClassLoader parent = Thread.currentThread().getContextClassLoader();        GroovyClassLoader classLoader = new GroovyClassLoader(parent);        Class clazz = classLoader.parseClass(template.replace(&#34;[exp]&#34;, filterExp));        filterObj = (GroovyObject)clazz.newInstance();    }    public boolean filter(ObjectNode objectNode) {        return (boolean)filterObj.invokeMethod(method, objectNode);    }}</code></pre><p style=text-align:start>Javaæ¯æ¬¡è°ƒç”¨Groovyä»£ç éƒ½ä¼šå°†Groovyç¼–è¯‘æˆClassæ–‡ä»¶ï¼Œå› æ­¤åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ä¼šå‡ºç°JVMçº§åˆ«çš„é—®é¢˜ã€‚å¦‚ä½¿ç”¨GroovyShellçš„parseæ–¹æ³•å¯¼è‡´permåŒºçˆ†æ»¡çš„é—®é¢˜ï¼Œä½¿ç”¨GroovyClassLoaderåŠ è½½æœºåˆ¶å¯¼è‡´é¢‘ç¹gcé—®é¢˜å’ŒCodeCacheç”¨æ»¡ï¼Œå¯¼è‡´JITç¦ç”¨é—®é¢˜ç­‰ï¼Œç›¸å…³é—®é¢˜å¯ä»¥å‚è€ƒGroovyä¸Javaé›†æˆå¸¸è§çš„å‘ ã€‚</p><hr><p>å…³æ³¨æˆ‘ï¼Œç§ä¿¡å›å¤ã€<strong>èµ„æ–™</strong>ã€‘å³å¯é¢†å–è§†é¢‘ä¸­javaç›¸å…³èµ„æ–™ä»¥åŠä¸€ä»½227é¡µæœ€æ–°çš„batå¤§å‚é¢è¯•å®å…¸</p><h1 class=pgc-h-arrow-right>æœ€å</h1><p style=text-align:start>æ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµï¼Œå–œæ¬¢æ–‡ç« è®°å¾—å…³æ³¨æˆ‘ç‚¹ä¸ªèµå“Ÿï¼Œæ„Ÿè°¢æ”¯æŒï¼</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æ€»ç»“','å‡ºæ¥','Java'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>