<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules | æå®¢å¿«è¨Š</title><meta property="og:title" content="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/489b8a2776e84f01bcea4276f80bdaf1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><meta property="article:published_time" content="2020-11-14T20:59:53+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:53+08:00"><meta name=Keywords content><meta name=description content="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/42060af5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><p>1. Easy Rules æ¦‚è¿°</p><p>Easy Rulesæ˜¯ä¸€ä¸ªJavaè§„åˆ™å¼•æ“ï¼Œçµæ„Ÿæ¥è‡ªä¸€ç¯‡åä¸ºã€ŠShould I use a Rules Engine?ã€‹çš„æ–‡ç« </p><blockquote><p>è§„åˆ™å¼•æ“å°±æ˜¯æä¾›ä¸€ç§å¯é€‰çš„è®¡ç®—æ¨¡å‹ã€‚ä¸é€šå¸¸çš„å‘½ä»¤å¼æ¨¡å‹ï¼ˆç”±å¸¦æœ‰æ¡ä»¶å’Œå¾ªç¯çš„å‘½ä»¤ä¾æ¬¡ç»„æˆï¼‰ä¸åŒï¼Œè§„åˆ™å¼•æ“åŸºäºç”Ÿäº§è§„åˆ™ç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ç»„ç”Ÿäº§è§„åˆ™ï¼Œæ¯æ¡è§„åˆ™éƒ½æœ‰ä¸€ä¸ªæ¡ä»¶ï¼ˆconditionï¼‰å’Œä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰â€”â€”â€”â€” ç®€å•çš„è¯´ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ä¸€ç»„if-thenè¯­å¥ã€‚</p><p>ç²¾å¦™ä¹‹å¤„åœ¨äºè§„åˆ™å¯ä»¥æŒ‰ä»»ä½•é¡ºåºç¼–å†™ï¼Œå¼•æ“ä¼šå†³å®šä½•æ—¶ä½¿ç”¨å¯¹é¡ºåºæœ‰æ„ä¹‰çš„ä»»ä½•æ–¹å¼æ¥è®¡ç®—å®ƒä»¬ã€‚è€ƒè™‘å®ƒçš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯ç³»ç»Ÿè¿è¡Œæ‰€æœ‰è§„åˆ™ï¼Œé€‰æ‹©æ¡ä»¶æˆç«‹çš„è§„åˆ™ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¾ˆå¤šé—®é¢˜éƒ½å¾ˆè‡ªç„¶åœ°ç¬¦åˆè¿™ä¸ªæ¨¡å‹ï¼š</p><p>if car.owner.hasCellPhone then premium += 100; if car.model.theftRating > 4 then premium += 200; if car.owner.livesInDodgyArea && car.model.theftRating > 2 then premium += 300;</p><p>è§„åˆ™å¼•æ“æ˜¯ä¸€ç§å·¥å…·ï¼Œå®ƒä½¿å¾—è¿™ç§è®¡ç®—æ¨¡å‹ç¼–ç¨‹å˜å¾—æ›´å®¹æ˜“ã€‚å®ƒå¯èƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œæˆ–è€…ä¸€ä¸ªå¯ä»¥åœ¨ä¼ ç»Ÿå¹³å°ä¸Šå·¥ä½œçš„æ¡†æ¶ã€‚ç”Ÿäº§è§„åˆ™è®¡ç®—æ¨¡å‹æœ€é€‚åˆä»…è§£å†³ä¸€éƒ¨åˆ†è®¡ç®—é—®é¢˜ï¼Œå› æ­¤è§„åˆ™å¼•æ“å¯ä»¥æ›´å¥½åœ°åµŒå…¥åˆ°è¾ƒå¤§çš„ç³»ç»Ÿä¸­ã€‚</p><p>ä½ å¯ä»¥è‡ªå·±æ„å»ºä¸€ä¸ªç®€å•çš„è§„åˆ™å¼•æ“ã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åˆ›å»ºä¸€ç»„å¸¦æœ‰æ¡ä»¶å’ŒåŠ¨ä½œçš„å¯¹è±¡ï¼Œå°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œç„¶åéå†å®ƒä»¬ä»¥è¯„ä¼°æ¡ä»¶å¹¶æ‰§è¡Œè¿™äº›åŠ¨ä½œã€‚</p></blockquote><p>Easy Ruleså®ƒæä¾›RuleæŠ½è±¡ä»¥åˆ›å»ºå…·æœ‰æ¡ä»¶å’ŒåŠ¨ä½œçš„è§„åˆ™ï¼Œå¹¶æä¾›RuleEngine APIï¼Œè¯¥APIé€šè¿‡ä¸€ç»„è§„åˆ™è¿è¡Œä»¥è¯„ä¼°æ¡ä»¶å¹¶æ‰§è¡ŒåŠ¨ä½œã€‚</p><p>Easy Rulesç®€å•æ˜“ç”¨ï¼Œåªéœ€ä¸¤æ­¥ï¼š</p><p>é¦–å…ˆï¼Œå®šä¹‰è§„åˆ™ï¼Œæ–¹å¼æœ‰å¾ˆå¤šç§</p><p>æ–¹å¼ä¸€ï¼šæ³¨è§£</p><pre><code>@Rule(name = "weather rule", description = "if it rains then take an umbrella")public class WeatherRule {    @Condition    public boolean itRains(@Fact("rain") boolean rain) {        return rain;    }        @Action    public void takeAnUmbrella() {        System.out.println("It rains, take an umbrella!");    }}</code></pre><p>æ–¹å¼äºŒï¼šé“¾å¼ç¼–ç¨‹</p><pre><code>Rule weatherRule = new RuleBuilder()        .name("weather rule")        .description("if it rains then take an umbrella")        .when(facts -&gt; facts.get("rain").equals(true))        .then(facts -&gt; System.out.println("It rains, take an umbrella!"))        .build();</code></pre><p>æ–¹å¼ä¸‰ï¼šè¡¨è¾¾å¼</p><pre><code>Rule weatherRule = new MVELRule()        .name("weather rule")        .description("if it rains then take an umbrella")        .when("rain == true")        .then("System.out.println(\"It rains, take an umbrella!\");");</code></pre><p>æ–¹å¼å››ï¼šymlé…ç½®æ–‡ä»¶</p><p>ä¾‹å¦‚ï¼šweather-rule.yml</p><pre><code>name: "weather rule"description: "if it rains then take an umbrella"condition: "rain == true"actions:  - "System.out.println(\"It rains, take an umbrella!\");"</code></pre><pre><code>MVELRuleFactory ruleFactory = new MVELRuleFactory(new YamlRuleDefinitionReader());Rule weatherRule = ruleFactory.createRule(new FileReader("weather-rule.yml"));</code></pre><p>æ¥ä¸‹æ¥ï¼Œåº”ç”¨è§„åˆ™</p><pre><code>public class Test {    public static void main(String[] args) {        // define facts        Facts facts = new Facts();        facts.put("rain", true);        // define rules        Rule weatherRule = ...        Rules rules = new Rules();        rules.register(weatherRule);        // fire rules on known facts        RulesEngine rulesEngine = new DefaultRulesEngine();        rulesEngine.fire(rules, facts);    }}</code></pre><p><strong>å…¥é—¨æ¡ˆä¾‹ï¼šHello Easy Rules</strong></p><pre><code>&lt;dependency&gt;    &lt;groupId&gt;org.jeasy&lt;/groupId&gt;    &lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;    &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>é€šè¿‡éª¨æ¶åˆ›å»ºmavené¡¹ç›®ï¼š</p><pre><code>mvn archetype:generate \    -DarchetypeGroupId=org.jeasy \    -DarchetypeArtifactId=easy-rules-archetype \    -DarchetypeVersion=4.0.0</code></pre><p>é»˜è®¤ç»™æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªHelloWorldRuleè§„åˆ™ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>package com.cjs.example.rules;import org.jeasy.rules.annotation.Action;import org.jeasy.rules.annotation.Condition;import org.jeasy.rules.annotation.Rule;@Rule(name = "Hello World rule", description = "Always say hello world")public class HelloWorldRule {    @Condition    public boolean when() {        return true;    }    @Action    public void then() throws Exception {        System.out.println("hello world");    }}</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/489b8a2776e84f01bcea4276f80bdaf1><p class=pgc-img-caption></p></div><p>2. è§„åˆ™å®šä¹‰</p><p>2.1. å®šä¹‰è§„åˆ™</p><p>å¤§å¤šæ•°ä¸šåŠ¡è§„åˆ™å¯ä»¥ç”¨ä»¥ä¸‹å®šä¹‰è¡¨ç¤ºï¼š</p><ul><li>Name : ä¸€ä¸ªå‘½åç©ºé—´ä¸‹çš„å”¯ä¸€çš„è§„åˆ™åç§°</li><li>Description : è§„åˆ™çš„ç®€è¦æè¿°</li><li>Priority : ç›¸å¯¹äºå…¶ä»–è§„åˆ™çš„ä¼˜å…ˆçº§</li><li>Facts : äº‹å®ï¼Œå¯ç«‹å³ä¸ºè¦å¤„ç†çš„æ•°æ®</li><li>Conditions : ä¸ºäº†åº”ç”¨è§„åˆ™è€Œå¿…é¡»æ»¡è¶³çš„ä¸€ç»„æ¡ä»¶</li><li>Actions : å½“æ¡ä»¶æ»¡è¶³æ—¶æ‰§è¡Œçš„ä¸€ç»„åŠ¨ä½œ</li></ul><p>Easy Rulesä¸ºæ¯ä¸ªå…³é”®ç‚¹æä¾›äº†ä¸€ä¸ªæŠ½è±¡æ¥å®šä¹‰ä¸šåŠ¡è§„åˆ™ã€‚</p><p>åœ¨Easy Rulesä¸­ï¼ŒRuleæ¥å£ä»£è¡¨è§„åˆ™</p><pre><code>public interface Rule {    /**    * This method encapsulates the rule's conditions.    * @return true if the rule should be applied given the provided facts, false otherwise    */    boolean evaluate(Facts facts);    /**    * This method encapsulates the rule's actions.    * @throws Exception if an error occurs during actions performing    */    void execute(Facts facts) throws Exception;    //Getters and setters for rule name, description and priority omitted.}</code></pre><p>evaluateæ–¹æ³•å°è£…äº†å¿…é¡»è®¡ç®—ç»“æœä¸ºTRUEæ‰èƒ½è§¦å‘è§„åˆ™çš„æ¡ä»¶ã€‚executeæ–¹æ³•å°è£…äº†åœ¨æ»¡è¶³è§„åˆ™æ¡ä»¶æ—¶åº”è¯¥æ‰§è¡Œçš„åŠ¨ä½œã€‚æ¡ä»¶å’Œæ“ä½œç”±Conditionå’ŒActionæ¥å£è¡¨ç¤ºã€‚</p><p>å®šä¹‰è§„åˆ™æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>é€šè¿‡åœ¨POJOç±»ä¸Šæ·»åŠ æ³¨è§£</li><li>é€šè¿‡RuleBuilder APIç¼–ç¨‹</li></ul><p>å¯ä»¥åœ¨ä¸€ä¸ªPOJOç±»ä¸Šæ·»åŠ @Ruleæ³¨è§£ï¼Œä¾‹å¦‚ï¼š</p><pre><code>@Rule(name = "my rule", description = "my rule description", priority = 1)public class MyRule {    @Condition    public boolean when(@Fact("fact") fact) {        //my rule conditions        return true;    }    @Action(order = 1)    public void then(Facts facts) throws Exception {        //my actions    }    @Action(order = 2)    public void finally() throws Exception {        //my final actions    }}</code></pre><p>@Conditionæ³¨è§£æŒ‡å®šè§„åˆ™æ¡ä»¶@Factæ³¨è§£æŒ‡å®šå‚æ•°@Actionæ³¨è§£æŒ‡å®šè§„åˆ™æ‰§è¡Œçš„åŠ¨ä½œ</p><p>RuleBuilderæ”¯æŒé“¾å¼é£æ ¼å®šä¹‰è§„åˆ™ï¼Œä¾‹å¦‚ï¼š</p><pre><code>Rule rule = new RuleBuilder()                .name("myRule")                .description("myRuleDescription")                .priority(3)                .when(condition)                .then(action1)                .then(action2)                .build();</code></pre><p>ç»„åˆè§„åˆ™</p><p>CompositeRuleç”±ä¸€ç»„è§„åˆ™ç»„æˆã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹åœ°ç»„åˆè®¾è®¡æ¨¡å¼çš„å®ç°ã€‚</p><p>ç»„åˆè§„åˆ™æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå› ä¸ºå¯ä»¥ä»¥ä¸åŒæ–¹å¼è§¦å‘ç»„åˆè§„åˆ™ã€‚</p><p>Easy Rulesè‡ªå¸¦ä¸‰ç§CompositeRuleå®ç°ï¼š</p><ul><li>UnitRuleGroup : è¦ä¹ˆåº”ç”¨æ‰€æœ‰è§„åˆ™ï¼Œè¦ä¹ˆä¸åº”ç”¨ä»»ä½•è§„åˆ™ï¼ˆANDé€»è¾‘ï¼‰</li><li>ActivationRuleGroup : å®ƒè§¦å‘ç¬¬ä¸€ä¸ªé€‚ç”¨è§„åˆ™ï¼Œå¹¶å¿½ç•¥ç»„ä¸­çš„å…¶ä»–è§„åˆ™ï¼ˆXORé€»è¾‘ï¼‰</li><li>ConditionalRuleGroup : å¦‚æœå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„è§„åˆ™è®¡ç®—ç»“æœä¸ºtrueï¼Œåˆ™è§¦å‘å…¶ä½™è§„åˆ™</li></ul><p>å¤åˆè§„åˆ™å¯ä»¥ä»åŸºæœ¬è§„åˆ™åˆ›å»ºå¹¶æ³¨å†Œä¸ºå¸¸è§„è§„åˆ™ï¼š</p><pre><code>//Create a composite rule from two primitive rulesUnitRuleGroup myUnitRuleGroup = new UnitRuleGroup("myUnitRuleGroup", "unit of myRule1 and myRule2");myUnitRuleGroup.addRule(myRule1);myUnitRuleGroup.addRule(myRule2);//Register the composite rule as a regular ruleRules rules = new Rules();rules.register(myUnitRuleGroup);RulesEngine rulesEngine = new DefaultRulesEngine();rulesEngine.fire(rules, someFacts);</code></pre><p>æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¼˜å…ˆçº§ã€‚å®ƒä»£è¡¨è§¦å‘æ³¨å†Œè§„åˆ™çš„é»˜è®¤é¡ºåºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¾ƒä½çš„å€¼è¡¨ç¤ºè¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚å¯ä»¥é‡å†™compareToæ–¹æ³•ä»¥æä¾›è‡ªå®šä¹‰ä¼˜å…ˆçº§ç­–ç•¥ã€‚</p><p>2.2. å®šä¹‰äº‹å®</p><p>åœ¨Easy Rulesä¸­ï¼ŒFact APIä»£è¡¨äº‹å®</p><pre><code>public class Fact&lt;T&gt; {     private final String name;     private final T value;}</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bd381996b2b84fd5926d42f98eea093c><p class=pgc-img-caption></p></div><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code>Fact&lt;String&gt; fact = new Fact("foo", "bar");Facts facts = new Facts();facts.add(fact);</code></pre><p>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ç”¨è¿™æ ·ç®€å†™å½¢å¼</p><pre><code>Facts facts = new Facts();facts.put("foo", "bar");</code></pre><p>ç”¨@Factæ³¨è§£å¯ä»¥å°†Factsæ³¨å…¥åˆ°conditionå’Œactionæ–¹æ³•ä¸­</p><pre><code>@Ruleclass WeatherRule {    @Condition    public boolean itRains(@Fact("rain") boolean rain) {        return rain;    }    @Action    public void takeAnUmbrella(Facts facts) {        System.out.println("It rains, take an umbrella!");        // can add/remove/modify facts    }}</code></pre><p>2.3. å®šä¹‰è§„åˆ™å¼•æ“</p><p>Easy Rulesæä¾›ä¸¤ç§RulesEngineæ¥å£å®ç°ï¼š</p><ul><li>DefaultRulesEngine : æ ¹æ®è§„åˆ™çš„è‡ªç„¶é¡ºåºåº”ç”¨è§„åˆ™</li><li>InferenceRulesEngine : æŒç»­å¯¹å·²çŸ¥äº‹å®åº”ç”¨è§„åˆ™ï¼Œç›´åˆ°ä¸å†é€‚ç”¨ä»»ä½•è§„åˆ™ä¸ºæ­¢</li></ul><p>åˆ›å»ºè§„åˆ™å¼•æ“ï¼š</p><pre><code>RulesEngine rulesEngine = new DefaultRulesEngine();// orRulesEngine rulesEngine = new InferenceRulesEngine();</code></pre><p>ç„¶åï¼Œæ³¨å†Œè§„åˆ™</p><pre><code>rulesEngine.fire(rules, facts);</code></pre><p>è§„åˆ™å¼•æ“æœ‰ä¸€äº›å¯é…ç½®çš„å‚æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/816642eed04041e1b8e6e53db3e64c93><p class=pgc-img-caption></p></div><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code>RulesEngineParameters parameters = new RulesEngineParameters()    .rulePriorityThreshold(10)    .skipOnFirstAppliedRule(true)    .skipOnFirstFailedRule(true)    .skipOnFirstNonTriggeredRule(true);RulesEngine rulesEngine = new DefaultRulesEngine(parameters);</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8e0c6ef2ef5345c1857573c5fa605e6d><p class=pgc-img-caption></p></div><p>2.4. å®šä¹‰è§„åˆ™ç›‘å¬å™¨</p><p>é€šè¿‡å®ç°RuleListeneræ¥å£</p><pre><code>public interface RuleListener {    /**     * Triggered before the evaluation of a rule.     *     * @param rule being evaluated     * @param facts known before evaluating the rule     * @return true if the rule should be evaluated, false otherwise     */    default boolean beforeEvaluate(Rule rule, Facts facts) {        return true;    }    /**     * Triggered after the evaluation of a rule.     *     * @param rule that has been evaluated     * @param facts known after evaluating the rule     * @param evaluationResult true if the rule evaluated to true, false otherwise     */    default void afterEvaluate(Rule rule, Facts facts, boolean evaluationResult) { }    /**     * Triggered on condition evaluation error due to any runtime exception.     *     * @param rule that has been evaluated     * @param facts known while evaluating the rule     * @param exception that happened while attempting to evaluate the condition.     */    default void onEvaluationError(Rule rule, Facts facts, Exception exception) { }    /**     * Triggered before the execution of a rule.     *     * @param rule the current rule     * @param facts known facts before executing the rule     */    default void beforeExecute(Rule rule, Facts facts) { }    /**     * Triggered after a rule has been executed successfully.     *     * @param rule the current rule     * @param facts known facts after executing the rule     */    default void onSuccess(Rule rule, Facts facts) { }    /**     * Triggered after a rule has failed.     *     * @param rule the current rule     * @param facts known facts after executing the rule     * @param exception the exception thrown when attempting to execute the rule     */    default void onFailure(Rule rule, Facts facts, Exception exception) { }}</code></pre><p>3. ç¤ºä¾‹</p><pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;com.cjs.example&lt;/groupId&gt;    &lt;artifactId&gt;easy-rules-quickstart&lt;/artifactId&gt;    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;    &lt;packaging&gt;jar&lt;/packaging&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-support&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-mvel&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;            &lt;version&gt;1.7.30&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/project&gt;</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/078d31def54640f39ea45002a3c16c31><p class=pgc-img-caption></p></div><p>4. æ‰©å±•</p><p>è§„åˆ™æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚y=f(x1,x2,..,xn)</p><p>è§„åˆ™å¼•æ“å°±æ˜¯ä¸ºäº†è§£å†³ä¸šåŠ¡ä»£ç å’Œä¸šåŠ¡è§„åˆ™åˆ†ç¦»çš„å¼•æ“ï¼Œæ˜¯ä¸€ç§åµŒå…¥åœ¨åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶ï¼Œå®ç°äº†å°†ä¸šåŠ¡å†³ç­–ä»åº”ç”¨ç¨‹åºä»£ç ä¸­åˆ†ç¦»ã€‚</p><p>è¿˜æœ‰ä¸€ç§å¸¸è§çš„æ–¹å¼æ˜¯Java+Groovyæ¥å®ç°ï¼ŒJavaå†…åµŒGroovyè„šæœ¬å¼•æ“è¿›è¡Œä¸šåŠ¡è§„åˆ™å‰¥ç¦»ã€‚</p><p><strong>ç¼–è¾‘ä¸æ˜“ï¼Œå¸Œæœ›çœ‹åˆ°çš„å°ä¼™ä¼´å¤šå¤šè½¬å‘ï¼Œæ”¶è—ï¼Œç»™å°ç¼–ä¸€ä¸ª å…³æ³¨ï¼æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œä¸‹é¢å°ç¼–ç»™å¤§å®¶å‡†å¤‡äº†ä¸€ä»½ï¼ˆæ·˜å®1998ä¹°çš„é©¬å£«å…µå¤§ä½¬çš„è§†é¢‘ï¼Œé¢è¯•èµ„æ–™æŠ€æœ¯æ–‡æ¡£ï¼‰å…è´¹åˆ†äº«ï¼š<br>https://docs.qq.com/doc/DR2J4V01FZERaam91ï¼ˆç²˜è´´ä¹‹åå»æµè§ˆå™¨æ‰“å¼€ï¼‰å…è´¹é€ç»™å¤§å®¶ï¼ä¹Ÿå¯ä»¥ç§ä¿¡[ é«˜å¹¶å‘ ]å…è´¹è·å¾—ï¼</strong></p><p><br></p><div class=pgc-img><img alt="ã€Œ javaæ¶æ„å¸ˆä¹‹è·¯å¿…å¤‡ ã€ Javaè§„åˆ™å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fcf16fbd247e4e63bc9988ed42c3c656><p class=pgc-img-caption></p></div><p>å¦‚æœä½ æƒ³æˆä¸ºä¸€åä¼˜ç§€çš„ Java æ¶æ„å¸ˆï¼Œé‚£ä¹ˆè¿™ä»½æ‰‹å†Œä¸Šçš„å†…å®¹å‡ ä¹æ˜¯å¿…é¡»è¦æŒæ¡çš„ã€‚å¦‚æœä½ æƒ³è·å–è¿™ä»½å­¦ä¹ èµ„æ–™çš„å°ä¼™ä¼´ï¼Œå…³æ³¨å°ç¼–ï¼Œè½¬å‘ï¼Œæ”¶è—æ–‡ç« ï¼Œç§ä¿¡[é«˜å¹¶å‘]å³å¯è·å¾—è·å–æ–¹å¼ï¼</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'java','æ¶æ„','å¸ˆä¹‹è·¯'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>