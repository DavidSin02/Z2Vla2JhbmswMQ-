<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>计算机存储管理的功能以及管理方案 | 极客快訊</title><meta property="og:title" content="计算机存储管理的功能以及管理方案 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/30f8c9d9-0da0-4d9f-bb7f-c673977d2b6c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/44d8878.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/44d8878.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/44d8878.html><meta property="article:published_time" content="2020-10-29T21:05:38+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:38+08:00"><meta name=Keywords content><meta name=description content="计算机存储管理的功能以及管理方案"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/44d8878.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>计算机存储管理的功能以及管理方案</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>存储器管理</strong>的对象是<strong>主存储器（主存、内存</strong>）。存储器是计算机系统中的关键性资源，是存放各种信息的主要场所。如何对存储器实施有效的管理，不仅直接影响到存储器的利用率，而且还对系统性能有重大的影响。</p><p>存储管理的主要功能包括<strong><u>分配和回收主存空间</u>、<u>提高主存的利用率</u>、<u>扩充主存</u>、<u>对主存信息实现有效保护</u>。</strong></p><p><strong>一. 基本概念</strong></p><p><strong>1、存储器的结构</strong></p><p>存储器的功能是保存数据，存储器的发展方向是高速度、大容量和小体积。</p><p>一般存储器的结构有“寄存器-主存-外存”结构和“寄存器-缓存-主存-外存”结构。存储组织的功能是在存储技术和CPU寻址技术许可的范围内组织合理的存储结构，使得各层次的存储器都处于均衡的繁忙状态。</p><p>（1）<strong>虚拟地址</strong>：对程序员来说，数据的存放地址是由符号决定的，故称为符号名地址，或者名地址。它是从0号单元开始编址，并顺序分配所有的符号名所对应的地址单元。由于符号名地址不是主存中的真实地址，因此也称为相对地址、程序地址、逻辑地址或称虚拟地址。</p><p>（2）<strong>地址空间</strong>：程序中由符号名组成的空间称为地址空间。源程序经过汇编或编译后形成二进制的目标程序。在目标程序中，程序指令和数据的位置按照字或字节单位根据它们的相对顺序来确定，称为相对地址。相对地址一般从0号地址开始依次编号。相对地址也称为逻辑地址或虚地址，把程序中由相对组成的空间叫做逻辑地址空间。相对地址空间通过地址再经过定位机构转换到绝对地址空间，绝对地址空间也叫做物理地址空间。</p><p><strong>2、地址重定位</strong></p><p>将逻辑地址转换成主存物理地址的过程称为<strong>地址重定位</strong>。</p><p>在可执行文件装入时，需要解决可执行文件中地址（指令和数据）与主存地址的对应关系，由操作系统中的装入程序和地址成定位机构来完成。地址重定位机构来完成。地址重定位分为静态地址重定位和动态地址重定位。</p><p>① <strong>静态地址重定位</strong>：静态地址重定位是指在程序装入主存时已经完成了逻辑地址到物理地址的变换，在程序执行期间不会再发生变化。静态地址重定位的优点是无须硬件地址变换机构的支持，它只要求程序本身是可重定位的，只对那些要修改的地址部分具有某种标识，由专门设计的程序来完成。在早期的操作系统中，多数都采用这种方法。</p><p>静态重定位的缺点是必须给作业分配一个连续的存储区域，在作业的执行期间不能扩充存储空间，也不能在主存中移动，多个作业难以共享主存中的同一程序副本和数据。</p><p>② <strong>动态地址重定位</strong>：动态地址重定位是指在程序运行期间完成逻辑地址到物理地址的变换。其实现机制要依赖硬件地址变换机构，如基地址寄存器（BR）。动态地址重定位的优点是在程序执行期间可以换入和换出主存；程序可以在主存中移动，把主存中的碎片集中起来，可以充分利用空间；不必给程序分配连续的主存空间，可以较好地利用较小的主存块，可以实现共享。</p><p><strong>二. 存储管理方案</strong></p><p>存储管理的主要目的是解决多个用户使用主存地问题，主要包括<strong><u>分区存储管理</u>、<u>分页存储管理</u>、<u>分段存储器管理</u>、<u>段页式存储管理以及虚拟存储管理</u>。</strong></p><p>分区存储管理是早期的存储管理方案，其基本思想是把主存的用户区划分成若干个区域，每个区域分配给一个用户作业使用，并限定它们只能在自己的区域中运行，这种主存分配方案就是分区存储管理方式。按分区的划分方式不同，可分为固定分区、可变分区和可重定向分区。</p><p>（1）<strong>固定分区</strong>：固定分区是一种静态分区方式，在系统生成时已将主存划分为若干个分区，每个分区的大小可以不相等。操作系统通过主存分配情况表管理主存。这种方法的突出问题是已分配区中存在未用空间，原因是程序或作业的大小不可能刚好等于分区的大小，故造成了空间的浪费。通常将已分配分区内未使用空间叫做零头或内碎片。</p><p>（2）<strong>可变分区</strong>：可变分区是一种动态分区方式，存储空间的划分是在作业装入是进行的，故分区的个数可变，分区的大小刚好等于作业的大小。可变分区分配需要两种管理表格：已分配表，记录已分配分区的情况；未分配表，记录未分配区的情况。请求和释放分区的主要由如下4种算法：</p><p>①<strong>最佳适应算法</strong>：假设系统中有n个空白区（空闲区或自由区），每当用户申请一个空间时，将从这n个空白区中找到一个最接近用户需求的分区。这种算法能保留较大的空白区，但缺点是查找合适空白区的代价大，且空白区不可能刚好等于用户要求的区，所以必然要将一个分区一分为二，随着系统不断地分配和释放空间，可能会产生无法再继续分配的小分区（碎片）。</p><p>②<strong>最差适应算法</strong>：系统总是将用户作业装入最大的空白分区。这种算法将一个最大的分区一分为二，所以剩下的空白区通常也大，不容易产生碎片。</p><p>③<strong>首次适应算法</strong>：每当用户作业申请一个空间时，系统总是从主存的低地址开始选择一个能装入作业的空白区。当用户释放空间时，此算法更容易实现相邻的空白区合并。</p><p>④<strong>循环首次适应算法</strong>：与首次适应算法的不同之处是，每次分配都是从刚分配的空白区开始寻找一个能满足用户要求的空白区。</p><p>引入可变分区后虽然主存分配更灵活也提高了主存利用率，但是由于系统在不断地分配和回收中，必定会出现一些不连续的小的空闲区，尽管这些小的空闲区的总和超过某一个作业要求的空间，但是由于不连续而无法分配。产生了未分配区的无用空间，通常称之为碎片。解决碎片的方法是拼接（或称紧凑），即向一个方向（例如向低地址端）移动已分配的作业，使那些零散的小空闲区连成一片。</p><p><strong>分区存储管理</strong></p><p>例：某计算机系统的内存大小为128K，采用可变分区的分配方式进行内存分配，当前系统的内存使用情况如下图所示，现有作业4想要申请9K的内存，不同的存储分配算法各自是怎么样分配的呢？</p><p><br></p><div class=pgc-img><img alt=计算机存储管理的功能以及管理方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/30f8c9d9-0da0-4d9f-bb7f-c673977d2b6c><p class=pgc-img-caption></p></div><p><strong>（3）可重定位分区</strong>：可重定位分区时解决碎片问题简单而又行之有效的方法。其基本思想是：移动所有已分配好的分区，使之成为连续区域。如同队列有一个队员出列，指挥员叫大家“靠拢”一样。分区“靠拢”的时机是用户请求空间得不到满足时或某个作业执行完毕时。由于靠拢是需要代价的，所以通常是在用户请求空间得不到满足时进行。需要注意的是，当进行分区“靠拢”时会导致地址发生变化，所以有地址重定位问题。</p><p>分区保护的目的是防止未经核准的用户访问分区，常用如下两种方式：</p><p><strong>（1）上界/下界寄存器保护</strong>：上界寄存器中存放的是作业的装入地址，下界寄存器装入的是作业的结束地址，形成的物理地址必须满足如下条件：</p><p>上界寄存器≦物理地址≦下界寄存器</p><p><strong>（2）基址/限长寄存器保护</strong>：基址寄存器中存放的是作业的装入地址，限长寄存器装入的是作业的长度，形成的物理地址必须满足如下条件：</p><p>基址寄存器≦物理地址&lt;基址寄存器+限长寄存器</p><p><strong>三. 分页存储管理</strong></p><p>尽管分区管理方案是解决多道程序共享主存的可行方案，但是此方案的主要问题是用户程序必须装入连续的地址空间中，若没有满足用户要求的连续空间时，则需要进行分区靠拢操作，这就要耗费系统时间。为此引入了分页存储管理方案。</p><p><strong>1、分页存储管理</strong></p><p><strong>（1）分页管理</strong></p><p>将一个进程的地址空间划分成为若干个大小相等的区域，称为页。相应的，将主存空间划分成与页相同大小的若干个物理块，称为块或页框。为进程分配主存时，可将进程中若干页分别装入多个不相邻接的块中。</p><p><strong>（2）地址结构</strong></p><p>分页系统的地址结构由两部分组成：前一部分为页号P；后一部分为偏移量W，即页内地址。下图中的地址长度为32位，其中0~11位为页内地址（每页大小为4KB），12~31位为页号，所以允许的地址空间大小最多为1MB个页。</p><p><br></p><div class=pgc-img><img alt=计算机存储管理的功能以及管理方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c44cb60760f44ee2b321f4259d0fb082><p class=pgc-img-caption></p></div><p><strong>（3）页表</strong></p><p>将进程的每一页离散地分配到内存的多个物理块中后，系统应保证能在内存中找到每个页面所对应的物理块。为此，系统为每个进程建立了一张页面映射表，简称页表。如图所示，每个页在页表中占一个表项，记录程序中的某页在内存中对应的物理块号。进程在执行时，系统通过查找页表，就可以找到每页所对应的物理块号，实现页号到物理块号的地址映射。</p><p><br></p><div class=pgc-img><img alt=计算机存储管理的功能以及管理方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9496e22dc9e14456923b4b2b0b6871d8><p class=pgc-img-caption></p></div><p><strong>（4）地址变换机构</strong></p><p>地址变换机构的基本任务是利用页表把用户程序中的逻辑地址变换成内存中的物理地址，即将用户程序中的页号变换成内存中的物理块号。页表寄存器用来存放页表的起始地址和页表的长度。在进程未执行时，每个进程对应的页表的起始地址的长度存放在进程的PCB中，当此进程被调度时，就将它们装入页表寄存器。进行地址变换时，系统将页号与页表长度进行比较，如果页号大于等于页表寄存器中的页表长度L（页号从0开始），则产生越界中断。如未出现越界，则根据页表寄存器中的页表的起始地址的页号计算出此页在表项中的位置，得到此页的物理块号，将此物理块号装入物理地址寄存器中。于此同时，将有效地址（逻辑地址）寄存器中页内地址直接装入物理地址寄存器的块内地址字段中，完成从逻辑地址到物理地址的变换。</p><ol start=2><li><strong>页式存储管理</strong></li></ol><p>高级程序语言使用逻辑地址，而运行状态和内存中使用物理地址。</p><p><strong>优点</strong>：内存利用率高，碎片小，分配及管理简单。</p><p><strong>缺点</strong>：增加了系统开销，可能产生抖动现象。</p><p>逻辑地址=页号+页内地址 物理地址=物理块号+页内地址</p><p><br></p><div class=pgc-img><img alt=计算机存储管理的功能以及管理方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15753b1af26740bfaeece3902a46b5bf><p class=pgc-img-caption>物理块号</p></div><p><br></p><div class=pgc-img><img alt=计算机存储管理的功能以及管理方案 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/907a7fa93f6e4dfdb42cbb7069f3b2d5><p class=pgc-img-caption>物理地址</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'计算机','存储','管理'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>