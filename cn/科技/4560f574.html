<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>H3C网络设备V5和V7平台telnet相关配置 | 极客快訊</title><meta property="og:title" content="H3C网络设备V5和V7平台telnet相关配置 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1521001198189dea9ddbc06"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4560f574.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4560f574.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4560f574.html><meta property="article:published_time" content="2020-11-14T21:02:11+08:00"><meta property="article:modified_time" content="2020-11-14T21:02:11+08:00"><meta name=Keywords content><meta name=description content="H3C网络设备V5和V7平台telnet相关配置"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4560f574.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>H3C网络设备V5和V7平台telnet相关配置</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>拿到一台新的交换机怎么让它接入网络能够正常使用呢？</p><p>如果是一台不可配置的交换机怎么接入网络？</p><p>如果是一台可配置交换机怎么接入网络？</p><p>概述：</p><p>---如果拿到手的是一台不可配置的傻瓜交换机，那么想让它接入网络可以正常使用，那么傻瓜交换机的上联交换机的下联口要配置成access口才可以正常接入网络并可用（上联交换机是可配置的，如果是不可配的什么都不用管，拿根网线接上即可），可配置交换机也可以当做傻瓜交换机使用，那么上联交换机的下联口和接入交换机的上联口都需要配置成access口才可以。</p><p>---这里我们只讨论上联交换机和下联交换机都是可配置的情况</p><p>1.假设上联交换机是汇聚设备，上面配置了交换机用于管理的VLAN 100（IP：192.168.1.1/24）还有其它业务VLAN等配置暂时不管。那么拿到手的接入交换机首先需要通过console口登录进去，做如下配置</p><p>&lt;H3C>system-view</p><p>[H3C]vlan 100 #创建VLAN 100并进入vlan配置视图</p><p>[H3C-vlan100]description sw-manage-vlan #给这个vlan设置描述信息，方便查看和管理</p><p>[H3C-vlan100]quit #退出当前视图</p><p>[H3C]interface Vlan-interface 100 #进入vlan 100虚接口配置视图</p><p>[H3C-Vlan-interface100]ip address 192.168.1.2 255.255.255.0 #给这个虚接口配置IP地址</p><p>[H3C-Vlan-interface100]description sw-manage-vlan-address #给这个虚接口配置描述信息</p><p>[H3C-Vlan-interface100]quit #退出当前视图</p><p>[H3C]</p><p>注：这是三层交换机的配置，如果是二层交换机，创建vlan100之后，使用interface命令进入虚接口时会报错，提示这个接口不是管理vlan（默认是只能给交换机出厂就有的vlan 1配置IP地址等信息），我们只要使用management-vlan vlan 100把vlan 100设为管理vlan就可以了。</p><p>[H3C]ip route-static 0.0.0.0 0.0.0.0 192.168.1.1 #设置一条静态的默认路由</p><p>注：至于路由是干什么的，什么是静态路由以及什么是默认路由，自己查查资料吧，这里就不详细说明了</p><p>[H3C]interface GigabitEthernet 1/0/24 #假设用24口做为上联口，这里就是进入这个接口配置视图</p><p>[H3C-GigabitEthernet1/0/24]port link-type trunk #设置这个接口为trunk口</p><p>[H3C-GigabitEthernet1/0/24]undo port trunk permit vlan 1 to 4094 #首先设置这个接口不允许所有vlan通过</p><p>[H3C-GigabitEthernet1/0/24]port trunk permit vlan 100 #这里设置的是只允许指定的vlan通过（暂时只设置允许vlan 100通过，不然后面的telnet配置之后，无法连通。）</p><p>[H3C-GigabitEthernet1/0/24]quit #退出当前视图</p><p>注：上联设备的下联口也主要做相同的配置</p><p>到这里基本的网络连通性配置已经完成</p><p>----------------------------------------------------------------------------------------------------</p><p>下面就是进行telnet的配置了</p><p>2.首先开启telnet服务</p><p>[H3C]telnet server enable #开启设备的telnet服务</p><p>3.进入虚拟终端并配置验证模式</p><p>[H3C]user-interface vty 0 15</p><p>[H3C-line-vty0-15]authentication-mode ?</p><p>none Login without authentication</p><p>password Password authentication</p><p>scheme Authentication use AAA</p><p>注：参数none说明不进行认证，参数password只进行密码验证，参数scheme进行用户名+密码的验证</p><p>这里我们选择scheme，要求在进行虚拟终端进行登录采用用户名+密码的验证模式</p><p>[H3C-line-vty0-15]authentication-mode scheme</p><p>4.设置权限</p><p>[H3C-line-vty0-15]user-role network-admin（H3C V7平台）</p><p>[H3C-line-vty0-15]user privilege level 3（H3C V5平台）</p><p>注：display version可以查看设备的系统版本，现在H3C常用的平台是V5和V7，以上两个命令都是设置权限的</p><p>5.因为我们选择的认证模式是scheme所以还需要创建一个用户账号</p><p>H3C V5平台</p><p>[H3C]local-user admin #创建用户账户（admin 就是创建的账号名称）</p><p>[H3C-luser-admin]password cipher/simple 123456 #为admin设置密码123456（cipher是加密的 simple是明文的）</p><p>[H3C-luser-admin]authorization-attribute level 3 #设置admin账户的权限</p><p>[H3C-luser-admin]service-type telnet terminal #设置这个账户只能用于telnet和console口登录</p><p>[H3C-luser-admin]quit</p><p>H3C V7平台</p><p>[H3C]local-user admin #创建用户账户（admin 就是创建的账号名称）</p><p>[H3C-luser-manage-wxxynet]password hash/simple 123456 #为admin设置密码123456（hash是加密的 simple是明文的）</p><p>[H3C-luser-manage-wxxynet]authorization-attribute user-role network-admin #设置用户权限（还可以根据需要细分不用账户的权限）</p><p>[H3C-luser-manage-wxxynet]service-type telnet terminal #设置这个账户只能用于telnet和console口登录</p><p>[H3C-luser-manage-wxxynet]quit</p><p>注：以上配置还有很多其他参数，有兴趣可以自己看看</p><p>如果在VTY虚拟终端配置的验证模式选择的参数是password那么就不用创建用户这一步了，直接在vty配置模式中设置密码即可。</p><p>关于SSH的配置 H3C V5和V7平台的，在我的头条号上都有</p><br><p><img alt=H3C网络设备V5和V7平台telnet相关配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1521001198189dea9ddbc06></p><p><img alt=H3C网络设备V5和V7平台telnet相关配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15210011982203bfda754ce></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'H3C','网络','设备'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E5%AD%A6/a5d6657.html alt=H3C网络设备的基本调试方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1536284588489a54161a40f style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E5%AD%A6/a5d6657.html title=H3C网络设备的基本调试方法>H3C网络设备的基本调试方法</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>