<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>公钥密码学简介 | 极客快訊</title><meta property="og:title" content="公钥密码学简介 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/7281228cbd4c49daacc1c3d28fbfd786"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/45a20c5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/45a20c5.html><meta property="article:published_time" content="2020-10-29T20:51:34+08:00"><meta property="article:modified_time" content="2020-10-29T20:51:34+08:00"><meta name=Keywords content><meta name=description content="公钥密码学简介"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/45a20c5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>公钥密码学简介</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>作为工程师应学习的非对称密码学概念</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7281228cbd4c49daacc1c3d28fbfd786><p class=pgc-img-caption>> Enigma machine by School of Mathematics — University of Manchester on flickr (CC BY 2.0)</p></div><p></p><p>如果您从事软件开发，则可能已经以一种或另一种方式向您介绍了加密技术。 签名消息，加密有效载荷，验证签名以及使用证书； 这些都是我们每天都使用的功能，即使我们不知道也是如此。</p><p>公钥密码学或非对称密码学是70年代中期开始的广泛科学研究的主题，也是当今众多书籍和研究论文的目标。</p><p>这绝不是试图以任何水平的科学或学术细节介绍密码技术。</p><p>相反，我将尝试展示非对称密码技术背后的关键功能概念，并提供示例说明如何使用它（同时尽量避免使用专业术语）。</p><p>在以下各节中，我们将讨论：</p><p>· 对称加密与非对称加密。</p><p>· 密钥生成。</p><p>· 非对称加密，或如何发送加密的消息。</p><p>· 签署有效载荷。</p><p>· 证书。</p><h1 class=pgc-h-arrow-right>对称加密与非对称加密</h1><p>对称加密与非对称加密的区别在于使用密钥来交付基础加密功能的方式：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3da204375238465fa1732b9f245c6206><p class=pgc-img-caption>> With symmetric encryption, one key is shared with one or more parties (image by author)</p></div><p></p><p>在对称加密中，同一密钥既用于加密又用于解密。 密钥成为参与者之间共享的共享秘密。</p><p>显然，随着参与者数量的增加，泄露密钥的风险也随之增加。</p><p>在上图中，如果 史蒂夫（Steve）的PC受到了威胁，任何获得密钥的人都可以解密发送给爱丽丝（Alice），约翰（John）和伊丽莎白（Elizabeth）的所有消息。</p><p>因此，一旦共享秘密在任何单个位置受到破坏，整个系统的安全性就会受到损害。 对称加密的主要缺点是使用单个共享密钥以及找到安全的传播方式的要求。</p><p>对称加密是直到70年代中期之前使用的主要加密机制，当时研究人员开始建议使用另一种方法来创建和传播密钥，更重要的是。</p><p>这是非对称加密诞生的时候：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/195ea757c23a476b98d479804b657360><p class=pgc-img-caption>> With asymmetric encryption, parties maintain key-pairs and exchange public keys (image by author)</p></div><p></p><p>在非对称加密中，每一方都是一对密钥（公共密钥和私有密钥）的所有者。</p><p>最大的突破是，公开密钥不是一个共享的秘密，应该由两个或多个参与者小心地隐藏起来。 相反，参与者可以通过不受信任的网络交换公用密钥，甚至可以与其他任何人共享公用密钥。</p><p>对称加密彻底改变了密码学领域，如今它已成为大多数大规模加密方案的基础。 例如，互联网。</p><h1 class=pgc-h-arrow-right>密钥生成</h1><p>非对称加密中公钥和私钥的创建取决于数学问题，尤其是单向函数。</p><p>单向函数的特征在于易于以一种方式解决（即生成密钥），但是反计算（即在具有加密的有效载荷时找到密钥）在计算上非常昂贵。</p><p>就像我在本文开头所承诺的那样，我不会不必要地使用与密码学有关的技术术语。 但是，请记住这一点：并非所有键都是相同的。</p><p>密钥的质量和强度取决于生成密钥的算法以及密钥的位数。</p><p>当前使用Diffie-Hellman算法生成的密钥的密钥大小建议为2048位或更大，约为使用椭圆曲线算法生成的密钥的1/10。</p><p>因此，是时候使用瑞士的加密工具LibreSSL（v2.8.3，如果您使用的是OpenSSL，下面的大多数命令也应如此）来创建我们的第一个非对称加密密钥对。</p><h1 class=pgc-h-arrow-right>创建一个加密的私钥</h1><p>openssl genrsa -des3 -out alice-privatekey.pem 2048openssl genrsa -des3 -out bob-privatekey.pem 2048</p><p>您现在已经成功为Alice和Bob生成了私钥。 LibreSSL和OpenSSL中都有指定密钥属性的其他选项，包括在生成过程中使用椭圆曲线算法。</p><p>私钥应该保持，好…私密，切勿与其他任何人共享。</p><h1 class=pgc-h-arrow-right>从私钥中提取公钥</h1><p>openssl rsa -in alice-privatekey.pem -outform PEM -pubout -out alice-publickey.pemopenssl rsa -in bob-privatekey.pem -outform PEM -pubout -out bob-publickey.pem</p><p>现在，由于没有嵌入任何敏感信息，因此可以提取Alice和Bob的公钥并将其发送给任何感兴趣的方。</p><h1 class=pgc-h-arrow-right>非对称加密，或如何发送加密的消息</h1><p>非对称加密适用于公钥和私钥。 要发送加密的消息，在加密过程中使用接收者的公钥，在解密过程中使用接收者的私钥，如下所示：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3c769002f9734e6da13b7bd9d95630c4><p class=pgc-img-caption>> Public-key encryption/decryption (image by author)</p></div><p></p><p>以下是上述场景中涉及的步骤，其中Alice希望将加密的消息发送给Bob：</p><p>· 爱丽丝获得鲍勃的公钥。</p><p>· 爱丽丝存储鲍勃的公钥以备将来使用。</p><p>· 爱丽丝将鲍勃的公钥与有效载荷一起使用，然后将其通过她的加密软件进行加密。</p><p>· 加密的有效负载将发送到Bob。</p><p>· 鲍勃将自己的私钥和爱丽丝发送给他的解密软件的加密消息传递。</p><p>· Bob获得了Alice发送的原始有效负载。</p><p>因此，让我们进入实际部分，并使用Bob的公钥向他发送加密文件。 哦，等等…我们不能！</p><h1 class=pgc-h-arrow-right>混合加密</h1><p>上面介绍的理论部分没有任何问题，因为它的工作原理与广告宣传完全一样。 但是，有一个不对称加密的"陷阱"：要加密的有效负载的大小必须（几乎）与用于加密的公钥的大小匹配。</p><p>因此，要向Bob发送大约1MB的照片，您需要Bob拥有至少800万比特的公共密钥。 那是八百万个1和0，一个接一个。 生成这样的密钥可能不太实际-即使可以实现。</p><p>尽管您可以创建一种结构，在该结构中以块模式使用非对称加密来加密大型有效负载，但是通过以接近可用公共密钥大小的较小比特来加密有效负载，实际上，这是没人在使用的东西。 就所用空间而言，效率低下，而且速度将非常缓慢。</p><p>为了减轻非对称加密的密钥大小限制，当前的做法是使用混合加密：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b011553b376a4f0aa8c5c5c1fea3b326><p class=pgc-img-caption>> Hybrid encryption (image by author)</p></div><p></p><p>在混合加密中，将创建一个随机对称密钥来加密有效负载，并使用公共密钥来加密随机对称密钥。 让我们看看它是如何工作的：</p><p>· 鲍勃将他的公钥发送给爱丽丝。</p><p>· 爱丽丝生成共享的对称密钥。</p><p>· 爱丽丝用鲍勃的公钥加密对称密钥。</p><p>· 爱丽丝使用（2）中创建的共享密钥对消息进行加密。</p><p>· 爱丽丝将加密的消息和加密的共享密钥发送给鲍勃。</p><p>· 鲍勃使用他的私钥解密共享密钥。</p><p>· 鲍勃使用共享密钥解密加密的消息。</p><p>如果手动执行，上述情况将是冗长而乏味的。 但是，有完善的工具和标准可以自动安全地交换消息和文件，例如OpenPGP及其在PGP和GPG中的化身。</p><h1 class=pgc-h-arrow-right>使用GPG加密（GNU Privacy Guard）</h1><p>GnuPG是RFC4880（也称为PGP）定义的OpenPGP标准的完整和免费实现。</p><p>GnuPG允许您对数据和通信进行加密和签名，并具有通用的密钥管理系统以及用于各种公钥目录的访问模块。</p><p>现在，让我们尝试使用GPG将加密的文件从爱丽丝发送到鲍勃：</p><p>· 爱丽丝和鲍勃都需要创建GPG密钥对：gpg –gen-key</p><p>· 鲍勃应导出其公钥并将其发送给Alice：gpg –output bob.gpg –export bob@bob.com</p><p>· 爱丽丝收到鲍勃的公钥后，应将其导入到本地密钥数据库中：gpg –import bob.gpg</p><p>· 爱丽丝创建未加密的消息：echo" Hello Bob"> bob.msg</p><p>· 爱丽丝对邮件进行加密，然后将加密的邮件与加密的共享密钥一起发送到Bob：gpg-输出bob.msg.gpg –encrypt-收件人bob@bob.com bob.msg</p><p>· 鲍勃（Bob）接收加密的消息，并通过解密共享密钥并解密加密的消息来解密它：gpg –output bob.msg –decrypt bob.msg.pgp</p><p>GPG和PGP都已被广泛使用，并且已经包含在我们日常使用的许多产品中，例如电子邮件客户端，因此您几乎不必手动执行上述顺序。</p><h1 class=pgc-h-arrow-right>签署有效载荷</h1><p>有时，不一定需要加密消息的内容，但是，我们可能仍要确保发送者的身份。 其他时候，内容需要加密，发件人的身份也需要验证。 在两种情况下，这都是我们使用数字签名的地方。</p><p>在我们看到如何生成数字签名以及如何对内容进行验证以及验证发件人的身份之前，让我们在这里进行重要的区分-我经常看到人们可以互换使用：数字签名不是电子签名 。</p><h1 class=pgc-h-arrow-right>电子签名</h1><p>数字签名只是用于验证数字消息真实性的数学证明。</p><p>它使邮件的接收者具有很高的确定性，可以相信特定的邮件是由已知的发件人创建的，并且该邮件在传输过程中没有被更改。</p><h1 class=pgc-h-arrow-right>电子签名</h1><p>电子签名带有物理签名的意图，通常使用数字签名来实现。</p><p>在许多国家/地区，电子签名只要符合其所依据的特定法规的要求，就可以提供与手写签名相同的法律地位。</p><p>发送者使用私钥产生数字签名，接收者使用发送者的公钥验证数字签名：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/238257e4008249adbf6601fa62dd39de><p class=pgc-img-caption>> Verifying a message with a digital signature (image by author)</p></div><p></p><p>· 爱丽丝将她的公钥发送给鲍勃。</p><p>· 爱丽丝创建一条消息，并使用她的公钥产生数字签名。 通常，在消息的计算出的哈希值上，例如在所得的SHA-256上，产生数字签名。</p><p>· Bob收到了原始的未加密消息以及该消息的Alice的数字签名。</p><p>· Bob使用Alice的公钥重新计算了原始未加密邮件的数字签名，并将其与Alice发送的签名进行了比较。</p><p>· 如果两个签名都匹配，则鲍勃知道是爱丽丝发送了原始邮件，并且邮件的内容没有更改。</p><p>接下来，让我们看看如何创建数字签名以及收件人如何验证收到的邮件是否未被篡改。</p><h1 class=pgc-h-arrow-right>签发签名</h1><p>openssl dgst -sha256 -sign alice-privatekey.pem -out bob.msg.sign bob.msg</p><p>上面的命令使用Alice的私钥在bob.msg文件的SHA-256输出上计算数字签名。 然后，爱丽丝将bob.msg以及bob.msg.sign文件发送给Bob。</p><h1 class=pgc-h-arrow-right>验证签名</h1><p>openssl dgst -sha256 -verify alice-publickey.pem -signature bob.msg.sign bob.msg</p><p>鲍勃从爱丽丝那里收到了两个文件，然后继续使用爱丽丝的公钥来验证签名。 上面的命令根据数字签名验证结果返回" Verified OK"或" Verification Failure"。</p><h1 class=pgc-h-arrow-right>证明书</h1><p>证书，也称为数字证书，身份证书或公钥证书，是证明公钥所有权的电子文档。</p><p>证书的最常见格式由X.509定义，从根本上讲，它包含一个公共密钥，该公共密钥的数字签名以及有关公共密钥所有者身份的信息。</p><p>证书可用于多种目的，因此，存在不同的证书配置文件。</p><p>公钥对应于证书的所有者。 但是，要使其他任何人都能够验证所有者的身份，则需要一个受信任的第三方实体。</p><p>这就是证书颁发机构的用处。证书颁发机构是负责签署证书的一方，通常是受信任的知名公司或组织。</p><p>为了有效地执行此角色，证书颁发机构需要拥有自己的根证书，该证书由尽可能多的用户信任。 但是，证书颁发机构也可以提供交叉签名，从而对其他证书颁发机构的根证书进行签名。</p><p>刚开始时听起来可能会令人困惑，所以让我们尝试通过一个示例进行说明：</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/33f9d1046e7d49f1bd70e878aa86a671><p class=pgc-img-caption>> A certificate validation chain of trust (image by author)</p></div><p></p><p>· 在上面的示例中，鲍勃连接到爱丽丝的网站，并希望验证是由爱丽丝经营的。</p><p>· Bob在访问爱丽丝的网站时获得了证书。 该证书包含Alice的公钥以及来自证书颁发机构CA1的数字签名。</p><p>· 由于Bob不了解也不信任CA1，因此他检查了嵌入证书中的证书链。</p><p>· 通过追溯可用的交叉签名，Bob到达了他信任的证书颁发机构CA3。 现在，他知道爱丽丝的网站可以信任由爱丽丝运营。</p><p>当然，所有这些过程都是由Internet浏览器在幕后在HTTPS协议的传输层安全性（TLS）下进行的。</p><p>证书身份验证是基于共同受信任的父证书颁发机构的事实，这也是对证书的主要批评之一。</p><p>如果该父证书颁发机构被破坏或流氓怎么办？</p><p>尽管证书主要用于网站隐私，标识和内容可靠性，但它们也可以用于客户端标识。</p><p>如果您对自己的证书颁发机构感兴趣，可以尝试使用各种可用的开源实现之一，例如OpenCA，EJBCA或OpenXKPI。</p><div class=pgc-img><img alt=公钥密码学简介 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c281ccbeaa854e769d74982640dc67d6><p class=pgc-img-caption>> Screenshot of the web administration console of EJBCA (David CARELLA, Wikipedia, CC BY-SA 4.0)</p></div><p></p><p>当然，请考虑到由于您自己的证书颁发机构的根证书不会被您的Internet浏览器或其他任何人信任，因此您需要按照操作系统的说明将其手动插入到受信任的证书存储中。</p><p>使用您自己的证书颁发机构颁发的证书的所有用户的计算机也是如此。</p><p>不，不是一种选择是让一个知名的大型根证书颁发机构对您自己的证书颁发机构的根证书进行交叉签名。</p><h1 class=pgc-h-arrow-right>结论</h1><p>公钥密码术或非对称加密是一种基于密钥对，公钥和私钥的密码系统。 非对称加密的主要用例是加密通信，提供消息验证和真实性。</p><p>在本文中，我试图介绍非对称加密背后的基本概念，尽管只是从头开始讨论了这样一个复杂的话题。 密码学是一个引人入胜的领域，迄今为止，它一直在进行积极的研究，并为好奇的人们提供了大量的信息。</p><p>离开之前，如果您需要在项目中进行加密，请牢记加密的黄金法则：不要投放自己的加密货币。</p><p>那里有许多库以及已经实施的强大，安全，经过考验的算法。 做研究并选择已经满足项目需求的研究。</p><p>感谢您阅读本文。 我希望在下一个见到你。</p><p>(本文翻译自Nassos Michas的文章《An Introduction to Public Key Cryptography》，参考：https://medium.com/better-programming/an-introduction-to-public-key-cryptography-3ea0cf7bf4ba)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'公钥密','码学','简介'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>