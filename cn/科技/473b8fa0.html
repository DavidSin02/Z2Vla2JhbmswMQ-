<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹) | æå®¢å¿«è¨Š</title><meta property="og:title" content="è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹) - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/780efda3-0c9d-4ac0-be7b-318d4cfa7db1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/473b8fa0.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/473b8fa0.html><meta property="article:published_time" content="2020-10-29T21:11:54+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:54+08:00"><meta name=Keywords content><meta name=description content="è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹)"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/473b8fa0.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹)</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/780efda3-0c9d-4ac0-be7b-318d4cfa7db1><p class=pgc-img-caption></p></div><h2 class=pgc-h-arrow-right>1. äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·</h2><p>äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·åˆ†åˆ«ç”±å¾®è½¯å’Œç½‘æ™¯å…¬å¸æå‡ºï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µéƒ½æ˜¯ä¸ºäº†è§£å†³é¡µé¢ä¸­äº‹ä»¶æµï¼ˆäº‹ä»¶å‘ç”Ÿé¡ºåºï¼‰çš„é—®é¢˜ã€‚è€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±ä¸å†™html->head,bodyä¹‹ç±»çš„ä»£ç äº†ï¼Œè‡ªè¡Œè„‘è¡¥</p><pre><code>&lt;div id="outer"&gt;       &lt;p id="inner"&gt;Click me!&lt;/p&gt;&lt;/div&gt;</code></pre><p>ä¸Šé¢çš„ä»£ç å½“ä¸­ä¸€ä¸ªdivå…ƒç´ å½“ä¸­æœ‰ä¸€ä¸ªpå­å…ƒç´ ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªclickçš„å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½çŸ¥é“å“ªä¸€ä¸ªå‡½æ•°ä¼šé¦–å…ˆè¢«è§¦å‘å‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¾®è½¯å’Œç½‘æ™¯æå‡ºäº†ä¸¤ç§å‡ ä¹å®Œå…¨ç›¸åçš„æ¦‚å¿µã€‚</p><h4 class=pgc-h-arrow-right>1.1 äº‹ä»¶å†’æ³¡</h4><p>å¾®è½¯æå‡ºäº†åä¸ºäº‹ä»¶å†’æ³¡(event bubbling) çš„äº‹ä»¶æµã€‚äº‹ä»¶å†’æ³¡å¯ä»¥å½¢è±¡åœ°æ¯”å–»ä¸ºæŠŠä¸€é¢—çŸ³å¤´æŠ•å…¥æ°´ä¸­ï¼Œæ³¡æ³¡ä¼šä¸€ç›´ä»æ°´åº•å†’å‡ºæ°´é¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹ä»¶ä¼šä»æœ€å†…å±‚çš„å…ƒç´ å¼€å§‹å‘ç”Ÿï¼Œä¸€ç›´å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°documentå¯¹è±¡ã€‚ å› æ­¤åœ¨äº‹ä»¶å†’æ³¡çš„æ¦‚å¿µä¸‹åœ¨på…ƒç´ ä¸Šå‘ç”Ÿclickäº‹ä»¶çš„é¡ºåºåº”è¯¥æ˜¯p -> div -> body -> html -> document</p><h4 class=pgc-h-arrow-right>1.2 äº‹ä»¶æ•è·</h4><p>ç½‘æ™¯æå‡ºå¦ä¸€ç§äº‹ä»¶æµåä¸ºäº‹ä»¶æ•è·(event capturing) ã€‚ä¸äº‹ä»¶å†’æ³¡ç›¸åï¼Œäº‹ä»¶ä¼šä»æœ€å¤–å±‚å¼€å§‹å‘ç”Ÿï¼Œç›´åˆ°æœ€å…·ä½“çš„å…ƒç´ ã€‚</p><p>å› æ­¤åœ¨äº‹ä»¶æ•è·çš„æ¦‚å¿µä¸‹åœ¨på…ƒç´ ä¸Šå‘ç”Ÿclickäº‹ä»¶çš„é¡ºåºåº”è¯¥æ˜¯document -> html -> body -> div -> p</p><h4 class=pgc-h-arrow-right>1.3 addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°</h4><p>ç½‘æ™¯ å’Œ å¾®è½¯ æ›¾ç»çš„æˆ˜äº‰è¿˜æ˜¯æ¯”è¾ƒç«çƒ­çš„ï¼Œå½“æ—¶ï¼Œ ç½‘æ™¯ä¸»å¼ æ•è·æ–¹å¼ï¼Œå¾®è½¯ä¸»å¼ å†’æ³¡æ–¹å¼ã€‚åæ¥ w3c é‡‡ç”¨æŠ˜ä¸­çš„æ–¹å¼ï¼Œå¹³æ¯äº†æˆ˜ç«ï¼Œåˆ¶å®šäº†ç»Ÿä¸€çš„æ ‡å‡†â€”â€”<strong>å…ˆæ•è·å†å†’æ³¡</strong>ã€‚ addEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸ºå†’æ³¡å’Œæ•è·å‡†å¤‡çš„.addEventListeneræœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><pre><code>element.addEventListener(event, function, useCapture)</code></pre><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦ç»‘å®šçš„äº‹ä»¶ ç¬¬äºŒä¸ªå‚æ•°æ˜¯è§¦å‘äº‹ä»¶åè¦æ‰§è¡Œçš„å‡½æ•° ç¬¬ä¸‰ä¸ªå‚æ•°é»˜è®¤å€¼æ˜¯falseï¼Œè¡¨ç¤ºåœ¨<strong>äº‹ä»¶å†’æ³¡é˜¶æ®µ</strong>è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°;å¦‚æœå‚æ•°ä¸ºtrueï¼Œåˆ™è¡¨ç¤ºåœ¨<strong>äº‹ä»¶æ•è·é˜¶æ®µ</strong>è°ƒç”¨å¤„ç†å‡½æ•°ã€‚</p><h2 class=pgc-h-arrow-right>2. å®ä¾‹è®²è§£</h2><h4 class=pgc-h-arrow-right>2.1 å†’æ³¡çš„æ¡ˆä¾‹</h4><pre><code>&lt;div id="s1"&gt;s1    &lt;div id="s2"&gt;s2&lt;/div&gt;&lt;/div&gt;&lt;script&gt;    s1.addEventListener("click",function(e){    console.log("s1 å†’æ³¡äº‹ä»¶"); },false);    s2.addEventListener("click",function(e){    console.log("s2 å†’æ³¡äº‹ä»¶"); },false);&lt;/script&gt;</code></pre><p>å½“æˆ‘ä»¬ç‚¹å‡»s2çš„æ—¶å€™ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt=è¯¦è§£JSä¸­çš„äº‹ä»¶æœºåˆ¶(å¸¦å®ä¾‹) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/672c42d0aae946ae89c1d213118579ce><p class=pgc-img-caption></p></div><h4 class=pgc-h-arrow-right>2.2 æ•è·çš„æ¡ˆä¾‹</h4><pre><code>&lt;div id="s1"&gt;s1 &lt;div id="s2"&gt;s2&lt;/div&gt;&lt;/div&gt;&lt;script&gt; s1.addEventListener("click",function(e){ console.log("s1 æ•è·äº‹ä»¶"); },true); s2.addEventListener("click",function(e){ console.log("s2 æ•è·äº‹ä»¶"); },true);&lt;/script&gt;</code></pre><p>å½“æˆ‘ä»¬ç‚¹å‡»s2çš„æ—¶å€™ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre><code>s1 æ•è·äº‹ä»¶s2 æ•è·äº‹ä»¶</code></pre><h2 class=pgc-h-arrow-right>3. äº‹ä»¶æ•è·vsäº‹ä»¶å†’æ³¡</h2><p>å½“äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡ä¸€èµ·å­˜åœ¨çš„æƒ…å†µï¼Œäº‹ä»¶åˆæ˜¯å¦‚ä½•è§¦å‘å‘¢ã€‚è¿™é‡Œè®°è¢«ç‚¹å‡»çš„DOMèŠ‚ç‚¹ä¸ºtargetèŠ‚ç‚¹</p><ol start=1><li>document å¾€ targetèŠ‚ç‚¹ï¼Œæ•è·å‰è¿›ï¼Œé‡åˆ°æ³¨å†Œçš„æ•è·äº‹ä»¶ç«‹å³è§¦å‘æ‰§è¡Œ</li><li>åˆ°è¾¾targetèŠ‚ç‚¹ï¼Œè§¦å‘äº‹ä»¶ï¼ˆå¯¹äºtargetèŠ‚ç‚¹ä¸Šï¼Œæ˜¯å…ˆæ•è·è¿˜æ˜¯å…ˆå†’æ³¡åˆ™æ•è·äº‹ä»¶å’Œå†’æ³¡äº‹ä»¶çš„æ³¨å†Œé¡ºåºï¼Œå…ˆæ³¨å†Œå…ˆæ‰§è¡Œï¼‰</li><li>targetèŠ‚ç‚¹ å¾€ document æ–¹å‘ï¼Œå†’æ³¡å‰è¿›ï¼Œé‡åˆ°æ³¨å†Œçš„å†’æ³¡äº‹ä»¶ç«‹å³è§¦å‘</li></ol><h4 class=pgc-h-arrow-right>3.1 æ€»ç»“ä¸‹å°±æ˜¯:</h4><ul><li>å¯¹äºétargetèŠ‚ç‚¹åˆ™å…ˆæ‰§è¡Œæ•è·åœ¨æ‰§è¡Œå†’æ³¡</li><li>å¯¹äºtargetèŠ‚ç‚¹åˆ™æ˜¯å…ˆæ‰§è¡Œå…ˆæ³¨å†Œçš„äº‹ä»¶ï¼Œæ— è®ºå†’æ³¡è¿˜æ˜¯æ•è·</li></ul><pre><code>&lt;div id="s1"&gt;s1 &lt;div id="s2"&gt;s2&lt;/div&gt;&lt;/div&gt;&lt;script&gt;s1.addEventListener("click",function(e){       console.log("s1 å†’æ³¡äº‹ä»¶"); },false);s2.addEventListener("click",function(e){       console.log("s2 å†’æ³¡äº‹ä»¶");},false);s1.addEventListener("click",function(e){       console.log("s1 æ•è·äº‹ä»¶");},true);s2.addEventListener("click",function(e){      console.log("s2 æ•è·äº‹ä»¶");},true);&lt;/script&gt;</code></pre><p>å½“æˆ‘ä»¬ç‚¹å‡»s2çš„æ—¶å€™,æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre><code>s1 æ•è·äº‹ä»¶s2 å†’æ³¡äº‹ä»¶s2 æ•è·äº‹ä»¶s1 å†’æ³¡äº‹ä»¶</code></pre><p>è¿™é‡Œå¤§ä½“åˆ†æä¸‹æ‰§è¡Œç»“æœ ç‚¹å‡»s2ï¼Œclickäº‹ä»¶ä»document->html->body->s1->s2(æ•è·å‰è¿›)è¿™é‡Œåœ¨s1ä¸Šå‘ç°äº†æ•è·æ³¨å†Œäº‹ä»¶ï¼Œåˆ™è¾“å‡º<strong>"s1 æ•è·äº‹ä»¶"</strong> åˆ°è¾¾s2ï¼Œå·²ç»åˆ°è¾¾ç›®çš„èŠ‚ç‚¹ï¼Œ s2ä¸Šæ³¨å†Œäº†å†’æ³¡å’Œæ•è·äº‹ä»¶ï¼Œå…ˆæ³¨å†Œçš„å†’æ³¡åæ³¨å†Œçš„æ•è·ï¼Œåˆ™å…ˆæ‰§è¡Œå†’æ³¡ï¼Œè¾“å‡º<strong>"s2 å†’æ³¡äº‹ä»¶"</strong> å†åœ¨s2ä¸Šæ‰§è¡Œåæ³¨å†Œçš„äº‹ä»¶ï¼Œå³æ•è·äº‹ä»¶ï¼Œè¾“å‡º<strong>"s2 æ•è·äº‹ä»¶"</strong> ä¸‹é¢è¿›å…¥å†’æ³¡é˜¶æ®µï¼ŒæŒ‰ç…§s2->s1->body->html->documen(å†’æ³¡å‰è¿›) åœ¨s1ä¸Šå‘ç°äº†å†’æ³¡äº‹ä»¶ï¼Œåˆ™è¾“å‡º<strong>"s1 å†’æ³¡äº‹ä»¶"</strong></p><h2 class=pgc-h-arrow-right>4. äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·åº”ç”¨:äº‹ä»¶ä»£ç†</h2><h4 class=pgc-h-arrow-right>4.1 æ¡ˆä¾‹</h4><p>åœ¨å®é™…çš„å¼€å‘å½“ä¸­ï¼Œåˆ©ç”¨äº‹ä»¶æµçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§å«åšäº‹ä»¶ä»£ç†çš„æ–¹æ³•ã€‚</p><pre><code>&lt;ul id="color-list"&gt; &lt;li&gt;red&lt;/li&gt; &lt;li&gt;yellow&lt;/li&gt; &lt;li&gt;blue&lt;/li&gt; &lt;li&gt;green&lt;/li&gt; &lt;li&gt;black&lt;/li&gt; &lt;li&gt;white&lt;/li&gt;&lt;/ul&gt;</code></pre><p>å¦‚æœç‚¹å‡»é¡µé¢ä¸­çš„liå…ƒç´ ï¼Œç„¶åè¾“å‡ºliå½“ä¸­çš„é¢œè‰²ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿™æ ·å†™:</p><pre><code>(function(){ var color_list = document.getElementById('color-list'); var colors = color_list.getElementsByTagName('li'); for(var i=0;i&lt;colors.length;i++){ colors[i].addEventListener('click',showColor,false); }; function showColor(e){ var x = e.target; console.log("The color is " + x.innerHTML); };})();</code></pre><p>åˆ©ç”¨äº‹ä»¶æµçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬åªç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¹Ÿå¯ä»¥å®Œæˆï¼š</p><pre><code>(function(){  var color_list =document.getElementById('color-list');  color_list.addEventListener('click',showColor,false);  function showColor(e){  var x = e.target;  if(x.nodeName.toLowerCase() === 'li'){  console.log('The color is ' + x.innerHTML);  } }})();</code></pre><p>ä½¿ç”¨äº‹ä»¶ä»£ç†çš„å¥½å¤„ä¸ä»…åœ¨äºå°†å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°å‡ä¸ºä¸€ä¸ªï¼Œè€Œä¸”å¯¹äºä¸åŒçš„å…ƒç´ å¯ä»¥æœ‰ä¸åŒçš„å¤„ç†æ–¹æ³•ã€‚å‡å¦‚ä¸Šè¿°åˆ—è¡¨å…ƒç´ å½“ä¸­æ·»åŠ äº†å…¶ä»–çš„å…ƒç´ ï¼ˆå¦‚ï¼šaã€spanç­‰ï¼‰ï¼Œæˆ‘ä»¬ä¸å¿…å†ä¸€æ¬¡å¾ªç¯ç»™æ¯ä¸€ä¸ªå…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œç›´æ¥ä¿®æ”¹äº‹ä»¶ä»£ç†çš„äº‹ä»¶å¤„ç†å‡½æ•°å³å¯ã€‚</p><h2 class=pgc-h-arrow-right>5. å†’æ³¡è¿˜æ˜¯æ•è·ï¼Ÿ</h2><p>å¯¹äºäº‹ä»¶ä»£ç†æ¥è¯´ï¼Œåœ¨äº‹ä»¶æ•è·æˆ–è€…äº‹ä»¶å†’æ³¡é˜¶æ®µå¤„ç†å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä¼˜åŠ£ä¹‹åˆ†ï¼Œä½†æ˜¯ç”±äºäº‹ä»¶å†’æ³¡çš„äº‹ä»¶æµæ¨¡å‹è¢«æ‰€æœ‰ä¸»æµçš„æµè§ˆå™¨å…¼å®¹ï¼Œä»å…¼å®¹æ€§è§’åº¦æ¥è¯´è¿˜æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨äº‹ä»¶å†’æ³¡æ¨¡å‹ã€‚</p><h4 class=pgc-h-arrow-right>5.1 IEæµè§ˆå™¨å…¼å®¹</h4><p>IEæµè§ˆå™¨å¯¹addEventListenerå…¼å®¹æ€§å¹¶ä¸ç®—å¤ªå¥½ï¼Œåªæœ‰IE9ä»¥ä¸Šå¯ä»¥ä½¿ç”¨ã€‚</p><p>è¦å…¼å®¹æ—§ç‰ˆæœ¬çš„IEæµè§ˆå™¨ï¼Œå¯ä»¥ä½¿ç”¨IEçš„attachEventå‡½æ•°</p><pre><code>object.attachEvent(event, function)</code></pre><p>ä¸¤ä¸ªå‚æ•°ä¸addEventListenerç›¸ä¼¼ï¼Œåˆ†åˆ«æ˜¯äº‹ä»¶å’Œå¤„ç†å‡½æ•°ï¼Œé»˜è®¤æ˜¯äº‹ä»¶å†’æ³¡é˜¶æ®µè°ƒç”¨å¤„ç†å‡½æ•°ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œå†™äº‹ä»¶åæ—¶å€™è¦åŠ ä¸Š"on"å‰ç¼€ï¼ˆ"onload"ã€"onclick"ç­‰ï¼‰ã€‚</p><h2 class=pgc-h-arrow-right>6. äº‹ä»¶æ³¨æ„ç‚¹</h2><ul><li>äº‹ä»¶åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š äº‹ä»¶æ•è· --> äº‹ä»¶ç›®æ ‡ --> äº‹ä»¶å†’æ³¡</li><li>äº‹ä»¶æ•è·ï¼šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆonclick,onmouseoverâ€¦â€¦ï¼‰é¦–å…ˆå‘ç”Ÿåœ¨documentä¸Šï¼Œç„¶åä¾æ¬¡ä¼ é€’ç»™bodyã€â€¦â€¦æœ€ååˆ°è¾¾ç›®çš„èŠ‚ç‚¹ï¼ˆå³äº‹ä»¶ç›®æ ‡ï¼‰ã€‚</li><li>äº‹ä»¶å†’æ³¡ï¼šäº‹ä»¶åˆ°è¾¾äº‹ä»¶ç›®æ ‡ä¹‹åä¸ä¼šç»“æŸï¼Œä¼šé€å±‚å‘ä¸Šå†’æ³¡ï¼Œç›´è‡³documentå¯¹è±¡ï¼Œè·Ÿäº‹ä»¶æ•è·ç›¸å</li></ul><h4 class=pgc-h-arrow-right>6.1 å¸¸ç”¨æŠ€å·§</h4><p>1ã€onlick -->äº‹ä»¶å†’æ³¡ï¼Œé‡å†™onlickä¼šè¦†ç›–ä¹‹å‰å±æ€§ï¼Œæ²¡æœ‰å…¼å®¹æ€§é—®é¢˜</p><pre><code>ele.onclik = null;   //è§£ç»‘å•å‡»äº‹ä»¶ï¼Œå°†onlickå±æ€§è®¾ä¸ºnullå³å¯</code></pre><p>2ã€addEventListener(event.type, handle, boolean); IE8åŠä»¥ä¸‹ä¸æ”¯æŒï¼Œå±äºDOM2çº§çš„æ–¹æ³•ï¼Œå¯æ·»åŠ å¤šä¸ªæ–¹æ³•ä¸è¢«è¦†ç›–</p><pre><code>//äº‹ä»¶ç±»å‹æ²¡æœ‰onï¼Œfalse è¡¨ç¤ºåœ¨äº‹ä»¶ç¬¬ä¸‰é˜¶æ®µï¼ˆå†’æ³¡ï¼‰è§¦å‘ï¼Œtrueè¡¨ç¤ºåœ¨äº‹ä»¶ç¬¬ä¸€é˜¶æ®µï¼ˆæ•è·ï¼‰è§¦å‘ã€‚ å¦‚æœhandleæ˜¯åŒä¸€ä¸ªæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚ele.addEventListener('click', function(){ }, false);  //è§£ç»‘äº‹ä»¶ï¼Œå‚æ•°å’Œç»‘å®šä¸€æ ·ele.removeEventListener(event.type, handle, boolean);</code></pre><p>3ã€attachEvent(event.type, handle ); IEç‰¹æœ‰ï¼Œå…¼å®¹IE8åŠä»¥ä¸‹ï¼Œå¯æ·»åŠ å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œåªæ”¯æŒå†’æ³¡é˜¶æ®µ</p><pre><code>//å¦‚æœhandleæ˜¯åŒä¸€ä¸ªæ–¹æ³•ï¼Œç»‘å®šå‡ æ¬¡æ‰§è¡Œå‡ æ¬¡ï¼Œè¿™ç‚¹å’ŒaddEventListenerä¸åŒ,äº‹ä»¶ç±»å‹è¦åŠ on,ä¾‹å¦‚onclickè€Œä¸æ˜¯clickele.attachEvent('onclick', function(){ }); //è§£ç»‘äº‹ä»¶ï¼Œå‚æ•°å’Œç»‘å®šä¸€æ ·ele.detachEvent("onclick", function(){ });</code></pre><p>4ã€é»˜è®¤äº‹ä»¶è¡Œä¸ºï¼šhref=""é“¾æ¥ï¼Œsubmitè¡¨å•æäº¤ç­‰ <strong>é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼š</strong> ï¼ˆ1ï¼‰return false; é˜»æ­¢ç‹¬äº«å±æ€§ï¼ˆé€šè¿‡onè¿™ç§æ–¹å¼ï¼‰ç»‘å®šçš„äº‹ä»¶çš„é»˜è®¤äº‹ä»¶</p><pre><code>ele.onclick = function() {    â€¦â€¦                         //ä½ çš„ä»£ç     return false;              //é€šè¿‡è¿”å›falseå€¼é˜»æ­¢é»˜è®¤äº‹ä»¶è¡Œä¸º};</code></pre><p>ï¼ˆ2ï¼‰event.preventDefault( ); é˜»æ­¢é€šè¿‡ addEventListener( ) æ·»åŠ çš„äº‹ä»¶çš„é»˜è®¤äº‹ä»¶</p><pre><code>element.addEventListener("click", function(e){    var event = e || window.event;    â€¦â€¦    event.preventDefault( );      //é˜»æ­¢é»˜è®¤äº‹ä»¶},false);</code></pre><p>ï¼ˆ3ï¼‰event.returnValue = false; é˜»æ­¢é€šè¿‡ attachEvent( ) æ·»åŠ çš„äº‹ä»¶çš„é»˜è®¤äº‹ä»¶</p><pre><code>element.attachEvent("onclick", function(e){    var event = e || window.event;    â€¦â€¦    event.returnValue = false;       //é˜»æ­¢é»˜è®¤äº‹ä»¶},false);</code></pre><p>5ã€æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠäº‹ä»¶ç»‘å®šä»¥åŠäº‹ä»¶è§£ç»‘å°è£…æˆä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå…¼å®¹æµè§ˆå™¨ï¼ŒåŒ…æ‹¬IE6åŠä»¥ä¸Š</p><pre><code>// äº‹ä»¶ç»‘å®šfunction addEvent(element, eType, handle, bol) {    if(element.addEventListener){           //å¦‚æœæ”¯æŒaddEventListener        element.addEventListener(eType, handle, bol);    }else if(element.attachEvent){          //å¦‚æœæ”¯æŒattachEvent        element.attachEvent("on"+eType, handle);    }else{                                  //å¦åˆ™ä½¿ç”¨å…¼å®¹çš„onclickç»‘å®š        element["on"+eType] = handle;    }}</code></pre><pre><code>// äº‹ä»¶è§£ç»‘function removeEvent(element, eType, handle, bol) {    if(element.addEventListener){        element.removeEventListener(eType, handle, bol);    }else if(element.attachEvent){        element.detachEvent("on"+eType, handle);    }else{        element["on"+eType] = null;    }}</code></pre><p><strong>A.â— äº‹ä»¶å†’æ³¡ã€äº‹ä»¶æ•è·é˜»æ­¢ï¼š</strong></p><pre><code>event.stopPropagation( );                // é˜»æ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ï¼ŒåŒ…æ‹¬ï¼ˆå†’æ³¡ï¼Œæ•è·ï¼‰ï¼Œæ— å‚æ•°event.cancelBubble = true;             // true ä¸ºé˜»æ­¢å†’æ³¡</code></pre><p><strong>B.â— äº‹ä»¶å§”æ‰˜:</strong> åˆ©ç”¨äº‹ä»¶å†’æ³¡çš„ç‰¹æ€§ï¼Œå°†é‡Œå±‚çš„äº‹ä»¶å§”æ‰˜ç»™å¤–å±‚äº‹ä»¶ï¼Œæ ¹æ®eventå¯¹è±¡çš„å±æ€§è¿›è¡Œäº‹ä»¶å§”æ‰˜ï¼Œæ”¹å–„æ€§èƒ½ã€‚ ä½¿ç”¨äº‹ä»¶å§”æ‰˜èƒ½å¤Ÿé¿å…å¯¹ç‰¹å®šçš„æ¯ä¸ªèŠ‚ç‚¹æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼›äº‹ä»¶ç›‘å¬å™¨æ˜¯è¢«æ·»åŠ åˆ°å®ƒä»¬çš„çˆ¶å…ƒç´ ä¸Šã€‚äº‹ä»¶ç›‘å¬å™¨ä¼šåˆ†æä»å­å…ƒç´ å†’æ³¡ä¸Šæ¥çš„äº‹ä»¶ï¼Œæ‰¾åˆ°æ˜¯å“ªä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚</p><p>æ¥ä¸ªä¾‹å­å§ï¼Œå¦‚æœè¦å•ç‹¬ç‚¹å‡»tableé‡Œé¢çš„tdï¼Œæ™®é€šåšæ³•æ˜¯forå¾ªç¯ç»™æ¯ä¸ªtdç»‘å®šäº‹ä»¶ï¼Œtdå°‘çš„è¯æ€§èƒ½ä»€ä¹ˆå·®åˆ«ï¼Œtdå¦‚æœå¤šäº†ï¼Œå°±ä¸è¡Œäº†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº‹ä»¶å§”æ‰˜:</p><pre><code> &lt;!-- HTML --&gt;&lt;table id="out" border="1" style="cursor: pointer;"&gt;    &lt;tr&gt;    ã€€ã€€&lt;td&gt;table01&lt;/td&gt;    ã€€ã€€&lt;td&gt;table02&lt;/td&gt;    ã€€ã€€&lt;td&gt;table03&lt;/td&gt;    ã€€ã€€&lt;td&gt;table04&lt;/td&gt;    ã€€ã€€&lt;td&gt;table05&lt;/td&gt;    ã€€ã€€&lt;td&gt;table06&lt;/td&gt;    ã€€ã€€&lt;td&gt;table07&lt;/td&gt;    ã€€ã€€&lt;td&gt;table08&lt;/td&gt;    ã€€ã€€&lt;td&gt;table09&lt;/td&gt;    ã€€ã€€&lt;td&gt;table10&lt;/td&gt;    &lt;/tr&gt;&lt;/table&gt;</code></pre><pre><code>var out = document.getElementById("out");      if(out.addEventListener){          out.addEventListener("click",function(e){              var e = e||window.event;              //IEæ²¡æœ‰e.targetï¼Œæœ‰e.srcElement              var target = e.target||e.srcElement;             //åˆ¤æ–­äº‹ä»¶ç›®æ ‡æ˜¯å¦æ˜¯tdï¼Œæ˜¯çš„è¯targetå³ä¸ºç›®æ ‡èŠ‚ç‚¹td            if(target.tagName.toLowerCase()=="td"){                 changeStyle(target);                 console.log(target.innerHTML);             }         },false);     }else{         out.attachEvent("onclick",function(e){             var e = e||window.event;             //IEæ²¡æœ‰e.targetï¼Œæœ‰e.srcElement             var target = e.target||e.srcElement;             //åˆ¤æ–­äº‹ä»¶ç›®æ ‡æ˜¯å¦æ˜¯tdï¼Œæ˜¯çš„è¯targetå³ä¸ºç›®æ ‡èŠ‚ç‚¹td             if(target.tagName.toLowerCase()=="td"){                 changeStyle(target);                 console.log(target.innerHTML);             }         });     }; }; function changeStyle(ele){     ele.innerHTML = "å·²ç‚¹å‡»"     ele.style.background="#900";     ele.style.color = "#fff"; }</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'è¯¦è§£','JS','æœºåˆ¶'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>