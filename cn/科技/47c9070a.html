<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>干货！I2C总线的组成及工作原理 | 极客快訊</title><meta property="og:title" content="干货！I2C总线的组成及工作原理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/7734fc1a340746b49d90ec17d26c4c20"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47c9070a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47c9070a.html><meta property="article:published_time" content="2020-10-29T21:09:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:30+08:00"><meta name=Keywords content><meta name=description content="干货！I2C总线的组成及工作原理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/47c9070a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>干货！I2C总线的组成及工作原理</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>I2C总线初识</strong></h1><p>I2C总线只有两根双向信号线。一根是数据线SDA，另一根是时钟线SCL。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7734fc1a340746b49d90ec17d26c4c20></div><p>I2C总线通过上拉电阻接正电源。当总线空闲时，两根线均为高电平。连到总线上的任一器件输出的低电平，都将使总线的信号变低，即各器件的SDA及SCL都是线“与”关系。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1007a8f58a7840d5a53faac973794a4b></div><p>每个接到I2C总线上的器件都有唯一的地址。主机与其它器件间的数据传送可以是由主机发送数据到其它器件，这时主机即为发送器。由总线上接收数据的器件则为接收器。平时我们用单片机控制I2C器件时，单片机为主机，接口器件为从机。</p><h1><strong>I2C总线的数据传送</strong></h1><p><strong>1.数据位的有效性规定</strong></p><p>I2C总线进行数据传送时，时钟信号为高电平期间，数据线上的数据必须保持稳定，只有在时钟线上的信号为低电平期间，数据线上的高电平或低电平状态才允许变化。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/384b7d03b7b94725a3a9fdbb6f648f50></div><p><strong>2.起始和终止信号</strong></p><p>SCL线为高电平期间，SDA线由高电平向低电平的变化表示起始信号；SCL线为高电平期间，SDA线由低电平向高电平的变化表示终止信号。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/04f4132b7e7f40e5b484ffc035463e03></div><p>起始和终止信号都是由主机发出的，在起始信号产生后，总线就处于被占用的状态；在终止信号产生后，总线就处于空闲状态。</p><p><strong>3.数据传送格式</strong></p><p><strong>（1）字节传送与应答</strong></p><p>每一个字节必须保证是8位长度。数据传送时，先传送最高位（MSB），每一个被传送的字节后面都必须跟随一位应答位（即一帧共有9位）。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e594c6f668b641ccbf3502d24717d086></div><p>由于某种原因从机不对主机寻址信号应答时（如从机正在进行实时性的处理工作而无法接收总线上的数据），它必须将数据线置于高电平，而由主机产生一个终止信号以结束总线的数据传送。</p><p>如果从机对主机进行了应答，但在数据传送一段时间后无法继续接收更多的数据时，从机可以通过对无法接收的第一个数据字节的“非应答”通知主机，主机则应发出终止信号以结束数据的继续传送。</p><p>当主机接收数据时，它收到最后一个数据字节后，必须向从机发出一个结束传送的信号。这个信号是由对从机的“非应答”来实现的。然后，从机释放SDA线，以允许主机产生终止信号。</p><p><strong>（2）数据帧格式</strong></p><p>2C总线上传送的数据信号是广义的，既包括地址信号，又包括真正的数据信号。</p><p>在起始信号后必须传送一个从机的地址（7位），第8位是数据的传送方向位（R/），用“0”表示主机发送数据（T），“1”表示主机接收数据（R）。每次数据传送总是由主机产生的终止信号结束。但是，若主机希望继续占用总线进行新的数据传送，则可以不产生终止信号，马上再次发出起始信号对另一从机进行寻址。</p><p>在总线的一次数据传送过程中，可以有以下几种组合方式：</p><p><strong>a</strong>、主机向从机发送数据，数据传送方向在整个传送过程中不变：</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5e5068c6cd3048c9bab4e330939c30c7></div><p>注：有阴影部分表示数据由主机向从机传送，无阴影部分则表示数据由从机向主机传送。A表示应答， 表示非应答（高电平）。S表示起始信号，P表示终止信号。。</p><p><strong>b</strong>、主机在第一个字节后，立即由从机读数据</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/142ce0f21cd34e8cb040b986c2796d28></div><p><strong>c</strong>、在传送过程中，当需要改变传送方向时，起始信号和从机地址都被重复产生一次，但两次读/写方向位正好反相。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/aa888d386dab439bb080a57f460367a3></div><p><strong>4.总线的寻址</strong></p><p>I2C总线协议有明确的规定：采用7位的寻址字节（寻址字节是起始信号后的第一个字节）。</p><p><strong>（1）寻址字节的位定义</strong></p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e6005414a5a549aabaab935f2369226f></div><p>D7～D1位组成从机的地址。D0位是数据传送方向位，为“0”时表示主机向从机写数据，为“1”时表示主机由从机读数据。</p><p>主机发送地址时，总线上的每个从机都将这7位地址码与自己的地址进行比较，如果相同，则认为自己正被主机寻址，根据R/位将自己确定为发送器或接收器。</p><p>从机的地址由固定部分和可编程部分组成。在一个系统中可能希望接入多个相同的从机，从机地址中可编程部分决定了可接入总线该类器件的最大数目。如一个从机的7位寻址位有4位是固定位，3位是可编程位，这时仅能寻址8个同样的器件，即可以有8个同样的器件接入到该I2C总线系统中。</p><p><strong>（2）寻址字节中的特殊地址</strong></p><p>固定地址编号0000和1111已被保留作为特殊用途。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bb2ba6446b2e48099989adf5fef6408a></div><p>起始信号后的第一字节的8位为“0000 0000”时，称为通用呼叫地址。通用呼叫地址的用意在第二字节中加以说明。格式为：</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cdc67d5888c54853946c9dec4951ea19></div><p>第二字节为 06H时，所有能响应通用呼叫地址的从机器件复位，并由硬件装入从机地址的可编程部分。能响应命令的从机器件复位时不拉低SDA和SCL线，以免堵塞总线。</p><p>第二字节为 04H时，所有能响应通用呼叫地址并通过硬件来定义其可编程地址的从机器件将锁定地址中的可编程位，但不进行复位。</p><p>如果第二字节的方向位B为“1”，则这两个字节命令称为硬件通用呼叫命令。</p><p>在这第二字节的高7位说明自己的地址。接在总线上的智能器件，如单片机或其他微处理器能识别这个地址，并与之传送数据。硬件主器件作为从机使用时，也用这个地址作为从机地址。格式为：</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1be4e2feb52141738f804c5ddea1e70c></div><p>在系统中另一种选择可能是系统复位时硬件主机器件工作在从机接收器方式，这时由系统中的主机先告诉硬件主机器件数据应送往的从机器件地址，当硬件主机器件要发送数据时就可以直接向指定从机器件发送数据了。</p><p><strong>（3）起始字节</strong></p><p>起始字节是提供给没有I2C总线接口的单片机查询I2C总线时使用的特殊字节。</p><p>不具备I2C总线接口的单片机，则必须通过软件不断地检测总线，以便及时地响应总线的请求。单片机的速度与硬件接口器件的速度就出现了较大的差别，为此，I2C总线上的数据传送要由一个较长的起始过程加以引导。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bc41bd91c9fe45249bc45a2d4ab325da></div><p>引导过程由起始信号、起始字节、应答位、重复起始信号（Sr）组成。</p><p>请求访问总线的主机发出起始信号后，发送起始字节（0000 0001），另一个单片机可以用一个比较低的速率采样SDA线，直到检测到起始字节中的7个“0”中的一个为止。在检测到SDA线上的高电平后，单片机就可以用较高的采样速率，以便寻找作为同步信号使用的第二个起始信号Sr。</p><p>在起始信号后的应答时钟脉冲仅仅是为了和总线所使用的格式一致，并不要求器件在这个脉冲期间作应答。</p><p><strong>以上文档已整理成PDF格式，有需要的朋友请私信“I2C资料”获取PDF.</strong></p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bd26099b3e4d4204b37f41ce676a04c5><p class=pgc-img-caption>私信“I2C资料”获取</p></div><p>欢迎转发，评论，点赞，关注奔跑的晶体管可以学习更多电子相关知识哦。</p><div class=pgc-img><img alt=干货！I2C总线的组成及工作原理 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6252b89f97c34144933a976f6c1c78ed></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'干货','I2C','总线'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>