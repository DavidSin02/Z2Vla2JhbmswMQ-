<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>初学uni-app，把网站变APP | 极客快訊</title><meta property="og:title" content="初学uni-app，把网站变APP - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/5279702e9ec848a48e90202a932dad7b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4816df3.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4816df3.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4816df3.html><meta property="article:published_time" content="2020-10-29T20:54:48+08:00"><meta property="article:modified_time" content="2020-10-29T20:54:48+08:00"><meta name=Keywords content><meta name=description content="初学uni-app，把网站变APP"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4816df3.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>初学uni-app，把网站变APP</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>快速入门uni-app，把想看的网站变APP。</strong></h1><hr><p>下载hbuildx，这里官方提供了几种安装包，有完全版，还有beta版，还有标准版，随便下一个吧，或者直接下载标准版的，因为它最小。</p><p>1.创建uni-app，直接选择uni-app 默认模版（hello-app项目可以拿来看看，不建议开发时使用，wap2app是针对wap转app端的，5+app 使用htmlplus，uni-app对html5+ 进行了整合，并建议直接使用uni-app即可，小程序那就是小程序咯，让我们心大一点，练习多端吧）</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5279702e9ec848a48e90202a932dad7b><p class=pgc-img-caption></p></div><p>关于目录结构，可以在开放规范中看到或者直接创建一个heoll 模版项目看看，各个文件夹之间的关系和作用都比较明确，对于uni-app的配置文件需要仔细看看。</p><p>2.配置</p><p>manifest.json 这个文件在移动应用中屡见不鲜，在uni-app也有关这个文件的解释https://developer.mozilla.org/zh-CN/docs/Web/Manifest</p><p>文件是应用的配置文件，用于指定应用的名称、图标、权限等。个人觉得就是映射，在不同的环境下具体的左右略有不同，比如webpack 中是指向原始文件的映射关系等。</p><p>uni-app 中有一些自定义属性比如appid，是用来标识云端编译用的。https://ask.dcloud.net.cn/article/35907</p><p>在ide中打开这个文件，会有一个新的视图，是中文的，如果你要详细了解关系，可以到文件目录下打开这个文件查看或者直接点击最下方的源码视图进行查看。另外有一些配置可能找不到，但是在源码视图中可以找到，还有一些配置，默认项目是没有的，比如超时时间的设置。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9c8f135665704a3897b7c0267a8560b2><p class=pgc-img-caption></p></div><p>启动图：配置.9 图片制作流程 https://ask.dcloud.net.cn/article/35527</p><p>打开下载工具 draw9patch.bat（这里我没有打开，处理文件报错，不去深究了，看第二种方法，通过as，打开as）</p><p>新建一个as项目，找一个png图片丢到as中，右键创建.9 图片</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/010bfdfea2e34fc9a09ed0e3715c44dd><p class=pgc-img-caption></p></div><p>打开这个文件，点击鼠标座标在边上即可调整拉伸区域与内容区域，类似下面这种，关于四个边的概念大家去看下文档，类似下面这种内容居中的图片（一般都是这样），拉伸的时候左右两侧和上下两侧拉伸空白，在操作的时候需要先control选择拉伸区域，然后再shift 去掉一部分的拉伸器区域~</p><p>像这样搞定后就行了，然后根据uni-app的规定指定图片大小上传。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/936d248d0aeb407e801b8bc56ca9b368><p class=pgc-img-caption></p></div><p>另外：此用法只适用与android，ios就一个个上传吧。</p><p>查看json源码，其中有一项为第三方sdk，配置后可使用第三方sdk的集成，一些常用的第三方sdk已集成，比如授权登录、分享、支付等。</p><p>更多的配置自行看吧，再此不表。</p><p>第二个配置文件 pages.json 看名字就看的出来是配置页面用的</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/da2f1e7f98034358b591dc544c9053dd><p class=pgc-img-caption></p></div><p>关于pages，新增的页面需要追到到page文件中，定义全局样式后，每个page可以单独的配置其style。</p><p>另外在pages目录下新增页面的时候，配置文件中会自动追加和删除相关page。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0339a9a7bdb14925adfda8a3bdd3a853><p class=pgc-img-caption></p></div><p>其中关于导航栏，官方建议使用原生又uni-app提供的原生导航，如果自定义导航，可能会有很多问题，https://ask.dcloud.net.cn/article/34921</p><p>尤其是前端导航与下拉刷新之间的冲突。</p><p>关于subNVue，这里解释一下nvue，刚开始看的时候我也有点懵，啥意思，vue提供的新扩展吗？并不是，nvue 是与native.js 结合的一种组件规范，它可以直接调用原生代码中的api，官方建议是只是在有特定需求的地方使用nvue，</p><p>而这里提到的subNVue 指的是通过nvue 创建的一种子窗口组件，它使用的是原生渲染的方式，通过窗口进行的实现，在做一些浮动的时候，比如遮罩蒙板，视频弹幕这种的时候用得上。</p><p>所以使用nvue的时候想要调试必须在终端环境，模拟器或者微信工具。如果运行之前应该有记录，这里不表。</p><p>多页面通讯：有两种，官方推荐新的方式，注册监听</p><pre>uni.$on('page-popup', (data) =&gt; {  vm.title = data.title;  vm.content = data.content; }) uni.$emit('page-popup', {  title: '我是一个title',  content: '我试data content'}); 另，官方提供了一些建议：所以不要滥用它为好</pre><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/edf10d878b3e4c1ea3ee2a410e689c5d><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1057ff598ac04fe29d3295d5efa5630f><p class=pgc-img-caption></p></div><p>还有就是关于subNVue的style 并不是我们平时理解的所有样式表，它自有规则，具体请看官网，其中有几个重要的属性，比如type、position、dock。</p><p>conditon：</p><p>指定页面，也就说不要不用每次启动都要重新点一遍来看，只需要指定我们当前调试的页面即可，这个配置只在开发时候生效，正式编译打包后不起作用。</p><ul><li><br></li></ul><pre>"condition":{ "current":0, "list":[ { "name":"me", "path":"pages/me/me", "query":"" } ] }</pre><p>分包：这里是针对小程序的，因为小程序对包的大小有限制，所以在上传小程序的时候需要对包进行管理，小程序允许分包的存在。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b074935422f34227b4bc030a98344820><p class=pgc-img-caption></p></div><p>另外在配置这个文档中还有package.json ，vue-config.json , uni.scss 的介绍</p><p>package.json ：因为uni-app 是基于vue的，在编译时又是依赖与node的，所以可以添加打包文件，若是通过cli创建的项目，必须自己进行配置，对于通过ide创建的项目，则看需求。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/52c7da6eaa204dee8ed9918b20ea549a><p class=pgc-img-caption></p></div><p>vue.config.js 类似webpack它们都有配置文件或直接通过cli进行打包或编译。其中有一些uni-app不支持，知晓即可。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5470c6ea5b7f4941a371859f5c9840fc><p class=pgc-img-caption></p></div><p>对于内置的scss，可以进行应用与修改，其中的变量通过在style标签中指定lang 即可进行引用。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153da94e3cdd455189771759a7688261><p class=pgc-img-caption></p></div><p>另外日志什么的，有的集中类型不多说了，在HBuilder里可以使用代码块，可以快速补全。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d60b8d85eb434d38864451ccf0146896><p class=pgc-img-caption></p></div><p><strong>生命周期</strong>：</p><p>这个标题标红，个人认为生命周期对于一个框架来说非常的重要。</p><p>1.应用生命周期：最后一个监听，比如之前说的nvue和vue之间交互就用它。</p><p>应用生命周期监听一般都在APP.VUE 中进行注册监听，作为app的主入口。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/01744f14e5a24b498c1fe2aa3b223b67><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/39c4732f96b24de9b7755ffc2fc0e560><p class=pgc-img-caption></p></div><p>应用启动会，监听的回调执行相关逻辑。</p><p>h5 打印效果如下：</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5322a1fda8704273a34e2ea2efe0c34d><p class=pgc-img-caption></p></div><p>2.页面监听函数</p><p>相比应用监听函数，页面监听函数使用的是最多的，uni-app 提供了很多内置钩子，不截图了，比较多。</p><p>这里的onLoad 和onShow 给我感觉特别好，相比apicloud 每次新的页面打开，除非设置强制刷新，否则会进行缓存，要么每次打开的时候发送消息事件，一个入口还好，</p><p>如果多个入口，会特别痛苦，除非自己再定义一个工具类什么，而uni-app的这2个钩子，可以说完美的避开了这些琐事，再次显示的时候，我们可以做一些其他事情了。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/02d84f9d7c1c448da2211bb8836b28ec><p class=pgc-img-caption></p></div><p>另外对于小程序中的一些固定导航按钮，同样有他们的钩子</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/00bede3c09994292b4911385581ba321><p class=pgc-img-caption></p></div><p>并且，页面滚动不要自己再去监听dom什么的了，直接提供了钩子，方便多了。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf3ea007e7dc4033b3fd74aa42586d78><p class=pgc-img-caption></p></div><p>还有，对于原生搜索框，也就是之前提到的searchInput 也提供了回调</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9de7830f87db4cec9b438ae28f38a9cc><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fdcadca8998a41a1bc91ec1a7e6a7e9b><p class=pgc-img-caption></p></div><p>关于nvue的声明周期：基本上与vue保持一致性。</p><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/72b7c7557a864aefb9b4f2aef90fd04e><p class=pgc-img-caption></p></div><p>关于各个页面之间通讯：</p><p>使用uni-app 提供的事件自定义监听机制可以对其进行监听。（因为是uni所以只能是终端测试）。</p><p>全局监听提供了4个函数：</p><ul><li><br></li></ul><pre>uni.$emit(eventName,OBJECT)uni.$on(eventName,callback)uni.$once(eventName,callback)uni.$off([eventName, callback])// 基本上vue、jqeruy 还有一些第三方库都有类似的函数</pre><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9a6fcfe1885c4b20b9204bc436a7724c><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=初学uni-app，把网站变APP onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c3a9bd68e2eb44dabe7fb5cabfbbe75d><p class=pgc-img-caption>关注吧</p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'初学','uni','app'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>