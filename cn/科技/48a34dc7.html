<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 | 极客快訊</title><meta property="og:title" content="收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/61e177b5ce8a4fa788f637d8852456be"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/48a34dc7.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/48a34dc7.html><meta property="article:published_time" content="2020-11-14T21:03:14+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:14+08:00"><meta name=Keywords content><meta name=description content="收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/48a34dc7.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>为了结构化程序设计，STEP 7将用户程序分类归并为不同的块，根据程序要求，可选用组织块（OB）、功能块（FB）、或功能（FC)三种类型的逻辑块，而数据块（DB）或（DI）则用来存储执行用户程序时所需的数据。</p><p>三种编程方法：</p><p>（一）线性编程：将整个用户程序写在一个指令连续的块中，处理器线性地或顺序地扫描程序的每条指令。</p><p>（二）分部编程：将用户程序分成相对独立的指令块、每个块包含给定的部件组或作业组的控制逻辑。</p><p>（三）结构化编程：要求用户程序提供一些通用的指令块，以便控制一类相似或相同的部件，给通用指令提供的参数进一步说明各部件的控制差异。</p><p>一、数据块及其数据结构</p><p>用户程序运行所需的大量数据或变量存储在数据块中，数据块也是实现各逻辑块之间交换、传递和共享数据的重要途径。 对于CPU 314，用作数据块的存储器最多8KB，用户定义的数据总量不能超过这个限制。对于数据块必须遵循先定义后使用的原则。</p><p>1、定义数据块</p><p>定义内容包括数据块号及块中的变量（包括：变量符号名，数据类型以及初始值等）。数据块在使用前，必须作为用户程序的一部分下载到CPU 中。</p><p>2、访问数据块</p><p>访问时需要明确数据块号和数据块中的数据类型与位置。根据明确数据块号的不同方法，可以用以多种方法访问数据块中的数据。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/61e177b5ce8a4fa788f637d8852456be><p class=pgc-img-caption></p></div><p>由于有两个数据块寄存器（DB和DI寄存器），所以，最多可以同时打开两个数据块。一个作为背景数据块，数据块的起始地址存储在DI寄存 器中；另一个作为共享数据块，数据块的起始地址存储在DB寄存器中。 打开背景数据块，在调用FB时可以自动实现，由于调用FB时使用DI 寄存器，所以，一般不在FB程序中用OPN DI n指令打开数据块。</p><p>3、背景数据块和共享数据块 任何FB、FC或OB均可读写存放在共享数据块中的数据。背景数据块是FB运行时的工作存储区，它存放FB的部分运行变量。调用FB时， 必须指定一个相关的背景数据块。作为规则，只有FB块才能访问存放 在背景数据块中的数据。一般情况下，每个FB都有一个对应的背景数 据块，一个FB也可以使用不同的背景数据块。如果几个FB需要的背景数据完全相同，为节省存储器，则可以定义成一个背景数据块，供它们分别使用。</p><p>二、数据结构</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c14e96e75d7b483d8f4090270c23a147><p class=pgc-img-caption></p></div><p>1、用户数据类型</p><p>STEP 7允许将基本或复式组合成“用户”自已定义的数据类型，这种类型称为用户数据类型（UDT）。用户数据类型必须首先单独建立，并存放 在称为UDT的特殊数据块中。</p><p>建立用户数据类型的目的，是为了将UDT作为一种数据类型使用，以方便定义多个结构相同的构造变量。</p><p>2、功能块编程及调用</p><p>一个程序由许多部分（子程序）组成，STEP 7将这些部分称为逻辑块，并允许块间相互调用。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a66a8ef00dcc4f6c86f3ea245554b616><p class=pgc-img-caption></p></div><p>功能块由两个主要部分组成：一部分是每个功能块的变量声明表，变量声表声明此块的局部数据；另一部分是逻辑指令组成的程序，程序要用到变量声明表中给出的局部数据。</p><p>当调用功能块时，需要提供块执行时要用到的数据或变量，也就是将外部数据传递给功能块，这称为参数传递。</p><p>3、变量声明表（局部数据）</p><p>局部数据分为参数和局部变量两大类，局部变量又包括静态变量和临时变量（暂态变量）两种。参数是在调用块和被调用块间传递的数据。静态变量和临时变量是仅供逻辑块本身使用的数据。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cf0b1ff04c0e41d4b4a33d459d29981d><p class=pgc-img-caption></p></div><p>4、逻辑块局部数据的数据类型</p><p>在变量声明表中，要明确局部数据的数据类型，这样操作系统才能给变量分配确定的存储空间。局部数据可以是基本数据类型或是复式数据类型， 也可以是专门用于参数传递的所谓“参数类型”。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3e493598d33e43ecacca8aafb73e77a4><p class=pgc-img-caption></p></div><p>STEP 7对分配给块局部数据（在变量声明表中）的数据类型（基本、复式、参数）是有一定限制的。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b93834c53eb74fc295805b30992b9a7b><p class=pgc-img-caption></p></div><p>STEP 7允许用物理地址（绝对地址）或符号地址或常数等形式作为实参给形参赋值，但对于不同的形参类型，STEP 7限制了赋值形式。</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ee905b53f448476bbeb1cfdf9d2934fc><p class=pgc-img-caption></p></div><p>5、功能块编程与调用举例对功能块编程分两步进行:第一步工作是定义局部变量（填写局部变量表）；第二步是编写要执行的程序。写功能块程序时，可以两种方式使用局部变量：</p><p>①使用变量名，此时变量名前缀“＃”，以区别于在符号表中定义的符号地址，增量方式下，前缀 会自动产生；</p><p>②直接使用局部变量的地址，这种方式只对背景数据块和L堆 栈有效。</p><p>例一：二分频器</p><p>二分频器是一种具有一个输入端和一个输出端的功能单元,输出频率为输入频率的一半。</p><p>（1）FC1的变量声明表</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e648cd1b76014ae69abceda1cdb05167><p class=pgc-img-caption></p></div><p>（2）FC1梯形图程序</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3e3e2d97db1c4b68867ca6bc0a2ac68f><p class=pgc-img-caption></p></div><p>（3）OB1调用梯形图程序</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a6abc56caea540c69e5d752e74fcf1a5><p class=pgc-img-caption></p></div><p>例二：时钟脉冲发生器</p><p>使用定时器实现自由设定时钟脉冲发生器功能脉冲占空系数1:1。</p><p>（1）FC1变量声明表</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/90be0301ce3046f786c1fc76f9147077><p class=pgc-img-caption></p></div><p>（2）FC1梯形图程序</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/de18334aa982411e9e46bae39f9a8ca6><p class=pgc-img-caption></p></div><p>（3）OB1调用梯形图程序</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e1303b981cd841bc91b72f775b625f7c><p class=pgc-img-caption></p></div><p>三、可编程序控制器应用设计</p><p>PLC系统设计步骤：</p><div class=pgc-img><img alt=收好不谢！学西门子PLC必备，如何高效的编程及定义程序的结构 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/09678a983fb34d179ced8246236f1144><p class=pgc-img-caption></p></div><p>以上，欢迎动动手分享及收藏！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'不谢','学西门子','PLC'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>