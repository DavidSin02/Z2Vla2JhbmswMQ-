<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 | 极客快訊</title><meta property="og:title" content="介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/153430263281697d780903a"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4a48ddee.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4a48ddee.html><meta property="article:published_time" content="2020-11-14T21:01:48+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:48+08:00"><meta name=Keywords content><meta name=description content="介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4a48ddee.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>话不多说先上图</h1><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153430263281697d780903a><p class=pgc-img-caption>图片源于嵌入式开发</p></div><h1><strong>内容摘要</strong></h1><p>本文提出一种高性能全数字式正弦波逆变电源的设计方案。该方案分为前后两级，前级采用推挽升压电路将输入的直流电升压到350V左右的母线电压，后级采用全桥逆变电路，逆变桥输出经滤波器滤波后，用隔离变压器进行电压采样，电流互感器进行电流采样，以形成反馈环节，增加电源输出的稳定性。</p><p>升压级PWM驱动及逆变级SPWM驱动均由STM32单片机产生，减小了硬件开支。基于上述方案试制的400W样机，具有输出短路保护、过流保护及输入过压保护、欠压保护功能，50Hz输出时频率偏差小于0.05Hz，满载(400W)效率高于87%，电压精度为220V±1%，THD小于1.5%.</p><p>逆变电源应用广泛，特别是精密仪器对逆变电源的性能要求更高。高性能逆变电源不仅要求工作稳定、逆变效率高、输出波形特性好、保护功能齐全，还要求逆变电源小型化、智能化、并且具备可扩展性。文中提出一种基于STM32系列单片机STM32F103VE的纯数字式正弦逆变电源，该电源的全部功能由单片机控制实现，具有输出电压、频率稳定，效率高，保护功能齐全的特点。</p><h1>系统总体架构</h1><p>系统的整体框架如图1所示。系统采用高频逆变方案，即前级升压加后级逆变的结构，这样可以避免使用笨重的工频变压器，有效的降低了电源的体积、重量及成本，提升电源的效率。电路的工作原理是，12 V的直流输入电压经过滤波后由推挽升压和全桥整流升压到350 V的直流母线电压，再经过全桥逆变电路转变为220 V/50 Hz的工频交流电，采样电路对相应点进行采样，以实现闭环控制及保护功能。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534302668746c352d0a438><p class=pgc-img-caption>图1 源于网络</p></div><p>由于大电流条件下，功率管驱动信号占空比过小会导致发热严重，效率降低，故逆变电源的前级采用准开环的控制方式，即输入电压在一定范围内时，驱动信号占空比开到最大并保持不变，输入电压过高时，减小占空比，维持母线电压在一定范围内。这样做的好处是，可以使前级升压获得较高的效率。</p><h1>系统硬件设计</h1><p>逆变电源硬件结构如图2所示。主要包括直流推挽升压电路、正弦逆变电路、输出滤波电路、驱动电路、采样电路、主控制器和点阵液晶构成。其中，直流升压部分将输入电压升高至输出正弦交流电的峰值以上的母线直流电压，正弦逆变部分将母线直流电压逆变后经输出滤波电路得到正弦式交流电，采样电路则对母线电压、母线电流、输出电压、输出电流、输入电压进行采样，以实现短路保护、过压欠压保护、过流保护、闭环稳压等功能。驱动电路的功能是将驱动信号的逻辑电平进行匹配放大，以满足驱动功率管的要求。控制电路的功能是产生驱动信号，并对采样信号进行处理，以实现复杂的系统功能。点阵液晶的功能是显示系统工作信息，如果输出电压、电流以及保护信息等。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1534302668718ea71e0389c><p class=pgc-img-caption>图2 源于网络</p></div><p>1)主控制器</p><p>主控制器选用STM32F103VE增强型单片机，STM32系列单片机是意法半导体公司专门为高性能、低成本、低功耗的嵌入式应用设计的产品。此单片机采用哈佛结构，使处理器可以同时进行取址和数据读写操作，处理器的性能高达1.25 MIPS/MHz.支持单周期硬件乘除法，最高时钟频率72 M，最大可达512 kB片上Flash及64 kB片上RAM.同时具有多达30路PWM及3个12位精度的ADC等众多适合做逆变及电机驱动的外设。在本系统中用于产生PWM、SPWM驱动信号，并对采样信号进行处理，以完成稳压反馈及保护功能，并驱动点阵液晶显示系统信息。考虑实际的功率管及驱动芯片的速度，升压PWM波的频率为20 kHz，逆变SPWM波的频率为18 kHz.根据调制方法的不同，SPWM驱动信号形式可以分为：双极性、单极性和单极性倍频。由于双极性调制失真度小，故本设计中SPWM采用双极性驱动方式。</p><p>2)点阵液晶</p><p>选用LPH7366型点阵液晶，具有超低功耗的特点。用于显示系统当前的工作状态，如输出电压、输出电流、输入电压等信息。同时指示系统是否处于保护以及处于何种保护状态。</p><p>3)辅助电源</p><p>为系统不同部分提供不同的电压电需求，由直流输入电压经LM2596—5 V降压到5.0 V后一部分为采样电路供电，另一部分经LDO稳压器LM117—3.3 V稳压到3.3 V供处理器及点阵液晶使用。同时，由推挽变压器的一个辅助绕组得到20 V左右的电压，经整流滤波及LM2596-ADJ稳压到15 V后供驱动电路使用。</p><p>4)驱动电路</p><p>选用东芝半导体公司生产的高速光耦隔离型IGBT/MOSFET驱动芯片TLP250.TLP250具有隔离电压高、驱动能力强、开关速度快等特点。驱动电路的原理图如图3所示。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1534302668646416c5d6f6f><p class=pgc-img-caption>图3 驱动电路原理图 源于网络</p></div><p>在推挽升压驱动(U1、U2)中，TLP250负责驱动信号幅值与电流的匹配，而对于全桥逆变驱动(U3、U4、U5、U6)，不但要考虑驱动电平和驱动能力，还要考虑好上下管驱动信号的隔离问题。为简化设计，全桥逆变的上管驱动(U3、U5)采用了自举供电的方式，减少隔离电源的使用数目。</p><p>对逆变桥的驱动电路，为避免上下管直通，设计中需要考虑死区问题。STM32单片机的PWM模块具有死区功能，本设计采取了软件死区方法。这样做的另一个好处是，对不同的功率管只需改变软件设计即可获得最佳的死区参数。</p><p>5)采样电路</p><p>输出电压采样用于反馈稳压，输出电流采样用于过载保护，母线电流采样用于短路保护，母线电压采样用于限制母线电压虚高，输入电压采样用于输入过压/欠压保护。输出采样中使用了电流互感器与电压互感器，大大减小了系统干扰，提高了系统的可靠性。取样电路的原理图如图4所示。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153430266880509610048ea><p class=pgc-img-caption>图4 取样电路原理图</p></div><p>对于输出电流取样，本设计中使用了5 A/5 mA电流互感器。由于电流互感器的输出为毫伏级的交流信号，为了能够被单片机内部AD模块采集到，必须将其整流成直流信号并加以放大。而普通二极管整流电路对毫伏级电压是无效的，因此，此处采用了由运算放大器(U11，LM3 58)构成的小电压整流电路。实际测试表明，该电路有效解决了毫伏级信号的采样问题。</p><h1>系统软件设计</h1><p>为了提高系统的可读性以及代码效率，软件采用状态机思想设计，图5所示为系统的状态转换图。系统上电复位后进入SAMPLE采样状态，若检测到采样完成标志FINISH则进入JUDGE状态进行判断，如果FAULT不为0即有故障信号(过压/欠压、过载、短路)，则进入PROTECT状态关闭输出，并跳转到WAIT状态等待故障信号消除。当故障信号消除后，系统软重启，开始新的采样及检测。JUDGE状态后如果未检测到故障信号，则进入NORMAL正常状态，进行电压调整。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15343026687097d4ccd3585><p class=pgc-img-caption>图5</p></div><p>系统上电后，首先完成各个外设的初始化，主要包括系统时钟、定时器、GPIO口、ADC、DMA、中断及SPI的初始化。在此，定时器和中断一旦初始化完成，PWM及SPWM波就会生成。考虑到过流、短路保护及反馈稳压的实时性要求较高，故在中断内完成。欠压、过压对实时性要求低，放在主程序内。为提升系统的性能，ADC采样使用DMA方式传输数据，传输完成后，发出中断申请，对采集到的数据进行简单滤波处理，其他功能函数调用此数据完成相应的保护及稳压功能。主程序的流程图如图6所示。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534302668746e8af2857a3><p class=pgc-img-caption>图6</p></div><h1>调试与实验</h1><p>根据以上思想试制一台400 W的样机，采用IRF3205作为推挽升压的功率管，HER307作为整流二极管，全桥逆变功率管则采用IRF840.前级升压的PWM波频率设置为20 kHz，后级SPWM波的频率设置为18 kHz，输出滤波电感L为1 mH，输出滤波电容C为4.7μF.实际测试正弦交流输出电压精度为220 V±1%，频率精度为50 Hz±0.1%，THD小于1.5%，逆变效率大于87%，其满负载时的试验波形如图7所示(输出经20 kΩ/100 kΩ电阻分压测到)。</p><div class=pgc-img><img alt=介绍一款基于STM32高性能全数字式正弦波逆变电源的设计方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534302668888b6ec00fca9><p class=pgc-img-caption>图7</p></div><h1>结语</h1><p>文中完整地讨论了以STM32单片机为主控制器的数控正弦波逆变电源的设计方案，并对其中涉及关键问题进行了详细的讨论。针对高端电子设备对逆变电源的更高要求，提出了一种有效的解决途径。使用该设计方案在简化逆变电源的硬件设计的同时，大大提升了电源的品质与性能，具有很高的推广价值。</p><p>说明：本文源于网络，欢迎转发分享！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'介绍','STM32','全数'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>