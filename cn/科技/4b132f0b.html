<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>单片机软件抗干扰技术 | 极客快訊</title><meta property="og:title" content="单片机软件抗干扰技术 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/9e53f2d66b104ac58fd26c4cf6baf670"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><meta property="article:published_time" content="2020-10-29T21:11:19+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:19+08:00"><meta name=Keywords content><meta name=description content="单片机软件抗干扰技术"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4b132f0b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>单片机软件抗干扰技术</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>电子仪器设备的抗干扰技术是一门博大精深的领域。大部分的电子设备所在的工作环境往往比较恶劣，干扰严重，这些干扰会严重影响设备的正常工作，使其不能正常运行，比如空调就工作在高温、大电流、强干扰(电机)的环境下。因此，为了保证这些设备能在实际应用中可靠地工作，必须要周密考虑和解决抗干扰的问题。除了在硬件上考虑抗干扰的问题，我们也可以在软件上做一些抗干扰的措施，来提高系统的抗干扰能力。下面简单介绍了几个抗干扰的措施，起一个抛砖引玉的作用，希望各位同事可以在工作中加以应用和完善。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9e53f2d66b104ac58fd26c4cf6baf670><p class=pgc-img-caption></p></div><p>一、数字量输入输出中的软件抗于扰</p><p>数字量输入过程中的干扰，其作用时间较短，因此在采集数字信号时，可多次重复采集，直到若干次采样结果一致时才认为其有效。例如通过A/D转换器测量各种模拟量时，如果有干扰作用于模拟信号上，就会使A/D转换结果偏离真实值。这时如果只采样一次A/D转换结果，就无法知道其是否真实可靠，而必须进行多次采样，得到一个A/D转换结果的数据系列，对这一系列数据再作各种数字滤波处理，最后才能得到一个可信度较高的结果值。如果对于同一个数据点经多次采样后得到的信号值变化不定，说明此时的干扰特别严重，已经超出允许的范围，应该立即停止采样并给出报警信号。如果数字信号属于开关量信号，如限位开关、<span>操作按扭</span>等，则不能用多次采样取平均值的方法，而必须每次采样结果绝对一致才行。这时可编写一个采样子程序，程序中设置有采样成功和采样失败标志，如果对同一开关量信号进行若干次采样，其采样结果完全一致，则成功标志置位;否则失败标志<span>置位</span>。后续程序可通过判别这些标志来决定程序的流向。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0f99448952934208a1a08e59d0ff374a><p class=pgc-img-caption></p></div><p>单片机控制的设备对外输出的控制信号很多是以数字量的形式出现的。单片机给出一个正确的数据后，由于外部干扰的作用有可能使输出装置得到一个被改变了的错误数据，从而使输出装置发生误动作。对于数字量输出软件抗干扰最有效的方法是重复输出同一个数据，重复周期应尽量短。这样输出装置在得到一个被干扰的错误信号后，还来不及反应，一个正确的信号又来到了，从而可以防止误动作的产生。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/efea0fc2972e49fbaecd3a16e5220f4c><p class=pgc-img-caption></p></div><p>在程序结构上，可将输出过程安排在监控循环中。循环周期取得尽可能短，就能有效地防止输出设备的错误动作。需要注意的是。经过这种安排后输出功能是作为一个完整的模块来执行的，与这种重复输出措施相对应。软件设计中还必须为各个外部输出设备建立一个输出暂存单元，每次将应输出的结果存入暂存单元中，然后再调用输出功能模块将各暂存单元的数据一一输出，不管该数据是刚送来的，还是以前就有的。这样可以让每个外部设备不断得到控制数据，从而使干扰造成的错误状态不能得以维持。在执行输出功能模块时，应将有关输出接口芯片的初始状态也一并重新设置。因为由于干扰的作用可能使这些芯片的工作方式控制字发生变化，而不能实现正确的输出功能，重新设置控制字就能避免这种错误.确保输出功能的正确实现。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6077ceea2d034ebab89671a6525ebc93><p class=pgc-img-caption></p></div><p>二、程序执行过程中的软件抗于扰</p><p>前面述及的是针对输入输出通道而言的，干扰信号还未作用到CPU本身，CPU还能正确地执行各种抗干扰程序。如果干扰信号已经通过某种途径作用到了CPU上，则CPU就不能按正常状态执行程序，从而引起混乱，这就是通常所说的程序“跑飞”。程序“跑飞”后使其恢复正常的一个最简单的方法是使CPU复位，让程序从头开始重新运行。很多单片机控制的设备中都有设置人工复位电路。人工复位一般是在整个系统已经完全瘫痪，无计可施的情况下才不得已而为之的。因此在进行软件设计时就要考虑到万一程序“跑飞”，应让其能够自动恢复到正常状态下运行。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a9ed1c979bc4f6883ad607688e982ab><p class=pgc-img-caption></p></div><p>程序“跑飞”后往往将一些操作数当作指令码来执行，从而引起整个程序的混乱。采用“指令冗余”是使“跑飞”的程序恢复正常的一种措施。所谓“指令冗余”，就是在一些关键的地方人为地插入一些单字节的空操作指令NOP。当程序“跑飞”到某条单字节指令上时，就不会发生将操作数当成指令来执行的错误。对于MCS51单片机来说，所有的指令都不会超过3个字节，因此在某条指令前面插入两条NOP指令，则该条指令就不会被前面冲下来的失控程序拆散，而会得到完整的执行，从而使程序重新纳入正常轨道。通常是在一些对程序的流向起关键作用的指令前面插入两条NOP指令。应该注意的是在一个程序中“指令冗余”不能使用过多，否则会降低程序的执行效率。</p><div class=pgc-img><img alt=单片机软件抗干扰技术 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/175338d31e0d4208a1dfa4f562b800e6><p class=pgc-img-caption></p></div><p>采用“指令冗余”使“跑飞”的程序恢复正常是有条件的，首先“跑飞”的程序必须落到程序区，其次必须执行到所设置的冗余指令。如果“跑飞”的程序落到非程序区(如 EPROM中未用完的空间或某些数据表格等)，或在执行到冗余指令之前已经形成了一个死循环，则“指令冗余”措施就不能使“跑飞”的程序恢复正常了。这时可以采用另一种软件抗干扰措施，即肠胃“软件陷阱”。“软件陷阱”是一条引导指令，强行将捕获的程序引向一个指定的地址，在那里有一段专门处理错误的程序。假设这段处理错误的程序入口地址为ERR，则下面三条指令即组成一个“软件陷阱”</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'单片','机软件','抗干扰'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>