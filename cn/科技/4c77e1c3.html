<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ | æå®¢å¿«è¨Š</title><meta property="og:title" content="è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/221ad8e63e62434eb3b54b7f20b6154c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4c77e1c3.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4c77e1c3.html><meta property="article:published_time" content="2020-11-14T21:08:29+08:00"><meta property="article:modified_time" content="2020-11-14T21:08:29+08:00"><meta name=Keywords content><meta name=description content="è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4c77e1c3.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>æ¥ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œåœ¨äº†è§£ApacheåŸºæœ¬é…ç½®ä»¥åŠSELinuxç›¸å…³çŸ¥è¯†åï¼Œç»§ç»­æ¼”ç¤ºApacheæä¾›çš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½ä»¥åŠè®¿é—®æ§åˆ¶æ–¹å¼ã€‚</p><p>å¦‚æœè¿˜æ²¡çœ‹ä¸Šä¸€ç¯‡çš„å»ºè®®å…ˆæŸ¥çœ‹åå†æ¥ï¼Œä¸Šç¯‡æ–‡ç« â€œlinuxå…¥é—¨ç³»åˆ—18--webæœåŠ¡ä¹‹apacheæœåŠ¡1â€ã€‚</p><h3 class="md-end-block md-heading">ä¸‰ã€Apacheè™šæ‹Ÿä¸»æœºåŠŸèƒ½</h3><p>å¦‚æœæ—©æœŸä½ éƒ¨ç½²è¿‡ç½‘ç«™ï¼Œç›¸ä¿¡ä¸€å®šçŸ¥é“è™šæ‹Ÿæœºä¸»æœºã€VPSç­‰æ¦‚å¿µï¼Œå°¤å…¶æ˜¯2000å¹´å‰åå»ºç«™éå¸¸æµè¡Œï¼Œç”šè‡³è¯ç”Ÿäº†å¾ˆå¤šæˆåŠŸçš„è‰æ ¹ç«™é•¿ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†ç½‘ç«™åˆ°ç°åœ¨ä»ç„¶åšçš„éå¸¸æˆåŠŸã€‚</p><p>ç½‘ç«™æµé‡çš„å¢åŠ æ˜¯ä¸€ä¸ªé•¿æœŸç´¯ç§¯çš„è¿‡ç¨‹ï¼Œå¦‚æœæ¯å°æœåŠ¡å™¨ä¸Šåªèƒ½è¿è¡Œä¸€ä¸ªç½‘ç«™ï¼Œé‚£äº›äººæ°”ä½ã€æµé‡å°çš„è‰æ ¹ç«™é•¿å°±è¦è¢«è¿«æ‰¿æ‹…ç€é«˜æ˜‚çš„æœåŠ¡å™¨ç§Ÿèµè´¹ç”¨ï¼Œè¿™æ˜¾ç„¶ä¹Ÿä¼šé€ æˆç¡¬ä»¶èµ„æºçš„æµªè´¹ã€‚</p><p>ä¸ºæ­¤åœ¨è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨ï¼ˆVPSï¼šVirtual Private Serverï¼‰å’Œäº‘è®¡ç®—æŠ€æœ¯è¯ç”Ÿä»¥å‰ï¼ŒIDCæœåŠ¡ä¾›åº”å•†ä¸ºäº†æ›´å……åˆ†åˆ©ç”¨æœåŠ¡å™¨èµ„æºå’Œå‡ä½è‰æ ¹ç«™é•¿çš„è´­ä¹°é—¨æ§›ï¼Œéƒ½å¯ç”¨äº†è™šæ‹Ÿä¸»æœºåŠŸèƒ½ã€‚åˆ©ç”¨è™šæ‹Ÿä¸»æœºåŠŸèƒ½ï¼Œå¯ä»¥æŠŠä¸€å°å¤„äºè¿è¡ŒçŠ¶æ€çš„ç‰©ç†æœåŠ¡å™¨åˆ†å‰²æˆå¤šä¸ªâ€œè™šæ‹Ÿçš„æœåŠ¡å™¨â€ã€‚</p><p>è™šæ‹Ÿä¸»æœºåŠŸèƒ½ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå®ƒæ— æ³•åƒç›®å‰çš„äº‘ä¸»æœºæŠ€æœ¯é‚£æ ·å®ç°ç¡¬ä»¶èµ„æºçš„éš”ç¦»ï¼Œè¿™äº›è™šæ‹Ÿä¸»æœºå…±åŒä½¿ç”¨ç‰©ç†æœåŠ¡å™¨çš„ç¡¬ä»¶èµ„æºï¼ŒIDCä¾›åº”å•†åªèƒ½é™åˆ¶ç¡¬ç›˜çš„ä½¿ç”¨ç©ºé—´å¤§å°ï¼Œå› æ­¤åŒä¸€å°ç‰©ç†ä¸»æœºä¸Šçš„ä¸åŒç”¨æˆ·çš„è™šæ‹Ÿä¸»æœºå¯èƒ½ä¼šç›¸äº’å½±å“ã€‚ä½†æ˜¯å‡ºäºæˆæœ¬è€ƒè™‘ï¼Œç›®å‰è¿˜æ˜¯æœ‰éƒ¨åˆ†ä¸ªäººç«™é•¿é‡‡ç”¨è™šæ‹Ÿä¸»æœºçš„æ–¹å¼æ¥éƒ¨ç½²ç½‘ç«™ã€‚</p><p>å…¶ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/221ad8e63e62434eb3b54b7f20b6154c><p class=pgc-img-caption></p></div><p><br></p><p>Apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½æ˜¯æœåŠ¡å™¨åŸºäºç”¨æˆ·è¯·æ±‚çš„ä¸åŒIPåœ°å€ã€ä¸»æœºåŸŸåæˆ–ç«¯å£å·ï¼Œå®ç°æä¾›å¤šä¸ªç½‘ç«™åŒæ—¶ä¸ºå¤–éƒ¨æä¾›è®¿é—®æœåŠ¡çš„æŠ€æœ¯ã€‚</p><h4 class="md-end-block md-heading">3.1 åŸºäºIP</h4><p>å¦‚æœä¸€å°æœåŠ¡å™¨æœ‰å¤šä¸ªIPåœ°å€ï¼Œæ¯ä¸ªIPä¸æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„æ¯ä¸ªç½‘ç«™ä¸€ä¸€å¯¹åº”ï¼Œ è¿™æ ·å½“ç”¨æˆ·è¯·æ±‚è®¿é—®ä¸åŒçš„IPåœ°å€æ—¶ï¼Œä¼šè®¿é—®åˆ°ä¸åŒç½‘ç«™çš„é¡µé¢èµ„æºã€‚</p><p>è¿™ç§æ–¹å¼æ¯ä¸ªç½‘ç«™éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„IPåœ°å€ï¼Œåˆ©äºæœç´¢å¼•æ“SEOä¼˜åŒ–ï¼Œå› æ­¤è¿™ç§æ–¹å¼æä¾›è™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½æœ€å¸¸è§ä¸”å—è‰æ ¹ç«™é•¿çš„æ¬¢è¿ã€‚</p><p>æœ¬ç¤ºä¾‹IPçš„ç½‘ç«™å¯¹åº”å…³ç³»ä¸ºï¼š192.168.78.101ã€102ã€103åˆ†åˆ«å¯¹åº”ç½‘ç«™1ã€2ã€3ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><h5 class="md-end-block md-heading">3.1.1 é…ç½®å¤šä¸ªIP</h5><p>åˆ©ç”¨å‰é¢è®²è§£çš„ç½‘ç»œé…ç½®æ–¹æ³•é…ç½®å¤šIPï¼Œå¿˜è®°çš„è¯·è¿”å›æŸ¥çœ‹â€œlinuxå…¥é—¨ç³»åˆ—11--Centos7ç½‘ç»œæœåŠ¡ç®¡ç†â€ã€‚</p><pre><code>[root@apache ~]# nmtui</code></pre><p>ä¸­é—´æ“ä½œè¿‡ç¨‹çœç•¥ï¼Œä¸ºä¸»æœºé…ç½®ä¸‰ä¸ªIPåœ°å€ï¼Œä¿å­˜å¹¶é€€å‡º</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a2d1b4bbe8fc4476b4f98b623a48734f><p class=pgc-img-caption></p></div><p><br></p><p>é‡å¯ç½‘ç»œä½¿å…¶ç”Ÿæ•ˆ</p><pre><code>[root@apache ~]# systemctl restart network[root@apache ~]# ip addr...çœç•¥éƒ¨åˆ†å†…å®¹2: eno16777736: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000 Â   link/ether 00:0c:29:2e:3a:65 brd ff:ff:ff:ff:ff:ff Â   inet 192.168.78.101/24 brd 192.168.78.255 scope global eno16777736 Â  Â  Â  valid_lft forever preferred_lft forever Â   inet 192.168.78.102/24 brd 192.168.78.255 scope global secondary eno16777736 Â  Â  Â  valid_lft forever preferred_lft forever Â   inet 192.168.78.103/24 brd 192.168.78.255 scope global secondary eno16777736 Â  Â  Â  valid_lft forever preferred_lft forever Â   inet6 fe80::20c:29ff:fe2e:3a65/64 scope link  Â  Â  Â  valid_lft forever preferred_lft forever[root@apache ~]# </code></pre><p>ç¡®ä¿é€šè¿‡ip addrå‘½ä»¤å¯ä»¥çœ‹åˆ°åˆšæ‰é…ç½®çš„IPï¼Œå¹¶èƒ½åœ¨è™šæ‹Ÿæœºæˆ–å®¿ä¸»æœºä¸Šèƒ½pingé€šåˆšæ‰é…ç½®çš„æ¯ä¸ªIPã€‚</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/71206aa8d3e641b2bb2f551f92eda891><p class=pgc-img-caption></p></div><p><br></p><h5 class="md-end-block md-heading">3.1.2 å‡†å¤‡å¤šä¸ªç½‘ç«™</h5><p>åœ¨ç³»ç»Ÿæ ¹ç›®å½•ä¸‹çš„websiteç›®å½•ä¸‹åˆ›å»º3ä¸ªç›®å½•ï¼Œå¹¶åˆ†åˆ«åˆ›å»ºä¸åŒçš„é¡µé¢æ–‡ä»¶ã€‚</p><pre><code>[root@apache website]# mkdir -p /website/1[root@apache website]# mkdir -p /website/2[root@apache website]# mkdir -p /website/3[root@apache website]# echo "192.168.78.101"&gt;/website/1/index.html[root@apache website]# echo "192.168.78.102"&gt;/website/2/index.html[root@apache website]# echo "192.168.78.103"&gt;/website/3/index.html</code></pre><h5 class="md-end-block md-heading">3.1.3 é…ç½®Apache</h5><p>é…ç½®ä¸»é…ç½®æ–‡ä»¶/etc/httpd/conf/httpd.conf</p><pre><code>[root@apache website]# vim /etc/httpd/conf/httpd.conf...çœç•¥éƒ¨åˆ†å†…å®¹&lt;VirtualHost 192.168.78.101&gt; DocumentRoot /website/1 ServerName website1 &lt;Directory /website/1&gt;  AllowOverride None  Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.102&gt;  DocumentRoot /website/2  ServerName website2  &lt;Directory /website/2&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.103&gt;  DocumentRoot /website/3  ServerName website3  &lt;Directory /website/3&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œå¹¶ä¿å­˜é€€å‡º</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b41785cc1fbb4e998be1a6e61eb1a19b><p class=pgc-img-caption></p></div><p><br></p><p>é‡å¯httpdä½¿å…¶ç”Ÿæ•ˆã€‚</p><pre><code>[root@apache website]# systemctl restart httpd</code></pre><h5 class="md-end-block md-heading">3.2.4 æµ‹è¯•è®¿é—®</h5><p>ç”±äºæ˜¯ç»§ç»­ä¸Šå‰æ–‡çš„ç¯å¢ƒä¸‹å®éªŒï¼Œå‰æ–‡å·²ç»è®¾ç½®å¥½äº†é˜²ç«å¢™å’ŒSELinuxï¼Œæ‰€ä»¥ç›´æ¥å°±å¯ä»¥è®¿é—®äº†ï¼Œå¦‚æœä½ é‡åˆ°ä¸èƒ½è®¿é—®çš„æƒ…å†µï¼Œè¯·å‚è€ƒå‰æ–‡æ£€æŸ¥ç›¸å…³è®¾ç½®ã€‚</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0c515398be194aaca9ac5186cb915fc4><p class=pgc-img-caption></p></div><p><br></p><p>æ³¨æ„ï¼š</p><p>ï¼ˆ1ï¼‰å‰è¾¹å·²ç»æŠŠ/websiteç›®å½•æ·»åŠ äº†SELinuxçš„ä¸Šä¸‹æ–‡ï¼Œå› æ­¤æ— éœ€æŠŠåˆšåˆšåˆ›å»ºçš„å­ç›®å½•/website/1ç­‰è¿›è¡Œè®¾ç½®ã€‚</p><p>ï¼ˆ2ï¼‰å‰æ–‡å®éªŒä¸­ç›´æ¥é€šè¿‡ipå¯ä»¥è®¿é—®/website/index.htmlæ–‡ä»¶ï¼Œæœ¬æ–‡å®éªŒå¹¶æ²¡æœ‰åˆ é™¤åŸæ¥çš„é…ç½®ï¼Œåªæ˜¯æ–°åŠ äº†è™šæ‹Ÿä¸»æœºç›¸å…³é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå†æ¬¡è®¿é—®192.168.78.101è¿™ä¸ªipæ˜¯æŒ‡å‘æ–°çš„è™šæ‹Ÿä¸»æœºç½‘ç«™ï¼Œè€ŒéåŸæ¥çš„ç½‘ç«™ã€‚ä¹Ÿå°±æ˜¯ä¼šè™šæ‹Ÿä¸»æœºé…ç½®ä¼šè¦†ç›–åŸæ¥è®¾ç½®ï¼Œä¼˜å…ˆçº§æ›´é«˜ã€‚</p><h4 class="md-end-block md-heading">3.2 åŸºäºåŸŸå</h4><p>å½“æœåŠ¡å™¨æ— æ³•ä¸ºæ¯ä¸ªç½‘ç«™éƒ½åˆ†é…ä¸€ä¸ªç‹¬ç«‹ IP åœ°å€çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•è®© Apache è‡ªåŠ¨è¯†åˆ« ç”¨æˆ·è¯·æ±‚çš„åŸŸåï¼Œä»è€Œæ ¹æ®ä¸åŒçš„åŸŸåè¯·æ±‚æ¥ä¼ è¾“ä¸åŒçš„å†…å®¹ã€‚</p><p>åŸºäºåŸŸåçš„é…ç½®ä¸åŸºäºIPçš„é…ç½®ï¼Œæ–¹æ³•åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªåŸŸåå’ŒIPçš„æ˜ å°„ã€‚</p><h5 class="md-end-block md-heading">3.2.0 ç¯å¢ƒå‡†å¤‡</h5><p>è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ä¸Šä¸€æ­¥çš„ç¯å¢ƒï¼ŒæŠŠä¹‹å‰è®¾ç½®çš„å¤šä½™çš„IPåˆ é™¤ï¼Œåªä¿ç•™ä¸€ä¸ªIPï¼š192.168.78.101ï¼›åŒæ—¶å°†ä¸Šä¸€æ­¥3.1.3ä¸­é…ç½®çš„å¤šä¸ªIPä¸ç½‘ç«™çš„æ˜ å°„åˆ é™¤ã€‚</p><p>å‡è®¾ä¸‰ä¸ªåŸŸååˆ†åˆ«å¯¹åº”ä¸‰ä¸ªç½‘ç«™ï¼ŒåŸŸååˆ†åˆ«ä¸ºï¼štest1ã€test2ã€test3.heimatengyun.comï¼Œåˆ†åˆ«å¯¹åº”ä¹‹å‰çš„1ã€2ã€3ä¸‰ä¸ªç½‘ç«™ã€‚</p><h5 class="md-end-block md-heading">3.2.1 é…ç½®åŸŸåä¸IPæ˜ å°„</h5><p>å¯ä»¥é€šè¿‡DNSè§£ææœåŠ¡è¿›è¡Œé…ç½®ï¼Œæœ¬å¤„ç›´æ¥ä¿®æ”¹/etc/hostsæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®šIPä¸åŸŸåä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚/etc/hostsæ˜¯Linuxç³»ç»Ÿä¸­ç”¨äºå¼ºåˆ¶æŠŠæŸä¸ªä¸»æœºåŸŸåè§£æåˆ°æŒ‡å®šIPåœ°å€çš„é…ç½®æ–‡ä»¶ã€‚</p><pre><code>[root@apache website]# vim /etc/hosts192.168.78.101 test1.heimatengyun.com test2.heimatengyun.com test3.heimatengyun.com</code></pre><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸Šå†…å®¹ä¿å­˜å¹¶é€€å‡ºã€‚</p><p>åœ¨è™šæ‹Ÿæœºä¸­ç¡®ä¿å¯ä»¥pingåŒä»¥ä¸Šå„ä¸ªåŸŸåã€‚</p><pre><code>[root@apache website]# ping -c 1 test1.heimatengyun.comPING test1.heimatengyun.com (192.168.78.101) 56(84) bytes of data.64 bytes from test1.heimatengyun.com (192.168.78.101): icmp_seq=1 ttl=64 time=0.033 ms--- test1.heimatengyun.com ping statistics ---1 packets transmitted, 1 received, 0% packet loss, time 0msrtt min/avg/max/mdev = 0.033/0.033/0.033/0.000 ms[root@apache website]# </code></pre><p>è¿™æ ·ç­‰åç»­æ“ä½œå®Œæˆåå°±å¯ä»¥åœ¨è™šæ‹Ÿæœºå†…éƒ¨é€šè¿‡åŸŸåè¿›è¡Œè®¿é—®ã€‚</p><p>ä½†æ˜¯å¦‚æœæƒ³è®©å®¿ä¸»æœºä¹Ÿèƒ½è¿›è¡Œè®¿é—®çš„è¯ï¼Œéœ€è¦åœ¨å®¿ä¸»æœºä¸­ä¹Ÿè¦æ·»åŠ IPä¸åŸŸåçš„æ˜ å°„ã€‚ç”±äºæˆ‘çš„å®¿ä¸»æœºä¸ºwin10ï¼Œå› æ­¤å°†ä»¥ä¸ŠIPä¸åŸŸåçš„æ˜ å°„å†…å®¹æ·»åŠ åˆ°C:\Windows\System32\drivers\etc\hostsæ–‡ä»¶å³å¯ã€‚ç„¶ååœ¨å®¿ä¸»æœºå°±å¯ä»¥pingåŒå‰é¢çš„ä¸‰ä¸ªåŸŸåã€‚</p><h5 class="md-end-block md-heading">3.2.2 å‡†å¤‡å¤šä¸ªç½‘ç«™</h5><p>ç”±äºæ˜¯ç›´æ¥é‡‡ç”¨åŸæ¥çš„ä¸‰ä¸ªç½‘ç«™ï¼Œå…ˆä¿®æ”¹ä¸‹æ¯ä¸ªç½‘é¡µé‡Œè¾¹çš„å†…å®¹ï¼Œæˆ‘ä»¬é‡‡ç”¨é‡å®šå‘å¾€åŸæ¥é¡µé¢ä¸­è¿½åŠ å¯¹åº”çš„åŸŸåä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­éªŒè¯æ•ˆæœã€‚</p><pre><code>[root@apache website]# echo "test1.heimatengyun.com"&gt;&gt;/website/1/index.html[root@apache website]# echo "test2.heimatengyun.com"&gt;&gt;/website/2/index.html[root@apache website]# echo "test3.heimatengyun.com"&gt;&gt;/website/3/index.html</code></pre><h5 class="md-end-block md-heading">3.2.3 é…ç½®Apache</h5><p>ä¿®æ”¹Apacheä¸»é…ç½®æ–‡ä»¶ï¼Œ/etc/httpd/conf/httpd.conf</p><pre><code>[root@apache website]# vim /etc/httpd/conf/httpd.conf...çœç•¥éƒ¨åˆ†å†…å®¹&lt;VirtualHost 192.168.78.101&gt; DocumentRoot /website/1 ServerName test1.heimatengyun.com &lt;Directory /website/1&gt;  AllowOverride None  Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.101&gt;  DocumentRoot /website/2  ServerName test2.heimatengyun.com  &lt;Directory /website/2&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.101&gt;  DocumentRoot /website/3  ServerName test3.heimatengyun.com  &lt;Directory /website/3&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸Šè¿°å†…å®¹å¹¶ä¿å­˜é€€å‡ºã€‚</p><blockquote><p>æ³¨æ„ï¼šæ­¤å¤„å¯ä»¥å¯¹æ¯”ä¹‹å‰çš„IPé…ç½®ï¼Œé…ç½®å‚æ•°éƒ½æ˜¯åŸºæœ¬ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯ä¹‹å‰æ¯ä¸ªç½‘ç«™å¯¹åº”ä¸åŒIPï¼Œç°åœ¨æ˜¯éƒ½å†™åŒä¸€ä¸ªIPã€‚å¯ä»¥è‡ªè¡Œå¯¹æ¯”</p></blockquote><p>ä¿®æ”¹å®Œæˆåé‡å¯Apacheï¼Œä½¿å…¶ç”Ÿæ•ˆã€‚</p><pre><code>[root@apache website]# systemctl restart httpd</code></pre><blockquote><p>æ³¨æ„ï¼šä¿®æ”¹Apacheé…ç½®åï¼Œéœ€è¦é‡å¯æœåŠ¡æ‰ä¼šç”Ÿæ•ˆã€‚</p></blockquote><h5 class="md-end-block md-heading">3.2.4 æµ‹è¯•è®¿é—®</h5><p>åœ¨å®¿ä¸»æœºæµè§ˆå™¨è¾“å…¥å¯¹åº”çš„åŸŸåå³å¯è®¿é—®å¯¹åº”çš„ç½‘ç«™ã€‚</p><p><br></p><div class=pgc-img><img alt=è·Ÿç€ä¸€èµ·æ¥åŸºäºApacheæœåŠ¡å™¨éƒ¨ç½²WEBç½‘ç«™ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c9fab18b00e64eb88c64256db692c89e><p class=pgc-img-caption></p></div><p><br></p><h4 class="md-end-block md-heading">3.3 åŸºäºç«¯å£å·</h4><p>åŸºäºç«¯å£å·çš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½å¯ä»¥è®©ç”¨æˆ·é€šè¿‡æŒ‡å®šçš„ç«¯å£å·æ¥è®¿é—®æœåŠ¡å™¨ä¸Šçš„ç½‘ç«™èµ„æºã€‚</p><p>ç›¸è¾ƒäºå‰äºŒç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼çš„é…ç½®è¦ç¨å¾®å¤åˆ¶ä¸€äº›ï¼Œå› ä¸ºä¸ä»…è¦è€ƒè™‘httpdæœåŠ¡ç¨‹åºçš„é…ç½®ï¼Œè¿˜è¦è€ƒè™‘SELinuxæœåŠ¡å¯¹æ–°å¼€çš„ç«¯å£çš„ç›‘æ§å’Œé™åˆ¶ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨80ã€443ã€8080ç­‰ç«¯å£æä¾›ç½‘ç«™è®¿é—®æœåŠ¡ï¼Œå¦‚æœæ˜¯å…¶ä»–ç«¯å£å°±éœ€è¦æ³¨æ„SELinuxçš„ç°åœ¨ã€‚</p><h5 class="md-end-block md-heading">3.3.0 ç¯å¢ƒå‡†å¤‡</h5><p>æˆ‘ä»¬ç»§ç»­åœ¨ä¸Šè¾¹çš„ç¯å¢ƒä¸‹å®éªŒï¼Œåˆ é™¤ä¸Šä¸€æ­¥3.2.3åœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ã€‚å‡è®¾8111ã€8222ã€8333åˆ†åˆ«å¯¹åº”å‰é¢åˆ›å»ºçš„1ã€2ã€3ä¸‰ä¸ªç½‘ç«™ã€‚</p><h5 class="md-end-block md-heading">3.3.1 ç½‘ç«™å†…å‡†å¤‡</h5><p>æˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¹‹å‰çš„ä¸‰ä¸ªç½‘ç«™ï¼Œå¯¹ç½‘ç«™å†…å®¹è¿›è¡Œä¿®æ”¹</p><pre><code>[root@apache website]# echo "8111"&gt;&gt;/website/1/index.html[root@apache website]# echo "8222"&gt;&gt;/website/2/index.html[root@apache website]# echo "8333"&gt;&gt;/website/3/index.html</code></pre><h5 class="md-end-block md-heading">3.3.2 Apacheé…ç½®</h5><p>å¯¹/etc/httpd/conf/httpd.confè¿›è¡Œé…ç½®ï¼Œä½¿å…¶æ”¯æŒå¤šç«¯å£ç›‘å¬</p><p>ï¼ˆ1ï¼‰åœ¨å¤§æ¦‚43è¡Œå·¦å³ï¼Œæ·»åŠ ç«¯å£ç›‘å¬</p><pre><code>[root@apache website]# vim /etc/httpd/conf/httpd.conf...çœç•¥éƒ¨åˆ†å†…å®¹Listen 8111Listen 8222Listen 8333...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>ç»§ç»­ä¸‹è¾¹çš„ä¿®æ”¹</p><p>ï¼ˆ2ï¼‰åœ¨å¤§æ¦‚120è¡Œå·¦å³ï¼Œè¿½åŠ åŸºäºç«¯å£å·çš„è™šæ‹Ÿä¸»æœºå‚æ•°é…ç½®</p><pre><code>&lt;VirtualHost 192.168.78.101:8111&gt; DocumentRoot /website/1 ServerName test1.heimatengyun.com &lt;Directory /website/1&gt;  AllowOverride None  Require all granted &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.101:8222&gt;  DocumentRoot /website/2  ServerName test2.heimatengyun.com  &lt;Directory /website/2&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;&lt;VirtualHost 192.168.78.101:8333&gt;  DocumentRoot /website/3  ServerName test3.heimatengyun.com  &lt;Directory /website/3&gt; Â  AllowOverride None Â  Require all granted  &lt;/Directory&gt;&lt;/VirtualHost&gt;...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>ä¿å­˜é€€å‡º</p><blockquote><p>ä¸3.2.3ç›¸å¯¹ï¼Œæ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œåªæ˜¯åœ¨IPåæ·»åŠ ç«¯å£å³å¯ï¼Œå‡ ç§é…ç½®æ–¹æ³•éƒ½å¤§åŒå°å¼‚ã€‚</p></blockquote><p>é‡å¯apacheä½¿å…¶ç”Ÿæ•ˆ</p><pre><code>[root@apache website]# systemctl restart httpdJob for httpd.service failed. See 'systemctl status httpd.service' and 'journalctl -xn' for details.[root@apache website]# journalctl -xn...çœç•¥éƒ¨åˆ†å†…å®¹*****  Plugin bind_ports (92.2 confidence) suggests If you want to allow /usr/sbin/httpd to bind to network port 8111 Then you need to modify the port type. Do # semanage port -a -t PORT_TYPE -p tcp 8111 ...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œé‡å¯å¤±è´¥ã€‚å¦‚æœä½ æŸ¥çœ‹æ—¥å¿—ï¼Œä¼šå‘ç°è¿™æ ·çš„æç¤ºå†…å®¹ï¼Œåˆ«æ‹…å¿ƒï¼Œè¿™æ­£æ˜¯åˆšå¼€å§‹æåˆ°çš„SELinuxåœ¨æé¬¼ã€‚</p><h5 class="md-end-block md-heading">3.3.3 è®¾ç½®SELinuxåŸŸ</h5><p>æŸ¥çœ‹ç›®å‰é»˜è®¤çš„SELinuxå…è®¸çš„ä¸HTTPåè®®ç›¸å…³çš„ç«¯å£</p><pre><code>[root@apache website]# semanage port -l | grep httphttp_cache_port_t Â  Â  Â  Â  Â  Â   tcp Â  Â   8080, 8118, 8123, 10001-10010http_cache_port_t Â  Â  Â  Â  Â  Â   udp Â  Â   3130http_port_t Â  Â  Â  Â  Â  Â  Â  Â  Â   tcp Â  Â   80, 81, 443, 488, 8008, 8009, 8443, 9000pegasus_http_port_t Â  Â  Â  Â  Â   tcp Â  Â   5988pegasus_https_port_t Â  Â  Â  Â  Â  tcp Â  Â   5989[root@apache website]# </code></pre><p>äºæ˜¯æˆ‘ä»¬è¦æŠŠåˆšæ‰æ–°åŠ çš„ä¸‰ä¸ªç«¯å£æ·»åŠ è¿›å…¥</p><pre><code>[root@apache website]# semanage port -a -t http_port_t -p tcp 8111[root@apache website]# semanage port -a -t http_port_t -p tcp 8222[root@apache website]# semanage port -a -t http_port_t -p tcp 8333</code></pre><p>æ·»åŠ å®Œæˆé‡å¯apache</p><pre><code>[root@apache website]# systemctl restart httpd</code></pre><h5 class="md-end-block md-heading">3.3.4 æµ‹è¯•è®¿é—®</h5><p>ç»è¿‡ä»¥ä¸Šçš„æ“ä½œåœ¨è™šæ‹Ÿæœºå†…å®¹é€šè¿‡æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå¯ä»¥æ­£å¸¸é€šè¿‡å„ä¸ªç«¯å£å»è®¿é—®å¯¹åº”çš„ç½‘ç«™ã€‚</p><p>ä½†æ˜¯å¦‚æœåœ¨å®¿ä¸»æœºè¿›è¡Œè®¿é—®ï¼Œä½ ä¼šå‘ç°è®¿é—®ä¸äº†ã€‚è¿™æ— ç–‘å°±æ˜¯å› ä¸ºé˜²ç«å¢™åœ¨æé¬¼ã€‚</p><p>åˆ©äºâ€œlinuxå…¥é—¨ç³»åˆ—10--firewalldé˜²ç«å¢™ç®¡ç†â€è®²è§£çš„çŸ¥è¯†ï¼Œå°†è¿™3ä¸ªå¯¹åº”çš„ç«¯å£æ”¾è¡Œå³å¯ã€‚</p><pre><code>[root@apache website]# firewall-cmd --zone=public --list-ports [root@apache website]# firewall-cmd --zone=public --add-port=8111/tcp Â  Â  Â  Â  Â success[root@apache website]# firewall-cmd --zone=public --add-port=8222/tcp success[root@apache website]# firewall-cmd --zone=public --add-port=8333/tcp </code></pre><p>æ­¤æ—¶ï¼Œå†æ¬¡åœ¨å®¿ä¸»æœºè¿›è¡Œè®¿é—®ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p><blockquote><p>ç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œå¦‚æœæ˜¯æŒ‰ç…§ä¸Šè¾¹çš„æ­¥éª¤ä¸€è·¯ä¸‹æ¥çš„è¯ï¼Œä½ ä¼šå‘ç°ç°åœ¨å…¶å®æ˜¯3ç§æ–¹å¼éƒ½å¼€å¯çš„ã€‚åˆ†åˆ«é€šè¿‡ä¸åŒçš„ç«¯å£å»è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®åˆ°å¯¹åº”çš„ä¸åŒç½‘ç«™ã€‚</p><p>ä½†æ˜¯é€šè¿‡å¦‚æœä½ é€šè¿‡ipæˆ–åŸŸåå†å»è®¿é—®çš„è¯ï¼Œä½ ä¼šå‘ç°ç»Ÿç»Ÿéƒ½æŒ‡å‘å‰ä¸€ç¯‡æ–‡ç« ä¸­æ¡ˆä¾‹1æŒ‡å‘çš„ç½‘é¡µã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºä¹‹å‰æ¡ˆä¾‹æ²¡æœ‰æ˜¾å¼æŒ‡å®šç«¯å£ï¼Œé»˜è®¤çš„ç«¯å£ä¸º80ã€‚å› æ­¤å¦‚æœæ²¡æ˜¾å¼æŒ‡å®šç«¯å£ï¼Œé»˜è®¤æ˜¯å»webçš„80ç«¯å£çš„ã€‚</p></blockquote><h3 class="md-end-block md-heading">å››ã€Apacheè®¿é—®æ§åˆ¶</h3><p>Apacheå¯ä»¥åŸºäºæºä¸»æœºåã€æºIPåœ°å€æˆ–æºä¸»æœºä¸Šçš„æµè§ˆå™¨ç‰¹å¾ç­‰ä¿¡æ¯å¯¹ç½‘ç«™ä¸Šçš„èµ„æºè¿›è¡Œè®¿é—®æ§åˆ¶ã€‚ç®€å•è¯´å°±æ˜¯èƒ½æ§åˆ¶ç½‘ç«™è®©æŒ‡å®šç”¨æˆ·æ‰èƒ½çœ‹åˆ°ã€‚</p><p>ä¸»è¦æ˜¯é€šè¿‡è®¿é—®æ§åˆ¶æŒ‡ä»¤å®ç°ï¼Œå¸¸ç”¨æŒ‡ä»¤æœ‰ï¼š<strong>Allowã€Denyã€Order</strong></p><p>Allowï¼šå…è®¸æŸä¸ªä¸»æœºè®¿é—®æœåŠ¡å™¨ä¸Šçš„ç½‘ç«™èµ„æº</p><p>Denyï¼šå®ç°ç¦æ­¢è®¿é—®</p><p>Order: å®šä¹‰Allowæˆ–DenyæŒ‡ä»¤èµ·ä½œç”¨çš„é¡ºåºï¼Œå…¶åŒ¹é…åŸåˆ™æ˜¯æŒ‰ç…§é¡ºåºè¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸåˆ™æ‰§è¡Œåé¢çš„é»˜è®¤æŒ‡ä»¤ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>Order Allow, Denyï¼šè¡¨ç¤ºå…ˆå°†æºä¸»æœºä¸å…è®¸è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸåˆ™å…è®¸è®¿ é—®è¯·æ±‚ï¼Œåä¹‹åˆ™æ‹’ç»è®¿é—®è¯·æ±‚ã€‚</p><h4 class="md-end-block md-heading">4.1 é€šè¿‡IPæ§åˆ¶</h4><p>å‡è®¾æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šè®©å‰é¢éƒ¨ç½²çš„1ç½‘ç«™åªå…è®¸è™šæ‹Ÿæœºå†…éƒ¨è¿›è¡Œè®¿é—®ï¼Œç¦æ­¢å¤–éƒ¨æœºå™¨è®¿é—®ã€‚</p><pre><code>[root@apache website]# vim /etc/httpd/conf/httpd.conf ...çœç•¥éƒ¨åˆ†å†…å®¹&lt;VirtualHost 192.168.78.101:8111&gt; DocumentRoot /website/1 ServerName test1.heimatengyun.com &lt;Directory /website/1&gt;  AllowOverride None  Require all grantedOrder allow,denyAllow from 192.168.78.101 &lt;/Directory&gt;&lt;/VirtualHost&gt;...çœç•¥éƒ¨åˆ†å†…å®¹</code></pre><p>æˆ‘ä»¬åªéœ€è¦æ‰“å¼€ä¸»é…ç½®æ–‡ä»¶ï¼Œåœ¨æ·»åŠ Order allow,denyå’ŒAllow from 192.168.78.101å³å¯å®ç°ã€‚é…ç½®ä¹‹åï¼Œé‡å¯apacheï¼Œå‘ç°åœ¨è™šæ‹Ÿæœºé‡Œå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½†æ˜¯åœ¨å®¿ä¸»æœºå·²ç»ä¸èƒ½è®¿é—®äº†æ­¤ç½‘ç«™äº†ï¼ˆ<strong>ç›´æ¥è·³è½¬åˆ°æµ‹è¯•é¡µé¢</strong>ï¼‰ã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥é€šè¿‡æµè§ˆå™¨ç‰¹å¾æ¥é™åˆ¶æŒ‡å®šæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå†æ­¤å°±ä¸è¿›è¡Œæ¼”ç¤ºäº†ã€‚</p><p>ä¸‹ä¸€ç¯‡æ–‡ç« å°†æ¼”ç¤ºMysqlæ•°æ®çš„å…„å¼Ÿ-MariaDBçš„å®‰è£…åŠåŸºæœ¬ç”¨æ³•ã€‚</p><p><br></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æ¥åŸº','Apache','æœåŠ¡å™¨'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>