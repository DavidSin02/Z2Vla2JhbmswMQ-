<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>wxPython：Python首选的GUI库 | CSDN博文精选 | 极客快訊</title><meta property="og:title" content="wxPython：Python首选的GUI库 | CSDN博文精选 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RhCm4xq1HIM2Pn"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4d13fb8d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4d13fb8d.html><meta property="article:published_time" content="2020-10-29T21:10:24+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:24+08:00"><meta name=Keywords content><meta name=description content="wxPython：Python首选的GUI库 | CSDN博文精选"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/4d13fb8d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>wxPython：Python首选的GUI库 | CSDN博文精选</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>作者 | 天元浪子</p><p>来源 | CSDN博客</p><p><strong>文章目录</strong></p><ul><li><p>概述</p></li><li><p>窗口程序的基本框架</p></li><li><p>事件和事件驱动</p></li><li><p>菜单栏/工具栏/状态栏</p></li><li><p>动态布局</p></li><li><p>AUI布局</p></li><li><p>DC绘图</p></li><li><p>定时器和线程</p></li><li><p>后记</p></li></ul><p><strong class=highlight-text toutiao-origin=span>概述</strong></p><p>跨平台的GUI工具库，较为有名的当属GTK+、Qt 和 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets 了。GTK+是C实现的，由于C语言本身不支持OOP，因而GTK+上手相当困难，写起来也较为复杂艰涩。Qt 和 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets 则是C++实现的，各自拥有庞大的用户群体。虽然我喜欢<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets，但还是尽可能客观地搜集了关于Qt 和 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets 的对比评价。</p><p><strong>关于LICENSE</strong></p><p>Qt最初由芬兰的TrollTech公司研发，后来卖给了Nokia（没看错，就是曾经闻名遐迩的手机巨头诺基亚），2012年Digia从诺基亚完整收购了QT的技术平台和知识产权。QT的背后一直由商业公司支持，奉行的是双 license 策略，一个是商业版，一个是免费版。这个策略严重限制了Qt的用户群体。据说Nokia收购之后意识到了这个问题，自4.5版本之后采用了LGPL，开发人员可以发布基于免费Qt库的商业软件了。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets最开始是由爱丁堡（Edinburgh）大学的人工智能应用学院开发的，在<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-3">199</i>2年开源，一直遵循LGPL。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets从一开始就是程序员的免费午餐。</p><p><strong>关于兼容性</strong></p><p>由于Qt使用的是非标准C++，与其它库的兼容性会存在问题，在每个平台的图形界面也并不完全是原生界面（ Native GUI），只是透过 theme 去模拟系统上的标准 GUI，所以看起来很像，有些地方则会明显看出破绽。 Qt的执行速度缓慢且过于庞大则是另一个问题。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets使用的是标准C++，与现有各类工具库无缝连接，在不同平台上也是完全Native GUI，是真正的跨平台。</p><p><strong>关于服务和支持</strong></p><p>由于Nokia的接盘，Qt提供了一系列完整的文档和RAD工具，并提供最为完整的平台支持，对于移动终端的支持最为完善。Qt库也是所有的GUI工具库中最为面向对象化的，同时也是最为稳定的。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets因为缺乏很好的商业化支持，开发文档、资源相对较为匮乏。由于是偏重考虑MFC程序的跨平台迁移，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets面向对象封装做得差强人意。</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets的主体是由C++构建的，但你并不是必需通过C++才能使用它。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets拥有许多其它语言的绑定（binding），比如 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Perl，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Java，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Basic，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>JavaScript，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Ruby等等，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python 就是 Python语言的 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Widgets 工具库。</p><p><strong class=highlight-text toutiao-origin=span>窗口程序的基本框架</strong></p><p>不管是py2还是py3，python的世界里安装工作已经变得非常简单了。如果工作在windows平台的话，我建议同时安装pywin32模块。pywin32允许你像VC一样的使用python开发win32应用，更重要的是，我们可以用它直接操控win32程序，捕捉当前窗口、获取焦点等。</p><pre><div><p>pip install <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>pyhton</p></div></pre><p>只用5行代码，我们就可以创造一个窗口程序。然并卵，不过是又一次体现了python的犀利和简洁罢了。</p><pre><div><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>app = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App</p><p>frame = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame(None, -1, "Hello, World!")</p><p>frame.Show(True)</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RhCm4xq1HIM2Pn><p>下面是一个真正实用的窗口程序框架，任何一个窗口程序的开发都可以在这个基础之上展开。请注意，代码里面用到了一个图标文件，如果你要运行这段代码，请自备icon文件。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>APP_TITLE = u'基本框架'</p><p>APP_ICON = 'res/python.ico' # 请更换成你的icon</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>def __init__(self):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, None, -1, APP_TITLE, style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DEFAULT_FRAME_STYLE ^ <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.RESIZE_BORDER)</p><p># 默认style是下列项的组合：<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.MINIMIZE_BOX | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.MAXIMIZE_BOX | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.RESIZE_BORDER | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SYSTEM_MENU | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.CAPTION | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.CLOSE_BOX | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.CLIP_CHILDREN </p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((800, 600))</p><p>self.Center</p><p># 以下代码处理图标</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p># 以下可以添加各类控件</p><p>pass</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp(redirect=True, filename="debug.txt")</p><p>app.MainLoop</p></div></pre><p>注意 倒数第2行代码，是将调试信息定位到了debug.txt文件。如果mainApp不使用任何参数，则调试信息输出到控制台。</p><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RhCm4yBJdg2WO><p>通过继承<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame，我们构造了mainFrame类，可以在mainFrame类的构造函数中任意添加面板、文本、图片、按钮等各种控件了。</p><p><strong class=highlight-text toutiao-origin=span>事件和事件驱动</strong></p><p>不同于Qt的信号与槽机制，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>采用的是事件驱动型的编程机制。所谓事件，就是我们的程序在运行中发生的事儿。事件可以是低级的用户动作，如鼠标移动或按键按下，也可以是高级的用户动作（定义在<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python的窗口部件中的），如单击按钮或菜单选择。事件可以产生自系统，如关机。你甚至可以创建你自己的对象去产生你自己的事件。事件会触发相应的行为，即事件函数。程序员的工作就是定义事件函数，以及绑定事件和事件函数之间的关联关系。</p><p>在<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python中，我习惯把事件分为4类：</p><ul><li><p>控件事件：发生在控件上的事件，比如按钮被按下、输入框内容改变等</p></li><li><p>鼠标事件：鼠标左右中键和滚轮动作，以及鼠标移动等事件</p></li><li><p>键盘事件：用户敲击键盘产生的事件</p></li><li><p>系统事件：关闭窗口、改变窗口大小、重绘、定时器等事件</p></li></ul><p>事实上，这个分类方法不够严谨。比如，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.frame作为一个控件，关闭和改变大小也是控件事件，不过这一类事件通常都由系统绑定了行为。基于此，我可以重新定义所谓的控件事件，是指发生在控件上的、系统并未预定义行为的事件。</p><p>下面这个例子演示了如何定义事件函数，以及绑定事件和事件函数之间的关联关系。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>APP_TITLE = u'控件事件、鼠标事件、键盘事件、系统事件'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((520, 220))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(self, -1, u'第一行输入框：', pos=(40, 50), size=(100, -1), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_RIGHT)</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(self, -1, u'第二行输入框：', pos=(40, 80), size=(100, -1), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_RIGHT)</p><p>self.tip = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(self, -1, u'', pos=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">145</i>, 110), size=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-3">150</i>, -1), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ST_NO_AUTORESIZE)</p><p>self.tc1 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TextCtrl(self, -1, '', pos=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">145</i>, 50), size=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-3">150</i>, -1), name='TC01', style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TE_CENTER)</p><p>self.tc2 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TextCtrl(self, -1, '', pos=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">145</i>, 80), size=(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-3">150</i>, -1), name='TC02', style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TE_PASSWORD|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_RIGHT)</p><p>btn_mea = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'鼠标左键事件', pos=(350, 50), size=(100, 25))</p><p>btn_meb = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'鼠标所有事件', pos=(350, 80), size=(100, 25))</p><p>btn_close = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'关闭窗口', pos=(350, 110), size=(100, 25))</p><p># 控件事件</p><p>self.tc1.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_TEXT, self.EvtText)</p><p>self.tc2.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_TEXT, self.EvtText)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_BUTTON, self.OnClose, btn_close)</p><p># 鼠标事件 </p><p>btn_mea.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_LEFT_DOWN, self.OnLeftDown)</p><p>btn_mea.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_LEFT_UP, self.OnLeftUp)</p><p>btn_mea.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MOUSEWHEEL, self.OnMouseWheel)</p><p>btn_meb.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MOUSE_EVENTS, self.OnMouse)</p><p># 键盘事件</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_KEY_DOWN, self.OnKeyDown)</p><p># 系统事件</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_CLOSE, self.OnClose)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_SIZE, self.On_size)</p><p>#self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_PAINT, self.On_paint)</p><p>#self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_ERASE_BACKGROUND, lambda event: None)</p><p>def EvtText(self, evt):</p><p>'''输入框事件函数'''</p><p>obj = evt.GetEventObject</p><p>objName = obj.GetName</p><p>text = evt.GetString</p><p>if objName == 'TC01':</p><p>self.tc2.SetValue(text)</p><p>elif objName == 'TC02':</p><p>self.tc1.SetValue(text)</p><p>def On_size(self, evt):</p><p>'''改变窗口大小事件函数'''</p><p>self.Refresh</p><p>evt.Skip # 体会作用</p><p>def OnClose(self, evt):</p><p>'''关闭窗口事件函数'''</p><p>dlg = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.MessageDialog(None, u'确定要关闭本窗口？', u'操作提示', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.YES_NO | <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ICON_QUESTION)</p><p>if(dlg.ShowModal == <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ID_YES):</p><p>self.Destroy</p><p>def OnLeftDown(self, evt):</p><p>'''左键按下事件函数'''</p><p>self.tip.SetLabel(u'左键按下')</p><p>def OnLeftUp(self, evt):</p><p>'''左键弹起事件函数'''</p><p>self.tip.SetLabel(u'左键弹起')</p><p>def OnMouseWheel(self, evt):</p><p>'''鼠标滚轮事件函数'''</p><p>vector = evt.GetWheelRotation</p><p>self.tip.SetLabel(str(vector))</p><p>def OnMouse(self, evt):</p><p>'''鼠标事件函数'''</p><p>self.tip.SetLabel(str(evt.EventType))</p><p>def OnKeyDown(self, evt):</p><p>'''键盘事件函数'''</p><p>key = evt.GetKeyCode </p><p>self.tip.SetLabel(str(key))</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><p>两个输入框，一个明文居中，一个密写右齐，但内容始终保持同步。输入焦点不在输入框的时候，敲击键盘，界面显示对应的键值。最上面的按钮响应鼠标左键的按下和弹起事件，中间的按钮响应所有的鼠标事件，下面的按钮响应按钮按下的事件。另外，程序还绑定了窗口关闭事件，重新定义了关闭函数，增加了确认选择。</p><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RhCm4yS7JHtR6Q><p><strong class=highlight-text toutiao-origin=span>菜单栏/工具栏/状态栏</strong></p><p>通常，一个完整的窗口程序一般都有菜单栏、工具栏和状态栏。下面的代码演示了如何创建菜单栏、工具栏和状态栏，顺便演示了类的静态属性的定义和用法。不过，说实话，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>的工具栏有点丑，幸好，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>还有一个 AUI 的工具栏比较漂亮，我会在后面的例子里演示它的用法。</p><p>另外，请注意，代码里面用到了4个16x16的工具按钮，请自备4个图片文件，保存路径请查看代码中的注释。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>APP_TITLE = u'菜单、工具栏、状态栏'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>id_open = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_save = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_quit = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_help = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_about = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((800, 600))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p>self.Ma<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-1">xi</i>mize</p><p>self.SetWindowStyle(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DEFAULT_FRAME_STYLE)</p><p>self._CreateMenuBar # 菜单栏</p><p>self._CreateToolBar # 工具栏</p><p>self._CreateStatusBar # 状态栏</p><p>def _CreateMenuBar(self):</p><p>'''创建菜单栏'''</p><p>self.mb = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.MenuBar</p><p># 文件菜单</p><p>m = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Menu</p><p>m.Append(self.id_open, u"打开文件")</p><p>m.Append(self.id_save, u"保存文件")</p><p>m.AppendSeparator</p><p>m.Append(self.id_quit, u"退出系统")</p><p>self.mb.Append(m, u"文件")</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MENU, self.OnOpen, id=self.id_open)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MENU, self.OnSave, id=self.id_save)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MENU, self.OnQuit, id=self.id_quit)</p><p># 帮助菜单</p><p>m = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Menu</p><p>m.Append(self.id_help, u"帮助主题")</p><p>m.Append(self.id_about, u"关于...")</p><p>self.mb.Append(m, u"帮助")</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MENU, self.OnHelp,id=self.id_help)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MENU, self.OnAbout,id=self.id_about)</p><p>self.SetMenuBar(self.mb)</p><p>def _CreateToolBar(self):</p><p>'''创建工具栏'''</p><p>bmp_open = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/open_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY) # 请自备按钮图片</p><p>bmp_save = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/save_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY) # 请自备按钮图片</p><p>bmp_help = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/help_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY) # 请自备按钮图片</p><p>bmp_about = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/about_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY) # 请自备按钮图片</p><p>self.tb = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ToolBar(self)</p><p>self.tb.SetToolBitmapSize((16,16))</p><p>self.tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>LabelTool(self.id_open, u'打开文件', bmp_open, shortHelp=u'打开', longHelp=u'打开文件')</p><p>self.tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>LabelTool(self.id_save, u'保存文件', bmp_save, shortHelp=u'保存', longHelp=u'保存文件')</p><p>self.tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Separator</p><p>self.tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>LabelTool(self.id_help, u'帮助', bmp_help, shortHelp=u'帮助', longHelp=u'帮助')</p><p>self.tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>LabelTool(self.id_about, u'关于', bmp_about, shortHelp=u'关于', longHelp=u'关于...')</p><p>#self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_TOOL_RCLICKED, self.OnOpen, id=self.id_open)</p><p>self.tb.Realize</p><p>def _CreateStatusBar(self):</p><p>'''创建状态栏'''</p><p>self.sb = self.CreateStatusBar</p><p>self.sb.SetFieldsCount(3)</p><p>self.sb.SetStatusWidths([-2, -1, -1])</p><p>self.sb.SetStatusStyles([<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SB_RAISED, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SB_RAISED, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SB_RAISED])</p><p>self.sb.SetStatusText(u'状态信息0', 0)</p><p>self.sb.SetStatusText(u'', 1)</p><p>self.sb.SetStatusText(u'状态信息2', 2)</p><p>def OnOpen(self, evt):</p><p>'''打开文件'''</p><p>self.sb.SetStatusText(u'打开文件', 1)</p><p>def OnSave(self, evt):</p><p>'''保存文件'''</p><p>self.sb.SetStatusText(u'保存文件', 1)</p><p>def OnQuit(self, evt):</p><p>'''退出系统'''</p><p>self.sb.SetStatusText(u'退出系统', 1)</p><p>self.Destroy</p><p>def OnHelp(self, evt):</p><p>'''帮助'''</p><p>self.sb.SetStatusText(u'帮助', 1)</p><p>def OnAbout(self, evt):</p><p>'''关于'''</p><p>self.sb.SetStatusText(u'关于', 1)</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RhCm4ye1zKbaVq><p><strong class=highlight-text toutiao-origin=span>动态布局</strong></p><p>在“事件和事件驱动”的例子里，输入框、按钮等控件的布局，使用的是绝对定位，我习惯叫做静态布局。静态布局非常直观，但不能自动适应窗口的大小变化。更多的时候，我们使用被称为布局管理器的 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Sizer 来实现动态布局。<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Sizer 有很多种，我记不住，所以只喜欢用 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer，最简单的一种布局管理器。</p><p>和一般的控件不同，布局管理器就像是一个魔法口袋：它是无形的，但可以装进不限数量的任意种类的控件——包括其他的布局管理器。当然，魔法口袋也不是万能的，它有一个限制条件：装到里面的东西，要么是水平排列的，要么是垂直排列的，不能排成方阵。好在程序员可以不受限制地使用魔法口袋，当我们需要排成方阵时，可以先每一行使用一个魔法口袋，然后再把所有的行装到一个魔法口袋中。</p><p>创建一个魔法口袋，装进几样东西，然后在窗口中显示的伪代码是这样的：</p><pre><div><p>魔法口袋 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer # 默认是水平的，想要垂直放东西，需要加上 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.VERTICAL 这个参数</p><p>魔法口袋.a<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(确认按钮, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0) # 装入确认按钮</p><p>魔法口袋.a<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(取消按钮, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0) # 装入取消按钮</p><p>窗口.SetSizer(魔法口袋) # 把魔法口袋放到窗口上</p><p>窗口.Layout # 窗口重新布局</p></div></pre><p>魔法口袋的 a<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i> 方法总共有4个参数：第1个参数很容易理解，就是要装进口袋的物品；第2个参数和所有 a<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i> 方法的第2个参数之和的比，表示装进口袋的物品占用空间的比例，0表示物品多大就占多大地儿，不额外占用空间；第3个参数相对复杂些，除了约定装进口袋的物品在其占用的空间里面水平垂直方向的对齐方式外，还可以指定上下左右四个方向中的一个或多个方向的留白（pa<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>ing）；第4个参数就是留白像素数。</p><p>下面是一个完整的例子。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>APP_TITLE = u'动态布局'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(240, 240, 240))</p><p>self.SetSize((800, 600))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p>preview = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1, style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SUNKEN_BORDER)</p><p>preview.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 0, 0))</p><p>btn_capture = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'拍照', size=(100, -1))</p><p>btn_up = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'↑', size=(30, 30))</p><p>btn_down = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'↓', size=(30, 30))</p><p>btn_left = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'←', size=(30, 30))</p><p>btn_right = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'→', size=(30, 30))</p><p>tc = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TextCtrl(self, -1, '', style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TE_MULTILINE)</p><p>sizer_arrow_mid = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer</p><p>sizer_arrow_mid.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_left, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.RIGHT, 16)</p><p>sizer_arrow_mid.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_right, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.LEFT, 16)</p><p>#sizer_arrow = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.VERTICAL)</p><p>sizer_arrow = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticBoxSizer(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticBox(self, -1, u'方向键'), <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.VERTICAL)</p><p>sizer_arrow.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_up, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_CENTER|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0)</p><p>sizer_arrow.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(sizer_arrow_mid, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TOP|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BOTTOM, 1)</p><p>sizer_arrow.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_down, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_CENTER|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0)</p><p>sizer_right = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.VERTICAL)</p><p>sizer_right.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_capture, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 20)</p><p>sizer_right.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(sizer_arrow, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_CENTER|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0)</p><p>sizer_right.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(tc, 1, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 10)</p><p>sizer_max = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer</p><p>sizer_max.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(preview, 1, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EXPAND|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.LEFT|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TOP|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BOTTOM, 5)</p><p>sizer_max.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(sizer_right, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EXPAND|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 0)</p><p>self.SetAutoLayout(True)</p><p>self.SetSizer(sizer_max)</p><p>self.Layout</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RhCm4yw6cTCKqG><p><strong class=highlight-text toutiao-origin=span>AUI布局</strong></p><p>Advanced User Interface，简称AUI，是 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python 的子模块，使用 AUI 可以方便地开发出美观、易用的用户界面。从2.8.9.2版本之后，<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python 增加了一个高级通用部件库 Advanced Generic Widgets，简称 AGW 库。我发先 AGW 库也提供了 AUI 模块 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.lib.agw.aui，而 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.aui 也依然保留着。</p><p>AUI布局可以概括为以下四步：</p><ul><li><p>创建一个布局管理器：mgr = aui.AuiManager</p></li><li><p>告诉主窗口由mgr来管理界面：mgr.SetManagedWindow</p></li><li><p>添加界面上的各个区域：mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane</p></li><li><p>更新界面显示：mgr.Update</p></li></ul><p>下面的代码演示了如何使用AUI布局管理器创建和管理窗口界面。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.lib.agw.aui as aui</p><p>APP_TITLE = u'使用AUI布局管理器'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>id_open = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_save = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_quit = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_help = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>id_about = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.NewId</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((800, 600))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p>self.tb1 = self._CreateToolBar</p><p>self.tb2 = self._CreateToolBar</p><p>self.tbv = self._CreateToolBar('V')</p><p>p_left = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1)</p><p>p_center0 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1)</p><p>p_center1 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1)</p><p>p_bottom = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1)</p><p>btn = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(p_left, -1, u'切换', pos=(30,200), size=(100, -1))</p><p>btn.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_BUTTON, self.OnSwitch)</p><p>text0 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(p_center0, -1, u'我是第1页', pos=(40, 100), size=(200, -1), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_LEFT)</p><p>text1 = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(p_center1, -1, u'我是第2页', pos=(40, 100), size=(200, -1), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALIGN_LEFT)</p><p>self._mgr = aui.AuiManager</p><p>self._mgr.SetManagedWindow(self)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(self.tb1, </p><p>aui.AuiPaneInfo.Name("ToolBar1").Caption(u"工具条").ToolbarPane.Top.Row(0).Position(0).Floatable(False)</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(self.tb2, </p><p>aui.AuiPaneInfo.Name("ToolBar2").Caption(u"工具条").ToolbarPane.Top.Row(0).Position(1).Floatable(True)</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(self.tbv, </p><p>aui.AuiPaneInfo.Name("ToolBarV").Caption(u"工具条").ToolbarPane.Right.Floatable(True)</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(p_left,</p><p>aui.AuiPaneInfo.Name("LeftPanel").Left.Layer(1).MinSize((200,-1)).Caption(u"操作区").MinimizeButton(True).Ma<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-1">xi</i>mizeButton(True).CloseButton(True)</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(p_center0,</p><p>aui.AuiPaneInfo.Name("CenterPanel0").CenterPane.Show</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(p_center1,</p><p>aui.AuiPaneInfo.Name("CenterPanel1").CenterPane.Hide</p><p>)</p><p>self._mgr.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Pane(p_bottom,</p><p>aui.AuiPaneInfo.Name("BottomPanel").Bottom.MinSize((-1,100)).Caption(u"消息区").CaptionVisible(False).Resizable(True)</p><p>)</p><p>self._mgr.Update</p><p>def _CreateToolBar(self, d='H'):</p><p>'''创建工具栏'''</p><p>bmp_open = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/open_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>bmp_save = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/save_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>bmp_help = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/help_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>bmp_about = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/about_16.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>if d.upper in ['V', 'VERTICAL']:</p><p>tb = aui.AuiToolBar(self, -1, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DefaultPosition, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DefaultSize, agwStyle=aui.AUI_TB_TEXT|aui.AUI_TB_VERTICAL)</p><p>else:</p><p>tb = aui.AuiToolBar(self, -1, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DefaultPosition, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DefaultSize, agwStyle=aui.AUI_TB_TEXT)</p><p>tb.SetToolBitmapSize(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Size(16, 16))</p><p>tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>SimpleTool(self.id_open, u'打开', bmp_open, u'打开文件')</p><p>tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>SimpleTool(self.id_save, u'保存', bmp_save, u'保存文件')</p><p>tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>Separator</p><p>tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>SimpleTool(self.id_help, u'帮助', bmp_help, u'帮助')</p><p>tb.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>SimpleTool(self.id_about, u'关于', bmp_about, u'关于')</p><p>tb.Realize</p><p>return tb</p><p>def OnSwitch(self, evt):</p><p>'''切换信息显示窗口'''</p><p>p0 = self._mgr.GetPane('CenterPanel0')</p><p>p1 = self._mgr.GetPane('CenterPanel1')</p><p>p0.Show(not p0.IsShown)</p><p>p1.Show(not p1.IsShown)</p><p>self._mgr.Update</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RhCm5FM3UpUToj><p class=pgc-img-caption><strong class=highlight-text toutiao-origin=span>DC绘图</strong></p><p>DC 是 Device Context 的缩写，字面意思是设备上下文——我一直不能正确理解DC这个中文名字，也找不到更合适的说法，所以，我坚持使用DC而不是设备上下文。DC可以在屏幕上绘制点线面，当然也可以绘制文本和图像。事实上，在底层所有控件都是以位图形式绘制在屏幕上的，这意味着，我们一旦掌握了DC这个工具，就可以自己创造我们想要的控件了。</p><p>DC有很多种，PaintDC，ClientDC，MemoryDC等。通常，我们可以使用 ClientDC 和 MemoryDC，PaintDC 是发生重绘事件（<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_PAINT）时系统使用的。使用 ClientDC 绘图时，需要记录绘制的每一步工作，不然，系统重绘时会令我们前功尽弃——这是使用DC最容易犯的错误。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os</p><p>APP_TITLE = u'使用DC绘图'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((800, 600))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p>self.palette = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Panel(self, -1, style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SUNKEN_BORDER)</p><p>self.palette.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 0, 0))</p><p>btn_base = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Button(self, -1, u'基本方法', size=(100, -1))</p><p>sizer_max = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BoxSizer</p><p>sizer_max.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(self.palette, 1, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EXPAND|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.LEFT|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TOP|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BOTTOM, 5)</p><p>sizer_max.A<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-2">dd</i>(btn_base, 0, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ALL, 20)</p><p>self.SetAutoLayout(True)</p><p>self.SetSizer(sizer_max)</p><p>self.Layout</p><p>btn_base.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_BUTTON, self.OnBase)</p><p>self.palette.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_MOUSE_EVENTS, self.OnMouse)</p><p>self.palette.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_PAINT, self.OnPaint)</p><p>self.xy = None</p><p>self.lines = list</p><p>self.img = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/times.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>self.ReDraw</p><p>def OnMouse(self, evt):</p><p>'''移动鼠标画线'''</p><p>if evt.EventType == 10032: #左键按下，py3环境下为10030</p><p>self.xy = (evt.x, evt.y)</p><p>elif evt.EventType == 10033: #左键弹起，py3环境下为10031</p><p>self.xy = None</p><p>elif evt.EventType == 10038: #鼠标移动，py3环境下为10036</p><p>if self.xy:</p><p>dc = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ClientDC(self.palette)</p><p>dc.SetPen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Pen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0,224,0), 2))</p><p>dc.DrawLine(self.xy[0], self.xy[1], evt.x, evt.y)</p><p>self.lines.append((self.xy[0], self.xy[1], evt.x, evt.y))</p><p>self.xy = (evt.x, evt.y)</p><p>def OnBase(self, evt):</p><p>'''DC基本方法演示'''</p><p>img = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Bitmap('res/times.png', <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ANY)</p><p>w, h = self.palette.GetSize</p><p>dc = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ClientDC(self.palette)</p><p>dc.SetPen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Pen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224,0,0), 1))</p><p>dc.SetBrush(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Brush(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0,80,80) ))</p><p>dc.DrawRectangle(10,10,w-22,h-22)</p><p>dc.DrawLine(10,h/2,w-12,h/2)</p><p>dc.DrawBitmap(img, 50, 50)</p><p>dc.SetTextForeground(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224,224,224))</p><p>dc.SetFont(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Font(16, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTFAMILY_DEFAULT, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTSTYLE_NORMAL, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTWEIGHT_NORMAL, False, 'Comic Sans MS'))</p><p>dc.DrawText(u'霜重闲愁起', 100, 500)</p><p>dc.DrawRotatedText(u'春深风也疾', 250, 500, 30)</p><p>def OnPaint(self, evt):</p><p>'''重绘事件函数'''</p><p>dc = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.PaintDC(self.palette)</p><p>self.Paint(dc)</p><p>def ReDraw(self):</p><p>'''手工绘制'''</p><p>dc = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.ClientDC(self.palette)</p><p>self.Paint(dc)</p><p>def Paint(self, dc):</p><p>'''绘图'''</p><p>w, h = self.palette.GetSize</p><p>dc.Clear</p><p>dc.SetPen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Pen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224,0,0), 1))</p><p>dc.SetBrush(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Brush(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0,80,80) ))</p><p>dc.DrawRectangle(10,10,w-22,h-22)</p><p>dc.DrawLine(10,h/2,w-12,h/2)</p><p>dc.DrawBitmap(self.img, 50, 50)</p><p>dc.SetTextForeground(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224,224,224))</p><p>dc.SetFont(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Font(16, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTFAMILY_DEFAULT, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTSTYLE_NORMAL, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTWEIGHT_NORMAL, False, 'Comic Sans MS'))</p><p>dc.DrawText(u'霜重闲愁起', 100, 500)</p><p>dc.DrawRotatedText(u'春深风也疾', 250, 500, 30)</p><p>dc.SetPen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Pen(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0,224,0), 2))</p><p>for line in self.lines:</p><p>dc.DrawLine(line[0],line[1],line[2],line[3])</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RhCm5Fb4XmEE0G><p><strong class=highlight-text toutiao-origin=span>定时器和线程</strong></p><p>这个例子里面设计了一个数字式钟表，一个秒表，秒表显示精度十分之一毫秒。从代码设计上来说没有任何难度，实现的方法有很多种，可想要达到一个较好的显示效果，却不是一件容易的事情。请注意体会 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.CallAfter 的使用条件。</p><pre><div><p>#-*- coding: utf-8 -*-</p><p>import <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i></p><p>import win32api</p><p>import sys, os, time</p><p>import threading</p><p>APP_TITLE = u'定时器和线程'</p><p>APP_ICON = 'res/python.ico'</p><p>class mainFrame(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame):</p><p>'''程序主窗口类，继承自<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame'''</p><p>def __init__(self, parent):</p><p>'''构造函数'''</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Frame.__init__(self, parent, -1, APP_TITLE)</p><p>self.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(224, 224, 224))</p><p>self.SetSize((320, 300))</p><p>self.Center</p><p>if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":</p><p>exeName = win32api.GetModuleFileName(win32api.GetModuleHandle(None))</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(exeName, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>else :</p><p>icon = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Icon(APP_ICON, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.BITMAP_TYPE_ICO)</p><p>self.SetIcon(icon)</p><p>#font = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Font(24, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DECORATIVE, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTSTYLE_NORMAL, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTWEIGHT_NORMAL, False, 'Comic Sans MS')</p><p>font = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Font(30, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.DECORATIVE, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTSTYLE_NORMAL, <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.FONTWEIGHT_NORMAL, False, 'Monaco')</p><p>self.clock = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(self, -1, u'08:00:00', pos=(50,50), size=(200,50), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TE_CENTER|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SUNKEN_BORDER)</p><p>self.clock.SetForegroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 224, 32))</p><p>self.clock.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 0, 0))</p><p>self.clock.SetFont(font)</p><p>self.stopwatch = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.StaticText(self, -1, u'0:00:00.0', pos=(50,<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-3">150</i>), size=(200,50), style=<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.TE_CENTER|<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.SUNKEN_BORDER)</p><p>self.stopwatch.SetForegroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 224, 32))</p><p>self.stopwatch.SetBackgroundColour(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Colour(0, 0, 0))</p><p>self.stopwatch.SetFont(font)</p><p>self.timer = <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.Timer(self)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_TIMER, self.OnTimer, self.timer)</p><p>self.timer.Start(50)</p><p>self.Bind(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.EVT_KEY_DOWN, self.OnKeyDown)</p><p>self.sec_last = None</p><p>self.is_start = False</p><p>self.t_start = None</p><p>thread_sw = threading.Thread(target=self.StopWatchThread)</p><p>thread_sw.setDaemon(True)</p><p>thread_sw.start</p><p>def OnTimer(self, evt):</p><p>'''定时器函数'''</p><p>t = time.localtime</p><p>if t.tm_sec != self.sec_last:</p><p>self.clock.SetLabel('%02d:%02d:%02d'%(t.tm_hour, t.tm_min, t.tm_sec))</p><p>self.sec_last = t.tm_sec</p><p>def OnKeyDown(self, evt):</p><p>'''键盘事件函数'''</p><p>if evt.GetKeyCode == <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.WXK_SPACE:</p><p>self.is_start = not self.is_start</p><p>self.t_start= time.time</p><p>elif evt.GetKeyCode == <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.WXK_ESCAPE:</p><p>self.is_start = False</p><p>self.stopwatch.SetLabel('0:00:00.0')</p><p>def StopWatchThread(self):</p><p>'''线程函数'''</p><p>while True:</p><p>if self.is_start:</p><p>n = int(10*(time.time - self.t_start))</p><p>deci = n%10</p><p>ss = int(n/10)%60</p><p>mm = int(n/600)%60</p><p>hh = int(n/36000)</p><p><i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.CallAfter(self.stopwatch.SetLabel, '%d:%02d:%02d.%d'%(hh, mm, ss, deci))</p><p>time.sleep(0.02)</p><p>class mainApp(<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>.App):</p><p>def OnInit(self):</p><p>self.SetAppName(APP_TITLE)</p><p>self.Frame = mainFrame(None)</p><p>self.Frame.Show</p><p>return True</p><p>if __name__ == "__main__":</p><p>app = mainApp</p><p>app.MainLoop</p></div></pre><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RhCm5Fm3dh3iu0><p><strong>后记</strong></p><p>我使用 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python 长达十年。它给了我很多的帮助，它让我觉得一切就该如此。这是我第一次写关于 <i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-6">wx</i>Python 的话题，写作过程中，我心存感激。</p><p><strong class=highlight-text toutiao-origin=span>扫码查看原文</strong></p><p><strong class=highlight-text toutiao-origin=span>▼▼▼</strong></p><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RhCm5Fy5rNotev><p><em>（*本文为AI科技大本营转载文章，</em><em>转载</em><em>请微</em><em>信联系 1092722531</em><em>）</em></p><p>◆</p><p>◆</p><p>2019 中国大数据技术大会（BDTC）再度来袭！豪华主席阵容及百位技术专家齐聚，15 场精选专题技术和行业论坛，超强干货+技术剖析+行业实践立体解读，深入解析热门技术在行业中的实践落地。<strong class=highlight-text toutiao-origin=span>6.6 折票限时特惠（立减<i class="chrome-extension-mutihighlight chrome-extension-mutihighlight-style-1">140</i>0元），学生票仅 599 元！</strong></p><img alt="wxPython：Python首选的GUI库 | CSDN博文精选" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RgliMgw2TsbvLz></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'wxPython','Python','首选'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>