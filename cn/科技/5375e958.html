<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「C语言」格式化输入与输出 | 极客快訊</title><meta property="og:title" content="「C语言」格式化输入与输出 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/bea387ccbf2b435cb13685291bbe2930"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5375e958.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5375e958.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5375e958.html><meta property="article:published_time" content="2020-10-29T21:09:46+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:46+08:00"><meta name=Keywords content><meta name=description content="「C语言」格式化输入与输出"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5375e958.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「C语言」格式化输入与输出</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>本文通过函数原型--参数--返回值--实例的顺序一一解析C语言中常用输入输出函数。首先对在格式化输入输出中经常出现的控制格式以表格形式列出。</p><p><strong>格式控制字符</strong></p><p>以printf为例： printf（“%[falgs][width][.prec ][hIL]type”）</p><p><strong>flags</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bea387ccbf2b435cb13685291bbe2930><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><strong>width或.prec</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c0c4b9a467924272b5b6c36d23c7ed91><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><strong>hIL</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/bea106e35c8b40ea9af76a5e55eb939d><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><strong>type</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f26bc1e1544e433ab11ff1de0920f3f6><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><strong>转义字符</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24af4af0fb8b4ec098730e52fcb4b746><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><h1>格式化输出</h1><h1>1.printf()函数</h1><p><strong>函数原型</strong>：</p><p>int printf(const char *format, ...);</p><p><strong>函数说明：</strong></p><p>printf函数的调用格式为：printf("&lt;格式化字符串>", &lt;参量表>);</p><p>格式化字符串(format)中包含两部分：一是正常字符，按照原样输出；二是以%开始的可控字符，由参量表中的内容决定。参量表就是一系列需要输出的参数，可以有多个参数，各个参数之间用","分开，并且与格式化字符串中的可控字符的个数一一对应。</p><p><strong>返回值：</strong>对于绝大部分初学者来说几乎没人去关心printf的返回值，甚至说有一部分人可能都不知道它有返回值，但是从函数原型中我们可以看到它确实是有的，printf函数的返回值就是输出的<strong>字符数量</strong>，该数量包括<strong>数字，字母，标点符号，空格和换行等。</strong></p><p>下面通过一个例子来说明，想必对printf函数就会很清楚了，同时也会对同时也会对上面的控制字符有清晰地认识。</p><p>#include &lt;stdio.h></p><p>​</p><p>int main(void)</p><p>{</p><p>printf("%3d\n",12345);</p><p>printf("%9d\n", 123);</p><p>printf("%09d\n", 123);</p><p>printf("%-9d\n", 123);</p><p>printf("%+9d\n", 123);</p><p>printf("%-+9d\n", 123);</p><p>printf("%+-9d\n", 123);</p><p>printf("%9.2f\n", 123.0);</p><p>printf("%*d\n", 6, 123);</p><p></p><p>//测试printf的返回值</p><p>int num = 12345;</p><p>int i1 = printf("%d\n", num);</p><p>int i2 = printf("%d", num);</p><p>printf("\ni1 = %d\ti2 = %d\n", i1, i2);</p><p>​</p><p>return 0;</p><p>}</p><p><strong>运行结果：</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ec372341cc0f48818da5c48e3e74a6a0><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><br></p><p><strong>结果分析：</strong></p><p>通过前面的表可以知道，width中的number是最小的字符数，它的意思是：如果实际输出的位数不够，则会补齐位数，如果实际输出位数比它大，则原样输出，如运行结果中的第一二行。其它的大家应该都能看懂，我来解释一下printf("%*d\n", 6, 123); * 表示下一个参数是字符数，于是这个语句其实等价于printf("%6d\n", 123);通过运行结果我们也可以看出来，最后确实是输出了6个字符。那么这样做有什么好处呢？这样做的话，我们就可以通过使这个参数为变量，从而让整个程序更为灵活，而且这个变量也可以让用户自己输入。即代码变成printf("%*d\n", number, 123);。最后我们来看printf的返回值，我们知道printf返回的是输出的字符个数，i1=6,i2=5，是因为i1多打印了一个换行符，所以如果你想使用printf的返回值必须对换行符制表符加以注意，因为那也是一个字符。</p><h1>2.sprintf函数</h1><p><strong>函数原型：</strong></p><p>int sprintf(char *str, const char *format, ...);</p><p><strong>函数说明：</strong></p><p>sprintf函数的主要功能是把格式化的数据(format)写入某个字符串中，即发送格式化输出到string所指向的字符串。</p><p>函数调用形式：sprintf(str, "&lt;格式字符串>"， &lt;参量表>)；</p><p>从函数原型中可以看出sprintf和printf十分相似，对于相同的部分，在此不再赘述。不同之处在于多了一个指向char类型的指针str，通常情况下我们会定义一个字符数组，它的作用是存储字符串。</p><p><strong>返回值：</strong>函数调用成功则返回<strong>字符串长度</strong>（这个长度并不包括字符串末尾的空字符），如果失败则返回一个负数。<strong>注意：使用该函数要避免堆栈溢出，或选择使用更为安全的snprintf函数。</strong></p><p>下面进行代码分析：</p><p>#include &lt;stdio.h></p><p>​</p><p>int main(void)</p><p>{</p><p>printf("%3d\n",12345);</p><p>printf("%9d\n", 123);</p><p>printf("%09d\n", 123);</p><p>printf("%-9d\n", 123);</p><p>printf("%+9d\n", 123);</p><p>printf("%-+9d\n", 123);</p><p>printf("%+-9d\n", 123);</p><p>printf("%9.2f\n", 123.0);</p><p>printf("%*d\n", 6, 123);</p><p></p><p>//测试printf的返回值</p><p>int num = 12345;</p><p>int i1 = printf("%d\n", num);</p><p>int i2 = printf("%d", num);</p><p>printf("\ni1 = %d\ti2 = %d\n", i1, i2);</p><p>​</p><p>return 0;</p><p>}</p><p><strong>结果分析：</strong></p><p>运行的结果如我们所设想的那样，123被存放到str的数组中，并且函数的返回值也正是字符个数。对于不同的打印格式这里就不再演示，可以参照printf函数部分的代码。</p><p><strong>注意，请读者试着编译运行下方代码，观察运行结果是否如你所想</strong></p><p>sprintf(str, "%.2f", 123);</p><p>printf("str = %s", str);</p><h1>3.fprintf函数</h1><p><strong>函数原型：</strong></p><p>int sprintf(char *str, const char *format, ...);</p><p><strong>函数说明：</strong></p><p>fprintf函数主要作用是格式化输出到一个流文件中，即将指定格式(format)，输入到stream中去。</p><p>函数调用形式：sprintf(str, "&lt;格式字符串>"， &lt;参量表>)；</p><p>通过函数原型我们可以知道fprintf函数与sprintf函数很相似，区别就是sprintf是向字符数组写入数据，fprintf则是向文件写入数据，具体的实现方法，则是通过向指向FILE的指针，写入数据。</p><p><strong>返回值：</strong>成功返回输出的<strong>字节数</strong>，失败返回EOF(end of file)。</p><p>下面进行代码分析：</p><p>#include &lt;stdio.h></p><p>​</p><p>int main(void)</p><p>{</p><p>int x = 123;</p><p>int i = 0;</p><p>char str[10] = {0};</p><p>i = sprintf(str, "%d", 123);</p><p>​</p><p>printf("str = %s\ti = %d\n", str, i);</p><p>​</p><p>return 0;</p><p>}</p><p>//运行结果：</p><p>str = 123 i = 3</p><p><strong>运行结果：</strong></p><div class=pgc-img><img alt=「C语言」格式化输入与输出 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f50227f9677e45f899bbd4298c382827><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-ios"><section></section></div><div class="pgc-img-button setImageCover fix-ios"><section></section></div><div class="pgc-img-button deleteImage fix-ios"><section></section></div></div><div class="pgc-img-border pgc-img-border-ios"></div></div><p><strong>结果分析：</strong></p><p>123456被成功的输入到123.txt文件中了, 函数的返回值i=6。对于fopen函数可能有些人不是很了解，由于本文主要说的是格式化输入输出函数，所以不会在此展开，后面会专门写一篇关于文件操作的函数。</p><h1>格式化输入函数</h1><h1>1.scanf函数</h1><p><strong>函数原型：</strong></p><p>int fprintf(FILE *stream, const *format, ...);</p><p><strong>函数说明：</strong></p><p>scanf函数是从标准输入流中读取内容，并将其保存在对应的地址中。</p><p>函数调用形式：scanf("&lt;格式化字符串>"，&lt;地址表>);</p><p>scanf函数和printf函数是很相似的，对于初学者来说，它们也是使用率极高的两个函数，所以他们的使用方法都大致相同，在此提一下，在写地址标的变量时，一定不要忘记取址符&，同时它还有一个比较特殊但是很有用的格式控制字符[]，它的作用是扫描字符集合，具体后面会上代码进行解释。</p><p><strong>返回值：</strong>返回成功读入的<strong>数据个数</strong>，如在读入数据时遇到“文件结束”则返回EOF。</p><p>其实关于scanf函数可以说的有很多，但是由于篇幅原因，本文会选择经常容易出现的错误来举例，不会说得十分详细，有兴趣的小伙伴可以自行查阅资料，或者在下方进行评论。</p><p>下面进行代码分析_1：</p><p>#include &lt;stdio.h></p><p>​</p><p>int main(void)</p><p>{</p><p>int i;</p><p>FILE *stream = fopen("123.txt", "w");</p><p>i = fprintf(stream, "%d", 123456);</p><p>printf("i = %d\n", i);</p><p></p><p>return 0;</p><p>}</p><p>//运行结果</p><p>i = 6</p><p><strong>结果分析：</strong></p><p>//一下输入方式都合法,分别输入2/3/4代表x/y/z</p><p>2 3 4</p><p>2 3 4</p><p>2</p><p>3</p><p>4</p><p>//输出结果都为：</p><p>x = 2 y = 4 z = 6</p><p>//原因分析</p><p>scanf函数会在操作中略去一个或多个空白符，直至出现第一个非空白符为止，所以以上输入方式都是可以的</p><p>下面进行代码分析_2：</p><p>//只附上关键部分代码</p><p>scanf("%d,%d,%d", &x, &y, &z);</p><p>scanf("x=%d,y=%d,z=%d",&x, &y, &z);</p><p><strong>结果分析：</strong></p><p>//scanf的格式控制字符串可以有其它非空白符，但是在输入时必要将这些字符按照相同的一并输出</p><p>//下列输入是合法的</p><p>//对于第一句scanf</p><p>3,4,5/3, 4,5/</p><p>3,</p><p>4, 5/</p><p>//对于第二句scanf</p><p>x=3,y=4,z=5/x=3, y=4,z=5/</p><p>//下列语句是不合法的</p><p>3 ， 4 ，5</p><p>x =3, y=4 , z= 5</p><p>此外你可能会有所疑问，如果我想输入一段英文文字，那么它是如何判定我这个是一句话还是一段话呢？答案是无法判定，scanf函数会自动略去空白符，所以它就只能读取你的第一个单词，那么这样一来我们是不是就无法输入一段文字呢？答案当然是可以输入的，这是就需要用到前面说的一种控制字符[]，具体的效果及使用方法看代码。</p><p>#include &lt;stdio.h></p><p>int main(void)</p><p>{</p><p>char str1[40];</p><p>char str2[40];</p><p>char str3[40];</p><p>scanf("%s", str1);</p><p>printf("%s\n",str1);</p><p>scanf("%[^\n]s", str2);</p><p>printf("%s\n",str2);</p><p>scanf("%[abcd]s", str3);</p><p>printf("%s\n",str3);</p><p>return 0;</p><p>}</p><p><strong>代码分析：</strong></p><p>//[]放在%的后面，常见的用法有两种一种是里面有'^'符号,一种是没有。</p><p>//前者代表，scanf会将空白符一起读入。</p><p>//后者代表，scanf会连续读入输入值，直到出现不在[]中间的字符为止。</p><p>//对于第一个scanf</p><p>输入：hello world</p><p>输出：hello</p><p>//对于第二个scanf</p><p>输入：hello world</p><p>输出：hello world</p><p>//对于第三个scanf</p><p>输入：abdlhfg</p><p>输出：ab</p><p>输入：sdgafsdgacacb</p><p>输出：</p><h1>2.sscanf函数</h1><p><strong>函数原型：</strong></p><p>int sscanf(const char *buffer, const char *format,...);</p><p><strong>函数说明：</strong></p><p>sscanf与scanf函数类似，区别在于前者是以指定字符串作为输入，后者是以键盘作为输入。</p><p>函数调用形式：sscanf(&lt;存储的数据>, "&lt;格式字符串>"， &lt;存储的位置>)；</p><p><strong>返回值：</strong>返回<strong>成功赋值</strong>的个数，如果在第一次读取之前到达字符串结尾则返回EOF，失败返回-1。</p><p><strong>演示代码：</strong></p><p>#include &lt;stdio.h></p><p>int main(void)</p><p>{</p><p>char str[100];</p><p>sscanf("123abc", "%5s", str);</p><p>printf("%s\n", str);</p><p>return 0;</p><p>}</p><p>//运行结果：</p><p>123ab //%5s限定了字符串的长度。</p><h1>3.fscanf函数</h1><p><strong>函数原型：</strong></p><p>int fscanf(FILE *stream, const char *format,...);</p><p><strong>函数说明：</strong></p><p>fscanf与sscanf函数类似，区别在于前者是以文件作为输入，后者是以指定字符串作为输入。</p><p>函数调用形式：fscanf(&lt;输入流>, "&lt;格式字符串>"， &lt;存储的位置>)；</p><p><strong>返回值：</strong>返回<strong>成功读入参数</strong>的个数，失败返回EOF(-1)。</p><p><strong>演示代码：</strong></p><p>#include &lt;stdio.h></p><p>int main(void)</p><p>{</p><p>char str[30];</p><p>int x;</p><p>FILE *fp = fopen("1234.txt", "r");</p><p>fscanf(fp, "%s %d", str, &x);</p><p>printf("str = %s\tx = %d\n", str, x);</p><p>return 0;</p><p>}</p><p>//运行结果：</p><p>预先在1234.txt文件中输入了如下内容：123456 789</p><p>程序运行的结果;</p><p>str = 123456 x = 789</p><p>注：本文的六个函数头文件均为&lt;stdio.h>。</p><p>另：如有不正之处请之处，欢迎大家在评论区留言。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'语言','输入','输出'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/82c29328.html alt=C语言I/O输入输出专题——开篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/44f68a822ffc4c19a1629c1a2d58618a style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/82c29328.html title=C语言I/O输入输出专题——开篇>C语言I/O输入输出专题——开篇</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/984a7feb.html alt="C语言 技能提升 系列文章（七）格式化输入/输出" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9f18e409833c433fb71fd72e9b3f9307 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/984a7feb.html title="C语言 技能提升 系列文章（七）格式化输入/输出">C语言 技能提升 系列文章（七）格式化输入/输出</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/7ce32216.html alt=C语言-输入输出特殊(字符串) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/76d68ca953ac448697d58b9120d350f2 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/7ce32216.html title=C语言-输入输出特殊(字符串)>C语言-输入输出特殊(字符串)</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>