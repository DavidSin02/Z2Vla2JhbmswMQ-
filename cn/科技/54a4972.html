<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>需要！Linux常用监视和故障排查命令详解 | 极客快訊</title><meta property="og:title" content="需要！Linux常用监视和故障排查命令详解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/9584c87067464eb9802e9894e28c17aa"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/54a4972.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/54a4972.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/54a4972.html><meta property="article:published_time" content="2020-10-29T20:53:30+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:30+08:00"><meta name=Keywords content><meta name=description content="需要！Linux常用监视和故障排查命令详解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/54a4972.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>需要！Linux常用监视和故障排查命令详解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><blockquote><p>公众号：老油条IT记</p></blockquote><p>#命令预览</p><p>1.top</p><p>2.ps</p><p>3.nice</p><p>4.kill</p><p>5.iostat</p><p>6.mpstat</p><p>7.vmstat</p><p>8.df</p><p>9.du</p><p>10.netstat</p><p>11.ss</p><p><br></p><p>#首先我们先来了解一下什么是进程</p><p>#进程：是Linux用来表示正在运行的程序的一种抽象概念，Linux系统上所有运行的东西都可以称为进程</p><h1 class=pgc-h-arrow-right><strong>1.top命令：动态查看进程相关信息</strong></h1><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9584c87067464eb9802e9894e28c17aa><p class=pgc-img-caption></p></div><p><strong>#提示：前五行是系统整体的统计信息</strong></p><p>#详解相关命令意思</p><p><strong>#第一行：任务队列信息，和uptime命令的执行结果相同</strong></p><blockquote><p>[root@ctos1 ~]# uptime</p><p>10:29:45 up 9:11, 2 users, load average: 0.00, 0.01, 0.05</p></blockquote><p>#内容详解</p><p>10:29:45 #显示的是当前时间</p><p>up 9:11 #系统运行时间，格式为时：分</p><p>2 users #当前登录用户数</p><p>load average:0.00,0.01,0.5 #系统负载，三个数值分别为1分钟、5分钟、15分钟前到现在的平均值</p><p><br></p><p><strong>#第二行：进程信息</strong></p><blockquote><p>Tasks: 121 total, 2 running, 119 sleeping, 0 stopped, 0 zombie</p></blockquote><p>#内容详解</p><p>Tasks：</p><p>121 total #进程总数</p><p>2 running #正在运行的进程数</p><p>119 sleeping #睡眠的进程数</p><p>0 stopped #停止的进程数</p><p>0 zombie #僵尸进程数</p><p><br></p><p><strong>#第三行：cpu信息</strong></p><blockquote><p>%Cpu(s): 0.0 us, 0.2 sy, 0.0 ni, 99.7 id, 0.0 wa, 0.0 hi, 0.2 si, 0.0 st</p></blockquote><p>#内容详解</p><p>0.0 us #系统用户进程使用CPU百分比</p><p>0.2 sy #内核空间占用CPU百分比</p><p>0.0 ni #用户进程空间内改变优先级的进程占用cpu百分比</p><p>99.7 id #空前的CPU百分比</p><p>0.0% wa # IO等待占用CPU的百分比</p><p>0.0% hi #硬中断（Hardware IRQ）占用CPU的百分比</p><p>0.2% si # 软中断（Software Interrupts）占用CPU的百分比</p><p><br></p><p><strong>#第四五行：内存信息,和free -m命令的执行结果一样</strong></p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2da8d7f269bd4918bc6ac7de3caff835><p class=pgc-img-caption></p></div><p>#内容详解</p><p>Mem:1865308 total #物理内存总大小</p><p>125604 free #空闲的内存</p><p>520128 used #使用的物理内存总大小</p><p>1219576 buff/cache #用作内核缓存的内存量</p><p><br></p><p>swap:209714 total #交换分区总量</p><p>0 used #使用的交换分区大小</p><p>2097149 free #空闲的</p><p><br></p><p><strong>#进程状态</strong></p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b6c2be7f4f5b4c8abdbf66f06acc9f94><p class=pgc-img-caption></p></div><p>#内容详解</p><p>PID #进程ID</p><p>USER #进程所有者的用户名</p><p>PR #进程的调度的优先级</p><p>NI #NICE值，负值表示高优先级，正值表示低优先级</p><p>VIRT #进程使用的虚拟内存</p><p>RES #进程使用的虚拟内存总量，单位KB</p><p>SHR #进程使用的共享内存，单位为kb S #进程状态，有五种状态，D：不可中断的睡眠状态，R:运行，S：睡眠，T：停止，Z：僵尸进程</p><p>%CPU #上次更新到现在的cpu时间占用百分比</p><p>%MEM #使用的物理内存百分比</p><p>TIME+ #使用的CPU时间总计，单位1/100秒</p><p>COMMAND #命令行/命令名</p><p><br></p><p>#top常用的快捷键</p><p>默认3s刷新一次</p><p>空格：立即刷新</p><p>q：退出</p><p>M：按内存大小排序</p><p>P：按CPU大小排序</p><p>N：按PID来排序</p><p>&lt;>：翻页</p><h1 class=pgc-h-arrow-right><strong>2.ps查看系统进程状态</strong></h1><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/33ec21845d29451ca1285f13294a3375><p class=pgc-img-caption></p></div><p>#内容详解</p><p>USER：进程拥有者</p><p>PID ：进程的ID号</p><p>%CPU ：CPU占用百分比</p><p>%MEM ：占用内存的百分比</p><p>VSZ： 占用虚拟内存的大小，单位KB</p><p>RSS： 占用物理内存的大小，单位KB</p><p>TTY： 当前进程执行的终端号</p><p>STAT： 进程的状态</p><p>START：进程开始时间</p><p>TIME ：进程实际使用CPU时间</p><p>COMMAND：实际命令</p><p><br></p><p>#扩展：查看进程的其他常用命令</p><p>pstree #是以进程树的形式显示</p><p>pgrep #是以进程名字或属性来显示查找进程的PID</p><p><br></p><h1 class=pgc-h-arrow-right><strong>3.nice进程控制</strong></h1><p>Linux系统中每一个进程都有一个优先级PR(priotity),PR值越小，优先级越高，就会被优先执行，NICE值可以自己设定，NI的正负影响到PR值，可以通过设定NI来提升或降低进程的优先级</p><p>#例子：以nice值为-20运行top命令</p><p>[root@ctos1 ~]# nice -n -20 top</p><p>#修改进程的优先级 #</p><p>例如：将PID为33192的进程的NICE值修改为10</p><p>[root@ctos1 ~]# renice 10 33192</p><h1 class=pgc-h-arrow-right><strong>4.kill终止进程</strong></h1><p>kill命令是发送一个信号给进程，默认是发送15（TERM）终止</p><p>#语法格式：kill PID</p><p>#例子：将PID为32813的进程终止</p><p>#可以先使用ps aux查看进程</p><p>[root@ctos1 ~]# kill 32813</p><p>#加-9：强制中断</p><p>[root@ctos1 ~]# kill -9 32813</p><p><br></p><p>#使用pkill结束http所有进程</p><p>#可以使用pidof查看http相关的进程PID号</p><p>[root@ctos1 ~]# pidof httpd</p><p>34505 34504 34503 34502 34501 34500</p><p>#结束httpd的所有进程</p><p>[root@ctos1 ~]# pkill -9 httpd</p><p><br></p><p><strong>#收集系统运行状态信息</strong></p><p>#先来安装一个后面命令需要使用的包</p><p>[root@ctos1 ~]# yum install sysstat -y</p><h1 class=pgc-h-arrow-right><strong>5.iostat：查看设备或分区的io相关统计</strong></h1><p>#主要用户监控系统设备的io负载情况 #语法和相关参数</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/41e57b42830d4878ba61ab06fe3f3c8b><p class=pgc-img-caption></p></div><p>#使用</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/55a300900aad458cadcbc05a72dc80d6><p class=pgc-img-caption></p></div><p>#输出命令解释</p><p>Device：设备名</p><p>tps：该设备每秒的传输次数</p><p>KB_read/s：每秒从设备读取的数据量</p><p>KB_wrtn/s：每秒向设备写入的数据量</p><p>KB_read：读取的总数据量</p><p>KB_wrtn：写入的总数据量</p><p>#使用-d参数：显示磁盘的使用状态</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5f359bf4f0d34d95bd02c2b9bb5e1089><p class=pgc-img-caption></p></div><p>#-x参数：显示和io相关的扩展数据</p><h1 class=pgc-h-arrow-right><strong>6.mpstat：查看处理器(CPU)相关的统计</strong></h1><p>#mpstat----report processors related statistics(处理器相关的报告统计)</p><p>#mpstat，全称为Multiprocessor Statistics。是实时系统监控工具</p><p>#查看帮助：man mpstat</p><p>#命令执行格式</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/60c293895556472ab3ad5bacba81667e><p class=pgc-img-caption></p></div><p>#使用</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3d0ff70afc894121a05df80eb9461349><p class=pgc-img-caption></p></div><p>#输出命令解释</p><p>CPU： 处理器编号，all表示统计信息计算为所有处理器之间的平均值</p><p>％usr: 用户下，CPU利用率百分比。</p><p>％nice: 具有nice优先级的用户下，CPU利用率百分比。</p><p>％sys: 系统级（内核）执行时发生的CPU利用率百分比</p><p>％Iowait: 显示系统具有未完成磁盘I/O请求时，CPU或CPU空闲的时间百分比。</p><p>％irq: 系统服务于硬中断的时间开销的百分比</p><p>%soft: 系统服务于软中断开销的时间开销百分比</p><p>%steal: 虚拟机管理程序服务另一个虚拟处理器时虚拟CPU或CPU无意中等待的时间百分比。 %guest: CPU运行虚拟处理器所花费的时间百分比。</p><p>%idle: CPU空闲的百分比</p><h1 class=pgc-h-arrow-right><strong>7.vmstat：查看虚拟内存相关的统计</strong></h1><p>#vmstat --- report virtual memory statistics(报告虚拟内存的统计信息)</p><p>#语法：vmstat [options] [delay [count]]</p><p>#查看帮助：man vmstat</p><p>#使用</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9cb5193e6e5b4e7fbc9ed4a3cffcfcfc><p class=pgc-img-caption></p></div><p><strong>#输出命令解释</strong></p><p>r：等待执行的任务数</p><p>b：表示阻塞的进程</p><p>swap：虚拟内存已使用的大小</p><p>free：空闲的物理内存的大小</p><p>buff：已用的缓冲大小</p><p>cache：已用的缓存大小</p><p>si：每秒从磁盘读入虚拟内存的大小</p><p>so：每秒虚拟内存写入磁盘的大小</p><p>bi：块设备每秒接收的块数量</p><p>bo：块设备每秒发送的块数量</p><p>in：每秒CPU的中断次数</p><p>cs：每秒上下文切换次数</p><p>us：用户CPU时间</p><p>sy：系统CPU时间</p><p>id：空闲CPU时间</p><p>wa：等待io时间</p><p><br></p><h1 class=pgc-h-arrow-right><strong>8.df命令：查看磁盘使用情况</strong></h1><p>#常用的参数</p><blockquote><p>-a 全部文件系统列表</p><p>-h 方便阅读方式显示</p><p>-i 显示inode信息</p></blockquote><p>#使用-i参数查看inode的使用情况</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/62146e0a3871406ca024d9411b271efb><p class=pgc-img-caption></p></div><p>#使用-h查看磁盘的使用情况</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a2e295cd26fe4727bffd12df1f3e224f><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>9.du命令：显示文件或目录的大小</strong></h1><p>语法格式：</p><blockquote><p>du [OPTION]... [FILE]...</p><p>du [OPTION]... --files0-from=F</p></blockquote><p>#常用参数</p><blockquote><p>-s或--summarize 仅显示总计。</p><p>-h或--human-readable 以K，M，G为单位，提高信息的可读性。</p></blockquote><p>#使用</p><p>#查看/test目录的总大小，和/test目录下各个文件的大小</p><p>[root@game ~]# du -sh /test/</p><p>8.0K /test/</p><p>[root@game ~]# du -sh /test/*</p><p>4.0K /test/1.txt</p><p>4.0K /test/2.txt</p><p><br></p><h1 class=pgc-h-arrow-right><strong>10.netstat：提供有关路由和网络连接的信息</strong></h1><p>#首先需要安装net-tools包才有netstat命令</p><p>[root@ctos1 ~]# yum install net-tools -y</p><p><br></p><p>#常用的参数</p><blockquote><p>-a (all) 显示所有选项，默认不显示LISTEN相关。</p><p>-t (tcp) 显示tcp连接。</p><p>-u (udp) 显示udp连接。</p><p>-n 拒绝显示别名，能显示数字的全部转化成数字。</p><p>-l 列出有在 Listen (监听) 的服务状态。</p><p>-p 显示建立相关链接的程序名</p><p>-r 显示路由信息，路由表</p><p>#使用man netstat可以获取更多的帮助信息</p></blockquote><p>#使用</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/38cbe324b25746eab1867aa674cd364b><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>11.ss</strong></h1><p>#概述:ss是Socket Statistics的缩写,用来获取socket统计信息，它可以显示和netstat类似的内容。</p><p>#优点：ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，比netstat更快速更高效,当服务器的socket连接数量变得非常大时，优势就显而易见了。</p><p>#常用的参数</p><blockquote><p>格式： ss [options] [ FILTER ]</p><p>-a (all)显示所有 -l 显示本地打开的所有端口</p><p>-p 显示每个进程具体打开的socket</p><p>-t 显示tcp socket</p><p>-u 显示udp socket</p><p>-n 不解析服务名</p><p>-s 列出当前socket详细信息</p><p>#使用man ss可以获取更多的帮助信息</p></blockquote><p>#使用</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b5d96cde25ad41fc95ce526e6c36a1cb><p class=pgc-img-caption></p></div><p>#使用-s参数列出当前socket详细信息</p><div class=pgc-img><img alt=需要！Linux常用监视和故障排查命令详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/792c07f7d3e4460aa0ff4b5dfeeaa2e1><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>12.其他相关查看信息</strong></h1><p>#查看CPU信息</p><p>lscpu 或cat /proc/cpuinfo</p><p><br></p><p>#查看内存信息</p><p>[root@ctos1 ~]# cat /proc/meminfo</p><p><br></p><p>#查看虚拟内存的使用触发值</p><p>[root@ctos1 ~]# cat /proc/sys/vm/swappiness 30</p><p><br></p><p>#查看系统上使用的模块</p><p>[root@ctos1 ~]# cat /proc/modules</p><p><br></p><p>#查看系统分区信息</p><p>[root@ctos1 ~]# cat /proc/partitions</p><p>major minor #blocks name</p><p>8 0 20971520 sda</p><p>8 1 1048576 sda1</p><p>8 2 19921920 sda2</p><p>11 0 9177088 sr0</p><p>253 0 17821696 dm-0</p><p>253 1 2097152 dm-1</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Linux','监视','详解'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>