<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ•™ä½ å¦‚ä½•ç¼–å†™Pythonicå¯¹è±¡ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ•™ä½ å¦‚ä½•ç¼–å†™Pythonicå¯¹è±¡ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/fa431bb126cc4288ba6a6fdba819915a"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5631b9ff.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5631b9ff.html><meta property="article:published_time" content="2020-10-29T21:09:42+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:42+08:00"><meta name=Keywords content><meta name=description content="æ•™ä½ å¦‚ä½•ç¼–å†™Pythonicå¯¹è±¡"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5631b9ff.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ•™ä½ å¦‚ä½•ç¼–å†™Pythonicå¯¹è±¡</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><h1><strong>ä»‹ç»</strong></h1><p>åœ¨æˆ‘ä»¬å¼€å§‹æ¢ç´¢å¦‚ä½•å†™ä¸€ä¸ªPythonicå¯¹è±¡ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå¼„æ¸…æ¥šè¿™ä¸ªæœ¯è¯­çš„å«ä¹‰å®ƒä¸æ˜¯å…³äºPEP8å’Œå°Šé‡å…¶è§„åˆ™æ¥ç¼–å†™æ¼‚äº®çš„pythonä»£ç ï¼›è€Œæ˜¯å…³äºç¼–å†™å¯¹è±¡ï¼Œæœ€å¤§é™åº¦åœ°ä½¿ç”¨Pythonæ•°æ®æ¨¡å‹çš„æ¦‚å¿µï¼Œå› æ­¤å®ƒä»¬å¯ä»¥åƒPythonæ ‡å‡†åº“å¯¹è±¡ä¸€æ ·è¢«è‡ªç„¶åœ°ä½¿ç”¨ã€‚</p><p>å…¶æ€æƒ³æ˜¯å°†Python ADNæ³¨å…¥åˆ°æˆ‘ä»¬çš„ç”¨æˆ·å®šä¹‰å¯¹è±¡ä¸­ï¼Œä½¿å®ƒä»¬å‘ç”Ÿå˜å¼‚ï¼Œå¹¶è¡¨ç°ä¸ºæœ¬åœ°Pythonå¯¹è±¡ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå‘é‡ç±»æ¥è¡¨ç¤ºå¤šç»´å‘é‡ã€‚</p><p>ä¸‹é¢çš„ä»£ç ç”¨æœ€å°çš„å®ç°è¡¨ç¤ºVectorç±»ã€‚çŸ¢é‡ç”±å…¶åº§æ ‡è¡¨ç¤ºã€‚</p><pre>from array import arrayclass Vector: __arrayType = "d" def __init__(self, coordinates): self.__coordinates = array(self.__arrayType, coordinates)if __name__ == "__main__": v = Vector([1, 2, 3]) print(v) #&lt;__main__.Vector object at 0x0082F610&gt; v1 = Vector((1, 2, 3)) print(v1)#&lt;__main__.Vector object at 0x0317FC88&gt;</pre><p>å‘é‡åº§æ ‡å­˜å‚¨åœ¨æµ®ç‚¹æ•°ç»„ä¸­ï¼›è¯·æ³¨æ„å°†æ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹å¼ºåˆ¶è®¾ç½®ä¸ºæµ®ç‚¹çš„array type=â€œdâ€ã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»ä½•iterableä¼ é€’ç»™Vectorçš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºæ•°ç»„çš„æ„é€ å‡½æ•°ç”¨ä½œæ¥å—ä»»ä½•iterableï¼ˆå…ƒç»„ã€åˆ—è¡¨ç­‰ï¼‰çš„å†…éƒ¨å®¹å™¨ã€‚</p><p>å½“æˆ‘ä»¬æ‰“å°ä¸€ä¸ªå‘é‡å¯¹è±¡æœ¬èº«æ—¶ï¼Œæ³¨æ„æˆ‘ä»¬å¾—åˆ°å®ƒçš„å¼•ç”¨ï¼ˆCPythonçš„å†…å­˜åœ°å€ï¼‰è€Œä¸æ˜¯å®ƒçš„åº§æ ‡ã€‚è®©æˆ‘ä»¬é€šè¿‡åœ¨ç±»ä¸­å®ç°_str_æ–¹æ³•æ¥æ›´æ”¹å®ƒï¼Œä½¿å…¶å…·æœ‰æ›´å‹å¥½çš„è¾“å‡ºï¼Œä¾‹å¦‚ï¼ˆxï¼Œyï¼Œzï¼Œâ€¦ï¼‰ã€‚</p><pre>from array import arrayclass Vector: .... def __str__(self): return str(tuple(self.__coordinates)) ....if __name__ == "__main__": v = Vector([1, 2, 3]) print(v) #(1.0, 2.0, 3.0)</pre><p>å½“æˆ‘ä»¬æ‰“å°ä¸€ä¸ªå‘é‡å¯¹è±¡æœ¬èº«æ—¶ï¼Œæ³¨æ„æˆ‘ä»¬å¾—åˆ°å®ƒçš„å¼•ç”¨ï¼ˆCPythonçš„å†…å­˜åœ°å€ï¼‰è€Œä¸æ˜¯å®ƒçš„åº§æ ‡ã€‚è®©æˆ‘ä»¬é€šè¿‡åœ¨ç±»ä¸­å®ç°_str_æ–¹æ³•æ¥æ›´æ”¹å®ƒï¼Œä½¿å…¶å…·æœ‰æ›´å‹å¥½çš„è¾“å‡ºï¼Œä¾‹å¦‚ï¼ˆxï¼Œyï¼Œzï¼Œâ€¦ï¼‰æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä»æ•°ç»„åˆ›å»ºçš„å…ƒç»„çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p><p>__str_ä¸æ˜¯Pythonæ•°æ®æ¨¡å‹ç”¨äºæ‰“å°å¯¹è±¡çš„å”¯ä¸€æ–¹æ³•ï¼›_repr_è¿˜ç”¨äºæä¾›æ›´é¢å‘è°ƒè¯•ç›®çš„çš„å¯¹è±¡è¡¨ç¤ºå¯ä»¥è®¡ç®—æ­¤è¡¨ç¤ºä»¥ä½¿ç”¨evalå‡½æ•°åˆ›å»ºç›¸åŒçš„å¯¹è±¡ã€‚</p><pre>from array import arrayimport reprlibclass Vector: .... def __repr__(self): s = reprlib.repr(self.__coordinates) return "{}({})".format(self.__class__.__name__, s[s.index('['):-1]) ...if __name__ == "__main__": v = Vector([1, 2, 3]) s = repr(v) print(s) #Vector([1.0, 2.0, 3.0]) v1 = eval(s) print(v1) #(1.0, 2.0, 3.0) v2 = Vector(range(100)) print(repr(v2)) #Vector([0.0, 1.0, 2.0, 3.0, 4.0, ...])</pre><p>åœ¨å‰é¢çš„ä»£ç å—ä¸­ï¼Œè¯·æ³¨æ„ï¼Œä¸evalä¸€èµ·ä½¿ç”¨æ—¶reprçš„è¿”å›å€¼å…è®¸åˆ›å»ºæ–°å‘é‡reprlibçš„ä½¿ç”¨å…è®¸æˆ‘ä»¬åœ¨æ•°ç»„åŒ…å«å¤ªå¤šå…ƒç´ çš„æƒ…å†µä¸‹ä¸æ‰“å°æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶ç”¨å°±åƒå‘é‡v2ã€‚</p><h1><strong>Pythonè¿­ä»£</strong></h1><p>ä¸ºäº†ç¡®ä¿æˆ‘ä»¬å¯ä»¥åœ¨å‘é‡ä¸Šå¾ªç¯ï¼Œå¹¶ä¸”å¯ä»¥å°†å®ƒä»¬è§£åŒ…ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å®ƒä»¬å¯è¿­ä»£ä¸ºæ­¤ï¼Œå¿…é¡»å‘æˆ‘ä»¬çš„ç±»ä¸­æ·»åŠ _iter_æ–¹æ³•ã€‚</p><pre>class Vector: ... def __iter__(self): return iter(self.__coordinates)...if __name__ == "__main__": v = Vector([1, 2, 3]) for i in v: print(i) #1.0 #2.0 #3.0 t = tuple(v) print(t) #(1.0, 2.0, 3.0)</pre><h1><strong>Pythoné•¿åº¦è®¡ç®—</strong></h1><p>ä¸ºäº†èƒ½å¤Ÿé€šè¿‡å°†å¯¹è±¡èµ‹ç»™lenï¼ˆï¼‰å‡½æ•°æ¥è·å¾—å‘é‡å†…çš„åº§æ ‡æ•°ï¼Œå¿…é¡»å°†_Len_æ–¹æ³•æ·»åŠ åˆ°ç±»ä¸­ã€‚</p><pre>from array import arrayimport reprlibclass Vector: ... def __len__(self): return len(self.__coordinates) ...if __name__ == "__main__": v = Vector([1, 2, 3, 4]) print(len(v))#4</pre><h1><strong>Pythonçš„æ¯”è¾ƒ</strong></h1><p>åœ¨ä¸è°ƒæ•´ç±»ä»¥æ”¯æŒæ¯”è¾ƒçš„æƒ…å†µä¸‹ï¼Œåº”ç”¨äºä¸¤ä¸ªå‘é‡å¯¹è±¡çš„==è¿ç®—ç¬¦å°†æ¯”è¾ƒå®ƒä»¬çš„å¼•ç”¨ã€‚è‹¥è¦æ›´æ”¹æ­¤è¡Œä¸ºï¼Œå¿…é¡»å®ç°â€œeqâ€æ–¹æ³•ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå‘é‡æ˜¯ç›¸ç­‰çš„ï¼Œå½“ä¸”ä»…å½“å®ƒä»¬å…·æœ‰ç›¸åŒçš„åº§æ ‡ä¸”å…·æœ‰ç›¸åŒçš„é¡ºåºã€‚</p><pre>rom array import arrayimport reprlibclass Vector:... def __len__(self): return len(self.__coordinates) def __iter__(self): return iter(self.__coordinates) def __eq__(self, other): if len(self) == len(other): for i, j in zip(self, other): if i != j: return False return True else: return False...if __name__ == "__main__": v = Vector([0, 1, 2, 3, 4]) v1 = Vector((1, 2, 3, 4, 5)) v2 = Vector(range(5)) print(v == v2) #True print(v == v1) #False</pre><p>è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´åˆ†æä¸€ä¸‹æ–°çš„æ–¹æ³•ï¼š</p><p>é€šè¿‡è°ƒç”¨lenï¼ˆï¼‰å‡½æ•°æ¥ä½¿ç”¨lenæ–¹æ³•ã€‚</p><p>é€šè¿‡å°†selfå’Œå…¶ä»–å‚æ•°ä¼ é€’ç»™zipå‡½æ•°æ¥ä½¿ç”¨iteræ–¹æ³•ï¼Œzipå‡½æ•°æ¥å—iterableä½œä¸ºå‚æ•°ã€‚</p><h1><strong>Pythonicç»å¯¹å€¼</strong></h1><p>å¯¹äºæ­¤ç¤ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥ __abs__ æ–¹æ³•è¿”å›ç”±ä»¥ä¸‹è¡¨è¾¾å¼å®šä¹‰çš„å‘é‡çš„æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼š</p><div class=pgc-img><img alt=æ•™ä½ å¦‚ä½•ç¼–å†™Pythonicå¯¹è±¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fa431bb126cc4288ba6a6fdba819915a><p class=pgc-img-caption></p></div><pre>from array import arrayfrom math import sqrtimport reprlibclass Vector: ... def __abs__(self): return sqrt(sum((x**2 for x in self))) ...if __name__ == "__main__": v = Vector([0, 1, 2, 3, 4]) a = abs(v) print(a) #5.477225575051661</pre><h1><strong>Pythonicå¸ƒå°”æ±‚å€¼</strong></h1><p>å¯¹äºå‘é‡ç±»çš„å½“å‰å®ç°ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—å‘é‡çš„å¸ƒå°”å€¼æ—¶æœ‰ä»¥ä¸‹è¡Œä¸ºã€‚</p><pre>if __name__ == "__main__": v = Vector([]) print(bool(v)) #False v1 = Vector([1, 2, 3]) print(bool(v1)) #True</pre><p>åœ¨æˆ‘ä»¬çš„ç±»ä¸­ï¼Œå¦‚æœæ²¡æœ‰boolæ–¹æ³•ï¼Œå¯¹boolï¼ˆï¼‰å‡½æ•°çš„è°ƒç”¨å°†å¼•ç”¨è¯¥æ–¹æ³•å¦‚æœé•¿åº¦ç­‰äº0ï¼Œåˆ™å¯¹è±¡çš„è®¡ç®—ç»“æœä¸ºfalse-å¦åˆ™ï¼Œå…¶è®¡ç®—ç»“æœä¸ºtrueã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡å®ç°ä¸€ä¸ªæ–¹æ³•æ¥æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå¦‚æœå‘é‡æ¬§å‡ é‡Œå¾·èŒƒæ•°ä¸0ä¸åŒï¼Œåˆ™è®©å®ƒè¿”å›Trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><pre>from array import arrayfrom math import sqrtimport reprlibclass Vector: ... def __abs__(self): return sqrt(sum((x**2 for x in self))) def __bool__(self): return bool(abs(self))...if __name__ == "__main__": v = Vector([]) print(bool(v)) #False v1 = Vector([1, 2, 3]) print(bool(v1)) #True v2 = Vector([0, 0]) print(bool(v2)) # False</pre><h1><strong>Pythonicåˆ‡ç‰‡</strong></h1><p>Pythonä¸­çš„åˆ‡ç‰‡æ—¨åœ¨é€šè¿‡æŒ‡ç¤ºè¦æ£€ç´¢çš„å…ƒç´ çš„ç´¢å¼•æˆ–é€šè¿‡æŒ‡ç¤ºåˆ‡ç‰‡ï¼Œä»åˆå§‹é›†åˆä¸­è·å–å­é›†ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡çš„åˆ‡ç‰‡è¿”å›åŒä¸€ç±»å‹çš„å¦ä¸€ä¸ªå¯¹è±¡ã€‚getitemæ–¹æ³•æ˜¯è¦æ›´æ–°çš„æ–¹æ³•ï¼Œä»¥ä½¿å‘é‡å¯¹è±¡å…·æœ‰è¿™ç§èƒ½åŠ›ã€‚</p><pre>from array import arrayfrom math import sqrtimport reprlibclass Vector: ... def __getitem__(self, item): if isinstance(item, int): return self.__coordinates[item] elif isinstance(item, slice): return self.__class__(self.__coordinates[item]) else: raise IndexError("{} indexes must be integers".format(type(self).__name__))...if __name__ == "__main__": v = Vector([1, 2, 3, 4]) v1 = v[1] print(v1) # 2.0 v2 = v[0:3] print(type(v2)) #  print(v2) # (1.0, 2.0, 3.0)</pre><p>æ³¨æ„ï¼Œé€šè¿‡ä½¿ç”¨Slicingï¼Œè¿”å›çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå‘é‡å¯¹è±¡ã€‚</p><h1><strong>ç»“è®º</strong></h1><p>æˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­å®ç°çš„Dunderæ–¹æ³•å¹¶ä¸æ˜¯å”¯ä¸€å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•å…¶ä»–çš„ï¼Œå¦‚å­—èŠ‚ã€æ•£åˆ—ã€getatrrå’Œæ ¼å¼å¯ä»¥ç”¨æ¥æ”¹å˜ç”¨æˆ·å®šä¹‰å¯¹è±¡çš„è¡Œä¸ºè¿™äº›æ–¹æ³•å¹¶ä¸æ˜¯æ¯æ¬¡å®šä¹‰æ–°ç±»æ—¶éƒ½è¦å®ç°çš„ï¼Œè¿™å–å†³äºéœ€è¦ï¼Œè¿™æ˜¯Pythonæ•°æ®æ¨¡å‹çš„ä¼˜ç‚¹ã€‚</p><p>æ¬¢è¿å…³æ³¨å“¦ï¼Œè€å­çˆ±ä½ ä»¬ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'ç¼–å†™','Pythonic','å¯¹è±¡'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>