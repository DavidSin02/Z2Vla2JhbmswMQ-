<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 | 极客快訊</title><meta property="og:title" content="C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8013e9eb19f347c4ba0c3893358b0a6c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/578e8e42.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/578e8e42.html><meta property="article:published_time" content="2020-11-14T20:59:47+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:47+08:00"><meta name=Keywords content><meta name=description content="C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/578e8e42.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>这篇连连看教程我尝试换一种方式，多讲一些算法思路和编程思想，少贴一些代码。</p><p>大家应该都玩过连连看，游戏规则不多说了，我们先看看设计思路。</p><p>第一件事要根据游戏玩法确定程序的数据结构，不同的数据结构决定了不同的算法设计，用错了数据结构可能直接让代码复杂好几倍。</p><p>连连看中玩家操作的数据是一个个的图片，多个图片组成一个棋盘式的矩阵界面。程序根据玩家的点击位置计算两个图片的连接路线，这要求程序以最快、最简单的方式获得矩阵中每个格子的数据。</p><p>用二维数组表示游戏中的矩阵界面比较合适，因为数组可以通过索引快速访问数据，二维数组的两个索引刚好对应矩阵界面的(x, y)座标。例如：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8013e9eb19f347c4ba0c3893358b0a6c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>图中矩阵数据在代码中应该这样表示：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f4ba01ca3de14de9be1b3d64d1ac9063><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>可以用不同的数字代表不同的图片，比如：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/843fac5901064944a7f1bdb91e2a1cdf><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>那么上面的矩阵绘制的时候就会是这样：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2211c106a798454291e204df50d740a7><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>0表示空格，不显示图片。初始化时的空格或消除后的空格，都会被设置为0。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/eebcd5e2a77b4724930e6116a1268892><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>接下来要初始化数据，我打算用8种不一样的图片，每种6张，随机放入矩阵中，矩阵最外一圈是空的。这个算法可以用标准库函数 std::random_shuffle 来完成。std::random_shuffle 用于把容器内的数据随机打乱，因此按顺序把数据放入数组中，然后调用 std::random_shuffle 就可以完成初始化。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/761b06a501bc4b378d5410185f9e1987><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>断点运行观察数组数据，和我们设计的一样：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f958cd37f0c4325a082573e13abee3c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>贴上图片看起来还不错：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e09657d44ec941c28ca91e0efaec2349><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>现在来分析游戏玩法。这个游戏的难点是两个<span>图片连接</span>的判定算法，要求连接线只能转折两次。</p><p>我的第一反应这是一个寻路算法，要求找到转折两次以下的最短路径。教科书上常见的广度优先搜索、深度优先搜索、DijKstra算法或是游戏中常用的A星算法，稍作修改加上两次转折的限制都能解决这个问题。</p><p>但是如果我用这些比较复杂的算法来教新手，显然是在劝退。所以还是考虑找一找连线判定的算法有没有简单的规律。</p><p>多玩几次游戏，把不同种类的连线记录下来，总结后可以发现总共有3种连线类型，分别是不转折连接、转折一次和转折两次。</p><p>还是从最简单的情况开始考虑。这是解决难题的通用方法：<strong>从最简单的情况开始考虑，再逐步增加复杂的条件。</strong></p><p>最简单的不转折连接，有两种情况，横向连线和纵向连线：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5cc5b01aeda7407d84305733cdf475a4><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>这两种情况很容易处理，横向、竖向依次检查每个格子是否被阻挡即可。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/96556d342ea649af9df3733115490cb4><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>最后把这两个合并就是不转折的情况下：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1d40e15bf62a4bba943c2b9284ff9482><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>转折一次：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e777ea9de2e94a3b80723c498e93ca65><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>转折一次的算法也是比较明显的，像上图中的两种情况，找到绿色点的位置，如果这个点可以不转折连到两个红色的图片，那么这两个红色的图片就可以通过一次转折连接。</p><p>绿点的位置是由两个红点决定的，只有上图中的两种可能。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/59b91367e5ba4181a394b1964b910cc2><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>转折两次的情况就多了，下图同样是连接红色图片，要绕过绿色图片。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/06937f16b2f34a3e99cef9ef361a1ddc><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>转折两次的情况很多，这里无法一一列举，但是仔细思考可以发现和转折一次本质上是一样的，就是找到两个点，这两个点可以分别和红色图片无转折连接，并且这两个点也可以无转折连接。</p><p>这两个点需要位于经过红色图片的十字线上，并且只要确定一个了其中一个点，就能对应地找到另一个点：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/10e8196fa9ec4eb4b2b4570106a63028><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>因此只要遍历其中一个图片的两条十字线经过的所有的点，并计算出另一个图片十字线上对应点的位置，检查这两个点和两个红色图片是否可以无转折连接：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b137717dfd4f43c5a5a597ef35d72f75><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>代码码完了，添上图片和鼠标检测的代码跑一跑试试。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=C++项目开发：C++制作经典连连看小游戏，学习编程的你不能忽视 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/53113e0638db4bfa8d5d8b9d17ad107d><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>右边显示临时显示字符用于测试连通性，多次测试没有问题。</p><p>最后加上连线，并清除被点击的两个格子，就完成了连连看的核心逻辑。你学会了吗？</p><blockquote><p><strong>最后，想要成为一个优秀的程序员，最最重要的是尽可能的提升自己的编程能力以及编程思维，并且，与其想着怎么去提升，不如从现在开始动手动脑，如果对于C/C++感兴趣的话，可以加q。569，268，376，学习不怕从零开始，就怕从不开始。</strong></p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'C++','项目','开发'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>