<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>一分钟告诉你：Mysql数据库死锁原因及解决、避免办法 | 极客快訊</title><meta property="og:title" content="一分钟告诉你：Mysql数据库死锁原因及解决、避免办法 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/33ef82b628ef49a8ab1a5dc3b5367cb1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5a2fd2e0.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5a2fd2e0.html><meta property="article:published_time" content="2020-10-29T21:09:57+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:57+08:00"><meta name=Keywords content><meta name=description content="一分钟告诉你：Mysql数据库死锁原因及解决、避免办法"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5a2fd2e0.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>一分钟告诉你：Mysql数据库死锁原因及解决、避免办法</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><blockquote><p><strong>私信我或关注微信号：猿来如此呀，回复：学习，获取免费学习资源包。</strong></p></blockquote><p>用数据库的时候，偶尔会出现死锁，针对我们的业务系统，出现死锁的直接结果就是系统卡顿、客户找事儿，所以我们也在想尽全力的消除掉数据库的死锁。下面就和小编一起看看死锁的条件和如何处理死锁吧。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=一分钟告诉你：Mysql数据库死锁原因及解决、避免办法 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/33ef82b628ef49a8ab1a5dc3b5367cb1><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>死锁的条件</p><p><strong>互斥条件(Mutual exclusion)</strong> ：资源不能被共享，只能由一个进程使用。</p><p>请求与保持条件(Hold and wait)：进程已获得了一些资源，但因请求其它资源被阻塞时，对已获得的资源保持不放。</p><p><strong>不可抢占条件(No pre-emption)</strong> ：有些系统资源是不可抢占的，当某个进程已获得这种资源后，系统不能强行收回，只能由进程使用完时自己释放。</p><p><strong>循环等待条件(Circular wait)</strong> ：若干个进程形成环形链，每个都占用对方申请的下一个资源。</p><p>处理死锁的策略</p><p>1、忽略该问题。例如鸵鸟算法。</p><p>2、检测死锁并且恢复。</p><p>3、仔细地对资源进行动态分配，以避免死锁。</p><p>4、通过破除死锁四个必要条件之一，来防止死锁产生。</p><p><strong>>>>></strong>鸵鸟算法：</p><p>该算法可以应用在极少发生死锁的的情况下。为什么叫鸵鸟算法呢，因为传说中鸵鸟看到危险就把头埋在地底下，可能鸵鸟觉得看不到危险也就没危险了吧。跟掩耳盗铃有点像。</p><p><strong>>>>></strong>银行家算法：</p><p>所谓银行家算法，是指在分配资源之前先看清楚，资源分配后是否会导致系统死锁。如果会死锁，则不分配，否则就分配。</p><p>按照银行家算法的思想，当进程请求资源时，系统将按如下原则分配系统资源：</p><p>(1) 当一个进程对资源的最大需求量不超过系统中的资源数时可以接纳该进程。</p><p>(2) 进程可以分期请求资源，当请求的总数不能超过最大需求量。</p><p>(3) 当系统现有的资源不能满足进程尚需资源数时，对进程的请求可以推迟分配，但总能使进程在有限的时间里得到资源。</p><p>(4) 当系统现有的资源能满足进程尚需资源数时，必须测试系统现存的资源能否满足该进程尚需的最大资源数，若能满足则按当前的申请量分配资源，否则也要推迟分配。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=一分钟告诉你：Mysql数据库死锁原因及解决、避免办法 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c7f9babcb59f47279648f635345380f4><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>解决死锁的策略</p><p><strong>对待死锁的策略主要有：</strong></p><p><strong>(1) 死锁预防</strong>：破坏导致死锁必要条件中的任意一个就可以预防死锁。例如，要求用户申请资源时一次性申请所需要的全部资源，这就破坏了保持和等待条件；将资源分层，得到上一层资源后，才能够申请下一层资源，它破坏了环路等待条件。预防通常会降低系统的效率。</p><p><strong>(2) 死锁避免</strong>：避免是指进程在每次申请资源时判断这些操作是否安全，例如，使用银行家算法。死锁避免算法的执行会增加系统的开销。</p><p><strong>(3) 死锁检测</strong>：死锁预防和避免都是事前措施，而死锁的检测则是判断系统是否处于死锁状态，如果是，则执行死锁解除策略。</p><p><strong>(4) 死锁解除</strong>：这是与死锁检测结合使用的，它使用的方式就是剥夺。即将某进程所拥有的资源强行收回，分配给其他的进程。</p><p>死锁的避免：</p><p>死锁的预防是通过破坏产生条件来阻止死锁的产生，但这种方法破坏了系统的并行性和并发性。</p><p>死锁产生的前三个条件是死锁产生的必要条件，也就是说要产生死锁必须具备的条件，而不是存在这3个条件就一定产生死锁，那么只要在逻辑上回避了第四个条件就可以避免死锁。</p><p>避免死锁采用的是允许前三个条件存在，但通过合理的资源分配算法来确保永远不会形成环形等待的封闭进程链，从而避免死锁。该方法支持多个进程的并行执行，为了避免死锁，系统动态的确定是否分配一个资源给请求的进程。方法如下：</p><p>1.如果一个进程的当前请求的资源会导致死锁，系统拒绝启动该进程；</p><p>2.如果一个资源的分配会导致下一步的死锁，系统就拒绝本次的分配；</p><p>显然要避免死锁，必须事先知道系统拥有的资源数量及其属性</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=一分钟告诉你：Mysql数据库死锁原因及解决、避免办法 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/19e4edae3b6943b2af66a00af2a826d6><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>总结：</strong></p><ul><li>遇到问题，不要猜！！！亲手复现下问题，然后再来分析。</li><li>不要忽略上下文！！！</li><li>理论知识再充足，关键时刻不一定想的起来！！！</li><li>坑都是自己埋的！！！</li></ul><p><strong>私信我或关注微信号：猿来如此呀，回复：学习，获取免费学习资源包。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'钟告诉','Mysql','数据库'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>