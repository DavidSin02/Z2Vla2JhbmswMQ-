<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>JMeter常见断言方式解析 | 极客快訊</title><meta property="og:title" content="JMeter常见断言方式解析 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/b528d8d1b35247088935b747ff0ea203"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5df86029.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5df86029.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5df86029.html><meta property="article:published_time" content="2020-11-14T21:03:15+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:15+08:00"><meta name=Keywords content><meta name=description content="JMeter常见断言方式解析"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5df86029.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>JMeter常见断言方式解析</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b528d8d1b35247088935b747ff0ea203><p class=pgc-img-caption></p></div><p>JMeter中有个元件叫做断言(Assertion)，它的作用和loadrunner中的检查点类似;</p><p>用于检查测试中得到的响应数据等是否符合预期，用以保证性能测试过程中的数据交互与预期一致。</p><p>使用断言的目的：在request的返回层面增加一层判断机制;因为request成功了，并不代表结果一定正确。</p><p>使用断言的方法：</p><p>△在选择的Sampler下添加对应的断言(因为不同类型的断言检查的内容不同);配置好响应的检查内容(根据断言情况而定，有的断言控制面板不需要添加任何内容，如XML Assertion)。</p><p>△添加一个断言结果的监听器(从监听器中添加)，通过“断言结果”可以看到是否通过断言;对于一次请求，如果通过的话，断言结果中只会打印一行请求的名称;</p><p>如果失败，则除了请求的名称外，还会有一行失败的原因(不同类型的断言，结果不同)。</p><p>PS：一个Sampler可以添加多个断言，根据你的检查需求来添加相应的断言，当Sampler下所有的断言都通过了，那么才算request成功。</p><p><strong>JMeter中有13种不同的断言，下面简单介绍下每个断言各自拥有什么样的作用以及它们的适用场景：</strong></p><p><strong>1、BeanShell断言</strong></p><p>BeanShell之前关于定时器的随笔中有介绍过，是一种松散类型的脚本语言(这点和JS类似)，一种完全符合java语法的java脚本语言，并且又拥有自己的一些语法和方法;</p><p>作用对象：针对sampler中的Bean Shell sampler而使用的断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/013ced92880b41319a4615277b172489><p class=pgc-img-caption></p></div><p>Name:断言的名字（可以用一个比较容易理解和分辨的名称）</p><p>Comments：注释（对这个断言进行一个解释，备注）</p><p>Reset bsh.interpreter before each call:在每次调用Bean Shell之前重置bsh.interpreter类（bsh.interpreter是Bean Shell脚本语言的一种类，也可以理解为一种解析器）</p><p>Parameters（String Parameters and String []bsh.args）:String参数（String []bsh.args是主类main函数的形式参数,是一个String 对象数组，可以用来获取命令行用户输入进去的参数）</p><p>Script file：脚本文件（可以填入脚本文件路径）</p><p>Script（see below for variables that are defined）:参照下文定义的变量（使脚本文件参照定义的变量来运行）</p><p><strong>2、 BSF断言</strong></p><p>BSF(Bean Scripting Framework)之前也介绍过，是一个支持在Java应用程序内调用脚本语言 (Script)，并且支持脚本语言直接访问Java对象和方法的一个开源项目；</p><p>作用对象：针对sampler中的BSF sampler而使用的断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a519f68dfaf04289a533597087103b9a><p class=pgc-img-caption></p></div><p>Script language（e.g.beanshell,javascirpt,jexl）:脚本语言（可以从下面的下拉框中选择对应的脚本语言JavaScript、beanshell等）</p><p>parameters to be passed to script（=> String Parameters and String []args）:（传递给脚本的参数→可以理解为使用BSF断言脚本时候一起引用的参数 ）</p><p>Script file（overrides script）：重写脚本（可以通过选择脚本文件的状态，是浏览调用已有的脚本还是在在下方的输入框内写入脚本；）</p><p>Script：下面的输入框表示可以输入变量类型，运用的脚本（取样结果、断言结果、取样日志文件等参数）</p><p><strong>3、比较断言（compare assertion）</strong></p><p>这是一种比较特殊的断言元件，针对断言进行字符串替换时使用；</p><p>作用对象：需要替换的字符串</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/91ee1cafb24e4a07a5c81237baa3e52c><p class=pgc-img-caption></p></div><p>Select Comparison Operators:选择比较运算符</p><p>Compare Content:可以选择比较的内容类型（true/false或者自定义，编辑）</p><p>Compare Time：比较时间（可以设定比较的时间，单位为秒，默认为-1）</p><p>Comparison Fitters:比较修改工具</p><p>regular expression substitutions:替换正则表达式</p><p>Regex String:要替换的字符串（可从断言结果中选择）</p><p>substitutions：替换的字符串（替换结果）</p><p><strong>4、HTML断言</strong></p><p>对响应类为XML类型的文件进行断言；</p><p>作用对象：针对sampler中的SOAP/XML-RPC Request而使用的断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/deb428b5f3c649328736704534815895><p class=pgc-img-caption></p></div><p>Tidy Settings:Tidy 环境（Tidy是一个HTML语法检查器和打印工具，可以将HTML转换为XML类型的文件）</p><p>Doctype:文档类型（可通过下拉框选择不同文档类型→ omit疏忽遗漏的/auto动态的/strict严格的/loose宽泛的。。。。。。我也不太懂这里什么意思GG）</p><p>Format：文件格式（可选择HTML/XHTML/XML三种不同类型的文件格式来检查返回内容）</p><p>Errors only：误差校正（能接受的最大值）</p><p>Error threshold：误差/错误范围（可选择误差/错误数量的范围，最大值）</p><p>Warning threshold：警告范围（可选择误差警告的数量范围，最大值）</p><p>如果勾选“Error only”这里忽略Warning，只对误差作统计检查；如果对返回内容的检查结果不超过指定结果，则断言通过，否则失败。</p><p>Write JTidy report to file:写入JTidy报告的文件（JTidy是Tidy的一个java移植，可以将它当成一个处理HTML文件的DOM解析器）</p><p><strong>5、JSR223断言</strong></p><p>JSR223即Java 规范请求，是指向JCP(Java Community Process)提出新增一个标准化技术规范的正式请求；</p><p>作用对象：针对sampler中的JSR223 sampler而使用的断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/78ba97167c19419c88299f53d6d73b0f><p class=pgc-img-caption></p></div><p>Script language（e.g.beanshell,javascirpt,jexl）:脚本语言（可以从下面的下拉框中选择对应的脚本语言JavaScript、beanshell等）</p><p>parameters to be passed to script（=> String Parameters and String []args）:（传递给脚本的参数→可以理解为使用JSR223断言脚本时候一起引用的参数 ）</p><p>Script file（overrides script）：重写脚本（可以通过选择脚本文件的状态，是浏览调用已有的脚本还是在在下方的输入框内写入脚本；）</p><p>Script：下面的输入框表示可以输入变量类型，运用的脚本（取样结果、断言结果、取样日志文件等参数）</p><p><strong>6、MD5Hex断言</strong></p><p>MD5是一种消息摘要算法，用以提供消息的完整性保护（具体关于MD5的知识请自行查询）；</p><p>作用对象：针对参数类型为MD5Hex加密的参数的断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7d3ad55d2861428ab8aa6cb289c1c336><p class=pgc-img-caption></p></div><p>MD5Hex：将已被MD5加密的参数写入其中，添加取样器等其他元件</p><p><strong>7、Size断言</strong></p><p>用于判断返回内容的大小；</p><p>作用对象：返回信息，响应报文</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0231191f7a284d4783a8d581150ec284><p class=pgc-img-caption></p></div><p>APPly to:应用范围（返回内容的断言范围）</p><p>Main sample and sub-samples:作用于父节点取样器及对应子节点取样器</p><p>Main sample only：仅作用于父节点取样器</p><p>Sub-samples only:仅作用于子节点取样器</p><p>JMeter Variable:作用于jmeter变量(输入框内可输入jmeter的变量名称)</p><p>Response Size Field to Test:响应字节的测试范围（可以选择用于判断的响应范围）</p><p>Full Response:全部响应</p><p>Response Headers:响应头部</p><p>Response Body:响应主体</p><p>响应代码：响应报文相关的代码</p><p>响应信息：响应报文的信息</p><p>Size to Assert:断言字节范围</p><p>字节大小单位为：字节；比较顺序是①返回内容的大小②比较类型③指定字节大小</p><p><strong>8、SMIME断言</strong></p><p>SMIME是一种多用途网际邮件扩充协议，相比于之前的SMAP邮件传输协议，增加了安全性，对邮件主题进行保护；</p><p>作用对象：针对采用了该种邮件传输协议的信息</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fba7dcce0901401cb8de67156d1f9e7c><p class=pgc-img-caption></p></div><p>signature:签名（可选择对协议的签名验证状态）</p><p>Verify signature:验证签名</p><p>Message not signed:没有签名消息</p><p>Signer certificate：签名证书（因为SMIME协议增加了安全传输，需要证书验证）</p><p>No check：不检查</p><p>Check values:检查</p><p>Signer distinguished name:签名证书者名称（证书注册者的名称）</p><p>Sigmer email address:签名者的邮件地址（注册的邮件地址）</p><p>Issuer distinguished name:发行者名称（由谁发行的证书）</p><p>Serial Number:证书序号</p><p>Certificate file:选择证书文件</p><p>Execute assertion message at position:执行断言消息的位置（在返回消息的具体哪个位置执行断言）</p><p><strong>9、XML概要断言</strong></p><p>亦可以称为XML模型断言/XML数据类型断言;XML Schema 定义了两种主要的数据类型：①xml document schema 文档架构 ;② 文档架构xml-schema xml模式</p><p>作用对象：返回结果为XML概要断言的2中数据类型的消息</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/652304fc834548978a97b0a8d20a90c8><p class=pgc-img-caption></p></div><p>XML Schema：XML概要模型</p><p>File Name:文件名（写入需要断言的文件名称）</p><p><strong>10、XML断言</strong></p><p>XML(可扩展标记语言) 提供一种描述结构化数据的方法。与主要用于控制数据的显示和外观的 HTML 标记不同，XML 标记用于定义数据本身的结构和数据类型；</p><p>作用对象：判断返回结果是否和xml的格式即&lt;>&lt;/>成对出现</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fb26f8eacf0a4babb9fdeaf711cd737b><p class=pgc-img-caption></p></div><p><strong>11、XPath断言</strong></p><p>XPath即为XML路径语言，它是一种用来确定XML（标准通用标记语言的子集）文档中某部分位置的语言。XPath基于XML的树状结构，提供在数据结构树中找寻节点的能力。</p><p>作用对象：针对返回信息为XPAth的数据类型进行断言</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9b83924bdf214018a765eba7c21ed6d6><p class=pgc-img-caption></p></div><p>Apply to:适用范围</p><p>Main sample and sub-samples:主要样本和次级样本</p><p>Main sample only：仅主要样本</p><p>Sub-samples only:仅次级样本</p><p>JMeter Variable:jmeter变量(输入框内可输入jmeter的变量名称)</p><p>XML Parsing Options：XML解析选项</p><p>Use Tidy(tolerant parser):使用Tidy（容错解析器），默认选择quiet（不显示）</p><p>Quiet：不显示</p><p>Report errors：错误报告</p><p>Show warnings:显示错误</p><p>Use Namespaces:使用名称空间</p><p>Validate XML:验证XML（文件包/数据）</p><p>Ignore Whitespace:忽略空格（这允许你指定语法分析器可以忽略哪个空格，而哪个空格是重要的）</p><p>Fetch external DTDs:获取外部DTDs（一些XML元素具有属性，属性包含应用程序使用的信息，属性仅在程序对元素进行读、写操作时，提供元素的额外信息，这时候需要在DTDs中声明）</p><p>XPath Assertion:输入框中写入xpath断言，点击Validate验证其正确性</p><p>True if nothing matches:确认都不匹配</p><p><strong>12、响应断言</strong></p><p>判断返回内容中的内容</p><p>作用对象：响应报文中的所有对象</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/016645cd665241b59922803f8919d76c><p class=pgc-img-caption></p></div><p>APPly to:适用范围</p><p>Main sample and sub-samples:作用于父节点取样器及对应子节点取样器</p><p>Main sample only：仅作用于父节点取样器</p><p>Sub-samples only:仅作用于子节点取样器</p><p>JMeter Variable:作用于jmeter变量(输入框内可输入jmeter的变量名称)</p><p>要测试的响应字段：要检查的项</p><p>响应报文</p><p>Documeng(text)：测试文件</p><p>URL样本</p><p>响应代码</p><p>响应信息</p><p>Response Headers:响应头部</p><p>Ignore status：忽略返回的响应报文状态码</p><p>模式匹配规则：</p><p>包括：返回结果包括你指定的内容</p><p>匹配：（好像跟Equals查不多，弄不明白有什么区别）</p><p>Equals：返回结果与你指定结果一致</p><p>Substring：返回结果是指定结果的字串</p><p>否：不进行匹配</p><p>要测试的模式:即填写你指定的结果（可填写多个）,按钮【添加】、【删除】是进行指定内容的管理</p><p><strong>13、断言持续时间</strong></p><p>用于判断服务器的响应时间</p><p>作用对象:服务器</p><div class=pgc-img><img alt=JMeter常见断言方式解析 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/18897a51b3644872a66118a9ede471d1><p class=pgc-img-caption></p></div><p>APPly to:适用范围</p><p>Main sample and sub-samples:作用于父节点取样器及对应子节点取样器</p><p>Main sample only：仅作用于父节点取样器</p><p>Sub-samples only:仅作用于子节点取样器</p><p>Duration to assert：持续断言</p><p>Duration in milliseconds：响应时间设置（单位：毫秒），如果响应时间大于设置的响应时间，则断言失败，否则成功！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'JMeter','常见','断言'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>