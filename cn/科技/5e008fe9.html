<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/7872f862899e449b82762f48acd09ec2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5e008fe9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5e008fe9.html><meta property="article:published_time" content="2020-10-29T21:08:52+08:00"><meta property="article:modified_time" content="2020-10-29T21:08:52+08:00"><meta name=Keywords content><meta name=description content="Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5e008fe9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>å…³äº2048ï¼Œæˆ‘çœ‹åˆ°å¾ˆå¤šå¤§ç¥ï¼Œæ¯”å¦‚åŒ»ç”Ÿï¼Œéƒ­ç¥ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç ”ç©¶äº†ä¸€æ®µæ—¶é—´ï¼Œè¿˜å¥½æ˜¯ç ”ç©¶äº†ä¸€å¥—é€»è¾‘ï¼Œè¿™æ˜¯ä¸€æ•´å¥—çš„2048æ¸¸æˆä»è®¾è®¡åˆ°é€»è¾‘å†åˆ°ç¼–å†™çš„å…¨éƒ¨è¿‡ç¨‹ï¼Œå°ä¼™ä¼´ä»¬çœ‹ä»”ç»†å’¯ï¼Œåˆšå¥½ä»Šå¤©æ˜¯ç¤¼æ‹œå¤©ï¼Œä¸€å¤©åº”è¯¥äº†ä¸€æŠŠè¿™ç¯‡åšå®¢å‘è¡¨äº†ï¼Œå…¶å®2048å¼€å‘èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹éš¾åº¦çš„ï¼Œå¹¶ä¸”ä»–çš„é€»è¾‘æŒºå¼ºçš„ï¼Œæˆ‘ä¹Ÿæ˜¯çœ‹äº†å¾ˆå¤šçš„èµ„æ–™å·å­¦çš„ï¼Œå¾ˆé€‚åˆæ¥é”»ç‚¼è‡ªå·±çš„é€»è¾‘æ€§</p><p>æˆ‘ä»¬é¦–å…ˆå…ˆæ¥é€‰æ‹©å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä»¥Eclipseä¸ºIDEï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹â€”â€”Game2048</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7872f862899e449b82762f48acd09ec2><p class=pgc-img-caption></p></div><h1>ä¸€.Scoreåˆ†æ•°</h1><p>æ—¢ç„¶æ˜¯2048æ¸¸æˆï¼Œæˆ‘ä»¬ä¹Ÿå°±åšä¸€ä¸ªç®€å•çš„ï¼Œä»–æœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œç„¶åå°±æ˜¯ä¸€ä¸ªæ¸¸æˆçš„å¸ƒå±€ï¼Œæˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªç®€å•çš„4*4çš„æ¸¸æˆï¼Œå¤§æ¦‚çš„è®¾è®¡å›¾å°±æ˜¯è¿™æ ·</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/abdd3946946e4a7e8a8d46cf73d6ea0e><p class=pgc-img-caption></p></div><h1>äºŒ.æ¸¸æˆç±»ï¼šGameView</h1><p>å› ä¸ºæˆ‘ä»¬çš„æ¸¸æˆæ‰€ä½¿ç”¨åˆ°çš„å¸ƒå±€å°±æ˜¯GridLayoutï¼Œæ‰€ä»¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªGameViewç»§æ‰¿è‡ªGridLayoutï¼Œç„¶åé€šè¿‡ç®—æ³•åŠ¨æ€æ·»åŠ æ–¹å—ï¼Œå¹¶ä¸”ç›‘å¬æ‰‹åŠ¿è¿›è¡Œæ“ä½œï¼Œè¿™ä¸ªé‡å†™çš„GridLayoutå°±æ˜¯æ¸¸æˆçš„å¸ƒå±€äº†</p><p>&lt;com.lgl.game2048.GameView</p><p>android:id="@+id/game_view"</p><p>android:layout_width="match_parent"</p><p>android:layout_height="0dp"</p><p>android:layout_weight="1" /></p><h1>ä¸‰.å®ç°äº¤äº’é€»è¾‘</h1><p>æˆ‘ä»¬è¿™é‡Œé“å®šæ˜¯æ‰‹åŠ¿æ“ä½œå•¦ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾—åŒºåˆ†æ‰‹åŠ¿æ˜¯å¾€ä¸Šï¼Œå¾€ä¸‹ï¼Œå¾€å·¦ï¼Œå¾€å³ï¼Œçš„æ‰‹åŠ¿ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ‰‹åŠ¿ç›‘å¬â€”â€”OnTouchListeneräº†ï¼Œä¹Ÿä¸ºäº†ç¡®ä¿æ˜¯å®æ—¶ç›‘å¬ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨initViewçš„åˆå§‹æ–¹æ³•ä¸­å¤„ç†</p><p>æˆ‘ä»¬å…¶å®åªè¦çŸ¥é“ä¸¤ç‚¹ï¼Œç”¨æˆ·æ‰‹æŒ‡æŒ‰ä¸‹çš„åº§æ ‡ç‚¹å’Œæ‰‹æŒ‡ç¦»å¼€çš„åº§æ ‡ç‚¹ï¼Œç„¶åè¿›è¡Œæ¯”å¯¹ï¼Œå°±èƒ½è¯†åˆ«å‡ºç”¨æˆ·çš„æ„å›¾äº†</p><p>å…¶å®å…³äºMotionEventçš„å‡ ä¸ªæ–¹æ³•ï¼Œå¤§å®¶ä¼°è®¡éƒ½è§æ€ªä¸æ€ªäº†ï¼Œå› ä¸ºç”¨çš„å¤ªå¤šäº†</p><p>// åˆå§‹åŒ–</p><p>private void initView() {</p><p>// è¯†åˆ«æ‰‹åŠ¿</p><p>setOnTouchListener(new OnTouchListener() {</p><p>// èµ·å§‹ç‚¹å’Œåç§»ç‚¹</p><p>private float startX, startY, offsetX, offsetY;</p><p>@Override</p><p>public boolean onTouch(View v, MotionEvent event) {</p><p>/**</p><p>* äº¤äº’é€»è¾‘ :æˆ‘ä»¬å…¶å®åªè¦çŸ¥é“ä¸¤ç‚¹ï¼Œç”¨æˆ·æ‰‹æŒ‡æŒ‰ä¸‹çš„åº§æ ‡ç‚¹å’Œæ‰‹æŒ‡ç¦»å¼€çš„åº§æ ‡ç‚¹ï¼Œç„¶åè¿›è¡Œæ¯”å¯¹ï¼Œå°±èƒ½è¯†åˆ«å‡ºç”¨æˆ·çš„æ„å›¾äº†</p><p>*/</p><p>switch (event.getAction()) {</p><p>// æ‰‹æŒ‡æŒ‰ä¸‹</p><p>case MotionEvent.ACTION_DOWN:</p><p>// è®°å½•æŒ‰ä¸‹çš„x,yåº§æ ‡</p><p>startX = event.getX();</p><p>startY = event.getY();</p><p>break;</p><p>// æ‰‹æŒ‡ç¦»å¼€</p><p>case MotionEvent.ACTION_UP:</p><p>// æ‰‹æŒ‡ç¦»å¼€ä¹‹åè®¡ç®—åç§»é‡(ç¦»å¼€çš„ä½ç½®-æŒ‰ä¸‹çš„ä½ç½®åœ¨è¿›è¡Œåˆ¤æ–­æ˜¯å¾€å“ªä¸ªæ–¹å‘ç§»åŠ¨)</p><p>offsetX = event.getX() - startX;</p><p>offsetY = event.getY() - startY;</p><p>// å¼€å§‹è¯†åˆ«æ–¹å‘</p><p>// offsetX çš„ç»å¯¹å€¼å¤§äºoffsetYçš„ç»å¯¹å€¼ è¯´æ˜åœ¨æ°´å¹³æ–¹å‘</p><p>if (Math.abs(offsetX) > Math.abs(offsetY)) {</p><p>// (ç›´æ¥&lt;0 ä¼šæœ‰äº›è®¸è¯¯å·®ï¼Œæˆ‘ä»¬å¯ä»¥ &lt;-5)</p><p>if (offsetX &lt; -5) {</p><p>// å·¦</p><p>System.out.println("å·¦");</p><p>} else if (offsetX > 5) {</p><p>// å³</p><p>System.out.println("å³");</p><p>}</p><p>// å¼€å§‹è®¡ç®—å‚ç›´æ–¹å‘ä¸Šä¸‹çš„æ»‘åŠ¨</p><p>} else {</p><p>if (offsetY &lt; -5) {</p><p>// ä¸Š</p><p>System.out.println("ä¸Š");</p><p>} else if (offsetY > 5) {</p><p>// ä¸‹</p><p>System.out.println("ä¸‹");</p><p>}</p><p>}</p><p>break;</p><p>}</p><p>return true;</p><p>}</p><p>});</p><p>}</p><p>ä¸Šé¢çš„é€»è¾‘æ˜¯ä¸æ˜¯éå¸¸çš„ç®€å•ï¼Œç„¶åæˆ‘ä»¬æ“ä½œä¸€ä¸‹ï¼Œçœ‹log</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/da2de7afc9bc4af5bf81270f3664a7c4><p class=pgc-img-caption></p></div><p>ç°åœ¨æ‰‹åŠ¿è¯†åˆ«ä¹Ÿæ˜¯å¾ˆç²¾å‡†äº†ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬çš„ä»£ç è®¾è®¡ä¹Ÿä¸èƒ½å¤ªè¿‡è‡ƒè‚¿ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬çš„æ“ä½œé€»è¾‘å°±ä¸åœ¨é‡Œé¢ç¼–å†™äº†ï¼Œæˆ‘ä»¬åˆ†åˆ«å®ç°å››ä¸ªæ–¹å‘çš„æ–¹æ³•</p><p>// å·¦</p><p>private void isLeft() {</p><p>}</p><p>// å³</p><p>private void isRight() {</p><p>}</p><p>// ä¸Š</p><p>private void isTop() {</p><p>}</p><p>// ä¸‹</p><p>private void isButtom() {</p><p>}</p><p>ç„¶åæŠŠè¾“å‡ºè¯­å¥æ›¿æ¢æ‰ï¼Œç›‘å¬åˆ°å“ªä¸ªæ–¹å‘å°±æ‰§è¡Œå“ªä¸ªæ–¹æ³•</p><p>//System.out.println("ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³");</p><p>private void isXXX() {</p><p>}</p><h1>å››.å®ç°æ–¹å—ç±»CardView</h1><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸€ä¸ªä¸ªå¡ç‰‡çœ‹ä½œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æ¯æ¬¡æ“ä½œï¼Œä»–éƒ½è¦è¿›è¡Œå®ä¾‹åŒ–</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±»CardViewç»§æ‰¿è‡ªFrameLayoutï¼Œå†é‡Œé¢æˆ‘ä»¬è¦è€ƒè™‘ä¸‰ç‚¹</p><p>>1.å¡ç‰‡</p><p>>2.å¡ç‰‡ä¸Šçš„æ•°å­—</p><p>>å¡ç‰‡ç›¸åŒçš„æ¯”è¾ƒ</p><p>package com.lgl.game2048;</p><p>import android.content.Context;</p><p>import android.widget.FrameLayout;</p><p>import android.widget.TextView;</p><p>public class CardView extends FrameLayout {</p><p>// å¡ç‰‡æ•°é‡</p><p>private int num = 0;</p><p>// å¡ç‰‡æ–‡å­—</p><p>private TextView tv_num;</p><p>public CardView(Context context) {</p><p>super(context);</p><p>// åˆå§‹åŒ–TextView</p><p>tv_num = new TextView(getContext());</p><p>// å¡ç‰‡æ–‡å­—å¤§å°</p><p>tv_num.setTextSize(20);</p><p>// å¸ƒå±€æ§åˆ¶å™¨ï¼Œå¡«å……æ»¡æ•´ä¸ªçˆ¶å®¹å™¨</p><p>LayoutParams lp = new LayoutParams(-1, -1);</p><p>addView(tv_num, lp);</p><p>setNum(0);</p><p>}</p><p>public int getNum() {</p><p>return num;</p><p>}</p><p>public void setNum(int num) {</p><p>this.num = num;</p><p>// è¦å‘ˆç°å‡ºæ¥çš„æ–‡å­—ï¼ˆè¿™é‡Œè¦æ³¨æ„æ˜¯Stringç±»å‹çš„ï¼‰</p><p>tv_num.setText(num + "");</p><p>}</p><p>// ä¸¤å¡ç‰‡ç›¸åŒçš„æ¯”è¾ƒæ–¹æ³•</p><p>public boolean equals(CardView card) {</p><p>return getNum() == card.getNum();</p><p>}</p><p>}</p><h1>äº”.åŠ¨æ€åˆ†é…æ–¹å—çš„å®½é«˜ä»¥åŠæ·»åŠ æ–¹å—</h1><p><strong>1.åŠ¨æ€åˆ†é…æ–¹å—çš„å®½é«˜</strong></p><p>å†™åˆ°è¿™é‡Œï¼Œå°±æœ‰ä¸€ä¸ªæ¢—äº†ï¼Œè¿˜æ˜¯Androidçš„è€æ¯›ç—…ï¼Œå±å¹•çš„é€‚é…é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬é˜Ÿå¡ç‰Œçš„å®½é«˜æ˜¯ä¸èƒ½åšé™å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¦å»æ ¹æ®æ‰‹æœºå±å¹•åŠ¨æ€åˆ†é…å¡ç‰‡çš„widthå’Œheightï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±å¾—ç”¨åˆ°æˆ‘ä¹‹å‰ä¸€ç¯‡åšå®¢</p><p>[Androidç»˜å›¾æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€”è‡ªå®šä¹‰Viewçš„åŸºç¡€å±æ€§å’Œæ–¹æ³•](http://blog.csdn.net/qq_26787115/article/details/50457413)</p><p>ä¸­æåˆ°çš„ä¸€ä¸ªæ–¹æ³•äº†</p><p>@Override</p><p>protected void onSizeChanged(int w, int h, int oldw, int oldh) {</p><p>// TODO Auto-generated method stub</p><p>super.onSizeChanged(w, h, oldw, oldh);</p><p>ä»–è´Ÿè´£æˆ‘ä»¬çš„Viewåœ¨çˆ¶å®¹å™¨çš„ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ¨æ€åˆ†é…é«˜å®½ä¹Ÿæ˜¯åœ¨ä»–è¿™é‡Œé¢å®Œæˆï¼Œé¦–å…ˆï¼Œä½ç½®å‘ç”Ÿæ”¹å˜ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°çš„ä½ç½®æ˜¯ä¸€ä¸ªç¡®å®šæ•°ï¼Œä½†æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·æ˜¯æ¨ªæ”¾è¿™æ‰‹æœºï¼Œè¿™å°±è›‹ç–¼äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—è¿›è¡Œä¸€ä¸ªè®¾ç½®äº†</p><p>æˆ‘ä»¬æ‰“å¼€AndroidManifest.xmlçš„activityæ ‡ç­¾ä¸­åŠ å…¥</p><p>//ç¦æ­¢å±å¹•æ¨ªå±</p><p>android:screenOrientation="portrait"</p><p>å¥½çš„ï¼Œç°åœ¨å¯ä»¥è®¡ç®—äº†</p><p>å®½é«˜æ±‚æœ€å°å€¼ å› ä¸ºè€ƒè™‘åˆ°ï¼Œæˆ‘ä»¬çš„æ–¹é˜µä»–æ˜¯æ­£æ–¹å½¢çš„ï¼Œè€Œæ‰‹æœºå±å¹•æ˜¯é•¿æ–¹å½¢çš„ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬çš„æ­£æ–¹å½¢è¦è®¾ç½®å˜é•¿å°±å¾—æ±‚é•¿æ–¹å½¢çš„å®½ï¼Œä¹Ÿå°±æ˜¯æœ€å°å€¼äº†</p><p>å¹¶ä¸”æˆ‘ä»¬ä¹Ÿä¸éœ€è¦ä»–å¡«æ»¡å®½åº¦ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç‚¹ç©ºéš™ï¼Œæ‰€ä»¥æˆ‘ä»¬å‡å»10ä¸ªåƒç´ </p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cccc9f254a924cbc82a8489bc774a03b><p class=pgc-img-caption></p></div><p>å†è®©ä»–é™¤ä»¥4ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŠ¨æ€å¹³åˆ†è¿™ä¸ªå®½åº¦äº†</p><p>int cardWidth = (Math.min(w, h)-10)/4;</p><p><strong>2.æ·»åŠ æ–¹å—</strong></p><p><strong>-1.æ·»åŠ å¡ç‰‡</strong></p><p>// æ·»åŠ å¡ç‰‡,å‚æ•°ä¸ºå¡ç‰‡çš„å®½é«˜ï¼Œå› ä¸ºä»–æ˜¯æ­£æ–¹å½¢ï¼Œæ‰€ä»¥å®½é«˜éƒ½æ˜¯cardWidth</p><p>private void addCard(int cardWidth, int cardHeight) {</p><p>// åˆ›å»ºæ–¹å—</p><p>CardView c;</p><p>// å¾ªç¯æ·»åŠ </p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>c = new CardView(getContext());</p><p>// numä¸ºéšæœºæ•°</p><p>c.setNum(2);</p><p>addView(c, cardWidth, cardHeight);</p><p>}</p><p>}</p><p>}</p><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹ï¼ˆæ¢ä¸ªAS2.0çš„æ¨¡æ‹Ÿå™¨æ„Ÿè§‰èŒèŒå“’ï¼‰</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/401f0face39842f9b42ebeb17850dcb2><p class=pgc-img-caption></p></div><p><strong>-2.æ–¹å—æ¢è¡Œ</strong></p><p>ä½ ä¼šå‘ç°ï¼Œå¹¶æ²¡æœ‰4*4ï¼Œè€Œä¸”ä¸€æ’æ²¡æœ‰æ¢è¡Œï¼Œæˆ‘ä»¬å›åˆ°GameViewçš„initView()æ–¹æ³•ä¸­æ·»åŠ </p><p>//æ¢è¡Œ</p><p>setColumnCount(4);</p><p>ç°åœ¨å†çœ‹çœ‹</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/63575f2ed5e0426bac816d44bbb416b8><p class=pgc-img-caption></p></div><p><strong>-3.æ–‡å­—å±…ä¸­</strong></p><p>ç°åœ¨æˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹ï¼Œè®©æ–‡å­—å±…ä¸­ï¼Œåœ¨CardViewä¸­</p><p>//æ–‡å­—å±…ä¸­</p><p>tv_num.setGravity(Gravity.CENTER);</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e45998b1be0f4214be3a6223ec69f579><p class=pgc-img-caption></p></div><p>ç°åœ¨æ˜¯ä¸æ˜¯å¥½çœ‹å¤šäº†</p><p><strong>-4.æ–¹å—é¢œè‰²</strong></p><p>```</p><p>//è®¾ç½®æ–‡å­—èƒŒæ™¯(æš—å¡å…¶è‰²)</p><p>tv_num.setBackgroundColor(0xffBDB76A);</p><p>```</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d1d0ebd95c3e4ef2953371a45ff2159f><p class=pgc-img-caption></p></div><p><strong>-5.æ–¹å—é—´è·</strong></p><p>æ—¢ç„¶æ˜¯æ–¹å—é—´éš”ï¼Œæˆ‘ä»¬è¿˜æ˜¯å›åˆ°CardViewé‡Œé¢ï¼Œè¿˜è®°å¾—æˆ‘ä»¬è®¾ç½®çš„LayoutParamså—ï¼Ÿä½ å¯èƒ½æƒ³åˆ°äº†å§ï¼Œæˆ‘ä»¬ç”¨Margins</p><p>//è®¾ç½®é—´è·</p><p>lp.setMargins(10, 10, 0, 0);</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d31f5b596b2b4f11970c371f61523d6d><p class=pgc-img-caption></p></div><p><strong>-6.è®°å¿†æ–¹å—</strong></p><p>æˆ‘ä»¬æ‰€æ“ä½œä¹‹åï¼Œä¼šæœ‰æ–°ç”Ÿæˆçš„å¡ç‰‡ï¼Œä¸ºäº†ä¸é‡åˆï¼Œæˆ‘ä»¬å¾—åšä¸€ä¸ªè®°å¿†åŠŸèƒ½</p><p>// è®°å½•å¡ç‰‡çš„äºŒç»´æ•°ç»„</p><p>private CardView[][] cards = new CardView[4][4];</p><p>ç„¶ååœ¨addCard()æ–¹æ³•ä¸­</p><p>//è®°å¿†</p><p>cards[j][i] = c;</p><h1>å…­.éšæœºæ•°</h1><p>æˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸‹è¿™ä¸ªéšæœºæ•°çš„é€»è¾‘ï¼Œæˆ‘ä»¬ç©2048çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å¼€å§‹æ–°æ¸¸æˆçš„æ—¶å€™ä¼šéšæœºå‡ºç°ä¸¤ä¸ªæ–¹å—ï¼Œè€Œè¿™ä¸¤ä¸ªæ–¹å—ï¼Œä»–æ˜¯éšæœºå‡ºç°åœ¨4*4çš„ä»»æ„ä½ç½®çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç¡®å®šä¸‹æ¥ï¼Œä¸€å¼€å§‹æ˜¯ä¸¤ä¸ªæ–¹å—çš„éšæœºå‡ºç°ï¼Œå†æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œä»–æœ‰æ—¶å€™æ˜¯ä¸¤ä¸ª2ï¼Œä½†æ˜¯æœ‰æ—¶å€™æ˜¯ä¸€ä¸ª2ï¼Œä¸€ä¸ª4ï¼Œè¿™ä¸ª4å‡ºç°çš„æœºç‡æœ‰ç‚¹å°ï¼Œè€Œä¸”æˆ‘ä»¬ä½œä¸ºæ¸¸æˆè§„åˆ™åˆ¶å®šè€…ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æˆ‘ä»¬æ§åˆ¶çš„ï¼Œè¿™é‡Œï¼Œæˆ‘ä¸æƒ³ä»–å‡ºç°çš„å¾ˆå®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œçš„é€»è¾‘å°±è®¾ç½®æˆ1-9ï¼Œè¿™æ ·4å‡ºç°çš„æ¦‚ç‡ä¼šå°å¾ˆå¤šï¼Œå¥½äº†ï¼ŒåŸºæœ¬ç¡®å®šäº†ï¼Œæˆ‘ä»¬å°±å¼€å§‹å†™ä»£ç äº†ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å¯¹ä¹‹å‰çš„ä»£ç è¿›è¡Œè°ƒæ•´ä¸€ä¸‹ï¼Œåœ¨CardViewä¸­setNumæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é»˜è®¤ä¸º0å°±å ä¸€æ ¼ï¼Œ</p><p>// è¦å‘ˆç°å‡ºæ¥çš„æ–‡å­—ï¼ˆè¿™é‡Œè¦æ³¨æ„æ˜¯Stringç±»å‹çš„ï¼‰</p><p>if (num &lt;= 0) {</p><p>tv_num.setText("");</p><p>} else {</p><p>tv_num.setText(num + "");</p><p>}</p><p>ç„¶åæŠŠåˆšæ‰çš„æ–‡å­—è®¾ç½®æ¢æˆ0</p><p>// c.setNum(2);</p><p>c.setNum(0);</p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ éšæœºæ•°äº†ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–¹æ³•addRandom();</p><p>// éšæœºæ•°</p><p>private void addRandom() {</p><p>// æˆ‘ä»¬æ–°å»ºä¸€ä¸ªlsitå­˜æ”¾ç©ºçš„æ–¹å—ï¼Œæ“ä½œä¹‹å‰æ¸…ç©º</p><p>point.clear();</p><p>// å¯¹æ‰€æœ‰çš„ä½ç½®è¿›è¡Œéå†</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>// ç©ºæ–¹å—æ‰å¯ä»¥æ·»åŠ æ•°å­—ï¼Œæœ‰å€¼æˆ‘ä»¬å°±ä¸æ·»åŠ </p><p>if (cards[j][i].getNum() &lt;= 0) {</p><p>point.add(new Point(j, i));</p><p>}</p><p>}</p><p>}</p><p>// forå¾ªç¯èµ°å®Œä¹‹åæˆ‘ä»¬è¦å–æ–¹å—</p><p>Point p = point.remove((int) (Math.random() * point.size()));</p><p>// æˆ‘ä»¬ç”¨Math.random()è¿”å›ä¸€ä¸ª0-1çš„æ•°ï¼Œå½“å¤§äº0.1çš„æ—¶å€™æ˜¯2å¦åˆ™å°±æ˜¯4ï¼Œä¹Ÿå°±æ˜¯4å‡ºç°çš„æ¦‚ç‡ä¸ºååˆ†ä¹‹ä¸€</p><p>cards[p.x][p.y].setNum(Math.random() > 0.1 ? 2 : 4);</p><p>}</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ¸¸æˆäº†ï¼Œä¸ºäº†æ–¹ä¾¿ç­‰ä¸‹æˆ‘ä»¬éœ€è¦é‡æ–°å¼€å§‹æ¸¸æˆï¼Œæˆ‘ä»¬å°±æ–°å»ºä¸€ä¸ªstartGame()æ–¹æ³•ï¼Œè®©ä»–åœ¨onSizeChanged()è°ƒç”¨</p><p>// å¼€å¯æ¸¸æˆ</p><p>private void startGame() {</p><p>// æ—¢ç„¶æ˜¯å¼€å§‹æ¸¸æˆï¼Œæˆ‘ä»¬å°±è¦å¯¹æ‰€æœ‰çš„å€¼è¿›è¡Œæ¸…ç†</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>cards[j][i].setNum(0);</p><p>}</p><p>}</p><p>// é‡æ–°æ·»åŠ éšæœºæ•°</p><p>addRandom();</p><p>// æˆ‘ä»¬è¦æ·»åŠ ä¸¤ä¸ª</p><p>addRandom();</p><p>}</p><p>å¥½çš„ï¼Œæˆ‘ä»¬ç°åœ¨è¿è¡Œä¸€ä¸‹å•Š</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/146872a8714144f196b4043e0c0dc467><p class=pgc-img-caption></p></div><p>è¿™æ­£æ˜¯æˆ‘ä»¬è¦çš„æ•ˆæœï¼Œæ¯æ¬¡è¿›å…¥æ¸¸æˆéšæœºç”Ÿæˆä¸¤ä¸ªæ–¹å—ï¼Œä»–ä¼šå‡ºç°åœ¨ä¸åŒçš„ä½ç½®ï¼Œè€Œä¸”ä¼šå‡ºç°2å’Œ4ï¼Œ4çš„æ¦‚ç‡å°å¾ˆå¤š</p><p><strong>ä¸ƒ.å®ç°æ–¹å—æ»‘åŠ¨ï¼Œé€’åŠ é€»è¾‘</strong></p><p>å¥½çš„ï¼Œç»ˆäºåˆ°äº†æ ¸å¿ƒçš„ä¸œè¥¿äº†ï¼Œè¿™æ¬¡æˆ‘ä»¬å°±è¦ç”¨åˆ°ä¹‹å‰æ‰€å†™çš„ä¸Šä¸‹å·¦å³æ–¹å‘æ–¹æ³•äº†</p><p>// å·¦</p><p>private void isLeft() {</p><p>/**</p><p>* è¿™é‡Œçš„é€»è¾‘æœ‰ä¸‰ç§æƒ…å†µ 1.å·¦è¾¹ä¸ºç©ºï¼Œç›´æ¥å·¦æ»‘åˆ°æœ€åä¸€æ ¼ 2.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ï¼Œå°±ç›¸åŠ  3.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸ç›¸ç­‰çš„ï¼Œé åœ¨æ—è¾¹</p><p>*/</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>// å¾€å·¦æ»‘æ˜¯ä¸€è¡Œä¸€è¡Œå»éå†çš„</p><p>for (int j2 = j + 1; j2 &lt; 4; j2++) {</p><p>// å¦‚æœè¯´éå†åˆ°å€¼</p><p>if (cards[j2][i].getNum() > 0) {</p><p>// å¦‚æœå½“å‰ä½ç½®ä¸Šä¸º0,å°±æ”¾åœ¨è¿™ä¸ªä½ç½®ä¸Šå»</p><p>if (cards[j][i].getNum() &lt;= 0) {</p><p>cards[j][i].setNum(cards[j2][i].getNum());</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j2][i].setNum(0);</p><p>// è®©å›¾å½¢ç»§ç»­éå†</p><p>j--;</p><p>// æœ‰å€¼ï¼Œå¹¶ä¸”è¿˜ç›¸åŒ</p><p>} else if (cards[j][i].equals(cards[j2][i])) {</p><p>// åˆå¹¶,è¿™é‡Œåšäº†ä¸€ä¸ªå¾ˆå·§å¦™çš„å†™æ³•ï¼Œæˆ‘ä»¬ç›¸åŠ ï¼Œå…¶å®2048æ–¹å—ä¸Šçš„æ•°å­—éƒ½æ˜¯åŒå€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åŸæ•°æ®*2å°±å¯ä»¥äº†</p><p>cards[j][i].setNum(cards[j][i].getNum() * 2);</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j2][i].setNum(0);</p><p>}</p><p>break;</p><p>}</p><p>}</p><p>}</p><p>}</p><p>}</p><p>// å³</p><p>private void isRight() {</p><p>/**</p><p>* è¿™é‡Œçš„é€»è¾‘æœ‰ä¸‰ç§æƒ…å†µ 1.å·¦è¾¹ä¸ºç©ºï¼Œç›´æ¥å·¦æ»‘åˆ°æœ€åä¸€æ ¼ 2.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ï¼Œå°±ç›¸åŠ  3.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸ç›¸ç­‰çš„ï¼Œé åœ¨æ—è¾¹</p><p>*/</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 3; j >= 0; j--) {</p><p>// å¾€å·¦æ»‘æ˜¯ä¸€è¡Œä¸€è¡Œå»éå†çš„</p><p>for (int j2 = j - 1; j2 >= 0; j2--) {</p><p>// å¦‚æœè¯´éå†åˆ°å€¼</p><p>if (cards[j2][i].getNum() > 0) {</p><p>// å¦‚æœå½“å‰ä½ç½®ä¸Šä¸º0,å°±æ”¾åœ¨è¿™ä¸ªä½ç½®ä¸Šå»</p><p>if (cards[j][i].getNum() &lt;= 0) {</p><p>cards[j][i].setNum(cards[j2][i].getNum());</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j2][i].setNum(0);</p><p>// è®©å›¾å½¢ç»§ç»­éå†</p><p>j++;</p><p>// æœ‰å€¼ï¼Œå¹¶ä¸”è¿˜ç›¸åŒ</p><p>} else if (cards[j][i].equals(cards[j2][i])) {</p><p>// åˆå¹¶,è¿™é‡Œåšäº†ä¸€ä¸ªå¾ˆå·§å¦™çš„å†™æ³•ï¼Œæˆ‘ä»¬ç›¸åŠ ï¼Œå…¶å®2048æ–¹å—ä¸Šçš„æ•°å­—éƒ½æ˜¯åŒå€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åŸæ•°æ®*2å°±å¯ä»¥äº†</p><p>cards[j][i].setNum(cards[j][i].getNum() * 2);</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j2][i].setNum(0);</p><p>}</p><p>break;</p><p>}</p><p>}</p><p>}</p><p>}</p><p>}</p><p>// ä¸Š</p><p>private void isTop() {</p><p>/**</p><p>* è¿™é‡Œçš„é€»è¾‘æœ‰ä¸‰ç§æƒ…å†µ 1.å·¦è¾¹ä¸ºç©ºï¼Œç›´æ¥å·¦æ»‘åˆ°æœ€åä¸€æ ¼ 2.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ï¼Œå°±ç›¸åŠ  3.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸ç›¸ç­‰çš„ï¼Œé åœ¨æ—è¾¹</p><p>*/</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>// å¾€å·¦æ»‘æ˜¯ä¸€è¡Œä¸€è¡Œå»éå†çš„</p><p>for (int i2 = i + 1; i2 &lt; 4; i2++) {</p><p>// å¦‚æœè¯´éå†åˆ°å€¼</p><p>if (cards[j][i2].getNum() > 0) {</p><p>// å¦‚æœå½“å‰ä½ç½®ä¸Šä¸º0,å°±æ”¾åœ¨è¿™ä¸ªä½ç½®ä¸Šå»</p><p>if (cards[j][i].getNum() &lt;= 0) {</p><p>cards[j][i].setNum(cards[j][i2].getNum());</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j][i2].setNum(0);</p><p>// è®©å›¾å½¢ç»§ç»­éå†</p><p>i--;</p><p>// æœ‰å€¼ï¼Œå¹¶ä¸”è¿˜ç›¸åŒ</p><p>} else if (cards[j][i].equals(cards[j][i2])) {</p><p>// åˆå¹¶,è¿™é‡Œåšäº†ä¸€ä¸ªå¾ˆå·§å¦™çš„å†™æ³•ï¼Œæˆ‘ä»¬ç›¸åŠ ï¼Œå…¶å®2048æ–¹å—ä¸Šçš„æ•°å­—éƒ½æ˜¯åŒå€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åŸæ•°æ®*2å°±å¯ä»¥äº†</p><p>cards[j][i].setNum(cards[j][i].getNum() * 2);</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j][i2].setNum(0);</p><p>}</p><p>break;</p><p>}</p><p>}</p><p>}</p><p>}</p><p>}</p><p>// ä¸‹</p><p>private void isButtom() {</p><p>/**</p><p>* è¿™é‡Œçš„é€»è¾‘æœ‰ä¸‰ç§æƒ…å†µ 1.å·¦è¾¹ä¸ºç©ºï¼Œç›´æ¥å·¦æ»‘åˆ°æœ€åä¸€æ ¼ 2.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ç›¸ç­‰çš„ï¼Œå°±ç›¸åŠ  3.å·¦è¾¹ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ä¸ç›¸ç­‰çš„ï¼Œé åœ¨æ—è¾¹</p><p>*/</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>for (int i = 3; i >= 0; i--) {</p><p>// å¾€å·¦æ»‘æ˜¯ä¸€è¡Œä¸€è¡Œå»éå†çš„</p><p>for (int i2 = i - 1; i2 >= 0; i2--) {</p><p>// å¦‚æœè¯´éå†åˆ°å€¼</p><p>if (cards[j][i2].getNum() > 0) {</p><p>// å¦‚æœå½“å‰ä½ç½®ä¸Šä¸º0,å°±æ”¾åœ¨è¿™ä¸ªä½ç½®ä¸Šå»</p><p>if (cards[j][i].getNum() &lt;= 0) {</p><p>cards[j][i].setNum(cards[j][i2].getNum());</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j][i2].setNum(0);</p><p>// è®©å›¾å½¢ç»§ç»­éå†</p><p>i++;</p><p>// æœ‰å€¼ï¼Œå¹¶ä¸”è¿˜ç›¸åŒ</p><p>} else if (cards[j][i].equals(cards[j][i2])) {</p><p>// åˆå¹¶,è¿™é‡Œåšäº†ä¸€ä¸ªå¾ˆå·§å¦™çš„å†™æ³•ï¼Œæˆ‘ä»¬ç›¸åŠ ï¼Œå…¶å®2048æ–¹å—ä¸Šçš„æ•°å­—éƒ½æ˜¯åŒå€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åŸæ•°æ®*2å°±å¯ä»¥äº†</p><p>cards[j][i].setNum(cards[j][i].getNum() * 2);</p><p>// æŠŠåŸæ¥ä½ç½®ä¸Šçš„æ•°å­—æ¸…é™¤</p><p>cards[j][i2].setNum(0);</p><p>}</p><p>break;</p><p>}</p><p>}</p><p>}</p><p>}</p><p>}</p><p>å››ä¸ªæ–¹æ³•çš„é€»è¾‘éƒ½æ˜¯å¤§åŒå°å¼‚çš„ï¼Œä¸è¿‡é€»è¾‘æ€§è¿˜æ˜¯å¾ˆå¼ºçš„ï¼Œå¤§å®¶å¯ä»¥é€‚å½“çš„å»ç ”ç©¶ä¸€ä¸‹ç„¶åæˆ‘ä»¬å¤šå¢åŠ å‡ ä¸ªæ–¹å—å…ˆæ¥æ¨¡æ‹Ÿä¸‹æ•ˆæœ</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c86504398c3f47ed921092b6101f75d6><p class=pgc-img-caption></p></div><h1>å…«.è®¡åˆ†</h1><p>æ–¹å—çš„é€»è¾‘å·®ä¸å¤šå†™å®Œäº†ï¼Œæˆ‘ä»¬å…ˆæ¥å°±åœ¨MainActivityé‡Œé¢æ¥å®ç°æˆ‘ä»¬çš„Scoreè®¡åˆ†</p><p><strong>MainActivity</strong></p><p>package com.lgl.game2048;</p><p>import android.app.Activity;</p><p>import android.os.Bundle;</p><p>import android.widget.TextView;</p><p>public class MainActivity extends Activity {</p><p>private TextView tv_score;</p><p>//å¤–ç•Œå¯ä»¥è®¿é—®çš„å®ä¾‹</p><p>private static MainActivity mainActivity = null;</p><p>//ç§¯åˆ†å™¨</p><p>private int score = 0;</p><p>public MainActivity() {</p><p>mainActivity = this;</p><p>}</p><p>@Override</p><p>protected void onCreate(Bundle savedInstanceState) {</p><p>super.onCreate(savedInstanceState);</p><p>setContentView(R.layout.activity_main);</p><p>tv_score = (TextView) findViewById(R.id.tv_score);</p><p>}</p><p>public static MainActivity getMainActivity() {</p><p>return mainActivity;</p><p>}</p><p>public static void setMainActivity(MainActivity mainActivity) {</p><p>MainActivity.mainActivity = mainActivity;</p><p>}</p><p>//æ¸…é™¤åˆ†æ•°</p><p>public void clearScore(){</p><p>score = 0;</p><p>showScore();</p><p>}</p><p>//åˆ†æ•°</p><p>public void showScore(){</p><p>tv_score.setText("åˆ†æ•°:"+score);</p><p>}</p><p>public void addScore(int s){</p><p>score += s;</p><p>showScore();</p><p>}</p><p>}</p><p>è¿™æ˜¯æˆ‘ä»¬è®¡åˆ†çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ€è€ƒä¸€ä¸‹åœ¨ä»€ä¹ˆæ—¶å€™è®¡åˆ†å‘¢ï¼Ÿæƒ³æƒ³å°±çŸ¥é“åœ¨æ»‘åŠ¨çš„æ—¶å€™ä¿©å€¼ç›¸åŠ çš„æ—¶å€™å¼€å§‹è®¡åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å››ä¸ªæ»‘åŠ¨æ–¹æ³•æœ‰å€¼çš„åˆ¤æ–­å¥ä¸­æ·»åŠ </p><p>//å¼€å§‹è®¡åˆ†</p><p>MainActivity.getMainActivity().addScore(cards[j][i].getNum());</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨å¼€å§‹æ¸¸æˆçš„æ—¶å€™è¦æ¸…é›¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨startGameæ–¹æ³•ä¸­è¦æ·»åŠ </p><p>//è®¡åˆ†æ¸…é›¶</p><p>MainActivity.getMainActivity().clearScore();</p><h1>ä¹.æ»‘åŠ¨åå¢åŠ æ–¹å—</h1><p>æˆ‘ä»¬é»˜è®¤è¿›æ¥æ˜¯ä¸¤ä¸ªæ–¹å—ï¼Œä½†æ˜¯æ»‘åŠ¨ä¹‹åæˆ‘ä»¬åº”è¯¥ä¹Ÿè¦éšæœºå¢åŠ æ–¹å—æ‰èƒ½è¾¾åˆ°æ¸¸æˆçš„é€»è¾‘ï¼Œä½ è¯´æ˜¯å§ï¼</p><p>æ‰€ä»¥ï¼Œåªè¦ä½ æ»‘åŠ¨äº†ï¼Œæˆ‘ä»¬å°±è¦æ·»åŠ ï¼Œä¸€ç›´åˆ°gameoverç»“æŸä¸ºæ­¢ï¼Œé‚£æˆ‘ä»¬ä¾ç„¶åœ¨é‚£å››ä¸ªæ–¹å‘æ–¹æ³•é‡Œå†™</p><p>private void isxx(){</p><p>// åŠ ä¸ªåˆ¤æ–­æ˜¯å¦å¯ä»¥æ·»åŠ </p><p>boolean isAdd = false;</p><p>for(....){</p><p>for(....){</p><p>for(....){</p><p>if(....){</p><p>if(....){</p><p>....</p><p>// å¯ä»¥æ·»åŠ </p><p>isAdd = true;</p><p>}else if(....){</p><p>....</p><p>// å¯ä»¥æ·»åŠ </p><p>isAdd = true;</p><p>}</p><p>}</p><p>}</p><p>}</p><p>}</p><p>// å¼€å§‹è¿›è¡Œåˆ¤æ–­</p><p>if (isAdd) {</p><p>// å¦‚æœå¯ä»¥åˆå¹¶ï¼Œæˆ‘ä»¬æ·»åŠ éšæœºæ•°</p><p>addRandom();</p><p>}</p><p>}</p><p>å¥½çš„ï¼Œæˆ‘ä»¬ç°åœ¨æ¥è¿è¡Œä¸€ä¸‹</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/46e1d767a3cd48ec8e58c93ee01ecb82><p class=pgc-img-caption></p></div><p>æ¸¸æˆç°åœ¨å¤§ä½“ä¸Šæ˜¯OKçš„äº†</p><h1>å.æ¸¸æˆç»“æŸ</h1><p>æ¸¸æˆæœ‰å§‹æœ‰ç»ˆï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥åˆ¤æ–­æ¸¸æˆç»“æŸï¼Œæ¸¸æˆç»“æŸæœ‰ä¸¤ä¸ªå‰æ</p><p>1.16ä¸ªæ ¼å­éƒ½æ˜¯æ»¡çš„</p><p>2.ä¸Šä¸‹å·¦å³ç›¸é‚»çš„æ ¼å­éƒ½ä¸ç›¸åŒ</p><p>è¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªendGameæ–¹æ³•ï¼Œç„¶åè®©ä»–åœ¨æ¯æ¬¡å¢åŠ æ–¹å—çš„æ—¶å€™è°ƒç”¨äº†</p><p>// æ¸¸æˆç»“æŸ</p><p>private void endGame() {</p><p>// åœ¨æ¯æ¬¡æ·»åŠ æ–°çš„æ–¹å—çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹</p><p>// æ˜¯å¦ç»“æŸï¼Ÿ</p><p>boolean isEnd = true;</p><p>ALL: // æ ‡ç­¾ï¼Œè®©breakè·³å‡ºæ•´ä¸ªå¾ªç¯</p><p>for (int i = 0; i &lt; 4; i++) {</p><p>for (int j = 0; j &lt; 4; j++) {</p><p>// ç­‰äº0çš„è¯æ¸¸æˆæ²¡æœ‰ç»“æŸ,æˆ–è€…ä¸Šä¸‹å·¦å³è¿˜æ˜¯æœ‰ç›¸åŒçš„æ•°</p><p>if (cards[j][i].getNum() == 0</p><p>// å·¦</p><p>|| (j > 0 && cards[j][i].equals(cards[j - 1][i]))</p><p>// å³</p><p>|| (j &lt; 3) && cards[j][i].equals(cards[j + 1][i])</p><p>// ä¸Š</p><p>|| (i > 0 && cards[j][i].equals(cards[j][i - 1]))</p><p>// ä¸‹</p><p>|| (i &lt; 3 && cards[j][i].equals(cards[j][i + 1]))) {</p><p>// è¯´æ˜æ¸¸æˆæ²¡æœ‰ç»“æŸ</p><p>isEnd = false;</p><p>break ALL;</p><p>}</p><p>}</p><p>}</p><p>if (isEnd) {</p><p>// å½“isEnd = trueçš„æ—¶å€™æ¸¸æˆç»“æŸ</p><p>new AlertDialog.Builder(getContext())</p><p>.setTitle("Sorryï¼Œæ¸¸æˆç»“æŸï¼")</p><p>.setMessage("æ˜¯å¦é‡æ–°å¼€å§‹ï¼Ÿ")</p><p>.setPositiveButton("æ˜¯",</p><p>new DialogInterface.OnClickListener() {</p><p>@Override</p><p>public void onClick(DialogInterface dialog,</p><p>int which) {</p><p>// é‡æ–°å¼€å§‹</p><p>startGame();</p><p>}</p><p>})</p><p>.setNegativeButton("å¦",</p><p>new DialogInterface.OnClickListener() {</p><p>@Override</p><p>public void onClick(DialogInterface dialog,</p><p>int which) {</p><p>}</p><p>}).show();</p><p>}</p><p>}</p><p>å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥æ£€æµ‹ä¸€ä¸‹äº†</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a42d79b6117a4428839779f8299de35a><p class=pgc-img-caption></p></div><h1>åä¸€.ä¼˜åŒ–ä¹‹è‰²å—</h1><p>æˆ‘ä»¬çš„æ•°å­—æ¯ä¸ªæ•°å­—ä»£è¡¨ä¸€ç§é¢œè‰²ï¼Œè¿™é‡Œæˆ‘å°±ç®€å•çš„å†™ç‚¹é¢œè‰²ï¼Œä½ ä»¬è¦æ˜¯å–œæ¬¢å¯ä»¥è‡ªå·±æƒ³æ”¹ä»€ä¹ˆå°±æ”¹ä»€ä¹ˆ</p><p>åœ¨CardViewä¸­setnumæ–¹æ³•é‡Œ</p><p>switch (num) {</p><p>case 0:</p><p>tv_num.setBackgroundColor(0xffBDB76A);</p><p>break;</p><p>case 2:</p><p>tv_num.setBackgroundColor(0xffeee4da);</p><p>break;</p><p>case 4:</p><p>tv_num.setBackgroundColor(0xffede0c8);</p><p>break;</p><p>case 8:</p><p>tv_num.setBackgroundColor(0xfff2b179);</p><p>break;</p><p>case 16:</p><p>tv_num.setBackgroundColor(0xfff59563);</p><p>break;</p><p>case 32:</p><p>tv_num.setBackgroundColor(0xfff67c5f);</p><p>break;</p><p>case 64:</p><p>tv_num.setBackgroundColor(0xfff65e3b);</p><p>break;</p><p>case 128:</p><p>tv_num.setBackgroundColor(0xffedcf72);</p><p>break;</p><p>case 256:</p><p>tv_num.setBackgroundColor(0xffedcc61);</p><p>break;</p><p>case 512:</p><p>tv_num.setBackgroundColor(0xffedc850);</p><p>break;</p><p>case 1024:</p><p>tv_num.setBackgroundColor(0xffedc53f);</p><p>break;</p><p>case 2048:</p><p>tv_num.setBackgroundColor(0xffedc22e);</p><p>break;</p><p>default:</p><p>tv_num.setBackgroundColor(0xff3c3a32);</p><p>break;</p><p>}</p><p>æˆ‘ä»¬è¿è¡Œä¸‹</p><div class=pgc-img><img alt=Androidæ¸¸æˆ2048æ–¹å—çš„è®¾è®¡å®ç°ï¼Œç¼–å†™ï¼ŒåŠ ä¸Šè‰²å½©ï¼Œåˆ†æ•°ç­‰åŠŸèƒ½ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4229ae6fbd354505ae64166f52b6cedd><p class=pgc-img-caption></p></div><p>Demoä¸‹è½½åœ°å€ï¼šhttp://download.csdn.net/detail/qq_26787115/9409068</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Android','æ¸¸æˆ','2048'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>