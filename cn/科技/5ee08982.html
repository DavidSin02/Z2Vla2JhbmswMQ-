<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>电脑核心CPU的运算原理是什么？值得一看 | 极客快訊</title><meta property="og:title" content="电脑核心CPU的运算原理是什么？值得一看 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/da125f0cf19d4c32af324d64c78f5cb4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ee08982.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ee08982.html><meta property="article:published_time" content="2020-11-14T21:01:48+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:48+08:00"><meta name=Keywords content><meta name=description content="电脑核心CPU的运算原理是什么？值得一看"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5ee08982.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>电脑核心CPU的运算原理是什么？值得一看</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>不懂电子元件的码农我要强答一发了。太学术的我不会，你们也听不懂。所以臭不要脸非常不严谨地科普一记。说错不许打我。<br>另外关于这个问题，推荐《编码 (豆瓣)》这本书，挺薄的。当《十万个为什么》看，好奇的同学一晚上就能搞明白。</p><blockquote><p><strong>第一季 继电器</strong></p></blockquote><p>先不要扯什么图灵，冯诺依曼这些先贤。因为他们都太遥远。计算机一切计算的源头其实是源自一个非常非常中二的东西：<strong>“继电器（Relay）”</strong>。继电器是什么鬼？看下图，<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/da125f0cf19d4c32af324d64c78f5cb4><p class=pgc-img-caption></p></div><p>其实就是一个线圈利用电磁感应做成的电磁铁。原理和“电报机”一样，当开关闭合，黄色电路通电，线圈是金属棒变成磁铁，吸引中间的小开关（Anker），接通右边灰色的电路，点亮灯泡。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6ac3e57e07104bf3a77b8dab6ce97b6f><p class=pgc-img-caption></p></div><p><strong>简单说，就是你在家一按开关，隔壁老王家的灯亮了。</strong></p><blockquote><p><strong>第二季 “反相器”和“非门”</strong></p></blockquote><p>为什么说继电器是个很中二的东西？因为这不就是开关吗？我按了它才亮，不按绝对不亮。但CPU真就是这货发展而来的。它的变种就开始好玩了。最简单的一个变种，就是“反继电器”，或者叫<strong>“反相器（Inverter）”</strong>。就是隔壁老王家的灯本来是亮着的，我手上的开关一按，灯就灭了。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0983abae80ed460980b262298bdc475e><p class=pgc-img-caption></p></div><p>"反相器"到了现代计算机里，就叫做<strong>“非门（NOT Gate）”</strong>。本来开关T1是接通的，Output是1（5V高位电平）。一旦闭合开关T1，电路中断，输出变为0（1V低位电平）。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b385d4a292124994b223a51a5fb0ba50><p class=pgc-img-caption></p></div><p>“非门”用下面这个符号表示。简单说，就是输出永远和输入是反的，输入1，输出就是0。输入0，输出就是1。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/edde42e20f6c48ae8bcf0488c3904112><p class=pgc-img-caption></p></div><blockquote><p><strong>第三季 逻辑门家族</strong></p></blockquote><p>和“非门”一样，我们能得到一堆其他特性的门。比如，“<strong>与门（AND Gate）</strong>”，就是两个开关串联。必须两个开关同时闭合，灯泡才能亮。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/373fcc46c60f4217bd1a056392b8887b><p class=pgc-img-caption></p></div><p><br><strong>“或门（OR Gate）”</strong>，两个开关并联，只要其中一个开关闭合，灯泡就会亮。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a5d41fde78bf42f4b46087a3420dac55><p class=pgc-img-caption></p></div><p><br>长话短说，下图是所能得到的几个基本<strong>“逻辑门（Logic Gates）”</strong>。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ac27b686f72a4818864b97abab185981><p class=pgc-img-caption></p></div><p><br>虽然看上去比较复杂，但“逻辑门”在本质上和之前讲的“继电器”都是“控制电路”。<strong>或者说都是我手里握着控制老王家花式吊灯的各种开关。</strong>老王一定很郁闷。</p><blockquote><p><strong>第四季 逻辑</strong></p></blockquote><p>逻辑门虽然被我说得很淳朴，就是控制隔壁老王家吊灯的开关。但其中却可能蕴含着人类大脑，甚至是这个世界终极奥义的一部分：<strong>逻辑（Logic）</strong>。这也是为什么它被叫做逻辑门。</p><p>爱因斯坦曾说过：<br></p><blockquote><p><strong>世界上最不可思议的事情,就是这个世界是可以被“理解”的。</strong></p></blockquote><p>简直是细思极恐有木有！最简单的例子，亚里士多德给出的经典<strong>“Barbara”三段论</strong>：<br></p><blockquote><p>如果所有人（M）都是必死的（P），（大前提）<br>并且所有希腊人（S）都是人（M），（小前提）<br>那么所有希腊人（S）都是必死的（P）。（结论）</p></blockquote><p>数学上，一个<strong>形式系统</strong>（Formal system）的野心就是想通过一组公理，和逻辑推理过程，来描述和证明我们的客观世界。说到这里我们计算机的祖师爷们就都出来了：莱布尼兹，康托尔，布尔，图灵，等等等等。著名的图灵机就是在这个议题的争论中无心插柳的副产品。这个主题无法展开。感兴趣推荐看《逻辑的引擎 (豆瓣)》这本书。这里只举一个最简单的<strong>“布尔代数（Boolean algebra）”</strong>的例子：<br></p><blockquote><p>我喜欢（长头发）的（不是）（蛇精脸）的女生<br></p></blockquote><p>用布尔代数来表示就是：<br></p><blockquote><p>长头发 AND （ NOT 蛇精脸）</p></blockquote><p>说到这里，是不是和前面说的逻辑门联系起来了？</p><blockquote><p><strong>第五季 逻辑电路</strong></p></blockquote><p>但是逻辑是逻辑，继电器是继电器，就算上面的花式继电器也是继电器。把逻辑和继电器联系起来的是一位不得不提的大师，<strong>克劳德·艾尔伍德·香农</strong>（<strong>Claude Elwood Shannon）</strong>和他的那篇史上最牛硕士论文<strong>：《继电器与开关电路的符号分析》。</strong>绝对最牛，没有之一！</p><p>还是之前那个例子：<br></p><blockquote><p>我喜欢（长头发）的（不是）（蛇精脸）的女生</p></blockquote><p>如果：<br></p><blockquote><p>A代表：长头发<br>B代表：蛇精脸</p></blockquote><p>那我喜欢的女生就可以写成一个布尔函数：</p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8f64115f6f2b45f49bab61ffd102452d><p class=pgc-img-caption></p></div><p>把一个逻辑命题用符号写成一个公式有什么用呢？那是因为这样就可以很方便地转换成一个“<strong>逻辑表决器”，</strong>如下图。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f2e417206426472fac128097160b09b1><p class=pgc-img-caption></p></div><p><br>原理很简单，当A=1时，纵向的A总线为1。当A=0时，</p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4984ec0b4b87497180a3a751fd330853><p class=pgc-img-caption></p></div><p>总线输出1。B也是如此。最后的输出线搭在A总线和</p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/80be7873cbf94448b6af956a1b3411bc><p class=pgc-img-caption></p></div><p>总线上，用个与门连接。所以只有当A的输入为1，B的输入为0时，Out才为1，代表我能接受这个女孩。不信大家可以人肉推演一下。</p><p><strong>理论上任何布尔函数，都能转换成上面这样的表决器。就好像电路有了人类逻辑思考的能力。</strong></p><blockquote><p><strong>第六季 “图灵机”和“累加器”</strong></p></blockquote><p>总算要说到计算机的祖师爷<strong>图灵（Turing）</strong>了。图灵机模型，相比上面说到的逻辑电路，要多一个<strong>“存储器”</strong>。因为根据图灵机模拟人类计算时大脑的工作状态的模型，人类的任何计算都可以抽象成一个机械化的过程。</p><p>考虑5+7=12这个加法。5加7等于12，写下2，然后心中默记产生一个进位。最终写成12。<br></p><pre> 5 + 7----- 12</pre><p>换成二进制，是一个道理，<br></p><pre> 0000 0101 + 0000 0111------------- 0000 1100</pre><p>其中每一位的加法还是能分解成两个动作：<br></p><blockquote><p>同一位的两个数字相加<br>如果当前位结果大于1，则向前进一位</p></blockquote><p>第一个动作可能的结果（真值表）有：</p><blockquote><p>0 XOR 0=0<br>1 XOR 0=1<br>0 XOR 1=1<br>1 XOR 1=0</p></blockquote><p>这个真值表和一个简单的“<strong>异或门</strong>”是一致的。</p><p>第二步进位，只有1+1才需要进位1，所以真值表如下：<br></p><blockquote><p>0 AND 0=0<br>1 AND 0=0<br>0 AND 1=0<br>1 AND 1=1</p></blockquote><p>这和“<strong>与门</strong>”的真值表是一致的。</p><p>所以把一个<strong>“异或门”</strong>和一个<strong>“与门”</strong>组合到一起，就构成了一个<strong>“一位半加器”</strong>：<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/f11d4b36480748748dccca4120ccb494><p class=pgc-img-caption></p></div><p><br>但事实上一位半加器只适用于末位数的加法。高位的二进制加法需要考虑3个输入，就是还需要额外考虑上一位得到的进位。这个过程可以用两个半加器来完成。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/44d78252816a47ad825c5a036aefe80b><p class=pgc-img-caption></p></div><p>两个半加器组合起来，构成一个完整的<strong>“一位全加器”</strong>。</p><p>把8个这样的一位全加器组合起来，就构成了一个<strong>“八位全加器”</strong>：<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/aadcceeb59b3493b908e0e2fbc46bdd0><p class=pgc-img-caption></p></div><p>从最末尾开始相加，刚才的5+7：<br></p><pre>0000 0101 + 0000 0111</pre><p>反过来就变成：<br></p><pre> 1010 0000 + 1110 0000------------- 0011 0000</pre><p>把最初的进位<strong>c_in</strong>设为0，得到的结果反过来就是：<strong>0000 1100 = 12</strong>。</p><p>至此，计算机好像拥有了人脑的部分智能。既然一组逻辑门，能计算加法，就一定能做减法，乘法，除法，和其他计算。</p><blockquote><p><strong>第六季 寄存器</strong></p></blockquote><p>加减乘除远远不是逻辑门能做的全部事情。实际上电脑里出了硬盘，风扇，电池，其他几乎全是由逻辑电路和逻辑门组成的，包括我们说的<strong>内存</strong>。说内存先要说一下寄存器。这东西我觉得是比CPU更神奇的一个东西。绝对是一大黑魔法。用几个简单的逻辑门，就能在不断电的情况下一直”记住“上次的输入值。</p><p>最简单的储存部件叫<strong>“SR锁存器（Latch）”</strong>。其实就是两个“或非门”。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/55b6caaee04a43f9a0d70a52169770b3><p class=pgc-img-caption></p></div><p>再看一眼或非门的真值表：只有两个输入都为0，才输出1。<br></p><blockquote><p>0 NOR 0 = 1<br>1 NOR 0 = 0<br>0 NOR 1 = 0<br>1 NOR 1 = 0</p></blockquote><p>其中具体电流怎么通过互相博弈达到稳态的细节就不展开了。总之这个黑科技的最终效果就是：<br></p><blockquote><p>假设初始状态都是零：S=0, R=0。输出Q=0，=0<br>当S端给个信号1，输出Q=1，=0<br>当S端变回信号0，输出还是保持Q=1，=0</p></blockquote><p>也就是说，这个元件记住了之前S端的输入1。直到我们把R端设为1，输出Q才变回0。</p><p>虽然这个SR锁存器离我们真实的“RAM内存”还很遥远。但让逻辑门产生“记忆”的核心逻辑稳态锁就是这么简单的两个或非门。</p><p>当我们把SR锁存器的两个输入端捏合成一个D输入端，再加上一个由时钟信号控制端E，就得到一个更高级的<strong>“时序D锁存器”</strong>。如果不想头痛，只要记住<strong>这是一个能在时钟开关E打开的情况下，记住D输入端进来的信号的装置</strong>。之后我们一直可以从Q端得到之前D端的值。<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/06d7a6ec36b34d939b799c3606ae25b3><p class=pgc-img-caption></p></div><p><br>如果再复杂一点，把两个相反的时序D锁存器组合在一起，就能构成一个<strong>“D触发器（D Flip Flop）”</strong>：<br></p><div class=pgc-img><img alt=电脑核心CPU的运算原理是什么？值得一看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/41827b75d1b046c89489a70fa7ad8cc0><p class=pgc-img-caption></p></div><p><br>触发器和之前的锁存器的区别是，只有当时钟信号处在上升沿（从1V向5V跃迁）的一瞬间，D端的输入值才能写入触发器。并在随后的时间内，只要没有新的D输入写入，Q一直保持这个值。</p><p>D触发器离我们的内存就没那么远了。只要再套上一个用于寻址的“解码器”和之前说过的“选择器”，就能实现从特定一组触发器中读取数据的效果啦。</p><p>所以我们都知道CPU需要时钟来同步时序电路。但这个晶振时钟并不是像想象的那样直接作用在<strong>ALU（逻辑运算单元）</strong>上，而是通过寄存器来实现时序控制。感兴趣的可以看这个回答：为什么CPU需要时钟才能工作？ - 胖胖的回答</p><blockquote><p><strong>第七季 硬件 V.s. 软件</strong></p></blockquote><p>虽然，几乎所有计算都能设计出一个专门的逻辑运算器。但这样做似乎并不明智，否则逻辑部件的数量将以指数级增长。一个合理的方案，应该是用硬件实现部分必须的基础计算功能，然后已软件的方式，利用基础计算单元，完成复杂计算。</p><p>就好像做乘法，不需要设计一个专门的“乘法器”，而是重复多次加法运算即可。这里就是所谓软件开始介入的地方。也就是所谓的“算法”开始放发挥作用，虽然并不是硬件无法胜任这项工作，而是把复杂性交给软件来处理似乎更合理。</p><p>从此，在硬件这棵树上，开出了软件这朵花。也就有了”程序员“这个严重伤害颈椎和腰椎的职业。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'电脑','CPU','运算'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>