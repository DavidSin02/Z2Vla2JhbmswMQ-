<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å¥½æ–‡æ¨èï¼šå¾®æœåŠ¡ç½‘å…³å®æˆ˜â€”Spring Cloud Gateway | æå®¢å¿«è¨Š</title><meta property="og:title" content="å¥½æ–‡æ¨èï¼šå¾®æœåŠ¡ç½‘å…³å®æˆ˜â€”Spring Cloud Gateway - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/b94fdab501d3430ca916d7786df2d235"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><meta property="article:published_time" content="2020-11-14T21:03:16+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:16+08:00"><meta name=Keywords content><meta name=description content="å¥½æ–‡æ¨èï¼šå¾®æœåŠ¡ç½‘å…³å®æˆ˜â€”Spring Cloud Gateway"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/5ef5650a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å¥½æ–‡æ¨èï¼šå¾®æœåŠ¡ç½‘å…³å®æˆ˜â€”Spring Cloud Gateway</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä½œè€…ï¼šåšäº‘BoCloud|</p><h1>å‰è¨€</h1><div class=pgc-img><img alt="å¥½æ–‡æ¨èï¼šå¾®æœåŠ¡ç½‘å…³å®æˆ˜â€”Spring Cloud Gateway" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b94fdab501d3430ca916d7786df2d235><p class=pgc-img-caption></p></div><p>ä½œä¸ºNetflix Zuulçš„æ›¿ä»£è€…ï¼ŒSpring Cloud Gatewayæ˜¯ä¸€æ¬¾éå¸¸å®ç”¨çš„å¾®æœåŠ¡ç½‘å…³ï¼Œåœ¨Spring Cloudå¾®æœåŠ¡æ¶æ„ä½“ç³»ä¸­å‘æŒ¥éå¸¸å¤§çš„ä½œç”¨ã€‚æœ¬æ–‡å¯¹Spring Cloud Gatewayå¸¸è§ä½¿ç”¨åœºæ™¯è¿›è¡Œäº†æ¢³ç†ï¼Œå¸Œæœ›å¯¹å¾®æœåŠ¡å¼€å‘äººå‘˜æä¾›ä¸€äº›å¸®åŠ©ã€‚</p><p>å¾®æœåŠ¡ç½‘å…³SpringCloudGateway</p><h1>1.æ¦‚è¿°</h1><p>Spring cloud gatewayæ˜¯springå®˜æ–¹åŸºäºSpring 5.0ã€Spring Boot2.0å’ŒProject Reactorç­‰æŠ€æœ¯å¼€å‘çš„ç½‘å…³ï¼ŒSpring Cloud Gatewayæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ç®€å•ã€æœ‰æ•ˆå’Œç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼ï¼ŒSpring Cloud Gatewayä½œä¸ºSpring Cloudç”Ÿæ€ç³»ç»Ÿä¸­çš„ç½‘å…³ï¼Œç›®æ ‡æ˜¯æ›¿ä»£Netflix Zuulï¼Œå…¶ä¸ä»…æä¾›ç»Ÿä¸€çš„è·¯ç”±æ–¹å¼ï¼Œå¹¶ä¸”è¿˜åŸºäºFileré“¾çš„æ–¹å¼æä¾›äº†ç½‘å…³åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå®‰å…¨ã€ç›‘æ§/åŸ‹ç‚¹ã€é™æµç­‰ã€‚</p><h1>2.æ ¸å¿ƒæ¦‚å¿µ</h1><p>ç½‘å…³æä¾›APIå…¨æ‰˜ç®¡æœåŠ¡ï¼Œä¸°å¯Œçš„APIç®¡ç†åŠŸèƒ½ï¼Œè¾…åŠ©ä¼ä¸šç®¡ç†å¤§è§„æ¨¡çš„APIï¼Œä»¥é™ä½ç®¡ç†æˆæœ¬å’Œå®‰å…¨é£é™©ï¼ŒåŒ…æ‹¬åè®®é€‚é…ã€åè®®è½¬å‘ã€å®‰å…¨ç­–ç•¥ã€é˜²åˆ·ã€æµé‡ã€ç›‘æ§æ—¥å¿—ç­‰è´¡å‘¢ã€‚ä¸€èˆ¬æ¥è¯´ç½‘å…³å¯¹å¤–æš´éœ²çš„URLæˆ–è€…æ¥å£ä¿¡æ¯ï¼Œæˆ‘ä»¬ç»Ÿç§°ä¸ºè·¯ç”±ä¿¡æ¯ã€‚å¦‚æœç ”å‘è¿‡ç½‘å…³ä¸­é—´ä»¶æˆ–è€…ä½¿ç”¨è¿‡Zuulçš„äººï¼Œä¼šçŸ¥é“ç½‘å…³çš„æ ¸å¿ƒæ˜¯Filterä»¥åŠFilter Chainï¼ˆFilterè´£ä»»é“¾ï¼‰ã€‚Sprig Cloud Gatewayä¹Ÿå…·æœ‰è·¯ç”±å’ŒFilterçš„æ¦‚å¿µã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹Spring Cloud Gatewayä¸­å‡ ä¸ªé‡è¦çš„æ¦‚å¿µã€‚</p><p>è·¯ç”±ã€‚è·¯ç”±æ˜¯ç½‘å…³æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œè·¯ç”±ä¿¡æ¯æœ‰ä¸€ä¸ªIDã€ä¸€ä¸ªç›®çš„URLã€ä¸€ç»„æ–­è¨€å’Œä¸€ç»„Filterç»„æˆã€‚å¦‚æœæ–­è¨€è·¯ç”±ä¸ºçœŸï¼Œåˆ™è¯´æ˜è¯·æ±‚çš„URLå’Œé…ç½®åŒ¹é…</p><p>æ–­è¨€ã€‚Java8ä¸­çš„æ–­è¨€å‡½æ•°ã€‚Spring Cloud Gatewayä¸­çš„æ–­è¨€å‡½æ•°è¾“å…¥ç±»å‹æ˜¯Spring5.0æ¡†æ¶ä¸­çš„ServerWebExchangeã€‚Spring Cloud Gatewayä¸­çš„æ–­è¨€å‡½æ•°å…è®¸å¼€å‘è€…å»å®šä¹‰åŒ¹é…æ¥è‡ªäºhttp requestä¸­çš„ä»»ä½•ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚å¤´å’Œå‚æ•°ç­‰ã€‚</p><p>è¿‡æ»¤å™¨ã€‚ä¸€ä¸ªæ ‡å‡†çš„Spring webFilterã€‚Spring cloud gatewayä¸­çš„filteråˆ†ä¸ºä¸¤ç§ç±»å‹çš„Filterï¼Œåˆ†åˆ«æ˜¯Gateway Filterå’ŒGlobal Filterã€‚è¿‡æ»¤å™¨Filterå°†ä¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¿®æ”¹å¤„ç†</p><p>Spring cloudGatewayå‘å‡ºè¯·æ±‚ã€‚ç„¶åå†ç”±Gateway Handler Mappingä¸­æ‰¾åˆ°ä¸è¯·æ±‚ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°†å…¶å‘é€åˆ°Gateway web handlerã€‚Handlerå†é€šè¿‡æŒ‡å®šçš„è¿‡æ»¤å™¨é“¾å°†è¯·æ±‚å‘é€åˆ°æˆ‘ä»¬å®é™…çš„æœåŠ¡æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ã€‚</p><h1>å¿«é€Ÿå…¥é—¨</h1><p>ä»¥Spring Bootæ¡†æ¶å¼€å‘ä¸ºä¾‹ï¼Œå¯åŠ¨ä¸€ä¸ªGatewayæœåŠ¡æ¨¡å—ï¼ˆä»¥Consulä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œä¸€ä¸ªåç«¯æœåŠ¡æ¨¡å—ã€‚clientç«¯è¯·æ±‚ç»gatewayæœåŠ¡æŠŠè¯·æ±‚è·¯ç”±åˆ°åç«¯æœåŠ¡ã€‚</p><p>å‰ææ¡ä»¶ï¼š</p><ul><li>Consulï¼šç‰ˆæœ¬1.5.0ã€‚</li><li>Spring botï¼šç‰ˆæœ¬2.1.5ã€‚</li><li>Spring cloudï¼šç‰ˆæœ¬Greenwich.SR1ã€‚</li><li>Redisï¼šç‰ˆæœ¬5.0.5ã€‚</li></ul><p>1.å¾®æœåŠ¡å¼€å‘</p><p>è¿™é‡Œä»¥ä½¿ç”¨Spring Bootæ¡†æ¶å¼€å‘å¾®æœåŠ¡ä¸ºä¾‹ï¼Œå¯åŠ¨ä¸€ä¸ªæœåŠ¡å¹¶æ³¨å†Œåˆ°Consulã€‚</p><p>å¼•å…¥ä¾èµ–ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>æ³¨å†ŒæœåŠ¡åˆ°Consulï¼Œé…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:application:name: service-consumercloud:consul: host: 127.0.0.1 port: 8500 discovery: service-name: service-consumer</pre><p>å¦‚ä¸‹å®šä¹‰RestControllerï¼Œå‘å¸ƒHTTPæ¥å£ã€‚</p><pre>@RestController@RequestMapping("/user")public class UserController {@Resourceprivate UserService userService;@GetMapping(value = "/info")public User info() { return userService.info();}</pre><p>}</p><blockquote><p>æ³¨ï¼šæ­¤ä¸ºæœåŠ¡ç«¯é…ç½®ï¼Œç»GatewayæŠŠè¯·æ±‚è·¯ç”±è½¬å‘åˆ°è¯¥æœåŠ¡ä¸Šã€‚</p></blockquote><p>2.ç½‘å…³é…ç½®</p><p>åˆ›å»ºä¸€ä¸ªGatewayæœåŠ¡ï¼Œå¼•å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>å¯åŠ¨ç±»é…ç½®å¦‚ä¸‹ï¼š</p><pre>@SpringBootApplication@EnableDiscoveryClientpublic class GatewayApplication {public static void main(String[] args) { SpringApplication.run(GatewayApplication.class, args);}</pre><p>}</p><p>Spring Cloud Gatewayå¯¹clientç«¯è¯·æ±‚èµ·åˆ°è·¯ç”±åŠŸèƒ½ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre>server:port: 8098spring:application:name: service-gatewaycloud:gateway: discovery: locator: enabled: true  lower-case-service-id: true consul: host: 127.0.0.1 #æ³¨å†Œgatewayç½‘å…³åˆ°consul port: 8500 discovery: service-name: service-gateway</pre><p>æ­¤æ—¶ä½¿ç”¨http://localhost:8089/service-consumer/user/infoè®¿é—®æœåŠ¡ï¼Œç½‘å…³å³å¯å¯¹æœåŠ¡è¿›è¡Œè·¯ç”±è½¬å‘ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°å…·ä½“åç«¯æœåŠ¡ä¸Šã€‚æ­¤æ—¶ï¼Œurlä¸­ä½¿ç”¨çš„urlå‰ç¼€service-consumerï¼Œæ˜¯åç«¯æœåŠ¡åœ¨Consulæ³¨å†Œçš„æœåŠ¡åç§°è½¬ä¸ºå°å†™å­—æ¯ä»¥åçš„å­—ç¬¦ä¸²ã€‚</p><h1>æœ€ä½³å®è·µ</h1><p><strong>01 Gatewayç½‘å…³é…ç½®</strong></p><p>æœ¬æ–‡ç¬¬äºŒéƒ¨åˆ†å¼€å‘è§„èŒƒä¸­å®šä¹‰äº†ç½‘å…³è¿›è¡Œè·¯ç”±è½¬å‘çš„é…ç½®ï¼Œé™¤äº†ä¸Šè¿°é…ç½®æ–¹å¼è¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼š</p><pre>gateway: discovery: locator: enabled: true lower-case-service-id: true routes: - id: service_consumer uri: lb://service-consumer predicates: - Path= /consumer/** filters: - StripPrefix=1</pre><p>åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œé…ç½®äº†ä¸€ä¸ªPathçš„predicat,å°†ä»¥/consumer/**å¼€å¤´çš„è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°uriä¸ºlb://service-consumerçš„åœ°å€ä¸Šï¼Œlb://service-consumerï¼ˆæ³¨å†Œä¸­å¿ƒä¸­æœåŠ¡çš„åç§°ï¼‰å³service-consumeræœåŠ¡çš„è´Ÿè½½å‡è¡¡åœ°å€ï¼Œå¹¶ç”¨StripPrefixçš„filter åœ¨è½¬å‘ä¹‹å‰å°†/consumerå»æ‰ã€‚åŒæ—¶å°†spring.cloud.gateway.discovery.locator.enabledæ”¹ä¸ºfalseï¼Œå¦‚æœä¸æ”¹çš„è¯ï¼Œä¹‹å‰çš„http://localhost:8081/service-consumer/user/infoè¿™æ ·çš„è¯·æ±‚åœ°å€ä¹Ÿèƒ½æ­£å¸¸è®¿é—®ï¼Œå› ä¸ºè¿™æ—¶ä¸ºæ¯ä¸ªæœåŠ¡åˆ›å»ºäº†2ä¸ªrouterã€‚</p><p>æœ¬æ–‡ç¬¬äºŒéƒ¨åˆ†å’Œæœ¬èŠ‚ä¸€å…±è®²è¿°äº†ä¸¤ç§é…ç½®æ–¹å¼ï¼Œä¸¤ç§é…ç½®éƒ½å¯ä»¥å®ç°è¯·æ±‚è·¯ç”±è½¬å‘çš„åŠŸèƒ½ã€‚å‚æ•°spring.cloud.gateway.discovery.locator.enabledä¸ºtrueï¼Œè¡¨æ˜Gatewayå¼€å¯æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ï¼Œå¹¶ä¸”Spring Cloud Gatewayè‡ªåŠ¨æ ¹æ®æœåŠ¡å‘ç°ä¸ºæ¯ä¸€ä¸ªæœåŠ¡åˆ›å»ºäº†ä¸€ä¸ªrouterï¼Œè¿™ä¸ªrouterå°†ä»¥æœåŠ¡åå¼€å¤´çš„è¯·æ±‚è·¯å¾„è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡ã€‚spring.cloud.gateway.discovery.locator.lowerCaseServiceIdæ˜¯å°†è¯·æ±‚è·¯å¾„ä¸Šçš„æœåŠ¡åé…ç½®ä¸ºå°å†™ï¼ˆå› ä¸ºæœåŠ¡æ³¨å†Œçš„æ—¶å€™ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œæ—¶å°†æœåŠ¡åè½¬æˆå¤§å†™çš„äº†ï¼‰ã€‚</p><pre>gateway: discovery: locator: enabled: true lower-case-service-id: true</pre><p><strong>02 Gatewayè·¨åŸŸè®¿é—®</strong></p><p>Spring Cloud Gatewayè¿˜é’ˆå¯¹è·¨åŸŸè®¿é—®åšäº†è®¾è®¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®è§£å†³è·¨åŸŸè®¿é—®é—®é¢˜ï¼š</p><pre>spring:cloud:gateway: globalcors: corsConfigurations: '[/**]': allowedOrigins: "https://docs.spring.io" allowedMethods: - GET allowHeaders: - Content-Type</pre><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå…è®¸æ¥è‡ªhttps://docs.spring.ioçš„getè¯·æ±‚è¿›è¡Œè®¿é—®,å¹¶ä¸”è¡¨æ˜æœåŠ¡å™¨å…è®¸è¯·æ±‚å¤´ä¸­æºå¸¦å­—æ®µContent-Typeã€‚</p><p><strong>03 Gateway è¿‡æ»¤å™¨</strong></p><p>Spring Cloud Gatewayçš„filterç”Ÿå‘½å‘¨æœŸä¸åƒZuulé‚£ä¹ˆä¸°å¯Œï¼Œå®ƒåªæœ‰ä¸¤ä¸ªï¼šâ€œpreâ€å’Œâ€œpostâ€ï¼š</p><p>pre:è¿™ç§è¿‡æ»¤å™¨åœ¨è¯·æ±‚è¢«è·¯ç”±ä¹‹å‰è°ƒç”¨ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªè¿‡æ»¤å™¨å®ç°èº«ä»½éªŒè¯ã€åœ¨é›†ç¾¤ä¸­é€‰æ‹©è¯·æ±‚çš„å¾®æœåŠ¡ã€è®°å½•è°ƒè¯•çš„ä¿¡æ¯ã€‚</p><p>postï¼šè¿™ç§è¿‡æ»¤å™¨åœ¨è·¯ç”±åˆ°æœåŠ¡å™¨ä¹‹åæ‰§è¡Œã€‚è¿™ç§è¿‡æ»¤å™¨å¯ç”¨æ¥ä¸ºå“åº”æ·»åŠ HTTP Headerã€ç»Ÿè®¡ä¿¡æ¯å’ŒæŒ‡æ ‡ã€å“åº”ä»å¾®æœåŠ¡å‘é€ç»™å®¢æˆ·ç«¯ç­‰ã€‚</p><p>Spring Cloud gatewayçš„filteråˆ†ä¸ºä¸¤ç§ï¼šGatewayFilterå’ŒGlobalfilterã€‚GlobalFilterä¼šåº”ç”¨åˆ°æ‰€æœ‰çš„è·¯ç”±ä¸Šï¼Œè€ŒGatewayfilterå°†åº”ç”¨åˆ°å•ä¸ªè·¯ç”±æˆ–è€…ä¸€ä¸ªåˆ†ç»„çš„è·¯ç”±ä¸Šã€‚</p><p>åˆ©ç”¨Gatewayfilterå¯ä»¥ä¿®æ”¹è¯·æ±‚çš„httpçš„è¯·æ±‚æˆ–è€…æ˜¯å“åº”ï¼Œæˆ–è€…æ ¹æ®è¯·æ±‚æˆ–è€…å“åº”åšä¸€äº›ç‰¹æ®Šçš„é™åˆ¶ã€‚æ›´å¤šæ—¶å€™å¯ä»¥åˆ©ç”¨Gatewayfilteråšä¸€äº›å…·ä½“çš„è·¯ç”±é…ç½®ã€‚</p><p>ä¸‹é¢çš„é…ç½®æ˜¯AddRequestParameter Gatewayfilterçš„ç›¸å…³é…ç½®ã€‚</p><pre>spring:application:name: service-gatewaycloud:gateway: discovery: locator: enabled: true routes: - id: parameter_route uri: http://localhost:8504/user/info filters: - AddRequestParameter=foo, bar predicates: - Method=GET</pre><p>ä¸Šè¿°é…ç½®ä¸­æŒ‡å®šäº†è½¬å‘çš„åœ°å€ï¼Œè®¾ç½®æ‰€æœ‰çš„GETæ–¹æ³•éƒ½ä¼šè‡ªåŠ¨æ·»åŠ foo=bar,å½“è¯·æ±‚ç¬¦åˆä¸Šè¿°è·¯ç”±æ¡ä»¶æ—¶ï¼Œå³å¯åœ¨åç«¯æœåŠ¡ä¸Šæ¥æ”¶åˆ°Gatewayç½‘å…³æ·»åŠ çš„å‚æ•°ã€‚</p><p>å¦å¤–å†ä»‹ç»ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„filterï¼Œå³StripPrefix gateway filterã€‚</p><p>é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: stripprefixfilter uri: lb://service-consumer predicates: - Path=/consumer/** filters: - StripPrefix=1</pre><p>å½“clientç«¯ä½¿ç”¨http://localhost:8098/consumer/user/infoè·¯å¾„è¿›è¡Œè¯·æ±‚æ—¶ï¼Œå¦‚æœæ ¹æ®ä¸Šè¿°è¿›è¡Œé…ç½®Gatewayä¼šå°†è¯·æ±‚è½¬æ¢ä¸ºhttp://localhost:8098/service-consumer/user/infoã€‚ä»¥æ­¤ä½œä¸ºå‰ç«¯è¯·æ±‚çš„æœ€ç»ˆç›®çš„åœ°ã€‚</p><p><strong>04 Gatewayè¯·æ±‚åŒ¹é…</strong></p><p>Gatewayç½‘å…³å¯ä»¥æ ¹æ®ä¸åŒçš„æ–¹å¼è¿›è¡ŒåŒ¹é…è¿›è€ŒæŠŠè¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡ä¸Šã€‚</p><p>é€šè¿‡headerè¿›è¡ŒåŒ¹é…ï¼ŒæŠŠè¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡ä¸Šï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: header_route uri: http://baidu.com predicates: - Header=X-Request-Id, \d+</pre><p>é€šè¿‡curlæµ‹è¯•ï¼šcurl http://localhost:8080 -H "X-Request-Id:666666",è¿”å›é¡µé¢ä»£ç è¯æ˜åŒ¹é…æˆåŠŸã€‚</p><p>å¦‚æœæ˜¯ä»¥Hostè¿›è¡ŒåŒ¹é…ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: host_route uri: http://baidu.com predicates: - Host=**.baidu.com</pre><p>é€šè¿‡curl http://localhost:8098 -H "Host: www.baidu.com"è¿›è¡Œæµ‹è¯•ï¼Œè¿”å›é¡µé¢ä»£ç å³è½¬å‘æˆåŠŸã€‚</p><p>å¯ä»¥é€šè¿‡POSTã€GETã€PUTã€DELTEç­‰ä¸åŒçš„æ–¹å¼è¿›è¡Œè·¯ç”±ï¼š</p><pre>spring:cloud:gateway: routes: - id: method_route uri: http://baidu.com predicates: - Method=GET</pre><p>é€šè¿‡ curl http://localhost:8098 è¿›è¡Œæµ‹è¯•ï¼Œè¿”å›é¡µé¢ä»£ç å³è¡¨ç¤ºæˆåŠŸã€‚</p><p>ä¸Šè¿°æ˜¯å•ä¸ªåŒ¹é…è¿›è¡Œè·¯ç”±ï¼Œå¦‚æœæŠŠå¤šä¸ªåŒ¹é…åˆåœ¨ä¸€èµ·è¿›è¡Œè·¯ç”±ï¼Œå¿…é¡»æ»¡è¶³æ‰€æœ‰çš„è·¯æœ‰æ¡ä»¶æ‰ä¼šè¿›è¡Œè·¯ç”±è½¬å‘ã€‚</p><p><strong>05 Gatewayç†”æ–­</strong></p><p>Spring Cloud Gatewayä¹Ÿå¯ä»¥åˆ©ç”¨Hystrixçš„ç†”æ–­ç‰¹æ€§ï¼Œåœ¨æµé‡è¿‡å¤§æ—¶è¿›è¡ŒæœåŠ¡é™çº§ï¼ŒåŒæ—¶é¡¹ç›®ä¸­å¿…é¡»åŠ ä¸ŠHystrixçš„ä¾èµ–ã€‚</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; </pre><p>é…ç½®åï¼ŒGatewayå°†ä½¿ç”¨fallbackcmdä½œä¸ºåç§°ç”ŸæˆHystrixCommandå¯¹è±¡è¿›è¡Œç†”æ–­å¤„ç†ã€‚å¦‚æœæƒ³æ·»åŠ ç†”æ–­åçš„å›è°ƒå†…å®¹ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><pre>spring:cloud:gateway: routes: - id: hystrix_route uri: lb://consumer-service predicates: - Path=/consumer/** filters: - name: Hystrix args: name: fallbackcmd fallbackUri: forward:/fallback - StripPrefix=1hystrix: command:fallbackcmd: execution: isolation: thread: timeoutInMilliseconds: 5000 #è¶…æ—¶æ—¶é—´ï¼Œè‹¥ä¸è®¾ç½®è¶…æ—¶æ—¶é—´åˆ™æœ‰å¯èƒ½æ— æ³•è§¦å‘ç†”æ–­</pre><p>ä¸Šè¿°é…ç½®ä¸­ç»™å‡ºäº†ç†”æ–­ä¹‹åè¿”å›è·¯å¾„ï¼Œå› æ­¤ï¼Œåœ¨GatewayæœåŠ¡æ¨¡å—æ·»åŠ /fallbackè·¯å¾„ï¼Œä»¥ä½œä¸ºæœåŠ¡ç†”æ–­æ—¶çš„è¿”å›è·¯å¾„ã€‚</p><pre>@RestControllerpublic class GatewayController {@RequestMapping(value = "/fallback")public String fallback(){ return "fallback nothing";}</pre><p>}</p><p>fallbackUri: forward:/fallbacké…ç½®äº† fallback æ—¶è¦ä¼šè°ƒçš„è·¯å¾„ï¼Œå½“è°ƒç”¨ Hystrix çš„ fallback è¢«è°ƒç”¨æ—¶ï¼Œè¯·æ±‚å°†è½¬å‘åˆ°/fallbackè¿™ä¸ª URIï¼Œå¹¶ä»¥æ­¤è·¯å¾„çš„è¿”å›å€¼ä½œä¸ºè¿”å›ç»“æœã€‚</p><p><strong>06 Gatewayé‡è¯•è·¯ç”±å™¨</strong></p><p>é€šè¿‡ç®€å•çš„é…ç½®ï¼ŒSpring Cloud Gatewayå°±å¯ä»¥æ”¯æŒè¯·æ±‚é‡è¯•åŠŸèƒ½ã€‚</p><pre>spring:cloud:gateway: routes: - id: header_route uri: http://localhost:8504/user/info predicates: - Path=/user/** filters: - name: Retry args: retries: 3 status: 503 - StripPrefix=1</pre><p>Retry GatewayFilteré€šè¿‡å››ä¸ªå‚æ•°æ¥æ§åˆ¶é‡è¯•æœºåˆ¶ï¼Œå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>retriesï¼šé‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 3 æ¬¡ã€‚</li><li>statusesï¼šHTTP çš„çŠ¶æ€è¿”å›ç ï¼Œå–å€¼è¯·å‚è€ƒï¼šorg.springframework.http.HttpStatusã€‚</li><li>methodsï¼šæŒ‡å®šå“ªäº›æ–¹æ³•çš„è¯·æ±‚éœ€è¦è¿›è¡Œé‡è¯•é€»è¾‘ï¼Œé»˜è®¤å€¼æ˜¯ GET æ–¹æ³•ï¼Œå–å€¼å‚è€ƒï¼šorg.springframework.http.HttpMethodã€‚</li><li>seriesï¼šä¸€äº›åˆ—çš„çŠ¶æ€ç é…ç½®ï¼Œå–å€¼å‚è€ƒï¼šorg.springframework.http.HttpStatus.Seriesã€‚ç¬¦åˆçš„æŸæ®µçŠ¶æ€ç æ‰ä¼šè¿›è¡Œé‡è¯•é€»è¾‘ï¼Œé»˜è®¤å€¼æ˜¯ SERVER_ERRORï¼Œå€¼æ˜¯ 5ï¼Œä¹Ÿå°±æ˜¯ 5XX(5 å¼€å¤´çš„çŠ¶æ€ç )ï¼Œå…±æœ‰5ä¸ªå€¼ã€‚</li></ul><p>ä½¿ç”¨ä¸Šè¿°é…ç½®è¿›è¡Œæµ‹è¯•ï¼Œå½“åå°æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°è¯·æ±‚ä¸‰æ¬¡çš„æ—¥å¿—ï¼Œè¯æ˜æ­¤é…ç½®æœ‰æ•ˆã€‚</p><p><strong>07 Gateway é™æµæ“ä½œ</strong></p><p>Spring Cloud Gatewayæœ¬èº«é›†æˆäº†é™æµæ“ä½œï¼ŒGatewayé™æµéœ€è¦ä½¿ç”¨Redisï¼Œpomæ–‡ä»¶ä¸­æ·»åŠ Redisä¾èµ–ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-data-redis-reactive&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: rate_limit_route uri: lb://service-consumer predicates: - Path=/user/** filters: - name: RequestRateLimiter args: key-resolver: "#{@hostAddrKeyResolver}" redis-rate-limiter.replenishRate: 1 redis-rate-limiter.burstCapacity: 3 - StripPrefix=1consul: host: 127.0.0.1 port: 8500 discovery: service-name: service-gateway instance-id: service-gateway-233redis:host: localhostport: 6379</pre><p>åœ¨ä¸Šé¢çš„é…ç½®é—®ä»·ä¸­ï¼Œé…ç½®äº†Redisçš„ä¿¡æ¯ï¼Œå¹¶é…ç½®äº†RequestRateLimiterçš„é™æµè¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨éœ€è¦é…ç½®ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>BurstCapacityï¼šä»¤ç‰Œæ¡¶çš„æ€»å®¹é‡ã€‚</li><li>replenishRateï¼šä»¤ç‰Œé€šæ¯ç§’å¡«å……å¹³å‡é€Ÿç‡ã€‚</li><li>Key-resolverï¼šç”¨äºé™æµçš„è§£æå™¨çš„Beanå¯¹è±¡çš„åå­—ã€‚å®ƒä½¿ç”¨SpELè¡¨è¾¾å¼#{@beanName}ä»Springå®¹å™¨ä¸­è·å–beanå¯¹è±¡ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼šfilterä¸‹çš„nameå¿…é¡»æ˜¯RequestRateLimiterã€‚</p></blockquote><p>Key-resolverå‚æ•°åé¢çš„beanéœ€è¦è‡ªå·±å®ç°ï¼Œç„¶åæ³¨å…¥åˆ°Springå®¹å™¨ä¸­ã€‚KeyResolveréœ€è¦å®ç°resolveæ–¹æ³•ï¼Œæ¯”å¦‚æ ¹æ®ipè¿›è¡Œé™æµï¼Œåˆ™éœ€è¦ç”¨hostAddresså»åˆ¤æ–­ã€‚å®ç°å®ŒKeyResolverä¹‹åï¼Œéœ€è¦å°†è¿™ä¸ªç±»çš„Beanæ³¨å†Œåˆ°Iocå®¹å™¨ä¸­ã€‚è¿˜å¯ä»¥æ ¹æ®urié™æµï¼ŒåŒhostnameé™æµæ˜¯ä¸€æ ·çš„ã€‚ä¾‹å¦‚ä»¥ipé™æµä¸ºä¾‹ï¼Œåœ¨gatewayæ¨¡å—ä¸­æ·»åŠ ä»¥ä¸‹å®ç°ï¼š</p><pre>public class HostAddrKeyResolver implements KeyResolver {@Overridepublic Mono&lt;String&gt; resolve(ServerWebExchange exchange) { return Mono.just(exchange.getRequest().getRemoteAddress().getAddress().getHostAddress());}public HostAddrKeyResolver hostAddrKeyResolver() { return new HostAddrKeyResolver();}</pre><p>}</p><p>æŠŠè¯¥ç±»æ³¨å…¥åˆ°springå®¹å™¨ä¸­ï¼š</p><pre>@SpringBootApplication@EnableDiscoveryClientpublic class GatewayApplication {public static void main(String[] args) { SpringApplication.run(GatewayApplication.class, args);}@Beanpublic HostAddrKeyResolver hostAddrKeyResolver(){ return new HostAddrKeyResolver();}</pre><p>}</p><p>åŸºäºä¸Šè¿°é…ç½®ï¼Œå¯ä»¥å¯¹è¯·æ±‚åŸºäºipçš„è®¿é—®è¿›è¡Œé™æµã€‚</p><p><strong>08 è‡ªå®šä¹‰Gatewayfilter</strong></p><p>Spring Cloud Gatewayå†…ç½®äº†è¿‡æ»¤å™¨ï¼Œèƒ½å¤Ÿæ»¡è¶³å¾ˆå¤šåœºæ™¯çš„éœ€æ±‚ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€‚åœ¨Spring Cloud Gatewayè‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨éœ€è¦å®ç°GatewayFilterå’ŒOrderedè¿™ä¸¤ä¸ªæ¥å£ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å®ç°äº†Gatewayfilterï¼Œå®ƒå¯ä»¥ä»¥logæ—¥å¿—çš„å½¢å¼è®°å½•æ¯æ¬¡è¯·æ±‚è€—è´¹çš„æ—¶é—´ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><pre>public class RequestTimeFilter implements GatewayFilter, Ordered {private static final Log log = LogFactory.getLog(GatewayFilter.class);private static final String REQUEST_TIME_BEGIN = "requestTimeBegin";@Overridepublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) { exchange.getAttributes().put(REQUEST_TIME_BEGIN, System.currentTimeMillis()); return chain.filter(exchange).then( Mono.fromRunnable(() -&gt; { Long startTime = exchange.getAttribute(REQUEST_TIME_BEGIN); if (startTime != null) { log.info("è¯·æ±‚è·¯å¾„ï¼š"+exchange.getRequest().getURI().getRawPath() + "æ¶ˆè€—æ—¶é—´: " + (System.currentTimeMillis() - startTime) + "ms"); } }) );}@Overridepublic int getOrder() { return 0;}</pre><p>}</p><p>ä¸Šè¿°ä»£ç ä¸­å®šä¹‰äº†è‡ªå·±å®ç°çš„è¿‡æ»¤å™¨ã€‚Orderedçš„int getOrderï¼ˆï¼‰æ–¹æ³•æ˜¯æ¥ç»™è¿‡æ»¤å™¨å®šä¼˜å…ˆçº§çš„ï¼Œå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šä½ã€‚è¿˜æœ‰ä¸€ä¸ªfilter(ServerWebExchange exchange, GatewayFilterChain chain)æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå…ˆè®°å½•äº†è¯·æ±‚çš„å¼€å§‹æ—¶é—´ï¼Œå¹¶ä¿å­˜åœ¨ServerWebExchangeä¸­ï¼Œæ­¤å¤„æ˜¯ä¸€ä¸ªâ€œpreâ€ç±»å‹çš„è¿‡æ»¤å™¨ã€‚ç„¶åå†chain.filter()çš„å†…éƒ¨ç±»ä¸­çš„run()æ–¹æ³•ä¸­ç›¸å½“äº"post"è¿‡æ»¤å™¨ï¼Œåœ¨æ­¤å¤„æ‰“å°äº†è¯·æ±‚æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚</p><p>æ¥ä¸‹æ¥å°†è¯¥è¿‡æ»¤å™¨æ³¨å†Œåˆ°routerä¸­ï¼Œä»£ç å¦‚ä¸‹ã€‚</p><pre>@Beanpublic RouteLocator customerRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(r -&gt; r.path("/user/**") .filters(f -&gt; f.filter(new RequestTimeFilter()) .addResponseHeader("X-Response-Default-Foo", "Default-Bar")) .uri("http://localhost:8504/user/info") .order(0) .id("customer_filter_router") ) .build();</pre><p>}</p><p>é™¤äº†ä¸Šè¿°ä»£ç çš„æ–¹å¼é…ç½®æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨çš„æ–¹å¼ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨application.ymlæ–‡ä»¶ä¸­ç›´æ¥é…ç½®ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>å¯åŠ¨ç¨‹åºï¼Œé€šè¿‡curl http://localhost:8098/user/infoæ§åˆ¶å°ä¼šæ‰“å°å‡ºè¯·æ±‚æ¶ˆè€—æ—¶é—´ï¼Œæ—¥å¿—å¦‚ä¸‹ï¼š</p><pre>....2019-05-22 15:13:31.221 INFO 19780 --- [ctor-http-nio-4] o.s.cloud.gateway.filter.GatewayFilter : è¯·æ±‚è·¯å¾„ï¼š/user/infoæ¶ˆè€—æ—¶é—´: 54ms...2019-05-22 16:46:23.785 INFO 29928 --- [ctor-http-nio-1] o.s.cloud.gateway.filter.GatewayFilter : è¯·æ±‚è·¯å¾„ï¼š/user/info3æ¶ˆè€—æ—¶é—´: 5ms....</pre><p><strong>09 è‡ªå®šä¹‰GlobalFilter</strong></p><p>Spring Cloud Gatewayæ ¹æ®ä½œç”¨èŒƒå›´åˆ†ä¸ºGatewayFilterå’ŒGlobalFilterï¼ŒäºŒè€…åŒºåˆ«å¦‚ä¸‹ï¼š</p><p>GatewayFilter : éœ€è¦é€šè¿‡spring.cloud.routes.filters é…ç½®åœ¨å…·ä½“è·¯ç”±ä¸‹ï¼Œåªä½œç”¨åœ¨å½“å‰è·¯ç”±ä¸Šæˆ–é€šè¿‡spring.cloud.default-filtersé…ç½®åœ¨å…¨å±€ï¼Œä½œç”¨åœ¨æ‰€æœ‰è·¯ç”±ä¸Šã€‚</p><p>GlobalFilter:å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œä½œç”¨åœ¨æ‰€æœ‰çš„è·¯ç”±ä¸Šï¼Œæœ€ç»ˆé€šè¿‡GatewayFilterAdapteråŒ…è£…æˆGatewayFilterChainå¯è¯†åˆ«çš„è¿‡æ»¤å™¨ï¼Œå®ƒä¸ºè¯·æ±‚ä¸šåŠ¡ä»¥åŠè·¯ç”±çš„URIè½¬æ¢ä¸ºçœŸå®ä¸šåŠ¡æœåŠ¡çš„è¯·æ±‚åœ°å€çš„æ ¸å¿ƒè¿‡æ»¤å™¨ï¼Œä¸éœ€è¦é…ç½®ï¼Œç³»ç»Ÿåˆå§‹åŒ–æ—¶åŠ è½½ï¼Œå¹¶ä½œç”¨åœ¨æ¯ä¸ªè·¯ç”±ä¸Šã€‚</p><p>åœ¨ä¸Šä¸€å°èŠ‚ä¸­å®šä¹‰çš„æ˜¯Gatewayfilterï¼Œä¸‹é¢å®ç°çš„æ˜¯Globalfilterï¼š</p><pre>public class TokenFilter implements GlobalFilter, Ordered {Logger logger= LoggerFactory.getLogger( TokenFilter.class );@Overridepublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) { String token = exchange.getRequest().getQueryParams().getFirst("token"); if (token == null || token.isEmpty()) { logger.info( "token ä¸ºç©ºï¼Œæ— æ³•è¿›è¡Œè®¿é—®." ); exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED); return exchange.getResponse().setComplete(); } return chain.filter(exchange);}@Overridepublic int getOrder() { return 0;}</pre><p>}</p><p>ä¸Šè¿°ä»£ç å®ç°äº†Globalfilterï¼Œå…·ä½“é€»è¾‘æ˜¯åˆ¤æ–­è¯·æ±‚ä¸­æ˜¯å¦å«å‚æ•°tokenï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ ¡éªŒä¸é€šè¿‡ï¼Œå¯¹æ‰€æœ‰è¯·æ±‚éƒ½æœ‰æ•ˆã€‚å¦‚æœå«æœ‰tokenåˆ™è½¬å‘åˆ°å…·ä½“åç«¯æœåŠ¡ä¸Šï¼Œå¦‚æœæ²¡æœ‰åˆ™æ ¡éªŒä¸é€šè¿‡ã€‚</p><p>é€šè¿‡curl http://localhost:8098/user/infoè¿›è¡Œè®¿é—®ï¼Œå› ä¸ºè·¯å¾„ä¸­ä¸å«æœ‰å‚æ•°tokenï¼Œåˆ™æ— æ³•é€šè¿‡æ ¡éªŒï¼Œæ‰“å°æ—¥å¿—å¦‚ä¸‹ï¼š</p><pre>2019-05-22 15:27:11.078 INFO 5956 --- [ctor-http-nio-1] com.song.gateway.TokenFilter : token ä¸ºç©ºï¼Œæ— æ³•è¿›è¡Œè®¿é—®....</pre><p>é€šè¿‡curl http://localhost:8098/user/info?token=123è¿›è¡Œè®¿é—®æ—¶ï¼Œåˆ™å¯ä»¥è·å–åˆ°åç«¯æœåŠ¡è¿”å›ç»“æœã€‚</p><h1><strong>æœ€å</strong></h1><p>å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯ï¼Œè®°å¾—<strong>å…³æ³¨ã€è½¬å‘</strong>å“¦ï¼Œæˆ‘ä¼šä¸ºå¤§å®¶æŒç»­æä¾›åŸåˆ›å¹²è´§ã€‚éœ€è¦èµ„æ–™ï¼Œè¯·<strong>å…³æ³¨ã€è½¬å‘ï¼Œ</strong>ç§ä¿¡â€œèµ„æ–™â€é¢è¯•+å¾®æœåŠ¡+springbootèµ„æ–™å…è´¹èµ é€ã€‚</p><p><strong>åŸæ–‡ï¼šhttp://www.dockone.io/article/8900</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å¥½æ–‡','æ¨è','ç½‘å…³'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>