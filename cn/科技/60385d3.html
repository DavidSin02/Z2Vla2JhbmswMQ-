<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨ | æå®¢å¿«è¨Š</title><meta property="og:title" content="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/d853820995924ce0999a1591563a5636"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60385d3.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60385d3.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60385d3.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/60385d3.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br>æ¬¢è¿å…³æ³¨å…¬å·â€œJavaKeeper â€ï¼Œä¸€èµ·æˆé•¿ï¼Œåšç‰›é€¼é—ªé—ªçš„æŠ€æœ¯äºº</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d853820995924ce0999a1591563a5636><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>é—®é¢˜</h1><p>å‡è®¾æˆ‘ä»¬åœ¨åšä¸€å¥—è‚¡ç¥¨çœ‹ç›˜ç³»ç»Ÿï¼Œæ•°æ®æä¾›æ–¹ç»™æˆ‘ä»¬æä¾› XML æ ¼å¼æ•°æ®ï¼Œæˆ‘ä»¬è·å–æ•°æ®ç”¨æ¥æ˜¾ç¤ºï¼Œéšç€ç³»ç»Ÿçš„è¿­ä»£ï¼Œæˆ‘ä»¬è¦æ•´åˆä¸€äº›ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„å¯¹å¤–æ•°æ®ï¼Œä½†æ˜¯ä»–ä»¬åªæä¾›è·å– JSON æ ¼å¼çš„æ•°æ®æ¥å£ã€‚åœ¨ä¸æƒ³æ”¹å˜åŸæœ‰ä»£ç é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªã€Œé€‚é…å™¨ã€ã€‚è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œ èƒ½å¤Ÿè½¬æ¢å¯¹è±¡æ¥å£ï¼Œ ä½¿å…¶èƒ½ä¸å…¶ä»–å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚é€‚é…å™¨æ¨¡å¼é€šè¿‡å°è£…å¯¹è±¡å°†å¤æ‚çš„è½¬æ¢è¿‡ç¨‹éšè—äºå¹•åã€‚ è¢«å°è£…çš„å¯¹è±¡ç”šè‡³å¯Ÿè§‰ä¸åˆ°é€‚é…å™¨çš„å­˜åœ¨ã€‚</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b116559b8e3041b695f9e3b74449012d><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>çœŸå®ä¸–ç•Œç±»æ¯”</h1><p>é€‚é…å™¨æ˜¯ä»€ä¹ˆï¼Œä¸éš¾ç†è§£ï¼Œç”Ÿæ´»ä¸­ä¹Ÿéšå¤„å¯è§ã€‚æ¯”å¦‚ï¼Œç¬”è®°æœ¬ç”µè„‘çš„ç”µæºé€‚é…å™¨ã€ä¸‡èƒ½å……ï¼ˆæ›¾ç»çš„å®ƒçœŸæœ‰ä¸€ä¸ªè¿™ä¹ˆç‰›é€¼çš„åå­—ï¼‰ã€ä¸€æ‹–åæ•°æ®çº¿ç­‰ç­‰ã€‚</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3b3fdae6e0b04fad89b795c33bd23d7b><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>åŸºæœ¬ä»‹ç»</h1><ul><li>é€‚é…å™¨æ¨¡å¼å°†ä¸€ä¸ªç±»çš„æ¥å£ï¼Œè½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨è®©åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥åˆä½œæ— é—´ã€‚ä¹Ÿå¯ä»¥å«åŒ…è£…å™¨ï¼ˆWrapperï¼‰ã€‚</li><li><strong>é€‚é…å™¨æ¨¡å¼</strong>æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½ä½¿æ¥å£ä¸å…¼å®¹çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’åˆä½œã€‚</li><li>ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šç±»é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡é€‚é…å™¨æ¨¡å¼</li></ul><h1 class=pgc-h-arrow-right>å·¥ä½œåŸç†</h1><ul><li>é€‚é…å™¨æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦ä¸€ç§æ¥å£.è®©åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥å…¼å®¹</li><li>ä»ç”¨æˆ·çš„è§’åº¦çœ‹ä¸åˆ°è¢«é€‚é…è€…ï¼Œæ˜¯è§£è€¦çš„</li><li>ç”¨æˆ·è°ƒç”¨é€‚é…å™¨è½¬åŒ–å‡ºæ¥çš„ç›®æ ‡æ¥å£æ–¹æ³•ï¼Œé€‚é…å™¨å†è°ƒç”¨è¢«é€‚é…è€…çš„ç›¸å…³æ¥å£æ–¹æ³•</li><li>ç”¨æˆ·æ”¶åˆ°åé¦ˆç»“æœï¼Œæ„Ÿè§‰åªæ˜¯å’Œç›®æ ‡æ¥å£äº¤äº’</li></ul><h1 class=pgc-h-arrow-right>é€‚é…å™¨æ¨¡å¼ç»“æ„</h1><h1 class=pgc-h-arrow-right>å¯¹è±¡é€‚é…å™¨</h1><p>å®ç°æ—¶ä½¿ç”¨äº†æ„æˆåŸåˆ™ï¼š é€‚é…å™¨å®ç°äº†å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„æ¥å£ï¼Œ å¹¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå°è£…ã€‚ æ‰€æœ‰æµè¡Œçš„ç¼–ç¨‹è¯­è¨€éƒ½å¯ä»¥å®ç°é€‚é…å™¨ã€‚</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6b0d2c221cb6464d804e476a6c2cbfb8><p class=pgc-img-caption></p></div><p>é€‚é…å™¨è®¾è®¡æ¨¡å¼çš„ç»“æ„ï¼ˆå¯¹è±¡é€‚é…å™¨ï¼‰</p><ol start=1><li><strong>å®¢æˆ·ç«¯</strong> ï¼ˆClientï¼‰ æ˜¯åŒ…å«å½“å‰ç¨‹åºä¸šåŠ¡é€»è¾‘çš„ç±»ã€‚</li><li><strong>å®¢æˆ·ç«¯æ¥å£</strong> ï¼ˆTargetï¼‰ æè¿°äº†å…¶ä»–ç±»ä¸å®¢æˆ·ç«¯ä»£ç åˆä½œæ—¶å¿…é¡»éµå¾ªçš„åè®®ã€‚</li><li><strong>æœåŠ¡</strong> ï¼ˆServiceï¼‰ ä¸­æœ‰ä¸€äº›åŠŸèƒ½ç±» ï¼ˆé€šå¸¸æ¥è‡ªç¬¬ä¸‰æ–¹æˆ–é—ç•™ç³»ç»Ÿï¼‰ã€‚ å®¢æˆ·ç«¯ä¸å…¶æ¥å£ä¸å…¼å®¹ï¼Œ å› æ­¤æ— æ³•ç›´æ¥è°ƒç”¨å…¶åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å«é€‚é…è€…ç±»ï¼ˆAdapteeï¼‰ã€‚</li><li><strong>é€‚é…å™¨</strong> ï¼ˆAdapterï¼‰ æ˜¯ä¸€ä¸ªå¯ä»¥åŒæ—¶ä¸å®¢æˆ·ç«¯å’ŒæœåŠ¡äº¤äº’çš„ç±»ï¼š å®ƒåœ¨å®ç°å®¢æˆ·ç«¯æ¥å£çš„åŒæ—¶å°è£…äº†æœåŠ¡å¯¹è±¡ã€‚ é€‚é…å™¨æ¥å—å®¢æˆ·ç«¯é€šè¿‡é€‚é…å™¨æ¥å£å‘èµ·çš„è°ƒç”¨ï¼Œ å¹¶å°†å…¶è½¬æ¢ä¸ºé€‚ç”¨äºè¢«å°è£…æœåŠ¡å¯¹è±¡çš„è°ƒç”¨ã€‚</li><li><strong>å®¢æˆ·ç«¯ä»£ç åªéœ€é€šè¿‡æ¥å£ä¸é€‚é…å™¨äº¤äº’å³å¯ï¼Œ æ— éœ€ä¸å…·ä½“çš„é€‚é…å™¨ç±»è€¦åˆ</strong>ã€‚ å› æ­¤ï¼Œ ä½ å¯ä»¥å‘ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é€‚é…å™¨è€Œæ— éœ€ä¿®æ”¹å·²æœ‰ä»£ç ã€‚ è¿™åœ¨æœåŠ¡ç±»çš„æ¥å£è¢«æ›´æ”¹æˆ–æ›¿æ¢æ—¶å¾ˆæœ‰ç”¨ï¼š ä½ æ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç å°±å¯ä»¥åˆ›å»ºæ–°çš„é€‚é…å™¨ç±»ã€‚</li></ol><h1 class=pgc-h-arrow-right>Coding.</h1><ol start=1><li>å®šä¹‰å®¢æˆ·ç«¯ä½¿ç”¨çš„æ¥å£ï¼Œä¸ä¸šåŠ¡ç›¸å…³</li></ol><pre><code>publicÂ interfaceÂ TargetÂ {Â Â Â Â /*Â Â Â Â Â *Â å®¢æˆ·ç«¯è¯·æ±‚å¤„ç†çš„æ–¹æ³•Â Â Â Â Â */Â Â Â Â voidÂ request();}</code></pre><ol start=2><li>å·²ç»å­˜åœ¨çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦é…ç½®</li></ol><pre><code>public class Adaptee {    /*     * åŸæœ¬å­˜åœ¨çš„æ–¹æ³•     */    public void specificRequest(){    //ä¸šåŠ¡ä»£ç     }}</code></pre><ol start=3><li>é€‚é…å™¨ç±»</li></ol><pre><code>public class Adapter implements Target {    /*     * æŒæœ‰éœ€è¦è¢«é€‚é…çš„æ¥å£å¯¹è±¡     */    private Adaptee adaptee;    /*     * æ„é€ æ–¹æ³•ï¼Œä¼ å…¥éœ€è¦è¢«é€‚é…çš„å¯¹è±¡     * @param adaptee éœ€è¦è¢«é€‚é…çš„å¯¹è±¡     */    public Adapter(Adaptee adaptee) {        this.adaptee = adaptee;    }    @Override    public void request() {        // TODO Auto-generated method stub        adaptee.specificRequest();    }}</code></pre><ol start=4><li>ä½¿ç”¨é€‚é…å™¨çš„å®¢æˆ·ç«¯</li></ol><pre><code>publicÂ classÂ ClientÂ {Â Â Â Â publicÂ staticÂ voidÂ main(String[]Â args)Â {Â Â Â Â Â Â Â Â //åˆ›å»ºéœ€è¦è¢«é€‚é…çš„å¯¹è±¡Â Â Â Â Â Â Â Â AdapteeÂ adapteeÂ =Â newÂ Adaptee();Â Â Â Â Â Â Â Â //åˆ›å»ºå®¢æˆ·ç«¯éœ€è¦è°ƒç”¨çš„æ¥å£å¯¹è±¡Â Â Â Â Â Â Â Â TargetÂ targetÂ =Â newÂ Adapter(adaptee);Â Â Â Â Â Â Â Â //è¯·æ±‚å¤„ç†Â Â Â Â Â Â Â Â target.request();Â Â Â Â }}</code></pre><h1 class=pgc-h-arrow-right>ç±»é€‚é…å™¨</h1><p>è¿™ä¸€å®ç°ä½¿ç”¨äº†ç»§æ‰¿æœºåˆ¶ï¼š é€‚é…å™¨åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªå¯¹è±¡çš„æ¥å£ã€‚ è¯·æ³¨æ„ï¼Œ è¿™ç§æ–¹å¼ä»…èƒ½åœ¨æ”¯æŒå¤šé‡ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€ä¸­å®ç°ï¼Œä¾‹å¦‚ C++ï¼Œ Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œä¹Ÿå°±æ²¡æœ‰è¿™ç§é€‚é…å™¨äº†ã€‚</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5cbc192322c54e7bbbe5babe481af9cb><p class=pgc-img-caption></p></div><p>é€‚é…å™¨è®¾è®¡æ¨¡å¼ï¼ˆç±»é€‚é…å™¨ï¼‰<strong>ç±»é€‚é…å™¨</strong>ä¸éœ€è¦å°è£…ä»»ä½•å¯¹è±¡ï¼Œ å› ä¸ºå®ƒåŒæ—¶ç»§æ‰¿äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡çš„è¡Œä¸ºã€‚ é€‚é…åŠŸèƒ½åœ¨é‡å†™çš„æ–¹æ³•ä¸­å®Œæˆã€‚ æœ€åç”Ÿæˆçš„é€‚é…å™¨å¯æ›¿ä»£å·²æœ‰çš„å®¢æˆ·ç«¯ç±»è¿›è¡Œä½¿ç”¨ã€‚</p><h1 class=pgc-h-arrow-right>Coding</h1><p>Java è™½ç„¶ä¸èƒ½å®ç°æ ‡å‡†çš„ç±»é€‚é…å™¨ï¼Œä½†æ˜¯æœ‰ä¸€ç§å˜é€šçš„æ–¹å¼ï¼Œä¹Ÿèƒ½å¤Ÿä½¿ç”¨ç»§æ‰¿æ¥å®ç°æ¥å£çš„é€‚é…ï¼Œé‚£å°±æ˜¯è®©é€‚é…å™¨å»å®ç° Target çš„æ¥å£ï¼Œç„¶åç»§æ‰¿ Adaptee çš„å®ç°ï¼Œè™½ç„¶ä¸æ˜¯ååˆ†æ ‡å‡†ï¼Œä½†æ„æ€å·®ä¸å¤šã€‚</p><ol start=1><li>é¦–å…ˆæœ‰ä¸€ä¸ªå·²å­˜åœ¨çš„å°†è¢«é€‚é…çš„ç±»</li></ol><pre><code>publicÂ classÂ AdapteeÂ {Â Â Â Â publicÂ voidÂ adapteeRequest()Â {Â Â Â Â Â Â Â Â System.out.println("è¢«é€‚é…è€…çš„æ–¹æ³•");Â Â Â Â }}</code></pre><ol start=2><li>å®šä¹‰å®¢æˆ·ç«¯ä½¿ç”¨çš„æ¥å£ï¼Œä¸ä¸šåŠ¡ç›¸å…³</li></ol><pre><code>public interface Target {    void request();}</code></pre><ol start=3><li>æ€ä¹ˆæ‰å¯ä»¥åœ¨ç›®æ ‡æ¥å£ä¸­çš„ request() è°ƒç”¨ Adaptee çš„ adapteeRequest() æ–¹æ³•å‘¢ï¼Ÿç›´æ¥å®ç° Target è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªé€‚é…å™¨ç±»ï¼Œå®ç° Target æ¥å£ï¼ŒåŒæ—¶ç»§æ‰¿äº† Adaptee ç±»ï¼Œç„¶ååœ¨å®ç°çš„ request() æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„ adapteeRequest() å³å¯</li></ol><pre><code>public class Adapter extends Adaptee implements Target{    @Override    public void request() {        //...ä¸€äº›æ“ä½œ...        super.adapteeRequest();        //...ä¸€äº›æ“ä½œ...    }}</code></pre><ol start=4><li>ä½¿ç”¨é€‚é…å™¨çš„å®¢æˆ·ç«¯</li></ol><pre><code>publicÂ classÂ ClientÂ {Â Â Â Â publicÂ staticÂ voidÂ main(String[]Â args)Â {Â Â Â Â Â Â Â Â TargetÂ adapterTargetÂ =Â newÂ Adapter();Â Â Â Â Â Â Â Â adapterTarget.request();Â Â Â Â }}</code></pre><h1 class=pgc-h-arrow-right>é€‚é…å™¨æ¨¡å¼é€‚åˆåº”ç”¨åœºæ™¯</h1><ul><li>å½“ä½ å¸Œæœ›ä½¿ç”¨æŸä¸ªç±»ï¼Œ ä½†æ˜¯å…¶æ¥å£ä¸å…¶ä»–ä»£ç ä¸å…¼å®¹æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨é€‚é…å™¨ç±»ã€‚</li><li>é€‚é…å™¨æ¨¡å¼å…è®¸ä½ åˆ›å»ºä¸€ä¸ªä¸­é—´å±‚ç±»ï¼Œ å…¶å¯ä½œä¸ºä»£ç ä¸é—ç•™ç±»ã€ ç¬¬ä¸‰æ–¹ç±»æˆ–æä¾›æ€ªå¼‚æ¥å£çš„ç±»ä¹‹é—´çš„è½¬æ¢å™¨ã€‚</li><li>å¦‚æœæ‚¨éœ€è¦å¤ç”¨è¿™æ ·ä¸€äº›ç±»ï¼Œ ä»–ä»¬å¤„äºåŒä¸€ä¸ªç»§æ‰¿ä½“ç³»ï¼Œ å¹¶ä¸”ä»–ä»¬åˆæœ‰äº†é¢å¤–çš„ä¸€äº›å…±åŒçš„æ–¹æ³•ï¼Œ ä½†æ˜¯è¿™äº›å…±åŒçš„æ–¹æ³•ä¸æ˜¯æ‰€æœ‰åœ¨è¿™ä¸€ç»§æ‰¿ä½“ç³»ä¸­çš„å­ç±»æ‰€å…·æœ‰çš„å…±æ€§ã€‚</li><li>ä½ å¯ä»¥æ‰©å±•æ¯ä¸ªå­ç±»ï¼Œ å°†ç¼ºå°‘çš„åŠŸèƒ½æ·»åŠ åˆ°æ–°çš„å­ç±»ä¸­ã€‚ ä½†æ˜¯ï¼Œ ä½ å¿…é¡»åœ¨æ‰€æœ‰æ–°å­ç±»ä¸­é‡å¤æ·»åŠ è¿™äº›ä»£ç ï¼Œ è¿™æ ·ä¼šä½¿å¾—ä»£ç æœ‰åå‘³é“ã€‚å°†ç¼ºå¤±åŠŸèƒ½æ·»åŠ åˆ°ä¸€ä¸ªé€‚é…å™¨ç±»ä¸­æ˜¯ä¸€ç§ä¼˜é›…å¾—å¤šçš„è§£å†³æ–¹æ¡ˆã€‚ ç„¶åä½ å¯ä»¥å°†ç¼ºå°‘åŠŸèƒ½çš„å¯¹è±¡å°è£…åœ¨é€‚é…å™¨ä¸­ï¼Œ ä»è€ŒåŠ¨æ€åœ°è·å–æ‰€éœ€åŠŸèƒ½ã€‚ å¦‚è¦è¿™ä¸€ç‚¹æ­£å¸¸è¿ä½œï¼Œ ç›®æ ‡ç±»å¿…é¡»è¦æœ‰é€šç”¨æ¥å£ï¼Œ é€‚é…å™¨çš„æˆå‘˜å˜é‡åº”å½“éµå¾ªè¯¥é€šç”¨æ¥å£ã€‚ è¿™ç§æ–¹å¼åŒè£…é¥°æ¨¡å¼éå¸¸ç›¸ä¼¼ã€‚</li></ul><h1 class=pgc-h-arrow-right>demo</h1><p>ç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­çš„å……ç”µå™¨çš„ä¾‹å­æ¥è®²è§£ä¸‹é€‚é…å™¨ï¼Œæˆ‘å›½æ°‘ç”¨ç”µéƒ½æ˜¯ 220Vï¼Œè€Œæˆ‘ä»¬çš„æ‰‹æœºå……ç”µä¸€èˆ¬éœ€è¦ 5Vã€‚220V çš„äº¤æµç”µç›¸å½“äºè¢«é€‚é…è€… Adapteeï¼Œæˆ‘ä»¬çš„ç›®æ ‡ Target æ˜¯ 5V ç›´æµç”µï¼Œå……ç”µå™¨æœ¬èº«ç›¸å½“äºä¸€ä¸ª Adapterï¼Œå°†220V çš„è¾“å…¥ç”µå‹å˜æ¢ä¸º 5V è¾“å‡ºã€‚</p><pre><code>é¦–å…ˆæ˜¯æˆ‘ä»¬çš„åç”¨ç”µï¼ˆæˆ‘å›½æ˜¯ 220Vï¼Œå½“ç„¶è¿˜å¯ä»¥æœ‰å…¶ä»–å›½å®¶çš„å…¶ä»–å‡†å¤‡ï¼Œå¯éšæ—¶æ‰©å±•ï¼‰public class Volatage220V {    public final int output = 220;    public int output220v() {        System.out.println("è¾“å‡ºç”µå‹ " + output);        return output;    }}é€‚é…æ¥å£public interface IVoltage5V {     int output5V();}æˆ‘ä»¬çš„æ‰‹æœºå……ç”µï¼Œåªæ”¯æŒ 5V ç”µå‹public class Phone {    public void charging(IVoltage5V v) {        if (v.output5V() == 5) {            System.out.println("ç”µå‹ 5V ï¼Œç¬¦åˆå……ç”µæ ‡å‡†ï¼Œå¼€å§‹å……ç”µ");        } else {            System.out.println("ç”µå‹ä¸ç¬¦åˆæ ‡å‡†ï¼Œæ— æ³•å……ç”µ");        }    }}é€‚é…å™¨public class VoltageAdapter implements IVoltage5V {    private Volatage220V volatage220V;  //èšåˆ    public VoltageAdapter(Volatage220V v) {        this.volatage220V = v;    }    @Override    public int output5V() {        int dst = 0;        if (null != volatage220V) {            int src = volatage220V.output220v();            System.out.println("é€‚é…å™¨å·¥ä½œ~~~~~");            dst = src / 44;            System.out.println("é€‚é…å™¨å·¥ä½œå®Œæˆï¼Œè¾“å‡ºç”µå‹" + dst);        }        return dst;    }}å·¥ä½œï¼Œå¦‚æœå»å›½å¤–æ—…æ¸¸ï¼Œæœ‰ä¸åŒçš„ç”µå‹ï¼Œåªéœ€è¦æ‰©å±•é€‚é…å™¨å³å¯ã€‚public class Client {    public static void main(String[] args) {        Phone phone = new Phone();        phone.charging(new VoltageAdapter(new Volatage220V()));    }}</code></pre><h1 class=pgc-h-arrow-right>é€‚é…å™¨æ¨¡å¼ä¼˜ç¼ºç‚¹</h1><ul><li>å•ä¸€èŒè´£åŸåˆ™ï¼Œä½ å¯ä»¥å°†æ¥å£æˆ–æ•°æ®è½¬æ¢ä»£ç ä»ç¨‹åºä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ã€‚</li><li>å¼€é—­åŸåˆ™ã€‚ åªè¦å®¢æˆ·ç«¯ä»£ç é€šè¿‡å®¢æˆ·ç«¯æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ï¼Œ ä½ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é€‚é…å™¨ã€‚</li><li>ä»£ç æ•´ä½“å¤æ‚åº¦å¢åŠ ï¼Œ å› ä¸ºä½ éœ€è¦æ–°å¢ä¸€ç³»åˆ—æ¥å£å’Œç±»ã€‚ æœ‰æ—¶ç›´æ¥æ›´æ”¹æœåŠ¡ç±»ä½¿å…¶ä¸å…¶ä»–ä»£ç å…¼å®¹ä¼šæ›´ç®€å•ã€‚</li></ul><h1 class=pgc-h-arrow-right>Spring ä¸­çš„é€‚é…å™¨</h1><p>Spring æºç ä¸­æœå…³é”®å­—Adapter ä¼šå‡ºç°å¾ˆå¤šå®ç°ç±»ï¼ŒSpringMVC ä¸­çš„ HandlerAdapter ï¼Œå°±æ˜¯é€‚é…å™¨çš„åº”ç”¨ã€‚æˆ‘ä»¬å…ˆå›é¡¾ä¸‹ SpringMVC å¤„ç†æµç¨‹ï¼š</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a846ff272be748f69cb94516c86eb90e><p class=pgc-img-caption></p></div><p>qsli.github.ioSpring MVCä¸­çš„é€‚é…å™¨æ¨¡å¼ä¸»è¦ç”¨äºæ‰§è¡Œç›®æ ‡ Controller ä¸­çš„è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚åœ¨Spring MVCä¸­ï¼ŒDispatcherServlet ä½œä¸ºç”¨æˆ·ï¼ŒHandlerAdapter ä½œä¸ºæœŸæœ›æ¥å£ï¼Œå…·ä½“çš„é€‚é…å™¨å®ç°ç±»ç”¨äºå¯¹ç›®æ ‡ç±»è¿›è¡Œé€‚é…ï¼ŒController ä½œä¸ºéœ€è¦é€‚é…çš„ç±»ã€‚ä¸ºä»€ä¹ˆè¦åœ¨ Spring MVC ä¸­ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼ŸSpring MVC ä¸­çš„ Controller ç§ç±»ä¼—å¤šï¼Œä¸åŒç±»å‹çš„ Controller é€šè¿‡ä¸åŒçš„æ–¹æ³•æ¥å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚å¦‚æœä¸åˆ©ç”¨é€‚é…å™¨æ¨¡å¼çš„è¯ï¼ŒDispatcherServlet ç›´æ¥è·å–å¯¹åº”ç±»å‹çš„ Controllerï¼Œéœ€è¦çš„è‡ªè¡Œæ¥åˆ¤æ–­ï¼Œåƒä¸‹é¢è¿™æ®µä»£ç ä¸€æ ·ï¼š</p><pre><code>if(mappedHandler.getHandler()Â instanceofÂ MultiActionController){Â Â Â Â Â ((MultiActionController)mappedHandler.getHandler()).xxxÂ Â }elseÂ if(mappedHandler.getHandler()Â instanceofÂ XXX){Â Â Â Â Â Â ...Â Â }elseÂ if(...){Â Â Â Â Â ...Â Â }Â Â </code></pre><p>è¿™æ ·å‡è®¾å¦‚æœæˆ‘ä»¬å¢åŠ ä¸€ä¸ª Controllerï¼Œå°±è¦åœ¨ä»£ç ä¸­åŠ å…¥ä¸€è¡Œ if è¯­å¥ï¼Œè¿™ç§å½¢å¼å°±ä½¿å¾—ç¨‹åºéš¾ä»¥ç»´æŠ¤ï¼Œä¹Ÿè¿åäº†è®¾è®¡æ¨¡å¼ä¸­çš„å¼€é—­åŸåˆ™ â€“ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚æˆ‘ä»¬é€šè¿‡æºç çœ‹çœ‹ SpringMVC æ˜¯å¦‚ä½•å®ç°çš„ï¼Œé¦–å…ˆçœ‹ä¸‹æ ¸å¿ƒç±» DispatcherServletï¼š</p><pre><code>publicÂ classÂ DispatcherServletÂ extendsÂ FrameworkServletÂ {Â Â Â //......Â Â //ç»´æŠ¤æ‰€æœ‰HandlerAdapterç±»çš„é›†åˆÂ Â Â Â @NullableÂ Â Â Â privateÂ List&lt;HandlerAdapter&gt;Â handlerAdapters;Â Â Â Â //åˆå§‹åŒ–handlerAdaptersÂ Â Â Â privateÂ voidÂ initHandlerAdapters(ApplicationContextÂ context)Â {Â Â Â Â Â Â Â Â this.handlerAdaptersÂ =Â null;Â Â Â Â Â Â Â Â ifÂ (this.detectAllHandlerAdapters)Â {Â Â Â Â Â Â Â Â Â Â Â Â Map&lt;String,Â HandlerAdapter&gt;Â matchingBeansÂ =Â BeanFactoryUtils.beansOfTypeIncludingAncestors(context,Â HandlerAdapter.class,Â true,Â false);Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (!matchingBeans.isEmpty())Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â this.handlerAdaptersÂ =Â newÂ ArrayList(matchingBeans.values());Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AnnotationAwareOrderComparator.sort(this.handlerAdapters);Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â }Â elseÂ {Â Â Â Â Â Â Â Â Â Â Â Â tryÂ {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HandlerAdapterÂ haÂ =Â (HandlerAdapter)context.getBean("handlerAdapter",Â HandlerAdapter.class);Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â this.handlerAdaptersÂ =Â Collections.singletonList(ha);Â Â Â Â Â Â Â Â Â Â Â Â }Â catchÂ (NoSuchBeanDefinitionExceptionÂ var3)Â {Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â ifÂ (this.handlerAdaptersÂ ==Â null)Â {Â Â Â Â Â Â Â Â Â Â Â Â this.handlerAdaptersÂ =Â this.getDefaultStrategies(context,Â HandlerAdapter.class);Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (this.logger.isTraceEnabled())Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â this.logger.trace("NoÂ HandlerAdaptersÂ declaredÂ forÂ servletÂ '"Â +Â this.getServletName()Â +Â "':Â usingÂ defaultÂ strategiesÂ fromÂ DispatcherServlet.properties");Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â }Â Â Â Â }Â Â Â Â //dispatchÂ æ–¹æ³•ä¸­ä¼šè·å–Â HandlerAdapterÂ Â protectedÂ voidÂ doDispatch(HttpServletRequestÂ request,Â HttpServletResponseÂ response)Â throwsÂ ExceptionÂ {Â Â Â Â Â Â Â Â //...Â Â Â Â Â Â Â Â //è·å¾—controllerå¯¹åº”çš„é€‚é…å™¨Â Â Â Â Â Â Â Â HandlerAdapterÂ haÂ =Â this.getHandlerAdapter(mappedHandler.getHandler());Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //è°ƒç”¨é€‚é…å™¨çš„handleræ–¹æ³•å¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å›ModelAndViewÂ Â Â Â Â Â Â Â mvÂ =Â ha.handle(processedRequest,Â response,Â mappedHandler.getHandler());Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //...Â Â Â Â }Â Â Â Â Â //è¿”å›å¯¹åº”çš„controllerçš„å¤„ç†å™¨Â Â Â Â Â Â protectedÂ HandlerAdapterÂ getHandlerAdapter(ObjectÂ handler)Â throwsÂ ServletExceptionÂ {Â Â Â Â Â Â Â Â ifÂ (this.handlerAdaptersÂ !=Â null)Â {Â Â Â Â Â Â Â Â Â Â Â Â IteratorÂ var2Â =Â this.handlerAdapters.iterator();Â Â Â Â Â Â Â Â Â Â Â Â while(var2.hasNext())Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HandlerAdapterÂ adapterÂ =Â (HandlerAdapter)var2.next();Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (adapter.supports(handler))Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â returnÂ adapter;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â }Â Â Â Â }</code></pre><p>æ¥ç€çœ‹ä¸‹ HandlerAdapter çš„æºç ï¼Œä¹Ÿå°±æ˜¯é€‚é…å™¨æ¥å£:</p><pre><code>publicÂ interfaceÂ HandlerAdapterÂ {Â Â Â Â booleanÂ supports(ObjectÂ var1);Â Â Â Â @NullableÂ Â Â Â ModelAndViewÂ handle(HttpServletRequestÂ var1,Â HttpServletResponseÂ var2,Â ObjectÂ var3)Â throwsÂ Exception;Â Â Â Â longÂ getLastModified(HttpServletRequestÂ var1,Â ObjectÂ var2);}</code></pre><p>å†æ¥å±¡ä¸€ä¸‹è¿™ä¸ªæµç¨‹ï¼š</p><ol start=1><li>é¦–å…ˆæ˜¯é€‚é…å™¨æ¥å£ DispatchServlet ä¸­æœ‰ä¸€ä¸ªé›†åˆç»´æŠ¤æ‰€æœ‰çš„ HandlerAdapterï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰å¯¹é€‚é…å™¨è¿›è¡Œé…ç½®ï¼Œé‚£ä¹ˆ DispatchServlet ä¼šåœ¨åˆ›å»ºæ—¶å¯¹è¯¥å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæ³¨å†Œæ‰€æœ‰é»˜è®¤çš„ HandlerAdapterã€‚</li><li>å½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥æ—¶ï¼ŒDispatchServlet ä¼šæ ¹æ®ä¼ è¿‡æ¥çš„ handler ç±»å‹ä»è¯¥é›†åˆä¸­å¯»æ‰¾å¯¹åº”çš„ HandlerAdapterå­ç±»è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”è°ƒç”¨å®ƒçš„ handler() æ–¹æ³•</li><li>å¯¹åº”çš„ HandlerAdapter ä¸­çš„ handler() æ–¹æ³•åˆä¼šæ‰§è¡Œå¯¹åº” Controller çš„ handleRequest() æ–¹æ³•</li></ol><p>é€‚é…å™¨ä¸ handler æœ‰å¯¹åº”å…³ç³»ï¼Œè€Œå„ä¸ªé€‚é…å™¨åˆéƒ½æ˜¯é€‚é…å™¨æ¥å£çš„å®ç°ç±»ï¼Œå› æ­¤ï¼Œå®ƒä»¬éƒ½éµå¾ªç›¸åŒçš„é€‚é…å™¨æ ‡å‡†ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥æŒ‰ç…§ç›¸åŒçš„æ–¹å¼ï¼Œé€šè¿‡ä¸åŒçš„ handler å»å¤„ç†è¯·æ±‚ã€‚ å½“ç„¶äº†ï¼ŒSpring æ¡†æ¶ä¸­ä¹Ÿä¸ºæˆ‘ä»¬å®šä¹‰äº†ä¸€äº›é»˜è®¤çš„ Handler å¯¹åº”çš„é€‚é…å™¨ã€‚</p><div class=pgc-img><img alt="éšé‡è€Œå®‰çš„é€‚é…å™¨æ¨¡å¼ | Spring ä¸­çš„é€‚é…å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3f8e20ab5f6040eabc7c3a76a80f9231><p class=pgc-img-caption></p></div><p>é€šè¿‡é€‚é…å™¨æ¨¡å¼æˆ‘ä»¬å°†æ‰€æœ‰çš„ controller ç»Ÿä¸€äº¤ç»™ HandlerAdapter å¤„ç†ï¼Œå…å»äº†å†™å¤§é‡çš„ if-else è¯­å¥å¯¹ Controller è¿›è¡Œåˆ¤æ–­ï¼Œä¹Ÿæ›´åˆ©äºæ‰©å±•æ–°çš„ Controller ç±»å‹ã€‚</p><h1 class=pgc-h-arrow-right>å‚è€ƒä¸æ„Ÿè°¢</h1><ul><li>ã€Šå›¾è§£ Java è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹</li><li>https://refactoringguru.cn/design-patterns/</li><li>https://blog.csdn.net/lu__peng/article/details/79117894</li><li>https://juejin.im/post/5ba28986f265da0abc2b6084#heading-12</li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é…å™¨','éšé‡','è€Œå®‰'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>