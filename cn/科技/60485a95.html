<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>正规表示法与文件格式化处理（文中有福利哦） | 极客快訊</title><meta property="og:title" content="正规表示法与文件格式化处理（文中有福利哦） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/401700018e0f2c434cfd"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60485a95.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/60485a95.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/60485a95.html><meta property="article:published_time" content="2020-11-14T21:00:59+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:59+08:00"><meta name=Keywords content><meta name=description content="正规表示法与文件格式化处理（文中有福利哦）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/60485a95.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>正规表示法与文件格式化处理（文中有福利哦）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>首先给大家一点福利，私信我，你想看的电影，比如“十万个冷笑话”“天才枪手”等，将会获得高清资源！</h1><h1>正规表示法与文件格式化处理</h1><p><img alt=正规表示法与文件格式化处理（文中有福利哦） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/401700018e0f2c434cfd></p><ul class=list-paddingleft-2><li><p>正规表示法就是处理字串的方法，他是以行为单位来进行字串的处理行为；</p></li><li><p>正规表示法透过一些特殊符号的辅助，可以让使用者轻易的达到『搜寻/删除/取代』某特定字串的处理程序；</p></li><li><p>只要工具程序支持正规表示法，那么该工具程序就可以用来作为正规表示法的字串处理之用；</p></li><li><p>正规表示法与万用字节是完全不一样的东西！万用字节 (wildcard) 代表的是 bash 操作介面的一个功能， 但正规表示法则是一种字串处理的表示方式！</p></li><li><p>使用 grep 或其他工具进行正规表示法的字串比对时，因为编码的问题会有不同的状态，因此， 你最好将 LANG 等变量配置为 C 或者是 en 等英文语系！</p></li><li><p>grep 与 egrep 在正规表示法里面是很常见的两支程序，其中， egrep 支持更严谨的正规表示法的语法；</p></li><li><p>由于编码系统的不同，不同的语系 (LANG) 会造成正规表示法撷取数据的差异。因此可利用特殊符号如 [:upper:] 来替代编码范围较佳；</p></li><li><p>由于严谨度的不同，正规表示法之上还有更严谨的延伸正规表示法；</p></li><li><p>基础正规表示法的特殊字符有： *, ?, [], [-], [^], ^, $ 等！</p></li><li><p>常见的正规表示法工具有： grep , sed, vim 等等</p></li><li><p>printf 可以透过一些特殊符号来将数据进行格式化输出；</p></li><li><p>awk 可以使用『栏位』为依据，进行数据的重新整理与输出；</p></li><li><p>文件的比对中，可利用 diff 及 cmp 进行比对，其中 diff 主要用在纯文字文件方面的新旧版本比对</p></li><li><p>patch 命令可以将旧版数据升级到新版 (主要亦由 diff 创建 patch 的补丁来源文件)</p></li></ul><h1>情景模拟<br></h1><ul class=list-paddingleft-2><li><p>情境模拟题一：透过 grep 搜寻特殊字串，并配合数据流重导向来处理大量的文件搜寻问题。</p><p>我们简单的以搜寻星号 (*) 来处理底下的任务：</p></li><li><p>目标：正确的使用正规表示法；</p></li><li><p>前提：需要了解数据流重导向，以及透过子命令 $(command) 来处理档名的搜寻；</p></li></ul><ol class=list-paddingleft-2><li><p>先用 find 去找出文件；</p></li><li><p>用 xargs 将这些文件每次丢 10 个给 grep 来作为参数处理；</p></li><li><p>grep 实际开始搜寻文件内容。</p></li></ol><ol class=list-paddingleft-2><li><p>利用正规表示法找出系统中含有某些特殊关键字的文件，举例来说，找出在 /etc 底下含有星号 (*) 的文件与内容：</p><p>解决的方法必须要搭配万用字节，但是星号本身就是正规表示法的字符，因此需要如此进行：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# grep '\*' /etc/*</pre></td></tr></tbody></table><p>你必须要注意的是，在单引号内的星号是正规表示法的字符，但我们要找的是星号，因此需要加上跳脱字符 (\)。但是在 /etc/* 的那个 * 则是 bash 的万用字节！ 代表的是文件的档名喔！不过由上述的这个结果中，我们仅能找到 /etc 底下第一层子目录的数据，无法找到次目录的数据， 如果想要连同完整的 /etc 次目录数据，就得要这样做：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# grep '\*' $(find /etc -type f)</pre></td></tr></tbody></table></li><li><p>但如果文件数量太多呢？如同上述的案例，如果要找的是全系统 (/) 呢？你可以这样做：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# grep '\*' $(find / -type f)-bash: /bin/grep: Argument list too long</pre></td></tr></tbody></table><p>真要命！由于命令列的内容长度是有限制的，因此当搜寻的对象是整个系统时，上述的命令会发生错误。那该如何是好？ 此时我们可以透过管线命令以及 xargs 来处理。举例来说，让 grep 每次仅能处理 10 个档名，此时你可以这样想：</p><p>所以整个作法就会变成这样：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# find / -type f | xargs -n 10 grep '\*'</pre></td></tr></tbody></table></li><li><p>从输出的结果来看，数据量实在非常庞大！那如果我只是想要知道档名而已呢？你可以透过 grep 的功能来找到如下的参数！</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# find / -type f | xargs -n 10 grep -l '\*'</pre></td></tr></tbody></table></li></ol><ul class=list-paddingleft-2><li><p>情境模拟题二：使用管线命令配合正规表示法创建新命令与新变量。我想要创建一个新的命令名为 myip ， 这个命令能够将我系统的 IP 捉出来显示。而我想要有个新变量，变量名为 MYIP ，这个变量可以记录我的 IP 。</p><p>处理的方式很简单，我们可以这样试看看：</p></li></ul><p><img alt=正规表示法与文件格式化处理（文中有福利哦） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/40180001b3d47dde697d></p><ol class=list-paddingleft-2><li><p>首先，我们依据本章内的 ifconfig, sed 与 awk 来取得我们的 IP ，命令为：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# ifconfig eth0 | grep 'inet addr' | \&gt; sed 's/^.*inet addr://g'| cut -d ' ' -f1</pre></td></tr></tbody></table></li><li><p>再来，我们可以将此命令利用 alias 指定为 myip 喔！如下所示：</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# alias myip="ifconfig eth0 | grep 'inet addr' | \&gt; sed 's/^.*inet addr://g'| cut -d ' ' -f1 "</pre></td></tr></tbody></table></li><li><p>最终，我们可以透过变量配置来处理 MYIP 喔！</p><table><tbody><tr class=firstRow><td><pre>[root@www ~]# MYIP=$( myip )</pre></td></tr></tbody></table></li><li><p>如果每次登陆都要生效，可以将 alias 与 MYIP 的配置那两行，写入你的 ~/.bashrc 即可！</p></li></ol><p>最后给大家一点福利，私信我你想看的电影，比如“十万个冷笑话”“天才枪手”，将会获得高清资源！</p><p><img alt=正规表示法与文件格式化处理（文中有福利哦） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/40160001b68f99faf638></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'正规','处理','表示法'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>