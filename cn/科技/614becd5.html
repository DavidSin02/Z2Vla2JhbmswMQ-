<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>服务器安装网站教程「网站三件套——LNMP」 | 极客快訊</title><meta property="og:title" content="服务器安装网站教程「网站三件套——LNMP」 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/4c7b778f1e284e98825354694986f6c4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/614becd5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/614becd5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/614becd5.html><meta property="article:published_time" content="2020-11-14T21:08:29+08:00"><meta property="article:modified_time" content="2020-11-14T21:08:29+08:00"><meta name=Keywords content><meta name=description content="服务器安装网站教程「网站三件套——LNMP」"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/614becd5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>服务器安装网站教程「网站三件套——LNMP」</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>本文是说购买了VPS或云主机之后，使用LNMP建站方法。</p><p>具体购买云主机的流程可以看[ <a class=pgc-link data-content=mp href="https://www.toutiao.com/i6811104414296703496/?group_id=6811104414296703496" rel="noopener noreferrer" target=_blank>阿里云域名注册与备案、服务器ECS购买与登录使用</a>]。其中[阿里云服务器ECS官网链接如下] (https://www.aliyun.com/minisite/goods?userCode=yos4xyvp)</p><p><br></p><p>简单说说建网站相关的事情</p><ol start=0><li>比较久远的时候，以前都是在Linux环境下，在黑洞洞的命令行窗口，安装建立网站常用的软件。建立网站肯定离不开三件套嘛——http服务器、数据库、服务器运行语言（俗称后台）。</li><li>安装这三件套有各种各样的组合。后来逐步形成LAMP（Linux+Apache+MySQL+PHP）和LNMP（Linux+Nginx+MySQL+PHP）几个组合嘛。</li><li>这三件套一个个安装需要逐个输入命令，还有软件版本对应和依赖问题，以及权限及相关配置，很麻烦。后来就有人就编写了LAMP或者LNMP一键安装命令脚本。</li></ol><h3 class="md-end-block md-heading md-focus">SSH登录VPS：</h3><p>SSH登录使用putty软件。</p><p>在登录VPS之前，设置putty的keep alive时间，就是心跳时间，意思是每隔多久发送一下报文，来保持putty软件和VPS通信，免得超时断开。</p><p>在putty -> Connection -> Seconds between keepalives ( 0 to turn off )，默认为0，改为60。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/4c7b778f1e284e98825354694986f6c4><p class=pgc-img-caption></p></div><p>使用putty客户端进行远程登录。其中IP地址是VPS地址，SSH端口是VPS端口（注意不一定是默认的22端口，每个VPS不一样）。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/87ae435f49144ff4919c94b2d614137e><p class=pgc-img-caption></p></div><p><br></p><p>连接后，跳出对话框，因为是首次登录，提醒没有缓存秘钥，点击是。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5d65a99535e24463a7cddd05d8425283><p class=pgc-img-caption></p></div><p>使用SSH登录后，进入命令行界面，输入root账号及密码（密码见前面安装操作系统时候那一串不规则字符）。输入密码过程中是没有光标及**星号显示的，这是linux的传统。输入完之后敲击回车登录成功。#标志表示root账号登录。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e279ebaa37494dbb9b36a853713bbdc3><p class=pgc-img-caption></p></div><p>修改密码 。因为原本root密码太复杂难记，修改一下比较方便，如果不想修改那就跳过吧。在命令行输入命令passwd,输入新密码。因为输入的密码比较弱，linux提出了提醒，可以不管它，继续输入第二遍确认密码。</p><p><br></p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/eb9686d7731e4d3388558347df37a89c><p class=pgc-img-caption></p></div><p><br></p><h3 class="md-end-block md-heading md-focus">改断开连接时间：</h3><p>因为SSH登录后如果长时间不操作会断开。但是系统默认断开连接时间太短，因此进行修改。如果不想改也可以跳过。</p><p>修改需要用到vim编辑器，首先安装vim。输入命令 yum install vim，等待安装成功。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/018e68e736614e5faa09aa88a9246300><p class=pgc-img-caption></p></div><p>输入命令vim /etc/profile</p><p>进入了vim界面，在最后一行添加 TMOUT=18000。(即断开时间时间为18000)</p><p>在这里简单介绍vim使用方法——</p><ol start=0><li>按insert键进入编辑模式，左下角会显示insert模式。</li><li>移动光标到最后一行添加TMOUT=18000，跟平常文本编辑一样。</li><li>编辑完毕按esc键退出编辑模式。</li><li>按:键进入命令模式，左下角会显示:符号即命令模式。</li><li>输入wq保存退出.</li></ol><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cf01ea4c81274d11abbe18b5e41d30bc><p class=pgc-img-caption></p></div><h3 class="md-end-block md-heading md-focus">使用WinScp进行SFTP文件传输。</h3><p>SFTP 是 Secure File Transfer Protocol 的缩写，安全文件传送协议，可以为传输文件提供一种安全的网络的加密方法。SFTP与 FTP 有着几乎一样的语法和功能。</p><p>SFTP 是 SSH 的一部分，在 SSH 软件包中，已经包含了一个叫作 SFTP 的安全文件信息传输子系统， 同样是使用加密传输认证信息和传输的数据.简而言之，SFTP 不需要在 VPS 上额外安装任何东西，我们购买 VPS 后就能直接使用 SFTP 进行文件传输，非常方便，所以这里介绍基于 SFTP 协议的文件传输方法。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ba4f6f65ee314262b327fd6536029a55><p class=pgc-img-caption></p></div><p><br></p><h3 class="md-end-block md-heading md-focus">安装screen命令。</h3><p>因为安装LNMP时间较长，所以用screen命令操作不会中断。</p><p>需要先安装screen命令，命令行输入yum install screen</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/abd03ef0b0054c7293b49589fed23699><p class=pgc-img-caption></p></div><p>新建lnmp会话，发现putty软件左上角已经变为[screen 0: bash]，即已经切换至screen会话了。</p><pre><code>screen -S lnmp</code></pre><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4c5532f169f74a43b7a123cd70143c3a><p class=pgc-img-caption></p></div><p><br></p><h3 class="md-end-block md-heading md-focus">搭建LNMP环境</h3><pre><code>wget -c ftp://soft.vpser.net/lnmp/lnmp1.3-full.tar.gz &amp;&amp; tar zxf lnmp1.3-full.tar.gz &amp;&amp; cd lnmp1.3-full &amp;&amp; ./install.sh lamp</code></pre><p><br></p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/406263c29e6042ed9503bfe9a24fe739><p class=pgc-img-caption></p></div><p>安装过程中需要输入密码、选择相应版本、输入通知邮箱。全都按默认处理。</p><p>出现这个说明安装结束</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/646f7ee01ef046cb9a94da7a7608cf7a><p class=pgc-img-caption></p></div><p>打开浏览器访问主机IP，出现这个则说明成功安装</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a2b8743994de4502b05039698906228e><p class=pgc-img-caption></p></div><h3 class="md-end-block md-heading md-focus">建议安装PHP缓存加速类扩展</h3><p>在安装wordpress前，推荐安装两个：OPcache和Memcached。</p><p>首先，需要进入LNMP解压目录lnmp1.3-full：</p><pre><code>cd /root/lnmp1.3-full</code></pre><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e11ee5cbc19a41959e7afdeb20c77f33><p class=pgc-img-caption></p></div><p>回车，接下来安装Opcache：</p><pre><code>./addons.sh install opcache</code></pre><p>回车，再回车。</p><p>当出现 Opcache installed successfully, enjoy it! 字样时，即表示安装成功。</p><p>接着安装Memcached：</p><pre><code>./addons.sh install memcached</code></pre><p>回车，选择2，回车，再回车。</p><p>当出现 “Memcached installed successfully, enjoy it!” 字样时，即表示安装成功。</p><p>安装好扩展包后，我们看到lnmp有哪些命令。有Nginx、mysql、mariadb、pureftpd、httpd进程的操作。</p><p>其中，Vhost是域名管理、Database是数据库管理。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a027856e28e440eba712b16dc4e3b5bd><p class=pgc-img-caption></p></div><p><br></p><h3 class="md-end-block md-heading md-focus">添加域名 、</h3><p>lnmp vhost add</p><p>回车，提示输入域名：XX.com(如果没有则输入IP地址)</p><p>回车，提示是否添加多个域名，输入y继续绑定绑定带www的域名www.XX.com.</p><p>回车，显示网站目录。默认 /home/wwwroot/XX.com 即可。注意：若是绑定二级域名，必须手动输入完整的目录路径。例如：将tools.XX.com绑定到网站根目录下的tools文件夹，则应输入：/home/wwwroot/XX.com/tools</p><p>回车，选择是否日志记录，默认跳过即可。</p><p>会车后，输入网站管理者邮箱。</p><h3 class="md-end-block md-heading md-focus">添加数据库</h3><p>继续回车，提示数据库名和数据库用户名是否保持一致。输入y表示一致。</p><p>回车，输入root用户的数据库密码（输入过程中密码不会显示）。</p><p>回车，输入数据库名，自行设置，本处写wp</p><p>回车，设置数据库密码。</p><p>回车，再回车。</p><p>当出现下图所示画面时候，说明添加域名与数据库成功。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8dce1f7f9e1f427a82849634badf7947><p class=pgc-img-caption></p></div><h3 class="md-end-block md-heading md-focus">安装Wordpress</h3><p>首先，进入添加的域名目录：</p><pre><code>cd /home/wwwroot/xx.com</code></pre><p>浏览器中打开WordPress中文站点，下载程序压缩包：</p><pre><code>wget https://cn.wordpress.org/wordpress-5.0.3-zh_CN.tar.gz</code></pre><p>等待下载完之后，解压压缩包：</p><pre><code>tar -zxvf wordpress-5.0.3-zh_CN.tar.gz</code></pre><p>接下来，将解压出来的wordpress文件夹内全部文件移动到当前的域名目录下（别忘了后面的.符号）。</p><pre><code>mv wordpress/* .</code></pre><p>回车。然后，可以选择删掉空文件夹wordpress。</p><pre><code>rm -rf wordpress</code></pre><p>为避免因权限的问题导致安装出错，比如wp-config.php无法创建、需要提供FTP用户密码以及主题和插件不能更新等，建议赋予根目录文件的可写权限。以后每添加一个域名，都要执行一次以下两步操作。</p><pre><code>chmod -R 755 /home/wwwrootchown -R www /home/wwwroot</code></pre><h3 class="md-end-block md-heading md-focus">Wordpress 配置</h3><p>在浏览器地址栏输入域名或IP地址，跳出wordpress配置页面</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f7b8fac013fa4466bec7c05daee7bad6><p class=pgc-img-caption></p></div><p>点击“现在就开始”，跳转到数据库配置页面。按照前面面板添加站点生成的数据库配置信息填入。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8b7ec067555c415cac4ac450e928c590><p class=pgc-img-caption></p></div><p>数据库配置完毕后，设置wordpress站点标题及账户信息。</p><p><br></p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/765af057e3d745a7b204f6ea0e2bc2fc><p class=pgc-img-caption></p></div><p>添加完毕，登录wordpress账号及密码，进入该网站页面。</p><div class=pgc-img><img alt=服务器安装网站教程「网站三件套——LNMP」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b79d2b9150ba422e9b9e9bb32918b441><p class=pgc-img-caption></p></div><p>此时网站建立完毕。后续就是网站内容丰富和美化的事情。</p><hr><p>作者的其他回答：</p><p>[<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6830055688048214532/?group_id=6830055688048214532" rel="noopener noreferrer" target=_blank>自己拥有一台服务器可以做哪些很酷的事情</a>] (https://www.toutiao.com/i6830055688048214532/?group_id=6830055688048214532)</p><p>[<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6821887045569348107/?group_id=6821887045569348107" rel="noopener noreferrer" target=_blank>阿里云服务器快速建网站 (安装BT宝塔面板和wordpress)</a>] (https://www.toutiao.com/i6821887045569348107/?group_id=6821887045569348107)</p><p><a class=pgc-link data-content=mp href="https://www.toutiao.com/i6811104414296703496/?group_id=6811104414296703496" rel="noopener noreferrer" target=_blank>阿里云域名注册与备案、服务器ECS购买与登录</a> (https://www.toutiao.com/i6811104414296703496/?group_id=6811104414296703496)、</p><p>[<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6812523427614687747/?group_id=6812523427614687747" rel="noopener noreferrer" target=_blank>七牛图床添加阿里云域名]</a> (https://www.toutiao.com/i6812523427614687747/?group_id=6812523427614687747)、</p><p>[<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6771402918026281486/?group_id=6771402918026281486" rel="noopener noreferrer" target=_blank>markdown多平台发布及七牛图床使用</a>] (https://www.toutiao.com/i6771402918026281486/?group_id=6771402918026281486)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'网站','三件套','服务器'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>