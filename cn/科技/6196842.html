<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） | 极客快訊</title><meta property="og:title" content="编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/22cf0000774f33967078"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6196842.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6196842.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6196842.html><meta property="article:published_time" content="2020-10-29T20:50:35+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:35+08:00"><meta name=Keywords content><meta name=description content="编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6196842.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯）</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>任何一个可以用计算机解决的问题所需的计算时间都与其规模有关系，这也就意味着，通常情况下问题规模越大，所耗费的时间和计算资源越多；而问题的规模越小，所需的时间和计算资源越小，问题的求解也越容易，因此，在处理一些困难问题的时候，我们会考虑通过缩小问题的规模而使得困难问题更加容易求解。在充分研究这类算法的规律之后，人们将这些算法总结成缩小规模算法，如递归法、分治法、动态规划法、贪心法等。（分治法、动态规划法、回溯法都是基于递归的算法）</p><h1><strong>1 穷举法</strong></h1><p>在实际解题过程中，可以发现并不是任何问题都可以直观地分解成若干小问题来进行求解，往往最容易想到的解题策略是枚举法（也称为穷举法或蛮力法），即对要解决问题的所有可能情况，一个不漏地进行检验，从中找出符合要求的答案，因此枚举法是通过牺牲时间来换取答案的全面性。如果在搜索解的过程中加上判定条件来加快搜索速度，则按搜索策略的不同有回溯法与分支限界算法。</p><h1><strong>2 回溯法</strong></h1><p>回溯法（探索与回溯法）是一种选优搜索法，又称为试探法，按选优条件向前搜索，以达到目标。但当探索到某一步时，发现原先选择并不优或达不到目标，就退回一步重新选择，这种<strong>走不通就退回再走的技术为回溯法</strong>，而满足回溯条件的某个状态的点称为“回溯点”。扩大当前候选解的规模，并继续试探的过程称为<strong>向前试探</strong>。也就是如果当前候选解除了不满足规模要求外，满足其他所有要求时，继续扩大当前候选解的规模，并继续试探。如果当前的候选解满足包括问题规模在内的所有要求时，该候选解就是问题的一个解。</p><p>回溯算法实际上是一个类似枚举的搜索尝试过程，主要是在搜索尝试过程中寻找问题的解，当发现已不满足求解条件时，就“回溯“返回，尝试别的路径。可以参考一下走迷宫的过程，一开始会随机选择一条道路前进，一直到走不通之后就会回头直到找到另外一条没有试过的道路前进。实际上，走迷宫的算法就是回溯法的经典问题。</p><p>回溯法实际上<strong>也是一种试错的思路</strong>，通过不断尝试解的组合来达到求解可行解和最优解的目的。虽然都有穷搜的概念蕴含其中，但是回溯法和穷举查找法是不同的。对于一个问题的所有实例，穷举法注定都是非常缓慢的，但应用回溯法至少可以期望对于一些规模不是很小的实例，计算机在可接受的时间内对问题求解。</p><p>回溯，正如去某一个地方要回到原点一样，需要记住回溯点的状态，栈或递归栈就是适合的一个方式。</p><p>许多复杂的规模的问题都可以使用回溯法，有”通用解题方法”的美称。分书问题和八皇后都是典型的回溯法问题。</p><h1><strong>3 递归算法及代码执行流程</strong></h1><p>在递归函数中，递归分为两个阶段，递推与回归，递推执行递归函数自调用处之前的代码，回归时执行递归函数自调用处之后的代码。</p><p>参考：<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6741249809774019084/?group_id=6741249809774019084" target=_blank>https://www.toutiao.com/i6741249809774019084/</a></p><p>《<strong>C++｜从函数内部的执行顺序理解递归的整体顺序</strong>》</p><h1><strong>4 分书问题</strong></h1><p>有编号为0，1，2，3，4的5本书，准备分给5个人A，B，C，D，E，写一个程序，输出所有皆大欢喜的分书方案。</p><p>每个人的阅读兴趣用一个二维数组like描述：</p><p>Like[i][j] = true i喜欢书j</p><p>Like[i][j] = false i不喜欢书j</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/22cf0000774f33967078><p class=pgc-img-caption></p></div><p>设计一个函数trynext(int i)给第i个人分书。</p><p>用一个一维数组take表示某本书分给了某人。take[j]=i+1;//把第j本书分配给第i个人</p><p>依次尝试把书j分给人i。</p><p>如果第i个人不喜欢第j本书，则尝试下一本书，如果喜欢，并且第j本书尚未分配，则把书j分配给i。</p><p>如果i是最后一个人，则方案数加1，输出该方案。否则调用trynext(i+1)为第i+1个人分书。</p><p>如果对第i个人枚举了他喜欢的所有的书，都没有找到可行的方案，那就回到前一个状态i-1，让i-1把分到的书退回去，重新找喜欢的书，再递归调用函数，寻找可行的方案。</p><h1><strong>5 先直接看分书问题的代码</strong></h1><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5d7a555608034594874aa2f0e6f74853><p class=pgc-img-caption></p></div><p>运行结果：</p><pre>分配方案1:书本0→B书本1→C书本2→A书本3→D书本4→E分配方案2:书本0→B书本1→E书本2→A书本3→D书本4→C分配方案3:书本0→D书本1→B书本2→C书本3→A书本4→E分配方案4:书本0→D书本1→E书本2→C书本3→A书本4→B</pre><p>如果不考虑回溯，也就是把倒数第四行代码take[j]=0;去掉，则可得到单一解决方案。</p><p>这就是递归函数后面有没有代码可执行的区别，如果后面（回归阶段）没有代码可执行，称为尾递归，如果后面（回归阶段）有代码可执行，称为非尾递归。</p><p>第1次递归前的栈状态及各全局变量和局部变量值：</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5374ff487b48465c9ddaaf2cfa7a4680><p class=pgc-img-caption></p></div><p>第2次递归前的栈状态及各全局变量和局部变量值：</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e3705195136b483c880e77bc4be90eee><p class=pgc-img-caption></p></div><p>第3次递归前的栈状态及各全局变量和局部变量值：</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6812326f00a649c1946d98e6402befbe><p class=pgc-img-caption></p></div><p>第4次递归前的栈状态及各全局变量和局部变量值：</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0585a892a78a443a8f40eb3beb643e34><p class=pgc-img-caption></p></div><h1><strong>6 回溯的执行流程</strong></h1><p><strong>6.1 第一个回溯点（递归函数回归点）：i=4; j=4;</strong></p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2d8f9ea944194734a2de924dfd6d9183><p class=pgc-img-caption></p></div><p>take[4] = 0;</p><p>j++;</p><p>j=5;不满足j&lt;5的条件，回到下一个递归点。</p><p><strong>6.2 第2个回溯点（递归函数回归点）：i=3; j=3;</strong></p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/305f3b2659734caa929d5d8df32a32c4><p class=pgc-img-caption></p></div><p>take[3] = 0;</p><p>j++;</p><p>j=4;</p><p>j++;</p><p>j=5;不满足j&lt;5的条件，回到下一个递归点。</p><p><strong>6.3 第3个回溯点（递归函数回归点）：i=2; j=1;</strong></p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/eebe7a79d5a547d8992c2ddd44ecae9d><p class=pgc-img-caption></p></div><p>take[1] = 0;</p><p>j++;</p><p>j=2;</p><p>like[2][2]=1、take[2] = 1</p><p>j++;</p><p>j=3</p><p>like[2][3]=0</p><p>j++;</p><p>j=4;</p><p>like[2][4]=1、take[4] = 0</p><p>take[4] = 2+1 = 3</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dc45bf6ea25448b7a7f168f2af0a14a4><p class=pgc-img-caption></p></div><p>i=4 不成立；</p><p>递归：trynext(3)</p><p>开始递推：</p><p>i = 3; j=0;</p><p>j++</p><p>j++</p><p>j++</p><p>take[3] = 3+1</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d2c13f79371f44368542841969297ae0><p class=pgc-img-caption></p></div><p>i=4 不成立；</p><p>递归：trynext(4)</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/284cc5a499e34c10b7de23755b4930c7><p class=pgc-img-caption></p></div><p>开始递推：</p><p>i = 4; j=0;</p><p>j++</p><p>take[1] = 4+1</p><div class=pgc-img><img alt=编程｜实例（分书问题）了解数据结构、算法（穷举、递归、回溯） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dd077e7d5e364f12a776f8d822dd962b><p class=pgc-img-caption></p></div><p>至此，又得到了一个新的方案。</p><p>然后再次在栈中进行回归（或递归、递推）……</p><p>直到得到全部解决方案。</p><p>－End－</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'编程','实例','分书'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>