<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/d61d37bfb36c4fc99438ade5973b99b1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/620724e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/620724e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/620724e.html><meta property="article:published_time" content="2020-10-29T21:01:13+08:00"><meta property="article:modified_time" content="2020-10-29T21:01:13+08:00"><meta name=Keywords content><meta name=description content="æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/620724e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>ä¸€ã€å‰è¨€<br>éšæœºå†™ä¼šå¯¼è‡´ç£å¤´ä¸åœåœ°æ¢é“ï¼Œé€ æˆæ•ˆç‡çš„æå¤§é™ä½ï¼›é¡ºåºå†™ç£å¤´å‡ ä¹ä¸ç”¨æ¢é“ï¼Œæˆ–è€…æ¢é“çš„æ—¶é—´å¾ˆçŸ­ã€‚æœ¬æ–‡æ¥è®¨è®ºä¸€ä¸‹ä¸¤è€…å…·ä½“çš„å·®åˆ«ä»¥åŠç›¸åº”çš„å†…æ ¸è°ƒç”¨ã€‚</p><div class=pgc-img><img alt="æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d61d37bfb36c4fc99438ade5973b99b1><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>äºŒã€ç¯å¢ƒå‡†å¤‡</h3><p><br></p><div class=pgc-img><img alt="æ·±å…¥ç†è§£ linuxç£ç›˜é¡ºåºå†™ã€éšæœºå†™" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/74c24cc7b6fe427fa82f2cfb5185e7ba><p class=pgc-img-caption></p></div><p>ä¸‰ã€fioä»‹ç»</p><p>é€šè¿‡fioæµ‹è¯•ï¼Œèƒ½å¤Ÿåæ˜ åœ¨è¯»å†™ä¸­çš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨fioçš„è¾“å‡ºæŠ¥å‘Šä¸­çš„å‡ ä¸ªå…³é”®æŒ‡æ ‡ï¼š<br>slat ï¼šæ˜¯æŒ‡ä» I/O æäº¤åˆ°å®é™…æ‰§è¡Œ I/O çš„æ—¶é•¿ï¼ˆSubmission latencyï¼‰<br>clat ï¼šæ˜¯æŒ‡ä» I/O æäº¤åˆ° I/O å®Œæˆçš„æ—¶é•¿ï¼ˆCompletion latencyï¼‰<br>lat ï¼šæŒ‡çš„æ˜¯ä» fio åˆ›å»º I/O åˆ° I/O å®Œæˆçš„æ€»æ—¶é•¿<br>bw ï¼šååé‡<br>iops ï¼šæ¯ç§’ I/O çš„æ¬¡æ•°</p><p><br></p><h3 class=pgc-h-arrow-right>å››ã€åŒæ­¥å†™æµ‹è¯•</h3><h4 class=pgc-h-arrow-right>1ï¼‰åŒæ­¥éšæœºå†™</h4><p>ä¸»è¦é‡‡ç”¨fioä½œä¸ºæµ‹è¯•å·¥å…·ï¼Œä¸ºäº†èƒ½å¤Ÿçœ‹åˆ°ç³»ç»Ÿè°ƒç”¨ï¼Œä½¿ç”¨straceå·¥å…·ï¼Œå‘½ä»¤çœ‹èµ·æ¥æ˜¯è¿™æ ·</p><p>å…ˆæ¥æµ‹è¯•ä¸€ä¸ªéšæœºå†™</p><p><br></p><pre><code>straceÂ -fÂ -ttÂ -oÂ /tmp/randwrite.logÂ -DÂ fioÂ -name=randwriteÂ -rw=randwriteÂ \-direct=1Â -bs=4kÂ -size=1GÂ -numjobs=1Â Â -group_reportingÂ -filename=/tmp/test.db</code></pre><p>æå–å…³é”®ä¿¡æ¯</p><pre><code>root@wilson-ubuntu:~#Â straceÂ -fÂ -ttÂ -oÂ /tmp/randwrite.logÂ -DÂ fioÂ -name=randwriteÂ -rw=randwriteÂ \&gt;Â -direct=1Â -bs=4kÂ -size=1GÂ -numjobs=1Â Â -group_reportingÂ -filename=/tmp/test.dbrandwrite:Â (g=0):Â rw=randwrite,Â bs=4K-4K/4K-4K/4K-4K,Â ioengine=sync,Â iodepth=1fio-2.2.10StartingÂ 1Â process...randwrite:Â (groupid=0,Â jobs=1):Â err=Â 0:Â pid=26882:Â WedÂ AugÂ 14Â 10:39:02Â 2019Â Â write:Â io=1024.0MB,Â bw=52526KB/s,Â iops=13131,Â runt=Â 19963msecÂ Â Â Â clatÂ (usec):Â min=42,Â max=18620,Â avg=56.15,Â stdev=164.79Â Â Â Â Â latÂ (usec):Â min=42,Â max=18620,Â avg=56.39,Â stdev=164.79...Â Â Â Â bwÂ (KBÂ Â /s):Â min=50648,Â max=55208,Â per=99.96%,Â avg=52506.03,Â stdev=1055.83...RunÂ statusÂ groupÂ 0Â (allÂ jobs):Â Â WRITE:Â io=1024.0MB,Â aggrb=52525KB/s,Â minb=52525KB/s,Â maxb=52525KB/s,Â mint=19963msec,Â maxt=19963msecDiskÂ statsÂ (read/write):...Â Â sda:Â ios=0/262177,Â merge=0/25,Â ticks=0/7500,Â in_queue=7476,Â util=36.05%</code></pre><p>åˆ—å‡ºäº†æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„ä¿¡æ¯ï¼š<br>ï¼ˆ1ï¼‰clat ï¼Œå¹³å‡æ—¶é•¿56mså·¦å³<br>ï¼ˆ2ï¼‰lat ï¼Œå¹³å‡æ—¶é•¿56mså·¦å³<br>ï¼ˆ3ï¼‰bw ï¼Œååé‡ï¼Œå¤§æ¦‚åœ¨52Må·¦å³</p><p>å†æ¥çœ‹å†…æ ¸è°ƒç”¨ä¿¡æ¯ï¼š</p><pre><code>root@wilson-ubuntu:~#Â moreÂ /tmp/randwrite.log...26882Â 10:38:41.919904Â lseek(3,Â 665198592,Â SEEK_SET)Â =Â 66519859226882Â 10:38:41.919920Â write(3,Â "\220\240@\6\371\341\277&gt;\0\200\36\31\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.919969Â lseek(3,Â 4313088,Â SEEK_SET)Â =Â 431308826882Â 10:38:41.919985Â write(3,Â "\220\240@\6\371\341\277&gt;\0\200\36\31\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920032Â lseek(3,Â 455880704,Â SEEK_SET)Â =Â 45588070426882Â 10:38:41.920048Â write(3,Â "\220\240@\6\371\341\277&gt;\0\200\36\31\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920096Â lseek(3,Â 338862080,Â SEEK_SET)Â =Â 33886208026882Â 10:38:41.920112Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920161Â lseek(3,Â 739086336,Â SEEK_SET)Â =Â 73908633626882Â 10:38:41.920177Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920229Â lseek(3,Â 848175104,Â SEEK_SET)Â =Â 84817510426882Â 10:38:41.920245Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920296Â lseek(3,Â 1060147200,Â SEEK_SET)Â =Â 106014720026882Â 10:38:41.920312Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920362Â lseek(3,Â 863690752,Â SEEK_SET)Â =Â 86369075226882Â 10:38:41.920377Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920428Â lseek(3,Â 279457792,Â SEEK_SET)Â =Â 27945779226882Â 10:38:41.920444Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920492Â lseek(3,Â 271794176,Â SEEK_SET)Â =Â 27179417626882Â 10:38:41.920508Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 409626882Â 10:38:41.920558Â lseek(3,Â 1067864064,Â SEEK_SET)Â =Â 106786406426882Â 10:38:41.920573Â write(3,Â "\220\240@\6\371\341\277&gt;\0\2402\24\0\0\0\0\202\2\7\320\343\6H\26P\340\277\370\330\30e\30"...,Â 4096)Â =Â 4096...</code></pre><p><br>éšæœºè¯»æ¯ä¸€æ¬¡å†™å…¥ä¹‹å‰éƒ½è¦é€šè¿‡lseekå»å®šä½å½“å‰çš„æ–‡ä»¶åç§»é‡</p><p>2ï¼‰<strong>åŒæ­¥é¡ºåºå†™</strong></p><p>ç”¨åˆšæ‰çš„æ–¹æ³•æ¥æµ‹è¯•é¡ºåºå†™</p><pre><code>root@wilson-ubuntu:~#Â straceÂ -fÂ -ttÂ -oÂ /tmp/write.logÂ -DÂ fioÂ -name=writeÂ -rw=writeÂ \-direct=1Â -bs=4kÂ -size=1GÂ -numjobs=1Â Â -group_reportingÂ -filename=/tmp/test.dbwrite:Â (g=0):Â rw=write,Â bs=4K-4K/4K-4K/4K-4K,Â ioengine=sync,Â iodepth=1fio-2.2.10StartingÂ 1Â processJobs:Â 1Â (f=1):Â [W(1)]Â [100.0%Â done]Â [0KB/70432KB/0KBÂ /s]Â [0/17.7K/0Â iops]Â [etaÂ 00m:00s]write:Â (groupid=0,Â jobs=1):Â err=Â 0:Â pid=27005:Â WedÂ AugÂ 14Â 10:53:02Â 2019Â Â write:Â io=1024.0MB,Â bw=70238KB/s,Â iops=17559,Â runt=Â 14929msecÂ Â Â Â clatÂ (usec):Â min=43,Â max=7464,Â avg=55.95,Â stdev=56.24Â Â Â Â Â latÂ (usec):Â min=43,Â max=7465,Â avg=56.15,Â stdev=56.25...Â Â Â Â bwÂ (KBÂ Â /s):Â min=67304,Â max=72008,Â per=99.98%,Â avg=70225.38,Â stdev=1266.88...RunÂ statusÂ groupÂ 0Â (allÂ jobs):Â Â WRITE:Â io=1024.0MB,Â aggrb=70237KB/s,Â minb=70237KB/s,Â maxb=70237KB/s,Â mint=14929msec,Â maxt=14929msecDiskÂ statsÂ (read/write):...Â Â sda:Â ios=0/262162,Â merge=0/10,Â ticks=0/6948,Â in_queue=6932,Â util=46.49%</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼š<br>ååé‡æå‡è‡³70Må·¦å³</p><p>å†æ¥çœ‹ä¸€ä¸‹å†…æ ¸è°ƒç”¨ï¼š</p><pre><code>root@wilson-ubuntu:~#Â moreÂ /tmp/write.log...27046Â 10:54:28.194508Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\360\t\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194568Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194627Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194687Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194747Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194807Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194868Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194928Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.194988Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195049Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195110Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195197Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195262Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195330Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195426Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195497Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195567Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195637Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195704Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195757Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195807Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195859Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195910Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.195961Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196012Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196062Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0\220\24\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196112Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196162Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196213Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196265Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196314Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196363Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196414Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196472Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196524Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 409627046Â 10:54:28.196573Â write(3,Â "\0\0\23\0\0\0\0\0\0\300\16\0\0\0\0\0\0Â \26\0\0\0\0\0\0\320\17\0\0\0\0\0"...,Â 4096)Â =Â 4096...</code></pre><p><br>ç”±äºé¡ºåºè¯»ï¼Œä¸éœ€è¦åå¤å®šä½æ–‡ä»¶åç§»é‡ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¸“æ³¨äºå†™æ“ä½œ</p><h3 class=pgc-h-arrow-right>äº”ã€slatæŒ‡æ ‡</h3><p>ä»ä¸Šé¢çš„æµ‹è¯•ï¼Œæˆ‘ä»¬åœ¨fioçš„æµ‹è¯•æŠ¥å‘Šä¸­ï¼Œå¹¶æ²¡æœ‰å‘ç°slatçš„èº«å½±ï¼Œé‚£æ˜¯ç”±äºä¸Šè¿°éƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œå¯¹åŒæ­¥ I/O æ¥è¯´ï¼Œç”±äº I/O æäº¤å’Œ I/O å®Œæˆæ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œæ‰€ä»¥ slat å®é™…ä¸Šå°±æ˜¯ I/O å®Œæˆçš„æ—¶é—´</p><p>å¼‚æ­¥é¡ºåºå†™ï¼Œå°†åŒæ­¥é¡ºåºå†™çš„å‘½ä»¤æ·»åŠ -ioengine=libaioï¼š</p><pre><code>root@wilson-ubuntu:~#Â fioÂ -name=writeÂ -rw=writeÂ -ioengine=libaioÂ -direct=1Â -bs=4kÂ -size=1GÂ -numjobs=1Â Â -group_reportingÂ -filename=/tmp/test.dbwrite:Â (g=0):Â rw=write,Â bs=4K-4K/4K-4K/4K-4K,Â ioengine=libaio,Â iodepth=1fio-2.2.10StartingÂ 1Â processJobs:Â 1Â (f=1):Â [W(1)]Â [100.0%Â done]Â [0KB/119.3MB/0KBÂ /s]Â [0/30.6K/0Â iops]Â [etaÂ 00m:00s]write:Â (groupid=0,Â jobs=1):Â err=Â 0:Â pid=27258:Â WedÂ AugÂ 14Â 11:14:36Â 2019Â Â write:Â io=1024.0MB,Â bw=120443KB/s,Â iops=30110,Â runt=Â Â 8706msecÂ Â Â Â slatÂ (usec):Â min=3,Â max=70,Â avg=Â 4.31,Â stdev=Â 1.56Â Â Â Â clatÂ (usec):Â min=0,Â max=8967,Â avg=28.13,Â stdev=55.68Â Â Â Â Â latÂ (usec):Â min=22,Â max=8976,Â avg=32.53,Â stdev=55.72...Â Â Â Â bwÂ (KBÂ Â /s):Â min=118480,Â max=122880,Â per=100.00%,Â avg=120467.29,Â stdev=1525.68...RunÂ statusÂ groupÂ 0Â (allÂ jobs):Â Â WRITE:Â io=1024.0MB,Â aggrb=120442KB/s,Â minb=120442KB/s,Â maxb=120442KB/s,Â mint=8706msec,Â maxt=8706msecDiskÂ statsÂ (read/write):...Â Â sda:Â ios=0/262147,Â merge=0/1,Â ticks=0/6576,Â in_queue=6568,Â util=74.32%</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒslatæŒ‡æ ‡å‡ºç°ï¼Œlat è¿‘ä¼¼ç­‰äº slat + clat ä¹‹å’Œï¼ˆavgå¹³å‡å€¼ï¼‰ï¼›å¹¶ä¸”æ¢æˆå¼‚æ­¥ioä¹‹åï¼Œååé‡å¾—åˆ°äº†æå¤§çš„æå‡ï¼Œ120Må·¦å³</p><h3 class=pgc-h-arrow-right>å…­ã€æ€»ç»“</h3><p>â— fioåº”è¯¥ä½œä¸ºç£ç›˜çš„baselineå·¥å…·ï¼Œæ‹¿åˆ°æœºå™¨ï¼ˆç‰©ç†æœºæˆ–è€…äº‘æœºå™¨ï¼‰éƒ½åº”è¯¥ç¬¬ä¸€æ—¶é—´å¯¹æœºå™¨çš„ç£ç›˜åšä¸€ä¸ªåŸºçº¿æµ‹è¯•ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°<br>â— æœ¬æ–‡æ‰€æœ‰çš„æµ‹è¯•ï¼Œéƒ½æ˜¯ç»•å¼€äº†ç¼“å­˜ï¼Œåœ¨å®é™…åº”ç”¨ä¸­éœ€è¦å°†ç¼“å­˜çš„å½±å“è€ƒè™‘è¿›å»</p><h1 class=pgc-h-arrow-right>è€ç”·å­©ITï¼Œè‡´åŠ›äºæœ€æœ‰ç”¨çš„ITå¹²è´§åˆ†äº«ã€‚æœŸå¾…ä¸æ‚¨ä¸€åŒè¿›æ­¥ï¼åå°ç§ä¿¡1å¯è·å–5000Gçè—å¤§ç¤¼åŒ…ï¼ˆåŸ¹è®­è§†é¢‘ã€ç²¾é€‰è½¯ä»¶ã€å†…éƒ¨èµ„æ–™ï¼‰~è®©æˆ‘ä»¬ä¸€èµ·è®©ITå­¦ä¹ æ›´ç®€å•ï¼</h1></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'linux','ç£ç›˜','é¡ºåº'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>