<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 | 极客快訊</title><meta property="og:title" content="十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1c17ae59f42f46ecbfdd6c73a879d97a"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/64db180.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/64db180.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/64db180.html><meta property="article:published_time" content="2020-10-29T20:59:06+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:06+08:00"><meta name=Keywords content><meta name=description content="十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/64db180.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>一、系统配线及控制原理：</p><p>彩钢瓦是一种建筑材料，出厂成型料长度是固定的（如15米），有些需要的却是长度不一的材料，如用人工裁切，每根长度都需测量，费时费力。用PLC、文本屏、变频器控制实施自动裁切，操作工只要将此三种裁切长度值和裁切数量值从文本屏画面输入，设备就会自动切出这三种长度规格的彩钢瓦来。</p><p>原设备是采用西门子变频器和触摸屏进行控制的，但因PLC和触摸屏严重损坏，不宜修复。应用户要求，现在用LS型PLC和YD20型文本屏，对其进行改造式修复。</p><p>原设备的控制线路的主电路，见图5-45彩钢瓦自动裁切设备主电路，可分为三部分：</p><p>油泵控制线路，为常规启、停电路，不受PLC控制，上班后由操作人员进行启/停控制，为气压阀提供压力源；</p><p>变频器控制线路，具有手动进、退和自动中的两段速运行控制，由手动和PLC自动控制，完成对彩钢瓦材料的输送；</p><p>刀具上行、下行的气压阀控制线路，对彩钢瓦进行裁切和控制刀具复位，由PLC自动控制。PLC的控制过程：裁切长度和数量由文本屏输入到PLC的程序中。由旋转编码器采集彩钢瓦的长度信号，经程序计算，控制变频器的启、停和气压阀的裁切动作。</p><p>彩钢瓦自动裁切设备主电路</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1c17ae59f42f46ecbfdd6c73a879d97a><p class=pgc-img-caption></p></div><p>整机控制电源由空气断路器QF1控制，再由380V/220V隔离变压器供给控制电路，以提高抗干扰性能和操作安全性，也避免了采用火、零二线220V供电时，零线接触不良时的供电不稳。设置SA0急停开关，在系统运行异常时，可快速停掉控制电源，无论手动或自动运行都被中止。</p><p>油泵的运行提供裁切刀具的工作压力，油泵的起/停由SB1、SB2按钮手动控制；刀具的上行（抬起归位）、下行（裁切）由PLC的输出接点驱动KA1、KA2两只继电器，再由继电器驱动KP1、KP2两只压力电磁阀；变频器的起/停、运转方向、运行速度均可以有手动/自动两种工作方式。手动裁切时用SB3、SB4按钮实现反转和运行控制，用SB5按钮控制手动下刀裁切。自动裁切时按设置好的两段速——高速和低速进行彩钢瓦输送、裁切前低速运行的控制，用继电器KA1、KA2控制刀具的下切和返回。</p><p>对变频器的参数设置。将P2端子设置为A段速运行控制端子，其运行频率为7Hz；将P3端子设置为B段速运行端子，将运行频率设置为35Hz；停车方式：自由停车；加、减速时间的设置，据现场运行要求设定。</p><p>彩钢瓦自动裁切设备PLC控制接线图</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3bdbed4c6eda4bfcb15d1c35faa8d1a0><p class=pgc-img-caption></p></div><p>PLC控制接线图，因原机型为西门子型PLC，输出端子在上部，输入端子在下部，为对应原线路配置和操作工人读图习惯，也将PLC输出端子线路画于上部，将输入端子画于下部了，读图时需予注意。</p><p>图中SA1为手动自/动运行方式选择开关，闭合时为自动运行方式，SB4为自动运行暂停开关；P06、P07端子输入刀具下、下限位信号；P0、P1输入高速计数脉冲信号。YD20文本屏的工作电源，取自PLC的24V、24G电源供给端子。</p><p>与可调定长裁切装置不同，程序电路的重点，是对多种剪切数量和多种前剪切长度进行处理，按设置要求完成对设置根数和长度的裁切任务。本装置最多能完成8组长度和根数各不相同的裁切任务。当然，如果需要，可完成更多组数的裁切设置。</p><p>控制系统的裁切动作，是按屏面设置数据来进行的，因而制作文开屏画面，就成为编写程序的一个重要内容，而且程序电路要与画面内容有机地结合在一起。还是按照先编写程序电路，再依据程序电路的元件地址制作文本屏画面的步骤来进行。</p><p>二、PLC程序程序电路与对应画面：</p><p>以程序电路左侧的步号为序进行程序电路的讲解。0-9步电路，为一个计数电路、计数清零控制电路。C0为剪切张数计数器，输入信号为剪切动作信号，下刀剪切一次，即输入一次计数信号，计数设定值是来自寄存器D3530（屏）内的剪切张数设定值，此值由第二段程序电路所传送，可为1至8组设定值中的任意一组剪切张数设定值。</p><p>彩钢瓦自动裁切设备PLC程序电路第一段</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ddddbb9a0ebb48d38bbcc304dae99bfa><p class=pgc-img-caption></p></div><p>C0当前计数值的清零：1）当计数值等于当前设定值时，对应位元件C0常开触点闭合，计数器复位电路接通，将当前计数值自行清零；2）当自动运行信号接通，M50产生一个扫描周期内的接通信号，“D M50”指令的作用，是将输入信号转变为（上升沿）脉冲输出，将C1计数器内的当前值清零。</p><p>在此段电路中，可看出脉冲信号的作用：当手动/自动开关打到自动位置时，P3触点处于常态的接通状态中，若直接用P3触点为C1复位，则因其在常态接通状态——C1复位电路一直在强制复位状态——下，会导致C1不能完成正常计数任务。在这里自动起动后的清零动作，只能是一个瞬态的脉冲信号！将常态信号转化为脉冲信号，大多是为了适应电路对瞬态信号需求的，并非要对其作无谓的转换。</p><p>9-15步电路。是完成组计数的功能，当各组的剪切任务都完成后，计数器C1的常闭触点开断，使自动运行停止，C1起到了自动停止的控制作用，见28-32步电路。</p><p>15-28步电路。为当前组数监控数据处理电路，将组计数C1中的数据传送至D3592。因监控显示为1-8，最低显示数为1，显示“0组”毫无意义。故采用ADD加法指令，将D3592（监控画面寄存器）之中数值预先加1，使之从数字1开始，显示1-8组数。</p><p>下图5-48，34-154步，是传送指令和条件比较指令的应用。对应长度数据为32位数据，传送指令为DMOV，在画面设置中，长度设定值采用的寄存器被定义为32位数据寄存器，以便与高速脉冲计数形成的32位数据相统一，而剪切数量则采用MOV，16位数据传送指令。在对传送指令应用时，要注意其数据形式。</p><p>彩钢瓦自动裁切设备PLC程序电路第二段</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0ed927147c6041a1a3790070a9ff49c6><p class=pgc-img-caption></p></div><p>实际工作中，每一组的长度值和剪切数量（根数）都不一样，在进行长度值和剪切数量的设置时，是以组序为区别，进行设置的，每一组都有两个量需要处理：1）该组剪切数量（根数）；2）该组剪切长度。如第一组要求将彩钢瓦剪切长度为5米，剪切数量8根。第二组……。第三组……。那么程序电路是如何进行区别，按设置要求进行自动裁切的呢？</p><p>对每组剪切长度和剪切数量的区别，是通过条件比较指令来进行的。第一段程序电路中，剪切组计数器C1的计数输入信号，为剪切张数计数器C0的触点动作信号。当剪切张数与设定值相等时——某一组张数剪切完毕后，C0触点动作，向C1输入一个计数信号。利用计数器C1的当前数值和给定数字值比较，对现在剪切组别进行逻辑判断。</p><p>并将设置好的剪切数量传送至计数器C0中，做为其计数设定值；同时也将该组设定值传送到D3510，经第四段程序电路的算术处理，做为对应剪切长度的总脉冲数，与旋转编码器输入脉冲数进行比较，二者相等时，下刀剪切。</p><p>34-49步电路，为第一组的组别判断和第一组剪切长度传送电路、第一组剪切张数传送电路。其工作过程是这样的：系统启动时，计数器C1中计数值为0，34-49步数据传送电路的输入回路接通（以下传送电路均无输入回路接通条件而不工作），数据传送电路将第一组剪切长度数据D3560（来自屏设定画面）传送至D3510寄存器。</p><p>此时第四段程序电路中的170-220步电路，所计算得出的总脉冲数（对应剪切长度）即为34-49电路所传送的第一组剪切长度值；同时，34-49电路也将剪切数量的数据传送到D3530中，作为第一段程序电路中剪切数量计数器C0的设定值；当实际下刀次数（剪切数量）与第一组设定数量相等时，C0自清零，同时向C1（组计数）输入一个计数信号，使C1的当前计数值为1。</p><p>C1的当前计数值为1，从而使49-64步电路被激活，第二组剪切长度与剪切张数传送电路的输入回路接通，将第二组剪切长度数据传送至总脉冲数计算电路，同时也将第二组剪切张数的数据传送至C0，作为CO的计数设定值。也可以认为，D3510、D3530的内部数据同时被刷新为第二组的设定数据。以下各组剪切数据的工作传送方式依此类推，直至剪切完毕，系统自动停机。</p><p>每组剪切长度及剪切张数的设置画面如下：</p><p>采用文本屏型号为TD20，LS型PLC与电脑的通讯电缆和与文本屏的通讯电缆相同，不必另行更换电缆。第一步，是选择PLC类型，其通讯协议可以用默认配置，不须另设。然后进入画面编辑。按主画面、其它画面的次序逐一进行编辑，定义元件（寄存器），设置画面转换功能键等。其画面编辑方法同上述的YD204VL4文本屏，不予赘述了。</p><p>TD20文本屏剪切长度、数量设置画面一</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/48344ce6729546ac8001c950afa1a316><p class=pgc-img-caption></p></div><p>第一组剪切长度：32位数据寄存器D3560，剪切张数：16位数据寄存器D3562；</p><p>第二组剪切长度：32位数据寄存器D3564，剪切张数：16位数据寄存器D3566；</p><p>第三组剪切长度：32位数据寄存器D3568，剪切张数：16位数据寄存器D3570；</p><p>第四组剪切长度：32位数据寄存器D3572，剪切张数：16位数据寄存器D3574。</p><p>注意：当指定D3560为32位寄存器时，D3561同时被占用（D3560储存低16位数据，D3561储存高16位数据），D3564（D3565）等数据寄存器，也都被指定为32位数据寄存器。</p><p>将SEC定义为隐形键，实现向画面1的转换；将下行箭头键定义为画面跳转功能键，按此键时转换到设置2画面。 因为一个画面只能处理和显示四行文字，须用两个画面才能完成对八组剪切数据的设置。</p><p>TD20文本屏剪切长度、数量设置画面二</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fb6fc059c0ba4816991dca12cee0789e><p class=pgc-img-caption></p></div><p>第五组剪切长度：32位数据寄存器D3576，剪切张数：16位数据寄存器D3578；</p><p>第六组剪切长度：32位数据寄存器D3580，剪切张数：16位数据寄存器D3582；</p><p>第七组剪切长度：32位数据寄存器D3584，剪切张数：16位数据寄存器D3586；</p><p>第八组剪切长度：32位数据寄存器D3588，剪切张数：16位数据寄存器D3590。</p><p>将SEC定义为隐形键，实现向画面1的转换；将下行箭头键定义为画面跳转功能键，按此键时，转换到设置1画面。</p><p>彩钢瓦自动裁切设备PLC程序电路第三段</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/75b23d7da99a4b3e90480935a77cc27a><p class=pgc-img-caption></p></div><p>彩钢瓦自动裁切设备PLC程序电路第四段</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/cb4f8ad2dd084979992c646e2f671129><p class=pgc-img-caption></p></div><p>170-220步（见图5-52），为长度脉冲数、减速距离脉冲数及长度监控值（将脉冲数转换为毫米值显示）的算术电路，与本章第三节的可调定长裁切装置的算术电路相同，请读者自行分析电路原理。另外，系统的起动/停止，和变频器高、低速的控制，及与控制相关的逻辑判断电路，也编写在该段程序中。</p><p>220-243步程序电路（见图5-53），为高速计数和计数清零电路。247-263步电路，为变频器低速和下刀信号处理电路，与第一节程序电路内容相近，不予赘述。247-277步程序电路，为自动/手动下刀裁切控制电路，下刀信号与上/下限位信号相配合，对下刀电磁阀进行控制。</p><p>此处，用SET置位指令“强制”了M10的接通（RST M10指令并没有成对出现），这是因为下刀裁切，只是一个瞬时过程，而抬起刀具，则为一个常态保持动作。在不明了实际的动作要求时，遇到这种不够规则的指令应用现象，就会感到不解。现场调试和程序修改，有点“头疼医头脚疼医脚”的意思，某种情势下，往往不是出于全面的周密的逻辑思考，而是考虑到先把问题解决了再说，因而某些指令用法的不规则和程序电路中偶尔出现的“凌乱”现象，就是在所难免的了。这是我们“读程序”时应该注意的方面了。同时在编程工作中，也要尽量养成一个“按规则编写程序电路”的好习惯。</p><p>文本屏的设置画面如下：</p><p>TD20文本屏的“机械设定”画面</p><div class=pgc-img><img alt=十年工控人：如何学PLC，弄懂控制程序及项目编程实例无压力 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e46f8b5f7acf4a6cab7f7a769f2ffa4f><p class=pgc-img-caption></p></div><p>该画面描述：机械设定画面，用于（主轴）轮周长、编码脉冲、减速长度三个量的设置。</p><p>轮周长设置：16位数据寄存器D3512；编码脉冲数/周设置：16位数据寄存器D3514；减速长度设置：16位数据寄存器D3500。</p><p>关于此次的PLC与文本屏、编码器、变频器程序案例就分享到这啦！</p><p>以上，欢迎动动手分享及收藏！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'工控','PLC','项目'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>