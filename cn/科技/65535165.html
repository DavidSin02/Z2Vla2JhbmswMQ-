<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>mysql教程:MySQL多表查询大全,18个示例总有你需要的 | 极客快訊</title><meta property="og:title" content="mysql教程:MySQL多表查询大全,18个示例总有你需要的 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/43cf07c314554ea0887eaa8fd25c178f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65535165.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65535165.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65535165.html><meta property="article:published_time" content="2020-11-14T21:04:12+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:12+08:00"><meta name=Keywords content><meta name=description content="mysql教程:MySQL多表查询大全,18个示例总有你需要的"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/65535165.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>mysql教程:MySQL多表查询大全,18个示例总有你需要的</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>很想学习下mysql数据库的知识，毕竟现在用的很多开源CMS都是用的mysql数据库，比如本站使用的wordpress，在这些CMS使用过程中避免不了的会用到一些MySql知识，因此博主最近收集整理了一些Mysql的知识点。以备后面的不时之需。</p><div class=pgc-img><img alt=mysql教程:MySQL多表查询大全,18个示例总有你需要的 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/43cf07c314554ea0887eaa8fd25c178f><p class=pgc-img-caption>MySQL多表查询大全,18个示例总有你需要的</p></div><p>一共18个示例，我想总应该有你需要的吧。</p><p>一.使用select 子句进行多表查询</p><pre>SELECT a.id,a.name,a.address,a.date,b.math,b.english,b.chinese FROM tb_demo065_tel AS b,tb_demo065 AS a WHERE a.id=b.id</pre><p>在上面的代码中，以两张彪的id字段信息相同为条件建立两表关联，但在实际开发中不应该这样使用，最好用主外键约束来实现。</p><p>二.使用表的别名进行多表查询</p><pre>SELECT a.id,a.name,a.address,b.math,b.english,b.chinese FROM tb_demo065 a,tb_demo065_tel b WHERE a.id=b.id AND b.id='$_POST[textid]'</pre><p>SQL语言中，可以通过两种方式为表指定别名</p><p>第一种是通过关键词as指定，如：</p><pre>SELECT a.id,a.name,a.address,b.math,b.english,b.chinese FROM tb_demo065 AS a,tb_demo065_tel AS b WHERE a.id=b.id</pre><p>第二种是在表名后直接加表的别名实现</p><pre>SELECT a.id,a.name,a.address,b.math,b.english,b.chinese FROM tb_demo065 a,tb_demo065_tel b WHERE a.id=b.id</pre><p>使用表的别名应注意几下几点</p><ul><li>1.别名通常是一个缩短了的表名，用于在连接中引用表中的特定列，如果连接中的多个表中有相同的名称列存在，必须用表名或表的别名限定列名</li><li>2.如果定义了表的别名就不能再使用表名</li></ul><p>三.合并多个结果集</p><p>SQL语言中，可以通过union或all将多个select语句的查询结果合并输出，这两个关键词的使用说明如下：</p><p>union:利用该关键词可以将多个select语句的查询结果合并输出，并删除重复行。</p><p>all:利用该关键词可以将多个select语句的查询结果合并输出，但不会删除重复行。</p><blockquote><p>在使用union和all关键字将多个表合并输出时，查询结果必须具有相同的结构并且数据类型必须兼容，另外使用union时香樟表的字段数量必须相同，否则SQL语句有错误。</p></blockquote><pre>e.x:SELECT id,name,pwd FROM tb_demo067 UNION SELECT uid,price,date FROM tb_demo067_tel</pre><p>四.简单的嵌套查询</p><p>子查询：子查询是一个select查询，返回单个值且嵌套在select、insert、update和delete语句或其他查询语句中，任何可以使用表达式的地方都可以使用子查询。</p><pre>SELECT id,name,sex,date FROM tb_demo068 WHERE id in(SELECT id FROM tb_demo068 WHERE id='$_POST[test]')</pre><p>内连接：把查询结果作为where子句的查询条件即称为内连接</p><p>五.复杂的嵌套查询</p><p>多表之间的嵌套查询可以通过谓词in实现，语法格式如下：</p><pre>test_expression[NOT] in{subquery}</pre><p>参数说明：test_expression指sql表达式，subquery包含某结果集的子查询</p><p>多表嵌套查询的原理：无论是多少张彪进行嵌套，表与表之间一定存在魔种关联，通过where子句建立此种关联实现查询</p><p>六.嵌套查询在查询统计中的应用</p><p>实现多表查询时，可以同时使用谓词any,some,all，这些谓词被称为定量比较谓词，可以和比较运算符联合使用，判断是否全部返回值都满足搜索条件，some和any谓词是存在量的，只注重是否有返回值满足搜索条件， 这两个谓词的含义相同，可以替换使用；</p><p>all谓词称为通用谓词，它只关心是否有谓词满足搜索条件。</p><pre>SELECT * FROM tb_demo069_people WHERE uid IN(SELECT deptID FROM tb_demo069_dept WHERE deptName='$_POST[select]')SELECT a.id,a.name FROM tb_demo067 AS a WHERE id&lt;3)//&gt;ANY 大于子查询中的某个值 //&gt;=ANY 大于等于子查询中的某个值 //&lt;=ANY 小于等于子查询中的某个值 //=ANY 等于子查询中的某个值 //!=ANY或&lt;&gt;ANY 不等于子查询中的某个值 //&gt;ALL 大于子查询中的所有值 //&gt;=ALL 大于等于子查询中的所有值 //&lt;=ALL 小于等于子查询中的所有值 //=ALL 等于子查询中的所有值 //!=ALL或&lt;&gt;ALL 不等于子查询中的所有值</pre><p>七.使用子查询作派生的表</p><p>在实际项目开发过程中经常用到从一个信息比较完善的表中派生出一个只含有几个关键字段的信息表，通过子查询就可以来实现这以目标，如：</p><pre>SELECT people.name,people.chinese,people.math,people.english FROM (SELECT name,chinese,math,english FROM tb_demo071) AS people</pre><p>注：子查询应该遵循以下规则：</p><ul><li>1.由比较运算符引入的内层子查询只包含一个表达式或列名，在外层语句中的where子句内命名的列必须与内层子查询命名的列兼容</li><li>2.由不可更改的比较运算符引入的子查询(比较运算符后面不跟关键字any或all)不包括group by 或having子句，除非预先确定了成组或单个的值</li><li>3.用exists引入的select列表一本都有*组成，不必指定列名</li><li>4.子查询不能在内部处理其结果</li></ul><p>八.使用子查询作表达式</p><pre>select (select avg(chinese) from tb_demo),(select avg(english) from tb_demo),(select avg(math) from tb_demo) from tb_demo</pre><p>注：在使用子查询时最好为列表项取个表名，这样可以方便用户在使用mysqli_fetch_array()函数时为表项赋值，如：</p><pre>SELECT (SELECT AVG(chinese) FROM tb_demo071) AS yuwen ,(SELECT AVG(english) FROM tb_demo071) AS yingyu,(SELECT AVG(math) FROM tb_demo071) AS shuxue FROM tb_demo071</pre><p>九.使用子查询关联数据</p><pre>select * from tb_demo_student where id=(select id from tb_demo_class where className='$_post[text]')</pre><p>十.多表联合查询</p><p>利用SQL语句中的union，可以将不同表中符合条件的数据信息显示在同一列中。</p><pre>e.x:SELECT * FROM tb_demo074_student UNION SELECT * FROM tb_demo074_fasten</pre><p>注：使用union时应注意一下两点：</p><ul><li>1.在使用union运算符组合的语句中，所有列表的表达式数目必须相同，如列明、算数表达式及聚合函数等</li><li>2.在每个查询表中，对应列的数据结构必须一样</li></ul><p>十一.对联合后的结果进行排序</p><p>为了union的运算兼容，要求所有select语句都不能有order by语句，但有一种情况例外，那就是在最后一个select与中放置order by 子句实现结果的最终排序输出</p><pre>SELECT * FROM tb_demo074_student UNION SELECT * FROM tb_demo074_fasten ORDER BY id</pre><p>使用union 条件上相对比较苛刻，所以使用此语句是一定要注意两个表项数目和字段类型是否相同</p><p>十二.条件联合语句</p><pre>SELECT * FROM tb_demo076_BEIJING GROUP BY name HAVING name='人民邮电出版社' OR name='机械工业出版社' UNION SELECT * FROM tb_demo076_BEIJING GROUP BY name HAVING name &lt;&gt;'人民邮电出版社' AND name &lt;&gt;'机械工业再版社' ORDER BY id</pre><p>上面语句应用了group by 分组语句和having语句实现条件联合查询。其实现目的是先保证将’人民邮电出版社’和’机械工业出版社’始终位于名单最前列，然后在输出其他的出版社</p><p>十三.简单的内连查询</p><pre>SELECT filedlist FROM table1 [INNER] JOIN table2 ON table1.column1 = table2.column1</pre><p>其中，filedlist是要显示的字段，inner表示表之间的链接方式为内连接，table.column1=table2.column1用于指明两表键的链接条件，如：</p><pre>SELECT a.name,a.address,a.date,b.chinese,b.math,b.english FROM tb_demo065 AS a INNER JOIN tb_demo065_tel AS b on a.id=b.id</pre><p>十四.复杂的内连查询</p><p>复杂的内连接查询是在基本的内连接查询的基础上再附加一些查询条件，如：</p><pre>SELECT a.name,a.address,a.date,b.chinese,b.math,b.english FROM tb_demo065 AS a INNER JOIN tb_demo065_tel AS b on a.id=b.id WHERE b.id=(SELECT id FROM tb_demo065 WHERE tb_demo065.name='$_POST[text]')</pre><p>总之，实现表与表之间的关联的本质是两表之间存在共同的数据项或者相同的数据项，通过where子句或内连接inner join….on语句将量表链接起来，实现查询。</p><p>十五.使用外连接实现多表联合查询</p><p>1.left outer join 表示表之间通过左链接方式相互链接，也可简写成left join，它是以左侧的表为基准故称为左链接，左侧表中所有信息将被全部输出，而右侧表信息指挥输出符合条件的信息，对不符合条件的信息则返回null</p><pre>SELECT a.name,a.address,b.math,b.english FROM tb_demo065 AS A LEFT OUTER JOIN tb_demo065_tel AS b ON a.id=b.id</pre><p>2.right outer join表示表之间通过右连接方式相互连接，也可简写成RIGHT JOIN,它是以右侧的表为基准故称右连接，右侧表中所有信息将被全部输出，而左侧表信息则只会输出符合条件的信息，对不符合条件的信息则返回NULL</p><pre>SELECT a.name,a.address,b.math,b.english FROM tb_demo065 AS A RIGHT OUTER JOIN tb_demo065_tel AS b ON a.id=b.id</pre><p>十六.使用in或notin关键字限定范围</p><pre>SELECT * FROM tb_demo083 WHERE code IN(SELECT code FROM tb_demo083 WHERE code BETWEEN '$_POST[text1]' AND '$_POST[text2]')</pre><p>利用in可指定在范围内查询，若要求在某范围外查询可以用not in 代替它</p><p>十七.由in引入的关联子查询</p><pre>SELECT * FROM tb_demo083 WHERE code IN(SELECT code FROM tb_demo083 WHERE code = '$_POST[text]')</pre><p>十八.利用having语句过滤分组数据</p><p>having子句用于指定组或聚合的搜索条件，having通常与group by语句一起使用，如果sql语句中不含group by子句，则having的行为与where子句一样。</p><blockquote><p>SELECT name,math FROM tb_demo083 GROUP BY id HAVING math > '95'</p></blockquote><p>更多<strong>建站赚钱教程</strong>，可以点击下面的”<strong>了解更多</strong>“进行查看</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'示例','mysql','MySQL'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>