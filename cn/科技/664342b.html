<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>随笔：什么造成了网络延迟？如何降低（优化）网络延迟？ | 极客快訊</title><meta property="og:title" content="随笔：什么造成了网络延迟？如何降低（优化）网络延迟？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/e528117f68114fb1a5bf198433cc2e58"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/664342b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/664342b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/664342b.html><meta property="article:published_time" content="2020-10-29T21:07:16+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:16+08:00"><meta name=Keywords content><meta name=description content="随笔：什么造成了网络延迟？如何降低（优化）网络延迟？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/664342b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>随笔：什么造成了网络延迟？如何降低（优化）网络延迟？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong class=highlight-text>弈心：从事计算机网络工作11年（新加坡7年，沙特4年），2013年考取CCIE，在新加坡先后任职于AT&T，新加坡交通部，苹果，Equinix，苏格兰皇家银行等大型企业、银行和政府部门。 目前供职于“世界第一土豪大学“沙特阿卜杜拉国王科技大学（KAUST），担任Senior Network Engineer，为KAUST校史上第一位也是唯一一位华人IT部门高级职员。2019年6月在知乎发布了华语圈第一本专门为编程零基础的网络工程师量身打造的Python教程《网络工程师的Python之路》。</strong></p><p><br></p><p>最近一个月《网络工程师的Python之路》系列文章写的有点多，有读者问我能不能像以前一样写点网络这行本专业知识点的文章。今天翻看自己的Onenote，看到了一篇N年前自己备战CCDE的关于“网络延迟”这个话题做的笔记，这是一篇纯理论笔记，不涉及任何设备的任何配置及优化方案。感觉还行，就拿出来分享给大家吧。</p><hr class=ProseMirror-selectednode><p><strong>网络延迟的定义</strong></p><p>数据（报文）在传输介质中传输所用的时间，即报文从发送者一方开始进入网络到它离开网络进入接收者一方所花费的时间。造成网络延迟的因素主要有六点：</p><p>1． Serialization Delay (也叫Transmission Delay)</p><p>2． Propagation Delay</p><p>3． Packet Switching</p><p>4． Queueing</p><p>5． Packet Drop</p><p>6． Processing</p><p><br></p><p><strong>如何降低（优化）网络延迟？</strong></p><p>1．Serialization Delay（SD）指的是数据进入传输介质（网线）所花费的时间，数据大小和传输介质能提供的带宽（bandwidth）决定了SD的长短。下图为数据的大小和传输介质能够提供的带宽（bandwidth）所对应的SD值（注：ms=毫秒，Âµs=微秒，ns=纳秒）。结论：数据包越小，传输介质带宽越高，Serialization Delay越小。</p><div class=pgc-img><img alt=随笔：什么造成了网络延迟？如何降低（优化）网络延迟？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e528117f68114fb1a5bf198433cc2e58><p class=pgc-img-caption></p></div><p>2．Propagation Delay (PD)和传输介质的类型/传输距离（尤其是物理距离，比如中国到美国西海岸的延迟怎么也得有个100ms以上，到东海岸怎么也得有个150ms以上）有关，从速度上来讲，常用的传输介质中，Passive Twinax CX-1 (SFP+) cables快过光纤，而光纤又快过RJ-45网线（注：微波(Microwave)快过光纤）。</p><p><br></p><p>3．Packet Switching受交换模式(switching mode)的影响，毋庸置疑，Cut-through mode(又分为Fast-forward和Fragment-free两种mode) 比Store-and-Forward mode快，但是在处理64 Byte和512byte这些小型数据包时，Store-and-Forward比Cut-through快。</p><p><br></p><p>4. Queueing，两个因素：</p><p>a. 网络设备的缓存(buffer)是否足够。</p><p>b. 当网络使用量饱和，链路出现拥塞的时候，网络设备采用了什么样的队列方式，对路由器来说，FIFO？WFQ？CBWFQ？LLQ？对交换机来说，WRR有几个queue? 不同类别的CoS是否划入了不同的WRR queue? 除了priority queue外，其他每个queue的权重（weight）设置是否合理？WRED阀值(threshold)的设置是否合理？以上是关于QOS中队列(Queueing)和拥塞避免(Congestion Avoidance)的大话题，这里不做详细讨论，但是需要知道的是：当网络出现拥塞时，良好的队列机制能够起到降低（优化）网络延迟的作用。</p><p><br></p><p>5. Packet Drop, 两个因素： a. 硬件故障 ，NIC（网卡）和传输介质（线路质量、ISP设备）的故障导致丢包。b. 人为失误，端口的速率和双工模式配置错误导致丢包，进而加重网络延迟。</p><p><br></p><p>6.Processing, 优化方式繁多，如下：1） 关闭网络中不需要的功能（feature），比如CDP, IP Redirect， Finger, Proxy ARP, IP BOOTP Server等等，以降低不必要的链路开销。**注：思科的Nexus 3548交换机（Ultra low latency switch）不受此影响，也就是说无论在N3548里面打开多少feature, 也不会对它造成网络延迟的影响，具体原理不在此讨论，有兴趣的可以去看下N3548的设计原理。2） 网络设计：大型网络内，是否严格采用传统的层级结构（介入，汇聚，核心三层）？传统的Hub and spoke 类型网络中，边缘站点是否被设置为末节区域（OSPF/EIGRP: stub area）以减少路由表的条目以达到优化网络设备处理数据的能力？3） 适配器(Adapter): 大多数情况下，独立网卡优于集成网卡，原因很复杂，不作讨论。4） 网络安全：从网络延迟的角度看，使用路由器自带的安全功能（ACL, PVLAN，以及其他各种security feature）比使用防火墙等专业安全设备造成的网络延迟更少。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'网络','延迟','随笔'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>