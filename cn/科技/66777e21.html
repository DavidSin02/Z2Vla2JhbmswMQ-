<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>存储网络 Day36 可移动媒体管理 | 极客快訊</title><meta property="og:title" content="存储网络 Day36 可移动媒体管理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/d9e67f561d2e4180a9573f7f83ef7a5c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66777e21.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66777e21.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66777e21.html><meta property="article:published_time" content="2020-11-14T21:02:52+08:00"><meta property="article:modified_time" content="2020-11-14T21:02:52+08:00"><meta name=Keywords content><meta name=description content="存储网络 Day36 可移动媒体管理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/66777e21.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>存储网络 Day36 可移动媒体管理</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>11.5.1媒体管理系统架构</h1><p>IEEE 1244标准描述了客户端/服务器架构（图11.9）。诸如网络备份系统之类的应用程序承担使用可移动媒体管理系统的服务的客户端的角色。该标准定义了所需的服务器组件，数据模型以及这些组件与应用程序之间的接口。</p><p>详细地，IEEE 1244引入了以下组件。媒体管理器充当所有元数据的中央存储库，并提供控制和协调媒体，库和驱动器使用的机制。库管理器代表媒体管理器控制库硬件，并将库的属性和内容传输到媒体管理器。驱动器管理器代表媒体管理器管理驱动器硬件，并将驱动器的属性传输到媒体管理器。</p><p>IEEE 1244数据模型指定了为可移动介质建模管理系统所需的所有对象及其各自的属性（表11.1）。 IEEE 1244规定通过在运行时添加特定于应用程序的属性来扩展对象。这使得对象模型能够动态且灵活地适应相应的任务，而无需诸如媒体管理器或协议的组件被改变。</p><p>此外，该标准定义了与这些组件通信的接口。应用程序通过媒体管理协议（MMP）与媒体管理器联系，以使用符合IEEE 1244标准的管理系统的服务和资源来实现可移动媒体。库管理协议（LMP）定义媒体管理器和库管理器之间的接口，驱动器管理协议（DMP）定义媒体管理器和驱动器管理器之间的接口。</p><p>图11.9用于可移动介质管理的IEEE 1244标准的体系结构。</p><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d9e67f561d2e4180a9573f7f83ef7a5c><p class=pgc-img-caption></p></div><p>这些协议使用TCP / IP作为传输层。与流行的Internet协议（如HTTP，FTP或SMTP）一样，命令通过TCP / IP以文本消息的形式发送。这些协议可以像在不同平台上一样简单地实现和使用。</p><p>IEEE 1244体系结构的优点是媒体管理器可以将组件实现为通用应用程序，即独立于所使用的特定库和驱动器硬件。这些差异，特别是与控件的差异，被封装在库管理器或驱动管理器中，用于所讨论的硬件。因此，对于新的磁带库，只需要实现一个新的库管理器组件，该组件将库的特定接口转换为LMP，以便可以将其链接到可移动介质的IEEE 1244兼容管理系统的现有安装中。</p><h1>11.5.2媒体管理员和MMP</h1><p>从应用程序的角度来看，媒体管理器充当等待来自应用程序的请求的服务器。它区分特权和非特权应用程序。非特权应用程序（如备份系统）只能与已授予适当授权的对象一起使用。特权应用程序（通常是管理应用程序）可以执行所有操作并操纵所有对象。它们主要用于将非特权应用程序定义到系统中并建立适当的访问控制。</p><p>表11.1 IEEE 1244数据模型的最重要对象。</p><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3d7c05dc18a34454a4032ef2115dcdda><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/48898bd661c044aa8ceff15bbc53482b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/006d4bf8aafd45a28e1c9c3278a754c1><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c5466492dcd64996b2d37a4ca50bcdb5><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="存储网络 Day36 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/614732e77dd64df68f251ba7c69750eb><p class=pgc-img-caption></p></div><p>应用程序使用媒体管理协议（MMP）来利用IEEE 1244兼容系统的媒体管理服务。 MMP是一种基于文本的协议，它通过TCP / IP交换消息。各种协议消息的语法和语义在MMP规范IEEE 1244.3中规定。 MMP允许应用程序分配和装载卷，读取和写入元数据，以及独立管理和共享库和驱动器平台。由于额外的抽象级别，应用程序与硬件的直接控制分离。因此，可以独立于连接的硬件的能力开发应用程序，并且可以使应用程序可用于大量不同类型的可移动介质。</p><p>MMP是一种异步协议。应用程序将命令作为MMP消息发送到媒体管理器。媒体管理器首先确认接受命令，将其传递以进行处理，然后发送带有命令结果的第二条消息。一旦应用程序收到确认接受上一个命令的消息，它就可以发送更多命令。因此，应用程序必须为命令提供任务标识符，以便它们可以相应地关联来自媒体管理器的响应。</p><p>示例1应用程序要使用名称backup-199912-31安装卷。为此，它将以下命令发送给媒体管理器：</p><p>装载任务[“1”]</p><p>volname [“backup-1999-12-31”]</p><p>报告[MOUNTLOGICAL。“MountLogicalHandle”];</p><p>媒体管理器已识别该命令并接受它进行处理，因此发送以下响应：</p><p>响应任务[“1”]被接受;</p><p>现在，媒体管理器将包含卷的盒式磁带传输到应用程序可以访问的驱动器中。成功插入盒式磁带后，介质管理器会向应用程序发送响应，如下所示：</p><p>响应任务[“1”]成功文本[“/ dev / rmt0”];</p><p>这就是应用程序如何获知用于读取和描述具有所请求卷的驱动器的路径（设备句柄）。</p><p>介质管理器将所有命令存储在任务队列中，直到执行所需的所有资源都可用。一旦所有资源都可用，媒体管理器就会从任务队列中删除该命令并执行它。如果存在需要相同资源的若干命令，则媒体管理器基于优先级或先来先服务的基础选择要执行的下一个命令。所有其他命令保留在任务队列中，直到相关资源再次释放为止。通过这种方式，可以共享库，驱动器和盒式磁带。可以使用“取消”命令再次删除任务队列中的命令。</p><p>示例2应用程序想要安装卷SU1602。因此，它将以下命令发送到媒体管理器：</p><p>装载任务[“1”]</p><p>volname [volname“SU1602”]</p><p>报告[MOUNTLOGICAL“MountLogicalHandle”。];</p><p>媒体管理员已经识别该命令并接受它进行处理。因此，它发送以下响应：</p><p>响应任务[“1”]被接受;</p><p>现在应用程序可以发送另一个命令。例如，可以请求所有有缺陷的驱动器的名称列表。</p><p>show task [“2”] report [DRIVE。“DriveName”]</p><p>匹配[streq（DRIVE。“DriveStateHard”“broken”）];</p><p>媒体管理员已经识别该命令并接受它进行处理。因此，它发送以下响应：</p><p>响应任务[“2”]被接受;</p><p>由于当前正在使用所有驱动器，因此show命令在mount命令之前执行。媒体经理的回应如下：</p><p>响应任务[“2”]成功案文[“LTO-DRIVE-3”“LTO-DRIVE-7”</p><p>“LTO-DRIVE-8”];</p><p>一段时间后，mount命令所需的所有资源都可用。介质管理器指示负责的库管理器将卷所在的盒式磁带发送到适当的驱动器。然后，它指示负责的驱动程序管理器加载盒式磁带并生成驱动器的任务标识符（访问句柄）。然后，应用程序从媒体管理器接收此MountLogical Handle（任务标识符）并使用它来访问卷：</p><p>响应任务[“1”]成功文本[“/ dev / tape / LTO123”];</p><p>然后以这种方式处理一个接一个的命令，直到任务队列为空。</p><p>在示例2中，show命令与match子句一起使用以显示所有有缺陷的驱动器。 “显示”和“匹配”构成了一种强大的查询语言，可用于生成复杂的报告。图形用户界面可以提供预定义的报告，这些报告被转换为相应的MMP命令。</p><p><strong>Example 3</strong> In the spring of 2003 an administrator suspected that drive LT0123 was indicating a high error rate. Now it wants to display all the cartridges mounted in the mentioned drive since 2003 where an error occurred during the mount. The list should be sorted in descending order according to the number of write errors. The corresponding show command would look like the following:</p><p>show task[“1”]</p><p>report[DRIVEACARTRIDGEACCESS.“CartridgePCL”] match[</p><p>and(</p><p>streq(DRIVECARTRIDGEACCESS.“DriveName”“LTO123”)</p><p>strgt(DRIVECARTRIDGEACCESS.“TimeUnmount”</p><p>“2003 01 01 00 00 00 000”)</p><p>or(</p><p>numgt(DRIVECARTRIDGEACCESS.“HardReadErrorCount” “0”) numgt(DRIVECARTRIDGEACCESS.“SoftReadErrorCount” “0”) numgt(DRIVECARTRIDGEACCESS.“HardWriteErrorCount” “0”) numgt(DRIVECARTRIDGEACCESS.“SoftWriteErrorCount” “0”)</p><p>)</p><p>]</p><p>order[numhilo(DRIVECARTRIDGEACCESS.“HardWriteErrorCount”)];</p><p>A characteristic of IEEE 1244 is the extension of the data model during runtime. Applications can add optional attributes to any object in order to file vendor-specific and applications-specific characteristics of objects in the media manager. For example, a backup system could create a list of all files on a cartridge as an attribute or a video rental shop could assign the number of the last customer who rented a particular video cassette (cartridge). MMP provides the appropriate attribute command.</p><p><strong>Example 4</strong> An application wants to set the applications-specific attribute ‘color’ to the value ‘red’ for the drive with the name LTO123. It sends the following command to the media manager:</p><p>attribute task[“3”] set[DRIVE.“Color” “red”];</p><p>match[streq(DRIVE.“DriveName” “LTO123”)];</p><p>The media manager has also recognised this command, accepted it for processing and then sends the following response:</p><p>response task[“3”] accepted;</p><p>The media manager applies this attribute dynamically if it has never been applied to this drive before. Otherwise only the value of the attribute is changed. Lastly, the media manager sends the following message back to the application in order to signal that processing has been successful:</p><p>response task[“3”] success;</p><h1>11.5.3库管理器和驱动器管理器</h1><p>IEEE 1244通过库管理协议（LMP）指定媒体管理器和库管理器之间的接口。库管理器接收媒体管理器的LMP命令，并将它们转换为相应库模型的特定命令。因此，从媒体管理器的角度来看，所有库都存在隐藏相应硬件特征的统一抽象接口。这使得新硬件可以通过合适的库管理器集成到管理系统中，而无需更改整个系统。</p><p>以类似的方式，驱动器管理协议（DMP）指定媒体管理器和驱动器管理器之间的接口，从而使得能够以统一的方式激活不同的驱动器硬件。但是，驱动器管理器必须考虑运行使用介质管理系统的应用程序的不同客户机平台的特定特征。如果应用程序在兼容Unix的平台上运行，则驱动器管理器必须提供设备专用文件的名称，例如/ dev / rmt0，以便访问该驱动器。在Windows下，这种驱动器管理器必须提供特定于Windows的文件名，例如\\。\ TAPE0 \。</p><p>与MMP一样，LMP和DMP协议基于通过TCP / IP交换的文本消息。这两种协议都用于控制硬件，传输磁带（LMP）和将磁带插入驱动器（DMP）。各个LMP消息的语法和语义在规范IEEE 1244.5中描述。 DMP消息在IEEE 1244.4中指定。</p><h1>11.6摘要</h1><p>数据量的大量增长和磁带盒数量的增加需要改进的解决方案，以便有效管理存储网络中的可移动介质。这种系统在存储网络中的要求在很大程度上与磁盘子系统的要求相当。但是，由于可移动介质的特殊属性，例如介质和驱动器的单独存储，还有其他问题需要掌握。</p><p>我们详细描述了可移动介质管理的以下要求：</p><p>集中管理和控制所有资源（如媒体，驱动器和库），使高效管理变得更加容易。</p><p>智能共享库，驱动器和临时池，可以更轻松地有效利用可用资源，并可用于实现高可用性解决方案（跨库驱动器和临时池）。</p><p>用户/应用程序的身份验证和授权有助于遵守数据保护准则和资源分配。</p><p>Mount请求管理（包括请求排队）可提高整个系统的稳健性，并允许对驱动器进行优先处理和分配挂载请求。</p><p>不间断地跟踪介质可确保在每个时间点识别介质的位置，从而防止数据丢失。</p><p>可移动介质的自动化生命周期管理极大地使管理员免于重复发生的任务。</p><p>在线和离线位置的完全集成允许安全概念，其中可移动介质必须存储在受到良好保护的位置。</p><p>Monitoring提供系统中错误的自动记录和处理。基于规则的机制可以执行适当的错误纠正操作，或者可以发出手动干预信号。</p><p>不幸的是，目前（2009年）仍然没有可移动媒体的跨制造商和跨应用程序管理层和接口。因此，每个制造商都会在市场上推出自己的专有系统，这通常是备份解决方案的一部分。这些系统中的一些系统不能协同使用连接硬件的多个实例，因此不能充分利用存储网络中资源共享的潜力。其他解决方案的可扩展性不是很高，这就是为什么它们只能合理地用于一定数量的驱动器或盒式磁带。对于来自多个制造商的不同应用，目前（2009）几乎不可能合作使用所有可移动媒体资源。</p><p>IEEE 1244媒体管理系统标准为有效管理存储网络中的可移动媒体和智能共享资源提供了基础，因此描述了可移动媒体的非对称虚拟化的架构。 由于在TCP / IP上使用基于文本的协议，许多平台可以很容易地利用基于该标准的系统的服务，其方式与广泛的因特网协议（SMTP，HTTP）类似。 该标准解决了处理存储网络中可移动介质时最重要的问题，并提供了解决方案的工具。 特别重要的是不仅为应用程序（MMP）和硬件（LMP和DMP）定义了接口，而且还描述了与这些接口最佳匹配的体系结构。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'存储','网络','Day36'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>