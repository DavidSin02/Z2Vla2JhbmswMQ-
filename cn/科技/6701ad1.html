<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>详解西门子间接寻址之存储器间接寻址 | 极客快訊</title><meta property="og:title" content="详解西门子间接寻址之存储器间接寻址 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/bfbc05d414374de6a7ebfc28981d2208"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6701ad1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6701ad1.html><meta property="article:published_time" content="2020-10-29T20:54:46+08:00"><meta property="article:modified_time" content="2020-10-29T20:54:46+08:00"><meta name=Keywords content><meta name=description content="详解西门子间接寻址之存储器间接寻址"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6701ad1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>详解西门子间接寻址之存储器间接寻址</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><strong>【地址的概念】</strong></p><p>完整的一条指令，应该包含指令符+操作数（当然不包括那些单指令，比如 NOT 等）。其中的操作数是指令要执行的目标，也就是指令要进行操作的地址。</p><p>我们知道，在 PLC 中划有各种用途的存储区，比如物理输入输出区 P、映像输入区 I、映像输出区 Q、位</p><p>存储区 M、定时器 T、计数器 C、 数据区 DB 和 L 等， 同时我们还知道，每个区域可以用位（BIT） 、字节（BYTE） 、字（WORD）、双字（DWORD）来衡量，或者说来指定确切的大小。当然定时器 T、计数器 C 不存在这种衡量体制，它们仅用位来衡量。由此我们可以得到，要描述一个地址，至少应该包含两个要素：</p><p><strong>1、存储的区域</strong></p><p><strong>2、这个区域中具体的位置</strong></p><p>比如：A Q2.0</p><p>其中的 A 是指令符，Q2.0 是 A 的操作数，也就是地址。这个地址由两部分组成：</p><p><strong>Q：指的是映像输出区</strong></p><p><strong>2.0：就是这个映像输出区第二个字节的第 0 位。</strong></p><p>由此，我们得出， 一个确切的地址组成应该是：〖存储区符〗〖存储区尺寸符〗〖尺寸数值〗.〖位数值〗，例如：DBX200.0。</p><p><strong>DB X 200 . 0</strong></p><p>其中，我们又把〖存储区符〗〖存储区尺寸符〗这两个部分合称为：地址标识符。这样，一个确切的地址组成，又可以写成：地址标识符 + 确切的数值单元</p><p><strong>【间接寻址的概念】</strong></p><p>寻址，就是指定指令要进行操作的地址。给定指令操作的地址方法，就是寻址方法。</p><p>在谈间接寻址之前，我们简单的了解一下直接寻址。</p><p><strong>所谓直接寻址，</strong>简单的说，就是直接给出指令的确切操作数，象上面所说的，A Q2.0，就是直接寻址，对于 A 这个指令来说，Q2.0 就是它要进行操作的地址。</p><p>这样看来，<strong>间接寻址</strong>就是间接的给出指令的确切操作数。对，就是这个概念。</p><p>比如：A Q[MD100] ，A T[DBW100]。程序语句中用方刮号 [ ] 标明的内容，间接的指明了指令要进行的地址，这两个语句中的 MD100 和 DBW100 称为指针Pointer，它指向它们其中包含的数值，才是指令真正要执行的地址区域的确切位置。间接由此得名。</p><p>西门子的间接寻址方式计有两大类型：<strong>存储器间接寻址和寄存器间接寻址。</strong></p><p><strong>【存储器间接寻址】</strong></p><p>存储器间接寻址的地址给定格式是：地址标识符+指针。指针所指示存储单元中所包含的数值，就是地址的确切数值单元。</p><p>存储器间接寻址具有两个指针格式：单字和双字。</p><p><strong>单字指针是一个 16bit 的结构，从 0-15bit，指示一个从 0-65535 的数值，这个数值就是被寻址的存储区域的编号。</strong></p><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bfbc05d414374de6a7ebfc28981d2208><p class=pgc-img-caption></p></div><p>16位指针举例：</p><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8e0fe729cec74eb5a9bf4eea79375646><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e0bf1151aa264f0ab36c309701dff770><p class=pgc-img-caption></p></div><p><strong>双字指针是一个 32bit 的结构，从 0-2bit，共三位，按照 8 进制指示被寻址的位编号，也就是 0-7；而从 3-18bit，共 16 位，指示一个从 0-65535 的数值，这个数值就是被寻址的字节编号。</strong></p><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/177b95d70f03487fb9b906b7c37da148><p class=pgc-img-caption></p></div><p>指针可以存放在 M、DI、DB 和 L 区域中，也就是说，可以用这些区域的内容来做指针。</p><p>单字指针和双字指针在使用上有很大区别。下面举例说明：</p><p>L DW#16#35 //将 32 位 16 进制数 35 存入 ACC1</p><p>T MD2 //这个值再存入 MD2，这是个 32 位的位存储区域</p><p>L +10 //将 16 位整数 10 存入 ACC1，32 位 16 进制数 35 自动移动到 ACC2</p><p>T MW100 //这个值再存入 MW100，这是个 16 位的位存储区域</p><p>OPN DBW[MW100] //打开 DBW10。这里的[MW100]就是个单字指针，存放指针的区域是 M 区，MW100 中的值 10，就是指针间接指定的地址，它是个 16 位的值！</p><p>L L#+10 //以 32 位形式，把 10 放入 ACC1，此时，ACC2 中的内容为：16 位整数 10</p><p>T MD104 //这个值再存入 MD104，这是个 32 位的位存储区域</p><p>A I[MD104] //对 I1.2 进行与逻辑操作！</p><p>= DIX[MD2] //赋值背景数据位 DIX6.5！</p><p>A DB[MW100].DBX[MD2] //读入 DB10.DBX6.5 数据位状态</p><p>=Q[MD2] //赋值给 Q6.5</p><p>A DB[MW100].DBX[MD2] //读入 DB10.DBX6.5 数据位状态</p><p><strong>= Q[MW100] //错误！！没有 Q10 这个元件</strong></p><p>从上面系列举例我们至少看出来一点：</p><p>单字指针只应用在地址标识符是非位的情况下。的确，单字指针前面描述过，它确定的数值是 0-65535，</p><p>而对于 byte.bit 这种具体位结构来说，只能用双字指针。这是它们的第一个区别，单字指针的另外一个限制</p><p>就是，它只能对 T、C、DB、FC 和 FB 进行寻址，通俗地说，单字指针只可以用来指代这些存储区域的编号。</p><p>相对於单字指针，双字指针就没有这样的限制，它不仅可以对位地址进行寻址，还可以对 BYTE、WORD、</p><p>DWORD 寻址，并且没有区域的限制。不过，有得必有失，在对非位的区域进行寻址时，必须确保其 0-2bit 为全 0！</p><p>总结一下：</p><p>单字指针的存储器间接寻址只能用在地址标识符是非位的场合；双字指针由于有位格式存在，所以对地址标识符没有限制。也正是由于双字指针是一个具有位的指针，因此，当对字节、字或者双字存储区地址进行寻址时，必须确保双字指针的内容是 8 或者 8 的倍数。</p><p>现在，我们来分析一下上述例子中的 A I[MD104] 为什么最后是对 I1.2 进行与逻辑操作。</p><p>通过 L L#+10 ，我们知道存放在 MD104 中的值应该是：</p><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5f62da5e9f944199b0a7b82bf742d9f5><p class=pgc-img-caption></p></div><p>当作为双字指针时，就应该按照 3-18bit 指定 byte，0-2bit 指定 bit 来确定最终指令要操作的地址，因此：</p><p>0000 0000 0000 0000 0000 0000 0000 1010 = 1.2</p><p>那么上述例子中的= Q[MD2] //赋值给 Q6.5，为什么时对Q6.5进行操作呢？</p><p>同样的道理通过指令<strong>L DW#16#35 </strong>我们MD2中的值为16进制数的35，为32位指针，MD2中的值如下图所示</p><div class=pgc-img><img alt=详解西门子间接寻址之存储器间接寻址 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b8d5ee138917407bbea431e47fed92d9><p class=pgc-img-caption></p></div><p><strong>电气相关知识和经验是用来分享，希望本文能对你有帮助。与人玫瑰，手留余香。</strong></p><p><strong>欢迎大家关注，点赞，评论及转发。</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'接寻址','详解','西门子间'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>