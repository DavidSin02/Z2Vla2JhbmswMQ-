<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>面试官：兄弟，说说Java到底是值传递还是引用传递 | 极客快訊</title><meta property="og:title" content="面试官：兄弟，说说Java到底是值传递还是引用传递 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8427a88278d4440e90b95ad363ecad34"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68200806.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68200806.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68200806.html><meta property="article:published_time" content="2020-11-14T21:00:48+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:48+08:00"><meta name=Keywords content><meta name=description content="面试官：兄弟，说说Java到底是值传递还是引用传递"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/68200806.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>面试官：兄弟，说说Java到底是值传递还是引用传递</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><blockquote class=pgc-blockquote-abstract><p>文章来源：https://mp.weixin.qq.com/s/Wc9rJ0rJ22jTEyCmKDBEsQ</p><p>原文作者：沉默王二</p></blockquote><p>说句实在话，离读者 trust you 发给我这段信息已经过去 1 周时间了。不是我怠慢，确实是可更新的内容实在是太多了。这不，又有两个读者不约而同地要求我更新一下 Java 到底是值传递还是引用传递方面的文章——其实这个问题我之前是写过的，但现在看起来答案似乎不够尽善尽美，所以打算以面试的角度重写一篇。</p><p>七年前，我从温和湿润的苏州回到古色古香的洛阳，抱着一幅“天下我有”的心态“约谈”了几位面试官。其中有一位叫老马，让我印象深刻。因为他当时扔了一个面试题把我砸懵了：说说 Java 到底是值传递还是引用传递吧。</p><p>我当时年轻气盛，自认为所有的面试题都能对答如流，没想到被老马“刁难”了——原来洛阳这块互联网的荒漠也有技术专家啊。现在回想起来，脸上不自觉地就泛起了羞愧的红晕：当时真菜！不管怎么说，是时候写篇文章剖析一下值传递还是引用传递的区别了。</p><p>将参数传递给方法有两种常见的方式，一种是“值传递”，一种是“引用传递”。C 语言本身只支持值传递，它的衍生品 C++ 既支持值传递，也支持引用传递，而 Java 只支持值传递。</p><h3 class=pgc-h-arrow-right>01、值传递 VS 引用传递</h3><p>首先，我们必须要搞清楚，到底什么是值传递，什么是引用传递，否则，讨论 Java 到底是值传递还是引用传递就显得毫无意义。</p><p>当一个参数按照值的方式在两个方法之间传递时，调用者和被调用者其实是用的两个不同的变量——被调用者中的变量（原始值）是调用者中变量的一份拷贝，对它们当中的任何一个变量修改都不会影响到另外一个变量。</p><p>而当一个参数按照引用传递的方式在两个方法之间传递时，调用者和被调用者其实用的是同一个变量，当该变量被修改时，双方都是可见的。</p><p>Java 程序员之所以容易搞混值传递和引用传递，主要是因为 Java 有两种数据类型，一种是基本类型，比如说 int，另外一种是引用类型，比如说 String。</p><p>基本类型的变量存储的都是实际的值，而引用类型的变量存储的是对象的引用——指向了对象在内存中的地址。值和引用存储在 stack（栈）中，而对象存储在 heap（堆）中。</p><div class=pgc-img><img alt=面试官：兄弟，说说Java到底是值传递还是引用传递 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8427a88278d4440e90b95ad363ecad34><p class=pgc-img-caption></p></div><p>之所以有这个区别，是因为：</p><ul><li>栈的优势是，存取速度比堆要快，仅次于直接位于 CPU 中的寄存器。但缺点是，栈中的数据大小与生存周期必须是确定的。</li><li>堆的优势是可以动态地分配内存大小，生存周期也不必事先告诉编译器，Java 的垃圾回收器会自动收走那些不再使用的数据。但由于要在运行时动态分配内存，存取速度较慢。</li></ul><h3 class=pgc-h-arrow-right>02、基本类型的参数传递</h3><p>众所周知，Java 有 8 种基本数据类型，分别是 int、long、byte、short、float、double 、char 和 boolean。它们的值直接存储在栈中，每当作为参数传递时，都会将原始值（实参）复制一份新的出来，给形参用。形参将会在被调用方法结束时从栈中清除。</p><p>来看下面这段代码：</p><pre><code>public class PrimitiveTypeDemo {    public static void main(String[] args) {        int age = 18;        modify(age);        System.out.println(age);    }    private static void modify(int age1) {        age1 = 30;    }}</code></pre><p>1）main 方法中的 age 是基本类型，所以它的值 18 直接存储在栈中。</p><p>2）调用 modify() 方法的时候，将为实参 age 创建一个副本（形参 age1），它的值也为 18，不过是在栈中的其他位置。</p><p>3）对形参 age 的任何修改都只会影响它自身而不会影响实参。</p><div class=pgc-img><img alt=面试官：兄弟，说说Java到底是值传递还是引用传递 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a998c8f885f8469485603cdc5f29c260><p class=pgc-img-caption></p></div><p>03、引用类型的参数传递</p><p>来看一段创建引用类型变量的代码：</p><pre><code>Writer writer = new Writer(18, "沉默王二");</code></pre><p>writer 是对象吗？还是对象的引用？为了搞清楚这个问题，我们可以把上面的代码拆分为两行代码：</p><pre><code>Writer writer;writer = new Writer(18, "沉默王二");</code></pre><p>假如 writer 是对象的话，就不需要通过 new 关键字创建对象了，对吧？那也就是说，writer 并不是对象，在“=”操作符执行之前，它仅仅是一个变量。那谁是对象呢？new Writer(18, "沉默王二")，它是对象，存储于堆中；然后，“=”操作符将对象的引用赋值给了 writer 变量，于是 writer 此时应该叫对象引用，它存储在栈中，保存了对象在堆中的地址。</p><p>每当引用类型作为参数传递时，都会创建一个对象引用（实参）的副本（形参），该形参保存的地址和实参一样。</p><p>来看下面这段代码：</p><pre><code>public class ReferenceTypeDemo {    public static void main(String[] args) {        Writer a = new Writer(18);        Writer b = new Writer(18);        modify(a, b);        System.out.println(a.getAge());        System.out.println(b.getAge());    }    private static void modify(Writer a1, Writer b1) {        a1.setAge(30);        b1 = new Writer(18);        b1.setAge(30);    }}</code></pre><p>1）在调用 modify() 方法之前，实参 a 和 b 指向的对象是不一样的，尽管 age 都为 18。</p><div class=pgc-img><img alt=面试官：兄弟，说说Java到底是值传递还是引用传递 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3617788f92e04c3f9846c3c468d564b0><p class=pgc-img-caption></p></div><p>2）在调用 modify() 方法时，实参 a 和 b 都在栈中创建了一个新的副本，分别是 a1 和 b1，但指向的对象是一致的（a 和 a1 指向对象 a，b 和 b1 指向对象 b）。</p><div class=pgc-img><img alt=面试官：兄弟，说说Java到底是值传递还是引用传递 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8b91750404f0497fad1638f16ae60234><p class=pgc-img-caption></p></div><p>3）在 modify() 方法中，修改了形参 a1 的 age 为 30，意味着对象 a 的 age 从 18 变成了 30，而实参 a 指向的也是对象 a，所以 a 的 age 也变成了 30；形参 b1 指向了一个新的对象，随后 b1 的 age 被修改为 30。</p><div class=pgc-img><img alt=面试官：兄弟，说说Java到底是值传递还是引用传递 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/557e4b239a6d40efb64b0c46335eeaa1><p class=pgc-img-caption></p></div><p>修改 a1 的 age，意味着同时修改了 a 的 age，因为它们指向的对象是一个；修改 b1 的 age，对 b 却没有影响，因为它们指向的对象是两个。</p><p>程序输出的结果如下所示：</p><pre><code>3018</code></pre><p>果然和我们的分析是吻合的。</p><p>好了，我亲爱的读者朋友，以上就是本文的全部内容了。看完之后，再遇到面试官问 Java 到底是值传递还是引用传递时，就不用担心被刁难了。</p><p><br></p><blockquote class=pgc-blockquote-abstract><p>对了，在这里说一下，我目前是在职Java开发，如果你现在正在学习Java，了解Java，渴望成为一名合格的Java开发工程师，在入门学习Java的过程当中缺乏基础入门的视频教程，可以关注并私信我：01。获取。我这里有最新的Java基础全套视频教程。</p></blockquote></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'传递','面试','Java'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>