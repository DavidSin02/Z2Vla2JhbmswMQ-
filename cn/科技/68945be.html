<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 | 极客快訊</title><meta property="og:title" content="「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1524970891298480cc31a70"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68945be.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/68945be.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/68945be.html><meta property="article:published_time" content="2020-10-29T21:00:31+08:00"><meta property="article:modified_time" content="2020-10-29T21:00:31+08:00"><meta name=Keywords content><meta name=description content="「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/68945be.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1524970891298480cc31a70></p><p>1 引言</p><p>PLC输出的集成脉冲可通过步进电机进行定位控制。关于定位控制，调节和控制操作之间存在一些区别。步进电机不需要连续的位置控制，而在控制操作中得到应用。在以下的程序例子中，借助于CPU214所产生的集成脉冲输出，通过步进电机来实现相对的位置控制。虽然这种类型的定位控制不需要参考点，本例还是粗略地描述了确定参考点的简单步骤。因为实际上它总是相对一根轴确定一个固定的参考点，因此，用户借助于一个输入字节的对偶码(Dual coding)给CPU指定定位角度。用户程序根据该码计算出所需的定位步数，再由CPU输出相关个数的控制脉冲。</p><p>2 系统结构</p><p>如图1所示。</p><p><img alt=「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1524970773988af40a2c468></p><p>图1 系统结构</p><p>3 硬件配置</p><p><img alt=「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15249707824473dc00771a0></p><p><img alt=「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15249707988350458ca024c></p><p>如表1所示。</p><p>4 软件结构</p><p>4.1 PLC的输入信号与输出信号</p><p>PLC的部分输入信号与输出信号，以及标志位如表2所示。</p><p>4.2 系统软件设计</p><p>PLC的程序框图如图2所示。</p><p><img alt=「工控知识」西门子S7-200PLC控制步进电机定位系统案例详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/152497081236995faa4371c></p><p>4.3 初始化</p><p>在程序的第一个扫描周期(SM0.1=1)，初始化重要参数。选择旋转方向和解除联锁。</p><p>4.4 设置和取消参考点</p><p>如果还没有确定参考点，那么参考点曲线应从按“START”按扭(I1.0)开始。CPU有可能输出最大数量的控制脉冲。在所需的参考点，按“设置/取消参考点”开关(I1.4)后，首先调用停止电机的子程序。然后，将参考点标志位M0.3置成1，再把新的操作模式“定位控制激活”显示在输出端Q1.0。</p><p>如果I1.4的开关已激活，而且“定位控制”也被激活(M0.3=1)，则切换到“参考点曲线”参考点曲线。在子程序1中，将M0.3置成0，并取消“定位控制激活”的显示(Q1.0=0)。此外，控制还为输出最大数量的控制脉冲做准备。当再次激活I1.4开关，便在两个模式之间切换。如果此信号产生，同时电机在运转，那么电机就自动停止。</p><p>实际上，一个与驱动器连接的参考点开关将代替手动操作切换开关的使用，所以，参考点标志能解决模式切换。</p><p>4.5 定位控制</p><p>如果确定了一个参考点(M0.3=1)而且没有联锁，那么就执行相对的定位控制。在子程序2中，控制器从输入字节IBO读出对偶码方式的定位角度后，再存入字节MB11。与此角度有关的脉冲数，根据下面的公式计算:</p><p>N=φ/360°×S</p><p>式中:N-控制脉冲数</p><p>φ-旋转角度</p><p>S-每转所需的步数</p><p>该程序所使用的步进电机采用半步操作方式(S=1000)。在子程序3中循环计算步数，如果现在按“START”按钮(I1.0)，CPU将从输出端Q0.0输出所计算的控制脉冲个数，而且电机将根据相应的步数来转动，并在内部将“电机转动”的标志位M0.1置成1。</p><p>在完整的脉冲输出之后，执行中断程序0，此程序将M0.1置成0，以便能够再次起动电机。</p><p>4.6 停止电机</p><p>按“STOP”(停止)按扭(I1.1)，可在任何时候停止电机。执行子程序0中与此有关的指令。</p><p>5 程序和注释</p><p>//标题:用脉冲输出进行定位控制</p><p>//主程序</p><p>LD SM0.1</p><p>//仅首次扫描周期SM0.1才为1。</p><p>R M0.0，128</p><p>//MD0至MD12复位</p><p>ATCH 0，19</p><p>//把中断程序0分配给中断事件19(脉冲串终止)</p><p>ENI</p><p>//允许中断</p><p>//脉冲输出功能的初始化</p><p>MOVW 500，SMW68</p><p>//脉冲周期T=500us</p><p>MOVW 0,SMW70</p><p>//脉冲宽度为0(脉冲调制)</p><p>MOVD 429496700，SMD72</p><p>//为参考点设定的最大脉冲数</p><p>//设置逆时针旋转</p><p>LDN M0.1 //若电机停止</p><p>A I1.5 //且旋转方向开关=1</p><p>S Q0.2，1 //则逆时针旋转(Q0.2=1)</p><p>//设置顺时针旋转</p><p>LDN M0.1 //若电机停止</p><p>AN I1.5 //且旋转方向开关=0</p><p>R Q0.2，1 //则逆时针旋转(Q0.2=0)</p><p>//联锁</p><p>LD I1.1</p><p>//若按“STOP”(停止)按钮</p><p>S M0.2，1 //则激活联锁(M0.2=1)</p><p>//解除联锁</p><p>LDN I1.1</p><p>//若“START”(启动)按钮松开</p><p>AN I1.0</p><p>//且“STOP”(停止)按钮松开</p><p>R M0.2，1 //则解除联锁(M0.2=0)</p><p>//确定操作模式(参考点定位控制)</p><p>LD I1.4</p><p>//若按“设置/取消参考点”按钮</p><p>EU //上升沿</p><p>CALL 1 //则调用子程序1</p><p>//启动电机</p><p>LD I1.0</p><p>//若按“START”(启动)按钮</p><p>EU //上升沿</p><p>AN M0.1 //且电机停止</p><p>AN M0.2 //且无联锁</p><p>AD≥ SMD72，1</p><p>//且步数≥1，则</p><p>MOVB 16#85，SMB67</p><p>//置脉冲输出功能(PTO)的控制位</p><p>PLS 0 //启动脉冲输出(Q0.0)</p><p>S M0.1，1</p><p>//“电机运行”标志位置位(M0.1=1)</p><p>//定位控制</p><p>LD M0.3</p><p>//若已激活“定位控制” 操作模式</p><p>AN M0.1 //且电机停止</p><p>CALL 2 //则调用子程序2</p><p>//停止电机</p><p>LD I1.1</p><p>//若按“STOP”(停止)按钮</p><p>EU //上升沿</p><p>A M0.1 //且电机运行，则</p><p>CALL 0 //则调用子程序0</p><p>MEND //主程序结束</p><p>//子程序1</p><p>SBR 0 //子程序0停止电机</p><p>MOVB 16#CB，SMB67</p><p>//激活脉宽调制</p><p>PLS 0 //停止输出脉冲到Q0.0</p><p>R M0.1，1</p><p>//“电机运行”标志位复位(M0.1=0)</p><p>RET //子程序0结束</p><p>SBR1</p><p>//子程序1，“确定操作模式”</p><p>LD M0.1 //若电机运行</p><p>CALL 0</p><p>//则调用子程序0，停止电机</p><p>//申请“参考点曲线”</p><p>LD M0.3</p><p>//若已激活“定位控制”，则</p><p>R M0.3，1</p><p>//参考点标志位;复位(M0.3=0)</p><p>R Q1.0，1</p><p>//取消“定位控制激活”信息(Q1.0=0)</p><p>MOVD 429496700，SMD72</p><p>//为新的“参考点曲线”设定最大的脉冲数。</p><p>CRET</p><p>//条件返回到主程序。</p><p>//申请“定位控制”</p><p>LDN M0.3</p><p>//若未设置参考点(M0.3=0)，则</p><p>S M0.3，1</p><p>//参考点标志位置位(M0.3=1)</p><p>S Q1.0，1</p><p>//输出“定位控制激活”信息(Q1.0=1)</p><p>RET //子程序1结束</p><p>//子程序2</p><p>SBR2 //子程序2，“定位控制”</p><p>MOVB IB0，MB11</p><p>//把定位角度从IBO拷到MD8的最低有效字节MB11。</p><p>R M8.0，24</p><p>//MB8至MB10清零</p><p>DIV 9，MD8</p><p>//角度/9=q1+r1</p><p>MOVW MW8，MW14</p><p>//把r1存入MD12</p><p>MUL 25，MD8</p><p>//q1×25→MD8</p><p>MUL 25，MD12</p><p>DIV 9，MD12</p><p>// r1×25／9= q2+r2</p><p>CALL 3</p><p>//在子程序3中循环步数</p><p>MOVW 0，MW12 //删除r2</p><p>+D MD12，MD8</p><p>//把步数写入MD8</p><p>MOVD MD8，SMD72</p><p>//把步数传到SMD72</p><p>RET //子程序2结束</p><p>//子程序3</p><p>SBR3 //子程序3，“循环步数”</p><p>LDW≥MW12，5 //如果r2≥5／9，则</p><p>INCW MW14 //步数增加1。</p><p>RET</p><p>//子程序3结束</p><p>//中断程序0，“脉冲输出终止”</p><p>INT0 //中断程序0</p><p>R M0.1，1</p><p>//“电机运行”标志位复位(M0.1=0)</p><p>RET //子程序0结束</p><p>6 结束语</p><p>通过对硬件和软件的合理设计，用较为价廉的西门子S7-200系列PLC作为核心控制部件，构成的定位系统能够达到精确定位的目的。特别应指出的是通过灵活、巧妙的应用PLC的指令系统，可使系统实现高精度定位。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'工控','知识','西门子'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>