<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） | 极客快訊</title><meta property="og:title" content="WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/46d4000627e95ba58119"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/694644a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/694644a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/694644a.html><meta property="article:published_time" content="2020-10-29T21:06:59+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:59+08:00"><meta name=Keywords content><meta name=description content="WEB自动化测试基础：元素定位基础详解（JAVA+Selenium）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/694644a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>WEB自动化测试基础：元素定位基础详解（JAVA+Selenium）</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d4000627e95ba58119></p><p>前面几篇文章都详细介绍了环境搭建的一些操作，方便大家自己搭建自动化测试环境。其实对于环境搭建，建议大家多搭建几次，因为在不同的环境下、不同的浏览器版本、不同的selenium版本都会存在各种各样的异常问题，熟练地环境搭建技能在工作中会使你如鱼得水~真的，不骗人。</p><p>对于刚刚接触自动化测试的朋友，或者刚刚学会环境搭建的朋友来讲，其实已经迫不及待的想要完成自动化测试了，这种心情我非常理解，因为我也是这样过来的。但是我有一言：大家不妨压制住自己内心的躁动，扎扎实实从基础学起。</p><p>这是我的血泪教训。</p><p>好了，一如既往，我会尽量详细的介绍元素定位基础操作。另外，本次基础操作基于Selenium+Java，后面的文章会介绍Selenium+Python，朋友们可以持续关注。</p><p><strong>首先</strong>，我们先来回顾下环境搭建完毕后，我们用来测试环境搭建是否成功的例子：</p><pre>WebDriver driver = new FirefoxDriver();Driver.get("http://youdao.com");WebElemnet element = driver.findElement(By.id("translateContent"));element.sendKeys("selenium");</pre><p>我们先来看一下每一行代码是什么意思？他是干什么的？（不要嫌麻烦哦~）</p><pre>WebDriver driver = new FirefoxDriver(); //初始化一个FirefoxDriver类型的对象，名叫driver</pre><pre>Driver.get("http://youdao.com"); //使用driver对象打开有道首页</pre><pre>WebElemnet element = driver.findElement(By.id("translateContent")); //使用driver对象找到Html属性id=translateContent的元素，也就是有道搜索的输入框，名叫element</pre><pre>element.sendKeys("selenium"); //向element输入框对象中输入“selenium”关键字</pre><p>从上面我们可以看出，自动化的语法是要先找到需要操作的元素对象，比如说driver和element；然后这个对象调用相应的API的方法，比如说get和sentKeys；然后再传入数据，比如说By.id("translateContent")和"selenium"；最后进行我们所预设的自动化的操作。</p><p>我们将UI自动化测试的语法，整理成一个表格：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d80001c417722e4475></p><p>我们可以看到，表格中有3列，分别是<strong>对象</strong>、<strong>操作</strong>和<strong>数据</strong>，我们分行来看：</p><p>第一行：浏览器driver对象，调用get方法，打开有道首页</p><p>第二行：浏览器driver对象，调用findElement方法，传入数据By.id("translateContent")，找到输入框元素</p><p>第三行：输入框元素element，调用sendKeys方法，传入selenium关键字数据，进行搜素</p><p>从上面可以看出，<strong>UI自动化的语法=</strong></p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d6000201c1db2b5758></p><p><strong>WEB元素定位语法</strong></p><p>在每一个web页面中，充满了大量的web元素，比如说每一个按钮、连接、图片、文字等等都是web元素，更准确的说他们是Html元素。</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46d70001f89328823b6a></p><p>在seleniumwebdriver中，每一个页面上的web元素都可以对应到一个WebElement对象；WebElement对象则可以通过WebDriver实例来获得。在这里selenium提供了一个寻找web元素的方法：<strong>findElement 。</strong></p><p>在Java中，查找元素的方法通过一个定位器来定位web元素，这个定位器叫做<strong>By。</strong></p><p><strong>接下来我们聊聊元素定位的几种方法。</strong></p><p><strong>首先，</strong>元素可以通过ID来定位。通过元素ID是元素定位最有效和最为推荐的方法。</p><p>元素（element）ID</p><p>页面中的格式：&lt;element id = "value"></p><p>我们来看一下有道首页输入框的元素ID如何来查看（PS：下面元素查看方法相同，我的文章风格比较详细、啰嗦，大神可以忽略。）</p><p>a、访问有道首页，选中输入框，点击右键，选择“检查”（谷歌浏览器）或“查看元素”（火狐浏览器）</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d5000579f473033332></p><p>b、点击“检查”或“查看元素”，元素ID如下图所示</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d5000579f9e5b88cc3></p><p>找到了元素ID，我们就可以通过"translateContent"这个ID来找到输入框元素。在selenium中的写法：</p><pre>WebElement element = driver.findElement(By.id("translateContent")) //driver对象调用findElement方法，传入数据(By.id("translateContent"))</pre><p>这里的By就是selenium的定位器，By.id就是通过id来定位元素；很容易联想，还有其他定位元素的方法。</p><p><strong>再来看，</strong>元素可以通过Name来定位。</p><p>页面中的格式：&lt;element name= "value"></p><p>同样我们依旧可以用有道搜索框的例子来查看元素name，如下图：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d40006294cba652557></p><p>在selenium中的写法：</p><pre>WebElement element = driver.findElement(By.name("q"));</pre><p>这里可以看到，我们传入的数据变成了By.nama("q")，简单说就是使用name定位器来定位name=q的元素。</p><p><strong>继续看，</strong>元素可以通过Class Name来定位。</p><p>页面中的格式：&lt;element class= "value"></p><p>同样按照之前的步骤，我们在Html查看器中，找到【精选阅读】tab，查看搜索框元素class属性的值，如下图：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d70001f895143218ac></p><p>因此，使用class定位器在selenium中的写法是：</p><pre>WebElement element = driver.findElement(By.className("active"));</pre><p><strong>另外，</strong>selenium还支持通过超链接文本来定位元素。</p><p>页面中的格式：&lt;element href= "value">LinkText&lt;/element></p><p>在页面中通常有大量的包含连接的元素，一个包含连接的元素通常是这样的格式：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d5000579f8bd2f1dd7></p><p>那么我们要找的是连接的文本，也就是“下载词典客户端”，通过这几个汉字我么也可以找到这个元素：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d60002027d3a247366></p><p>在selenium中的写法是：</p><pre>WebElement element = driver.findElement(By.linkText("下载词典客户端"));</pre><p>那么有时候超链接的文本非常的长，如果使用一长串的文字来定位会使我们的代码显得不够优雅，<strong>那么我们可以使用缺省超链接文本来定位元素</strong>。</p><p>页面中的格式：&lt;element href= "value">PartialLinkText&lt;/element></p><p>还是刚才的例子，我们找到“下载词典客户端”这个元素的位置：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46d5000579fac25039fe></p><p>这次我们只使用“客户端”这三个汉字来定位元素，对应在selenium中的使用方法：</p><pre>WebElement element = driver.findElement(By.partialLinkText("客户端"));</pre><p>在实际的自动化测试工作中，我们发现在同一个页面会有多个元素拥有同样的属性，那么我们通过这个属性定位到的元素是不是就有很多呢？</p><p>没错，在selenium中我们可以获取同样属性的所有元素。我们以缺省超链接文本定位方法为例，我们来获取一下所有包含“有道”这两个汉字的超链接文本元素。在selenium中的写法如下：</p><pre>List&lt;WebElement&gt; elemenets = driver.findElements(By.partialLinkText("有道"));</pre><p>特别注意：我们元素定位定位调用的方法变成了“findElements”，该方法返回的是一个元素集合的list。</p><p>为了便于观察，我们把获取到所有元素的文本都打印出来：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46da000197fbe1ed21b6></p><p>对应到页面上的我们可以找到这些超链接文本的位置：</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d90001b3488cb16cc7></p><p>在页面中，每个元素都有一个tag，简单可以理解为html元素类型；<strong>我们也可以使用这个tag来找到对应的元素</strong>。</p><p>页面中的格式：&lt;tag class= "value">&lt;/tag></p><p>我们依旧使用有道搜索框作为例子，我们这次不是使用id或者name等属性来定位元素，从下图我们可以看到，这个元素本身是一个input类型的元素，那么我们就用input类型这个tag本身来定位元素</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d80001c4ec24f493e2></p><p>在selenium中的写法：</p><pre>WebElement element = driver.findElement(By.tagName("input"));</pre><p>另外，刚才提到了在页面中通常会有多个元素有着同样的tag，比如同样是input类型的元素，页面上有多个</p><p><img alt=WEB自动化测试基础：元素定位基础详解（JAVA+Selenium） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46d90001b34a72fd1bc0></p><p>那么我们上面使用input类型来定位的元素，最终会定位到那个元素上呢？</p><p><strong>在元素定位的过程中，如果页面上存在多个满足条件的元素，findElement方法只会返回页面树状结构中自上而下的第一个满足条件的元素。</strong></p><p>下面的代码，是模拟id、classname、和paartialLinkText三种方法定位元素的例子，大家可以看一下：</p><pre>import java.util.List;import org.openqa.selenium.By;import org.openqa.selenium.JavascriptExecytor;import org.openqa.selenium.WebDriver;import org.openqa.selenium.WebElement;import org.openqa.selenium.firefox.FirefoxDriver;public class Elementlocating{ static WebElement highlighted = null; public static void main(string[] args){ //初始化firefoxdriver对象 WebDriver driver = new FirefoxDriver(); //开启有道首页 driver.get("http://www.youdao.com/"); //找到有道logo页面元素对应的WebElement对象 WebElement logo = driver.findElement(By.id("logo")); //highlight方法为selenium高级应用，用于高亮显示页面元素 highlight(driver,logo); //找到“精选阅读”页面元素对应的WebElement对象 WebElement read = driver.findElement(By.className("active")); highlight(driver,read); //找到含有“有道”的页面链接对应的对象列表 List&lt;WebElement&gt; elemenets = driver.findElements(By.partialLinkText("有道")); for(WebElement element:elements){ highlight(driver,elements); } //关闭浏览器 driver.quit(); }}public static void highlight(WebDriver driver, WebElement element) { JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript("element = arguments[0];" + "original_style = element.getAttribute('style');" + "element.setAttribute('style', original_style + \";" + "background: blue; border: 2px solid red;\");" + "setTimeout(function(){element.setAttribute('style', original_style);}, 1000);", element);}</pre><p>其实从以上我们看出，web自动化的核心就是找到一个又一个webelement元素，无论是输入框、按钮、选择框等页面元素，都有着id、name、class等公共属性，以及getid、click、sedkeys等公共方法；总结这些规律，定义一个公共的抽象类，这便是selenium webdriver的核心思想WebElement类的由来。</p><p>大家在练习或工作中会遇到各种各样的错误、问题，不要急躁，一个个问题去解决，去研究自己代码的每一次报错；如果你有心，记录下这些错误，这将是你日后工作的百宝箱！</p><p>当然，我说的这些只是基础的基础，定位方法还有很多比如通过Xpath定位的方法；贪多嚼不烂，如果是真想学习自动化测试，还是脚踏实地的来吧。</p><p><strong>最后，如果您觉得我的文章对您有所帮助，那么烦请您帮忙关注并分享出去，希望这篇文章实现她的价值~！！！</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'基础','WEB','自动化'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>