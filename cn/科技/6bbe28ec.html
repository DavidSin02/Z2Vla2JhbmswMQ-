<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「收藏」西门子1200PLC点对点通信实例 | 极客快訊</title><meta property="og:title" content="「收藏」西门子1200PLC点对点通信实例 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RVIuff31JnAHm4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bbe28ec.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bbe28ec.html><meta property="article:published_time" content="2020-11-14T21:08:02+08:00"><meta property="article:modified_time" content="2020-11-14T21:08:02+08:00"><meta name=Keywords content><meta name=description content="「收藏」西门子1200PLC点对点通信实例"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6bbe28ec.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「收藏」西门子1200PLC点对点通信实例</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>在此示例中，S7-1200 CPU 通过 CM 1241 RS232 模块与装有终端仿真器的 PC 通信。此示例中的点对点组态和 STEP 7 程序说明了CPU如何从 PC 接收消息和将该消息回送到 PC。</p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RVIuff31JnAHm4><p>必须将 CM 1241 RS232 模块的通信接口连接到 PC 的 RS232 接口（通常为 COM1）。由于这两个端口都是数据终端设备 (DTE)，所以在连接这两个端口时必须交换接收和发送引脚（引脚 2 和 3），可通过以下任何一种方法实现交换：</p><ul><li><p>使用NULL 调制解调器适配器和标准RS232 电缆交换引脚 2 和 3。</p></li><li><p>使用已交换引脚2和 3 的 NULL 调制解调器电缆。通常可以将电缆两端是否带有两个 9 针 D 型母头连接器作为识别 NULL 调制解调器电缆的依据。</p></li></ul><p></p><h2><strong>组态通信模块</strong></h2><p>可通过 STEP 7 中的设备组态或通过用户程序指令来组态 CM 1241。此示例使用设备组态方法。</p><ul><li><p>端口组态：在“设备组态”(Device configuration) 中单击 CM模块的通信端口，然后如下所示组态该端口：</p></li></ul><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIuffQ9tMgGPg><p></p><h3><strong>说明</strong></h3><p>“操作模式”和“接收线路初始状态”的组态设置，只适用于 CM 1241 (RS422/RS485) 模块。其它 CM 1241 模块没有这些端口组态设置。</p><p>传送消息组态：接受传送消息组态的默认值。在消息开始时将不发送中断信号。</p><p>接收消息开始组态：将CM 1241 组态为在通信线路处于非激活状态至少 50个位时间（在 9600 波特时约为 5 毫秒 = 50 * 1/9600）时开始接收消息：</p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIuffk8I4qIra><p>接收消息结束组态：将 CM 1241 组态为在最多接收到 100 个字节或换行字符（十进制数 10 或十六进制数 a）时结束消息。结束序列最多允许序列中具有五个结束字符。该序列中的第五个字符是换行字符。前面四个结束序列字符均是“不相关”字符或不选择的字符。CM 1241 不评估“不相关”字符，但会在零或更多“不相关”字符后面寻找指示消息结束的换行字符</p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RVIufg33Otsw05><p></p><h2><strong>RS422</strong><strong>和</strong><strong>RS485</strong><strong>工作模式</strong></h2><h3><strong>组态</strong><strong>RS422</strong></h3><p>对于 RS422 模式，有三种工作模式，具体取决于网络组态。根据网络中的设备选择其中一种工作模式。接收线路初始状态的不同选择参考了如下所示的详细情况。</p><ul><li><p>全双工(RS422)四线制模式（点对点连接）：在网络中有两台设备时选择此选项。在接收线路初始状态中：</p></li></ul><p>– 在提供偏置和终端时（第 3 种情况），选择无。</p><p>– 选择正向偏置以使用内部偏置和终端（第 2 种情况）。</p><p>– 选择反向偏置以使用内部偏置和终端，并为两台设备启用电缆断线检测（第 1</p><p>种情况）。</p><ul><li><p>全双工(RS422)四线制模式（多点主站）：当网络具有一个主站和多个从站时，为主站选择此选项。在接收线路初始状态中：</p></li></ul><p>– 在提供偏置和终端时（第 3 种情况），选择无。</p><p>– 选择正向偏置以使用内部偏置和终端（第 2 种情况）。</p><p>– 在此模式下，不能进行电缆断线检测。</p><ul><li><p>全双工(RS422)四线制模式（多点从站）：当网络具有一个主站和多个从站时，为所有从站选择此选项。在接收线路初始状态中：</p></li></ul><p>– 在提供偏置和终端时（第 3 种情况），选择无。</p><p>– 选择正向偏置以使用内部偏置和终端（第 2 种情况）。</p><p>– 选择反向偏置以使用内部偏置和终端，并为从站启用电缆断线检测（第 1种情况）。</p><p><strong>第</strong><strong>1</strong><strong>种情况：</strong><strong>RS422</strong><strong>，带电缆断线检测</strong></p><ul><li><p>工作模式：RS422</p></li><li><p>接收线路初始状态：反向偏置（有偏置，R(A)> R(B) > 0V）</p></li><li><p>电缆断线：启用电缆断线检测（发送器始终处于激活状态）</p></li></ul><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIufgN3UuSMel><p><strong>第</strong><strong>2</strong><strong>种情况：</strong><strong>RS422</strong><strong>，不带电缆断线检测，正向偏置</strong></p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIufmgGjb1zC6><p><strong>第</strong><strong>3</strong><strong>种情况：</strong><strong>RS422</strong><strong>：</strong><strong>不带电缆断线检测，无偏置</strong></p><ul><li><p>工作模式：RS422</p></li><li><p>接收线路初始状态：无偏置</p></li><li><p>电缆断线：无电缆断线检测（发送器仅在发送时才启用） 偏置和终端由用户在网络末端节点处添加。</p></li></ul><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIufn2J8GCLn9><p><strong>组态</strong><strong>RS485</strong></p><p>对于 RS485 模式，只有一种工作模式。接收线路初始状态的不同选择参考了如下所示的详细情况。</p><ul><li><p>半双工(RS485)两线制模式。在接收线路初始状态中：</p></li></ul><p>– 在提供偏置和终端时（第 5 种情况），选择无。</p><p>– 选择正向偏置以使用内部偏置和终端（第 4 种情况）。</p><p><strong>第</strong><strong>4</strong><strong>种情况：</strong><strong>RS485</strong><strong>：</strong><strong>正向偏置</strong></p><ul><li><p>工作模式：RS485</p></li><li><p>接收线路初始状态：正向偏置（有偏置，R(B) > R(A) > 0V）</p></li></ul><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RVIufnL9bnNHx7><p><strong>第</strong><strong>5</strong><strong>种情况：</strong><strong>RS485</strong><strong>：</strong><strong>无偏置（外部偏置）</strong></p><ul><li><p>工作模式：RS485</p></li><li><p>接收线路初始状态：无偏置（需要外部偏置）</p></li></ul><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIufnbEdKM6Fe><p></p><h2><strong>编写</strong><strong>STEP</strong><strong>7</strong><strong>程序</strong></h2><p>此示例程序使用全局数据块作为通信缓冲区，使用 RCV_PTP 指令从终端仿真器接收数据，使用 SEND_PTP 指令向终端仿真器回送缓冲数据。要对该示例编程，需要添加数据块组态和主程序块 OB1，如下所述。</p><p><strong>全局数据块</strong><strong>“Comm_Buffer”</strong><strong>：</strong>创建一个全局数据块 (DB) 并将其命名为“Comm_Buffer”。在该数据块中创建一个名为“buffer”，数据类型为“字节数组 [0 .. 99]”的值。</p><p><strong>程序段</strong><strong>1</strong><strong>：</strong>只要 SEND_PTP 未激活，就启用 RCV_PTP 指令。在程序段 4 中，MW20.0 中的 Tag_8 在发送操作完成时进行指示，因此是在通信模块相应地准备好接收消息时进行指示。</p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RVIufnusm8DHt><p><strong>程序段</strong><strong>2</strong><strong>：</strong>使用由 RCV_PTP 指令设置的 NDR 值（M0.0 中的 Tag_1）来复制接收到的字节数，并使一个标记（M20.0 中的 Tag_8）置位以触发 SEND_PTP 指令。</p><p><strong>程序段</strong><strong>3</strong><strong>：</strong>M20.0 标记置位时启用 SEND_PTP 指令。同时还使用此标记将 REQ 输入设置为 TRUE 一个扫描周期时间。REQ 输入会通知 SEND_PTP 指令要传送新请求。REQ 输入必须仅在 SEND_PTP 的一个执行周期内设置为 TRUE。每个扫描周期都会执行 SEND_PTP 指令，直到传送操作完成。CM 1241 传送完消息的最后一个字节时，传送操作完成。传送操作完成后，DONE 输出（M10.0 中的 Tag_5）将被置位为 TRUE 并持续 SEND_PTP 的一个执行周期。</p><img alt=「收藏」西门子1200PLC点对点通信实例 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RVIuft4Fhkv8Wo><p><strong>程序段</strong><strong>4</strong><strong>：</strong>监视 SEND_PTP 的 DONE 输出并在传送操作完成时复位传送标记（M20.0 中的 Tag_8）。传送标记复位后，程序段 1 中的 RCV_PTP 指令可以接收下一条消息。</p><p></p><h2><strong>组态终端仿真器</strong></h2><p>必须设置终端仿真器以支持此示例程序。几乎可以在 PC 上使用任何终端仿真器，例如，超级终端。确定终端仿真器处于断开模式后，如下所述编辑各设置：</p><ol><li><p>将终端仿真器设置为使用PC 上的 RS232 端口（通常为 COM1）。</p></li><li><p>将端口组态为 9600 波特、8 个数据位、无奇偶校验（无）、1个停止位和无流控制。</p></li><li><p>更改终端仿真器设置使其仿真 ANSI终端。</p></li><li><p>组态终端仿真器ASCII 设置，使其在每行后（用户按下 Enter 键后）发送换行信号。</p></li><li><p>本地回送字符，以便终端仿真器显示输入的内容。</p></li></ol><p></p><h2><strong>运行示例程序</strong></h2><p>要运行示例程序，请执行以下步骤：</p><ol><li><p>将STEP 7 程序下载到 CPU 并确保其处于 RUN 模式。</p></li><li><p>单击终端仿真器上的“连接”(connect) 按钮以应用组态更改并启动与 CM1241的终端会话。</p></li></ol><ol><li><p>在PC 中键入字符并按 Enter 键。</p></li></ol><p>终端仿真器会将输入的字符发送到 CM 1241 和 CPU。然后，CPU 程序将这些字符回送到终端仿真器。</p><p>免责声明：以上内容转载自北极星电气招聘网，所发内容不代表本平台立场</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'西门子','1200PLC','点对点'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>