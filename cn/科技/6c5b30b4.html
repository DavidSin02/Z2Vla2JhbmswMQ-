<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>存储网络 Day39 可移动媒体管理 | 极客快訊</title><meta property="og:title" content="存储网络 Day39 可移动媒体管理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/df32fd0c64f54c569f7ad31154f33525"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6c5b30b4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6c5b30b4.html><meta property="article:published_time" content="2020-11-14T21:02:52+08:00"><meta property="article:modified_time" content="2020-11-14T21:02:52+08:00"><meta name=Keywords content><meta name=description content="存储网络 Day39 可移动媒体管理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6c5b30b4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>存储网络 Day39 可移动媒体管理</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>12.2.9基于对象的存储设备（OSD）</strong></h1><p>SNIA共享存储模型定义了所谓的基于对象的存储设备（OSD）。这种架构背后的想法是将文件的位置数据和访问权限移动到单独的OSD。 OSD提供与文件共享解决方案相同的优势，并且由于主机直接访问存储而提高了性能，并且文件的中央元数据管理。 OSD方法的功能如下（图12.19）：</p><p>OSD设备导出大量字节向量，而不是面向块的存储设备中使用的LUN。通常，字节向量对应於单个文件。</p><p>单独的OSD元数据管理器对主机进行身份验证，并管理和检查字节向量的访问权限。它还为主机提供适当的接口。</p><p>经过OSD元数据管理器访问的身份验证和许可后，主机通过面向文件的协议直接访问OSD设备。这通常通过LAN进行，即不专用于存储流量的网络。</p><h1>12.3将SNIA共享存储模型扩展到磁带功能</h1><p>前面描述的SNIA共享存储模型集中于基于磁盘的存储架构的建模。作为原始模型的补充，SNIA技术委员会定义了磁带功能和备份架构描述的必要扩展。</p><p>SNIA将自己限制在开放系统环境中对磁带功能的描述，因为在大型机环境中使用磁带非常难以建模，并且与开放系统环境基本不同。在开放系统领域，磁带几乎专门用于备份目的，而在大型机领域，磁带使用得更加多样化。因此，SNIA模型的扩展仅涉及在备份体系结构中使用磁带。</p><p>图12.19基于对象的存储设备提供文件共享，便于主机和存储之间的直接I / O.元数据管理器对主机进行身份验证并控制访问。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/df32fd0c64f54c569f7ad31154f33525><p class=pgc-img-caption></p></div><p>模型中仅描述了共享存储环境中磁带的一般用法。 SNIA没有深入讨论备份应用程序本身。我们已在第7章讨论了网络备份。有关磁带的更多详细信息，请参见第11.2.1节。</p><p>首先，我们希望从SNIA共享存储模型（第12.3.1节）的角度来看待磁带的逻辑和物理结构。然后我们将考虑磁盘和磁带存储之间的差异（第12.3.2节）以及如何扩展模型以描述磁带功能（第12.3.3节）。</p><h1>12.3.1磁带的逻辑和物理结构</h1><p>信息存储在磁带上的所谓磁带映像中，磁带映像由以下逻辑组件组成（图12.20）：</p><p>•开球范围</p><p>磁带范围是磁带上的一系列块。磁带范围与磁盘存储中的卷相当。 IEEE标准1244（第9.5节）也使用术语卷，但它只允许卷准确地驻留在一个磁带上而不是跨越多个磁带。</p><p>Tape范围分隔符</p><p>磁带范围分隔符是用于划分各个磁带范围的标记。</p><p>•标题</p><p>磁带标头是标记磁带开头的可选组件。</p><p>Tape预告片</p><p>磁带拖车类似于磁带头并标记磁带的末端。这也是一个可选组件。</p><p>与卷管理器的逻辑卷扩展到多个物理磁盘的方式相同，磁带映像也可以分布在多个物理磁带上。因此，物理磁带上可能只有一个逻辑磁带映像，物理磁带上的几个逻辑磁带映像，或逻辑磁带映像可以分布在多个物理磁带上。所谓的磁带图像分离器用于磁带图像的细分（图12.21）。</p><p>图12.20逻辑上，磁带映像由磁带范围和磁带范围分隔符组成。磁带头和尾部可以可选地分别标记磁带图像的开始和结束。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d84370389682419b88d608f14fd55b22><p class=pgc-img-caption></p></div><p>图12.21从物理上讲，磁带映像可以恰好占用一个磁带（1），多个磁带映像可以共享一个磁带（2），或者磁带映像可以扩展到多个磁带（3）上。 磁带图像分隔符将各个磁带图像分开。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b1a2937f02f34e1aaf6b7722ff728fdd><p class=pgc-img-caption></p></div><h1>12.3.2磁盘和磁带之间的差异</h1><p>乍一看，磁盘和磁带都是由块组成的，这些块被放在一起形成长序列。在磁盘的情况下，这些被称为卷，而在磁带中，它们被称为扩展区。不同之处在于访问它们的方式，磁盘设计为随机访问，而磁带只能按顺序访问。因此，磁盘和磁带也用于不同的目的。在开放系统环境中，磁带主要用于备份或归档。这与它们在大型机环境中的使用形成鲜明对比，在大型机环境中，发现文件结构（所谓的磁带文件）与磁盘上的文件相当。在开放系统环境中没有磁带文件的定义，因为在备份和归档期间，通常捆绑多个文件以形成包，并以此形式处理。因此，这里不需要这个概念。</p><h1>12.3.3模型的扩展</h1><p>SNIA共享存储模型必须考虑磁盘和磁带之间的结构和应用程序的差异，以及它们使用的不同目的。为此，文件/记录层水平扩展。产生对磁盘模型中的存储设备的随机访问的块层被交换为顺序访问块层，用于顺序访问磁带。该模型由以下组件进一步补充（图12.22）：</p><p>图12.22 SNIA模型到磁带功能的扩展在水平方向上扩展文件/记录层，为顺序访问块层交换块层，并添加磁带架构所需的组件。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a15ee9c4140a4ccfbcb9ae460271ee91><p class=pgc-img-caption></p></div><p>Tape媒体和磁带设备</p><p>磁带介质是存储磁带映像的存储介质。磁带设备是一种特殊的物理存储资源，可以处理可移动的磁带介质。媒体和设备之间的这种区别在可移动媒体管理的背景下尤为重要（第11章）。适用的标准IEEE 1244将磁带介质表示为磁带，将磁带设备表示为驱动器。</p><p>Tape应用程序</p><p>SNIA模型专注于使用磁带进行备份和归档。特殊磁带应用程序（例如备份软件）用于备份。该软件可以处理磁带的特殊属性。</p><p>Tape格式系统</p><p>在磁带格式系统中，文件或记录被压缩为磁带范围和磁带映像。特别是在开放系统环境中，主机通常接管此任务。但是，访问物理磁带设备并不总是必须通过磁带格式系统。它也可以直接通过下面描述的扩展聚合层或直接在设备上运行。</p><p>Extent聚合层</p><p>范围聚合层的工作方式与块聚合层（第12.1.7节）相同，但使用范围而不是块。然而，与块聚合层的随机访问相反，对物理设备的访问是顺序进行的。与访问路径一样，各个组件之间的数据流显示为箭头。</p><h1>12.4基于磁带的备份技术和架构的例子</h1><p>首先，我们要研究四个说明备份技术的例子。最重要的是访问路径以及各个组件与文件备份中的UNIX工具tar的交互（第12.4.1节），使用转储的文件系统卷备份（第12.4.2节），使用dd的卷备份（部分） 12.4.3）和虚拟磁带的使用（第12.4.4节）。</p><p>然后，我们将重点放在备份体系结构的各个组件与磁盘之间的数据流，首先讨论备份到磁带的两种经典方法：直接连接到主机的磁带（第12.4.5节）和数据流LAN上备份（第12.4.6节）。然后，我们考虑在共享存储环境中进行磁带共享的典型方法，例如磁带库共享（12.4.7）和磁带库分区（第12.4.8节）。</p><p>接下来，我们将看到通过虚拟磁带控制器（第12.4.9节）和磁盘缓存（第12.4.10节）补充的磁带虚拟化如何改变数据流。除了虚拟磁带控制器之外，还可以将数据移动设备放置在存储网络中，以实现无服务器备份。与无局域网备份一样，除局域网和备份服务器外，还可以释放执行备份的主机（第12.4.11节）。</p><p>然后，我们将查看具有本地（第12.4.12节）和外部（第12.4.13节）存储的网络数据管理协议（NDMP）本地备份的两种变体。最后，我们将考虑一种体系结构，其中NDMP与数据移动器一起使用，以实现无服务器备份（第12.4.14节）。</p><h1>12.4.1文件备份</h1><p>该示例显示了使用UNIX工具tar函数进行文件备份的方式（图12.23）：</p><p>1. Tar从文件系统中读取文件。</p><p>2. Tar压缩整数磁带格式系统中的文件。</p><p>它最终将它们写入磁带。</p><p>图12.23 Tar通过从文件系统读取数据，然后在整数磁带格式系统中压缩并将其写入磁带来执行文件备份。 在还原情况下，访问路径是相反的。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b89b3da24dc14839acce4035ae4dcb7f><p class=pgc-img-caption></p></div><p>在还原的情况下，访问路径被转换：</p><p>1. Tar从磁带读取文件包。</p><p>2. Tar通过整体磁带格式系统提取它们。</p><p>3.它将它们写入文件系统。</p><p>12.4.2文件系统卷备份</p><p>使用文件系统备份工具转储，可以使用文件系统备份逻辑卷 - 从而备份其中包含的文件 - 绕过文件系统（图12.24）。 还备份了文件系统的元信息，以便以后可以恢复单个文件。 与tar一样，转储具有完整的磁带格式系统，用于在备份或恢复期间压缩和提取文件。</p><p>图12.24使用转储，可以绕过文件系统直接从逻辑卷备份文件。 与tar的情况一样，整体磁带格式系统在恢复或备份期间负责压缩和提取。</p><div class=pgc-img><img alt="存储网络 Day39 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d7954ad54bf74e7395767604b6532df1><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'存储','网络','Day39'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>