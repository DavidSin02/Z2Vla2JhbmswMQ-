<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Day167:pytorchè·å–æ¨¡å‹æŸä¸€å±‚å‚æ•°ååŠå‚æ•°å€¼ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Day167:pytorchè·å–æ¨¡å‹æŸä¸€å±‚å‚æ•°ååŠå‚æ•°å€¼ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/f62ec372c5204f35ad9d3b8aa96bd3e2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6cab0681.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6cab0681.html><meta property="article:published_time" content="2020-11-14T21:06:35+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:35+08:00"><meta name=Keywords content><meta name=description content="Day167:pytorchè·å–æ¨¡å‹æŸä¸€å±‚å‚æ•°ååŠå‚æ•°å€¼"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6cab0681.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Day167:pytorchè·å–æ¨¡å‹æŸä¸€å±‚å‚æ•°ååŠå‚æ•°å€¼</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>åˆæ˜¯ä¸€å¹´ä¸ƒå¤•èŠ‚ï¼Œè™½ç„¶å¾ˆæ— èŠï¼Œä½†æ˜¯ï¼Œè¿˜æ˜¯è¦å­¦ä¹ ï¼Œä¹¦å±±æœ‰è·¯å‹¤ä¸ºå¾„ï¼Œå­¦æµ·æ— æ¶¯è‹¦ä½œèˆŸï¼Œæ¯å¤©çš„ä¸€å°æ­¥ï¼Œæ…¢æ…¢ç§¯ç´¯æˆä¸€å¤§æ­¥ï¼Œè¦åŠ æ²¹ï¼Œè¦å¥‹æ–—ï¼Œè¦åŠªåŠ›ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥å‘ä¼˜ç§€çš„äººé è¿‘ï¼Œfightingï¼</p><pre><code>from torch import nnimport torch# creat a simple modelmodel = nn.Sequential(               # è¾“å…¥ç°åº¦å›¾ï¼š(1, 1, 6, 6)    # N = C = 1       H = W =6    nn.Conv2d(1, 4, kernel_size=2),  # (6-2+0)/1 + 1 = 5 ï¼Œç»è¿‡å·ç§¯çš„è¾“å‡ºä¸º(1,3,5,5)    nn.Conv2d(4, 2, kernel_size=2))  # (5-3+0)/1 + 1 = 3 , ç»è¿‡å·ç§¯çš„è¾“å‡ºä¸º(1,2,3,3)print('*'*20+'modelçš„ä¿¡æ¯'+'*'*20)print(model)                                    # Sequential(                                    #   (0): Conv2d(1, 4, kernel_size=(2, 2), stride=(1, 1))                                    #   (1): Conv2d(4, 2, kernel_size=(2, 2), stride=(1, 1))                                    # )input = torch.randn(1, 1, 6, 6)    # N = C = 1       H = W =6if torch.cuda.is_available():    print('cuda is avaliable')    model.cuda()    input = input.cuda()################################################################################## æ‰“å°æŸä¸€å±‚çš„å‚æ•°å#################################################################################print('æ‰“å°æŸä¸€å±‚çš„å‚æ•°å')for name in model.state_dict():     # æ‰“å°modelä¸­æ‰€æœ‰å‚æ•°åï¼Œä½†æ˜¯ä¸æ‰“å°å…·ä½“å€¼    print(name)                      # 0.weightã€0.bias           1.weightã€1.bias# schemem1(recommended)print('*'*20 + 'scheme_1' + '*'*20)# ç¬¬äºŒä¸ªå·ç§¯çš„è¾“å‡ºç»´åº¦æ˜¯2ï¼Œè¾“å…¥ç»´åº¦æ˜¯4ï¼Œä¸”å·ç§¯æ ¸çš„å¤§å°ä¸º(2,2),æ‰€ä»¥å±‚çš„å‚æ•°ä¸ºtorch.Size([2, 4, 2, 2])print(model.state_dict()['1.weight'].size())# print(model.state_dict()['1.weight'])         # å–å€¼print()# scheme2print('*'*20 + 'scheme_2' + '*'*20)params = list(model.named_parameters())  # ç±»ä¼¼äºparams = [0.weight:{Parameter}, 0.bias:{}, 1.weight:{}, 1.bias:{}]print(params[2][0])                     # nameï¼š1.weight# print(params[2][1])        # dataï¼šç”±äºvalueæ˜¯å°è£…å¥½çš„Parameterå‚æ•°ï¼Œä¼šè¾“å‡ºtensorï¼Œæœ‰dataä¸requires_gradç­‰å±æ€§# print(params[2][1].data)   # dataï¼šä¼šè¾“å‡ºtensorï¼Œä»å°è£…å¥½çš„å¯¹è±¡ä¸­ç›´æ¥å–å‡ºdataï¼Œæ²¡æœ‰requires_gradprint()# scheme3print('*'*20 + 'scheme_3' + '*'*20)params = {}  # change the tpye of 'generator' into dictfor name, param in model.named_parameters():    params[name] = param.detach().cpu().numpy()     # å°†tensorè½¬åŒ–ä¸ºnumpy# typeï¼š &lt;class 'numpy.ndarray'&gt;   sizeï¼š (4, 1, 2, 2) ç¬¬ä¸€ä¸ªå·ç§¯å±‚ï¼Œè¾“å‡ºç»´åº¦æ˜¯4ï¼Œè¾“å…¥ç»´åº¦æ˜¯1ï¼Œå·ç§¯æ ¸å¤§å°ä¸º2*2print('typeï¼š',type(params['0.weight']), '  sizeï¼š',params['0.weight'].shape)# print(params['0.weight']) # å€¼è¢«è½¬æ¢ä¸ºvalueäº†print()# scheme4print('*'*20 + 'scheme_4' + '*'*20)for layer in model.modules():    if (isinstance(layer, nn.Conv2d)):        print('weight_size: ',layer.weight.size())  # å…ˆæ˜¯ï¼štorch.Size([4, 1, 2, 2])   å†æ˜¯ï¼štorch.Size([2, 4, 2, 2])        # print(layer.weight)     # valueæ˜¯å°è£…å¥½çš„Parameterå‚æ•°ï¼Œä¼šè¾“å‡ºtensorï¼Œæœ‰dataä¸requires_gradç­‰å±æ€§        print('bias_size: ',layer.bias.size())      # å…ˆæ˜¯ï¼štorch.Size([4])            å†æ˜¯ï¼štorch.Size([2])        # print(layer.bias)       # valueæ˜¯å°è£…å¥½çš„Parameterå‚æ•°ï¼Œä¼šè¾“å‡ºtensorï¼Œæœ‰dataä¸requires_gradç­‰å±æ€§        print('$'*15)print()################################################################################## æ‰“å°æ¯ä¸€å±‚çš„å‚æ•°åå’Œå‚æ•°å€¼#################################################################################print('#'*40)# schemem1(recommended)for name, param in model.named_parameters():    print(name, param)  # å…ˆæ˜¯ï¼š0.weight Parameterä¸0.bias Parameter    å†æ˜¯ï¼š1.weight Parameterä¸1.bias Parameter    print('&amp;'*15)# scheme2print('#'*40)for name in model.state_dict():    print(name)     # ä¾æ¬¡ä¸ºï¼š0.weight  0.bias  1.weight  1.bias    print('ç±»å‹ä¸ºï¼š',type(model.state_dict()[name])) # ç±»å‹å‡ä¸ºï¼š&lt;class 'torch.Tensor'&gt;    print(model.state_dict()[name])     # å–å€¼æ—¶ï¼Œæ˜¯ä»Parameterä¸­å–å‡ºäº†dataï¼Œæ²¡æœ‰åˆ«çš„å±æ€§äº†    print('@'*15)</code></pre><p><br></p><div class=pgc-img><img alt=Day167:pytorchè·å–æ¨¡å‹æŸä¸€å±‚å‚æ•°ååŠå‚æ•°å€¼ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f62ec372c5204f35ad9d3b8aa96bd3e2><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Day167','pytorch','è·å–'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>