<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>大数据架构之数据交换平台 | 极客快訊</title><meta property="og:title" content="大数据架构之数据交换平台 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/f0fce9a8-da6a-4f86-bc49-079f4c2968c2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6d91c74.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6d91c74.html><meta property="article:published_time" content="2020-10-29T20:50:20+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:20+08:00"><meta name=Keywords content><meta name=description content="大数据架构之数据交换平台"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6d91c74.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>大数据架构之数据交换平台</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>首先轻松一下：</p><p>学校门前，一名家长趁摊主正忙，把一瓶奶茶暗暗塞给身后的儿子，举着另一瓶奶茶付完钱正要走，身后的儿子嚷道：“两瓶，我这还有一瓶！”摊主皱皱眉，很快笑了：“你妈妈这一瓶盖上有奖，那一瓶是奖品！”孩子进校后，家长红着脸要补钱，摊主对她摆摆手道：“票子是小事，孩子是大事……</p><p><br></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/f0fce9a8-da6a-4f86-bc49-079f4c2968c2><p class=pgc-img-caption></p></div><p><br></p><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">Exchangis是一款轻量级的数据交换服务平台，支持结构化、半结构化以及无结构化的存储系统之间的数据同步。平台将数据交换流程进行拆分，抽象出数据源，交换任务，交换作业等概念，达到可视化管理数据同步流程的目的。而在实际数据传输过程中可集成多个传输组件特性，做到功能横向扩展。</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">使用接入</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">界面接入</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">主要界面介绍</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.数据源管理-数据源</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">分类列举了用户创建的所有数据源，提供常用的搜索，编辑，删除方法，再点击 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">编辑</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 出现的弹窗中可以对数据源进行 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">连接性测试</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 和 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">对外权限设置</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/104d506a57014484a8ef94b1d29cbfe7><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.数据源管理-模板管理</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">管理数据源的连接信息，将这些信息生成模板。例如IP地址，端口，集群配置参数，认证方式等信息，根据不同数据源类型和环境分开存储成模板，创建数据源时可以复用这些已有的连接模板。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4610e3bb32734a64a16176166e788398><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">3.任务配置</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">以项目为集合，管理用户配置的任务，用户可以组合现有的数据源创建交换任务，创建的任务将挂载到对应的项目下。同时还提供任务 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">定时执行</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 和 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">历史数据重跑</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 等功能。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dd234f70a560455db5543c7256ecf495><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">4.任务作业</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">列举了用户相关任务下所有的执行作业，包括作业调用时间、完成时间、执行参数、执行节点以及完成状态，可以点击详细日志查看具体的执行细节。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/451f6ab301cb4b098c07bf7f0085a7f1><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">5.权限组管理</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">默认用户创建一个项目时自动生成对应的一个权限组，用户可以通过增删成员的方式管理自己创建的项目权限组，同一权限组内的用户可以做到共享数据源。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1eefb4f297074c06bd62ab375c2b9e81><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">数据源模块</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.创建数据源模板</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">数据源模板包含各种形式的连接参数，持有模板可以快速创建数据源。进入</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">数据源管理-模板管理</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">界面，点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">+新建模板</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，选择要创建的模板类型：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/672491a88ffb49d8b73acade3a42d8d2><p class=pgc-img-caption></p></div><ul><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">模板上一般可以选择认证方式，使用不同认证方式的模板创建数据源时，要求输入的认证信息不一样；</span></li><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">普通用户可以编辑自己创建的模板，可以浏览管理员创建的模板，但不可以编辑，暂时不同用户之间不能共享模板。<br>各种类型模板的填写样例如下:</span></li></ul><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.1 HIVE、HDFS连接模板</span></h1><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/37368ca7d00a42aa889fa01e6b597eeb><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">HIVE连接模板的必填项目：</span></p><pre><code>Metastore地址， HiveMetastore地址，格式形如: thrift://path。HDFS地址，格式形如: hdfs://path。Hadoop配置项，包括namenode的地址,rpc端口等Hadoop客户端连接配置。认证方式，有kerberos、LDAP和无权限三个选项，kerberos中realm为必填项</code></pre><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">HDFS连接模板的内容和HIVE模板相似</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.2 SFTP连接模版</span></h1><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/029ea4faf90e417090a0587ed66ad046><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">SFTP连接模版的必填项目：</span></p><pre><code>SFTP HOST地址SFTP PORT端口号认证方式，默认为用户密码认证，keyfile为密钥文件验证</code></pre><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.3 ElasticSearch连接模版</span></h1><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f99f465a54146f1bf907d0d66765409><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">ElasticSearch连接模版的必填项目：</span></p><pre><code>Elastic Url （ElasticSerach连接地址），可以填写多个认证方式，默认为Basic Authentication</code></pre><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.4 MySQL连接模版</span></h1><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/35124d4ae4034c0a81043b0671ba25f7><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">TDSQL连接模版的必填项目：</span></p><pre><code>MySQL HST地址MySQL PORT端口号MySQL的连接参数，例如：useUnicode, characterEncoding, allowMultiQuery</code></pre><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.创建数据源</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">点击 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">数据源管理界面</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 上方的 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">新增数据源</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，选择对应的数据源类型，目前支持的类型有</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">HIVE</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">HDFS</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">, </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">SFTP</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">ElasticSearch</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">和</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">MySQL</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">, 选择后出现弹窗，开始新建数据源。其中必须要填写的项目有 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">数据源名称</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 和 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">数据源属主</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，以及 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">连接模板</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">:</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a6cd1fc4d0624b44af197900907e85c1><p class=pgc-img-caption></p></div><ul><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">模板这里可以直接点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">创建模板</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">打开新标签页去创建对应的连接模板，创建完成后再点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">刷新</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">按钮加载新模板。</span></li><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">数据源与项目存在绑定关系，一个数据源只能绑定一个项目，项目的成员可以浏览项目下绑定的所有数据源, 同时数据源创建者可以指定其对外权限，设置项目组其他成员对该数据源的</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">编辑</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">,</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">使用</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">,</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">读取</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">以及</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">写入</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">权限。</span></li><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">最后填写完必要信息后，点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">连接测试</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">,检验数据源的可用性。</span></li></ul><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">任务配置模块</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.创建项目/权限组</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">项目是</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">Exchangis</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">划分数据权限的基础，数据交换任务都挂载在项目上，数据源、用户也和项目有绑定关联关系，点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">任务配置</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">界面左侧的</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">+ 新建</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">可快速创建。</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.配置数据交换任务</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">选中对应要添加任务的项目后，点击 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">增加任务</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA"> 按钮，弹出任务配置窗口，选择要使用的传输引擎。<br>目前Exchangis底层完全集成DataX，部分支持SQOOP，选择引擎要注意以下几点：</span></p><ul><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">是否已经安装了引擎依赖的环境，DataX默认使用服务的JAVA环境，SQOOP则依赖了Hive和HDFS环境.</span></li><li><span style="color:#40485b;--tt-darkmode-color: #8691AA">选用SQOOP引擎执行任务，由于依赖的是具体执行机器的环境，任务配置的Hive/HDFS数据源相关的参数信息会被具体环境的覆盖，数据源的认证信息也会失效。</span></li></ul><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">选择成功后，开始如下步骤的操作：</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.1 选择数据来源和数据目的</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">数据交换任务的主要工作是在不同数据源之间传输数据，所以需要用户选择不同数据源和配置其具体的数据信息，数据信息就比如HIVE数据源的 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">库</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">、</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">表</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">以及</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">表分区</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，如下图：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7c10db806bee43a9b74179838242c732><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">此外除了数据源管理界面里面创建的数据源外，用户在配置交换任务的时候还可以选择一种</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">local_fs</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">数据源，代表执行任务的机器节点的本地文件系统（Linux）:</span></p><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在最开始选择数据来源的时候，对于文件系统类的数据源可以选择不同的数据交换方式，有两种方式</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">二进制</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">和 </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">记录</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/61fccf0a30224cccaa44a0803c32a267><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">二进制</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">方式下数据直接以流的形式传输，</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">记录</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">方式下数据将被解码并切割成多个记录实体来传递，适用于结构化数据库。</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.2 配置时间占位符</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在配置交换任务时候，用户可以在一些配置项例如路径或者分区值里面加入时间占位符，在任务执行的时候，会用任务绑定的时间参数（默认是</span><strong><span style="color:#40485b;--tt-darkmode-color: #8691AA">任务触发时间</span></strong><span style="color:#40485b;--tt-darkmode-color: #8691AA">）去替换这些占位符</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7a661f2d06ee4ed1a581720c7f76d080><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">支持的时间占位符有常见的：</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">yyyyMMdd</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">, </span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">yyyy-MM-dd</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">，其他的具体含义见下表：</span></p><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">占位符含义例子run_date设置为当前时间的前一天，格式为yyyyMMdd20200129</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f6f8fa;--tt-darkmode-bgcolor: #BDBEC0">run_date_std设置为当前时间的前一天，格式为yyy-MM-dd2020-01-29</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">run_month_begin设置为当前时间所在月的第一天，格式为yyyyMMdd20200101</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f6f8fa;--tt-darkmode-bgcolor: #BDBEC0">run_month_begin_std设置为当前时间所在月的第一天，格式为yyyy-MM-dd2020-01-01</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">run_month_end设置为当前时间所在月的最后一天，格式为yyyyMMdd20200131</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f6f8fa;--tt-darkmode-bgcolor: #BDBEC0">run_month_end_std设置为当前时间所在月的最后一天，格式为yyyy-MM-dd20200131</span></span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.3 字段映射</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在对记录类型的数据进行传输的情况下，用户可以组合源表字段和目标表字段的对应关系，校验源表字段的值是否符合要求，对源表的字段的值进行转换：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/df02312ecdb14990bf2bb695850acfd0><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.4 速度控制</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">速度控制控制的是任务每秒全局传输数据的最大值，同时从字节和记录两个纬度进行限制；在速度控制选项卡下还可以控制并行数和最大使用内存数。</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4097b21f1d2841a9b6298b5b2f0dba98><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.5 基本信息</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">交换任务的基本信息应包括如下几点：</span></p><pre><code>任务名称、任务描述提醒人：任务失败以及超时的时候提醒的关系人，多个关系人逗号分隔 【默认告警信息打在后台日志中】定时：设置任务定时的corn表达式执行用户：设定的实际执行任务的系统（Linux）用户 【默认拥有同名的执行用户，其他需要管理员绑定授权】执行节点：设定的实际执行任务的服务节点列表 【公用默认服务节点，其他需要管理员绑定授权】超时时间：任务超时时间，单位秒同步方式：全量同步、增量同步，默认为全量同步，增量方式目前只支持对文件类数据源</code></pre><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">需要关注的点：</span></p><pre><code>执行用户相当于代理用户，作用是限定权限，在任务执行的过程中，会用执行用户去启新进程和申请资源；  而对于数据源连接，如果数据源有认证信息，则以数据源认证信息为主，如果没有，权限则会自动落到执行用户上（SQOOP引擎下HIVE/HDFS权限都落在执行用户上）;</code></pre><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/13a49902422f4419a62fcb89284ae0bd><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">3.配置后置处理器</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">Exchangis支持内嵌基础的处理代码，目前界面仅对ElasticSearch相关任务提供入口。当数据交换任务的目的端为ElasticSearch的时候，可以选择使用后置处理器，后置处理器允许用户以编写代码的方式对要写入的记录数据做更加定制化的处理操作：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a2a8ba0160a44286ab249a99bbbf0164><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在后置处理器代码中，只可以读取作业进程工作目录下的文件，写入操作以及网络连接将被拦截禁止</span></p><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">任务作业模块</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.查看作业日志</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在任务配置页面创建执行任务后，可以在任务作业界面找到对应的作业，点击</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">详细日志</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">后拿到执行端的日志，如果作业的状态是</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">执行中</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">则会对日志窗口持续刷新：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/97758a4277be40baaccc54366acbeb19><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">系统管理模块</span></h1><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">1.应用用户管理</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">系统管理 - 用户管理</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">界面可以新增Exchangis平台的应用用户，并授权用户不同的角色，新用户可以预设密码：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/aae7c405018d4dc8bdd33a4dc932f6a0><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">对於单个用户，可以绑定执行（代理）用户和执行服务节点：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bd1bae38c49d4611a9970829dac931a4><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">2.执行(代理)用户管理</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">单独的界面维护系统内的执行（代理）用户：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/00dd1be89f124133949212e09d836ae8><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><span style="color:#40485b;--tt-darkmode-color: #8691AA">3.执行节点管理</span></h1><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">执行节点</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">界面可以看到当前集群存在的所有执行节点，这些服务节点通过心跳的方式自动更新自己的信息，点击对应的节点的</span><span style="color:#40485b;--tt-darkmode-color: #40485B"><span style="background-color:#f7f7f9;--tt-darkmode-bgcolor: #BEBEBF">管理节点</span></span><span style="color:#40485b;--tt-darkmode-color: #8691AA">按钮，进入如下界面：</span></p><div class=pgc-img><img alt=大数据架构之数据交换平台 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1ead55c2aa1d4217b808d22ca2b04c40><p class=pgc-img-caption></p></div><p><span style="color:#40485b;--tt-darkmode-color: #8691AA">在该界面可以允许管理员绑定关联执行（代理）用户和执行节点，关联成功后，将会自动在节点机器上建立对应的系统帐号（目前只支持Linux发行版的系统）</span></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'大数据','架构','数据'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>