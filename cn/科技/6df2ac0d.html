<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式 | 极客快訊</title><meta property="og:title" content="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RivR6n1AU5yy8h"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6df2ac0d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6df2ac0d.html><meta property="article:published_time" content="2020-11-14T21:05:41+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:41+08:00"><meta name=Keywords content><meta name=description content="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6df2ac0d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RivR6n1AU5yy8h><blockquote><p>免责声明：本文旨在传递更多市场信息，不构成任何投资建议。文章仅代表作者观点，不代表火星财经官方立场。</p></blockquote><p>小编：记得关注哦</p><p>来源：蓝狐笔记</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/Ru7wCVRCVAyw3B><p>几天Uniswap发布了其V2的计划，蓝狐笔记一直没来得及关注。今天看了一下，这次计划带来了不少优化。可以看出Uniswap从V1的实践中学习到了很多东西，发展迅速，这也是领先DeFi项目的缩影，在不断迭代中前行。</p><p><b>Uniswap V1证明了自动做市商市场的可能性</b></p><p>Uniswap基于以太坊区块链为人们提供去中心化的代币兑换服务，Uniswap提供了ETH以及ERC20代币兑换的流动性池，它具有当前DeFi项目中最引人注目的去中心化、无须许可、不可停止等特性。</p><p>当然，在实际的运行过程中，也受制于以太坊吞吐量和速度的问题，也遭遇过价格操纵的情况，且其交易规模在整个加密世界还非常小。看上去是小个子，而且还是不够灵活不够快的小个子。即便如此，Uniswap这种自动化的流动性池的模式也展示出了它的潜力。</p><p>当前Uniswap总体流动性达到3400多万美元，最高峰曾达到9100多万美元；当前的日交易量超过200万美元左右，最高峰曾达到3900多万美元。虽然跟中心化交易所差距甚远，但作为DEX来说，算是很不错的成绩。</p><p><b>Uniswap v2有几个值得关注的点：</b></p><p>1.时间加权平均价格闪兑</p><p>2.盈利模式</p><p>3.时间加权平均价格</p><p>从前段时间发生的一系列攻击事件看，Uniswap v1 不能作为安全的价格预言机，因为根据其恒定乘积做市的机制（Constant Product Market Maker），它的价格可以在短时期内发生极大的变化。这也是Uniswap之前被操纵利用的地方。</p><p>Uniswap v2决定改变这一点，一是继续保持其去中心化的模式，二是极大提升价格操纵的成本和难度。主要有两个方面的提升：</p><p><b>测定市场价格的标准</b></p><p>代币对兑换的市场价格在每个区块交易之前测定，也就是，市场价格以前一个区块的最后一个交易为准。这提高了攻击者价格操纵的难度，攻击者需要在前一个区块操作最后一个交易，这种情况下，很难保证在后一个区块中实现套利。除非攻击者可以实现“自私挖矿”，连续挖出两个区块，否则基本上无法保证获利。</p><p><b>添加时间加权</b></p><p>此外，Uniswap V2 还提出了时间加权平均价格的概念，这进一步提高攻击者的难度。什么是时间加权平均价格？</p><p>Uniswap 2 将区块最后一个交易价格添加到核心合约中的单个累计价格变量中，以这一价格存在的时间进行加权，例如有的区块是17秒，有的是15秒，这个是它的存在时间。这一变量代表了整个合约历史中每秒的Uniswap价格总和。</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/Rv50DEm2ehnx3g><p>外部合约可以使用这一变量来跟踪任何时间间隔内的时间加权平均价格。</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/Rv50DFP2ZDYljr><p>它通过读取ERC20代币对从时间间隔开始到结束之间的累计价格来实现。可以将这个累计价格差除以时间间隔的时长，从而创建出该时段的时间加权平均价格。</p><p>这样攻击者操纵的成本会随着流动性的提升，随着平均的时间长度增加而增加。</p><p><b>闪兑</b></p><p>前一段时间，由于bZx事件，闪贷（flash loan）进入人们的视野。关于闪贷（flash swap），可以参考蓝狐笔记之前的文章《闪贷：为什么闪贷攻击会是新常态？》《加密闪贷：互联网货币的神奇新发明》。而今天提到的Uniswap的闪兑，虽然跟闪贷不同，不过，也可以闻到类似的味道。</p><p>Uniswap V2的闪兑允许用户在Uniswap上提取自己想要的任何ERC20代币，关键是没有前期成本。用户拿到这些代币之后，可以进行任意操作，对其执行任何代码，只有一个前提，就是在交易执行结束时，必须将代币归还。如果不能归还，所有代币都会被撤回。在这个过程中，需要收取0.3%的费用。</p><p><b>闪兑为什么有需求？</b></p><p>闪兑的需求主要来自于无前置成本的套利场景。由于加密市场的交易场所分散，不同交易场所存在套利空间。如果没有足够前期资金，很多套利都无法实现，很多用户只能望洋兴叹。</p><p>而对于希望套利的用户来说，闪兑的价值在于，它可以无须前期资金要求，同时可以省去各种不必要的交易步骤，更高效地完成套利活动。</p><p>Uniswap的创始人Hayden Adams举了两个例子：一是关于DAI套利；二是关于提高交易效率。</p><p>没有前期资金完成套利。</p><p>假设用户在Uniswap上可以用200美元兑换出1 ETH，然后在Oasis上将1ETH 兑换出220 DAI，那么用户可以获得20 DAI的利润。但是，如果用户钱包没有DAI，这个时候如果想套利应该怎么办？</p><p>Uniswap V2的闪兑可以让用户从Uniswap上提取1 ETH，然后在Oasis上卖出 220 DAI，并用200 DAI 在Uniswap 购买并归还1ETH。在这一过程中，用户钱包中没有一个DAI，但通过Uniswap上预提取ETH，实现了套利。</p><p>第二个例子是关于提高交易的效率。</p><p>它可以提高从DeFi项目中进行各种借贷、兑换操作的效率。例如，从用户从Maker上借钱，并将借出来的DAI，再次购买ETH，以提高其杠杆率时，当前的交易步骤比较繁多：</p><p>1）用户将ETH存入Maker</p><p>2）从Maker中借出DAI</p><p>3）在Uniswap上将DAI兑换出ETH</p><p>为了达到用户想要的杠杠率，用户需要重复上述步骤。这样做的效率很低。如果用户使用闪兑，可以将步骤简化：</p><p>1）从Uniswap中提取用户想要数量的ETH</p><p>2）将用户的ETH和从Uniswap中取出的ETH存入Maker</p><p>3）从Maker中借出想要数量的DAI</p><p>4）将DAI归还给Uniswap，也就是归还当初提取的ETH</p><p>这样，一步就可以实现用户所需要的杠杆率，帮助用户通过Maker获得更多的ETH。</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/Rv50DFqC0YgSJk><p>如果Uniswap池没有收到足够的DAI来兑换回当初用户提走的ETH，那么，整个交易会还原。也就是，跟闪贷类似，在交易结束时，所有提走的代币都需要进行支付或归还，否则会被还原交易。</p><p><b>盈利模式</b></p><p>之前蓝狐笔记提到了DeFi项目的盈利模式，也就是DeFi如何实现可持续。具体可以参考蓝狐笔记之前的文章《DeFi项目的商业模式：存续之道》。在这篇文章中提到，Uniswap团队并没有发行代币，也没有收取费用。但项目要存续，必须要有费用的来源。</p><p>Uniswap这一次披露了其收费计划。在Uniswap V2中包括了协议收费的机制。协议开始启动时，默认收费为0，流动性提供商捕获0.30%的费用。如果协议收费机制一旦开启，它会收取0.05%的费用，而流动性提供商捕获的费用则变为0.25%。</p><p>也就是说，Uniswap的收费计划对于普通用户来说，跟之前没有什么区别，而对于流动性提供商来说，其捕获的费用减少了16.67%。这部分费用为维护协议的贡献者所捕获，这其中包括Uniswap的开发团队等。</p><p>这个费用的分配比例被硬编码进入核心合约，不可篡改。在Uniswap V2发布之后，可以部署去中心化治理流程，通过它来开启收费机制。</p><p>按照当前的交易量，Uniswap大概可以产生500万美元左右的年费用，那么，包括项目团队在内的协议和生态的贡献者可以捕获大约83万美元的费用。如果按照一定的增长率，今年捕获100多万美元的费用也很有可能。这个费用可以用来支持协议的开发以及生态的建设。</p><p>除了以上几点，Uniswap V2 还支持ERC20代币与其他任何ERC 20代币形成直接的流动性池。当前的流动性提供商在提供流动性池的时候，都是提供ETH和其他ERC20代币的池。用户在ERC 20代币之间进行兑换时，都是通过路由ETH来完成的。两个ERC 20代币直接形成流动性池，可以让用户无须拥有ETH的风险敞口。例如可以形成DAI/USDC的交易对，这样用户不用担心大的价格波动。这样的做法，可以极大减少交易摩擦，提高资金利用的效率。</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/Rv50DGG1PpSXQd><p><b>结语</b></p><p>加密市场的DEX在3月份整体市场交易规模达到6.68亿美元，在加密市场的低谷期实现了历史新高，且比2月份增加了53%，去中心化交易市场已经成长为加密市场不可忽视的重要力量。</p><p>随着Uniswap和Kyber的不断迭代前行，未来有很大概率会继续突破。</p><img alt="Uniswap V2 值得关注的新特性：时间加权平均价、闪兑与盈利模式" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/Rv50Dgw9eh3TyX></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Uniswap','V2','关注'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>