<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>软起动控制器通讯设计 | 极客快訊</title><meta property="og:title" content="软起动控制器通讯设计 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RphmhrQAzC3fqz"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6e3a3ee3.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6e3a3ee3.html><meta property="article:published_time" content="2020-10-29T21:11:31+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:31+08:00"><meta name=Keywords content><meta name=description content="软起动控制器通讯设计"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/6e3a3ee3.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>软起动控制器通讯设计</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>1、前言 2 、软起动控制器中 PROFIBUS-DP 通讯接口的硬件设计</p><p>在软起动控制器的 PROFIBUS-DP 硬件接口电路设计方案上，采用单片机+ 专用集成芯片SPC3+ RS485 驱动的方案。</p><p><strong>2.1 SPC3 简述</strong></p><p>SPC3(SIEMENS PROFIBUS CONTROLLER)为优化的智能 PROFIBUS-DP 从站，集成有 PROFIBUS-DP 物理层的数据收发功能，可独立处理 PROFIBUS-DP 协议。SPC3 的内部有 RAM、方式寄存器、状态寄存器、中断寄存器以及各种缓冲器指针和缓冲区等。SPC3 有 8 根数据线和 11 根地址线，其中 8 根数据线与地址线复用，可以接 80C32、80C166、80C196、HC196 等单片机。SPC3 内部集成了 1.5KB 的双口 RAM 作为 SPC3 与软件 / 程序的接口，能自动调整 9.6K 到 12M 波特率。</p><p><strong>2.2 PROFIBUS-DP 通信接口硬件设计</strong></p><p>PIC16F877 与 PROFIBUS-DP 网络的连接通过一个 PROFIBUS-DP 网络的协议芯片 SPC3 和 RS-485 驱动电路组成。PROFIBUS-DP 接口主要由处理器接口和串行总线接口组成。</p><p>处理器接口电路如图 1 示：80C32 通过 P0 口和 P2 口扩展外部存储器，将 SPC3 内部的双口 RAM 作为自己的外部 RAM，通过对双口 RAM 的读写来完成对 SPC3 的初始化和有关数据的交换。图中 P1 是指用双 PIC16F877 设计的软起动控制器，作为通讯的从站，PIC16F877 集成了 SPI 接口，可以和协议芯片 SPC3 结合，以及 MAX485ESA 完成到 PROFIBUS-DP 总线网络上的连接。</p><img alt=软起动控制器通讯设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RphmhrQAzC3fqz><p>图 1 处理器接口电路</p><img alt=软起动控制器通讯设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/Rphmhrx9STKgA6><p>图 2 串行总线接口电路</p><p>SPC3 芯片通过请求发送信号(RTS)，发送数据信号(TXD)，接收数据信号(RXD)，通过高速光耦 HCPL7720 和总线收发器 ADM1485 相连，构成串行总线接口。如图 2 所示，尽管 SPC3 已经集成了物理层的数据传输功能，但它不具备 RS-485 的驱动接口，因此添置了 RS-485 的驱动电路。目前能满足 12M 波特率的驱动器芯片为数不多，有 SN65ALS176，SN75ALS176，ADM1485 等，本系统中选用的是 ADM1485。另外为了避免总线上的信号对电路的影响，在 SPC3 与 RS-485 总线驱动电路之间采用光电隔离。TXD、RXD 信号的隔离器件选用 Hewlett Packar 公司的 12M 高速光耦 HCPL7720，RTS 的信号隔离器件选用 HCPL0601。</p><p><strong>3 、通讯接口的软件设计</strong></p><p>PROFIBUS-DP 的 ASIC 芯片 SPC3 集成了 PROFIBUS-DP 协议，能够处理 PROFIBUS-DP 状态机构，因此 80C32 不用参与处理 PROFIBUS-DP 状态机。80C32 的主要任务是对 SPC3 进行合理的配置、初始化及对各种报文的处理。</p><p>对 SPC3 的软件操作主要包括两个部分：SPC3 的初始化和 SPC3 的中断处理。主程序和中断程序流程图分别如图 3 和图 4 所示。</p><img alt=软起动控制器通讯设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RphmhsT58jKvd7><p>图 3 主程序流程图 图 4 中断程序流程图</p><p>SPC3 的初始化程序应放在主程序的前面，而中断处理程序完成 CPU 对 SPC3 中断输出的响应。 SPC3 上电复位之后 . 在正常工作之前必须进行初始化，以配置各个寄存器。中断处理程序用于处理 SPC3 发生的各种事件，这些事件包括新的参数报文事件：全局控制命令报文事件，进入或退出数据交换状态事件，新的配置报文事件，新的地址设置报文事件，监测到波特率事件和看门狗溢出事件。SPC3 在接收到由 PROFIBUS 主站传送的不同输出数据时会产生输出标志位，CPU 通过在应用循环中轮询标志位来进行接收主站数据。对于特定应用的诊断信息需要实时传递到主站。主应用程序在应用循环中判断是否有可用的诊断 BUF 存在一当有空闲 BUF 时应用程序输入诊断信息，并请求更新。对于实时性要求严格的系统，应采用中断方式进行输出数据和诊断数据处理。</p><p>由于用于现场的设备要特别考虑抗干扰能力，因此在设备硬件抗干扰技术的基础上，软件方面采用指令冗余，设置软件陷阱，系统的自检及软硬件相结合的看门狗技术，保证软件出轨的自动恢复，从而进一步提高系统的抗干扰能力。</p><p><strong>4、 结论</strong></p><p>软起动器有很多优点，然而，目前国内生产的异步电机的软起动器大多都不带通信接口，有一些带通信接口的，也多为 RS232 或 RS485 串行总线，这些串行总线，由于自身的特点，不适合工业现场控制，有碍于电动机机群的进一步网络化发展和企业管控一体化及综合自动化的实现。</p><p>本文介绍的带 PROFIBUS-DP 总线接口的软起动控制器，可以解决传统软起动器现场通信的不足，实现电动机的群控，促进企业综合自动化的底层网络建设，并能带来显著经济效益。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'软起动','通讯','设计'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>