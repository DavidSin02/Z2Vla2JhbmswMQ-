<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>自动生成文本摘要 | 极客快訊</title><meta property="og:title" content="自动生成文本摘要 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/1538400331459b76fe012b0"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><meta property="article:published_time" content="2020-10-29T20:50:39+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:39+08:00"><meta name=Keywords content><meta name=description content="自动生成文本摘要"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/73b16eb.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>自动生成文本摘要</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538400331459b76fe012b0><p class=pgc-img-caption></p></div><p><strong>译者 | Revolver</strong></p><p>导读：这篇文章介绍的主要内容是关于自动生成文本摘要。我们要尝试让计算机为我们提取一篇文章的重要信息，并用一句话概括出来。</p><p>本文提及的主要内容有：</p><ul><li>什么是文本摘要生成</li><li>如何从网页上提取数据</li><li>·如何清洗数据</li><li>如何构建直方图</li><li>·如何计算句子分数</li><li>如何提取分数最高的句子/摘要</li></ul><p>在继续往下阅读之前，我假设你已经了解下面几个方面的基础知识：</p><ul><li>正则表达式</li><li>自然语言处理</li><li>网页爬虫</li></ul><h1>1. <strong>什么是文本摘要生成</strong></h1><p>生成文本摘要的过程其实就是<strong>总结文本文档中心意思</strong>的过程，目的是创建包含原始文档主要内容的摘要。</p><p>生成摘要的主要思想是<strong>找到包含整个数据集"信息"的数据子集</strong>。这种技术在当今行业内被广泛使用。搜索引擎就是一个例子; 其他还包括文档摘要生成，图像收集和视频处理。文档摘要生成算法试图通过查找信息量最大的句子来创建整个文档的代表性摘要，而在图像摘要中，计算机则试图找到最具代表性的显著的图像。对于监控视频，人们可能希望从平静的环境影像中提取出重要事件。</p><p>自动摘要有两种通用方法：提取和抽象。</p><h1>2. <strong>如何从网页上提取数据？</strong></h1><p>第1步：导入库/包</p><p><strong>Beautiful Soup(bs)</strong>是一个Python库，用于从HTML和XML文件中提取数据。你可以把它和你最喜欢的解析器一起搭配使用，它们一起提供了一种符合我们习惯的导航，搜索和修改解析树的方法。这通常可以节省程序员数小时或数天的工作量。</p><p><strong>Urllib</strong>是一个集合多个URL处理模块的软件包：</p><p><strong>urllib.request</strong> 用于打开url链接并读取内容</p><p><strong>urllib.error</strong> 包含由urllib.request抛出的异常值</p><p><strong>urllib.parse</strong> 用于解析URL</p><p><strong>urllib.robotparser</strong>用于解析 robots.txt 文件</p><p>re模块提供了类似于在Perl语言里的正则表达式匹配操作功能。</p><p>nltk是一个帮助构建处理人类语言数据的Python程序的强大平台。它为 50多种语料库和词法资源提供了易于使用的接口(如WordNet)，还提供了一套用于分类，分词，词干提取，标注，解析和语义推理的文本处理工具库。</p><p>heapq这个模块提供了一个堆队列算法的实现，也称为优先队列算法。</p><pre>import bs4 as bsimport urllib.requestimport reimport nltkimport heapq</pre><p>接下来检查一下数据包中的stopwords包(停用词)和punkt包是否更新到最新。</p><pre>nltk.download('stopwords')nltk.download('punkt')</pre><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903451c3ae51d950><p class=pgc-img-caption>图1</p></div><p>第2步：提取数据</p><p>这里选用了维基上的 Artificial Neural Network 这个页面为例子来说明。你可以根据需要选择其他任何文章。</p><pre>page = urllib.request.urlopen("https://en.wikipedia.org/wiki/Artificial_neural_network").read()soup = bs.BeautifulSoup(page,'lxml')print(page) #print the page</pre><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15383999035346a58135856><p class=pgc-img-caption>图2</p></div><p>现在你可以看到我们提取出来的内容，但它看起来有点丑。我们使用BeautifulSoup来解析文档, 并以漂亮的方式来呈现文本。我还使用了prettify函数来使html语法看起来更美观。</p><pre>print(soup.prettify)</pre><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903625e46b6e81eb><p class=pgc-img-caption>图3</p></div><p>注意：维基百科中的大多数文章都是在&lt;p>标签下编写的，但不同的网站可能采取不同的方式。例如，一些网站会把文字内容写在&lt;div>标签下。</p><pre>text = ""for paragraph in soup.find_all('p'):text += paragraph.textprint(text)</pre><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15383999037156f164d21cf><p class=pgc-img-caption>图4</p></div><h1>3. <strong>如何清洗数据</strong></h1><p>数据清洗指的是对数据集，数据表或数据库中的所有数据，检测并纠正(或删除)损坏的或不准确的记录的过程，也即识别数据中不完整，不正确，不准确或不相关的部分，然后替换，修改，或删除这部分脏数据。</p><pre>text = re.sub(r'\[[0-9]*\]',' ',text)text = re.sub(r'\s+',' ',text)clean_text = text.lower()clean_text = re.sub(r'\W',' ',clean_text)clean_text = re.sub(r'\d',' ',clean_text)clean_text = re.sub(r'\s+',' ',clean_text)sentences = nltk.sent_tokenize(text)stop_words = nltk.corpus.stopwords.words('english')print(sentences)</pre><p>第1行：删除文本中由类似[1]，[2]表示的所有引用(参见上面的输出文本段)</p><p>第2行：用单个空格替换了所有额外的空格</p><p>第3行：转换成小写</p><p>第4,5,6行：移除所有额外的标点符号，数字，额外空格等。</p><p>第7行：使用sent_tokenize()函数将大段的文本分解为句子</p><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903781027c356ef9><p class=pgc-img-caption>图5</p></div><pre>stop_words #list</pre><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399904065071acf47e7><p class=pgc-img-caption>图6</p></div><h1>4. <strong>如何构建直方图</strong></h1><p>构建一个直方图可以帮助你直观地发现文章中比较特别的单词。例如"Geoffrey Hinton is the god father of deep learning. And I love deep learning"这一句，需要计算每个不同的单词出现在句子中的次数，例如"deep"和"learning"都出现两次，其余的单词在一个句子中只出现一次。但在现实世界中，你有成千上万条句子，要具体找出每个单词出现多少次就需要构建直方图来表现。</p><pre>word2count = {} #line 1for word in nltk.word_tokenize(clean_text): #line 2if word not in stop_words: #line 3if word not in word2count.keys():word2count[word]=1else:word2count[word]+=1for key in word2count.keys(): #line 4word2count[key]=word2count[key]/max(word2count.values())</pre><p>第1行：创建一个空字典</p><p>第2行：使用word_tokenize分词clean _text分词，对每个单词循环</p><p>第3行：检查单词是否在stop_words中，然后再次检查单词是否在word2count的键集中，不在则把word2count [word]置为1，否则word2count [word] 加1。</p><p>第4行：计算加权直方图(参见下面的输出，你可以看到对每个单词计算了权重而不是计数。 例如有 'artificial':0.3620689等)</p><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538399903171c16cf187fc><p class=pgc-img-caption>图7</p></div><h1>5. <strong>如何计算句子分数</strong></h1><p>第1行：创建一个空字典</p><p>第2行：对sentences中每个sentence进行循环</p><p>第3行：将sentence转换成小写并分词，对每个word循环</p><p>第4行：使用if检查word2count.keys()中是否存在该单词</p><p>第5行：这里我指定计算句子长度小于30的那部分，你可以根据需要更改</p><p>第6行：再次使用if-else条件，判断如果句子不存在于sentence2keys()中，则执行 sent2score [sentence] = word2count [word]，否则执行 sent2score [sentence] + = word2count [word]</p><pre># 计算句子分数sent2score = {}for sentence in sentences:for word in nltk.word_tokenize(sentence.lower()):if word in word2count.keys():if len(sentence.split(' '))&lt;30:if sentence not in sent2score.keys():sent2score[sentence]=word2count[word]else:sent2score[sentence]+=word2count[word]</pre><h1>6. <strong>查看句子得分</strong></h1><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538399903284fbd90a651c><p class=pgc-img-caption>图8</p></div><h1>7. <strong>如何提取分数最高的句子作为简短摘要</strong></h1><p>使用heapq从文章中找到得分最高的七个句子。</p><pre>best_sentences = heapq.nlargest(7,sent2score,key=sent2score.get)for sentences in best_sentences:print(sentences,'\n')</pre><p>关于Artificial Neural Network这篇文章七条概括得最好的句子</p><div class=pgc-img><img alt=自动生成文本摘要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1538399903387f9e69b778e><p class=pgc-img-caption>图9</p></div><p>对深度学习感兴趣，热爱Tensorflow的小伙伴，欢迎关注我们的网站！http://www.panchuang.net 我们的公众号：磐创AI。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'自动','文本','摘要'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>