<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>前端基础：必须要知道的移动端适配（6）——移动端适配方案 | 极客快訊</title><meta property="og:title" content="前端基础：必须要知道的移动端适配（6）——移动端适配方案 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/9371136a3c8f48c896170aacd2f22611"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b3bf66.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b3bf66.html><meta property="article:published_time" content="2020-10-29T21:10:52+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:52+08:00"><meta name=Keywords content><meta name=description content="前端基础：必须要知道的移动端适配（6）——移动端适配方案"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/73b3bf66.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>前端基础：必须要知道的移动端适配（6）——移动端适配方案</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>尽管我们可以使用<strong>设备独立像素</strong>来保证各个设备在不同手机上显示的效果类似，但这并不能保证它们显示完全一致，我们需要一种方案来让设计稿得到更完美的适配。</p><h1>flexible方案</h1><p>flexible方案是阿里早期开源的一个移动端适配解决方案，引用flexible后，我们在页面上统一使用rem来布局。</p><p>它的核心代码非常简单：</p><pre>// set 1rem = viewWidth / 10function setRemUnit () { var rem = docEl.clientWidth / 10 docEl.style.fontSize = rem + 'px'}setRemUnit();</pre><div class=pgc-img><img alt=前端基础：必须要知道的移动端适配（6）——移动端适配方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9371136a3c8f48c896170aacd2f22611><p class=pgc-img-caption></p></div><p>rem 是相对于html节点的<strong>font-size</strong>来做计算的。</p><p>通过设置<strong>document.documentElement.style.fontSize</strong>就可以统一整个页面的布局标准。</p><p>上面的代码中，将html节点的font-size设置为页面clientWidth(布局视口)的<strong>1/10</strong>，即1rem就等于页面布局视口的1/10，这就意味着我们后面使用的rem都是按照页面比例来计算的。</p><p>这时，我们只需要将UI出的图转换为rem即可。</p><p>以iPhone6为例：布局视口为375px，则1rem = 37.5px，这时UI给定一个元素的宽为75px（设备独立像素），我们只需要将它设置为75 / 37.5 = 2rem。</p><p>当然，每个布局都要计算非常繁琐，我们可以借助<strong>PostCSS的px2rem插件</strong>来帮助我们完成这个过程。</p><p>下面的代码可以保证在页面大小变化时，布局可以自适应，当触发了window的<strong>resize</strong>和<strong>pageShow</strong>事件之后自动调整html的fontSize大小。</p><pre> // reset rem unit on page resizewindow.addEventListener('resize', setRemUnit)window.addEventListener('pageshow', function (e) { if (e.persisted) { setRemUnit() }})</pre><div class=pgc-img><img alt=前端基础：必须要知道的移动端适配（6）——移动端适配方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c0cb5fc8b91946528bc731ada46baa8b><p class=pgc-img-caption></p></div><p>由于viewport单位得到众多浏览器的兼容，上面这种方案现在已经被官方弃用：</p><blockquote><p>lib-flexible这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用viewport来替代此方案。</p></blockquote><p>下面我们来看看现在最流行的vh、vw方案。</p><h1><span>vh、</span>vw方案</h1><p>vh、vw方案即将视觉视口宽度 window.<strong>inner</strong>Width和视觉视口高度 window.<strong>inner</strong>Height 等分为 <strong>100 份</strong>。</p><p>上面的flexible方案就是模仿这种方案，因为早些时候vw还没有得到很好的兼容。</p><ol><li>vw(Viewport's width)：1vw等于视觉视口的1%</li><li>vh(Viewport's height) :1vh 为视觉视口高度的1%</li><li>vmin : vw 和 vh 中的较小值</li><li>vmax : 选取 vw 和 vh 中的较大值</li></ol><div class=pgc-img><img alt=前端基础：必须要知道的移动端适配（6）——移动端适配方案 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/83f960988e5a479ba8609c547eba26a8><p class=pgc-img-caption></p></div><p>如果视觉视口为375px，那么1vw = 3.75px，这时UI给定一个元素的宽为75px（设备独立像素），我们只需要将它设置为75 / 3.75 = 20vw。</p><p>这里的比例关系我们也不用自己换算，我们可以使用PostCSS的<strong> postcss-px-to-viewport </strong>插件帮我们完成这个过程。写代码时，我们只需要根据UI给的设计图写px单位即可。</p><p>当然，没有一种方案是十全十美的，vw同样有一定的缺陷：</p><ol><li>px转换成vw不一定能完全整除，因此有一定的<strong>像素差</strong>。</li><li>比如当容器使用vw，margin采用px时，很容易造成整体宽度超过100vw，从而影响布局效果。当然我们也是可以避免的，例如使用padding代替margin，结合<strong>calc()函数</strong>使用等等</li></ol></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'移动端','适配','基础'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>