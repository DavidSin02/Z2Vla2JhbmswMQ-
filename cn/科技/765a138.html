<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å›å¤å…³é”®è¯çš„æ— é™æ‰©å±•æœºåˆ¶ | æå®¢å¿«è¨Š</title><meta property="og:title" content="å›å¤å…³é”®è¯çš„æ— é™æ‰©å±•æœºåˆ¶ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/f7aeaf983fb1468ab77f5368d88fd7ac"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/765a138.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/765a138.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/765a138.html><meta property="article:published_time" content="2020-10-29T21:06:50+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:50+08:00"><meta name=Keywords content><meta name=description content="å›å¤å…³é”®è¯çš„æ— é™æ‰©å±•æœºåˆ¶"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/765a138.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å›å¤å…³é”®è¯çš„æ— é™æ‰©å±•æœºåˆ¶</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p><strong>å¼•è¨€</strong></p><p>åœ¨å¾®ä¿¡å…¬ä¼—å·çš„å¼€å‘ä¸­ï¼Œè‡ªåŠ¨å›å¤å…³é”®è¯ä¸»è¦å¯å›å¤çš„å†…å®¹ä¸ºæ–‡æœ¬æ¶ˆæ¯ã€å›¾æ–‡æ¶ˆæ¯ï¼ˆç›®å‰ä»…æ”¯æŒä¸€ä¸ªé“¾æ¥ï¼‰ã€‚ä¸ºäº†è®©å…³é”®è¯æ”¯æŒâ€œ<strong>å¸¦å‚æ•°</strong>â€ å’Œ <strong>æ— é™æ‰©å±•</strong>ï¼Œæœ¬æ–‡å¼•å…¥ä¸€ä¸ªå¯¹æ¥å…³é”®è¯çš„æ¥å£è§„èŒƒï¼Œä½¿å¾—å…³é”®è¯å¯ä»¥æºå‚æ•°ä¸€èµ·äº¤ç”±ç¬¬ä¸‰æ–¹å¤„ç†ï¼Œå¹¶è¿”å›ç”¨æˆ·æ–‡æœ¬æ¶ˆæ¯æˆ–å›¾æ–‡æ¶ˆæ¯ã€‚</p><p>åŸºæœ¬åŸç†ï¼šä¸ºå…³é”®è¯é…ç½®å›è°ƒåœ°å€ï¼Œå…³é”®è¯ä¸å‚æ•°ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œç¬¬ä¸€ä¸ªç©ºæ ¼åè¾¹çš„å‡ä¸ºå‚æ•°ï¼Œå…¬ä¼—å·åœ¨æ¥æ”¶åˆ°ç”¨æˆ·æ–‡æœ¬æ¶ˆæ¯åï¼Œè§£æå…³é”®è¯ä¸å‚æ•°ï¼Œå¹¶æ ¹æ®é…ç½®å°†å…¶å‘é€è¯·æ±‚ç»™å›è°ƒåœ°å€ï¼Œè·å–è¿”å›çš„å¤„ç†ç»“æœã€‚</p><p>æœ¬æ–‡ä¸»è¦ä»‹ç»æ¥å£çš„å®šä¹‰ï¼Œå¹¶æä¾›ä¸€ä¸ªå…·ä½“çš„æ¥å£å®ç°ã€‚</p><p><strong>1 æ¥å£çº¦å®š</strong></p><p><strong>1.1 ä¼ å…¥å‚æ•°</strong></p><p>ä½œä¸º Request.Body è¯·æ±‚ä½“ POST ç»™å›è°ƒåœ°å€ã€‚</p><pre>{ "keyword" : "Keyword", "parameter" : "Parameters string", "user" : "useropenid"}</pre><p><strong>1.2 è¿”å›æ ¼å¼</strong></p><p>è¿”å›ç»“æœä¸º JSON å½¢å¼ï¼Œè¦æ±‚å¿…é¡»æœ‰ err_code ä¸ err_msg å±æ€§ï¼Œå…¶ä¸­ err_code ä¸ºçŠ¶æ€ç ï¼ŒçŠ¶æ€ç ä¸º 200 æ—¶ï¼Œè¡¨ç¤ºæˆåŠŸï¼Œå…¶å®ƒè¡¨ç¤ºå¤±è´¥ã€‚err_msg è¡¨ç¤ºæ¶ˆæ¯æè¿°ã€‚å¦‚ï¼š</p><pre>{ "err_code" : 101, "err_msg" : "æ“ä½œå¤±è´¥ï¼"}</pre><p>å½“æˆåŠŸæ—¶ï¼Œæ”¯æŒè¿”å›â€œæ–‡å­—â€ä¸â€œé“¾æ¥â€ä¸¤ç§ç±»å‹çš„æ¶ˆæ¯ã€‚</p><p>ä½¿ç”¨ key_type å±æ€§è¡¨ç¤ºï¼Œå¯å–å€¼â€œæ–‡å­—â€æˆ–"é“¾æ¥"ã€‚</p><p>å½“ key_type ä¸ºâ€œæ–‡å­—â€çš„æ—¶å€™ï¼Œdata ä¸ºç›¸åº”çš„æ–‡æœ¬å†…å®¹ã€‚</p><p>å½“ key_type ä¸ºâ€œé“¾æ¥â€çš„æ—¶å€™ï¼Œdata ä¸ºé“¾æ¥ä¿¡æ¯çš„æ•°ç»„ï¼Œåªæ˜¯ç›®å‰åªæ”¯æŒä¸€ä¸ªé“¾æ¥ã€‚</p><p>é“¾æ¥çš„å±æ€§åŒ…æ‹¬ï¼š</p><p>title : æ ‡é¢˜</p><p>icon : å›¾æ ‡</p><p>note_desc : æè¿°</p><p>url : é“¾æ¥åœ°å€</p><p><strong>1.3 æ–‡å­—ç±»å‹ç¤ºä¾‹</strong></p><pre>{ "err_code" : 101, "err_msg" : "æ“ä½œå¤±è´¥ï¼", "key_type" : "æ–‡å­—", "data" : "å›å¤çš„å†…å®¹"}</pre><p><strong>1.4 é“¾æ¥ç±»å‹ç¤ºä¾‹</strong></p><pre>{ "err_code" : 101, "err_msg" : "æ“ä½œå¤±è´¥ï¼", "key_type" : "é“¾æ¥", "data" : [ { "title" : "ä¸€ä¸ªæ•°å­¦å…¬å¼", "icon" : "http://****/formula.png", "note_desc" : "ä¸€ä¸ªç¥å¯„çš„æ•°å­¦å…¬å¼", "url" : "http://****" } ]}</pre><p><strong>2 å…³é”®è¯æ¥å£ç¤ºä¾‹</strong></p><p>ä»¥ä¸‹ä¸ºä¸€ä¸ªå®Œæ•´çš„æ¥å£å®ç°ç¤ºä¾‹ã€‚</p><p><strong>2.1 åŠŸèƒ½éœ€æ±‚æè¿°</strong></p><p>å…³é”®è¯ï¼š<strong>æå–</strong></p><p>å‚æ•°ï¼šä¸€æ®µæ–‡æœ¬æˆ–ä»…æ˜¯ä¸€ä¸ª url</p><p>åŠŸèƒ½æè¿°ï¼šä»æ–‡æœ¬ä¸­æå–å‡ºé‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€IPv4 åœ°å€ï¼ˆå¯è¿›ä¸€æ­¥è¡¥å……ä¸å®Œå–„ï¼‰ã€‚å¦‚æœå‚æ•°ä»…æ˜¯ä¸€ä¸ª urlï¼Œåˆ™è¿›è¡Œæå–çš„æ–‡æœ¬ä¸ºè¯·æ±‚è¯¥ url æ‰€å¾—çš„å†…å®¹ã€‚</p><p><strong>2.2 å®ç°è¿‡ç¨‹</strong></p><p>æµç¨‹ï¼šæ˜¯å¦ä»…ä¸ºurl -> æ˜¯åˆ™è¯·æ±‚url å¾—åˆ°å†…å®¹ -> æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æå–åŒ¹é…æ•°æ® -> æ ¹æ®é•¿åº¦è¿”å›æ–‡æœ¬æ¶ˆæ¯ æˆ–æ˜¯ è¿”å›ä¸€ä¸ªå¯æ“ä½œç•Œé¢çš„é“¾æ¥ã€‚</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=å›å¤å…³é”®è¯çš„æ— é™æ‰©å±•æœºåˆ¶ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f7aeaf983fb1468ab77f5368d88fd7ac><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p><strong>2.2.1 å‡†å¤‡å¥½åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼</strong></p><pre>private static Dictionary&lt;string, string&gt; _RegexDict;public static Dictionary&lt;string, string&gt; RegexDict{ get { if (_RegexDict == null) { _RegexDict = new Dictionary&lt;string, string&gt;(); // _RegexDict.Add("é“¾æ¥", @"((ht)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&amp;:\/~+#]*[\w\-@?^=%&amp;\/~+#])?");  _RegexDict.Add("é‚®ç®±", @"[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+"); _RegexDict.Add("æ‰‹æœºå·", @"(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})"); _RegexDict.Add("èº«ä»½è¯å·", @"[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]"); _RegexDict.Add("IPv4åœ°å€", @"(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])"); } return _RegexDict; }}</pre><p><strong>2.2.2 å¤„ç†è¿‡ç¨‹</strong></p><p>ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œè¯·æ±‚ url è·å–å†…å®¹ã€‚</p><pre>public static string GetUrlContent(string url){ System.Net.WebClient webClientObj = new System.Net.WebClient(); webClientObj.Encoding = Encoding.UTF8; string respInfo = webClientObj.DownloadString(url); return respInfo;}</pre><p>å¤„ç†æµç¨‹å®ç°ï¼Œå»ºç«‹ä¸€ä¸ª WebApiï¼Œä»£ç å¦‚æ˜¯è¯´ã€‚</p><pre>public JObject Index([FromBody] JObject body){ string keyword = body.Value&lt;string&gt;("keyword"); string parameter = body.Value&lt;string&gt;("parameter"); string user = body.Value&lt;string&gt;("user"); JObject result = new JObject(); if (!"æå–".Equals(keyword)) { result["err_code"] = 101; result["err_msg"] = "å…³é”®è¯æœªæ‰¾åˆ°"; return result; } //// å¤„ç†è¿‡ç¨‹  var content = parameter; var regUrl = @"^((ht)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&amp;:\/~+#]*[\w\-@?^=%&amp;\/~+#])?$";  // (1) ä¸ºç½‘å€å— if (Regex.IsMatch(content, regUrl)) { try { content = GetUrlContent(content); } catch (Exception ue) { result["err_code"] = 101; result["err_msg"] = "ç«™ç‚¹æ— æ³•è¿æ¥ï¼"; return result; } }  //ï¼ˆ2ï¼‰æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æå– Dictionary&lt;string, List&lt;string&gt;&gt; typeMatches = new Dictionary&lt;string, List&lt;string&gt;&gt;(); foreach (var kv in RegexDict) { List&lt;string&gt; list = new List&lt;string&gt;(); var mc = Regex.Matches(content, kv.Value, RegexOptions.IgnoreCase); foreach (Match c in mc) { list.Add(c.Value); } if (list.Count &gt; 0) { typeMatches.Add(kv.Key, list); } } //ï¼ˆ3ï¼‰æ‹¼æˆå­—ç¬¦ä¸² StringBuilder sb = new StringBuilder(1024); foreach (var kv in typeMatches) { sb.Append(kv.Key + "\n" + String.Join("\n", kv.Value) + "\n");  } //ï¼ˆ4ï¼‰é•¿åº¦&lt;1020 æ–‡æœ¬æ¶ˆæ¯ if (sb.Length &lt; 1020) { result["err_code"] = 200; result["err_msg"] = "success"; result["key_type"] = "æ–‡å­—"; result["data"] = sb.Length == 0 ? "æ— åŒ¹é…å†…å®¹ï¼" : sb.ToString(); return result; } //ï¼ˆ5ï¼‰é•¿åº¦è¾ƒå¤§ï¼Œè¿”å›å·¥å…·é“¾æ¥ JObject link = new JObject(); link["title"] = "æå–å†…å®¹ä¸­çš„æ ¼å¼åŒ–æ•°æ®ä¿¡æ¯"; link["icon"] = "http://www.timeddd.com/Content/images/logo_bar.png"; link["note_desc"] = "æŒ‡å®šé“¾æ¥åœ°å€æˆ–æ–‡æœ¬å†…å®¹ï¼Œä»ä¸­æå–ä¸€äº›å¸¸æ ¼å¼æ•°æ®ï¼Œå¦‚é‚®ç®±ã€æ‰‹æœºå·ã€é“¾æ¥ã€èº«ä»½è¯å·ç­‰ä¿¡æ¯ï¼"; link["url"] = "http://www.timeddd.com/Tool/Fetch"; JArray links = new JArray(); links.Add(link); result["err_code"] = 200; result["err_msg"] = "success"; result["key_type"] = "é“¾æ¥"; result["data"] = links; return result; }</pre><p><strong>3 æ•ˆæœ</strong></p><p>åœ¨å…¬ä¼—å·â€œæ—¶é—´ç»´åº¦â€ä¸­ï¼Œå›å¤å…³é”®è¯æå–ï¼Œç©ºæ ¼å¸¦ä¸Šå†…å®¹ï¼Œå¦‚ä¸‹ï¼š</p><blockquote><p>æå– å„ç§æ ¼å¼çš„é‚®ç®±å…¥ä¸‹æ‰€ç¤ºï¼škevintian126@126.com ï¼Œ1136667341@qq.com3. meiya@cn-meiya.com 4. wq901200@hotmail.com 5. meiyahr@163.com 6. meiyuan@0757info.com 7. chingpeplo@sina.com 8. tony@erene.com.com 9. melodylu@buynow.com</p></blockquote><p>ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š</p><blockquote><p>é‚®ç®±</p><p>kevintian126@126.com</p><p>1136667341@qq.com</p><p>meiya@cn-meiya.com</p><p>wq901200@hotmail.com</p><p>meiyahr@163.com</p><p>meiyuan@0757info.com</p><p>chingpeplo@sina.com</p><p>tony@erene.com.com</p><p>melodylu@buynow.com</p></blockquote><p>å›å¤ï¼š</p><blockquote><p>æå– https://www.nhxz.com/doc/181017fc325d4b598aaede18.html</p></blockquote><p>ä¼šå¾—åˆ°ï¼š</p><blockquote><p>é‚®ç®±</p><p>kevintian126@126.com</p><p>1136667341@qq.com</p><p>meiya@cn-meiya.com</p><p>wq901200@hotmail.com</p><p>meiyahr@163.com</p><p>meiyuan@0757info.com</p><p>chingpeplo@sina.com</p><p>tony@erene.com.com</p><p>melodylu@buynow.com</p><p>xxxxxx@163.com</p><p>123321@126.com</p><p>æ‰‹æœºå·</p><p>15758523729</p><p>18101710555</p><p>18300405945</p><p>èº«ä»½è¯å·</p><p>560087183004059455</p></blockquote><p><strong>3 æ‹›å‹Ÿå…³é”®è¯</strong></p><p>ç»™å®šä¸€ä¸ª<strong>å…³é”®è¯</strong>ï¼Œä¸€ä¸ª<strong>æ¥æ”¶å…³é”®è¯åŠå‚æ•°çš„ URL åœ°å€</strong>ï¼ŒæŒ‰çº¦å®šçš„æ ¼å¼è¿”å› JSONï¼Œå°±æœ‰å¯èƒ½æˆä¸ºâ€œæ—¶é—´ç»´åº¦â€å…¬ä¼—å·é‡Œçš„å®ç”¨å·¥å…·ä¾›å¤§å®¶ä½¿ç”¨ã€‚å¦‚æœ‰å…´è¶£æ¬¢è¿åœ¨â€œæ—¶é—´ç»´åº¦â€ç•™è¨€ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å…³é”®','æ— é™','æ‰©å±•'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>