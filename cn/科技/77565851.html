<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>机器不学习：NLP系列3 自然语言理解-意图分类 | 极客快訊</title><meta property="og:title" content="机器不学习：NLP系列3 自然语言理解-意图分类 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1534769000731dd06801b0b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/77565851.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/77565851.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/77565851.html><meta property="article:published_time" content="2020-11-14T21:00:19+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:19+08:00"><meta name=Keywords content><meta name=description content="机器不学习：NLP系列3 自然语言理解-意图分类"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/77565851.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>机器不学习：NLP系列3 自然语言理解-意图分类</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>机器不学习 www.jqbxx.com : 深度聚合机器学习、深度学习算法及技术实战</strong></h1><p><strong>自然语言理解(NLU)</strong></p><blockquote><p><strong>Natural language understanding (NLU)</strong> is a subtopic of natural language processing in artificial intelligence that deals with machine reading comprehension. NLU is considered an AI-hard problem. [1]</p></blockquote><p>从概念定义可以得出的信息</p><ul><li>属于 NLP 的一个分支</li><li>属于人工智能的一个部分</li><li>用来解决机器理解人类语言的问题</li><li>属于人工智能的核心难题</li></ul><p>补充一句，什么是 AI-complete 或 AI-hard 问题？其实就是说解决这个问题的难度等同于让计算机和人类一样智能，或者说实现它就相当于实现了 strong AI，基本标志 AI 革命的完美结束。</p><p><strong>语义表示(Semantic representation)</strong></p><p><strong>语义表示(Semantic representation)</strong> 有三种典型形式:</p><ul><li><strong>分布语义表示（distributional semantics representation)</strong></li><li>​ 把语义表示成一个向量，如 word2vec、LSA、LDA 及各种神经网络模型(如 LSTM)</li><li>​ 基于Harris的分布假设：semantically similar words occur in similar contexts</li><li>​ 对人机交互而言，这种表示方法缺少一个细节性/可解释的表示，不能说出第 n 维表示什么</li><li>​ NLP 笔记 - 再谈词向量</li><li><strong>模型论语义表示（model-theoretic semantics representation）</strong></li><li>​ 把自然语言映射成逻辑表达式(logic form)</li><li>​ 在计算方法上，典型的就是构建一个semantic parser</li><li>​ 难度比较大，见NLP 笔记 - Meaning Representation Languages的一阶谓词演算和 lambda reduction。</li></ul><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534769000731dd06801b0b><p class=pgc-img-caption></p></div><ul><li><br></li><li><strong>框架语义表示（frame semantics representation）</strong></li><li>​ 这种表示方法对人机交互非常有帮助</li><li>​ 比如说 “订一张上海飞北京的头等舱，下午5点出发，国航的”，把语义用一个frame表示出来，如图所示：</li></ul><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15347690006128018407751><p class=pgc-img-caption></p></div><ul><li><br></li></ul><p>在智能语音交互中，普遍采用<strong>frame</strong>语义表示，比如飞机票，第一层是 domain，确定是 flight_ticket 这一领域，下一层是这一领域下的 intent，比如说 search_flight_ticket，最下面一层是 intent 下的 slots。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153476900067673e8bea75a><p class=pgc-img-caption></p></div><p>自然语言理解的核心过程，第一步就是对 domain/intent 分类，然后接着对 slot 进行填充。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534769001270bfe51b167a><p class=pgc-img-caption></p></div><h1><strong>基本概念</strong></h1><p>来理解一下上面所说到的 domain 和 intent 的概念。</p><ul><li>domain</li><li>领域，同一类型的数据或者资源，以及围绕这些数据或资源提供的服务；</li><li>比如“地图”，“酒店”，“飞机票”、“火车票”等；</li><li>领域的目的其实是为了界定要解的 intent 范围，因为泛领域的 NLU 目前还做不到</li><li>intent</li><li>意图，对于领域数据的操作，表示用户想要完成的任务，一般以动宾短语来命名；</li><li>比如飞机票领域中，有“查询机票”、“退机票”等意图；</li></ul><p>然后就到了本篇重点，<strong>意图分类(intent classification)</strong>，意图分类是一个典型的文本分类问题，所有传统的分类方法都可以使用，比如SVM/Decision Tree/Maximum Entropy 等等，数学形式来表示就是给定一个标注数据集合，U=(u1,c1),…,(un,cn)，其中，ci∈C 是具体的intent，ui 是输入的 utterance，求解目标是ck=argmaxc∈Cp(c|uk)</p><h1><strong>主要难点</strong></h1><p><strong>语言多样性</strong></p><p>• 我要听大王叫我来巡山</p><p>• 给我播大王叫我来巡山</p><p>• 我想听歌大王叫我来巡山</p><p>• 放首大王叫我来巡山</p><p>• 给唱一首大王叫我来巡山</p><p>• 放音乐大王叫我来巡山</p><p>• 放首歌大王叫我来巡山</p><p>• 给大爷来首大王叫我来巡山</p><p><strong>语言歧义性</strong></p><p>• 我要去拉萨</p><p>– 火车票？</p><p>– 飞机票？</p><p>– 音乐？</p><p>– 还是查找景点？</p><p>解决语言歧义性的方法一般有下面 3 种</p><ol><li>选一个 top intent，通常可能就选最常见的 intent</li><li>给一个 intent list 让用户来选</li><li>综合上下文信息来确定一个最优的 intent，这是最好的方法</li></ol><p><strong>语言鲁棒性</strong></p><p>• 错字</p><p>– 大王叫我来新山</p><p>• 多字</p><p>– 大王叫让我来巡山</p><p>• 少字</p><p>– 大王叫我巡山</p><p>• 别称</p><p>– 熊大熊二（指熊出没）</p><p>• 不连贯</p><p>– 我要看那个恩花千骨</p><p>• 噪音</p><p>– 全家只有大王叫我去巡山咯</p><p>• …</p><p><strong>知识依赖</strong></p><p>要知道语言是对现实世界的描述，很多词是有多种含义的，如果没有对现实世界的知识会难以分类。看下面的例子，大鸭梨可以是水果也可以是餐厅，七天可以是天数也可以是酒店。</p><p>– 大鸭梨</p><p>– 七天</p><p>– 总参</p><p>– 天气预报</p><p>– 晚安</p><p><strong>上下文依赖(context)</strong></p><p>上下文的概念包含了很多内容，比如说</p><ul><li>对话上下文</li><li>​ 多轮对话</li><li>设备上下文</li><li>​ 指硬件设备，如手机/电视/汽车/…</li><li>应用上下文</li><li>​ 用户在哪个 app 里进行对话</li><li>用户画像</li><li>​ 用户的个性化信息，尤其是地理位置等</li><li>……</li></ul><p>如下面两段对话，上下文不同，宁夏的含义也就不同</p><p>U：买张火车票</p><p>A：请问你要去哪里？</p><p>U：宁夏</p><p>U：来首歌听</p><p>A：请问你想听什么歌？</p><p>U：宁夏</p><h1><strong>基本方法</strong></h1><ul><li>基于规则（rule-based）</li><li>CFG</li><li>JSGF</li><li>……</li><li>传统机器学习方法</li><li>SVM</li><li>ME</li><li>……</li><li>深度学习方法</li><li>CNN</li><li>RNN/LSTM</li><li>……</li><li>融合规则和深度学习的方法</li></ul><p><strong>基于规则的意图分类</strong></p><p>实际上是基于上下文无关语法(CFG)，以上面提到的飞机票领域为例</p><p>FRAME: flight_ticket</p><p>NETS:</p><p>[search_flight_ticket]</p><p>[refund_flight)ticket]</p><p>[search_flight_ticket]</p><p>[flight_range] [flight_ticket]</p><p>[from] [to] (的 (飞机票))</p><p>(从 [city]) (去 [city])</p><p>[city]</p><p>(北京)</p><p>(上海)</p><p>...</p><p>从北京到上海的飞机票</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1534769000720e3738324fa><p class=pgc-img-caption></p></div><p><strong>基于统计模型的意图分类</strong></p><p>给定输入 utterance u 和类别 c，我们要求的是 P(c|u)，核心问题就是:</p><ul><li>如何表示 u，也就是 text representation</li><li>如何学习 P(c|u)，也就是 classifer</li></ul><p><strong>Text Representation</strong></p><ul><li>Bag of Words (BOW)</li><li>– 优点：简单</li><li>– 缺点：没有考虑语言结构，相似关系等</li><li>Hand-crafted features</li><li>– 优点：精准</li><li>– 缺点：领域依赖，扩展性差</li><li>Learned feature representation</li><li>– 优点：能够学到所有相关的信息</li><li>– 缺点：需要学习</li></ul><p><strong>Classifier</strong></p><p>两类模型任君选择</p><ul><li>生成式模型Generative (joint) models，计算 P(c,u)</li><li>– Naive Bayes</li><li>– HMM</li><li>– …</li><li>判别式模型Discriminative (conditional) models, 计算 P(c|u)</li><li>– logistic regression</li><li>– maximum entropy</li><li>– conditional random fields</li><li>– support vector machines</li><li>– …</li></ul><p><strong>实现方案</strong></p><p>一种简单的实现方案，首先用 bag of words 提取基本特征，接着人工定义规则来提取一些高质量的特征(提取意图词，过滤 stopwords 等)，然后将这些特征用 one-hot 或者 tf-idf 方式表示为向量，再将特征向量喂给 svm 分类器。如下：</p><p>1. Text Representation</p><p>– Bag of Words (BOW)</p><p>>> unigram</p><p>>> bigram</p><p>>> pos</p><p>– Hand-crafted features</p><p>>> 意图词，用来表达意图的有限词集合，比如“飞机票/机票/餐厅/美食/火车…”</p><p>>> 无效词比例，定义一个有效词的集合，然后计算 utterance 中无效词的比例</p><p>>> pattern特征，比如“从[city]”，“去[city]”，…</p><p>>> …</p><p>– feature vector</p><p>>> One-hot</p><p>>> TF-IDF</p><p>2. Classifier</p><p>– svm, 比如可以采用开源的libsvm/liblinear实现</p><p><strong>基于深度学习的意图分类</strong></p><p>两种典型策略</p><ul><li>RNN（recurrent neutral network）</li><li>序列化、有记忆模型</li><li>CNN（convolutional neutral network）</li><li>非序列化、无记忆模型</li></ul><p>一般我们把 RNN/CNN 是特征学习方法，分类器可以有多种选择。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1534769000699d16e4f78d7><p class=pgc-img-caption></p></div><p><strong>RNN(Recurrent Neutral Network)</strong></p><p>从 language model 理解，</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534769093584e1ee1d4f11><p class=pgc-img-caption></p></div><p>其实也就是下图的</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534769001722de04ed19dd><p class=pgc-img-caption></p></div><p>RNN 最后要加一层，一般是 softmax 分类。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15347690009436aaa68db47><p class=pgc-img-caption></p></div><p>由于 RNN 的训练存在梯度消失/梯度爆炸问题，实际中往往采用 LSTM/GRU 等结构，Classifier 采用 softmax 函数，和网络一起训练</p><p><strong>CNN(Convolutional neutral network)</strong></p><p>之前讲过啦，见实习总结之 sentence embedding，一张图简单回顾。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15347690008587d64f0f6b3><p class=pgc-img-caption></p></div><p>这里要说的是怎么将其用于意图分类。如果能够融入知识(如下图的语义标签)，将 word vector 和 knowledge vector 结合起来，效果可能会有所提升。</p><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15347690009645f2d584a81><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="机器不学习：NLP系列3 自然语言理解-意图分类" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1534769000948be6e1ecefa><p class=pgc-img-caption></p></div><p>阿里巴巴做了实验，发现在他们自己 4k+ 的测试集上能带来 3% 的效果提升，并且，越是知识依赖严重的领域，效果越是明显，比如说在音乐、地图领域的提升比天气领域的提升明显很多。</p><p><strong>融合规则和深度学习的系统</strong></p><ul><li>规则解决哪些问题？</li><li>冷启动</li><li>解bug</li><li>解业务特有意图</li><li>模型解决哪些问题？</li><li>海量数据下把问题解决的更加深入和彻底</li><li>解通用的意图</li></ul><h1><strong>产品</strong></h1><p>意图分类在阿里产品中的使用，如汽车/阿里云/YunOS手机助理/支付宝/天猫魔盒/机器人等等。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'机器','不学习','NLP'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>