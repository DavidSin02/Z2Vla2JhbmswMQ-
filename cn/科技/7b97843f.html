<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools | æå®¢å¿«è¨Š</title><meta property="og:title" content="35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/ceac9629132b415586fd3872913607af"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><meta property="article:published_time" content="2020-11-14T20:59:54+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:54+08:00"><meta name=Keywords content><meta name=description content="35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/7b97843f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>æ—¥å¸¸ç”Ÿæ´»æ˜¯ç”±è§„åˆ™é©±åŠ¨çš„ã€‚çº¢ç¯åœç»¿ç¯è¡Œï¼Œè¿™æ˜¯æˆ‘ä»¬çš„äº¤é€šè§„åˆ™ï¼›æˆ‘ä»¬ç«™ç€å¾€ä¸Šè·³ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦è½ä¸‹æ¥ï¼Œè¿™æ˜¯åœ°çƒçš„å¼•åŠ›è§„åˆ™ã€‚è§„åˆ™åœ¨ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨ã€‚è½¯ä»¶å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿéœ€è¦è§„åˆ™ï¼Œæ»¡è¶³ä»€ä¹ˆè§„åˆ™åº”è¯¥è¿›å…¥ä»€ä¹ˆåˆ†æ”¯ã€‚å¦‚æœåšè¿‡é£æ§ç³»ç»Ÿï¼Œå°±çŸ¥é“é£æ§ç³»ç»Ÿé‡Œå­˜åœ¨éå¸¸å¤šçš„è§„åˆ™ï¼ˆæ¯”å¦‚ï¼šage &lt; 16 || age > 50 -> REJECT ï¼‰ã€‚æœ€ä¾¿æ·çš„å®ç°å°±æ˜¯ç”¨ if-else æ¥å†™ï¼Œä½†æ˜¯éšç€è§„åˆ™çš„å¢åŠ ä»¥åŠéœ€æ±‚çš„å˜åŠ¨ï¼Œä»£ç å°†å˜å¾—è¶Šæ¥è¶Šéš¾é˜…è¯»å’Œç†è§£ï¼Œå¦‚æœå†å»ä¿®æ”¹è¿™äº›ä»£ç ï¼Œç„¶åæµ‹è¯•ä¸å¤Ÿå……åˆ†çš„è¯ï¼Œå°†äº§ç”Ÿä¸¥é‡çš„ç”Ÿäº§äº‹æ•…ã€‚è¿™æ—¶å€™å°±è¦å¼•å…¥Droolsç­‰è§„åˆ™å¼•æ“äº†ã€‚Droolså°±æ˜¯ä¸ºäº†è§£å†³ä¸šåŠ¡ä»£ç å’Œä¸šåŠ¡è§„åˆ™åˆ†ç¦»çš„å¼•æ“ã€‚</p><p>è¦ä½¿ç”¨Droolsè§„åˆ™å¼•æ“ï¼Œéœ€è¦å…ˆå®‰è£…å®‰è£…JBoss Drools Supportæ’ä»¶ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´æ€ä¹ˆå®‰è£…å®‰è£…JBoss Drools Supportæ’ä»¶ã€‚ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</p><p>https://download.jboss.org/drools/release/7.3.0.Final/droolsjbpm-tools-distribution-7.3.0.Final.zip</p><p>1ã€ æ–°å»ºé¡¹ç›®sc-activiti-droolsï¼Œå¯¹åº”çš„pom.xmlæ–‡ä»¶å¦‚ä¸‹</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.sc&lt;/groupId&gt; &lt;artifactId&gt;sc-activiti-drools&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;sc-activiti-drools&lt;/name&gt; &lt;!-- FIXME change it to the project's website --&gt; &lt;url&gt;http://www.example.com&lt;/url&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Finchley.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-engine&lt;/artifactId&gt; &lt;version&gt;6.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;6.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;drools-core&lt;/artifactId&gt; &lt;version&gt;7.0.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;drools-compiler&lt;/artifactId&gt; &lt;version&gt;7.0.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;knowledge-api&lt;/artifactId&gt; &lt;version&gt;6.5.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven  defaults (may be moved to parent pom) --&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt; &lt;/plugin&gt; &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.7.0&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.20.1&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt; &lt;version&gt;2.8.2&lt;/version&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt; &lt;/project&gt;</pre><p>2ã€æ–°å»ºspringé…ç½®æ–‡ä»¶application.yml</p><pre>spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/sc?characterEncoding=utf8&amp;useSSL=true username: root password: root activiti: check-process-definitions: false #è‡ªåŠ¨éƒ¨ç½²éªŒè¯è®¾ç½®:true-å¼€å¯ï¼ˆé»˜è®¤ï¼‰ã€false-å…³é—­ jpa: properties: hibernate: hbm2ddl: auto: update show-sql: true server: port: 8081 context-path: / session: timeout: 10 tomcat: uri-encoding: UTF-8</pre><p>3ã€æ–°å»ºactivitiå¯¹åº”çš„é…ç½®æ–‡ä»¶activiti.cfg.xml</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource"&gt; &lt;property name="driverClass" value="com.mysql.jdbc.Driver" /&gt; &lt;property name="url" value="jdbc:mysql://localhost:3306/act?useUnicode=true&amp;characterEncoding=UTF-8" /&gt; &lt;property name="username" value="root" /&gt; &lt;property name="password" value="root" /&gt; &lt;/bean&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;property name="transactionManager" ref="transactionManager" /&gt; &lt;property name="databaseSchemaUpdate" value="true" /&gt; &lt;property name="customPostDeployers"&gt; &lt;list&gt;  &lt;bean class="org.activiti.engine.impl.rules.RulesDeployer" /&gt; &lt;/list&gt;  &lt;/property&gt; &lt;!--  &lt;property name="deploymentResources" value="classpath*:/bpmn/*.bpmn" /&gt;  --&gt; &lt;/bean&gt; &lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt; &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt; &lt;/bean&gt; &lt;bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService" /&gt; &lt;bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService" /&gt; &lt;bean id="taskService" factory-bean="processEngine" factory-method="getTaskService" /&gt; &lt;bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService" /&gt; &lt;bean id="managementService" factory-bean="processEngine" factory-method="getManagementService" /&gt; &lt;/beans&gt;</pre><p>4ã€æ–°å»ºè¯·å‡æµç¨‹å¯¹åº”çš„bpmnæ–‡ä»¶å¦‚ä¸‹</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test"&gt; &lt;process id="leave" name="è¯·å‡å®¡æ‰¹" isExecutable="true"&gt; &lt;startEvent id="startevent1" name="Start"&gt;&lt;/startEvent&gt; &lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; &lt;userTask id="usertask1" name="éƒ¨é—¨ç»ç†å®¡æ‰¹"&gt;&lt;/userTask&gt; &lt;businessRuleTask id="businessruletask1" name="å¤©æ•°åˆ¤æ–­" activiti:ruleVariablesInput="${leave}" activiti:rules="leave1,leave2" activiti:resultVariable="reason"&gt;&lt;/businessRuleTask&gt; &lt;serviceTask id="servicetask1" name="è·å–å˜é‡" activiti:class="sc.ad.service.DroolsService"&gt;&lt;/serviceTask&gt; &lt;userTask id="usertask2" name="HRå®¡æ‰¹"&gt;&lt;/userTask&gt; &lt;sequenceFlow id="flow1" sourceRef="startevent1" targetRef="usertask1"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow2" sourceRef="usertask1" targetRef="businessruletask1"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow3" sourceRef="businessruletask1" targetRef="servicetask1"&gt;&lt;/sequenceFlow&gt; &lt;userTask id="usertask3" name="æ€»ç»ç†å®¡æ‰¹"&gt;&lt;/userTask&gt; &lt;sequenceFlow id="flow4" sourceRef="servicetask1" targetRef="usertask3"&gt; &lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[${reason[0].total &gt;= 10}]]&gt;&lt;/conditionExpression&gt; &lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow5" sourceRef="servicetask1" targetRef="usertask2"&gt; &lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[${reason[0].total &lt; 10}]]&gt;&lt;/conditionExpression&gt; &lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow6" sourceRef="usertask3" targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow7" sourceRef="usertask2" targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; &lt;/process&gt; &lt;/definitions&gt;</pre><p>bpmnæ–‡ä»¶å¯¹åº”çš„å›¾å¦‚ä¸‹</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ceac9629132b415586fd3872913607af><p class=pgc-img-caption></p></div><p>5ã€æ–°å»ºè§„åˆ™æ–‡ä»¶leave.drl</p><pre>package sc.ad; import sc.ad.model.Leave; rule "leave1" when u : Leave(day &lt; 3); then u.setTotal(u.getDay() + 2); end rule "leave2" when u : Leave(day &gt;= 3); then u.setTotal(u.getDay() + 5); end</pre><p>å¯¹åº”çš„å›¾å¦‚ä¸‹</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/996cf62b503a49fdb304c0c9b9c6aca5><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>6ã€æ–°å»ºspringbootå¯åŠ¨ç±»æ–‡ä»¶</p><pre>package sc.ad; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.context.annotation.ImportResource; @SpringBootApplication @ImportResource("activiti.cfg.xml") public class ActivitiDroolsApp { public static void main(String[] args) { SpringApplication.run(ActivitiDroolsApp.class, args); } }</pre><p>7ã€æ–°å»ºä¸€ä¸ªcontrollerï¼Œç”¨æ¥å‘èµ·è¯·å‡è¯·æ±‚</p><pre>package sc.ad.controller; import java.util.HashMap; import java.util.List; import java.util.Map; import org.activiti.engine.RepositoryService; import org.activiti.engine.RuntimeService; import org.activiti.engine.TaskService; import org.activiti.engine.repository.Deployment; import org.activiti.engine.repository.DeploymentBuilder; import org.activiti.engine.repository.ProcessDefinition; import org.activiti.engine.runtime.ProcessInstance; import org.activiti.engine.task.Task; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import sc.ad.model.Leave; @RestController public class ADController { @Autowired private RepositoryService repositoryService; @Autowired private RuntimeService runtimeService; @Autowired private TaskService taskService; // @RequestMapping("/ad") // public void ad() { // // // æ ¹æ®bpmnæ–‡ä»¶éƒ¨ç½²æµç¨‹ // Deployment deployment = repositoryService.createDeployment() // .addClasspathResource("holiday.bpmn").deploy(); // // è·å–æµç¨‹å®šä¹‰ // ProcessDefinition processDefinition = repositoryService // .createProcessDefinitionQuery() // .deploymentId(deployment.getId()).singleResult(); // // å¯åŠ¨æµç¨‹å®šä¹‰ï¼Œè¿”å›æµç¨‹å®ä¾‹ // ProcessInstance pi = runtimeService // .startProcessInstanceById(processDefinition.getId()); // String processId = pi.getId(); // System.out.println("æµç¨‹åˆ›å»ºæˆåŠŸï¼Œå½“å‰æµç¨‹å®ä¾‹IDï¼š" + processId); // // Task task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("ç¬¬ä¸€æ¬¡æ‰§è¡Œå‰ï¼Œä»»åŠ¡åç§°ï¼š" + task.getName()); // taskService.complete(task.getId()); // // task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("ç¬¬äºŒæ¬¡æ‰§è¡Œå‰ï¼Œä»»åŠ¡åç§°ï¼š" + task.getName()); // taskService.complete(task.getId()); // // task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("taskä¸ºnullï¼Œä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼š" + task); // } @RequestMapping("/drl") public void drl() { /** * æ³¨æ„è¿™é‡Œï¼šå¿…é¡»è¦æŠŠdrlæ–‡ä»¶ä¸€èµ·deploy */ DeploymentBuilder deploy = repositoryService.createDeployment(); deploy.addClasspathResource("leave.bpmn").addClasspathResource("leave.drl"); deploy.deploy(); ProcessInstance pi = runtimeService.startProcessInstanceByKey("leave"); Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();  vars.put("leave", new Leave("ç™½å±•å ‚", 12)); /** * å½“å‰ä»»åŠ¡ */ List&lt;Task&gt; tasks = taskService.createTaskQuery().processInstanceId(pi.getId()).list(); for(Task task : tasks) { System.out.println(task.getId() + " , " + task.getName()); taskService.complete(task.getId(), vars); } /** * ä¸‹ä¸€æ­¥ä»»åŠ¡ */ tasks = taskService.createTaskQuery().processInstanceId(pi.getId()).list(); for(Task task : tasks) { System.out.println(task.getId() + " , " + task.getName()); } } }</pre><p>8ã€å¯åŠ¨å¹¶éªŒè¯è§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ</p><p>ä»æ—¥å¿—ä¸­çœ‹å¯åŠ¨æˆåŠŸ</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/84c0a86f42e34364b901d5f9dd05724a><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>è®¿é—®http://127.0.0.1:8081/drlåï¼Œå†æ¬¡æŸ¥çœ‹æ—¥å¿—ï¼š</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/acb4f7ef9244458e99b0d110f403448b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>æŠŠä¿®æ”¹controllerçš„å¦‚ä¸‹ä»£ç </p><p>vars.put("leave", new Leave("ç™½å±•å ‚", 12));</p><p>æ”¹æˆ</p><p>vars.put("leave", new Leave("ä¹”å³°", 2));</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c8e226cff0d3492c87f858e2c788596e><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>å¯ä»¥çœ‹åˆ°è§„åˆ™æ–‡ä»¶çš„è§„åˆ™å·²ç»ç”Ÿæ•ˆï¼š</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè§„åˆ™å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/500c4921d01e47e091d65a6a5bb0d930><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'35','Activiti','è§„åˆ™'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>