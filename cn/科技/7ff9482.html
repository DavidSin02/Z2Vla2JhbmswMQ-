<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1537855085053bb78880a11"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7ff9482.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7ff9482.html><meta property="article:published_time" content="2020-10-29T20:59:18+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:18+08:00"><meta name=Keywords content><meta name=description content="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/7ff9482.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä¸ºä»€ä¹ˆè¦å¼‚æ­¥ â€œå½“æˆ‘ä»¬åœ¨æ˜Ÿå·´å…‹ä¹°å’–å•¡æ—¶ï¼Œå‡è®¾æœ‰ 100 ä¸ªäººåœ¨æ’é˜Ÿï¼Œä¹Ÿè®¸å’–å•¡çš„ä¸‹å•åªè¦ 10 ç§’ï¼Œä½†æ˜¯å’–å•¡çš„åˆ¶ä½œåˆ°å®¢äººé¢†å–å’–å•¡è¦ 1000 ç§’ã€‚å¦‚æœåœ¨åŒæ­¥çš„åœºæ™¯ä¸‹ï¼Œç¬¬ä¸€ä¸ªå®¢äººä¸‹å•åˆ°é¢†å–å®Œå’–å•¡è¦ 1010 ç§’æ‰èƒ½è½®åˆ°ä¸‹ä¸€ä¸ªå®¢äººï¼Œè¿™åœ¨æ•ˆç‡ï¼ˆæŸäº›åœºæ™¯ï¼‰ä¸Šæ¥è¯´ä¼šæ¯”è¾ƒä½ä¸‹ã€‚ å¦‚æœæˆ‘ä»¬å¼‚æ­¥å¤„ç†è¿™ä¸ªæµç¨‹ï¼Œå®¢äººä¸‹å• 10 ç§’æ‹¿åˆ°å‡­è¯ï¼Œå®¢äººå°±å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ï¼Œå¹¶ä¸” 10 ç§’åä¸‹ä¸€ä¸ªå®¢äººå¯ä»¥ç»§ç»­ä¸‹å•ï¼Œå¹¶ä¸é˜»ç¢æµç¨‹ã€‚åè€Œå¯ä»¥é€šè¿‡å‡­è¯ï¼Œè®©å®¢äººæ‹¿åˆ°è‡ªå·±çš„å’–å•¡ï¼Œä¹Ÿè®¸æ—¶é—´ä¸Šå¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªä¸‹å•çš„å®¢äººå…ˆæ‹¿åˆ°ã€‚</p><div class=pgc-img><img alt="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1537855085053bb78880a11><p class=pgc-img-caption></p></div><p>åœ¨ç½‘é¡µçš„ä¸–ç•Œé‡Œä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œä¸å¦¨æˆ‘ä»¬çœ‹çœ‹åœ¨æ‰§è¡Œ JS ä»£ç çš„ä¸»çº¿ç¨‹é‡Œï¼Œå¦‚æœé‡åˆ°äº† AJAX è¯·æ±‚ï¼Œç”¨æˆ·äº‹ä»¶ç­‰ï¼Œå¦‚æœä¸é‡‡ç”¨å¼‚æ­¥çš„æ–¹æ¡ˆï¼Œä½ ä¼šä¸€ç›´ç­‰å¾…ï¼Œç­‰å¾…ç¬¬ä¸€ä¸ªè€—æ—¶çš„å¤„ç†å®Œæˆæ‰èƒ½æ¥ä¸Šä¸‹ä¸€ä¸ª JS ä»£ç çš„æ‰§è¡Œï¼Œäºæ˜¯ç•Œé¢å°±å¡ä½äº†ã€‚ ä¹Ÿè®¸æœ‰äººä¼šæƒ³ï¼Œæ—¢ç„¶å¤§å®¶éƒ½è¯´ç°åœ¨ç½‘é¡µä¸Šæ€§èƒ½æŸè€—æœ€å¤§çš„å±äº DOM èŠ‚ç‚¹çš„æ“ä½œï¼ŒæŠŠè¿™äº›ææˆå¼‚æ­¥ï¼Œè¡Œä¸è¡Œï¼Ÿå…¶å®è¿™ä¼šå¸¦æ¥ä¸€ä¸ªä¸ç¡®å®šæ€§é—®é¢˜ï¼šæ—¢ â€œæˆåŠŸâ€ çš„çŠ¶æ€åˆ°åº•è°å…ˆæ¥çš„é—®é¢˜ã€‚ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ“ä½œ DOMï¼Œæ—¢ç»™èŠ‚ç‚¹æ·»åŠ å†…å®¹ï¼Œä¹Ÿç»™èŠ‚ç‚¹åˆ é™¤ï¼Œé‚£ä¹ˆåˆ°åº•ä»¥è°ä¸ºåŸºå‡†å‘¢ï¼Ÿè€ƒè™‘åˆ°å¤æ‚æ€§ï¼Œä¹Ÿå°±å¯è§ä¸€æ–‘äº†ã€‚ Event loop è™½ç„¶å¼‚æ­¥ä¸ event loop æ²¡æœ‰å¤ªç›´æ¥çš„å…³ç³»ï¼Œå‡†ç¡®çš„æ¥è®² event loop åªæ˜¯å®ç°å¼‚æ­¥çš„ä¸€ç§æœºåˆ¶ã€‚ï¼ˆäº†è§£ä¸ºä¸»ï¼‰ è¿˜æ˜¯ä»¥ä¸Šé¢å’–å•¡é¦†ä¸ºä¾‹å­ï¼Œå‡å®šåœºæ™¯è¿˜æ˜¯ 100 äººï¼Œè¿™ 100 äººé™¤äº†ä¸‹å•æ˜¯ä¸å’–å•¡æœ¬èº«æœ‰å…³è”ä¹‹å¤–ï¼Œå…¶ä½™çš„æ—¶é—´ï¼Œæ¯”å¦‚çœ‹ä¹¦ï¼Œç©æ¸¸æˆçš„ç­‰å¯ä»¥è§†ä¸ºè‡ªå·±çš„æ‰§è¡Œé€»è¾‘ã€‚ å¦‚æœç”¨ event loop æ¥ç»™å®ƒåšä¸€ä¸ªç®€å•çš„ç”»åƒï¼Œé‚£ä¹ˆå®ƒå°±åƒï¼šåœ¨ä¸å’–å•¡åº—åº—å‘˜æ²Ÿé€šä¸‹å•è§†ä¸ºä¸»æ‰§è¡Œæ ˆï¼Œå’–å•¡çš„åˆ¶ä½œå¯ä»¥è§†ä¸ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæ·»åŠ åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œä¸€ç›´ç­‰å¸¦ 100 ä¸ªäººéƒ½ä¸‹å•å®Œæˆï¼Œç„¶åå¼€å§‹è¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäº‹ä»¶åå°±æ˜¯ä¸‹å•å‡­è¯ï¼Œå¦‚æœæœ‰å¯¹åº”çš„ handlerï¼Œé‚£ä¹ˆå°±æ‰§è¡Œå«å¯¹åº”çš„å®¢äººæ¥é¢†å–å’–å•¡ã€‚ è¿™ä¸ªè¿‡ç¨‹ï¼Œæ˜¯å¾ªç¯ä¸æ–­çš„ã€‚å‡è®¾æ²¡æœ‰å®¢äººæ¥ä¸‹å•çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯åº—å‘˜å¤„äºç©ºé—²æ—¶é—´ï¼ˆå¯èƒ½è‡ªå·±å»æç‚¹åˆ«çš„ï¼‰ã€‚ ä¼ ç»Ÿçš„ Callback å‡å®šä¸€ä¸ª asyncFetchDataSource å‡½æ•°ç”¨äºè·å–è¿œç¨‹æ•°æ®æºï¼Œå¯èƒ½æœ‰ 20 ç§’ã€‚ function asyncFetchDataSource(cb){ (â€¦ è·å–æ•°æ® , function(response){ typeof cb === 'function' && cb(response) }) } è¿™ç§å½¢å¼çš„ callback å¯ä»¥é€‚ç”¨äºç®€å•åœºæ™¯ï¼Œå¦‚æœè¿™é‡Œæœ‰ä¸€ä¸ªæ›´å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚è·å–å®Œæ•°æ®æºä¹‹åï¼Œä¾æ® idï¼Œè·å–åˆ°æŸä¸ªæ•°æ®ï¼Œåœ¨è¿™æŸä¸ªæ•°æ®ä¸­å†ä¾æ® id æ¥æ›´æ–°æŸä¸ªåˆ—è¡¨ï¼Œå¯ä»¥é‡è§çš„èƒ½çœ‹åˆ°ä»£ç å˜æˆäº†ï¼š asyncFetchDataSource('',function(data_a){ const { id_a } = data_a asyncFetchDataSource( id_a,function(data_b){ const { id_b } = data_b asyncFetchDataSource(id, function(data_c){ }) }) }) å¦‚æœæœ‰æç«¯æƒ…å†µå‡ºç°ï¼Œè¿™é‡Œçš„ callback å°±ä¼šå˜æˆæ— æé™äº†ã€‚ Thunk å‡½æ•° è¿™æ˜¯ä¸€ç§ â€œä¼ åè°ƒç”¨â€ çš„ç­–ç•¥ï¼Œè¡¨ç°çš„å½¢å¼å°±æ˜¯å°†å‚æ•°æ”¾å…¥ä¸€ä¸ªä¸´æ—¶å‡½æ•°ï¼Œç„¶åå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“å†…ã€‚ function asyncFetchDataSource(url){ return function(callback){ fetch(url, callback) } } const dataSource = asyncFetchDataSource('https://github.com/icepy'); dataSource(function(data){ }) Promise Promise æ­£æ˜¯æƒ³æ¥å¤„ç†è¿™æ ·çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ Promise è¯¥å¦‚ä½•å¤„ç†ä¸€æ®µ Ajaxï¼Ÿ function fetch(){ return new Promise(function(resolve,reject){ $.ajax({ url: 'xxx', success:function(data){ resolve(data) }, error:function(error){ reject(error) } }) }) } fetch().then(function(data){ }).catch(function(error){}) Promise å£°æ˜å‘¨æœŸï¼š è¿›è¡Œä¸­ï¼ˆpendingï¼‰ å·²ç»å®Œæˆï¼ˆfulfilledï¼‰ æ‹’ç»ï¼ˆrejectedï¼‰ å¦‚åŒä¸Šé¢ Ajax çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„åŒ…è£…ä¸€ä¸ªå‡½æ•°ï¼Œè®© fetch å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ åœ¨ Promise æ„é€ å‡½æ•°é‡Œï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª callbackï¼Œå¹¶ä¸”åœ¨è¿™é‡Œå®Œæˆä¸»ä½“é€»è¾‘çš„ç¼–å†™ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼šPromise å¯¹è±¡åªèƒ½é€šè¿‡ resolve å’Œ reject å‡½æ•°æ¥è¿”å›ï¼Œåœ¨å¤–éƒ¨ä½¿ç”¨ then æˆ– catch æ¥è·å–ã€‚ å¦‚æœä½ ç›´æ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆthrow new Error(â€˜errorâ€™)ï¼‰ï¼Œcatch ä¹Ÿæ˜¯å¯ä»¥æ­£ç¡®çš„æ•è·åˆ°çš„ã€‚ Promise å…¶ä»–çš„æ–¹æ³• Promise.allï¼ˆå½“æ‰€æœ‰åœ¨å¯è¿­ä»£å‚æ•°ä¸­çš„ promises å·²å®Œæˆï¼Œæˆ–è€…ç¬¬ä¸€ä¸ªä¼ é€’çš„ promiseï¼ˆæŒ‡ rejectï¼‰å¤±è´¥æ—¶ï¼Œè¿”å› promiseã€‚ï¼‰ var p1 = Promise.resolve(3); var p2 = 1337; var p3 = new Promise((resolve, reject) => { setTimeout(resolve, 100, "foo"); }); Promise.all([p1, p2, p3]).then(values => { console.log(values); // [3, 1337, "foo"] }); Promise.raceï¼ˆè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œå‚æ•° iterable ä¸­åªè¦æœ‰ä¸€ä¸ª promise å¯¹è±¡ â€œ å®Œæˆï¼ˆresolveï¼‰â€ æˆ– â€œ å¤±è´¥ï¼ˆrejectï¼‰â€ï¼Œæ–°çš„ promise å°±ä¼šç«‹åˆ» â€œ å®Œæˆï¼ˆresolveï¼‰â€ æˆ–è€… â€œ å¤±è´¥ï¼ˆrejectï¼‰â€ï¼Œå¹¶è·å¾—ä¹‹å‰é‚£ä¸ª promise å¯¹è±¡çš„è¿”å›å€¼æˆ–è€…é”™è¯¯åŸå› ã€‚ï¼‰ var p1 = new Promise(function(resolve, reject) { setTimeout(resolve, 500, "one"); }); var p2 = new Promise(function(resolve, reject) { setTimeout(resolve, 100, "two"); }); Promise.race([p1, p2]).then(function(value) { console.log(value); // "two" // ä¸¤ä¸ªéƒ½å®Œæˆï¼Œä½† p2 æ›´å¿« }); æœ‰è¶£çš„æ˜¯å¦‚æœä½ ä½¿ç”¨ ES6 çš„ classï¼Œä½ æ˜¯å¯ä»¥å»æ´¾ç”Ÿ Promise çš„ã€‚ class MePromise extends Promise{ // å¤„ç† ... } Generator Generator å¯ä»¥è¾…åŠ©æˆ‘ä»¬å®Œæˆå¾ˆå¤šå¤æ‚çš„ä»»åŠ¡ï¼Œè€Œè¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œåˆä¸ iterator æ¯æ¯ç›¸å…³ã€‚ ä¸¾ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œç›¸ä¿¡æœ‰å¾ˆå¤šæœ‹å‹ï¼Œåº”è¯¥ä½¿ç”¨è¿‡ co è¿™ä¸ªå¼‚æ­¥ç¼–ç¨‹çš„åº“ï¼Œå®ƒå°±æ˜¯ç”¨ Generator æ¥å®ç°ï¼Œå½“ç„¶å®ƒçš„è®¾è®¡ä¼šæ¯”ä¾‹å­è¦å¤æ‚çš„å¤šï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ª co ç®€å•çš„ç”¨æ³•ï¼š import co from 'co' co(function* () { var result = yield Promise.resolve(true); return result; }).then(function (value) { console.log(value); }, function (err) { console.error(err.stack); }); ç›¸åº”çš„ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€åŒ–çš„ç‰ˆæœ¬ï¼š function co(task){ let _task = task() let resl = _task.next(); while(!resl.done){ console.log(resl); resl = _task.next(resl.value); } } function sayName(){ return { name: 'icepy' } } function assign *(f){ console.log(f) let g = yield sayName() return Object.assign(g,{age:f}); } co(function *(){ let info = yield *assign(18) console.log(info) }) è™½ç„¶ï¼Œè¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿˜ä¸èƒ½å¾ˆå¥½çš„çœ‹å‡ºæ¥ â€œå¼‚æ­¥â€ çš„åœºæ™¯ï¼Œä½†æ˜¯å®ƒå¾ˆå¥½çš„æè¿°äº† Generator çš„ä½¿ç”¨æ–¹å¼ã€‚ ä»æœ€å¼€å§‹çš„å®šä¹‰ä¸­ï¼Œå·²ç»å’Œå¤§å®¶è¯´æ˜äº†ï¼ŒGenerator æœ€ç»ˆè¿”å›çš„ä¾ç„¶æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œæœ‰äº†è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œå½“ä½ åœ¨å¤„ç†æŸäº›åœºæ™¯æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ yield æ¥æ§åˆ¶ï¼Œæµç¨‹çš„èµ°å‘ã€‚ é€šè¿‡ co å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…ˆæ¥æ‰§è¡Œ next æ–¹æ³•ï¼Œç„¶åé€šè¿‡ä¸€ä¸ª while å¾ªç¯ï¼Œæ¥åˆ¤æ–­ done æ˜¯å¦ä¸º trueï¼Œå¦‚æœä¸º true åˆ™ä»£è¡¨æ•´ä¸ªè¿­ä»£è¿‡ç¨‹çš„ç»“æŸï¼Œäºæ˜¯ï¼Œè¿™é‡Œå°±å¯ä»¥é€€å‡ºå¾ªç¯äº†ã€‚åœ¨ Generator ä¸­çš„è¿”å›å€¼ï¼Œå¯ä»¥é€šè¿‡ç»™ next æ–¹æ³•ä¼ é€’å‚æ•°çš„æ–¹å¼æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯é‡ä¸Šç¬¬ä¸€ä¸ª yield çš„è¿”å›å€¼ã€‚ æœ‰é€»è¾‘ï¼Œè‡ªç„¶ä¼šå­˜åœ¨é”™è¯¯ï¼Œåœ¨ Generator æ•è·é”™è¯¯çš„æ—¶æœºä¸æ‰§è¡Œ throw æ–¹æ³•çš„é¡ºåºæœ‰å…³ç³»ï¼Œä¸€ä¸ªå°ä¾‹å­ï¼š let hu = function *(){ let g = yield 1; try { let j = yield 2; } catch(e){ console.log(e) } return 34 } let _it = hu(); console.log(_it.next()) console.log(_it.next()) console.log(_it.throw(new Error('hu error'))) å½“æˆ‘èƒ½æ•è·åˆ°é”™è¯¯çš„æ—¶æœºæ˜¯å…è®¸å®Œç¬¬äºŒæ¬¡çš„ yieldï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ try äº†ã€‚ async await async function createNewDoc() { let response = await db.post({}); // post a new doc return await db.get(response.id); // find by id }</p><div class=pgc-img><img alt="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1537855578677698bb57627><p class=pgc-img-caption></p></div><p>https://tc39.github.io/ecmascript-asyncawait/ æ ¹æ®è§„èŒƒè§„å®šä¸€ä¸ª asnyc å‡½æ•°æ€»æ˜¯è¦è¿”å›ä¸€ä¸ª Promiseï¼Œä»ä»£ç ç›´è§‚ä¸Šæ¥è¯´ï¼Œè™½ç„¶ç®€æ´äº†ï¼Œä½†æ˜¯ async await å¹¶æœªä¸‡èƒ½ï¼Œå®ƒæœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œæ¯”å¦‚ï¼š å› ä¸ºæ˜¯é¡ºåºæ‰§è¡Œï¼Œå‡è®¾æœ‰ä¸‰ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™é‡Œå¹¶æ²¡æœ‰å¾ˆå¥½çš„åˆ©ç”¨åˆ°å¼‚æ­¥å¸¦æ¥çš„æ­¢æŸï¼ˆå†åŒ…è£…ä¸€ä¸ª Promise.allï¼‰ï¼› å¦‚æœè¦æ•è·å¼‚å¸¸ï¼Œéœ€è¦å»åŒ… try catchï¼› ç¼ºå°‘æ§åˆ¶æµç¨‹ï¼Œæ¯”å¦‚ progressï¼ˆè¿›åº¦ï¼‰pauseï¼Œresume ç­‰å‘¨æœŸæ€§çš„æ–¹æ³•ï¼› æ²¡æœ‰æ‰“æ–­çš„åŠŸèƒ½ã€‚ ä¸»æµçš„å¼‚æ­¥å¤„ç†æ–¹æ¡ˆ æˆ‘å–œæ¬¢ç”¨ coï¼Œè€Œä¸”ç¤¾åŒºä½¿ç”¨ä¹Ÿå¾ˆå¹¿æ³›ï¼Œhttps://github.com/tj/coã€‚ co(function* () { var result = yield Promise.resolve(true); return result; }).then(function (value) { console.log(value); }, function (err) { console.error(err.stack); }); babel polyfill æ”¯æŒï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨å¼‚æ­¥è§£å†³æ–¹æ¡ˆ å¦‚æœä½ æƒ³ä½¿ç”¨å…¨çš„ polyfiilï¼Œç›´æ¥ npm install â€”save babel-polyfillï¼Œç„¶ååœ¨ webpack é‡Œè¿›è¡Œé…ç½®å³å¯ã€‚ module.exports = { entry: ["babel-polyfill", "./app/js"] }; å½“ç„¶ç”±äºæˆ‘ç›®å‰çš„å¼€å‘åŸºäºçš„æµè§ˆå™¨éƒ½æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬æ˜¯æŒ‘é€‰å…¶ä¸­çš„ï¼š https://github.com/facebook/regenerator/tree/master/packages/regenerator-runtime https://github.com/facebook/regenerator/tree/master/packages/regenerator-transform å¦‚æœä½ è¦ä½¿ç”¨ async await é…ç½®ä¸Š http://babeljs.io/docs/plugins/transform-async-to-generator/ å³å¯ Node.js ç¯å¢ƒä¸­ä½¿ç”¨å¼‚æ­¥è§£å†³æ–¹æ¡ˆ ç”±äºæœ¬äººçš„ node ä½¿ç”¨çš„ LTS å·²ç»æ˜¯ 8.9.3 ç‰ˆæœ¬äº†ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹å·²ç»ä¸å†ä½¿ç”¨ babel å»è¿›è¡Œè½¬æ¢ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ co è¿™æ ·çš„åº“ã€‚ å½“ç„¶ co ä¹Ÿä¸æ˜¯ä¸‡èƒ½ï¼Œä¸€å®šè¦æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œä¸å…¶ä»–å¼‚æ­¥å¤„ç†çš„æ–¹å¼ï¼Œé…åˆä¸­ä½¿ç”¨ã€‚ æ€»ç»“ ç›¸ä¿¡æœªæ¥çš„ JS ç¼–ç¨‹ï¼Œåªä¼šè¶Šæ¥è¶Šç®€å•ï¼Œä¸è¦æ‹˜æ³¥äºè¯­æ³•ï¼Œè¯­è¨€ä¸Šçš„ç‰¹æ€§ï¼Œä¸å¦¨å¤šçœ‹ä¸€çœ‹ â€œå¤–é¢çš„ä¸–ç•Œâ€ã€‚</p><div class=pgc-img><img alt="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1537855056524d925160122><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="æ·±å…¥æµ…å‡º JS å¼‚æ­¥å¤„ç†æŠ€æœ¯æ–¹æ¡ˆ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1537855602353986a356ea6><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æµ…å‡º','JS','å¼‚æ­¥'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>