<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º | æå®¢å¿«è¨Š</title><meta property="og:title" content="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/be627f9ffc4d4a6494a39c45c3be5d03"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/802e8f5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/802e8f5.html><meta property="article:published_time" content="2020-10-29T21:06:07+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:07+08:00"><meta name=Keywords content><meta name=description content="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/802e8f5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>trait å‘Šè¯‰ Rust ç¼–è¯‘å™¨æŸä¸ªç‰¹å®šç±»å‹æ‹¥æœ‰å¯èƒ½ä¸å…¶ä»–ç±»å‹å…±äº«çš„åŠŸèƒ½ã€‚å¯ä»¥é€šè¿‡ trait ä»¥ä¸€ç§æŠ½è±¡çš„æ–¹å¼å®šä¹‰å…±äº«çš„è¡Œä¸ºã€‚å¯ä»¥ä½¿ç”¨ trait bounds æŒ‡å®šæ³›å‹æ˜¯ä»»ä½•æ‹¥æœ‰ç‰¹å®šè¡Œä¸ºçš„ç±»å‹ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/be627f9ffc4d4a6494a39c45c3be5d03><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>å®šä¹‰ trait</h3><p>ä¸€ä¸ªç±»å‹çš„è¡Œä¸ºç”±å…¶å¯ä¾›è°ƒç”¨çš„æ–¹æ³•æ„æˆã€‚å¦‚æœå¯ä»¥å¯¹ä¸åŒç±»å‹è°ƒç”¨ç›¸åŒçš„æ–¹æ³•çš„è¯ï¼Œè¿™äº›ç±»å‹å°±å¯ä»¥å…±äº«ç›¸åŒçš„è¡Œä¸ºäº†ã€‚trait å®šä¹‰æ˜¯ä¸€ç§å°†æ–¹æ³•ç­¾åç»„åˆèµ·æ¥çš„æ–¹æ³•ï¼Œç›®çš„æ˜¯å®šä¹‰ä¸€ä¸ªå®ç°æŸäº›ç›®çš„æ‰€å¿…éœ€çš„è¡Œä¸ºçš„é›†åˆã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰å¤šä¸ªå­˜æ”¾äº†ä¸åŒç±»å‹å’Œå±æ€§æ–‡æœ¬çš„ç»“æ„ä½“ï¼šç»“æ„ä½“ NewsArticle ç”¨äºå­˜æ”¾å‘ç”Ÿäºä¸–ç•Œå„åœ°çš„æ–°é—»æ•…äº‹ï¼Œè€Œç»“æ„ä½“ Tweet æœ€å¤šåªèƒ½å­˜æ”¾ 280 ä¸ªå­—ç¬¦çš„å†…å®¹ï¼Œä»¥åŠåƒæ˜¯å¦è½¬æ¨æˆ–æ˜¯å¦æ˜¯å¯¹æ¨å‹çš„å›å¤è¿™æ ·çš„å…ƒæ•°æ®ã€‚</p><p>æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªå¤šåª’ä½“èšåˆåº“ç”¨æ¥æ˜¾ç¤ºå¯èƒ½å‚¨å­˜åœ¨ NewsArticle æˆ– Tweet å®ä¾‹ä¸­çš„æ•°æ®çš„æ€»ç»“ã€‚æ¯ä¸€ä¸ªç»“æ„ä½“éƒ½éœ€è¦çš„è¡Œä¸ºæ˜¯ä»–ä»¬æ˜¯èƒ½å¤Ÿè¢«æ€»ç»“çš„ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥è°ƒç”¨å®ä¾‹çš„ summarize æ–¹æ³•æ¥è¯·æ±‚æ€»ç»“ã€‚ç¤ºä¾‹ 10-12 ä¸­å±•ç¤ºäº†ä¸€ä¸ªè¡¨ç°è¿™ä¸ªæ¦‚å¿µçš„ Summary trait çš„å®šä¹‰ï¼š</p><p>æ–‡ä»¶å: src/lib.rs</p><pre><code>pub trait Summary {    fn summarize(&amp;self) -&gt; String;}</code></pre><p>ç¤ºä¾‹ 10-12ï¼šSummary trait å®šä¹‰ï¼Œå®ƒåŒ…å«ç”± summarize æ–¹æ³•æä¾›çš„è¡Œä¸º</p><p>è¿™é‡Œä½¿ç”¨ trait å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ª traitï¼Œåé¢æ˜¯ trait çš„åå­—ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ Summaryã€‚åœ¨å¤§æ‹¬å·ä¸­å£°æ˜æè¿°å®ç°è¿™ä¸ª trait çš„ç±»å‹æ‰€éœ€è¦çš„è¡Œä¸ºçš„æ–¹æ³•ç­¾åï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ fn summarize(&self) -> Stringã€‚</p><p>åœ¨æ–¹æ³•ç­¾ååè·Ÿåˆ†å·ï¼Œè€Œä¸æ˜¯åœ¨å¤§æ‹¬å·ä¸­æä¾›å…¶å®ç°ã€‚æ¥ç€æ¯ä¸€ä¸ªå®ç°è¿™ä¸ª trait çš„ç±»å‹éƒ½éœ€è¦æä¾›å…¶è‡ªå®šä¹‰è¡Œä¸ºçš„æ–¹æ³•ä½“ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šç¡®ä¿ä»»ä½•å®ç° Summary trait çš„ç±»å‹éƒ½æ‹¥æœ‰ä¸è¿™ä¸ªç­¾åçš„å®šä¹‰å®Œå…¨ä¸€è‡´çš„ summarize æ–¹æ³•ã€‚</p><p>trait ä½“ä¸­å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•ï¼šä¸€è¡Œä¸€ä¸ªæ–¹æ³•ç­¾åä¸”éƒ½ä»¥åˆ†å·ç»“å°¾ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/accf6553-478d-4288-a29f-6dd71cd4aa41><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>ä¸ºç±»å‹å®ç° trait</h3><p>ç°åœ¨æˆ‘ä»¬å®šä¹‰äº† Summary traitï¼Œæ¥ç€å°±å¯ä»¥åœ¨å¤šåª’ä½“èšåˆåº“ä¸­éœ€è¦æ‹¥æœ‰è¿™ä¸ªè¡Œä¸ºçš„ç±»å‹ä¸Šå®ç°å®ƒäº†ã€‚ç¤ºä¾‹ 10-13 ä¸­å±•ç¤ºäº† NewsArticle ç»“æ„ä½“ä¸Š Summary trait çš„ä¸€ä¸ªå®ç°ï¼Œå®ƒä½¿ç”¨æ ‡é¢˜ã€ä½œè€…å’Œåˆ›å»ºçš„ä½ç½®ä½œä¸º summarize çš„è¿”å›å€¼ã€‚å¯¹äº Tweet ç»“æ„ä½“ï¼Œæˆ‘ä»¬é€‰æ‹©å°† summarize å®šä¹‰ä¸ºç”¨æˆ·ååè·Ÿæ¨æ–‡çš„å…¨éƒ¨æ–‡æœ¬ä½œä¸ºè¿”å›å€¼ï¼Œå¹¶å‡è®¾æ¨æ–‡å†…å®¹å·²ç»è¢«é™åˆ¶ä¸º 280 å­—ç¬¦ä»¥å†…ã€‚</p><p>æ–‡ä»¶å: src/lib.rs</p><pre><code>pub struct NewsArticle {    pub headline: String,    pub location: String,    pub author: String,    pub content: String,}impl Summary for NewsArticle {    fn summarize(&amp;self) -&gt; String {        format!("{}, by {} ({})", self.headline, self.author, self.location)    }}pub struct Tweet {    pub username: String,    pub content: String,    pub reply: bool,    pub retweet: bool,}impl Summary for Tweet {    fn summarize(&amp;self) -&gt; String {        format!("{}: {}", self.username, self.content)    }}</code></pre><p>ç¤ºä¾‹ 10-13ï¼šåœ¨ NewsArticle å’Œ Tweet ç±»å‹ä¸Šå®ç° Summary trait</p><p>åœ¨ç±»å‹ä¸Šå®ç° trait ç±»ä¼¼äºå®ç°ä¸ trait æ— å…³çš„æ–¹æ³•ã€‚åŒºåˆ«åœ¨äº impl å…³é”®å­—ä¹‹åï¼Œæˆ‘ä»¬æä¾›éœ€è¦å®ç° trait çš„åç§°ï¼Œæ¥ç€æ˜¯ for å’Œéœ€è¦å®ç° trait çš„ç±»å‹çš„åç§°ã€‚åœ¨ impl å—ä¸­ï¼Œä½¿ç”¨ trait å®šä¹‰ä¸­çš„æ–¹æ³•ç­¾åï¼Œä¸è¿‡ä¸å†åè·Ÿåˆ†å·ï¼Œè€Œæ˜¯éœ€è¦åœ¨å¤§æ‹¬å·ä¸­ç¼–å†™å‡½æ•°ä½“æ¥ä¸ºç‰¹å®šç±»å‹å®ç° trait æ–¹æ³•æ‰€æ‹¥æœ‰çš„è¡Œä¸ºã€‚</p><p>ä¸€æ—¦å®ç°äº† traitï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸ NewsArticle å’Œ Tweet å®ä¾‹çš„é trait æ–¹æ³•ä¸€æ ·çš„æ–¹å¼è°ƒç”¨ trait æ–¹æ³•äº†ï¼š</p><pre><code>let tweet = Tweet {    username: String::from("horse_ebooks"),    content: String::from("of course, as you probably already know, people"),    reply: false,    retweet: false,};println!("1 new tweet: {}", tweet.summarize());</code></pre><p>è¿™ä¼šæ‰“å°å‡º 1 new tweet: horse_ebooks: of course, as you probably already know, peopleã€‚</p><p>æ³¨æ„å› ä¸ºç¤ºä¾‹ 10-13 ä¸­æˆ‘ä»¬åœ¨ç›¸åŒçš„ lib.rs é‡Œå®šä¹‰äº† Summary trait å’Œ NewsArticle ä¸ Tweet ç±»å‹ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯ä½äºåŒä¸€ä½œç”¨åŸŸçš„ã€‚å¦‚æœè¿™ä¸ª lib.rs æ˜¯å¯¹åº” aggregator crate çš„ï¼Œè€Œåˆ«äººæƒ³è¦åˆ©ç”¨æˆ‘ä»¬ crate çš„åŠŸèƒ½ä¸ºå…¶è‡ªå·±çš„åº“ä½œç”¨åŸŸä¸­çš„ç»“æ„ä½“å®ç° Summary traitã€‚é¦–å…ˆä»–ä»¬éœ€è¦å°† trait å¼•å…¥ä½œç”¨åŸŸã€‚è¿™å¯ä»¥é€šè¿‡æŒ‡å®š use aggregator::Summary; å®ç°ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ºå…¶ç±»å‹å®ç° Summary trait äº†ã€‚Summary è¿˜å¿…é¡»æ˜¯å…¬æœ‰ trait ä½¿å¾—å…¶ä»– crate å¯ä»¥å®ç°å®ƒï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ä¾‹ 10-12 ä¸­å°† pub ç½®äº trait ä¹‹å‰ã€‚</p><p>å®ç° trait æ—¶éœ€è¦æ³¨æ„çš„ä¸€ä¸ªé™åˆ¶æ˜¯ï¼Œåªæœ‰å½“ trait æˆ–è€…è¦å®ç° trait çš„ç±»å‹ä½äº crate çš„æœ¬åœ°ä½œç”¨åŸŸæ—¶ï¼Œæ‰èƒ½ä¸ºè¯¥ç±»å‹å®ç° traitã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä¸º aggregator crate çš„è‡ªå®šä¹‰ç±»å‹ Tweet å®ç°å¦‚æ ‡å‡†åº“ä¸­çš„ Display traitï¼Œè¿™æ˜¯å› ä¸º Tweet ç±»å‹ä½äº aggregator crate æœ¬åœ°çš„ä½œç”¨åŸŸä¸­ã€‚ç±»ä¼¼åœ°ï¼Œä¹Ÿå¯ä»¥åœ¨ aggregator crate ä¸­ä¸º Vec&lt;T> å®ç° Summaryï¼Œè¿™æ˜¯å› ä¸º Summary trait ä½äº aggregator crate æœ¬åœ°ä½œç”¨åŸŸä¸­ã€‚</p><p>ä½†æ˜¯ä¸èƒ½ä¸ºå¤–éƒ¨ç±»å‹å®ç°å¤–éƒ¨ traitã€‚ä¾‹å¦‚ï¼Œä¸èƒ½åœ¨ aggregator crate ä¸­ä¸º Vec&lt;T> å®ç° Display traitã€‚è¿™æ˜¯å› ä¸º Display å’Œ Vec&lt;T> éƒ½å®šä¹‰äºæ ‡å‡†åº“ä¸­ï¼Œå®ƒä»¬å¹¶ä¸ä½äº aggregator crate æœ¬åœ°ä½œç”¨åŸŸä¸­ã€‚è¿™ä¸ªé™åˆ¶æ˜¯è¢«ç§°ä¸º <strong>ç›¸å¹²æ€§</strong>ï¼ˆcoherenceï¼‰ çš„ç¨‹åºå±æ€§çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…æ›´å…·ä½“çš„è¯´æ˜¯ <strong>å­¤å„¿è§„åˆ™</strong>ï¼ˆorphan ruleï¼‰ï¼Œå…¶å¾—åäºä¸å­˜åœ¨çˆ¶ç±»å‹ã€‚è¿™æ¡è§„åˆ™ç¡®ä¿äº†å…¶ä»–äººç¼–å†™çš„ä»£ç ä¸ä¼šç ´åä½ ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚æ²¡æœ‰è¿™æ¡è§„åˆ™çš„è¯ï¼Œä¸¤ä¸ª crate å¯ä»¥åˆ†åˆ«å¯¹ç›¸åŒç±»å‹å®ç°ç›¸åŒçš„ traitï¼Œè€Œ Rust å°†æ— ä»å¾—çŸ¥åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªå®ç°ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/88a70b06-cbeb-448f-bc37-938eb35dc4cd><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>é»˜è®¤å®ç°</h3><p>æœ‰æ—¶ä¸º trait ä¸­çš„æŸäº›æˆ–å…¨éƒ¨æ–¹æ³•æä¾›é»˜è®¤çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªç±»å‹çš„æ¯ä¸ªå®ç°ä¸­éƒ½å®šä¹‰è‡ªå·±çš„è¡Œä¸ºæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™æ ·å½“ä¸ºæŸä¸ªç‰¹å®šç±»å‹å®ç° trait æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™æˆ–é‡è½½æ¯ä¸ªæ–¹æ³•çš„é»˜è®¤è¡Œä¸ºã€‚</p><p>ç¤ºä¾‹ 10-14 ä¸­å±•ç¤ºäº†å¦‚ä½•ä¸º Summary trait çš„ summarize æ–¹æ³•æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„å­—ç¬¦ä¸²å€¼ï¼Œè€Œä¸æ˜¯åƒç¤ºä¾‹ 10-12 ä¸­é‚£æ ·åªæ˜¯å®šä¹‰æ–¹æ³•ç­¾åï¼š</p><p>æ–‡ä»¶å: src/lib.rs</p><pre><code>pub trait Summary {    fn summarize(&amp;self) -&gt; String {        String::from("(Read more...)")    }}</code></pre><p>ç¤ºä¾‹ 10-14ï¼šSummary trait çš„å®šä¹‰ï¼Œå¸¦æœ‰ä¸€ä¸ª summarize æ–¹æ³•çš„é»˜è®¤å®ç°</p><p>å¦‚æœæƒ³è¦å¯¹ NewsArticle å®ä¾‹ä½¿ç”¨è¿™ä¸ªé»˜è®¤å®ç°ï¼Œè€Œä¸æ˜¯å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„å®ç°ï¼Œåˆ™å¯ä»¥é€šè¿‡ impl Summary for NewsArticle {} æŒ‡å®šä¸€ä¸ªç©ºçš„ impl å—ã€‚</p><p>è™½ç„¶æˆ‘ä»¬ä¸å†ç›´æ¥ä¸º NewsArticle å®šä¹‰ summarize æ–¹æ³•äº†ï¼Œä½†æ˜¯æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç°å¹¶ä¸”æŒ‡å®š NewsArticle å®ç° Summary traitã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥å¯¹ NewsArticle å®ä¾‹è°ƒç”¨ summarize æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>let article = NewsArticle {    headline: String::from("Penguins win the Stanley Cup Championship!"),    location: String::from("Pittsburgh, PA, USA"),    author: String::from("Iceburgh"),    content: String::from("The Pittsburgh Penguins once again are the best    hockey team in the NHL."),};println!("New article available! {}", article.summarize());</code></pre><p>è¿™æ®µä»£ç ä¼šæ‰“å° New article available! (Read more...)ã€‚</p><p>ä¸º summarize åˆ›å»ºé»˜è®¤å®ç°å¹¶ä¸è¦æ±‚å¯¹ç¤ºä¾‹ 10-13 ä¸­ Tweet ä¸Šçš„ Summary å®ç°åšä»»ä½•æ”¹å˜ã€‚å…¶åŸå› æ˜¯é‡è½½ä¸€ä¸ªé»˜è®¤å®ç°çš„è¯­æ³•ä¸å®ç°æ²¡æœ‰é»˜è®¤å®ç°çš„ trait æ–¹æ³•çš„è¯­æ³•ä¸€æ ·ã€‚</p><p>é»˜è®¤å®ç°å…è®¸è°ƒç”¨ç›¸åŒ trait ä¸­çš„å…¶ä»–æ–¹æ³•ï¼Œå“ªæ€•è¿™äº›æ–¹æ³•æ²¡æœ‰é»˜è®¤å®ç°ã€‚å¦‚æ­¤ï¼Œtrait å¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½è€Œåªéœ€è¦å®ç°æŒ‡å®šä¸€å°éƒ¨åˆ†å†…å®¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ Summary traitï¼Œä½¿å…¶å…·æœ‰ä¸€ä¸ªéœ€è¦å®ç°çš„ summarize_author æ–¹æ³•ï¼Œç„¶åå®šä¹‰ä¸€ä¸ª summarize æ–¹æ³•ï¼Œæ­¤æ–¹æ³•çš„é»˜è®¤å®ç°è°ƒç”¨ summarize_author æ–¹æ³•ï¼š</p><pre><code>pub trait Summary {    fn summarize_author(&amp;self) -&gt; String;    fn summarize(&amp;self) -&gt; String {        format!("(Read more from {}...)", self.summarize_author())    }}</code></pre><p>ä¸ºäº†ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬çš„ Summaryï¼Œåªéœ€åœ¨å®ç° trait æ—¶å®šä¹‰ summarize_author å³å¯ï¼š</p><pre><code>impl Summary for Tweet {    fn summarize_author(&amp;self) -&gt; String {        format!("@{}", self.username)    }}</code></pre><p>ä¸€æ—¦å®šä¹‰äº† summarize_authorï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ Tweet ç»“æ„ä½“çš„å®ä¾‹è°ƒç”¨ summarize äº†ï¼Œè€Œ summary çš„é»˜è®¤å®ç°ä¼šè°ƒç”¨æˆ‘ä»¬æä¾›çš„ summarize_author å®šä¹‰ã€‚å› ä¸ºå®ç°äº† summarize_authorï¼ŒSummary trait å°±æä¾›äº† summarize æ–¹æ³•çš„åŠŸèƒ½ï¼Œä¸”æ— éœ€ç¼–å†™æ›´å¤šçš„ä»£ç ã€‚</p><pre><code>let tweet = Tweet {    username: String::from("horse_ebooks"),    content: String::from("of course, as you probably already know, people"),    reply: false,    retweet: false,};println!("1 new tweet: {}", tweet.summarize());</code></pre><p>è¿™ä¼šæ‰“å°å‡º 1 new tweet: (Read more from @horse_ebooks...)ã€‚</p><p>æ³¨æ„æ— æ³•ä»ç›¸åŒæ–¹æ³•çš„é‡è½½å®ç°ä¸­è°ƒç”¨é»˜è®¤æ–¹æ³•ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/7e6c89cb-3f41-4950-80ea-5ec53eebe180><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>trait ä½œä¸ºå‚æ•°</h3><p>çŸ¥é“äº†å¦‚ä½•å®šä¹‰ trait å’Œåœ¨ç±»å‹ä¸Šå®ç°è¿™äº› trait ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ¢ç´¢ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ trait æ¥æ¥å—å¤šç§ä¸åŒç±»å‹çš„å‚æ•°ã€‚</p><p>ä¾‹å¦‚åœ¨ç¤ºä¾‹ 10-13 ä¸­ä¸º NewsArticle å’Œ Tweet ç±»å‹å®ç°äº† Summary traitã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•° notify æ¥è°ƒç”¨å…¶å‚æ•° item ä¸Šçš„ summarize æ–¹æ³•ï¼Œè¯¥å‚æ•°æ˜¯å®ç°äº† Summary trait çš„æŸç§ç±»å‹ã€‚ä¸ºæ­¤å¯ä»¥ä½¿ç”¨ impl Trait è¯­æ³•ï¼Œåƒè¿™æ ·ï¼š</p><pre><code>pub fn notify(item: impl Summary) {    println!("Breaking news! {}", item.summarize());}</code></pre><p>å¯¹äº item å‚æ•°ï¼Œæˆ‘ä»¬æŒ‡å®šäº† impl å…³é”®å­—å’Œ trait åç§°ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ç±»å‹ã€‚è¯¥å‚æ•°æ”¯æŒä»»ä½•å®ç°äº†æŒ‡å®š trait çš„ç±»å‹ã€‚åœ¨ notify å‡½æ•°ä½“ä¸­ï¼Œå¯ä»¥è°ƒç”¨ä»»ä½•æ¥è‡ª Summary trait çš„æ–¹æ³•ï¼Œæ¯”å¦‚ summarizeã€‚æˆ‘ä»¬å¯ä»¥ä¼ é€’ä»»ä½• NewsArticle æˆ– Tweet çš„å®ä¾‹æ¥è°ƒç”¨ notifyã€‚ä»»ä½•ç”¨å…¶å®ƒå¦‚ String æˆ– i32 çš„ç±»å‹è°ƒç”¨è¯¥å‡½æ•°çš„ä»£ç éƒ½ä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å®ç° Summaryã€‚</p><h4 class=pgc-h-arrow-right>Trait Bound è¯­æ³•</h4><p>impl Trait è¯­æ³•é€‚ç”¨äºç›´è§‚çš„ä¾‹å­ï¼Œå®ƒä¸è¿‡æ˜¯ä¸€ä¸ªè¾ƒé•¿å½¢å¼çš„è¯­æ³•ç³–ã€‚è¿™è¢«ç§°ä¸º trait boundï¼Œè¿™çœ‹èµ·æ¥åƒï¼š</p><pre><code>pub fn notify&lt;T: Summary&gt;(item: T) {    println!("Breaking news! {}", item.summarize());}</code></pre><p>è¿™ä¸ä¹‹å‰çš„ä¾‹å­ç›¸åŒï¼Œä¸è¿‡ç¨å¾®å†—é•¿äº†ä¸€äº›ã€‚trait bound ä¸æ³›å‹å‚æ•°å£°æ˜åœ¨ä¸€èµ·ï¼Œä½äºå°–æ‹¬å·ä¸­çš„å†’å·åé¢ã€‚</p><p>impl Trait å¾ˆæ–¹ä¾¿ï¼Œé€‚ç”¨äºçŸ­å°çš„ä¾‹å­ã€‚trait bound åˆ™é€‚ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è·å–ä¸¤ä¸ªå®ç°äº† Summary çš„å‚æ•°ã€‚ä½¿ç”¨ impl Trait çš„è¯­æ³•çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><pre><code>pub fn notify(item1: impl Summary, item2: impl Summary) {</code></pre><p>è¿™é€‚ç”¨äº item1 å’Œ item2 å…è®¸æ˜¯ä¸åŒç±»å‹çš„æƒ…å†µï¼ˆåªè¦å®ƒä»¬éƒ½å®ç°äº† Summaryï¼‰ã€‚ä¸è¿‡å¦‚æœä½ å¸Œæœ›å¼ºåˆ¶å®ƒä»¬éƒ½æ˜¯ç›¸åŒç±»å‹å‘¢ï¼Ÿè¿™åªæœ‰åœ¨ä½¿ç”¨ trait bound æ—¶æ‰æœ‰å¯èƒ½ï¼š</p><pre><code>pub fn notify&lt;T: Summary&gt;(item1: T, item2: T) {</code></pre><p>æ³›å‹ T è¢«æŒ‡å®šä¸º item1 å’Œ item2 çš„å‚æ•°é™åˆ¶ï¼Œå¦‚æ­¤ä¼ é€’ç»™å‚æ•° item1 å’Œ item2 å€¼çš„å…·ä½“ç±»å‹å¿…é¡»ä¸€è‡´ã€‚</p><h4 class=pgc-h-arrow-right>é€šè¿‡ + æŒ‡å®šå¤šä¸ª trait bound</h4><p>å¦‚æœ notify éœ€è¦æ˜¾ç¤º item çš„æ ¼å¼åŒ–å½¢å¼ï¼ŒåŒæ—¶ä¹Ÿè¦ä½¿ç”¨ summarize æ–¹æ³•ï¼Œé‚£ä¹ˆ item å°±éœ€è¦åŒæ—¶å®ç°ä¸¤ä¸ªä¸åŒçš„ traitï¼šDisplay å’Œ Summaryã€‚è¿™å¯ä»¥é€šè¿‡ + è¯­æ³•å®ç°ï¼š</p><pre><code>pub fn notify(item: impl Summary + Display) {</code></pre><p>+ è¯­æ³•ä¹Ÿé€‚ç”¨äºæ³›å‹çš„ trait boundï¼š</p><pre><code>pub fn notify&lt;T: Summary + Display&gt;(item: T) {</code></pre><p>é€šè¿‡æŒ‡å®šè¿™ä¸¤ä¸ª trait boundï¼Œnotify çš„å‡½æ•°ä½“å¯ä»¥è°ƒç”¨ summarize å¹¶ä½¿ç”¨ {} æ¥æ ¼å¼åŒ– itemã€‚</p><h4 class=pgc-h-arrow-right>é€šè¿‡ where ç®€åŒ– trait bound</h4><p>ç„¶è€Œï¼Œä½¿ç”¨è¿‡å¤šçš„ trait bound ä¹Ÿæœ‰ç¼ºç‚¹ã€‚æ¯ä¸ªæ³›å‹æœ‰å…¶è‡ªå·±çš„ trait boundï¼Œæ‰€ä»¥æœ‰å¤šä¸ªæ³›å‹å‚æ•°çš„å‡½æ•°åœ¨åç§°å’Œå‚æ•°åˆ—è¡¨ä¹‹é—´ä¼šæœ‰å¾ˆé•¿çš„ trait bound ä¿¡æ¯ï¼Œè¿™ä½¿å¾—å‡½æ•°ç­¾åéš¾ä»¥é˜…è¯»ã€‚ä¸ºæ­¤ï¼ŒRust æœ‰å¦ä¸€ä¸ªåœ¨å‡½æ•°ç­¾åä¹‹åçš„ where ä»å¥ä¸­æŒ‡å®š trait bound çš„è¯­æ³•ã€‚æ‰€ä»¥é™¤äº†è¿™ä¹ˆå†™ï¼š</p><pre><code>fn some_function&lt;T: Display + Clone, U: Clone + Debug&gt;(t: T, u: U) -&gt; i32 {</code></pre><p>è¿˜å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ where ä»å¥ï¼š</p><pre><code>fn some_function&lt;T, U&gt;(t: T, u: U) -&gt; i32    where T: Display + Clone,          U: Clone + Debug{</code></pre><p>è¿™ä¸ªå‡½æ•°ç­¾åå°±æ˜¾å¾—ä¸é‚£ä¹ˆæ‚ä¹±ï¼Œå‡½æ•°åã€å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹éƒ½ç¦»å¾—å¾ˆè¿‘ï¼Œçœ‹èµ·æ¥ç±»ä¼¼æ²¡æœ‰å¾ˆå¤š trait bounds çš„å‡½æ•°ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/84de6805-7d2d-4b29-a959-32132eeaaa8d><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>è¿”å›å®ç°äº† trait çš„ç±»å‹</h3><p>ä¹Ÿå¯ä»¥åœ¨è¿”å›å€¼ä¸­ä½¿ç”¨ impl Trait è¯­æ³•ï¼Œæ¥è¿”å›å®ç°äº†æŸä¸ª trait çš„ç±»å‹ï¼š</p><pre><code>fn returns_summarizable() -&gt; impl Summary {    Tweet {        username: String::from("horse_ebooks"),        content: String::from("of course, as you probably already know, people"),        reply: false,        retweet: false,    }}</code></pre><p>é€šè¿‡ä½¿ç”¨ impl Summary ä½œä¸ºè¿”å›å€¼ç±»å‹ï¼Œæˆ‘ä»¬æŒ‡å®šäº† returns_summarizable å‡½æ•°è¿”å›æŸä¸ªå®ç°äº† Summary trait çš„ç±»å‹ï¼Œä½†æ˜¯ä¸ç¡®å®šå…¶å…·ä½“çš„ç±»å‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ returns_summarizable è¿”å›äº†ä¸€ä¸ª Tweetï¼Œä¸è¿‡è°ƒç”¨æ–¹å¹¶ä¸çŸ¥æƒ…ã€‚</p><p>è¿”å›ä¸€ä¸ªåªæ˜¯æŒ‡å®šäº†éœ€è¦å®ç°çš„ trait çš„ç±»å‹çš„èƒ½åŠ›åœ¨é—­åŒ…å’Œè¿­ä»£å™¨åœºæ™¯ååˆ†çš„æœ‰ç”¨ï¼Œç¬¬åä¸‰ç« ä¼šä»‹ç»å®ƒä»¬ã€‚é—­åŒ…å’Œè¿­ä»£å™¨åˆ›å»ºåªæœ‰ç¼–è¯‘å™¨çŸ¥é“çš„ç±»å‹ï¼Œæˆ–è€…æ˜¯éå¸¸éå¸¸é•¿çš„ç±»å‹ã€‚impl Trait å…è®¸ä½ ç®€å•çš„æŒ‡å®šå‡½æ•°è¿”å›ä¸€ä¸ª Iterator è€Œæ— éœ€å†™å‡ºå®é™…çš„å†—é•¿çš„ç±»å‹ã€‚</p><p>ä¸è¿‡è¿™åªé€‚ç”¨äºè¿”å›å•ä¸€ç±»å‹çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç çš„è¿”å›å€¼ç±»å‹æŒ‡å®šä¸ºè¿”å› impl Summaryï¼Œä½†æ˜¯è¿”å›äº† NewsArticle æˆ– Tweet å°±è¡Œä¸é€šï¼š</p><pre><code>fn returns_summarizable(switch: bool) -&gt; impl Summary {    if switch {        NewsArticle {            headline: String::from("Penguins win the Stanley Cup Championship!"),            location: String::from("Pittsburgh, PA, USA"),            author: String::from("Iceburgh"),            content: String::from("The Pittsburgh Penguins once again are the best            hockey team in the NHL."),        }    } else {        Tweet {            username: String::from("horse_ebooks"),            content: String::from("of course, as you probably already know, people"),            reply: false,            retweet: false,        }    }}</code></pre><p>è¿™é‡Œå°è¯•è¿”å› NewsArticle æˆ– Tweetã€‚è¿™ä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸º impl Trait å·¥ä½œæ–¹å¼çš„é™åˆ¶ã€‚ç¬¬åä¸ƒç« çš„ â€œä¸ºä½¿ç”¨ä¸åŒç±»å‹çš„å€¼è€Œè®¾è®¡çš„ trait å¯¹è±¡â€ éƒ¨åˆ†ä¼šä»‹ç»å¦‚ä½•ç¼–å†™è¿™æ ·ä¸€ä¸ªå‡½æ•°ã€‚</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/d6f61fd7-1821-4242-bd14-66c7bedb2d18><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>ä½¿ç”¨ trait bounds æ¥ä¿®å¤ largest å‡½æ•°</h3><p>ç°åœ¨ä½ çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨æ³›å‹å‚æ•° trait bound æ¥æŒ‡å®šæ‰€éœ€çš„è¡Œä¸ºã€‚è®©æˆ‘ä»¬å›åˆ°å®ä¾‹ 10-5 ä¿®å¤ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°çš„ largest å‡½æ•°å®šä¹‰ï¼å›é¡¾ä¸€ä¸‹ï¼Œæœ€åå°è¯•ç¼–è¯‘ä»£ç æ—¶å‡ºç°çš„é”™è¯¯æ˜¯ï¼š</p><pre><code>error[E0369]: binary operation `&gt;` cannot be applied to type `T` --&gt; src/main.rs:5:12  |5 |         if item &gt; largest {  |            ^^^^^^^^^^^^^^  |  = note: an implementation of `std::cmp::PartialOrd` might be missing for `T`</code></pre><p>åœ¨ largest å‡½æ•°ä½“ä¸­æˆ‘ä»¬æƒ³è¦ä½¿ç”¨å¤§äºè¿ç®—ç¬¦ï¼ˆ>ï¼‰æ¯”è¾ƒä¸¤ä¸ª T ç±»å‹çš„å€¼ã€‚è¿™ä¸ªè¿ç®—ç¬¦è¢«å®šä¹‰ä¸ºæ ‡å‡†åº“ä¸­ trait std::cmp::PartialOrd çš„ä¸€ä¸ªé»˜è®¤æ–¹æ³•ã€‚æ‰€ä»¥éœ€è¦åœ¨ T çš„ trait bound ä¸­æŒ‡å®š PartialOrdï¼Œè¿™æ · largest å‡½æ•°å¯ä»¥ç”¨äºä»»ä½•å¯ä»¥æ¯”è¾ƒå¤§å°çš„ç±»å‹çš„ sliceã€‚å› ä¸º PartialOrd ä½äº prelude ä¸­æ‰€ä»¥å¹¶ä¸éœ€è¦æ‰‹åŠ¨å°†å…¶å¼•å…¥ä½œç”¨åŸŸã€‚å°† largest çš„ç­¾åä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š</p><pre><code>fn largest&lt;T: PartialOrd&gt;(list: &amp;[T]) -&gt; T {</code></pre><p>ä½†æ˜¯å¦‚æœç¼–è¯‘ä»£ç çš„è¯ï¼Œä¼šå‡ºç°ä¸€äº›ä¸åŒçš„é”™è¯¯ï¼š</p><pre><code>error[E0508]: cannot move out of type `[T]`, a non-copy slice --&gt; src/main.rs:2:23  |2 |     let mut largest = list[0];  |                       ^^^^^^^  |                       |  |                       cannot move out of here  |                       help: consider using a reference instead: `&amp;list[0]`error[E0507]: cannot move out of borrowed content --&gt; src/main.rs:4:9  |4 |     for &amp;item in list.iter() {  |         ^----  |         ||  |         |hint: to prevent move, use `ref item` or `ref mut item`  |         cannot move out of borrowed content</code></pre><p>é”™è¯¯çš„æ ¸å¿ƒæ˜¯ cannot move out of type [T], a non-copy sliceï¼Œå¯¹äºéæ³›å‹ç‰ˆæœ¬çš„ largest å‡½æ•°ï¼Œæˆ‘ä»¬åªå°è¯•äº†å¯»æ‰¾æœ€å¤§çš„ i32 å’Œ charã€‚æ­£å¦‚ç¬¬å››ç«  â€œåªåœ¨æ ˆä¸Šçš„æ•°æ®ï¼šæ‹·è´â€ éƒ¨åˆ†è®¨è®ºè¿‡çš„ï¼Œåƒ i32 å’Œ char è¿™æ ·çš„ç±»å‹æ˜¯å·²çŸ¥å¤§å°çš„å¹¶å¯ä»¥å‚¨å­˜åœ¨æ ˆä¸Šï¼Œæ‰€ä»¥ä»–ä»¬å®ç°äº† Copy traitã€‚å½“æˆ‘ä»¬å°† largest å‡½æ•°æ”¹æˆä½¿ç”¨æ³›å‹åï¼Œç°åœ¨ list å‚æ•°çš„ç±»å‹å°±æœ‰å¯èƒ½æ˜¯æ²¡æœ‰å®ç° Copy trait çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯èƒ½ä¸èƒ½å°† list[0] çš„å€¼ç§»åŠ¨åˆ° largest å˜é‡ä¸­ï¼Œè¿™å¯¼è‡´äº†ä¸Šé¢çš„é”™è¯¯ã€‚</p><p>ä¸ºäº†åªå¯¹å®ç°äº† Copy çš„ç±»å‹è°ƒç”¨è¿™äº›ä»£ç ï¼Œå¯ä»¥åœ¨ T çš„ trait bounds ä¸­å¢åŠ  Copyï¼ç¤ºä¾‹ 10-15 ä¸­å±•ç¤ºäº†ä¸€ä¸ªå¯ä»¥ç¼–è¯‘çš„æ³›å‹ç‰ˆæœ¬çš„ largest å‡½æ•°çš„å®Œæ•´ä»£ç ï¼Œåªè¦ä¼ é€’ç»™ largest çš„ slice å€¼çš„ç±»å‹å®ç°äº† PartialOrd <strong>å’Œ</strong> Copy è¿™ä¸¤ä¸ª traitï¼Œä¾‹å¦‚ i32 å’Œ charï¼š</p><p>æ–‡ä»¶å: src/main.rs</p><pre><code>fn largest&lt;T: PartialOrd + Copy&gt;(list: &amp;[T]) -&gt; T {    let mut largest = list[0];    for &amp;item in list.iter() {        if item &gt; largest {            largest = item;        }    }    largest}fn main() {    let number_list = vec![34, 50, 25, 100, 65];    let result = largest(&amp;number_list);    println!("The largest number is {}", result);    let char_list = vec!['y', 'm', 'a', 'q'];    let result = largest(&amp;char_list);    println!("The largest char is {}", result);}</code></pre><p>ç¤ºä¾‹ 10-15ï¼šä¸€ä¸ªå¯ä»¥ç”¨äºä»»ä½•å®ç°äº† PartialOrd å’Œ Copy trait çš„æ³›å‹çš„ largest å‡½æ•°</p><p>å¦‚æœå¹¶ä¸å¸Œæœ›é™åˆ¶ largest å‡½æ•°åªèƒ½ç”¨äºå®ç°äº† Copy trait çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ T çš„ trait bounds ä¸­æŒ‡å®š Clone è€Œä¸æ˜¯ Copyã€‚å¹¶å…‹éš† slice çš„æ¯ä¸€ä¸ªå€¼ä½¿å¾— largest å‡½æ•°æ‹¥æœ‰å…¶æ‰€æœ‰æƒã€‚ä½¿ç”¨ clone å‡½æ•°æ„å‘³ç€å¯¹äºç±»ä¼¼ String è¿™æ ·æ‹¥æœ‰å †ä¸Šæ•°æ®çš„ç±»å‹ï¼Œä¼šæ½œåœ¨çš„åˆ†é…æ›´å¤šå †ä¸Šç©ºé—´ï¼Œè€Œå †åˆ†é…åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶å¯èƒ½ä¼šç›¸å½“ç¼“æ…¢ã€‚</p><p>å¦ä¸€ç§ largest çš„å®ç°æ–¹å¼æ˜¯è¿”å›åœ¨ slice ä¸­ T å€¼çš„å¼•ç”¨ã€‚å¦‚æœæˆ‘ä»¬å°†å‡½æ•°è¿”å›å€¼ä» T æ”¹ä¸º &T å¹¶æ”¹å˜å‡½æ•°ä½“ä½¿å…¶èƒ½å¤Ÿè¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œæˆ‘ä»¬å°†ä¸éœ€è¦ä»»ä½• Clone æˆ– Copy çš„ trait bounds è€Œä¸”ä¹Ÿä¸ä¼šæœ‰ä»»ä½•çš„å †åˆ†é…ã€‚å°è¯•è‡ªå·±å®ç°è¿™ç§æ›¿ä»£è§£å†³æ–¹å¼å§ï¼</p><p><br></p><div class=pgc-img><img alt="Rustè¯­è¨€å…¥é—¨æ•™ç¨‹ ä½¿ç”¨æ³›å‹å®šä¹‰å…±äº«çš„è¡Œä¸º" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/0d841429-62b4-48c8-b939-e79c003a2507><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>ä½¿ç”¨ trait bound æœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•</h3><p>é€šè¿‡ä½¿ç”¨å¸¦æœ‰ trait bound çš„æ³›å‹å‚æ•°çš„ impl å—ï¼Œå¯ä»¥æœ‰æ¡ä»¶åœ°åªä¸ºé‚£äº›å®ç°äº†ç‰¹å®š trait çš„ç±»å‹å®ç°æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œç¤ºä¾‹ 10-16 ä¸­çš„ç±»å‹ Pair&lt;T> æ€»æ˜¯å®ç°äº† new æ–¹æ³•ï¼Œä¸è¿‡åªæœ‰é‚£äº›ä¸º T ç±»å‹å®ç°äº† PartialOrd trait ï¼ˆæ¥å…è®¸æ¯”è¾ƒï¼‰ <strong>å’Œ</strong> Display trait ï¼ˆæ¥å¯ç”¨æ‰“å°ï¼‰çš„ Pair&lt;T> æ‰ä¼šå®ç° cmp_display æ–¹æ³•ï¼š</p><pre><code>use std::fmt::Display;struct Pair&lt;T&gt; {    x: T,    y: T,}impl&lt;T&gt; Pair&lt;T&gt; {    fn new(x: T, y: T) -&gt; Self {        Self {            x,            y,        }    }}impl&lt;T: Display + PartialOrd&gt; Pair&lt;T&gt; {    fn cmp_display(&amp;self) {        if self.x &gt;= self.y {            println!("The largest member is x = {}", self.x);        } else {            println!("The largest member is y = {}", self.y);        }    }}</code></pre><p>ç¤ºä¾‹ 10-16ï¼šæ ¹æ® trait bound åœ¨æ³›å‹ä¸Šæœ‰æ¡ä»¶çš„å®ç°æ–¹æ³•</p><p>ä¹Ÿå¯ä»¥å¯¹ä»»ä½•å®ç°äº†ç‰¹å®š trait çš„ç±»å‹æœ‰æ¡ä»¶åœ°å®ç° traitã€‚å¯¹ä»»ä½•æ»¡è¶³ç‰¹å®š trait bound çš„ç±»å‹å®ç° trait è¢«ç§°ä¸º blanket implementationsï¼Œä»–ä»¬è¢«å¹¿æ³›çš„ç”¨äº Rust æ ‡å‡†åº“ä¸­ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†åº“ä¸ºä»»ä½•å®ç°äº† Display trait çš„ç±»å‹å®ç°äº† ToString traitã€‚è¿™ä¸ª impl å—çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><pre><code>impl&lt;T: Display&gt; ToString for T {    // --snip--}</code></pre><p>å› ä¸ºæ ‡å‡†åº“æœ‰äº†è¿™äº› blanket implementationï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•å®ç°äº† Display trait çš„ç±»å‹è°ƒç”¨ç”± ToString å®šä¹‰çš„ to_string æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ•´å‹è½¬æ¢ä¸ºå¯¹åº”çš„ String å€¼ï¼Œå› ä¸ºæ•´å‹å®ç°äº† Displayï¼š</p><pre><code>let s = 3.to_string();</code></pre><p>blanket implementation ä¼šå‡ºç°åœ¨ trait æ–‡æ¡£çš„ â€œImplementersâ€ éƒ¨åˆ†ã€‚</p><p>trait å’Œ trait bound è®©æˆ‘ä»¬ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°æ¥å‡å°‘é‡å¤ï¼Œå¹¶ä»ç„¶èƒ½å¤Ÿå‘ç¼–è¯‘å™¨æ˜ç¡®æŒ‡å®šæ³›å‹ç±»å‹éœ€è¦æ‹¥æœ‰å“ªäº›è¡Œä¸ºã€‚å› ä¸ºæˆ‘ä»¬å‘ç¼–è¯‘å™¨æä¾›äº† trait bound ä¿¡æ¯ï¼Œå®ƒå°±å¯ä»¥æ£€æŸ¥ä»£ç ä¸­æ‰€ç”¨åˆ°çš„å…·ä½“ç±»å‹æ˜¯å¦æä¾›äº†æ­£ç¡®çš„è¡Œä¸ºã€‚åœ¨åŠ¨æ€ç±»å‹è¯­è¨€ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•è°ƒç”¨ä¸€ä¸ªç±»å‹å¹¶æ²¡æœ‰å®ç°çš„æ–¹æ³•ï¼Œä¼šåœ¨è¿è¡Œæ—¶å‡ºç°é”™è¯¯ã€‚Rust å°†è¿™äº›é”™è¯¯ç§»åŠ¨åˆ°äº†ç¼–è¯‘æ—¶ï¼Œç”šè‡³åœ¨ä»£ç èƒ½å¤Ÿè¿è¡Œä¹‹å‰å°±å¼ºè¿«æˆ‘ä»¬ä¿®å¤é”™è¯¯ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæ— éœ€ç¼–å†™è¿è¡Œæ—¶æ£€æŸ¥è¡Œä¸ºçš„ä»£ç ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶å°±å·²ç»æ£€æŸ¥è¿‡äº†ï¼Œè¿™æ ·ç›¸æ¯”å…¶ä»–é‚£äº›ä¸æ„¿æ”¾å¼ƒæ³›å‹çµæ´»æ€§çš„è¯­è¨€æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ç§æ³›å‹ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨å®ƒç”šè‡³éƒ½æ²¡æœ‰å¯Ÿè§‰å®ƒçš„å­˜åœ¨ï¼Œè¿™å°±æ˜¯ <strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼ˆlifetimesï¼‰ã€‚ä¸åŒäºå…¶ä»–æ³›å‹å¸®åŠ©æˆ‘ä»¬ç¡®ä¿ç±»å‹æ‹¥æœ‰æœŸæœ›çš„è¡Œä¸ºï¼Œç”Ÿå‘½å‘¨æœŸåˆ™æœ‰åŠ©äºç¡®ä¿å¼•ç”¨åœ¨æˆ‘ä»¬éœ€è¦ä»–ä»¬çš„æ—¶å€™ä¸€ç›´æœ‰æ•ˆã€‚è®©æˆ‘ä»¬å­¦ä¹ ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•åšåˆ°è¿™äº›çš„ã€‚</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Rust','è¯­è¨€å…¥é—¨','æ³›å‹'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>