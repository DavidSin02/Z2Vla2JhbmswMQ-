<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/c67cd5e4de3b459c8010e8be5a995e0d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/80dcc482.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/80dcc482.html><meta property="article:published_time" content="2020-11-14T21:05:53+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:53+08:00"><meta name=Keywords content><meta name=description content="æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/80dcc482.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>ã€€ã€€æJavaçš„ï¼Œå¯¹äºé›†åˆæ¡†æ¶åº”è¯¥å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå‰é¢å‡ ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†java.langåŒ…ä¸‹çš„å‡ ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»‹ç»java.utilåŒ…ä¸‹çš„å‡ ä¸ªé›†åˆç±»ï¼Œé¦–å…ˆä»‹ç»çš„æ˜¯ ArrayList ç±»ã€‚</p><h3 class=pgc-h-arrow-right>1ã€ArrayList å®šä¹‰</h3><p>ã€€ã€€ArrayList æ˜¯ä¸€ä¸ªç”¨æ•°ç»„å®ç°çš„é›†åˆï¼Œæ”¯æŒéšæœºè®¿é—®ï¼Œå…ƒç´ æœ‰åºä¸”å¯ä»¥é‡å¤ã€‚</p><pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</code></pre><div class=pgc-img><img alt=æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c67cd5e4de3b459c8010e8be5a995e0d><p class=pgc-img-caption></p></div><p>ã€€ã€€<strong>â‘ ã€å®ç° RandomAccess æ¥å£</strong></p><p>ã€€ã€€è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œä¸€èˆ¬æ­¤æ ‡è®°æ¥å£ç”¨äº List å®ç°ï¼Œä»¥è¡¨æ˜å®ƒä»¬æ”¯æŒå¿«é€Ÿï¼ˆé€šå¸¸æ˜¯æ’å®šæ—¶é—´ï¼‰çš„éšæœºè®¿é—®ã€‚è¯¥æ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸é€šç”¨ç®—æ³•æ”¹å˜å…¶è¡Œä¸ºï¼Œä»¥ä¾¿åœ¨åº”ç”¨äºéšæœºæˆ–é¡ºåºè®¿é—®åˆ—è¡¨æ—¶æä¾›è‰¯å¥½çš„æ€§èƒ½ã€‚</p><p>ã€€ã€€æ¯”å¦‚åœ¨å·¥å…·ç±» Collections(è¿™ä¸ªå·¥å…·ç±»åé¢ä¼šè¯¦ç»†è®²è§£)ä¸­ï¼Œåº”ç”¨äºŒåˆ†æŸ¥æ‰¾æ–¹æ³•æ—¶åˆ¤æ–­æ˜¯å¦å®ç°äº† RandomAccess æ¥å£ï¼š</p><pre><code>int binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) {        if (list instanceof RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD)            return Collections.indexedBinarySearch(list, key);        else            return Collections.iteratorBinarySearch(list, key);    }</code></pre><p>ã€€ã€€<strong>â‘¡ã€å®ç° Cloneable æ¥å£</strong></p><p>ã€€ã€€è¿™ä¸ªç±»æ˜¯ java.lang.Cloneableï¼Œå‰é¢æˆ‘ä»¬è®²è§£æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŸç†æ—¶ï¼Œæˆ‘ä»¬ä»‹ç»äº†æµ…æ‹·è´å¯ä»¥é€šè¿‡è°ƒç”¨ Object.clone() æ–¹æ³•æ¥å®ç°ï¼Œä½†æ˜¯è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡å¿…é¡»è¦å®ç° Cloneable æ¥å£ï¼Œå¦åˆ™ä¼šæŠ›å‡º CloneNoSupportExceptionå¼‚å¸¸ã€‚</p><p>ã€€ã€€Cloneable å’Œ RandomAccess æ¥å£ä¸€æ ·ä¹Ÿæ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæ¥å£å†…æ— ä»»ä½•æ–¹æ³•ä½“å’Œå¸¸é‡çš„å£°æ˜ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæƒ³å…‹éš†å¯¹è±¡ï¼Œå¿…é¡»è¦å®ç° Cloneable æ¥å£ï¼Œè¡¨æ˜è¯¥ç±»æ˜¯å¯ä»¥è¢«å…‹éš†çš„ã€‚</p><p>ã€€ã€€<strong>â‘¢ã€å®ç° Serializable æ¥å£</strong></p><p>ã€€ã€€è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¹Ÿæ˜¯æ ‡è®°æ¥å£ï¼Œè¡¨ç¤ºèƒ½è¢«åºåˆ—åŒ–ã€‚</p><p>ã€€ã€€<strong>â‘£ã€å®ç° List æ¥å£</strong></p><p>ã€€ã€€è¿™ä¸ªæ¥å£æ˜¯ List ç±»é›†åˆçš„ä¸Šå±‚æ¥å£ï¼Œå®šä¹‰äº†å®ç°è¯¥æ¥å£çš„ç±»éƒ½å¿…é¡»è¦å®ç°çš„ä¸€ç»„æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸‹é¢æˆ‘ä»¬ä¼šå¯¹è¿™ä¸€ç³»åˆ—æ–¹æ³•çš„å®ç°åšè¯¦ç»†ä»‹ç»ã€‚</p><div class=pgc-img><img alt=æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/06f286eef75941168017e042a61a2b14><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>2ã€å­—æ®µå±æ€§</h3><pre><code>//é›†åˆçš„é»˜è®¤å¤§å°        private static final int DEFAULT_CAPACITY = 10;        //ç©ºçš„æ•°ç»„å®ä¾‹        private static final Object[] EMPTY_ELEMENTDATA = {};        //è¿™ä¹Ÿæ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„å®ä¾‹ï¼Œå’ŒEMPTY_ELEMENTDATAç©ºæ•°ç»„ç›¸æ¯”æ˜¯ç”¨äºäº†è§£æ·»åŠ å…ƒç´ æ—¶æ•°ç»„è†¨èƒ€å¤šå°‘        private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};        //å­˜å‚¨ ArrayListé›†åˆçš„å…ƒç´ ï¼Œé›†åˆçš„é•¿åº¦å³è¿™ä¸ªæ•°ç»„çš„é•¿åº¦        //1ã€å½“ elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA æ—¶å°†ä¼šæ¸…ç©º ArrayList        //2ã€å½“æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒelementData é•¿åº¦ä¼šæ‰©å±•ä¸º DEFAULT_CAPACITY=10        transient Object[] elementData;        //è¡¨ç¤ºé›†åˆçš„é•¿åº¦        private int size;</code></pre><h3 class=pgc-h-arrow-right>3ã€æ„é€ å‡½æ•°</h3><pre><code>     public ArrayList() {         this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;     }</code></pre><p>ã€€ã€€æ­¤æ— å‚æ„é€ å‡½æ•°å°†åˆ›å»ºä¸€ä¸ª DEFAULTCAPACITYEMPTYELEMENTDATA å£°æ˜çš„æ•°ç»„ï¼Œæ³¨æ„æ­¤æ—¶åˆå§‹å®¹é‡æ˜¯0ï¼Œè€Œä¸æ˜¯å¤§å®¶ä»¥ä¸ºçš„ 10ã€‚</p><p>ã€€ã€€<strong>æ³¨æ„</strong>ï¼šæ ¹æ®é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºçš„é›†åˆï¼ŒArrayList list = new ArrayList();æ­¤æ—¶é›†åˆé•¿åº¦æ˜¯0.</p><pre><code>public ArrayList(int initialCapacity) {        if (initialCapacity &gt; 0) {            this.elementData = new Object[initialCapacity];        } else if (initialCapacity == 0) {            this.elementData = EMPTY_ELEMENTDATA;        } else {            throw new IllegalArgumentException("Illegal Capacity: "+                                               initialCapacity);        }    }</code></pre><p>ã€€ã€€åˆå§‹åŒ–é›†åˆå¤§å°åˆ›å»º ArrayList é›†åˆã€‚å½“å¤§äº0æ—¶ï¼Œç»™å®šå¤šå°‘é‚£å°±åˆ›å»ºå¤šå¤§çš„æ•°ç»„ï¼›å½“ç­‰äº0æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼›å½“å°äº0æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p><pre><code>public ArrayList(Collection&lt;? extends E&gt; c) {        elementData = c.toArray();        if ((size = elementData.length) != 0) {            // c.toArray might (incorrectly) not return Object[] (see 6260652)            if (elementData.getClass() != Object[].class)                elementData = Arrays.copyOf(elementData, size, Object[].class);        } else {            // replace with empty array.            this.elementData = EMPTY_ELEMENTDATA;        }    }</code></pre><p>ã€€ã€€è¿™æ˜¯å°†å·²æœ‰çš„é›†åˆå¤åˆ¶åˆ° ArrayList é›†åˆä¸­å»ã€‚</p><h3 class=pgc-h-arrow-right>4ã€æ·»åŠ å…ƒç´ </h3><p>ã€€ã€€é€šè¿‡å‰é¢çš„å­—æ®µå±æ€§å’Œæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬çŸ¥é“ ArrayList é›†åˆæ˜¯ç”±æ•°ç»„æ„æˆçš„ï¼Œé‚£ä¹ˆå‘ ArrayList ä¸­æ·»åŠ å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å‘æ•°ç»„èµ‹å€¼ã€‚æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ•°ç»„çš„å£°æ˜æ˜¯èƒ½ç¡®å®šå¤§å°çš„ï¼Œè€Œä½¿ç”¨ ArrayList æ—¶ï¼Œå¥½åƒæ˜¯èƒ½æ·»åŠ ä»»æ„å¤šä¸ªå…ƒç´ ï¼Œè¿™å°±æ¶‰åŠåˆ°æ•°ç»„çš„æ‰©å®¹ã€‚</p><p>ã€€ã€€æ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•å°±æ˜¯è°ƒç”¨å‰é¢æˆ‘ä»¬è®²è¿‡çš„Arrays.copyOf æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œç„¶åå°†åŸæ•°ç»„å…ƒç´ æ‹·è´è¿‡å»å³å¯ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å…·ä½“å®ç°ï¼š</p><pre><code>    public boolean add(E e) {        ensureCapacityInternal(size + 1);  //æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®å®šé›†åˆçš„å¤§å°        elementData[size++] = e;        return true;    }</code></pre><p>ã€€ã€€å¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨é€šè¿‡è°ƒç”¨ add æ–¹æ³•æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œæˆ‘ä»¬è¦é¦–å…ˆè°ƒç”¨ ensureCapacityInternal æ–¹æ³•æ¥ç¡®å®šé›†åˆçš„å¤§å°ï¼Œå¦‚æœé›†åˆæ»¡äº†ï¼Œåˆ™è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</p><pre><code>private void ensureCapacityInternal(int minCapacity) {//è¿™é‡Œçš„minCapacity æ˜¯é›†åˆå½“å‰å¤§å°+1        //elementData æ˜¯å®é™…ç”¨æ¥å­˜å‚¨å…ƒç´ çš„æ•°ç»„ï¼Œæ³¨æ„æ•°ç»„çš„å¤§å°å’Œé›†åˆçš„å¤§å°ä¸æ˜¯ç›¸ç­‰çš„ï¼Œå‰é¢çš„sizeæ˜¯æŒ‡é›†åˆå¤§å°        ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));    }    private static int calculateCapacity(Object[] elementData, int minCapacity) {        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {//å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œåˆ™ä»size+1çš„å€¼å’Œé»˜è®¤å€¼10ä¸­å–æœ€å¤§çš„            return Math.max(DEFAULT_CAPACITY, minCapacity);        }        return minCapacity;//ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›size+1    }    private void ensureExplicitCapacity(int minCapacity) {        modCount++;        // overflow-conscious code        if (minCapacity - elementData.length &gt; 0)            grow(minCapacity);    }</code></pre><p>ã€€ã€€åœ¨ ensureExplicitCapacity æ–¹æ³•ä¸­ï¼Œé¦–å…ˆå¯¹ä¿®æ”¹æ¬¡æ•°modCountåŠ ä¸€ï¼Œè¿™é‡Œçš„modCountç»™ArrayListçš„è¿­ä»£å™¨ä½¿ç”¨çš„ï¼Œåœ¨å¹¶å‘æ“ä½œè¢«ä¿®æ”¹æ—¶ï¼Œæä¾›å¿«é€Ÿå¤±è´¥è¡Œä¸ºï¼ˆä¿è¯modCountåœ¨è¿­ä»£æœŸé—´ä¸å˜ï¼Œå¦åˆ™æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ï¼Œå¯ä»¥æŸ¥çœ‹æºç 865è¡Œï¼‰ï¼Œæ¥ç€åˆ¤æ–­minCapacityæ˜¯å¦å¤§äºå½“å‰ArrayListå†…éƒ¨æ•°ç»„é•¿åº¦ï¼Œå¤§äºçš„è¯è°ƒç”¨growæ–¹æ³•å¯¹å†…éƒ¨æ•°ç»„elementDataæ‰©å®¹ï¼Œgrowæ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>private void grow(int minCapacity) {        int oldCapacity = elementData.length;//å¾—åˆ°åŸå§‹æ•°ç»„çš„é•¿åº¦        int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);//æ–°æ•°ç»„çš„é•¿åº¦ç­‰äºåŸæ•°ç»„é•¿åº¦çš„1.5å€        if (newCapacity - minCapacity &lt; 0)//å½“æ–°æ•°ç»„é•¿åº¦ä»ç„¶æ¯”minCapacityå°ï¼Œåˆ™ä¸ºä¿è¯æœ€å°é•¿åº¦ï¼Œæ–°æ•°ç»„ç­‰äºminCapacity            newCapacity = minCapacity;        //MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8 = 2147483639        if (newCapacity - MAX_ARRAY_SIZE &gt; 0)//å½“å¾—åˆ°çš„æ–°æ•°ç»„é•¿åº¦æ¯” MAX_ARRAY_SIZE å¤§æ—¶ï¼Œè°ƒç”¨ hugeCapacity å¤„ç†å¤§æ•°ç»„            newCapacity = hugeCapacity(minCapacity);        //è°ƒç”¨ Arrays.copyOf å°†åŸæ•°ç»„æ‹·è´åˆ°ä¸€ä¸ªå¤§å°ä¸ºnewCapacityçš„æ–°æ•°ç»„ï¼ˆæ³¨æ„æ˜¯æ‹·è´å¼•ç”¨ï¼‰        elementData = Arrays.copyOf(elementData, newCapacity);    }    private static int hugeCapacity(int minCapacity) {        if (minCapacity &lt; 0) //             throw new OutOfMemoryError();        return (minCapacity &gt; MAX_ARRAY_SIZE) ? //minCapacity &gt; MAX_ARRAY_SIZE,åˆ™æ–°æ•°ç»„å¤§å°ä¸ºInteger.MAX_VALUE            Integer.MAX_VALUE :            MAX_ARRAY_SIZE;    }</code></pre><p>ã€€ã€€å¯¹äº ArrayList é›†åˆæ·»åŠ å…ƒç´ ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š</p><p>ã€€ã€€â‘ ã€å½“é€šè¿‡ ArrayList() æ„é€ ä¸€ä¸ªç©ºé›†åˆï¼Œåˆå§‹é•¿åº¦æ˜¯ä¸º0çš„ï¼Œç¬¬ 1 æ¬¡æ·»åŠ å…ƒç´ ï¼Œä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„ï¼Œå¹¶å°†è¯¥å…ƒç´ èµ‹å€¼åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p><p>ã€€ã€€â‘¡ã€ç¬¬ 2 æ¬¡æ·»åŠ å…ƒç´ ï¼Œé›†åˆä¸ä¸ºç©ºï¼Œè€Œä¸”ç”±äºé›†åˆçš„é•¿åº¦size+1æ˜¯å°äºæ•°ç»„çš„é•¿åº¦10ï¼Œæ‰€ä»¥ç›´æ¥æ·»åŠ å…ƒç´ åˆ°æ•°ç»„çš„ç¬¬äºŒä¸ªä½ç½®ï¼Œä¸ç”¨æ‰©å®¹ã€‚</p><p>ã€€ã€€â‘¢ã€ç¬¬ 11 æ¬¡æ·»åŠ å…ƒç´ ï¼Œæ­¤æ—¶ size+1 = 11ï¼Œè€Œæ•°ç»„é•¿åº¦æ˜¯10ï¼Œè¿™æ—¶å€™åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10+10*0.5 = 15 çš„æ•°ç»„ï¼ˆæ‰©å®¹1.5å€ï¼‰ï¼Œç„¶åå°†åŸæ•°ç»„å…ƒç´ å¼•ç”¨æ‹·è´åˆ°æ–°æ•°ç»„ã€‚å¹¶å°†ç¬¬ 11 æ¬¡æ·»åŠ çš„å…ƒç´ èµ‹å€¼åˆ°æ–°æ•°ç»„ä¸‹æ ‡ä¸º10çš„ä½ç½®ã€‚</p><p>ã€€ã€€â‘£ã€ç¬¬ Integer.MAX_VALUE - 8 = 2147483639ï¼Œç„¶å 2147483639%1.5=1431655759ï¼ˆè¿™ä¸ªæ•°æ˜¯è¦è¿›è¡Œæ‰©å®¹ï¼‰ æ¬¡æ·»åŠ å…ƒç´ ï¼Œä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œæ­¤æ—¶ä¼šç›´æ¥åˆ›å»ºä¸€ä¸ª 1431655759+1 å¤§å°çš„æ•°ç»„ï¼Œè¿™æ ·ä¸€ç›´ï¼Œæ¯æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½åªæ‰©å¤§ä¸€ä¸ªèŒƒå›´ã€‚</p><p>ã€€ã€€â‘¤ã€ç¬¬ Integer.MAXVALUE - 7 æ¬¡æ·»åŠ å…ƒç´ æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå¤§å°ä¸º Integer.MAXVALUE çš„æ•°ç»„ï¼Œåœ¨è¿›è¡Œå…ƒç´ æ·»åŠ ã€‚</p><p>ã€€ã€€â‘¥ã€ç¬¬ Integer.MAX_VALUE + 1 æ¬¡æ·»åŠ å…ƒç´ æ—¶ï¼ŒæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><p>ã€€ã€€æ³¨æ„ï¼šèƒ½å‘é›†åˆä¸­æ·»åŠ  null çš„ï¼Œå› ä¸ºæ•°ç»„å¯ä»¥æœ‰ null å€¼å­˜åœ¨ã€‚</p><pre><code>Object[] obj = {null,1};ArrayList list = new ArrayList();list.add(null);list.add(1);System.out.println(list.size());//2</code></pre><h3 class=pgc-h-arrow-right>5ã€åˆ é™¤å…ƒç´ </h3><p>ã€€ã€€<strong>â‘ ã€æ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ </strong></p><pre><code>public E remove(int index) {        rangeCheck(index);//åˆ¤æ–­ç»™å®šç´¢å¼•çš„èŒƒå›´ï¼Œè¶…è¿‡é›†åˆå¤§å°åˆ™æŠ›å‡ºå¼‚å¸¸        modCount++;        E oldValue = elementData(index);//å¾—åˆ°ç´¢å¼•å¤„çš„åˆ é™¤å…ƒç´         int numMoved = size - index - 1;        if (numMoved &gt; 0)//size-index-1 &gt; 0 è¡¨ç¤º 0&lt;= index &lt; (size-1),å³ç´¢å¼•ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´             //é€šè¿‡ System.arraycopy()å°†æ•°ç»„elementData çš„ä¸‹æ ‡index+1ä¹‹åé•¿åº¦ä¸º numMovedçš„å…ƒç´ æ‹·è´åˆ°ä»indexå¼€å§‹çš„ä½ç½®            System.arraycopy(elementData, index+1, elementData, index,                             numMoved);        elementData[--size] = null; //å°†æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ç½®ä¸º nullï¼Œä¾¿äºåƒåœ¾å›æ”¶        return oldValue;    }</code></pre><p>ã€€ã€€remove(int index) æ–¹æ³•è¡¨ç¤ºåˆ é™¤ç´¢å¼•indexå¤„çš„å…ƒç´ ï¼Œé¦–å…ˆé€šè¿‡ rangeCheck(index) æ–¹æ³•åˆ¤æ–­ç»™å®šç´¢å¼•çš„èŒƒå›´ï¼Œè¶…è¿‡é›†åˆå¤§å°åˆ™æŠ›å‡ºå¼‚å¸¸ï¼›æ¥ç€é€šè¿‡ System.arraycopy æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œè‡ªèº«æ‹·è´ã€‚å…³äºè¿™ä¸ªæ–¹æ³•çš„ç”¨æ³•å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ã€‚</p><p>ã€€ã€€<strong>â‘¡ã€ç›´æ¥åˆ é™¤æŒ‡å®šå…ƒç´ </strong></p><pre><code>public boolean remove(Object o) {        if (o == null) {//å¦‚æœåˆ é™¤çš„å…ƒç´ ä¸ºnull            for (int index = 0; index &lt; size; index++)                if (elementData[index] == null) {                    fastRemove(index);                    return true;                }        } else {//ä¸ä¸ºnullï¼Œé€šè¿‡equalsæ–¹æ³•åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸ç­‰            for (int index = 0; index &lt; size; index++)                if (o.equals(elementData[index])) {                    fastRemove(index);                    return true;                }        }        return false;    }    private void fastRemove(int index) {        modCount++;        int numMoved = size - index - 1;        if (numMoved &gt; 0)            System.arraycopy(elementData, index+1, elementData, index,                             numMoved);        elementData[--size] = null; //     }</code></pre><p>ã€€ã€€remove(Object o)æ–¹æ³•æ˜¯åˆ é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„è¯¥å…ƒç´ ã€‚ç„¶åé€šè¿‡System.arraycopyè¿›è¡Œæ•°ç»„è‡ªèº«æ‹·è´ã€‚</p><h3 class=pgc-h-arrow-right>6ã€ä¿®æ”¹å…ƒç´ </h3><p>ã€€ã€€é€šè¿‡è°ƒç”¨ set(int index, E element) æ–¹æ³•åœ¨æŒ‡å®šç´¢å¼• index å¤„çš„å…ƒç´ æ›¿æ¢ä¸º elementã€‚å¹¶è¿”å›åŸæ•°ç»„çš„å…ƒç´ ã€‚</p><pre><code>public E set(int index, E element) {        rangeCheck(index);//åˆ¤æ–­ç´¢å¼•åˆæ³•æ€§        E oldValue = elementData(index);//è·å¾—åŸæ•°ç»„æŒ‡å®šç´¢å¼•çš„å…ƒç´         elementData[index] = element;//å°†æŒ‡å®šæ‰€å¼•å¤„çš„å…ƒç´ æ›¿æ¢ä¸º element        return oldValue;//è¿”å›åŸæ•°ç»„ç´¢å¼•å…ƒç´     }</code></pre><p>ã€€ã€€é€šè¿‡è°ƒç”¨ rangeCheck(index) æ¥æ£€æŸ¥ç´¢å¼•åˆæ³•æ€§ã€‚</p><pre><code>    private void rangeCheck(int index) {        if (index &gt;= size)            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));    }</code></pre><p>ã€€ã€€å½“ç´¢å¼•ä¸ºè´Ÿæ•°æ—¶ï¼Œä¼šæŠ›å‡º java.lang.ArrayIndexOutOfBoundsException å¼‚å¸¸ã€‚å½“ç´¢å¼•å¤§äºé›†åˆé•¿åº¦æ—¶ï¼Œä¼šæŠ›å‡º IndexOutOfBoundsException å¼‚å¸¸ã€‚</p><h3 class=pgc-h-arrow-right>7ã€æŸ¥æ‰¾å…ƒç´ </h3><p>ã€€ã€€<strong>â‘ ã€æ ¹æ®ç´¢å¼•æŸ¥æ‰¾å…ƒç´ </strong></p><pre><code>    public E get(int index) {        rangeCheck(index);        return elementData(index);    }</code></pre><p>ã€€ã€€åŒç†ï¼Œé¦–å…ˆè¿˜æ˜¯åˆ¤æ–­ç»™å®šç´¢å¼•çš„åˆç†æ€§ï¼Œç„¶åç›´æ¥è¿”å›å¤„äºè¯¥ä¸‹æ ‡ä½ç½®çš„æ•°ç»„å…ƒç´ ã€‚</p><p>ã€€ã€€<strong>â‘¡ã€æ ¹æ®å…ƒç´ æŸ¥æ‰¾ç´¢å¼•</strong></p><pre><code>public int indexOf(Object o) {        if (o == null) {            for (int i = 0; i &lt; size; i++)                if (elementData[i]==null)                    return i;        } else {            for (int i = 0; i &lt; size; i++)                if (o.equals(elementData[i]))                    return i;        }        return -1;    }</code></pre><p>ã€€ã€€<strong>æ³¨æ„</strong>ï¼šindexOf(Object o) æ–¹æ³•æ˜¯è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°è¯¥å…ƒç´ çš„ä¸‹æ ‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› -1ã€‚</p><p>ã€€ã€€è¿˜æœ‰ lastIndexOf(Object o) æ–¹æ³•æ˜¯è¿”å›æœ€åä¸€æ¬¡å‡ºç°è¯¥å…ƒç´ çš„ä¸‹æ ‡ã€‚</p><h3 class=pgc-h-arrow-right>8ã€éå†é›†åˆ</h3><p>ã€€ã€€<strong>â‘ ã€æ™®é€š for å¾ªç¯éå†</strong> ã€€ã€€å‰é¢æˆ‘ä»¬ä»‹ç»æŸ¥æ‰¾å…ƒç´ æ—¶ï¼ŒçŸ¥é“å¯ä»¥é€šè¿‡get(int index)æ–¹æ³•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å…ƒç´ ï¼Œé‚£ä¹ˆéå†åŒç†ï¼š</p><pre><code>ArrayList list = new ArrayList();list.add("a");list.add("b");list.add("c");for(int i = 0 ; i &lt; list.size() ; i++){    System.out.print(list.get(i)+" ");}</code></pre><p>ã€€ã€€<strong>â‘¡ã€è¿­ä»£å™¨ iterator</strong> ã€€ã€€å…ˆçœ‹çœ‹å…·ä½“ç”¨æ³•ï¼š</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");Iterator&lt;String&gt; it = list.iterator();while(it.hasNext()){    String str = it.next();    System.out.print(str+" ");}</code></pre><p>ã€€ã€€åœ¨ä»‹ç» ArrayList æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥ç±»å®ç°äº† List æ¥å£ï¼Œè€Œ List æ¥å£åˆç»§æ‰¿äº† Collection æ¥å£ï¼ŒCollection æ¥å£åˆç»§æ‰¿äº† Iterable æ¥å£ï¼Œè¯¥æ¥å£æœ‰ä¸ª Iterator iterator() æ–¹æ³•ï¼Œèƒ½è·å– Iterator å¯¹è±¡ï¼Œèƒ½ç”¨è¯¥å¯¹è±¡è¿›è¡Œé›†åˆéå†ï¼Œä¸ºä»€ä¹ˆèƒ½ç”¨è¯¥å¯¹è±¡è¿›è¡Œé›†åˆéå†ï¼Ÿæˆ‘ä»¬å†çœ‹çœ‹ ArrayList ç±»ä¸­çš„è¯¥æ–¹æ³•å®ç°ï¼š</p><pre><code>     public Iterator&lt;E&gt; iterator() {         return new Itr();     }</code></pre><p>ã€€ã€€è¯¥æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ª Itr å¯¹è±¡ï¼Œè¿™ä¸ªç±»æ˜¯ ArrayList çš„å†…éƒ¨ç±»ã€‚</p><pre><code>private class Itr implements Iterator&lt;E&gt; {        int cursor;       //æ¸¸æ ‡ï¼Œ ä¸‹ä¸€ä¸ªè¦è¿”å›çš„å…ƒç´ çš„ç´¢å¼•        int lastRet = -1; // è¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•; å¦‚æœæ²¡æœ‰è¿™æ ·çš„è¯è¿”å›-1.        int expectedModCount = modCount;        //é€šè¿‡ cursor ï¼= size åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´         public boolean hasNext() {            return cursor != size;        }        @SuppressWarnings("unchecked")        public E next() {            checkForComodification();//è¿­ä»£å™¨è¿›è¡Œå…ƒç´ è¿­ä»£æ—¶åŒæ—¶è¿›è¡Œå¢åŠ å’Œåˆ é™¤æ“ä½œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸            int i = cursor;            if (i &gt;= size)                throw new NoSuchElementException();            Object[] elementData = ArrayList.this.elementData;            if (i &gt;= elementData.length)                throw new ConcurrentModificationException();            cursor = i + 1;//æ¸¸æ ‡å‘åç§»åŠ¨ä¸€ä½            return (E) elementData[lastRet = i];//è¿”å›ç´¢å¼•ä¸ºiå¤„çš„å…ƒç´ ï¼Œå¹¶å°† lastRetèµ‹å€¼ä¸ºi        }        public void remove() {            if (lastRet &lt; 0)                throw new IllegalStateException();            checkForComodification();            try {                ArrayList.this.remove(lastRet);//è°ƒç”¨ArrayListçš„removeæ–¹æ³•åˆ é™¤å…ƒç´                 cursor = lastRet;//æ¸¸æ ‡æŒ‡å‘åˆ é™¤å…ƒç´ çš„ä½ç½®ï¼Œæœ¬æ¥æ˜¯lastRet+1çš„ï¼Œè¿™é‡Œåˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ¸¸æ ‡å°±ä¸å˜äº†                lastRet = -1;//lastRetæ¢å¤é»˜è®¤å€¼-1                expectedModCount = modCount;//expectedModCountå€¼å’ŒmodCountåŒæ­¥ï¼Œå› ä¸ºè¿›è¡Œaddå’Œremoveæ“ä½œï¼ŒmodCountä¼šåŠ 1            } catch (IndexOutOfBoundsException ex) {                throw new ConcurrentModificationException();            }        }        @Override        @SuppressWarnings("unchecked")        public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {//ä¾¿äºè¿›è¡ŒforEachå¾ªç¯            Objects.requireNonNull(consumer);            final int size = ArrayList.this.size;            int i = cursor;            if (i &gt;= size) {                return;            }            final Object[] elementData = ArrayList.this.elementData;            if (i &gt;= elementData.length) {                throw new ConcurrentModificationException();            }            while (i != size &amp;&amp; modCount == expectedModCount) {                consumer.accept((E) elementData[i++]);            }            // update once at end of iteration to reduce heap write traffic            cursor = i;            lastRet = i - 1;            checkForComodification();        }        //å‰é¢åœ¨æ–°å¢å…ƒç´ add() å’Œ åˆ é™¤å…ƒç´  remove() æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° modCount++ã€‚ä¿®æ”¹set() æ˜¯æ²¡æœ‰çš„        //ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½åœ¨è¿­ä»£å™¨è¿›è¡Œå…ƒç´ è¿­ä»£æ—¶è¿›è¡Œå¢åŠ å’Œåˆ é™¤æ“ä½œï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸        final void checkForComodification() {            if (modCount != expectedModCount)                throw new ConcurrentModificationException();        }    }</code></pre><p>ã€€ã€€æ³¨æ„åœ¨è¿›è¡Œ next() æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œ checkForComodification() è°ƒç”¨ï¼Œè¯¥æ–¹æ³•è¡¨ç¤ºè¿­ä»£å™¨è¿›è¡Œå…ƒç´ è¿­ä»£æ—¶ï¼Œå¦‚æœåŒæ—¶è¿›è¡Œå¢åŠ å’Œåˆ é™¤æ“ä½œï¼Œä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚æ¯”å¦‚ï¼š</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");Iterator&lt;String&gt; it = list.iterator();while(it.hasNext()){    String str = it.next();    System.out.print(str+" ");    list.remove(str);//é›†åˆéå†æ—¶è¿›è¡Œåˆ é™¤æˆ–è€…æ–°å¢æ“ä½œï¼Œéƒ½ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸    //list.add(str);    list.set(0, str);//ä¿®æ”¹æ“ä½œä¸ä¼šé€ æˆå¼‚å¸¸}</code></pre><div class=pgc-img><img alt=æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c60e43d3851c4e668faec568a5f0a5f1><p class=pgc-img-caption></p></div><p>ã€€ã€€è§£å†³åŠæ³•æ˜¯ä¸è°ƒç”¨ ArrayList.remove() æ–¹æ³•ï¼Œè½¬è€Œè°ƒç”¨ è¿­ä»£å™¨çš„ remove() æ–¹æ³•ï¼š</p><pre><code>Iterator&lt;String&gt; it = list.iterator();while(it.hasNext()){    String str = it.next();    System.out.print(str+" ");    //list.remove(str);//é›†åˆéå†æ—¶è¿›è¡Œåˆ é™¤æˆ–è€…æ–°å¢æ“ä½œï¼Œéƒ½ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸    it.remove();}</code></pre><p>ã€€ã€€<strong>æ³¨æ„</strong>ï¼šè¿­ä»£å™¨åªèƒ½å‘åéå†ï¼Œä¸èƒ½å‘å‰éå†ï¼Œèƒ½å¤Ÿåˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯ä¸èƒ½æ–°å¢å…ƒç´ ã€‚</p><p>ã€€ã€€<strong>â‘¢ã€è¿­ä»£å™¨çš„å˜ç§ forEach</strong></p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");for(String str : list){    System.out.print(str + " ");}</code></pre><p>ã€€ã€€è¿™ç§è¯­æ³•å¯ä»¥çœ‹æˆæ˜¯ JDK çš„ä¸€ç§è¯­æ³•ç³–ï¼Œé€šè¿‡åç¼–è¯‘ class æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„ java æ–‡ä»¶ï¼Œå…¶å…·ä½“å®ç°è¿˜æ˜¯é€šè¿‡è°ƒç”¨ Iterator è¿­ä»£å™¨è¿›è¡Œéå†çš„ã€‚å¦‚ä¸‹ï¼š</p><pre><code>ArrayList list = new ArrayList();        list.add("a");        list.add("b");        list.add("c");        String str;        for (Iterator iterator1 = list.iterator(); iterator1.hasNext(); System.out.print((new StringBuilder(String.valueOf(str))).append(" ").toString()))            str = (String)iterator1.next();</code></pre><p>ã€€ã€€<strong>â‘£ã€è¿­ä»£å™¨ ListIterator</strong> ã€€ã€€è¿˜æ˜¯å…ˆçœ‹çœ‹å…·ä½“ç”¨æ³•ï¼š</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");ListIterator&lt;String&gt; listIt = list.listIterator();//å‘åéå†while(listIt.hasNext()){    System.out.print(listIt.next()+" ");//a b c}//å‘åå‰éå†,æ­¤æ—¶ç”±äºä¸Šé¢è¿›è¡Œäº†å‘åéå†ï¼Œæ¸¸æ ‡å·²ç»æŒ‡å‘äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ­¤å¤„å‘å‰éå†èƒ½æœ‰å€¼while(listIt.hasPrevious()){    System.out.print(listIt.previous()+" ");//c b a}</code></pre><p>ã€€ã€€è¿˜èƒ½ä¸€è¾¹éå†ï¼Œä¸€è¾¹è¿›è¡Œæ–°å¢æˆ–è€…åˆ é™¤æ“ä½œï¼š</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");ListIterator&lt;String&gt; listIt = list.listIterator();//å‘åéå†while(listIt.hasNext()){    System.out.print(listIt.next()+" ");//a b c    listIt.add("1");//åœ¨æ¯ä¸€ä¸ªå…ƒç´ åé¢å¢åŠ ä¸€ä¸ªå…ƒç´  "1"}//å‘åå‰éå†,æ­¤æ—¶ç”±äºä¸Šé¢è¿›è¡Œäº†å‘åéå†ï¼Œæ¸¸æ ‡å·²ç»æŒ‡å‘äº†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ­¤å¤„å‘å‰éå†èƒ½æœ‰å€¼while(listIt.hasPrevious()){    System.out.print(listIt.previous()+" ");//1 c 1 b 1 a }</code></pre><p>ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ç›¸æ¯”äº Iterator è¿­ä»£å™¨ï¼Œè¿™é‡Œçš„ ListIterator å¤šå‡ºäº†èƒ½å‘å‰è¿­ä»£ï¼Œä»¥åŠèƒ½å¤Ÿæ–°å¢å…ƒç´ ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å…·ä½“å®ç°ï¼š</p><p>ã€€ã€€å¯¹äº Iterator è¿­ä»£å™¨ï¼Œæˆ‘ä»¬æŸ¥çœ‹ JDK æºç ï¼Œå‘ç°è¿˜æœ‰ ListIterator æ¥å£ç»§æ‰¿äº† Iterator:</p><blockquote><p>public interface ListIterator extends Iterator</p></blockquote><p>ã€€ã€€è¯¥æ¥å£æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š</p><div class=pgc-img><img alt=æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a729c2d6159d4391abb346cbcb9e0e3a><p class=pgc-img-caption></p></div><p>ã€€ã€€æˆ‘ä»¬çœ‹åœ¨ ArrayList ç±»ä¸­ï¼Œæœ‰å¦‚ä¸‹æ–¹æ³•å¯ä»¥è·å¾— ListIterator æ¥å£ï¼š</p><pre><code>    public ListIterator&lt;E&gt; listIterator() {        return new ListItr(0);    }</code></pre><p>ã€€ã€€è¿™é‡Œçš„ ListItr ä¹Ÿæ˜¯ä¸€ä¸ªå†…éƒ¨ç±»ã€‚</p><pre><code>//æ³¨æ„ å†…éƒ¨ç±» ListItr ç»§æ‰¿äº†å¦ä¸€ä¸ªå†…éƒ¨ç±» Itr    private class ListItr extends Itr implements ListIterator&lt;E&gt; {        ListItr(int index) {//æ„é€ å‡½æ•°ï¼Œè¿›è¡Œæ¸¸æ ‡åˆå§‹åŒ–            super();            cursor = index;        }        public boolean hasPrevious() {//åˆ¤æ–­æ˜¯å¦æœ‰ä¸Šä¸€ä¸ªå…ƒç´             return cursor != 0;        }        public int nextIndex() {//è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•            return cursor;        }        public int previousIndex() {//è¿”å›ä¸Šä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•            return cursor - 1;        }        //è¯¥æ–¹æ³•è·å–å½“å‰ç´¢å¼•çš„ä¸Šä¸€ä¸ªå…ƒç´         @SuppressWarnings("unchecked")        public E previous() {            checkForComodification();//è¿­ä»£å™¨è¿›è¡Œå…ƒç´ è¿­ä»£æ—¶åŒæ—¶è¿›è¡Œå¢åŠ å’Œåˆ é™¤æ“ä½œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸            int i = cursor - 1;            if (i &lt; 0)                throw new NoSuchElementException();            Object[] elementData = ArrayList.this.elementData;            if (i &gt;= elementData.length)                throw new ConcurrentModificationException();            cursor = i;//æ¸¸æ ‡æŒ‡å‘ä¸Šä¸€ä¸ªå…ƒç´             return (E) elementData[lastRet = i];//è¿”å›ä¸Šä¸€ä¸ªå…ƒç´ çš„å€¼        }        public void set(E e) {            if (lastRet &lt; 0)                throw new IllegalStateException();            checkForComodification();            try {                ArrayList.this.set(lastRet, e);            } catch (IndexOutOfBoundsException ex) {                throw new ConcurrentModificationException();            }        }        //ç›¸æ¯”äºè¿­ä»£å™¨ Iterator ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªæ–°å¢æ“ä½œ        public void add(E e) {            checkForComodification();            try {                int i = cursor;                ArrayList.this.add(i, e);                cursor = i + 1;                lastRet = -1;                expectedModCount = modCount;            } catch (IndexOutOfBoundsException ex) {                throw new ConcurrentModificationException();            }        }    }</code></pre><p>### 9ã€SubList ã€€ã€€åœ¨ ArrayList ä¸­æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š</p><pre><code>     public List&lt;E&gt; subList(int fromIndex, int toIndex) {         subListRangeCheck(fromIndex, toIndex, size);         return new SubList(this, 0, fromIndex, toIndex);     }</code></pre><p>ã€€ã€€ä½œç”¨æ˜¯è¿”å›ä» fromIndex(åŒ…æ‹¬) å¼€å§‹çš„ä¸‹æ ‡ï¼Œåˆ° toIndex(ä¸åŒ…æ‹¬) ç»“æŸçš„ä¸‹æ ‡ä¹‹é—´çš„å…ƒç´ è§†å›¾ã€‚å¦‚ä¸‹ï¼š</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");List&lt;String&gt; subList = list.subList(0, 1);for(String str : subList){    System.out.print(str + " ");//a}</code></pre><p>ã€€ã€€è¿™é‡Œå‡ºç°äº† SubList ç±»ï¼Œè¿™ä¹Ÿæ˜¯ ArrayList ä¸­çš„ä¸€ä¸ªå†…éƒ¨ç±»ã€‚</p><p>ã€€ã€€æ³¨æ„ï¼šè¿”å›çš„æ˜¯åŸé›†åˆçš„è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå¯¹ subList å‡ºæ¥çš„é›†åˆè¿›è¡Œä¿®æ”¹æˆ–æ–°å¢æ“ä½œï¼Œé‚£ä¹ˆåŸå§‹é›†åˆä¹Ÿä¼šå‘ç”ŸåŒæ ·çš„æ“ä½œã€‚</p><pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("a");list.add("b");list.add("c");List&lt;String&gt; subList = list.subList(0, 1);for(String str : subList){    System.out.print(str + " ");//a}subList.add("d");System.out.println(subList.size());//2System.out.println(list.size());//4,åŸå§‹é›†åˆé•¿åº¦ä¹Ÿå¢åŠ äº†</code></pre><p>ã€€ã€€æƒ³è¦ç‹¬ç«‹å‡ºæ¥ä¸€ä¸ªé›†åˆï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p><blockquote><p>List subList = new ArrayList&lt;>(list.subList(0, 1));</p></blockquote><h3 class=pgc-h-arrow-right>10ã€size()</h3><pre><code>    public int size() {        return size;    }</code></pre><p>ã€€ã€€æ³¨æ„ï¼šè¿”å›é›†åˆçš„é•¿åº¦ï¼Œè€Œä¸æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œè¿™é‡Œçš„ size å°±æ˜¯å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</p><h3 class=pgc-h-arrow-right>11ã€isEmpty()</h3><pre><code>     public boolean isEmpty() {         return size == 0;     }</code></pre><p>ã€€ã€€è¿”å› size == 0 çš„ç»“æœã€‚</p><h3 class=pgc-h-arrow-right>12ã€trimToSize()</h3><pre><code>public void trimToSize() {        modCount++;        if (size &lt; elementData.length) {            elementData = Arrays.copyOf(elementData, size);        }    }</code></pre><p>ã€€ã€€è¯¥æ–¹æ³•ç”¨äºå›æ”¶å¤šä½™çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦æˆ‘ä»¬ç¡®å®šé›†åˆä¸åœ¨æ·»åŠ å¤šä½™çš„å…ƒç´ ä¹‹åï¼Œè°ƒç”¨ trimToSize() æ–¹æ³•ä¼šå°†å®ç°é›†åˆçš„æ•°ç»„å¤§å°åˆšå¥½è°ƒæ•´ä¸ºé›†åˆå…ƒç´ çš„å¤§å°ã€‚</p><p>ã€€ã€€<strong>æ³¨æ„</strong>ï¼šè¯¥æ–¹æ³•ä¼šèŠ±æ—¶é—´æ¥å¤åˆ¶æ•°ç»„å…ƒç´ ï¼Œæ‰€ä»¥åº”è¯¥åœ¨ç¡®å®šä¸ä¼šæ·»åŠ å…ƒç´ ä¹‹ååœ¨è°ƒç”¨ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼šhttps://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#</p><blockquote><p>æœ¬ç³»åˆ—æ•™ç¨‹æŒç»­æ›´æ–°ï¼Œå¯ä»¥å¾®ä¿¡æœç´¢ã€Œ ITå¯ä¹ ã€ç¬¬ä¸€æ—¶é—´é˜…è¯»ã€‚å›å¤ã€Šç”µå­ä¹¦ã€‹æœ‰æˆ‘ä¸ºå¤§å®¶ç‰¹åˆ«ç­›é€‰çš„ä¹¦ç±èµ„æ–™</p></blockquote><div class=pgc-img><img alt=æœ€å¸¸ç”¨çš„Javaé›†åˆç±»ï¼Œä½ ä¸€å®šç”¨è¿‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f062059d45040b898e7ca8f5be79c6c><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Java','ç”¨è¿‡','é›†åˆ'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>