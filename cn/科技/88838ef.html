<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/570b4ebe5dd74145a991aeaabbd63232"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88838ef.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88838ef.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88838ef.html><meta property="article:published_time" content="2020-10-29T20:59:54+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:54+08:00"><meta name=Keywords content><meta name=description content="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/88838ef.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><h1>ç¬¬ä¸‰æ–¹åº“</h1><blockquote><p>gopkg.in/ini.v1</p></blockquote><div class=pgc-img><img alt="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/570b4ebe5dd74145a991aeaabbd63232><p class=pgc-img-caption></p></div><hr><h1>é…ç½®åŠ è½½</h1><p>åˆ›å»ºä¸€ä¸ªç©ºçš„é…ç½®</p><pre>cfg := ini.Empty()</pre><p>ç›´æ¥åŠ è½½å­˜åœ¨çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±ä¼šæŠ¥é”™</p><pre>cfg, err := ini.Load("app.ini")</pre><p>å¯ä»¥åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œåé¢çš„é…ç½®æ–‡ä»¶é”®å€¼ä¼šè¦†ç›–å‰é¢ä¸€ä¸ª</p><pre>cfg, err := ini.Load("app.ini", "app_dev.ini")</pre><p>ä¸èƒ½å¤Ÿç¡®å®šå…¶ä¸­å“ªäº›æ–‡ä»¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•° LooseLoad() æ¥å¿½ç•¥å®ƒä»¬ã€‚</p><pre>cfg, err := ini.LooseLoad("app.ini", "app_dev.ini")</pre><p>è·³è¿‡æ— æ³•è¯†åˆ«çš„æ•°æ®è¡Œ</p><pre>cfg, err := ini.LoadSources(ini.LoadOptions{SkipUnrecognizableLines: true}, "other.ini")</pre><div class=pgc-img><img alt="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/19c6f718e1e64d85ac9184629c4cbf4e><p class=pgc-img-caption></p></div><hr><h1>ä¿å­˜é…ç½®</h1><p>æ¯”è¾ƒåŸå§‹çš„åšæ³•æ˜¯è¾“å‡ºé…ç½®åˆ°æŸä¸ªæ–‡ä»¶ï¼š</p><pre>err = cfg.SaveTo("app.ini")</pre><p>ä¿å­˜æ—¶è°ƒæ•´ç¼©è¿›</p><pre>err = cfg.SaveToIndent("app.ini", "\t")</pre><div class=pgc-img><img alt="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/0d25706f-7905-48ff-b82e-78c531056ea0><p class=pgc-img-caption></p></div><hr><h1>æ“ä½œåˆ†åŒº</h1><p>è·å–åˆ¶å®šåˆ†åŒºçš„å¯¹è±¡</p><pre>sec, err := cfg.GetSection("db")</pre><p>å¦‚æœæƒ³è¦è·å–é»˜è®¤åˆ†åŒºï¼Œåˆ™å¯ä»¥ç”¨ç©ºå­—ç¬¦ä¸²ä»£æ›¿åˆ†åŒºåï¼š</p><pre>sec, err := cfg.GetSection("")</pre><p>ç›¸å¯¹åº”çš„ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ ini.DEFAULT_SECTION æ¥è·å–é»˜è®¤åˆ†åŒºï¼š</p><pre>sec, err := cfg.GetSection(ini.DEFAULT_SECTION)</pre><p>å½“æ‚¨éå¸¸ç¡®å®šæŸä¸ªåˆ†åŒºæ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç®€ä¾¿æ–¹æ³•ï¼š</p><pre>sec := cfg.Section("section name")</pre><p>å¦‚æœä¸å­˜å†ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹åº”çš„åˆ†åŒºå¯¹è±¡ã€‚</p><p>åˆ›å»ºä¸€ä¸ªåˆ†åŒºï¼š</p><pre>err := cfg.NewSection("new section")</pre><p>è·å–æ‰€æœ‰åˆ†åŒºå¯¹è±¡æˆ–åç§°ï¼š</p><pre>secs := cfg.Sections()names := cfg.SectionStrings()</pre><div class=pgc-img><img alt="Goè¯­è¨€ - é…ç½®æ–‡ä»¶æ“ä½œ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c1afcad3efe14ee7ab6840ab0ba86d8b><p class=pgc-img-caption></p></div><hr><h1>æ“ä½œé”®</h1><pre>key, err := cfg.Section("").GetKey("key name")</pre><p>å’Œåˆ†åŒºä¸€æ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç›´æ¥è·å–é”®è€Œå¿½ç•¥é”™è¯¯å¤„ç†ï¼š</p><pre>key := cfg.Section("").Key("key name")</pre><p>åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ï¼š</p><pre>yes := cfg.Section("").HasKey("key name")</pre><p>åˆ›å»ºä¸€ä¸ªæ–°çš„é”®ï¼š</p><pre>err := cfg.Section("").NewKey("name", "value")</pre><p>è·å–åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®æˆ–é”®åï¼š</p><pre>keys := cfg.Section("").Keys()names := cfg.Section("").KeyStrings()</pre><p>è·å–åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹çš„å…‹éš†ï¼š</p><pre>hash := cfg.Section("").KeysHash()</pre><hr><h1>æ“ä½œé”®å€¼</h1><p>è·å–ä¸€ä¸ªç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆstringï¼‰çš„å€¼ï¼š</p><pre>val := cfg.Section("").Key("key name").String()</pre><p>è·å–å€¼çš„åŒæ—¶é€šè¿‡è‡ªå®šä¹‰å‡½æ•°è¿›è¡Œå¤„ç†éªŒè¯ï¼š</p><pre>val := cfg.Section("").Key("key name").Validate(func(in string) string { if len(in) == 0 { return "default" } return in})</pre><p>å¦‚æœä¸éœ€è¦ä»»ä½•å¯¹å€¼çš„è‡ªåŠ¨è½¬å˜åŠŸèƒ½ï¼ˆä¾‹å¦‚é€’å½’è¯»å–ï¼‰ï¼Œå¯ä»¥ç›´æ¥è·å–åŸå€¼ï¼ˆè¿™ç§æ–¹å¼æ€§èƒ½æœ€ä½³ï¼‰ï¼š</p><pre>val := cfg.Section("").Key("key name").Value()</pre><p>åˆ¤æ–­æŸä¸ªåŸå€¼æ˜¯å¦å­˜åœ¨ï¼š</p><pre>yes := cfg.Section("").HasValue("test value")</pre><p>è·å–å…¶å®ƒç±»å‹çš„å€¼ï¼š</p><pre>// å¸ƒå°”å€¼çš„è§„åˆ™ï¼š// true å½“å€¼ä¸ºï¼š1, t, T, TRUE, true, True, YES, yes, Yes, y, ON, on, On// false å½“å€¼ä¸ºï¼š0, f, F, FALSE, false, False, NO, no, No, n, OFF, off, Offv, err = cfg.Section("").Key("BOOL").Bool()v, err = cfg.Section("").Key("FLOAT64").Float64()v, err = cfg.Section("").Key("INT").Int()v, err = cfg.Section("").Key("INT64").Int64()v, err = cfg.Section("").Key("UINT").Uint()v, err = cfg.Section("").Key("UINT64").Uint64()v, err = cfg.Section("").Key("TIME").TimeFormat(time.RFC3339)v, err = cfg.Section("").Key("TIME").Time() // RFC3339v = cfg.Section("").Key("BOOL").MustBool()v = cfg.Section("").Key("FLOAT64").MustFloat64()v = cfg.Section("").Key("INT").MustInt()v = cfg.Section("").Key("INT64").MustInt64()v = cfg.Section("").Key("UINT").MustUint()v = cfg.Section("").Key("UINT64").MustUint64()v = cfg.Section("").Key("TIME").MustTimeFormat(time.RFC3339)v = cfg.Section("").Key("TIME").MustTime() // RFC3339// ç”± Must å¼€å¤´çš„æ–¹æ³•åå…è®¸æ¥æ”¶ä¸€ä¸ªç›¸åŒç±»å‹çš„å‚æ•°æ¥ä½œä¸ºé»˜è®¤å€¼ï¼Œ// å½“é”®ä¸å­˜åœ¨æˆ–è€…è½¬æ¢å¤±è´¥æ—¶ï¼Œåˆ™ä¼šç›´æ¥è¿”å›è¯¥é»˜è®¤å€¼ã€‚// ä½†æ˜¯ï¼ŒMustString æ–¹æ³•å¿…é¡»ä¼ é€’ä¸€ä¸ªé»˜è®¤å€¼ã€‚v = cfg.Section("").Key("String").MustString("default")v = cfg.Section("").Key("BOOL").MustBool(true)v = cfg.Section("").Key("FLOAT64").MustFloat64(1.25)v = cfg.Section("").Key("INT").MustInt(10)v = cfg.Section("").Key("INT64").MustInt64(99)v = cfg.Section("").Key("UINT").MustUint(3)v = cfg.Section("").Key("UINT64").MustUint64(6)v = cfg.Section("").Key("TIME").MustTimeFormat(time.RFC3339, time.Now())v = cfg.Section("").Key("TIME").MustTime(time.Now()) // RFC3339</pre><hr><h1>æ“ä½œæ³¨é‡Š</h1><p>ä¸‹è¿°å‡ ç§æƒ…å†µçš„å†…å®¹å°†è¢«è§†ä¸ºæ³¨é‡Šï¼š</p><p>æ‰€æœ‰ä»¥ # æˆ– ; å¼€å¤´çš„è¡Œ</p><p>æ‰€æœ‰åœ¨ # æˆ– ; ä¹‹åçš„å†…å®¹</p><p>åˆ†åŒºæ ‡ç­¾åçš„æ–‡å­— (å³ [åˆ†åŒºå] ä¹‹åçš„å†…å®¹)</p><p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨åŒ…å« # æˆ– ; çš„å€¼ï¼Œè¯·ä½¿ç”¨ ` æˆ– """ è¿›è¡ŒåŒ…è¦†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ LoadOptions å®Œå…¨å¿½ç•¥è¡Œå†…æ³¨é‡Šï¼š</p><pre>cfg, err := ini.LoadSources(ini.LoadOptions{ IgnoreInlineComment: true,}, "app.ini")</pre><p>æˆ–è¦æ±‚æ³¨é‡Šç¬¦å·å‰å¿…é¡»å¸¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼š</p><pre>cfg, err := ini.LoadSources(ini.LoadOptions{ SpaceBeforeInlineComment: true,}, "app.ini")</pre></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é…ç½®æ–‡ä»¶','Go','è¯­è¨€'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>