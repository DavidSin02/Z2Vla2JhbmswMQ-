<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ | æå®¢å¿«è¨Š</title><meta property="og:title" content="å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/f9c98ae27056432c8ce5cb617bfc8d93"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/893cfdc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/893cfdc.html><meta property="article:published_time" content="2020-10-29T20:53:03+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:03+08:00"><meta name=Keywords content><meta name=description content="å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/893cfdc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h2 class=heading>ç»“åˆSpringBootä½¿ç”¨</h2><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç»“åˆSpringBootæ¥å®ç°ä¸€ä¸ªå®Œæ•´çš„å›¾ç‰‡ä¸Šä¼ ä¸åˆ é™¤æ“ä½œã€‚</p></blockquote><ul><li>ä¸Šä¼ æµç¨‹ç¤ºæ„å›¾ï¼š</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f9c98ae27056432c8ce5cb617bfc8d93><p class=pgc-img-caption></p></div><p><br></p><ul><li>åœ¨pom.xmlä¸­æ·»åŠ MinIOçš„ç›¸å…³ä¾èµ–ï¼š</li></ul><pre><code>&lt;!--MinIO JAVA SDK--&gt;&lt;dependency&gt;    &lt;groupId&gt;io.minio&lt;/groupId&gt;    &lt;artifactId&gt;minio&lt;/artifactId&gt;    &lt;version&gt;3.0.10&lt;/version&gt;&lt;/dependency&gt;å¤åˆ¶ä»£ç </code></pre><ul><li>åœ¨SpringBootä¸­å¼€å¯æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œéœ€è¦åœ¨application.ymlæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</li></ul><pre><code>spring:  servlet:    multipart:      enabled: true #å¼€å¯æ–‡ä»¶ä¸Šä¼       max-file-size: 10MB #é™åˆ¶æ–‡ä»¶ä¸Šä¼ å¤§å°ä¸º10Må¤åˆ¶ä»£ç </code></pre><ul><li>æ·»åŠ ä¸€ä¸ªMinioControlleræ§åˆ¶å™¨ç”¨äºå®ç°æ–‡ä»¶çš„ä¸Šä¼ å’Œåˆ é™¤æ“ä½œï¼š</li></ul><pre><code>/** * Created by macro on 2019/12/25. */@Api(tags = "MinioController", description = "MinIOå¯¹è±¡å­˜å‚¨ç®¡ç†")@Controller@RequestMapping("/minio")public class MinioController {    private static final Logger LOGGER = LoggerFactory.getLogger(MinioController.class);    @Value("${minio.endpoint}")    private String ENDPOINT;    @Value("${minio.bucketName}")    private String BUCKET_NAME;    @Value("${minio.accessKey}")    private String ACCESS_KEY;    @Value("${minio.secretKey}")    private String SECRET_KEY;    @ApiOperation("æ–‡ä»¶ä¸Šä¼ ")    @RequestMapping(value = "/upload", method = RequestMethod.POST)    @ResponseBody    public CommonResult upload(@RequestParam("file") MultipartFile file) {        try {            //åˆ›å»ºä¸€ä¸ªMinIOçš„Javaå®¢æˆ·ç«¯            MinioClient minioClient = new MinioClient(ENDPOINT, ACCESS_KEY, SECRET_KEY);            boolean isExist = minioClient.bucketExists(BUCKET_NAME);            if (isExist) {                LOGGER.info("å­˜å‚¨æ¡¶å·²ç»å­˜åœ¨ï¼");            } else {                //åˆ›å»ºå­˜å‚¨æ¡¶å¹¶è®¾ç½®åªè¯»æƒé™                minioClient.makeBucket(BUCKET_NAME);                minioClient.setBucketPolicy(BUCKET_NAME, "*.*", PolicyType.READ_ONLY);            }            String filename = file.getOriginalFilename();            SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");            // è®¾ç½®å­˜å‚¨å¯¹è±¡åç§°            String objectName = sdf.format(new Date()) + "/" + filename;            // ä½¿ç”¨putObjectä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åˆ°å­˜å‚¨æ¡¶ä¸­            minioClient.putObject(BUCKET_NAME, objectName, file.getInputStream(), file.getContentType());            LOGGER.info("æ–‡ä»¶ä¸Šä¼ æˆåŠŸ!");            MinioUploadDto minioUploadDto = new MinioUploadDto();            minioUploadDto.setName(filename);            minioUploadDto.setUrl(ENDPOINT + "/" + BUCKET_NAME + "/" + objectName);            return CommonResult.success(minioUploadDto);        } catch (Exception e) {            LOGGER.info("ä¸Šä¼ å‘ç”Ÿé”™è¯¯: {}ï¼", e.getMessage());        }        return CommonResult.failed();    }    @ApiOperation("æ–‡ä»¶åˆ é™¤")    @RequestMapping(value = "/delete", method = RequestMethod.POST)    @ResponseBody    public CommonResult delete(@RequestParam("objectName") String objectName) {        try {            MinioClient minioClient = new MinioClient(ENDPOINT, ACCESS_KEY, SECRET_KEY);            minioClient.removeObject(BUCKET_NAME, objectName);            return CommonResult.success(null);        } catch (Exception e) {            e.printStackTrace();        }        return CommonResult.failed();    }}å¤åˆ¶ä»£ç </code></pre><ul><li>åœ¨application.ymlä¸­å¯¹MinIOå®¢æˆ·ç«¯è¿›è¡Œé…ç½®ï¼š</li></ul><pre><code># MinIOå¯¹è±¡å­˜å‚¨ç›¸å…³é…ç½®minio:  endpoint: http://192.168.6.132:9090 #MinIOæœåŠ¡æ‰€åœ¨åœ°å€  bucketName: mall #å­˜å‚¨æ¡¶åç§°  accessKey: minioadmin #è®¿é—®çš„key  secretKey: minioadmin #è®¿é—®çš„ç§˜é’¥å¤åˆ¶ä»£ç </code></pre><ul><li>å¯åŠ¨æˆ‘çš„SpringBootåº”ç”¨ï¼Œä½¿ç”¨Postmanæ¥è®¿é—®ä¸Šä¼ æ¥å£è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œä¸Šä¼ æ¥å£åœ°å€ï¼šhttp://localhost:8080/minio/upload</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4fb217b35904459e9f3945ff3b3e51b6><p class=pgc-img-caption></p></div><ul><li>ä¸Šä¼ å®Œæˆåï¼Œæˆ‘ä»¬æ‰“å¼€MinIOçš„ç®¡ç†ç•Œé¢å¯ä»¥çœ‹åˆ°ä¸Šä¼ åçš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿”å›çš„urlæ¥è®¿é—®å›¾ç‰‡ï¼š</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/13725f80a22745e38d4a4d9a4e5d5b28><p class=pgc-img-caption></p></div><ul><li>æˆ‘ä»¬å¯ä»¥è°ƒç”¨åˆ é™¤æ¥å£æ¥åˆ é™¤è¯¥å›¾ç‰‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯objectNameå€¼æ˜¯å­˜å‚¨æ¡¶ä¸­çš„å›¾ç‰‡ç›¸å¯¹è·¯å¾„ï¼Œåˆ é™¤æ–‡ä»¶æ¥å£åœ°å€ï¼šhttp://localhost:8080/minio/delete</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/59a449121477468e85877a7caeae8ff9><p class=pgc-img-caption></p></div><h2 class=heading>ç»“åˆVueä½¿ç”¨</h2><blockquote><p>ç»è¿‡ä¸Šé¢æ“ä½œï¼Œæˆ‘ä»¬çš„SpringBootåº”ç”¨å·²ç»å¯ä»¥å®Œæˆæ–‡ä»¶ä¸Šä¼ ä¸åˆ é™¤æ“ä½œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»“åˆVueæ¥å®ç°å‰ç«¯ä¸Šä¼ å›¾ç‰‡åˆ°MinIOä¸­ï¼Œä»¥mall-admin-webä¸­çš„ä»£ç ä¸ºä¾‹ã€‚</p></blockquote><ul><li>æˆ‘ä»¬çš„SpringBootåº”ç”¨éœ€è¦æ”¯æŒè·¨åŸŸè¯·æ±‚ï¼Œå¦åˆ™Vueå‰ç«¯æ— æ³•è¿›è¡Œæ¥å£è°ƒç”¨ï¼Œæˆ‘ä»¬å…ˆæ·»åŠ ä¸€ä¸ªå…¨å±€çš„è·¨åŸŸè¯·æ±‚é…ç½®ï¼š</li></ul><pre><code>/** * å…¨å±€è·¨åŸŸé…ç½® * Created by macro on 2019/7/27. */@Configurationpublic class GlobalCorsConfig {    /**     * å…è®¸è·¨åŸŸè°ƒç”¨çš„è¿‡æ»¤å™¨     */    @Bean    public CorsFilter corsFilter() {        CorsConfiguration config = new CorsConfiguration();        //å…è®¸æ‰€æœ‰åŸŸåè¿›è¡Œè·¨åŸŸè°ƒç”¨        config.addAllowedOrigin("*");        //å…è®¸è·¨è¶Šå‘é€cookie        config.setAllowCredentials(true);        //æ”¾è¡Œå…¨éƒ¨åŸå§‹å¤´ä¿¡æ¯        config.addAllowedHeader("*");        //å…è®¸æ‰€æœ‰è¯·æ±‚æ–¹æ³•è·¨åŸŸè°ƒç”¨        config.addAllowedMethod("*");        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();        source.registerCorsConfiguration("/**", config);        return new CorsFilter(source);    }}å¤åˆ¶ä»£ç </code></pre><ul><li>mall-admin-webçš„æ–‡ä»¶ä¸Šä¼ æ“ä½œä¸»è¦æ˜¯åœ¨singleUpload.vueå’ŒmultiUpload.vueä¸­ï¼Œä¸‹é¢æˆ‘ä»¬ä»¥singleUpload.vueçš„ä¿®æ”¹ä¸ºä¾‹ã€‚</li><li>æˆ‘ä»¬éœ€è¦æŠŠåŸæ¥çš„OSSä¸Šä¼ å’Œç°åœ¨çš„MinIOä¸Šä¼ åšä¸ªå…¼å®¹æ“ä½œï¼Œå…ˆåœ¨Vueå®ä¾‹çš„æ•°æ®å¯¹è±¡ä¸­æ·»åŠ ä¸‰ä¸ªå±æ€§ï¼š</li></ul><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/35cadfef5ff94ed3889aff74ec88e0b8><p class=pgc-img-caption></p></div><p><br></p><ul><li>ç„¶åæ ¹æ®useOsså±æ€§è®¾ç½®el-uploadä¸Šä¼ ç»„ä»¶çš„æäº¤åœ°å€å’Œæäº¤å‚æ•°ï¼š</li></ul><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1756ff6b95c94eb396da12d74641a511><p class=pgc-img-caption></p></div><p><br></p><ul><li>åœ¨el-uploadä¸Šä¼ æ–‡ä»¶ä¹‹å‰çš„é’©å­å‡½æ•°ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¯¹äºä½¿ç”¨MinIOä¸Šä¼ çš„æ“ä½œä¸è¿›è¡Œè·å–OSSä¸Šä¼ ç­–ç•¥çš„æ“ä½œï¼›</li></ul><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/dea8a8c7d6f44b9793de571e04324727><p class=pgc-img-caption></p></div><p><br></p><ul><li>æœ€ååœ¨el-uploadæ–‡ä»¶ä¸Šä¼ æˆåŠŸçš„é’©å­å‡½æ•°ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¯¹äºä½¿ç”¨MinIOä¸Šä¼ çš„æ“ä½œç›´æ¥ä»è¿”å›ç»“æœä¸­è·å–æ–‡ä»¶urlï¼›</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a4d22f5cfaba42528dc445cab4e4e424><p class=pgc-img-caption></p></div><p><br></p><ul><li>è¿è¡Œmall-admin-webé¡¹ç›®ï¼Œä½¿ç”¨å•†å“åˆ†ç±»ä¸‹çš„æ·»åŠ åŠŸèƒ½æ¥æµ‹è¯•ä¸‹æ–‡ä»¶ä¸Šä¼ ï¼Œå‘ç°å·²ç»å¯ä»¥æˆåŠŸä¸Šä¼ ï¼Œå›¾ç‰‡ä¹Ÿå·²ç»å¯ä»¥æ­£å¸¸å›æ˜¾ï¼š</li></ul><p><br></p><div class=pgc-img><img alt=å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¦‚ä½•ä¼˜é›…å®ç°æ–‡ä»¶å­˜å‚¨ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/cebdf99e824b42d3aadfe3f318798e12><p class=pgc-img-caption></p></div><p><br></p><p><strong>æœ€åï¼Œå°ç¼–æƒ³è¯´ï¼šæˆ‘æ˜¯ä¸€åpythonå¼€å‘å·¥ç¨‹å¸ˆï¼Œ</strong></p><p><strong>æ•´ç†äº†ä¸€å¥—æœ€æ–°çš„pythonç³»ç»Ÿå­¦ä¹ æ•™ç¨‹ï¼Œ</strong></p><p><strong>æƒ³è¦è¿™äº›èµ„æ–™çš„å¯ä»¥å…³æ³¨ç§ä¿¡å°ç¼–â€œ01â€å³å¯ï¼ˆå…è´¹åˆ†äº«å“¦ï¼‰å¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©</strong></p><p>æ–‡ç« è½¬è‡ªæ˜é‡‘</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å‰åç«¯','åˆ†ç¦»','é¡¹ç›®'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>