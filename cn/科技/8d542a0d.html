<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>超级好用的代码格式化工具AStyle(附带脚本) | 极客快訊</title><meta property="og:title" content="超级好用的代码格式化工具AStyle(附带脚本) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8d542a0d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8d542a0d.html><meta property="article:published_time" content="2020-11-14T21:00:59+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:59+08:00"><meta name=Keywords content><meta name=description content="超级好用的代码格式化工具AStyle(附带脚本)"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/8d542a0d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>超级好用的代码格式化工具AStyle(附带脚本)</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>代码格式化工具AStyle</h1><p>专业程序员与业余程序员之分主要在于一种态度，什么态度？<strong>专业态度。</strong>作为程序员，每当写下一行代时，要记得程序首先是给人读的，其次才是给机器读的。在日常的编码当中，大家经常要遵照一些设计规范，如命名规则、代码格式规范等等。每个人都有自己的代码书写风格，这对于团队来说是一件糟糕的事，不便于规范代码和阅读，所以一个合适的代码格式规范是必须的。今天介绍一款名为AStyle的代码格式化工具，Astyle是一个开源代码格式化工具，可以使大家在日常开发中非常方便的调整代码格式。AStyle是一款适用于C，C、C＃、Java和Objective‑C源代码的免费，快速，小型自动格式化程序。</p><h1 class=pgc-h-arrow-right>AStyle工具主要参数介绍</h1><p>命令行格式：</p><pre><code>astyle [选项]   SourceFilePath1 SourceFilePath2 SourceFilePath3 [。。。]</code></pre><p>不指定任何选项将导致默认的花括号样式，每个缩进4个空格以及格式无变化。AStyle程序遵循通常的GNU命令行语法。选项可以用两种不同的方式编写。</p><p><strong>长选项</strong></p><p>这些选项以“ <strong>-</strong> ” 开头，并且必须一次写入一个（例如：'-style=allman --indent=spaces = 4'）。</p><p><strong>短选项</strong></p><p>这些选项以单个“ <strong>-</strong> ” 开头，并且可以串联在一起（例如：“-bps4”与编写“ -b -p -s4”相同。）。</p><p><strong>--indent-switches/-S 缩进case标签</strong></p><pre><code>switch (foo){case 1:    a += 1;    break;case 2:{    a += 2;    break;}}becomes:switch (foo){    case 1:        a += 1;        break;    case 2:    {        a += 2;        break;    }}</code></pre><p><strong>--indent=spaces=4/-s4 缩进4个空格</strong></p><pre><code>void Foo() {....if (isBar1............&amp;&amp; isBar2) ........bar();}</code></pre><p><strong>--indent-namespaces/-N 缩进命名空间块</strong></p><pre><code>namespace foospace{class Foo{    public:        Foo();        virtual ~Foo();};}becomes:namespace foospace{    class Foo    {        public:            Foo();            virtual ~Foo();    };}</code></pre><p><strong>--style=ansi 大括号独占一行,上下对齐</strong></p><pre><code>int Foo(bool isBar){    if (isBar) {        bar();        return 1;    } else        return 0;}becomes:int Foo(bool isBar){    if (isBar)    {        bar();        return 1;    }    else        return 0;}</code></pre><p><strong>--attach-closing-while/-xV (while紧贴)</strong></p><pre><code>do{    bar();    ++x;}while x == 1;becomes:do{    bar();    ++x;} while x == 1</code></pre><p><strong>--indent-preproc-block/-xW 缩进#开头的处理语句</strong></p><pre><code>#ifdef _WIN32#include &lt;windows.h&gt;#ifndef NO_EXPORT#define EXPORT#endif#endifbecomes:#ifdef _WIN32    #include &lt;windows.h&gt;    #ifndef NO_EXPORT        #define EXPORT    #endif#endif</code></pre><p><strong>--indent-preproc-cond/-xw 将预处理器条件语句缩进到与源代码相同的级别</strong></p><p><br></p><pre><code>        isFoo = true;#ifdef UNICODE        text = wideBuff;#else        text = buff;#endifbecomes:				isFoo = true;        #ifdef UNICODE        text = wideBuff;        #else        text = buff;        #endif</code></pre><p><strong>--indent-col1-comments/-Y 注释也缩进</strong></p><pre><code>void Foo()\n&#34;{// comment    if (isFoo)        bar();}becomes:void Foo()\n&#34;{    // comment    if (isFoo)        bar();}</code></pre><p><strong>--pad-oper/-p 运算符周围插入空格</strong></p><pre><code>if (foo==2)    a=bar((b-c)*a,d--);becomes:if (foo == 2)    a = bar((b - c) * a, d--);</code></pre><p><strong>--pad-paren-out/-d 仅在外部的括号周围插入空格填充</strong></p><pre><code>if (isFoo((a+2), b))    bar(a, b);becomes:if (isFoo ( (a+2), b) )    bar (a, b);</code></pre><p><strong>--pad-header/-H 在标头（例如“ if”，“ for”，“ while” ...）和后面的括号之间插入空格</strong></p><pre><code>if(isFoo((a+2), b))    bar(a, b);becomes:if (isFoo((a+2), b))    bar(a, b);</code></pre><p>-<strong>-unpad-paren/-U 除去内部和外部的括号周围的多余空间。</strong></p><pre><code>if ( isFoo( ( a+2 ), b ) )    bar ( a, b );becomes:if(isFoo((a+2), b))    bar(a, b);</code></pre><p><strong>--align-pointer=name/-k3 指针符号紧贴名字</strong></p><pre><code>char* foo1;char &amp; foo2;string ^s1;becomes (with align-pointer=name):char *foo1;char &amp;foo2;string ^s1;</code></pre><p><strong>--max-code-length=#/-xC# 代码行最大长度</strong></p><p><strong>--break-after-logical/-xL 默认情况下，逻辑条件将放在新行的第一位。选项“ 逻辑后中断”将使逻辑条件置于最后一行的最后。没有最大代码长度，此选项无效。</strong></p><pre><code>if (thisVariable1 == thatVariable1 || thisVariable2 == thatVariable2 || thisVariable3 == thatVariable3)    bar();becomes:if (thisVariable1 == thatVariable1        || thisVariable2 == thatVariable2        || thisVariable3 == thatVariable3)    bar();becomes (with break‑after‑logical):if (thisVariable1 == thatVariable1 ||        thisVariable2 == thatVariable2 ||        thisVariable3 == thatVariable3)    bar();</code></pre><p><strong>--attach-return-type/-xf 返回类型紧贴符号名</strong></p><p><strong>--attach-return-type-decl/-xh 返回类型紧贴符号名(函数声明)</strong></p><pre><code>voidFoo(bool isFoo);becomes:void Foo(bool isFoo);</code></pre><p><strong>--add-braces/-j 在'if', 'for', 'while'等句块中只有一行也加入大括号</strong></p><pre><code>if (isFoo)    isFoo = false;becomes:if (isFoo) {    isFoo = false;}</code></pre><p><strong>--break-blocks/-f 在标题块周围填充空白行（例如“ if”，“ for”，“ while” ...）</strong></p><pre><code>isFoo = true;if (isFoo) {    bar();} else {    anotherBar();}isBar = false;becomes:isFoo = true;if (isFoo) {    bar();} else {    anotherBar();}isBar = false;</code></pre><p><strong>--convert-tabs/-c 将TAB符转化成空格,由转化参数指定,引号内的不转化</strong></p><p><strong>--recursive/-r 对于命令行中的每个目录，请递归处理所有子目录</strong></p><p><strong>--suffix=none / -n 不要保留原始文件的备份。格式化后将清除原始文件</strong></p><p><strong>--exclude=#### 指定要从处理中排除的文件或子目录####。</strong></p><h1 class=pgc-h-arrow-right>AStyle脚本工具</h1><p>把下面脚本放到源代码根目录即可格式化该目录以及子目录所有源文件。</p><pre><code>REM 批量将本目录中的所有C文件用Astyle进行代码美化操作REM 设置Astyle命令位置和参数@echo offset astyle=&#34;D:\AStyle_3.1_windows\AStyle\bin\AStyle.exe&#34;REM --indent-switches/-S 缩进case标签REM --indent=spaces=4/-s4 缩进4个空格REM --indent-namespaces/-N 缩进命名空间块REM --indent-continuation=4/-xt4 结尾后续本语句符号插入空格,默认为1,可取1~4REM --style=ansi 大括号独占一行,上下对齐REM --attach-closing-while/-xV (while紧贴)REM --indent-preproc-block/-xW 缩进#开头的处理语句REM --indent-preproc-cond/-xw  将预处理器条件语句缩进到与源代码相同的级别REM --indent-col1-comments/-Y 注释也缩进REM --pad-oper/-p 运算符周围插入空格REM --pad-comma/-xg 逗号间插入空格(--pad-oper中已有此效果)REM --pad-paren/-P 在内部和外部的括号周围插入空格REM --pad-paren-out/-d 仅在外部的括号周围插入空格填充REM --pad-paren-in/-D 括号里内插入空格REM --pad-header/-H 在标头（例如“ if”，“ for”，“ while” ...）和后面的括号之间插入空格REM --unpad-paren/-U 除去内部和外部的括号周围的多余空间。此选项可以与paren填充选项，pad-paren，pad-paren-out，pad-paren-in和pad-header一起使用REM --align-pointer=name/-k3 指针符号紧贴名字REM --max-code-length=#/-xC#  代码行最大长度REM --break-after-logical/-xL 默认情况下，逻辑条件将放在新行的第一位。选项“ 逻辑后中断”将使逻辑条件置于最后一行的最后。没有最大代码长度，此选项无效REM --attach-return-type/-xf 返回类型紧贴符号名REM --attach-return-type-decl/-xh 返回类型紧贴符号名(函数声明)REM --add-braces/-j 在&#39;if&#39;, &#39;for&#39;, &#39;while&#39;等句块中只有一行也加入大括号REM --convert-tabs/-c 将TAB符转化成空格,由转化参数指定,引号内的不转化REM --recursive/-r 对于命令行中的每个目录，请递归处理所有子目录REM --break-blocks/-f 在标题块周围填充空白行（例如“ if”，“ for”，“ while” ...）REM --suffix=none / -n 不要保留原始文件的备份。格式化后将清除原始文件REM --exclude=#### 指定要从处理中排除的文件或子目录####。REM 循环遍历目录for /r . %%a in (*.cpp;*.c) do %astyle% --style=ansi -S -s4 -xV -xW  -xw -Y -p -xg -d -H -U -k3  -xC80 -xL -xf -xh -j -c -f &#34;%%a&#34;for /r . %%a in (*.hpp;*.h) do %astyle% --style=ansi -S -s4 -xV -xW  -xw -Y -p -xg -d -H -U -k3  -xC80 -xL -xf -xh -j -c -f &#34;%%a&#34;REM 删除所有的astyle生成文件for /r . %%a in (*.orig) do del &#34;%%a&#34;pause</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'超级','代码','AStyle'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>