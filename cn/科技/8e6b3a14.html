<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>干货分享｜DevOps如何向DevSecOps切换？ | 极客快訊</title><meta property="og:title" content="干货分享｜DevOps如何向DevSecOps切换？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/d24e275598274b438ca14bc9bfed9430"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8e6b3a14.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8e6b3a14.html><meta property="article:published_time" content="2020-11-14T21:00:29+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:29+08:00"><meta name=Keywords content><meta name=description content="干货分享｜DevOps如何向DevSecOps切换？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/8e6b3a14.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>干货分享｜DevOps如何向DevSecOps切换？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=干货分享｜DevOps如何向DevSecOps切换？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d24e275598274b438ca14bc9bfed9430><p class=pgc-img-caption></p></div><p>点击添加图片描述（最多60个字）编辑</p><p><br></p><p><strong>编者按</strong></p><p>“本期小编为大家翻译美国信息安全协会北卡罗来纳州雷利分会Tony Rice的一篇关于安全软件研发实践的文章。本文讨论了以DevSecOps为契机，以一致的安全方式建立基础架构，以及在软件开发生命周期中更早和更多地发现安全漏洞。即从DevOps向DevSecOps研发实践切换过程中的注意事项”。</p><p><strong>摘要</strong></p><p>DevOps为自动化安全检查提供了无限可能，可以在部署之前以及以最低修复成本的尽早发现漏洞。 它还提供了与开发人员和运营人员更紧密合作的机会。 但是，在将DevOps转换为DevSecOps之前，必须暂停自动化功能的构建管道，以防止有关发现的漏洞的信息像凭据泄漏那样被泄漏。</p><p>当安全专家听到“ DevOps”一词时，就会想到自动安全检查。漏洞的愿景很早就显现出来并且经常在他们的脑海中飞舞，迅速将DevOps转变为DevSecOps。我们梦想着敏捷开发方法能够为开发人员和运营人员提供更紧密的合作伙伴关系：</p><ul><li>帮助开发人员阻止OWASP Top 101示例进入代码库。</li><li>指导操作人员实现“按代码提供基础结构”的一致性。</li><li>消除人工制作（并且再也没有修补）的实例带来的漏洞。</li></ul><p>工具供应商谈论了如何将其带有预包装测试套件的工具轻松集成到现有管道中。如果将所有内容迁移到其DevOps研发实践则更加容易。 监控研发进度数据仪表板如此之多，每个仪表板都提供了向管理层取得进展的证据，管理层渴望了解投资的回报。DevSecOps能否最终实现将漏洞发现转移到更便宜更容易的开发流程的承诺？随着交付之间的时间从几个月缩短到几个小时，DevSecOps必须启用这些功能甚至更多。</p><p>​</p><p><strong>安全专家，自愈</strong></p><p>在急于将动态应用程序安全测试套件和代码扫描器（价格昂贵但使用很少的代码）集成到成熟的DevOps管道中之前，请考虑DevOps自身引入威胁的情况。DevOps管道中的功能测试和其他测试描述了该产品无法正常工作的地方。安全测试则描述了该产品容易受到攻击的地方。这是应该在适当安全的环境中生成，存储和传输的敏感信息。粗心地实施DevSecOps可能会扩大本已脆弱的攻击面。您的DevOps管道不是一天就能建立的。同样，DevSecOps也不会。那么从哪里开始呢？首先，使用与开发团队和运营团队相同的原则来保护DevOps管道本身。基本的持续集成/持续部署（CI/CD）管道由各个工具实现的段组成，每个工具都有其自己的凭据集：</p><ul><li>源代码存储库：在开发团队将产品向前推进时跟踪变化，例如Git， Bitbucket，Subversion，SourceForge，CodeCommit，Cloud Source等。</li><li>Artifact存储库：用于存储Artifactory，Archiva，Nexus等这些构建的成果。</li><li>部署主机：用于部署产品（例如云计算服务）的位置例如Amazon Web Services（AWS）EC2，Azure虚拟机或Google Cloud Platform（GCP）Compute，或者可能是无服务器服务，例如AWS Lambda，Azure Functions或GCP FAAS；容器;甚至是本地主机。</li><li>自动化平台：例如Jenkins，Bamboo，CircleCI，GitLab，CodeBuild等，使事物在应有的情况下通过管道运行，并在不应有的情况下停止进度。</li></ul><p>还包括其它许多环境：</p><ul><li>诸如Slack，HipChat，WebEx Teams等通信工具，这些工具使开发人员能够进行协作并通过机器人来确保DevOps结果的可见性。</li><li>工作流和缺陷管理工具，例如Jira，Trello，Bugzilla等。</li></ul><p>首先查看该工具管道中的耦合。它们是安全的吗？还是您的辛苦工作有可能会落到了坏人手中？像Jenkins这样的自动化平台是该系统的重要中心平台，也是开始确保CI/CD努力的好地方。如果您的CI/CD管道是从开发人员实验中发展而来的，随着时间的推移它已成为关键的生产资源，那么您可能会在整个配置过程中找到开发人员个人用户名和密码。当该人更改密码时，这可能导致管道失败。很难记住那些凭据已被使用过的所有位置。您可能会在管道中的每个工具中发现一个开发人员帐户。这些人对机器的凭证应替换为定期轮换的机器对机器。尽可能使用访问令牌，而不要使用用户标识和密码。如果您选择的工具不支持访问令牌，那么这是继续查看其他工具的好契机。但是，随着CI/CD管道的数量激增，您很快就会发现管理所有这些机密将变得繁琐而危险。</p><p><br></p><p><strong>停止检查凭证</strong></p><p>对于DevOps中最常见的问题之一，您无需再通过GitHub.com公开获得的文件了：将配置文件和包含机密内容的源代码以纯文本格式存储在源代码存储库中。</p><p><br></p><div class=pgc-img><img alt=干货分享｜DevOps如何向DevSecOps切换？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/75c4f11044814547868bf39f821ff8b2><p class=pgc-img-caption></p></div><p>当有人通过检查访问管道中每个工具所需的一切（甚至是应用程序所在的目标主机）变得如此简单时，攻击者就不必费心进行中间人攻击来窃取部署凭据。使用字符串aws_access_key_id filename：*.json对在GitHub.com上公开可见的json文件进行代码搜索会产生数千个结果。您可以使用shhgit观看人们每隔几秒钟就几乎每秒钟公开一次此错误。Paul Prince的开放源代码项目几乎实时将其检入GitHub时会标记秘密和敏感文件。在提交注释中进行类似的搜索，其中包含短语“删除密码”，导致发现并纠正错误的开发人员的例子一页又一页地出现。但请记住，互联网永远存在。泄露的秘密仍保留在存储库的历史记录中，以供所有人查看。如果这样泄露了机密，请更改密码，撤销令牌。更好的是，通过完全消除使用硬编码凭据的可能性，防止在DevOps管道中出现这种容易犯的错误。</p><p><br></p><p><strong>现在停止管理凭据</strong></p><p>像HashiCorp的Vault，Confidant，Keywhiz等之类的机密管理工具，或者由AWS，Docker或Google Cloud等云服务提供商提供的类似服务，都提供了不同的方法来帮助解决随着DevOps成为常态而不断增长的机密数据问题。这些机密管理工具不仅通过短期令牌以编程方式实施机密来减少攻击面，而且还负责生命周期管理，使您免于手动旋转密码或密钥的耗时且容易出错的琐事。</p><p>保管箱提供了一个保存加密真实信息来源，而不是在Jekins Master中传播这些机密信息。它本身支持此处提到的平台（AWS，Azure和GCP）所使用的每种身份验证方法，以及将来可能需要的某些身份验证方法，例如Kubernetes，GitHub等。您可以在Jenkins Grand中控制大部分权限，以及支持Vault等机密代理的插件的Central Station。</p><p><br></p><p><strong>基于角色的访问控制</strong></p><p>您可能已经对源代码进行了访问控制，甚至可能执行角色来限制分支之间的交互并将敏感区域锁定到一组受信任的开发人员。这样可以保护源代码，但不要忘记为二进制文件提供类似的保护。它们也是知识产权，由于反编译器和其他反向工程工具（例如NSA的Ghidra），它们与源代码的差别不大。不要向DevOps的机器对机器帐户提供不必要的访问权限。</p><p>开箱即用，大多数工具，尤其是Artifactory等工件存储库，对您的业务一无所知。默认配置通常旨在使工具能够快速启动和运行，但这不是受到鼓励良好的安全实践。使用新的CI/CD工具的第一步应该是配置访问权限，以反映开发工作流程以及与之交互的用户和系统。工件存储库应至少具有三个角色：</p><ul><li>为用户和自动化帐户提供的有限特权，用于获取工件以供在构建和编排任务中使用，为只读。</li><li>将破坏性功能（例如删除工件）的特权限制为单独的管理角色。</li><li>也是用户的管理员应使用单独的帐户与这些系统进行交互，以防止代价高昂的错误。</li></ul><p>最后，记录所有内容。DevSecOps将许多独特的自动化工具结合在一起。 事情会出错，并且没有详细的日志，无法找出贡献了哪些工具以及如何难以实现。</p><p><br></p><p><strong>现在您可以使用DevSecOps</strong></p><p>现在，DevOps管道不再泄漏源代码，删除整个内容所需的凭据，该管道已经足够安全，可以用来提高在那里构建的产品的安全性。多年来已经成功应用于向连续集成管道中添加功能测试和其他测试的模式，也可以通过使用安全检查来成功应用：不要试图沸腾。取而代之的是，通过a）运行它们所花费的时间，以及b）它们产生假阳性的趋势来组织所有已经通过您的大脑的测试。将那些快速运行的，假阳性率低的管道放置在管道中，以在每次代码检查时运行。这些是您的安全性冒烟测试，这是最基本的健全性测试。他们会遇到一些简单的问题，这些问题只会浪费开发人员，质量检查人员以及现在的安全人员，而这些人员的工作并没有早日停下来。确定测试是否属于此频繁运行的测试的一种方法：如果您对它的信任不足以自动通知开发人员或发现缺陷，则该测试不属于该频繁运行的测试。像动态应用程序安全性扫描这样运行时间较长的测试或产生误报的测试仍可提供价值的信息，但应在单独的管道中定期进行，也许每周一次。对于那些长期运行，不太可靠的测试，请找出可以快速运行的测试。最大限度地提高DevSecOps提供的价值的关键是继续发展运行的测试以及何时进行的测试。例如，静态安全扫描速度很快，但因产生大量误报而臭名昭著。但是其中一些测试是相当可靠的，并且仅在那种情况下才可行，例如那些在源代码中找到硬编码秘密的测试。剔除那些高价值，低噪声的测试，然后将其移入管道，使它们可以更频繁地运行。</p><p><br></p><p><strong>供应商工具的一部分，但不是完整的解决方案</strong></p><p>工具供应商谈论了他们所销售工具中可用的大量测试，因为这表明了对其产品进行投资的价值。但是，该工具仅在对您的产品，环境或客户很熟悉的情况下才可帮助广泛的客户。 在每个测试上启用每个选项都会产生比价值更大的噪音，导致开发人员忽略测试。</p><p>首先使用OWASP Zed攻击代理（ZAP）之类的免费工具开始动态扫描Web应用程序项目。但必须有选择地启用测试。 当您发现可以提供价值的测试时，请将它们添加到DevSecOps管道中，该管道基于开发人员，运营工程师或将对这些结果采取行动的任何人必须提供多少帮助而有意义。 某些测试应在每次代码检入时运行，每周进行一次，某些仅在部署之前进行。</p><p>"意外泄漏到公共源代码存储库的凭据应被吊销和更改。 最好在Vault这样的秘密商店中管理它们。"</p><p><br></p><p><strong>你无法改善你无法衡量的东西</strong></p><p>现在，您已经在运行安全测试，不要让通过/失败作为您收集的唯一指标。 使用这些度量不仅可以识别出代码库中引入的问题，还可以指示团队需要帮助的地方。 当静态代码分析按常规查找存储在源代码中的凭据和其他机密（并检入存储库中）时，可以以此为契机，向那些开发人员提供使用凭据的更安全方式的教育，也许也可以将Vault等机密代理扩展为标准应用程序。 通过在连续结果中查找模式，可以从这些测试中获得除单个结果之外的附加值。 此外，当扫描中发现的漏洞与缺陷相关时，可以使用后续扫描来验证开发人员提交的修复程序是否确实解决了该漏洞。</p><p><br></p><p><strong>仓促上马的DevSecOps是不安全的DevSecOps</strong></p><p>DevSecOps提供了巨大的机会来加速软件开发生命周期，同时实现一致性，持续改进基础架构的部署。 但匆匆实施或过早地进行半成熟，甚至实验性DevOps实施也可能会暴露您的源代码，基础结构和客户数据。</p><p><br></p><p>注：本文转载自公众号：网络安全与网络战，作者rekingshui，作品版权归原著作者所有。</p><p><br></p><p><strong>关于原作者</strong></p><p>原作者Tony Rice， CISSP， 思科的DevSecOps架构师。他经常谈到如何将应用程序安全性有效地集成到DevOps中，并利用其生成的数据发现漏洞，生成符合多种标准的证据。可以通过trice@cisco.com与他联系。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'干货','DevOps','DevSecOps'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>