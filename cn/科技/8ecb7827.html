<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>关于幂律分布，你还应该知道如何用代码实现！｜集智百科 | 极客快訊</title><meta property="og:title" content="关于幂律分布，你还应该知道如何用代码实现！｜集智百科 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/R95SOuQ8XhFLEQ"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8ecb7827.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8ecb7827.html><meta property="article:published_time" content="2020-10-29T21:11:12+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:12+08:00"><meta name=Keywords content><meta name=description content="关于幂律分布，你还应该知道如何用代码实现！｜集智百科"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/8ecb7827.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>关于幂律分布，你还应该知道如何用代码实现！｜集智百科</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SOuQ8XhFLEQ><p><strong>导语</strong></p><p>今天我们继续学习幂律分布的基本概念——幂律概率分布，以及如何用代码实现幂律分布。内容来自集智百科，集智百科是复杂系统领域的百科全书，涵盖复杂系统领域的基本概念（持续完善中）。</p><blockquote><p><strong>我们正在组织撰写翻译相应的维基词条，并附上代码实现。想要自己创建词条，一起贡献知识的小伙伴们可以通过链接报名哦。</strong>点击「编辑」，做些改变，按下「保存」，你将影响世界！</p></blockquote><p><strong>幂律概率分布</strong></p><p><strong>（Power-law probability distributions）</strong></p><p>广义上，幂律概率分布是一个密度函数（或离散情况下的概率质量函数）具有以下形式的分布： 对于较大的<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R95SOuh5Dqvcf8>，<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SOuq9eOOneb>，其中<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SOvNHfqTmQb>且是一个慢变函数(Slowly varying function)，对于任何正因子<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SOvZ2gC1Gah>，它都满足<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R95SOxpDfbkKOX>的这个属性来自于<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SOxy54vDZOk>渐进的标度不变性。因此，仅控制左尾的形状和有限范围。如果是常量因子函数，并且我们有一个幂律适用于所有的<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SOyhBYyLD0B>值，在许多情况下，可以很容易地依据幂律假设出一个下限。结合这两种情况，当<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SOyo8kvxfO2>是一个连续变量，幂律有以下形式：<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SOyv1UPgQQy></p><p>其中，</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP0aJEnxPhV><p>是<strong>标准化常量因子</strong></p><p>下面我们来讨论这个分布的性质。 首先，它的矩可表示为：</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SP0mBhb07AD><p>当<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP0xDHmiFay>，定义是完备的； 当<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP172jPIvSM>，发散： 当<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SP2GEMoXh9N>，均值与高阶矩都是无穷大； 当<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP4H7IjxjLx>，均值存在，但方差和高阶矩都是无穷大。 如果从这种分布中抽取有限样本，意味着中心矩估计永远不会收敛——并且随着数据的增多，他们还有增大的趋势。<strong>这种幂律概率分布又被称为帕累托型分布，具有帕累托尾部特征的分布，或是具有规则变化的分布。</strong></p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP4bAwaaRiY><p><strong>帕累托型分布 | 来源：https://www.google.com</strong></p><p>一种不满足上面的一般形式的修改，即<strong>指数截止幂律分布。</strong></p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP4mF3WzZsq><p>在这种分布中，指数衰减项<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP4wJIL7uih>最终会在较大的处超过正常的幂律分布。这种分布无法成比例缩放，因此并不是幂律;不过，它会在截止前的有限区域内近似地缩放。（注意，一般的幂律分布是这种分布的简单形式，即<img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SP5B4U2kOiw>的指数截止幂律分布。）这种分布是渐近幂律分布的常见替代方法，因为它考虑了有限大小的影响。</p><p><strong>Tweedie分布是一族统计模型，其特征是基于可加（additive）与可再生（reproductive）卷积以及标度变换（scale transformation）的闭包（closure）。</strong>因此，这些模型都表达了方差和均值之间的幂律关系。这些模型作为数学收敛的焦点，类似于正态分布在中心极限定理中所扮演的角色。这种收敛效应解释了为什么在自然过程中, 方差-平均幂律表现得如此广泛, 就像泰勒在生态学中的定律和在物理学中的涨落标度。还可以证明，使用扩展箱（ expanding bins） 的方法时，这种方差- 均值幂律分布（variance-to-mean power law）意味着存在1 / f噪声，而1/ f噪声可能是由于Tweedie收敛效应（Tweedie convergence effect）而产生的。</p><p><strong>图形验证法</strong></p><p><strong>检验幂律概率分布</strong></p><p>虽然人们已经提出了更成熟更稳健的方法，但通过随机样本检验幂律概率分布的最常用的图形方法还是帕累托双分位图（Pareto quantile-quantile plots ）（或帕累托Q-Q图），平均剩余寿命图（mean residual life plot）和双对数图（Paretoquantile-quantile plots）。</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R95SP7VHI0eKjr><p><strong>（log-log图）</strong></p><p><strong>在双对数图上呈现直线是必要的，但并没有足够的证据证明他们的幂律关系，直线的斜率就对应于幂律指数。</strong></p><p><strong>另一种更强大的图形检验法是</strong><strong>利用bundles of residual quantile functions 残余分位函数束 。（注意，幂律分布也称为帕累托分布。）</strong>这里假设从概率分布中获得随机样本，并且我们想知道分布的尾部是否遵循幂律（换句话说，我们想知道分布是否有“帕累托尾”）。此处随机样本也被称为“数据”。</p><p><strong>帕累托Q-Q图</strong>是这样绘制的：它将取对数后（样本）数据的分位数与取均值为1的指数分布对应的分位数（或标准帕累托分布的位数）进行比较。如果得到的散点图表现是“渐近收敛”为直线，就应该怀疑其服从幂律分布。帕累托 Q-Q图的局限是它在尾部指数（也称为帕累托指数）接近于0时表现不佳，因为帕累托Q-Q图难以检验尾部是缓慢变化的分布。</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SP7qInr3UVY><p><strong>帕累托分布 | 来源：https://www.google.com</strong></p><p><strong>另一种检验幂律概率分布的方法是</strong><strong>平均剩余寿命图</strong>，它包含以下步骤：首先对数据取对数，然后将高于第 i 阶统计量的数据平均值与第 i 阶统计量进行比较绘制，从i = 1, ..., n,其中n是随机样本容量。如果绘制出的散点图走势呈现为一条“稳定”的水平直线，那么应该考虑其服从幂律分布。但由于平均剩余寿命图对异常值非常敏感（它并不稳健），所以它通常会产生一些难以解释的图形; 而这些图形通常被称为 Hill horror plots 。</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R95SP7z5DLUXbL><p><strong>Hill horror plots | 来源：https://www.google.com</strong></p><p><strong>双对数图是使用随机样本以图形方式检验尾部分布的另一种方式。</strong>使用这个方法必须要谨慎，因为双对数图中呈现直线对幂律概率分布是必要不充分条件，许多非幂律分布在双对数图上也显示为直线。这个方法是将特定数在该分布中的概率估计量的对数 | 对比这个数的对数 | 进行绘图。通常，此估计量是该数据在数据集中出现的次数的比例。如果图中的点在x较大时倾向于“收敛”为直线，则可得出结论，该分布具有“幂律尾”（power-law tail）。目前这些类型的绘图的应用示例已经发表。但这种方法的局限是，需要大量的数据才能使结果可靠。此外，它仅适用于离散（或分组）数据。</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R95SP88Ajsbry2><p><strong>log-log Graph 双对数曲线图 | 来源：https://www.google.com</strong></p><p>不过，目前已经提出了使用随机样本检验幂律概率分布的另一种图形方法。<strong>该方法包括绘制对数变换样本的束，</strong>是最早提出使用随机样本探索矩的存在和矩生成函数的工具，基于残差分位函数（RQF）（也称为残差百分位函数） ，它提供了许多众所周知的概率分布的尾部行为的完整表征，包括幂律分布与其他类型的重尾，甚至非重尾分布的分布。这种方法绘制的图形没有上面提到的平均剩余寿命图、双对数图和帕累托 Q-Q图的缺点，它们对异常值很敏感，能够直观地检验具有小值的幂律，并且不适用于分析大量数据。此外，其他分布类型的尾部也可以用这个方法观察检验。</p><p>绘制幂律分布</p><p><strong>（Plotting power-law distributions）</strong></p><p>一般来说，幂律分布是在双对数座标轴上绘制的，强调右尾部分。最简便直观的方法是通过<strong>（互补）累积分布函数（cumulativedistribution function，缩写为cdf）</strong>说明：</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R95SP8GAqaYy8Q><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SPBJDBUt5Ot><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SPBUAdWc9ii><p><strong>累积分布函数 | 来源：https://www.google.com</strong></p><p><strong>注意，</strong><strong>cdf也是幂律函数，只是它的标度指数较小。</strong>从数据处理角度，cdf的等价形式是<strong>rank-frequency 分布</strong>，即先按升序排列的观察值，再将它们与矢量</p><img alt=关于幂律分布，你还应该知道如何用代码实现！｜集智百科 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R95SPBf2UuQvUz><p>对应。</p><p>尽管便于记录数据，抑或是便于拟合平滑概率密度（质量）函数，但这些方法在数据表示中引入了隐式偏差，因此应该避免。另一方面，所述的cdf法对处理这些隐式偏差更稳健（但并非没有偏误）并且保留了在双对数图形上的线性特征。</p><p>虽然在同时用线性最小二乘法拟合幂律时，使用cdf绘制优于pdf（概率密度函数），但其不可避免地在数学上有不准确性。因此，在估计幂律分布的指数时，建议使用最大似然估计。</p><p>从经验数据估计指数</p><p><strong>有许多方法可以估算幂律尾部的标度指数值，但并非所有方法都能产生无偏且一致的结果。</strong>一些最可靠的技术通常基于最大似然估计。替代方法通常基于双对数概率，双对数累积分布函数或对数分组数据进行线性回归，但是，应该避免这些方法，因为它们都可能导致对标度系数的具有显著偏误的估计。</p><p>关于这些方法，以及能够使用它们的条件，可以进一步发现，这篇文章全面而详细地提供了可用的代码（Matlab、Python、R和C++）来评估和测试幂律分布的过程。</p><p>详细代码如下：</p><pre><pre> <p># coding: utf-8</p><p># # 用numpy生成0，1之间的幂律分布</p><p>#</p><p># ### 概率密度函数为</p><p># f(x) = a*x^(a-1)</p><p>a = 0.4</p><p># 采样数量</p><p>samples = 10000</p><p>s = np.random.power(a, samples)</p><p># 绘图展示结果</p><p>import matplotlib.pyplot as plt</p><p>count, bins, ignored = plt.hist(s, bins=50)</p><p>x = np.linspace(0, 1, 100)</p><p>y = a*x**(a-1.)</p><p>normed_y = samples*np.diff(bins)[0]*y</p><p>plt.plot(x, normed_y)</p><p>plt.show</p><p># # 使用原生方法生成0，1之间的幂律分布</p><p>import math</p><p># 分布函数的反函数</p><p>def rev(x,a):</p><p>return math.exp(math.log(x) / a)</p><p># 生成分布</p><p>s1 = </p><p>for i in range(samples):</p><p>s1.append(rev(np.random.uniform(0,1),a))</p><p># 绘图</p><p>count, bins, ignored = plt.hist(s1,bins=50)</p><p>x = np.linspace(0, 1, 100)</p><p>y = a*x**(a-1.)</p><p>normed_y = samples*np.diff(bins)[0]*y</p><p>plt.plot(x, normed_y)</p><p>plt.show</p><p># # 线性拟合生成结果 </p><p># 统计不同区间的数据数量</p><p>divide_num = 100</p><p>ys = np.zeros(divide_num)</p><p>xs = np.linspace(0,1,divide_num)</p><p>for i in range(len(s)):</p><p>ys[int(s[i] * 100)] += 1</p><p># 使用sklearn包中的回归工具</p><p>from sklearn import linear_model</p><p># 回归</p><p>x_log = np.log(xs)</p><p>y_log = np.log(ys)</p><p>#线性拟合数据准备</p><p>X_para=</p><p>Y_para=</p><p>for x ,y in zip(x_log[1:],y_log[1:]):</p><p>X_para.append([float(x)])</p><p>Y_para.append(float(y))</p><p># 使用sklearn的线性拟合函数进行拟合</p><p>regr = linear_model.LinearRegression</p><p>regr.fit(X_para, Y_para)</p><p>#</p><p>plt.title("fit the log data")</p><p>plt.scatter(x_log,y_log,color ="black")</p><p>plt.plot(X_para, regr.predict(X_para),color='blue',linewidth=3)</p><p>plt.show</p></pre></pre><p><strong>通过R函数估计指数, 并绘制双对数数据拟合线：</strong></p><p>详细代码如下：</p><pre><pre><pre><p>pwrdist &lt;- function(u,...) {</p></pre><p># u is vector of event counts, e.g. how many</p><p># crimes was a given perpetrator charged for by the police</p><p>fx &lt;- table(u)</p><p>i &lt;- as.numeric(names(fx))</p><p>y &lt;- rep(0,max(i))</p><p>y[i] &lt;- fx</p><p>m0 &lt;- glm(y~log(1:max(i)),family=quasipoisson)</p><p>print(summary(m0))</p><p>sub &lt;-</p><p>paste("s=",round(m0$coef[2],2),"lambda=",sum(u),"/",length(u))</p><p>plot(i,fx,log="xy",xlab="x",sub=sub,ylab="counts",...)</p><p>grid</p><p>lines(1:max(i),(fitted(m0)),type="b")</p><p>return(m0)</p><p>}</p></pre></pre><p>如果你有更好的代码，欢迎贡献到集智百科上，或者联系我们，成为我们的志愿者！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'关于','幂律分','还应'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>