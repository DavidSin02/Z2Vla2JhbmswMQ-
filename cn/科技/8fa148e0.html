<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ | æå®¢å¿«è¨Š</title><meta property="og:title" content="åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/SDAIrbpCGdpuDg"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8fa148e0.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8fa148e0.html><meta property="article:published_time" content="2020-10-29T21:09:58+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:58+08:00"><meta name=Keywords content><meta name=description content="åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/8fa148e0.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>Flink ä»å…¥é—¨åˆ°ç²¾é€š ç³»åˆ—æ–‡ç« </p><p></p><h1 toutiao-origin=h3>æ¦‚è¿°</h1><p>ElasticSearchä½œä¸ºä¸€ä¸ªåŸºäºLuceneçš„æœç´¢å¼•æ“è¢«å¹¿æ³›åº”ç”¨äºå„ç§åº”ç”¨ç³»ç»Ÿï¼Œæ¯”å¦‚ç”µå•†ã€æ–°é—»ç±»ã€å’¨è¯¢ç±»ç½‘ç«™ã€‚åœ¨ä½¿ç”¨ElasticSearchå¼€å‘åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªéå¸¸é‡è¦çš„è¿‡ç¨‹æ˜¯å°†æ•°æ®å¯¼å…¥åˆ°ElasticSearchç´¢å¼•ä¸­å»ºç«‹æ–‡æ¡£ã€‚åœ¨ä¸€å¼€å§‹ç³»ç»Ÿè§„æ¨¡æ¯”è¾ƒå°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨logstashæ¥åŒæ­¥ç´¢å¼•ã€‚logstashçš„å¥½å¤„æ˜¯å¼€æ–¹é‡å°‘ï¼Œåªè¦è¿›è¡Œç¼–å†™ç®€å•çš„ç´¢å¼•æ¨¡æ¿å’ŒåŒæ­¥sqlï¼Œå°±èƒ½å¿«é€Ÿæ­å»ºç´¢å¼•åŒæ­¥ç¨‹åºã€‚ä½†æ˜¯éšç€åº”ç”¨æ•°æ®è§„æ¨¡çš„å˜å¤§ï¼Œç´¢å¼•å˜åŒ–å˜å¾—éå¸¸é¢‘ç¹ã€‚logstashçš„ç¼ºç‚¹ä¹Ÿéšç€æš´éœ²ï¼ŒåŒ…æ‹¬ï¼š</p><p>ï¼ˆ1ï¼‰ä¸æ”¯æŒåˆ é™¤ï¼Œåªèƒ½é€šè¿‡ä¿®æ”¹å­—æ®µå±æ€§è½¯åˆ é™¤ï¼Œéšç€åº”ç”¨ä½¿ç”¨æ—¶é—´çš„å¢é•¿ï¼ŒElasticSearchä¸­ä¼šç•™å­˜å¤§é‡çš„æ— ç”¨æ•°æ®ï¼Œæ‹–æ…¢æœç´¢é€Ÿåº¦ã€‚ï¼ˆ2ï¼‰sqlåˆ†é¡µæ•ˆç‡ä½ï¼ŒsqlæŸ¥è¯¢æ…¢ã€‚logstashçš„åˆ†é¡µé€»è¾‘æ˜¯å…ˆæœ‰ä¸€ä¸ªå¤§çš„å­æŸ¥è¯¢ï¼Œç„¶åå†ä»å­æŸ¥è¯¢ä¸­åˆ†é¡µè·å–æ•°æ®ï¼Œå› æ­¤æ•ˆç‡ä½ä¸‹ï¼Œå½“æ•°æ®åº“æ•°æ®é‡å¤§æ—¶ï¼Œä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢å°±éœ€è¦å‡ ç™¾ç§’ã€‚åŒæ­¥å‡ åƒä¸‡æ•°æ®å¯èƒ½éœ€è¦1å¤©æ—¶é—´ã€‚</p><p>å› æ­¤æˆ‘ä»¬å†³å®šæ”¾å¼ƒä½¿ç”¨logstashï¼Œè€Œæ”¹ç”¨ä½¿ç”¨canalæ¥æ­å»ºåŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ã€‚</p><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>ç³»ç»Ÿæ¶æ„è®¾è®¡</strong></h1><img alt=åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/SDAIrbpCGdpuDg><p>å¦‚å›¾æ‰€ç¤ºï¼Œç´¢å¼•åŒæ­¥ç³»ç»Ÿç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸‹é¢åˆ†ç‚¹ä»‹ç»ã€‚</p><p>ï¼ˆ1ï¼‰æ•°æ®åº“</p><p>åŸå§‹æ•°æ®æ•°æ®åº“</p><p>ï¼ˆ2ï¼‰Canal</p><p>Canalæ˜¯é˜¿é‡Œäº‘å¼€æºçš„MySqlæ•°æ®åº“å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹å·¥å…·ã€‚å®ƒçš„å®ç°åŸç†æ˜¯å°†è‡ªå·±ä¼ªè£…ä¸ºä¸€ä¸ªMySQL slaveï¼Œå‘MySql ma sterå‘é€dumpåè®®ï¼›MySQL masteræ”¶åˆ°dumpè¯·æ±‚ï¼Œå¼€å§‹æ¨é€binary logç»™slaveï¼Œcanalè§£æbinary logå¯¹è±¡ã€‚</p><p>ï¼ˆ3ï¼‰Canal Client</p><p>Canal Clientæ˜¯è‡ªå·±å®ç°çš„ç¨‹åºï¼Œé€šè¿‡ä»Canal Serverä¸­è·å–ç»è¿‡Canalè§£æä¹‹åçš„æ•°æ®åº“binlogæ—¥å¿—ï¼Œåšç›¸åº”çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚åœ¨æœ¬æ–‡ä»‹ç»çš„åŸºäºCDCçš„ç´¢å¼•åŒæ­¥ç³»ç»Ÿä¸­ï¼ŒCanal Clientè®¢é˜…æœç´¢ç›¸å…³çš„æ•°æ®åº“è¡¨çš„binlogæ—¥å¿—ï¼Œå¦‚æœè·Ÿæ•°æ®æœç´¢ç›¸å…³çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±å‘Rabbitå‘ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨æ˜æ•°æ®å‘ç”Ÿå˜åŒ–äº†ï¼Œé€šçŸ¥åŒæ­¥Workerä»MySQLåŒæ­¥æ•°æ®åˆ°ESã€‚</p><p>ï¼ˆ4ï¼‰RabbitMQ</p><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥é€‰ç”¨Kafakaç­‰å…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ ¹æ®å…·ä½“ä¸šåŠ¡ç¡®å®šã€‚</p><p>ï¼ˆ5ï¼‰ç´¢å¼•åŒæ­¥Worker</p><p>Workerä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¶ˆè´¹æ•°æ®ï¼Œæ ¹æ®æ¶ˆæ¯ä»MySQLè·å–ç›¸åº”çš„æ•°æ®å¹¶åŒæ­¥åˆ°ElasticSearchä¸­ã€‚</p><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>Canal Clientå®ç°</strong></h1><p>Canal Clientä»Canal Serverä¸­è·å–binlogæ—¥å¿—ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œå¤„ç†ã€‚ä»¥ä¸‹é€šè¿‡ä¸€äº›å…³é”®ä»£ç ä»‹ç»Canal Clientçš„å®ç°ã€‚</p><p>ï¼ˆ1ï¼‰åœ¨pomä¸­æ·»åŠ Canal clientçš„ä¾èµ–ã€‚</p><pre><code>&lt;dependency&gt;<br>&lt;groupId&gt;com.alibaba.otter&lt;/groupId&gt;<br>&lt;artifactId&gt;canal.client&lt;/artifactId&gt;<br>&lt;version&gt;1.1.0&lt;/version&gt;<br>&lt;/dependency&gt;<br></code></pre><p>ï¼ˆ2ï¼‰åˆå§‹åŒ–Canalè¿æ¥</p><p>CanalConfigåŒ…å«äº†Canalçš„é…ç½®ä¿¡æ¯ã€‚CanalConnectorä¸ºcanal-clientåŒ…ä¸­çš„ç±»ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªç±»æ¥è¿æ¥serverï¼Œè·å–binlogï¼Œå…³é—­serverã€‚è¯¥æœåŠ¡åŸºäºSpringBootã€‚å› æ­¤initä¼šåœ¨CanalClientInitializer beanè¢«åˆ›å»ºæ—¶è¢«è°ƒç”¨ï¼ŒpreDestoryä¼šåœ¨æœåŠ¡å…³é—­ï¼ŒCanClientInitializerè¢«é”€æ¯æ—¶è¢«è°ƒç”¨ã€‚</p><pre><code>@Component<br>@Slf4j<br>public class CanalClientInitializer {<br><br><br>CanalConfig canalConfig;<br><br>CanalConnector connector;<br><br>CanalDataProcessor canalDataProcessor;<br><br><br>public CanalClientInitializer(@Autowired CanalConfig canalConfig, @Autowired CanalDataProcessor canalDataProcessor) {<br>this.canalConfig = canalConfig;<br>this.canalDataProcessor = canalDataProcessor;<br>}<br><br><br>@PostConstruct<br>public void init throws InterruptedException {<br>connector = CanalConnectors.newSingleConnector(new InetSocketAddress(canalConfig.getIp, canalConfig.getPort), canalConfig.getDestination, "", "");<br>//å»ºç«‹è¿æ¥<br>connector.connect;<br>//è®¢é˜…ç›¸å…³çš„è¡¨<br>connector.subscribe(canalConfig.getSyncTable);<br>canalDataProcessor.process(connector);<br>}<br><br><br>@PreDestroy<br>public void<strong class=highlight-text toutiao-origin=span>preDestroy</strong> {<br>log.info("stop the canal client");<br>canalDataProcessor.stopProcess;<br>}<br><br>}<br></code></pre><p>ï¼ˆ3ï¼‰CanalDataProcessorè·å–å¹¶å¤„ç†binlog</p><pre><code>@Component<br>@Slf4j<br>public class CanalDataProcessor {<br><br><br>boolean isRunning;<br><br>RabbitTemplate rabbitTemplate;<br><br>TableChangeProcessor tableChangeProcessor;<br><br>public CanalDataProcessor(@Autowired RabbitTemplate rabbitTemplate, @Autowired TableChangeProcessor processor) {<br>this.rabbitTemplate = rabbitTemplate;<br>this.tableChangeProcessor = processor;<br>}<br><br>@Async<br>public void process(CanalConnector connector) throws InterruptedException {<br>isRunning = true;<br>while (isRunning) {<br>try {<br>//è·å–æ¶ˆæ¯<br>Message message = connector.getWithoutAck(100, 10L, TimeUnit.SECONDS);<br>//ä¸šåŠ¡å¤„ç†é€»è¾‘<br>processMessage(message);<br>//æ¶ˆæ¯è¢«æˆåŠŸæ‰§è¡Œï¼Œå‘Canal Serverå‘é€ackæ¶ˆæ¯é€šçŸ¥serverè¯¥messageå·²ç»è¢«å¤„ç†å®Œæˆ<br>connector.ack(message.getId);<br>} catch (Exception e) {<br>log.error("wtf", e);<br>//å½“æ¶ˆæ¯æ²¡è¢«æˆåŠŸå¤„ç†å®Œæˆæ—¶è¿›è¡Œå›æ»šï¼Œä¸‹æ¬¡èƒ½å¤Ÿé‡æ–°è·å–è¯¥Message<br>connector.rollback;<br>Thread.sleep(1000);<br>}<br>}<br>connector.disconnect;<br>}<br><br><br>public void<strong class=highlight-text toutiao-origin=span>stopProcess</strong> {<br>isRunning = false;<br>}<br><br><br>private void processMessage(Message message) {<br>for(Entry entry : message.getEntries) {<br>try {<br>tableChangeProcessor.process(entry);<br>} catch (Exception e) {<br>log.error("wtf", e);<br>continue;<br>}<br>}<br>}<br>}<br></code></pre><p>ï¼ˆ4ï¼‰TableChangeProcessor</p><p>TableChangeProcessorä¸­ä¸ºå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†Messageï¼Œè·å–è·Ÿæœç´¢ç›¸å…³çš„æ•°æ®å˜åŒ–ï¼Œå‘é€ç›¸åº”çš„æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚æ³¨æ„ç‚¹ ï¼ˆ1ï¼‰å¿½ç•¥æœç´¢æ— å…³çš„æ•°æ®å­—æ®µå˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„ç´¢å¼•æ›´æ–°ï¼Œé™ä½æœåŠ¡å™¨å‹åŠ›ã€‚å¦‚Productsè¡¨ä¸­æœ‰ä¸€ä¸ªproduct_weightè¡¨ç¤ºå•†å“é‡é‡å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†å…¶å®å•†å“é‡é‡è·Ÿæœç´¢æ— å…³ï¼Œé‚£å°±ä¸è¦å…³å¿ƒè¿™ä¸ªå˜åŒ–ã€‚</p><p>ï¼ˆ2ï¼‰å¯¹äºæœç´¢ä¸­ä¸ä¼šå‡ºç°çš„æ•°æ®ï¼Œä¸è¦å†™å…¥åˆ°ESä¸­ï¼Œæ¯”å¦‚ç”µå•†å•†å“ä¸­çš„ä¸‹æ¶å•†å“ï¼Œå¦å¤–ï¼Œå¦‚æœå•†å“è¢«ä¸‹æ¶ï¼Œåˆ™è¦è¿›è¡Œç›‘å¬é€šçŸ¥ç´¢å¼•åŒæ­¥Workerä»esä¸­åˆ é™¤ç´¢å¼•æ–‡æ¡£ã€‚è¿™æ ·èƒ½å¤Ÿé™ä½ESä¸­æ€»çš„ç´¢å¼•æ–‡æ¡£æ•°é‡ï¼Œæå‡æœç´¢æ•ˆç‡ã€‚</p><p>ï¼ˆ3ï¼‰è¦è€ƒè™‘RabbitæŒ‚æ‰æˆ–è€…é˜Ÿåˆ—å†™æ»¡ï¼Œæ¶ˆæ¯æ— æ³•å†™å…¥çš„æƒ…å†µï¼›é¦–å…ˆåº”è¯¥åœ¨Rabbitå‘é€æ¶ˆæ¯æ—¶æ·»åŠ é‡è¯•ï¼Œå…¶æ¬¡åº”è¯¥åœ¨é‡è¯•å‡ æ¬¡è¿˜æ˜¯å¤±è´¥çš„æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ï¼Œcanalæ¶ˆæ¯æµå›æ»šï¼Œä¸‹æ¬¡è¿˜æ˜¯èƒ½å¤Ÿè·å–åˆ°è¿™ä¸ªæ•°æ®å˜åŒ–çš„Canalæ¶ˆæ¯ï¼Œé¿å…æ•°æ®å˜åŠ¨çš„ä¸¢å¤±ã€‚</p><p>ï¼ˆ4ï¼‰æ³¨æ„ç›®å‰Canalåªæ”¯æŒå•Clientã€‚å¦‚æœè¦å®ç°é«˜å¯ç”¨ï¼Œåˆ™éœ€è¦ä¾èµ–äºZooKeeperï¼Œä¸€ä¸ªClientä½œä¸ºå·¥ä½œClientï¼Œå…¶ä½™Clientä½œä¸ºå†·å¤‡ï¼Œå½“å·¥ä½œClientæŒ‚æ‰æ—¶ï¼Œå†·å¤‡Clientç›‘å¬åˆ°ZooKeeperæ•°æ®å˜åŒ–ï¼ŒæŠ¢å é”æˆä¸ºå·¥ä½œClientã€‚</p><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>Canal Workerå®ç°</strong></h1><p>ç´¢å¼•åŒæ­¥Workerä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–Canal Clientå‘é€çš„è·Ÿæœç´¢ç›¸å…³çš„æ•°æ®åº“å˜åŒ–æ¶ˆæ¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å•†å“è¡¨ä¸­è·Ÿæœç´¢ç›¸å…³çš„å­—æ®µå‘ç”Ÿäº†å˜åŒ–ï¼ŒCanal Clientä¼šå‘é€ä»¥ä¸‹ä¸€æ¡æ•°æ®ï¼š</p><pre><code>{<br>"change_id": "694212527059369984",<br>"change_type": 1, //å•†å“å‘ç”Ÿå˜åŒ–<br>"change_time": "1600741397"<br>}<br></code></pre><p>åœ¨Workerä¸­ç›‘å¬é˜Ÿåˆ—æ¶ˆæ¯ï¼š</p><pre><code>@Component<br>@Slf4j<br>public class ProductChangeQueueListener {<br><br>@Autowired<br>@Qualifier("snake")<br>ObjectMapper om;<br><br>@Autowired<br>ChangeEventHandlerFactory changeEventHandlerFactory;<br><br>@RabbitListener(queues = RabbitConfig.PRODUCT_QUEUE_NAME, containerFactory = "customRabbitListenerContainerFactory")<br>public void onChange(Message message) {<br><br>ChangeEvent event = parse(message);<br>if(event == ) {<br>return;<br>}<br><br>changeEventHandlerFactory.handle(event);<br>}<br><br>private ChangeEvent parse(Message message) {<br>ChangeEvent event = ;<br>try {<br>event = om.readValue(new String(message.getBody), ChangeEvent.class);<br>} catch (Exception e) {<br>log.error("åŒæ­¥å¤±è´¥ï¼Œè§£æå¤±è´¥", e);<br>}<br>return event;<br>}<br><br><br>}<br></code></pre><p>ChangeEventHandlerFactoryä¸ºäº‹ä»¶å¤„ç†å™¨çš„å·¥å‚ç±»ã€‚ä»¥ä¸‹ä¸ºä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨çš„å®ç°ã€‚å®ƒç›‘å¬changeTypeä¸ºCHANGE_TYPE_OUT_PRODUCTçš„äº‹ä»¶ï¼Œä»æ•°æ®åº“ä¸­è·å–åˆ°å˜åŠ¨çš„æ•°æ®ï¼Œæ„å»ºESçš„IndexRequestï¼Œå¹¶å°†Requestå­˜å…¥åˆ°RequestBulkBufferä¸­ï¼Œç­‰å¾…æ‰¹é‡åŒæ­¥åˆ°ESä¸­ã€‚æœ‰äº›åŒå­¦å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä½•ä¸ç›´æ¥ä»Canalä¸­è·å–æ•°æ®ï¼Œä¸»è¦åŸå› æ˜¯Canalä¸­åªåŒ…å«äº†å•è¡¨æ•°æ®ï¼Œä½†æ˜¯ç´¢å¼•æ–‡æ¡£å¯èƒ½åŒ…å«äº†å¤šè¡¨çš„æ•°æ®ï¼Œå› æ­¤è¿˜éœ€è¦ä»MySQLè·å–æ•°æ®ã€‚å¦‚æœç´¢å¼•æ–‡æ¡£ä¸­åªåŒ…å«å•è¡¨æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åœ¨ChangeEventä¸­åŒ…å«ä¿®æ”¹ä¹‹åçš„æ•°æ®ï¼Œç´¢å¼•åŒæ­¥Wokerå°±ä¸ç”¨å†ä»MySqlä¸­å†è·å–ä¸€éæ•°æ®ï¼Œæå‡Workerå·¥ä½œæ•ˆç‡ã€‚</p><pre><code>@Component<br>@Slf4j<br>public class OutProductEventHandler implements ChangeEventHandler {<br><br>@Autowired<br>ProductDao productDao;<br><br>@Autowired<br>RequestBulkBuffer buffer;<br><br><br>@Autowired<br>OutProductChangeRequestBuilder builder;<br><br>@Override<br>@Retryable<br>public boolean handle(ChangeEvent changeEvent) {<br>if (!match(changeEvent)) {<br>return false;<br>}<br><br>Tuple dataTuple = productDao.getProductWithStore(changeEvent.getChangeId);<br>if (dataTuple == ) {<br>return true;<br>}<br>Product product = dataTuple.get(QProduct.product);<br>Store store = dataTuple.get(QStore.store);<br><br>IndexRequest request = ;<br>try {<br>request = builder.convertToUpdateQuery(getTimestampNow, product, store);<br>} catch (Exception e) {<br>log.error("wtf", e);<br>}<br>if (request == ) {<br>return true;<br>}<br>buffer.add(request);<br>return true;<br><br>}<br><br>@Override<br>public boolean match(ChangeEvent changeEvent) {<br>return ChangeEvent.CHANGE_TYPE_OUT_PRODUCT == changeEvent.getChangeType;<br>}<br>}<br></code></pre><p>åœ¨ä¸Šé¢çš„OutProductEventHandlerç±»ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ç›´æ¥åœ¨è¯¥ç±»ä¸­ä½¿ç”¨RestHighLevelClientå°†æ–‡æ¡£æ›´æ–°åˆ°ESç´¢å¼•ï¼Œè€Œæ˜¯å°†IndexRequestæš‚å­˜åˆ°RequestBulkBufferä¸­ã€‚RestBulkBufferä½¿ç”¨CircularFifoBufferä½œä¸ºå­˜å‚¨æ•°æ®ç»“æ„ã€‚</p><pre><code>@Component<br>public class RequestBulkBuffer {<br><br>CircularFifoBuffer buffer;<br><br>public RequestBulkBuffer(CircularFifoBuffer buffer) {<br>this.buffer = buffer;<br>}<br><br><br>public void add(DocWriteRequest&lt;?&gt; request) {<br>buffer.add(request);<br>}<br><br>}<br></code></pre><p>CircularFifoBufferæ˜¯ä¸€ä¸ªç»è¿‡æ”¹é€ çš„ç¯å½¢é˜Ÿåˆ—å®ç°ã€‚å…è®¸å¤šçº¿ç¨‹å†™ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸­åªæ”¯æŒä¹Ÿåªéœ€æ”¯æŒå•çº¿ç¨‹è¯»->å¤„ç†->ç§»é™¤å¤„ç†å®Œçš„æ•°æ®ã€‚å½“ç¯å½¢é˜Ÿåˆ—ç¼“å­˜æ»¡æ—¶ï¼Œå€ŸåŠ©äºsemaphoreï¼Œå†™å…¥çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œåœ¨åé¢çš„Workerå¦‚ä½•é˜²æ­¢æ•°æ®ä¸¢å¤±ä¸­ï¼Œæˆ‘ä»¬æ¥é˜è¿°ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€‚</p><pre><code>/**<br>* å…è®¸å¤šçº¿ç¨‹å†™<br>* åªå…è®¸å•çº¿ç¨‹-&gt;è¯»-&gt;å¤„ç†-&gt;ç§»é™¤<br>*/<br>public class CircularFifoBuffer {<br><br>private Logger logger = LoggerFactory.getLogger(CircularFifoBuffer.class.getName);<br><br><br>private transient Object elements;<br><br>private transient int start = 0;<br>private transient int end = 0;<br><br>private transient boolean full = false;<br><br>private final int maxElements;<br><br>private ReentrantLock addLock;<br><br>private Semaphore semaphore;<br><br>public CircularFifoBuffer(int size) {<br>if (size &lt;= 0) {<br>throw new IllegalArgumentException("The size must be greater than 0");<br>}<br>elements = new Object[size];<br>maxElements = elements.length;<br>addLock = new ReentrantLock;<br>semaphore = new Semaphore(size);<br>}<br><br><br>public int<strong class=highlight-text toutiao-origin=span>size</strong> {<br>int size = 0;<br><br>if (end &lt; start) {<br>size = maxElements - start + end;<br>} else if (end == start) {<br>size = (full ? maxElements : 0);<br>} else {<br>size = end - start;<br>}<br><br>return size;<br>}<br><br>public boolean<strong class=highlight-text toutiao-origin=span>isEmpty</strong> {<br>return size == 0;<br>}<br><br>public boolean<strong class=highlight-text toutiao-origin=span>isFull</strong> {<br>return size == maxElements;<br>}<br><br>public int<strong class=highlight-text toutiao-origin=span>maxSize</strong> {<br>return maxElements;<br>}<br><br>public void<strong class=highlight-text toutiao-origin=span>clear</strong> {<br>full = false;<br>start = 0;<br>end = 0;<br>Arrays.fill(elements, );<br>}<br><br>public boolean add(Object element) {<br>if ( == element) {<br>throw new PointerException("Attempted to add object to buffer");<br>}<br><br>addLock.lock;<br>try {<br>semaphore.acquire;<br>} catch (Exception e) {<br>logger.error("RingBuffer", "çº¿ç¨‹é€€å‡ºï¼Œæ·»åŠ å¤±è´¥");<br>return false;<br>}<br><br>elements[end++] = element;<br><br><br>if (end &gt;= maxElements) {<br>end = 0;<br>}<br><br>if (end == start) {<br>full = true;<br>}<br><br>addLock.unlock;<br><br>return true;<br><br>}<br><br>public Object<strong class=highlight-text toutiao-origin=span>get</strong> {<br>if (isEmpty) {<br>return ;<br>}<br><br>return elements[start];<br>}<br><br><br>public Object<strong class=highlight-text toutiao-origin=span>remove</strong> {<br>if (isEmpty) {<br>return ;<br>}<br><br>Object element = elements[start];<br>if( != element) {<br>elements[start++] = ;<br>if (start &gt;= maxElements) {<br>start = 0;<br>}<br>full = false;<br>semaphore.release;<br>}<br>return element;<br>}<br><br><br>/**<br>* @param size the max size of elements will return<br>*/<br>public Object get(int size) {<br>int queueSize = size;<br>if (queueSize == 0) { //empty<br>return new Object[0];<br>}<br>int realFetchSize = queueSize &gt;= size ? size : queueSize;<br>if (end &gt; start) {<br>return Arrays.copyOfRange(elements, start, start + realFetchSize);<br>} else {<br>if (maxElements - start &gt;= realFetchSize) {<br>return Arrays.copyOfRange(elements, start, start + realFetchSize);<br>} else {<br>return ArrayUtils.addAll(<br>Arrays.copyOfRange(elements, start, maxElements),<br>Arrays.copyOfRange(elements, 0, realFetchSize - (maxElements - start))<br>);<br>}<br>}<br>}<br><br><br>public Object<strong class=highlight-text toutiao-origin=span>getAll</strong> {<br>return get(size);<br>}<br><br><br><br>public Object remove(int size) {<br>if(isEmpty) {<br>return new Object[0];<br>}<br>int queueSize = size;<br>int realFetchSize = queueSize &gt;= size ? size : queueSize;<br>Object  retArr = new Object[realFetchSize];<br>for(int i=0;i&lt;realFetchSize;i++) {<br>retArr[i] = remove;<br>}<br><br>return retArr;<br>}<br><br>}<br></code></pre><p>ä¸‹é¢è¿™ä¸ªç±»ä¸ºç¼“å­˜çš„æ¶ˆè´¹è€…ï¼Œå®ƒå¾ªç¯ä»bufferä¸­è·å–ä¸€å®šæ•°æ®çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨RestHighLevelClientå°†æ•°æ®æ‰¹é‡åŒæ­¥åˆ°ESã€‚åœ¨Workerå¯åŠ¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹è°ƒç”¨startConsumeï¼Œåœ¨æœåŠ¡å…³é—­æ—¶è¯¥çº¿ç¨‹ç»“æŸã€‚</p><pre><code>@Slf4j<br>public class RequestBulkConsumer {<br>private static final int DEFAULT_BULK_SIZE = 2000;<br><br>private CircularFifoBuffer buffer;<br>private EsBulkRequestService service;<br><br>private boolean isRunning = false;<br>private int bulkSize = DEFAULT_BULK_SIZE;<br><br>public RequestBulkConsumer(CircularFifoBuffer buffer, RestHighLevelClient client) {<br>this.buffer = buffer;<br>this.service = new EsBulkRequestService(client);<br>}<br><br>public void setBulkSize(int size) {<br>this.bulkSize = size;<br>}<br><br>public int<strong class=highlight-text toutiao-origin=span>getBulkSize</strong> {<br>return bulkSize;<br>}<br><br>public boolean<strong class=highlight-text toutiao-origin=span>isRunning</strong> {<br>return isRunning;<br>}<br><br><br>public void<strong class=highlight-text toutiao-origin=span>startConsume</strong> {<br>if(isRunning) {<br>return;<br>}<br>isRunning = true;<br>while(true) {<br>if(!isRunning) {<br>break;<br>}<br><br>Object  items = buffer.get(bulkSize);<br>if(items.length == 0) {<br>try {<br>Thread.sleep(1000);<br>} catch (InterruptedException e) {<br>break;<br>}<br>} else {<br>List&lt;DocWriteRequest&lt;?&gt;&gt; requests = convert(items);<br>try {<br>BulkResponse response = service.request(requests);<br>processResponse(response);<br>buffer.remove(items.length);<br>if (items.length &lt; bulkSize) {<br>Thread.sleep(3000);<br>}<br>} catch (InterruptedException e) {<br>break;<br>} catch (IOException e) {<br>log.error("wtf", e);<br>} catch (Exception e) {<br>log.error("wtf", e);<br>buffer.remove(items.length);<br>}<br>}<br>}<br>}<br><br><br>private List&lt;DocWriteRequest&lt;?&gt;&gt; convert(Object [] items) {<br>return Stream.of(items)<br>.map(i -&gt; {<br>if(i instanceof DocWriteRequest) {<br>return (DocWriteRequest&lt;?&gt;) i;<br>} else {<br>return ;<br>}<br>})<br>.filter(Objects::non)<br>.collect(Collectors.toList);<br>}<br><br>public void<strong class=highlight-text toutiao-origin=span>stop</strong> {<br>isRunning = false;<br>}<br><br><br>private void processResponse(BulkResponse bulkResponse) {<br>BulkItemResponse  itemResponseArr = bulkResponse.getItems;<br>for(BulkItemResponse resp : itemResponseArr) {<br>DocWriteResponse docWriteResponse = resp.getResponse;<br>if(docWriteResponse instanceof IndexResponse) {<br>IndexResponse indexResponse = (IndexResponse) docWriteResponse;<br>if(indexResponse.getResult != Result.CREATED &amp;&amp; indexResponse.getResult != Result.UPDATED) {<br>if(indexResponse.status == RestStatus.CONFLICT) {<br>continue;<br>} else {<br>log.error("ç´¢å¼•æ›´æ–°å¤±è´¥: {}, {}", indexResponse.getId, resp.getFailureMessage);<br>}<br>}<br>} else if(docWriteResponse instanceof DeleteResponse) {<br>DeleteResponse deleteResponse = (DeleteResponse) docWriteResponse;<br>if(deleteResponse.getResult != Result.DELETED) {<br>log.error("ç´¢å¼•åˆ é™¤å¤±è´¥: {}, {}", deleteResponse.getId, resp.getFailureMessage);<br>}<br>}<br>}<br>}<br>}<br><br></code></pre><p>ä»¥ä¸‹ä¸ºWorkerçš„ä¸»è¦å‡ ä¸ªç±»çš„ä»£ç ã€‚åœ¨ç´¢å¼•åŒæ­¥ç³»ç»Ÿä¸­ï¼Œé«˜å¯ç”¨å¹¶ä¸æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„æœç´¢æœ¬èº«æ˜¯ä¸€ä¸ªå‡†å®æ—¶ç³»ç»Ÿï¼Œåªéœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬ä¸»è¦éœ€è¦é¿å…çš„æ˜¯æ•°æ®å˜æ›´çš„ä¸¢å¤±ã€‚ä»¥ä¸‹è¯´æ˜åœ¨Workerä¸­æ˜¯å¦‚ä½•é¿å…æ•°æ®ä¸¢å¤±çš„ã€‚</p><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>é¿å…æ•°æ®ä¸¢å¤±</strong></h1><p>ï¼ˆ1ï¼‰å¦‚æœRabbitæŒ‚æ‰ï¼Œæ²¡å…³ç³»ï¼ŒCanal Clienté‚£è¾¹åœ¨RabbitæŒ‚æ‰æœŸé—´æ— æ³•æ¶ˆè´¹binlogï¼Œä¼šç­‰å¾…Rabbité‡å¯ä¹‹åå†å¤„ç†æ•°æ®å˜åŒ–ã€‚Workeråªè¦èƒ½åšåˆ°Rabbité‡å¯ä¹‹åé‡è¿å°±è¡Œã€‚</p><p>ï¼ˆ2ï¼‰å¦‚æœMySQLæŒ‚æ‰ï¼Œåˆ™Workeræ— æ³•ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œåˆ™æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼Œæ¶ˆæ¯ä¼šå †ç§¯åœ¨Rabbitä¸­ã€‚ç­‰MySQLé‡æ–°ä¸Šçº¿ä¹‹åï¼Œæ¶ˆæ¯é‡æ–°å¼€å§‹å¤„ç†ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p><p>ï¼ˆ3ï¼‰å¦‚æœESæŒ‚æ‰ï¼Œåˆ™æ‰¹é‡å¤„ç†çº¿ç¨‹æ¶ˆè´¹bufferä¸­çš„æ•°æ®æ—¶ä¼šå¤±è´¥ï¼Œbufferä¼šè¢«ç”Ÿäº§è€…å¡«æ»¡ï¼Œç”±äºCircularFifoBufferåœ¨è¢«å¡«æ»¡æ—¶ä½¿ç”¨äº†ä¿¡å·é‡é˜»å¡ç”Ÿäº§è€…çº¿ç¨‹ï¼Œæ¶ˆæ¯åˆä¼šè¢«å †ç§¯åœ¨Rabbitä¸­ï¼Œç­‰å¾…ESé‡æ–°ä¸Šçº¿ä¹‹åï¼Œæ¶ˆæ¯é‡æ–°å¼€å§‹å¤„ç†ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p><p>ï¼ˆ4ï¼‰å¦‚æœRabbité˜Ÿåˆ—è¢«å†™æ»¡ï¼Œemmmï¼Œè®¾ç½®å¥½åœ¨å†…å­˜è¢«å æ»¡æ—¶å°†æ¶ˆæ¯å†™å…¥ç¡¬ç›˜ç„¶åæä¸€ä¸ªå¤§ä¸€ç‚¹çš„ç¡¬ç›˜å§ï¼ŒRabbité»˜è®¤åº”è¯¥å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚ç„¶ååšå¥½é¢„è­¦ï¼Œå½“æ¶ˆæ¯è¾¾åˆ°ä¸€å®šé‡æ—¶æŠ“ç´§å¤„ç†ï¼Œä¸€èˆ¬æ¥è¯´å¯èƒ½æ€§ä¸æ˜¯å¾ˆå¤§ã€‚</p><p>ï¼ˆ5ï¼‰ç‰ˆæœ¬å†²çªï¼Œå¦‚æœå•†å“è¡¨ä¸­æŸä¸€æ¡æ•°æ®å¦‚å•†å“Aåœ¨åŒä¸€ç§’å†…å˜åŒ–äº†ä¸¤æ¬¡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­æœ‰è¿ç»­ä¸¤æ¡æ¶ˆæ¯ï¼Œåˆç”±äºè¿™ä¸¤æ¡æ¶ˆæ¯å¯èƒ½åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­è¢«æ¶ˆè´¹ï¼Œç”±äºç½‘ç»œï¼Œè®¡ç®—æœºæ€§èƒ½ç­‰åŸå› ï¼Œå…ˆå˜çš„æ•°æ®åè¢«å†™å…¥ESä¸­ï¼Œå¯¼è‡´ESä¸­æ•°æ®å’ŒMySqlæ•°æ®ä¸ä¸€è‡´ã€‚å› æ­¤æˆ‘ä»¬åœ¨æ›´æ–°ç´¢å¼•æ—¶ä½¿ç”¨ESçš„å¤–éƒ¨ç‰ˆæœ¬å·ã€‚ä½¿ç”¨ä»MySQLä¸­å–æ•°æ®æ—¶çš„æ—¶é—´æˆ³ä½œä¸ºç‰ˆæœ¬å·ï¼Œåªæœ‰å½“æ—¶é—´æˆ³æ¯”å½“å‰ç‰ˆæœ¬å·å¤§æˆ–ç›¸ç­‰æ—¶æ‰èƒ½å˜æ›´æ–‡æ¡£ï¼Œå¦åˆ™ESä¼šæŠ¥ç‰ˆæœ¬å†²çªé”™è¯¯ã€‚</p><pre><code> private IndexRequest convertToUpdateQuery(Long timestamp, OutStoreProduct outStoreProduct) throws JsonProcessingException {<br>IndexRequest indexRequest = new IndexRequest(indexName, "doc", outStoreProduct.getId);<br>if(StringUtils.isEmpty(outStoreProduct.getTooEbaoProductId)) {<br>log.error("å•†å“ {} çš„ebaoProductIdä¸ºç©ºï¼Œæ— æ³•åŒæ­¥", outStoreProduct.getId);<br>return ;<br>}<br>indexRequest.source(om.writeValueAsString(outStoreProduct), XContentType.JSON)<br>.versionType(VersionType.EXTERNAL_GTE)<br>.version(timestamp)<br>.routing(outStoreProduct.getTooEbaoProductId);<br>return indexRequest;<br>}<br></code></pre><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>å…³äºå…¨é‡åŒæ­¥</strong></h1><p>ä»¥ä¸Šåªæ˜¯å®ç°äº†å¢é‡åŒæ­¥ï¼Œåœ¨ç´¢å¼•åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åšå…¨é‡åŒæ­¥æ“ä½œï¼Œå°†æ•°æ®ä»æ•°æ®åº“åˆå§‹åŒ–åˆ°ESç´¢å¼•ä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Workerä¸­å†™ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£å®ç°é€»è¾‘åˆ†æ‰¹å°†æ•°æ®åŒæ­¥ä»»åŠ¡å‘åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå…¶å®ƒworkeræ”¶åˆ°æ¶ˆæ¯åå®Œæˆå¯¹åº”ä»»åŠ¡ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å‘å¸ƒæ¯ä¸€ä¸ªé—¨åº—çš„æ•°æ®åŒæ­¥ä»»åŠ¡ï¼Œworkeræ¯æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯ï¼ŒåŒæ­¥ä¸€ä¸ªé—¨åº—çš„æ•°æ®ã€‚</p><p></p><h1 toutiao-origin=h3><strong toutiao-origin=h1>æ€»ç»“</strong></h1><p>ç»¼ä¸Šï¼Œæœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿‘å®æ—¶çš„èƒ½å¤Ÿä¿è¯ESå’ŒMySQLæ•°æ®ä¸€è‡´æ€§çš„é«˜æ•ˆç´¢å¼•åŒæ­¥ç³»ç»Ÿã€‚</p><blockquote><p>ä½œè€…ï¼šTango2100 é“¾æ¥ï¼šhttps://juejin.im/post/6875591758802059278</p></blockquote><pre><br><div><img alt=åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RdIEj9hARSR1DD></div><br><div><ul><li><p>åŸºäº Apache Flink çš„å®æ—¶ç›‘æ§å‘Šè­¦ç³»ç»Ÿ</p></li><li><p>å…³äºæ•°æ®ä¸­å°çš„æ·±åº¦æ€è€ƒä¸æ€»ç»“ï¼ˆå¹²å¹²è´§ï¼‰</p></li><li><p>æ—¥å¿—æ”¶é›†Agentï¼Œé˜´æš—æ½®æ¹¿çš„åœ°åº•ä¸–ç•Œ</p></li><li><p>2020 ç»§ç»­è¸è¸å®å®çš„åšå¥½è‡ªå·±</p></li></ul></div></pre><img alt=åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S0FUMtl41NrEMK><img alt=åŸºäºCDCæŠ€æœ¯çš„ElasticSearchç´¢å¼•åŒæ­¥æœºåˆ¶ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S0FUNTDJBxRdKz><pre><div><div><div><div><div><p>å…¬ä¼—å·(<strong class=highlight-text toutiao-origin=span>zhisheng</strong>)é‡Œå›å¤ é¢ç»ã€ClickHouseã€ESã€Flinkã€<strong class=highlight-text toutiao-origin=span>Springã€Javaã€Kafkaã€ç›‘æ§ </strong>ç­‰å…³é”®å­—å¯ä»¥æŸ¥çœ‹æ›´å¤šå…³é”®å­—å¯¹åº”çš„æ–‡ç« ã€‚</p></div></div></div></div></div></pre><pre><div><div><div><div><div><div><div><div><div><div><div><div><div><div><p><strong toutiao-origin=span>ğŸ‘‡</strong></p></div></div></div></div></div></div></div></div></div></div></div></div></div></div></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'CDC','æŠ€æœ¯','ElasticSearch'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>