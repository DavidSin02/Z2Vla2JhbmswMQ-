<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>vue相关配置文件详解及多环境配置 | 极客快訊</title><meta property="og:title" content="vue相关配置文件详解及多环境配置 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/b71bec79691c4a109a0e665884e52847"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/90ef6a5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/90ef6a5.html><meta property="article:published_time" content="2020-10-29T20:59:54+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:54+08:00"><meta name=Keywords content><meta name=description content="vue相关配置文件详解及多环境配置"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/90ef6a5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>vue相关配置文件详解及多环境配置</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><h2 class=pgc-h-arrow-right>1.package.json</h2><p>作用：<br>package.json 文件其实就是对项目或者模块包的描述，里面包含许多元信息。比如项目名称，项目版本，项目执行入口文件，项目贡献者等等。npm install 命令会根据这个文件下载所有依赖模块。</p><p>文件结构如下：</p><pre><code>{  "name": "sop-vue",  "version": "0.1.0",  "author": "zhangsan &lt;zhangsan@163.com&gt;",  "description": "sop-vue",  "keywords":["node.js","javascript"],  "private": true,  "bugs":{"url":"http://path/to/bug","email":"bug@example.com"},  "contributors":[{"name":"李四","email":"lisi@example.com"}],  "repository": {                                         "type": "git",                                         "url": "https://path/to/url"                    },  "homepage": "http://github.com/style.css",  "license":"MIT",  "dependencies": {  "bd-font-icons": "^1.1.3",  "core-js": "^3.6.4",  "echarts": "^4.7.0",  "element-ui": "^2.13.1",  "v-charts": "^1.19.0",  "vue": "^2.6.11",  "vue-router": "^3.1.6",  "vuex": "^3.1.3"},  "devDependencies": {  "@vue/cli-plugin-babel": "^4.3.0",  "@vue/cli-plugin-eslint": "^4.3.0",  "@vue/cli-plugin-router": "^4.3.0",  "@vue/cli-plugin-unit-mocha": "^4.3.0",  "@vue/cli-plugin-vuex": "^4.3.0",  "@vue/cli-service": "^4.3.0",  "@vue/test-utils": "1.0.0-beta.31",  "babel-core": "^6.26.3",  "babel-eslint": "^10.1.0",  "babel-loader": "^7.1.5",  "babel-preset-env": "^1.7.0",  "chai": "^4.1.2",  "eslint": "^6.7.2",  "eslint-plugin-vue": "^6.2.2",  "sass": "^1.26.3",  "sass-loader": "^8.0.2",  "vue-template-compiler": "^2.6.11"}  "scripts": {"serve": "vue-cli-service serve","build": "vue-cli-service build","test:unit": "vue-cli-service test:unit","lint": "vue-cli-service lint"  },  "bin": {  "webpack": "./bin/webpack.js"  },  "main": "lib/webpack.js",  "module": "es/index.js",  "eslintConfig": {    "extends": "vue-app"  },  "engines" : {    "node" : "&gt;=0.10.3 &lt;0.12"  },  "browserslist": {    "production": [      "&gt;0.2%",      "not dead",      "not op_mini all"    ],    "development": [      "last 1 chrome version",      "last 1 firefox version",      "last 1 safari version"    ]  },  "style": [  "./node_modules/tipso/src/tipso.css"],  "files": [    "lib/",    "bin/",    "buildin/",    "declarations/",    "hot/",    "web_modules/",    "schemas/",    "SECURITY.md"  ]}文件参数说明：</code></pre><p>文件参数说明：</p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b71bec79691c4a109a0e665884e52847><p class=pgc-img-caption></p></div><blockquote><p>这个文件保存着项目的时候配置的项目基本信息，它是个标准的json格式文件，编写时要注意格式，重点要关注一下scripts里面的内容，这里面包含了项目的一些指令简写，在这里可以配置启动不同环境的项目的指令。</p></blockquote><h2 class=pgc-h-arrow-right>2.vue.config.js</h2><p>vue.config.js 是一个可选的配置文件，如果项目的 (和 package.json 同级的) 根目录中存在这个文件，那么它会被 @vue/cli-service 自动加载。你也可以使用 package.json 中的 vue 字段，但是注意这种写法需要你严格遵照 JSON 的格式来写。</p><p>这个文件应该导出一个包含了选项的对象：</p><pre><code>// vue.config.js{  // 选项...}</code></pre><p><br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/caf973b0c7af4304a88c7f9652cbbd34><p class=pgc-img-caption></p></div><p>下面是个比较完整点的配置实例</p><pre><code>// Vue.config.js 配置选项module.exports = {    // 选项    //  基本路径    publicPath: "./",    //  构建时的输出目录    outputDir: "dist",    //  放置静态资源的目录    assetsDir: "static",    //  html 的输出路径    indexPath: "index.html",    //文件名哈希    filenameHashing: true,    //用于多页配置，默认是 undefined    pages: {        index: {            // page 的入口文件            entry: 'src/index/main.js',            // 模板文件            template: 'public/index.html',            // 在 dist/index.html 的输出文件            filename: 'index.html',            // 当使用页面 title 选项时，            // template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;            title: 'Index Page',            // 在这个页面中包含的块，默认情况下会包含            // 提取出来的通用 chunk 和 vendor chunk。            chunks: ['chunk-vendors', 'chunk-common', 'index']        },        // 当使用只有入口的字符串格式时，        // 模板文件默认是 `public/subpage.html`        // 如果不存在，就回退到 `public/index.html`。        // 输出文件默认是 `subpage.html`。        subpage: 'src/subpage/main.js'    },    //  是否在保存的时候使用 `eslint-loader` 进行检查。    lintOnSave: true,    //  是否使用带有浏览器内编译器的完整构建版本    runtimeCompiler: false,    //  babel-loader 默认会跳过 node_modules 依赖。    transpileDependencies: [ /* string or regex */ ],    //  是否为生产环境构建生成 source map？    productionSourceMap: true,    //  设置生成的 HTML 中 &lt;link rel="stylesheet"&gt; 和 &lt;script&gt; 标签的 crossorigin 属性。    crossorigin: "",    //  在生成的 HTML 中的 &lt;link rel="stylesheet"&gt; 和 &lt;script&gt; 标签上启用 Subresource Integrity (SRI)。    integrity: false,    //  调整内部的 webpack 配置    configureWebpack: () =&gt; {}, //(Object | Function)    chainWebpack: () =&gt; {},    // 配置 webpack-dev-server 行为。    devServer: {        open: process.platform === 'darwin',        host: '0.0.0.0',        port: 8080,        https: false,        hotOnly: false,        // 查阅 https://github.com/vuejs/vue-docs-zh-cn/blob/master/vue-cli/cli-service.md#配置代理        proxy: {            '/api': {                target: "http://app.rmsdmedia.com",                changeOrigin: true,                secure: false,                pathRewrite: {                    "^/api": ""                }            },            '/foo': {                target: '&lt;other_url&gt;'            }        }, // string | Object        before: app =&gt; {}    },    // CSS 相关选项    css: {        // 将组件内的 CSS 提取到一个单独的 CSS 文件 (只用在生产环境中)        // 也可以是一个传递给 `extract-text-webpack-plugin` 的选项对象        extract: true,        // 是否开启 CSS source map？        sourceMap: false,        // 为预处理器的 loader 传递自定义选项。比如传递给        // Css-loader 时，使用 `{ Css: { ... } }`。        loaderOptions: {            css: {                // 这里的选项会传递给 css-loader            },            postcss: {                // 这里的选项会传递给 postcss-loader            }        },        // 为所有的 CSS 及其预处理文件开启 CSS Modules。        // 这个选项不会影响 `*.vue` 文件。        modules: false    },    // 在生产环境下为 Babel 和 TypeScript 使用 `thread-loader`    // 在多核机器下会默认开启。    parallel: require('os').cpus().length &gt; 1,    // PWA 插件的选项。    // 查阅 https://github.com/vuejs/vue-docs-zh-cn/blob/master/vue-cli-plugin-pwa/README.md    pwa: {},    // 三方插件的选项    pluginOptions: {        // ...    }}</code></pre><h2 class=pgc-h-arrow-right>3.多环境配置</h2><p>日常项目中我们可能有多个环境，常见的开发、测试和生产，它们的接口地址和执行操作也是不一样的，所以我们需要配置不同的环境，就拿基本的开发、测试、生产三个环境来说。<br>首先在根目录下新建.env.dev、.env.test、.env.prod文件(开发、测试、生产)<br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b1f4d63e2de04d519153ad8abc17b7e3><p class=pgc-img-caption></p></div><p><br>文件内容：</p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fe86bc1ed19945ec8bcb62b1941a8ab1><p class=pgc-img-caption></p></div><p>例如：<br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/beb50fbdf0f24378812f9655c8bfc1a8><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/356f1816f17a4d3492d3db96efe134ae><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c4c615a051b545489b1fd7a69c75e2a9><p class=pgc-img-caption></p></div><p><br></p><blockquote><p>在main.js中配置接口地址指向配置文件的地址</p></blockquote><p><br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f05ce1e0978648a29e2b67e71120f974><p class=pgc-img-caption></p></div><p>修改package.json文件中scripts中编译指令即可进行不同环境的配置，–mode后面指向不同的配置文件.env.dev、.env.test、.env.prod<br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/fc4f637318554ee7abdf80aad050ca42><p class=pgc-img-caption></p></div><blockquote><p>运行npm run dev即可访问开发环境接口</p></blockquote><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7a67372b68a44898854e81a09711baba><p class=pgc-img-caption></p></div><blockquote><p>运行npm run test即可使用测试环境接口运行npm run prod即可访问生产环境接口</p></blockquote><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8952efc574cc4551ae1001fe986525b8><p class=pgc-img-caption></p></div><blockquote><p>运行npm run prod即可访问生产环境接口</p></blockquote><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2ea374582aea49e1bac53fd56cfc207d><p class=pgc-img-caption></p></div><blockquote><p>Vue.config.js中可以在configureWebpack中去</p></blockquote><p>例如：</p><pre><code>configureWebpack: (config) =&gt; {    if (process.env. VUE_APP_MODE === 'prod') {        // 为生产环境修改配置...    }else if(process.env. VUE_APP_MODE === 'test'){        // 为测试环境修改配置...    }else {        // 为开发环境修改配置...    }    Object.assign(config, {        // 开发、测试、生产共同配置        resolve: {            alias: {                '@': path.resolve(__dirname, './src'),                '@c': path.resolve(__dirname, './src/components'),                '@p': path.resolve(__dirname, './src/pages')            } // 别名配置        }    })},</code></pre><p>打包同理</p><pre><code>"build:dev": "vue-cli-service build --mode dev","build:test": "vue-cli-service build --mode test","build:prod": "vue-cli-service build --mode prod"</code></pre><p>运行npm run build:dev即可构建开发环境<br>运行npm run build:test即可构建测试环境<br>运行npm run build:prod即可构建生产环境</p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/61f205a4f74741e290df10414b1e9813><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=vue相关配置文件详解及多环境配置 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/22bf695e1f3042928ce0db71c668a4a0><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'配置文件','vue','相关'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>