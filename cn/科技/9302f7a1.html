<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>python：5分钟，教你使用内置函数open来操作文件 | 极客快訊</title><meta property="og:title" content="python：5分钟，教你使用内置函数open来操作文件 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/f7b3f95f851a4f76bff8dc828b3088c1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9302f7a1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9302f7a1.html><meta property="article:published_time" content="2020-11-14T21:00:21+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:21+08:00"><meta name=Keywords content><meta name=description content="python：5分钟，教你使用内置函数open来操作文件"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9302f7a1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>python：5分钟，教你使用内置函数open来操作文件</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>使用内置函数open来操作文件有三步：打开文件，操作文件，关闭文件。</p><p>open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)</p><div class=pgc-img><img alt=python：5分钟，教你使用内置函数open来操作文件 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f7b3f95f851a4f76bff8dc828b3088c1><p class=pgc-img-caption></p></div><p>3.1. <strong>file如果只写文件名，比如'file1.txt'，则默认是当前路径，如果当前路径没有这个名字的文件，则报错，如果是其他目录的文件，则需要加上文件路径。</strong></p><p>3.2. mode有4种模式：<strong>'r'表示只读模式，'w'代表只写入模式(如果文件存在，则覆盖掉，不存在则创建)，'x'表示新创建一个文件，并进入写入模式(如果文件存在，则报错)，'a'表示追加写入模式，所有写入内容都在文件末尾。打开file有三种模式，'b'代表二进制模式，'t'代表文本模式，'+'表示读写模式。</strong>默认文件打开是'rt'模式。</p><p>3.3. encoding如果没传入，则默认是平台当前的编码方式。只在文本模式中需要编码。二进制模式不需要encoding。</p><p>3.4. buttering,指缓冲，默认是-1，代表</p><p><strong>读时是按照指针的顺序，从前往后读，写时，都是写到最后,指针也到了最后。</strong></p><div class=pgc-img><img alt=python：5分钟，教你使用内置函数open来操作文件 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/198ed2a6f77c40aeaa1159ec22abb918><p class=pgc-img-caption></p></div><pre>help(open)f1 = open('hello.txt', 'w', encoding='utf-8')f1.write('hello,lanxing') #将字符串写入文件。f1.close() #关闭文件f2 = open('hello.txt', 'rb')data = f2.read() #read表示读取多少个字符，如果不加参数，则默认读取全部内容。print(data)data2 = str(data,encoding='utf-8')print(data2)f2.close()f3 = open('test1.txt', 'wb')# 以二进制模式进行写入操作，write的参数必须是字节形式，所以用bytes将字符串转换成字节。f3.write(bytes('中国人', encoding='utf-8'))f3.close()f4 = open('test1.txt', 'rb+')data4 = f4.read(3) #只读取3个字节print(data4)str_data4 = str(data4,encoding='utf-8')print(str_data4)f4.close()# 一,以下是读写模式，先读再写。f5 = open('test1.txt', 'r+', encoding='utf-8')# tell告诉当前指针(或叫光标)在哪个位置，一个字节就是一个指针位print(f5.tell()) # telldata5 = f5.read(1) # 读取1个字符，utf-8编码中，一个中文字符是3个字节。print(f5.tell()) # 所以现在是3个指针位print(data5)data6 = f5.read(1) # 再读1个字符位。print(data6)print(f5.tell()) # 现在指针在第6个字节位处了f5.seek(0) # 将指针重新调整到起始位置。f5.write('日本人') # 写入操作，会在末尾追加，指针调整到最后。f5.close()# 二，以下是写读模式，先写再读，即先清空再读。写入的同时，指针就在最后了。f6 = open('test1.txt', 'w+', encoding='utf-8')data6 = f6.read()print(data6) #空值，因为先写，已经清空整个文件了。f6.write('中国人')print(f6.tell()) #是9，因为3个汉字是9个字节。data7 = f6.read() #还是空值，因为现在指针在9，9后面没有数据了。f6.seek(0) #将指针调到到开始。data8 = f6.read()print(data8)f6.close()# 三，a+模式，打开时，指针已经在最后了。</pre><p><strong>打开文件一定要记得关闭文件，最好使用with来打开文件，with打开文件会自动关闭文件</strong>。</p><pre>with open('test1.txt','w+',encoding='utf-8') as f: f.write('中国人')with open('test1.txt','r+',encoding='utf-8') as f1, open('test2.txt','w+',encoding='utf-8') as f2:#with可以同时打开多个文件。 for line in f1: #将f1的每一行都写入到f2文件中去。 f2.write(line)</pre><p><strong>文件的基本操作还有：</strong></p><p>flush(), 即时刷新，可以在文件未关闭之前看到文件更新内容，不接参数。</p><p>readline()，读取当前指针处的一行内容。</p><p>readlines(n)，读取当前指针处的n个字符，如果n不写，则默认全读完，如果n小于当前行的字符长度，则读取当前行内容，包括换行符\n，如果n大于当前行的字符长度，则一直到第从当前指针处的第n个字符所在的行，每一行的内容包括换行符作为一个列表的元素，最终返回该列表。</p><p>close(),关闭文件</p><p>seek(n),调整指针位置</p><p>tell()，返回当前指针位置。</p><p>truncate(),截取当前指针处之前的字节内容。文件关闭时，就只有截取的内容了。</p><p>read(n),读取从当前指针处的多少个字符。返回的是字符串。</p><p>write()，写入字符串或字节。</p><p>觉得文章还不错的话不妨收藏起来慢慢看，有任何建议或看法欢迎大家在评论区分享讨论！</p><p><strong>我是一名python开发工程师，整理了一套python的学习资料，如果你想提升自己，对编程感兴趣，关注我并在后台私信小编：“08”即可免费领取资料！希望对你能有所帮助！</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'python','分钟','内置'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>