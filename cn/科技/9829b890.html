<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Androidå±å¹•é€‚é…æ–¹æ¡ˆ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Androidå±å¹•é€‚é…æ–¹æ¡ˆ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1536979578666979cb313e1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9829b890.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9829b890.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9829b890.html><meta property="article:published_time" content="2020-10-29T21:10:52+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:52+08:00"><meta name=Keywords content><meta name=description content="Androidå±å¹•é€‚é…æ–¹æ¡ˆ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9829b890.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Androidå±å¹•é€‚é…æ–¹æ¡ˆ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ç›®å½•ä»‹ç»</p><ul><li>1.å±å¹•é€‚é…å®šä¹‰</li><li>2.ç›¸å…³é‡è¦çš„æ¦‚å¿µ</li><li class=ql-indent-1>2.1 å±å¹•å°ºå¯¸[<strong>ç‰©ç†å°ºå¯¸</strong>]</li><li class=ql-indent-1>2.2 å±å¹•åˆ†è¾¨ç‡[<strong>px</strong>]</li><li class=ql-indent-1>2.3 å±å¹•åƒç´ å¯†åº¦[<strong>dpi</strong>]</li><li class=ql-indent-1>2.4 dpã€dipã€dpiã€spã€px</li><li class=ql-indent-1>2.5 mdpiã€hdpiã€xdpiã€xxdpi</li><li class=ql-indent-1>2.6 è·å–å±å¹•åˆ†è¾¨ç‡[å®½é«˜]</li><li>3.Androidå±å¹•é€‚é…å‡ºç°çš„åŸå› </li><li class=ql-indent-1>3.1 ä»€ä¹ˆæ˜¯åƒç´ ç‚¹</li><li class=ql-indent-1>3.2 dpä¸ç™¾åˆ†æ¯”</li><li>4.Androidé€‚é…é—®é¢˜åŠæœ¬è´¨</li><li class=ql-indent-1>4.1 å°ºå¯¸é€‚é…</li><li class=ql-indent-1>4.2 ä»£ç é€‚é…</li><li class=ql-indent-1>4.3 å¸ƒå±€é€‚é…</li><li class=ql-indent-1>4.4 æƒé‡é€‚é…</li><li class=ql-indent-1>4.5 å›¾ç‰‡é€‚é…</li><li class=ql-indent-1>4.6 ç™¾åˆ†æ¯”é€‚é…</li><li>5.å­˜åœ¨é—®é¢˜å’Œå›°å¢ƒ</li><li class=ql-indent-1>5.1 é€šé…ç¬¦é€‚é…å›°å¢ƒ</li><li class=ql-indent-1>5.2 ä¼ ç»Ÿdpé€‚é…å›°å¢ƒ</li><li>6.å¸¸ç”¨è§£å†³æ–¹æ¡ˆ</li><li class=ql-indent-1>6.1 ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ</li><li class=ql-indent-1>6.2 é¸¿æ´‹å¤§ç¥åº“</li><li class=ql-indent-1>6.3 AndroidAutoSize</li></ul><p>1.å±å¹•é€‚é…å®šä¹‰</p><ul><li>ä½¿å¾—æŸä¸€å…ƒç´ åœ¨Androidä¸åŒå°ºå¯¸ã€ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šå…·å¤‡ç›¸åŒçš„æ˜¾ç¤ºæ•ˆæœ</li></ul><p>2.ç›¸å…³é‡è¦çš„æ¦‚å¿µ</p><p>2.1 å±å¹•å°ºå¯¸[<strong>ç‰©ç†å°ºå¯¸</strong>]</p><ul><li>å«ä¹‰ï¼šæ‰‹æœºå¯¹è§’çº¿çš„ç‰©ç†å°ºå¯¸</li><li>å•ä½ï¼šè‹±å¯¸ï¼ˆinchï¼‰ï¼Œ1è‹±å¯¸=2.54cm</li><li>Androidæ‰‹æœºå¸¸è§çš„å°ºå¯¸æœ‰5å¯¸ã€5.5å¯¸ã€6å¯¸ç­‰ç­‰</li></ul><p>2.2 å±å¹•åˆ†è¾¨ç‡[<strong>px</strong>]</p><ul><li>å«ä¹‰ï¼šæ‰‹æœºåœ¨æ¨ªå‘ã€çºµå‘ä¸Šçš„åƒç´ ç‚¹æ•°æ€»å’Œ</li><li>ä¸€èˆ¬æè¿°æˆå±å¹•çš„"å®½xé«˜â€=AxB</li><li>å«ä¹‰ï¼šå±å¹•åœ¨æ¨ªå‘æ–¹å‘ï¼ˆå®½åº¦ï¼‰ä¸Šæœ‰Aä¸ªåƒç´ ç‚¹ï¼Œåœ¨çºµå‘æ–¹å‘ ï¼ˆé«˜ï¼‰æœ‰Bä¸ªåƒç´ ç‚¹</li><li>ä¾‹å­ï¼š1080x1920ï¼Œå³å®½åº¦æ–¹å‘ä¸Šæœ‰1080ä¸ªåƒç´ ç‚¹ï¼Œåœ¨é«˜åº¦æ–¹å‘ä¸Šæœ‰1920ä¸ªåƒç´ ç‚¹</li><li>å•ä½ï¼špxï¼ˆpixelï¼‰ï¼Œ1px=1åƒç´ ç‚¹</li><li>Androidæ‰‹æœºå¸¸è§çš„åˆ†è¾¨ç‡ï¼š720x1280ã€1080x1920ç­‰ç­‰</li></ul><p>2.3 å±å¹•åƒç´ å¯†åº¦[<strong>dpi</strong>]</p><ul><li>å«ä¹‰ï¼šæ¯è‹±å¯¸çš„åƒç´ ç‚¹æ•°</li><li>å•ä½ï¼šdpiï¼ˆdots per ichï¼‰</li><li>å‡è®¾è®¾å¤‡å†…æ¯è‹±å¯¸æœ‰160ä¸ªåƒç´ ï¼Œé‚£ä¹ˆè¯¥è®¾å¤‡çš„å±å¹•åƒç´ å¯†åº¦=160dpi</li><li>å±å¹•åƒç´ å¯†åº¦ä¸å±å¹•å°ºå¯¸å’Œå±å¹•åˆ†è¾¨ç‡æœ‰å…³ï¼Œåœ¨å•ä¸€å˜åŒ–æ¡ä»¶ä¸‹ï¼Œå±å¹•å°ºå¯¸è¶Šå°ã€åˆ†è¾¨ç‡è¶Šé«˜ï¼Œåƒç´ å¯†åº¦è¶Šå¤§ï¼Œåä¹‹è¶Šå°ã€‚</li><li>dpiè®¡ç®—å…¬å¼ï¼šä¸¾ä¸ªä¾‹å­ï¼šå±å¹•åˆ†è¾¨ç‡ä¸ºï¼š1920*1080ï¼Œå±å¹•å°ºå¯¸ä¸º5å‹çš„è¯ï¼Œé‚£ä¹ˆdpiä¸º440</li></ul><div class=pgc-img><img alt=Androidå±å¹•é€‚é…æ–¹æ¡ˆ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1536979578666979cb313e1><p class=pgc-img-caption></p></div><ul><li><br></li><li><strong>æ³¨æ„ï¼šdpiæ˜¯æ ¹æ®å±å¹•çœŸå®çš„åˆ†è¾¨ç‡å’Œå°ºå¯¸æ¥è®¡ç®—çš„ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½å¯èƒ½ä¸ä¸€æ ·çš„</strong></li></ul><p>2.4 dp[dip]ã€dpiã€spã€px</p><ul><li>dpï¼ˆdipï¼‰ï¼špx = dp * å¯†åº¦æ¯”ï¼Œéƒ½æ˜¯Density Independent Pixelsçš„ç¼©å†™ï¼Œå³å¯†åº¦æ— å…³åƒç´ </li><li>dpiï¼šå¼€æ–¹ï¼ˆå®½åº¦å¹³æ–¹ + é«˜åº¦å¹³æ–¹ï¼‰ / æ‰‹æœºçš„å°ºå¯¸ï¼›dpiæ˜¯å±å¹•åƒç´ å¯†åº¦ï¼Œå‡å¦‚ä¸€è‹±å¯¸é‡Œé¢æœ‰160ä¸ªåƒç´ ï¼Œè¿™ä¸ªå±å¹•çš„åƒç´ å¯†åº¦å°±æ˜¯160dpi</li><li>spï¼š å¯ä»¥æ ¹æ®æ–‡å­—å¤§å°é¦–é€‰é¡¹è¿›è¡Œæ”¾ç¼©ï¼Œæ˜¯è®¾ç½®å­—ä½“å¤§å°çš„å¾¡ç”¨å•ä½ã€‚</li><li>pxï¼š åƒç´ ï¼Œpxæ˜¯æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå‰é¢çš„åˆ†è¾¨ç‡å°±æ˜¯ç”¨çš„åƒç´ ä¸ºå•ä½ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¯”å¦‚UIè®¾è®¡ã€AndroidåŸç”ŸAPIéƒ½ä¼šä»¥pxä½œä¸ºç»Ÿä¸€çš„è®¡é‡å•ä½ï¼Œåƒç´ æ˜¯è·å–å±å¹•å®½é«˜ç­‰ã€‚</li><li>é—®é¢˜ï¼š dpå’Œpxå¦‚ä½•æ¢ç®—å‘¢ï¼Ÿ</li></ul><pre>px = density * dp;density = dpi / 160;px = dp * (dpi / 160);</pre><p>2.5 mdpiã€hdpiã€xdpiã€xxdpi</p><ul><li>2.5.1 ä½œç”¨ï¼š mdpiã€hdpiã€xdpiã€xxdpiç”¨æ¥ä¿®é¥°Androidä¸­çš„drawableæ–‡ä»¶å¤¹åŠvaluesæ–‡ä»¶å¤¹ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒåƒç´ å¯†åº¦ä¸‹çš„å›¾ç‰‡å’Œdimenå€¼ã€‚</li></ul><pre>åç§°åƒ ç´ å¯†åº¦èŒƒå›´ldpi 0dpi~120dpimdpi 120dpi~160dpihdpi 120dpi~160dpixdpi 160dpi~240dpixxdpi 240dpi~320dpixxxdpi 480dpi~640dpiAndroidé¡¹ç›®ååº”è¯¥å¯ä»¥çœ‹åˆ°å¾ˆå¤šdrawableæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„dpidrawable-ldpi (dpi=120, density=0.75)drawable-mdpi (dpi=160, density=1)drawable-hdpi (dpi=240, density=1.5)drawable-xhdpi (dpi=320, density=2)drawable-xxhdpi (dpi=480, density=3)å¯¹äºäº”ç§ä¸»æµçš„åƒç´ å¯†åº¦ï¼ˆMDPIã€HDPIã€XHDPIã€XXHDPI å’Œ XXXHDPIï¼‰åº”æŒ‰ç…§ 2:3:4:6:8 çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ã€‚</pre><ul><li>2.5.2 åœ¨è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåˆé€‚å¤§å°çš„å›¾ç‰‡æ”¾åœ¨åˆé€‚çš„æ–‡ä»¶å¤¹é‡Œé¢ã€‚ä¸‹é¢ä»¥å›¾æ ‡è®¾è®¡ä¸ºä¾‹è¿›è¡Œä»‹ç»</li><li>2.5.3 åœ¨è®¾è®¡å›¾æ ‡æ—¶ï¼Œå¯¹äºäº”ç§ä¸»æµçš„åƒç´ å¯†åº¦ï¼ˆMDPIã€HDPIã€XHDPIã€XXHDPI å’Œ XXXHDPIï¼‰åº”æŒ‰ç…§ 2:3:4:6:8 çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ã€‚</li><li class=ql-indent-1>ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯åŠ¨å›¾æ ‡çš„å°ºå¯¸ä¸º48x48 dpï¼Œè¿™è¡¨ç¤ºåœ¨ MDPI çš„å±å¹•ä¸Šå…¶å®é™…å°ºå¯¸åº”ä¸º 48x48 pxï¼Œåœ¨ HDPI çš„å±å¹•ä¸Šå…¶å®é™…å¤§å°æ˜¯ MDPI çš„ 1.5 å€ (72x72 px)ï¼Œåœ¨ XDPI çš„å±å¹•ä¸Šå…¶å®é™…å¤§å°æ˜¯ MDPI çš„ 2 å€ (96x96 px)ï¼Œä¾æ­¤ç±»æ¨ã€‚</li><li>2.5.4 ä¸‹å›¾ä¸ºå›¾æ ‡çš„å„ä¸ªå±å¹•å¯†åº¦çš„å¯¹åº”å°ºå¯¸ï¼š</li></ul><pre>å±å¹•å¯†åº¦ å›¾æ ‡å°ºå¯¸mdpi 48X48pxhdpi 72X72pxxdpi 96X96pxxxdpi 144X144pxxxxdpi 192X192px</pre><p>2.6 DisplayMetricsè§£æ</p><ul><li>DisplayMetricsè§£æ</li><li>è·å–å±å¹•åˆ†è¾¨ç‡ä¿¡æ¯çš„ä¸‰ç§æ–¹æ³•ï¼š</li></ul><pre>//ç¬¬ä¸€ç§DisplayMetrics metrics = new DisplayMetrics();Display display = activity.getWindowManager().getDefaultDisplay();display.getMetrics(metrics);//ç¬¬äºŒç§DisplayMetrics metrics= activity.getResources().getDisplayMetrics();//ç¬¬ä¸‰ç§Resources.getSystem().getDisplayMetrics();</pre><p>3.Androidå±å¹•é€‚é…å‡ºç°çš„åŸå› </p><p>3.1 ä»€ä¹ˆæ˜¯åƒç´ ç‚¹</p><ul><li>å±å¹•åˆ†è¾¨ç‡æ˜¯æŒ‡åœ¨æ¨ªçºµå‘ä¸Šçš„åƒç´ ç‚¹æ•°ï¼Œå•ä½æ˜¯pxï¼Œ1px=1ä¸ªåƒç´ ç‚¹ã€‚</li><li>ä¸€èˆ¬ä»¥çºµå‘åƒç´ <em>æ¨ªå‘åƒç´ ï¼Œå¦‚1960</em>1080ã€‚ ç”±äºAndroidç³»ç»Ÿçš„å¼€æ”¾æ€§ï¼Œä»»ä½•ç”¨æˆ·ã€å¼€å‘è€…ã€OEMå‚å•†ã€è¿è¥å•†éƒ½å¯ä»¥å¯¹Androidè¿›è¡Œå®šåˆ¶ï¼Œä¿®æ”¹æˆä»–ä»¬æƒ³è¦çš„æ ·å­ã€‚ å±å¹•å°ºå¯¸è¿™ä¹ˆå¤šï¼Œä¸ºäº†è®©æˆ‘ä»¬å¼€å‘çš„ç¨‹åºèƒ½å¤Ÿæ¯”è¾ƒç¾è§‚çš„æ˜¾ç¤ºåœ¨ä¸åŒå°ºå¯¸ã€åˆ†è¾¨ç‡ã€åƒç´ å¯†åº¦(è¿™äº›æ¦‚å¿µæˆ‘ä¼šåœ¨ä¸‹é¢è¯¦ç»†è®²è§£)çš„è®¾å¤‡ä¸Šï¼Œé‚£å°±è¦åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è¿›è¡Œå¤„ç†ï¼Œè‡³äºå¦‚ä½•å»è¿›è¡Œå¤„ç†ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ã€‚</li></ul><p>3.2 dpä¸ç™¾åˆ†æ¯” (ç½‘é¡µå‰ç«¯æä¾›ç™¾åˆ†æ¯”ï¼Œæ‰€ä»¥æ— éœ€é€‚é…)</p><ul><li>åªè¦è®°ä½ä¸€ç‚¹dpæ˜¯ä¸åƒç´ æ— å…³çš„ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­1dpå¤§çº¦ç­‰äº1/160inch</li><li>é‚£ä¹ˆdpç©¶ç«Ÿè§£å†³äº†é€‚é…ä¸Šçš„ä»€ä¹ˆé—®é¢˜ï¼Ÿå¯ä»¥çœ‹å‡º1dp = 1/160inchï¼›é‚£ä¹ˆå®ƒè‡³å°‘èƒ½è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½ åœ¨å¸ƒå±€æ–‡ä»¶å†™æŸä¸ªViewçš„å®½å’Œé«˜ä¸º160dp*160dpï¼Œè¿™ä¸ªViewåœ¨ä»»ä½•åˆ†è¾¨ç‡çš„å±å¹•ä¸­ï¼Œæ˜¾ç¤ºçš„å°ºå¯¸å¤§å°æ˜¯å¤§çº¦æ˜¯ä¸€è‡´çš„ï¼ˆå¯èƒ½ä¸ç²¾ç¡®ï¼‰ï¼Œå¤§æ¦‚æ˜¯ 1 inch * 1 inchã€‚</li><li class=ql-indent-1>1.å‘ˆç°æ•ˆæœä»æ—§ä¼šæœ‰å·®å¼‚ï¼Œä»…ä»…æ˜¯ç›¸è¿‘è€Œå·²</li></ul><ol><li class=ql-indent-1>å½“è®¾å¤‡çš„ç‰©ç†å°ºå¯¸å­˜åœ¨å·®å¼‚çš„æ—¶å€™ï¼Œdpå°±æ˜¾å¾—æ— èƒ½ä¸ºåŠ›äº†ã€‚ä¸º4.3å¯¸å±å¹•å‡†å¤‡çš„UIï¼Œè¿è¡Œåœ¨5.0å¯¸çš„å±å¹•ä¸Šï¼Œå¾ˆå¯èƒ½åœ¨å³ä¾§å’Œä¸‹ä¾§å­˜åœ¨å¤§é‡çš„ç©ºç™½ã€‚è€Œ5.0å¯¸çš„UIè¿è¡Œåˆ°4.3å¯¸çš„è®¾å¤‡ä¸Šï¼Œå¾ˆå¯èƒ½æ˜¾ç¤ºä¸ä¸‹ã€‚</li></ol><ul><li>ä¸€å¥è¯ï¼Œæ€»ç»“ä¸‹ï¼Œdpèƒ½å¤Ÿè®©åŒä¸€æ•°å€¼åœ¨ä¸åŒçš„åˆ†è¾¨ç‡å±•ç¤ºå‡ºå¤§è‡´ç›¸åŒçš„å°ºå¯¸å¤§å°ã€‚ä½†æ˜¯å½“è®¾å¤‡çš„å°ºå¯¸å·®å¼‚è¾ƒå¤§çš„æ—¶å€™ï¼Œå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</li></ul><p>4.Androidå±å¹•é€‚é…å¸¸è§æ–¹æ³•</p><p>4.1 é€‚é…å¸¸è§æ–¹æ³•</p><ul><li>å°ºå¯¸é€‚é…</li><li>dimené€‚é…</li><li>å¸ƒå±€é€‚é…</li><li>ä»£ç é€‚é…</li><li>å›¾ç‰‡é€‚é…</li></ul><p>4.2 å°ºå¯¸é€‚é…</p><ul><li>4.2.1 å¸ƒå±€æ–‡ä»¶è®¾ç½®å®½é«˜</li><li>å®½é«˜è®¾ç½®å‚æ•°ï¼šæœ‰çš„æ—¶å€™ç”¨dpï¼Œæœ‰çš„æ—¶å€™ç”¨pxï¼Œå¤§å¤šæ•°ç”¨dp</li><li>dpï¼šdpï¼ˆdipï¼‰ï¼špx = dp * å¯†åº¦æ¯”ï¼Œä¸å±å¹•åƒç´ æœ‰å¯¹åº”å…³ç³»ï¼Œè®¾ç½®æˆdpåï¼Œåœ¨ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šæœ‰å¯èƒ½å°ºå¯¸ä¼šä¸ä¸€æ · pxï¼šåƒç´ ï¼Œæ¯”å¦‚å°åˆ†è¾¨ç‡æ‰‹æœºä¸Šä¸€åƒç´ å’Œå¤§åˆ†è¾¨ç‡æ‰‹æœºä¸Šä¸€åƒç´ ï¼Œæ‰€æ˜¾ç¤ºçš„å›¾åƒæ˜¯ä¸ä¸€æ ·çš„ ç†è§£dpå’Œpxä¹‹é—´å¯¹åº”çš„å…³ç³»ï¼Œä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºç”¨ä¸åŒçš„dpå€¼æ¥é€‚é…</li><li>4.2.2 å¯†åº¦æ¯”</li><li>å¯†åº¦æ¯”æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æŸ¥è¯¢æ–‡æ¡£Developâ€”>API Guidesâ€”>Best Practicesâ€”>Supporting Multiple mdpiæ‰‹æœºï¼š160dpi æ˜¯åŸºå‡†çº¿ï¼Œ1px = 1dp * 1ï¼Œå…¶ä»–æ‰‹æœºçš„å¯†åº¦æ¯” = è‡ªå·±çš„dpi/160</li><li>ä»£ç è·å–å¯†åº¦æ¯”ï¼šgetResources().getDisplayMetrics().density</li></ul><pre>ldipï¼š120px = 160dp * 0.75mdpiï¼š160px = 160dp * 1hdpiï¼š240px = 160dp * 1.5xhdpiï¼š360px = 180dp * 2</pre><ul><li>4.2.3 dimené€‚é…</li></ul><pre>1.åœ¨é»˜è®¤çš„valuesä¸­çš„dimensæ–‡ä»¶ä¸‹å£°æ˜(ç±»ä¼¼äºStrings.xml) &lt;dimen name="activity_horizontal_margin"&gt;16dp&lt;/dimen&gt; &lt;dimen name="activity_vertical_margin"&gt;16dp&lt;/dimen&gt; &lt;dimen name="harlWidth"&gt;160dp&lt;/dimen&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;!-- values-hdpi 480X800 --&gt; &lt;dimen name="imagewidth"&gt;120dip&lt;/dimen&gt; &lt;/resources&gt;&lt;resources&gt; &lt;!-- values-hdpi-1280x800 --&gt; &lt;dimen name="imagewidth"&gt;220dip&lt;/dimen&gt; &lt;/resources&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;!-- values-hdpi 480X320 --&gt; &lt;dimen name="imagewidth"&gt;80dip&lt;/dimen&gt; &lt;/resources&gt;2.åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨&lt;TextView android:layout_width="@dimen/harlWidth" android:layout_height="wrap_content" android:background="#0ff" android:text="@string/hello_world" /&gt;3.æ–°å»ºéœ€è¦é€‚é…çš„values-XXX(æ¯”å¦‚values-1280x720ï¼Œæ³¨æ„è§„èŒƒå¤§å€¼åœ¨å‰)4.åœ¨æ–°å»ºvalues-1280x720ä¸­çš„dimens.xmlæ–‡ä»¶ä¸­	* &lt;dimen name="harlWidth"&gt;180dp&lt;/dimen&gt;5.æ‰€æœ‰æ‰‹æœºé€‚é…æ‰¾å¯¹åº”çš„é»˜è®¤çš„dimens	* æ€è€ƒï¼šå¦‚ä½•è®¡ç®—dpiï¼Ÿå¦‚ä½•è®¡ç®—æ‰‹æœºå¯†åº¦æ¯”ï¼Ÿèƒ½å¤Ÿç”¨dpé€‚é…æ‰€æœ‰æ‰‹æœºå—ï¼Ÿ	* dpä¸èƒ½é€‚é…æ‰€æœ‰æ‰‹æœºï¼›	* ä¸¾ä¸ªä¾‹å­ï¼šæŒ‰é’®å å±å¹•å®½åº¦ä¸€åŠï¼ŒæŠŠå®½åº¦è®¾ç½®æˆ160dpï¼Œ120pxå’Œ160pxå’Œ240pxå¯ä»¥å å±å¹•ä¸€åŠï¼Œä½†æ˜¯360pxåˆ™å°äºå±å¹•ä¸€åŠï¼›	* å¦‚æœæŠŠå®½åº¦è®¾ç½®æˆ180dpï¼Œé‚£ä¹ˆ360dpå¯ä»¥å å±å¹•ä¸€åŠï¼Œä½†å…¶ä»–å‡ ä¸ªåˆä¸è¡Œã€‚	* å¦‚æœè¦é€‚é…æ‰€æœ‰æ‰‹æœºçš„æ§ä»¶å®½åº¦ä¸ºå±å¹•å®½åº¦çš„ä¸€åŠï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç”¨dimen</pre><p>4.2 ä»£ç é€‚é…</p><p>4.3 å¸ƒå±€é€‚é…ï¼Œæœ‰å¯èƒ½åœ¨ä¸åŒçš„æ‰‹æœºå¸ƒå±€ä¸­ï¼Œæ§ä»¶æ’åˆ—çš„ä½ç½®ä¸ä¸€æ ·</p><ul><li>1.ä½ç½®ä¸ä¸€æ ·</li><li class=ql-indent-1>ä¸åŒçš„æ‰‹æœºåœ¨è¿è¡Œçš„æ—¶å€™é€‰æ‹©ä¸åŒçš„å¸ƒå±€(å¸ƒå±€åç§°ä¸€æ ·ï¼Œç±»ä¼¼äºdimens)ï¼Œæ¯”å¦‚ï¼š</li><li>2.æ§ä»¶ä¸ä¸€æ ·</li><li class=ql-indent-1>ä¸èƒ½ç”¨å¸ƒå±€é€‚é…äº†ï¼›ä¸ºä»€ä¹ˆï¼Ÿ</li><li class=ql-indent-1>å¸ƒå±€èƒ½å¤Ÿå®ç°ç•Œé¢æ•ˆæœï¼Œä½†æ˜¯å®Œæˆå¸ƒå±€ååœ¨ä»£ç ä¸­ï¼Œç”±äºæ§ä»¶éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šæ‰¾è¿™ä¸¤å¥—å¸ƒå±€çš„idï¼Œè¿˜è¦åšåˆ¤æ–­ï¼Œæ ¹æ®ä¸åŒçš„å¸ƒå±€åšä¸¤å¥—ä»£ç (å¦‚æœé¡µé¢å¤æ‚ï¼Œç»™æ§ä»¶è®¾ç½®å‚æ•°ç­‰ååˆ†ç¹ç)</li><li>3.é€‚ç”¨åœºæ™¯</li><li class=ql-indent-1>ä¸åŒçš„æ‰‹æœºçš„æ§ä»¶çš„ä½ç½®ä¸ä¸€æ ·ï¼Œå‘ç”Ÿäº†ä½ç½®å˜åŒ–æ‰ä¼šç”¨åˆ°å¸ƒå±€é€‚é…ï¼Œå®é™…å¼€å‘ä¸­ç”¨çš„å¾ˆå°‘</li></ul><p>4.4 æƒé‡é€‚é…</p><p>4.5 å›¾ç‰‡é€‚é…</p><ul><li>1.å›¾ç‰‡çš„æŸ¥æ‰¾é¡ºåº</li><li class=ql-indent-1>æ³¨æ„ï¼šä¸€èˆ¬æ‰‹æœº ldpi&lt;drawable&lt;mdpi&lt;hdpi&lt;xhdpi&lt;xxhdpi å…ˆæ‰¾è‡ªå·±å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå†æ‰¾å¤§åˆ†è¾¨ç‡ï¼Œå†æ‰¾å°åˆ†è¾¨ç‡</li><li class=ql-indent-1>æ³¨æ„ï¼šmdpiæ‰‹æœº ldpi&lt;mdpi&lt;drawable&lt;hdpi&lt;xhdpi&lt;xxhdpi å…ˆæ‰¾è‡ªå·±å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œæ‰¾drawableæ–‡ä»¶å¤¹ï¼Œå†æ‰¾å¤§åˆ†è¾¨ç‡ï¼Œå†æ‰¾å°åˆ†è¾¨ç‡</li><li class=ql-indent-1>é€‚é…ä¸»æµæ‰‹æœºï¼Œ1920 * 1080 1080 * 720 800 * 480ï¼Œé«˜æ¸…å›¾ã€èƒŒæ™¯å›¾ï¼ˆå…¨å±å±•ç¤ºï¼‰å‡†å¤‡å¤šå¥— ã€‚å°å›¾ç‰‡ å‡†å¤‡ä¸€å¥—é«˜åˆ†è¾¨ç‡çš„ï¼›æ¯”å¦‚æŒ‰é’®ï¼Œå›¾æ ‡ç­‰</li><li class=ql-indent-1>ä¸ºäº†æ˜¯apkç˜¦èº«ï¼Œæœ‰äº›å›¾ç‰‡ä¸è¦å‡†å¤‡å¤šå¥—ï¼ŒAndroidåˆ†è¾¨ç‡ç§ç±»å¤ªå¤šäº†ï¼›å³ä½¿é€‚é…ä¸»æµæ‰‹æœºï¼Œå±•ç¤ºæ¯”è¾ƒæ¸…æ¥šçš„èƒŒæ™¯å›¾(æ¯”å¦‚ï¼šæ¬¢è¿ç•Œé¢)ï¼Œå¯ä»¥å‡†å¤‡å¤šå¥—</li><li>2.åœ¨å°åˆ†è¾¨ç‡å±•ç¤ºé«˜æ¸…å›¾ï¼Œæ”¾åˆ°å¤§åˆ†è¾¨ç‡ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</li><li class=ql-indent-1>æ¯”å¦‚ï¼šä½ é’ˆå¯¹800<em>480åˆ†è¾¨ç‡æ‰‹æœºåšäº†èƒŒæ™¯å›¾å›¾ç‰‡ï¼Œæ­£å¥½å®Œå…¨å±•ç¤ºï¼›å¦‚æœæŠŠå®ƒæ”¾åˆ°å¤§åˆ†è¾¨ç‡1280</em>720ä¸Šï¼Œä¼šå¯¹å›¾ç‰‡è¿›è¡Œæ‹‰ä¼¸ï¼Œä¼šä½¿åƒç´ ç‚¹å˜å¤§ï¼Œå¯èƒ½ä¼šçœ‹åˆ°é”¯é½¿æˆ–è€…æ¨¡ç³Šçš„ä¸œè¥¿</li></ul><p>5.å­˜åœ¨é—®é¢˜å’Œå›°å¢ƒ</p><p>5.1 é€šé…ç¬¦é€‚é…å›°å¢ƒ</p><p>5.2 ä¼ ç»Ÿdpé€‚é…å›°å¢ƒ</p><ul><li>[<strong>æ‘˜è‡ªå¤´æ¡</strong>]ä¸€èˆ¬æˆ‘ä»¬è®¾è®¡å›¾éƒ½æ˜¯ä»¥å›ºå®šçš„å°ºå¯¸æ¥è®¾è®¡çš„ã€‚æ¯”å¦‚ä»¥åˆ†è¾¨ç‡750px * 1334pxæ¥è®¾è®¡ï¼Œä»¥densityä¸º3æ¥æ ‡æ³¨ï¼Œä¹Ÿå°±æ˜¯å±å¹•å…¶å®æ˜¯350dp * 667dpã€‚å¦‚æœæƒ³åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šæ˜¾ç¤ºå®Œå…¨ä¸€è‡´ï¼Œå…¶å®æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºå±å¹•é«˜å®½æ¯”ä¸æ˜¯å›ºå®šçš„ï¼Œå„ç§å®½é«˜æ¯”å±‚å‡ºä¸ç©·ï¼Œå®½é«˜æ¯”ä¸åŒï¼Œæ˜¾ç¤ºå®Œå…¨ä¸€è‡´å°±ä¸å¯èƒ½äº†ã€‚ä½†æ˜¯é€šå¸¸ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä»¥å®½æˆ–é«˜ä¸€ä¸ªç»´åº¦å»é€‚é…ï¼Œæ¯”å¦‚æˆ‘ä»¬Feedæ˜¯ä¸Šä¸‹æ»‘åŠ¨çš„ï¼Œåªéœ€è¦ä¿è¯åœ¨æ‰€æœ‰è®¾å¤‡ä¸­å®½çš„ç»´åº¦ä¸Šæ˜¾ç¤ºä¸€è‡´å³å¯ï¼Œå†æ¯”å¦‚ä¸€ä¸ªä¸æ”¯æŒä¸Šä¸‹æ»‘åŠ¨çš„é¡µé¢ï¼Œé‚£ä¹ˆéœ€è¦ä¿è¯åœ¨é«˜è¿™ä¸ªç»´åº¦ä¸Šéƒ½æ˜¾ç¤ºä¸€è‡´ï¼Œå°¤å…¶ä¸èƒ½å­˜åœ¨æŸäº›è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸å…¨çš„æƒ…å†µã€‚åŒæ—¶è€ƒè™‘åˆ°ç°åœ¨åŸºæœ¬éƒ½æ˜¯ä»¥dpä¸ºå•ä½å»åšçš„é€‚é…ï¼Œå¦‚æœæ–°çš„æ–¹æ¡ˆä¸æ”¯æŒdpï¼Œé‚£ä¹ˆè¿ç§»æˆæœ¬ä¹Ÿéå¸¸é«˜ã€‚</li><li>å› æ­¤ï¼Œæ€»ç»“ä¸‹å¤§è‡´éœ€æ±‚å¦‚ä¸‹ï¼š</li><li class=ql-indent-1><strong>æ”¯æŒä»¥å®½æˆ–è€…é«˜ä¸€ä¸ªç»´åº¦å»é€‚é…ï¼Œä¿æŒè¯¥ç»´åº¦ä¸Šå’Œè®¾è®¡å›¾ä¸€è‡´ï¼›æ³¨æ„æ˜¯æŸä¸€ä¸ªç»´åº¦</strong></li><li class=ql-indent-1>æ”¯æŒdpå’Œspå•ä½ï¼Œæ§åˆ¶è¿ç§»æˆæœ¬åˆ°æœ€å°ã€‚</li></ul><p>6.å¸¸ç”¨é€‚é…æ¡†æ¶</p><p>6.1 ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ</p><ul><li><strong>6.1.1 å…¼å®¹çªç ´å£</strong></li><li>ä»dpå’Œpxçš„è½¬æ¢å…¬å¼ ï¼špx = dp * density</li><li>å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœè®¾è®¡å›¾å®½ä¸º360dpï¼Œæƒ³è¦ä¿è¯åœ¨æ‰€æœ‰è®¾å¤‡è®¡ç®—å¾—å‡ºçš„pxå€¼éƒ½æ­£å¥½æ˜¯å±å¹•å®½åº¦çš„è¯ï¼Œæˆ‘ä»¬åªèƒ½ä¿®æ”¹ density çš„å€¼ã€‚</li></ul><pre>//åœ¨xmlä¸­ä½¿ç”¨ä½•ç§å°ºå¯¸å•ä½ï¼ˆdpã€spã€ptã€inã€mmï¼‰,æœ€ååœ¨ç»˜åˆ¶æ—¶éƒ½ä¼šç»™æˆ‘ä»¬è½¬æˆpx!public static float applyDimension(int unit, float value, DisplayMetrics metrics) { switch (unit) { case COMPLEX_UNIT_PX: return value; case COMPLEX_UNIT_DIP: return value * metrics.density; case COMPLEX_UNIT_SP: return value * metrics.scaledDensity; case COMPLEX_UNIT_PT: return value * metrics.xdpi * (1.0f/72); case COMPLEX_UNIT_IN: return value * metrics.xdpi; case COMPLEX_UNIT_MM: return value * metrics.xdpi * (1.0f/25.4f); } return 0;}</pre><ul><li><strong>6.1.2 å¤´æ¡é€‚é…æ–¹æ¡ˆæ ¸å¿ƒä»£ç </strong></li></ul><pre>public static void setCustomDensity(Activity activity, Application application) { DisplayMetrics displayMetrics = application.getResources().getDisplayMetrics(); if (sNoncompatDensity == 0) { // ç³»ç»Ÿçš„Density sNoncompatDensity = displayMetrics.density; // ç³»ç»Ÿçš„ScaledDensity sNoncompatScaledDensity = displayMetrics.scaledDensity; // ç›‘å¬åœ¨ç³»ç»Ÿè®¾ç½®ä¸­åˆ‡æ¢å­—ä½“ application.registerComponentCallbacks(new ComponentCallbacks() { @Override public void onConfigurationChanged(Configuration newConfig) { if (newConfig != null &amp;&amp; newConfig.fontScale &gt; 0) { sNoncompatScaledDensity=application.getResources().getDisplayMetrics().scaledDensity; } } @Override public void onLowMemory() { } }); } // å…¬å¸UIå°ºå¯¸æ˜¯750px-1334pxï¼Œæ­¤å¤„ä»¥375dpçš„è®¾è®¡å›¾ä½œä¸ºä¾‹å­ float targetDensity=displayMetrics.widthPixels/375; float targetScaledDensity=targetDensity*(sNoncompatScaledDensity/sNoncompatDensity); int targetDensityDpi= (int) (160 * targetDensity); displayMetrics.density = targetDensity; displayMetrics.scaledDensity = targetScaledDensity; displayMetrics.densityDpi = targetDensityDpi; DisplayMetrics activityDisplayMetrics = activity.getResources().getDisplayMetrics(); activityDisplayMetrics.density = targetDensity; activityDisplayMetrics.scaledDensity = targetScaledDensity; activityDisplayMetrics.densityDpi = targetDensityDpi;}</pre><ul><li><strong>6.1.3 å¤´æ¡é€‚é…æ–¹æ¡ˆæ³¨æ„äº‹é¡¹</strong></li><li>å®½åº¦é€‚é…å°±å·²ç»å®Œæˆå•¦ï¼Œåªéœ€è¦åœ¨Activityä¸­è°ƒç”¨å°±è¡Œäº†ï¼Œå¿…é¡»åœ¨setContentView()ä¹‹å‰ï¼</li><li>å¦‚æœéœ€è¦é€‚é…é«˜åº¦ï¼Œå¤´æ¡æŒ‡å‡ºåªè¦æŒ‰ç…§åŒæ ·çš„æ–¹æ³•åšé«˜åº¦é€‚é…å°±å¯ä»¥äº†ï¼</li><li>å®ç°æ€è·¯ï¼šå‡è®¾è®¾è®¡å›¾å®½åº¦æ˜¯360dpï¼Œä»¥å®½ç»´åº¦æ¥é€‚é…ï¼Œé‚£ä¹ˆé€‚é…åçš„ density = è®¾å¤‡çœŸå®å®½(å•ä½px) / 360ï¼Œæ¥ä¸‹æ¥åªéœ€è¦æŠŠæˆ‘ä»¬è®¡ç®—å¥½çš„ density åœ¨ç³»ç»Ÿä¸­ä¿®æ”¹ä¸‹å³å¯</li><li>é‡åˆ°çš„é—®é¢˜ï¼š</li><li class=ql-indent-1>1.å¦‚æœæŸä¸ªé¡µé¢ä¸æƒ³é€‚é…è¯¥æ–¹æ¡ˆï¼Œè¯¥å¦‚ä½•å¤„ç†</li><li class=ql-indent-1>2.æ»šåŠ¨é¡µé¢ä»¥å®½ä¸ºç»´åº¦é€‚é…ï¼Œè€ŒæŸäº›é¡µé¢åˆ™æ˜¯ä»¥é«˜ä¸ºç»´åº¦é€‚é…ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆåŠï¼Ÿ</li><li class=ql-indent-1>3.é’ˆå¯¹ç¬¬ä¸‰æ–¹åº“æœ‰ä½•æ›´å¥½çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜å¼¹çª—ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹å®¢æœèŠå¤©é¡µé¢å¦‚ä½•å¤„ç†é€‚é…</li><li><strong>6.1.4 å¤´æ¡é€‚é…å·¥å…·ç±»ï¼Œæš‚æ—¶åªæ˜¯ç”¨ä½œæµ‹è¯•é¡¹ç›®</strong></li><li>å…³äºè¯¥å·¥å…·ç±»ï¼Œå·²ç»ç”¨äºæµ‹è¯•é¡¹ç›®ä¸­ï¼Œé€æ­¥å®Œå–„ï¼Œé¡¹ç›®å¯ä»¥å‚è€ƒï¼šhttps://github.com/yangchong211/YCVideoPlayer</li></ul><pre>public class ScreenDensityUtils { /* * 1.å…ˆåœ¨applicationä¸­ä½¿ç”¨setup()æ–¹æ³•åˆå§‹åŒ–ä¸€ä¸‹ * 2.æ‰‹åŠ¨åœ¨Activityä¸­è°ƒç”¨match()æ–¹æ³•åšé€‚é…ï¼Œå¿…é¡»åœ¨setContentView()ä¹‹å‰ * 3.å»ºè®®ä½¿ç”¨dpåšå®½åº¦é€‚é…ï¼Œå¤§å¤šæ•°æ—¶å€™å®½åº¦é€‚é…æ‰æ˜¯ä¸»æµéœ€è¦ * 4.ä¸ªäººè§‰å¾—åœ¨å†™å¸ƒå±€çš„æ—¶å€™ï¼Œå¯ä»¥å¤šç”¨dpï¼Œå¦‚æœæ˜¯ä½¿ç”¨pxï¼Œå»ºè®®è½¬åŒ–æˆdp * 5.å…¥ä¾µæ€§å¾ˆä½ï¼Œä¸éœ€è¦æ”¹åŠ¨åŸæ¥çš„ä»£ç  */ /** * å±å¹•é€‚é…çš„åŸºå‡† */ private static final int MATCH_BASE_WIDTH = 0; private static final int MATCH_BASE_HEIGHT = 1; /** * é€‚é…å•ä½ */ private static final int MATCH_UNIT_DP = 0; private static final int MATCH_UNIT_PT = 1; // é€‚é…ä¿¡æ¯ private static MatchInfo sMatchInfo; // Activity çš„ç”Ÿå‘½å‘¨æœŸç›‘æµ‹ private static Application.ActivityLifecycleCallbacks mActivityLifecycleCallback; private ScreenDensityUtils() { throw new UnsupportedOperationException("u can't instantiate me..."); } /** * åˆå§‹åŒ– * @param application éœ€è¦åœ¨applicationä¸­åˆå§‹åŒ– */ public static void setup(@NonNull final Application application) { /* //è·å–å±å¹•åˆ†è¾¨ç‡ä¿¡æ¯çš„ä¸‰ç§æ–¹æ³• //ç¬¬ä¸€ç§ DisplayMetrics metrics = new DisplayMetrics(); Display display = activity.getWindowManager().getDefaultDisplay(); display.getMetrics(metrics); //ç¬¬äºŒç§ DisplayMetrics metrics= activity.getResources().getDisplayMetrics(); //ç¬¬ä¸‰ç§ Resources.getSystem().getDisplayMetrics(); */ //æ³¨æ„è¿™ä¸ªæ˜¯è·å–ç³»ç»Ÿçš„displayMetrics final DisplayMetrics displayMetrics = application.getResources().getDisplayMetrics(); if (sMatchInfo == null) { // è®°å½•ç³»ç»Ÿçš„åŸå§‹å€¼ sMatchInfo = new MatchInfo(); sMatchInfo.setScreenWidth(displayMetrics.widthPixels); sMatchInfo.setScreenHeight(displayMetrics.heightPixels); sMatchInfo.setAppDensity(displayMetrics.density); sMatchInfo.setAppDensityDpi(displayMetrics.densityDpi); sMatchInfo.setAppScaledDensity(displayMetrics.scaledDensity); sMatchInfo.setAppXdpi(displayMetrics.xdpi); } // æ·»åŠ å­—ä½“å˜åŒ–çš„ç›‘å¬ // è°ƒç”¨ Application#registerComponentCallbacks æ³¨å†Œä¸‹ onConfigurationChanged ç›‘å¬å³å¯ã€‚ application.registerComponentCallbacks(new ComponentCallbacks() { @Override public void onConfigurationChanged(Configuration newConfig) { // å­—ä½“æ”¹å˜å,å°† appScaledDensity é‡æ–°èµ‹å€¼ if (newConfig != null &amp;&amp; newConfig.fontScale &gt; 0) { float scaledDensity = displayMetrics.scaledDensity; sMatchInfo.setAppScaledDensity(scaledDensity); } } @Override public void onLowMemory() { } }); } /** * åœ¨ application ä¸­å…¨å±€æ¿€æ´»é€‚é…ï¼ˆä¹Ÿå¯å•ç‹¬ä½¿ç”¨ match() æ–¹æ³•åœ¨æŒ‡å®šé¡µé¢ä¸­é…ç½®é€‚é…ï¼‰ */ @RequiresApi(api = Build.VERSION_CODES.ICE_CREAM_SANDWICH) public static void register(@NonNull final Application application, final float designSize, final int matchBase, final int matchUnit) { if (mActivityLifecycleCallback == null) { mActivityLifecycleCallback = new Application.ActivityLifecycleCallbacks() { @Override public void onActivityCreated(Activity activity, Bundle savedInstanceState) { if (activity != null) { match(activity, designSize, matchBase, matchUnit); } } @Override public void onActivityStarted(Activity activity) { } @Override public void onActivityResumed(Activity activity) { } @Override public void onActivityPaused(Activity activity) { } @Override public void onActivityStopped(Activity activity) { } @Override public void onActivitySaveInstanceState(Activity activity, Bundle outState) { } @Override public void onActivityDestroyed(Activity activity) { } }; application.registerActivityLifecycleCallbacks(mActivityLifecycleCallback); } } /** * å…¨å±€å–æ¶ˆæ‰€æœ‰çš„é€‚é… */ @RequiresApi(api = Build.VERSION_CODES.ICE_CREAM_SANDWICH) public static void unregister(@NonNull final Application application, @NonNull int... matchUnit) { if (mActivityLifecycleCallback != null) { application.unregisterActivityLifecycleCallbacks(mActivityLifecycleCallback); mActivityLifecycleCallback = null; } for (int unit : matchUnit) { cancelMatch(application, unit); } } /** * é€‚é…å±å¹•ï¼ˆæ”¾åœ¨ Activity çš„ setContentView() ä¹‹å‰æ‰§è¡Œï¼‰ * * @param context ä¸Šä¸‹æ–‡ * @param designSize è®¾è®¡å›¾çš„å°ºå¯¸ */ public static void match(@NonNull final Context context, final float designSize) { match(context, designSize, MATCH_BASE_WIDTH, MATCH_UNIT_DP); } /** * é€‚é…å±å¹•ï¼ˆæ”¾åœ¨ Activity çš„ setContentView() ä¹‹å‰æ‰§è¡Œï¼‰ * * @param context ä¸Šä¸‹æ–‡ * @param designSize è®¾è®¡å›¾çš„å°ºå¯¸ * @param matchBase é€‚é…åŸºå‡† */ public static void match(@NonNull final Context context, final float designSize, int matchBase) { match(context, designSize, matchBase, MATCH_UNIT_DP); } /** * é€‚é…å±å¹•ï¼ˆæ”¾åœ¨ Activity çš„ setContentView() ä¹‹å‰æ‰§è¡Œï¼‰ * * @param context ä¸Šä¸‹æ–‡ * @param designSize è®¾è®¡å›¾çš„å°ºå¯¸ * @param matchBase é€‚é…åŸºå‡† * @param matchUnit ä½¿ç”¨çš„é€‚é…å•ä½ */ private static void match(@NonNull final Context context, final float designSize, int matchBase, int matchUnit) { if (designSize == 0) { throw new UnsupportedOperationException("The designSize cannot be equal to 0"); } if (matchUnit == MATCH_UNIT_DP) { matchByDP(context, designSize, matchBase); } else if (matchUnit == MATCH_UNIT_PT) { matchByPT(context, designSize, matchBase); } } /** * é‡ç½®é€‚é…ä¿¡æ¯ï¼Œå–æ¶ˆé€‚é… */ public static void cancelMatch(@NonNull final Context context) { cancelMatch(context, MATCH_UNIT_DP); cancelMatch(context, MATCH_UNIT_PT); } /** * é‡ç½®é€‚é…ä¿¡æ¯ï¼Œå–æ¶ˆé€‚é… * * @param context ä¸Šä¸‹æ–‡ * @param matchUnit éœ€è¦å–æ¶ˆé€‚é…çš„å•ä½ */ private static void cancelMatch(@NonNull final Context context, int matchUnit) { if (sMatchInfo != null) { final DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics(); if (matchUnit == MATCH_UNIT_DP) { if (displayMetrics.density != sMatchInfo.getAppDensity()) { displayMetrics.density = sMatchInfo.getAppDensity(); } if (displayMetrics.densityDpi != sMatchInfo.getAppDensityDpi()) { displayMetrics.densityDpi = (int) sMatchInfo.getAppDensityDpi(); } if (displayMetrics.scaledDensity != sMatchInfo.getAppScaledDensity()) { displayMetrics.scaledDensity = sMatchInfo.getAppScaledDensity(); } } else if (matchUnit == MATCH_UNIT_PT) { if (displayMetrics.xdpi != sMatchInfo.getAppXdpi()) { displayMetrics.xdpi = sMatchInfo.getAppXdpi(); } } } } public static MatchInfo getMatchInfo() { return sMatchInfo; } /** * ä½¿ç”¨ dp ä½œä¸ºé€‚é…å•ä½ï¼ˆé€‚åˆåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œåœ¨è€é¡¹ç›®ä¸­ä½¿ç”¨ä¼šå¯¹åŸæ¥æ—¢æœ‰çš„ dp å€¼äº§ç”Ÿå½±å“ï¼‰ * &lt;br&gt; * &lt;ul&gt; * dp ä¸ px ä¹‹é—´çš„æ¢ç®—: * &lt;li&gt; px = density * dp &lt;/li&gt; * &lt;li&gt; density = dpi / 160 &lt;/li&gt; * &lt;li&gt; px = dp * (dpi / 160) &lt;/li&gt; * &lt;/ul&gt; * * @param context ä¸Šä¸‹æ–‡ * @param designSize è®¾è®¡å›¾çš„å®½/é«˜ï¼ˆå•ä½: dpï¼‰ * @param base é€‚é…åŸºå‡† */ private static void matchByDP(@NonNull final Context context, final float designSize, int base) { final float targetDensity; if (base == MATCH_BASE_WIDTH) { targetDensity = sMatchInfo.getScreenWidth() * 1f / designSize; } else if (base == MATCH_BASE_HEIGHT) { targetDensity = sMatchInfo.getScreenHeight() * 1f / designSize; } else { targetDensity = sMatchInfo.getScreenWidth() * 1f / designSize; } final int targetDensityDpi = (int) (targetDensity * 160); final float targetScaledDensity = targetDensity * (sMatchInfo.getAppScaledDensity() / sMatchInfo.getAppDensity()); final DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics(); displayMetrics.density = targetDensity; displayMetrics.densityDpi = targetDensityDpi; displayMetrics.scaledDensity = targetScaledDensity; } /** * ä½¿ç”¨ pt ä½œä¸ºé€‚é…å•ä½ï¼ˆå› ä¸º pt æ¯”è¾ƒå†·é—¨ï¼Œæ–°è€é¡¹ç›®çš†é€‚åˆä½¿ç”¨ï¼›ä¹Ÿå¯ä½œä¸º dp é€‚é…çš„è¡¥å……ï¼Œ * åœ¨éœ€è¦åŒæ—¶é€‚é…å®½åº¦å’Œé«˜åº¦æ—¶ï¼Œä½¿ç”¨ pt æ¥é€‚é… dp æœªé€‚é…çš„å®½åº¦æˆ–é«˜åº¦ï¼‰ * &lt;br/&gt; * &lt;p&gt; pt è½¬ px ç®—æ³•: pt * metrics.xdpi * (1.0f/72) &lt;/p&gt; * * @param context ä¸Šä¸‹æ–‡ * @param designSize è®¾è®¡å›¾çš„å®½/é«˜ï¼ˆå•ä½: ptï¼‰ * @param base é€‚é…åŸºå‡† */ private static void matchByPT(@NonNull final Context context, final float designSize, int base) { final float targetXdpi; if (base == MATCH_BASE_WIDTH) { targetXdpi = sMatchInfo.getScreenWidth() * 72f / designSize; } else if (base == MATCH_BASE_HEIGHT) { targetXdpi = sMatchInfo.getScreenHeight() * 72f / designSize; } else { targetXdpi = sMatchInfo.getScreenWidth() * 72f / designSize; } final DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics(); displayMetrics.xdpi = targetXdpi; } /** * é€‚é…ä¿¡æ¯ */ private static class MatchInfo { private int screenWidth; private int screenHeight; private float appDensity; private float appDensityDpi; private float appScaledDensity; private float appXdpi; int getScreenWidth() { return screenWidth; } void setScreenWidth(int screenWidth) { this.screenWidth = screenWidth; } int getScreenHeight() { return screenHeight; } void setScreenHeight(int screenHeight) { this.screenHeight = screenHeight; } float getAppDensity() { return appDensity; } void setAppDensity(float appDensity) { this.appDensity = appDensity; } float getAppDensityDpi() { return appDensityDpi; } void setAppDensityDpi(float appDensityDpi) { this.appDensityDpi = appDensityDpi; } float getAppScaledDensity() { return appScaledDensity; } void setAppScaledDensity(float appScaledDensity) { this.appScaledDensity = appScaledDensity; } float getAppXdpi() { return appXdpi; } void setAppXdpi(float appXdpi) { this.appXdpi = appXdpi; } }}</pre><p>6.2 é¸¿æ´‹å¤§AutoLayoutæ¡†æ¶</p><ul><li>æˆ‘è®°å¾—ä¸Šä¸Šä¸€ä¸ªå…¬å¸çš„é¡¹ç›®æŠ•èµ„ç•Œå°±æ˜¯ç”¨çš„è¿™ä¸ªå±å¹•é€‚é…åº“â€¦â€¦å“ˆå“ˆ</li><li>è¯¥åº“çš„æƒ³æ³•éå¸¸å¥½ï¼šå¯¹ç…§è®¾è®¡å›¾ï¼Œä½¿ç”¨pxç¼–å†™å¸ƒå±€ï¼Œä¸å½±å“é¢„è§ˆï¼›ç»˜åˆ¶é˜¶æ®µå°†å¯¹åº”è®¾è®¡å›¾çš„pxæ•°å€¼è®¡ç®—è½¬æ¢ä¸ºå½“å‰å±å¹•ä¸‹é€‚é…çš„å¤§å°ï¼›ä¸ºç®€åŒ–æ¥å…¥ï¼Œinflateæ—¶è‡ªåŠ¨å°†å„Layoutè½¬æ¢ä¸ºå¯¹åº”çš„AutoLayoutï¼Œä»è€Œä¸éœ€è¦åœ¨æ‰€æœ‰çš„xmlä¸­æ›´æ”¹ã€‚ä½†æ˜¯åŒæ—¶è¯¥åº“ä¹Ÿå­˜åœ¨ä»¥ä¸‹ç­‰é—®é¢˜ï¼š</li><li class=ql-indent-1>æ‰©å±•æ€§è¾ƒå·®ã€‚å¯¹äºæ¯ä¸€ç§ViewGroupéƒ½è¦å¯¹åº”ç¼–å†™å¯¹åº”çš„AutoLayoutè¿›è¡Œæ‰©å±•ï¼Œå¯¹äºå„Viewçš„æ¯ä¸ªéœ€è¦é€‚é…çš„å±æ€§éƒ½è¦ç¼–å†™ä»£ç è¿›è¡Œé€‚é…æ‰©å±•ï¼›</li><li class=ql-indent-1>åœ¨onMeasureé˜¶æ®µè¿›è¡Œæ•°å€¼è®¡ç®—ã€‚æ¶ˆè€—æ€§èƒ½ï¼Œå¹¶ä¸”è¿™å¯¹äºéLayoutParamsä¸­çš„å±æ€§å­˜åœ¨è¾ƒå¤šä¸åˆç†ä¹‹å¤„ã€‚æ¯”å¦‚åœ¨onMeasureæ—¶å¯¹TextViewçš„textSizeè¿›è¡Œæ¢ç®—å¹¶setTextSizeï¼Œé‚£ä¹ˆç©å®¶åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®çš„textSizeéƒ½ä¼šå¤±æ•ˆï¼Œå› ä¸ºåœ¨æ¯æ¬¡onMesasureæ—¶éƒ½ä¼šé‡æ–°è¢«AutoLayouté‡æ–°è®¾ç½®è¦†ç›–ã€‚</li><li class=ql-indent-1>issueè¾ƒå¤šå¹¶ä¸”ä½œè€…å·²ä¸å†ç»´æŠ¤ã€‚</li><li class=ql-indent-1>ä¸ªäººè§‰å¾—AutoLayoutçš„è®¾è®¡æ€æƒ³éå¸¸ä¼˜ç§€ï¼Œä½†æ˜¯å°†LayoutParamsä¸å±æ€§ä½œä¸ºåˆ‡å…¥å£åœ¨mesureè¿‡ç¨‹ä¸­è¿›è¡Œè½¬æ¢è®¡ç®—çš„æ–¹æ¡ˆå­˜åœ¨æ•ˆç‡ä¸æ‰©å±•æ€§ç­‰æ–¹é¢çš„é—®é¢˜ã€‚é‚£ä¹ˆAndroidè®¡ç®—é•¿åº¦çš„æ”¶å£åœ¨å“ªé‡Œï¼Œèƒ½ä¸èƒ½åœ¨Androidè®¡ç®—é•¿åº¦æ—¶è¿›è¡Œæ¢ç®—å‘¢ï¼Ÿå¦‚æœèƒ½åœ¨Androidè®¡ç®—é•¿åº¦æ—¶è¿›è¡Œæ¢ç®—ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ä¸€ç³»åˆ—å¤šä½™çš„è®¡ç®—ä»¥åŠé€‚é…ï¼Œä¸€åˆ‡é—®é¢˜å°±éƒ½è¿åˆƒè€Œè§£äº†</li></ul><p>6.3 AndroidAutoSize</p><ul><li>å·²ç»ç”¨äºç°åœ¨æ­£å¼åº“ï¼Œä»£ç é‡å¤šï¼Œä¸”æ³¨é‡Šä¹Ÿæ¯”è¾ƒé¡¹ç›®ï¼Œä½œè€…æ›´æ–°å¾ˆé¢‘ç¹ï¼ŒæåŠ›ç»´æŠ¤å¹¶è§£å†³bugï¼Œéå¸¸ä¸é”™ï¼</li></ul></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Android','é€‚é…','å±å¹•'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/e02acf09.html alt="Android å±å¹•é€‚é…æ–¹æ¡ˆ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/52ae2d768efe44fe8ee014686a45271d style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/e02acf09.html title="Android å±å¹•é€‚é…æ–¹æ¡ˆ">Android å±å¹•é€‚é…æ–¹æ¡ˆ</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>