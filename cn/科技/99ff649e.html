<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Python2 å’Œ Python3 çš„åŒºåˆ«åŠå…¼å®¹æŠ€å·§ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Python2 å’Œ Python3 çš„åŒºåˆ«åŠå…¼å®¹æŠ€å·§ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/99ff649e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/99ff649e.html><meta property="article:published_time" content="2020-11-14T21:05:09+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:09+08:00"><meta name=Keywords content><meta name=description content="Python2 å’Œ Python3 çš„åŒºåˆ«åŠå…¼å®¹æŠ€å·§"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/99ff649e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Python2 å’Œ Python3 çš„åŒºåˆ«åŠå…¼å®¹æŠ€å·§</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>å‰è¨€</p><p class=ql-align-justify>æœ€è¿‘ Python ä¹‹çˆ¶ Guido van Rossumï¼ˆé¾Ÿçˆ·ï¼‰ç»ˆäºåœ¨ Python å®˜æ–¹é‚®ä»¶ç»„è½å®äº† Python 2.7 çš„ç»ˆç„‰ä¹‹æ—¥ï¼ˆEOLï¼‰ã€‚</p><p class=ql-align-justify>è¯´çš„æ˜¯ Python 2.7 çš„ EOL æ—¥æœŸæœ€ç»ˆç¡®å®šä¸º 2020 å¹´ 1 æœˆ 1 æ—¥ï¼Œä¹‹åä¸ä¼šæœ‰ä»»ä½•æ›´æ–°ï¼ŒåŒ…æ‹¬æºç çš„å®‰å…¨è¡¥ä¸ã€‚</p><p class=ql-align-justify>æ‰€ä»¥å…¼å®¹Python3å·²ç»å¯ä»¥è¯´éå¸¸å¿…è¦äº†ï¼Œä½†æœ‰äº›å¸¸ç”¨çš„åº“è¿˜æ²¡æœ‰å‡çº§åˆ°Python3ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•å†™å‡ºå…¼å®¹2å’Œ3çš„ä»£ç ã€‚</p><p>Python 2 or 3 ï¼Ÿ</p><p class=ql-align-justify>Python 3 è¢«é’¦å®šä¸º Python çš„æœªæ¥ï¼Œäº 2008 å¹´æœ«å‘å¸ƒï¼Œæ˜¯ç›®å‰æ­£åœ¨å¼€å‘çš„ç‰ˆæœ¬ã€‚æ—¨åœ¨è§£å†³å’Œä¿®æ­£ Python 2 é—ç•™çš„è®¾è®¡ç¼ºé™·ã€æ¸…ç†ä»£ç åº“å†—ä½™ã€è¿½æ±‚æœ‰ä¸”ä»…æœ‰ä¸€ç§æœ€ä½³å®è·µæ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡ç­‰é—®é¢˜ã€‚</p><p class=ql-align-justify>èµ·åˆï¼Œç”±äº Python 3 ä¸èƒ½å‘åå…¼å®¹çš„äº‹å®ï¼Œå¯¼è‡´äº†ç”¨æˆ·é‡‡ç”¨ç¼“æ…¢ï¼Œå¯¹åˆå­¦è€…ä¸å‹å¥½ç­‰é—®é¢˜ã€‚ä½†åœ¨ Python ç¤¾åŒºçš„åŠªåŠ›å’Œå†³ç»æ€åº¦ä¸‹ï¼Œæˆªè‡³é¾Ÿçˆ·å‘å‡ºé‚®ä»¶ä¹‹å‰ï¼Œå·²ç»æœ‰äº† 21903 ä¸ª Packages å¯ä»¥æ”¯æŒ Python 3.5ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ç»å¤§å¤šæ•°æœ€å—æ¬¢è¿çš„å°è£…åº“ï¼Œä¸æ­¤åŒæ—¶ä¹Ÿæœ‰è¶Šæ¥è¶Šå¤šçš„å°è£…åº“ï¼ˆe.g. Djangoã€Numpyï¼‰è¡¨ç¤ºå…¶æ–°ç‰ˆæœ¬å°†ä¸å†æ”¯æŒ Python 2ã€‚</p><p class=ql-align-justify>Python 2.7 äº 3.0 ä¹‹åçš„ 2010 å¹´ 7 æœˆ 3 æ—¥å‘å¸ƒï¼Œè®¡åˆ’ä½œä¸º 2.x çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ã€‚Python 2.7 çš„å†å²ä»»åŠ¡åœ¨äºé€šè¿‡æä¾› 2 å’Œ 3 ä¹‹é—´çš„å…¼å®¹æ€§æªæ–½ï¼Œä½¿ Python 2.x çš„ç”¨æˆ·æ›´å®¹æ˜“å°†ä»£ç ç§»æ¤åˆ° Python 3.x ä¸Šã€‚é‚£ä¹ˆå¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ä»£ç èƒ½å¤Ÿå…¼å®¹ä¸¤ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œé¦–å…ˆä½ èµ·ç è¦è®©ä»£ç èƒ½å¤Ÿæ­£å¸¸çš„è¿è¡Œåœ¨ Python 2.7 ä¸Šã€‚</p><p class=ql-align-justify>æ³¨ï¼šä¸‹æ–‡ä½¿ç”¨ P2 è¡¨ç¤º Python 2.7ï¼›ä½¿ç”¨ P3 è¡¨ç¤º Python 3.xã€‚</p><p>ä¸åŒä¸å…¼å®¹</p><p class=ql-align-justify>__future__ æ¨¡å—æ˜¯æˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£çš„ï¼Œè¯¥æ¨¡å—æœ€ä¸»è¦çš„ä½œç”¨æ˜¯æ”¯æŒåœ¨ P2 ä¸­å¯¼å…¥é‚£äº›åœ¨ P3 æ‰ç”Ÿæ•ˆçš„æ¨¡å—å’Œå‡½æ•°ã€‚æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å…¼å®¹æ€§å·¥å…·åº“ï¼Œåœ¨ä¸‹æ–‡ä¸­ç»™å‡ºçš„è®¸å¤š å…¼å®¹æŠ€å·§ å®ä¾‹éƒ½ä¾èµ–äºå®ƒã€‚</p><p class=ql-align-justify>ç‰¹æ€§ åœ¨æ­¤ç‰ˆæœ¬å¯é€‰ åœ¨æ­¤ç‰ˆæœ¬å†…ç½® æ•ˆæœ</p><p class=ql-align-justify>nested_scopes 2.1.0b1 2.2 PEP 227ï¼šé™æ€åµŒå¥—ä½œç”¨åŸŸ</p><p class=ql-align-justify>generators 2.2.0a1 2.3 PEP 255ï¼šç®€å•ç”Ÿæˆå™¨</p><p class=ql-align-justify>division 2.2.0a2 3.0 PEP 238ï¼šé™¤æ³•æ“ä½œç¬¦æ”¹åŠ¨</p><p class=ql-align-justify>absolute_import 2.5.0a1 3.0 PEP 328ï¼šImports å¤šè¡Œå¯¼å…¥ä¸ç»å¯¹ç›¸å¯¹è·¯å¾„</p><p class=ql-align-justify>with_statement 2.5.0a1 2.6 PEP 343ï¼šwith è¯­å¥</p><p class=ql-align-justify>print_function 2.6.0a2 3.0 PEP 3105ï¼šprint è¯­å¥å‡çº§ä¸ºå‡½æ•°</p><p class=ql-align-justify>unicode_literals 2.6.0a2 3.0 PEP 3112ï¼šBytes ç±»å‹</p><p class=ql-align-justify>(__future__ åŠŸèƒ½åˆ—è¡¨)</p><p>ç»Ÿä¸€ä¸ç­‰äºè¯­æ³•</p><p class=ql-align-justify>P2 æ”¯æŒä½¿ç”¨ &lt;> å’Œ != è¡¨ç¤ºä¸ç­‰äºã€‚</p><p class=ql-align-justify>P3 ä»…æ”¯æŒä½¿ç”¨ != è¡¨ç¤ºä¸ç­‰äºã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ != è¯­æ³•</p><p>ç»Ÿä¸€æ•´æ•°ç±»å‹</p><p class=ql-align-justify>P2 ä¸­æ•´æ•°ç±»å‹å¯ä»¥ç»†åˆ†ä¸ºçŸ­æ•´å‹ int å’Œé•¿æ•´å‹ longã€‚</p><p class=ql-align-justify>P3 åºŸé™¤äº†çŸ­æ•´å‹ï¼Œå¹¶ç»Ÿä¸€ä½¿ç”¨ int è¡¨ç¤ºé•¿æ•´å‹ï¼ˆä¸å†æœ‰ L è·Ÿåœ¨ repr åé¢ï¼‰ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p># Python 2 only</p><p>k <strong>=</strong> 9223372036854775808L</p><p># Python 2 and 3:</p><p>k <strong>=</strong> 9223372036854775808</p><p># Python 2 only</p><p>bigint <strong>=</strong> 1L</p><p># Python 2 and 3</p><p><strong>from</strong> future.builtins <strong>import</strong> int</p><p>bigint <strong>=</strong> int(1)</p><p>ç»Ÿä¸€æ•´æ•°é™¤æ³•</p><p class=ql-align-justify>P2 çš„é™¤æ³• / ç¬¦å·å®é™…ä¸Šå…·æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><p class=ql-align-justify>å½“ä¸¤ä¸ªæ“ä½œæ•°å‡ä¸ºæ•´å‹å¯¹è±¡æ—¶ï¼Œè¿›è¡Œçš„æ˜¯åœ°æ¿é™¤ï¼ˆæˆªé™¤å°æ•°éƒ¨åˆ†ï¼‰ï¼Œè¿”å›æ•´å‹å¯¹è±¡ï¼›</p><p class=ql-align-justify>å½“ä¸¤ä¸ªæ“ä½œæ•°å­˜åœ¨è‡³å°‘ä¸€ä¸ªæµ®ç‚¹å‹å¯¹è±¡æ—¶ï¼Œè¿›è¡Œçš„æ˜¯çœŸé™¤ï¼ˆä¿ç•™å°æ•°éƒ¨åˆ†ï¼‰ï¼Œè¿”å›æµ®ç‚¹å‹å¯¹è±¡ã€‚</p><p class=ql-align-justify>P3 çš„é™¤æ³• / ç¬¦å·ä»…ä»…å…·æœ‰çœŸé™¤çš„åŠŸèƒ½ï¼Œè€Œåœ°æ¿é™¤çš„åŠŸèƒ½åˆ™äº¤ç”± // æ¥å®Œæˆã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p># Python 2 only:</p><p><strong>assert</strong> 2 <strong>/</strong> 3 <strong>==</strong> 0</p><p># Python 2 and 3:</p><p><strong>assert</strong> 2 <strong>//</strong> 3 <strong>==</strong> 0</p><p>â€œTrue divisionâ€ (float division):</p><p># Python 3 only:</p><p><strong>assert</strong> 3 <strong>/</strong> 2 <strong>==</strong> 1.5</p><p># Python 2 and 3:</p><p><strong>from</strong> __future__ <strong>import</strong> division # (at top of module)</p><p>ç»Ÿä¸€ç¼©è¿›è¯­æ³•</p><p class=ql-align-justify>P2 å¯ä»¥æ··åˆä½¿ç”¨ tab å’Œ space ä¸¤ç§æ–¹å¼æ¥è¿›è¡Œç¼©è¿›ï¼ˆ1 ä¸ª tab == 8 ä¸ª spaceï¼‰ï¼Œä½†å®é™…ä¸Šè¿™ä¸€ç‰¹æ€§å¹¶éæ‰€æœ‰ IDE éƒ½èƒ½å¤Ÿæ”¯æŒï¼Œä¼šå› æ­¤å‡ºç°åŒæ ·çš„ä»£ç æ— æ³•è·¨ IDE è¿è¡Œçš„æƒ…å†µã€‚</p><p class=ql-align-justify>P3 ç»Ÿä¸€ä½¿ç”¨ tab ä½œä¸ºç¼©è¿›ï¼Œå¦‚æœ tab å’Œ space åŒæ—¶å­˜åœ¨ï¼Œå°±ä¼šè§¦å‘å¼‚å¸¸ï¼š</p><p>TabError: inconsistent use of tabs and spaces <strong>in</strong> indentation.</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ tab ä½œä¸ºç¼©è¿›ã€‚</p><p>ç»Ÿä¸€ç±»å®šä¹‰</p><p class=ql-align-justify>P2 åŒæ—¶æ”¯æŒæ–°å¼ç±»ï¼ˆobjectï¼‰å’Œè€å¼ç±»ã€‚</p><p class=ql-align-justify>P3 åˆ™ç»Ÿä¸€ä½¿ç”¨æ–°å¼ç±»ï¼Œå¹¶ä¸”åªæœ‰ä½¿ç”¨æ–°å¼ç±»æ‰èƒ½åº”ç”¨å¤šé‡ç»§æ‰¿ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨æ–°å¼ç±»ã€‚</p><p>ç»Ÿä¸€å­—ç¬¦ç¼–ç ç±»å‹</p><p class=ql-align-justify>P2 é»˜è®¤ä½¿ç”¨ ASCII å­—ç¬¦ç¼–ç ï¼Œä½†å› ä¸º ASCII åªæ”¯æŒæ•°ç™¾ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸èƒ½çµæ´»çš„æ»¡è¶³éè‹±æ–‡å­—ç¬¦ï¼Œæ‰€ä»¥ P2 åŒæ—¶ä¹Ÿæ”¯æŒ Unicode è¿™ç§æ›´å¼ºå¤§çš„å­—ç¬¦ç¼–ç ã€‚ä¸è¿‡ï¼Œç”±äº P2 åŒæ—¶æ”¯æŒä¸¤å¥—å­—ç¬¦ç¼–ç ï¼Œå°±éš¾å…å¤šå‡ºäº†ä¸€äº›æ ‡è¯†å’Œè½¬æ¢çš„éº»çƒ¦ã€‚</p><p class=ql-align-justify>è€Œ P3 ç»Ÿä¸€ä½¿ç”¨ Unicode å­—ç¬¦ç¼–ç ï¼Œè¿™èŠ‚çœäº†å¼€å‘è€…çš„æ—¶é—´ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è½»æ¾åœ°åœ¨ç¨‹åºä¸­è¾“å…¥å’Œæ˜¾ç¤ºæ›´å¤šç§ç±»çš„å­—ç¬¦ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>åœ¨æ‰€æœ‰çš„å­—ç¬¦ä¸²èµ‹å€¼ä¸­å‡ä½¿ç”¨å‰ç¼€ uï¼Œæˆ–å¼•å…¥ unicode_literals å­—ç¬¦æ¨¡å—ã€‚</p><p># Python 2 only</p><p>s1 <strong>=</strong> 'PythonTab'</p><p>s2 <strong>=</strong> u'PythonTabä¸­æ–‡ç½‘'</p><p># Python 2 and 3</p><p>s1 <strong>=</strong> u'PythonTab'</p><p>s2 <strong>=</strong> u'PythonTabä¸­æ–‡ç½‘'</p><p># Python 2 and 3</p><p><strong>from</strong> __future__ <strong>import</strong> unicode_literals # at top of module</p><p>s1 <strong>=</strong> 'PythonTab'</p><p>s2 <strong>=</strong> 'PythonTabä¸­æ–‡ç½‘'</p><p>ç»Ÿä¸€å¯¼å…¥æ¨¡å—çš„è·¯å¾„æœç´¢æ–¹å¼</p><p class=ql-align-justify>P2 å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶é¦–å…ˆä¼šæœç´¢å½“å‰ç›®å½•ï¼ˆcwdï¼‰ï¼Œè‹¥éï¼Œåˆ™æœç´¢ç¯å¢ƒå˜é‡è·¯å¾„ï¼ˆsys.pathï¼‰ã€‚è¿™ä¸€ç‰¹æ€§æ—¶å¸¸ç»™å¼€å‘è€…å¸¦æ¥å›°æ‰°ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æ›¾ç»ç¢°åˆ°è¿‡ï¼Œå°¤å…¶å½“è‡ªå®šä¹‰æ¨¡å—ä¸ç³»ç»Ÿæ¨¡å—é‡åçš„æ—¶å€™ï¼›</p><p class=ql-align-justify>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé»˜è®¤çš„ P3 ä»…ä¼šæœç´¢ç¯å¢ƒå˜é‡è·¯å¾„ï¼Œå½“ä½ éœ€è¦æœç´¢è‡ªå®šä¹‰æ¨¡å—æ—¶ï¼Œä½ å¯ä»¥åœ¨åŒ…ç®¡ç†æ¨¡å¼ä¸‹å°†é¡¹ç›®è·¯å¾„åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œç„¶åå†ä½¿ç”¨ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ï¼ˆä»¥ . å¼€å¤´ï¼‰çš„æ–¹å¼æ¥å¯¼å…¥ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œè‡ªå®šä¹‰æ¨¡å—å¯¼å…¥ã€‚</p><p>ä¿®æ­£åˆ—è¡¨æ¨å¯¼å¼çš„å˜é‡ä½œç”¨åŸŸæ³„éœ²</p><p class=ql-align-justify>P2 çš„åˆ—è¡¨æ¨å€’å¼ä¸­çš„å˜é‡ä¼šæ³„éœ²åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œä¾‹å¦‚ï¼š</p><p><strong>import</strong> platform</p><p>print('Python', platform.python_version())</p><p>i <strong>=</strong> 1</p><p>print('before: I = %s' <strong>%</strong> i)</p><p><strong>print</strong>('comprehension: %s' <strong>%</strong> [i <strong>for</strong> i <strong>in</strong> range(5)])</p><p>print('after: I = %s' <strong>%</strong> i)</p><p># OUT</p><p>Python 2.7.6</p><p>before: i <strong>=</strong> 1</p><p>comprehension: [0, 1, 2, 3, 4]</p><p>after: i <strong>=</strong> 4</p><p class=ql-align-justify>P3 åˆ™è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œåˆ—è¡¨æ¨å€’å¼ä¸­çš„å˜é‡ä¸å†æ³„éœ²åˆ°å…¨å±€ä½œç”¨åŸŸã€‚</p><p><strong>import</strong> platform</p><p>print('Python', platform.python_version())</p><p>i <strong>=</strong> 1</p><p><strong>print</strong>('before: i =', i)</p><p><strong>print</strong>('comprehension:', [i <strong>for</strong> i <strong>in</strong> range(5)])</p><p>print('after: i =', i)</p><p># OUT</p><p>Python 3.4.1</p><p>before: i <strong>=</strong> 1</p><p>comprehension: [0, 1, 2, 3, 4]</p><p>after: i <strong>=</strong> 1</p><p>ä¿®æ­£éæ³•æ¯”è¾ƒæ“ä½œå¼‚å¸¸</p><p class=ql-align-justify>P2 èƒ½å¤Ÿå¯¹ä¸¤ä¸ªæ•°æ®ç±»å‹å¹¶ä¸ç›¸åŒçš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚</p><p><strong>import</strong> platform</p><p>print('Python', platform.python_version())</p><p>print("[1, 2] > 'foo' = ", [1, 2] > 'foo')</p><p><strong>print</strong>("(1, 2) > 'foo' = ", (1, 2) > 'foo')</p><p><strong>print</strong>("[1, 2] > (1, 2) = ", [1, 2] > (1, 2))</p><p class=ql-align-justify># OUT</p><p>Python 2.7.6</p><p>[1, 2] > 'foo' = False</p><p>(1, 2) > 'foo' = True</p><p>[1, 2] > (1, 2) = False</p><p class=ql-align-justify>ä¸è¿‡ï¼Œè¿™ç§çœ‹ä¼¼æ–¹ä¾¿çš„ç‰¹æ€§ï¼Œå®é™…ä¸Šå´æ˜¯ä¸€ä¸ªå®šæ—¶ç‚¸å¼¹ï¼Œå› ä¸ºä½ æ— æ³•å”¯ä¸€çš„ç¡®å®šåˆ°åº•æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„è¿”å›å€¼ä¸º Falseï¼ˆå¯èƒ½æ˜¯æ•°æ®æ¯”è¾ƒã€ä¹Ÿå¯èƒ½æ˜¯æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼‰ã€‚</p><p class=ql-align-justify>P3 åˆ™å¯¹å…¶è¿›è¡Œäº†ä¿®æ­£ï¼Œå¦‚æœæ¯”è¾ƒæ“ä½œæ•°ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œä¼šè§¦å‘ TypeError å¼‚å¸¸ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>æ°¸è¿œä¸è¦æ¯”è¾ƒæ•°æ®ç±»å‹ä¸ä¸€è‡´çš„å¯¹è±¡ã€‚</p><p>ç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸è¯­æ³•</p><p class=ql-align-justify>P2 åŒæ—¶æ”¯æŒæ–°æ—§ä¸¤ç§å¼‚å¸¸è§¦å‘è¯­æ³•ï¼š</p><p><strong>raise</strong> IOError, "file error" # Old</p><p><strong>raise</strong> IOError("file error") # New</p><p class=ql-align-justify>P3 åˆ™ç»Ÿä¸€ä½¿ç”¨æ–°å¼‚å¸¸è§¦å‘è¯­æ³•ï¼Œå¦åˆ™ä¼šè§¦å‘ SyntaxError å¼‚å¸¸:</p><p><strong>raise</strong> IOError("file error")</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p>### æŠ›å‡ºå¼‚å¸¸</p><p># Python 2 only:</p><p><strong>raise</strong> ValueError, "dodgy value"</p><p># Python 2 and 3:</p><p><strong>raise</strong> ValueError("dodgy value")</p><p>### ä½¿ç”¨ traceback æŠ›å‡ºå¼‚å¸¸</p><p># Python 2 only:</p><p>traceback <strong>=</strong> sys.exc_info()[2]</p><p><strong>raise</strong> ValueError, "dodgy value", traceback</p><p># Python 3 only:</p><p><strong>raise</strong> ValueError("dodgy value").with_traceback()</p><p># Python 2 and 3: option 1</p><p><strong>from</strong> six <strong>import</strong> reraise as raise_</p><p># or # from future.utils import raise_</p><p>traceback <strong>=</strong> sys.exc_info()[2]</p><p>raise_(ValueError, "dodgy value", traceback)</p><p># Python 2 and 3: option 2</p><p><strong>from</strong> future.utils <strong>import</strong> raise_with_traceback</p><p>raise_with_traceback(ValueError("dodgy value"))</p><p>### å¼‚å¸¸é“¾å¤„ç†</p><p># Setup:</p><p><strong>class</strong> DatabaseError(Exception):</p><p><strong>pass</strong></p><p># Python 3 only</p><p><strong>class</strong> FileDatabase:</p><p><strong>def</strong> __init__(self, filename):</p><p><strong>try</strong>:</p><p>self.file <strong>=</strong> open(filename)</p><p><strong>except</strong> IOError as exc:</p><p><strong>raise</strong> DatabaseError('failed to open') <strong>from</strong> exc</p><p># Python 2 and 3:</p><p><strong>from</strong> future.utils <strong>import</strong> raise_from</p><p><strong>class</strong> FileDatabase:</p><p><strong>def</strong> __init__(self, filename):</p><p><strong>try</strong>:</p><p>self.file <strong>=</strong> open(filename)</p><p><strong>except</strong> IOError as exc:</p><p>raise_from(DatabaseError('failed to open'), exc)</p><p>ç»Ÿä¸€å¼‚å¸¸å¤„ç†è¯­æ³•</p><p class=ql-align-justify>P2 å®ç°å¼‚å¸¸å¤„ç†ä¹Ÿèƒ½å¤Ÿæ”¯æŒä¸¤ç§è¯­æ³•ã€‚</p><p><strong>try</strong>:</p><p>let_us_cause_a_NameError</p><p><strong>except</strong> NameError, err:</p><p># except NameError as err:</p><p>print err, '--> our error message'</p><p class=ql-align-justify>P3 çš„å¼‚å¸¸å¤„ç†åˆ™å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ as å…³é”®å­—çš„æ–¹å¼ã€‚</p><p><strong>try</strong>:</p><p>let_us_cause_a_NameError</p><p><strong>except</strong> NameError as err:</p><p>print(err, '--> our error message')</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ as å…³é”®å­—çš„å¼‚å¸¸å¤„ç†æ–¹å¼ã€‚</p><p>ç»Ÿä¸€è¾“å…¥å‡½æ•°</p><p class=ql-align-justify>P2 æ”¯æŒ raw_input å’Œ input ä¸¤ä¸ªè¾“å…¥å‡½æ•°ï¼ŒåŒºåˆ«åœ¨äºå‰è€…ä»…èƒ½è¿”å› String ç±»å‹å¯¹è±¡ï¼Œåè€…åˆ™æ”¯æŒè¿”å›æ•°å­—å’Œå­—ç¬¦ä¸²ä¸¤ç§æ•°æ®ç±»å‹å¯¹è±¡ï¼Œå¹¶ä¸”å½“è¾“å…¥ä¸ºè¡¨è¾¾å¼æ—¶ï¼Œä¼šéšå¼è°ƒç”¨ eval å‡½æ•°è¿”å›å…¶æ‰§è¡Œç»“æœã€‚æ˜¾ç„¶çš„ï¼Œä½¿ç”¨ input æ˜¯æ›´åŠ çµæ´»çš„å†™æ³•ã€‚</p><p class=ql-align-justify>æ‰€ä»¥ P3 ç»Ÿä¸€çš„ä½¿ç”¨äº† input å‡½æ•°è¿›è¡Œè¾“å…¥å¤„ç†ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ input å†…ç½®å‡½æ•°ã€‚</p><p># Python 2 only:</p><p>input("Type something safe please: ")</p><p># Python 2 and 3</p><p><strong>from</strong> future.builtins <strong>import</strong> input</p><p>eval(input("Type something safe please: "))</p><p>ç»Ÿä¸€è¾“å‡ºå‡½æ•°</p><p class=ql-align-justify>P2 ä¸­çš„ print å³æ˜¯å…³é”®å­—åˆæ˜¯å†…ç½®å‡½æ•°ã€‚print 'Hello world!' ä¸ºä¸€æ¡è¯­å¥ï¼Œprint('Hello world!') åˆ™ä¸ºä¸€æ¬¡å‡½æ•°è°ƒç”¨ã€‚</p><p class=ql-align-justify>P3 ç»Ÿä¸€ä½¿ç”¨ print å‡½æ•°è¿›è¡Œè¾“å‡ºæ“ä½œï¼Œå…¶åŸå‹å¦‚ä¸‹ï¼Œè¿™ä¸€æ”¹å˜è®© P3 çš„è¾“å‡ºå¤„ç†å˜å¾—æ›´åŠ ç®€æ´ã€å¼ºå¤§è€Œä¼˜é›…ï¼Œé€šè¿‡å®å‚çš„ä¼ é€’å°±èƒ½æ›¿ä»£ P2 ä¸­ç¹å¤çš„ä»£ç å®ç°ã€‚</p><p><strong>print</strong>(<strong>*</strong>objects, sep<strong>=</strong>' ', end<strong>=</strong>'\n', file<strong>=</strong>sys.stdout, flush<strong>=</strong>False)</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p>### å•è¡Œæ‰“å°å•ä¸ª String</p><p># Python 2 only:</p><p>print 'Hello'</p><p># Python 2 only:</p><p><strong>print</strong> 'Hello'</p><p>### å•è¡Œæ‰“å°å¤šä¸ª String</p><p># Python 2 only:</p><p>print 'Hello', 'Guido'</p><p># Python 2 and 3:</p><p><strong>from</strong> __future__ <strong>import</strong> print_function # (at top of module)</p><p><strong>print</strong>('Hello', 'Guido')</p><p>### è¾“å‡ºé‡å®šå‘</p><p># Python 2 only:</p><p><strong>print</strong> >> sys.stderr, 'Hello'</p><p># Python 2 and 3:</p><p><strong>from</strong> __future__ <strong>import</strong> print_function</p><p><strong>print</strong>('Hello', file<strong>=</strong>sys.stderr)</p><p>### æ¢è¡Œæ‰“å°</p><p># Python 2 only:</p><p><strong>print</strong> 'Hello',</p><p># Python 2 and 3:</p><p><strong>from</strong> __future__ <strong>import</strong> print_function</p><p>print('Hello', end<strong>=</strong>'')</p><p>ç»Ÿä¸€æ–‡ä»¶æ“ä½œå‡½æ•°</p><p class=ql-align-justify>P2 æ”¯æŒä½¿ç”¨ file å’Œ open ä¸¤ä¸ªå‡½æ•°æ¥è¿›è¡Œæ–‡ä»¶æ“ä½œã€‚</p><p class=ql-align-justify>P3 åˆ™ç»Ÿä¸€ä½¿ç”¨ open æ¥è¿›è¡Œæ–‡ä»¶æ“ä½œã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ open å‡½æ•°ã€‚</p><p># Python 2 only:</p><p>f <strong>=</strong> file(pathname)</p><p># Python 2 and 3:</p><p>f <strong>=</strong> open(pathname)</p><p>ç»Ÿä¸€åˆ—è¡¨è¿­ä»£å™¨ç”Ÿæˆå‡½æ•°</p><p class=ql-align-justify>P2 æ”¯æŒä½¿ç”¨ range å’Œ xrange ä¸¤ä¸ªå‡½æ•°æ¥ç”Ÿæˆå¯è¿­ä»£å¯¹è±¡ï¼ŒåŒºåˆ«åœ¨äºå‰è€…è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹å¯¹è±¡ï¼Œåè€…è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ä¼¼ç”Ÿæˆå™¨ï¼ˆæƒ°æ€§æ±‚å€¼ï¼‰çš„è¿­ä»£å¯¹è±¡ï¼Œæ”¯æŒæ— é™è¿­ä»£ã€‚æ‰€ä»¥å½“ä½ éœ€è¦ç”Ÿæˆä¸€ä¸ªå¾ˆå¤§çš„åºåˆ—æ—¶ï¼Œæ¨èä½¿ç”¨ xrangeï¼Œå› ä¸ºå®ƒä¸ä¼šä¸€ä¸Šæ¥å°±ç´¢å–åºåˆ—æ‰€éœ€çš„æ‰€æœ‰å†…å­˜ç©ºé—´ã€‚å¦‚æœåªå¯¹åºåˆ—è¿›è¡Œè¯»æ“ä½œçš„è¯ï¼Œxrange æ–¹æ³•æ•ˆç‡æ˜¾ç„¶ä¼šæ›´é«˜ï¼Œä½†æ˜¯å¦‚æœè¦ä¿®æ”¹åºåˆ—çš„å…ƒç´ ï¼Œæˆ–è€…å¾€åºåˆ—å¢åˆ å…ƒç´ çš„è¯ï¼Œé‚£åªèƒ½é€šè¿‡ range æ–¹æ³•ç”Ÿæˆä¸€ä¸ª list å¯¹è±¡äº†ã€‚</p><p class=ql-align-justify>P3 åˆ™ç»Ÿä¸€ä½¿ç”¨ range å‡½æ•°æ¥ç”Ÿæˆå¯è¿­ä»£å¯¹è±¡ï¼Œä½†å…¶å® P3 çš„ range æ›´åƒæ˜¯ P2 çš„ xrangeã€‚æ‰€ä»¥åœ¨ P3 ä¸­å¦‚æœä½ æƒ³å¾—åˆ°ä¸€ä¸ªå¯ä»¥è¢«ä¿®æ”¹çš„åˆ—è¡¨å¯¹è±¡ï¼Œä½ éœ€è¦è¿™ä¹ˆåšï¼š</p><p>list(range(1,10))</p><p>[1, 2, 3, 4, 5, 6, 7, 8, 9]</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨ range å‡½æ•°</p><p># Python 2 only:</p><p><strong>for</strong> i <strong>in</strong> xrange(10<strong>**</strong>8):</p><p>...</p><p># Python 2 and 3: forward-compatible</p><p><strong>from</strong> future.builtins <strong>import</strong> range</p><p><strong>for</strong> i <strong>in</strong> range(10<strong>**</strong>8):</p><p>...</p><p># Python 2 and 3: backward-compatible</p><p><strong>from</strong> past.builtins <strong>import</strong> xrange</p><p><strong>for</strong> i <strong>in</strong> xrange(10<strong>**</strong>8):</p><p>...</p><p>ç»Ÿä¸€è¿­ä»£å™¨è¿­ä»£å‡½æ•°</p><p class=ql-align-justify>P2 ä¸­æ”¯æŒä½¿ç”¨å†…ç½®å‡½æ•° next å’Œè¿­ä»£å™¨å¯¹è±¡çš„ .next() å®ä¾‹æ–¹æ³•è¿™ä¸¤ç§æ–¹å¼æ¥è·å–è¿­ä»£å™¨å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚æ‰€ä»¥ï¼Œåœ¨å®ç°è‡ªå®šä¹‰è¿­ä»£å™¨å¯¹è±¡ç±»æ—¶ï¼Œå¿…é¡»å®ç° .next() å®ä¾‹æ–¹æ³•ï¼š</p><p># Python 2 only</p><p><strong>class</strong> Upper(object):</p><p><strong>def</strong> __init__(self, iterable):</p><p>self._iter <strong>=</strong> iter(iterable)</p><p><strong>def</strong> next(self): # Py2-styface iterator interface</p><p><strong>return</strong> self._iter.next().upper()</p><p><strong>def</strong> __iter__(self):</p><p><strong>return</strong> self</p><p>itr <strong>=</strong> Upper('hello')</p><p><strong>assert</strong> itr.next() <strong>==</strong> 'H' # Py2-style</p><p><strong>assert</strong> list(itr) <strong>==</strong> list('ELLO')</p><p class=ql-align-justify>ä½†åœ¨ P3 ä¸­ç»Ÿä¸€äº†ä½¿ç”¨ next å†…ç½®å‡½æ•°æ¥è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè¯•å›¾è°ƒç”¨ .next() æ–¹æ³•åˆ™ä¼šè§¦å‘ AttributeError å¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œåœ¨ P3 ä¸­å®ç°è‡ªå®šä¹‰è¿­ä»£å™¨æ‰€è¦å®ç°çš„æ˜¯ __next__ ç‰¹æ®Šæ–¹æ³•ã€‚</p><p>å…¼å®¹æŠ€å·§ï¼š</p><p># Python 2 and 3: option 1</p><p><strong>from</strong> future.builtins <strong>import</strong> object</p><p><strong>class</strong> Upper(object):</p><p><strong>def</strong> __init__(self, iterable):</p><p>self._iter <strong>=</strong> iter(iterable)</p><p><strong>def</strong> __next__(self): # Py3-style iterator interface</p><p><strong>return</strong> next(self._iter).upper() # builtin next() function calls</p><p><strong>def</strong> __iter__(self):</p><p><strong>return</strong> self</p><p>itr <strong>=</strong> Upper('hello')</p><p><strong>assert</strong> next(itr) <strong>==</strong> 'H' # compatible style</p><p><strong>assert</strong> list(itr) <strong>==</strong> list('ELLO')</p><p># Python 2 and 3: option 2</p><p><strong>from</strong> future.utils <strong>import</strong> implements_iterator</p><p>@implements_iterator</p><p><strong>class</strong> Upper(object):</p><p><strong>def</strong> __init__(self, iterable):</p><p>self._iter <strong>=</strong> iter(iterable)</p><p><strong>def</strong> __next__(self): # Py3-style iterator interface</p><p><strong>return</strong> next(self._iter).upper() # builtin next() function calls</p><p><strong>def</strong> __iter__(self):</p><p><strong>return</strong> self</p><p>itr <strong>=</strong> Upper('hello')</p><p><strong>assert</strong> next(itr) <strong>==</strong> 'H'</p><p><strong>assert</strong> list(itr) <strong>==</strong> list('ELLO')</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Python2','Python3','åŒºåˆ«'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>