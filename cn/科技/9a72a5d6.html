<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>存储网络 Day34 可移动媒体管理 | 极客快訊</title><meta property="og:title" content="存储网络 Day34 可移动媒体管理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8bd5152074994abeb1f704ed9fea3700"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9a72a5d6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9a72a5d6.html><meta property="article:published_time" content="2020-11-14T21:02:52+08:00"><meta property="article:modified_time" content="2020-11-14T21:02:52+08:00"><meta name=Keywords content><meta name=description content="存储网络 Day34 可移动媒体管理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9a72a5d6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>存储网络 Day34 可移动媒体管理</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>11.4可移动媒体管理的问题和要求</h1><p>将可移动媒体管理集成到存储网络中的问题和要求可分为“存储媒体管理”和“共享相关资源”区域。在大型环境中，可移动媒体管理必须能够存储数十万个媒体。不仅存储了媒体及其属性，还存储了对此媒体的访问，包括有关错误和使用时间的数据。</p><p>与硬盘存储相反，可移动介质可以与驱动器分开存储，这意味着系统必须始终了解介质的位置。由于该位置可以是手动管理的存储库或自动化库，因此需要特殊的解决方案来反映各自的要求。</p><p>存储网络中可移动介质管理的第二个重要应用领域是库，驱动器和介质的共享（第6.2.2节）。在连接到存储网络的多个应用程序之间共享该磁带库需要适当的访问控制，访问同步和访问优先级的机制。这些机制控制谁可以访问哪些硬件以及何时可能所有应用程序都可以利用存储网络中的所有可用资源。</p><p>为了满足这些要求，存储网络越来越需要可移动媒体的管理层。该层将应用程序与通过存储网络连接的硬件分离（图11.3）。它控制并同步所有访问，尽可能保持对应用程序的透明。作为一个中心实体，该层管理所有资源并简化异构应用程序之间的共享，而不管使用哪些库。</p><p>图11.3中间件界面提供媒体管理服务，同步对硬件的访问，并允许对驱动器和盒式磁带进行分组。</p><p>对磁带硬件的更改（例如更换驱动器和添加其他库）将集中封装，以便这些更改不会影响应用程序本身。因此，例如，先前嵌入在网络备份系统中的可移动介质的管理功​​能现在集中在一起。因此，这种用于可移动介质的中央管理系统代表存储网络内的存储虚拟化层，从而为可移动介质提供存储虚拟化的优点（第5章）。</p><p>我们已经讨论了将可移动媒体的库和驱动器共享实现到存储网络的不同选项（第6.2.2节）。正如我们前面提到的，我们认为提供最佳和最有前途的解决方案的架构是保护应用程序免受管理和共享中涉及的复杂内部流程的架构。事实上，管理系统熟悉所有组件以及它们如何相互作用。这使它能够对资源的使用进行最佳控制。</p><p>可移动媒体管理的个别问题和要求如下：</p><p>通过智能共享有效利用所有可用资源。</p><p>访问控制：必须对应用程序和用户进行身份验证。应用程序和用户只能被授予对存在适当授权的媒体的访问权限。</p><p>访问同步：必须同步对库和驱动器的访问。</p><p>访问优先级：如果同时对资源或驱动器执行多个访问请求，则可以使用优先级。</p><p>分组和池化：应该可以将介质和驱动器动态组合到组或池中，以简化管理和共享。</p><p>媒体跟踪：应始终保证每种媒体都可以检索，即使它已被转移到其他位置。</p><p>生命周期管理：媒体贯穿整个生命周期。它被写入，读取，重写，并在一段时间后从流通中删除。</p><p>监控：自动化系统监控。</p><p>报告：必须记录对媒体的访问。审计跟踪应该是可能的。</p><p>我们将在本节中详细介绍这些问题和要求。</p><h1>11.4.1有效利用现有资源</h1><p>使用精心设计的存储网络的一大优点是可以更好地利用可用的硬件资源。与直连设备相比，可用存储空间可用于许多应用程序，因此可以更有效地使用。在可移动介质领域，这可以通过更好地利用免费存储容量和驱动器共享来实现。</p><p>第6.2.1节中描述的磁盘存储池可以一对一地转移到可移动介质。在这种情况下，应该使用免费存储空间来表示未使用的可移动介质以及可移动介质的空闲插槽，由于数据的不断增长，这些插槽必须保留。理想情况下，这是以跨库方式进行的。为此，所有库中的所有可用盒式磁带都在所谓的临时池（第11.4.6节）中进行管理，该池可供所有应用程序使用，以便可以灵活地分配剩余的空闲存储容量。</p><p>适用于有效使用免费存储容量的内容也适用于驱动器的使用方式。如果驱动器直接连接到服务器，则其他服务器无法使用它们，即使它们当前没有装入盒式磁带。相比之下，存储网络中的驱动器可以分配给当时需要它们的应用程序。因此，可以确保所有安装的驱动器也实际使用。此外，可以使用请求队列来进一步提高驱动器的利用率。我们将在第11.4.4节详细介绍这项技术。</p><h1>11.4.2访问控制</h1><p>可靠的控制以防止未经授权的媒体访问是必不可少的。必须验证用户和应用程序。然后，可以为成功通过身份验证的用户授予访问某些资源的适当授权。</p><p>认证</p><p>希望使用可移动介质管理服务的用户和应用程序必须在系统中注册。足够严格的身份验证机制应确保只有明确标识的用户和应用程序才能使用该系统。</p><p>授权</p><p>必须授权以防止未经授权的用户查看或甚至更改属于其他用户的数据。授权既可以应用于某些操作，也可以安排对某些对象（盒式磁带，分区，卷，驱动器等）的访问。成功的身份验证是授权的必要先决条件。</p><p>通过适当的授权，可以为用户或应用程序分配关于管理系统中某些对象的以下权限：</p><p>生成和删除对象（例如卷的分配和释放）;</p><p>读取对象的访问权限（例如，对自己卷的读访问权限）;</p><p>写入对象的访问权限（例如，将磁带添加到临时池）;</p><p>安装和卸下墨盒，侧面，隔板或卷;</p><p>在图书馆内移动墨盒;</p><p>进口和出口墨盒;</p><p>激活和停用库或驱动器。</p><p>使用各种授权级别允许根据用户的角色修改访问控制。以下角色和活动当前用于管理可移动媒体的系统中，并且可以提供不同的授权。此列表仅作为示例。这些角色和活动也可以根据具体要求进行不同的分配。</p><p>系统管理员负责：</p><p>安装系统</p><p>库的安装/卸载</p><p>用户和应用程序的管理</p><p>磁盘和磁带组的管理</p><p>存储管理员负责：</p><p>磁盘和磁带组的管理</p><p>控制墨盒寿命周期</p><p>规划未来的资源需求</p><p>图书馆管理员负责：</p><p>管理各个库的驱动器和盒式磁带组</p><p>规划未来的资源需求</p><p>图书馆经营者负责：</p><p>启动和停止单个库的操作</p><p>监控库及其驱动器的运行</p><p>启动和停止单个驱动器的操作</p><p>进出图书馆的墨盒进出口</p><p>在手动库中执行装载/卸载操作</p><p>在库中移动盒式磁带</p><p>用户/应用程序可以：</p><p>为磁带分配和取消分配卷</p><p>批量和卸载卷</p><p>读取和写入卷</p><p>列出并显示已分配的卷</p><p>列出并显示已分配卷的磁带</p><p>列出并显示临时盒式磁带，它们包含在具有访问权限的盒式磁带组中</p><p>列出并显示包含在具有访问权限的驱动器组中的驱动器</p><p>该列表清楚地表明，例如，“简单”用户无法管理盒式磁带组或驱动器组。如果是，则用户可能会未经授权访问外国数据。同样，库操作员只能访问他负责的库。以这种方式，可以确保整个系统的平稳运行。</p><p>授权访问单个对象</p><p>目前，仅对整个墨盒使用授权程序而不是对其组件使用授权程序仍然很常见。但是，为了为未来的发展做好准备，例如太字节和PB级磁带盒，管理系统即使现在也应该对磁带的细分（例如侧面，分区和卷）进行适当详细的访问保护。</p><p>墨盒的所有组件都适用于访问控制。应用程序目的确定用户是否接收对侧，分区或卷的访问权。授权始终适用于授权对象的所有元素。例如，如果授予访问盒式磁带的权利，则此权利也适用于此盒式磁带的所有侧面，分区和卷。</p><p>不仅是应该提供访问控制的盒式磁带。例如，限制应用程序访问仍可用的盒式磁带是一个好主意。为此，可用的盒式磁带被组合成一个或多个临时池。然后，应用程序被授予仅访问某些临时池的权限。常见的临时池可提高免费存储容量的有效利用率。专用临时池允许为特定应用程序或应用程序组保留专用盒式磁带。例如，限制应用程序访问仍可用的盒式磁带是一个好主意。为此，可用的盒式磁带被组合成一个或多个临时池。然后，应用程序被授予仅访问某些临时池的权限。常见的临时池可提高免费存储容量的有效利用率。专用临时池允许为特定应用程序或应用程序组保留专用盒式磁带。</p><p>驱动器也适用于访问控制。驱动器分组再次成为简化管理的选择。跨所有应用程序共享驱动器可提高驱动器的利用率。但是，仍然可以将某些驱动器分配给某些应用程序，例如，为重要应用程序保留专用驱动器。</p><h1>11.4.3访问同步</h1><p>在某个特定时间点，驱动器只能由单个应用程序使用。因此，需要同步从应用程序到驱动器的访问。此类同步与动态磁带库共享相对应，已在第6.2.2节中进行了描述。磁带库共享使应用程序能够同时使用所有驱动器“准”。这种共享类似于处理器（CPU）的共享，其中操作系统允许单个处理器在有限的持续时间内一个接一个地用于多个进程。</p><h1>11.4.4访问优先级和挂载请求排队</h1><p>访问优先级和安装请求排队可提高访问同步的效率。尽管磁带库共享，但可能出现的情况是存在比驱动器更多的装载请求。在这种情况下，管理系统应将所有无法立即处理的剩余请求收集到请求队列中（图11.4）。一旦驱动器可用，系统就可以执行下一个请求并将其从队列中删除。在搜索下一个执行请求时，调度程序应评估请求的优先级并相应地调整序列。紧急任务被赋予更高的优先级，因此可以更快地处理。根据实施方式，这也意味着应用程序先于驱动器，并且必须中断对盒式磁带的访问。</p><p>同样取决于实现，可以为每个单独的驱动器或一组驱动器设置请求队列。绑定到一组驱动器的请求队列具有以下优点：可以使用更多驱动器来处理队列中等待的每个请求。因此，这些请求通常比等待一个特定驱动器更快地处理。</p><p>图11.4挂载请求存储在队列中，并由请求处理器一个接一个地处理。</p><div class=pgc-img><img alt="存储网络 Day34 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8bd5152074994abeb1f704ed9fea3700><p class=pgc-img-caption></p></div><p>挂载请求排队比磁带库共享更增加驱动器的负载。如果没有充分确定驱动器的数量，则需要更多时间来执行队列中的安装请求。这是典型的时间与空间优化问题。如果有更多可用的驱动器，则可以在相同的时间内完成更多的安装请求。但是，如果许多安装请求不是紧急的并且可以长时间留在队列中，则需要更少的驱动器并且在采购和操作方面实现了成本节省。</p><h1>11.4.5分组，汇集</h1><p>用于管理可移动介质的系统必须能够处理大量的盒式磁带并驱动介质并便于访问许多应用程序。为了以合理的方式规划和执行访问控制并保证其有效使用，有必要将盒式磁带和驱动器组合在一起。分组还允许创建存储容量或驱动器的预算，这些预算可供应用程序使用。</p><p><strong>划痕池</strong></p><p>临时池包含可用于授权应用程序的未使用的盒式磁带，以便它们可以在其上放置卷。一旦应用程序将卷从这样的临时池放置到盒式磁带上，该盒式磁带就不再可用于所有其他应用程序，因此从临时池中删除。</p><p>划痕池的大小应足够大，因此可以在每个时间点管理可移动介质，以便为应用程序提供免费存储容量。这是满足备份窗口的基本要求。因此，临时池应该是动态可扩展的，以扩展基础架构，以满足不断增长的存储容量需求。为此，管理员必须动态地为系统提供额外的存储空间，无论是通过连接新库还是添加以前未使用的盒式磁带。理想情况下，可以在不更改已访问临时池的应用程序的情况下实现此目的。</p><p>可调节的最小尺寸（低水位标记）使得临时池的管理更容易。如果达到此阈值，则必须采取措施来增加池的大小，否则系统将有可能在可预见的将来停止提供空闲存储空间。管理系统可以通过灵活地提供更多选项来提供帮助。这里可以采取许多措施，从自动扩大临时池 - 只要库中有免费媒体 - 到“呼叫主页”功能，通知管理员。</p><p>对于大型环境，定义多个临时池是有利的。例如，将常用墨盒和WORM墨盒分开是一种常见的要求。或者有时需要为某些应用程序保留存储容量。因此，存储管理员应该能够为非常重要的备份作业提供专用的临时池，其中“默认”备份作业从默认临时池接收其临时盒式磁带。以这种方式，备份应用程序可以选择使用哪个临时池。可以通过优先级自动选择临时池。如果应用程序可以访问多个临时池，则管理系统会评估临时池的优先级，以选择一个临时池来分配盒式磁带。通过这种方式，可以为高优先级应用程序保留存储容量，而无需在每个应用程序中配置所有可用的临时池。</p><p>此外，如果临时池包含来自两个或更多库的盒式磁带，则可以设计临时池以实现高可用性（图11.5）。因此，如果单个库发生故障，其他库中的临时盒式磁带仍可使用。正是在这种情况下，存储网络与智能管理系统的优势完全体现在分布在整个存储网络中的资源的最佳利用。</p><p>今天（2009年）完整的墨盒作为临时池的最小单元进行管理。应用程序可以访问整个盒式磁带，因为同一盒式磁带的不同分区无法同时访问。考虑到磁带介质容量的增加以及对这些磁带进行分区的能力，可能需要将免费分区 - 而不是完整的磁带 - 收集到临时池中。然后，可以以更精细的粒度管理空闲存储容量，从而实现可用存储容量总量的最佳利用。</p><p>图11.5包含两个库中的可用磁带的临时池。即使一个库发生故障，应用程序仍可使用免费盒式磁带。</p><div class=pgc-img><img alt="存储网络 Day34 可移动媒体管理" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5b11f2553fb549019cfb44b4b2c12730><p class=pgc-img-caption></p></div><p><strong>驱动器池</strong></p><p>与磁带类似，驱动器应聚合到驱动器池中，驱动器池应标记优先级（图11.6）。 管理系统再次可以评估驱动器组的授权和优先级，以便为应用程序选择合格的驱动器。 这允许为高优先级应用程序保留专用驱动器，从而可以在每个时间点满足其安装请求。</p><p>图11.6应用程序从具有最高优先级的驱动器池获取驱动器。</p><div class=pgc-img><img alt="存储网络 Day34 可移动媒体管理" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b987b2ac547244039a28a6655578f807><p class=pgc-img-caption></p></div><p>如果有多个库可用，则驱动器池应包含来自多个库的驱动器，其方式与临时池相同。 这可确保即使一个库发生故障，驱动器仍可用。 至少，如果仍有可用的免费磁带，这在写入新数据时会有所帮助。 这对于从数据库的归档日志文件满足备份窗口或免费文件系统至关重要。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'存储','网络','Day34'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>