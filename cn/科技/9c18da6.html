<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>C++｜从基本数据类型到抽象数据类型，从结构体到类 | 极客快訊</title><meta property="og:title" content="C++｜从基本数据类型到抽象数据类型，从结构体到类 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3b4e36cdde464fbb8f1e5b984c273e87"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9c18da6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9c18da6.html><meta property="article:published_time" content="2020-10-29T20:59:51+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:51+08:00"><meta name=Keywords content><meta name=description content="C++｜从基本数据类型到抽象数据类型，从结构体到类"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9c18da6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>C++｜从基本数据类型到抽象数据类型，从结构体到类</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>1 从基本数据类型到抽象数据类型</strong></h1><p>在冯 · 诺依曼体系结构中，程序代码和数据都是以二进制存储的，因此，对计算机系统和硬件本身而言，数据类型的概念其实是不存在的。机器指令和汇编语言中，数据对象是用二进制数表示的，内存里存的都是二进制，对于内存里存的内容，可以说 “你认为它是什么，它就是什么”。在高级语言中，为了有效地组织数据，规范数据的使用，提高程序的可读性，方便用户使用，引入了整型，实型等基本数据类型。不同的高级语言会定义不同的基本数据类型。编程时只需知道如何使用这些类型的变量（如何声明，能执行哪些运算等），而不必了解变量的内部数据表示形式和操作的具体实现。</p><p>然而当表示复杂数据对象时，仅使用几种基本数据类型显然是不够的。某些语言(如PL/1)试图规定较多的基本数据类型(如数组，树，栈等)来解决这个问题。但实践表明，这不是一个好的办法，因此任何一种程序设计语言都无法将实际应用中涉及的所有复杂数据对象都作为其基本数据类型。所以，根本的解决方法就是允许用户自定义数据类型(User-Defined Data Type)。于是在后来发展的语言(如C语言)中，出现了构造数据类型(也称为复合数据类型)。它允许用户根据实际需要利用已有的基本数据类型来构造自己所需的数据类型，它们是由基本数据类型派生而来的，用于表示链表、树、堆栈等复杂的数据对象。例如C语言中构造数据类型的典型代表就是结构体。C语言通过指针和类型强转，使我们可以对一块内存进行“你希望它代表什么，它就代表什么”的操作，从而实现在更深的层次上控制计算机。</p><p>尽管构造数据类型机制使得某些比较复杂的数据对象可以作为某种类型的变量直接处理，但是这些类型的表示细节对外是可见的，没有相应的保护机制，因而在使用中会带来许多问题。例如，用户可在一个模块中随意修改该类型变量的某个成分，而这种修改对处理该数据对象的其他模块又会产生间接的影响，这对于一个由多人合作完成的大型软件系统的开发是很不利的。于是又出现了“信息隐藏”和抽象数据类型的概念。</p><p>所谓抽象数据类型(Abstract Data Type，ADT)是指这样一种数据类型，它不再单纯是一组值的集合，还包括作用在值集上的操作的集合，即在构造数据类型的基础上增加了对数据的操作，且类型的表示细节及操作的实现细节对外是不可见得。之所以说它是抽象的，是因为外部只知道它做什么，而不知道它如何做，更不知道数据的内部表示细节。这样，即使改变数据的表示和操作的实现，也不会影响程序的其他部分。抽象数据类型可达到更好的信息隐藏效果，因为它使程序不依赖于数据结构的具体实现方法，只要提供相同的操作（接口），换用其他方法实现（内部实现）时，程序无需修改，这个特征对于系统的维护很有利。C++中的类(Class)是抽象数据类型的一种具体实现，也是面向对象(Object-Oriented)程序设计语言中的一个重要概念。从结构体过渡到类是顺其自然的事情，但是不能将C++看成是带类的C，因为它带来的是思考和解决问题角度的转变。不同于面向过程的程序设计，在面向对象程序设计中，程序员面对的不再是一个个函数和变量，而是一个个对象。每个对象包含两个部分：数据和方法，数据用来保存对象的属性，而方法用来完成对数据的操作。对象与对象之间是通过消息进行通信的。</p><h1><strong>2 从结构体到类</strong></h1><p>结构体类型可以很方便地根据程序设计需要将某些具有内在联系的相同或不同类型的数据组合成一个有机的整体，便于统一使用。</p><p>但结构体也存在着一些不可避免的局限性：数据和代码是分离的，即结构体定义只包含数据成员，将所有对数据的处理放在函数中进行。这样在大型应用软件的编写和后期维护升级过程中，程序员不仅要考虑代码，还必须时时刻刻考虑数据结构，一量数据结构需要变更，就必须修改与之相关的所有模块的程序代码，使得代码可重用性差，维护代码代价高。一旦程序达到一定规模，程序的复杂性超过了结构化程序设计所能管理的限度，它就会变得难以处理和控制。</p><p>将数据和处理数据的函数当成一个整体，就能很好地解决上述的问题，这就是面向对象程序设计的编程思想。</p><p>结构体只是把数据封装在一起。突破这个概念，将处理数据了函数和数据一起“封装”成一种新的编程类型，这就是面向对象程序设计的类了。封装可以形象地理解为以类的格式为大包，将各种不同类型的相关数据封在包内同时将其处理函数也打包在一起。</p><p><strong>2.1 类的三部曲</strong></p><p>函数的“声明、定义和调用”三部曲延伸到类，类的三部曲包括：</p><p>2.1.1 类的声明：类也是一种自定义的构造数据类型，它是将不同类型的数据和与这些数据相关的操作函数封装在一起的集体体，类中的数据和操作函数分别称为数据成员和成员函数。声明一个类，也就是声明类的数据成员和成员函数。</p><p>2.1.2 类的成员函数定义：类的成员函数定义可以放在类声明的外部来实现。成员函数的定义形式为：</p><pre>类名::成员函数名(){ 成员函数体}</pre><p>2.1.3 类的应用：C++把类的“变量”改称为“对象”。因此“对象”与一个基本类型“变量”的地位和作用是一样的，在类的基础上定义的“对象”才是应用类来编程要处理的对象，其定义形式也相同，格式如下：</p><pre>类名：对象名列表;</pre><p>对象是类的实例，在类定义后可根据需要定义多个实例（对象）。之后类的应用就像结构成员的引用一样来引用对象的成员，只是现在的成员有两部分：数据成员和成员函数。一般来说，只有在类中被定义为公有的数据成员或成员函数才能够在类外被引用，使用引用符“.”来引用成员，其一般形式是：</p><pre>对象名.公有数据成员;对象名.公有成员函数(实参列表);</pre><p>类将数据成员和成员函数封装在一起，成员函数直接处理数据成员，可以保证私有数据成员的安全性。所有类既有“牢固的屏障”保护着私有成员的安全，又有公有成员函数作为良好的接口与外界交流。</p><div class=pgc-img><img alt=C++｜从基本数据类型到抽象数据类型，从结构体到类 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3b4e36cdde464fbb8f1e5b984c273e87><p class=pgc-img-caption></p></div><p>面向过程程序设计采用的是结构化程序设计方法。其核心是功能分解。当程序员试图编程解决一个实际问题时，第一步要做的是将问题分解成若干模块，接着根据模块来设计数据的表示方式，然后编写函数对这些数据进行处理，最终的程序是由这些函数构成的。在整个设计过程中，模块的数据处于功能实现的从属地位，着重点在编写函数，但程序员在编程时又必须时时考虑到数据，因为函数就是针对具体数据的操作。</p><p>这种数据和处理数据的函数的分离，给编程人员带来沉重负担。一旦后期数据结构需要变更，就必须修改与之有关的所有模块，因此代码可重用性差，维护代价高。一旦程序达到一定的规模，程序的复杂性超过了结构化程序设计技术所能管理的限度，它就会变得难以处理和控制。数据和函数的分离，是面向过程的程序设计在大型软件开发时的瓶颈问题，也是面向对象的程序设计着力解决的问题。</p><p>面向对象的程序设计，顾名思意就是以对象（“数据”）为主导的一种程序设计。面向对象的程序设计思想出现得很早，只是人们认识它是从C++语言开始的。C+语言是以数据为主导，以算法为辅助的面向对象的程序设计语言。在面向对象的程序设计中，数据和处理这些数据的操作函数构成了一个整体（类），这样数据结构发生变化时，只要对相关类进行修改，并不需要做大量的修改工作，即可实现对软件系统的修改，降低了软件维护成本。</p><p>在日常生活中，对象就是人们认识世界的基本单元，它可以是人，也可以是物体或者一件事。整个世界都是由形形色色的“对象”组成的，例如一个学生、一块黑板、一场比赛等。对象可以很简单，也可以很复杂，复杂的对象可由若干简单的对象构成。那么，对一组具有共同属性特征（数据）和行为特征（函数）的对象的抽象就是“类”。例如，由许多学生的共同特征可以抽象出“学生类”，而具体某一个学生就是“学生类”的一个实例（对象）。</p><p>可见，类和对象之间是抽象和具体的关系。以面向对象的观点来看，一个对象是由描述其属性的数据和处理这些数据的行为（函数）组成的实体，是由数据和函数共同构成的。类是对一组对象的抽象，这组对象具有相同的数据属性和行为特征（操作函数），在对象所属的类中要说明这些数据和操作函数。进行C++程序设计时，有了类，才能创建对象，一个对象是类的一个实例。就如同C语言中由系统定义了整形数据int的相关特征，用户才能够定义int型变量，并用该变量编程一样，C++的编程需要用户自己先定义“类”这种新的类型，才能定义该类的对象，并用该类对象编程。</p><p><strong>2.2 类的三大特性</strong></p><p>面向对象程序设计中最重要的概念是类和对象，最显著的特征是三大特性：封装性、继承性和多态性。</p><p>2.2.1<strong> 封装性</strong>：封装与数据抽象密切相关，它们在现实世界中广泛存在。以手机为例，手机上有若干按键，当人们使用手机时，只需根据自己的需要按下相应的按键，手机就会完成相应的工作。这些按键装在手机表面，人们通过它们与手机交互，而手机内部电路是封装在机壳里的，其内部原理对用户来说是隐藏的，这就是“封装”。</p><p>那么如何知道手机上哪个键是拨打、哪个键是挂断呢？这是手机的使用说明书告诉我们的。但使用说明书一般不会告诉我们内部电路是如何工作的。也就是说，说明书在手机做什么和怎么做之间做了明确的分工。</p><p>将这些观点应用于类，就不难理解数据的抽象和封装。将数据和处理数据的操作函数组成一个实体，数据的具体结构和对数的操作细节隐藏起来，用户通过操作接口（公有成员函数）对数据进行操作。对于用户来说，只需要知道如何通过操作接口对该数据进行操作，而不需要知道具体是如何做到的，也不需要知道数据如何表示，这就是“封装”。</p><p>对象的这一封装机制，可将对象的使用者和设计者分开，使用者像手机用户一样，不必知道对象行为实现的细节，只需按照设计得提供的接口去做。封装的结果实际上隐藏了复杂性，并提供了代码重用性，从而减轻了开发和维护一个软件系统的难度。同时，封装可以防止程序员对对象内部的数据成员和成员函数进行不必要的干涉，提高了系统的安全性。</p><p>2.2.2 <strong>继承性</strong>：继承在现实生活中是一个很容易理解的概念。例如，每人都继承了父母的某些特征。从面向对象程序设计的观点来看，继承所表达的是类之间延续的关系。这种关系使得某类（子类或派生类）可以继承另一个类（父类或基类）的属性特征和行为特征。例如，动物是一个类，狗是动物中的一种，具有动物的一般特征，因此可以继承动物类的某些特性，产生出一个新的狗类，而无须重新定义一个新类。</p><p>在有继承关系的派生类中，可以直接使用基类的非私有成员数据或调用基类的非私有成员方法。</p><p>因此，在面向对象程序设计中，继承的作用有两个：一是避免公用代码的重复开发，减少代码和数据冗余；二是通过增强一致性来减少模块间的接口和界面。继承机制为程序员提供了一种组织、构造和重用类的手段。</p><p>2.2.3 <strong>多态性</strong>：多态性的意义在于，类的各个对象能以不同的方式响应同一消息，即所谓的“同一接口，多种响应方式”，或者说属于不同类的函数可以共用一个函数名，或者同样的信息，会因接收的个体的不同而有不同的动作，例如同样是“出行”，飞机出行、火车出行、汽车出行、......，会因为交通工具的不同，实现的方式截然不同。</p><p>类的多态性也是存在于继承关系中，基类定义虚函数，派生类重写这个虚函数，当基类指针对象指向派生类对象并调用虚函数时就产生了多态。</p><h1><strong>3 面向过程思维</strong></h1><p>传统的面向过程的程序设计是围绕着功能实现的过程而进行的。在面向过程的程序设计模式下，首先要为解决某个问题确定一个算法，为该算法构造适当的数据结构，将算法和数据结构用计算机语言描述出来，程序结构是过程化的分级结构形式。在这种程序设计中，数据与操作需要分别设计，重点放在对数据进行操作的过程上。一旦数据发生变化，需要及时修改与之相关的程序模块。数据与操作过程的分离容易造成代码的可重用性差及维护代价高。</p><p>面向过程主要思考的是数据结构和算法的选择，主要工作是将任务逐渐分解为函数，并通过函数的相互调用去完成任务。</p><p>结构化、模块化的面向过程的程序设计方法对于小规模的问题是一种非常不错的选择。</p><h1><strong>4 面向对象的思维</strong></h1><p>面向对象的程序设计把客观世界看成一系列相互关联的对象，每个对象都有其属性及允许的各种操作；程序员主要考虑如何创建对象和创建什么样的对象，并设计必要的程序代码；每个对象都有描述其特征的属性及其附属于它的行为；</p><p>现实世界事物的抽象：</p><p>I 实体entity→数据模型→实体用数据来描述，实体名（属性名1…）；</p><p>II 对象object：属性（数据）、事件、方法，将属性和操作封装在一起；</p><p>对象至少有两个要素；一是从事活动的主体，二是活动的内容；从计算机的角度看，一个对象应该包括两个要素：一是数据，二是需要进行的操作。对象就是一个包含数据以及与这些数据有关的操作的集合。在程序设计中，对象是由数据及可以对这些数据施加的操作结合在一起所构成的独立实体。也就是说，对象就是把数据和对这些数据的操作放在一起，作为一个相互依存不可分割的整体。对象是对客观事物的表示或描述，一个对象具有自身的属性（数据）和可为自己或别人做的工作功能（操作），它能通过发送消息与其他对象进行通信，协同完成任务。</p><p>面向对象的程序设计是一种先进的程序设计技术，其核心思想是封装。首先提取要解决问题中所需要的数据，然后分析出对这些数据需要进行的操作，最后将数据与操作封装（encapsulation)在一起形成一个整体（即对象）。在这种程序设计中，数据与操作作为一个整体进行设计，这种方法将提高代码的可重用性，减少程序设计的工作量，方便维护。</p><p>面向对象程序设计者的任务包括两个方面。</p><p>（1）设计对象，即决定把哪些数据和操作代码“封装”在一起；</p><p>（2）怎样通知有关对象所需完成的任务，即如何发送消息。程序设计者如同一个总调度，不断地向各个对象发出命令，让这些对象活动起来，完成自己范围内的操作（消息循环与事件响应）；</p><p>对象的操作可通过修改对象的属性值或执行对象的方法完成。</p><p>具体来说：</p><p>① 需要哪些类，哪些对象；</p><p>② 每个类应该定义哪些属性和方法；</p><p>③ 类之间的关系：关联、继承、聚合、实现、多态；</p><p>面向对象编程的程序就是由一组协同工作的对象组成，抽象类是类的模板，类是对象的模板。</p><p>在面向对象的语言中，利用继承，可以先创建一个共有属性的一般类，根据一般类再创建具有特殊属性的新类。</p><p>体现的抽象层次：接口→抽象类→父类→子类→对象。</p><p>－End－</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'数据','类型','C++'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>