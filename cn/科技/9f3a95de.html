<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划 | 极客快訊</title><meta property="og:title" content="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RrlSVa01MRUDMJ"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><meta property="article:published_time" content="2020-11-14T21:03:23+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:23+08:00"><meta name=Keywords content><meta name=description content="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9f3a95de.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RrlSVa01MRUDMJ><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RzWw8UA6cvVSvL><p>作者 | IronmanJay</p><p>责编 | 王晓曼</p><p>出品 | CSDN博客</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT4Gwk56bt5iOJ><p><strong>Docker 基础介绍</strong></p><p>下图为 Docker 图标（是一个鲸鱼上面是集装箱）。</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S10W7nm4hgx5ZD><p><strong>1、我们为什么要使用Docker</strong></p><p>当我们在工作中，一款产品从开发设计到上线运行，其中需要开发人员和运维工程师，开发人员负责代码编写，开发产品，运维工程师需要测试环境，产品部署。这之间就会有分歧。</p><p>比如开发人员在自己的电脑上运行产品没有问题，可是换了一个环境，运维工程师部署的时候由于操作环境和开发人员不一致，其中包括操作系统、开发环境、部署文件等等。</p><p>开发人员需要告诉运维团队所需的全部配置文件+所有的软件环境，也就导致产品部署出现问题，开发人员和运维工程师出现分歧。</p><p>就好比我们要开发一个电商项目，其中肯定包括 Java 环境/Tomcat/ MySQL / JDBC 驱动包/相应 jar 包等，还需要较复杂的安装配置，并且不能跨平台使用，如果开发人员在 Windows 上开发，而运维工程师部署产品在 Linux 上，就会导致由于环境不同的产品部署问题，就算不跨系统，而是换一台同样操作系统的服务器，要移植部署依然非常麻烦。为了解决这个问题，我们的 Docker 应运而生!</p><p><strong>2、Docker是什么</strong></p><p>说了这么多，那么 Docker 到底是什么，能帮我们做什么，且听我慢慢道来。</p><p>首先我们要知道，Docker 是基于 Go 语言实现的云开源项目，Docker 的主要目标是“Build，Ship and Run Any App，Anywhere”，Docker 其中包括，镜像、容器、仓库，很简单，目的就是通过对应用组件的封装、分发、部署、运行等生命周期的管理，使用户的产品（可以是 web 应用或者数据库应用）及其环境能够做到“一次封装，到处运行”。</p><p>再通俗点说，就是我们使用 Docker，使得运行在 Docker 容器上面的应用，配置好一次环境，换到别的机器上可以一键部署，大大简化了操作，实现了跨平台，跨服务器，由下而上打包，达到应用程式跨平台间的无缝接轨运作。</p><p>一句话，<strong>Docker解决了运行环境和配置问题软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。</strong><strong>3、Docker能干什么</strong></p><p>这个需要对比来说，其实我们常用的虚拟机就和Docker类似，我将通过之前的虚拟机技术和现在和容器虚拟化技术做一个对比。</p><p>（1）之前的虚拟机技术</p><p>我们对虚拟机并不陌生，其实它也可以看作是一个Docker，是一种带环境安装的解决方案，可以在一个操作系统中运行另一个操作系统，对于计算机底层来说，虚拟机就是一个软件而已，不需要的时候就可以删掉，对其他部分毫无影响，我们也可以通过虚拟机实现不同产品的打包发布，但是它也有很多缺点，比如：资源占用多、冗余步骤多、启动慢。</p><p>（2）容器虚拟化技术</p><p>由于前面虚拟机存在诸多问题，Linux 发展出了另一种虚拟化技术：Linux 容器，Linux 容器不是模拟一个完整的操作系统而是对进程进行隔离，有了容器，我们就可以将软件运行所需的所有资源打包到一个隔离的容器中，容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的库资源和设置。系统因此而变得高效轻量并保证部署在任何环境中的软件都能始终如一地运行。</p><p>（3）小总结</p><ul><li><p>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程。</p></li><li><p>而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。</p></li><li><p>每个容器之间互相隔离，每个容器有自己的文件系统 ，容器之间进程不会相互影响，能区分计算资源。</p></li></ul><p><strong>4、Docker的优势</strong></p><ul><li><p>更快速的应用交付和部署；</p></li><li><p>更便捷的升级和扩缩容；</p></li><li><p>更简单的系统运维；</p></li><li><p>更高效的计算资源利用。</p></li></ul><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT7S2kzFTfre26><p><strong>Docker安装</strong></p><p><strong>1、前提说明</strong></p><p>目前，CentOS 仅发行版本中的内核支持 Docker。Docker 运行在CentOS-7 上，要求系统为64位、系统内核版本为3.10 以上。</p><p>Docker 运行在 CentOS-6.5 或更高的版本的 CentOS 上，要求系统为64位、系统内核版本为 2.6.32-431 或者更高版本。</p><p>所以我们需要查看自己的Centos内核是否支持Docker，使用下面的命令，可根据上面对照看自己的Centos是否符合要求，如不符合请升级。</p><pre>[ironmanjay@localhost ~]$ uname -a<br>Linux localhost.localdomain 3.10.0-1062.12.1.el7.x86_64 #1 SMP Tue Feb 4 23:02:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</pre><p><strong>2、具体安装步骤</strong></p><p>Dcoker安装比较简单，只要按照我的步骤一步一步走，肯定没问题，请读者细心。</p><p>（1）更新下载源</p><pre>1、先备份<br>sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br>2、更换源<br>sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</pre><p>（2）更新yum包</p><pre><p>sudo yum update</p></pre><p>（3）安装相关软件包</p><pre><p>sudo yum -y install gcc</p></pre><pre><p>sudo yum -y install gcc-c++</p></pre><pre>sudo yum install -y yum-utils device-mapper-persistent-data lvm2<br></pre><p>（4）更新yum软件包索引</p><pre><p>sudo yum makecache fast</p></pre><p>（5）安装Dcoker</p><pre><p>sudo yum -y install docker-ce</p></pre><p>（6）启动Dcoker服务</p><pre>systemctl start docker<br></pre><p>（7）开机自启</p><pre><p>sudo systemctl enable docker</p></pre><p>（8）将Docker加入到组中</p><pre><p>sudo groupadd docker</p></pre><pre><p>sudo gpasswd -a [本地用户名] docker</p></pre><p>（9）配置镜像加速</p><p>首先进入阿里云的容器镜像服务网站点击这个连接，使用支付宝淘宝登录都可以，如下图，复制加速器地址。</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W7ohDZBTBj7><p>然后按照下面操作修改镜像加速：</p><pre><p>sudo mkdir -p /etc/docker</p></pre><pre><p>sudo vim /etc/docker/daemon.json</p></pre><p>在打开的文件中按照下面编辑：</p><pre>{<br>"registry-mirrors": ["刚刚复制的加速器地址"]<br>}<br></pre><p>加载配置文件：</p><pre>sudo systemctl daemon-reload<br></pre><p>重启Docker服务</p><pre><p>sudo systemctl restart docker</p></pre><p><strong>3、测试</strong></p><p>（1）查看版本</p><pre><p>docker version</p></pre><p>如下图：</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W7p42B1rvre><p><strong>（2）HelloWorld</strong></p><pre><p>docker pull hello-world</p></pre><pre>docker run hello-world<br></pre><p>如下图：</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S10W8UNGWBbXPa><p>至此安装完毕！</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTJXJ1kBqzfCnu><p><strong>Docker常用命令</strong></p><p><strong>1、帮助命令</strong></p><pre>docker version #查看版本号<br>docker info #显示Docker系统信息，包括镜像和容器数<br>docker --help #查看Docker有哪些命令</pre><p><strong>2、镜像命令</strong></p><pre>docker images #查看当前Docker中的镜像<br>docker search 某个镜像名字 #查询某个镜像<br>docker pull 某个镜像名字 #拉取(下载)某个镜像<br>docker rmi 某个镜像名字ID #删除某个镜像</pre><p><strong>3、容器基本命令(切记，有镜像才能创建容器)</strong></p><pre>docker run [OPTIONS] image [COMMAND] [ARG...] #新建并启动容器<br>docker ps [OPTIONS] #列出当前所有正在运行的容器<br>exit #容器停止退出<br>ctrl+P+Q #容器不停止退出<br>docker start 容器ID或者容器名 #启动容器<br>docker restart 容器ID或者容器名 #重启容器<br>docker stop 容器ID或者容器名 #停止容器<br>docker kill 容器ID或者容器名 #强制停止容器<br>docker rm 容器ID #删除已停止的容器<br>docker rm -f $(docker ps -a -q) #一次性删除多个容器<br>docker ps -a -q | xargs docker rm #一次性删除多个容器</pre><p><strong>4、容器重要命令</strong></p><pre>docker run -d 容器名 #启动守护式容器<br>docker logs -f -t --tail 容器ID #查看容器日志,-t是加入时间戳，-f是最新的日志打印,--tail数字显示最后多少条<br><br>docker top 容器ID #查看容器内运行的进程<br>docker inspect 容器ID #查看容器内部细节<br>docker exec -it 容器ID bashShell #进入正在运行的容器并以命令行交互<br>docker attach 容器ID #重新进入Docker容器<br>docker cp 容器ID:容器内路径 目的主机路径 #从容器内拷贝文件到主机上</pre><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7YR5xGDl><p><strong>Docker 镜像</strong></p><p><strong>1、Docker镜像是什么？</strong></p><p>是一种UnionFS（联合文件系统），是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。</p><p>Union 文件系统是 Docker 镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p><p><strong>2、Docker镜像加载原理</strong></p><p>Docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统UnionFS。bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引导加载kernel, Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。</p><p>这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p><p><strong>3、Docker镜像为什么很小</strong></p><p>如果我们从仓库pull一个centos只有200左右mb，但是我们的镜像centos文件高达4G左右，因为我们的在仓库pull的centos剔除了无用的东西，只是一个精简的OS，rootfs可以很小，只包含了最基本的命令、工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs 就行了。</p><p><strong>4、Docker分层的镜像</strong></p><p>如下图所见，当我们在仓库下载tomcat时，是一层一层下载的，这里面包含着运行tomcat的环境，就像洋葱一样，一层一层的最终展示给我们镜像版的tomcat。</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W8V18Bg9Wq8><p><strong>5、Docker镜像为什么要采用分层结构</strong></p><p>Docker镜像最大的一个好处就是 - 共享资源。</p><p>比如：有多个镜像都从相同的 base 镜像构建而来，那么宿主机只需在磁盘上保存一份base镜像，同时内存中也只需加载一份 base 镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。</p><p><strong>6、Docker镜像的特点</strong></p><p>Docker镜像都是只读的当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作“容器层”，“容器层”之下的都叫“镜像层”。</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7uHXU5GZc><p><strong>Docker 容器数据卷</strong></p><p><strong>1、什么是Docker容器数据卷</strong></p><p>首先我们先明确一个理念，我们的Redia使用RDB和AOF来实现持久化，其实我们的Docker容器数据卷就类似这个，为了实现Docker的数据持久化，当我们运用与运行的环境打包形成容器，运行可以伴随着容器，但是我们对数据的要求希望是持久化的，而容器之间希望有可能共享数据，也就是为了能保存数据在Docker中我们使用卷。</p><p><strong>2、Docker容器数据卷能干吗</strong>简而言之，容器数据卷可以帮我们实现容器的持久化，和容器间继承+共享数据，而什么又是卷呢？</p><p>卷就是目录或文件，存在于一个或多个容器中，由docker挂载到容器，但不属于联合文件系统，因此能够绕过Union File System提供一些用于持续存储或共享数据的特性，卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷。</p><p><strong>3、怎么用数据卷(容器内添加)</strong>我们有两种方式来添加容器内数据卷，一种是直接命令添加，另一种是DockerFile添加，下面我们详解。</p><p>第一种方式：直接命令添加：</p><p>（1）挂载容器内数据卷</p><pre><p>docker run -it -v /宿主机绝对路径目录:/容器内目录 镜像名</p></pre><p>（2）查看数据卷是否挂载成功</p><pre><p>docker inspect 容器ID</p></pre><p>第二种方式：DockerFile添加：</p><p>（1）根目录下新建mydocker文件夹并进入</p><pre># 进入根目录<br>cd /<br># 新建mydocker<br>sudo mkdir mydocker</pre><p>（2）在mydocker中新建Dockerfile文件</p><pre>sudo touch Dockerfile # 新建<br>sudo vim Dockerfile # 编辑</pre><p>（3）File构建</p><pre># volume test<br>FROM centos<br>VOLUME ["/dataVolumeContainer1","/dataVolumeContainer2"]<br>CMD echo "finished,--------success1"<br>CMD /bin/bash</pre><p>（4）build后生成镜像</p><pre><p>docker build Dockerfile</p></pre><p><strong>4、注意</strong>如果Docker挂载主机目录Docker访问出现cannot open directory .: Permissiondenied。</p><p>解决办法：在挂载目录后多加一个–privileged=true参数即可。</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTLSNam5ZxLDlM><p><strong>DockerFile</strong></p><p><strong>1、DockerFile是什么</strong></p><p>Dockerfile是用来构建Docker镜像的构建文件，是由一系列命令和参数构成的脚本。</p><p><strong>2、DockerFile构建三步骤</strong></p><ul><li><p>编写Dockerfile文件</p></li><li><p>dockerbuild</p></li><li><p>dockerrun</p></li></ul><p><strong>3、DockerFile构建过程解析</strong></p><ul><li><p>docker从基础镜像运行一个容器；</p></li><li><p>执行一条指令并对容器作出修改；</p></li><li><p>执行类似docker commit的操作提交一个新的镜像层；</p></li><li><p>docker再基于刚提交的镜像运行一个新容器；</p></li><li><p>执行dockerfile中的下一条指令直到所有指令都执行完成。</p></li></ul><p><strong>4、DockerFile体系结构(保留字指令)</strong></p><pre>FROM #基础镜像，当前新镜像是基于哪个镜像的<br>MAINTAINER #镜像维护者的姓名和邮箱地址<br>RUN #容器构建时需要运行的命令<br>EXPOSE #当前容器对外暴露出的端口<br>WORKDIR #指定在创建容器后，终端默认登陆的进来工作目录<br>ENV #用来在构建镜像过程中设置环境变量<br>ADD #将宿主机目录下的文件拷贝进镜像且ADD命令会自动处理URL和解压tar压缩包<br>COPY #类似ADD，拷贝文件和目录到镜像中。将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的 &lt;目标路径&gt; 位置<br>VOLUME #容器数据卷，用于数据保存和持久化工作<br>CMD #指定一个容器启动时要运行的命令，Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替换<br>ENTRYPOINT #指定一个容器启动时要运行的命令，ENTRYPOINT 的目的和 CMD 一样，都是在指定容器启动程序及参数<br>ONBUILD #当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</pre><p><strong>5、自定义镜像mycentos</strong></p><p>（1）进入根目录新建mydocker</p><pre>#进入根目录<br>cd /<br>#新建mydocker文件夹<br>sudo mkdir mydocker</pre><p>（2）在此目录下新建DockerFile文件</p><pre><p>vim DockerFile</p></pre><p>（3）编辑DockerFile</p><pre>FROM centos<br>MAINTAINER IronmanJay&lt;IronmanJay@qq.com&gt;<br>ENV MYPATH /usr/localWORKDIR $MYPATH<br>RUN yum -y install vimRUN yum -y install net-tools<br>EXPOSE 80<br>CMD echo $MYPATHCMD echo "success--------------ok"CMD /bin/bash</pre><p>（4）构建</p><pre><p>docker build -t 新镜像名字:TAG .</p></pre><p>（5）运行</p><pre><p>docker run -it 新镜像名字:TAG </p></pre><p>（6）列出镜像的变更历史</p><pre><p>docker history 镜像名</p></pre><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTRIuPNI7JPB03><p><strong>Docker常用安装</strong></p><p><strong>1、总体步骤</strong></p><ul><li><p>搜索镜像</p></li><li><p>拉取镜像</p></li><li><p>查看镜像</p></li><li><p>启动镜像</p></li><li><p>停止容器</p></li><li><p>移除容器</p></li></ul><p><strong>2、安装tomcat</strong></p><p>（1）dockerhub上面查找tomcat镜像</p><pre><p>docker search tomcat</p></pre><p>（2）从docker hub上拉取tomcat镜像到本地</p><pre><p>docker pull tomcat</p></pre><p>（3）dockerimages查看是否有拉取到的tomcat</p><pre><p>docker images</p></pre><p>（4）使用tomcat镜像创建容器(也叫运行镜像)</p><pre><p>docker run -it -p 8080:8080 tomcat</p></pre><p>（5）其他</p><pre>-p #主机端口:docker容器端口<br>-P #随机分配端口<br>i #交互<br>t #终端</pre><p><strong>3、安装MySQL</strong></p><p>（1）dockerhub上面查找mysql镜像</p><pre><p>docker search mysql</p></pre><p>（2）从docker hub上(阿里云加速器)拉取mysql镜像到本地</p><pre><p>docker pull mysql</p></pre><p>（3）使用mysql镜像创建容器(也叫运行镜像)</p><pre><p>docker run -p 12345:3306 --name mysql -v /IronmanJay/mysql/conf:/etc/mysql/conf.d -v /IronmanJay/mysql/logs:/logs -v /IronmanJay/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql</p></pre><p>（4）命令说明</p><pre>-p 12345:3306： #将主机的12345端口映射到docker容器的3306端口<br>--name mysql： #运行服务名字<br>/IronmanJay/mysql/conf:/etc/mysql/conf.d ： #将主机/IronmanJay/mysql录下的conf/my.cnf 挂载到容器的 /etc/mysql/conf.d-v<br>/IronmanJay/mysql/logs:/logs： #将主机/IronmanJay/mysql目录下的 logs 目录挂载到容器的 /logs<br>-v /IronmanJay/mysql/data:/var/lib/mysql ： #将主机/IronmanJay/mysql目录下的data目录挂载到容器的 /var/lib/mysql -e<br>MYSQL_ROOT_PASSWORD=123456： #初始化 root 用户的密码。-d mysql: 后台程序运行mysql</pre><p><strong>4、安装Redis</strong></p><p>（1）从docker hub上(阿里云加速器)拉取redis镜像到本地</p><pre><p>docker pull redis</p></pre><p>（2）使用redis镜像创建容器(也叫运行镜像)</p><pre><p>docker run -p 6379:6379 -v /IronmanJay/myredis/data:/data -v /IronmanJay/myredis/conf/redis.conf:/usr/local/etc/redis/redis.conf -d redis:3.2 redis-server /usr/local/etc/redis/redis.conf --appendonly yes</p></pre><p>（3）测试redis-cli连接</p><pre><p>docker exec -it 运行着Redis服务的容器ID redis-cli</p></pre><p>版权声明：本文为CSDN博主「IronmanJay」的原创文章，原文链接：https://blog.csdn.net/IronmanJay/article/details/104677814</p><img alt="整理了一份 Docker系统知识，从安装到熟练操作看这篇就够了 | 原力计划" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R69FpRH4d90a7d><pre><pre><pre><p>☞程序员在这些地方敲代码，普通笔记本根本扛不住</p><p>☞怒肝 8 个月源码，我成为了 Spring 开源贡献者</p><p>☞可怕！CPU 竟成了黑客的帮凶</p><p>☞Gary Marcus：因果熵理论的荒诞和认知科学带给AI的11个启示 | 文末赠书</p><p>☞这 10 个云计算错误，会让你的业务一蹶不振</p><p>☞好扑科技结合区块链行业发展趋势，重磅推出“好扑区块链合伙人”计划</p></pre></pre></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Docker','系统','知识'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>