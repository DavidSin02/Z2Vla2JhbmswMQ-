<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API | 极客快訊</title><meta property="og:title" content="强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1f4ef9624fc04a6c87b1133964034719"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9fea94f9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9fea94f9.html><meta property="article:published_time" content="2020-10-29T21:10:23+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:23+08:00"><meta name=Keywords content><meta name=description content="强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/9fea94f9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>你还没开始用手机群控软件做推广吗？做客服系统吗？做工作室吗？做手机测试吗？那你真该好好反省一下了。现在我来讲讲强大的群控软件的脚本功能，让你用起来更得心应手。</p><p>Total Control 是一款手机多控软件，可以通过电脑控制一台到100台手机。拥有强大的脚本功能。</p><div class=pgc-img><img alt="强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1f4ef9624fc04a6c87b1133964034719><p class=pgc-img-caption></p></div><p>Total Control既提供 REST API，也提供了 JS API，用户们可以根据自己需求选择接口来实现功能，相比之下 Total Control 提供的JS API 更丰富，功能更强大，为了方便用户，在6.9.0版本Total Control 可以通过POST执行 device.&lt;function> 的 JS API。</p><div class=pgc-img><img alt="强大脚本功能助您一臂之力-Total Control 通过POST执行 JS API" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8620cf7fb49442f8b4e25dc921ad0064><p class=pgc-img-caption></p></div><p>如果用户想通过 POST 调用 JS API, 可以使用下面介绍的 REST API 在 Total Control 上执行 JS API。</p><p>请求方式：POST</p><pre>http://IP:8090/TotalControl/v1/devices/:device/scripts?cmd=:cmd&amp;param=:parm&amp;token=:token</pre><p>参数说明：</p><p>参数名</p><p><strong></strong>类型</p><p><strong></strong>必选</p><p><strong></strong>描述</p><p><strong></strong>IP</p><p><strong></strong>string</p><p><strong></strong>Y</p><p><strong></strong>访问 Total Control 服务器的 IP 地址</p><p><strong></strong>token</p><p><strong></strong>string</p><p><strong></strong>Y</p><p><strong></strong>Total Control TOKEN</p><p><strong></strong>cmd</p><p><strong></strong>string</p><p><strong></strong>Y</p><p><strong></strong>要执行的 JS API 命令对应的方法名称</p><p><strong></strong>param</p><p><strong></strong>string</p><p><strong></strong>N</p><p><strong></strong>要执行的 JS API 命令对应的方法参数,多个参数使用’[]’,例如：[0.5, 0.25]）</p><p><strong></strong>返回示例：</p><p>成功，则返回:</p><p>{ "status": true, "value": "" }</p><p><strong></strong>字段</p><p><strong></strong>类型</p><p><strong></strong>描述</p><p><strong></strong>status</p><p><strong></strong>boolean</p><p><strong></strong>true：成功 false：失败</p><p><strong></strong>value</p><p><strong></strong>string</p><p><strong></strong>JS API 的返回信息</p><p><strong></strong></p><p>示例：通过 POST执行JS API “send(sigmaConst.KEY_MENU)"</p><p>注意：下列示例是通过本机访问 Total Control 服务器，所以 IP 都是用的 "localhost"。</p><p>RingoJS 请求示例：</p><p>可以复制下面的代码，在 Total Control 的脚本终端中执行，也可以保存为后缀为 js 的文件, 例如:example.js，在Total Control 执行器中执行。</p><pre>//导入一些 ringoJS 的包var {request} = require('ringo/httpclient');var base64 = require('ringo/base64');//将用户名密码编码，'sigma:3D391497'是用户名和密码,在Total Control系统设置里面可以看到var userpass = base64.encode('sigma:3D391497');//第一步：获取 Total Control 脚本开发所用的开发 tokenvar gettoken = request({ method: 'GET', url: 'http://localhost:8090/TotalControl/v1/login', headers: {'Authorization': userpass} });//将获取的响应内容转换成json对象var ret_token = eval('(' + gettoken.content + ')'); var token = ret_token.value.token; print("//获取 token 的值为：" + token);//第二步：获取当前主控设备 ID 值var getdevice = request({ method: 'GET', url: 'http://localhost:8090/TotalControl/v1/devices/main?token=' + token });var device = eval('(' + getdevice.content + ')').id; print("//获取到设备的 ID："+ device);//第三步：通过 POST 调用 JS APIvar ret = request({ method: 'POST', url: 'http://localhost:8090/TotalControl/v1/devices/'+ device+'/scripts', data: { "token": token, "cmd":"send", "param":"sigmaConst.KEY_MENU" } });print(ret.content);</pre><p>RingoJS 示例运行结果：</p><p>成功，则返回:</p><pre>//获取 token 的值为：m195zZEgY91PMcbo//获取到设备的 ID：device@230441652{ "status": true, "value": "0"}</pre><p>易语言请求示例：</p><pre>.版本 2.程序集 窗口程序集_启动窗口.子程序 __启动窗口_创建完毕.局部变量 base64, 文本型.局部变量 token, 文本型.局部变量 device, 文本型.局部变量 j_token, 类_json, , , 用来解析获取 token 的 json.局部变量 j_dev, 类_json, , , 用来解析获取设备ID 值的 json.局部变量 j_ret, 类_json, , , 用来解析 REST API 接口的json.局部变量 bool, 逻辑型.局部变量 bool_dev, 逻辑型.局部变量 bool_ret, 逻辑型.局部变量 status, 文本型base64 ＝ 到文本 (编码_BASE64编码 (到字节集 (“sigma:3D391497”)))输出调试文本 (“将用户名和密码组装成 sigma:3D391497 进行 base64 编码生成的字符串为： ” ＋ base64)bool ＝ j_token.解析 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/login”, 0, , , , “Authorization:” ＋ base64, , , , , , , , , ))).如果 (bool) 输出调试文本 (“第一步，获取 token，返回值为：” ＋ j_token.取数据文本 ()) token ＝ j_token.取通用属性 (“['value'].token”) 输出调试文本 (“获取的 token 值为： ” ＋ token) bool_dev ＝ j_dev.解析 (编码_utf8到gb2312 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/devices/main?token=” ＋ token, 0)))) .如果 (bool_dev) 输出调试文本 (“第二步，获取设备 ID 值，返回值为：” ＋ j_dev.取数据文本 ()) device ＝ j_dev.取通用属性 (“['id']”) 输出调试文本 (“获取的设备 ID 值为： ” ＋ device) bool_ret ＝ j_ret.解析 (编码_utf8到gb2312 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/devices/” ＋ device ＋ “/scripts?cmd=send¶m=sigmaConst.KEY_MENU&amp;token=” ＋ token, 1)))) .如果 (bool_ret) 输出调试文本 (“第三步，通过 POST 调用 JS API，返回值为： ” ＋ j_ret.取数据文本 ()) status ＝ j_ret.取属性对象 (“status”) .如果 (status ＝ “true”) 输出调试文本 (“恭喜你，成功了！”) .否则 输出调试文本 (“不好意思，失败了！”) .如果结束 .否则 输出调试文本 (“该 API 执行失败”) .如果结束 .否则 输出调试文本 (“获取设备 ID 值失败”) .如果结束.否则 输出调试文本 (“获取 token 失败”).如果结束</pre><p>易语言代码运行结果：</p><p>成功，则返回:</p><pre>* 将用户名和密码组装成 sigma:3D391497 进行 base64 编码生成的字符串为： c2lnbWE6M0QzOTE0OTc=* 第一步，获取 token，返回值为：{"status":true,"value":{"token":"U56adwI779838M6F"}}* 获取的 token 值为： U56adwI779838M6F* 第二步，获取设备 ID 值，返回值为：{"id":"device@230441652"}* 获取的设备 ID 值为： device@230441652* 第三步，通过 POST 调用 JS API，返回值为： {"status":true,"value":"0"}* 恭喜你，成功了！你还没开始用手机群控软件做推广吗？做客服系统吗？做工作室吗？做手机测试吗？那你真该好好反省一下了。现在我来讲讲强大的群控软件的脚本功能，让你用起来更得心应手。 Total Control 是一款手机多控软件，可以通过电脑控制一台到100台手机。拥有强大的脚本功能。Total Control既提供 REST API，也提供了 JS API，用户们可以根据自己需求选择接口来实现功能，相比之下 Total Control 提供的JS API 更丰富，功能更强大，为了方便用户，在6.9.0版本Total Control 可以通过POST执行 device.&lt;function&gt; 的 JS API。 如果用户想通过 POST 调用 JS API, 可以使用下面介绍的 REST API 在 Total Control 上执行 JS API。请求方式：POSThttp://IP:8090/TotalControl/v1/devices/:device/scripts?cmd=:cmd&amp;param=:parm&amp;token=:token参数说明：参数名类型必选描述IPstringY访问 Total Control 服务器的 IP 地址tokenstringYTotal Control TOKENcmdstringY要执行的 JS API 命令对应的方法名称paramstringN要执行的 JS API 命令对应的方法参数,多个参数使用’[]’,例如：[0.5, 0.25]）返回示例：成功，则返回:{ "status": true, "value": "" }字段类型描述statusbooleantrue：成功 false：失败valuestringJS API 的返回信息 示例：通过 POST执行JS API “send(sigmaConst.KEY_MENU)"注意：下列示例是通过本机访问 Total Control 服务器，所以 IP 都是用的 "localhost"。RingoJS 请求示例：可以复制下面的代码，在 Total Control 的脚本终端中执行，也可以保存为后缀为 js 的文件, 例如:example.js，在Total Control 执行器中执行。//导入一些 ringoJS 的包var {request} = require('ringo/httpclient');var base64 = require('ringo/base64');//将用户名密码编码，'sigma:3D391497'是用户名和密码,在Total Control系统设置里面可以看到var userpass = base64.encode('sigma:3D391497');//第一步：获取 Total Control 脚本开发所用的开发 tokenvar gettoken = request({ method: 'GET', url: 'http://localhost:8090/TotalControl/v1/login', headers: {'Authorization': userpass} });//将获取的响应内容转换成json对象var ret_token = eval('(' + gettoken.content + ')'); var token = ret_token.value.token; print("//获取 token 的值为：" + token);//第二步：获取当前主控设备 ID 值var getdevice = request({ method: 'GET', url: 'http://localhost:8090/TotalControl/v1/devices/main?token=' + token });var device = eval('(' + getdevice.content + ')').id; print("//获取到设备的 ID："+ device);//第三步：通过 POST 调用 JS APIvar ret = request({ method: 'POST', url: 'http://localhost:8090/TotalControl/v1/devices/'+ device+'/scripts', data: { "token": token, "cmd":"send", "param":"sigmaConst.KEY_MENU" } });print(ret.content); RingoJS 示例运行结果：成功，则返回://获取 token 的值为：m195zZEgY91PMcbo//获取到设备的 ID：device@230441652{ "status": true, "value": "0"} 易语言请求示例： .版本 2 .程序集 窗口程序集_启动窗口 .子程序 __启动窗口_创建完毕.局部变量 base64, 文本型.局部变量 token, 文本型.局部变量 device, 文本型.局部变量 j_token, 类_json, , , 用来解析获取 token 的 json.局部变量 j_dev, 类_json, , , 用来解析获取设备ID 值的 json.局部变量 j_ret, 类_json, , , 用来解析 REST API 接口的json.局部变量 bool, 逻辑型.局部变量 bool_dev, 逻辑型.局部变量 bool_ret, 逻辑型.局部变量 status, 文本型  base64 ＝ 到文本 (编码_BASE64编码 (到字节集 (“sigma:3D391497”)))输出调试文本 (“将用户名和密码组装成 sigma:3D391497 进行 base64 编码生成的字符串为： ” ＋ base64)bool ＝ j_token.解析 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/login”, 0, , , , “Authorization:” ＋ base64, , , , , , , , , ))).如果 (bool) 输出调试文本 (“第一步，获取 token，返回值为：” ＋ j_token.取数据文本 ()) token ＝ j_token.取通用属性 (“['value'].token”) 输出调试文本 (“获取的 token 值为： ” ＋ token) bool_dev ＝ j_dev.解析 (编码_utf8到gb2312 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/devices/main?token=” ＋ token, 0)))) .如果 (bool_dev) 输出调试文本 (“第二步，获取设备 ID 值，返回值为：” ＋ j_dev.取数据文本 ()) device ＝ j_dev.取通用属性 (“['id']”) 输出调试文本 (“获取的设备 ID 值为： ” ＋ device) bool_ret ＝ j_ret.解析 (编码_utf8到gb2312 (到文本 (网页_访问_对象 (“http://localhost:8090/TotalControl/v1/devices/” ＋ device ＋ “/scripts?cmd=send¶m=sigmaConst.KEY_MENU&amp;token=” ＋ token, 1)))) .如果 (bool_ret) 输出调试文本 (“第三步，通过 POST 调用 JS API，返回值为： ” ＋ j_ret.取数据文本 ()) status ＝ j_ret.取属性对象 (“status”) .如果 (status ＝ “true”) 输出调试文本 (“恭喜你，成功了！”) .否则 输出调试文本 (“不好意思，失败了！”) .如果结束  .否则 输出调试文本 (“该 API 执行失败”) .如果结束  .否则 输出调试文本 (“获取设备 ID 值失败”) .如果结束  .否则 输出调试文本 (“获取 token 失败”).如果结束 易语言代码运行结果：成功，则返回:* 将用户名和密码组装成 sigma:3D391497 进行 base64 编码生成的字符串为： c2lnbWE6M0QzOTE0OTc=* 第一步，获取 token，返回值为：{"status":true,"value":{"token":"U56adwI779838M6F"}}* 获取的 token 值为： U56adwI779838M6F* 第二步，获取设备 ID 值，返回值为：{"id":"device@230441652"}* 获取的设备 ID 值为： device@230441652* 第三步，通过 POST 调用 JS API，返回值为： {"status":true,"value":"0"}* 恭喜你，成功了！</pre></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'助您','强大脚本','Total'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>