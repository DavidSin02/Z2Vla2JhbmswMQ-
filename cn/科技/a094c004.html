<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>视频直播带宽的最强计算过程 | 极客快訊</title><meta property="og:title" content="视频直播带宽的最强计算过程 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/75a29477a18d46049efca51d43ed96cd"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a094c004.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a094c004.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a094c004.html><meta property="article:published_time" content="2020-11-14T21:01:24+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:24+08:00"><meta name=Keywords content><meta name=description content="视频直播带宽的最强计算过程"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/a094c004.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>视频直播带宽的最强计算过程</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>今天我们来做一道算术题——</p><p><br></p><p>做一次视频直播，到底需要多大的网络带宽。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/75a29477a18d46049efca51d43ed96cd><p class=pgc-img-caption></p></div><p>废话不多说，我们直接开始。</p><p><br></p><p>我们先从最基本的图像开始计算。</p><p><br></p><p>图像，大家都知道，是由很多“带有颜色的点”组成的。这个点，就是“像素点（Pixel）”。</p><p><br></p><p>像素是图像显示的基本单位。我们通常说一幅图片的大小，分辨率是1920×1080，就是长度为1920个像素点，宽度为1080个像素点。乘积是2,073,600，也就是说，这个图片是两百万像素的。</p><p><br></p><p>对视频来说，常见的分辨率有：</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a11189a28f0443199de6f05bcc20454b><p class=pgc-img-caption>注意：不同的标准，对2K/4K/8K的定义不同</p></div><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5f843a5833054169b82c191e2ea3033d><p class=pgc-img-caption></p></div><p>那么，一个像素点是多少比特（bit）呢？</p><p><br></p><p>在计算机里，是用数字来表示颜色的。这就牵出了<strong>“彩色分量数字化”</strong>的概念。</p><p><br></p><p>以前我们美术课学过，任何颜色，都可以通过<strong>红色（Red）</strong>、<strong>绿色（Green）</strong>、<strong>蓝色（Blue）</strong>按照一定比例调制出来。这三种颜色，被称为<strong>“三原色”</strong>。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b9c728bea0fb40be8ae227cbf44efd35><p class=pgc-img-caption></p></div><p><br></p><p>在计算机里，R、G、B也被称为<strong>“基色分量”</strong>。它们的取值，分别从0到255，一共256个等级（256是2的8次方）。</p><p><br></p><p>所以，任何颜色，都可以用R、G、B三个值的组合表示。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c7b26b6dd3e74c16b5e01365cc90fa1e><p class=pgc-img-caption>RGB=[183,67,21]</p></div><p>通过这种方式，一共能表达多少种颜色呢？256×256×256=16,777,216种，因此也简称为<strong>1600万色</strong>。RGB三色，每色有8bit，这种方式表达出来的颜色，也被称为<strong>24位色（占用24bit）</strong>。</p><p><br></p><p>这个颜色范围已经超过了人眼可见的全部色彩，所以又叫<strong>真彩色</strong>。再高的话，对于我们人眼来说，已经没有意义了，完全识别不出来。</p><p><br></p><p>我们按现在比较流行的1080p直播来举例计算吧，像素点是2,073,600。用24位色，也就是每张图片2,073,600×24bit=49,766,400bit，约5.9MB。</p><p><br></p><p>感觉有点大呀~ 别急，我们继续往下看。</p><p><br></p><p>接下来看帧率<strong>（Frame Rate）</strong>。</p><p><br></p><p>我们的视频，其实就是很多张静止的图像连续播放。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3a217d2d7463499ca99a5b933522ee43><p class=pgc-img-caption></p></div><p>在视频中，一个帧（Frame）就是指一幅静止的画面。帧率，就是指视频每秒钟包括的画面数量（FPS，Frame per second）。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8c7003d9eef748f0920d35716c793e17><p class=pgc-img-caption>帧率越高，视频就越逼真、越流畅</p></div><p>常见的帧率，有24fps（电影标准）、30fps、60fps。</p><p><br></p><p>我们就以24fps来算吧，接上前面的结果，那就是：</p><p><br></p><p><strong>49,766,400bit×24=‭1,194,393,600‬bit=‭149,299,200‬byte</strong></p><p>（8bit 比特=1byte 字节）</p><p><br></p><p>也就是说，每秒视频大小约是142MB，每分钟是8.3GB，每小时是499.2GB。每部90分钟的电影，是748.8GB。</p><p><br></p><p>这不科学啊，我们平时看的电影，哪有这么大的？不就才几GB嘛？</p><p><br></p><p>没错，我们平时的视频确实没有那么大，因为我们对视频进行了编码压缩。</p><p><br></p><p>我们先来看看，视频从录制到播放的整个过程，如下：</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a08cd27e2ba546ffa7ad0441305916c7><p class=pgc-img-caption></p></div><p>首先是视频采集。通常我们会使用摄像机、摄像头进行视频采集。限于篇幅，我就不打算和大家解释CCD成像原理了。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c668ff66cad547e0ac2771b9de76494e><p class=pgc-img-caption></p></div><p>采集了视频数据之后，就要进行模数转换，将模拟信号变成数字信号。其实现在很多都是摄像机（摄像头）直接输出数字信号。</p><p><br></p><p>信号输出之后，还要进行预处理，将RGB信号变成YUV信号。</p><p><br></p><p>前面我们介绍了RGB信号，那什么是<strong>YUV信号</strong>呢？</p><p><br></p><p>简单来说，YUV就是另外一种颜色数字化表示方式。</p><p><br></p><p>视频通信系统之所以要采用YUV，而不是RGB，主要是因为<strong>RGB信号不利于压缩</strong>。</p><p><br></p><p>在YUV这种方式里面，加入了亮度这一概念。</p><p><br></p><p>在最近十年中，视频工程师发现，眼睛对于亮和暗的分辨要比对颜色的分辨更精细一些，也就是说<strong>，人眼对色度的敏感程度要低于对亮度的敏感程度</strong>。</p><p><br></p><p>所以，工程师认为，在我们的视频存储中，没有必要存储全部颜色信号。我们可以把更多带宽留给黑—白信号（被称作“亮度”），将稍少的带宽留给彩色信号（被称作“色度”）。于是，就有了YUV。</p><p><br></p><p>YUV里面的“Y”，就是亮度（Luma），“U”和“V”则是色度（Chroma）。</p><p><br></p><p>YUV码流的存储格式其实与其采样的方式密切相关。（采样，就是捕捉数据。）</p><p><br></p><p>主流的采样方式有三种，YUV4:4:4，YUV4:2:2，YUV4:2:0。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/028f242518a149a39132fcca1b284732><p class=pgc-img-caption></p></div><p>具体解释起来有点繁琐，大家只需记住，<strong>通常用的是YUV4:2:0的采样方式</strong>，能获得1/2的压缩率。</p><p><br></p><p><strong>这些预处理做完之后，就是正式的编码了。</strong></p><p><br></p><p>编码的过程和原理我们就不解释了。目前比较流行的编码格式有H.264，H.265。</p><p><br></p><p>这些编码格式有着非常惊人的压缩率。以2013年推出的H.265为例，压缩率能够达到300~500:1（包括前面的视频输入信号YUV重采样）。</p><p><br></p><p>也就是说，刚才那个1080p的视频，我们要直播的话，如果采用H.265编码格式（按300:1算），<strong>码流</strong>就是：</p><p><br></p><p><strong>1,194,393,600‬bit ÷ 300 = 3,981,312 bit/s</strong></p><p><br></p><p>码流（Data rate）是视频文件在单位时间内使用的数据流量，我们可以理解为视频文件大小除以视频时长。一般来说，码流越大，视频的压缩比就越小，画面质量就越好。</p><p><br></p><p>是不是这样就算完啦？当然没有，我们还有<strong>音频</strong>没有计算呢。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f10984e310704b3098cc9f56a2ef607d><p class=pgc-img-caption></p></div><p><br></p><p>音频的计算相对来说要简单一点。</p><p><br></p><p>声音是连续的模拟信号，我们对声音进行采样、量化、编码，最终变成数字信号，然后在网络中传输。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dc5c2a161ef74327b63c16c90ba319b9><p class=pgc-img-caption></p></div><p>采样的指标是<strong>采样率</strong>，也就是单位时间内（每秒）用多少个数据来描述声音波形。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c3f0f1e48bb541bb8ec7f7d86272a2c9><p class=pgc-img-caption></p></div><p>采样率越高，波形越接近，音质越好。</p><p><br></p><p>采样率通常有24KHz、44.1KHz、48KHz等。</p><p><br></p><div class=pgc-img><img alt=视频直播带宽的最强计算过程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/012f6fbc05a440e1b0589356a6caf8f4><p class=pgc-img-caption>常见的数字音频采样率</p></div><p>现在视频直播基本上都是用44.1KHz或48KHz采样率。</p><p><br></p><p>然后是<strong>采样位数</strong>，也称为位深、精度、比特。<br></p><p>这个值有点像前面所说的图像位色。它可以理解数字音频设备处理声音的解析度，即对声音的辨析度。这个数值越大，解析度就越高，录制和回放的声音就越真实（声音越细腻）。</p><p><br></p><p>声音的采样位数有8bit，16bit，24bit等。</p><p><br></p><p>一个bit数据大约可以记录6dB的声音，故定义0dB为峰值。常见的16bit（CD音质），可以记录大概96分贝的动态范围。24bit的声音动态范围-144dB（24×6）—0dB。</p><p><br></p><p>人耳的无痛苦极限声压是90分贝，所以，一般来说数字音频基本上都会采用16bit的采样位数。</p><p><br></p><p>声音通常会分为单声道或多声道（双声道、四声道等，两个以上的声道就属于立体声）。双声道的话，就是×2。</p><p><br></p><p><strong>所以，在无损无压缩格式（例如wav格式）中，音频的码率=采样率（48k）× 位深度（16）× 通道数（2）= 1,536 kbps。</strong></p><p><br></p><p><strong>注意，如果是有损压缩（例如mp3格式），音频的码率不等于这个格式，因为原始信息已经被破坏了。</strong></p><p><br></p><p>Mp3通过抽取音频中的一些频段来达到提高压缩比，降低码率，减少所占空间，但同时声音的细节如人声的情感、后期的混响等等都已经发生变形。盲听的话也很难较快地分辨出wav和mp3，需要借助设备。</p><p><br></p><p>Mp3目前是最为普及的声频压缩格式，可以最大程度地保留压缩前的音质。Mp3常见码率是128kbps、192kbps、224kbps、256kbps。320kbps是mp3格式的最高码率。</p><p><br></p><p>我们一般都是用有损压缩格式，192kbps已经够用了，我们以192kbps为例吧。</p><p><br></p><p>视频加音频，就是 <strong>3,981,312 bps</strong> + 192 kbps = 4,080 kbps。</p><p><br></p><p>一般来说，考虑到一些抖动和冗余，网络需求带宽≈视频码率×1.3。所以，带宽需求大约是 5,304 kbps。也就是说，差不多6Mbps的带宽，就可以满足了。</p><p><br></p><p>好啦，整个计算过程，大家有没有看明白？这些都是音视频的基础知识，值得好好研究一下哦！</p><p><br></p><p>最后，感谢大家的支持！我们下期再见！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'视频','最强','计算'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>