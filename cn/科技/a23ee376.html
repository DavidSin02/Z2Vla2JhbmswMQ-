<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>这个暑期，你还在回忆她？ | 极客快訊</title><meta property="og:title" content="这个暑期，你还在回忆她？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1532944743742883a3bf8f9"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a23ee376.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a23ee376.html><meta property="article:published_time" content="2020-11-14T21:06:28+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:28+08:00"><meta name=Keywords content><meta name=description content="这个暑期，你还在回忆她？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/a23ee376.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>这个暑期，你还在回忆她？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>七月，除了潮热的天气，还有让人愉快的暑期。即便你已不再享有这种"特权"，可每年的这个时候，心中都难免泛起有关于暑期的青春记忆。</p><p>《那些年，我们一起追过的女孩》就是关于青春主题的电影代表。电影本身的故事很普通，普通到我们感觉非常的真实，就像我们每一个人的青春的投影；但故事也是不平凡的，因为不是每一个人都像电影结局那样，拥有一段错过的美好。青春是张扬、激情、没心没肺，我们的青春有着各不相同的开始和结尾，但那些闪闪发光的小情节却不谋而合。</p><p>一样的单车，一样的阳光，一样的笑容灿烂…… 不经意间听到某一首歌，某一段旋律，就会瞬间回忆起某段时光里的自己。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1532944743742883a3bf8f9><p class=pgc-img-caption></p></div><p><strong>2018年Dell EMC进入中国已经20年，</strong>在这期间IT行业的发展速度比勘称奇迹的中国经济速度还要快。这20年就是IT的青春，同时也是绝大多数IT人的青春。</p><p>20年内IT行业变化是惊人的，1998年Intel发布了Pentium II Xeon至强处理器（350nm，233MHz），到今天的Intel Skylake至强处理器（14nm，28核，2.5GHz）。</p><p>◆ 内存从早期的第一代SDRAM到现在的NVDIMM；</p><p>◆ 从当年的小型机，到现在的高性能的X86服务器；</p><p>◆ 从当年高大上的双机热备方案到现在的虚拟化解决方案；</p><p>◆ 从当年的机房托管到现在云平台租赁；</p><p>◆ 从当年的几百上千IOPS到现在的单机百万IOPS。</p><p>最重要的一点，在房价不停上涨的20年（几百一平到几万几十万一平），我们的计算性能在不停翻番的情况下，用户的购买价却在不停的下降。这是不是有点还老返童，越活越年轻的感觉？</p><p>这些年IT的技术日新月异（大家去图书馆的话，可以发现TP3分类的书籍越来越多），一些技术被淘汰，一些技术随时代革新。今天，这个青春成长的记忆关于NVDIMM……</p><p><strong>那些年的NVDIMM-N</strong></p><p><strong>NVDIMM的全称是Non-Volatile Dual In-line Memory Module，即非易失性双列内存模组，</strong>如果把NV（非易失）去掉，就相当于传统的内存DIMM。而对于易失与非易失的最关键区别就是在系统断电后，数据是否会消失。就这个角度而言，传统的硬盘（HDD）就是一个标准的非易失性存储器，但它的性能远不如内存。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1532944743798b2cdb698f8><p class=pgc-img-caption></p></div><p>而现在SSD与NVMe所使用NAND闪存则就是NVRAM的一种（3D X-Point与忆阻器也是），虽然和内存芯片都被称为RAM（Random Access Memory，随机访问存储器），可性能仍然有很大差距，这也正是长期以来非易失与易失型存储器的一个不可调和的矛盾，也因此让服务器性能在很多场合必须妥协，而NVDIMM的出现则在很大程度上消除了这一矛盾，并让永久型内存（Persistent Memory，又称Persistent DRAM）真正开始发扬光大。</p><p><strong>NVDIMM 类型</strong></p><p>JEDEC标准组织有三种型号的NVDIMM实现：</p><p>◆ <strong>NVDIMM-F：</strong>直接采用闪存作为内存的DIMM。系统用户需要将存储DIMM与传统DRAM DIMM配对。NVDIMM-F已于2014年出产。</p><p>◆ <strong>NVDIMM-N：</strong>一个同时采用闪存与传统DRAM的DIMM模块。计算机直接访问传统DRAM。在发生电源故障时，模块将数据从易失性的传统DRAM复制到非易失性的闪存，并在恢复供电时复制回来。它只需使用一个小型的备份电源。</p><p>◆ <strong>NVDIMM-P：</strong>规范预计于2018年由JEDEC发布。它将使用ReRAM技术作为计算机的主内存，并使用DDR5接口。NVDIMM-P有非易失性DRAM，并可以存取外部的面向块（闪存）驱动器作为内存高速缓存</p><p><strong>Dell EMC的NVDIMM类型</strong></p><p><strong>Dell EMC的NVDIMM选用的是基于JEDEC的NVDIMM-N的产品，</strong>它在传统存储技术的基础上，进行了前所未有的性能改进。每个NVDIMM-N都提供16GB的非易失性内存，且具有与标准288针DDR4 DIMM相同的外形规格。NVDIMM-N安装于标准CPU内存插槽中，使数据更靠近处理器。由于NVDIMM-N能够以2666MT/s DDR4的数据率运行，因此可以充分利用内存总线所特有的高带宽和极低延迟优势。下表提供了DDR4与其他服务器存储介质相比的近似数据访问时间。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153294474377757b8f82baa><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153294474377571641d6005><p class=pgc-img-caption></p></div><p>Dell EMC NVDIMM-N具有以下重要特征：</p><ul><li>符合JEDEC的DDR4 288针NVDIMM-N；</li><li>16 GB RDIMM，PC4-2666；</li><li>SLC闪存用于备份；</li><li>系统中运行状况监测和警报。</li></ul><p>NVDIMM-N LED的行为:</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153294474383347f44cd5da><p class=pgc-img-caption></p></div><p><strong>Dell EMC NVDIMM电源保护优势</strong></p><p>众所周知，NVDIMM需要使用电池来提供备用电源以将内容从DRAM复制到闪存。尽管基于JEDEC的NVDIMM-N可以使用双电层电容器作为备用电源，但<strong>Dell EMC的电池是集中电源解决方案，可以提供更加小巧、可靠且集成的电源。</strong>将供电功能集成到系统板，无需使用单独的电缆连接到每个 NVDIMM-N，从而摒弃了基于双电层电容器的解决方案的这种典型做法。</p><p><strong>Dell EMC服务器在第一次检测到交流电源断电时，服务器将激活电池并触发NVDIMM-N以将其DRAM内容保存到闪存。</strong>保存过程大约需要一分钟时间即可完成，在此期间，需要使用电池作为备用电源。电池仅对为完成保存操作必须供电的服务器子系统供电。所有其他子系统将关闭电源，或者置于低功率状态以延长电池寿命。<strong>保存操作完成后，电池将取消激活，并且将允许服务器完全关闭。</strong></p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1532944743981e517e0c30f><p class=pgc-img-caption></p></div><p><strong>Dell EMC R740 NVDIMM-N电池安装示意图</strong></p><p><strong>NVDIMM的工作方式</strong></p><p>下图是NVDIMM-N的概览，其中显示了主要组件和系统接口。<strong>NVDIMM-N的核心是DDR4 DRAM设备，</strong>这些设备支持NVDIMM-N作为RDIMM运行。支持NVDIMM-N存留数据的组件是控制器、闪存和调压器，这些组件也集成在DIMM上。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153294474395736e7cdb959><p class=pgc-img-caption></p></div><p><strong>NVDIMM正常工作状态</strong></p><p>NVDIMM-N安装在服务器内存插槽中。从硬件角度来看，NVDIMM-N好像是作为标准DDR4 RDIMM的处理器。它们会在BIOS开机自测期间进行初始化，并且CPU可以使用标准DDR4内存载入/存储事务访问NVDIMM-N上的DRAM数据。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15329447440904ab7d70161><p class=pgc-img-caption></p></div><p><strong>数据备份到闪存</strong></p><p>倘若发生服务器关机、冷重新引导或断电的情况，将会向NVDIMM-N控制器发送保存信号，这将<strong>触发NVDIMM-N控制器将其所有DRAM内容备份到板载闪存存储。</strong>在服务器即将关机或NVDIMM-N临近断电时，随时会触发 NVDIMM-N保存事件。完成此备份过程大约需要1分钟。此持续时间与服务器中安装的NVDIMM-N数量无关，因为保存事件在所有NVDIMM-N中并行发生。</p><p><strong>电池可为NVDIMM-N提供备份电源，</strong>这样，即使在交流电源断电后，也能完成备份操作。保存操作完成后，电池将取消激活，以便服务器和NVDIMM-N完全关闭。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1532944744245ed5dbec40d><p class=pgc-img-caption></p></div><p><strong>数据从闪存恢复</strong></p><p><strong>在服务器开机时，BIOS将初始化NVDIMM-N上的DRAM。</strong>BIOS使用SMBus管理接口来命令NVDIMM-N控制器从闪存恢复其DRAM内容。完成此恢复过程大约需要1分钟。此持续时间独立于服务器中安装的NVDIMM-N数量，因为恢复过程跨所有NVDIMM-N并行执行。之后，BIOS会将NVDIMM-N呈现给服务器操作系统以作为永久内存。请注意，<strong>永久内存与正常操作系统操作所需的系统内存截然不同。</strong></p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15329447440772b931f43a3><p class=pgc-img-caption></p></div><p><strong>NVDIMM的应用场景</strong></p><p><strong>Dell EMC DPS数据保护方案</strong></p><p>计算机系统的计算结果和服务信息皆临时保存在内存中，这些数据在系统掉电后将丢失，甚至能引起整个系统的崩溃。<strong>NVDIMM可以解决系统异常掉电情况下，内存数据的保存工作，并且能够在系统恢复正常运行后，继续之前的工作。</strong></p><p><strong>全系统保护是NVDIMM的一个典型应用场景。</strong>在系统异常掉电后，该系统能在短时间内将整个计算机系统当前的工作状态（包括CPU，桥接芯片，网卡等硬件设备以及系统中所有的进程）保存至NVDIMM。在系统重新上电运行后，立即恢复至之前的运行状态，仿佛系统只是“打了个盹”。</p><p>在IT技术发展日新月异的今天，虚拟化技术作为Cloud的核心技术，得到了广泛的关注与创新。与此同时，作为云服务运行的底层载体，虚拟机的数据安全与完整是目前急需解决的重要课题。虚拟机实质为软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统，也就意味着<strong>虚拟机的所有运行状态都在内存中。</strong>NVDIMM可以利用虚拟机本身的快照功能，在系统异常情况下，迅速保护存储在内存中的临时快照，达到保护整个虚拟机的目的。</p><p>作为虚拟化的主流平台，<strong>2018年Dell EMC科技集团的Vmware Vsphere 6.7版本已经正式支持NVDIMM。</strong>用户可以选择购买Dell EMC PowerEdge 14G Server，在安装Vsphere 6.7版本时，直接在Dell EMC Server的BIOS中选择Non-Volatile DIMM（见下图）。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1532944744158d5a68dc7f4><p class=pgc-img-caption></p></div><p>之后按照正常流程部署Vsphere，可以在VC界面看到NVDIMM的容量（见下图）。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1532944744208707341a9b4><p class=pgc-img-caption></p></div><p>注：具体部署流程用户可以前往下面的网址下载相关的文档。http://en.community.dell.com/techcenter/extras/m/white_papers/20487486</p><p>如果用户对Dell EMC的数据保护方案感兴趣，可以在NVDIMM基础上选择Dell EMC DPS产品，提供完整系统的保护和CDP持续数据保护，这样您的数据就可以高枕无忧了。</p><p><strong>Dell EMC可以提供专业支持Vmware的DPS数据保护解决方案。</strong></p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153294474460235a07972ee><p class=pgc-img-caption></p></div><p>注：如您有兴趣了解更多Dell EMC解决方案，可选中下方链接在浏览器中打开。</p><p>https://www.dellemc.com/zh-cn/products-solutions/solutions2.htm</p><p><strong>Dell EMC数据库加速解决方案</strong></p><p>磁盘缓存是为了减少CPU透过I/O读写磁盘的次数，提升磁盘I/O的效率，用一部分内存来储存访问较频繁的磁盘内容。磁盘缓存的存在对于数据访问的一致性带来了问题，尤其是采用write-back策略的写缓存导致异常掉电情况下内存中更新的数据未能及时写入磁盘而丢失。<strong>NVDIMM是写缓存的最佳存储介质。</strong>它的随机访问性质能让CPU和操作系统直接访问管理，并且非易失性保证数据在异常掉电情况下得以保护。</p><p>Dell EMC PowerEdge 14G服务器利用NVMe SSD和NVDIMM的高容量、高性能特点，结合Infiniband技术，搭建出<strong>“支持超过100万IOPS的处理能力，超过20GB/s的吞吐量”</strong>的数据库加速解决方案（如下图）。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15329447445199b55cbdbef><p class=pgc-img-caption></p></div><p><strong>Dell EMC高I/O存储解决方案</strong></p><p>存储链是将整个存储系统中的数据按照安全度，性能要求以及使用频率分层存储在不同的非易失存储介质中。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1532944744350a712e38f96><p class=pgc-img-caption></p></div><p>如图所示为一典型的存储链实例，IO性能要求较高的数据被存储在SSD上，而要求较低的数据放入SAS或NL-SAS介质上。而I/O性能往往是用户非常关心的，尤其在高I/O的数据库业务上。</p><p>在NVDIMM出现之前，如何应对高I/O挑战？相信大伙自然而然的反应是“用SSD来解决吧。”回头看看，这正是几年前存储系统采取的办法——将SSD用作写缓冲和元数据缓存。</p><p>这几年随着技术的进步，SSD的量产以及SSD容量的大幅提升，闪存已然成为了占据主导地位的存储媒介，应用系统的访问量爆发性的增长导致IOPS的需求更高，SSD也不能很好的满足这些性能需求。且用户真正的挑战还在于SSD的耐写度以及性价比，以容量换寿命一定程度上能降低耐写度的要求，但无法满足性能需求。因此<strong>NVDIMM的量产，可以解决性能需求的同时，寿命上要优于SSD。</strong></p><p>在具体的解决方案中，我们可以<strong>将NVDIMM可作为存储链的最前端，它的速度比SSD更快，并且能够提供直接随机访问的特性。</strong>CPU的内存栅障与刷新cache指令能够保证NVDIMM数据的一致性。所以我们可以借助NVDIMM和NVME SSD以及普通大容量读密集型的SSD或者HD，搭建一个兼顾性能和容量的分布式存储解决方案（如下图）。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15329447444718a3a46086c><p class=pgc-img-caption></p></div><p>如果用户对数据的存储容量要求并不大（≤1PB），而是对I/O性能要求较高，用户可以选择NVDIMM+Dell EMC闪存分层存储解决方案。</p><div class=pgc-img><img alt=这个暑期，你还在回忆她？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15329447444920430aae824><p class=pgc-img-caption></p></div><p>在上图中，<strong>借助NVDIMM和全闪存存储，Dell EMC可以轻易地给用户提供百万级的IOPS。</strong></p><p>首先：服务器内置NVDIMM作为数据的缓存层，满足高I/O的读写需求，数据则存放在后端的存储上。为了保证整条I/O链路的读写性能，后端存储采用的是Dell EMC的全闪存存储。虑到性价比，Dell EMC存储可以提供基于SSD的分层，用户可以选择SLC SSD和大容量的TLC或者MLC SSD，业务数据可以在两种不同的SSD上进行自动的调度，从而帮助用户获得I/O性能和容量的平衡，达到一个最优的性价比。</p><p>其次，由于高I/O性能的数据同时也是用户的重要数据，Dell EMC存储内置CDP持续数据保护功能，数据在存储上落地后，可以借助CDP功能防止数据的逻辑故障（比如：病毒入侵，人为误删除或者恶意删除）。</p><p>最后，用户可以借助存储之间的双活功能，实现一个全系统的高可用或者两个站点之间的容灾。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'这个','还在','回忆'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>