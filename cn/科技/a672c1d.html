<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/23f7750cba654d2087c132af3fbd6836"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a672c1d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a672c1d.html><meta property="article:published_time" content="2020-10-29T21:04:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:30+08:00"><meta name=Keywords content><meta name=description content="æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/a672c1d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>è¯´åˆ°pythonå‘é€HTTPè¯·æ±‚è¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè„‘å­é‡Œç¬¬ä¸€ä¸ªé—ªè¿‡çš„å¯èƒ½å°±æ˜¯requestsåº“äº†ï¼Œå½“ç„¶pythonæœ‰å¾ˆå¤šæ¨¡å—å¯ä»¥å‘é€HTTPè¯·æ±‚ï¼ŒåŒ…æ‹¬åŸç”Ÿçš„æ¨¡å—http.client,urllib2ç­‰ï¼Œä½†ç”±äºåŸç”Ÿçš„æ¨¡å—è¿‡äºå¤æ‚ï¼Œä½¿ç”¨ç¹çï¼Œé‚£ä¹ˆrequestsåº“å°±è¯ç”Ÿäº†ï¼Œå®ƒä¹Ÿæ˜¯ç°é˜¶æ®µæ¯”è¾ƒæµè¡Œçš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ä¹‹ä¸€ã€‚</p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/23f7750cba654d2087c132af3fbd6836><p class=pgc-img-caption></p></div><p>requestsæ˜¯ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå°è£…äº†HTTPè¯·æ±‚çš„æ‰€æœ‰æ–¹æ³•ï¼Œä½¿ç”¨æ–¹ä¾¿ç®€å•ï¼Œåªéœ€è¦æ ¹æ®ä¸åŒçš„è¯·æ±‚æ–¹å¼è°ƒç”¨ç›¸å¯¹åº”çš„æ–¹æ³•å°±å¯ä»¥å®Œæˆå‘é€ç½‘ç»œè¯·æ±‚çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±æ¥è¯´è¯´requestsåº“æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œ<strong>é‚£ä¹ˆåœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å¤§è‡´è¯´ä¸€ä¸‹ä»Šå¤©çš„ä¸»è¦å†…å®¹ï¼š</strong></p><p>1. requetså¦‚ä½•å‘é€getè¯·æ±‚</p><p>2. requestså¦‚ä½•å‘é€postè¯·æ±‚</p><p>3. paramså‚æ•°å’Œdataå‚æ•°çš„åŒºåˆ«</p><p>4. requestsåº“ä¸­Sessionç±»çš„çš„å¦™ç”¨</p><p>5. é’ˆå¯¹getè¯·æ±‚å’Œpostè¯·æ±‚ï¼Œå¯¹requestsè¿›è¡Œç®€å•å°è£…</p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/2b98d589-8a88-4218-8c2d-14480adab91e><p class=pgc-img-caption></p></div><p><strong>å‘é€getè¯·æ±‚</strong></p><p>requestsæ˜¯é€šè¿‡è°ƒç”¨get()æ–¹æ³•æ¥å®Œæˆå‘é€getè¯·æ±‚çš„ï¼Œé‚£ä¹ˆï¼Œåœ¨æŒæ¡requestsåº“å¦‚ä½•å‘é€getè¯·æ±‚ä¹‹å‰ï¼Œä½ è¿˜åº”è¯¥ç®€å•äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯getè¯·æ±‚ï¼Ÿ</p><p>é€šå¸¸åœ¨æˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªæ–¹æ³•å¦‚ä½•ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€å…ˆçŸ¥é“è¿™ä¸ªæ–¹æ³•éœ€è¦å“ªäº›å‚æ•°ï¼Ÿå‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ é‚£ä¹ˆæˆ‘ä»¬å°±å…ˆåˆ†æä¸€ä¸‹get()æ–¹æ³•çš„æºç ï¼š</p><p>def get(url, params=None, **kwargs):</p><p>r"""Sends a GET request.</p><p>:param url: URL for the new :class:`Request` object.</p><p>:param params: (optional) Dictionary, list of tuples or bytes to send</p><p>in the body of the :class:`Request`.</p><p>:param \*\*kwargs: Optional arguments that ``request`` takes.</p><p>:return: :class:`Response &lt;Response>` object</p><p>:rtype: requests.Response</p><p>"""</p><p>kwargs.setdefault('allow_redirects', True)</p><p>return request('get', url, params=params, **kwargs)</p><p>è¿™å°±æ˜¯getæ–¹æ³•çš„æºç äº†ï¼Œä½ åº”è¯¥èƒ½å¤Ÿå‘ç°ï¼Œget()æ–¹æ³•åªæœ‰ä¸€ä¸ªå¿…ä¼ çš„å‚æ•°urlï¼Œå…¶ä»–å‚æ•°éƒ½æ˜¯éå¿…ä¼ çš„ï¼Œé‚£ä¹ˆå…¶ä»–çš„å‚æ•°æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><p><strong>params</strong></p><p>å¯¹äºè¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯å­—å…¸ï¼Œä¹Ÿå¯ä»¥æ˜¯åµŒå¥—å…ƒç»„çš„åˆ—è¡¨ï¼ŒåŸºäºgetè¯·æ±‚çš„ç‰¹ç‚¹ï¼Œè¯·æ±‚å‚æ•°æ˜¯å¯ä»¥ç›´æ¥è·Ÿåœ¨URLä¹‹åçš„ï¼Œä»¥ï¼Ÿå·å¼€å§‹ä»¥key=valueçš„å½¢å¼ä¼ é€’(å¤šä¸ªå‚æ•°ä½¿ç”¨&ç¬¦å·è¿›è¡Œåˆ†å‰²)ï¼Œä½†æ˜¯ä¸ºäº†æ˜ç¡®åŒºåˆ†URLå’Œå‚æ•°ï¼Œå°±éœ€è¦ä½¿ç”¨paramså‚æ•°ä¼ é€’ã€‚</p><p>**kwargsï¼šå…¶ä»–ä¸€äº›å…³é”®å­—å‚æ•°ï¼Œæš‚æ—¶ä¸åšä»‹ç»ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹2ä¸ªç®€å•çš„å®ä¾‹ï¼Œä½“ä¼šä¸€ä¸‹reauetsé€šè¿‡get()æ–¹æ³•å‘é€ä¸€ä¸ªä¸å¸¦å‚æ•°çš„getè¯·æ±‚å’Œå¸¦å‚æ•°çš„è¯·æ±‚çš„è¿‡ç¨‹ã€‚</p><p>é€šè¿‡get()æ–¹æ³•å‘é€getè¯·æ±‚è®¿é—®åšå®¢å›­é¦–é¡µ</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/11 20:34</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests # å¯¼å…¥requestsæ¨¡å—</p><p>response = requests.get('https://www.cnblogs.com/') # å‘é€getè¯·æ±‚</p><p>print(response.text) # è·å–å“åº”æ•°æ®</p><p>å“åº”æ•°æ®</p><p>&lt;!DOCTYPE html></p><p>&lt;html></p><p>&lt;head></p><p>&lt;meta charset="utf-8" /></p><p>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /></p><p>&lt;meta name="referrer" content="always" /></p><p>&lt;title>åšå®¢å›­ - ä»£ç æ”¹å˜ä¸–ç•Œ&lt;/title></p><p>&lt;meta name="keywords" content="å¼€å‘è€…,åšå®¢å›­,å¼€å‘è€…,ç¨‹åºçŒ¿,ç¨‹åºåª›,æå®¢,ç¼–ç¨‹,ä»£ç ,å¼€æº,ITç½‘ç«™,Developer,Programmer,Coder,Geek,æŠ€æœ¯ç¤¾åŒº" /></p><p>&lt;meta name="description" content="åšå®¢å›­æ˜¯ä¸€ä¸ªé¢å‘å¼€å‘è€…çš„çŸ¥è¯†åˆ†äº«ç¤¾åŒºã€‚è‡ªåˆ›å»ºä»¥æ¥ï¼Œåšå®¢å›­ä¸€ç›´è‡´åŠ›å¹¶ä¸“æ³¨äºä¸ºå¼€å‘è€…æ‰“é€ ä¸€ä¸ªçº¯å‡€çš„æŠ€æœ¯äº¤æµç¤¾åŒºï¼Œæ¨åŠ¨å¹¶å¸®åŠ©å¼€å‘è€…é€šè¿‡äº’è”ç½‘åˆ†äº«çŸ¥è¯†ï¼Œä»è€Œè®©æ›´å¤šå¼€å‘è€…ä»ä¸­å—ç›Šã€‚åšå®¢å›­çš„ä½¿å‘½æ˜¯å¸®åŠ©å¼€å‘è€…ç”¨ä»£ç æ”¹å˜ä¸–ç•Œã€‚" /></p><p>&lt;link rel="shortcut icon" href="//common.cnblogs.com/favicon.ico" type="image/x-icon" /></p><p>&lt;link rel="Stylesheet" type="text/css" href="../../bundles/aggsite.css?v=IlEZk4Ic2eCzcO6r0s4bGm62FAo8VZI-US_0EqUe2Bk1" /></p><p>&lt;link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="http://feed.cnblogs.com/blog/sitehome/rss" /></p><p>&lt;script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js" type="text/javascript">&lt;/script></p><p>&lt;script src="../../bundles/aggsite.js?v=cE0bqImLWsEG3gZXOupKxj5tj_ukK7pLeSd73DHZOT81" type="text/javascript">&lt;/script></p><p>&lt;script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'>&lt;/script></p><p>&lt;script></p><p>var googletag = googletag || {};</p><p>googletag.cmd = googletag.cmd || [];</p><p>&lt;/script></p><p>è¿™é‡Œæˆ‘åªæˆªå–äº†ä¸€éƒ¨åˆ†å“åº”æ•°æ®ï¼Œå“åº”æ•°æ®å…¶å®æ˜¯åšå®¢å›­çš„é¦–é¡µHTMLæºç ã€‚</p><p>å¯ä»¥çœ‹åˆ°åªéœ€è¦ä¸€è¡Œä»£ç å³å¯å®Œæˆæ•´ä¸ªè¯·æ±‚è¿‡ç¨‹ï¼Œé€šè¿‡response.textå¾—åˆ°å“åº”æ•°æ®(å…¶å®è¿™ä¸ªè¿‡ç¨‹å’Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åšå®¢å›­åœ°å€è®¿é—®æ˜¯ä¸€æ ·çš„)ï¼Œå½“ç„¶ä½ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•è·å–ä¸åŒçš„å“åº”æ•°æ®ã€‚</p><p>response.headers # è·å–å“åº”å¤´ä¿¡æ¯</p><p>response.cookies # è·å–è¿”å›çš„cookie</p><p>response.status_code # è·å–çŠ¶æ€ç </p><p>å‘é€å¸¦paramså‚æ•°çš„getè¯·æ±‚</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/11 20:34</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests</p><p>login_url = r'http://***:8080/futureloan/mvc/api/member/login' # æ¥å£åœ°å€</p><p>login_data = {"mobilephone": "13691579841", "pwd": 123456} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response = requests.get(url=login_url, params=login_data) # å‘é€getè¯·æ±‚</p><p>print(response.text) # è·å–å“åº”æ•°æ®</p><p>print(response.url)</p><p>å“åº”æ•°æ®</p><p>{"status":1,"code":"10001","data":null,"msg":"ç™»å½•æˆåŠŸ"}</p><p>http://***:8080/futureloan/mvc/api/member/login?mobilephone=13691579841&pwd=123456</p><p>Process finished with exit code 0</p><p>æˆ‘ä»¬é€šè¿‡ä¼ é€’ä¸€ä¸ªå­—å…¸ç»™paramså‚æ•°ï¼Œå³å¯å®Œæˆå¸¦å‚æ•°çš„getè¯·æ±‚ï¼Œå¹¶è·å–å“åº”æ•°æ®ã€‚</p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/9fa5f185-0ff4-48d4-806f-e38c2fa6accb><p class=pgc-img-caption></p></div><p><strong>æ³¨æ„</strong></p><p>1. æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­ä¹Ÿæœ€å¥½ä¼ é€’å­—å…¸ä½œä¸ºæ¥å£æ•°æ®ï¼Œå¦‚æœæ•°æ®ç±»å‹æ˜¯jsonåˆ™åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™éœ€è¦å…ˆè½¬æˆå­—å…¸ã€‚</p><p>2. åªè¦ä½ å‘é€çš„æ˜¯getè¯·æ±‚ï¼Œä¸”ä¸æƒ³é€šè¿‡urlæ‹¼æ¥çš„æ–¹å¼ç›´æ¥ä¼ é€’æ¥å£å‚æ•°ï¼Œé‚£ä¹ˆåªèƒ½ä½¿ç”¨paramså‚æ•°æ¥ä¼ é€’(å¦‚æœä½ ä½¿ç”¨dataï¼Œjsonç­‰å‚æ•°æ—¶ä½ ä¼šå‘ç°ï¼Œè¯·æ±‚å¹¶ä¸ä¼šæˆåŠŸ)ï¼Œå› ä¸ºé€šè¿‡paramsä¼ é€’çš„å‚æ•°ä¼šé™„åŠ åˆ°urlåï¼Œè¿™ä¹Ÿæ˜¯getè¯·æ±‚çš„ç‰¹ç‚¹ï¼Œå› æ­¤ä½ éœ€è®°ä½ï¼šå‘é€getè¯·æ±‚æ—¶å‚æ•°åªèƒ½ä½¿ç”¨paramså³å¯ã€‚</p><p>ä»¥ä¸Šåªæ˜¯ç®€å•çš„å‘é€getè¯·æ±‚çš„æ–¹æ³•ï¼Œè‡³äºå¦‚ä½•å‘é€å¸¦å…¶ä»–å‚æ•°çš„getè¯·æ±‚(æ¯”å¦‚headersï¼Œcookiesç­‰)ï¼Œè¿˜éœ€å¯¹get()è¿›ä¸€æ­¥çš„ç ”ç©¶å’Œå®è·µã€‚</p><p><strong>å‘é€postè¯·æ±‚</strong></p><p>åŒæ ·ï¼Œåœ¨å¼€å§‹å­¦ä¹ ä¸‹é¢çš„å†…å®¹ä¹‹å‰ï¼Œä»å»ºè®®ä½ å…ˆäº†è§£ä»€ä¹ˆæ˜¯postè¯·æ±‚åŠå…¶ç‰¹ç‚¹ï¼Œå¯¹ä½ å­¦ä¹ æ¥ä¸‹æ¥çš„å†…å®¹ä¹Ÿä¼šæ›´å¥½ç†è§£ã€‚</p><p>requestså‘é€postè¯·æ±‚æ˜¯é€šè¿‡post()æ–¹æ³•æ¥å®ç°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹å®ƒçš„æºç ï¼š</p><p>def post(url, data=None, json=None, **kwargs):</p><p>r"""Sends a POST request.</p><p>:param url: URL for the new :class:`Request` object.</p><p>:param data: (optional) Dictionary (will be form-encoded), bytes, or file-like object to send in the body of the :class:`Request`.</p><p>:param json: (optional) json data to send in the body of the :class:`Request`.</p><p>:param \*\*kwargs: Optional arguments that ``request`` takes.</p><p>:return: :class:`Response &lt;Response>` object</p><p>:rtype: requests.Response</p><p>"""</p><p>return request('post', url, data=data, json=json, **kwargs)</p><p>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œpost()å’Œget()ä¸€æ ·ï¼Œä»…æœ‰ä¸€ä¸ªurlå‚æ•°æ˜¯å¿…ä¼ çš„ï¼Œå…¶ä»–ä»ç„¶å¯ä»¥ä¸ä¼ é€’ï¼Œä½†æ˜¯å…¶ä¸­dataå’Œjsonå‚æ•°å´æ˜¯post()æ–¹æ³•ä¸­æœ€é‡è¦çš„å‚æ•°ï¼Œä¸‹é¢å°±è¯´ä¸€ä¸‹ä½•æ—¶ä½¿ç”¨dataï¼Œä½•æ—¶ä½¿ç”¨jsonã€‚</p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/6b3a72e9-6116-499e-972a-32d0d4614798><p class=pgc-img-caption></p></div><p><strong>data</strong></p><p>å¤§å¤šæ•°postè¯·æ±‚çš„æ¥å£é»˜è®¤æ”¯æŒå‚æ•°ç±»å‹Content-Typeä¸ºapplication/x-www-form-urlencoded, å®ƒå‘Šè¯‰æˆ‘ä»¬è¯·æ±‚çš„æ¥å£å‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªformè¡¨å•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾€å¾€æ˜¯é€šè¿‡æ„é€ ä¸€ä¸ªå­—å…¸æ¥ä¼ é€’formè¡¨å•çš„ï¼Œ</p><p>æ‰€ä»¥å½“æˆ‘ä»¬å‘æœåŠ¡å™¨æäº¤formè¡¨å•æ—¶å°±å¯ä»¥ä½¿ç”¨dataå‚æ•°ï¼Œå®ƒä¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ç±»å‹çš„æ•°æ®ï¼Œå­˜æ”¾åˆ°è¯·æ±‚ä½“ä¸­ï¼Œç„¶åå‘é€ç»™æœåŠ¡å™¨(å‚æ•°éœ€æ˜¯å­—å…¸ç±»å‹)ã€‚</p><p><strong>Json</strong></p><p>é¦–å…ˆä½ è®¿é—®çš„æ¥å£éœ€è¦æ”¯æŒcontent_typeä¸ºapplication/jsonæ ¼å¼çš„æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥é€šè¿‡jsonè¿™ä¸ªå‚æ•°æ¥ä¼ é€’æ¥å£å‚æ•°ï¼ˆå‚æ•°å¯ä»¥æ˜¯å­—å…¸ä¹Ÿå¯ä»¥æ˜¯jsonç±»å‹ï¼‰ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå‘é€postè¯·æ±‚ï¼Œä½¿ç”¨dataå‚æ•°çš„å®ä¾‹ï¼š</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 10:22</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests</p><p>login_url = r'http://***.com:8080/futureloan/mvc/api/member/login' # æ¥å£åœ°å€</p><p>login_data = {"mobilephone": "13691579841", "pwd": 123456} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response = requests.post(url=login_url, data=login_data) # å‘é€postè¯·æ±‚</p><p>print(response.text) # è·å–å“åº”æ•°æ®</p><p>print(response.url)</p><p>print(response.status_code)</p><p><strong>å“åº”æ•°æ®</strong></p><p>{"status":1,"code":"10001","data":null,"msg":"ç™»å½•æˆåŠŸ"}</p><p>http://***:8080/futureloan/mvc/api/member/login</p><p>200</p><p>Process finished with exit code 0</p><p>ä½¿ç”¨jsonå‚æ•°å®ä¾‹</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 10:22</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests</p><p>login_url = r'http://***monban.com:8080/futureloan/mvc/api/member/login' # æ¥å£åœ°å€</p><p>login_data = {"mobilephone": "13691579841", "pwd": 123456} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response = requests.post(url=login_url, json=login_data) # å‘é€postè¯·æ±‚</p><p>print(response.text) # è·å–å“åº”æ•°æ®</p><p>print(response.url)</p><p>print(response.status_code)</p><p><strong>å“åº”æ•°æ®</strong></p><p>{"status":0,"code":"20103","data":null,"msg":"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"}</p><p>http://***/futureloan/mvc/api/member/login</p><p>200</p><p>Process finished with exit code 0</p><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨dataå‚æ•°å’Œjsonå‚æ•°ï¼Œè·å–åˆ°çš„è¿”å›ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œå› ä¸ºæˆ‘è¿™é‡Œä½¿ç”¨çš„æ¥å£ä¸æ”¯æŒapplication/jsonæ•°æ®æ ¼å¼ï¼Œæ‰€ä»¥å½“ä½ ä½¿ç”¨jsonå‚æ•°ä¼ é€’å‚æ•°æ—¶ï¼ŒæœåŠ¡å™¨æ˜¯æ— æ³•è§£ææ•°æ®çš„ï¼Œä¹Ÿå°±ä¸ä¼šè¿”å›æ­£ç¡®çš„ç»“æœäº†ã€‚</p><p>æ‰€ä»¥å¯¹äºä½•æ—¶ä½¿ç”¨dataå‚æ•°ï¼Œä½•æ—¶ä½¿ç”¨jsonå‚æ•°ï¼Œè¿˜éœ€è¦æ ¹æ®å®é™…çš„æ¥å£æ‰€æ”¯æŒçš„æ•°æ®ç±»å‹è¿›è¡Œé€‰æ‹©ã€‚</p><p><strong>paramså’ŒdataåŒºåˆ«</strong></p><p>ä¸Šé¢å·²ç»è¯´è¿‡getè¯·æ±‚ä¸­çš„paramså‚æ•°å’Œpostè¯·æ±‚ä¸­çš„dataå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‚æ•°åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>1. å‘é€getè¯·æ±‚æ—¶ï¼Œç”±äºgetè¯·æ±‚æ²¡æœ‰è¯·æ±‚ä½“ï¼Œè¯·æ±‚å‚æ•°åªèƒ½è·Ÿåœ¨urlåœ°å€åçš„ï¼Œè€Œä¸”æœåŠ¡å™¨ä¹Ÿåªèƒ½é€šè¿‡è§£æurlè·å¾—è¯·æ±‚çš„å‚æ•°ï¼Œå› æ­¤get()æ–¹æ³•å‘é€getè¯·æ±‚æ—¶åªèƒ½ä½¿ç”¨paramså‚æ•°ï¼Œå®ƒä¼šæŠŠè¯·æ±‚çš„å‚æ•°é»˜è®¤è¿½åŠ åˆ°urlåœ°å€åé¢ã€‚</p><p>2. é€šå¸¸æƒ…å†µä¸‹ç”¨æˆ·éœ€è¦æäº¤æŸäº›æ•°æ®æ—¶ï¼Œå‘é€çš„è¯·æ±‚ä¸€èˆ¬éƒ½ä¸ºpostè¯·æ±‚ï¼Œpostè¯·æ±‚ä¼šæäº¤ä¸€ä¸ªformè¡¨å•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ„é€ ä¸€ä¸ªå­—å…¸æ ¼å¼çš„æ•°æ®ï¼Œä½¿ç”¨dataå‚æ•°ä¼ é€’ï¼Œç”±äºpostè¯·æ±‚æ˜¯æœ‰è¯·æ±‚ä½“çš„ï¼Œè€Œä¸”è¯·æ±‚å‚æ•°å°±å­˜æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼ŒæœåŠ¡å™¨ä¹Ÿåªèƒ½é€šè¿‡è§£æè¯·æ±‚ä½“ä¸­å†…å®¹è€Œè·å¾—è¯·æ±‚çš„å‚æ•°ï¼Œæ‰€ä»¥postè¯·æ±‚ä¸èƒ½ä½¿ç”¨paramsä¼ é€’æ¥å£å‚æ•°ï¼Œåªèƒ½ä½¿ç”¨dataï¼Œjsonï¼Œfileç­‰, dataå‚æ•°ä¼šæŠŠè¯·æ±‚å‚æ•°æ”¾åˆ°è¯·æ±‚ä½“ä¸­ã€‚</p><p><strong>Sessionç±»çš„å¦™ç”¨</strong></p><p>å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°éœ€è¦ä¿æŒæŸä¸€ä¸ªçŠ¶æ€ï¼Œæ‰èƒ½æµ‹è¯•åç»­çš„æ¥å£ï¼Œæ¯”å¦‚è¯´ï¼šå……å€¼æ¥å£ï¼Œé‚£ä¹ˆéœ€è¦ç”¨æˆ·å…ˆç™»å½•ï¼Œä¸”ä¸€ç›´ä¿æŒç™»å½•çŠ¶æ€æ‰èƒ½è¿›è¡Œå……å€¼ï¼Œé‚£ä¹ˆå¯¹äºè¿™ç§æƒ…å†µè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°requestsåº“ä¸­çš„Sessionç±»äº†ï¼ŒSessionå¯ä»¥ä¿æŒè¯·æ±‚çš„çŠ¶æ€ï¼Œåƒæˆ‘ä»¬è®¿é—®æŸä¸ªç½‘ç«™ä¸€æ ·ï¼Œæˆ‘ä»¬åªè¦ç™»å½•åå°±å¯ä»¥æµè§ˆè¯¥ç½‘ç«™ä¸Šçš„ä»»æ„é¡µé¢ï¼Œå…ˆçœ‹ä¸‹é¢å®ä¾‹ï¼š</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 10:22</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests</p><p>login_url = r'http://***:8080/futureloan/mvc/api/member/login' # ç™»å½•æ¥å£åœ°å€</p><p>login_data = {"mobilephone": "13691579841", "pwd": 123456} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response_login = requests.post(url=login_url, data=login_data) # å‘é€postè¯·æ±‚ ç™»å½•</p><p>print(response_login.text)</p><p>recharge_url = r'http://***:8080/futureloan/mvc/api/member/recharge' # å……å€¼æ¥å£åœ°å€</p><p>recharge_data = {"mobilephone": "13691579841", "amount": 10000.00} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response_recharge = requests.post(url=recharge_url, data=recharge_data) # å‘é€è¯·æ±‚ï¼Œå¼€å§‹å……å€¼</p><p>print(response_recharge.text)</p><p>æ‰§è¡Œç»“æœ</p><p>{"status":1,"code":"10001","data":null,"msg":"ç™»å½•æˆåŠŸ"}</p><p>{"status":0,"code":null,"data":null,"msg":"æŠ±æ­‰ï¼Œè¯·å…ˆç™»å½•ã€‚"}</p><p>Process finished with exit code 0</p><p>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½å·²ç»ç™»å½•è¿‡äº†ï¼Œä½†æ˜¯å……å€¼æ—¶å´å¤±è´¥äº†ï¼ŒåŸå› å°±æ˜¯ç›´æ¥ä½¿ç”¨reauestsæ¥å‘é€è¯·æ±‚æ—¶ï¼Œå¹¶ä¸ä¼šä¿æŒå½“å‰çš„çŠ¶æ€(è¿™ä¹Ÿæ˜¯HTTPè¯·æ±‚çš„ç¼ºé™·)ï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨Sessionå¯¹åƒå†æ¬¡å‘é€å……å€¼è¯·æ±‚ï¼Œä¿®æ”¹ä»£ç ã€‚</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 10:22</p><p>@Auth : linuxè¶…</p><p>@File : requests_blog.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import requests</p><p>request = requests.Session() # åˆå§‹åŒ–Session</p><p>login_url = r'http://***:8080/futureloan/mvc/api/member/login' # ç™»å½•æ¥å£åœ°å€</p><p>login_data = {"mobilephone": "13691579841", "pwd": 123456} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response_login = request.request(method='post', url=login_url, data=login_data) # å‘é€postè¯·æ±‚ ç™»å½•</p><p>print(response_login.text)</p><p>recharge_url = r'http://***:8080/futureloan/mvc/api/member/recharge' # å……å€¼æ¥å£åœ°å€</p><p>recharge_data = {"mobilephone": "13691579841", "amount": 10000.00} # æ¥å£æ‰€éœ€å‚æ•°</p><p>response_recharge = request.request(method='post', url=recharge_url, data=recharge_data) # å‘é€è¯·æ±‚ï¼Œå¼€å§‹å……å€¼</p><p>print(response_recharge.text)</p><p>æ‰§è¡Œç»“æœ</p><p>{"status":1,"code":"10001","data":null,"msg":"ç™»å½•æˆåŠŸ"}</p><p>{"status":1,"code":"10001","data":</p><p>{"id":5451,"regname":"test","pwd":"E10ADC3949BA59ABBE56E057F20F883E","mobilephone":"13691579841","leaveamount":"15000.00","type":"1","regtime":"2019-05-26 19:08:44.0"},</p><p>"msg":"å……å€¼æˆåŠŸ"}</p><p>Process finished with exit code 0</p><p>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬æ”¹ç”¨Sessionå¯¹è±¡æ¥å‘é€å……å€¼è¯·æ±‚å°±æˆåŠŸäº†ã€‚é‚£è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ</p><p>ç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œè·å–çš„å“åº”ä¿¡æ¯ä¼šåŒ…å«ä¸€ä¸ªset-cookieçš„å­—æ®µï¼Œä¿å­˜äº†æˆ‘ä»¬ç™»å½•çš„cookiesä¿¡æ¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿æŒè¿™ä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆå†æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶å°±éœ€è¦å¸¦ä¸Šè¿™ä¸ªcookiesä¼ é€’ç»™æœåŠ¡å™¨ï¼Œæ‰èƒ½ä¿æŒè¿™ä¸ªçŠ¶æ€ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨Sessionå¯¹è±¡å‘é€è¯·æ±‚æ—¶ï¼ŒSessionä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆä¸Šè¿°çš„è¿‡ç¨‹ï¼ŒSessionä¼šè‡ªåŠ¨æŠŠcookiesçš„ä¿¡æ¯ä¼ é€’ç»™æœåŠ¡å™¨ï¼Œè€Œæ— éœ€æˆ‘ä»¬åœ¨è¯·æ±‚å‚æ•°ä¸­æ‰‹åŠ¨æ·»åŠ cookiesï¼Œè¿™æ ·å°±ä¿æŒäº†ç™»å½•çš„çŠ¶æ€ï¼Œåç»­çš„ä¾èµ–æ“ä½œéƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚</p><p><strong>reqestsç®€å•å°è£…</strong></p><p>æœ‰äººä¼šé—®ï¼Œrequestsåº“å·²ç»å°è£…çš„å¾ˆå¥½äº†ï¼Œç›´æ¥ç”¨å°±è¡Œäº†ï¼Œä¸ºå•¥è¿˜è¦è‡ªå·±å°è£…ä¸€æ¬¡ï¼Ÿ</p><p><strong>ç¬¬ä¸€.</strong>é€šè¿‡å°è£…ï¼Œæˆ‘å¯ä»¥ç›´æ¥æŠŠæ‰€æœ‰çš„è¯·æ±‚å‚æ•°ç»Ÿä¸€ä½¿ç”¨å­—å…¸æ¥ä¼ é€’ã€€<strong>ã€€</strong></p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æ¥å£è¯·æ±‚éœ€è¦çš„æ•°æ®ä¹Ÿå°±æ˜¯æµ‹è¯•æ•°æ®å¾€å¾€ä¼šä¿å­˜åœ¨excelè¡¨é‡Œé¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å–åˆ°åæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå­—ç¬¦ä¸²æ˜¯æ— æ³•ä½œä¸ºè¯·æ±‚å‚æ•°ä¼ é€’çš„ï¼Œæ‰€ä»¥æˆ‘æ¯æ¬¡éƒ½è¦åšæ•°æ®è½¬æ¢ï¼Œå†ä¼ é€’ç»™æ¥å£ï¼Œä¸ºäº†èŠ‚çœè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘åªéœ€è¦æŠŠè¿™ä¸ªè¿‡ç¨‹å°è£…åˆ°æˆ‘çš„requestsé‡Œå³å¯ï¼Œæ¯æ¬¡å–æ•°æ®åè‡ªåŠ¨ç»™æˆ‘å¤„ç†ã€‚</p><p><strong>ç¬¬äºŒ.</strong>å½“æˆ‘æƒ³ä¿æŒæŸä¸ªçŠ¶æ€æ—¶ï¼Œä¸æƒ³æ¯æ¬¡éƒ½åˆå§‹åŒ–ä¸€ä¸ªSessionå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æŠŠå®ƒå°è£…åˆ°æˆ‘çš„requestsé‡Œé¢ï¼Œä»¥åç›´æ¥è°ƒç”¨å³å¯ã€‚</p><p>ä¸‹é¢æ¥çœ‹å°è£…çš„ä»£ç </p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 16:14</p><p>@Auth : linuxè¶…</p><p>@File : sendrequests.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>import json</p><p>import requests</p><p>class HttpRequests(object):</p><p>"""</p><p>eg: request = HttpRequests()</p><p>response = request(method, url, data)</p><p>or</p><p>response = request.send_request(method, url, data)</p><p>print(response.text)</p><p>"""</p><p>def __init__(self):</p><p>self.session = requests.Session()</p><p>def send_request(self, method, url, params_type='form', data=None, **kwargs):</p><p>method = method.upper()</p><p>params_type = params_type.upper()</p><p>if isinstance(data, str):</p><p>try:</p><p>data = json.loads(data)</p><p>except Exception:</p><p>data = eval(data)</p><p>if 'GET' == method:</p><p>response = self.session.request(method=method, url=url, params=data, **kwargs)</p><p>elif 'POST' == method:</p><p>if params_type == 'FORM': # å‘é€è¡¨å•æ•°æ®ï¼Œä½¿ç”¨dataå‚æ•°ä¼ é€’</p><p>response = self.session.request(method=method, url=url, data=data, **kwargs)</p><p>elif params_type == 'JSON': # å¦‚æœæ¥å£æ”¯æŒapplication/jsonç±»å‹ï¼Œåˆ™ä½¿ç”¨jsonå‚æ•°ä¼ é€’</p><p>response = self.session.request(method=method, url=url, json=data, **kwargs)</p><p>else: # å¦‚æœæ¥å£éœ€è¦ä¼ é€’å…¶ä»–ç±»å‹çš„æ•°æ®æ¯”å¦‚ ä¸Šä¼ æ–‡ä»¶ï¼Œè°ƒç”¨ä¸‹é¢çš„è¯·æ±‚æ–¹æ³•</p><p>response = self.session.request(method=method, url=url, **kwargs)</p><p># å¦‚æœè¯·æ±‚æ–¹å¼é get å’Œpost ä¼šæŠ¥é”™ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç»§ç»­æ·»åŠ å…¶ä»–çš„è¯·æ±‚æ–¹æ³•</p><p>else:</p><p>raise ValueError('request method "{}" error ! please check'.format(method))</p><p>return response</p><p>def __call__(self, method, url, params_type='form', data=None, **kwargs):</p><p>return self.send_request(method, url,</p><p>params_type=params_type,</p><p>data=data,</p><p>**kwargs)</p><p>def close_session(self):</p><p>self.session.close()</p><p>try:</p><p>del self.session.cookies['JSESSIONID']</p><p>except:</p><p>Pass</p><p>request = HttpRequests()</p><p>if __name__ == '__main__':</p><p>pass</p><p>è¿™ä¸ªå°è£…åªé’ˆå¯¹äº†getè¯·æ±‚å’Œpostè¯·æ±‚ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠputï¼Œdeleteç­‰è¯·æ±‚æ·»åŠ åœ¨32è¡Œä»£ç åé¢ï¼Œå®ç°æ›´å¤šçš„è¯·æ±‚æ–¹å¼ã€‚</p><p>è§£é‡Šä¸€ä¸‹30-34è¡Œä»£ç ï¼š è¿™å‡ è¡Œæ•°æ®æ˜¯ä¸ºäº†æŠŠjsonå’Œå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—å…¸çš„æ ¼å¼(é€šè¿‡ä½¿ç”¨å­—å…¸ä¼ é€’æ¥å£å‚æ•°)ä¸”å¯ä»¥å¤„ç†ä¸€äº›ç‰¹æ®Šçš„å½¢å¼ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·çš„æ ¼å¼ã€‚</p><p>'{"mobilephone": None, "pwd": null}' # å­—ç¬¦ä¸²ç±»å‹çš„ï¼Œä½†æ˜¯å³ä¸æ˜¯jsonå½¢å¼çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯å­—å…¸ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºå­—å…¸é‡Œé¢æ²¡æœ‰nullã€‚</p><p><strong>å°è£…æµ‹è¯•</strong></p><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å°è£…å¥½çš„æ–¹æ³•æ¥æµ‹è¯•ä¸€ä¸‹å‘é€ç™»å½•å’Œå……å€¼æ¥å£çš„è¯·æ±‚</p><p>"""</p><p>------------------------------------</p><p>@Time : 2019/7/12 16:16</p><p>@Auth : linuxè¶…</p><p>@File : test_requests.py</p><p>@IDE : PyCharm</p><p>@Motto: Real warriors,dare to face the bleak warning,dare to face the incisive error!</p><p>------------------------------------</p><p>"""</p><p>from sendrequests import request</p><p>import unittest</p><p>class TestRequests(unittest.TestCase):</p><p># ç™»å½•æ¥å£åœ°å€</p><p>login_url = r'http://***:8080/futureloan/mvc/api/member/login'</p><p># ç™»å½•æ¥å£æµ‹è¯•æ•°æ®</p><p>login_test_value = '{"mobilephone": "13691579841", "pwd": 123456}'</p><p># å……å€¼æ¥å£åœ°å€</p><p>recharge_url = r'http://***:8080/futureloan/mvc/api/member/recharge'</p><p># å……å€¼æ¥å£æµ‹è¯•æ•°æ®</p><p>recharge_test_value = {"mobilephone": "13691579841", "amount": 10000.00}</p><p>def test_login_api(self):</p><p>"""ç™»å½•æ¥å£æµ‹è¯•ç”¨ä¾‹"""</p><p>response = request('get', url=self.login_url, data=self.login_test_value)</p><p>self.assertTrue(response.json()["code"] == "10001")</p><p>print("ç™»å½•æ¥å£æµ‹è¯•é€šè¿‡")</p><p>def test_recharge_api(self):</p><p>"""å……å€¼æ¥å£æµ‹è¯•ç”¨ä¾‹"""</p><p>response = request('get', url=self.login_url, data=self.login_test_value)</p><p>try:</p><p># å……å€¼æ¥å£éœ€è¦å…ˆç™»å½•ï¼Œæ‰èƒ½å……å€¼</p><p>self.assertTrue(response.json()["code"] == '10001')</p><p>except AssertionError as e:</p><p>print('ç™»å½•å¤±è´¥!')</p><p>raise e</p><p>else:</p><p>response = request('post', url=self.recharge_url, data=self.recharge_test_value)</p><p>self.assertTrue(response.json()["code"] == "10001")</p><p>print("å……å€¼æ¥å£æµ‹è¯•é€šè¿‡")</p><p>if __name__ == '__main__':</p><p>unittest.main()</p><p>æµ‹è¯•ç»“æœ</p><p>ç™»å½•æ¥å£æµ‹è¯•é€šè¿‡</p><p>..</p><p>å……å€¼æ¥å£æµ‹è¯•é€šè¿‡</p><p>----------------------------------------------------------------------</p><p>Ran 2 tests in 0.570s</p><p>OK</p><p>Process finished with exit code 0</p><p>okï¼Œæµ‹è¯•ä»£ç æ‰§è¡Œé€šè¿‡ï¼Œè¯´æ˜æˆ‘ä»¬çš„å°è£…æ²¡æœ‰å•¥é—®é¢˜ï¼Œ ä¸”å¯ä»¥æ­£å¸¸å‘é€getå’Œpostè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è§£å†³æµ‹è¯•æ•°æ®é—®é¢˜å’Œéœ€è¦æ¥å£ä¾èµ–çš„é—®é¢˜ã€‚</p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/cc576679-30ca-477e-b874-61909607c2c5><p class=pgc-img-caption></p></div><p><strong>æ€»ç»“</strong></p><p>æœ€åæˆ‘ä»¬å†æ¥æ€»ç»“ä¸€ä¸‹æœ¬æ–‡æ¶‰åŠåˆ°çš„æ‰€æœ‰çš„çŸ¥è¯†ç‚¹å’Œä½ éœ€è¦æŒæ¡çš„ã€‚</p><p>1.requestså‘é€getè¯·æ±‚å’Œpostè¯·æ±‚çš„æ–¹æ³•</p><p>get(url, params=None, **kwargs)</p><p>post(url, data=None, json=None, **kwargs)</p><p>2.parmaså‚æ•°å’Œdataå‚æ•°çš„åŒºåˆ«</p><p>ç”±äºgetè¯·æ±‚æ— è¯·æ±‚ä½“ï¼Œpostè¯·æ±‚æœ‰è¯·æ±‚ä½“ã€‚</p><p>ä½¿ç”¨paramså‚æ•°æ—¶ï¼Œé»˜è®¤ä¼šæŠŠå‚æ•°é™„åŠ åˆ°urlåé¢ï¼Œæ‰€ä»¥å‘é€getè¯·æ±‚æ—¶åº”ä½¿ç”¨paramså‚æ•°ã€‚</p><p>ä½¿ç”¨dataå‚æ•°æ—¶ï¼Œå‚æ•°ä¼šå­˜æ”¾åˆ°è¯·æ±‚ä½“ä¸­ï¼Œæ‰€ä»¥å‘é€postè¯·æ±‚æ—¶ä¸èƒ½ä½¿ç”¨paramsï¼Œåº”ä½¿ç”¨dataï¼Œé™¤éæ¥å£åŠæ”¯æŒgetåˆæ”¯æŒpostï¼ŒåŒæ ·getè¯·æ±‚ä¹Ÿä¸èƒ½ä½¿ç”¨dataå‚æ•°ã€‚</p><p>3.å¦‚ä½•ä½¿ç”¨Seesionè§£å†³æ¥å£ä¿æŒçŠ¶æ€çš„é—®é¢˜</p><p>åˆå§‹åŒ–Sessionå®ä¾‹ï¼Œé€šè¿‡è¿™ä¸ªå®ä¾‹è°ƒç”¨request()æ–¹æ³•å‘é€è¯·æ±‚ã€‚</p><p>4.æœ€é‡è¦çš„ä¸€ä¸ªå°è£…æ–¹æ³•ï¼Œå¹¶æŒæ¡è¿™ä¸ªå°è£…è¯¥å¦‚ä½•ä½¿ç”¨</p><p>ä¸»è¦é’ˆå¯¹getå’Œpostè¯·æ±‚çš„æ¥å£ã€‚</p><p><strong>è¯·å…³æ³¨+ç§ä¿¡å›å¤ï¼šâ€œå­¦ä¹ â€å°±å¯ä»¥å…è´¹æ‹¿åˆ°è½¯ä»¶æµ‹è¯•å­¦ä¹ èµ„æ–™</strong></p><div class=pgc-img><img alt=æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ­£æµè¡Œçš„æ¥å£æµ‹è¯•å·¥å…·requestsåº“åŸæ¥è¿™ä¹ˆå¥½ç”¨ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6a8aceadda87417cb7fc23b33e78c89f><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æµ‹è¯•','requests','åº“åŸæ¥'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>