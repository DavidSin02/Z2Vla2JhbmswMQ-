<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>模拟退火算法：教你运用数学进行高效生产 | 极客快訊</title><meta property="og:title" content="模拟退火算法：教你运用数学进行高效生产 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/4e5f0003a184669ab0fa"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a95932c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a95932c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a95932c.html><meta property="article:published_time" content="2020-10-29T20:50:35+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:35+08:00"><meta name=Keywords content><meta name=description content="模拟退火算法：教你运用数学进行高效生产"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/a95932c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>模拟退火算法：教你运用数学进行高效生产</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5f0003a184669ab0fa></p><p><strong>得到最优解的概率为1</strong></p><p><strong>你值得拥有</strong></p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e630001565a6110c2e0></p><p>各位模友，我是你的新朋友小智，原本我正在做算法建模，超模君莫名其妙地拜托我写篇关于<strong>算法模型</strong>的文章。</p><p>实在拗不过超模君，那小智就来讲一讲最近正在看的<strong>Job-shop benchmark问</strong><strong>题</strong>。</p><p>因为一个项目研发的需要，小智啃了几本书（临时抱佛脚虽然不好，但却很有效），结果在一本经典书籍《<strong>智能优化算法及其应用</strong>》刚好看到Job-shop benchmark问题。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e6100034d9bdbecd355></p><p>FT06问题</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e630001565b5c6cf5c7></p><p>Job-shop问题全称<strong>车间作业调度问题</strong>（Job-shop scheduling problem），是生产运营管理领域研究的重要课题。进行作业调度问题的研究对于有效缩短产品加工时间，降低产品生产成本，提高企业生产效率等方面有重要的实际应用价值。</p><p>因此在该问题研究过程中，逐渐形成一些基准问题，即Job-shop benchmark问题，目前许多学术论文都以这些基准问题作为对比，检验自己的算法是否能够达到最优解，或者是击中最优解的效率是怎么样。</p><p>上文截图中的问题是FT06问题，这个问题的最优解即总加工时间为55。因此，如果要解FT06问题，只需确定总加工时间为55，甚至小于55的作业排序方案。</p><p>通俗来说，也就是<strong>通过建模调度优化工作流程，有效减少工作时</strong><strong>间</strong>。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5d0003b1653c5d9ace></p><p>为了让模友能更好地理解Job-shop问题，小智就以FT06问题为例给大家讲解讲解。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4e60000355cb20d8418f></p><p>首先，小智先给大家简单说明这FT06问题究竟是什么。</p><p>FT06问题实际上可以看作是有6个玩具需要在6台机器上加工，求解最优解。而把FT06问题中的数字翻译一下，则变成下面两个矩阵：<strong>加工顺序</strong>矩阵和<strong>加工时间</strong>矩阵。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5f0003a18857788760></p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e60000355ce170de75d></p><p>其中，加工顺序矩阵中的数字，代表玩具在各台机器的加工顺序；而加工时间矩阵中的数字，代表玩具在各台机器加工所需要的时间。</p><p>除此之外，工厂对玩具的加工还有特殊的流程控制：</p><blockquote><p>1、一台机器在同一时刻只能加工一个玩具；</p><p>2、一个玩具在同一时刻只能在一台机器上加工。</p></blockquote><p>好了，相信大家对问题已经有所了解，接下来小智打算用模拟退火的方式来解答求解。</p><p>在求解之前，先来回顾一下<strong>模拟退火算法</strong>。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5e0003a0ec2f888cfc></p><p>1983 年，S. Kirkpatrick 等人尝试将退火思想引入到组合优化领域，没想到产生奇效，进而创造出模拟退火算法。事实上，<strong>模拟退火算法</strong>是基于蒙特卡罗思想的<strong>随机寻优算法</strong>，其出发点是基于物理中固体物质的退火过程与一般组合优化问题之间的相似性。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5d0003b167892875c8></p><p>通俗点来说，就是材料中粒子的不同结构对应于粒子的不同能量水平，在高温条件下，粒子的能量较高，可以<strong>自由运动和重新排列</strong>。</p><p>如果从高温开始非常缓慢地降温，粒子在每个温度下会达到<strong>热平</strong><strong>衡</strong>。当系统完全被冷却时，最终将形成处于<strong>低能状态</strong>的晶体。</p><blockquote><p><strong>退火过程</strong>即固体物质的降温过程中，固体物质内部不断进行重新排列，并逐渐排列成最低能量状态的结构。</p><p><strong>算法上的优化过程</strong>则是当前解内部不断进行重新排列，并逐渐排列成实现目标函数最小值的解（求目标函数最大值的问题可以转变为求最小值的问题）。</p><p>所以会发现，退火过程和优化过程存在明显的相似性。</p></blockquote><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e6100034d9edeef3ab6></p><p>紧接着，小智会用<strong>Metropolis算法</strong>简单</p><p>描述退火过程。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e630001565eac9bb1ed></p><p>假设材料在状态之下的能量为<strong>E(i)</strong>，那么材料在温度<strong> T </strong>时从状态 <strong>i </strong>进入状态<strong> j </strong>遵循如下规律：</p><ul class=list-paddingleft-2><li><p>如果<strong> E(i) ≤ E(j)</strong>，则接受该状态被转换。</p></li><li><p>如果<strong> E(i) > E(j)</strong>，则状态转换以如下概率被接受：</p></li></ul><p>其中， <strong>K </strong>是玻尔兹曼常数，<strong> T </strong>是材料温度。</p><p>在特定温度下，经过充分的转换以后，材料达到热平衡。这个时候材料处于状态i的概率满足玻尔兹曼分布：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5e0003a0ed55b8bdb2></p><p>其中，<strong> X </strong>表示材料当前状态的随机变量，<strong> S </strong>表示状态空间集合。</p><p>那么，当温度非常高时，</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e6100034da1dcb18f68></p><p>其中，<strong>|S| </strong>表示集合<strong> S </strong>中状态的数量。</p><p><strong><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5d0003b1692e8c2f5b></strong></p><p><strong>这表示，在温度无限大的情况下，所有状态的出现</strong></p><p><strong>概率相同。</strong></p><p>而当温度下降到很低时，设：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e60000355d046a7c17f></p><p>那么：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e60000355d1565e6228></p><p>其中：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5f0003a189954981bd></p><p><strong></strong><strong>E</strong><strong>2 </strong>为仅次于 <strong>Emin</strong> 的最低能量状态，所以：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5d0003b16a7817e349></p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5d0003b16bbbd59f6e></p><p>也就是说：</p><p><strong>当温度降到极低时，材料进入最小能量状态的概率为1！</strong></p><p><strong>当温度降到极低时，材料进入最小能量状态的概率为1！</strong></p><p><strong>当温度降到极低时，材料进入最小能量状态的概率为1！</strong></p><p>因此，如果我们运用退火思想放在优化问题上，在降温过程中问题的解进行充分地“<strong>热交换</strong>”，即进行充分地重新排列，同样可以帮助我们寻找最优解，<strong>理论上也会具有达到全局最优解的性能</strong>！</p><p>这个算法也就是我们常说的“<strong>模拟退火算法</strong>”。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e63000156612bb2922f></p><p>到此为止，算法已回顾完毕，小智决定借助模拟退火的思想来进行优化，此时感觉就像面朝大海春暖花开。</p><p>MMP，刚填完一个坑来一坑，这个时候又遇到了一个问题：<strong>怎么构造工厂作业排序优化问题的解？</strong></p><p>因为在解答该问题中，需要先构造一个可行解，之后才能对这个可行解进行优化。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4e5e0003a0efa0d64cd5></p><p>在小智抖脚思考许久后，决定还是用最简单的数列来计算。</p><p>对于以下这串数字，小智称之为<strong>自然循环数列：</strong>123456， 123456， 123456， 123456， 123456， 123456。</p><p>看得懂什么意思吗？如果看不懂，那就对了！</p><p>其实，这里的意思是，尝试先构造一个可行解，序列从左到右，可以翻译为，先加工玩具1的工序1，再到加工玩具2的工序1，……，再到加工玩具6的工序1，再到加工玩具1的工序2，再到加工玩具2的工序2……如此类推。</p><p>理论上说，假如没有机器的限制，玩具1完成加工工序1的那一刻，可以开始加工玩具2。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e6300015662f4efcd3a></p><p>但是，因为有机器的限制，如果玩具1的某个步骤要在机器1上加工，假设此时机器1正在加工别的玩具，那么只有等到机器1完成加工的那一刻，才可以开始加工玩具1的下一步骤。</p><p>所以，玩具<strong> i </strong>的第<strong> k </strong>个工序在机器<strong> m </strong>上进行加工，其开始时间为：</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e620001c83dcabbd4bb></p><p>我们运用这个原则，以<strong>自然循环数列</strong>为例，按照文章最开头的机器约束矩阵和加工时间矩阵，作一个<strong>甘特图</strong>，说明这个数列实际上可以表示工厂作业排序优化问题的解。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e60000355d5c0b2134e></p><blockquote><p>这里小智要解释一下，这个甘特图表示了工厂生产玩具的工作流程。图中每一个方块表示一个任务，方块当中标志的数字是指玩具的编号。这个甘特图，横座标表示时间轴，纵座标表示机器。从这个甘特图可以发现，一共有M1-M6，六台机器。</p><p>最后可以发现，按照这个工作顺序生产玩具，一共生产时间为64分钟。</p></blockquote><p>此时小智重点观察自然循环序列前两位：12，按照这个顺序来执行加工任务，以甘特图来印证：</p><blockquote><p>Step1：执行玩具1的工序1，由机器2来执行，时间为10分钟，对应甘特图机器座标为M2，时间座标为0-10。</p><p>Step2：执行玩具2的工序1，由机器5来执行，时间为3分钟，对应甘特图机器座标为M5，时间座标为0-3。</p><p>第3-6步基本类似。我们再聚焦自然循环列第7-10位：1234。按照这个顺序继续执行加工任务, 以甘特图来印证：</p><p>Step7：执行玩具1的工序2，由机器3来执行，时间为9分钟。玩具1工序1的结束时间为10，而且机器3先前没有其他任务安排，所以玩具1工序2任务的甘特图机器座标为M3，时间座标为10-19。</p><p>Step8：执行玩具2的工序2，由机器1来执行，时间为6分钟。玩具2工序1的结束时间为3，而且机器1先前没有其他任务安排，所以玩具2工序2任务的甘特图机器座标为M1，时间座标为3-9。</p><p>Step 9：执行玩具3的工序2，由机器5来执行，时间为9分钟。玩具3工序1的结束时间为5，机器5先前有任务安排，加工的最后时间为8，所以玩具3工序2的开始时间为 <strong>max(5, 8) = 8</strong>，甘特图机器座标为M5，时间座标为8-17。</p><p>Step10：执行玩具4的工序2，由机器1来执行，时间为7分钟。玩具3工序1的结束时间为14，机器1先前有任务安排，加工的最后时间为9，所以玩具4工序2的开始时间为 <strong>max(14, 9) = 14</strong>，甘特图机器座标为M1，时间座标为14-21。</p><p>……</p></blockquote><p>流程走到这里，相信大家对整个过程比较明朗了。</p><p>按照这个过程，自然循环序列就转变为一张甘特图，进而可以计算出整体的完成时间。</p><p><strong>进一步地而言，任何自然循环序列打乱以后的序列，都可以表示这个工厂作业生产优化问题的解。</strong></p><p>此时，我们就应该明白解的构造方式了。那接下来这道问题中另一关键点，<strong>那就是老解如何变换才能产生新解</strong>。</p><p>由于目前解的构造方式是一组编码，因此可以对这组编码进行重排，即可产生新解，但也需要考虑到保留当前解的有效成分。</p><p>考虑以<strong>最简单</strong>的方式来产生新解，<strong>随机调换</strong>：在当前解中随机选择两个位置，并对调它们的数值。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5d0003b16fe5297ad5></p><p>更换第6个位置和第26个位置的数，产生新解</p><p><strong><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e620001c8416590be32></strong></p><p><strong>算法思想</strong><strong>、解的构造、解的产生</strong><span>，这三大问题终于解决了，小智开始设计模拟退火的实现过程了：</span></p><blockquote><p>第1步，初始化，取一个足够大的初始温度<strong> T0</strong>，令当前温度<strong> T = T0</strong>，给定一个初始解<strong>S1</strong>。</p><p>第2步，随机调换当前解 <strong>S1 </strong>的两个位置的数值，产生一个新解 <strong>S2 </strong>。</p><p>第3步，计算增量，<strong>Δ = f(S2)– f(S1)</strong>，其中f为计算解的总生产时间的函数。</p><p>第4步，如果<strong> Δ &lt; 0 </strong>则接受 <strong>S2</strong> 作为新的当前解，<strong>S2</strong><strong> =</strong> <strong>S1 </strong>。否则，计算 <strong>S2</strong> 的接受概率</p></blockquote><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5e0003a0f092e3c22f></p><blockquote><p>，即在 <strong>[0,1]</strong> 这个区间上面产生一个均匀分布的随机数rand，如果</p></blockquote><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5e0003a0f092e3c22f></p><blockquote><p>>rand，则接受 <strong>S2</strong> 作为新的当前解，否则保留当前解 <strong>S1</strong> 。</p></blockquote><blockquote><p>第5步，进行温度衰减，这里采取 <strong>T = α × T</strong>。</p><p>第6步，如果温度没有衰减到设定值 <strong>Tend</strong> 以下，继续执行第2~5步。</p></blockquote><p>大功告成，小智不禁长长地呼了一口气。</p><p>最后，设定模拟退火算法的参数 <strong>T0 = 1</strong>，<strong>α = 0.999</strong>，<strong>Tend = 10-3</strong>，执行模拟退火算法。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e5d0003b170437cf154></p><p>这个是当前解对应的优化过程展示，可以发现当前解对应的总加工时间不断下降，最后稳定在55分钟处</p><p>啥，是不是还没看懂上面这个图想表达的意思，那就看看下面这个甘特图。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4e6300015663eb61ed99></p><p>利用模拟退火算法，求出工厂玩具排序问题的最优总生产时间为55分钟，达到了FT06问题的最优解。</p><p>而这也正是模拟退火算法的应用所在，通过不断的内部调整，使得结果不断优化，最后达到较佳的状态。</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e6300015664876da4fb></p><p>搞定，今晚可以让超模君请我吃鸡腿了！</p><p><img alt=模拟退火算法：教你运用数学进行高效生产 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4e620001c8422395aabe></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'模拟','运用','数学'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>