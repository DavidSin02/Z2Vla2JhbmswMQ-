<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>汇编语言之我的第一个汇编程序 | 极客快訊</title><meta property="og:title" content="汇编语言之我的第一个汇编程序 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1539083351400f739f99b07"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9b102a8.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9b102a8.html><meta property="article:published_time" content="2020-11-14T21:04:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:32+08:00"><meta name=Keywords content><meta name=description content="汇编语言之我的第一个汇编程序"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/a9b102a8.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>汇编语言之我的第一个汇编程序</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>昨天老师讲了如何在电脑上运行汇编程序。现在就写出具体操作步骤记录下来。</p><h1>需要的工具</h1><p>要编写第一个汇编程序，我们首先要有能够与相应编译器兼容的操作系统。鉴于64位windows10操作系统与编译器不兼容，所以我们使用dos。dos是英文Disk Operating System的缩写，意思是“磁盘操作系统”。dos是个人计算机上的一类操作系统。我们可以通过多种方式让我们的计算机进入dos。这里我选择老师推荐的<strong>dosbox</strong>。 DOSBox是一个软件。它是当前在 Windows 系统运行 DOS 游戏的较为完美的解决方案。大家可以下一下这个可以在windws环境下模拟dos系统的软件。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1539083351400f739f99b07><p class=pgc-img-caption>dosbox的桌面图标</p></div><p>有了系统我们还需要相应的编译器，这里是用微软的<strong>masm5.0</strong>，这个编译器与我的windows不兼容，害我搞了好长时间。这个masm中包含了我们将要使用的<strong>masm.exe</strong>和<strong>link.exe以及</strong>能够查看各个寄存器和主存内容以及修改寄存器和主存内容用来调试程序的<strong>debug.exe文件。</strong></p><h1><strong>工具的位置</strong></h1><p>在我们电脑上的D盘根目录下创建一个asm文件夹并将debug.exe放进去。再在D盘下创建masm文件夹，并且将masm.exe和link.exe放进去。这样我们需要的工具就彻底准备好了。准备开始实验。</p><h1><strong>开始搞事情</strong></h1><p>我们的工具搞定了，就下来就是打开我们的虚拟操作系统dosbox。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1539083792391bb6504b0f0><p class=pgc-img-caption>dosbox刚打开的界面</p></div><p>打开后我们需要输入以下东西：<strong>mount c d:\ </strong>这几个字母和符号的作用就是表明现在的dos系统的C盘就是你自己电脑上的D盘，比如在你的windows电脑上D盘里有asm文件夹，在dos里要访问就需要键入C:\asm，因为此时你的D盘就是dos的C盘。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/153908442709779a666aba9><p class=pgc-img-caption>输入mount c d:\并按回车之后</p></div><p>然后我们可以先试一试debug的使用。上面已经说了debug的作用就是可以调试程序或者说它可以看到你的电脑的现在的运行状态。</p><p>先打开C盘（其实是你电脑上的D盘），打开asm文件夹，注意在打开文件夹时要在文件夹前面加上cd两个字母和空格。不然就无法进入文件夹。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1539084794126cd6b911ec9><p class=pgc-img-caption>现在我们打开了asm文件夹</p></div><p>打开了asm文件夹后我们启动debug程序。输入debug按下回车。会出现一个短横线，</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390849008084f1d4d6589><p class=pgc-img-caption>已经启动debug，等待输入命令</p></div><p>现在我们输入查看寄存器内容的命令，输入r，按下回车。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390849934143bf283be9f><p class=pgc-img-caption>r命令可以显示各个寄存器的内容</p></div><p>常用的debug命令：</p><p>a (Assemble) 逐行汇编 a [address]</p><p>c (Compare) 比较两内存块 c range address</p><p>d (Dump) 内存16进制显示 d [address]或 d [range]</p><p>e (Enter) 修改内存字节 e address [list]</p><p>f (fin) 预置一段内存 f range list</p><p>g (Go) 执行程序 g [=address][address...]</p><p>h (Hexavithmetic) 制算术运算 h value value</p><p>i (Input) 从指定端口地址输入 i pataddress</p><p>l (Load) 读盘 l [address [driver seetor></p><p>m (Move) 内存块传送 m range address</p><p>n (Name) 置文件名 n filespec [filespec...]</p><p>o (Output) 从指定端口地址输出 o portadress byte</p><p>q (Quit) 结束 q</p><p>r (Register) 显示和修改寄存器 r [register name]</p><p>s (Search) 查找字节串 s range list</p><p>t (Trace) 跟踪执行 t [=address] [value]</p><p>u (Unassemble) 反汇编 u [address ]或range</p><p>w (Write) 存盘 w [address[driver sector secnum></p><h1>一段程序的开始</h1><p>要想在dos里运行汇编程序，我们首先要写好代码。写汇编代码我们可以用很多工具，edit，wps，word或者记事本都可以，我在这里用的是文本文档（txt），不过我们在保存时要保存为ASM格式。打开一个txt，在里面写下这些代码。</p><p>DATAS SEGMENT</p><p>STRING DB 'Hello World!',13,10,'$'</p><p>DATAS ENDS</p><p>ASSUME CS:CODES,DS:DATAS</p><p>CODES SEGMENT</p><p>START:</p><p>MOV AX,DATAS</p><p>MOV DS,AX</p><p>LEA DX,STRING</p><p>MOV AH,9</p><p>INT 21H</p><p>MOV AH,4CH</p><p>INT 21H</p><p>CODES ENDS</p><p>END START</p><p>就像我一样</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15390877128568b50d4740c><p class=pgc-img-caption>在txt中输入的代码</p></div><p>写完后保存成后缀名为<strong>asm</strong>的文件。放入masm文件夹里。</p><p>现在我们已经完成了代码。接下来就要开始编译程序。</p><p>首先我们要退出debug程序，输入<strong>q</strong>按回车。然后输入<strong>cd..</strong>返回上一级目录，千万别忽略cd后面的两个点</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1539085799086e3c21bc803><p class=pgc-img-caption>退出debug然后返回上一级目录</p></div><p>在dos里面打开masm文件夹（输入cd masm）</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390858860741882291203><p class=pgc-img-caption>打开masm文件夹</p></div><p>打开masm编译程序</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390859699423d1e578149><p class=pgc-img-caption>打开masm编译器之后</p></div><p>首先会弹出一些程序有关的信息，然后下面会提示输入ASM格式文件名，因为我们已经将文件放到masm文件夹下所以不需要在写绝对路径，如果你的helloworld的asm文件放到了其他位置，就需要写绝对路径，但千万不要忘记你的D盘是现在的C盘。</p><p>我的helloworld文件名为2.asm，所以我直接输入2，如果你的文件后缀名为txt，那么就连后缀名一起输入，然会回车</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390862650210ef405be58><p class=pgc-img-caption>输入文件名之后</p></div><p>接下来还是要求输入不用管，直接回车，</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15390863506757e357cd62c><p class=pgc-img-caption>回车之后</p></div><p>这个也不用管，继续回车。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/153908640510658b30189b8><p class=pgc-img-caption>第二次回车之后</p></div><p>这个依然不用管，继续回车。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1539086536815715ef822e0><p class=pgc-img-caption>总共三次回车之后</p></div><p>这样我们的编译就完成了，提示我们0 warning，0 error。说明我们的代码没有任何错误。现在在我们的masm文件夹中我们可以看到多了一个2.obj文件。</p><p>接下来是连接过程，输入<strong>link</strong>用来启动link.exe程序。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1539086821106f03e19155b><p class=pgc-img-caption>启动了link之后</p></div><p>下面提示我们输入obj格式的文件，正是我们刚刚生成的那个文件，所以输入文件名2，</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1539086922795e97a4b32f4><p class=pgc-img-caption>link开始</p></div><p>输入文件名开始连接，然后同样和之前的步骤一样，一直按三次回车，直到link完成，我们的masm文件夹下多出了一个2.exe文件，这个就是最终可执行文件。。</p><div class=pgc-img><img alt=汇编语言之我的第一个汇编程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1539087832089a3b13ee3f1><p class=pgc-img-caption>程序执行完成</p></div><p>这样我们可以看到，已经打印出了Hello World ！这样我们就完成了通过汇编语言写出的第一个程序helloworld。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'编语','程序','第一'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>