<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>并发最基本要理解的进程、线程、协程 | 极客快訊</title><meta property="og:title" content="并发最基本要理解的进程、线程、协程 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/3f756a3627164d4f93883dd7c0e0bac5"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ab6b08d6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ab6b08d6.html><meta property="article:published_time" content="2020-11-14T21:06:37+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:37+08:00"><meta name=Keywords content><meta name=description content="并发最基本要理解的进程、线程、协程"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ab6b08d6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>并发最基本要理解的进程、线程、协程</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>一、进程</h1><p><strong>1.什么是进程？</strong></p><p>进程是操作系统进行资源分配和调度的基本概念,可以说进程是线程的容器，一个进程里包括数据区域和堆栈存储着活动过程调用的指令和本地的变量，进程没运行时候处于没有生命的一个实体的状态，运行时依赖处理器给他活体状，一个进程至少有一个线程，如果没有的话那么这个线程就是它本身。</p><p><strong>一、多进程的概念</strong></p><p>理论上一个CPU只能给一个进程，如果想一个CPU运行多个进程的话，那就是多进程，就要使用并发技术，实现并发技术非常复杂,说一下简单的并发技术 "时间片轮转进程调度算法" 在操作系统的管理下，所有正在运行的进程轮流使用CPU，每个进程允许占用CPU的时间非常短(比如10ms)，这样用户根本感觉不出来 CPU是在轮流为多个进程服务，但实际上在任何一个时间内有且仅有一个进程占有CPU。 如果一台计算机有多个CPU，情况就不同了，如果进程数大于CPU数的时候，使用这种并发技术。目前都是几核的CPU都能够处理。</p><p>同时，这两种上下文切换的处理都是通过操作系统内核来完成的。内核的这种切换过程伴随的最显著的性能损耗是将寄存器中的内容切换出。</p><p><strong>2.什么是线程？</strong></p><p>线程是程序执行流的最小单元,一个线程的信息包括(线程ID，指令集合，堆栈组)组成的线程这种单位,上面进程提到进程是线程的一个容器，说明线程运行在进程里面的，那就是运行在进程里面的一个实体，它不拥有系统资源，但它拥有进程的资源。</p><p><strong>一、线程的三种状态</strong></p><p>1.就绪状态:</p><p>是指线程具备运行的所有条件，逻辑上可以运行，在等待处理机的过程。</p><p>2.阻塞状态:</p><p>是指线程在等待某一个事件(信号量)。</p><p>3.运行状态:</p><p>是指线程占有处理机正在运行。</p><h1>二、多线程</h1><p>同时运行多个线程完成不同的工作，就叫做多线程，使用多线程的好处有：</p><p>1.资源利用率更好: 想象一下，一个应用程序需要从本地文件系统中读取和处理文件的情景。比方说，从磁盘读取一个文件需要5秒，处理一个文件需要2秒。处理两个文件则需要14s，在这段时间里，CPU非常的空闲,它可以做一些别的事情,那么我们使用多个线程的话，是不是可以处理文件的同时去读取新的文件，这样就提高了时间效率,</p><p>2.程序响应更快:假设做某一个服务的时候，它在某一个端口监听进来的请求，当一个请求到来时，它去处理这个请求，然后再返回去监听。</p><p>3.程序设计简单</p><p>做多线程的时候运用多线程的技术设计非常简单易用,遵循好一些规则，避免造成阻塞等操作，基本可以很快设计程序的需求。</p><p>4.使用场景:</p><p>多线程：密集I/O任务（网络I/O，磁盘I/O，数据库I/O）使用多线程合适。</p><h1>三、线程与线程主要依靠什么通信</h1><p>线程间通信主要通过共享内存</p><p><strong>3.什么是协程?</strong></p><p>一个程序可以包含多个协程,线程相对独立有自己的上下文,协程也是,但是协程由自己控制，不受操作系统控制，可以不加锁的访问全局变量，所以上下文的切换非常快，可以说是轻量级的线程，也可以说称之为用户级别的线程就叫协程，一个线程可以多个协程，一个进程也可以单独拥有多个协程，线程进程都是同步机制，而协程则是异步。</p><p>1.使用场景:</p><p>又称微线程，在单线程上执行多个任务，用函数切换，开销极小。不通过操作系统调度，没有进程、线程的切换开销。genventmonkey.patchall</p><p>多线程请求返回是无序的，那个线程有数据返回就处理那个线程，而协程返回的数据是有序的,处理磁盘的I/O比较慢,处理网络I/O性能还是比较高。</p><p><strong>4.进程线程上下文切换</strong></p><p>顺便说一下上下文切换上下文切换就是从当前执行任务切换到另一个任务执行的过程。但是，为了确保下次能从正确的位置继续执行，在切换之前，会保存上一个任务的状态。进程上下文切换与线程上下文切换最主要的区别就是线程的切换虚拟空间内存是相同的（因为都是属于自己的进程），但是，进程切换的虚拟空间内存则是不同的。同时，这两种上下文切换的处理都是通过操作系统内核来完成的。</p><div class=pgc-img><img alt=并发最基本要理解的进程、线程、协程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3f756a3627164d4f93883dd7c0e0bac5><p class=pgc-img-caption></p></div><p><strong>【写在最后】</strong></p><p>工作一到五年的程序员朋友面对目前的技术无从下手，感到很迷茫可以关注+转发+私信【架构】，领取java相关资料及视频，里面有阿里Java高级大牛直播讲解知识点，分享知识，课程内容都是各位老师多年工作经验的梳理和总结，带着大家全面、科学地建立自己的技术体系和技术认知！</p><p>最后祝那些积极向上的程序猿们好好学习、天天向上，早日打破牢笼，展望更高层次的世界。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'进程','线程','协程'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/3f2bf674.html alt=进程、线程、协程的选择与文件并发操作 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/622e63700f544942809d9a374757630e style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/3f2bf674.html title=进程、线程、协程的选择与文件并发操作>进程、线程、协程的选择与文件并发操作</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>