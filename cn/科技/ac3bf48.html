<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法 | 极客快訊</title><meta property="og:title" content="基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8b32378fa21b4789ac4af3aeb065d579"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><meta property="article:published_time" content="2020-10-29T21:07:00+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:00+08:00"><meta name=Keywords content><meta name=description content="基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ac3bf48.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>所谓手自动勿扰S7-200 SMART PLC切换，是指在将PID回路从手动模式切换到自动模式，或者是自动模式切换的手动模式时，PID输出不会发生跳变，也就是不会产生任何波动。本文阐述内容主要以中的PID功能为实例。</p><p>一、PID 自动/手动调节的无扰动切换</p><p>有些工程项目中可能需要根据工艺要求在不同的时刻投入、或者退出 PID 自动控制；退出 PID 自动控制时，控制器的输出部分可以由操作人员直接手动控制。这就是所谓的 PID 手动/自动切换。</p><p>PID 控制处于自动方式时，PID 控制器（以S7-200 SMART 中的 PID 调节为例）会按照 PID 算法，自动通过输出的作用使过程反馈值跟随给定值变化，并保持稳定。这是一个自动的闭环控制系统。操作人员可以根据现场工艺的要求，改变给定（即设定值）的值。</p><p>PID 控制处于手动方式时，PID 控制器不再起自动计算的作用。这时，控制回路的输出是由操作人员手动控制、调整，由操作人员观察现场的控制效果，从而构成人工闭环控制。</p><p>所谓 PID 自动/手动控制，就是看控制系统的输出是由 PID 控制器自动控制，还是由操作人员手动控制。</p><p>有些控制系统的执行机构不能承受较大的冲击，这就要求在进行 PID 自动/手动切换时，保持控制输出的稳定。这就是要求无扰动切换。为了达到 PID 自动/手动控制的无扰动切换，需要在编程时注意一些相关事项。下面分别就直接使用 PID 指令编程，和使用 PID 向导编程两种情况作一介绍。</p><p>二、直接使用 PID 指令编程时的 PID 自动/手动无扰切换</p><p>直接使用 PID 指令块编写 PID 控制程序时，可以简单地使用“调用/不调用”指令的方式控制自动/手动模式。因为 PID 指令本身已经具有实现无扰动切换的能力，此时在 PID 指令控制环节之外编程没有多大必要。</p><p>PID 指令的 EN 输入端使能（为“1”）时，我们认为是自动控制模式；EN 输入端未使能（为“0”）时，我们认为是手动控制模式。PID 指令本身有一个“能流历史状态位”，以记录指令的状态切换。在 EN 端从“0”变为”“1”时，PID 指令认为这是从“手动”模式向“自动”模式切换。PID 指令此时会自动执行一系列动作，以配合无扰动切换：</p><ul class=list-paddingleft-2><li>使设定值（ SPn） = 当前过程反馈变量（PVn）</li><li>设置上次采样过程变量（PVn-1） = 当前过程反馈变量（PVn）</li><li>设置积分偏差和（或所谓积分前项）（Mx） = 当前输出值（Mn）</li></ul><p>使设定值等于当前反馈值可以避免出现偏差，使之不存在调整的要求；当然如果有工艺要求，也可以后续调整设定值。其他的动作都是为了使 PID 在后续的操作中不改变输出的值。</p><p>在编程时要注意：</p><ul class=list-paddingleft-2><li>从自动模式向手动模式切换时，PID 指令的 EN 端不再有能流，计算停止，输出值 Mn 不再变化。此时如果需要操作人员人工观察控制的结果，手动控制输出量，就可以通过用户程序直接改变回路表中的输出值存储单元内容（见数据块或系统手册的相关部分内容）。如果有必要，操作人员的操作可能要进行一些标准化换算。</li><li>为保证从手动模式向自动模式的切换无扰动，需要在手动控制时，或在切换过程中，禁止对 PID 回路表中设定值的更新，以便切换时 PID 指令用当前过程反馈值替代设定值。切换完成后，操作人员可以调整设定值。</li></ul><p>三、使用 PID 向导编程时的 PID 自动/手动无扰切换</p><p>使用 PID 指令向导编程时，指令向导会自动调用 PID 指令，并且编写外围的控制变量标准化换算、定时采样等功能。用户在使用 PID 指令向导时，需要在用户程序中用 SM0.0 调用指令向导生成的子程序（如 PIDx_CTRL 子程序）。PID 向导可以生成带自动/手动切换功能的子程序，这个子程序使用一个数字量点为“1”、“0”的状态来控制是否投入 PID 自动控制。</p><p>到目前为止（STEP 7-Micro/WIN SMART），使用 PID 向导生成的子程序时，由于用户程序不能直接使用 PID 指令，它的无扰切换能力因为隔了外壳子程序，所以受到了局限。如果对无扰切换要求比较严格，需要另外编一些程序加以处理。但在高级一点的PLC中，无扰动切换功能只需打个勾即可。对于SMART来说则不能这么简单了。</p><p>S7-200SMART中，考察如下 PID 控制子程序：</p><div class=pgc-img><img alt="基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8b32378fa21b4789ac4af3aeb065d579><p class=pgc-img-caption></p></div><p>图 1. PID 向导生成的指令</p><p>图中：a、过程反馈量 ；b、设定值，实数 ；c、自动/手动控制，“1”=自动，“0”=手动 ；d、手动控制输出值，0.0 - 1.0 之间的一个实数；e、PID 控制输出值。</p><p>要实现无扰动切换，必须：</p><ul class=list-paddingleft-2><li>在从自动向手动切换时，使手动输出值（VD2004）等于当前的实际控制输出值；</li><li>在从手动向自动切换时，使设定值相当于当前的过程反馈值。</li></ul><p>为此，可编写类似下图所示的程序，放在 PID 控制子程序之前：</p><div class=pgc-img><img alt="基于西门子S7-200 SMART PLC的PID无扰动手动-自动切换方法" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/839050d2908441b787ef693ea074a839><p class=pgc-img-caption></p></div><p>图 2. 无扰切换处理程序</p><p>图中：</p><p>a、自动/手动切换控制点 ；</p><p>b、从自动向手动切换时，使手动输出值等于实际当前值 ；</p><p>c、从手动向自动切换时，把当前反馈量换算为相应的给定值 。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'西门子','S7','200'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/ec066a0.html alt="深入剖析西门子 S7-200 PLC的常用数据存储区" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6a86e8c2577e4f30a19c800f9ed5fb9f style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/ec066a0.html title="深入剖析西门子 S7-200 PLC的常用数据存储区">深入剖析西门子 S7-200 PLC的常用数据存储区</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>