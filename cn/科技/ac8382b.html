<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>面试必会的设计模式：适配器模式 | 极客快訊</title><meta property="og:title" content="面试必会的设计模式：适配器模式 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/890c3999e2034ed6ad1fe0a46d9fcd4f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac8382b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac8382b.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="面试必会的设计模式：适配器模式"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ac8382b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>面试必会的设计模式：适配器模式</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/890c3999e2034ed6ad1fe0a46d9fcd4f><p class=pgc-img-caption></p></div><h2 class=pgc-h-arrow-right>前言</h2><p>《设计模式自习室》系列，顾名思义，本系列文章带你温习常见的设计模式。主要内容有：</p><ul><li>该模式的<strong>介绍</strong>，包括： 引子、意图（大白话解释） 类图、时序图（理论规范）</li><li>该模式的<strong>代码示例</strong>：熟悉该模式的代码长什么样子</li><li>该模式的<strong>优缺点</strong>：模式不是万金油，不可以滥用模式</li><li>该模式的<strong>实际使用案例</strong>：了解它在哪些重要的源码中被使用</li></ul><p>该系列会逐步更新于我的博客和公众号（博客见文章底部），也希望各位观众老爷能够关注我的个人公众号：<strong>后端技术漫谈</strong>，不会错过精彩好看的文章。</p><h3 class=pgc-h-arrow-right>系列文章回顾</h3><ul><li>【设计模式自习室】开篇：为什么我们要用设计模式？</li><li>【设计模式自习室】建造者模式</li><li>【设计模式自习室】原型模式</li><li>【设计模式自习室】透彻理解单例模式</li><li>【设计模式自习室】理解工厂模式的三种形式</li></ul><h2 class=pgc-h-arrow-right>结构型——适配器模式</h2><h3 class=pgc-h-arrow-right>引子</h3><p>当你从中国到国外旅游时，经常会购买一个电源适配器，也就是电源转接头，因为国外的插座经常无法适用于国内的插头，这个电源转接头就是一个适配器，也就是下图中的Adapter，它让你的插头能够正常的在国外使用。</p><p>客户类调用适配器的方法时，在适配器类的内部将调用适配者类的方法，而这个过程对客户类是透明的，客户类并不直接访问适配者类。</p><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/11efd346fd224c30aaf61f16144a5430><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>定义</h3><p>适配器模式把一个类的接口变换成客户端所期待的另一种接口，从而<strong>使原本因接口不匹配而无法在一起工作的两个类能够在一起工作</strong>。</p><p>适配器模式有类的适配器模式和对象的适配器模式两种不同的形式。</p><h4 class=pgc-h-arrow-right>1. 类适配器</h4><p>创建新类，继承源类，同时还要实现新接口</p><pre><code>class  adapter extends oldClass implements newFunc{}</code></pre><h4 class=pgc-h-arrow-right>2. 对象适配器</h4><p>创建新类的实例，其中包含旧的类，并实现新接口</p><pre><code>class adapter implements newFunc { private oldClass oldInstance ;}</code></pre><ul><li>类适配器使用<strong>对象继承</strong>的方式，是静态的定义方式</li><li>对象适配器使用<strong>对象组合</strong>的方式，是动态组合的方式。</li></ul><h3 class=pgc-h-arrow-right>类图</h3><p>如果看不懂UML类图，可以先粗略浏览下该图，想深入了解的话，可以继续谷歌，深入学习：</p><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7150bc49f57846b0b71c0a190567fbf2><p class=pgc-img-caption></p></div><p>适配器模式包含如下角色：</p><ul><li>Target：目标抽象类：这就是所期待得到的新接口类。</li><li>Adapter：适配器类：适配器类是本模式的核心。适配器把源接口转换成目标接口。显然，这一角色不可以是接口，而必须是具体类。</li><li>Adaptee：适配者类：等待适配的旧类</li><li>Client：客户端调用者</li></ul><h4 class=pgc-h-arrow-right>1. 类适配器</h4><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ca3f5b4cfdf14057a085637053dfd4f2><p class=pgc-img-caption></p></div><h4 class=pgc-h-arrow-right>2. 对象适配器</h4><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1f7632ea89dd45328d4ee16fbdec579f><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>时序图</h3><p>时序图（Sequence Diagram）是显示对象之间交互的图，这些对象是按时间顺序排列的。时序图中显示的是参与交互的对象及其对象之间消息交互的顺序。</p><p>我们可以大致浏览下时序图，如果感兴趣的小伙伴可以去深究一下：</p><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/487370a5041e444abc5f633daf375520><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>代码示例/使用场景举例</h3><p><strong>这次我将代码示例和使用场景两个章节合起来讲，是因为有一个十分典型的Java 源码可以学习</strong></p><h4 class=pgc-h-arrow-right>1. Java容器中的Enumeration老接口和Iterator新接口</h4><p>JDK1.1 之前提供的容器有Arrays,Vector,Stack,Hashtable,Properties,BitSet，其中定义了一种访问群集内各元素的标准方式，称为 Enumeration（列举器）接口。</p><p>JDK1.2 版本中引入了 Iterator接口，新版本的集合对（HashSet,HashMap,WeakHeahMap,ArrayList,TreeSet,TreeMap, LinkedList）是通过 Iterator 接口访问集合元素。</p><p>这样，如果将老版本的程序运行在新的 Java 编译器上就会出错。因为 List 接口中已经没有 elements()，而只有 iterator() 了。那么如何将老版本的程序运行在新的 Java 编译器上呢? <strong>如果不加修改，是肯定不行的，但是修改要遵循“开－闭”原则</strong>我们可以用 Java 设计模式中的适配器模式解决这个问题。</p><pre><code>public class EnumIter implements Iterator {//重点1：配器实现目标接口   private Enumeration e;//重点2：适配器持有被适配接口(对象)的引用   public EnumIter(Enumeration e){       this.e = e;   }   //将对目标对象的调用转发给真正的被适配的对象   public boolean hasNext() {       return e.hasMoreElements();   }   public Object next() {       return e.nextElement();   }   public void remove() {   }}</code></pre><p>NewEnumeration 是一个适配器类，通过它实现了从 Iterator 接口到 Enumeration 接口的适配，这样我们就可以使用老版本的代码来使用新的集合对象了。</p><h4 class=pgc-h-arrow-right>2. JDBC也是一种适配器模式</h4><p>Sun公司在1996年公开了Java语言的数据库连接工具JDBC，JDBC使得Java语言程序能够与数据库连接，并使用SQL语言来查询和操作数据。JDBC给出一个客户端通用的抽象接口，每一个具体数据库引擎（如SQL Server、Oracle、MySQL等）的JDBC驱动软件都是一个介于JDBC接口和数据库引擎接口之间的适配器软件。抽象的JDBC接口和各个数据库引擎API之间都需要相应的适配器软件，这就是为各个不同数据库引擎准备的驱动程序。</p><h3 class=pgc-h-arrow-right>模式优缺点</h3><h4 class=pgc-h-arrow-right>优点</h4><ul><li>将目标类和适配者类解耦，而无须修改原有代码。</li><li>对于客户端类来说是透明的，而且提高了适配者的复用性。</li></ul><p><strong>类适配器模式还具有如下优点：</strong></p><p>由于适配器类是适配者类的子类，因此可以在适配器类中置换一些适配者的方法，使得适配器的灵活性更强。</p><p><strong>对象适配器模式还具有如下优点：</strong></p><p>一个对象适配器可以把多个不同的适配者适配到同一个目标，也就是说，同一个适配器可以把适配者类和它的子类都适配到目标接口。</p><h4 class=pgc-h-arrow-right>缺点</h4><p><strong>过多的使用适配器，会让系统非常零乱，不易整体进行把握</strong>。比如，明明看到调用的是A接口，其实内部被适配成了B接口的实现，一个系统如果太多出现这种情况，无异于一场灾难。</p><p><strong>因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。</strong></p><h3 class=pgc-h-arrow-right>总结</h3><p><strong>建议尽量使用对象适配器的实现方式，多用合成/聚合、少用继承</strong>。当然，具体问题具体分析，根据需要来选用实现方式，最适合的才是最好的。</p><h3 class=pgc-h-arrow-right>参考</h3><ul><li>https://www.jianshu.com/p/93821721bf08</li><li>https://github.com/CyC2018/CS-Notes/blob/master/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20%E9%80%82%E9%85%8D%E5%99%A8.md</li><li>《HEAD FIRST 设计模式》</li><li>《剑指offer》</li></ul><h1 class=pgc-h-arrow-right>关注我</h1><p>我是一名后端开发工程师。</p><p>主要关注后端开发，数据安全，爬虫，物联网，边缘计算等方向，欢迎交流。</p><h3 class=pgc-h-arrow-right>各大平台都可以找到我</h3><ul><li><strong>微信公众号：后端技术漫谈</strong></li><li>Github：@qqxx6661</li><li>CSDN：@Rude3Knife</li><li>知乎：@Zhendong</li><li>简书：@蛮三刀把刀</li><li>掘金：@蛮三刀把刀</li></ul><h3 class=pgc-h-arrow-right>原创博客主要内容</h3><ul><li>Java面试知识点复习全手册</li><li>设计模式/数据结构 自习室</li><li>Leetcode/剑指offer 算法题解析</li><li>SpringBoot/SpringCloud菜鸟入门实战系列</li><li>爬虫相关技术文章</li><li>后端开发相关技术文章</li><li>逸闻趣事/好书分享/个人兴趣</li></ul><h3 class=pgc-h-arrow-right>个人公众号：后端技术漫谈</h3><div class=pgc-img><img alt=面试必会的设计模式：适配器模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/94ec3d4efb6245dc8efdc7e626311e13><p class=pgc-img-caption></p></div><p>公众号：后端技术漫谈.jpg</p><p><strong>如果文章对你有帮助，不妨收藏，投币，转发，在看起来~</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'模式','面试','必会'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>