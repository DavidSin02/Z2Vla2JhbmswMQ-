<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>操作系统基础 | 极客快訊</title><meta property="og:title" content="操作系统基础 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/876d7a61014e42409417891da4c2e0a5"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/adc1d50.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/adc1d50.html><meta property="article:published_time" content="2020-10-29T20:59:05+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:05+08:00"><meta name=Keywords content><meta name=description content="操作系统基础"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/adc1d50.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>操作系统基础</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>一、操作系统原理</h1><p>1、进程的基本概念</p><p>1.1 进程是一个程序关于某个数据集的一次运行。进程是运行中的程序，具有动态性和并发性，同时也是系统资源分配、调度和管理的最小单位（现代操作系统引入线程----轻量级进程，它是处理器分配的最小单位）。</p><p>1.2 进程最基本的状态有3种：运行、就绪、阻塞</p><p>Ø 运行态：就是占用了CPU的时候，表示正在运行。</p><p>Ø 就绪态：万事俱备，只欠CPU资源这一“东风”。</p><p>Ø 阻塞态：进入阻塞态通常是因为在等待I/O完成或等待分配到所需资源。</p><p>1.3 在操作系统中，通常使用进程控制块（PCB）来标记进程，因此从某种意义上说，进程是由进程控制块、程序和数据构成。</p><p>例如：在一个单CPU的计算机系统中，采用抢占式优先级的进程调度方案，且所有任务可以并行使用I/O设备。现在3个任务T1、T2和T3，其优先级分别为高、中、高，每个任务都需要先占用CPU10ms，然后再使用I/O设备13ms，最后还需占用CPU5ms。如操作系统的开销不计，三个任务从开始到全部结束的总时间是多少ms？CPU的空闲时间共有多少ms？</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/876d7a61014e42409417891da4c2e0a5><p class=pgc-img-caption></p></div><p>总共需花的时间是58ms，而只有T3在处理I/O设备时CPU才是空闲的，共13ms。</p><p>进程特性：</p><p>Ø 进程是程序关于某个数据集的一次运行，具有动态性和并发性。</p><p>Ø 进程是核心调度及资源分配的最小单位，也是可并行工作的基本单位。</p><p>Ø 进程是由程序、数据和进程控制块（PCB）组成的。</p><p>线程特性：</p><p>Ø 线程是一种轻量级进程，一个进程可以由1个或多个线程组成。</p><p>Ø 线程是处理器分配的最小单位。</p><p>Ø 线程通常用于对称多处理系统（SMP）中。</p><p>例题： <u>进程 </u>是操作系统中可以并行工作的基本单位，也是<u> 核心调试及资源分配 </u>的最小单位，它由<u> 程序、数据和PCB组成</u> ，它与程序的重要区别之一是：<u> 进程有状态，而程序没有状态。</u>在SMP系统中，操作系统还提供了<u> 线程 </u>的机制，它是处理器分配的最小单位。</p><p>2、信号量与P、V操作。</p><p>进程之间经常会存在互斥和同步两种关系统。</p><p>Ø 互斥：都需要共享独占性资源。</p><p>Ø 同步：完成异步的两个进程的协作。</p><p>为了有效处理这两种情况，W.Dijktra在1965年提出信号量和P、V操作概念。</p><p>Ø 信号量：是一种特殊的变量，表现形式是一个整型S和一个队列。</p><p>Ø P操作：也称为down()、wait()操作，使S=S-1，若S&lt;0，进程暂停执行，放入信号量的等待队列。</p><p>Ø V操作：也称为up()、signal()操作，使S=S+1，若S&lt;=0，唤醒等待队列中的一个进程。</p><p>2.1 完成互斥控制。</p><p>也就是保护共享资源，不让多个进程同时访问这个共享资源。换句话说，就是阻止多个进程同时进入访问这些资源的代码段，这个代码段称为临界区（也称为管程），而这种一次仅允许一个进程访问的资源称为临界资源。</p><p>2.2 完成同步控制</p><p>2.3 生产者—消费者问题</p><p>2.4 阅读者—写入者问题</p><p>2.5 理解P、V操作</p><p>例题：某系统的进程状态转换如图。图中1、2、3、4分别表示引起关态转换的不同原因：</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/56476171908a476891ffa6e633107e75><p class=pgc-img-caption></p></div><p>原因1：由于调度程序的调度引起</p><p>原因2：由于时间片用完引起</p><p>原因3：由于I/O请求引起（例如进程执行的P操作，由于申请的资源得不到满足进入阻塞队列）</p><p>原因4：由于I/O完成引起（如某进程执行了V操作将信号量值减1，若信号量的值小于等于0，意味着有等待该资源的进程，将该进程从阻塞队列中唤醒使其进入就绪队列。）</p><p>3、死锁</p><p>3.1 死锁发生的必要条件</p><p>l 互斥条件：即一个资源每次只能被一个进程使用。</p><p>l 保持和等待条件：有一个进程获得了一些资源，但因正在请求其他资源而被阻塞。</p><p>l 不剥夺条件：就是系统不是抢占式的，进程已获得的资源在未使用完之前，不能剥夺，只能在使用完后由自己释放。</p><p>l 环路等待条件：若干个进程形成环型链，每个都占用对方要申请的下一个资源。</p><p>3.2 解决死锁策略</p><p>l 死锁预防：随便破坏导致死锁的任一处必要条件就可以预防死锁。例如：要求用户申请资源时一起申请所需的全部资源，这就是破坏了保持和等待条件；将资源分层，得到上一层资源后，才能够申请下一层资源，它破坏了环路等待条件。预防通常会降低系统的效率。</p><p>l 死锁避免：避免是指在进程在每次申请资源时判断这些操作是否安全，典型算法是“银行家算法”，但这种算法会增加系统的开锁。</p><p>l 死锁检测：前两者是事前措施，而死锁检测则是判断系统是否处于死锁状态，如果是，则执行死锁解除策略。</p><p>l 死锁解除：这是与死锁检测结合使用的，它的使用方式就是剥夺，即将资源强行分配给别的进程。</p><p>4、实存管理</p><p>4.1存储管理的任务是存储空间的分配与回收。在现代操作系统中通常有单一连续分配、固定分区分配、可变分区分配三种：</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a4dd115901674ae6a9fcd3ca78fd4fc6><p class=pgc-img-caption></p></div><p>4.2 较常用的是“可变分区分配”，当一个作业完成时，使用这种方法就会检测释放出来的内存空间是否有相邻的未分配部分（自由区），如果有，就会自动合并自由区。而如果作业申请大于所有的自由区，但自由区总和大于新作业所需的存储区，这时就是进行移动合并，形成更大的存储自由区，这就称为存储拼接。</p><p>4.3 在可变分区分配方式中，当有新作业申请分配内存时，所采用的存储分配算法有四种</p><p>l 最佳适应法：选择等于或最接近于作业需求的内存自由区进行分配。这种方法可以减少碎片，但同时也可能带来更多小得无法再用的碎片。</p><p>l 首次适应法：从主存低地址开始，寻找第一个可用（即大于等于作业需需求的内存）的自由区。这种方法可实现快速分配，缩短查找时间。</p><p>l 最差适应法：选择整个主存中最大的内存自由区。</p><p>l 循环首次适应算法：是首次适应法的一个变种，也就是不再每次都从头开始匹配，而是连续向下匹配。</p><p>5、虚存管理</p><p>5.1因为实存大小总是有限，所以都采用“实存管理”，那么大于总物理内存的作业就无法运行。可行的方法就是用外存来换取内存，这就是虚拟存储系统。它通过将运行进程访问的地址（逻辑地址，虚拟地址）与主存的物理地址（实地址）分开，使提供大于物理地址的逻辑地址空间成为可能。而建立虚拟地址和实地址之间的对应关系、实现转换的工作就称为“虚存管理”。</p><p>5.2 虚内组织：常见的有分段技术、分页技术、段页式技术3种。</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d0689667691c49f894860c3b70a3ee5d><p class=pgc-img-caption></p></div><p>在现行的虚存组织方面，最常见的就是段页式管理。在进行虚实地址转换时，可以采用的公式：</p><p>l （（（基号）+段号）+页号）*2^n+页内偏移</p><p>l （（（x）+s）+p）*2^n+d</p><p>注：n的值为d的总位数，（x）表示x内的内容。</p><p>5.3虚存管理：在虚存的管理中涉及载入（调入）、放置（放入分区）和交换（swapping）等问题。</p><p>调入策略：何时将一页或一段从外存中调入主存。有两种：一为请求调入法，即需要使用时才调入；二为先行调入法，即将预计要使用的页/段先行调入主存。</p><p>放置策略：调入后放在主存的什么位置，这与实存管理基本一致。</p><p>置换策略：由于实际主存小于虚存，因此就可能会发现内存中已满，但需要使用的页不在主存中。这时就需要进行转换，即将一些主存中的页淘汰到外存，腾出空间给要使用的页，这个过程也称为Swapping。它的工作原理与Cache调入相类拟。</p><p>l 最优算法（OPT）：淘汰不用的或最远的将来才用的页。这是一种理想算法，不可能实现，只是用来作为衡量算法效率的参照物。</p><p>l 随机算法（RAND）：随机淘汰。这种算法开销小，但性能不稳定。</p><p>l 先进先出算法（FIFO）：选择最早调入（也是驻留时间最长）的页。</p><p>l 最近最少使用算法（LRU）：选择离当前时刻最近的一段时间内使用得最少的页。</p><p>5.4 工作集</p><p>工作集是进程频繁访问的页面集合。从性能角度出发，该工作集应该都驻留在内存中，否则就会产生过度的页面调度活动，这又称为“颠簸”（抖动）。划分工作集可以按定长时间或定长页面两种方法进行。当颠簸现象发生时，说明系统负荷过大，通常采用处理器均衡调度，淘汰低优先级进程；另一种是控制缺页率，当缺页率达到上限时，增加内存分配量，达到下限时，就减少内存分配量。</p><p>6、设备与文件管理</p><p>6.1 在计算机系统中，除了CPU与主存外，都称为设备。根据数据的组成方式，不同的设备可以分为字符设备（慢速设备）和块设备（快速设备）；根据资源的性质，可以分为独占设备（终端、打印机）、共享设备（磁盘）和虚拟设备（如用磁盘等高速设备虚拟化为多个“高速”的打印等低速设备，该技术也称为spooling技术）。</p><p>6.2计算机系统中的另一类资源是软资源，包括各种系统程序、实用程序、各种应用领域的程序，以及大量的文档材料，这些东西在操作系统中是以文件的形式存储的。与文件相关的概念包括：数据项----数据的基本单位、记录----相关数据项的集合、文件----记录的集合。文件的组织形式称为组织结构，用户可见的称为逻辑结构，在外存中存放的方式称为物理结构。</p><p>6.3 逻辑结构</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/00ef308a9174485f9b837e70b17d0210><p class=pgc-img-caption></p></div><p>6.4 物理结构</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c864da0f18c0410589d6d2e47eb05299><p class=pgc-img-caption></p></div><p>6.5 文件存储设备管理：有效地管理空闲块</p><div class=pgc-img><img alt=操作系统基础 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/772102e3e73346da8d1539740620bc90><p class=pgc-img-caption></p></div><p>6.6文件控制块（FCB）：是存放管理文件所必需的控制信息的数据结构。主要包括：基本信息（文件名、类型、组织）、保护信息（中令、所有者、期限、访问权限）、位置信息（存储位置、文件长度）、使用信息（时间、最后使用者）。</p><p>关于文件的使用、目录结构等都属于较常见的概念。“文件链接”，Windows操作系统中的例子就是“快捷方式”，UNIX系统的实现也与之类似，它只是在当前目录下创建了一个文件项，但没有复制真正的内容，而且当原文件改变时，链接文件也会改变，这是与文件副本的最大区别。</p><p>例题：若文件系统容许不同用户的文件可 以具有相同的文件名，则操作系统应采用<u>（多级目录）</u>来实现。</p><p>解答：文件系统把所有文件的文件目录放在一个特殊的文件中，这个全部由文件目录项组成的文件称为目录文件，这为文件系统管理文件提供了最重要的依据。目前常用的目录结构形式有单级目录和多级目录。由于所有文件都在一个目录文件中，当系统中文件数增多时，查找时间也相应增大，使搜索速度减慢。而且，很难保证用户的文件名不会重复，如果文件重名，对文件的使用和保护会造成很大的影响。因此，单级目录结构只适合于较小的文件系统，多级目录，也称为树形目录结构，在多级目录结构中，将第一级作为系统目录，称为目录树的根节点（或根目录），其他各级中的目录都是这个目录树的分支节点（也称为非终节点），统称为子目录。多级目录很好地解决了文件重名的问题。</p><p>7、作业调度</p><p>作业是系统为完成一个用户的计算任务所做的工作总和。在操作系统进行作业调度时要实现的目标包括响应时间快（分时、实时系统的要求）、周转时间或加权周转时间短（批处理系统的要求，周转时间是作业提交到完成的时间和；加权周转时间是指作业的周转时间与作业运行时间之比）、利用率均衡、吞吐量大、系统反应时间（从作业提交到获得首次服务时间）短。</p><p>调度算法包括</p><p>先来先服务（FCFS）：这种算法根据作业到达的时间顺序对作业进行调度，不利于短作业。</p><p>短作业优先（SJF）：估计运行时间最短的作业优先，不利于长作业</p><p>响应比高者优先（HRN）：使用公式“（估计运行时间+等待时间）/估计运行时间”来计算认优先。</p><p>优先级调度：即根据预设的优先级进行调度。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'系统','基础','操作'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>