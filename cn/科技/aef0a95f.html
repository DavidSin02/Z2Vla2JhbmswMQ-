<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>神作：带宽！ | 极客快訊</title><meta property="og:title" content="神作：带宽！ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/R8VZsWXGbDPXTD"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/aef0a95f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/aef0a95f.html><meta property="article:published_time" content="2020-11-14T21:01:24+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:24+08:00"><meta name=Keywords content><meta name=description content="神作：带宽！"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/aef0a95f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>神作：带宽！</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>来源：EETOP论坛 及 不忘初心的模拟小牛牛公众号</p><p>作者：131v1vv</p><p>相信每一个电子工程师，不管是做芯片、板级还是做应用，都或多或少地接触到“带宽”的概念。尽管如此还是在学习和工作实践中会遇到或多或少的迷惑，这个专题，我试着把和“带宽”相关的内容做个再学习和总结，希望自己能够通过这个内容，温故而知新。</p><p><strong>内容提要</strong></p><p>1、带宽相关概念</p><p>2、特征频率fT</p><p>3、带宽和上升时间乘积</p><p>4、理想方波</p><p>5、开路（短路）时间常数法</p><p>6、级联系统的带宽计算和优值</p><p>7、带宽提升方法</p><p><strong>带宽(上）</strong></p><p><strong>Part1</strong></p><p>提到带宽，通常会有使用到不同的前缀定义，面对这些概念，很多初学者会傻傻分不清。比如-3dB带宽，单位增益带宽，开环带宽，闭环带宽，增益带宽积等。因此在说明时，为避免歧义，一定要描述清楚。当然大部分时候，带宽会特指+/-3dB带宽（简称为3dB带宽，或称之截止频率）。后续本文中如无特殊说明，带宽就特指的3dB带宽。</p><p>我们都知道对于LTI系统，通常会用波特图来表征该系统的频率特性，分为幅度和相位特性，如图1所示，对于经过一个低通系统的输入信号，当输出幅度降为原来的0.707倍（√2/2）时，其信号功率仅剩为原来的一半。而0.707倍的对数座标表示就是常说的-3dB位置，可见这还是从信号功率（或能量）的角度来定义的。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZsWXGbDPXTD><p>图1</p><p>对于放大器来说，有时还会用单位增益带宽（fu）来表示当增益降低到1时的频率。对於单极点系统，fu和GBW相等，但是对于多极点的情况，fu通常是小于GBW。</p><p>在使用时，经常容易混淆的两个概念其实就是单位增益和-3dB带宽。是和系统的应用方式相关的，有个经验准则，就是开环看3dB带宽，闭环看单位增益带宽。</p><p><strong>Part2</strong></p><p>在表征器件高频特性时，经常会使用特征频率fT(transit frequency)这个概念，通常定义为当器件的输出短路小信号电流增益下降为1时的频率。以MOS器件为例，其包含了Cgs、Cgd、Cdb、Cds等诸多寄生电容。其小信号模型如图2所示。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZsWm4EGM62c><p>图2</p><p>可以计算其电流增益的表达式，并且得到特征频率的影响因素如图3。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZsWyHQ55p8b><p>图3</p><p>当电流增益降为1时，对应的特征角频率约等于gm/Cgs，可以进一步看到通过提高过驱动电压，降低沟道长度和使用更高迁移率的工艺得到更高的特征频率，从而实现更高速的应用。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZsXA7VTTS0b><p>图4</p><p>当然这和高增益设计时对过驱动电压和沟道的要求是相反的，也就是高速和高增益设计存在的矛盾。因此在实现高增益宽带放大器时，我们会采用级联方式。</p><p><strong>Part3</strong></p><p>带宽毕竟是个频域概念，为了方便，希望从时域的角度，评估系统的带宽。我们经常会用到如图5的经验公式，该公式阐述了系统的-3dB带宽对阶跃响应的上升时间的影响和相互关系。上升时间tr定义为阶跃输出信号经过10%~90%最大幅度所需的时间。在大多数情况下，可通过这种方式方便地评估或验证系统的带宽。</p><p>这个结论可以简单地从一阶系统的阶跃响应推导得到，如图5所示。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZsXP8McMUYi><p>图5</p><p>那这个经验公式是否适用于二阶系统的情况那？</p><p>这可以通过二阶系统的阶跃响应和带宽计算得到。关于二阶系统的阶跃响应形式可参见前文温故而知新之二阶系统的描述。这里就不给计算过程了（欠阻尼情况下，需要解超越方程，只能得到数值解）。直接上结果如图6所示。</p><p>容易观察到随着阻尼系数下降，乘积会下降，存在误差。但当阻尼系数大于0.5时，该经验公式最大误差约为5%。注意，当阻尼系数小于1时，上升时间tr定为稳态幅值的10%于首次到达稳态90%的时间差。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZvxa7mNVoy3><p>图6</p><p><strong>Part4</strong></p><p>下边回顾一下方波信号的特性，如图7所示。理想方波周期假定为1，占空比为50%，峰峰值为A。其离散频谱仅包含DC量和谐波成分，偶次谐波幅度都为0。奇数谐波（n=1、3、5...）的幅度可以表示为2A/(n*pi)。各谐波的初始相位相等。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZvxkB4tq4P5><p>图7</p><p>还能看到一个有意思的现象，就是所有奇次谐波在t=0处的信号有着最大的信号摆率（直觉上可能错误的理解，高频谐波的信号变化更快，摆率更大），且都相同。这点可以在动图8中观察到。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZvy45tMozf2><p>图8</p><p>将图8中各谐波成分叠加，叠加后的波形会逼近理想方波如图9所示。我们知道理想方波的上升时间为0，谐波成分的叠加过程中，其上升时间也在逐渐减小。但现实中大部分的系统都表现出了低通特性。也就是带宽外的频率成分被严重衰减，也可以理解为图8仅有限n次谐波分量的叠加和。表现在时域就是信号的“沿”变“缓”，也就是上升时间会增加。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZvykINB2xSm><p>图9</p><p>那么就有一个问题，如果我们想要发送一个Clock Pattern的信号，驱动器（Driver）的带宽需要设置在哪个位置？</p><p>如图10所示，可以看到，根据不同的上升时间要求，可以估算出驱动器的带宽的要求。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/R8VZvzJ5E82QAl><p>图10</p><p>同样我们在使用示波器测量信号时，一个重要的问题就是到底该选择多大带宽？对于传统模拟示波器，常说的被测信号最大大频率3倍~5倍带宽，也基本上就是上述求驱动器带宽相同的思路。</p><p>现代高速数字示波器是个系统工程，能够做到高带宽，离不开高速ADC，而这些可能会用到砷化镓或磷化铟工艺。并且在过渡带能够做到更快的频率滚降，越来越接近理想矩形滤波器，因此带宽和测量信号的比例关系也会下降。</p><p><strong>带宽(下）</strong></p><p><strong>Part5</strong></p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZz3A6fvAapY><p>开（短）路时间常数的方法，自从学完专业课后就几乎没用过。一来是两种方法概念和处理方式的对应关系容易混淆，过不了多久就忘了。二来里边涉及小信号模型的一堆的计算，想想就头大。对于我这种患有“懒癌”的手残党，真的是，方法再好也会束之高阁，碰都不想碰。正因为如此，就成了追（被）求（逼）上（无）进（奈）的好学生的心中的一块病。所以还是趁着这次总结的机会，回过头来再仔细的学习思考下。不敢保证理解的完全正确，算是抛砖引玉吧，希望有理解比较透彻的读者现身说法，多谢啦。</p><p>尽管开（短）路时间常数法【Open (Short) Circuit Time Constant Method】只是一种近似估算高低频-3dB 带宽的方法，计算的结果可能会有比较大的误差，但其通过时间常数τ，非常直观的给出了电路节点中带宽的限制因素，对于电路设计者能够定性地提供了优化的思路和方向。正因为如此，我们会忽略它在定量估计上的局限。显然，各种各样的仿真器却给不了宝贵的指导意见。</p><p>如图1，从用途上，两种方法分别用于计算不同的-3dB带宽点。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZz3W10SJYWn><p>图1</p><p>为了从根源上解除我的疑惑，我特地拜读了Gray & Searle于1969年出版的老古董教材《ELECTRONIC PRINCIPLES Physics, Models, and Circuits》p531~p535，现将其推导思路外加我的一些理解描述如下，感兴趣的读者也可以自己去翻看原书。</p><p>对于如图2的不含储能元件的线性双端口网络（内部如包含独立源，需置0）。可以用Y参数二端口网络表示。可以得到不同端口的开（短）路电阻的定义式。这也是我们在使用这两种方式计算时间常数时，电阻计算，需对其他电容的处理方式的源头。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZz3k4kgoxW><p>图2</p><p>考虑端口电容时，其行列式Δy等于零（书中对这点的解释我还没有完全理解），对应的不同阶系数有图3所示的关系。重点关注一次项常数项系数比，次高阶和最高阶项系数比与定义的开（短）路时间常数的关系。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8VZz3y2dGAgEy><p>图3</p><p>下面主要考虑高低频-3dB带宽的估算值ωh是怎样联系起来的，如图4。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8VZz4BEPS8GiA><p>图4</p><p>对于这两种方法的计算可以参考gray和Lee的教材中的例子，这里就不列举了。最后给出个简单的对比结果，如图5。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va2KCDDuqKmY><p>图5</p><p>最后需要纠正的一个概念误区就是，“计算的的每一个时间常数都会对应一个实际极点”，实际上在推导中我们也看到了，这里只有时间常数的和倒数或者倒数和与-3dB带宽比较接近的联系，并没有必须和实际极点对应的关系。</p><p><strong>Part6</strong></p><p>先来考虑一个问题，两个单极点</p><p>系统级联后的-3dB带宽和两个极点的位置关系是什么样的？</p><p>如图6所示，假设第一级的主极点为f1，第二级的主极点频率为kf1，假设k大于等于1。级联后整体系统的-3dB带宽频率可以根据公式计算出，如图7所示。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va2Mn4vaXijg><p>图6</p><p>当k=1时，相当于相同带宽的两级级联，总带宽约为原先的64.36%；而如果级联两级中，次极点频率是主极点频率的k=10倍时，级联总带宽是主极点的99.02%，也就是次极点对级联系统的带宽影响可以忽略不计。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va2My4ORhifw><p>图7</p><p>在Lee的《CMOS射频集成电路设计》的9.7章，看到了，级联系统带宽最大化时，单级最优增益为e^0.5＝1.64，但很多时候我们会更加关注功耗表现，那么最低功耗的实现级数是多少那？</p><p>比如要设计一个驱动最大100fF（总负载电容）的高速放大器，如图8所示结构。直流增益为40dB，-3dB带宽为10GHz。</p><p>首先考虑如果用单级来实现，即N=1。则根据增益带宽积和负载电容，可以得到输入对管的跨导Gm=2pi*Ctot*GBW=628mS。这里假设对管工作在功耗和性能的均衡点（Gm/id≈10），可以估算总功耗Itot约为2*Gm/10=125.6mA。为满足直流增益Adc，负载电阻RL值约为159 Ohms。</p><p>可以看到，需要125.6mA的功耗，输入对管的器件尺寸会贡献不小的负载电容，导致有效驱动的下级电容负载有限。这会是最优的结果吗？那我们考虑下使用多级级联实现的情况。这里为方便计算，假设单级的负载电容和最后负载相同都为Ctot，这样每一级的传输函数是相同的。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va2NAE61gKUx><p>图8</p><p>考虑如果用2级级联实现，单级增益只需20dB，-3dB带宽只需15.5GHz（15.5*0.64≈10）。同样可以根据GBW得到跨导Gm=98mS。单级尾电流Itail=19.6mA。两级总功耗为39.1mA。比用单级实现总功耗降低了约70%。</p><p>同样，如图9所示，当级数N增加时，存在优值3使总体功耗最小。设计中N取2~4都是比较合适的。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va2NM72Ixgow><p>图9</p><p>应用Lee关于级联带宽最大化的结论，单级最优增益1.64倍对应需要9.2级，按照9级算。每级带宽约为60GHz，GBW约为98GHz，总电流约为12mA总功耗约为108mA。从总功耗角度看，级数为9并非优值。</p><p><strong>Part7</strong></p><p>在模拟和射频中，对于高频信号的处理，总会希望放大电路能够有足够高的带宽。其中最常用到的方法就是通过引入电感并利用LC的谐振。</p><p>先看一个简单的基于电感并联峰化（shunt peaking）技术的共源放大电路，如图10，里边定义了RC带宽ω0，参数m，归一化频率x=ω/ω0。</p><p>直观来看，在频率ω0</p><p>处，负载电容C和R阻抗相等，并联总阻抗为0.707R。当增加电感L后，电感之路阻抗大于等于R（意味着存在增益峰值），因此需要在高于频率ω0</p><p>处容抗小于R，才能保证并联阻抗总阻抗为0.707R。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va49jGRMwQW5><p>图10</p><p>当电感值为0时，m→∞，近似为RC负载；当电感值L=∞，m→0，近似为LC负载。图11所示的并联谐振在不同m取值处的幅频参数曲面及幅度为0.707平面。x轴为归一化对数座标ω/ω0，y轴为线性座标参数m，z轴为归一化线性座标幅度Mag。图中红色的等高线分别为1和0.707。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va4A4FbRdYB4><p>图11</p><p>可以看到，当m很小时，频域幅度会有很高的尖峰，且带宽趋近于最小值1.414倍。尽管对于大多数放大器不希望出现频域增益的过冲，但在一些场合比如均衡信道损失的线性均衡器，就会利用到谐振峰值前一段的增益提升效果。</p><p>随着m增加，带宽会先增大后减小并稳定到ω0。不同的电感L取值，可以得到最大带宽，最佳群延时，最大平坦带宽，实际应用中根据需要最大可以达到1.85倍的带宽拓展效果。</p><p>同样考虑图12中的串联谐振。同样对于定义的参数m取不同值有图13的幅频参数曲面。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va4AcDNrik4P><p>图12</p><p>对串联谐振，当m从0增大到∞过程中，带宽从0增大到1.41倍最大值最终稳定在ω0处。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8Va4Ay92BeTIL><p>图13</p><p>最后再考虑稍微复杂的三谐振（Tripple Resonance）结构，如图14。这里定义了输出节点电容比例参数p，电感比例k。可以看到传函包含了1个零点，4个极点。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R8Va4BTHa4wQo><p>图14</p><p>图15给出了固定参数p=0.5（输出节点和电感tap节点电容相等），k=1（并联和串联电感相等）条件下的幅频参数曲面。</p><p>可以看到m存在一个优值区间，能够使带宽达到3~5倍。带宽拓展效果比较明显。</p><img alt=神作：带宽！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/R8Va7BECPpYocW><p>图15</p><p>当然实际的金属线圈电感的Q值有限，可能会导致实际带宽拓展效果比上述模型的理论值要小。需要在实际应用中对电感进行更详细的建模进行仿真验证。</p><p>除了上面的模型，还有T-coil结构的模型，使用有源电感和零点补偿的方式拓展带宽，限于篇幅，有机会再详细分析。</p><p>希望通过这两期【带宽（上,下）】内容，大家能够增强大家对与带宽的相关关的概念的有更多理解和收获。欢迎大家前往论坛讨论：http://bbs.eetop.cn/thread-840733-1-1.html</p><p><strong>点击阅读原文查看论坛原帖</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'神作'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>