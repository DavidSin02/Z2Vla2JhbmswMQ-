<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>D类放大器pop-click噪声抑制和饱和失真补偿技术 | 极客快訊</title><meta property="og:title" content="D类放大器pop-click噪声抑制和饱和失真补偿技术 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/15266322067735e6fc1c902"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/af8423e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/af8423e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/af8423e.html><meta property="article:published_time" content="2020-10-29T21:08:40+08:00"><meta property="article:modified_time" content="2020-10-29T21:08:40+08:00"><meta name=Keywords content><meta name=description content="D类放大器pop-click噪声抑制和饱和失真补偿技术"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/af8423e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>D类放大器pop-click噪声抑制和饱和失真补偿技术</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>0 引言</strong></p><p>在移动设备应用中，D类放大器与电池输出直接连接成为一种普遍的需求<sup>[1-2]</sup>。尽管已公开报道<sup>[1-2]</sup>无滤波D类放大器在效率以及动态范围方面都具有良好的特性，但爆裂和咔嚓（pop-click）噪声一直限制无滤波D类放大器在移动设备中的实际应用<sup>[3]</sup>。因此，与电池直接连接无滤波D类放大器设计中，抑制pop-click噪声一直是设计难点。其次，应用于移动设备的D类功率放大器，系统结构常采用闭环结构以提高放大器性能，放大器的输出（V<sub>out</sub>）被反馈回来与输入音频信号进行叠加，形成闭环结构，反馈系统本身既能提高对电源和衬底噪声的抑制能力，又能降低放大器的线性失真。然而，由于输入信号与反馈信号通过积分器进行叠加，当输入信号幅度较大时，积分器输出容易饱和，而调制波形V<sub>tri</sub>一般不能全电压范围调制，导致脉冲调制器调制失效，脉冲调制器输出多个调制周期恒为高电平或低电平。结果，D类放大器的功率开关经历多个周期导通或关断，输出波形产生严重饱和失真，且极易造成功率器件因长时间导通而导致热损坏。</p><p>根据上述设计需求，本文给出基于移动设备应用，在D类放大器设计中，提出能够抑制pop-click噪声的方法，以及减小积分器饱和失真的补偿电路技术。文章首先给出pop-click噪声产生的机理和抑制pop-click噪声的具体电路实现方式，以及降低积分器饱和失真的具体电路实现方法，然后给出放大器的测试结果，最后进行总结。</p><p>本设计提出的D类放大器系统框图如图1所示。主要由pop-click噪声抑制电路、脉冲宽度调制（PWM）补偿电路、前级放大器、积分器、振荡器和功率级等组成。本文主要就pop-click噪声抑制电路和PWM补偿电路进行详细的讨论。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15266322067735e6fc1c902><p><strong>1.1 pop-click噪声抑制电路</strong></p><p>pop-click噪声的最大电平是音频放大器性能重要指标，在放大器电源上电或去电时容易产生此噪声，而人耳刚好对该噪声敏感，尽可能减小或抑制放大器pop-click噪声是D类放大器设计的关键。当放大器上电或去电时，D类放大器的pop-click噪声产生主要来自两个方面<sup>[3]</sup>：一是放大器的直流失调，另一个是PWM脉冲的突然开启和关闭。放大器的直流失调电压在开机时突然应用到放大器的输出或者在关机时突然消失，PWM脉冲的突然产生或突然消失，在D类放大器的输出端产生一个过渡阶段，引起的pop-click噪声电平开始很大，然后由于负反馈环路的抑制作用逐渐消失，这个过程尽管很短，但人耳仍然能够听到。为避免人耳听到这些噪声，研究人员提供多种有效的措施。从公开的报道来看，有以下几种技术：文献[4]通过在音频放大器的电源电压管脚放置（RC）滤波电路或者采用模拟开关把直流电源接入放大器电源管脚，该方法由于不易集成，且会造成系统功耗和成本的额外消耗，应用场合受限；文献[5]给出单端输入音频信号放大器的抑制pop-click噪声的方法，该方法通过快速调整放大器输入级共模电平以及在放大器的调制级引入虚拟开关为建立偏置和反馈电压/电流(BFVC)提供开关信号。文献[3]通过引入可编程辅助驱动器反馈回路来抑制pop-click噪声，以及调整驱动器的驱动能力来开启放大器的功率开关。上述两种利用反馈技术抑制pop-click噪声，由于反馈网络存在环路调整过程，如果环路响应时间慢，对抑制pop-click噪声效果较差，而环路响应太快，则易引起放大器环路不稳定；因此为抑制pop-click噪声，在放大器中引入反馈网络会造成电路设计复杂以及功耗的增加，因此并不实用。综合上述考虑，本文将给出一种简单而实用的可单片集成抑制pop-click噪声方式。</p><p>图1中，为消除D类放大器的前级放大器输入失调电压引起的pop-click噪声，内部集成时序逻辑控制电路，工作过程如下：第一阶段，电路上电过程中，如果电源电压低于阈值电压V<sub>ref1</sub>，芯片处于关断阶段，此时放大器的前置放大器、积分器、PWM调制器、功率开关均处于关闭阶段，放大器无输出。第二阶段：外接耦合电容快速充电过程，当电源电压高于阈值电压V<sub>ref1</sub>，欠压锁定(UVLO)输出高电平，开启前置放大器中内部偏置电路，偏置电路快速给外接耦合电容充电，耦合电容上电压快速达到共模电平(本设计为V<sub>DD</sub>/2)，为避免在给外接电容充电过程中，放大器输出端产生失调信号，开关S<sub>1</sub>，S<sub>2</sub>处于闭合状态，前置放大器差分输入为0，同时放大器的反馈电阻R<sub>3</sub>、R<sub>4</sub>短路，因此，全差分放大器(FDA)的差分输出为零，电路如图2所示。第三阶段：耦合电容上共模电压矫正阶段，UVLO信号经过延迟时间(TD1)，图2中，开关S<sub>1</sub>关闭，S<sub>2</sub>保持开启状态，功率晶体管处于关闭输出高阻状态(扬声器处于“安静”状态)。此时，音频输入信号进入放大器FDA1的输入端，消除前置放大器输入直流失调电压，抑制PWM比较器产生咔嚓噪声脉冲。第四阶段：开启功率级开关阶段，S<sub>1</sub>关闭，S<sub>2</sub>关闭，前置放大器正常放大输入音频信号，前置放大器的输出信号进入到积分器和PWM调制器进行调制。最后，S<sub>2</sub>通过时间延迟TD3后CTL_DRI变为高电平，开启PWM调制器以及功率开关，使输出PWM波通过功率开关供给负载，整个芯片正常工作。该方法无反馈回路，故不会影响放大器环路的稳定性。同理，在放大器电源电压去电阶段，芯片内部通过检测电源电压，当电源电压低于阈值V<sub>ref2</sub>时，欠压保护电路产生关断信号，首先经过延迟时间TD4关闭前置放大器和积分器电路，积分器的输出电压逐渐减小（积分电容放电过程），PWM调制的输出脉冲逐渐变窄，扬声器输出声音逐渐消失，避免整个芯片瞬间关断，扬声器产生爆裂噪声，图3给出本设计时序图。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/152663220649130a9de4935><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15266322066526466d6a532><p>图4给出抑制pop-click噪声电路框图，由UVLO电路模块和数字时间延迟单元构成。其中UVLO电路模块如图5(a)所示，由电阻分压电路，失调比较器，反相器链构成，其中电阻分压电路采样电源电压，失调比较器产生迟滞阈值电压，图5(b)给出失调比较器电路图，失调电压由CTL和分别控制晶体管M5和M6使差分输入对M1和M2不对称生成，其失调电压由电阻ROS大小决定。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/152663220687156204638ab><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15266322077112e882b5e2f><p><strong>1.2 PWM补偿电路</strong></p><p>在反馈结构D类功率放大器中，积分器用于对输入音频信号和反馈信号进行求和，如图1所示，当输入音频信号幅度过大，积分器容易出现饱和，在多个时钟周期内，脉冲宽度调制器输出恒为高电平或低电平。为防止积分器输出饱和，而导致功率开关MP1和MP2在多个开关周期常开或者常关，在脉冲调制器的输出引入PWM补偿电路，设置PWM脉冲的最大占空比和最小占空比，保证在一个时钟周期以内，输出功率器件开关一次，达到保护功率器件的目的，同时尽可能减小输出波形饱和失真。PWM补偿电路如图6所示，由补偿时钟产生电路和PWM矫正逻辑电路构成。两路补偿时钟(V<sub>tri_PH1</sub>和V<sub>tri_PH2</sub>)由图7中电路产生。正常情况下，V<sub>PWM</sub>占空比介于5%与95%之间，此时，V<sub>PWM_COR</sub>=V<sub>PWM</sub>，当 V<sub>PWM</sub>占空比小于5%，V<sub>PWM_COR</sub>=V<sub>tri_PH1</sub>，而当VPWM占空比大于95%，V<sub>PWM_COR</sub>=V<sub>tri_PH2</sub>。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15266322078783ab106a747><p>图7给出了三角波生成器电路结构<sup>[6]</sup>，电路由两个比较器、RS触发器、充电放电路径以及电阻分压构成。该电路提供D类放大器的调制波形，同时产生用于PWM补偿电路的补偿信号V<sub>tri_PH1</sub>以及V<sub>tri_PH2</sub>。其工作原理如下：为了能够获得三角波V<sub>tri</sub>，采用恒定电流源I<sub>REF</sub>给电容C<sub>TRI</sub>充放电的模式，图7中，第一比较器(COMP1)对输入电压V<sub>tri</sub>与电压V<sub>TH1</sub>进行比较，当V<sub>tri</sub>>V<sub>TH1</sub>，比较器输出为高电平，图中RS锁存器的输出被置位为逻辑高电平，晶体管M1关闭，同时M2开启，电容C<sub>TRI</sub>开始放电，当V<sub>tri</sub>&lt;V<sub>TH2</sub>，第二比较器COMP2输出为高电平，RS锁存器输出被复位为逻辑低电平，晶体管M2关闭，M1开启，电容C<sub>TRI</sub>开始冲电，由于I<sub>REF</sub>为恒电流源，故C<sub>TRI</sub>上的电压为线性度良好的三角波，有利于减小放大器的谐波失真。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1526632207446550244daa6><p>本设计中，V<sub>TH1</sub>和V<sub>TH2</sub>由电源电压V<sub>DD</sub>采用比例电阻分压获得，可得到振荡器输出频率与电源电压无关<sup>[6]</sup>。振荡器输出波形如图8所示。在本设计，典型输入电压为3.6 V时，三角波频率为300 kHz，V<sub>tri_PH1</sub>和V<sub>tri_PH2</sub>占空比设计均为95%。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15266322077588f67aa71d5><p><strong>2 测试结果</strong></p><p>基于CSMC 0.35 μm CMOS工艺设计D类音频功率放大器，其版图照片如图9所示，单通道芯片面积为0.85 mm<sup>2</sup>。本设计中，基于锂电池移动设备应用，电源电压范围为2.5～4.2 V，开关频率为300 kHz。图10给出了电源电压分别为2.5 V、3.6 V、4.2 V，负载电阻为8 Ω测试条件下，THD+N与输出功率曲线。由图中可得，当电源电压为3.6 V时，输出功率约400 mW时，放大器的THD+N最小可到0.025%；表1给出本设计D类放大器部分测试结果。</p><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1526632207595055b721141><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15266322083744f8b39b6e1><img alt=D类放大器pop-click噪声抑制和饱和失真补偿技术 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1526632208445dda60f6fc2><p><strong>3 结论</strong></p><p>本文基于移动设备应用提出一种抑制pop-click噪声电路技术，在电源上电和去电时通过时序电路控制放大器内部电路顺序开启和关断，有效地减小pop-click噪声幅度，噪声幅度小于2.0 mV。通过对脉冲宽度调制信号进行脉冲补偿，消除积分器饱和而造成功率开关晶体管损坏的风险，同时减小当输入信号幅度太大引起的饱和失真。这些技术的引入，并没有牺牲放大器的效率、THD+N以及输出功率等性能。</p><p><strong>参考文献</strong></p><p>[1] BERKHOUT M，DOOPER L.Class-D audio amplifiers in mobile applications[J].IEEE Transactions on Circuits & Systems I Regular paper，2010，57(5)：992-1002.</p><p>[2] CHOI Y，TAK W，YOON Y，et al.A 0.018% THD+N，88 dB PSRR PWM Class-D amplifier for direct battery hookup[J].IEEE Journal of Solid-State Circuits，2012，47(2)：454-463.</p><p>[3] JIANG X，SONG J，WANG M，et al.Integrated pop-click noise suppression，EMI reduction，and short-circuit detection for Class-D audio amplifiers[J].IEEE Journal of Solid-State Circuits，2013，48(4)：1099-1108.</p><p>[4] Tim Lok.音频Click和Pop噪声的特性和消除技巧[J].工业和信息化教育，2010(8)：61-65.</p><p>[5] Wang Haishi，Zhang Bo，Sun Jiang.Ways to suppress click and pop for class D amplifiers[J].Journal of Semiconductors，2012，33(8)：1-5.</p><p>[6] ZHENG H，ZHU Z，MA R.A 0.02% THD and 80 dB PSRR filterless class D amplifier with direct lithium battery hookup in mobile application[J].Journal of Semiconductors，2017，38(7)：56-63.</p><p><strong>作者信息:</strong></p><p>郑 浩，刘延飞，王秋妍，杨晶晶，杨东东</p><p>（火箭军工程大学，陕西 西安710025）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'pop','click','噪声'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>