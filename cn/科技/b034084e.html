<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>PHP进阶教程-设计模式之桥接模式 | 极客快訊</title><meta property="og:title" content="PHP进阶教程-设计模式之桥接模式 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b034084e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b034084e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b034084e.html><meta property="article:published_time" content="2020-11-14T21:07:27+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:27+08:00"><meta name=Keywords content><meta name=description content="PHP进阶教程-设计模式之桥接模式"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/b034084e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>PHP进阶教程-设计模式之桥接模式</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>​桥接（Bridge）是用于把抽象化与实现化解耦，使得二者可以独立变化。这种类型的设计模式属于结构型模式，它通过提供抽象化和实现化之间的桥接结构，来实现二者的解耦。</p><p>这种模式涉及到一个作为桥接的接口，使得实体类的功能独立于接口实现类。这两种类型的类可被结构化改变而互不影响。</p><p><strong>意图</strong></p><p>可以将抽象化部分与实现化部分分开，取消二者的继承关系，改用组合关系。</p><p><strong>解决问题</strong></p><p>通过组合的方式解决多继承违背类的单一原则问题。</p><p><strong>UML图</strong></p><div class=pgc-img><img alt=PHP进阶教程-设计模式之桥接模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89><p class=pgc-img-caption></p></div><p><strong>该模式中包含的角色及其职责</strong></p><p><strong>抽象化（Abstraction）</strong></p><p>定义抽象类，幷包含一个对实现化对象的引用，构造方法规定子类需要传入一个实现对象（Implementor）。该类通常定义为一个抽象类。</p><p><strong>扩展抽象化（RefinedAbstraction）</strong></p><p>是抽象化角色（Abstraction）的子类，实现并完善父类中的业务方法，并通过组合关系调用实现化角色中的业务方法。</p><p><strong>实现化（Implementor）</strong></p><p>定义实现化角色的接口，供扩展抽象化角色调用，定义实现维度的基本操作，提供给抽象化（Abstraction）使用。该类通常定义为一个接口或者抽象类。</p><p><strong>具体实现化（ConcreteImplementor）</strong></p><p>实现化角色接口（Implementor）的具体实现。</p><p>在本例子中：</p><p><br></p><div class=pgc-img><img alt=PHP进阶教程-设计模式之桥接模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/edcc795c44314547823bd94de0320954><p class=pgc-img-caption></p></div><p><strong>优缺点</strong></p><p><strong>优点</strong></p><ul><li>分离抽象接口及其实现部分。</li><li>桥接模式有时类似于多继承方案，但是多继承方案违背了类的单一职责原则（即一个类只有一个变化的原因），复用性比较差，而且多继承结构中类的个数非常庞大，桥接模式是比多继承方案更好的解决方法。</li><li>桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有系统。</li><li>实现细节对客户透明，可以对用户隐藏实现细节。</li></ul><p><strong>缺点</strong></p><ul><li>桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进</li></ul><h3 class=pgc-h-arrow-right>应用场景</h3><ul><li>如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。</li><li>一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。</li><li>虽然在系统中使用继承是没有问题的，但是由于抽象化角色和具体化角色需要独立变化，设计要求需要独立管理这两者。</li><li>对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。</li><li>接口或抽象类不稳定的场景</li></ul><h2 class=pgc-h-arrow-right>案例背景</h2><p>举一个例子：一家汽车品牌的车通常都是会有多款车型和多款颜色，这里车型和颜色就是两个不同的具体实现，例如宝马3系可以有蓝色和红色，宝马5系一样可以有蓝色跟红色。当然实现方法可以有多种。</p><ul><li>每一种车型针对不同的颜色创建不同的类，如 BMW3Read 和 BMW3Blue；BMW5Read 和 BMW5Blue。如果一天添加一个7系呢？BMW7Read 和 BMW7Blue，还是要这样写。</li><li>根据车型和颜色组合实现，如：BMW3($red) 和 BMW3($blue)；BMW5($red) 和 BMW5($blue)。添加7系也只需要 BMW7($red) 和 BMW7($blue) 就好了。</li></ul><p>两种方式可以进行对比一下，第一种方式每款车型的颜色都需要具体的一个类实现，车型里面的内容无法复用，BMW3Read和BMW3Blue都需要重写一遍。细心的同学已经看到了可以通过继承实现对吧。</p><p>把公共的方法抽离出来放到 BMW3 这个类中，然后 BMW3Read 和 BMW3Blue 都去继承，这样的确可以实现。但是PHP和JAVA等语言都是单继承的，如果需要继承 BMW 这个品牌呢？怎么办？</p><p>这时候我们可以采用第二种方式来实现，通过组合的方式，这样就可以用解决这个单继承的问题了。</p><p><strong>示例代码</strong></p><p>CarAbstraction.php 汽车抽象，抽象化（Abstraction）</p><pre><code>interface CarAbstraction{    public function __construct(ColorImplementor $implementor);    public function getCar();}</code></pre><p>ColorImplementor.php 颜色实现，实现化（Implementor）</p><pre><code>interface ColorImplementor{    public function getColor();}</code></pre><p>BMW3RefinedAbstraction.php 3系汽车具体实现，扩展抽象化（RefinedAbstraction）</p><pre><code>class BMW3RefinedAbstraction implements CarAbstraction{    private $implementor;    public function __construct(ColorImplementor $implementor){        $this-&gt;implementor = $implementor;    }    public function getCar(){        return sprintf("%s----%s",$this-&gt;implementor-&gt;getColor(),"宝马3系");    }}</code></pre><p>BMW5RefinedAbstraction.php 5系汽车具体实现，扩展抽象（RefinedAbstraction）</p><pre><code>class BMW5RefinedAbstraction implements CarAbstraction{    private $implementor;    public function __construct(ColorImplementor $implementor){        $this-&gt;implementor = $implementor;    }    public function getCar(){        return sprintf("%s----%s",$this-&gt;implementor-&gt;getColor(),"宝马5系");    }}</code></pre><p>RedConcreteImplementor.php 红色实现，具体实现化（ConcreteImplementor）</p><pre><code>class RedConcreteImplementor implements ColorImplementor{    public function getColor(){        return "红色";    }}</code></pre><p>BlueConcreteImplementor.php 蓝色实现，具体实现化（ConcreteImplementor）</p><pre><code>class BlueConcreteImplementor implements ColorImplementor{    public function getColor(){        return "蓝色";    }}</code></pre><p>调用代码：</p><pre><code>$red = new RedConcreteImplementor();//创建红色$blue = new BlueConcreteImplementor();//创建蓝色$bmw3Red = new BMW3RefinedAbstraction($red);//创建红色宝马3系$bmw3Blue = new BMW3RefinedAbstraction($blue);//创建蓝色宝马3系$bmw5Red = new BMW5RefinedAbstraction($red);//创建红色宝马5系$bmw5Blue = new BMW5RefinedAbstraction($blue);//创建蓝色宝马5系echo $bmw3Red-&gt;getCar() . "\n";echo $bmw3Blue-&gt;getCar() . "\n";echo $bmw5Red-&gt;getCar() . "\n";echo $bmw5Blue-&gt;getCar() . "\n";</code></pre><p>输出结果：</p><pre><code>红色----宝马3系蓝色----宝马3系红色----宝马5系蓝色----宝马5系</code></pre><p>更多文章关注微信公众号：IT不是挨踢</p><p><br></p><div class=pgc-img><img alt=PHP进阶教程-设计模式之桥接模式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/61cadd00ba5c40838d2af062d6d4ddc2><p class=pgc-img-caption></p></div><p>如果觉得文章还不错，请把文章分享给更多的人学习，在文章中发现有误的地方也希望各位指出更正。现有误的地方也希望各位指出更正。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'模式','PHP','进阶'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/45c31c17.html alt=PHP进阶教程-设计模式之建造者模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ef25f91086df41eca76e35ff3434b003 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/45c31c17.html title=PHP进阶教程-设计模式之建造者模式>PHP进阶教程-设计模式之建造者模式</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/a89954da.html alt=PHP进阶教程-设计模式之组合模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6f2acee37d624649ac7a592bfe5b29af style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/a89954da.html title=PHP进阶教程-设计模式之组合模式>PHP进阶教程-设计模式之组合模式</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/baec5ab6.html alt=PHP进阶教程-设计模式之装饰器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8cbbfcfedd544572a62adc6df84d2e60 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/baec5ab6.html title=PHP进阶教程-设计模式之装饰器模式>PHP进阶教程-设计模式之装饰器模式</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/a0586cb.html alt=PHP进阶教程-设计模式之适配器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7c5019f7addc404d8c07f18f7dda0feb style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/a0586cb.html title=PHP进阶教程-设计模式之适配器模式>PHP进阶教程-设计模式之适配器模式</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>