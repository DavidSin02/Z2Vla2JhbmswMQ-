<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>关于存储技术的最强入门科普 | 极客快訊</title><meta property="og:title" content="关于存储技术的最强入门科普 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a13135f2b00e4c3c9c36628210a9116e"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b495e435.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b495e435.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b495e435.html><meta property="article:published_time" content="2020-11-14T21:04:26+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:26+08:00"><meta name=Keywords content><meta name=description content="关于存储技术的最强入门科普"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/b495e435.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>关于存储技术的最强入门科普</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>说到“存储”，大家会想到什么？</p><p><br></p><p>是这个？</p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a13135f2b00e4c3c9c36628210a9116e><p class=pgc-img-caption></p></div><p>还是这个？</p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/059b1e2e35714a35881e0463ad183e8a><p class=pgc-img-caption></p></div><p>又或者是这个？</p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/023f810931a44fb681ad643d978670a1><p class=pgc-img-caption></p></div><p>哈哈，没错，我们现在处于信息时代，每天都在和电脑、手机打交道。我们的工作和生活，已经完全离不开视频、音乐、图片、文本、表格这样的数据文件。</p><p><br></p><p>而所有这些数据文件，都需要通过电子设备进行保存，这就是数据存储，简称存储。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2786978467ae46efbfeb0826c3ce8a52><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right><strong>▉ 存储的基本载体——硬盘</strong></h1><p><br></p><p>存储的载体有很多，例如各种规格的硬盘、光盘、软盘、U盘和磁带等。</p><p><br></p><p>对于普通用户来说，最常用的存储设备，就是硬盘。</p><p><br></p><p>我们知道，计算机的三大核心硬件，分别是CPU（中央处理器）、内存（Memory）和硬盘（Hard Disk）。CPU负责运算，硬盘负责存储。而内存，是CPU和硬盘之间的桥梁。用于暂时存放CPU中的运算数据。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8aa3059fedd54d6ebb44a40d981d2573><p class=pgc-img-caption>CPU、内存、硬盘</p></div><p>绝大部分的台式机、服务器、手机，都是<strong>内置存储系统</strong>。也就是说，它们的硬盘安装在设备内部。</p><p><br></p><p>以普通台式机为例，硬盘通过专用接口和数据线，连接在主板上，实现和CPU、内存的数据连接。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ae0389d31a974f489ad4923be8b7f4a6><p class=pgc-img-caption>台式机上安装好的硬盘</p></div><p>常用的硬盘专用接口如下：</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b928eb4634794f6591765e0d3b176d37><p class=pgc-img-caption></p></div><p>手机等数码设备的“硬盘”，则是做成了很小的存储芯片，直接焊在主板上。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/910f020de59a406e8fcd0b11a1360657><p class=pgc-img-caption>常见的手机存储芯片：eMMC、UFS（更快）</p></div><p>我们再来简单看看<strong>硬盘的内部结构</strong>。</p><p><br></p><p>目前主流的硬盘类型有两种，分别是传统机械硬盘和SSD固态硬盘。小枣君以大家比较熟悉的机械硬盘为例进行介绍。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7992756113974211871bb98b08b0c43f><p class=pgc-img-caption>左边是机械硬盘，右边是SSD固态硬盘</p></div><p>硬盘之所以叫硬盘，是因为它的核心部分是一块或多块由坚硬金属材料制成的<strong>盘片</strong>。盘片上面涂抹了磁性介质，两面都可以记录信息。在盘面上读/写数据的，是<strong>磁头</strong>。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/23834c1da2fb4ffdb821115301087210><p class=pgc-img-caption>硬盘，也叫磁盘（有点像唱片机）</p></div><p>下图显示的是一个盘面：</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/48ebb45e0e7d4e2bb4d50c17df59f807><p class=pgc-img-caption></p></div><p>盘面中一圈圈灰色同心圆为一条条<strong>磁道</strong>。从圆心向外画直线，可以将磁道划分为若干个弧段，每个弧段被称之为一个<strong>扇区</strong>（Sector，图中绿色部分）。</p><p><br></p><p>从侧面看，如下图所示。我们把磁道从外向内进行编号（最外面是0号），每个盘面中具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/bf4dc5a207bd4e44821334f3bdfdf404><p class=pgc-img-caption></p></div><p>所以，磁盘的存储容量 ＝ 磁头数 × 磁道数 × 每磁道扇区数 × 每扇区字节数。</p><p><br></p><p>扇区是磁盘的最小组成单元。大家应该看出来了，越靠圆心，扇区越短。那么，是不是越往外，扇区越长，存储的数据越多呢？</p><p><br></p><p>不一定。</p><p><br></p><p>老式的硬盘，不管靠内还是靠外，每个扇区的大小是一样的，都是512字节。这种硬盘用柱面-磁头-扇区号（CHS，Cylinder-Head-Sector）组成的编号进行寻址。</p><p><br></p><p>而现在主流的硬盘，扇区密度是一致的，也就是说，越靠外侧，扇区数越多。每个扇区的大小是4K字节，用一个逻辑块编号寻址（LBA，Logical Block Addressing）。</p><p><br></p><p>以扇区为基础，一个或多个连续的扇区组成一个块，叫做<strong>物理块</strong>。所以，硬盘往往又叫<strong>块设备（Block Device）。</strong></p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a894a43152a642b2ac9b08f06f1f71a2><p class=pgc-img-caption></p></div><p>除了传统机械硬盘之外，随着自身成本的不断下降，SSD固态硬盘（Solid State Disk或Solid State Drive）正在迅速崛起并成为主流。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/533b3d26d23b4cddb4a86001078148f3><p class=pgc-img-caption></p></div><p>这是一种由控制单元和固态存储单元（DRAM或FLASH芯片）组成的硬盘。它的接口规范和定义、功能及使用方法上与普通机械硬盘基本相同，但速度要快得多。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4efe67a705f64fb9853b108b7ee27886><p class=pgc-img-caption></p></div><p>固态硬盘的产品外形和尺寸上也与普通机械硬盘（2.5寸）一致。由于固态硬盘没有普通硬盘的旋转介质，因而抗震性极佳。固态硬盘内部芯片的工作温度范围也很宽（-40~85℃），所以适用于很多较为苛刻的工作环境。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>▉ 什么是逻辑卷？什么是文件系统？</strong></h1><p><br></p><p>为了方便管理，我们可以将硬盘这样的物理块设备，分割成多个逻辑块设备。或者，我们也可以将多个物理块设备，组合成一个容量更大的逻辑块设备。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3cc706d90690493eb45cf0ba415b1800><p class=pgc-img-caption></p></div><p>底层的相关技术和工具，包括RAID（大家可能比较熟悉）、JBOD、卷管理系统（Volume Manager）。</p><p><br></p><p>Windows的卷管理系统，就是它自带的磁盘管理工具。而Linux的，是大名鼎鼎的LVM（Logical Volume Manager，逻辑卷管理）。</p><p><br></p><p>我们先说说Windows的。</p><p><br></p><p>在Windows中，磁盘分为<strong>基本磁盘</strong>和<strong>动态磁盘</strong>。默认情况下，用户用的都是基本磁盘。</p><p><br></p><p>一个基本磁盘可以划分为多个分区，分区类别包括主分区、扩展分区和逻辑分区。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9f4f68f756794922b4cfa34a8deaf731><p class=pgc-img-caption>硬盘分区</p></div><p>主分区是硬盘的启动分区，我们常说的“C盘”就是硬盘上的主分区。MBR分区表可以划分出4个主分区。如果使用GPT分区，可以管理128个主分区。</p><p><br></p><p>除去主分区以外，硬盘剩下的容量就被认定为扩展分区。扩展分区不能直接使用。扩展分区可以分成一个或若干个逻辑分区，也就是我们的“D盘”、“E盘”等。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6b60489330884766a79f9a56972f82eb><p class=pgc-img-caption></p></div><p>动态磁盘是基本磁盘的升级模式。在动态磁盘中，分区叫做<strong>卷</strong>。卷的出现，就是为了便于对多硬盘进行管理。</p><p><br></p><p>简单来说，动态磁盘可以将不同硬盘分到一个卷。假如你手中有160G和250G硬盘各一块，如果想划分90G和320G的分区，就可以借助动态磁盘来完成。</p><p><br></p><p>动态磁盘里面的卷，又分为简单卷、跨区卷、带区卷、镜像卷、RAID-5卷。限于篇幅，就不做具体介绍了。基本磁盘里的分区，现在也被微软改叫为卷。</p><p><br></p><p>再来看看Linux的LVM工具。</p><p><br></p><p>其实LVM和动态磁盘的思路差不多的，也是把物理空间变成逻辑空间。</p><p><br></p><p>首先，物理存储介质进行初始化，变成<strong>物理卷（PV，physical volume）</strong>。</p><p><br></p><p>然后，一个或多个物理卷组成一个<strong>卷组（VG，Volume Group）</strong>。</p><p><br></p><p>创建卷组之后，再创建<strong>逻辑卷（LV，logical volume）</strong>。</p><p><br></p><p>整个过程，如下图所示：</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fc5a98caa0c649248ab473ea293cadb8><p class=pgc-img-caption>LVM主要元素的构成</p></div><p>好了，不管是Windows还是Linux，逻辑卷都有了，是不是可以直接使用它们啦？</p><p><br></p><p>不行，还差一步。那就是<strong>文件系统（File System）</strong>。</p><p><br></p><p>文件系统就像仓库管理员。作为用户，你不需要知道仓库里面到底是什么样子，只需要把货物交给他，他会以一个树形结构目录，登记这些货物。你来取的时候，只需要告诉他路径，他就会把货物交给你。</p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4a7153b604504c6b88e4b5491abdbff2><p class=pgc-img-caption>文件夹结构</p></div><p>文件系统有很多种类型，常见的有Windows的FAT/FAT32/NTFS（大家应该很熟悉），还有就是Linux的EXT2/EXT3/EXT4/XFS/BtrFS等。</p><p><br></p><p>Windows系统下，通过对分区（卷）进行文件系统格式化，再分配一个盘符，我们就可以在“我的电脑”里看到可用的磁盘。Linux系统下，我们需要对逻辑卷进行文件系统格式化，然后执行挂载操作，也就能对存储空间进行使用了。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>▉ 什么是DAS/NAS/SAN</strong></h1><p><br></p><p>除了内置存储之外，随着存储容量需求的不断增加，加上维护便利性的需要，计算机系统开始引入了<strong>外挂存储</strong>。也就是说，硬盘从计算机的内部，跑到了计算机的外部。</p><p><br></p><p>外挂存储分为两种，一种是<strong>直连式存储（DAS，Direct Attached Storage）</strong>，还有一种是<strong>网络存储（FAS，Fabric Attached Storage）</strong>。</p><p><br></p><p>DAS直连式存储，一般是使用专用线缆（例如SCSI），与存储设备（例如磁盘阵列）进行直连。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0b2f27262a6d425595004f1a8cd73c94><p class=pgc-img-caption></p></div><p>虽然数据存储设备看似在外部，但直接挂接在服务器内部总线上，是整个服务器结构的一部分。</p><p><br></p><p>DAS的缺点是存储设备只能连接到一台主机使用，无法共享，成本较高，且安全性可靠性较低。</p><p><br></p><p>FAS网络存储，是一种多点连接式的存储。它又分为<strong>NAS（Network-attached Storage，网络接入存储）</strong>和<strong>SAN（Storage Area Network，存储区域网络）</strong>。</p><p><br></p><p>这些概念的名字非常像，大家千万别晕。画个图看得明白一些：</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/2f39966a907a47cdbff82bebcb8a6159><p class=pgc-img-caption></p></div><p>NAS与DAS相比，最大的特点是非直连。它可以通过IP网络，实现多台主机与存储设备之间的连接。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ceb59f31d4524d01b322b87d7242aca1><p class=pgc-img-caption></p></div><p>NAS大大提高了存储的安全性、共享性和成本。但是I/O（输入输出）渐渐成为性能瓶颈。随着应用服务器的不断增加，网络系统效率会急剧下降。</p><p><br></p><p>而SAN并不存在这个问题。</p><p><br></p><p>早期的SAN架构专指FC SAN，它通过<strong>专用光纤通道交换机</strong>访问数据，采用FC协议。FC（光纤通道）的带宽明显高于NAS的以太网，而且稳定性也更好。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/efa004a7ea95424ab7cb45966ac27881><p class=pgc-img-caption></p></div><p>后来，有了iSCSI协议（Internet SCSI，2003年正式成为标准）并且主流操作系统开始支持，就有了IP SAN（使用IP网络和设备）。</p><p><br></p><p>说白了，iSCSI就是走IP网络的SCSI。一方面扩大了连接距离，另一方面增加了连接的服务器数量（原来的SCSI-3的上限是15）。</p><p><br></p><p>SAN和NAS的关键区别，就在于<strong>文件系统的位置</strong>。画个图就明白了：</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/df9f7bf2c9e944f3a22633529c4950ab><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e2447e0eba07411a99da6982e7b15b72><p class=pgc-img-caption></p></div><p>可以看出，<strong>如果说SAN是一块网络硬盘的话，NAS基本上已经像一台独立的服务器了。</strong>NAS拥有文件系统，用户可以通过TCP/IP协议直接访问上面的数据。</p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/76df20c872d1473fac921a7409971911><p class=pgc-img-caption></p></div><p>现在很多家庭都开始使用小型NAS设备，相当于一个小型服务器。</p><p><br></p><p>在NAS的模式下，不同的客户端可以使用<strong>网络文件系统（Network File System）</strong>访问NAS上的文件。常见的网络文件系统有Windows网络的CIFS（也叫SMB）、类Unix系统网络的NFS等。</p><p><br></p><p>FTP、HTTP其实也算是文件存储的某种特殊实现，它们通过某个URL地址来访问一个文件。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>▉ 未完待续……</strong></h1><p><br></p><p>随着互联网的持续发展，网络上的数据量在不断激增，这给存储系统带来了巨大的压力和挑战。</p><p><br></p><p>云计算的兴起，会给我们全新的解决方案吗？</p><p><br></p><p>请看下期——<strong>《对象存储的深度揭秘》</strong></p><p><br></p><div class=pgc-img><img alt=关于存储技术的最强入门科普 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f423e62172da4852bee5e3e06817d3a9><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'关于存','储技术','最强'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>