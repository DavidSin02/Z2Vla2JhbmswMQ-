<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>C语言学习|指针和数组之间的关系 | 极客快訊</title><meta property="og:title" content="C语言学习|指针和数组之间的关系 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/b4a86e58580942dfaf343a6b9b31f5cf"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b70a874f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b70a874f.html><meta property="article:published_time" content="2020-11-14T21:00:21+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:21+08:00"><meta name=Keywords content><meta name=description content="C语言学习|指针和数组之间的关系"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/b70a874f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>C语言学习|指针和数组之间的关系</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=C语言学习|指针和数组之间的关系 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b4a86e58580942dfaf343a6b9b31f5cf><p class=pgc-img-caption></p></div><p>在C语言中，指针和数组是相互关联的。</p><p>首先，指针的算术运算和关系运算常常是针对指针数组中的元素而言的。由于数组在内存中是连续存放的，因此指向同一数组中不同元素的两个指针的关系运算常用于比较它们所指元素在数组中的前后位置的关系。指针的算术运算则常用于移动指针的指向，使其指向数组中的其它元素。当然，仅当指针的算术运算结果仍然指向同一数组中的元素时才有意义。</p><p>其次，指针和数组的关系还表现在：在表达式中，数组名被自动转化为指向数组中的第一个元素的常量指针（除用作sizeof运算的操作数外）。例如：</p><p>int a[100];</p><p>int *p;</p><p>p=a;</p><p>因为a被自动转换为指向a[0]的一个int型常量指针，所以经p=a赋值后，p也指向了a[0]。</p><p>最后，数组的下标运算符[]实际上是以一个指针作为其操作数。例如，数组元素a[i]被编译器解释为表达式*（a+i），表示从数组首地址开始向后移动i个元素并取出其内容，而&a[i]表示取数组a的第i+1个元素的地址，它等价于指针表达式a+i。因此，数组元素可以通过指针来引用，指针也可以用下标形式来表示。可用数组实现的操作也可用指针来实现。只是指针实现比数组实现的效率高，而数组实现方法更容易理解。</p><div class=pgc-img><img alt=C语言学习|指针和数组之间的关系 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/8f9b185d-775f-4db2-b190-f925ab7729b7><p class=pgc-img-caption></p></div><p>一、一维数组的地址和指针</p><p>1.一维数组的指针概念</p><p>由于数组元素在内存中是连续存放的，即在内存中占用一段连续的存储单元，每个数组元素占用其中的一个存储单元。因此，数组元素实质上就是一个变量，数组元素的指针就是该元素在内存中所占存储单元的首地址，而一维数组的指针就是数组中各元素所占连续存储单元的起始地址，即第一个元素的指针。例如：</p><p>定义了一个有3个短整型元素的一维数组a，如图1-1所示，因为数组a的每个元素在内存中占2个字节的内存，所以有3个元素的数组a在内存中总计占10个字节的连续的存储单元，其起始地址可通过&a来得到。因为数组名a代表数组的首地址，即元素a[0]的地址（&a[0]），所以要定义一个指向一维短整型数组的指针变量p，并使其指向数组a的首地址，可用如下的变量语句：</p><p>short *p=a;</p><p>则相当于语句：</p><p>short *p=&a[0];</p><div class=pgc-img><img alt=C语言学习|指针和数组之间的关系 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b0c88949ef54468cba5bd231e8f1108a><p class=pgc-img-caption>图1—1 一维数组的地址示意图</p></div><p>2.一维数组的指针引用一维数组元素</p><p>既然数组名a代表数组的首地址（即&a[0]），那么表达式a+1就表示首地址后面的下一个元素的地址，即&a[1]。由此可见，表达式a+i代表数组中下标为i的元素a[i]的地址（&a[i]).。</p><p>不仅可以通过下标方式来引用数组中的元素，还可以通过使用间接寻址运算符*来引用数组的元素。例如，*a表示取出首地址a所指存储单元中的内容，即元素a[0]，*(a+i)表示取出首地址元素后面第i个元素的内容，即下标为i的元素a[i]。</p><p>此外，还可以通过指向一维数组的指针变量p来引用数组a中的元素，如图1-2所示。</p><div class=pgc-img><img alt=C语言学习|指针和数组之间的关系 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ce677ce9cf56466586a46e8600373831><p class=pgc-img-caption>图1-2 指针运算和数组的关系</p></div><p>当指针变量p指向数组的首地址&a[0]时，*p就表示取出p所指单元即元素a[0]的值，此外，由于p+i代表当前指针所指元素后面的第i个元素的地址，因此*（p+i）表示取出p+i所指向的存储单元内容，即元素a[i]的值。*（p+i）也可以用它的下标形式p[i]来表示。</p><p>与通过*（a+i）来引用数组元素a[i]不同的是，由于指针变量p不一定永远都指向数组的首地址&a[0]，因为仅当指针变量p指向数组的首地址&a[0]时，*（p+i）才是对a[i]的引用。否则，如果通过增1运算改变指针变量p的指向，使p直接指向a[i]，那么就是对a[i]的引用了。</p><p>此外，需要注意的是，在传统的算术中，1000+1的结果是1001，但是对于指针的算术就不是这样了。当给指针加上一个整数或者从指针中减去一个整数时，并非简单地增减这个整数值，而是这个整数值乘以指针所指向对象的字节长度。这个字节长度取决于指针所指向的对象的数据类型。不过，当对一个字符数组执行的指针算术运算时，运算的结果和普通的算术运算的结果是不一样的，因为每个字符只占1字节。</p><p>小贴士：</p><p>1）数组名a是一个地址常量，不能通过赋值操作改变它的值，指针变量p是一个变量，可以通过赋值运算改变它的值，从而使p指向数组中的其它元素</p><p>2）虽然p+1和p++都指向当前指针所指单元的下一个元素，但p+1并不改变当前指针的指向，p仍然指向原来所指向的元素，而p++相当于执行p=p+1，因此p++操作改变了指针p的指向，表示将指针变量p向前移动使其指向了下一个元素。</p><p>3）p+1并非将指针变量p的值简单地增加1字节，事实上，它是增加了1*sizeof（指针的基类型）字节</p><p>4）指针的算术运算仅在作用于数组时才有意义。因为不能假设同一数据类型的两个变量在内存中相邻存储的，除非它们是数组中的两个相邻的元素。同理，对并非指向同一数组的元素的两个指针进行相减运算，也是无意义的。</p><p>如下有五种输入/输出数组元素的方法：</p><p>方法1 用下标法直接引用数组元素</p><p>int a[10],i;</p><p>for(i=0;i&lt;10;i++)</p><p>{</p><p>scanf("%d",&a[i]);</p><p>}</p><p>for(i=0;i&lt;10;i++)</p><p>{</p><p>printf("%d",a[i]);</p><p>}</p><p>方法2 通过数组名间接引用数组元素</p><p>int a[10],i;</p><p>for(i=0;i&lt;10;i++)</p><p>{</p><p>scanf("%d",a+i);</p><p>}</p><p>for(i=0;i&lt;10;i++)</p><p>{</p><p>printf("%d",*(a+i));</p><p>}</p><p>方法3 通过指针变量间接引用数组元素</p><p>int a[10],*p=NULL,i;</p><p>p=a;</p><p>for(i=0;i&lt;10;i++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>scanf("%d",p+i);</p><p>}</p><p>p=a;</p><p>for(i=0;i&lt;10;i++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>printf("%d",*(p+i));</p><p>}</p><p>方法4 通过指针变量增1运算间接引用数组元素</p><p>int a[10],*p=NULL;</p><p>for(p=a;p&lt;a+10;p++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>scanf("%d",p);</p><p>}</p><p>for(p=a;p&lt;a+10;p++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>printf("%d",*p);</p><p>}</p><p>方法5 用指针的下标表示法引用数组的元素</p><p>int a[10],*p=NULL,i;</p><p>p=a;</p><p>for(i=0;i&lt;10;i++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>scanf("%d",&p[i]);</p><p>}</p><p>p=a;</p><p>for(i=0;i&lt;10;i++)//循环开始前，确保指针p指向数组的首地址</p><p>{</p><p>printf("%d",p[i]);</p><p>}</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'语言学习','指针','数组'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>