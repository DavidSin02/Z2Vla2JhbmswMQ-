<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>MOSFET栅极前电阻为什么要取100 Ω？ | 极客快訊</title><meta property="og:title" content="MOSFET栅极前电阻为什么要取100 Ω？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/7466992ea3be4b9c923b378b6230364b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b739794.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b739794.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b739794.html><meta property="article:published_time" content="2020-10-29T21:07:07+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:07+08:00"><meta name=Keywords content><meta name=description content="MOSFET栅极前电阻为什么要取100 Ω？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/b739794.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>MOSFET栅极前电阻为什么要取100 Ω？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>为了稳定性，必须在 MOSFET 栅极前面放一个 100 Ω 电阻吗？</strong></p><p>只要问任何经验丰富的电气工程师——如我们今天故事里的教授 Gureux ——在 MOSFET 栅极前要放什么，你很可能会听到<strong>“一个约 100 Ω 的电阻”。</strong></p><p>虽然我们对这个问题的答案非常肯定，但你们或许会继续问——</p><p><strong>“为什么呢？他的具体作用是什么呢？电阻值为什么是 100 Ω 呢”</strong></p><p>为了满足你们的这种好奇心，我们接下来将通过一个故事来探讨这个问题。</p><p><strong>故事开始了</strong></p><p>年轻的应用工程师 Neubean 想<strong>通过实验证明，为了获得稳定性，是不是真的必须把一个 100 Ω 的电阻放在 MOSFET 栅极前</strong>。拥有30 年经验的应用工程师 Gureux 对他的实验进行了监督，并全程提供专家指导。</p><p><strong>高端电流检测简介</strong></p><p>图1中的电路所示为一个典型的高端电流检测示例。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7466992ea3be4b9c923b378b6230364b><p class=pgc-img-caption></p></div><p>负反馈试图在增益电阻RGAIN上强制施加电压VSENSE。通过RGAIN的电流流过P沟道MOSFET (PMOS)，进入电阻ROUT，该电阻形成一个以地为基准的输出电压。总增益为:</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e656295c11348c1b7eedcf9c009c08c><p class=pgc-img-caption></p></div><p>电阻ROUT上的可选电容 COUT 的作用是对输出电压滤波。即使 PMOS 的漏极电流快速跟随检测到的电流，输出电压也会展现出单极点指数轨迹。</p><p>原理图中的电阻 RGATE 将放大器与PMOS栅极隔开。其值是多少？经验丰富的 Gureux 可能会说：“当然是100 Ω！”</p><p><strong>尝试多个Ω值</strong></p><p>我们发现，我们的朋友Neubean，也是Gureux的学生，正在认真思考这个栅极电阻。Neubean在想，如果栅极和源极之间有足够的电容，或者栅极电阻足够大，则应该可以导致稳定性问题。一旦确定RGATE和CGATE相互会产生不利影响，则可以揭开100 Ω或者任何栅极电阻值成为合理答案的原因。</p><p>图2所示为用于凸显电路行为的LTspice仿真示例。Neubean通过仿真来展现稳定性问题，他认为，稳定性问题会随着RGATE的增大而出现。毕竟，来自RGATE和CGATE的极点应该会蚕食与开环关联的相位裕量。然而，令Neubean感到惊奇的是，在时域响应中，所有RGATE值都未出现任何问题。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/26158d45c2dd4b9d848e43e7e48ce7a3><p class=pgc-img-caption></p></div><p>图2. 高端电流检测仿真</p><p><strong>结果发现，电路并不简单</strong></p><p>在研究频率响应时，Neubean意识到，需要明确什么是开环响应。如果与单位负反馈结合，构成环路的正向路径会从差值开始，结束于结果负输入端。Neubean然后模拟了VS/(VP – VS)或VS/VE，并将结果绘制成图。图3所示为该开环响应的频域图。在图3的波特图中，直流增益很小，并且交越时未发现相位裕量问题。事实上，从整体上看，这幅图显示非常怪异，因为交越频率小于0.001 Hz。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b5a360bcd53449bfb22d14cbae8efc6b><p class=pgc-img-caption></p></div><p>图3. 从误差电压到源电压的频率响应</p><p>将电路分解成控制系统的结果如图4所示。就像几乎所有电压反馈运算放大器一样，LTC2063具有高直流增益和单极点响应。该运算放大器放大误差信号，驱动PMOS栅极，使信号通过RGATE– CGATE滤波器。CGATE和PMOS源一起连接至运算放大器的–IN输入端。RGAIN从该节点连接至低阻抗源。即使在图4中，可能看起来RGATE– CGATE滤波器应该会导致稳定性问题，尤其是在RGATE比RGATE大得多的情况下。毕竟，会直接影响系统RGATE电流的CGATE电压滞后于运算放大器输出变化。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b7b87683f1ca4c14a339605e7f5f9dc1><p class=pgc-img-caption></p></div><p>图4. 高端检测电路功能框图</p><p>对于为什么RGATE和CGATE没有导致不稳定，Neubean提供了一种解释：“栅极源为固定电压，所以，RGATE – CGATE电路在这里是无关紧要的。你只需要按以下方式调整栅极和源即可。这是一个源极跟随器。”</p><p>经验更丰富的同事Gureux说：“实际上，不是这样的。只有当PMOS作为电路里的一个增益模块正常工作时，情况才是这样的。”</p><p>受此启发，Neubean思考了数学问题——要是能直接模拟PMOS源对PMOS栅极的响应，结果会怎样？换言之，V(VS)/V(VG)是什么？Neubean赶紧跑到白板前，写下了以下等式：</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e015d44f0b6148cbb1ddb1f160b4272e><p class=pgc-img-caption></p></div><p>其中，</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fe5a7206815b4914a3183c4af1a27754><p class=pgc-img-caption></p></div><p>运算放大器增益为A，运算放大器极点为ωA。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f660916c8d3a42cab47a0eeac707fd2f><p class=pgc-img-caption></p></div><p>Neubean立刻就发现了重要项gm。什么是gm？对于一个MOSFET，</p><p>看着图1中的电路，Neubean心头一亮。当通过RSENSE的电流为零时，通过PMOS的电流应该为零。当电流为零时，gm为零，因为PMOS实际上是关闭的，未被使用、无偏置且无增益。当gm = 0时，VS/VE为0，频率为0 Hz，VS/VG为0，频率为0 Hz，所以，根本没有增益，图3中的曲线图可能是有效的。</p><p><strong>试图用LTC2063发现不稳定问题</strong></p><p>带来这点启示，Neubean很快就用非零的ISENSE尝试进行了一些仿真。</p><p>图5为从VE到VS的响应增益/相位图，该曲线跨越0dB以上到0dB以下，看起来要正常得多。图5应该显示大约2 kHz时，100 Ω下有大量的PM，100 kΩ下PM较少，1 MΩ下甚至更少，但不会不稳定。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/02444179a6d24d71af1d50f51380077c><p class=pgc-img-caption></p></div><p>图5. 非零检测电流条件下从误差电压到源电压的频率响应</p><p>Neubean来到实验室，用高端检测电路LTC2063得到一个检测电流。他插入一个高RGATE值，先是100 kΩ，然后是1 MΩ，希望能看到不稳定的行为，或者至少出现某类振铃。不幸的是，他都没有看到。他尝试加大MOSFET里的漏极电流，先增加ISENSE，然后使用较小的RGAIN电阻值。结果仍然没能使电路出现不稳定问题。</p><p>他又回到了仿真，尝试用非零ISENSE测量相位裕量。即使在仿真条件下也很难，甚至不可能发现不稳定问题或者低相位裕度问题。</p><p>Neubean找到Gureux，问他为什么没能使电路变得不稳定。Gureux建议他研究一下具体的数字。Neubean已经对Gureux高深莫测的话习以为常，所以，他研究了RGATE和栅极总电容形成的实际极点。在100 Ω和250 pF下，极点为6.4 MHz；在100 kΩ下，极点为6.4 kHz；在1 MΩ下，极点为640 Hz。LTC2063增益带宽积(GBP)为20 kHz。当LTC2063具有增益时，闭环交越频率可能轻松下滑至RGATE– CGATE极点的任何作用以下。</p><p><strong>是的，可能出现不稳定问题</strong></p><p>意识到运算放大器动态范围需要延伸至RGATE– CGATE极点的范围以外，Neubean选择了一个更高增益带宽积的运放。LTC6255 5 V运算放大器可以直接加入电路，增益带宽积也比较高，为6.5 MHz。</p><p>Neubean急切地用电流、LTC6255、100 kΩ栅极电阻和300 mA检测电流进行了仿真。</p><p>然后，Neubean在仿真里添加了RGATE。当RGATE足够大时，一个额外的极点可能会使电路变得不稳定。</p><p>图6和图7显示的是在高RGATE值条件下的仿真结果。当检测电流保持300 mA不变时，仿真会出现不稳定情况。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/92250f2963c24a15986e6f2b993b0522><p class=pgc-img-caption></p></div><p>图6. 有振铃的时域图</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/dd3f005e8e25466691031eb79b304ef1><p class=pgc-img-caption></p></div><p>图7. 增加电流（VE至VS）后的正常波特图，相位裕量表现糟糕</p><p><strong>实验结果</strong></p><p>为了了解电流是否会在检测非零电流时出现异常行为，Neubean用不同步进的负载电流和三个不同的RGATE值对LTC6255进行了测试。在瞬时开关切入更多并行负载电阻的情况下，ISENSE从60 mA的基数过度到较高值220 mA。这里没有零ISENSE测量值，因为我们已经证明，那种情况下的MOSFET增益太低。</p><p>实际上，图8最终表明，使用100 kΩ和1 MΩ电阻时，稳定性确实会受到影响。由于输出电压会受到严格滤波，所以，栅极电压就变成了振铃检测器。振铃表示相位裕量糟糕或为负值，振铃频率显示交越频率。</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/03bb25f35668436ba3dfac3597ec5958><p class=pgc-img-caption></p></div><p>图8. RGATE = 100 Ω，电流从低到高瞬态</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6170b29c78f649a78848cee4608f67e3><p class=pgc-img-caption></p></div><p>图9. RGATE = 100 Ω，电流从高到低瞬</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b71b25bae49549c6b5dc1e94f901a81d><p class=pgc-img-caption></p></div><p>图10. RGATE = 100 kΩ，电流从低到高瞬态</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f84e5ae4cbf0473b8dc55791039af3ae><p class=pgc-img-caption></p></div><p>图11. RGATE = 100 kΩ，电流从高到低瞬态</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6065c2f433a849cf8cc15315a9069c01><p class=pgc-img-caption></p></div><p>图12. RGATE = 1 MΩ，电流从低到高瞬态</p><div class=pgc-img><img alt="MOSFET栅极前电阻为什么要取100 Ω？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4499a0ad550c4e3ea330bf672580c842><p class=pgc-img-caption></p></div><p>图13. RGATE = 1 MΩ，电流从高到低瞬态</p><p><strong>头脑风暴时间</strong></p><p>Neubean意识到，虽然看到过许多高端集成电流检测电路，但不幸的是，工程师根本无力决定栅极电阻，因为这些都是集成在器件当中的。具体的例子有AD8212、LTC6101、LTC6102和LTC6104高电压、高端电流检测器件。事实上，AD8212采用的是PNP晶体管而非PMOS FET。他告诉Gureux说：“真的没关系，因为现代器件已经解决了这个问题。”</p><p>好像早等着这一刻，教授几乎打断了Neubean的话，说道：“我们假设，你要把极低电源电流与零漂移输入失调结合起来，比如安装在偏远地点的电池供电仪器。你可能会使用LTC2063或LTC2066，将其作为主放大器。或者你要通过470 Ω分流电阻测到低等级电流，并尽量准确、尽量减少噪声；那种情况下，你可能需要使用ADA4528，该器件支持轨到轨输入。在这些情况下，你需要与MOSFET驱动电路打交道。”</p><p><strong>所以……</strong></p><p>显然，只要栅极电阻过大，使高端电流检测电路变得不稳定是有可能的。Neubean向乐于助人的老师Gureux谈起了自己的发现。Gureux表示，事实上，RGATE确实有可能使电路变得不稳定，但开始时没能发现这种行为是因为问题的提法不正确。需要有增益，在当前电路中，被测信号需要是非零。</p><p>Gureux回答说：“肯定，当极点侵蚀交越处的相位裕量时，就会出现振铃。但是，你增加1 MΩ栅极电阻的行为是非常荒谬的，甚至100 kΩ也是疯狂的。记住，一种良好的做法是限制运算放大器的输出电流，防止其将栅极电容从一个供电轨转向另一个供电轨。”</p><p>Neubean表示赞同，“那么，我需要用到哪种电阻值？”</p><p>Gureux自信地答道：“100 Ω”。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'MOSFET','栅极前','电阻'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>