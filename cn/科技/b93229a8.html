<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Python二级（09）——文件和数据格式化 | 极客快訊</title><meta property="og:title" content="Python二级（09）——文件和数据格式化 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/9b4aca3213f34d528fcb02459bbf4551"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b93229a8.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b93229a8.html><meta property="article:published_time" content="2020-11-14T21:00:59+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:59+08:00"><meta name=Keywords content><meta name=description content="Python二级（09）——文件和数据格式化"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/b93229a8.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Python二级（09）——文件和数据格式化</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9b4aca3213f34d528fcb02459bbf4551><p class=pgc-img-caption></p></div><h1>>>上一篇<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6720094682421920268/?group_id=6720094682421920268" target=_blank>《Python二级（08）——组合数据类型》</a></h1><h1><strong>一、知识导图</strong></h1><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dad3ec494dc74de7b337f39219fb139c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><h1><strong>二、文件的使用</strong></h1><p><strong>1、文件</strong></p><p>I、文件是存储在辅助存储器上的一组数据序列，可 以包含任何数据内容。概念上，文件是数据的集合和抽象。文件包括两种类型：<strong>文本文件</strong>和<strong>二进制文件</strong>。</p><p><strong>2、文件的类型</strong></p><p>I、文本文件一般由<strong>单一特定编码</strong>的字符组成，如 <strong>UTF-8编码</strong>，内容容易统一展示和阅读。</p><p>II、二进制文件直接由比特0和比特1组成，文件内部数据的组织格式与文件用途有关。二进制是信息按照非字符但特定格式形成的文件，例如，png 格式的图片文件、avi格式的视频文件。</p><p>III、二进制文件和文本文件<strong>最主要的区别在于是否有统一的字符编码</strong>。</p><p>IV、无论文件创建为文本文件或者二进制文件，都可以用 “文本文件方式”和“二进制文件方式”打开，但打开后的操作不同。</p><pre>f = open("a.txt","rt") # t表示文本文件格式print(f.readline())f.close()</pre><p>V、文本文件a.txt,采用二进制方式打开</p><pre>f = open("a.txt","rb") # b表示二进制文件格式print(f.readline())f.close()</pre><p>VI、采用文本方式读入文件，文件经过编码形式字符串，打印出有含义的字符；采用二进制方式打开文件，文件被解析为字节流。</p><p><strong>3、文件的打开和关闭</strong></p><p>I、Python对文本文件和二进制文件采用统一的操 作步骤，即<strong>“打开-操作-关闭”</strong></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/79d27d12b2284ac3ac5cba45b5f3e14e><p class=pgc-img-caption></p></div><p>II、Python通过open()函数打开一个文件，并返回一 个操作这个文件的变量，语法形式如下:</p><p><strong>&lt;变量名> = open(&lt;文件路径及文件名>,&lt;打开模式>)</strong></p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/907fbdb6322b41ed8f9181bb664fa885><p class=pgc-img-caption></p></div><p>III、打开模式使用字符串方式表示，根据字符串定义， 单引号或者双引号均可。上述打开模式中，'r'、 'w'、'x'、'b'可以和'b'、't'、'+'组合使用，形成既 表达读写又表达文件模式的方式。</p><p>IV、文件使用结束后要用close()方法关闭，释放文件 的使用授权，语法形式如下:</p><p><strong>&lt;变量名>.close()</strong></p><p>V、新建一个文本文件a.txt，其内容为“全国计算机等级考 试”，保存在目录PATH中，假设此时路径PATH是 Windows系统的D盘根目录。打开并关闭该文件的操作 过程如下。</p><pre>&gt;&gt;&gt;PATH = "D:\\"&gt;&gt;&gt;f = open(PATH + "a.txt", "rt")&gt;&gt;&gt;print(f.readline())国家计算机等级考试&gt;&gt;&gt;f.close()</pre><p>VI、根据打开方式不同，文件读写也会根据文本文件 或二进制打开方式有所不同。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bb11be2fd581446fb437ced8eca2af56><p class=pgc-img-caption></p></div><p>①如果文件不大，可以一次性将文件内容读入，保存到程 序内部变量中。f.read()是最常用的一次性读入文件的函 数，<strong>其结果是一个字符串</strong>。</p><pre>&gt;&gt;&gt;f = open("D://b.txt", "r")&gt;&gt;&gt;s = f.read()&gt;&gt;&gt;print(s)新年都未有芳华，二月初惊见草芽。白雪却嫌春色晚，故穿庭树作飞花。&gt;&gt;&gt;f.close()</pre><p>②f.readlines()也是一次性读入文件的函数，<strong>其结果是一个列表</strong>，每个元素是文件的一行。</p><pre>&gt;&gt;&gt;f = open("D://b.txt", "r")&gt;&gt;&gt;ls = f.readlines()&gt;&gt;&gt;print(ls)['新年都未有芳华，二月初惊见草芽。\n', '白雪却嫌春色晚，故穿 庭树作飞花。\n']&gt;&gt;&gt;f.close()</pre><p>③文件打开后，对文件的读写有一个读取指针，当从文件 中读入内容后，读取指针将向前进，再次读取的内容将 从指针的新位置开始。</p><pre>&gt;&gt;&gt;f = open("D://b.txt", "r")&gt;&gt;&gt;s = f.read()&gt;&gt;&gt;print(s)新年都未有芳华，二月初惊见草芽。 白雪却嫌春色晚，故穿庭树作飞花。&gt;&gt;&gt;ls = f.readlines() &gt;&gt;&gt;print(ls)[]&gt;&gt;&gt;f.close()</pre><blockquote><p>结合读取指针理解，上述代码中ls返回值为空， 因为之前f.read()方法已经读取了文件全部内容， 读取指针在文件末尾，再次调用f.readlines()方 法已经无法从当前读取指针读入内容，因此返回 结果为空。</p></blockquote><p>VII、f.seek()方法能够移动读取指针的位置，f.seek(0)将读取 指针移动到文件开头，f.seek(2)将读取指针移动到文件 结尾。</p><pre>&gt;&gt;&gt;f = open("D://b.txt", "r")&gt;&gt;&gt;s = f.read()&gt;&gt;&gt;print(s)新年都未有芳华，二月初惊见草芽。 白雪却嫌春色晚，故穿庭树作飞花。&gt;&gt;&gt;f.seek(0) # 将读取指针重置到文件开头&gt;&gt;&gt;ls = f.readlines()&gt;&gt;&gt;print(ls)['新年都未有芳华，二月初惊见草芽。\n', '白雪却嫌春色晚，故穿庭树作飞花。\n'] &gt;&gt;&gt;f.close()</pre><p>VIII、从文本文件中逐行读入内容并进行处理是一个基本的文 件操作需求。文本文件可以看成是由行组成的组合类型， 因此，可以使用遍历循环逐行遍历文件，使用方法如下:</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c7f88f440266456ba794e10cf716f914><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f9eca9137b7b422b9731cc8c52af6cfb><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>f.write(s)向文件写入字符串s，每次写入后，将会记录一个写入指 针。该方法可以反复调用，将在写入指针后分批写入内容，直至文 件被关闭。</p><pre>&gt;&gt;&gt;f = open("D://c.txt", "w") &gt;&gt;&gt;f.write('新年都未有芳华\n') &gt;&gt;&gt;f.write('二月初惊见草芽\n') &gt;&gt;&gt;f.write('白雪却嫌春色晚\n') &gt;&gt;&gt;f.write('故穿庭树作飞花\n') &gt;&gt;&gt;f.close()</pre><p>上述语句运行后将在D盘目录下生成一个文件c.txt，内 容如下</p><pre>新年都未有芳华二月初惊见草芽白雪却嫌春色晚故穿庭树作飞花</pre><blockquote><p>使用f.write(s)时，要显式的使用'\n'对写入文本进行分 行，如果不进行分行，每次写入的字符串会被连接起来。</p></blockquote><p>f.writelines(lines)直接将列表类型的各元素连 接起来写入文件f。</p><pre>&gt;&gt;&gt;ls = ['新年都未有芳华\n', '二月初惊见草芽\n','白雪却嫌春色晚 \n','故穿庭树作飞花\n']&gt;&gt;&gt;f = open("D://c.txt", "w")&gt;&gt;&gt;f.writelines(ls)&gt;&gt;&gt;f.close()</pre><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/b5de2050-0287-4d82-bb3f-7c0f88d1e8dc><p class=pgc-img-caption></p></div><h1><strong>三、数据组织的维度</strong></h1><p><strong>1、数据组织的维度</strong></p><p>一组数据在被计算机处理前需要进行一定的组织， 表明数据之间的基本关系和逻辑，进而形成“数 据的维度”。根据数据的关系不同，数据组织可 以分为:<strong>一维数据、二维数据和高维数据。</strong></p><p><strong>2、一维数据</strong></p><p>一维数据由对等关系的有序或无序数据构成，采用<strong>线性方式组织</strong>，对应于数学中数组的概念。例 如:中国的直辖市列表即可表示为一维数据，一 维数据具有线性特点。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/118978763c65479183a82a5445b1a642><p class=pgc-img-caption></p></div><p><strong>3、二维数据</strong></p><p>I、二维数据，也称表格数据，由关联关系数据构成， 采用二维表格方式组织，对应于数学中的矩阵， 常见的表格都属于二维数据</p><p>II、例如:国家统计局发布的居民消费价格指数是二 维数据</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/055c9ca556bb450ca9383d51d8abef07><p class=pgc-img-caption></p></div><p><strong>4、高维数据</strong></p><p>I、高维数据由键值对类型的数据构成，采用对象方式组织，可以多层嵌套。</p><p>II、高维数据在Web系统中十分常用，作为当今 Internet组织内容的主要方式，高位数据衍生出 HTML、XML、JSON等具体数据组织的语法结 构。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b25da40c9ad04443a09bbad109f00823><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><h1><strong>四、一维数据的处理</strong></h1><p><strong>1、 一维数据的表示</strong></p><p>I、一维数据是最简单的数据组织类型，由于是线性结构，在Python语言中主要采用<strong>列表形式</strong>表示。 例如:中国的直辖市数据可以采用一个列表变量 表示。</p><pre>&gt;&gt;&gt;ls = ['北京', '上海', '天津', '重庆'] &gt;&gt;&gt;print(ls)['北京', '上海', '天津', '重庆']</pre><p><strong>2、 一维数据的存储</strong></p><p>I、一维数据的文件存储有多种方式，总体思路是采 用特殊字符分隔各数据。常用存储方法包括4种。</p><p>(1)采用空格分隔元素，例如:</p><p>北京 上海 天津 重庆</p><p>(2)采用逗号分隔元素，例如:</p><p>北京,上海,天津,重庆</p><p>(3)采用换行分隔包括，例如:</p><p>北京</p><p>上海</p><p>天津</p><p>重庆</p><p>(4)其他特殊符号分隔，以分号分隔为例，例 如:</p><p>北京;上海;天津;重庆</p><p>II、逗号分割的存储格式叫做CSV格式(Comma-Separated Values，即逗号分隔值)，它是一种通用的、相对简单 的文件格式，在商业和科学上广泛应用，大部分编辑器 都支持直接读入或保存文件为CSV格式</p><p>III、一维数据保存成CSV格式后，各元素采用逗号分隔，形 成一行。从Python表示到数据存储，需要将列表对象输 出为CSV格式以及将CSV格式读入成列表对象</p><pre>ls = ['北京', '上海', '天津', '重庆'] f = open("city.csv", "w")f.write(",".join(ls)+ "\n")f.close()</pre><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f2894e8bdd5f43c3a258df9143703c72><p class=pgc-img-caption></p></div><p><strong>3、 一维数据的处理</strong></p><pre>I、对一维数据进行处理首先需要从CSV格式文件读 入一维数据，并将其表示为列表对象。f = open("city.csv", "r")ls = f.read().strip('\n').split(",") f.close()print(ls)&gt;&gt;&gt;['北京', '上海', '天津', '重庆']</pre><p><strong>4、 二维数据的处理</strong></p><p>二维数据由多条一维数据构成，可以看成是一维数据的组合形式。因此，二维数据可以采用二维 列表来表示，即列表的每个元素对应二维数据的一行，这个元素本身也是列表类型，其内部各元素对应这行中的各列值</p><pre>ls = [['指标', '2014年', '2015年', '2016年'],['居民消费价格指数', '102', '101.4', '102'],['食品', '103.1', '102.3', '104.6'],['烟酒及用品', '994', '102.1', '101.5'],['衣着', '102.4', '102.7', '101.4'],['家庭设备用品', '101.2', '101', '100.5'],['医疗保健和个人用品', '101.3', '102', '101.1'],['交通和通信', '99.9', '98.3', '98.7'],['娱乐教育文化', '101.9', '101.4', '101.6'],['居住', '102', '100.7', '101.6'], ]</pre><p><strong>5、 二维数据的存储</strong></p><p>I、二维数据由一维数据组成，用CSV格式文件存储。 CSV文件的每一行是一维数据，整个CSV文件是 一个二维数据。</p><p>II、二维列表对象输出为CSV格式文件方法如下，采 用遍历循环和字符串的join()方法相结合。</p><pre># ls代表二维列表，此处省略 f = open("cpi.csv", "w") for row in ls: f.write(",".join(row)+ "\n")f.close()</pre><p><strong>6、 二维数据的处理</strong></p><p>对二维数据进行处理首先需要从CSV格式文件读 入二维数据，并将其表示为二维列表对象。借鉴 一维数据读取方法，从CSV文件读入数据的方法 如下。</p><pre>f = open("cpi.csv", "r")ls=[]for line in f: ls.append(line.strip('\n').split(","))f.close()print(ls)</pre><p>程序执行后二维列表对象ls的内容如下。</p><pre>&gt;&gt;&gt;[['指标', '2014年', '2015年', '2016年'], ['居民消费价格指数 ', '102', '101.4', '102'], ['食品', '103.1', '102.3', '104.6'], ['烟酒及用品', '994', '102.1', '101.5'], ['衣着 ', '102.4', '102.7', '101.4'], ['家庭设备用品', '101.2', '101', '100.5'], ['医疗保健和个人用品', '101.3', '102', '101.1'], ['交通和通信', '99.9', '98.3', '98.7'], ['娱乐教 育文化', '101.9', '101.4', '101.6'], ['居住', '102', '100.7', '101.6']]</pre><p>二维数据处理等同于二维列表的操作，与一维列表不同，二维列表一般需要借助循环遍历实现对每个数据的处理，基本代码格式如下:</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/608c9175aa5a4b16bf3a4c018c86e8a8><p class=pgc-img-caption></p></div><p>对二维数据进行格式化输出，打印成表格形状</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/68515b0b4d7c4eeea112b81a2a6fd8c2><p class=pgc-img-caption></p></div><h1><strong>交流</strong></h1><blockquote><p><strong>如果你有更好的解法或者有不同的意见，大家可以畅所欲言，共同提高进步！</strong></p><p><strong>群主也是小白一枚，零基础学习python，要勇于提问，大家共同探讨，共同学习进步！</strong></p></blockquote><h1>日日行，不怕千万里；常常做，不怕千万事。</h1><div class=pgc-img><img alt=Python二级（09）——文件和数据格式化 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5b76e110bc894784a3755c033e4d1bd8><p class=pgc-img-caption></p></div><h1>>>下一篇<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6720193598802887182/?group_id=6720193598802887182" target=_blank>《Python二级（11）——Python标准库概览》</a></h1></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Python','二级','09'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>