<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº | æå®¢å¿«è¨Š</title><meta property="og:title" content="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/f82b07ea2c934d218d1c1af44d9cc2ed"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/bd36c12.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/bd36c12.html><meta property="article:published_time" content="2020-10-29T20:50:29+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:29+08:00"><meta name=Keywords content><meta name=description content="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/bd36c12.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>Androidä¸­å››å¤§ç»„ä»¶çš„ä½¿ç”¨æ—¶é‡ä¸­ä¹‹é‡ï¼Œæˆ‘è¿™ä¸ªé˜¶æ®µä¹Ÿä¸å¥¢æœ›èƒ½æŠŠä»–æ‰€æœ‰çš„åŸç†ææ‡‚ï¼Œä½†æ˜¯æœ€èµ·ç çš„ï¼Œæˆ‘è¦æŠŠä»–çš„å„ç§ä½¿ç”¨æ–¹æ³•äº†å¦‚æŒ‡æŒæ‰è¡Œ</p><p>BroadcastReceiver</p><p>æ¥æ”¶ç³»ç»Ÿçš„å¹¿æ’­ï¼Œæ¯”å¦‚ç”µè¯ï¼ŒçŸ­ä¿¡ä¹‹ç±»çš„</p><h1>IPæ‹¨å·å™¨</h1><p>æˆ‘ä»¬åœ¨æ‹¨æ‰“ç”µè¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç³»ç»Ÿä¹Ÿä¼šäº‹å…ˆå‘é€ä¸€ä¸ªå¹¿æ’­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å¹¿æ’­æ¥æ”¶è€…æ¥æ¥æ”¶åˆ°è¿™ä¸ªå¹¿æ’­æ‹¨æ‰“ç”µè¯çš„æ—¶å€™åœ¨ç”µè¯å·ç å‰é¢åŠ ä¸Šä¸€äº›ä¼˜æƒ çš„é•¿é€”çŸ­å·ï¼Œå…¶é€»è¾‘å°±æ˜¯å…¥é—¨ä½¿ç”¨å¹¿æ’­çš„ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œé‚£æˆ‘ä»¬æ–°å»ºä¸€ä¸ªIPCallé¡¹ç›®</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f82b07ea2c934d218d1c1af44d9cc2ed><p class=pgc-img-caption></p></div><p>æˆ‘ä»¬æ‹¨æ‰“ç”µè¯çš„æ—¶å€™ç³»ç»Ÿå‘ä¸€ä¸ªå¹¿æ’­ï¼Œæˆ‘ä»¬æ¥å—åˆ°è¿™ä¸ªå¹¿æ’­æ‹¿åˆ°å·ç ä¿®æ”¹ä¹‹åå†æ”¾å›å»ï¼Œå°±è¾¾åˆ°äº†æˆ‘ä»¬IPæ‹¨å·çš„ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªReceiver</p><p><strong>CallReceiver</strong></p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.util.Log;</p><p>/**</p><p>* ç”µè¯å¹¿æ’­</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class CallReceiver extends BroadcastReceiver {</p><p>//æ¥æ”¶åˆ°å¹¿æ’­æ—¶è°ƒç”¨</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>Log.i("CallReceiver", "æ‰“ç”µè¯");</p><p>}</p><p>}</p><p>è¿™ä¸ªç±»æš‚æ—¶ä¸éœ€è¦åšä»€ä¹ˆã€‚æœ€é‡è¦çš„è¿˜æ˜¯æ³¨å†Œï¼Œä½œä¸ºå››å¤§ç»„å»ºï¼Œä»–æ˜¯éœ€è¦åœ¨æ¸…å•æ–‡ä»¶é‡Œæ³¨å†Œçš„</p><p>&lt;!--æ³¨å†Œå¹¿æ’­--></p><p>&lt;receiver android:name=".CallReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--å®šä¹‰æ¥æ”¶çš„å¹¿æ’­--></p><p>&lt;action android:name="android.intent.action.NEW_OUTGOING_CALL" /></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>åˆ«å¿˜äº†ï¼Œä½ ç›‘å¬äº†ç”¨æˆ·çš„éšç§ï¼Œæ˜¯éœ€è¦æƒé™çš„</p><p>```</p><p>&lt;uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /></p><p>æˆ‘ä»¬å…ˆè¿è¡Œä¸€ä¸‹ï¼Œæ‰“ä¸ªç”µè¯</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf2ece73df034cefb3bc113a3e2f5eed><p class=pgc-img-caption></p></div><p>å¥½çš„ï¼Œå¹¿æ’­æˆ‘ä»¬å·²ç»æŠ“ä½äº†ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é¦–å…ˆè·å–æ‰“å‡ºå»çš„å·ç </p><p>String iphone = getResultData();</p><p>Log.i("CallReceiver", "ç”µè¯å·ç ï¼š"+iphone);</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°Stringç±»å‹çš„ç”µè¯å·ç äº†</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/650a5faa792046e0af5df7757bd7aebb><p class=pgc-img-caption></p></div><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¿®æ”¹å·ç é‡æ–°è®¾ç½®IPæ®µäº†</p><p>//æ·»åŠ IPæ®µ</p><p>String newPhone = "+86" + iphone;</p><p>//æŠŠä¿®æ”¹åçš„å·ç æ”¾å›å»</p><p>setResultData(newPhone);</p><p>è¿™æ ·æˆ‘ä»¬æ¯æ¬¡æ‰“ç”µè¯ä»–éƒ½ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå­—æ®µäº†</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7b2bc8a8f88c409e9ff01ddd3ea30ce7><p class=pgc-img-caption></p></div><p>å®Œæ•´ä»£ç </p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.util.Log;</p><p>/**</p><p>* ç”µè¯å¹¿æ’­</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class CallReceiver extends BroadcastReceiver {</p><p>//æ¥æ”¶åˆ°å¹¿æ’­æ—¶è°ƒç”¨</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>Log.i("CallReceiver", "æ‰“ç”µè¯");</p><p>String iphone = getResultData();</p><p>Log.i("CallReceiver", "ç”µè¯å·ç ï¼š" + iphone);</p><p>//æ·»åŠ IPæ®µ</p><p>String newPhone = "+86" + iphone;</p><p>//æŠŠä¿®æ”¹åçš„å·ç æ”¾å›å»</p><p>setResultData(newPhone);</p><p>}</p><p>}</p><h1>2.çŸ­ä¿¡æ‹¦æˆªå™¨</h1><p>ç³»ç»Ÿå—åˆ°äº†ä¸€æ¡çŸ­ä¿¡åï¼Œä¹Ÿæ˜¯ä¼šå‘ä¸€æ¡å¹¿æ’­çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬å¯ä»¥åœ¨ä¸­é—´å†™ä¸€ä¸ªå¹¿æ’­æ¥å—è€…å»è¿›è¡Œæˆ‘ä»¬çš„æ“ä½œï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ç»§ç»­åœ¨IPæ‹¨å·å™¨è¿™ä¸ªé¡¹ç›®ä¸­å†™å§ï¼Œå°±ä¸æ–°å»ºé¡¹ç›®äº†ï¼Œä¸ç„¶ç­‰ä¸‹ä¸Šä¼ ä¹Ÿéº»çƒ¦</p><p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªClassâ€”â€”SMSReceiverï¼Œé‡å†™ä»–çš„onReceiveæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬å…ˆæ³¨å†Œ</p><p>&lt;!--æ³¨å†Œå¹¿æ’­--></p><p>&lt;receiver android:name=".SMSReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--å®šä¹‰æ¥æ”¶çš„å¹¿æ’­,è¢«Googleéšè—çš„æƒé™æ“ä½œ--></p><p>&lt;action android:name="android.provider.Telephony.SMS_RECEIVED" /></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>åˆ‡è®°,æƒé™</p><p>&lt;uses-permission android:name="android.permission.RECEIVE_SMS" /></p><p><strong>SMSReceiver</strong></p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.os.Bundle;</p><p>import android.telephony.SmsMessage;</p><p>import android.util.Log;</p><p>/**</p><p>* çŸ­ä¿¡æ‹¦æˆªå™¨</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class SMSReceiver extends BroadcastReceiver {</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>System.out.println("æ”¶åˆ°çŸ­ä¿¡");</p><p>//è·å–çŸ­ä¿¡å†…å®¹</p><p>Bundle bundle = intent.getExtras();</p><p>//è¿”å›çš„æ˜¯ä¸€ä¸ªObjectæ•°ç»„</p><p>Object[] objects = (Object[]) bundle.get("pdus");</p><p>//éå†æ•°ç»„å¾—åˆ°çŸ­ä¿¡å†…å®¹</p><p>for (Object object : objects) {</p><p>//æŠŠæ•°ç»„å…ƒç´ è½¬æ¢æˆçŸ­ä¿¡å¯¹è±¡</p><p>SmsMessage sms = SmsMessage.createFromPdu((byte[]) object);</p><p>//è·å–å‘ä»¶äººå·ç </p><p>String toPhone = sms.getOriginatingAddress();</p><p>//è·å–çŸ­ä¿¡å†…å®¹</p><p>String smsContent = sms.getMessageBody();</p><p>Log.i("SMSReceiver", "å‘ä»¶äººå·ç :" + toPhone + "çŸ­ä¿¡å†…å®¹" + smsContent);</p><p>//åˆ¤æ–­æ˜¯å¦æ˜¯æ‹¦æˆªçš„å·ç </p><p>if (toPhone.equals("12345678910")) {</p><p>//æ‹¦æˆªå¹¿æ’­</p><p>abortBroadcast();</p><p>}</p><p>}</p><p>}</p><p>}</p><p>è¿™æ ·æˆ‘ä»¬è¿è¡Œä¹‹ä¸‹ï¼Œä½ ä¼šå‘ç°ï¼Œè™½ç„¶èµ°åˆ°æ‹¦æˆªè¿™ä¸€æ­¥ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰é˜»æ­¢æ˜¾ç¤ºåœ¨çŸ­ä¿¡æ”¶ä»¶ç®±é‡Œï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¸€ä¸ªä¼˜åŠ¿ï¼Œå°±æ˜¯å¹¿æ’­æ¥æ”¶è€…æ˜¯æœ‰ä¼˜å…ˆçº§å®šä¹‰çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¸…å•æ³¨å†Œæ ¹èŠ‚ç‚¹çš„intent-filteræ ‡ç­¾é‡Œå®šä¹‰ä¸€ä¸ª</p><p>android:priority="1000"</p><p>å®˜æ–¹æ–‡æ¡£æ˜¯è¯´æ•°å€¼åœ¨-1000åˆ°1000ä¹‹é—´ï¼Œä½†æ˜¯æœ€é«˜æ”¯æŒintçš„æœ€å¤§å€¼çš„æƒé™ï¼Œintæœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿè‡ªå·±å»çœ‹API</p><h1>3.ç›‘å¬SDå¡</h1><p>>æˆ‘ä»¬åœ¨å¯¹SDå¡è¿›è¡Œè¯»å†™çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å·©å›ºä¸€ä¸‹å¯¹å¹¿æ’­çš„ä½¿ç”¨ï¼Œåšé‚£ç§è¯­éŸ³åŠ©æ‰‹ä¹‹ç±»çš„è¾…åŠ©è½¯ä»¶ï¼Œå¹¿æ’­å’ŒæœåŠ¡è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯å®šä¹‰ä¸€ä¸ªSDReceiverå¹¶ä¸”åœ¨æ¸…å•æ–‡ä»¶æ³¨å†Œ</p><p>&lt;!--æ³¨å†Œå¹¿æ’­--></p><p>&lt;receiver android:name=".SDReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--SDå¡å°±ç»ªå¹¿æ’­--></p><p>&lt;action android:name="android.intent.action.MEDIA_MOUNTED" /></p><p>&lt;!--SDå¡æ‹”å‡ºå¹¿æ’­--></p><p>&lt;action android:name="android.intent.action.MEDIA_REMOVED" /></p><p>&lt;!--SDå¡å¸è½½å¹¿æ’­--></p><p>&lt;action android:name="android.intent.action.MEDIA_UNMOUNTABLE" /></p><p>&lt;data android:scheme="file"/></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ç›‘å¬äº†</p><p><strong>SDReceiver</strong></p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.util.Log;</p><p>/**</p><p>* ç›‘å¬SDå¡</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class SDReceiver extends BroadcastReceiver {</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>//åˆ¤æ–­å¹¿æ’­</p><p>String action = intent.getAction();</p><p>if (action.equals(Intent.ACTION_MEDIA_MOUNTED)) {</p><p>Log.i("SDReceiver", "SDå¡å°±ç»ª");</p><p>} else if (action.equals(Intent.ACTION_MEDIA_REMOVED)) {</p><p>Log.i("SDReceiver", "SDå¡æ‹”å‡º");</p><p>} else if (action.equals(Intent.ACTION_MEDIA_UNMOUNTABLE)) {</p><p>Log.i("SDReceiver", "SDå¡å¸è½½");</p><p>}</p><p>}</p><p>}</p><p><strong>4.æµæ°“è½¯ä»¶</strong></p><p>æˆ‘ä»¬ç›‘å¬åˆ°å¼€æœºå°±å¯åŠ¨è¿™ä¸ªè½¯ä»¶ï¼Œè€Œä¸”ä¸è®©å…¶é€€å‡ºï¼Œè¾¾åˆ°æµæ°“çš„æ•ˆæœ</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9fce07e7f798481baaa1da53a1a1b7a7><p class=pgc-img-caption></p></div><p>å…ˆä¸è®©ä»–é€€å‡ºï¼Œæˆ‘ä»¬åœ¨MainActivityä¸­</p><p>@Override</p><p>public void onBackPressed() {</p><p>//ç¦æ­¢è¿”å›é”®</p><p>// super.onBackPressed();</p><p>}</p><p>åªè¦ä½ ä¸€å®‰è£…ï¼Œå°±é€€å‡ºä¸äº†äº†ï¼Œæˆ‘ä»¬å†è®¾ç½®ä¸€ä¸‹å¼€æœºå¯åŠ¨ï¼Œå†™ä¸€ä¸ªç›‘å¬å™¨åŠ¨çš„å¹¿æ’­ç½¢äº†ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªRebootReceiver,å…ˆæ³¨å†Œå§</p><p>&lt;!--æ³¨å†Œå¹¿æ’­--></p><p>&lt;receiver android:name=".RebootReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--å®šä¹‰æ¥æ”¶çš„å¹¿æ’­--></p><p>&lt;action android:name="android.intent.action.BOOT_COMPLETED" /></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>è¿™ä¸ªä¹Ÿæ˜¯éœ€è¦æƒé™çš„</p><p>&lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/></p><p><strong>RebootReceiver</strong></p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.util.Log;</p><p>/**</p><p>* å¼€æœºå¯åŠ¨</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class RebootReceiver extends BroadcastReceiver {</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>Log.i("RebootReceiver", "å¼€æœº");</p><p>//å¯åŠ¨</p><p>Intent i = new Intent(context, MainActivity.class);</p><p>//åœ¨Activityä¹‹å¤–å¯åŠ¨éœ€è¦è®¾ç½®Flags</p><p>i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</p><p>context.startActivity(i);</p><p>}</p><p>}</p><h1>5.åº”ç”¨å®‰è£…å¸è½½ç›‘å¬</h1><p>æˆ‘ä»¬å¦‚æœåšæ‰‹æœºåŠ©æ‰‹æˆ–è€…åº”ç”¨çš„æ—¶å€™æˆ–è®¸å¯ä»¥ç”¨å¾—ä¸Šè¿™ç©æ„ï¼Œæ–°å»ºä¸€ä¸ªAPPReceiverï¼Œç„¶åå»æ³¨å†Œ</p><p>&lt;!--æ³¨å†Œå¹¿æ’­--></p><p>&lt;receiver android:name=".APPReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--å®‰è£…åº”ç”¨--></p><p>&lt;action android:name="android.intent.action.PACKAGE_ADDED" /></p><p>&lt;!--æ›´æ–°åº”ç”¨--></p><p>&lt;action android:name="android.intent.action.PACKAGE_REPLACED" /></p><p>&lt;!--å¸è½½åº”ç”¨--></p><p>&lt;action android:name="android.intent.action.PACKAGE_REMOVED" /></p><p>&lt;!--æºå¸¦åŒ…å--></p><p>&lt;data android:scheme="package"/></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>ç„¶åæˆ‘ä»¬æ¥åˆ¤æ–­</p><p>package com.lgl.ipcall;</p><p>import android.content.BroadcastReceiver;</p><p>import android.content.Context;</p><p>import android.content.Intent;</p><p>import android.net.Uri;</p><p>import android.util.Log;</p><p>/**</p><p>* Created by lgl on 16/4/10.</p><p>*/</p><p>public class APPReceiver extends BroadcastReceiver {</p><p>@Override</p><p>public void onReceive(Context context, Intent intent) {</p><p>//åˆ¤æ–­å¹¿æ’­ç±»å‹</p><p>String action = intent.getAction();</p><p>//è·å–åŒ…å</p><p>Uri appName = intent.getData();</p><p>if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {</p><p>Log.i("APPReceiver", "å®‰è£…" + appName);</p><p>} else if (Intent.ACTION_PACKAGE_REPLACED.equals(action)) {</p><p>Log.i("APPReceiver", "æ›´æ–°" + appName);</p><p>} else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {</p><p>Log.i("APPReceiver", "å¸è½½" + appName);</p><p>}</p><p>}</p><p>}</p><p>è¿™æ ·æˆ‘ä»¬å®Œå…¨å°±å¯ä»¥ç›‘å¬çŠ¶æ€äº†ï¼Œæˆ‘ä»¬ä»¥ä¸‹è½½ä¸€ä¸ªè±Œè±†èšä¸ºä¾‹</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d03c5e3fa04c4803a99db2dcbab2d423><p class=pgc-img-caption></p></div><h1>6.è‡ªå®šä¹‰å¹¿æ’­</h1><p>è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ç‰¹å®šéœ€æ±‚çš„æ—¶å€™ä¼šç”¨ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªButton</p><p>&lt;Button</p><p>android:id="@+id/btn_myreceiver"</p><p>android:layout_width="wrap_content"</p><p>android:layout_height="wrap_content"</p><p>android:text="å‘é€è‡ªå®šä¹‰å¹¿æ’­" /></p><p>ä»–çš„ç‚¹å‡»äº‹ä»¶å°±æ˜¯å‘é€ä¸€ä¸ªå¹¿æ’­ï¼Œæˆ‘è¿™é‡Œè‡ªå®šä¹‰ä¸€ä¸ªå¹¿æ’­åå­—liuguilin</p><p>case R.id.btn_myreceiver:</p><p>Intent i = new Intent();</p><p>i.setAction("liuguilin");</p><p>sendBroadcast(i);</p><p>break;</p><p>ç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªMyReceiver,æ³¨å†Œ</p><p>&lt;receiver android:name=".MyReceiver"></p><p>&lt;intent-filter></p><p>&lt;!--è‡ªå®šä¹‰å¹¿æ’­--></p><p>&lt;action android:name="liuguilin" /></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>æˆ‘ä»¬å†™ä¸ªæ‰“å°è¯­å¥</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/2aae9314daf947b7a2fae463af8cb01f><p class=pgc-img-caption></p></div><h1>7.æœ‰åºå¹¿æ’­å’Œæ— åºå¹¿æ’­</h1><p>è¿™ä¸¤ç§å¹¿æ’­çš„åŒºåˆ«</p><p>- æœ‰åºå¹¿æ’­ï¼šæ¥æ”¶è¿™æ¡å¹¿æ’­æ˜¯æŒ‰ä¼˜å…ˆçº§æ¥çš„</p><p>- æ— åºå¹¿æ’­ï¼šæ— æ¡ä»¶ç›´æ¥æ¥æ”¶</p><p>-1.å‘é€æœ‰åºå¹¿æ’­</p><p>>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªButton</p><p>&lt;Button</p><p>android:id="@+id/btn_haveorder"</p><p>android:layout_width="wrap_content"</p><p>android:layout_height="wrap_content"</p><p>android:text="å‘é€æœ‰åºå¹¿æ’­" /></p><p>ç„¶åå‘é€ä¸€ä¸ªå¹¿æ’­</p><p>case R.id.btn_haveorder:</p><p>Intent intent = new Intent();</p><p>intent.setAction("com.lgl.good");</p><p>//æœ‰åºå¹¿æ’­å¹¶ä¸”æºå¸¦æ•°æ®</p><p>sendOrderedBroadcast(intent, null, null, null, 0, "è‡ªå®šä¹‰å¹¿æ’­å†…å®¹", null);</p><p>break;</p><p>è¿™é‡Œæˆ‘å®šä¹‰äº†ä¸‰ä¸ªå¹¿æ’­ï¼Œç„¶åä»–ä»¬çš„ä¼˜å…ˆçº§åˆ†è¾¨æ˜¯1000ï¼Œ600ï¼Œ300</p><p>&lt;!--æœ‰åºå¹¿æ’­--></p><p>&lt;receiver android:name=".OrderReceiver"></p><p>&lt;intent-filter android:priority="1000"></p><p>&lt;action android:name="com.lgl.good"/></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>&lt;!--æœ‰åºå¹¿æ’­--></p><p>&lt;receiver android:name=".OrderReceiverTwo"></p><p>&lt;intent-filter android:priority="600"></p><p>&lt;action android:name="com.lgl.good"/></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>&lt;!--æœ‰åºå¹¿æ’­--></p><p>&lt;receiver android:name=".OrderReceiverThree"></p><p>&lt;intent-filter android:priority="300"></p><p>&lt;action android:name="com.lgl.good"/></p><p>&lt;/intent-filter></p><p>&lt;/receiver></p><p>æœ€åè¿è¡Œçš„ç»“æœ</p><div class=pgc-img><img alt="Android BroadcastReceiverçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ‹¨å·ï¼ŒçŸ­ä¿¡ï¼ŒSDå¡ï¼Œå¼€æœº" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f28fb221fe0848af8d05075df6eebfba><p class=pgc-img-caption></p></div><p>Demoä¸‹è½½ï¼šhttp://download.csdn.net/detail/qq_26787115/9486705</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Android','BroadcastReceiver','æ‹¨å·'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>