<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>配电网嵌入式IEC 61850智能规约转换网关设计 | 极客快訊</title><meta property="og:title" content="配电网嵌入式IEC 61850智能规约转换网关设计 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/dfic-imagehandler/db1b1f4a-c5c5-4289-9142-7a488c1ae071"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c415769.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c415769.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c415769.html><meta property="article:published_time" content="2020-10-29T21:01:26+08:00"><meta property="article:modified_time" content="2020-10-29T21:01:26+08:00"><meta name=Keywords content><meta name=description content="配电网嵌入式IEC 61850智能规约转换网关设计"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/c415769.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>配电网嵌入式IEC 61850智能规约转换网关设计</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>科大智能（合肥）科技有限公司的研究人员曹军，在2019年第11期《电气技术》杂志上撰文，针对配电网已有设备普遍不支持IEC 61850的现实情况,设计了支持IEC 61850的转换网关，其硬件采用Freescale的I.mx287微处理器，软件基于嵌入式Linux系统和SISCO的MMS-EASE Lite软件库，支持多种不同通信端口，支持不同设备的同步接入，规约报文采用文件方式，依据不同设备规约类型灵活配置，完成IEC 60870-5，Modbus等系列规约转换。通过客户端软件实现样机对配电网设备的规约转换测试，获取到IEC 61850模型。</strong></p><p><br></p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/db1b1f4a-c5c5-4289-9142-7a488c1ae071><p class=pgc-img-caption></p></div><p>目前，基于IEC 61850的数字化变电站技术已经逐渐成熟，其优点得到了电力部门和设备厂商的广泛认同，并逐渐向变电站自动化以外的领域推广。IEC 61850第二版标题也改为“电力系统自动化通信网络和系统（communication networks and systems for power utility automation）”。变电站的出口延伸即为配电网，而配电网设备通信采用IEC 60870-5和Modbus规约。伴随着坚强智能电网和泛在电力物联网的发展，电力系统的规约趋向统一，配电网规约技术升级紧迫感加强。</p><p>近年来有不少配电网IEC 61850应用技术的研究，但主要集中在信息模型的建立。</p><ul class=list-paddingleft-2><li>有学者给出了分布式能源各系统的通信信息模型。</li><li>有学者对光伏系统中相关设备功能建模。</li><li>有学者给出了绝缘故障监测通信信息模型。</li><li>有学者展开配电网馈线自动化信息模型研究。</li><li>有学者将IEC 61850的订阅发布功能应用到在线检测信息系统中。</li><li>有学者研究采用可扩展消息和在线表示协议传输IEC 61850信息。</li><li>有学者介绍了IEC 61850技术流程，并在开发板上进行了部分功能模拟。</li></ul><p>综上所述，配电网设备的IEC 61850规约支持是未来配电网数字化发展的主流方向之一，而现有研究重点放在信息模型建立，对配电网设备快速实现规约升级涉及较少。</p><p>本文设计了一种配电网嵌入式IEC 61850智能规约转换网关，从方便现有配电网中设备快速支持IEC 61850规约角度出发，技术上基于国外成熟的底层协议库进行二次开发来保证核心规约通信的可靠性，性能上通过高性能微处理器来保障软件运行和规约数据处理要求的实效性，支持不同方式通信接口，满足不同设备的同步接入，基于嵌入式Linux的多任务模式，使得多设备多规约的转换可同步进行，满足了现有配电网系统各种设备规约转换的需求。</p><h1 class=pgc-h-arrow-right>1 系统描述</h1><p>当前国内配电网系统应用最多的通信规约是IEC 60870-5和Modbus，虽然已经是成熟技术，但在长期的工程应用中其不足也逐渐显现，主要表现为：</p><ul class=list-paddingleft-2><li>①IEC 60870-5系列标准技术本质是给出一个大的通信数据框架格式，支持该规约的设备按此格式上组帧数据，不同厂家的理解差异导致支持该规约的不同厂家设备在同一系统中不能互通，需要厂家技术人员现场支持，互相配对规约；</li><li>②Modbus规约简单，各项数据按点表号顺序存放，各点表号代表的数据含义完全由设备厂家自定义，要想实现设备互通，也需设备厂家统一制定点表含义。</li></ul><p>IEC 61850技术在变电站中的成功应用，克服了不同厂家设备互操作的难题。其采用分层分布式的体系结构和面向对象的建模技术，实现数据对象的自我描述，为不同厂商的智能电子设备实现互操作和无缝集成提供有效途径，有效解决了现有通信规约技术的缺点，其特点有：</p><ul class=list-paddingleft-2><li>①提出了信息分层的概念，将变电站从逻辑上划分为站控层、间隔层和过程层；</li><li>②采用面向对象的建模技术，定义了抽象通信服务接口ACSI，定义了服务器、逻辑设备、逻辑节点及数据对象等模型，并定义了对象之间的通信服务；</li><li>③采用统一的命名规则，实现数据自描述；</li><li>④通过特定通信服务映射（specific communication serve mapping, SCSM），实现通信服务和具体协议的相独立。</li></ul><p>由上可知，将IEC 61850引入到配电网现有通信体系中，能克服现有配电网通信规约的缺点，但IEC 61850对硬件要求较高，软件开发难度也更大，在现有配用电设备上直接升级比较困难，开发周期长。嵌入式IEC 61850智能规约转换网关实现了配电网设备对IEC 61850的支持。配电网设备软硬件无需升级，将自身通信接口与规约转换网关的通信接口连接，二者交互信息。</p><p>信息交互的规约为配电网设备当前的通用协议，规约转换网关实现规约转换，对主站进行IEC 61850协议通信，实现配电网设备的IEC 61850协议支持，具体应用示意如图1所示。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b2c73110830a41909b832a51cd1568e4><p class=pgc-img-caption>图1 嵌入式IEC 61850智能规约转换网关应用示意图</p></div><h1 class=pgc-h-arrow-right>2 硬件设计</h1><p>IEC 61850智能规约转换网关硬件选用Freesclae的I.mx287微处理器作为核心控制单元，其芯片为ARM956EJ-S架构，主频可达454MHz，指令缓存16K、数据缓存32K，片内有128K SRAM和128K ROM，支持丰富的外设接口（包括两个支持IEC1588的Ethenet口），能够充分满足网关嵌入式软件设计需求。</p><p>同时，该芯片内部集成了电源管理单元，支持3.3V/1.8V的DC-DC输出，满足外围芯片的供电需求，因此电源设计时只需满足芯片的5V供电即可，简化了电路的硬件设计。外围芯片需配置DDR2 SDRAM和NAND FLASH，已满足嵌入式Linux系统的开发要求。硬件设计如图2所示。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ba5adf57983e4076a76338c78f9e4ef7><p class=pgc-img-caption>图2 嵌入式IEC 61850智能规约转换网关硬件示意图</p></div><h1 class=pgc-h-arrow-right>3 软件设计</h1><p>IEC 61850智能规约转换网关提供通用接口（RS 485/RS 232、Ethenet等），实现与待转换设备的连接。网关解析规约报文配置文件，通过接口发收规约报文获取设备原始数据，然后数据映射模块根据数据映射配置文件将这些原始数据映射到客户智能电子设备性能描述（IED capability description, ICD）中具体的数据对象属性，最后IEC 61850服务模块通过调用MMS-EASE Lite 软件库实现制造引文规范（manufacturing message specification, MMS）报文通信，通过客户端接口和外接IEC 61850标准客户端实现数据模型交互，在客户设备无需整改的基础上完成客户设备对IEC 61850通信的支持，整体转换流程如图3所示。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c26dc2b6a15a4c25b87f49b0c95cff53><p class=pgc-img-caption>图3 嵌入式IEC 61850智能规约转换网关转换流程功能示意图</p></div><p><strong>3.1 规约报文配置文件</strong></p><p>程序启动时读取ini格式的规约报文配置文件，获得嵌入式规约转换网关所需要转换的对应报文。报文的配置格式如下：</p><p>Modbus报文配置格式：</p><p>[frame]</p><p>[portofframe]=1 //帧属于哪个串口</p><p>[Sequence]=1 //帧在所有帧中的顺序</p><p>[Type]=1 //为保留值</p><p>[DevAddr]=1 //帧所属设备的链路地址</p><p>[FC]=2 //帧功能码</p><p>[Addr]=0 //请求数据起始地址</p><p>[Length]=16 //请求数据地址长度</p><p>[Dataaddr]=0 //为保留值</p><p>[Datalen]=0 //为保留值</p><p>[\frame]</p><p><br></p><p>101报文帧配置格式：</p><p>[frame]</p><p>[portofframe]=1 //帧属于哪个串口</p><p>[Address]=1 //帧所属设备的链路地址</p><p>[Identifier]=100 //类型标识</p><p>[\frame]</p><p>104报文帧配置格式：</p><p>[104_Frame]</p><p>[Address]=1 //链路地址</p><p>[Identifier]=103 //类型标识</p><p>[\104_Frame]</p><p>对支持Modbus的客户设备，智能规约转换网关直接根据配置文件召唤设备实时数据。对支持IEC 60870-5-101的客户设备，智能规约转换网关首先发送链路状态查询、链路复位帧，链路正常后查询是否有遥控帧或设置定值帧需要发送，有则进入遥控或设置定值流程；没有则按照配置文件依次发送对应的报文帧，召唤设备实时原始数据。</p><p>对支持IEC 60870-5-104的客户设备，智能规约转换网关打开其对应的端口，获取socket，发起TCP连接，成功建立连接后向设备发送停止、激活帧，完成链路的复位和初始化过程，链路正常后首先查询是否有遥控帧或者设置定值帧需要发送，有则进入遥控或者设置定值流程；没有则按照配置文件依次发送对应的报文帧，召唤设备实时原始数据。</p><p><strong>3.2 数据映射</strong></p><p>规约解析模块通过解析设备规约获得原始数据，再利用映射文件将其映射到具体的数据模型。映射文件中包含了设备模型中所有具体数据模型的相关映射信息，表1给出配电站所终端（distribution terminal uint, DTU）中1路开关的关键数据映射文件描述。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8aa1895225bf4be6bae04185a7fbe01c><p class=pgc-img-caption>表1 映射文件描述表</p></div><p><strong>3.3 MMS EASE Lite</strong></p><p>SISCO的MMS-ESAE Lite是MMS的C语言编程接口，是优化了的支持MMS和IEC 61850的源码包，专为嵌入式环境设计。</p><p>嵌入式IEC 61850智能规约转换网关的软件是基于该软件库中的MVL（MMS-Virtual-Lite）应用编程接口，IEC 61850对象模型的服务映射到MMS服务，MMS的服务通过MVL接口来实现，这三者的关系如图4所示，其中u_mvl_xxx_ind接口函数是为用户定义的反馈函数，mplas_xxx_resp是使用成对原语接口的应答函数，mvlas_xxx_resp是使用虚拟机接口的应答函数。</p><p><strong>3.4 软件设计</strong></p><p>网关软件基于Linux设计，流程如图5所示。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2299017d55004e8d82c6d8c4eb943d2b><p class=pgc-img-caption>图4 IEC 61850对象、MMS服务、MVL函数关系图</p></div><p><br></p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/52d74632ceb74a0e985e45db7461c2f4><p class=pgc-img-caption>图5 软件流程图</p></div><p>系统读取参数获取系本次需要转换协议的参数，启动对应的配电网设备协议线程。因线程启动需要时间，为保证数据同步，系统延迟10s等待线程建立成功。配电网设备协议线程建立成功后，启动IEC 61850模型初始化流程，进行模型数据和控制模型映射，映射完成后启动IEC 61850服务器，分配服务端所需资源，随后初始化底层协议栈和响应客户端监听，初始化IEC 61850协议中所需应用数据参数。</p><p>上述所有功能完成后，启动IEC 61850具体通信协议：MMS线程，goose的发布/订阅线程，同步启动的数据更新线程实现配电网设备协议数据与IEC 61850规约数据域中数据同步。</p><h1 class=pgc-h-arrow-right>4 结果实现</h1><p>嵌入式IEC 61850智能规约转换网关实现了配电网设备的规约转换，本文通对过DTU的规约转换测试验证网关的协议功能，网关的样机如图6所示，DTU设备接入样机网口0，样机网口1接入上位机。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6827ee3ff46a4758b40f6c0659be44ef><p class=pgc-img-caption>图6 嵌入式IEC 61850智能规约转换网关样机</p></div><p>上位机运行通用IEC 61850客户端软件，模拟主站系统，通过和智能网关交互MMS报文，获得设备自描述模型，得到设备具有的功能，实现互操作。获取的设备模型如图7所示。</p><div class=pgc-img><img alt="配电网嵌入式IEC 61850智能规约转换网关设计" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6abdebd443af46cf9b84bda0bec54ef4><p class=pgc-img-caption>图7 客户端获得的DTU设备IEC 61850模型</p></div><h1 class=pgc-h-arrow-right>结论</h1><p>嵌入式IEC 61850智能规约转换网关设计硬件上选用高性能芯片，可靠稳定，支持多路设备通信接口。软件设计基于通用的嵌入式Linux平台和标准的MMS EASE Lite软件库，支持智能电网常用的规约，规约报文可通过配置文件根据不同的具体设备灵活配置，具有可扩展性。</p><p>实际应用中，配电网设备厂商无需对现有产品进行改动，只需将其现有通信端口连接到IEC 61850智能规约转换网关的对应端口，正确配置，即可快速实现IEC 61850通信支持，加快产品技术升级，减少研发成本投入。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'配电网','IEC','61850'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>