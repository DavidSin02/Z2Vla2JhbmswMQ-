<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 | 极客快訊</title><meta property="og:title" content="变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/152556864240116cd8a13a7"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6c73a03.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6c73a03.html><meta property="article:published_time" content="2020-10-29T21:11:31+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:31+08:00"><meta name=Keywords content><meta name=description content="变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/c6c73a03.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>在前几篇文章中我们说到了MODBUS的ASCII码数据模式通讯去控制变频器，以及RTU模式的CRC校验码的PLC计算程序，今天就说下采用RTU数据模式控制变频器，包括变频器的调频、正转、反转、停止命令的写入及运行频率的读取。</p><p><strong>先了解下RTU帧的结构：</strong></p><p><strong>帧头 3.5个字节的通讯时间</strong></p><p><strong>从机地址： 通讯地址0~247, 0代表广播</strong></p><p><strong>功能码： 01H、02H、03H等</strong></p><p><strong>数据： 2*N个字节的数据，为通讯的主要内容，包括数据地址、数据内容等。</strong></p><p><strong>CRC 低位： CRC校验码</strong></p><p><strong>CRC 高位： CRC校验码</strong></p><p><strong>帧尾： 3.5个字节的通讯时间</strong></p><p>在变频器的控制器，功能码主要用到两个03H和06H。</p><p>03H表示主机向变频器读取数据，要读取多少个数据由命令中“数据个数”而定，最多可以读取 16 个数据。读取的参数地址必须是连续的。每个数据占用的字节长度为 2 字节，也即一个字（word）。以下命令格式均以 16 进制表示（数字后跟一个“H”表示 16 进制数字），一个 16 进制占用一个字节,主要作用是读取变频器的参数及工作状态，比如变频器的频率、电压、电流以及运行状态(正转、反转、停机、故障状态的监视等)</p><p>06H的命令表示主机向变频器写数据，一条命令只能写一个数据，不能写多个数据。它的作用是改变变</p><p>频器的参数及工作方式，比如控制变频器正反转、停机，设定频率、转矩、加减速时间等。</p><p>我们从主机往从机发送命令后，如果发送成功，从机会返回一个回应信息，从这个返回信息中可以看出我们想要得到的东西，<strong>这里说下发送写命令06H,它的返回信息与发送命令是一样的，所以我们只有在读命令03H才用到返回信息。下面我们举个例子说明发送信息与返回信息。</strong></p><p><strong>03H,从通讯地址为01的变频器，以地址0004H开始，连续读取两个数据内容就是去读0004H和0005H地址的内容。</strong></p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/152556864240116cd8a13a7></p><p class=pgc-img-caption>03H</p><p>从上表看出主机向从机发送命令需要知道从机的地址、功能码(命令)、数据地址、数据个数、CRC校验码，以上例子中我们知道从机的地址是01H，功能码是读03H，地址是0004H，拆分成高低位，数据个数是俩个0002H，同样拆分，最后的CRC校验码是根据以上数据计算出来的，数据发送到从机后，从机也根据信息计算一个CRC校验码，如果与主机计算的校验码一致，则通讯成功，会向从机发送一组返回信号，我们就知道了从变频器中读取的信号，例如0004H和0005H地址的数据是5000，0， 那么返回信息除了地址与命令码不变， 后面的数据就变成了字节个数、 数据内容了，5000的16进制是1388H， 因此数据内容是高位13H， 低位88H。</p><p>接下来我们举例子说下英威腾变频器的相关控制(电机正反转停止、频率设定、频率读取)</p><p><strong>我们知道正反转停止、频率设定是写指令06H，频率读取是读指令03H，这大家应该清楚。</strong></p><p>由变频器手册知道通讯控制的地址为2000H， 正转数据位0001H， 反转是0002H， 停机是0005H。</p><p>通讯频率设定值的地址是2001H， 变频器运行频率地址是3000H。</p><p>设置变频器的站号是01H。</p><p>1、 正转指令，<strong>01 06 20 00 00 01 67 90</strong></p><p>2、 反转指令，<strong>01 06 20 00 00 02 81 A7</strong></p><p>3、 停机指令，<strong>01 06 20 00 00 02 C0 65</strong></p><p>4、 设定频率，<strong>01 06 20 01 0B B8 56 E4</strong> <strong>(设置变频器30.00Hz运行)</strong></p><p>5、 运行频率，<strong>01 03 30 00 00 01 8B 0A (返回信息，01 03 02 0B B8 BF 06)</strong></p><p><strong>以上指令是否明白？</strong></p><p><strong>那么上面的清楚后，</strong> 如何在PLC发送这些指令呢， 这里我们采用RS指令完成。</p><p>RS指令在以前的MODBUS-ASCII码通讯文章也说过， 指令格式是RS S m D n， 发送以S为开始的m个数据， 接受以D为开始的n个数据。 比如发送正转指令，RS D0 K8 D20 K8，D0 D1 D2 D3 D4 D5 D6 D7是发送数据，D20 D21 D22 D23 D24 D25 D26 D27是接受数据，D0的内容是01，D1是06 ， 依此论推下去，接受信息与发送数据一致。</p><p>下面看下实际例子：</p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15255736884614a9050fb9e></p><p class=pgc-img-caption>系统连接</p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1525573912831a7eceebe0f></p><p class=pgc-img-caption>正转指令</p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1525573998426299a87e602></p><p class=pgc-img-caption>反转指</p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15255740773672f9cac6c1f></p><p class=pgc-img-caption>停止指令</p><p><img alt=变频器的MODBUS-RTU模式通讯控制，采用RS指令发送命令内容说明 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15255741110418842f31c0b></p><p class=pgc-img-caption>频率读取指令</p><p>从以上的图中看出， 写入指令的发送和接受都是一样的， 读取指令的接受数据就不一样了， 就比如频率读取指令返回的信息中就没有地址数据， 它的返回数据就是字节个数2， 数据内容07 D0， 转换成十进制就是2000， 也就是20.00Hz， 这在PLC编程时候需要注意。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'变频器','MODBUS','RTU'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>