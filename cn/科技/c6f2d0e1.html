<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>进阶Python，从编写Python函数开始 | 极客快訊</title><meta property="og:title" content="进阶Python，从编写Python函数开始 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/51b384b607d04e45b26f4204be770617"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c6f2d0e1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c6f2d0e1.html><meta property="article:published_time" content="2020-11-14T21:00:48+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:48+08:00"><meta name=Keywords content><meta name=description content="进阶Python，从编写Python函数开始"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/c6f2d0e1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>进阶Python，从编写Python函数开始</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>好多同学都有这样的疑惑，我学习了python的基础语法，那么具体应用该从哪里入手呢？首先大家要确定，代码必须用起来才能越来越熟练！读懂十行代码不如自己亲自上手编写一行！代码想熟练最好的方法就是能够通过代码解决工作中的实际问题，例如完成UI自动化测试、接口测试、创建测试数据、构建测试环境、清理数据环境等等。上述这些场景我们都可以从把要解决的问题封装成函数开始，例如我用ui自动化进行登陆，可以把登陆的几行代码封装成函数login(p_user,p_pwd)，做接口测试可以把常用的get和post方法封装成 get（p_url）和post（p_url，p_data）。在这里我会详细的讲解python中关于函数的基础知识，最后以selenium 进行百度搜索为例来讲解自动化测试中如何把具体业务封装成方法实现代码复用，相信大家一定会有所收获！​</p><div class=pgc-img><img alt=进阶Python，从编写Python函数开始 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/51b384b607d04e45b26f4204be770617><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>函数基础知识</h1><p>函数的本质就是代码复用，在面向对象中把函数称为方法。Python提供了许多内建函数，比如</p><p>print()。我们也可以自己创建函数，这被叫做用户自定义函数。以下是函数定义的简单规则：</p><ul><li>函数代码块以def关键词开头，后接函数标识符名称和圆括号()。</li><li>圆括号之间用于定义参数。</li><li>函数内容以冒号起始，并且缩进。</li><li>return [表达式] 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回None</li></ul><p>例如：</p><pre><code>def func():       print("函数实例")func()</code></pre><p>输出结果是：</p><p>函数实例</p><h1 class=pgc-h-arrow-right>函数的参数</h1><p>形参和实参</p><p>定义一个带参数的函数，如下：</p><pre><code>def func_para(p_str):       print(p_str)</code></pre><p>在函数func_para中，p_str就是一个形参，也就是形式参数，是用来接收调用函数时传入的参数，你传的是什么它就是什么。实参就是实际参数，在调用函数的时候，传递是Kevin，那么Kevin就是实参，传递的是Mike，那么Mike也是实参，实参传递给函数后，会赋值给函数中的形参</p><p>把实参Kevin，赋值给函数，即func_para(“Kevin”)，输出结果是Kevin</p><p>把实参Mike，赋值给函数，即func_para(“Mike”)，输出结果是Mike</p><h1 class=pgc-h-arrow-right>函数的返回值</h1><p>调用方运行函数会得到一个值。首先说明，所有的函数都是有返回值的，如果编程人员没有指定返回值，那默认会返回None。</p><p>例如：</p><pre><code>def func_return(p_str):    return p_strstr=func_return (“Kevin”)print(str)</code></pre><p>运行结果</p><p>Kevin</p><h1 class=pgc-h-arrow-right>函数高级用法</h1><p>以上是python中函数最基础的定义，相信绝大多数同学都知道，接下来我会给大家介绍一些在python中函数的高级用法</p><h1 class=pgc-h-arrow-right>参数的默认值</h1><p>python允许我们给函数的形参设置一个默认值，不传参数调用的话，就统一默认是这个值。</p><pre><code>def func_default(name='kevin'):      print("名字是"+name)func_default()func_default("mike")</code></pre><p>输出：</p><p>名字是kevin</p><p>名字是mike</p><h1 class=pgc-h-arrow-right>关键字参数</h1><p>关键字参数让你可以不用考虑函数的参数位置，你需以键值对的形式指定参数的对应形参。</p><pre><code>def func_key(name,age):       print("你好"+ name+", 你的年龄是"+age+" !")func_key(age='38',name='kevin')</code></pre><p>输出：</p><p>你好kevin, 你的年龄是38 !</p><h1 class=pgc-h-arrow-right>不固定长度参数</h1><p>有时候我们需要允许用户提供任意数量的参数，函数的形参可以带个星号来接收，不管调用函数的时候传递了多少实参，都将被收集到形参这个变量当中，形参的类型是元组。例如：</p><pre><code>def fun_unfixedlength_1 (*args):        print(args)fun_unfixedlength_1 ('kevin','38','67674297')</code></pre><p>输出</p><p>('kevin', '38', '67674297')</p><p>还有一种是带两个星号的形参，用于接收键值对形式的实参，导入到函数中的类型是字典。</p><pre><code>def fun_unfixedlength_2 (**args):      print(args)fun_unfixedlength_2(name='kevin',age='38',qq='67674297')</code></pre><p>输出</p><p>{'name': 'kevin', 'age':'38', 'qq': '67674297'}</p><h1 class=pgc-h-arrow-right>匿名函数</h1><p>匿名函数就是不用走正常函数定义的流程，可以直接定义一个简单的函数并把函数本身赋值给一个变量，使得这个变量可以像函数一样被调用，在python中可以用lambda关键字来申明定义一个匿名函数。例如</p><pre><code>lambda_demo = lambda first_name,last_name : first_name + " "+last_namename = lambda_demo('kevin','li')print(name)</code></pre><p>输出kevin li</p><h1 class=pgc-h-arrow-right>函数实际应用</h1><p>最后我结合ui自动化测试给大家举一个函数在测试工作中的实际应用。我们以selenium 进行百度搜索为例，selenium的核心代码如下：</p><pre><code>driver.get("https://www.baidu.com/")driver.find_element_by_id("kw").clear()driver.find_element_by_id("kw").send_keys("selenium")  #输入框输入seleniumdriver.find_element_by_id("su").click()  #点击搜索按钮</code></pre><p>备注：我的头条中有很多文章讲解了关于selenium应用的具体方法，在这里就不再赘述了。可以参考：</p><p><a class=pgc-link data-content=mp data-source=innerLink href="https://www.toutiao.com/i6814273245932421646/?group_id=6814273245932421646" rel="noopener noreferrer" target=_blank>一文搞定Java和Python在Selenium3中的应用</a></p><p><a class=pgc-link data-content=mp data-source=innerLink href="https://www.toutiao.com/i6753428544564494862/?group_id=6753428544564494862" rel="noopener noreferrer" target=_blank>Selenium原理精讲</a></p><p>场景分析：由于搜索的关键字是千变万化的，而进行搜索的动作是固定的，即：打开百度网页>在输入框输入关键字>点击百度一下搜索按钮。所以我们可以把该场景编写为函数，用一个函数来处理进行各种关键字搜索的需求。核心代码实现如下：</p><pre><code>def baidu_search(p_key):    driver.get("https://www.baidu.com/")    driver.find_element_by_id("kw").clear()    driver.find_element_by_id("kw").send_keys(p_key)  # 输入框输入selenium    driver.find_element_by_id("su").click()  # 点击搜索按钮</code></pre><p>如果大家想通过函数来检查是否找到了需要搜索的关键字，那么可以对函数进行改进，如果在搜索结果页面中出现了“百度为您找到相关结果约*个”的文字证明搜索到了关键字返回True，否则返回</p><p>False，如下图所示：</p><div class=pgc-img><img alt=进阶Python，从编写Python函数开始 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9cf10c2435254728a12f7dd3a8301728><p class=pgc-img-caption></p></div><p>改进后的代码方法如下：</p><pre><code>def baidu_search(p_key):    driver.get("https://www.baidu.com/")    driver.find_element_by_id("kw").clear()    driver.find_element_by_id("kw").send_keys(p_key)  # 输入框输入selenium    driver.find_element_by_id("su").click()  # 点击搜索按钮    time.sleep(3)try:       result=driver.find_elements_by_class_name("nums_text").get_attribute('value') #获取搜索结果的统计个数值,默认是:百度为您找到相关结果约...个       if re.match('百度为您找到相关结果约.*个', result)is None:  #通过正则进行匹配，没匹配到正则返回None           return False       else:           return True    exceptNoSuchElementException as e:           return False    return True</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Python','进阶','编写'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>