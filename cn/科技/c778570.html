<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/5389bebf2485498da2d2695eb8d1cc15"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c778570.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c778570.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c778570.html><meta property="article:published_time" content="2020-10-29T20:59:54+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:54+08:00"><meta name=Keywords content><meta name=description content="Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/c778570.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>ä¸‹é¢åˆ†äº«Elasticsearch v7.x é›†ç¾¤æ­å»ºè¿‡ç¨‹ä¸­ï¼ŒèŠ‚ç‚¹é…ç½®å‚æ•°è¯¦ç»†è¯´æ˜ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œè¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å’Œç°å®æ¡ä»¶ï¼Œåšå‡ºåˆ‡åˆå®é™…çš„æ–¹æ¡ˆã€‚</p><p>Elasticsearchçš„é…ç½®æ–‡ä»¶æœ‰elasticsearch.ymlã€log4j2.propertiesä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­elasticsearch.ymlæ˜¯ç”¨æ¥é…ç½®ElasticsearchæœåŠ¡çš„ï¼Œlog4j2.propertiesæ˜¯ç”¨æ¥é…ç½®æ—¥å¿—æ–‡ä»¶çš„ã€‚</p><div class=pgc-img><img alt=Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5389bebf2485498da2d2695eb8d1cc15><p class=pgc-img-caption></p></div><p>ä¸‹é¢æ˜¯elasticsearch.ymlé…ç½®æ–‡ä»¶çš„è¯¦ç»†è¯´æ˜ã€‚</p><p><strong class=highlight-text>Elasticsearch 7.x è®¢å•ä¸­å¿ƒæŠ€æœ¯ä¸“æ ï¼Œä»çœŸå®é¡¹ç›®å®è·µã€é¡¹ç›®æºç å’Œç”Ÿäº§æ•…éšœåˆ†æç­‰å„ä¸ªæ–¹é¢ä»‹ç»äº†Elasticsearchç›¸å…³çš„çŸ¥è¯†ã€‚</strong></p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf6-ttcdn-tos.pstatp.com/img/pgc-image/c69f53f1ce274caebddb9c242eb1b75f", "title": "Elasticsearch 7.x\u8ba2\u5355\u4e2d\u5fc3\u5b9e\u6218", "url": "", "price": 39.8, "column_id": "6739301223356170507", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 4.78, "thumb_url": "http://p3.pstatp.com/large/pgc-image/c69f53f1ce274caebddb9c242eb1b75f", "sold": 125}'><p class=column-placeholder></p></div><p><br></p><h1 class=pgc-h-arrow-right>ä¸€ã€åŸºæœ¬é…ç½®å‚æ•°</h1><p># é›†ç¾¤åç§°</p><p>cluster.name: "es_ordercluster"</p><p># èŠ‚ç‚¹åç§°ï¼Œè¿™å„¿æˆ‘ç›´æ¥å–åä¸ºorder-node1</p><p>node.name:order-node1</p><p># æ˜¯å¦å¯ä»¥æˆä¸ºmasterèŠ‚ç‚¹</p><p>node.master: true</p><p># æ˜¯å¦å…è®¸è¯¥èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œé»˜è®¤å¼€å¯</p><p>node.data: true</p><p># ç½‘ç»œç»‘å®šï¼Œè¿™é‡Œæˆ‘ç»‘å®š 10.19.156.194</p><p>network.host: 10.19.156.194</p><p><br></p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf1-ttcdn-tos.pstatp.com/img/pgc-image/d48ac1a3289e485e8b5f027beb4cfac1", "title": "Elasticsearch 7.x\u4ece\u5165\u95e8\u5230\u7cbe\u901a", "url": "", "price": 39.8, "column_id": "6733933729732886796", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 4.78, "thumb_url": "http://p9.pstatp.com/large/pgc-image/d48ac1a3289e485e8b5f027beb4cfac1", "sold": 124}'><p class=column-placeholder></p></div><p><br></p><h1 class=pgc-h-arrow-right>äºŒã€ç½‘ç»œç«¯å£å·</h1><p>Elasticsearch å¯åŠ¨ç›‘å¬ä¸¤ä¸ªç«¯å£ï¼Œ9300å’Œ9200ï¼ˆé»˜è®¤ï¼‰ã€‚</p><p>9300ç«¯å£æ˜¯ä½¿ç”¨tcpå®¢æˆ·ç«¯è¿æ¥ä½¿ç”¨çš„ç«¯å£ï¼›</p><p>9200ç«¯å£æ˜¯é€šè¿‡httpåè®®è¿æ¥Elasticsearchä½¿ç”¨çš„ç«¯å£ï¼›</p><p><br></p><p>å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹é»˜è®¤çš„ç«¯å£å·ï¼Œæ¯”å¦‚å’Œå…¶ä»–åº”ç”¨ä½¿ç”¨çš„ç«¯å£å·å­˜åœ¨å†²çªï¼š</p><blockquote class=pgc-blockquote-abstract><p>#</p><p># Set a custom port for HTTP:</p><p>#</p><p>transport.port: 8300</p><p>http.port: 8200</p></blockquote><p><br></p><p>Elasticsearchæ”¯æŒå¼€ç®±å³ç”¨ï¼Œå¯ä»¥æ²¡æœ‰ä»»ä½•ç½‘ç»œé…ç½®ã€‚Elasticsearchå°†ç»‘å®šåˆ°å¯ç”¨çš„ç¯å›åœ°å€ï¼Œå¹¶å°†æ‰«ææœ¬åœ°ç«¯å£9300åˆ°9305ä»¥å°è¯•è¿æ¥åˆ°åœ¨åŒä¸€æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å…¶ä»–èŠ‚ç‚¹ã€‚ è¿™æä¾›äº†è‡ªåŠ¨é›†ç¾¤ä½“éªŒï¼Œæ— éœ€è¿›è¡Œä»»ä½•é…ç½®ã€‚</p><p><br></p><h1 class=pgc-h-arrow-right>ä¸‰ã€ä¸»èŠ‚ç‚¹çš„èŠ‚ç‚¹åœ°å€é…ç½®</h1><p>discovery.seed_hosts é…ç½®</p><p>æ­¤è®¾ç½®é€šå¸¸åº”åŒ…å«é›†ç¾¤ä¸­æ‰€æœ‰ç¬¦åˆä¸»èŠ‚ç‚¹çš„èŠ‚ç‚¹åœ°å€ï¼ˆ master-eligible nodes ï¼‰ã€‚ æ­¤è®¾ç½®åŒ…å«ä¸»æœºæ•°ç»„æˆ–é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚</p><p>æ¯ä¸ªå€¼åº”é‡‡ç”¨host:portæˆ–hostçš„å½¢å¼ï¼ˆå…¶ä¸­porté»˜è®¤ä¸ºè®¾ç½®transport.profiles.default.portï¼Œå¦‚æœæœªè®¾ç½®åˆ™è¿”å›transport.portï¼‰ã€‚ è¯·æ³¨æ„ï¼Œå¿…é¡»å°†IPv6ä¸»æœºç½®äºæ‹¬å·å†…ã€‚ æ­¤è®¾ç½®çš„é»˜è®¤å€¼ä¸º127.0.0.1ï¼Œ[:: 1]ã€‚</p><p>è¯¥è®¾ç½®ä»¥å‰ç§°ä¸ºdiscovery.zen.ping.unicast.hostsã€‚å®ƒçš„æ—§åç§°å·²ç»ä¸èµæˆä½¿ç”¨äº†ï¼Œä½†ä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§ï¼Œå®ƒå°†ç»§ç»­å·¥ä½œã€‚åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­ï¼Œå¯¹æ—§åç§°çš„æ”¯æŒå°†è¢«åˆ é™¤ã€‚</p><p>å› æ­¤ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå»ºè®®ä½¿ç”¨discovery.seed_hostsã€‚</p><p>discovery.seed_hosts: ["10.131.113.95:8300", "10.131.213.95:8300", "10.131.213.97:8300"]</p><p><br></p><h1 class=pgc-h-arrow-right>å››ã€ä¸»èŠ‚ç‚¹é€‰ä¸¾åˆ—è¡¨</h1><p>cluster.initial_master_nodes é…ç½®</p><p>åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨å…¨æ–°çš„Elasticsearché›†ç¾¤æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªé›†ç¾¤å¼•å¯¼æ­¥éª¤ï¼Œè¯¥æ­¥éª¤ç¡®å®šåœ¨ç¬¬ä¸€æ¬¡é€‰ä¸¾ä¸­è®¡ç¥¨çš„ä¸»åˆæ ¼èŠ‚ç‚¹é›†ï¼ˆmaster-eligibleï¼‰ã€‚</p><p>åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¦‚æœæœªé…ç½®ï¼Œåˆ™æ­¤æ­¥éª¤ç”±èŠ‚ç‚¹æœ¬èº«è‡ªåŠ¨æ‰§è¡Œã€‚</p><p>ç”±äºæ­¤è‡ªåŠ¨å¼•å¯¼æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå› æ­¤å½“æˆ‘ä»¬åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹å¯åŠ¨å…¨æ–°é›†ç¾¤æ—¶ï¼Œå¿…é¡»æ˜ç¡®åˆ—å‡ºç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹çš„åç§°æˆ–IPåœ°å€ï¼Œè¿™äº›èŠ‚ç‚¹çš„æŠ•ç¥¨åº”åœ¨ç¬¬ä¸€æ¬¡é€‰ä¸¾ä¸­è®¡æ•°ã€‚</p><p>ä½¿ç”¨cluster.initial_master_nodesè®¾ç½®æ­¤åˆ—è¡¨ã€‚</p><blockquote class=pgc-blockquote-abstract><p>cluster.initial_master_nodes: ["order-node1", "order-node2","order-node3"]</p></blockquote><div class=tt-column-card data-content='{"new_thumb_url": "http://sf1-ttcdn-tos.pstatp.com/img/pgc-image/a2bf4a7744c44b4f9116bbb961fdeeca", "title": "Spring Cloud\u5fae\u670d\u52a1\u67b6\u6784\u9879\u76ee\u5b9e\u6218", "url": "", "price": 33.6, "column_id": "6752726260226457863", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 4.03, "thumb_url": "http://p3.pstatp.com/large/pgc-image/a2bf4a7744c44b4f9116bbb961fdeeca", "sold": 54}'><p class=column-placeholder></p></div><p><br></p><h1 class=pgc-h-arrow-right>äº”ã€è®¾ç½®æœ€å°‘æ•°é‡ä¸»èŠ‚ç‚¹</h1><p>discovery.zen.minimum_master_nodes å‚æ•°</p><p>ä¸ºäº†é˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œ discovery.zen.minimum_master_nodes é…ç½®è‡³å…³é‡è¦ï¼Œ ä»¥ä¾¿æ¯ä¸ªå€™é€‰ä¸»èŠ‚ç‚¹çŸ¥é“ä¸ºäº†å½¢æˆé›†ç¾¤è€Œå¿…é¡»å¯è§çš„æœ€å°‘æ•°é‡çš„å€™é€‰ä¸»èŠ‚ç‚¹ã€‚è¿™ä¸ªé…ç½®å°±æ˜¯å‘Šè¯‰ Elasticsearch å½“æ²¡æœ‰è¶³å¤Ÿ master å€™é€‰èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±ä¸è¦è¿›è¡Œ master èŠ‚ç‚¹é€‰ä¸¾ï¼Œç­‰ master å€™é€‰èŠ‚ç‚¹è¶³å¤Ÿäº†æ‰è¿›è¡Œé€‰ä¸¾ã€‚</p><p>æ²¡æœ‰è¿™ç§è®¾ç½®ï¼Œé‡åˆ°ç½‘ç»œæ•…éšœçš„ç¾¤é›†æœ‰å¯èƒ½å°†ç¾¤é›†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„ç¾¤é›†ï¼ˆè„‘è£‚ï¼‰ï¼Œè¿™å°†å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p><p>ä¸ºäº†é¿å…è„‘è£‚ï¼Œå€™é€‰ä¸»èŠ‚ç‚¹çš„æ•°é‡åº”è¯¥è®¾ç½®ä¸ºï¼š</p><p>(master_eligible_nodes / 2) + 1</p><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœç°åœ¨æœ‰3ä¸ªèŠ‚ç‚¹ï¼Œæœ€å°å€™é€‰ä¸»èŠ‚ç‚¹æ•°åº”è¯¥æ˜¯ï¼ˆ3/2)+1=2ã€‚</p><p>discovery.zen.minimum_master_nodes: 2</p><p>å¦‚æœä½ æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½ é‡åˆ°éš¾é¢˜äº†ã€‚æ³•å®šæ•°å½“ç„¶æ˜¯ 2 ï¼Œä½†æ˜¯è¿™æ„å‘³ç€å¦‚æœæœ‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‚æ‰ï¼Œä½ æ•´ä¸ªé›†ç¾¤å°±ä¸å¯ç”¨äº†ã€‚ è®¾ç½®æˆ 1 å¯ä»¥ä¿è¯é›†ç¾¤çš„åŠŸèƒ½ï¼Œä½†æ˜¯å°±æ— æ³•ä¿è¯é›†ç¾¤è„‘è£‚äº†ï¼Œåƒè¿™æ ·çš„æƒ…å†µï¼Œä½ æœ€å¥½è‡³å°‘ä¿è¯æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚</p><p>discovery.zen.minimum_master_nodes: 2</p><p><br></p><p>æ³¨æ„ï¼šåœ¨Elasticsearch 7.0ä¸­ï¼Œå·²ç»å®Œå…¨é‡æ–°è€ƒè™‘å¹¶é‡å»ºäº†é›†ç¾¤åè°ƒå±‚ï¼ˆcluster coordination layerï¼‰ã€‚æ–°çš„å®ç°æä¾›äº†å®‰å…¨çš„ã€ç§’çº§çš„masterèŠ‚ç‚¹é€‰ä¸¾æ—¶é—´ï¼Œå…¶ä¸­å¯èƒ½éœ€è¦å‡ ç§’é’Ÿé€‰æ‹©ä¸€ä¸ªæ–°çš„masterï¼Œé’ˆå¯¹å…³é”®ä»»åŠ¡çš„éƒ¨ç½²è€Œè¨€ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯å€¼å¾—çš„ã€‚è¿™æ ·ï¼Œdiscovery.zen.minimum_master_nodes å‚æ•°å°±å–æ¶ˆäº†ï¼Œé›†ç¾¤çš„å¢é•¿å’Œæ”¶ç¼©å°†å˜å¾—æ›´åŠ å®‰å…¨å’Œæ–¹ä¾¿ï¼Œä»è€Œä¹Ÿå¤§å¤§å‡å°‘äº†é”™è¯¯é…ç½®ç³»ç»Ÿå‚æ•°çš„å¯èƒ½æ€§ã€‚</p><p><strong>åœ¨Elasticsearch 7.xèŠ‚ç‚¹ä¸Šï¼Œå¯ä»¥é…ç½®discovery.zen.minimum_master_nodes å‚æ•°ï¼Œä½†æ˜¯ä¼šè¢«å¿½ç•¥ã€‚</strong></p><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£é“¾æ¥ï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes-7.0.html</p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf1-ttcdn-tos.pstatp.com/img/pgc-image/49ff30dcda184d8bbbbbe7992ccb78d4", "title": "Kafka v2.3 \u5feb\u901f\u5165\u95e8\u4e0e\u5b9e\u8df5", "url": "", "price": 32.8, "column_id": "6757730477320175883", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 3.94, "thumb_url": "http://p2.pstatp.com/large/pgc-image/49ff30dcda184d8bbbbbe7992ccb78d4", "sold": 58}'><p class=column-placeholder></p></div><p><br></p><h1 class=pgc-h-arrow-right>å…­ã€è®¾ç½®å­˜å‚¨è·¯å¾„</h1><p># ----------------------------------- Paths ------------------------------------</p><p># è®¾ç½®é…ç½®æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹</p><p># path.conf: /path/to/conf</p><p>#</p><p># è®¾ç½®ç´¢å¼•æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„dataæ–‡ä»¶å¤¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå­˜å‚¨è·¯å¾„ï¼Œç”¨é€—å·éš”å¼€ï¼Œä¾‹ï¼š</p><p># path.data: /path/to/data1,/path/to/data2</p><p># path.data: /path/to/data</p><p>#</p><p># è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹</p><p># path.logs: /path/to/logs</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¿æŒé»˜è®¤å€¼ï¼Œä¸éœ€è¦è°ƒæ•´ã€‚</p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf3-ttcdn-tos.pstatp.com/img/pgc-image/8b561d635e0f49e490afce370015b004", "title": "SkyWalking\u5206\u5e03\u5f0f\u94fe\u8def\u8ffd\u8e2a\u548c\u76d1\u63a7", "url": "", "price": 18.8, "column_id": "6749520901240258819", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 2.26, "thumb_url": "http://p0.pstatp.com/large/pgc-image/8b561d635e0f49e490afce370015b004", "sold": 65}'><p class=column-placeholder></p></div><p><br></p><h1 class=pgc-h-arrow-right>ä¸ƒã€é”å®šç‰©ç†å†…å­˜åœ°å€</h1><p>bootstrap.memory_lock: true</p><p>è¿™ä¸ªé…ç½®çš„æ„ä¹‰ï¼šé”å®šç‰©ç†å†…å­˜åœ°å€ï¼Œé˜²æ­¢Elasticsearchå†…å­˜è¢«äº¤æ¢å‡ºå»ï¼Œä¹Ÿå°±æ˜¯é¿å…Elasticsearchä½¿ç”¨swapäº¤æ¢åˆ†åŒºï¼Œé¢‘ç¹çš„äº¤æ¢ï¼Œä¼šå¯¼è‡´IOPSå˜é«˜ã€‚</p><p># ----------------------------------- Memory -----------------------------------</p><p>#</p><p># Lock the memory on startup:</p><p>#</p><p>bootstrap.memory_lock: true</p><p>#</p><p># Make sure that the heap size is set to about half the memory available</p><p># on the system and that the owner of the process is allowed to use this</p><p># limit.</p><p>#</p><p># Elasticsearch performs poorly when the system is swapping the memory.</p><p>#</p><p>è®¾ç½®å¥½åï¼Œå¯åŠ¨Elasticsearchä¼šæŠ¥é”™ï¼š</p><p>[1] bootstrap checks failed</p><p>[1]: memory locking requested for elasticsearch process but memory is not locked</p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf6-ttcdn-tos.pstatp.com/img/pgc-image/9b9a191184e44bac9a267fe3c2f3ac4e", "title": "Kubernetes \u96f6\u57fa\u7840\u8f7b\u677e\u5165\u95e8", "url": "", "price": 19.8, "column_id": "6821727817835741453", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 1.58, "thumb_url": "http://p4.pstatp.com/large/pgc-image/9b9a191184e44bac9a267fe3c2f3ac4e", "sold": 28}'><p class=column-placeholder></p></div><p><br></p><p>è¿™é‡Œéœ€è¦é¢å¤–è®¾ç½®ä¸‹ç³»ç»Ÿé…ç½®æ–‡ä»¶ éœ€è¦åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼š</p><p>ï¼ˆ1ï¼‰ä¿®æ”¹/etc/security/limits.conf</p><p>æœ€åæ·»åŠ ï¼š</p><blockquote class=pgc-blockquote-abstract><p>* soft nofile 65536</p><p>* hard nofile 65536</p><p>* soft nproc 131072</p><p>* hard nproc 131072</p><p>* soft memlock unlimited</p><p>* hard memlock unlimited</p></blockquote><div class=pgc-img><img alt=Elasticsearché›†ç¾¤é…ç½®æ–‡ä»¶elasticsearch.ymlè¯¦è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b16404675eb34fe487ed707e6dd9b1d4><p class=pgc-img-caption></p></div><p>ï¼ˆ2ï¼‰ä¿®æ”¹/etc/systemd/system.conf</p><p>ä¿®æ”¹ä¸‹é¢å‡ é¡¹ï¼š</p><p>DefaultLimitNOFILE=65536</p><p>DefaultLimitNPROC=32000</p><p>DefaultLimitMEMLOCK=infinity</p><p><br></p><p>ï¼ˆ3ï¼‰æœ€åæ‰§è¡Œé‡æ–°è½½å…¥</p><p>systemctl daemon-reload</p><p>æœ‰å…³å¦‚ä½•æ­£ç¡®è®¾ç½®å†…å­˜é”å®šçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å¯ç”¨bootstrap.memory_lockã€‚</p><p>https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration-memory.html#bootstrap-memory_lock</p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf6-ttcdn-tos.pstatp.com/img/pgc-image/1992e646cb2745529468d295b45111df", "title": "Hadoop v3.1\u5927\u6570\u636e\u6280\u672f\u5feb\u901f\u5165\u95e8", "url": "", "price": 19.8, "column_id": "6798735607502733581", "content": "", "author_description": "\u8f6f\u4ef6\u67b6\u6784", "share_price": 1.58, "thumb_url": "http://p7.pstatp.com/large/pgc-image/1992e646cb2745529468d295b45111df", "sold": 31}'><p class=column-placeholder></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'é…ç½®æ–‡ä»¶','Elasticsearch','elasticsearch'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>