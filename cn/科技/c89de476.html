<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>性能测试jmeter详解 | 极客快訊</title><meta property="og:title" content="性能测试jmeter详解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/eb7c617bb50949a1b86cfd61504f17c4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c89de476.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c89de476.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c89de476.html><meta property="article:published_time" content="2020-11-14T21:03:15+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:15+08:00"><meta name=Keywords content><meta name=description content="性能测试jmeter详解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/c89de476.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>性能测试jmeter详解</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>曾光红/文</p><p>目前最新版本发展到5.0版本，需要Java7以上版本环境，下载解压目录后，进入\apache-jmeter-5.0\bin\，双击ApacheJMeter.jar文件启动JMemter。</p><p style=text-align:justify>1、创建测试任务</p><p style=text-align:justify>添加线程组，右击测试计划，在快捷菜单单击添加-》线程(用户)-》线程组。设置线程组主要包含三个参数：线程数、Ramp-Up、循环次数。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/eb7c617bb50949a1b86cfd61504f17c4><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>线程数：设置虚拟用户数。一个虚拟用户占用一个进程或线程。线程数就相当于虚拟用户数。</p><p style=text-align:justify>Ramp-Up：设置的线程数启动时长，单位为秒。如果线程数为100，准备时长为20秒，那么需要20秒启动100个线程，平均每秒启动5个线程。</p><p style=text-align:justify>循环次数：每个线程发送请求的个数。如果线程数为100，循环次数为2，那么每个线程发送2次请求，总请求数为100*2=200次。如果勾选了“永远”复选框，那么所有线程会循环发送请求，直到手动单工具栏停止按钮，或者设置的线程运行时间结束才会停止运行。</p><p style=text-align:justify>这次针对接口测试，默认都为1就行。</p><p style=text-align:justify>2、添加get的HTTP请求</p><p style=text-align:justify>右击线路组，在快捷菜单单击添加-》取样器-》HTTP请求。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/61b4d350e51e465b916c0ebf86c2492e><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>协议：向目标服务器发送HTTP请求时的协议，可以是HTTP或HTTPS，默认不填为HTTP。</p><p style=text-align:justify>服务器IP和端口：输入目标服务器地址和端口号。</p><p style=text-align:justify>内容编码：默认值为iso8859</p><p style=text-align:justify>方法：针对请求方法选择</p><p style=text-align:justify>路径：输入请求目标地址</p><p style=text-align:justify>参数：录入查询的参数数值</p><p style=text-align:justify>3、添加post的HTTP请求</p><p style=text-align:justify>方法同上，只是请求方法不同，这次改用POST传递参数向服务器及POST请求的URL地址。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c4196f6e6fad41528be558e992957144><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>根据开发提供的接口文档，参考传入参数选项，录入进去。</p><p style=text-align:justify>4、添加断言</p><p style=text-align:justify>分别右击发布会查询信息和添加发布会信息，添加-》断言-》响应断言</p><p style=text-align:justify>这次选择响应文，然后录入需要匹配的数据。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/69c64e4b88ad496eb5f1ffe4a68b5423><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>5、添加察看结果树</p><p style=text-align:justify>右击发布系统项目，单击添加-》监听器-》察看结果树，运行后：</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/739e6d0240a64d00922058a90763be31><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>成功显示绿色标志，失败显示红色标示，可以查看到每个用例返回的数据。</p><p style=text-align:justify>6、添加用表格察看结果</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0b1e43beda3446ffa9c5252396eb6706><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>可以更详细查看到耗时及字节大小，结果状态，用例信息。</p><p style=text-align:justify>JMeter性能测试</p><p style=text-align:justify>由于JMeter支持录制不够好，现在常用的方法是使用Badboy录制,生成JMeter脚本,然后用JMeter打开,添加监听器来查看结果。</p><p style=text-align:justify>双击软件图标开启badboy即可看到以下界面：</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9eb4e16a4d1e4688af5f52e123a0a244><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>1、开始录制</p><p style=text-align:justify>在地址栏(图中用红色框住部分)中输入你需要录制的Web应用的URL,并点击红圆点按钮开始录制。开始录制后,你可以直接在Badboy内嵌的浏览器(主界面的右侧)中对被测Web应用进行操作,所有的操作都会被记录在主界面左侧的编辑窗口中：如下图所示</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a1823e7360e94e1ca5c36b1184763b18><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>将脚本导出为jmeter</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d44aa11cf4534f4b9e1d7e53c8c803f2><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>线程数代表发送请求的用户数目，Ramp-up period（inseconds）代表每个请求发生的总时间间隔，单位是秒。假如我的请求数目是5，而Ramp-up period（inseconds）参数是10，那么每个请求之间的间隔就是 10／5，也就是2秒。如果Ramp-up period（inseconds）设置为0就代表并发请求。</p><p style=text-align:justify>最后，清除循环次数的复选项“永远”，然后输入１。这个值是告诉JMeter你的测试重复多少次。如果你输入1，那么JMeter只会运行一次测试。要不停的运行你的测试计划，选中“永远”复选框。</p><p style=text-align:justify>如下图摸拟1000个并发用户数量运行一次登录测试。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f73896f0d9454261813bc9874e5666a7><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>2、添加监控</p><p style=text-align:justify>这个主要是用来查看测试结果用的，可以以不同形式展现，这里举例说明添加监听器：用表格查看结果、聚合报告和图形报告thread Group->添加->监听器->聚合报告（图形报告、用表格查看结果）如下图所示：</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7900995403e44709a0b109877d1bc2e5><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>程序运行完成以后，就可以查看相应的测试结果这里以1000个线程组瞬时并发为例得到如下报告：</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/05464dcf05c0457cb219130e348f808a><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>上图表参数含义如下：</p><p style=text-align:justify>1、样本数目是总共发送到服务器的请求数。<br>　　2、最新样本是代表时间的数字,是服务器响应最后一个请求的时间。<br>3、吞吐量是服务器每分钟处理的请求数。<br>4、平均值是总运行时间除以发送到服务器的请求数。<br>5、中间值是代表时间的数字，有一半的服务器响应时间低于该值，而另一半高于该值。<br>6、偏离表示服务器响应时间变化、离散程度测量值的大小，或者，换句话说，就是数据的分布。</p><p style=text-align:justify><br></p><p style=text-align:justify>可以看出当1000人瞬时并发时平均响应时间为1630ms，吞吐量为3,940.887/分钟，平均响应中值为230ms。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f6114fda79aa489ba2d43f08c09b8d0e><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>图表含义说明如下：</p><p style=text-align:justify>Label：说明是请求类型，如Http，FTP等请求。</p><p style=text-align:justify>#Samples：也就是图形报表中的样本数目，总共发送到服务器的样本数目。</p><p style=text-align:justify>Average：也就是图形报表中的平均响应时间，是总运行时间除以发送到服务器的请求数。</p><p style=text-align:justify>Median：也就是图形报表中的中间值50%用户响应时间，有一半的服务器响应时间低于该值而另一半高于该值。</p><p style=text-align:justify>90%line：是指90%请求的响应时间比所得数值还要小，也就是90%用户的响应时间。</p><p style=text-align:justify>Min：是代表时间的数字,是服务器响应的最小时间。</p><p style=text-align:justify>Max: 是代表时间的数字,是服务器响应的最大时间。</p><p style=text-align:justify>Error%:请求的错误百分比。本次测试中出现错误的请求的数量/请求的总数。</p><p style=text-align:justify>Throughput:也就是图形报表中的吞吐量，这里是服务器每单位时间处理的请求数，注意查看是秒或是分钟。默认情况下表示每秒完成的请求数。</p><p style=text-align:justify>KB/sec:每秒从服务器端接收到的数据量。</p><p style=text-align:justify>要所得的数据为正确，聚合报告error%必须为0.00%,否则说明用户没有全部通过测试，这里得到平均响应时间1630ms，平均响应中中值为230ms</p><p style=text-align:justify>上图Error出现错误，所得的数据不是准确，从日志和表格来看中间过程发生连接请求超时，在响应时间内，接收请求数响应时间为０。如下图所示：</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/13199e7d685448ccba3782ca12dfaf9e><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3298ba9756c7441ebe1fb86b741823fc><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>在测试过程中，平均响应时间、吞吐量、并发连接数是我们性能测试的一个重要衡量指标，但是在测试中，特别是在聚合报告中，得出的90%Line等同于该用户提出的90%响应时间,这个数值对我们性能测试分析也很有参考价值。90%响应时间是说在发送的请求中，90%的用户响应时间都比得到的数值上要短，同时说明，一个系统在应用时，90%的用户响应时间都能达到这个数值，那么就为系统性能分析提供了很好的参考价值。</p><p style=text-align:justify>如果把线程数改为500并发连接请求，结果Error不会出现错误，所得到性能测试数据准确。</p><p style=text-align:justify><br></p><div class=pgc-img><img alt=性能测试jmeter详解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/cfb4459e12b1419092ffb84ed7e720a8><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify>总之，需要不断的调优对比数据，接近最佳状态，确定负载达到多少并发数量。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'测试','jmeter','详解'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>