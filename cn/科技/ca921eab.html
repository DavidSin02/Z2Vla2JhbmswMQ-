<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ | 极客快訊</title><meta property="og:title" content="面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/506a1a25353c493da1259ef8c299e898"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><meta property="article:published_time" content="2020-11-14T21:04:30+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:30+08:00"><meta name=Keywords content><meta name=description content="面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ca921eab.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>本期教程会从下面从以下几个问题展开对 IoC & AOP 的解释</p><ul><li>什么是 IoC？</li><li>IoC 解决了什么问题？</li><li>IoC 和 DI 的区别？</li><li>什么是 AOP？</li><li>AOP 解决了什么问题？</li><li>AOP 为什么叫做切面编程？</li></ul><p>首先声明：IoC & AOP 不是 Spring 提出来的，它们在 Spring 之前其实已经存在了，只不过当时更加偏向于理论。Spring 在技术层次将这两个思想进行了很好的实现。</p><p><strong>什么是 IoC</strong></p><p>IoC （Inversion of control ）控制反转/反转控制。它是一种思想不是一个技术实现。描述的是：Java 开发领域对象的创建以及管理的问题。</p><p>例如：现有类 A 依赖于类 B</p><ul><li><strong>传统的开发方式</strong> ：往往是在类 A 中手动通过 new 关键字来 new 一个 B 的对象出来</li><li><strong>使用 IoC 思想的开发方式</strong> ：不通过 new 关键字来创建对象，而是通过 IoC 容器(Spring 框架) 来帮助我们实例化对象。我们需要哪个对象，直接从 IoC 容器里面过去即可。</li></ul><p>从以上两种开发方式的对比来看：我们 “丧失了一个权力” (创建、管理对象的权力)，从而也得到了一个好处（不用再考虑对象的创建、管理等一系列的事情）</p><h4 class=pgc-h-arrow-right>为什么叫控制反转</h4><p><strong>控制</strong> ：指的是对象创建（实例化、管理）的权力</p><p><strong>反转</strong> ：控制权交给外部环境（Spring 框架、IoC 容器）</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/506a1a25353c493da1259ef8c299e898><p class=pgc-img-caption></p></div><p><strong>IoC 解决了什么问题</strong></p><p>IoC 的思想就是两方之间不互相依赖，由第三方容器来管理相关资源。这样有什么好处呢？</p><ol start=1><li>对象之间的耦合度或者说依赖程度降低；</li><li>资源变的容易管理；比如你用 Spring 容器提供的话很容易就可以实现一个单例。</li></ol><p>例如：现有一个针对 User 的操作，利用 Service 和 Dao 两层结构进行开发</p><p>在没有使用 IoC 思想的情况下，Service 层想要使用 Dao 层的具体实现的话，需要通过 new 关键字在UserServiceImpl 中手动 new 出 IUserDao 的具体实现类 UserDaoImpl（不能直接 new 接口类）。</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/58c8c8c7a16c4c35b7161ccdc3145569><p class=pgc-img-caption></p></div><p>很完美，这种方式也是可以实现的，但是我们想象一下如下场景：</p><p>开发过程中突然接到一个新的需求，针对对IUserDao 接口开发出另一个具体实现类。因为 Server 层依赖了IUserDao的具体实现，所以我们需要修改UserServiceImpl中 new 的对象。如果只有一个类引用了IUserDao的具体实现，可能觉得还好，修改起来也不是很费力气，但是如果有许许多多的地方都引用了IUserDao的具体实现的话，一旦需要更换IUserDao 的实现方式，那修改起来将会非常的头疼。</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dc24390c5cd8420c8666eeb6c3e38cd8><p class=pgc-img-caption></p></div><p>使用 IoC 的思想，我们将对象的控制权（创建、管理）交有 IoC 容器去管理，我们在使用的时候直接向 IoC 容器 “要” 就可以了</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b3747a4550e74778a9026c43a03d404c><p class=pgc-img-caption></p></div><p><strong>IoC 和 DI 别再傻傻分不清楚</strong></p><p>IoC（Inverse of Control:控制反转）是一种<strong>设计思想</strong> 或者说是某种模式。这个设计思想就是 <strong>将原本在程序中手动创建对象的控制权，交由 Spring 框架来管理。</strong> IoC 在其他语言中也有应用，并非 Spring 特有。<strong>IoC 容器是 Spring 用来实现 IoC 的载体， IoC 容器实际上就是个 Map（key，value）,Map 中存放的是各种对象。</strong></p><p>IoC 最常见以及最合理的实现方式叫做依赖注入（Dependency Injection，简称 DI）。</p><p><br></p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/934c596e57074ec1a9e0c0af12033d27><p class=pgc-img-caption></p></div><p>意思是 IoC 太普遍并且不表意，很多人会因此而迷惑，所以，使用 DI 来精确指名这个模式比较好。</p><p>什么是 AOP</p><p>AOP：Aspect oriented programming 面向切面编程，AOP 是 OOP（面向对象编程）的一种延续。</p><p>下面我们先看一个 OOP 的例子。</p><p>例如：现有三个类，Horse、Pig、Dog，这三个类中都有 eat 和 run 两个方法。</p><p>通过 OOP 思想中的继承，我们可以提取出一个 Animal 的父类，然后将 eat 和 run 方法放入父类中，Horse、Pig、Dog通过继承Animal类即可自动获得 eat() 和 run() 方法。这样将会少些很多重复的代码。</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cf9849ac01c0484a8be693b27935f7c3><p class=pgc-img-caption></p></div><p>OOP 编程思想可以解决大部分的代码重复问题。但是有一些问题是处理不了的。比如在父类 Animal 中的多个方法的相同位置出现了重复的代码，OOP 就解决不了。</p><pre><code>/** * 动物父类 */public class Animal {    /** 身高 */    private String height;    /** 体重 */    private double weight;    public void eat() {        // 性能监控代码        long start = System.currentTimeMillis();        // 业务逻辑代码        System.out.println("I can eat...");        // 性能监控代码        System.out.println("执行时长：" + (System.currentTimeMillis() - start)/1000f + "s");    }    public void run() {        // 性能监控代码        long start = System.currentTimeMillis();        // 业务逻辑代码        System.out.println("I can run...");        // 性能监控代码        System.out.println("执行时长：" + (System.currentTimeMillis() - start)/1000f + "s");    }}</code></pre><p>这部分重复的代码，一般统称为 <strong>横切逻辑代码</strong>。</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d7d7aa0725ec4e0ea18fe3fa9b871b4c><p class=pgc-img-caption></p></div><p>横切逻辑代码存在的问题：</p><ul><li>代码重复问题</li><li>横切逻辑代码和业务代码混杂在一起，代码臃肿，不便维护</li></ul><p><strong>AOP 就是用来解决这些问题的</strong></p><p>AOP 另辟蹊径，提出横向抽取机制，将横切逻辑代码和业务逻辑代码分离</p><div class=pgc-img><img alt=面试屡屡被问的IoC和AOP，你还傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cb52b25d8afc46cf8517e68cd4a19d05><p class=pgc-img-caption></p></div><p>代码拆分比较容易，难的是如何在不改变原有业务逻辑的情况下，悄无声息的将横向逻辑代码应用到原有的业务逻辑中，达到和原来一样的效果。</p><p><strong>AOP 解决了什么问题</strong></p><p>通过上面的分析可以发现，AOP 主要用来解决：在不改变原有业务逻辑的情况下，增强横切逻辑代码，根本上解耦合，避免横切逻辑代码重复。</p><p><strong>AOP 为什么叫面向切面编程</strong></p><p><strong>切</strong> ：指的是横切逻辑，原有业务逻辑代码不动，只能操作横切逻辑代码，所以面向横切逻辑</p><p><strong>面</strong> ：横切逻辑代码往往要影响的是很多个方法，每个方法如同一个点，多个点构成一个面。</p><p><br>更多的教程也会继续更新，伙伴们多多支持一下，不清楚的地方，可以留言！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'面试','被问','IoC'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>