<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å·§å¦™ç»“åˆspringä¸ç®€å•æ¨¡æ¿æ–¹æ³•å®ç°ä»£ç ç®€åŒ– | æå®¢å¿«è¨Š</title><meta property="og:title" content="å·§å¦™ç»“åˆspringä¸ç®€å•æ¨¡æ¿æ–¹æ³•å®ç°ä»£ç ç®€åŒ– - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cdeaa22d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cdeaa22d.html><meta property="article:published_time" content="2020-11-14T21:00:09+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:09+08:00"><meta name=Keywords content><meta name=description content="å·§å¦™ç»“åˆspringä¸ç®€å•æ¨¡æ¿æ–¹æ³•å®ç°ä»£ç ç®€åŒ–"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/cdeaa22d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å·§å¦™ç»“åˆspringä¸ç®€å•æ¨¡æ¿æ–¹æ³•å®ç°ä»£ç ç®€åŒ–</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>åœ¨ä¹‹å‰çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰é‡åˆ°è¿‡åˆ†æ­¥å¤„ç†çš„é—®é¢˜ï¼Œç®€å•çš„æ¥è¯´å°±æ˜¯æç®€çš„å·¥ä½œæµï¼Œä¸€èˆ¬æ˜¯æŒ‡å¤„ç†æ­¥éª¤åœ¨ä¸‰æ­¥ä»¥å†…ã€‚</p><p>éœ€æ±‚åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šå…¬å¸è®¢å•çº¿çš„ç³»ç»Ÿéœ€è¦å‡çº§é‡æ„ï¼ŒåŸæœ¬ä¸¤ä¸ªä»£ç æ¯”è¾ƒä¹±çš„æœåŠ¡ï¼ˆå…¶ä¸­ä¸€ä¸ªæ˜¯ç”¨phpå†™çš„ï¼‰éœ€è¦æ‹†åˆ†æˆä¸‰ä¸ªæ–°æœåŠ¡ï¼ˆå…¨éƒ¨ç”¨javaé‡æ„ï¼‰</p><p>æœåŠ¡Aä½œä¸ºå‰ç½®æœåŠ¡ï¼Œç›´æ¥å’Œå‰ç«¯åšäº¤äº’ï¼›æœåŠ¡Bä½œä¸ºä¸­é—´è°ƒåº¦æœåŠ¡ï¼Œæ‰¿è½½æ‰€æœ‰çš„è®¢å•è°ƒåº¦ä¸šåŠ¡ï¼›æœåŠ¡Cä½œä¸ºäº¤æ˜“æœåŠ¡ï¼Œè´Ÿè´£æ‰€æœ‰è®¢å•çš„æ”¯ä»˜ä¸šåŠ¡ã€‚</p><p>æˆ‘è´Ÿè´£çš„æ˜¯æœåŠ¡Bï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç¯èŠ‚æ˜¯ï¼šæœåŠ¡Aå°†ç”¨æˆ·çš„çš„ä¸‹å•ä¿¡æ¯æ¨é€åˆ°æœåŠ¡Bï¼ŒæœåŠ¡Bæ¥æ”¶åä¼šç”Ÿæˆè®¢å•ä¿¡æ¯ï¼Œç„¶åå¯¹è®¢å•åšä¸šåŠ¡è°ƒåº¦ï¼ˆæ­£å‘æˆå•ï¼Œé€†å‘é€€å•ç­‰ç­‰ï¼‰ï¼Œæœ€åä¼šå°†è¯¥è®¢å•çš„ä¿¡æ¯æ¨é€åˆ°å„ä¸ªå…³è”ç³»ç»Ÿï¼ˆå¤§æ¦‚æœ‰ä¸‰åå¤šä¸ªï¼‰ï¼Œä½†æ˜¯è¿™äº›å…³è”ç³»ç»Ÿä¸ä¸€å®šè¦å…¨é‡çš„è®¢å•ä¿¡æ¯ï¼ˆå¦‚æœæ‰€æœ‰å…³è”ç³»ç»Ÿéƒ½å…¨é‡æ¨ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ‰›ä¸ä½ï¼‰ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¿™äº›ä¿¡æ¯åšä¸ªæ€§åŒ–å¤„ç†ã€‚</p><p>æˆ‘æ˜¯ä½¿ç”¨äº†ç®€å•çš„æ¨¡æ¿æ–¹æ³•+springäº‹ä»¶æ¥å®ç°çš„</p><p>é¦–å…ˆï¼Œå¯¹äºä¸Šè¿°çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤</p><ol start=1><li>æ•°æ®ç»„è£…ã€‚ç”±äºå„ä¸ªå…³è”ç³»ç»Ÿæ¯”è¾ƒæ‚ä¹±ï¼Œæœ‰çš„æ˜¯goå†™çš„ï¼Œæœ‰çš„æ˜¯phpï¼Œè¿˜æœ‰ä¸åŒçš„æŠ¥æ–‡æ ¼å¼è¦æ±‚ï¼Œæ‰€ä»¥æ•°æ®ç»„è£…è¿™ä¸€æ­¥éœ€è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥æ˜¯ç®€å•çš„jsonå­—ç¬¦ä¸²æŠ¥æ–‡ï¼Œå¯ä»¥æ˜¯xmlï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰æ ¼å¼çš„æŠ¥æ–‡</li><li>æ•°æ®æ¨é€ã€‚è™½ç„¶å…¬å¸æœ‰ç»Ÿä¸€çš„rpcæ¡†æ¶ï¼Œä½†æ˜¯å¯¹äºgoï¼Œphpç¼–å†™çš„ç³»ç»Ÿä¸å¤Ÿå‹å¥½ï¼Œæ‰€ä»¥è¿™ç±»çš„ç³»ç»Ÿå°±ç»Ÿä¸€ä½¿ç”¨httpæ¨é€ï¼Œä½†æ˜¯ä¸€éƒ¨åˆ†ç”¨javaç¼–å†™çš„ç³»ç»Ÿï¼Œç»è®¨è®ºåè¿˜æ˜¯è€ƒè™‘ä½¿ç”¨rpcè¿œç¨‹è°ƒç”¨ï¼Œæœ€åæµ‹è¯•ä¸‹æ¥ä¹Ÿç¡®å®æ¯”ç”¨httpæ¥å£è°ƒç”¨è¦æ›´æœ‰æ•ˆç‡</li></ol><p>okï¼Œåˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå°±ç®—æ˜¯åšå¥½äº†åˆ†æäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é’ˆå¯¹åˆ†æç»“æœåšè®¾è®¡ï¼Œå¾ˆè‡ªç„¶çš„æˆ‘æƒ³åˆ°äº†ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦æ˜¯åŸºäºä»¥ä¸‹ä¸¤ç‚¹è€ƒè™‘ï¼š</p><ol start=1><li>æ­¥éª¤ç®€å•ï¼Œè™½ç„¶æœ‰ç°æˆçš„å·¥ä½œæµæ¡†æ¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯è‡ªå·±å®ç°çš„è¯åº”è¯¥ä¼šæ›´è½»é‡</li><li>åªéœ€è¦å®šä¹‰ä¸¤ä¸ªæ¨¡æ¿ï¼Œå¹¶ä¸”å€ŸåŠ©springå¯ä»¥å¾ˆå¥½çš„ç®¡ç†</li></ol><p>æ¥ä¸‹æ¥å°±ä¸Šä»£ç </p><pre><code>AbstractDataGroupFuncè¿™ä¸ªç±»å¯ä»¥çœ‹ä½œæ˜¯æ•°æ®ç»„è£…çš„åŸºç±»ï¼Œé€šè¿‡æ¨¡æ¿æ–¹æ³•å®ç°äº†æ³¨å†Œçš„åŠŸèƒ½å®ç°äº†springçš„å¢å¼ºæ¥å£InitializingBeanï¼Œåœ¨springå¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ³¨å†Œæ‰€æœ‰ç»§æ‰¿è¯¥åŸºç±»çš„å®ç°ç±»</code></pre><pre><code>package cn.magicnian.demo1022.group;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.InitializingBean;import org.springframework.context.ApplicationEvent;import org.springframework.util.Assert;import java.util.Map;import java.util.concurrent.ConcurrentHashMap;public abstract class AbstractDataGroupFunc implements InitializingBean {    private static Logger logger = LoggerFactory.getLogger(AbstractDataGroupFunc.class);    private static final Map&lt;Class&lt;? extends ApplicationEvent&gt;, AbstractDataGroupFunc&gt; DATA_GROUP_MAP = new ConcurrentHashMap&lt;&gt;();    //åˆå§‹åŒ–    protected void register(Class&lt;? extends ApplicationEvent&gt; eventClass, AbstractDataGroupFunc dataGroup) {        DATA_GROUP_MAP.put(eventClass, dataGroup);    }    public static AbstractDataGroupFunc getDataGroupFunc(Class&lt;? extends ApplicationEvent&gt; eventClass) {        Assert.isTrue(eventClass != null, &#34;äº‹ä»¶classä¸èƒ½ä¸ºnull!&#34;);        return DATA_GROUP_MAP.get(eventClass);    }    /**     * æ•°æ®ç»„è£…-æŒ‰éœ€è‡ªç”±å¤„ç†     * å¦‚å¯ä»¥ç»„è£…æˆjsonå­—ç¬¦ä¸²æˆ–è€…æ˜¯è‡ªå®šä¹‰æŠ¥æ–‡æ ¼å¼     * @param event     * @return     */    public abstract String doDataGroup(ApplicationEvent event);}</code></pre><pre><code>DemoDataGroupFuncAbstractDataGroupFuncç±»çš„ä¸€ä¸ªå®ç°ç±»</code></pre><pre><code>package cn.magicnian.demo1022.group.impl;import cn.magicnian.demo1022.event.DemoEvent;import cn.magicnian.demo1022.group.AbstractDataGroupFunc;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.context.ApplicationEvent;import org.springframework.stereotype.Component;/** * ç¤ºä¾‹æ•°æ®ç»„è£…å®ç°ç±» */@Componentpublic class DemoDataGroupFunc extends AbstractDataGroupFunc {    private static Logger logger = LoggerFactory.getLogger(DemoDataGroupFunc.class);    @Override    public String doDataGroup(ApplicationEvent event) {        //TODO è‡ªç”±çš„ç»„è£…æ•°æ®        // å¤æ‚æ•°æ®æŠ¥æ–‡å»ºè®®åšæ–¹æ³•æ‹†åˆ†ï¼Œç®€å•çš„å¦‚å¯¹è±¡è½¬jsonå­—ç¬¦ä¸²å¯ä»¥å‡ æ®µä»£ç æå®š        // è¿™é‡ŒåŒæ ·ä¹Ÿå¯ä»¥åˆ©ç”¨è®¾è®¡æ¨¡å¼åšç®€åŒ–ï¼Œå¦‚æ¨¡æ¿æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼Œé’ˆå¯¹ä¸åŒçš„eventåšä¸åŒçš„å¤„ç†        return null;    }    @Override    public void afterPropertiesSet() throws Exception {        register(DemoEvent.class, this);        logger.info(&#34;{} | dataGroup register ==&gt;&#34;, this.getClass().getName());    }}</code></pre><pre><code>AbstractDataPushFuncæ•°æ®æ¨é€çš„åŸºç±»ï¼Œè®¾è®¡åŸç†å’Œæ•°æ®ç»„è£…åŸºç±»ä¸€è‡´</code></pre><pre><code>package cn.magicnian.demo1022.push;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.InitializingBean;import org.springframework.context.ApplicationEvent;import org.springframework.util.Assert;import java.util.Map;import java.util.concurrent.ConcurrentHashMap;public abstract class AbstractDataPushFunc implements InitializingBean {    private static Logger logger = LoggerFactory.getLogger(AbstractDataPushFunc.class);    private static final Map&lt;Class&lt;? extends ApplicationEvent&gt;, AbstractDataPushFunc&gt; DATA_PUSH_FUNC_MAP = new ConcurrentHashMap&lt;&gt;();    protected void register(Class&lt;? extends ApplicationEvent&gt; eventClass, AbstractDataPushFunc dataPushFunc) {        DATA_PUSH_FUNC_MAP.put(eventClass, dataPushFunc);    }    public static AbstractDataPushFunc getDataPushFunc(Class&lt;? extends ApplicationEvent&gt; eventClass) {        Assert.isTrue(eventClass != null, &#34;äº‹ä»¶classä¸èƒ½ä¸ºnull!&#34;);        return DATA_PUSH_FUNC_MAP.get(eventClass);    }    /**     * æ•°æ®æ¨é€-è‡ªç”±å¤„ç†     * å¯ä»¥æ˜¯ç®€å•çš„httpæ¥å£ï¼Œæˆ–è€…æ˜¯rpcè°ƒç”¨ï¼Œè‡ªå®šä¹‰æŠ¥æ–‡åè®®é€šè¿‡nettyå‘é€ç­‰     * @param param     */    public abstract void doDataPush(String... param);}</code></pre><pre><code>DemoDataPushFuncAbstractDataPushFuncçš„ä¸€ä¸ªå®ç°ç±»</code></pre><pre><code>package cn.magicnian.demo1022.push.impl;import cn.magicnian.demo1022.event.DemoEvent;import cn.magicnian.demo1022.push.AbstractDataPushFunc;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.stereotype.Component;@Componentpublic class DemoDataPushFunc extends AbstractDataPushFunc {    private static Logger logger = LoggerFactory.getLogger(DemoDataPushFunc.class);    @Override    public void doDataPush(String... param) {        //TODO å…·ä½“çš„æ¨é€æ•°æ®æ“ä½œï¼Œè°ƒç”¨rpcæ¨¡å—çš„å‘é€ç»„ä»¶    }    @Override    public void afterPropertiesSet() throws Exception {        register(DemoEvent.class, this);        logger.info(&#34;{} | dataPush register ==&gt;&#34;, this.getClass().getName());    }}</code></pre><pre><code>DemoEventApplicationEventçš„å­ç±»ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸šåŠ¡çš„åˆ†ç±»</code></pre><pre><code>package cn.magicnian.demo1022.event;import org.springframework.context.ApplicationEvent;public class DemoEvent extends ApplicationEvent {    public DemoEvent(Object source) {        super(source);    }}</code></pre><pre><code>BusinessEventApplicationEventçš„å­ç±»ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å…³è”ç³»ç»Ÿçš„æ˜ å°„</code></pre><p>æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸»æµç¨‹ä»£ç å¤„å†™ä¸¤è¡Œä»£ç å³å¯</p><pre><code>String params = AbstractDataGroupFunc.getDataGroupFunc(DemoEvent.class).doDataGroup(BusinessEvent.class.newInstance());AbstractDataPushFunc.getDataPushFunc(DemoEvent.class).doDataPush(params);</code></pre><p>å½“ç„¶ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼ä¹Ÿæ˜¯å¯ä»¥å®ç°ä¸Šè¿°éœ€æ±‚çš„ï¼Œå„æœ‰æ‰€é•¿å§ï¼Œæœ¬äººåªæ˜¯æä¾›ä¸€ç§æ€è·¯ã€‚</p><p><br></p><p>å…³æ³¨æˆ‘ï¼ŒæŒç»­ç»™æ‚¨åˆ†äº«å·¥ä½œä¸­çš„å¼€å‘æŠ€å·§å’Œæ„Ÿæ‚Ÿï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'ç»“åˆ','spring','ç®€å•'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>