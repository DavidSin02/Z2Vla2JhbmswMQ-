<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>18个问答，讲透了RS485接口 | 极客快訊</title><meta property="og:title" content="18个问答，讲透了RS485接口 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RwHvZez9J0TjHz"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d086bf2a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d086bf2a.html><meta property="article:published_time" content="2020-11-14T21:01:50+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:50+08:00"><meta name=Keywords content><meta name=description content="18个问答，讲透了RS485接口"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d086bf2a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>18个问答，讲透了RS485接口</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>编者按：RS485接口组成的半双工网络，一般是两线制，多采用屏蔽双绞线传输，这种接线方式为总线式拓扑结构在同一总线上最多可以挂接32个结点。我们知道，最初数据是模拟信号输出简单过程量，后来仪表接口是RS232接口，这种接口可以实现点对点的通信方式，但这种方式不能实现联网功能，随后出现的RS485解决了这个问题。为此本文通过问答的形式详细介绍RS485接口。</p><p><strong>一、什么是RS-485接口？它比RS-232-C接口相比有何特点？</strong></p><p>答：由于RS-232-C接口标准出现较早，难免有不足之处，<strong>主要有以下四点：</strong></p><p>（1）接口的信号电平值较高，易损坏接口电路的芯片，又因为与TTL电平不兼容故需使用电平转换电路方能与TTL电路连接。</p><p>（2）传输速率较低，在异步传输时，波特率为20Kbps。</p><p>（3）接口使用一根信号线和一根信号返回线而构成共地的传输形式，这种共地传输容易产生共模干扰，所以抗噪声干扰性弱。</p><p>（4）传输距离有限，最大传输距离标准值为50英尺，实际上也只能用在50米左右。针对RS-232-C的不足，于是就不断出现了一些新的接口标准，RS-485就是其中之</p><p>1，它具有以下特点：</p><img alt=18个问答，讲透了RS485接口 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RwHvZez9J0TjHz><p>1）RS-485的电气特性：逻辑“1”以两线间的电压差为+（2-6）V表示；逻辑“0”以两线间的电压差为-（2-6）V表示。接口信号电平比RS-232-C降低了，就不易损坏接口电路的芯片，且该电平与TTL电平兼容，可方便与TTL电路连接。</p><p>2）RS-485的数据最高传输速率为10Mbps</p><p>3）RS-485接口是采用平衡驱动器和差分接收器的组合，抗共模干能力增强，即抗噪声干扰性好。</p><p>4）RS-485接口的最大传输距离标准值为4000英尺，实际上可达3000米，另外RS-232-C接口在总线上只允许连接1个收发器，即单站能力。而RS-485接口在总线上是允许连接多达128个收发器。即具有多站能力，这样用户可以利用单一的RS-485接口方便地建立起设备网络。</p><p>5）因RS-485接口具有良好的抗噪声干扰性，长的传输距离和多站能力等上述优点就使其成为首选的串行接口。因为RS485接口组成的半双工网络，一般只需二根连线，所以RS485接口均采用屏蔽双绞线传输。RS485接口连接器采用DB-9的9芯插头座，与智能终端RS485接口采用DB-9（孔），与键盘连接的键盘接口RS485采用DB-9（针）。</p><p><strong>二、RS-422与RS-485串行接口标准</strong></p><p>1、平衡传输</p><p>RS-422、RS-485与RS-232不一样，数据信号采用差分传输方式，也称作平衡传输，它使用一对双绞线，将其中一线定义为A，另一线定义为B</p><p>通常情况下，发送驱动器A、B之间的正电平在+2～+6V，是一个逻辑状态，负电平在-2～6V，是另一个逻辑状态。另有一个信号地C，在RS-485中还有一“使能”端，而在RS-422中这是可用可不用的。“使能”端是用于控制发送驱动器与传输线的切断与连接。当“使能”端起作用时，发送驱动器处于高阻状态，称作“第三态”，即它是有别于逻辑“1”与“0”的第三态。</p><p>接收器也作与发送端相对的规定，收、发端通过平衡双绞线将AA与BB对应相连，当在收端AB之间有大于+200mV的电平时，输出正逻辑电平，小于-200mV时，输出负逻辑电平。接收器接收平衡线上的电平范围通常在200mV至6V之间。</p><p>2、RS-422电气规定</p><p>RS-422标准全称是“平衡电压数字接口电路的电气特性”，它定义了接口电路的特性。图2是典型的RS-422四线接口。实际上还有一根信号地线，共5根线。图1是其DB9连接器引脚定义。由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，最多可接10个节点。即一个主设备（Master），其余为从设备（Salve），从设备之间不能通信，所以RS-422支持点对多的双向通信。接收器输入阻抗为4k，故发端最大负载能力是10×4k+100Ω（终接电阻）。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。RS-422的最大传输距离为4000英尺（约1219米），最大传输速率为10Mb/s。其平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mb/s。</p><p>RS-422需要一终接电阻，要求其阻值约等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输电缆的最远端。</p><p>3、RS-485电气规定</p><p>由于RS-485是从RS-422基础上发展而来的，所以RS-485许多电气规定与RS-422相仿。如都采用平衡传输方式、都需要在传输线上接终接电阻等。RS-485可以采用二线与四线方式，二线制可实现真正的多点双向通信。</p><p>而采用四线连接时，与RS-422一样只能实现点对多的通信，即只能有一个主（Master）设备，其余为从设备，但它比RS-422有改进，无论四线还是二线连接方式总线上可多接到32个设备。</p><p>RS-485与RS-422的不同还在于其共模输出电压是不同的，RS-485是-7V至+12V之间，而RS-422在-7V至+7V之间，RS-485接收器最小输入阻抗为12k剑鳵S-422是4k健；旧峡梢运礡S-485满足所有RS-422的规范，所以RS-485的驱动器可以用在RS-422网络中应用。</p><p>RS-485与RS-422一样，其最大传输距离约为1219米，最大传输速率为10Mb/s。平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能使用规定最长的电缆长度。只有在很短的距离下才能获得最高速率传输。一般100米长双绞线最大传输速率仅为1Mb/s。</p><p>RS-485需要2个终接电阻，其阻值要求等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输总线的两端。</p><p><strong>三、RS-422与RS-485的网络安装注意要点</strong></p><p>RS-422可支持10个节点，RS-485支持32个节点，因此多节点构成网络。网络拓扑一般采用终端匹配的总线型结构，不支持环形或星形网络。在构建网络时，应注意如下几点：</p><img alt=18个问答，讲透了RS485接口 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RwHvZfR9Vbvc19><p>1、采用一条双绞线电缆作总线，将各个节点串接起来，从总线到每个节点的引出线长度应尽量短，以便使引出线中的反射信号对总线信号的影响最低。所示为实际应用中常见的一些错误连接方式（a，c，e）和正确的连接方式（b，d，f）。a，c，e这三种网络连接尽管不正确，在短距离、低速率仍可能正常工作，但随着通信距离的延长或通信速率的提高，其不良影响会越来越严重，主要原因是信号在各支路末端反射后与原信号叠加，会造成信号质量下降。</p><p>2、应注意总线特性阻抗的连续性，在阻抗不连续点就会发生信号的反射。下列几种情况易产生这种不连续性：总线的不同区段采用了不同电缆，或某一段总线上有过多收发器紧靠在一起安装，再者是过长的分支线引出到总线。</p><p>总之，应该提供一条单一、连续的信号通道作为总线。</p><p><strong>四、RS-422与RS-485传输线上匹配的一些说明</strong></p><p>对RS-422与RS-485总线网络一般要使用终接电阻进行匹配。但在短距离与低速率下可以不用考虑终端匹配。那么在什么情况下不用考虑匹配呢？理论上，在每个接收数据信号的中点进行采样时，只要反射信号在开始采样时衰减到足够低就可以不考虑匹配。但这在实际上难以掌握，美国MAXIM公司有篇文章提到一条经验性的原则可以用来判断在什么样的数据速率和电缆长度时需要进行匹配：当信号的转换时间（上升或下降时间）超过电信号沿总线单向传输所需时间的3倍以上时就可以不加匹配。例如具有限斜率特性的RS-485接口MAX483输出信号的上升或下降时间最小为250ns，典型双绞线上的信号传输速率约为0.2m/ns（24AWGPVC电缆），那么只要数据速率在250kb/s以内、电缆长度不超过16米，采用MAX483作为RS-485接口时就可以不加终端匹配。</p><p>一般终端匹配采用终接电阻方法，前文已有提及，RS-422在总线电缆的远端并接电阻，RS-485则应在总线电缆的开始和末端都需并接终接电阻。终接电阻一般在RS-422网络中取100Ω，在RS-485网络中取120Ω。相当于电缆特性阻抗的电阻，因为大多数双绞线电缆特性阻抗大约在100～120Ω。这种匹配方法简单有效，但有一个缺点，匹配电阻要消耗较大功率，对于功耗限制比较严格的系统不太适合。</p><p>另外一种比较省电的匹配方式是RC匹配，利用一只电容C隔断直流成分可以节省大部分功率。但电容C的取值是个难点，需要在功耗和匹配质量间进行折衷。</p><p>还有一种采用二极管的匹配方法，这种方案虽未实现真正的“匹配”，但它利用二极管的钳位作用能迅速削弱反射信号，达到改善信号质量的目的。节能效果显著。</p><p><strong>五、RS-422与RS-485的接地问题</strong></p><p>电子系统接地是很重要的，但常常被忽视。接地处理不当往往会导致电子系统不能稳定工作甚至危及系统安全。RS-422与RS-485传输网络的接地同样也是很重要的，因为接地系统不合理会影响整个网络的稳定性，尤其是在工作环境比较恶劣和传输距离较远的情况下，对于接地的要求更为严格。否则接口损坏率较高。很多情况下，连接RS-422、RS-485通信链路时只是简单地用一对双绞线将各个接口的“A”、“B”端连接起来。而忽略了信号地的连接，这种连接方法在许多场合是能正常工作的，但却埋下了很大的隐患，这有下面二个原因：</p><p>1、共模干扰问题：正如前文已述，RS-422与RS-485接口均采用差分方式传输信号方式，并不需要相对于某个参照点来检测信号，系统只需检测两线之间的电位差就可以了。但人们往往忽视了收发器有一定的共模电压范围，如RS-422共模电压范围为-7～+7V，而RS-485收发器共模电压范围为-7～+12V，只有满足上述条件，整个网络才能正常工作。当网络线路中共模电压超出此范围时就会影响通信的稳定可靠，甚至损坏接口。以图1为例，当发送驱动器A向接收器B发送数据时，发送驱动器A的输出共模电压为VOS，由于两个系统具有各自独立的接地系统，存在着地电位差VGPD。那么，接收器输入端的共模电压VCM就会达到VCM=VOS+VGPD。RS-422与RS-485标准均规定VOS≤3V，但VGPD可能会有很大幅度（十几伏甚至数十伏），并可能伴有强干扰信号，致使接收器共模输入VCM超出正常范围，并在传输线路上产生干扰电流，轻则影响正常通信，重则损坏通信接口电路。</p><p>2、（EMI）问题：发送驱动器输出信号中的共模部分需要一个返回通路，如没有一个低阻的返回通道（信号地），就会以辐射的形式返回源端，整个总线就会像一个巨大的天线向外辐射电磁波。</p><p>由于上述原因，RS-422、RS-485尽管采用差分平衡传输方式，但对整个RS-422或RS-485网络，必须有一条低阻的信号地。一条低阻的信号地将两个接口的工作地连接起来，使共模干扰电压VGPD被短路。</p><p>这条信号地可以是额外的一条线（非屏蔽双绞线），或者是屏蔽双绞线的屏蔽层。这是最通常的接地方法。</p><p>值得注意的是，这种做法仅对高阻型共模干扰有效，由于干扰源内阻大，短接后不会形成很大的接地环路电流，对于通信不会有很大影响。当共模干扰源内阻较低时，会在接地线上形成较大的环路电流，影响正常通信。笔者认为，可以采取以下三种措施：</p><p>（1）如果干扰源内阻不是非常小，可以在接地线上加限流电阻以限制干扰电流。接地电阻的增加可能会使共模电压升高，但只要控制在适当的范围内就不会影响正常通信。</p><p>（2）采用浮地技术，隔断接地环路。这是较常用也是十分有效的一种方法，当共模干扰内阻很小时上述方法已不能奏效，此时可以考虑将引入干扰的节点（例如处于恶劣的工作环境的现场设备）浮置起来（也就是系统的电路地与机壳或大地隔离），这样就隔断了接地环路，不会形成很大的环路电流。</p><p>（3）采用隔离接口。有些情况下，出于安全或其它方面的考虑，电路地必须与机壳或大地相连，不能悬浮，这时可以采用隔离接口来隔断接地回路，但是仍然应该有一条地线将隔离侧的公共端与其它接口的工作地相连。</p><p><strong>六、RS-422与RS-485的网络失效保护</strong></p><p>RS-422与RS-485标准都规定了接收器门限为±200mV。这样规定能够提供比较高的噪声抑制能力，如前文所述，当接收器A电平比B电平高+200mV以上时，输出为正逻辑，反之，则输出为负逻辑。但由于第三态的存在，即在主机在发端发完一个信息数据后，将总线置于第三态，即总线空闲时没有任何信号驱动总线，使AB之间的电压在-200～+200mV直至趋于0V，这带来了一个问题：接收器输出状态不确定。如果接收机的输出为0V，网络中从机将把其解释为一个新的启动位，并试图读取后续字节，由于永远不会有停止位，产生一个帧错误结果，不再有设备请求总线，网络陷于瘫痪状态。除上述所述的总线空闲会造成两线电压差低于200mV的情况外，开路或短路时也会出现这种情况。故应采取一定的措施避免接收器处于不确定状态。</p><p>通常是在总线上加偏置，当总线空闲或开路时，利用偏置电阻将总线偏置在一个确定的状态（差分电压≥-200mV）。如图1。将A上拉到地，B下拉到5V，电阻的典型值是1kΩ，具体数值随电缆的电容变化而变化。</p><p>上述方法是比较经典的方法，但它仍然不能解决总线短路时的问题，有些厂家将接收门限移到-200mV/-50mV，可解决这个问题。</p><p><strong>七、RS-422与RS-485的瞬态保护</strong></p><p>前文提到的信号接地措施，只对低频率的共模干扰有保护作用，对于频率很高的瞬态干扰就无能为力了。由于传输线对高频信号而言就是相当于电感，因此对于高频瞬态干扰，接地线实际等同于开路。这样的瞬态干扰虽然持续时间短暂，但可能会有成百上千伏的电压。</p><p>实际应用环境下还是存在高频瞬态干扰的可能。一般在切换大功率感性负载如电机、变压器、继电器等或闪电过程中都会产生幅度很高的瞬态干扰，如果不加以适当防护就会损坏RS-422或RS-485通信接口。对于这种瞬态干扰可以采用隔离或旁路的方法加以防护。</p><p>1、隔离保护方法。这种方案实际上将瞬态高压转移到隔离接口中的电隔离层上，由于隔离层的高绝缘电阻，不会产生损害性的浪涌电流，起到保护接口的作用。通常采用高频变压器、光耦等元件实现接口的电气隔离，已有器件厂商将所有这些元件集成在一片IC中，使用起来非常简便。这种方案的优点是可以承受高电压、持续时间较长的瞬态干扰，实现起来也比较容易，缺点是成本较高。</p><p>2、旁路保护方法。这种方案利用瞬态抑制元件（如TVS、MOV、气体放电管等）将危害性的瞬态能量旁路到大地，优点是成本较低，缺点是保护能力有限，只能保护一定能量以内的瞬态干扰，持续时间不能很长，而且需要有一条良好的连接大地的通道，实现起来比较困难。实际应用中是将上述两种方案结合起来灵活加以运用，如图1。在这种方法中，隔离接口对大幅度瞬态干扰进行隔离，旁路元件则保护隔离接口不被过高的瞬态电压击穿。</p><p><strong>八、采用RS485接口时，传输电缆的长度如何考虑？</strong></p><p>在使用RS485接口时，对于特定的传输线经，从发生器到负载其数据信号传输所允许的最大电缆长度是数据信号速率的函数，这个长度数据主要是受信号失真及噪声等影响所限制。最大电缆长度与信号速率的关系曲线是使用24AWG铜芯双绞电话电缆（线径为0。51mm），线间旁路电容为52。5PF/M，终端负载电阻为100欧时所得出。当数据信号速率降低到90Kbit/S以下时，假定最大允许的信号损失为6dBV时，则电缆长度被限制在1200M。在实用时是完全可以取得比它大的电缆长度。当使用不同线径的电缆。则取得的最大电缆长度是不相同的。</p><p><strong>九、如何实现RS-485/422多点通讯</strong></p><p>RS-485总线上任何时候只能有一发送器发送。半双工方式，主从只能一个发。全双工方式，主站总可发送，从站只能有一个发送。</p><p><strong>十、RS-485/RS422接口通讯时，在什么条件下需要采用终端匹配？电阻值如何确定？如何配置终端匹配电阻？</strong></p><p>在长线信号传输时，一般为了避免信号的反射和回波，需要在接收端接入终端匹配电阻。其终端匹配电阻值取决于电缆的阻抗特性，与电缆的长度无关。</p><p>RS-485/RS-422一般采用双绞线（屏蔽或非屏蔽）连接，终端电阻一般介于100至140Ω之间，典型值为120Ω。在实际配置时，在电缆的两个终端节点上，即最近端和最远端，各接入一个终端电阻，而处于中间部分的节点则不能接入终端电阻，否则将导致通讯出错。</p><p><strong>十一、RS-485网不知道最远站点是哪一个，应该如何接匹配电阻呢？</strong></p><p>会出现这种情况，是由于用户组成RS-485网时，没有遵循站点至总线的连线应尽可能短的原则。如果总线布线遵循这一原则，就不存在不知道哪个站点是最远的问题。而且要注意，这样的布线，系统将会工作得不好。</p><p><strong>十二、RS-485/RS-422接口为何在停止通信时接收器仍有数据输出？</strong></p><p>由于RS-485/RS-422在发送数据完成后，要求所有的发送使能控制信号关闭且保持接收使能有效，此时，总线驱动器进入高阻状态且接收器能够监测总线上是否有新的通信数据。但是由于此时总线处于无源驱动状态（若总线有终端匹配电阻时，A和B线的差分电平为0，接收器的输出不确定，且对AB线上的差分信号的变化很敏感；若无终端匹配，则总线处于高阻态，接收器的输出不确定），容易受到外界的噪声干扰。当噪声电压超过输入信号门限时（典型值±200mV），接收器将输出数据，导致对应的UART接收无效的数据，使紧接着的正常通讯出错；另外一种情况可能发生在打开/关闭发送使能控制的瞬间，使接收器输出信号，也会导致UART错误地接收。</p><p>解决方法：</p><p>1）在通讯总线上采用同相输入端上拉（A线）、反相输入端下拉（B线）的方法对总线进行钳位，保证接收器输出为固定的“1”电平；</p><p>2）采用内置防故障模式的MAX308x系列的接口产品替换该接口电路；</p><p>3）通过软件方式消除，即在通信数据包内增加2-5个起始同步字节，只有在满足同步头后才开始真正的数据通讯。</p><p><strong>十三、影响RS-485总线通讯速度和通信可靠性的三个因素</strong></p><p>1、在通信电缆中的信号反射</p><p>在通信过程中，有两种信号因导致信号反射：阻抗不连续和阻抗不匹配。阻抗不连续，信号在传输线末端突然遇到电缆阻抗很小甚至没有，信号在这个地方就会引起反射，如图1所示。这种信号反射的原理，与光从一种媒质进入另一种媒质要引起反射是相似的。消除这种反射的方法，就必须在电缆的末端跨接一个与电缆的特性阻抗同样大小的终端电阻，使电缆的阻抗连续。由于信号在电缆上的传输是双向的，因此，在通讯电缆的另一端可跨接一个同样大小的终端电阻从理论上分析，在传输电缆的末端只要跨接了与电缆特性阻抗相匹配的终端电阻，就再也不会出现信号反射现象。但是，在实现应用中，由于传输电缆的特性阻抗与通讯波特率等应用环境有关，特性阻抗不可能与终端电阻完全相等，因此或多或少的信号反射还会存在。</p><p>引起信号反射的另个原因是数据收发器与传输电缆之间的阻抗不匹配。这种原因引起的反射，主要表现在通讯线路处在空闲方式时，整个网络数据混乱。</p><p>信号反射对数据传输的影响，归根结底是因为反射信号触发了接收器输入端的比较器，使接收器收到了错误的信号，导致CRC校验错误或整个数据帧错误。</p><p>在信号分析，衡量反射信号强度的参数是RAF（RefectionAttenuationFactor反射衰减因子）。它的计算公式如式（1）。</p><p>RAF=20lg（Vref/Vinc）（1）</p><p>式中：Vref-反射信号的电压大小；Vinc-在电缆与收发器或终端电阻连接点的入射信号的电压大小。</p><p>具体的测量方法如图3所示。例如，由实验测得2.5MHz的入射信号正弦波的峰-峰值为+5V，反射信号的峰-峰值为+0.297V，则该通讯电缆在2.5MHz的通讯速率时，它的反射衰减因子为：RAF=20lg（0.297/2.5）=-24.52dB</p><p>要减弱反射信号对通讯线路的影响，通常采用噪声抑制和加偏置电阻的方法。在实际应用中，对于比较小的反射信号，为简单方便，经常采用加偏置电阻的方法。在通讯线路中，如何通过加偏置电阻提高通讯可靠性的原理，后面将做详细介绍。</p><p><strong>十四、在通讯电缆中的信号衰减</strong></p><p>第二个影响信号传输的因素是信号在电缆的传输过程中衰减。一条传输电缆可以把它看出由分布电容、分布电感和电阻联合组成的等效电路。</p><p>电缆的分布电容C主要是由双绞线的两条平行导线产生。导线的电阻在这里对信号的影响很小，可以忽略不计。信号的损失主要是由于电缆的分布电容和分布电感组成的LC低通滤波器。PROFIBUS用的LAN标准型二芯电感（西门子为DP总线选用的标准电缆），在不同波特率时的衰减系数。</p><p><strong>十五、在通讯电缆中的纯阻负载</strong></p><p>影响通讯性能的第三个因素是纯阻性负载（也叫直流负载）的大小。这里指的纯阻性负载主要由终端电阻、偏置电阻和RS-485收发器三者构成。</p><p>在叙述EIARS-485规范时曾提到过RS-485驱动器在带了32个节点，配置了150Ω终端电阻的情况下，至少能输出1.5V的差分电压。一个接收器的输入电阻为12kΩ，整个网络的等效电路如图5所示。按这样计算，RS-485驱动器的负载能力为：RL=32个输入电阻并联||2个终端电阻=（（12000/32）×（150/2））/（12000/32）+（150/2））≈51.7Ω</p><p>现在比较常用的RS-485驱动器有MAX485、DS3695、MAX1488/1489以及和利时公司使用的SN75176A/D等，其中有的RS-485驱动器负载能力可以达到20Ω。在不考虑其它诸多因素的情况下，按照驱动能力和负载的关系计算，一个驱动器可带节点的最大数量将远远大于32个。</p><img alt=18个问答，讲透了RS485接口 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RwHvZfqFX4dzOK><p>在通讯波特率比较高的时候，在线路上偏置电阻是很有必要的。偏置电阻的连接方法。它的作用是在线路进入空闲状态后，把总线上没有数据时（空闲方式）的电平拉离0电平。这样一来，即使线路中出现了比较小的反射信号或干扰，挂接在总线上的数据接收器也不会由于这些信号的到来而产生误动作。通过下面后例子了，可以计算出偏置电阻的大小：终端电阻Rt1=Rr2=120Ω；</p><p>假设反射信号最大的峰-峰值Vref≤0.3Vp-p，则负半周的电压Vref≤0.15V;终端的电阻上由反射信号引起的反射电流Iref≤0.15/（120||120）=2.5mA。一般RS-485收发器（包括SN75176）的滞后电压值（hysteresisvalue）为50mV，即：</p><p>（Ibias-Iref）×（Rt1||Rt2）≥50mV</p><p>于是可以计算出偏置电阻产生的偏置电流Ibias≥3.33mA</p><p>+5V=Ibias（R上拉+R下拉+（Rt1||Rt2））（2）</p><p>通过式2可以计算出R上拉=R下拉=720Ω</p><p>在实际应用中，RS-485总线加偏置电阻有两种方法：</p><p>（1）把偏置电阻平衡分配给总线上的每一个收发器。这种方法给挂接在RS-485总线上的每一个收发器加了偏置电阻，给每一个收发器都加了一个偏置电压。</p><p>（2）在一段总线上只用一对偏置电阻。这种方法对总线上存在大的反射信号或干扰信号比较有效。值得注意的是偏置电阻的加入，增加了总线的负载。</p><p><strong>十六、RS-485总线的负载能力和通讯电缆长度之间的关系</strong></p><p>在设计RS-485总线组成的网络配置（总线长度和带负载个数）时，应该考虑到三个参数：纯阻性负载、信号衰减和噪声容限。纯阻性负载、信号衰减这两个参数，在前面已经讨论过，现在要讨论的是噪声容限（NoiseMargin）。RS-485总线接收器的噪声容限至少应该大于200mV。前面的论述者是在假设噪声容限为0的情况下进行的。</p><p>在实际应用中，为了提高总线的抗干扰能力，总希望系统的噪声容限比EIARS-485标准中规定的好一些。从下面的公式能看出总线带负载的多少和通讯电缆长度之间的关系：Vend=0.8（Vdriver-Vloss-Vnoise-Vbias）（3）</p><p>其中：Vend为总线末端的信号电压，在标准测定时规定为0.2V；Vdriver为驱动器的输出电压（与负载数有关。负载数在5～35个之间，Vdriver=2.4V；当负载数小于5，Vdriver=2.5V；当负载数大于35，Vdriver≤2.3V）；Vloss为信号在总线中的传输过程中的损耗（与通讯电缆的规格和长度有关），由表1提供的标准电缆的衰减系数，根据公式衰减系数b=20lg（Vout/Vin）可以计算出Vloss=Vin-Vout=0.6V（注：通讯波特率为9.6kbps，电缆长度1km，如果特率增加，Vloss会相应增大）；Vnoise为噪声容限，在标准测定时规定为0.1V；Vbias是由偏置电阻提供的偏置电压（典型值为0.4V）。</p><p>式（3）中乘以0.8是为了使通信电缆不进入满载状态。从式（3）可以看出，Vdriver的大小和总线上带负载数的多少成反比，Vloss的大小和总线长度成反比，其他几个参数只和用的驱动器类型有关。因此，在选定了驱动器的RS-495总线上，在通信波特率一定的情况下，带负载数的多少，与信号能传输的最大距离是直接相关的。具体关系是：</p><p>在总线允许的范围内，带负载数越多，信号能传输的距离就越小；带负载数据少，信号能传输的距离就发越远。</p><p><strong>十七、分布电容对RS-485总线传输性能的影响</strong></p><p>电缆的分布电容主是由双绞线的两条平行导线产生。另外，导线和地之间也存在分布电容，虽然很小，但在分析时也不能忽视。分布电容对总线传输性能的影响，主要是因为总线上传输的是基波信号，信号的表达方式只有“1”和“0”。在特殊的字节中，例如0x01，信号“0”使得分布电容有足够的充电时间，而信号“1”到来时，由于分布电容中的电荷，来不及放电，（Vin+）-（Vin-）-还大于200mV，结果使接爱误认为是“0”，而最终导致CRC校验错误，整个数据帧传输错误。</p><p>由于总线上分布影响，导致数据传输错误，从而使整个网络性能降低。解决这个问题有两种方法：</p><p>（1）降低数据传输的波特率；</p><p>（2）使用分布电容小的电缆，提高传输线的质量。</p><p><strong>十八、单工、半双工和全双工的定义</strong></p><p>1、如果在通信过程的任意时刻，信息只能由一方A传到另一方B，则称为单工。</p><p>2、如果在任意时刻，信息既可由A传到B，又能由B传A，但只能由一个方向上的传输存在，称为半双工传输。</p><p>3、如果在任意时刻，线路上存在A到B和B到A的双向信号传输，则称为全双工。</p><p>电话线就是二线全双工信道。由于采用了回波抵消技术，双向的传输信号不致混淆不清。双工信道有时也将收、发信道分开，采用分离的线路或频带传输相反方向的信号，如回线传输。</p><img alt=18个问答，讲透了RS485接口 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R693gZV7RzkjoS><p><strong>免责声明：</strong>本文由作者原创，文章内容系作者个人观点，电子发烧友网转载仅作为传达一种不同的观点，不代表电子发烧友网对该观点的赞同或支持，如有异议，欢迎联系电子发烧友网。</p><ul><li><h1 toutiao-origin=h2>5G基站开建，基站滤波器和NOR Flash跟得上吗？</h1></li><li><p>3 家 NB-IoT 芯片厂商获电信大单！</p></li><li><p>十二大应用引爆Cat.1，物联网“新贵”诞生！</p></li><li><p>比额温枪更火的血氧仪，你想知道的都在这了….</p></li><li><p>全球135万确诊！停工停产、无薪休假、降薪，扛过寒冬！</p></li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'18','问答','讲透'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>