<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>全面剖析可靠性与可用性（附英文详解） | 极客快訊</title><meta property="og:title" content="全面剖析可靠性与可用性（附英文详解） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/7c5985e83bfe404192bd942ae0221b4b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d19f72cc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d19f72cc.html><meta property="article:published_time" content="2020-11-14T21:07:11+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:11+08:00"><meta name=Keywords content><meta name=description content="全面剖析可靠性与可用性（附英文详解）"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d19f72cc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>全面剖析可靠性与可用性（附英文详解）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7c5985e83bfe404192bd942ae0221b4b><p class=pgc-img-caption></p></div><p class=ql-align-justify>相信点开这篇文章的读者，一定或多或少接触过“高可靠”“高可用”这些字眼，但是往往或语焉不详，或罗列术语（MTBF、MTTR ...），那么我们到底应该如何定量描述系统的可靠性和可用性指标呢，这些看着很上流的术语到底意味着什么呢？</p><p class=ql-align-justify>首先了解一下故障的定义：</p><p class=ql-align-justify><strong>故障定义</strong></p><p class=ql-align-justify>硬件故障（Hardware failure）</p><p class=ql-align-justify>工业界通常使用“浴盆曲线”来描述硬件故障，具体如下图所示。具体来说，硬件的生命周期一般被划分为三个时期：</p><p class=ql-align-justify>1) The first part is a decreasing failure rate, known as early failures</p><p class=ql-align-justify>2) The second part is a constant failure rate, known as random failures</p><p class=ql-align-justify>3) The third part is an increasing failure rate, known as wear-out failures</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8b821ff60ad04a60ae530496c44b6e60><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>图1 浴盆曲线（Bath tubcurve）</p><p class=ql-align-justify></p><p class=ql-align-justify>软件故障（Software failure）</p><p class=ql-align-justify>软件故障可以通过每千行代码的缺陷数(Defects/KLOC)进行测量，称为缺陷密度(Defect Density)：</p><p class=ql-align-justify>Defect Density= Number of Defects / KLOC</p><p class=ql-align-justify>影响缺陷密度的因素主要有如下几点：</p><p class=ql-align-justify>1) 软件过程（代码评审、单元测试等）</p><p class=ql-align-justify>2) 软件复杂度</p><p class=ql-align-justify>3) 软件规模</p><p class=ql-align-justify>4) 开发团队经验</p><p class=ql-align-justify>5) 可复用代码比例（久经考验的代码）</p><p class=ql-align-justify>6) 产品交付前的测试</p><p class=ql-align-justify><strong>衡量指标</strong></p><p class=ql-align-justify>平均故障间隔时间（MTBF）</p><p class=ql-align-justify>英文全称：Mean Time Between Failure，顾名思义，是指相邻两次故障之间的平均工作时间，是衡量一个产品的可靠性指标。</p><p class=ql-align-justify>故障率（Failure Rate）</p><p class=ql-align-justify>以下文字摘自wiki，避免翻译失真：</p><p class=ql-align-justify>Failure rate is the frequency with which an engineered system or component fails,expressed, for example, in failures per hour. It is often denoted by the Greekletter λ (lambda) and is important in reliability engineering.</p><p class=ql-align-justify>The failure rate of a system usually depends on time, with the rate varying overthe life cycle of the system. For example, an automobile's failure rate in itsfifth year of service may be many times greater than its failure rate duringits first year of service. One does not expect to replace an exhaust pipe,overhaul the brakes, or have major transmission problems in a new vehicle.</p><p class=ql-align-justify>In practice, the mean time between failures (MTBF, 1/λ) is often reported insteadof the failure rate. This is valid and useful if the failure rate may beassumed constant – often used for complex units / systems, electronics – and isa general agreement in some reliability standards (Military and Aerospace). Itdoes in this case only relate to the flat region of the bathtub curve, alsocalled the "useful life period". Because of this, it is incorrect to extrapolateMTBF to give an estimate of the service life time of a component, which willtypically be much less than suggested by the MTBF due to the much higher failurerates in the "end-of-life wear out" part of the" bathtubcurve".</p><p class=ql-align-justify>为便于理解，举个例子：比如正在运行中的100只硬盘，1年之内出了2次故障，则故障率为0.02次/年。</p><p class=ql-align-justify>上文提到的关于MTBF和Failure Rate关系值得细细体会，在现实生活中，硬件厂商也的确更热衷于在产品上标注MTBF（个人猜测是因为MTBF往往高达十万小时甚至百万小时，容易吸引眼球）。Failure Rate伴随着产品生命周期会产生变化，因此，只有在前述“浴盆曲线”的平坦底部（通俗点说就是产品的“青壮年时期”）才存在如下关系：</p><p class=ql-align-justify>MTBF= 1/λ</p><p class=ql-align-justify>平均修复时间（MTTR）</p><p class=ql-align-justify>英文全称：Mean Time To Repair，顾名思义，是描述产品由故障状态转为工作状态时修理时间的平均值。在工程学，MTTR是衡量产品维修性的值，在维护合约里很常见，并以之作为服务收费的准则。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2bc6608d329243a09b162e281e573dbb><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>图2 硬件MTTR估算</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ce4f4535152741f2b1f2c40739db48e9><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>图3 软件MTTR估算</p><p class=ql-align-justify>可用性（Availability）</p><p class=ql-align-justify>GB/T3187-97对可用性的定义：在要求的外部资源得到保证的前提下，产品在规定的条件下和规定的时刻或时间区间内处于可执行规定功能状态的能力。它是产品可靠性、维修性和维修保障性的综合反映。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b27df4d0614c4a0d9b6bed81dc862921><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>关于Availability这个计算公式，很容易理解，这里不多做解释。通常大家习惯用N个9来表征系统可用性，比如99.9%（3-ninesavailability），99.999%（5-ninesavailability）。</p><p class=ql-align-justify>宕机时间（Downtime）</p><p class=ql-align-justify>顾名思义，指机器出现故障的停机时间。这里之所以会提Downtime，是因为使用每年的宕机时间来衡量系统可用性，更符合直觉，更容易理解。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ac474b6975eb4c369c4ea2d48b4a6462><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>图4 Availability与Downtime对应关系</p><p class=ql-align-justify></p><p class=ql-align-justify><strong>延伸思考</strong></p><p class=ql-align-justify>MTBF不靠谱？</p><p class=ql-align-justify>一般来说，服务器的主要部件MTBF，厂商标称值都在百万小时以上。比如：主板、CPU、硬盘为100wh，内存为400wh（4根内存约为100wh），从而可以推算出服务器整体MTBF约25wh（约30年），年故障约3%，也就是说，100台服务器每年总要坏那么几台。</p><p class=ql-align-justify>上面的理论计算看着貌似也没啥问题，感觉还挺靠谱。但如果换个角度想想，总觉得哪里不太对劲：MTBF约30年，难道说可以期望它服役30年？先看看**的工程师如何解释：</p><p class=ql-align-justify>It is common to see MTBF ratings between 300,000 to 1,200,000 hours for hard disk drivemechanisms, which might lead one to conclude that the specification promisesbetween 30 and 120 years of continuous operation. This is not the case! Thespecification is based on a large (statistically significant) number of drivesrunning continuously at a test site, with data extrapolated according tovarious known statistical models to yield the results.</p><p class=ql-align-justify>Based on the observed error rate over a few weeks or months, the MTBF is estimatedand not representative of how long your individual drive, or any individualproduct, is likely to last. Nor isthe MTBF a warranty - it is representative ofthe relative reliability of a family of products. A higher MTBF merely suggestsa generally more reliable and robust family of mechanisms (depending upon theconsistency of the statistical models used). Historically, the field MTBF, whichincludes all returns regardless of cause, is typically 50-60% of projected MTBF.</p><p class=ql-align-justify>看到这里，再联系前文对于Failure Rate的阐述，我知道各位读者有没有摸清其中的门道。其实说白了很简单，这些厂商真正测算的是产品在“青壮年”健康时期的Failure Rate，然后基于与MTBF的倒数关系，得出了动辄百万小时的MTBF。而现实世界中，这些产品的Failure Rate在“中晚年”时期会快速上升，因此，这些MTBF根本无法反映产品的真实寿命。文中也提到，**也意识到MTBF存在弊端，因此改用AFR（AnnualizedFailure Rate），俗称“年度不良率”。</p><p class=ql-align-justify>其实，早在2007年，Google和CMU同时在FAST07发表论文，详细讨论了硬盘故障的问题：</p><p class=ql-align-justify>CMU《Diskfailures in the real world: What does an MTTF of 1,000,000 hours mean to you?》</p><p class=ql-align-justify>Google《FailureTrends in a Large Disk Drive Population》</p><p class=ql-align-justify>Google采集了公司超过10w块消费级HDD硬盘数据（SATA和PATA，5400转和7200转，7家不同厂商，9种不同型号，容量从80G到400G不等），最终得出如下数据：</p><p class=ql-align-justify>Google found that disks had an annualized failure rate (AFR) of 3% for the first threemonths, dropping to 2% for the first year. In the second year the AFR climbed to8% and stayed in the 6% to 9% range for years 3-5.</p><div class=pgc-img><img alt=全面剖析可靠性与可用性（附英文详解） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ce392e5029c742bfa4aa1b60a57fc6e5><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'详解','可用性','剖析'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>