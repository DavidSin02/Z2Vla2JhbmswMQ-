<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>输入输出的上升沿和下降沿是怎么来的，一起看看 | 极客快訊</title><meta property="og:title" content="输入输出的上升沿和下降沿是怎么来的，一起看看 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/f7b6921508c949ffbaa5275b85ee26c1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d2c8c96.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d2c8c96.html><meta property="article:published_time" content="2020-10-29T21:05:00+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:00+08:00"><meta name=Keywords content><meta name=description content="输入输出的上升沿和下降沿是怎么来的，一起看看"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d2c8c96.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>输入输出的上升沿和下降沿是怎么来的，一起看看</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f7b6921508c949ffbaa5275b85ee26c1><p class=pgc-img-caption>高电平、低电平、上升沿和下降沿的区别</p></div><p>数字电路中，电平从低电平（逻辑信号为0）变为高电平（逻辑信号为1）的那一瞬间叫作上升沿，电平从高电平（逻辑信号为1）变为低电平（逻辑信号为0）的那一瞬间叫作下降沿。</p><p>高电平触发，是指I/O口电平为高电平时相应的功能或执行程序一直有效，直到电平被拉为低电平才失效。上升沿触发是当信号从低电平变为高电平时的瞬间有效，不管后面再变为高电平或低电平都无效。</p><p>低电平触发，是指I/O口电平为低电平时相应的功能或执行程序一直有效，直到电平被拉为高电平才失效。下升沿触发是当信号从高电平变为低电平时的瞬间有效，不管后面再变为低电平或高电平都无效。</p><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/41445d72-e723-43bd-8463-e12e0a84fdb3><p class=pgc-img-caption>数字电路中的“1”和“0”指的就是电平的高低</p></div><p>这种电平触发方式在数字电路的应用上最为常见，在工业自动化应用的控制程序上也很常见。我们最为熟悉的就是PLC在编写程序时用到的上升沿和下降沿指令，这些指令是集成在PLC内部的程序块。如果我们不选择PLC作为控制部件，而是要用单片机来控制，那么上升沿和下降沿的功能我们该如何实现？单片机内部是没有这些编辑好的程序块的，要实现这个功能就必须自己编写程序。程序该如何编写，下面我们结合程序深入地来讲一讲这个问题。</p><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2931e2bc6228436ea8788914406f2997><p class=pgc-img-caption>图1</p></div><p>首先，程序中使用的变量定义如图1。</p><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bda8c7b983f04cd8b93f60ccc05c4e7d><p class=pgc-img-caption>图2</p></div><p>主程序如图2。</p><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/62e47b555ded41b4a538ced9ff5473ba><p class=pgc-img-caption>图3</p></div><p>输入上升沿、输入下降沿是如何通过程序产生的，如图3。</p><div class=pgc-img><img alt=输入输出的上升沿和下降沿是怎么来的，一起看看 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/73b50e29b0d14f8f9b29b2af910dda9d><p class=pgc-img-caption>图4</p></div><p>输出上升沿、输出下降沿是如何通过程序产生的，如图4。</p><p>以上只演示了输入、输出IO口的上升沿和下降沿产生的过程。如果我们需要用到其他"位变量"的上升沿或下降沿，同样可以用这种方式实现。</p><h1><strong>下面我把完整的程序附在后面，有需要的老铁们可以复制出来使用</strong></h1><p>/***********************实现上升沿下降沿的程序源代码*************************/</p><p>#include &lt;STC15F2K60S2.H></p><p>#define FOSC 24000000L</p><p>void get_input(); //输入函数</p><p>void out_output(); //输出函数</p><p>char underedge, uperedge; //输入上升沿、下降沿变量</p><p>char out_underedge, out_uperedge; //输出上升沿、下降沿变量</p><p>char inputimg = 0, outputimg = 0; //输入、输出映像变量</p><p>char inputimgtmp = 0, outputimgtmp = 0; //输入、输出临时映像变量</p><p>void main()</p><p>{</p><p>while(1)</p><p>{</p><p>underedge = 0; uperedge = 0; //输入上升沿清除。因为每扫描一次上升沿都</p><p>//会被复位，所以上升沿的持续时间是一个扫</p><p>//描周期。</p><p>get_input();</p><p>if(uperedge & 0x1) //检测是否有输入上升沿出现，有则执行流程程序。</p><p>{</p><p>//此处编写流程处理程序</p><p>}</p><p>if(underedge & 0x1) //检测是否有输入下降沿出现，有则执行流程程序。</p><p>{</p><p>//此处编写流程处理程序</p><p>}</p><p>outputimg |= 0x1; //IO口第一位输出</p><p>out_underedge = 0; out_uperedge = 0; //输出上升沿清除。下降沿的持续时间</p><p>//与上升沿相同。</p><p>out_output();</p><p>}</p><p>}</p><p>void get_input()</p><p>{</p><p>int i;</p><p>bit a, b;</p><p>if(P20) //P20 = 1，表示输入口为高电平，无输入。</p><p>inputimgtmp &= 0xfe; //无输入，清除临时映像的相应位。</p><p>else</p><p>inputimgtmp |= 0x1; //有输入，置位临时映像的相应位。</p><p>for(i = 1; i &lt; 256; i = i * 2)</p><p>{</p><p>a = inputimg & i; //取出输入映像和临时映像的值</p><p>b = inputimgtmp & i; //在下面比较。</p><p>if(a != b) //输入映像和临时映像的值出现变化，</p><p>//说明有上升沿或下降沿出现。</p><p>{</p><p>if(a) //输入映像相应位为1,置位下降沿位标志。</p><p>underedge |= i;</p><p>else //输入映像相应位为0,置位上升沿位标志。</p><p>uperedge |= i;</p><p>}</p><p>}</p><p>inputimg = inputimgtmp; //临时映像转存入输入映像</p><p>}</p><p>void out_output()</p><p>{</p><p>int i;</p><p>bit a, b;</p><p>for(i = 1; i &lt; 256; i = i * 2)</p><p>{</p><p>a = outputimgtmp & i; //取出输出映像和临时映像的值</p><p>b = outputimg & i; //在下面比较。</p><p>if(a != b) //输出映像和临时映像的值出现变化，</p><p>//说明有上升沿或下降沿出现。</p><p>{</p><p>if(a) //输出映像相应位为1,置位下降沿位标志。</p><p>out_underedge |= i;</p><p>else //输出映像相应位为1,置位下降沿位标志。</p><p>out_uperedge |= i;</p><p>}</p><p>}</p><p>outputimgtmp = outputimg; //输出映像转存入临时映像</p><p>P10 = outputimg & 0x1; //IO口第1位输出</p><p>P11 = outputimg & 0x2; //IO口第2位输出</p><p>}</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'输入','输出','沿是'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>