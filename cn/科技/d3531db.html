<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>记住3个部分、2个地址，1个公式，你也能轻松划分子网 | 极客快訊</title><meta property="og:title" content="记住3个部分、2个地址，1个公式，你也能轻松划分子网 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/caa73d8e550a40769df2fad5e03484ee"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3531db.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3531db.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3531db.html><meta property="article:published_time" content="2020-10-29T20:52:24+08:00"><meta property="article:modified_time" content="2020-10-29T20:52:24+08:00"><meta name=Keywords content><meta name=description content="记住3个部分、2个地址，1个公式，你也能轻松划分子网"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d3531db.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>记住3个部分、2个地址，1个公式，你也能轻松划分子网</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>感谢！</h1><p>非常感谢各位小伙伴的支持，昨天头条号通过了优质领域创作者认证，这是对我十几天认真分享网络知识的认可。后续我会继续给大家分享高质量的网络知识，希望小伙伴还能一如既往的继续多持我，帮忙多点赞和转发。后面我还会分享路由、交换、MPLS、VPN、QoS等方面的内容。</p><p>同时各位小伙伴有什么需求，可以留言提出来，我会尽量的满足，今天的文章就是为了回报一位粉丝的支持而写的！</p><h1><strong>概述</strong></h1><p>划分子网是任何一个网络工程师都必须掌握的基本技能，但由于在工作中经常使用24位掩码，在加上网络上有很多小工具可以自动计算，所以很多小伙伴都已经丧失了手工划分子网的能力。但我们作为一个高手，还是要具备手工划分子网能力的。</p><p>其实手工划分子网并不复杂，只需要记住3个部分、2个地址、1个公式，就可以轻松的划分子网。下面我们一起来看一下!</p><h1>划分子网原因</h1><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/caa73d8e550a40769df2fad5e03484ee><p class=pgc-img-caption>Classful地址</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>我们都知道IP地址分为A、B、C、D、E五类Classfull地址，但通常我们只使用A、B、C类地址来划分子网，因为D类地址用于组播，E类地址暂时保留不用。</p><p>如上图所示，classful地址只包含两部分：network和host。一个A类地址可以包含的主机有16,777,214 (2的24次方-2 )个，这要是分配给一个组织和公司，是极大的浪费，因为没有公司能用完这么多地址。即使一个C类地址也包含254个可用的IP，这对于公网地址短缺的现状，全部分配给一个公司仍然是太多了。</p><p>看到这里，有的小伙伴可能会说，在公司都是使用的是私有地址，随便分配一个8网段的A类地址，就足够整个公司使用，不存在地址不够一说。那么这么想的小伙伴一定没有注意另外2个问题：</p><p><strong>问题1：网络中的无用流量对带宽的占用</strong></p><p>我们知道，一台主机为了和其它主机进行通信，会发送一些的报文，最典型的就是ARP报文。平常可能我们感知不太明显，因为我们所在的网络规模一般都很小。</p><p>但是假设网络中有1万台主机，一台主机发送的ARP报文，交换机会转发给剩下的9999台主机，交换机每秒需要发送9999个ARP报文。在极端情况下，所有的主机之间都互相通信，那么网络带宽很快就会被这些无用的流量占用满的。</p><p><strong>问题2：所有的PC都要处理其它PC发送的无用流量；</strong></p><p>接上面的例子，一台主机发送的ARP请求报文，只对于目标主机是有用的，对于剩下的9998都是无用的，收到以后就会丢弃。但是这9998台主机收到ARP报文以后，都需要处理，它要判断这个ARP是否是请求自己的MAC地址，这也会消耗主机的资源。网络规模越大，这种消耗越明显，对电脑的运行速度影响也就会越大。</p><p>所以在工作中，在网络规模比较小，几台PC怎么连都可以，不需要考虑划分子网。但是在较大的网络中，我们都是要划分子网的，不会把所有的PC都分在同一个网段。</p><p>据我观察，越是大型的公司，对子网划分越严格要求，不浪费一个地址是他们追求的目标。这就要求我们也要掌握划分子网这项技能，后面<strong>咋们也是需要去大公司镀金的，不能老是在小公司</strong>，对我们的职业生涯没有好处。</p><h1>划分子网的3个部分，2个地址</h1><p><strong>3个部分</strong></p><p>上面我们已经看到了，对于一个classful地址来说，它由二部分组成：network和host。</p><p>而划分子网本质是从host拿出一部分出来，作为network；拿出的这一部分network，我们称它为subnet（子网），所以IP地址就变成了三部分：network、subnet、host，如下图所示：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9346f6498e2d4865b00792099e2b2a1f><p class=pgc-img-caption>IP地址变成三部分</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p><strong>2个地址</strong></p><p>对于任何一个IP地址来说，都<strong>有两个与它对应的特殊IP地址，一个是网络ID（network ID），一个是网络广播IP，这两个地址是天生存在</strong>的。</p><p>例如对于192.168.1.10 255.255.255.0 这个地址来说，它的网络ID是192.168.1.0，对应的广播地址是192.168.1.255。</p><p>对于上面这种24位的掩码的地址来说，比较简单，我们一眼就能看出，但是这个是怎么计算的呢？因为如果是稍微复杂的地址，我们就看不出来了，例如192.168.1.72 255.255.255.240，这个IP对应的网络ID和广播地址各是多少呢？</p><p><strong>网络ID计算</strong></p><p>我先来看一下<strong>网络ID的定义：用来唯一的标识一个网段，所有在同一个网段上的主机使用相同的网络。</strong></p><p>计算网络ID有多种方式，我教大家一种比较常用的方式，其步骤如下：</p><p>步骤1：首先把IP地址和子网掩码的后8位都化为2进制，如下图所示：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/29ebda1c00b341f9bfdeef19237b2307><p class=pgc-img-caption>后8位化为2进制</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>步骤2：我们知道子网掩码用来标识一个IP地址的网络ID长度的，使用1来表示，而使用0来表示主机；把掩码和IP进行“相与”操作，就可以得到网络ID了，如下图所示：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/024085a831624d808b638fde28dad529><p class=pgc-img-caption>想与操作</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>步骤3：上一步得到网络ID的后8位是01000000，化为十进制是64，则这个IP对应的网络ID就是192.168.1.64</p><p><strong>广播地址计算</strong></p><p>广播地址，这里说的广播地址不是二层广播MAC地址，而是三层广播IP地址。三层广播地址有什么用呢？也是用来在同一个网段群发报文的，所有在同一个网段的所有主机，收到三层IP广播地址，都是不能丢弃的，需要处理。</p><p>一个网段的广播地址，有比较简单的计算方法，<strong>就是把所有的host位都置为1</strong>，如下图所示：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7b7388c77d154b4f852ffe042a674c8c><p class=pgc-img-caption>主机位都置为1</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>这样计算出来的广播地址后8位值为79，则这个网段的广播地址就为192.168.1.79</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/60dde4a604e14914ba9336048d4d324e><p class=pgc-img-caption>转化为十进制</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p><strong>一个公式</strong></p><p>上面我们通过计算，已经得到192.168.1.72 255.255.255.240 这个IP地址对应的网络ID和广播地址，那么这个网段可以容纳多个主机呢? 换句话说，有哪些地址是和这个IP在同一个网段里的呢？</p><p>其实很简单，<strong>掐头去尾，除去网络ID和广播地址，剩下的地址，都是在同一个网段</strong>，并且是可用的。</p><p>如上面的例子，去除了网络ID 192.168.1.64，广播地址192.168.1.79，剩下的14个IP地址192.168.65-78，都是可以使用的。</p><p>这里有一个简单的公式来计算某个网段内可用的IP地址个数：2的n次方-2。</p><p>这里的n指的是这个网段内的主机位数，所以计算结果为：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5c35e066c82d4dcebd95ab10e17226fa><p class=pgc-img-caption>计算主机数量的公式</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p><strong>注意点：</strong></p><p>一个IP的网络ID和广播地址是不能配置在设备上的，如果配置，就会出错，如下图所示：</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d4ee70a525e64a84a77ecd61c91195eb><p class=pgc-img-caption>网络ID和广播地址不能配置</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>顺便说一下计算subnet的公式是：2的n次方。这里不需要减2，n指的是subnet的位数，在这个例子中也是4，所有对于192.168.1.0 255.255.255.0 这个C类地址来说，被分为了2的4次方，即16个subnets。</p><h1>前缀和掩码换算</h1><p>掩码地址太长，写起来太复杂，所有很多时候我们习惯使用前缀来表示子网掩码，例如192.168.1.72 255.255.255.240，可以写为192.168.1.72/28。那么掩码和前缀之间是怎么换算的呢？请看下面的步骤：</p><p>步骤:1：把内容转化2进制，例如下图</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e71e02527dd94f6e9f4198d47359ef7c><p class=pgc-img-caption>转化为2进制</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>步骤2：前面的24位我们都知道是网络位，在加上后面的子网位，就变成了最终的数字24+4=28；</p><p>反过来计算也一样：192.168.1.72/28对应的掩码是多少？</p><p>步骤1：28表示掩码的前面28位都是1，简写为：（位了简洁，255没有写成11111111）</p><div class=pgc-img><img alt=记住3个部分、2个地址，1个公式，你也能轻松划分子网 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/549eac9d416345dc9abbbe038cd3d61e><p class=pgc-img-caption>步骤</p><div class=pgc-img-handler><div class="pgc-img-button editorImage fix-android"></div><div class="pgc-img-button setImageCover fix-android"></div><div class="pgc-img-button deleteImage fix-android"></div></div><div class=pgc-img-border></div></div><p>步骤2：计算掩码：二进制11110000的值为240，所以掩码就为255.255.255.240；</p><p>是不是很简单？</p><h1>划分子网的影响</h1><p>划分子网除了可以节省带宽和减少主机的负担以为，也是有缺点的，最大的缺点就是网络变的复杂了。</p><p><strong>缺点1：看起来在同一个网段的IP，其实不是</strong></p><p>有时你觉得这两个相隔很近的地址，看起来像在同一个网段，其实不是。例如下面的：</p><p>192.168.1.78/28，192.168.1.81/28，在同一个网段吗？</p><p>不是，它们是不能直接互通的！只有计算了以后才发现它们不在同一个网段，这就增加了维护网络的复杂度！</p><p><strong>缺点2：在不同的子网的主机直接要通信，必须要经过网关</strong></p><p>那这两个主机（192.168.1.78/28，192.168.1.81/28）想要通信，需要怎么办呢？中间必须加一台网关设备，这就增加了开销！</p><p>不同子网的主机通信，需要网关，如果还有疑问，可以参考我之前的文章：<a class=pgc-link href="https://www.toutiao.com/i6742996863156224526/?group_id=6742996863156224526" target=_blank>https://www.toutiao.com/i6742996863156224526/</a></p><h1>总结</h1><p>从上面的例子中我们可以看出，网络IP地址必须要和掩码结合起来才有意义，不然你不能判断它到底是属于哪个网段，例如192.168.1.72这个地址，如果掩码不同，所在网段也不同！</p><p>我们还可以总结出：</p><ul><li><strong>网络ID的计算是IP地址和子网相与的结果</strong></li><li><strong>可用的IP地址需要去除网络ID和广播地址</strong></li><li><strong>计算可用IP地址有一个简单公式：2的n次方-2，n指的是主机位数</strong></li><li><strong>计算IP地址被划分为多少给subnet，也有一个简单公式：2的n次方，n指的是子网位数</strong></li><li><strong>子网掩码和前缀之间转换，把它们都转换为二进制然后换算，就非常简单了</strong></li></ul><p>关于子网划分，各位小伙伴也明白了吧？给大家留个题目，看有没有完全掌握！</p><p></p><p>欢迎关注我的头条号，一起讨论网络问题！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'记住','地址','公式'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>