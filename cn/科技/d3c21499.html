<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>PLC如何通讯控制变频器？图文讲解USS通讯控制！ | 极客快訊</title><meta property="og:title" content="PLC如何通讯控制变频器？图文讲解USS通讯控制！ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/9385fc6ceb2947dd94a44b3dead0b354"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d3c21499.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d3c21499.html><meta property="article:published_time" content="2020-10-29T21:11:31+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:31+08:00"><meta name=Keywords content><meta name=description content="PLC如何通讯控制变频器？图文讲解USS通讯控制！"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d3c21499.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>PLC如何通讯控制变频器？图文讲解USS通讯控制！</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>变频器我们讲过很多次了，控制方式有很多种。</p><p>包括线路控制，PROFIBUS-DP控制以及PROFINET控制，今天我们来讲解以下USS通讯控制。</p><p>很多人不了解通讯控制，一听到通讯这两个就头疼，或者觉得通讯控制很高端，其实大可不必这样。所有的通讯控制其实都是一个原理，即硬件加软件。</p><p>硬件是通讯的双方应该支持同一协议，并按照该协议接线。</p><p>而软件则是双方定义好的，按照商议好的方式进行沟通，这就是一个完整的通讯。</p><p>今天我们以S7-200和M440为例进行讲解。</p><p>在做此通讯实验前应该了解以下知识点：</p><p><strong>1、S7-200 通讯端口的功能定义。</strong></p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9385fc6ceb2947dd94a44b3dead0b354><p class=pgc-img-caption></p></div><p>上表中，3和8为RS-485信号，它们的背景颜色与PROFIBUS电缆、PROFIBUS网络插头上的颜色标记一致。通信端口可以从2和7向外供24V直流电源。</p><p>需要注意的是：</p><ul><li>CPU通信口上的<strong>2</strong>、<strong>5</strong>针在内部是连通的，并且它们和CPU上的传感器电源（＋24V）的<strong>M</strong>也是连通的</li><li>通信口插座的金属壳、<strong>1</strong>号针，与CPU接线端子上的电源部分的<strong>PE</strong>导通，而与上述的<strong>M</strong>不通</li><li>拥有两个通信口的CPU，其Port0、Port1的<strong>2</strong>、<strong>5</strong>针相通，也与<strong>M</strong>连通</li></ul><p><strong>2、西门子MM440变频器和USS通讯相关的接线方式。</strong></p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7f8fac463a2f4d909dbae6cdc764f22c><p class=pgc-img-caption></p></div><p>在 MM 440 前面板上的通信端口是 RS 485 端口。与 USS 通信有关的前面板端子有：</p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a6c8e905f2324273826b1a02d052956a><p class=pgc-img-caption></p></div><p>因 MM 440 通信口是端子连接，故 PROFIBUS 电缆不需要网络插头，而是剥出线头直接压在端子上。如果还要连接下一个驱动装置，则两条电缆的同色芯线可以压在同一个端子内。PROFIBUS 电缆的红色芯线应当压入端子 29；绿色芯线应当连接到端子 30。</p><p>一个示例接线图如下：</p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3f6a23d948cc4ec9b6281155c85cd598><p class=pgc-img-caption></p></div><p>以上是硬件部分；</p><p>我们来看下软件部分；</p><p>1.USS指令使用（最简单的调试）</p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/dd930dd589854fca8cea810bf893e839><p class=pgc-img-caption></p></div><p>1.1、USS_INIT指令:被用于启用和初始化或禁止MicroMaster驱动器通讯。在使用任何其他USS协议指令之前，必须先执行USS_INIT指令，才能继续执行下一条指令。</p><p>1.1.1、EN：输入打开时，在每次扫描时执行该指令。仅限为通讯状态的每次改动执行一次USS_INIT指令。使用边缘检测指令，以脉冲方式打开EN输入。欲改动初始化参数，执行一条新USS_INIT指令。</p><p>1.1.2、MODE（模式）:输入值1时将端口0分配给USS协议，并启用该协议；输入值0时将端口0分配给PPI，并禁止USS协议。</p><p>1.1.3、BAUD（波特率）：将波特率设为1200、2400、4800、9600、19200、38400、57600或115200。</p><p>1.1.4、ACTIVE（激活）表示激活的驱动器。</p><p>站点号具体计算如下：</p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8dbca41ffa3146fa92f29c85e96a9784><p class=pgc-img-caption></p></div><p>其中D0～D31代表有32台变频器，四台为一组，共分成八组。如果要激活某台变频器就使该位为1，现在激活18号变频器，即为表二所示。，构成16进位数得出Active即为0004000</p><p>若同时有32台变频器须激活，则Altive为16＃FFFFFFFF，此外还有一条指令用到站点号，USS-CTRL中的Drive驱动站号不同于USS-INIT中的Active激活号，Active激活号指定哪几台变频器须要激活，而Drive驱动站号是指先激活后的哪台电机驱动，因此程序中可以有多个USS-CTRC指令。</p><p>1.2、USS_CTRL指令：被用于已在USS_INIT指令中ACTIVE（激活）的驱动器。且仅限为一台驱动器。</p><p>1.2.1、EN（使能）：打开此端口，才能启用USS_CTRL指令。且该指令应当始终启用。</p><p>1.2.2、RUN（运行）：表示驱动器是打开（1）还是关闭（0）。当RUN（运行）位打开时，驱动器收到一条命令，按指定的速度和方向开始运行。为了使驱动器运行，必须符合以下条件：DRIVE（驱动器）在USS_INIT中必须被选为ACTIVE（激活）。OFF2和OFF3必须被设为0。FAULT（故障）和INHIBIT（禁止）必须为0。当RUN（运行）关闭时，会向驱动器发出一条命令，将速度降低，直至电机停止。</p><p>1.2.3、OFF2：位被用于允许驱动器滑行至停止。</p><p>1.2.4、OFF3：位被用于命令驱动器迅速停止。</p><p>1.2.5、F_ACK ：用于确认驱动器中的故障。当从0转为1时，驱动器清除故障。</p><p>1.2.6、DIR：表示驱动器应当移动的方向正转/反转。</p><p>1.2.7、Drive（驱动器）：指定运行的驱动器号，必须已经在USS_INIT中被选为ACTIVE（激活）。</p><p>1.2.8、Type（类型—：选择驱动器类型，3系列或更早的为0，4系列为1。</p><p>1.2.9、Speed_SP（速度设定值）：作为全速百分比的驱动器速度。Speed_SP的负值会使驱动器反向旋转方向。范围：-200.0%至200.0%</p><p>1.2.10、Resp_R（收到应答）：确认从驱动器收到应答。对所有的激活驱动器进行轮询，查找最新驱动器状态信息。每次从驱动器收到应答时，Resp_R位均会打开，进行一次扫描，所有数值均被更新。</p><p>1.2.11、Error（错误）：包含对驱动器最新通讯请求结果的错误字节。</p><p>1.2.12、Status（状态）：驱动器返回的状态字原始数值。</p><p>1.2.13、Speed（速度）：按全速百分比显示驱动器当前速度。范围：-200.0%至200.0%。</p><p>1.2.14、Run_EN（运行启用）：表示驱动器是运行（1）还是停止（0）。</p><p>1.2.15、D_Dir：表示驱动器的旋转方向。</p><p>1.2.16、lnhibit（禁止）：表示驱动器上的禁止位状态（0 - 不禁止，1 - 禁止）。欲清除禁止位，“故障”位必须关闭，RUN（运行）、OFF2和OFF3输入也必须关闭。</p><p>1.2.17、Fault(故障):表示故障位状态（0 - 无故障，1 - 故障）。</p><p>四、以下是变频器MM420的设置说明和步骤：</p><p>（1）MICROMASTER4 可以有两种USS 通讯接口：RS232 和RS485。RS232 接口用选件模块（订货号为：6SE6400-1PC00-0AA0）实现。RS485 接口时，是将端子14 和15 分别连接到P+和N-来实现。</p><p>（2）为了进行USS 通讯，必须确定变频器采用的是RS485 接口，还是RS232 接口。据此可以确定USS参数应设定为哪个下标。</p><p>①P0003 =2（访问第2 级的参数所必须的）。</p><p>②P2010=USS 波特率。这一参数必须与主站采用的波特率相一致。USS 支持的最大波特率是57600 波特。（P2010的P2010[0]（IN000）是设置COM链路的串行接口，P2010[1]（IN001）是设置BOP链路的串行接口；一般我们用RS485的话是使用P2010[0]（IN000）。）</p><p>③P2011=USS 结点地址。这是为变频器指定的唯一从站地址。（P2011的P2011[0]（IN000）是设置COM链路的串行接口，P2011[1]（IN001）是设置BOP链路的串行接口；一般我们用RS485的话是使用P2010[0]（IN000）。 一旦设置了这些参数，就可以进行通讯了。主站可以对变频器的参数（PKW 区）进行读和写，也可以监测变频器的状态和实际的输出频率（PZD 区）</p><p>④P0700 =4 或5。这一设置允许通过USS 对变频器进行控制。“PZD 区”一节中，给出了对每一位含义的解释。常规的正向运行（RUN）和停车（OFF1）命令分别是047F（hex）和047E（hex）。其它的例子已在“PZD 区”一节中给出。</p><p>⑤P1000 =4 或5。这一设置允许通过USS 发送主设定值。这是缺省情况下用P2000 进行的规格化，所以，4000（hex）=在P2000 中设定的数值。</p><p>为了对早期生产的变频器具有兼容性，也可以用P2009（访问级3）进行规格化。</p><p>以下是变频器设置步骤参数表：</p><div class=pgc-img><img alt=PLC如何通讯控制变频器？图文讲解USS通讯控制！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/31fa679cafaf4eb08016e03674734c4e><p class=pgc-img-caption></p></div><p>注:（1）设置参数前先将变频器参数复位为工厂缺省设定值,应该按照下面的数值设定参数：</p><p>1.设定P0010=30</p><p>2.设定P0970=1</p><p>完成复位过程至少要1分钟。</p><p>（2）设定P0003=2 允许访问扩展参数</p><p>（3）设定电机参数时先设定P0010=1(快速调试),电机参数设置完成设定P0010=0(准备)</p><p>注意：变频器MM420只能保留有操作面板（BOP）的小面板，必须把有PROFIBUS接口的大面板取下来否则不能通信！！！！！！！！！！！！！！！！（另P3037可能要调整因为出现R5017？？错误，但第二次调试又不出现了）</p><p>再提示：使用USS指令前必须先安装“USS协议库（Tbox_V32_STEP7）”，然后才能使用USS指令，但是安装完USS库如出现“错误18：（操作数1）未为库分配V存储区。在指令树中程序块的鼠标右键菜单项目中选择【库存储区。。。】。”的编译错误，请按下面提示设置：</p><p>（1）找到编程软件第二列的“指令树”，并找到其中的“程序块”；</p><p>（2）在“程序块”上点击鼠标的右键，找到“库存储区”选项；</p><p>（3）选择“库存储区”，则弹出USS Protocol的库存储区分配窗口，在“建议地址”上用鼠标左键点击，则选择合适的建议地址，前提是这里选择的建议地址必须避开常用的地址（VB2000以后的地址不常用）。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'通讯','PLC','变频器'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>