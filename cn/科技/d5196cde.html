<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>BashæŠ€å·§ï¼šä»‹ç»é‡å®šå‘è¾“å…¥è¾“å‡ºç­‰åç§é‡å®šå‘æ“ä½œç¬¦çš„ç”¨æ³• | æå®¢å¿«è¨Š</title><meta property="og:title" content="BashæŠ€å·§ï¼šä»‹ç»é‡å®šå‘è¾“å…¥è¾“å‡ºç­‰åç§é‡å®šå‘æ“ä½œç¬¦çš„ç”¨æ³• - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/b97eed16-d976-4a57-8da4-a79915edd56a"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5196cde.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5196cde.html><meta property="article:published_time" content="2020-10-29T21:09:47+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:47+08:00"><meta name=Keywords content><meta name=description content="BashæŠ€å·§ï¼šä»‹ç»é‡å®šå‘è¾“å…¥è¾“å‡ºç­‰åç§é‡å®šå‘æ“ä½œç¬¦çš„ç”¨æ³•"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d5196cde.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>BashæŠ€å·§ï¼šä»‹ç»é‡å®šå‘è¾“å…¥è¾“å‡ºç­‰åç§é‡å®šå‘æ“ä½œç¬¦çš„ç”¨æ³•</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=BashæŠ€å·§ï¼šä»‹ç»é‡å®šå‘è¾“å…¥è¾“å‡ºç­‰åç§é‡å®šå‘æ“ä½œç¬¦çš„ç”¨æ³• onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/b97eed16-d976-4a57-8da4-a79915edd56a><p class=pgc-img-caption></p></div><p>åœ¨ Linux bash shell ä¸­ï¼Œæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘æ“ä½œç¬¦å¯¹è¯¥å‘½ä»¤çš„è¾“å…¥ã€è¾“å‡ºè¿›è¡Œé‡å®šå‘ï¼Œä»å…¶ä»–æ–‡ä»¶è·å–è¾“å…¥ï¼ŒæŠŠå‘½ä»¤è¾“å‡ºå†™åˆ°å…¶ä»–æ–‡ä»¶ã€‚<br>å…·ä½“è¯´æ˜å¯ä»¥æŸ¥çœ‹ man bash çš„ REDIRECTION å°èŠ‚ã€‚ä¸‹é¢ä¸¾ä¾‹è¯´æ˜åç§é‡å®šå‘æ“ä½œç¬¦çš„å…·ä½“ç”¨æ³•ã€‚</p><h1 class=pgc-h-arrow-right>é‡å®šå‘çš„æ¦‚å¿µ</h1><p>åœ¨ REDIRECTION å°èŠ‚å¯¹é‡å®šå‘æ¦‚å¿µè¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Before a command is executed, its input and output may be redirected using a special notation interpreted by the shell.</p><p><br>Redirection allows commands' file handles to be duplicated, opened, closed, made to refer to different files, and can change the files the command reads from and writes to.</p><p><br></p><p>If the file descriptor number is omitted, and the first character of the redirection operator is &lt;, the redirection refers to the standard input (file descriptor 0).</p><p><br>If the first character of the redirection operator is >, the redirection refers to the standard output (file descriptor 1).</p><p><br></p><p>Redirections using file descriptors greater than 9 should be used with care, as they may conflict with file descriptors the shell uses internally.</p></blockquote><p><strong>å³ï¼Œåœ¨æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘æ“ä½œç¬¦å¯¹è¯¥å‘½ä»¤çš„è¾“å…¥ã€è¾“å‡ºè¿›è¡Œé‡å®šå‘ã€‚<br>ä»å…¶ä»–æ–‡ä»¶è·å–è¾“å…¥ï¼ŒæŠŠå‘½ä»¤è¾“å‡ºå†™åˆ°å…¶ä»–æ–‡ä»¶ã€‚</strong></p><p>åœ¨ Linux ä¸­ï¼Œæ‰“å¼€æ–‡ä»¶åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰ã€‚<br>æ–‡ä»¶æè¿°ç¬¦çš„æœ‰æ•ˆå€¼æ˜¯å¤§äºæˆ–ç­‰äº 0 çš„æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ•´æ•°å€¼æ¥è¯»å†™å¯¹åº”çš„æ–‡ä»¶ã€‚</p><p><strong>é‡å®šå‘å¯ä»¥ä¿®æ”¹æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„æ–‡ä»¶ï¼Œä»è€Œåœ¨è¯»å†™åŒä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œå¯ä»¥è¯»å†™åˆ°å…¶ä»–æ–‡ä»¶ã€‚</strong></p><p>é‡å®šå‘è¾“å…¥ä¼šæŠŠæŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦å…³è”åˆ°ä»¥è¯»æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ã€‚<br>é‚£ä¹ˆè¯»å–æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦ï¼Œå°±ä¼šè¯»å–æ–‡ä»¶å†…å®¹ã€‚</p><p>é‡å®šå‘è¾“å‡ºä¼šæŠŠæŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦å…³è”åˆ°ä»¥å†™æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ã€‚<br>é‚£ä¹ˆå†™å…¥å†…å®¹åˆ°æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦ï¼Œå°±ä¼šå†™å…¥æ–‡ä»¶ã€‚</p><p>å³ï¼Œé‡å®šå‘å‰åä¼šå…³è”ä¸¤ä¸ªæ–‡ä»¶ã€‚<br>åœ¨é‡å®šå‘ä¹‹å‰ï¼ŒæŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦å¯¹åº”ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶ã€‚<br>é‡å®šå‘ä¹‹åï¼Œè¯¥æ–‡ä»¶æè¿°ç¬¦ä¼šå¯¹åº”å¦ä¸€ä¸ªæ–‡ä»¶ã€æˆ–è€…å¯¹åº”å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚<br>è€Œå¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¹Ÿæ˜¯å¯¹åº”å¦ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶ã€‚</p><p>å½“ä¸‹é¢æ–‡ä»¶åç”¨äºé‡å®šå‘æ—¶ï¼Œbash ä¼šè¿›è¡Œç‰¹æ®Šå¤„ç†ï¼š</p><ul><li><strong>/dev/fd/fd</strong>ï¼šå¦‚æœ fd æ˜¯ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•´æ•°å€¼ï¼Œåˆ™ /dev/fd/fd æ–‡ä»¶ä¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ fd</li><li><strong>/dev/stdin</strong>ï¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 0ï¼Œä¹Ÿå¯ä»¥å†™ä¸º /dev/fd/0ã€‚æ–‡ä»¶æè¿°ç¬¦ 0 ä¸€èˆ¬å¯¹åº”æ ‡å‡†è¾“å…¥</li><li><strong>/dev/stdout</strong>ï¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 1ï¼Œä¹Ÿå¯ä»¥å†™ä¸º /dev/fd/1ã€‚æ–‡ä»¶æè¿°ç¬¦ 1 ä¸€èˆ¬å¯¹åº”æ ‡å‡†è¾“å…¥</li><li><strong>/dev/stderr</strong>ï¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 2ï¼Œä¹Ÿå¯ä»¥å†™ä¸º /dev/fd/2ã€‚æ–‡ä»¶æè¿°ç¬¦ 2 ä¸€èˆ¬å¯¹åº”æ ‡å‡†é”™è¯¯è¾“å‡º</li></ul><p>åŸºäºä¸Šé¢è¯´æ˜ï¼Œå¯ä»¥ä½¿ç”¨ /dev/fd/5 æ¥å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 5ã€‚<br>æ–‡ä»¶æè¿°ç¬¦ 5 å¿…é¡»å¯¹åº”ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚<br>ä¹Ÿå°±æ˜¯è¦æœ‰æŸä¸ªå·²æ‰“å¼€æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯ 5ï¼Œ/dev/fd/5 æ‰èƒ½å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 5ã€‚</p><p>å½“ä½¿ç”¨å¤§äº 9 çš„æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œè¦ç‰¹åˆ«å°å¿ƒã€‚<br>shell è‡ªèº«å¯èƒ½ä¹Ÿä½¿ç”¨äº†æŸä¸ªå¤§äº 9 çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¼šå¯¼è‡´å†²çªã€‚</p><h1 class=pgc-h-arrow-right>é‡å®šå‘çš„å…ˆåé¡ºåº</h1><p>åœ¨ä½¿ç”¨é‡å®šå‘ï¼Œè¦æ³¨æ„é‡å®šå‘çš„å…ˆåé¡ºåºï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ç‚¹ï¼ŒREDIRECTION å°èŠ‚çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Redirections are processed in the order they appear, from left to right.<br>Note that the order of redirection is significant. For example, the command</p></blockquote><pre><code>    ls &gt; dirlist 2&gt;&amp;1</code></pre><blockquote class=pgc-blockquote-abstract><p>directs both standard output and standard error to the file dirlist, while the command</p></blockquote><pre><code>    ls 2&gt;&amp;1 &gt; dirlist</code></pre><blockquote class=pgc-blockquote-abstract><p>directs only the standard output to file dirlist, because the standard error was duplicated from the standard output before the standard output was redirected to dirlist.</p></blockquote><p>å³ï¼Œå½“æŒ‡å®šäº†å¤šä¸ªé‡å®šå‘æ“ä½œæ—¶ï¼ŒæŒ‰ç…§é‡å®šå‘å‡ºç°çš„é¡ºåºï¼Œä»å·¦åˆ°å³å¤„ç†ã€‚</p><p>å¯¹ <strong class=highlight-text>ls > dirlist 2>&1</strong> å‘½ä»¤æ¥è¯´ï¼Œç¬¬ä¸€ä¸ª <strong class=highlight-text>></strong> è¡¨ç¤ºé‡å®šå‘ ls å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºåˆ° dirlist æ–‡ä»¶ã€‚<br>ç¬¬äºŒä¸ª <strong class=highlight-text>2>&1 </strong>è¡¨ç¤ºå¤åˆ¶æ ‡å‡†é”™è¯¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚<br>ç”±äºæ ‡å‡†è¾“å‡ºå·²ç»è¢«é‡å®šå‘åˆ° dirlist æ–‡ä»¶ï¼Œæ‰€ä»¥ dirlist æ–‡ä»¶ä¼šåŒ…å« ls å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</p><p>è€Œ <strong class=highlight-text>ls 2>&1 > dirlist</strong> å‘½ä»¤åªé‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ° dirlist æ–‡ä»¶ï¼Œæ ‡å‡†é”™è¯¯è¾“å‡ºåªä¼šæ‰“å°åˆ°ç»ˆç«¯ã€‚å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ª <strong>2>&1 </strong>è¡¨ç¤ºå¤åˆ¶æ ‡å‡†é”™è¯¯è¾“å‡ºçš„æ–‡ä»¶æè¿°ç¬¦ 2 åˆ°æ ‡å‡†è¾“å‡ºçš„æ–‡ä»¶æè¿°ç¬¦ 1ã€‚<br>å®é™…ä¸Šæ˜¯æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºå†™å…¥åˆ°æ ‡å‡†è¾“å‡ºå¯¹åº”çš„æ–‡ä»¶ã€‚<br>æ­¤æ—¶æ ‡å‡†è¾“å‡ºè¿˜æ²¡æœ‰é‡å®šå‘ï¼Œä¼šå…³è”åˆ°ç»ˆç«¯ï¼Œæ‰€ä»¥æ ‡å‡†é”™è¯¯è¾“å‡ºä¼šå†™å…¥åˆ°ç»ˆç«¯ã€‚</li><li>ç¬¬äºŒä¸ª <strong>></strong> è¡¨ç¤ºæŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° dirlist æ–‡ä»¶ï¼Œä¼šæŠŠæ–‡ä»¶æè¿°ç¬¦ 1 æŒ‡å‘ dirlist æ–‡ä»¶ã€‚<br>è¿™ä¸ä¼šå½±å“æ–‡ä»¶æè¿°ç¬¦ 2ï¼Œæ ‡å‡†é”™è¯¯è¾“å‡ºçš„æ–‡ä»¶æè¿°ç¬¦ 2 è¿˜æ˜¯æŒ‡å‘ç»ˆç«¯ã€‚<br>æ‰€ä»¥ï¼Œ æ ‡å‡†é”™è¯¯è¾“å‡ºæ²¡æœ‰é‡å®šå‘åˆ° dirlist æ–‡ä»¶ã€‚</li></ul><p>å…·ä½“ä¸¾ä¾‹æµ‹è¯•å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ ls not_exist 2>&1 > dirlist</p><p>ls: cannot access not_exist: No such file or directory</p><p>$ ls not_exist > dirlist 2>&1</p><p>$ cat dirlist</p><p>ls: cannot access not_exist: No such file or directory</p></blockquote><p>åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ²¡æœ‰ not_exist æ–‡ä»¶ã€‚é‚£ä¹ˆ ls not_exist ä¼šæŠ¥é”™ï¼Œæç¤ºæ‰¾ä¸åˆ°è¯¥æ–‡ä»¶ã€‚</p><p>å¦‚å‰é¢è¯´æ˜ï¼Œ<strong class=highlight-text>ls not_exist 2>&1 > dirlist</strong> å‘½ä»¤ä¸èƒ½æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ° dirlist æ–‡ä»¶ï¼Œæ‰€ä»¥æŠ¥é”™ä¿¡æ¯ç›´æ¥æ‰“å°åœ¨ç»ˆç«¯ä¸Šã€‚</p><p><strong class=highlight-text>ls not_exist > dirlist 2>&1 </strong>å‘½ä»¤å¯ä»¥æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ° dirlist æ–‡ä»¶ï¼Œç»ˆç«¯ä¸Šæ²¡æœ‰çœ‹åˆ°æŠ¥é”™ä¿¡æ¯ã€‚<br>ç”¨ cat dirlist å‘½ä»¤è¾“å‡º dirlist æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯å†™å…¥åˆ°äº†è¯¥æ–‡ä»¶ã€‚</p><h1 class=pgc-h-arrow-right>ä½¿ç”¨ exec å‘½ä»¤å¯¹å½“å‰ shell è¿›è¡Œé‡å®šå‘</h1><p>åœ¨ bash ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œä¼šå¯åŠ¨å­ shell æ¥æ‰§è¡Œã€‚æ­¤æ—¶çš„é‡å®šå‘åªå½±å“æ‰§è¡Œå‘½ä»¤çš„å­ shellï¼Œä¸å½±å“å½“å‰ shellã€‚<br>å¦‚æœè¦å¯¹å½“å‰ shell è¿›è¡Œé‡å®šå‘ï¼Œå¯ä»¥ä½¿ç”¨ bash çš„ <strong class=highlight-text>exec</strong> å†…ç½®å‘½ä»¤ã€‚</p><p>æŸ¥çœ‹ man bash é‡Œé¢å¯¹ exec å‘½ä»¤çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Note that the exec builtin command can make redirections take effect in the current shell.</p><p><br></p><p><strong>exec [-cl] [-a name] [command [arguments]]</strong><br>If command is specified, it replaces the shell. No new process is created. The arguments become the arguments to command.<br>If command is not specified, any redirections take effect in the current shell, and the return status is 0.<br>If there is a redirection error, the return status is 1.</p></blockquote><p>å³ï¼Œå½“ exec æ²¡æœ‰æŒ‡å®šè¦æ‰§è¡Œçš„å‘½ä»¤æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨å½“å‰ shell è¿›è¡Œé‡å®šå‘ã€‚<br>ä¾‹å¦‚ï¼ŒæŠŠå½“å‰çš„ shell æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œä¸å†ä»é”®ç›˜è¯»å–è¾“å…¥ã€‚</p><p>ä¸‹é¢å…·ä½“ä¸¾ä¾‹è¯´æ˜å¦‚ä½•ä½¿ç”¨ exec å‘½ä»¤æ¥è¿›è¡Œé‡å®šå‘ã€‚</p><ul><li>é‡å®šå‘å½“å‰ shell çš„æ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶ï¼ˆå¦‚æœç»ˆç«¯è‡ªèº«ä¸æ”¯æŒä¿å­˜logåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æŠŠå‘½ä»¤è¾“å‡ºéƒ½ä¿å­˜åˆ°æ–‡ä»¶ï¼‰ï¼š</li></ul><blockquote class=pgc-blockquote-abstract><p>$ exec 1>output.txt</p><p>$ ls</p><p>$ cat output.txt</p><p>cat: output.txt: input file is output file</p><p>$ exec 1>/dev/stdin</p><p>$ cat output.txt</p><p>testfile</p></blockquote><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<strong class=highlight-text>exec 1>output.txt</strong> å‘½ä»¤æŠŠå½“å‰ shell çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° output.txt æ–‡ä»¶ã€‚<br>é‚£ä¹ˆæ ‡å‡†è¾“å‡ºä¸å†å…³è”åˆ°ç»ˆç«¯ã€‚<br>æ‰§è¡Œ ls å‘½ä»¤ï¼Œç»ˆç«¯ä¸Šçœ‹ä¸åˆ°ä»»ä½•è¾“å‡ºï¼Œls å‘½ä»¤çš„è¾“å‡ºç»“æœè¢«å†™å…¥åˆ° output.txt æ–‡ä»¶ã€‚</p><p>æ­¤æ—¶ï¼Œæ— æ³•åœ¨å½“å‰ shell ä¸Šè¾“å‡º output.txt æ–‡ä»¶çš„å†…å®¹ã€‚<br>æ‰§è¡Œ cat output.txt å‘½ä»¤ï¼Œæç¤ºè¾“å…¥æ–‡ä»¶æ˜¯è¾“å‡ºæ–‡ä»¶ï¼Œä¼šå½¢æˆå¾ªç¯ï¼Œä¸ä¼šåœ¨ç»ˆç«¯ä¸Šè¾“å‡º output.txt æ–‡ä»¶å†…å®¹ã€‚</p><p>æ­¤æ—¶è¦æŸ¥çœ‹ output.txt æ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥åœ¨å¦å¤–çš„ç»ˆç«¯ä¸ŠæŸ¥çœ‹ï¼Œæˆ–è€…å–æ¶ˆé‡å®šå‘å½“å‰ shell çš„æ ‡å‡†è¾“å‡ºåˆ° output.txt æ–‡ä»¶ã€‚<br><strong class=highlight-text>exec 1>/dev/stdin </strong>å‘½ä»¤æŠŠå½“å‰ shell çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° /dev/stdin æ–‡ä»¶ï¼Œä¼šå…³è”åˆ°ç»ˆç«¯ã€‚<br>æ‰§è¡Œ cat output.txt å‘½ä»¤ï¼Œå°±èƒ½è¾“å‡º output.txt æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯ä¸Šã€‚</p><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤æ€ªçš„åœ°æ–¹ï¼Œéœ€è¦æ‰§è¡Œ <strong class=highlight-text>exec 1>/dev/stdin</strong> å‘½ä»¤æŠŠå¯¹åº”æ ‡å‡†è¾“å…¥çš„ /dev/stdin æ–‡ä»¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 1ï¼Œæ‰èƒ½é‡æ–°è¾“å‡ºåˆ°ç»ˆç«¯ä¸Šã€‚<br>æ‰§è¡Œ <strong class=highlight-text>exec 1>/dev/stdout</strong> å‘½ä»¤å¹¶ä¸èƒ½é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°ç»ˆç«¯ä¸Šã€‚</p><p>åœ¨é‡å®šå‘ä¸­ä½¿ç”¨ /dev/stdout æ–‡ä»¶ï¼Œä¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 1ã€‚<br>è€Œæ–‡ä»¶æè¿°ç¬¦ 1 ä¹‹å‰å·²ç»é‡å®šå‘åˆ° output.txt æ–‡ä»¶ã€‚<br>æ‰€ä»¥ exec 1>/dev/stdout å‘½ä»¤è¿˜æ˜¯è®©æ–‡ä»¶æè¿°ç¬¦ 1 å…³è”åˆ° output.txt æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å…³è”åˆ°ç»ˆç«¯ã€‚</p><p>åœ¨é‡å®šå‘ä¸­ä½¿ç”¨ /dev/stdin æ–‡ä»¶ï¼Œä¼šå¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ 0ã€‚<br>è€Œæ–‡ä»¶æè¿°ç¬¦ 0 æ²¡æœ‰é‡å®šå‘ï¼Œå…³è”åˆ°ç»ˆç«¯ã€‚<br>æ‰€ä»¥ exec 1>/dev/stdin å‘½ä»¤ä¼šè®©æ–‡ä»¶æè¿°ç¬¦ 1 å…³è”åˆ°ç»ˆç«¯ã€‚</p><ul><li>é‡å®šå‘å½“å‰ shell çš„æ ‡å‡†è¾“å…¥åˆ°æ–‡ä»¶ï¼š</li></ul><blockquote class=pgc-blockquote-abstract><p>$ cat input.txt</p><p>date</p><p>sleep 2</p><p>$ exec 0&lt;input.txt</p><p>$ date</p><p>2019å¹´ 11æœˆ 28æ—¥ æ˜ŸæœŸå›› 13:14:11 CST</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œç”¨ cat input.txt å‘½ä»¤æ‰“å° input.txt æ–‡ä»¶å†…å®¹ã€‚<br>è¿™ä¸ªæ–‡ä»¶é‡Œé¢æœ‰ä¸¤è¡Œï¼Œåˆ†åˆ«æ˜¯ date å‘½ä»¤å’Œ sleep 2 å‘½ä»¤ã€‚<br>è¿™ä¸ª sleep å‘½ä»¤ç”¨äºå»¶è¿Ÿç»ˆç«¯é€€å‡ºï¼Œå¦åˆ™æ‰§è¡Œåé¢å‘½ä»¤ï¼Œç»ˆç«¯ä¼šå¾ˆå¿«å…³é—­ï¼Œç»ˆç«¯çª—å£ä¸€é—ªè€Œè¿‡ã€‚</p><p>æ‰§è¡Œ <strong class=highlight-text>exec 0&lt;input.txt</strong> å‘½ä»¤ï¼Œä¼šæŠŠå½“å‰ shell çš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ° input.txt æ–‡ä»¶ã€‚<br>åˆ™ shell ä¼šå¼€å§‹é€è¡Œè¯»å–è¯¥æ–‡ä»¶å†…å®¹ï¼Œå¹¶æŠŠæ¯è¡Œå†…å®¹å½“ä½œå‘½ä»¤æ¥æ‰§è¡Œã€‚<br>æ‰€ä»¥åé¢çœ‹åˆ°æ‰§è¡Œäº† date å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å¹¶ä¸æ˜¯é€šè¿‡é”®ç›˜æ‰‹åŠ¨è¾“å…¥ã€‚</p><p>è‡ªåŠ¨æ‰§è¡Œ date å‘½ä»¤åï¼Œä¼šå†æ‰§è¡Œ sleep 2 å‘½ä»¤ï¼Œç­‰ç§’ 2 ç§’ï¼Œæ¥ç€å°±ä¼šé€€å‡ºå½“å‰ shellã€‚</p><p>è¿™æ˜¯å› ä¸º bash shell é‡åˆ° EOF å°±ä¼šé€€å‡ºã€‚<br>ä¾‹å¦‚æ‰“å¼€ä¸€ä¸ª shellï¼Œè¾“å…¥ CTRL-Dï¼Œå°±ä¼šé€€å‡º shellã€‚<br>é‡å®šå‘æ ‡å‡†è¾“å…¥åˆ° input.txt æ–‡ä»¶åï¼Œå½“å‰ shell è¯»å–å®Œè¯¥æ–‡ä»¶å†…å®¹ï¼Œå°±ä¼šé‡åˆ° EOFï¼Œæ‰€ä»¥ä¼šé€€å‡º shellã€‚</p><h1 class=pgc-h-arrow-right>é‡å®šå‘è¾“å…¥</h1><p>æŸ¥çœ‹é‡å®šå‘è¾“å…¥ï¼ˆRedirecting Inputï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Redirection of input causes the file whose name results from the expansion of word to be opened for reading on file descriptor n, or the standard input (file descriptor 0) if n is not specified.<br>The general format for redirecting input is:</p></blockquote><pre><code>    [n]&lt;word</code></pre><p>å³ï¼Œ<strong class=highlight-text>[n]&lt;word</strong> ç”¨è¯»æ¨¡å¼æ‰“å¼€ word æ–‡ä»¶ï¼Œå¹¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ n ä¸Šã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 0 ä¸Šï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å…¥ã€‚<br>é‡å®šå‘è¾“å…¥åï¼Œä»æ–‡ä»¶æè¿°ç¬¦ n è¯»å–å†…å®¹ï¼Œä¼šè¯»å–åˆ°æ‰€å…³è”çš„ word æ–‡ä»¶å†…å®¹ã€‚</p><p>ä¾‹å¦‚ï¼Œé‡å®šå‘æ ‡å‡†è¾“å…¥åï¼Œword æ–‡ä»¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 0ã€‚<br>è¢«æ‰§è¡Œçš„å‘½ä»¤è¯»å–æ ‡å‡†è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯è¯»å–æ–‡ä»¶æè¿°ç¬¦ 0ï¼Œä»è€Œè¯»å–åˆ° word æ–‡ä»¶çš„å†…å®¹ï¼Œä¸éœ€è¦ä»é”®ç›˜è¿›è¡Œè¾“å…¥ã€‚</p><p>é‡å®šå‘è¾“å…¥çš„ä¾‹å­è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ cat &lt; input.txt</p><p>date</p><p>sleep 2</p><p>$ exec 3&lt; input.txt</p><p>$ cat /dev/fd/3</p><p>date</p><p>sleep 2</p><p>$ read -u 3 line</p><p>$ echo $line</p><p>date</p></blockquote><p>åœ¨ <strong class=highlight-text>cat &lt; input.txt</strong> å‘½ä»¤ä¸­ï¼Œæ‰§è¡Œ cat å‘½ä»¤ä¸”æ²¡æœ‰æä¾›æ–‡ä»¶åå‚æ•°ï¼Œé‚£ä¹ˆ cat å‘½ä»¤é»˜è®¤è¯»å–æ ‡å‡†è¾“å…¥ã€‚<br><strong class=highlight-text>&lt; input.txt</strong> è¡¨ç¤ºæŠŠ input.txt æ–‡ä»¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 0ï¼Œä¹Ÿå°±æ˜¯å…³è”åˆ°è¢«æ‰§è¡Œå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ã€‚<br>cat å‘½ä»¤è¯»å–æ ‡å‡†è¾“å…¥æ—¶ï¼Œè¯»å–çš„å°±æ˜¯ input.txt æ–‡ä»¶çš„å†…å®¹ã€‚<br>è¿™åªå½±å“è¢«æ‰§è¡Œå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ï¼Œä¸å½±å“å½“å‰ shell çš„æ ‡å‡†è¾“å…¥ã€‚</p><p>æ‰§è¡Œ <strong class=highlight-text>exec 3&lt; input.txt </strong>å‘½ä»¤æŠŠ input.txt æ–‡ä»¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 3 çš„è¾“å…¥ã€‚<br>ä¹‹åï¼Œè¯»å–æ–‡ä»¶æè¿°ç¬¦ 3ï¼Œè¯»å–çš„å°±æ˜¯ input.txt æ–‡ä»¶çš„å†…å®¹ã€‚<br>ç”¨ cat /dev/fd/3 å‘½ä»¤è¯»å–æ–‡ä»¶æè¿°ç¬¦ 3ï¼Œè·å–åˆ°çš„å†…å®¹ç¡®å®å’Œ input.txt æ–‡ä»¶å†…å®¹ä¸€è‡´ã€‚</p><p>read -u 3 line å‘½ä»¤ä½¿ç”¨ -u é€‰é¡¹æŒ‡å®šä»æ–‡ä»¶æè¿°ç¬¦ 3 è¯»å–ä¸€è¡Œï¼Œä¿å­˜åˆ° line å˜é‡ã€‚<br>æ‰“å° line å˜é‡å€¼ï¼Œè¯»å–åˆ°çš„å†…å®¹å°±æ˜¯ input.txt æ–‡ä»¶çš„ç¬¬ä¸€è¡Œã€‚</p><h1 class=pgc-h-arrow-right>é‡å®šå‘è¾“å‡º</h1><p>æŸ¥çœ‹é‡å®šå‘è¾“å‡ºï¼ˆRedirecting Outputï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Redirection of output causes the file whose name results from the expansion of word to be opened for writing on file descriptor n, or the standard output (file descriptor 1) if n is not specified.<br>If the file does not exist it is created; if it does exist it is truncated to zero size.<br>The general format for redirecting output is:</p></blockquote><pre><code>    [n]&gt;word</code></pre><p>å³ï¼Œ<strong class=highlight-text>[n]>word</strong> ç”¨å†™æ¨¡å¼æ‰“å¼€ word æ–‡ä»¶ï¼Œå¹¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ n ä¸Šã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 1 ä¸Šï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å‡ºã€‚<br>é‡å®šå‘è¾“å‡ºåï¼Œå¾€æ–‡ä»¶æè¿°ç¬¦ n å†™å…¥å†…å®¹ï¼Œä¼šå†™å…¥åˆ°æ‰€å…³è”çš„ word æ–‡ä»¶ã€‚</p><p>å¦‚æœ word æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚<br>å¦‚æœ word æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™æŠŠå®ƒçš„æ–‡ä»¶å¤§å°æˆªæ–­æˆ 0ï¼Œä¼šä¸¢å¼ƒåŸæœ‰çš„å†…å®¹ã€‚</p><p>é‡å®šå‘æ ‡å‡†è¾“å‡ºæ˜¯é‡å®šå‘æœ€å¸¸è§çš„ç”¨æ³•ä¹‹ä¸€ã€‚<br>é‡å®šå‘è¾“å‡ºçš„ä¾‹å­è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ echo "redirection output" > output.txt</p><p>$ cat output.txt</p><p>redirection output</p><p>$ exec 5> output.txt</p><p>$ cat input.txt > /dev/fd/5</p><p>$ cat output.txt</p><p>date</p><p>sleep 2</p></blockquote><p><strong class=highlight-text>echo "redirection output" > output.txt</strong> å‘½ä»¤æŠŠ echo å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° output.txt æ–‡ä»¶ã€‚<br>é‚£ä¹ˆ echo å‘½ä»¤çš„è¾“å‡ºç»“æœå°±æ˜¯å†™å…¥åˆ°è¯¥æ–‡ä»¶ã€‚</p><p>ç”¨ cat output.txt å‘½ä»¤æŸ¥çœ‹ output.txt æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°é‡å®šå‘æ ‡å‡†è¾“å‡ºå†™å…¥çš„å­—ç¬¦ä¸²ã€‚</p><p><strong class=highlight-text>exec 5> output.txt </strong>å‘½ä»¤æŠŠ output.txt æ–‡ä»¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 5 çš„è¾“å‡ºã€‚<br>ä¹‹åï¼Œå¾€æ–‡ä»¶æè¿°ç¬¦ 5 å†™å…¥å†…å®¹ï¼Œå°±æ˜¯å†™å…¥åˆ° output.txt æ–‡ä»¶ã€‚</p><p><strong class=highlight-text>cat input.txt > /dev/fd/5 </strong>å‘½ä»¤æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦ 5ã€‚<br>é‚£ä¹ˆæ‰€è¾“å‡ºçš„ input.txt æ–‡ä»¶å†…å®¹ä¼šè¢«å†™å…¥åˆ°æ–‡ä»¶æè¿°ç¬¦ 5ã€‚</p><p>ç”¨ cat output.txt å‘½ä»¤è¾“å‡º output.txt æ–‡ä»¶å†…å®¹ï¼Œå·²ç»ä¸å†æ˜¯ "redirection output" å­—ç¬¦ä¸²ã€‚<br>è€Œæ˜¯è·Ÿ input.txt æ–‡ä»¶çš„å†…å®¹ä¸€è‡´ã€‚</p><h1 class=pgc-h-arrow-right>è¿½åŠ é‡å®šå‘è¾“å‡º</h1><p>æŸ¥çœ‹è¿½åŠ é‡å®šå‘è¾“å‡ºï¼ˆAppending Redirected Outputï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>Redirection of output in this fashion causes the file whose name results from the expansion of word to be opened for appending on file descriptor n, or the standard output (file descriptor 1) if n is not specified.<br>If the file does not exist it is created.<br>The general format for appending output is:</p></blockquote><pre><code>    [n]&gt;&gt;word</code></pre><p>å³ï¼Œ<strong class=highlight-text>[n]>>word </strong>å‘½ä»¤ç”¨è¿½åŠ å†™å…¥æ¨¡å¼æ‰“å¼€ word æ–‡ä»¶ï¼Œå¹¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ n ä¸Šã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 1 ä¸Šï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å‡ºã€‚<br>é‡å®šå‘è¾“å‡ºåï¼Œå¾€æ–‡ä»¶æè¿°ç¬¦ n å†™å…¥å†…å®¹ï¼Œä¼šè¿½åŠ å†™å…¥åˆ°æ‰€å…³è”çš„ word æ–‡ä»¶ã€‚</p><p>å¦‚æœ word æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚<br>å¦‚æœ word æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¼šæŠŠå†…å®¹è¿½åŠ å†™å…¥åˆ°æ–‡ä»¶æœ«å°¾ï¼Œä¸ä¼šä¸¢å¼ƒåŸæœ‰çš„å†…å®¹ã€‚</p><p>è¿½åŠ é‡å®šå‘è¾“å‡ºçš„ä¾‹å­è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ cat output.txt</p><p>date</p><p>sleep 2</p><p>$ echo "append" >> output.txt</p><p>$ cat output.txt</p><p>date</p><p>sleep 2</p><p>append</p></blockquote><p>å…ˆç”¨ cat output.txt å‘½ä»¤æŸ¥çœ‹ output.txt æ–‡ä»¶çš„å†…å®¹ã€‚<br>ç„¶åä½¿ç”¨ <strong class=highlight-text>echo "append" >> output.txt</strong> å‘½ä»¤è¿½åŠ é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ° output.txt æ–‡ä»¶ã€‚</p><p>å†æ¬¡æŸ¥çœ‹ output.txt æ–‡ä»¶ï¼ŒåŸæœ‰çš„å†…å®¹è¿˜åœ¨ï¼Œå¹¶åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ äº†å†™å…¥çš„ "append" å­—ç¬¦ä¸²ã€‚</p><p>å½“é‡å®šå‘çš„è¾“å‡ºæ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œ<strong class=highlight-text>></strong> å’Œ <strong class=highlight-text>>> </strong>éƒ½ä¼šæ–°å»ºè¯¥æ–‡ä»¶ã€‚<br>å½“è¾“å‡ºæ–‡ä»¶å·²ç»å­˜åœ¨æ—¶ï¼Œ> ä¼šæ¸…ç©ºè¯¥æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åå†å†™å…¥æ–°çš„å†…å®¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚<br>è€Œ >> ä¼šå°†æ–°å†™å…¥çš„å†…å®¹è¿½åŠ åˆ°è¯¥æ–‡ä»¶çš„æœ«å°¾ï¼Œæ–‡ä»¶åŸæ¥çš„å†…å®¹è¿˜ä¼šä¿ç•™ã€‚</p><h1 class=pgc-h-arrow-right>åŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡º</h1><p>æŸ¥çœ‹åŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆRedirecting Standard Output and Standard Errorï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>This construct allows both the standard output (file descriptor 1) and the standard error output (file descriptor 2) to be redirected to the file whose name is the expansion of word.<br>There are two formats for redirecting standard output and standard error:</p></blockquote><pre><code>    &amp;&gt;word</code></pre><blockquote class=pgc-blockquote-abstract><p>and</p></blockquote><pre><code>    &gt;&amp;word</code></pre><blockquote class=pgc-blockquote-abstract><p>Of the two forms, the first is preferred. This is semantically equivalent to</p></blockquote><pre><code>    &gt;word 2&gt;&amp;1</code></pre><blockquote class=pgc-blockquote-abstract><p>When using the second form, word may not expand to a number or -.<br>If it does, other redirection operators apply (see Duplicating File Descriptors below) for compatibility reasons.</p></blockquote><p>å³ï¼Œå¯ä»¥ä½¿ç”¨ <strong class=highlight-text>&>word</strong>ã€æˆ–è€… <strong class=highlight-text>>&word</strong> æ¥åŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</p><p>å»ºè®®é‡‡ç”¨ &>word è¿™ä¸ªå†™æ³•ã€‚<br>åœ¨è¯­ä¹‰ä¸Šï¼Œè¿™ä¸ªå†™æ³•ç­‰åŒäº <strong class=highlight-text>>word 2>&1</strong>ã€‚<br><strong class=highlight-text>2>&1 </strong>è¿™ä¸ªå†™æ³•è¡¨ç¤ºå¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ã€‚åé¢ä¼šå…·ä½“è¯´æ˜ã€‚</p><p>å¦‚æœä½¿ç”¨ <strong class=highlight-text>>&word </strong>è¿™ç§å½¢å¼æ¥åŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œé‚£ä¹ˆ word æ–‡ä»¶åä¸èƒ½æ˜¯æ•°å­—ï¼Œä¹Ÿä¸èƒ½æ˜¯è¿å­—ç¬¦ -ã€‚<br>å› ä¸ºè¿™ç§å†™æ³•æ˜¯å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œå¤åˆ¶æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œæ•°å­—å’Œ - å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¸ä¼šå½“æˆæ–‡ä»¶åå¤„ç†ã€‚</p><p>å½“é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶åï¼Œå¦‚æœå‘½ä»¤æ‰§è¡Œå‡ºé”™ï¼Œé”™è¯¯ä¿¡æ¯ä¼šæ‰“å°åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œä¼šåœ¨ç»ˆç«¯ä¸Šçœ‹åˆ°è¿™äº›æ‰“å°ã€‚<br>å¦‚æœç¡®å®éœ€è¦æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºä¹Ÿé‡å®šå‘åˆ°æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <strong class=highlight-text>&>word</strong> æ¥åŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚è¿™é‡Œä¸å†ä¸¾ä¾‹ã€‚</p><h1 class=pgc-h-arrow-right>åŒæ—¶è¿½åŠ é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡º</h1><p>æŸ¥çœ‹åŒæ—¶è¿½åŠ é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆAppending Standard Output and Standard Errorï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>This construct allows both the standard output (file descriptor 1) and the standard error output (file descriptor 2) to the appended to the file whose name is the expansion of word.<br>The format for appending standard output and standard error is:</p></blockquote><pre><code>    &amp;&gt;&gt;word</code></pre><blockquote class=pgc-blockquote-abstract><p>This is semantically equivalent to</p></blockquote><pre><code>    &gt;&gt;word 2&gt;&amp;1</code></pre><p>å³ï¼Œå¯ä»¥ä½¿ç”¨ <strong class=highlight-text>&>>word</strong> æ¥åŒæ—¶è¿½åŠ é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚<br>è¿™ä¸ªå‘½ä»¤åœ¨è¯­ä¹‰ä¸Šï¼Œç­‰åŒäº >>word 2>&1ã€‚</p><h1 class=pgc-h-arrow-right>Here Documents</h1><p>å‰é¢è¯´æ˜çš„é‡å®šå‘è¾“å…¥éœ€è¦æä¾›æ–‡ä»¶åï¼Œä¼šæœ‰ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ã€‚<br><strong>ç¼–å†™ shell è„šæœ¬æ—¶ï¼Œå¦‚æœéœ€è¦è¿›è¡Œé‡å®šå‘è¾“å…¥ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šä¾èµ–ä¸€ä¸ªå¤–éƒ¨çš„æ–‡ä»¶ï¼Œå¢åŠ è€¦åˆã€‚</strong></p><p><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Here Documents æœºåˆ¶æ¥é‡å®šå‘æ ‡å‡†è¾“å…¥ä¸ºæŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œä¸éœ€è¦æä¾›å¤–éƒ¨æ–‡ä»¶åã€‚</strong><br>æŸ¥çœ‹ Here Documents çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>This type of redirection instructs the shell to read input from the current source until a line containing only delimiter (with no trailing blanks) is seen.<br>All of the lines read up to that point are then used as the standard input for a command. The format of here-documents is:</p><p><br></p><p>&lt;&lt;[-]word</p><p>here-document</p><p>delimiter</p><p><br></p><p>No parameter expansion, command substitution, arithmetic expansion, or pathname expansion is performed on word.<br>If any characters in word are quoted, the delimiter is the result of quote removal on word, and the lines in the here-document are not expanded.<br>If word is unquoted, all lines of the here-document are subjected to parameter expansion, command substitution, and arithmetic expansion.<br>In the latter case, the character sequence \&lt;newline> is ignored, and \ must be used to quote the characters , $, and `.<br>If the redirection operator is &lt;&lt;-, then all leading tab characters are stripped from input lines and the line containing delimiter.<br>This allows here-documents within shell scripts to be indented in a natural fashion.</p></blockquote><p>å³ï¼Œå¯ä»¥ä½¿ç”¨ here-documents æ ¼å¼æ¥é‡å®šå‘æ ‡å‡†è¾“å…¥ï¼š</p><ul><li><strong>word</strong> æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¸¦æœ‰ç©ºæ ¼ï¼Œéœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</li><li><strong>here-document </strong>å†…å®¹ä¼šè¢«é‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ã€‚<br>å½“æŸä¸€è¡Œå†…å®¹å®Œå…¨ç­‰äº word æŒ‡å®šçš„å­—ç¬¦ä¸²æ—¶ï¼ˆè¡Œé¦–ã€è¡Œæœ«çš„ç©ºç™½å­—ç¬¦ä¹Ÿä¼šç”¨æ¥æ¯”è¾ƒï¼‰ï¼Œåˆ™åœæ­¢é‡å®šå‘ã€‚</li><li><strong>delimiter</strong> å¯¹åº” word æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œä¼šå»æ‰ word ä¸­çš„å¼•å·ã€‚<br>æ‰€ç»™çš„ delimiter ä¸ä¼šè¢«é‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ã€‚</li></ul><p>è¿™é‡Œçš„ word å­—ç¬¦ä¸²ä¸ä¼šè¿›è¡Œå‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢ã€ç®—æ³•æ‹¬å·ã€æˆ–è·¯å¾„åæ‰©å±•ï¼Œæ„å‘³ç€ä¸èƒ½ç”¨ $var çš„å½¢å¼æ¥è·å– var å˜é‡å€¼ã€‚<br>å¦‚æœ word å†™ä¸º $varï¼Œå¯¹åº”çš„ delimiter å­—ç¬¦ä¸²å°±æ˜¯ $varã€‚</p><p>å½“ word å­—ç¬¦ä¸²çš„ä»»æ„å­—ç¬¦è¢«å¼•å·æ‹¬èµ·æ¥æ—¶ï¼Œå¯¹åº”çš„ delimiter å­—ç¬¦ä¸²ä¸ä¼šåŒ…å«è¿™äº›å¼•å·ã€‚<br>è€Œä¸”ä¸­é—´çš„ here-document å­—ç¬¦ä¸²ä¸ä¼šè¿›è¡Œæ‰©å±•ã€‚<br>ä¾‹å¦‚ï¼Œä¸èƒ½åœ¨ here-document ä¸­ç”¨ $var çš„å½¢å¼æ¥è·å– var å˜é‡å€¼ã€‚</p><p>å½“ word å­—ç¬¦ä¸²ä¸­æ²¡æœ‰å¼•å·æ—¶ï¼Œä¸­é—´çš„ here-document å­—ç¬¦ä¸²å¯ä»¥è¿›è¡Œå‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢ã€ç®—æ³•æ‹¬å·ï¼Œä¸è¿›è¡Œè·¯å¾„åæ‰©å±•ã€‚</p><p>å¯¹ <strong class=highlight-text>&lt;&lt;word</strong> è¿™ä¸ªå†™æ³•æ¥è¯´ï¼Œä¸­é—´ here-document å­—ç¬¦ä¸²çš„ä»»æ„å­—ç¬¦éƒ½ä¼šè¢«ä¿ç•™ï¼ŒåŒ…æ‹¬è¡Œé¦–ã€è¡Œæœ«çš„ç©ºç™½å­—ç¬¦ã€‚<br>è€Œå†™ä¸º &lt;&lt;-word æ—¶ï¼Œä¸­é—´ here-document å­—ç¬¦ä¸²è¡Œé¦–çš„ tab å­—ç¬¦ä¼šè¢«å»æ‰ï¼Œè¡Œé¦–çš„ç©ºæ ¼è¿˜æ˜¯ä¼šä¿ç•™ã€‚</p><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜å„ç§æƒ…å†µçš„ here-documents æ ¼å¼å†™æ³•ã€‚</p><ul><li>åœ¨ here-document ä¸­ä¸è¿›è¡Œæ‰©å±•</li></ul><p>å‡è®¾æœ‰ä¸€ä¸ª testhere.sh è„šæœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p><strong class=highlight-text>ï¼ˆä¸å¥½æ„æ€ï¼Œè¿‘æœŸç½‘é¡µç‰ˆæ–‡ç« çš„ä»£ç å—æ’ç‰ˆé”™ä¹±ï¼Œåå°å’¨è¯¢ç¡®è®¤ç½‘é¡µç‰ˆä¸æ”¯æŒã€‚ä¸‹é¢ç”¨å››ä¸ª â€˜----â€™ ä»£æ›¿å››ä¸ªç©ºæ ¼æ¥è¿›è¡Œç¼©è¿›å’Œéš”è¡Œæ˜¾ç¤ºã€‚åé¢çš„ä»£ç å—ä¼šç±»ä¼¼å¤„ç†ã€‚å¦‚æœéœ€è¦å¤åˆ¶ä»£ç åˆ°æœ¬åœ°éªŒè¯ï¼Œéº»çƒ¦ä»¥å››ä¸ª â€˜----â€™ä¸ºå•ä½ï¼Œæ›¿æ¢æˆå››ä¸ªç©ºæ ¼ã€‚éå¸¸æŠ±æ­‰ã€‚ï¼‰</strong></p><blockquote class=pgc-blockquote-abstract><p>#!/bin/bash</p><p>cat -A &lt;&lt;"The end"</p><p>This is a here-document.</p><p><strong class=highlight-text>----</strong>The end</p><p>The end</p><p>$((3+7))</p><p>The end</p></blockquote><p>è¯¥è„šæœ¬æ‰§è¡Œ cat -A å‘½ä»¤ï¼Œ-A é€‰é¡¹ä¼šåœ¨è¾“å‡ºçš„è¡Œæœ«æ‰“å°ä¸€ä¸ª $ å­—ç¬¦ï¼Œä»¥ä¾¿çœ‹åˆ°è¡Œæœ«ç»“å°¾ã€‚<br>è¿™é‡Œç”¨ &lt;&lt;"The end" æŒ‡å®š here-documents ç±»å‹çš„é‡å®šå‘è¾“å…¥ã€‚<br>cat å‘½ä»¤ä¼šä» here-documents è·å–æ ‡å‡†è¾“å…¥ï¼Œç›´åˆ°è¯»å– "The end" å­—ç¬¦ä¸²ä¸ºæ­¢ã€‚</p><p>åœ¨ &lt;&lt; åé¢çš„ "The end" å­—ç¬¦ä¸²å¸¦æœ‰ç©ºæ ¼ï¼Œè¦ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚<br>å¦‚æœä¸åŠ å¼•å·ï¼Œä¼šæ‰§è¡ŒæŠ¥é”™ã€‚</p><p>åœ¨ $((3+7)) ä¸Šä¸€è¡Œçš„ "The end " å­—ç¬¦ä¸²åé¢æœ‰ä¸¤ä¸ªç©ºæ ¼ã€‚<br>åœ¨æµ‹è¯•çš„æ—¶å€™è¦æ³¨æ„åœ¨è¡Œæœ«åŠ ä¸Šç©ºæ ¼ã€‚</p><p>æ‰§è¡Œ testhere.sh è„šæœ¬ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ ./testhere.sh</p><p>This is a here-document.$</p><p><strong class=highlight-text>----</strong>The end$</p><p>The end $</p><p>$((3+7))$</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œhere-documents çš„ç¬¬äºŒè¡Œ " The end"ï¼Œåœ¨è¡Œé¦–å¸¦æœ‰ç©ºæ ¼ã€‚<br>è¿™ä¸€è¡Œä¸å®Œå…¨åŒ¹é… "The end"ï¼Œæ²¡æœ‰åœæ­¢é‡å®šå‘ã€‚</p><p>ç¬¬ä¸‰è¡Œå†…å®¹æ˜¯ "The end "ï¼Œåœ¨è¡Œæœ«æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œä¹Ÿæ˜¯ä¸å®Œå…¨åŒ¹é… "The end"ï¼Œæ²¡æœ‰åœæ­¢é‡å®šå‘ã€‚</p><p>ç¬¬å››è¡Œå†…å®¹æ˜¯ "$((3+7))"ï¼Œè¿™æ˜¯ä¸€ä¸ªç®—æœ¯æ‰©å±•è¡¨è¾¾å¼ã€‚<br>ä½†æ˜¯è¿™é‡Œçš„ word å‚æ•°å€¼æ˜¯ "The end"ï¼Œå¸¦æœ‰å¼•å·ï¼Œä¸ä¼šè¿›è¡Œç®—æœ¯æ‰©å±•ï¼Œä¼šåŸæ ·è¾“å‡º "$((3+7))" å­—ç¬¦ä¸²ã€‚</p><p>ç¬¬äº”è¡Œå†…å®¹æ˜¯ "The end"ï¼Œå®Œå…¨åŒ¹é… "The end"ï¼Œåœæ­¢é‡å®šå‘ã€‚</p><p>åœæ­¢é‡å®šå‘åï¼Œcat -A å‘½ä»¤ä¼šæ‰“å°ä»æ ‡å‡†è¾“å…¥è¯»å–åˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶åœ¨è¡Œæœ«æ‰“å° $ å­—ç¬¦ã€‚</p><p>æœ€åä¸€è¡Œçš„ "The end" å­—ç¬¦ä¸²æ²¡æœ‰è¢«é‡å®šå‘è¾“å…¥åˆ° cat å‘½ä»¤ã€‚</p><ul><li>åœ¨ here-document ä¸­è¿›è¡Œæ‰©å±•</li></ul><p>å‰é¢æåˆ°ï¼Œå¦‚æœ <strong class=highlight-text>&lt;&lt;word</strong> çš„ word æ²¡æœ‰åŒ…å«å¼•å·ï¼Œåˆ™ here-document ä¸­çš„å†…å®¹å¯ä»¥è¿›è¡Œå‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢ã€ç®—æœ¯æ‰©å±•ï¼Œä¸è¿›è¡Œè·¯å¾„åæ‰©å±•ã€‚<br>ä¿®æ”¹ testhere.sh è„šæœ¬ä¸ºä¸‹é¢çš„å†…å®¹ï¼Œæµ‹è¯•è¿™ç§æƒ…å†µï¼š</p><blockquote class=pgc-blockquote-abstract><p>#!/bin/bash</p><p>number="1234567"</p><p>cat &lt;&lt;end</p><p>number = $number</p><p>$(date)</p><p>$((3+7))</p><p>test*</p><p>end</p></blockquote><p>è¿™é‡Œçš„åœæ­¢é‡å®šå‘å­—ç¬¦ä¸²æ˜¯ endï¼Œæ²¡æœ‰åŠ å¼•å·ã€‚<br>é‡Œé¢çš„ here-document ç”¨ $number è·å– number å˜é‡å€¼ã€‚<br>ç”¨ $(date) æ‰§è¡Œ date å‘½ä»¤å¹¶è·å–æ”¹å‘½ä»¤çš„è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤æ›¿æ¢ã€‚<br>ç”¨ $((3+7)) è¿›è¡Œç®—æœ¯æ‰©å±•ã€‚</p><p>æ‰§è¡Œä¿®æ”¹åçš„ testhere.sh è„šæœ¬ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ ./testhere.sh</p><p>number = 1234567</p><p>2019å¹´ 11æœˆ 28æ—¥ æ˜ŸæœŸå›› 16:38:36 CST</p><p>10</p><p>test*</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°ç»“æœé‡Œé¢ç¡®å®è·å–åˆ°äº† number å˜é‡å€¼ï¼Œæ‰“å°äº† date å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œå¹¶è¿›è¡Œç®—æœ¯æ‰©å±•ã€‚<br>ä½†æ˜¯ test* æ²¡æœ‰è¿›è¡Œè·¯å¾„åæ‰©å±•ï¼Œæ²¡æœ‰æ‰©å±•æˆå½“å‰ç›®å½•ä¸‹ä»¥ "test" å¼€å¤´çš„æ–‡ä»¶åã€‚</p><ul><li>word å‚æ•°ä¸è¿›è¡Œæ‰©å±•</li></ul><p>åœ¨ <strong class=highlight-text>&lt;&lt;word </strong>ä¸­ï¼Œword æœ¬èº«ä¸è¿›è¡Œå‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢ã€ç®—æ³•æ‹¬å·ã€æˆ–è·¯å¾„åæ‰©å±•ï¼Œæ‰€ç»™çš„å­—ç¬¦ä¸²ä¼šä¿æŒä¸å˜ã€‚<br>æ— æ³•é€šè¿‡è·å–å˜é‡å€¼çš„æ–¹å¼æ¥æŒ‡å®šåœæ­¢é‡å®šå‘çš„å­—ç¬¦ä¸²ã€‚</p><p>ä¿®æ”¹ testhere.sh è„šæœ¬å†…å®¹ä¸ºä¸‹é¢çš„å†…å®¹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>#!/bin/bash</p><p>number="12345"</p><p>cat &lt;&lt;$name</p><p>What is the name?</p><p>12345</p><p>$name</p></blockquote><p>è¿™é‡ŒæŒ‡å®šåœæ­¢é‡å®šå‘çš„å­—ç¬¦ä¸²ä¸º $nameï¼Œname å˜é‡å€¼æ˜¯ "12345"ã€‚<br>åœ¨ here-document ä¸­æä¾›äº† "12345" è¿™ä¸€è¡Œï¼Œä¹‹åæ˜¯ $name è¿™ä¸€è¡Œã€‚</p><p>æ‰§è¡Œä¿®æ”¹åçš„ testhere.sh è„šæœ¬ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ ./testhere.sh</p><p>What is the name?</p><p>12345</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºç»“æœé‡Œé¢åŒ…å«äº† "12345" è¿™ä¸€è¡Œï¼Œè¯´æ˜è¿™ä¸€è¡Œæ²¡æœ‰åœæ­¢é‡å®šå‘ã€‚<br>&lt;&lt;$name å¹¶ä¸ä¼šè·å– name å˜é‡å€¼æ¥ä½œä¸ºåœæ­¢é‡å®šå‘çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¿æŒåœæ­¢é‡å®šå‘çš„å­—ç¬¦ä¸²ä¸º $name ä¸å˜ã€‚</p><h1 class=pgc-h-arrow-right>Here Strings</h1><p>å‰é¢è¯´æ˜çš„ here-documents å¯ä»¥é‡å®šå‘å¤šè¡Œåˆ°æ ‡å‡†è¾“å…¥ã€‚å¦‚æœåªéœ€è¦é‡å®šå‘ä¸€è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Here Stringsã€‚<br>æŸ¥çœ‹ Here Strings çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>A variant of here documents, the format is:</p></blockquote><pre><code>    &lt;&lt;&lt;word</code></pre><blockquote class=pgc-blockquote-abstract><p>The word undergoes brace expansion, tilde expansion, parameter and variable expansion, command substitution, arithmetic expansion, and quote removal. Pathname expansion and word splitting are not performed.<br>The result is supplied as a single string to the command on its standard input.</p></blockquote><p>å³ï¼Œhere-strings ä¼šæŠŠæ‰€ç»™çš„ word é‡å®šå‘åˆ°å‘½ä»¤çš„æ ‡å‡†è¾“å…¥ï¼Œword å¯ä»¥è¿›è¡Œæ‰©å±•ã€‚</p><p>è·Ÿ here-documents ä¸åŒï¼Œhere-strings çš„ word æ— è®ºæ˜¯å¦åŠ å¼•å·ï¼Œéƒ½ä¼šè¿›è¡Œå‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢ã€ç®—æœ¯æ‰©å±•ã€å¤§æ‹¬å·æ‰©å±•ã€æ³¢æµªå·æ‰©å±•ï¼Œå¹¶ç§»é™¤å¼•å·ã€‚<br>ä½†æ˜¯ä¸è¿›è¡Œè·¯å¾„åæ‰©å±•å’Œå•è¯æ‹†åˆ†ã€‚</p><p>å¦‚æœ word å¸¦æœ‰ç©ºæ ¼ï¼Œéœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œå¦åˆ™å¯èƒ½ä¼šæŠ¥é”™ã€‚<br>å¯¹ <strong class=highlight-text>&lt;&lt;&lt;here strings</strong> è¿™ç§å†™æ³•æ¥è¯´ï¼Œå…¶å®æ˜¯ &lt;&lt;&lt;ã€hereã€strings ä¸‰ä¸ªå‚æ•°ã€‚<br>å¦‚æœè¢«æ‰§è¡Œå‘½ä»¤ä¸èƒ½å¤„ç†è¿™ä¸‰ä¸ªå‚æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br>å¦‚æœæƒ³è¦æŠŠ here strings å½“æˆä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ &lt;&lt;&lt;"here strings"ã€‚</p><p>å…·ä½“ä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ number=1 2 3 4 5</p><p>$ grep 2 &lt;&lt;&lt;$number</p><p>12345</p><p>$ grep t &lt;&lt;&lt;test string</p><p>grep: string: No such file or directory</p></blockquote><p>è¿™é‡Œçš„ <strong class=highlight-text>&lt;&lt;&lt;$number </strong>ä¼šè·å– number å˜é‡å€¼æ¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å…¥ã€‚<br>grep å‘½ä»¤æ²¡æœ‰æä¾›æ–‡ä»¶åå‚æ•°æ—¶ï¼Œé»˜è®¤è¯»å–æ ‡å‡†è¾“å…¥ã€‚<br>ç»è¿‡é‡å®šå‘ï¼Œè¯»å–åˆ° number å˜é‡å€¼ã€‚</p><p>åœ¨ <strong class=highlight-text>grep t &lt;&lt;&lt;test string</strong> å‘½ä»¤ä¸­ï¼Œtest string ä¸­å¸¦æœ‰ç©ºæ ¼ï¼Œæ²¡æœ‰ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚<br>é‚£ä¹ˆ &lt;&lt;&lt;test æ˜¯ here-strings ç±»å‹çš„é‡å®šå‘è¾“å…¥ï¼Œåé¢çš„ string æ˜¯å¦å¤–çš„å‚æ•°ï¼Œä¼šè¢« grep å‘½ä»¤å½“æˆæ–‡ä»¶åå¤„ç†ã€‚<br>å½“å‰ç›®å½•ä¸‹æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œæ‰§è¡ŒæŠ¥é”™ã€‚</p><p>åœ¨ &lt;wordã€&lt;&lt;wordã€&lt;&lt;&lt;word è¿™ä¸‰ç§å½¢å¼ä¸­ï¼Œword çš„ç±»å‹æœ‰å¦‚ä¸‹å·®å¼‚ï¼š</p><ul><li>åœ¨ <strong>&lt;word </strong>ä¸­ï¼Œword æ˜¯æ–‡ä»¶åï¼Œè¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºé‡å®šå‘è¾“å…¥çš„æ¥æºã€‚å³ä½¿ç”¨å¼•å·æŠŠ word æ‹¬èµ·æ¥ï¼Œä¹Ÿè¿˜æ˜¯å½“æˆæ–‡ä»¶åï¼Œä¸ä¼šå½“æˆå­—ç¬¦ä¸²å¤„ç†ã€‚</li><li>åœ¨ <strong>&lt;&lt;word </strong>ä¸­ï¼Œword æ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šè¢«å½“æˆæ–‡ä»¶åå¤„ç†ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œæ‰©å±•ã€‚</li><li>åœ¨ <strong>&lt;&lt;&lt;word </strong>ä¸­ï¼Œword æ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šè¢«å½“æˆæ–‡ä»¶åå¤„ç†ï¼Œä¼šè¿›è¡Œæ‰©å±•ã€‚å…·ä½“æ‰©å±•ç±»å‹å¦‚å‰é¢è¯´æ˜ã€‚</li></ul><h1 class=pgc-h-arrow-right>å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦</h1><p>æŸ¥çœ‹å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ï¼ˆDuplicating File Descriptorsï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>The redirection operator</p></blockquote><pre><code>    [n]&lt;&amp;word</code></pre><blockquote class=pgc-blockquote-abstract><p>is used to duplicate input file descriptors. If word expands to one or more digits, the file descriptor denoted by n is made to be a copy of that file descriptor.<br>If the digits in word do not specify a file descriptor open for input, a redirection error occurs.<br>If word evaluates to -, file descriptor n is closed. If n is not specified, the standard input (file descriptor 0) is used.</p><p>The operator</p></blockquote><pre><code>    [n]&gt;&amp;word</code></pre><blockquote class=pgc-blockquote-abstract><p>is used similarly to duplicate output file descriptors. If n is not specified, the standard output (file descriptor 1) is used.<br>If the digits in word do not specify a file descriptor open for output, a redirection error occurs.<br>If word evaluates to -, file descriptor n is closed.<br>As a special case, if n is omitted, and word does not expand to one or more digits or -, the standard output and standard error are redirected as described previously.</p></blockquote><p>å³ï¼Œ<strong class=highlight-text>[n]&lt;&word</strong> æŠŠæ–‡ä»¶æè¿°ç¬¦ n å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ wordã€‚<br>å¦‚æœæ–‡ä»¶æè¿°ç¬¦ word æ²¡æœ‰å¯¹åº”ä»¥å†™æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™é‡å®šå‘æŠ¥é”™ã€‚<br>å¦‚æœ word çš„å€¼æ˜¯è¿å­—ç¬¦ -ï¼Œåˆ™ä¼šå…³é—­æ–‡ä»¶æè¿°ç¬¦ nã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤ä¼šä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ 0ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å…¥ã€‚</p><p>ç±»ä¼¼çš„ï¼Œ<strong class=highlight-text>[n]>&word</strong> æŠŠæ–‡ä»¶æè¿°ç¬¦ n å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ wordã€‚<br>å¦‚æœæ–‡ä»¶æè¿°ç¬¦ word æ²¡æœ‰å¯¹åº”ä»¥è¯»æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™é‡å®šå‘æŠ¥é”™ã€‚<br>å¦‚æœ word çš„å€¼æ˜¯è¿å­—ç¬¦ -ï¼Œåˆ™ä¼šå…³é—­æ–‡ä»¶æè¿°ç¬¦ nã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤ä¼šä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ 1ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å‡ºã€‚</p><p>æœ‰ä¸€ç§ç‰¹åˆ«æƒ…å†µæ˜¯ï¼Œå½“ [n]>&word ä¸­çš„ word æ‰©å±•ç»“æœä¸æ˜¯æ•°å­—ã€ä¹Ÿä¸æ˜¯è¿å­—ç¬¦ - æ—¶ï¼Œword ä¼šè¢«å½“æˆæ–‡ä»¶åå¤„ç†ã€‚<br>ä¹Ÿå°±æ˜¯å‰é¢è¯´æ˜çš„â€œåŒæ—¶é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºâ€è¿™ç§åœºæ™¯ã€‚</p><p>è¿™ä¸ªå¤åˆ¶æ–‡ä»¶æè¿°ç¬¦çš„è¡Œä¸ºç±»ä¼¼äº Linux çš„ dup() ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚<br>è¿™ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¼šæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶è¡¨ï¼ˆfile tableï¼‰ï¼Œå…±äº«æ–‡ä»¶åç§»æŒ‡é’ˆã€‚<br>æ‰€ä»¥å®ƒä»¬å†™å…¥çš„å†…å®¹æ˜¯äº¤é”™å¼€çš„ï¼Œä¸ä¼šå‘ç”Ÿè¦†ç›–çš„ç°è±¡ã€‚</p><p>åœ¨ç¼–è¯‘å¤§å‹é¡¹ç›®ä»£ç æ—¶ï¼Œå°±ç»å¸¸ç”¨åˆ° <strong class=highlight-text>2>&1 </strong>è¿™ä¸ªå†™æ³•ã€‚<br>ä¾‹å¦‚å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤å…¨ç¼–è¯‘ Android æºç ï¼š</p><pre><code>make -j16 2&gt;&amp;1 | tee build_android.log</code></pre><p>è¿™ä¸ªå‘½ä»¤ä½¿ç”¨ 2>&1ï¼ŒæŠŠæ ‡å‡†é”™è¯¯è¾“å…¥å¤åˆ¶åˆ°æ ‡å‡†è¾“å‡ºã€‚<br>é‚£ä¹ˆå†™å…¥åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºçš„å†…å®¹ä¹Ÿä¼šå†™å…¥åˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶åé€šè¿‡ç®¡é“ | æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘ç»™ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</p><p>å½“ä½¿ç”¨ç®¡é“ <strong class=highlight-text>| </strong>æ¥é‡å®šå‘å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºåˆ°åä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥æ—¶ï¼Œåªä¼šé‡å®šå‘æ ‡å‡†è¾“å‡ºï¼Œä¸ä¼šé‡å®šå‘æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚<br>å¦‚æœæƒ³é‡å®šå‘æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œå¯ä»¥å†™ä¸º <strong class=highlight-text>2>&1 |</strong>ã€‚<br>è¿™ç§å†™æ³•ä¼šå…ˆå°†æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸Šï¼Œç„¶åå†ä¸€èµ·è¾“å‡ºåˆ°ç®¡é“ä¸Šã€‚</p><p>å®é™…ä¸Šï¼Œæ›´ç®€å•çš„å†™æ³•æ˜¯ <strong class=highlight-text>|&</strong>ã€‚<br>æŸ¥çœ‹ man bash çš„ Pipelines å°èŠ‚æåˆ°äº†è¿™ä¸€ç‚¹ï¼Œå…·ä½“æè¿°å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>If |& is used, the standard error of command is connected to command2's standard input through the pipe; it is shorthand for 2>&1 |.<br>This implicit redirection of the standard error is performed after any redirections specified by the command.</p></blockquote><h1 class=pgc-h-arrow-right>ç§»åŠ¨æ–‡ä»¶æè¿°ç¬¦</h1><p>æŸ¥çœ‹ç§»åŠ¨æ–‡ä»¶æè¿°ç¬¦ï¼ˆMoving File Descriptorsï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>The redirection operator</p></blockquote><pre><code>    [n]&lt;&amp;digit-</code></pre><blockquote class=pgc-blockquote-abstract><p>moves the file descriptor digit to file descriptor n, or the standard input (file descriptor 0) if n is not specified. digit is closed after being duplicated to n.</p><p>Similarly, the redirection operator</p></blockquote><pre><code>    [n]&gt;&amp;digit-</code></pre><blockquote class=pgc-blockquote-abstract><p>moves the file descriptor digit to file descriptor n, or the standard output (file descriptor 1) if n is not specified.</p></blockquote><p>å³ï¼Œ<strong class=highlight-text>[n]&lt;&digit-</strong> æŠŠæ–‡ä»¶æè¿°ç¬¦ digit å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ nï¼Œç„¶åå…³é—­æ–‡ä»¶æè¿°ç¬¦ digitã€‚<br>åé¢çš„è¿å­—ç¬¦ - å¿…é¡»æä¾›ã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ 0ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å…¥ã€‚</p><p>ç±»ä¼¼çš„ï¼Œ<strong class=highlight-text>[n]>&digit-</strong> æŠŠæ–‡ä»¶æè¿°ç¬¦ digit å¤åˆ¶åˆ°æ–‡ä»¶æè¿°ç¬¦ nï¼Œç„¶åå…³é—­æ–‡ä»¶æè¿°ç¬¦ digitã€‚<br>åé¢çš„è¿å­—ç¬¦ - å¿…é¡»æä¾›ã€‚<br>å¦‚æœæ²¡æœ‰æä¾›æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ 1ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å‡ºã€‚</p><p>è¿™ä¸ªç§»åŠ¨æ–‡ä»¶æè¿°ç¬¦çš„è¡Œä¸ºå’Œ Linux çš„ dup2() ç³»ç»Ÿè°ƒç”¨å‡½æ•°æœ‰æ‰€åŒºåˆ«ã€‚<br>dup2() å‡½æ•°å°†è€çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆåé¢ç§°ä¹‹ä¸º oldfdï¼‰å¤åˆ¶åˆ°æ–°çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆåé¢ç§°ä¹‹ä¸º newfdï¼‰ã€‚<br>å¦‚æœ newfd ä¹‹å‰æ˜¯æ‰“å¼€çš„ï¼Œä¼šå…ˆå…³é—­ newfdï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä¸ä¼šå…³é—­ oldfdã€‚<br>è€Œ [n]&lt;&digit-ã€[n]>&digit- ä¼šåœ¨å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ä¹‹åï¼Œå…³é—­ digit å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šåœ¨ [n]&lt;&digit-ã€[n]>&digit- ä¸­ï¼Œå¦‚æœçœç•¥äº† digitï¼Œå°±å˜æˆ [n]&lt;&-ã€[n]>&-ã€‚<br>è¿™æ˜¯å‰é¢â€œå¤åˆ¶æ–‡ä»¶æè¿°ç¬¦â€çš„å†™æ³•ï¼Œä¼šå…³é—­æ–‡ä»¶æè¿°ç¬¦ nã€‚</p><h1 class=pgc-h-arrow-right>ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦</h1><p>å‰é¢è¯´æ˜çš„æ–‡ä»¶æè¿°ç¬¦éƒ½å¯¹åº”åˆ°ä¸€ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œn>word æ˜¯æŠŠ word æ–‡ä»¶å…³è”åˆ°å·²ç»æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ n ä¸Šã€‚<br>è€Œä¸‹é¢ä»‹ç»çš„é‡å®šå‘æ–¹å¼ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>æŸ¥çœ‹ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ï¼ˆOpening File Descriptors for Reading and Writingï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>The redirection operator</p></blockquote><pre><code>    [n]&lt;&gt;word</code></pre><blockquote class=pgc-blockquote-abstract><p>causes the file whose name is the expansion of word to be opened for both reading and writing on file descriptor n, or on file descriptor 0 if n is not specified.<br>If the file does not exist, it is created.</p></blockquote><p>å³ï¼Œ<strong class=highlight-text>[n]&lt;>word</strong> ä¼šä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ word æ–‡ä»¶ï¼Œä¸”æ‰“å¼€åçš„æ–‡ä»¶æè¿°ç¬¦ä¸º nã€‚<br>å¦‚æœæ²¡æœ‰æ–‡ä»¶æè¿°ç¬¦ nï¼Œé»˜è®¤ä¼šæ‰“å¼€åˆ°æ–‡ä»¶æè¿°ç¬¦ 0 ä¸Šã€‚</p><p>å¦‚æœ word æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚<br>å¦‚æœ word æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸”å¾€æ–‡ä»¶æè¿°ç¬¦ n å†™å…¥å†…å®¹ï¼Œåˆ™ä¼šæŠŠæ¸…ç©º word æ–‡ä»¶åŸæœ‰çš„å†…å®¹ï¼Œç„¶åå†™å…¥æ–°çš„å†…å®¹ã€‚</p><p>å…·ä½“ä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹ï¼š</p><blockquote class=pgc-blockquote-abstract><p>$ cat output.txt</p><p>date</p><p>sleep 2</p><p>$ echo "new string" 3&lt;> output.txt > /dev/fd/3</p><p>$ cat output.txt</p><p>new string</p></blockquote><p>è¿™é‡Œå…ˆç”¨ cat output.txt å‘½ä»¤æŸ¥çœ‹ output.txt æ–‡ä»¶å†…å®¹ï¼Œè¯´æ˜è¯¥æ–‡ä»¶å­˜åœ¨ï¼Œä¸”è‡ªèº«å†…å®¹ä¸ä¸ºç©ºã€‚</p><p>åœ¨ <strong class=highlight-text>echo "new string" 3&lt;> output.txt > /dev/fd/3 </strong>å‘½ä»¤é‡Œé¢ï¼Œ<strong class=highlight-text>3&lt;> output.txt </strong>ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€ output.txt æ–‡ä»¶ï¼Œå¹¶å…³è”åˆ°æ–‡ä»¶æè¿°ç¬¦ 3 ä¸Šã€‚<br>åé¢çš„ <strong class=highlight-text>> /dev/fd/3</strong> è¡¨ç¤ºæŠŠ echo çš„è¾“å‡ºç»“æœé‡å®šå‘åˆ° /dev/fd/3 æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦ 3ï¼Œé‚£ä¹ˆä¼šå†™å…¥åˆ° output.txt æ–‡ä»¶ã€‚</p><p>ä¹‹åå†æ¬¡ç”¨ cat output.txt å‘½ä»¤æŸ¥çœ‹ output.txt æ–‡ä»¶å†…å®¹ã€‚å¯è§æ–‡ä»¶åŸæœ‰å†…å®¹å·²ç»ä¸¢å¤±ï¼Œå˜æˆ echo å‘½ä»¤è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å®šå‘æ“ä½œç¬¦','Bash','ä»‹ç»'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>