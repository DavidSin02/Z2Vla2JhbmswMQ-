<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>分页插件使用的方式 | 极客快訊</title><meta property="og:title" content="分页插件使用的方式 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3dc39ccc703f4fa3a7fcbd967f8cf897"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d57d336.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d57d336.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d57d336.html><meta property="article:published_time" content="2020-10-29T20:58:00+08:00"><meta property="article:modified_time" content="2020-10-29T20:58:00+08:00"><meta name=Keywords content><meta name=description content="分页插件使用的方式"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d57d336.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>分页插件使用的方式</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3dc39ccc703f4fa3a7fcbd967f8cf897><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>分页插件使用的方式</h1><ul><li>修改 pom 文件，添加分页 jar 包依赖</li><li>修改 mybatis.xml 文件</li><li>UserDao 接口，UserMapper.xml 添加对应方法与实现 sql</li><li>对应 UserService 接口添加分页查询方法</li><li>测试分页效果</li></ul><h1 class=pgc-h-arrow-right>案例实操</h1><h1 class=pgc-h-arrow-right>1.修改 pom 文件，添加分页 jar 包依赖</h1><p>&lt;dependency><br>&lt;groupId>com.github.pagehelper&lt;/groupId><br>&lt;artifactId>pagehelper&lt;/artifactId><br>&lt;version>4.1.0&lt;/version><br>&lt;/dependency></p><h1 class=pgc-h-arrow-right>2.修改 mybatis.xml 文件</h1><p>&lt;plugins><br>&lt;!-- com.github.pagehelper 为 PageHelper 类所在包名 --><br>&lt;plugin interceptor="com.github.pagehelper.PageHelper"><br>&lt;property name="dialect" value="mysql" /><br>&lt;!-- 该参数默认为 false --><br>&lt;!-- 设置为 true 时，会将 RowBounds 第一个参数 offset 当成 pageNum 页码使用<br>--><br>&lt;!-- 和 startPage 中的 pageNum 效果一样 --><br>&lt;property name="offsetAsPageNum" value="true" /><br>&lt;!-- 该参数默认为 false --><br>&lt;!-- 设置为 true 时，使用 RowBounds 分页会进行 count 查询 --><br>&lt;property name="rowBoundsWithCount" value="true" /><br>&lt;!-- 设置为 true 时，如果 pageSize=0 或者 RowBounds.limit = 0 就会查询出全<br>部的结果 --><br>&lt;!-- （相当于没有执行分页查询，但是返回结果仍然是 Page 类型） --><br>&lt;property name="pageSizeZero" value="true" /><br>&lt;!-- 3.3.0 版本可用 - 分页参数合理化，默认 false 禁用 --><br>&lt;!-- 启用合理化时，如果 pageNum&lt;1 会查询第一页，如果 pageNum>pages 会查询<br>最后一页 --><br>&lt;!-- 禁用合理化时，如果 pageNum&lt;1 或 pageNum>pages 会返回空数据 --><br>&lt;property name="reasonable" value="true" /><br>&lt;!-- 3.5.0 版本可用 - 为了支持 startPage(Object params)方法 --><br>&lt;!-- 增加了一个`params`参数来配置参数映射，用于从 Map 或 ServletRequest<br>中取值 --><br>&lt;!-- 可以配置 pageNum,pageSize,count,pageSizeZero,reasonable,不配置映射<br>的用默认值 --><br>&lt;property name="params"<br>value="pageNum=start;pageSize=limit;pageSizeZero=zero;reasonable=heli;count=cou<br>ntsql" /><br>&lt;/plugin><br>&lt;/plugins></p><p><br></p><h1 class=pgc-h-arrow-right>3.UserDao 接口，UserMapper.xml 添加对应方法与实现 sql</h1><p>UserDao 接口:</p><p>public interface UserDao {<br>public User queryUserById(int id);<br>public List&lt;User> queryUsers();<br>}</p><p>UserMapper.xml</p><p>&lt;?xml version="1.0" encoding="UTF-8" ?><br>&lt;!DOCTYPE mapper<br>PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"<br>"http://mybatis.org/dtd/mybatis-3-mapper.dtd"><br>&lt;mapper namespace="com.mage.dao.UserDao"><br>&lt;select id="queryUserById" parameterType="int" resultType="user"><br>select id,userName,userPwd from user where id=#{id}<br>&lt;/select><br>&lt;select id="queryUsers" resultType="user"><br>select id,userName,userPwd from user<br>&lt;/select><br>&lt;/mapper></p><h1 class=pgc-h-arrow-right>4.对应 UserService 接口添加分页查询方法</h1><p>public interface UserService {<br>public User queryUserById();<br>/**<br>* 分页方法定义<br>* @param pageNum 当前页号<br>* @param pageSize 设置每页显示数量<br>* @return<br>*/<br>public PageInfo&lt;User> queryUsers(int pageNum,int pageSize);<br>}</p><p><br></p><p>UserServiceImpl 实现方法:</p><p>@Service<br>public class UserServiceImpl implements UserService{<br>@Resource<br>private UserDao userDao;<br>public User queryUserById(){<br>return userDao.queryUserById(7);<br>}<br>@Override<br>public PageInfo&lt;User> queryUsers(int pageNum, int pageSize) {<br>/**<br>* PageHelper 类设置分页页号与每页大小<br>*/<br>PageHelper.startPage(pageNum, pageSize);<br>List&lt;User> list=userDao.queryUsers();<br>PageInfo&lt;User> pageInfo=new PageInfo&lt;User>(list);<br>return pageInfo;<br>}<br>}</p><p><br></p><h1 class=pgc-h-arrow-right>5.测试分页效果</h1><p>数据库原始记录</p><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bf4085dd3b3746378132049cf91f683b><p class=pgc-img-caption></p></div><p>测试</p><p>第一次 PageNum =1 pageSize=1</p><p>@Test<br>public void testQueryUsers() {<br>PageInfo&lt;User> pageInfo= userService.queryUsers(1, 1);<br>for(User user:pageInfo.getList()){<br>System.out.println("user:"+user);<br>}<br>}</p><p><br></p><p>结果：</p><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/09360ba828454109adf36275cce3fb24><p class=pgc-img-caption></p></div><p>第二次 pageNum=2 pageSize=1</p><p>@Test<br>public void testQueryUsers() {<br>PageInfo&lt;User> pageInfo= userService.queryUsers(2, 1);<br>for(User user:pageInfo.getList()){<br>System.out.println("user:"+user);<br>}<br>}</p><p><br></p><p>结果</p><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1d60f781f0744c4390d066f0ecd80a90><p class=pgc-img-caption></p></div><p>备注:分页插件 如果传入的页码 操作记录总页数 此时我们得到的是最后一页的记录</p><p>第三次测试 PageNum=3 pageSize=1</p><p>@Test public void testQueryUsers() { PageInfo&lt;User> pageInfo= userService.queryUsers(3, 1); for(User user:pageInfo.getList()){ System.out.println("user:"+user); } }</p><p><br></p><p>结果:</p><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d2e0b9f01c2440cb8bd24be83a4f1f8c><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>扩展</h1><h1 class=pgc-h-arrow-right>分页插件压缩版</h1><div class=pgc-img><img alt=分页插件使用的方式 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d799e8787ef74f3980fc8eaa9b9c4abd><p class=pgc-img-caption></p></div><p>解压即可使用，和之前配置一样去配置好 config.xml，再运行 run.bat 即可</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'插件','分页','方式'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>