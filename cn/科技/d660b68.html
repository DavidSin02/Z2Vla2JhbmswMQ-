<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>应用于肌电采集的电极脱落检测系统设计 | 极客快訊</title><meta property="og:title" content="应用于肌电采集的电极脱落检测系统设计 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RftErZK6ownYxV"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d660b68.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d660b68.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d660b68.html><meta property="article:published_time" content="2020-10-29T20:53:41+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:41+08:00"><meta name=Keywords content><meta name=description content="应用于肌电采集的电极脱落检测系统设计"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d660b68.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>应用于肌电采集的电极脱落检测系统设计</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>表面肌电信号(sEMG)是由肌肉收缩伴随产生的电生理信号，采集人体表面肌电信号时需要通过电极传导<sup>[1-2]</sup>。在实际应用中，贴在皮肤表面的电极片因皮肤表面接触区域不平坦、不整洁或人体运动等原因容易脱落<sup>[3]</sup>。电极片一旦脱落，肌电采集电路会无法正常采集，甚至造成后续应用的误判<sup>[4]</sup>，因此及时发现电极脱落非常重要。国内外对电极脱落实时检测已经有相关人员进行研究，例如Harting利用互易定理，提出了一种对脱落电极的实时检测的方法<sup>[5]</sup>，但该方法仅适用于电阻抗断层成像系统的电极脱落检测，且程序非常复杂，当有两个以上电极脱落时检测正确率不足30%<sup>[6]</sup>。目前常用的电极脱落检测电路不能很好与肌电采集系统有效结合，且易受干扰造成误检。</p><p>为了解决这些问题，本文利用在单电源供电模式下设计成跟随器且同相端悬空时会输出稳定的高电平的特性，并将肌电采集系统中右腿驱动电路的反馈电压和中心电压引入到电极脱落检测电路中，设计出一种可以与肌电采集系统有效结合的电极脱落检测系统，并给出了基于STM32单片机检测电极脱落的算法，进一步降低电极脱落误检的发生。在实际应用中取得了很好的检测效果。</p><p><strong>1 总体设计</strong></p><p>本文针对电极脱落检测问题，设计了基于STM32单片机的电极脱落检测系统。整个系统的总体设计框图如图1所示，分为肌电采集电路、右腿驱动电路、电极脱落检测电路、光耦隔离电路、STM32单片机及外围电路。其中肌电采集电路和右腿驱动电路是肌电采集系统中必不可少的电路。图1中电极1、电极2和参考电极3贴在人体皮肤表面，电极1和电极2为输入电极，主要采集两路差模肌电信号，电极3为参考电极，右腿驱动电路的反馈电压引入到参考电极。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftErZK6ownYxV><p>本文主要的目的是解决在肌电采集时检测三个电极是否脱落。本文设计的电极脱落检测电路与肌电采集电路和右腿驱动电路相结合，巧妙地将右腿驱动电路的反馈电压引入到电极脱落检测电路中，当其中任意一个或多个电极脱落时，电极脱落检测电路会输出低电平，当三个电极均未脱落时，电极脱落检测电路会输出高电平。输出的电压经光耦隔离后到STM32单片机引脚，供单片机进行采集判断。</p><p><strong>2 肌电采集电路</strong></p><p>表面肌电信号非常微弱，信号幅值在5 mV以内，频谱主要分布在20~500 Hz，对硬件要求非常高<sup>[7-8]</sup>，获取的表面肌电信号有很多干扰信号，包括电极接触噪声、工频干扰等<sup>[9]</sup>，因此采集的表面肌电信号需要经过滤波和放大等处理后才可以被处理器采集和进一步运算处理<sup>[10]</sup>。如图2所示，肌电采集电路主要包括前置差分放大电路、50 Hz工频陷波电路、二级放大电路、带通滤波电路、电压调节电路、线性光耦隔离电路、浮地电源电路等。由于本文设计的电极脱落检测电路主要与前置差分放大电路和浮地电源电路有关，其他电路不再具体介绍。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RftErZZ1vNJVD7><p><strong>2.1 前置差分放大电路</strong></p><p>前置差分放大电路是肌电采集电路的关键部分，主要将表面肌电的两路差分信号转换成一路信号，并对其进行放大<sup>[11]</sup>。如图3所示，该部分电路主要由并联运放放大电路、共模信号取样电路、阻容耦合电路和仪表放大电路组成<sup>[12]</sup>。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RftErZlEYTzPK><p>并联运放放大电路主要由图3中两路运放U1A和U1B组成。采用并联双运放电路设计可以作为缓冲级对电极1和电极2采集的肌电信号进行缓冲，而且运算放大器在理想的工作状态下，此电路具有很高的输入阻抗以及趋于无穷大的共模抑制比(CMRR)。共模取样电路可以取出两电极的共模电压，阻容耦合电路主要为了隔离极化直流电压<sup>[12]</sup>。U2A的输入电压(设为V<sub>IC</sub>)来自U1A的输出电压(设为V<sub>OA</sub>)和U1B的输出电压(设为V<sub>OB</sub>)，V<sub>IC</sub>为V<sub>OA</sub>和U<sub>A4B</sub>经过电阻R<sub>6</sub>和R<sub>7</sub>后的电压，关系可表示为V<sub>IC</sub>=0.5(V<sub>OA</sub>+V<sub>OB</sub>)，则U2A的1脚电压(设为V<sub>OC</sub>)为V<sub>IC</sub>经过跟随器的电压即为V<sub>OC</sub>=V<sub>IC</sub>。当通过电极输入的信号只有差模信号时即V<sub>OA</sub>=-V<sub>OB</sub>，则V<sub>OC</sub>=0。当电极输入的信号既有共模信号又有差模信号时，对于差模信号V<sub>OC</sub>=0，此时V<sub>OC</sub>只包含共模信号，V<sub>OC</sub>将会被送到右腿驱动电路。这样从人体取的共模信号经右腿驱动电路再送回到人体。降低共模信号进入后级电路，提高肌电采集电路的共模抑制比。</p><p><strong>2.2 浮地电源电路</strong></p><p>浮地电源电路主要作用是提高前置差分放大电路的共模抑制比，消除共模信号引起的误差<sup>[13]</sup>。浮地电源电路由浮地跟踪电路和中心电压电路组成。图4为浮地跟踪电路，U2B的同相端和前置差分放大电路中的仪表放大电路信号相连。图5为中心电压电路，在此电路中V<sub>centre</sub>=0.5 V<sub>CC</sub>，中心电压V<sub>centre</sub>接入浮地跟踪电路和仪表放大器，由于V<sub>CC</sub>对共模信号的跟踪作用，极大抑制了共模信号。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEra18zQY95w><p><strong>3 右腿驱动电路</strong></p><p>在生物电信号采集电路中，右腿驱动电路是必不可少的电路<sup>[14]</sup>，右腿驱动电路主要作用是进一步增强共模抑制能力，抑制电路中的工频干扰,提高信噪比<sup>[15]</sup>。如图6所示，右腿驱动电路的输入电压从前置放大电路中的V<sub>OC</sub>引入，经过由U5A构成的跟随器和由U5B构成的反相器到达参考电极，电压为V<sub>R</sub>。右腿驱动电路输出电压到达参考电极的同时巧妙地引入到脱落检测电路中，并将该电压有效利用，完成电极脱落的检测。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RftEraJ9wfk2Ay><p>笔者在实际电路中采用的是四通道肌电采集，分为A、B、C、D四通道。表1和表2是实际电路中肌电采集电路和右腿驱动电路的关键点的电压测量，表1为电极片未脱落时的测量数据，表2为电极片脱落时测量数据。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RftEsZ116diCiA><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEsZG3Q8ptqC><p>电极片脱落后，右腿驱动电路输出电压V<sub>R</sub>为0，整个肌电采集电路无法正常工作，三个电极都不脱落时，右腿驱动电路输出电压V<sub>R</sub>约等于中心电压V<sub>centre</sub>，这两种状态下右腿驱动电路输出的不同电压将被脱落检测电路有效利用。</p><p><strong>4 电极脱落检测电路</strong></p><p>如图7所示，电极脱落检测电路分为LM358跟随电路、低通滤波电路和电压比较电路。LM358是一种双运算放大器，其内部有两个独立的运算放大器，有单电源供电和双电源供电模式。LM358在单电源供电模式下，如果接成跟随器，当同相端悬空时，其会输出稳定的高电平。图8为笔者用Multisim仿真的电路，当电源供电为5 V时，同相端悬空其输出电压为3.495 V电压。笔者在实际电路中用4.4 V单电源供电时，同相端悬空，其输出电压为3.2 V。由运放U6B和电阻电容组成的低通滤波器，可以衰减50 Hz工频干扰信号，防止因工频干扰引起误判，提高电极脱落检测系统的抗干扰能力，使其更加稳定准确地检测电极脱落。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEsZR4OteYaE><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RftEsZk2EW0it1><p>当电极1和电极2同时脱落或者只有参考电极3脱落时，LM358的同相输入端相当于浮空状态，其会稳定输出高电平，U<sub>6A</sub>的输出电压设为V<sub>LA</sub>，U<sub>6B</sub>的输出电压设为V<sub>LB</sub>。U<sub>7B</sub>的同相端接入右腿驱动电路的反馈电压V<sub>R</sub>，在电极片脱落的情况下，U<sub>7B</sub>同相端的输入电压为0 V，则U<sub>7B</sub>的7脚输出电压为0 V，U<sub>8</sub>的同相端电压V<sub>8P</sub>为0 V，U<sub>8</sub>反相输入电压V<sub>8N</sub>=V<sub>centre</sub>-V<sub>D</sub>，其中V<sub>D</sub>为电压经过二极管产生的压降，可知V<sub>8P</sub>&lt;V<sub>8N</sub>，则比较器U<sub>8</sub>的1脚输出电压V<sub>o</sub>为低电平。</p><p>当参考电极未脱落，电极1和电极2其中一个脱落时，U<sub>7A</sub>的1脚输出电压V<sub>7AO</sub>=0.5(V<sub>LA</sub>+V<sub>LB</sub>)，U<sub>7B</sub>的同相端电压为V<sub>R</sub>。对由U<sub>7B</sub>组成的电路用“虚短”和“虚断”分析可知V<sub>8P</sub>=2V<sub>R</sub>-V<sub>7AO</sub>。因为电极1和电极2其中一个脱落，使得V<sub>LA</sub>和V<sub>LB</sub>其中一个电压大于V<sub>R</sub>，而另一个电压为V<sub>R</sub>。在实际V<sub>CC</sub>=4.4 V的供电电路中，V<sub>LA</sub>和V<sub>LB</sub>其中一个电压为3.2 V，另一个为中心电压2.2 V，二极管D1产生的压降V<sub>D</sub>=0.3 V，那么V<sub>8P</sub>=V<sub>R</sub>-0.5，而V<sub>8N</sub>=V<sub>centre</sub>-V<sub>D</sub>，则V<sub>8P</sub>&lt;V<sub>8N</sub>，V<sub>O</sub>为低电平。</p><p>当三个电极均未脱落时，LM358的同相端输入V<sub>R</sub>，则LM358的输出电压均为V<sub>R</sub>。U<sub>7B</sub>的同相输入端引入的电压为V<sub>R</sub>。则U<sub>8</sub>的同相端电压等于参考电压，即V<sub>8P</sub>=0.5(V<sub>LA</sub>+V<sub>LB</sub>)=V<sub>R</sub>，而U<sub>8</sub>的反相端的二极管接入的是中心电压，经二极管后使U<sub>8</sub>的反相输入端电压V<sub>8N</sub>&lt;V<sub>centre</sub>=V<sub>R</sub>，则V<sub>O</sub>为高电平。</p><p>表3、表4、表5是笔者在实际电路中电极片不同脱落情况下测得的各个关键点电压值。当有电极片脱落时，V<sub>O</sub>为低电平，当电极均未脱落时，V<sub>O</sub>为高电平。对于电路图中的二极管也可以用滑动变阻器来调整U<sub>8</sub>反相端输入电压，达到调节检测电极脱落灵敏度的目的。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEsZv7fstWxD><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEsibAupBf6i><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RftEsirBp84Ekz><p><strong>5 光耦隔离电路和单片机检测程序</strong></p><p>笔者在实际应用中采用STM32F103单片机芯片。为了保护单片机芯片，V<sub>O</sub>输出的电压不能直接与单片机的IO引脚相接，笔者采用光耦器件进行隔离。电路设计如图9所示，当有电极脱落时单片机引脚检测的电压V<sub>Ocheck</sub>=3.3 V，则当电极片没有脱落时，V<sub>O</sub>为高电平，而V<sub>Ocheck</sub>=0 V。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RftEsjC6Gxgs4x><p>图10为单片机检测电极片脱落程序的流程图。笔者在实际应用中设置STM32单片机IO引脚模式为上拉输入，开启定时器7中断，每2 ms定时器7中断一次，检测IO引脚电平，当检测到为高电平时则高电平计数一次并且清零低电平计数，然后判断是否连续100 ms都是高电平，如果连续100 ms都是高电平则发送电极脱落数据。同理，判断低电平时采用的方法一样。此种方法可以滤除因外部干扰引起的误判，进一步提高电极脱落检测系统的稳定性和准确性。</p><img alt=应用于肌电采集的电极脱落检测系统设计 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RftEsjQILLXNRZ><p><strong>6 结论</strong></p><p>针对生物电信号采集时，常需要判断电极是否脱落问题，本文设计出一种电极脱落检测电路并给出STM32单片机程序检测方法。巧妙地利用了LM358集成运放的特点，将电极脱落检测系统与肌电采集系统结合在一起，巧妙地将右腿驱动电路的反馈电压和中心电压引入到电极脱落检测电路中。在单片机检测程序中进一步给出降低误检的方法。在实际的电路中取得了稳定准确的检测效果。该电极脱落检测系统虽然可以通过硬件电路滤除工频干扰和调节检测灵敏度，通过算法进一步降低误检，可以稳定准确地检测电极脱落，但不能检测具体哪一个电极脱落。后续可以将LM358接成跟随器后输出电压送到单片机引脚，肌电采集系统中的参考电压和中心电压送到单片机引脚，单片机通过内部模拟数字转换器转换后检测电压值，再通过算法进行滤波比较判断，可以实现一个具有稳定准确且可以检测哪一个电极脱落的电极脱落检测系统。</p><p><strong>参考文献</strong></p><p>[1] 桂奇政，孟明，马玉良，等.基于肌肉协同激活模型的上肢关节运动连续估计[J].仪器仪表学报，2016，37(6)：1405-1412.</p><p>[2] 王涛，侯文生，吴小鹰，等.用于肌电假肢手控制的表面肌电双线性模型分析[J].仪器仪表学报，2014(8)：1907-1913.</p><p>[3] 张恒毅，陈香.有源柔性表面肌电电极阵列设计[J].电子测量与仪器学报，2014，28(8)：901-908.</p><p>[4] 董中飞，陈香，邓浩，等.柔性同心圆差分阵列表面肌电电极研制[J].电子测量与仪器报，2012，26(4)：359-366.</p><p>[5] HARTINGER A E，GUARDO R，ADLER A，et al.Real-time management of faulty electrodes in electrical impedance tomography[J].IEEE Transactions on Biomedical Engineering，2009，56(2)：369-377.</p><p>[6] 张戈，代萌，徐灿华，等.电阻抗断层成像系统的非正常连接电极实时检测方法[J].医疗卫生装备，2014，35(11)：1-4.</p><p>[7] 张红奎，汪地，杨浩，等.表面肌电信号采集及动作识别系统[J].机械设计与制造，2013(8)：38-40.</p><p>[8] 席旭刚，武昊，罗志增.基于EMD自相关的表面肌电信号消噪方法[J].仪器仪表学报，2014(11)：2494-2500.</p><p>[9] 席旭刚，朱海港，罗志增.基于EEMD和二代小波变换的表面肌电信号消噪方法[J].传感技术学报，2012，25(11)：1488-1493.</p><p>[10] SUN B，CHEN W，ZHENG X.The system design for the extraction and pre-processing of surface EMG[J].Physics Procedia，2012，33(1)：8-13.</p><p>[11] 熊平，唐建.表面肌电信号前端处理系统[J].计算机工程与应用，2015，51(1)：218-222.</p><p>[12] 王立伟，蔡奇，肖尧，等.生物肌电信号前置放大电路设计[J].电子测量技术，2011，34(4)：53-55.</p><p>[13] 张晓，吉小军，蔡萍.表面肌电信号的高速数据采集系统的设计[J].电子测量技术，2008，31(7)：108-110.</p><p>[14] 蒋鑫，刘红星，刘铁兵，等.生物电采集中右腿驱动电路参数的确定[J].北京生物医学工程，2011，30(5)：506-511.</p><p>[15] 杨正，王静敏，朱樟明，等.利用右腿驱动技术的心电信号模拟前端设计[J].西安电子科技大学学报(自然科学版)，2016，43(4)：166-171.</p><p><strong>作者信息:</strong></p><p>马掌印，李武森，陈文建</p><p>(南京理工大学 电子工程与光电技术学院，江苏 南京210094)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'应用','肌电','采集'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>