<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/592bdfb766d94ddcb9357373d4b2df2f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d88578e6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d88578e6.html><meta property="article:published_time" content="2020-11-14T21:05:53+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:53+08:00"><meta name=Keywords content><meta name=description content="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/d88578e6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>åœ¨ä¸Šä¸€ç« ã€Šåˆæ¢javaé›†åˆæ¡†æ¶å›¾ã€‹ä¸­ï¼Œæˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†æœ‹å‹å¯¹javaå®¹å™¨æ•´ä½“æ¶æ„éƒ½æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œé‚£ä¹ˆæœ¬ç« ä¸»è¦æ˜¯æƒ³è¯¦ç»†çš„ä»‹ç»ä»¥ä¸‹Listæ¥å£å®ç°ç±»ä¹‹é—´çš„åŒºåˆ«ï¼</p><h3 class=pgc-h-arrow-right>01ã€Listç®€ä»‹</h3><blockquote><p>List çš„æ•°æ®ç»“æ„å°±æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå­˜å‚¨å†…å®¹æ—¶ç›´æ¥åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—è¿ç»­çš„ç©ºé—´ï¼Œç„¶åå°†ç©ºé—´åœ°å€ä¸ç´¢å¼•å¯¹åº”ã€‚</p></blockquote><p>ä»¥ä¸‹æ˜¯Listé›†åˆç®€æ˜“æ¶æ„å›¾</p><p><br></p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/592bdfb766d94ddcb9357373d4b2df2f><p class=pgc-img-caption></p></div><p><br></p><p>ç”±å›¾ä¸­çš„ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥çŸ¥é“ï¼ŒArrayListã€LinkedListã€Vectorã€Stackéƒ½æ˜¯Listçš„å››ä¸ªå®ç°ç±»ã€‚</p><ul><li>AbstractCollection æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå”¯ä¸€å®ç°Collectionæ¥å£çš„ç±»ã€‚AbstractCollectionä¸»è¦å®ç°äº†toArray()ã€toArray(T[] a)ã€remove()ç­‰æ–¹æ³•ã€‚</li><li>AbstractList ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿äºAbstractCollectionã€‚AbstractListå®ç°Listæ¥å£ä¸­é™¤size()ã€get(int location)ä¹‹å¤–çš„å‡½æ•°ï¼Œæ¯”å¦‚ç‰¹å®šè¿­ä»£å™¨ListIteratorã€‚</li><li>AbstractSequentialList æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿äºAbstractListã€‚AbstractSequentialList å®ç°äº†â€œé“¾è¡¨ä¸­ï¼Œæ ¹æ®indexç´¢å¼•å€¼æ“ä½œé“¾è¡¨çš„å…¨éƒ¨å‡½æ•°â€ã€‚</li><li>ArrayList æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå®ƒç”±æ•°ç»„å®ç°ã€‚éšæœºè®¿é—®æ•ˆç‡é«˜ï¼Œéšæœºæ’å…¥ã€éšæœºåˆ é™¤æ•ˆç‡ä½ã€‚</li><li>LinkedList æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚å®ƒä¹Ÿå¯ä»¥è¢«å½“ä½œå †æ ˆã€é˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—è¿›è¡Œæ“ä½œã€‚LinkedListéšæœºè®¿é—®æ•ˆç‡ä½ï¼Œä½†éšæœºæ’å…¥ã€éšæœºåˆ é™¤æ•ˆç‡é«˜ã€‚</li><li>Vector ä¹Ÿæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå’ŒArrayListä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”±æ•°ç»„å®ç°ã€‚ä½†æ˜¯ArrayListæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒVectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li>Stack æ˜¯æ ˆï¼Œå®ƒç»§æ‰¿äºVectorã€‚å®ƒçš„ç‰¹æ€§æ˜¯ï¼šå…ˆè¿›åå‡º(FILO, First In Last Out)ã€‚</li></ul><p>ä¸‹é¢å¯¹å„ä¸ªå®ç°ç±»è¿›è¡Œæ–¹æ³•å‰–æï¼</p><h3 class=pgc-h-arrow-right>02ã€ArrayList</h3><blockquote><p>ArrayListå®ç°äº†Listæ¥å£ï¼Œä¹Ÿæ˜¯é¡ºåºå®¹å™¨ï¼Œå³å…ƒç´ å­˜æ”¾çš„æ•°æ®ä¸æ”¾è¿›å»çš„é¡ºåºç›¸åŒï¼Œå…è®¸æ”¾å…¥nullå…ƒç´ ï¼Œåº•å±‚é€šè¿‡æ•°ç»„å®ç°ã€‚ é™¤è¯¥ç±»æœªå®ç°åŒæ­¥å¤–ï¼Œå…¶ä½™è·ŸVectorå¤§è‡´ç›¸åŒã€‚</p></blockquote><p>åœ¨Java1.5ä¹‹åï¼Œé›†åˆè¿˜æä¾›äº†æ³›å‹ï¼Œæ³›å‹åªæ˜¯ç¼–è¯‘å™¨æä¾›çš„è¯­æ³•ç³–ï¼Œæ–¹ä¾¿ç¼–ç¨‹ï¼Œå¯¹ç¨‹åºä¸ä¼šæœ‰å®è´¨çš„å½±å“ã€‚å› ä¸ºæ‰€æœ‰çš„ç±»éƒ½é»˜è®¤ç»§æ‰¿è‡³Objectï¼Œæ‰€ä»¥è¿™é‡Œçš„æ•°ç»„æ˜¯ä¸€ä¸ªObjectæ•°ç»„ï¼Œä»¥ä¾¿èƒ½å¤Ÿå®¹çº³ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚</p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5235f92873244d60a3b4ef26077f33c8><p class=pgc-img-caption></p></div><p><strong>å¸¸ç”¨æ–¹æ³•ä»‹ç»</strong></p><h4 class=pgc-h-arrow-right>2.1ã€getæ–¹æ³•</h4><p>get()æ–¹æ³•åŒæ ·å¾ˆç®€å•ï¼Œå…ˆåˆ¤æ–­ä¼ å…¥çš„ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œå†è·å–æŒ‡å®šå…ƒç´ ã€‚</p><pre><code>public E get(int index) {        rangeCheck(index);        return elementData(index);}/** * æ£€æŸ¥ä¼ å…¥çš„indexæ˜¯å¦è¶Šç•Œ */private void rangeCheck(int index) {        if (index &gt;= size)        throw new IndexOutOfBoundsException(outOfBoundsMsg(index));}</code></pre><h4 class=pgc-h-arrow-right>2.2ã€setæ–¹æ³•</h4><p>set()æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥å¯¹æ•°ç»„çš„æŒ‡å®šä½ç½®èµ‹å€¼å³å¯ã€‚</p><pre><code>public E set(int index, E element) {        rangeCheck(index);        E oldValue = elementData(index);        elementData[index] = element;        return oldValue;}</code></pre><h4 class=pgc-h-arrow-right>2.3ã€addæ–¹æ³•</h4><p>ArrayListæ·»åŠ å…ƒç´ æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯add(E e)ï¼Œå¦ä¸€ä¸ªæ˜¯add(int index, E e)ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å‘å®¹å™¨ä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œå¯èƒ½ä¼šå‡ºç°å®¹é‡ï¼ˆcapacityï¼‰ä¸è¶³ï¼Œå› æ­¤åœ¨æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œéƒ½éœ€è¦è¿›è¡Œå‰©ä½™ç©ºé—´æ£€æŸ¥ï¼Œå¦‚æœéœ€è¦åˆ™è‡ªåŠ¨æ‰©å®¹ã€‚æ‰©å®¹æ“ä½œæœ€ç»ˆæ˜¯é€šè¿‡grow()æ–¹æ³•å®Œæˆçš„ã€‚</p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9791e63247194b1992e23343b209e83b><p class=pgc-img-caption></p></div><p><strong>growæ–¹æ³•å®ç°</strong></p><pre><code>private void grow(int minCapacity) {        // overflow-conscious code        int oldCapacity = elementData.length;        int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);//åŸæ¥çš„1.5å€        if (newCapacity - minCapacity &lt; 0)            newCapacity = minCapacity;        if (newCapacity - MAX_ARRAY_SIZE &gt; 0)            newCapacity = hugeCapacity(minCapacity);        // minCapacity is usually close to size, so this is a win:        elementData = Arrays.copyOf(elementData, newCapacity);}</code></pre><p>æ·»åŠ å…ƒç´ è¿˜æœ‰å¦å¤–ä¸€ä¸ªaddAll()æ–¹æ³•ï¼ŒaddAll()æ–¹æ³•èƒ½å¤Ÿä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæ ¹æ®ä½ç½®ä¸åŒä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åœ¨æœ«å°¾æ·»åŠ çš„addAll(Collection&lt;? extends E> c)æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ä»æŒ‡å®šä½ç½®å¼€å§‹æ’å…¥çš„addAll(int index, Collection&lt;? extends E> c)æ–¹æ³•ã€‚</p><p><strong>ä¸åŒç‚¹ï¼šaddAll()çš„æ—¶é—´å¤æ‚åº¦ä¸ä»…è·Ÿæ’å…¥å…ƒç´ çš„å¤šå°‘æœ‰å…³ï¼Œä¹Ÿè·Ÿæ’å…¥çš„ä½ç½®ç›¸å…³ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§å¢é•¿ï¼</strong></p><h4 class=pgc-h-arrow-right>2.4ã€removeæ–¹æ³•</h4><p>remove()æ–¹æ³•ä¹Ÿæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯remove(int index)åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼›å¦ä¸€ä¸ªæ˜¯remove(Object o)ï¼Œé€šè¿‡o.equals(elementData[index])æ¥åˆ é™¤ç¬¬ä¸€ä¸ªæ»¡è¶³çš„å…ƒç´ ã€‚</p><p>éœ€è¦å°†åˆ é™¤ç‚¹ä¹‹åçš„å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä¸ºäº†è®©GCèµ·ä½œç”¨ï¼Œå¿…é¡»æ˜¾å¼çš„ä¸ºæœ€åä¸€ä¸ªä½ç½®èµ‹nullå€¼ã€‚</p><ul><li>remove(int index)æ–¹æ³•</li></ul><pre><code>public E remove(int index) {        rangeCheck(index);        modCount++;        E oldValue = elementData(index);        int numMoved = size - index - 1;        if (numMoved &gt; 0)            System.arraycopy(elementData, index+1, elementData, index,                             numMoved);        elementData[--size] = null; //èµ‹nullå€¼ï¼Œæ–¹ä¾¿GCå›æ”¶        return oldValue;}</code></pre><ul><li>remove(Object o)æ–¹æ³•</li></ul><pre><code>public boolean remove(Object o) {        if (o == null) {            for (int index = 0; index &lt; size; index++)                if (elementData[index] == null) {                    fastRemove(index);                    return true;                }        } else {            for (int index = 0; index &lt; size; index++)                if (o.equals(elementData[index])) {                    fastRemove(index);                    return true;                }        }        return false;}</code></pre><h3 class=pgc-h-arrow-right>03ã€LinkedList</h3><blockquote><p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“LinkedListåŒæ—¶å®ç°äº†Listæ¥å£å’ŒDequeæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ—¢å¯ä»¥çœ‹ä½œä¸€ä¸ªé¡ºåºå®¹å™¨ï¼Œåˆå¯ä»¥çœ‹ä½œä¸€ä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼ŒåŒæ—¶åˆå¯ä»¥çœ‹ä½œä¸€ä¸ªæ ˆï¼ˆStackï¼‰ã€‚</p></blockquote><p>LinkedListåº•å±‚é€šè¿‡åŒå‘é“¾è¡¨å®ç°ï¼Œé€šè¿‡firstå’Œlastå¼•ç”¨åˆ†åˆ«æŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ³¨æ„è¿™é‡Œæ²¡æœ‰æ‰€è°“çš„å“‘å…ƒï¼ˆæŸä¸ªå‚æ•°å¦‚æœåœ¨å­ç¨‹åºæˆ–å‡½æ•°ä¸­æ²¡æœ‰ç”¨åˆ°ï¼Œé‚£å°±è¢«ç§°ä¸ºå“‘å…ƒï¼‰ï¼Œå½“é“¾è¡¨ä¸ºç©ºçš„æ—¶å€™firstå’Œlastéƒ½æŒ‡å‘nullã€‚</p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f724697342be445fbcff235127c6da3c><p class=pgc-img-caption></p></div><pre><code>public class LinkedList&lt;E&gt;    extends AbstractSequentialList&lt;E&gt;    implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable{	 /**å®¹é‡*/    transient int size = 0;    /**é“¾è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ */    transient Node&lt;E&gt; first;     /**é“¾è¡¨æœ€åä¸€ä¸ªå…ƒç´ */    transient Node&lt;E&gt; last;		......}</code></pre><pre><code>/** * å†…éƒ¨ç±»Node */private static class Node&lt;E&gt; {    E item;//å…ƒç´     Node&lt;E&gt; next;//åç»§    Node&lt;E&gt; prev;//å‰é©±    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {        this.item = element;        this.next = next;        this.prev = prev;    }}</code></pre><p><strong>å¸¸ç”¨æ–¹æ³•ä»‹ç»</strong></p><h4 class=pgc-h-arrow-right>3.1ã€getæ–¹æ³•</h4><p>get()æ–¹æ³•åŒæ ·å¾ˆç®€å•ï¼Œå…ˆåˆ¤æ–­ä¼ å…¥çš„ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œå†è·å–æŒ‡å®šå…ƒç´ ã€‚</p><pre><code>public E get(int index) {        checkElementIndex(index);        return node(index).item;}/** * æ£€æŸ¥ä¼ å…¥çš„indexæ˜¯å¦è¶Šç•Œ */private void checkElementIndex(int index) {        if (!isElementIndex(index))            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));}</code></pre><h4 class=pgc-h-arrow-right>3.2ã€setæ–¹æ³•</h4><p>set(int index, E element)æ–¹æ³•å°†æŒ‡å®šä¸‹æ ‡å¤„çš„å…ƒç´ ä¿®æ”¹æˆæŒ‡å®šå€¼ï¼Œä¹Ÿæ˜¯å…ˆé€šè¿‡node(int index)æ‰¾åˆ°å¯¹åº”ä¸‹è¡¨å…ƒç´ çš„å¼•ç”¨ï¼Œç„¶åä¿®æ”¹Nodeä¸­itemçš„å€¼ã€‚</p><pre><code>public E set(int index, E element) {        checkElementIndex(index);        Node&lt;E&gt; x = node(index);        E oldVal = x.item;        x.item = element;        return oldVal;}</code></pre><h4 class=pgc-h-arrow-right>3.3ã€addæ–¹æ³•</h4><p>åŒæ ·çš„ï¼Œadd()æ–¹æ³•æœ‰ä¸¤æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯add(E e)ï¼Œå¦ä¸€ä¸ªæ˜¯add(int index, E element)ã€‚</p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6b034820cd31459698c4849b3c13c435><p class=pgc-img-caption></p></div><ul><li>add(E e)æ–¹æ³•</li></ul><p>è¯¥æ–¹æ³•åœ¨LinkedListçš„æœ«å°¾æ’å…¥å…ƒç´ ï¼Œå› ä¸ºæœ‰lastæŒ‡å‘é“¾è¡¨æœ«å°¾ï¼Œåœ¨æœ«å°¾æ’å…¥å…ƒç´ çš„èŠ±è´¹æ˜¯å¸¸æ•°æ—¶é—´ï¼Œåªéœ€è¦ç®€å•ä¿®æ”¹å‡ ä¸ªç›¸å…³å¼•ç”¨å³å¯ã€‚</p><pre><code>public boolean add(E e) {        linkLast(e);        return true;}/** * æ·»åŠ å…ƒç´  */void linkLast(E e) {        final Node&lt;E&gt; l = last;        final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);        last = newNode;        if (l == null)			//åŸæ¥é“¾è¡¨ä¸ºç©ºï¼Œè¿™æ˜¯æ’å…¥çš„ç¬¬ä¸€ä¸ªå…ƒç´             first = newNode;        else            l.next = newNode;        size++;        modCount++;}</code></pre><ul><li>add(int index, E element)æ–¹æ³•</li></ul><p>è¯¥æ–¹æ³•æ˜¯åœ¨æŒ‡å®šä¸‹è¡¨å¤„æ’å…¥å…ƒç´ ï¼Œéœ€è¦å…ˆé€šè¿‡çº¿æ€§æŸ¥æ‰¾æ‰¾åˆ°å…·ä½“ä½ç½®ï¼Œç„¶åä¿®æ”¹ç›¸å…³å¼•ç”¨å®Œæˆæ’å…¥æ“ä½œã€‚</p><p>å…·ä½“åˆ†æˆä¸¤æ­¥ï¼Œ1.å…ˆæ ¹æ®indexæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®ï¼›2.ä¿®æ”¹å¼•ç”¨ï¼Œå®Œæˆæ’å…¥æ“ä½œã€‚</p><pre><code>public void add(int index, E element) {        checkPositionIndex(index);        if (index == size)			//è°ƒç”¨addæ–¹æ³•ï¼Œç›´æ¥åœ¨æœ«å°¾æ·»åŠ å…ƒç´             linkLast(element);        else			//æ ¹æ®indexæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®            linkBefore(element, node(index));}/** * æ’å…¥ä½ç½® */void linkBefore(E e, Node&lt;E&gt; succ) {        // assert succ != null;        final Node&lt;E&gt; pred = succ.prev;        final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ);        succ.prev = newNode;        if (pred == null)            first = newNode;        else            pred.next = newNode;        size++;        modCount++;}</code></pre><p>åŒæ ·çš„ï¼Œæ·»åŠ å…ƒç´ è¿˜æœ‰å¦å¤–ä¸€ä¸ªaddAll()æ–¹æ³•ï¼ŒaddAll()æ–¹æ³•èƒ½å¤Ÿä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæ ¹æ®ä½ç½®ä¸åŒä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åœ¨æœ«å°¾æ·»åŠ çš„addAll(Collection&lt;? extends E> c)æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯ä»æŒ‡å®šä½ç½®å¼€å§‹æ’å…¥çš„addAll(int index, Collection&lt;? extends E> c)æ–¹æ³•ã€‚</p><p>é‡Œé¢ä¹Ÿforå¾ªç¯æ·»åŠ å…ƒç´ ï¼Œ<strong>addAll()çš„æ—¶é—´å¤æ‚åº¦ä¸ä»…è·Ÿæ’å…¥å…ƒç´ çš„å¤šå°‘æœ‰å…³ï¼Œä¹Ÿè·Ÿæ’å…¥çš„ä½ç½®ç›¸å…³ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§å¢é•¿ï¼</strong></p><h4 class=pgc-h-arrow-right>3.4ã€removeæ–¹æ³•</h4><p>åŒæ ·çš„ï¼Œremove()æ–¹æ³•ä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åˆ é™¤æŒ‡å®šä¸‹æ ‡å¤„çš„å…ƒç´ remove(int index)ï¼Œå¦ä¸€ä¸ªæ˜¯åˆ é™¤è·ŸæŒ‡å®šå…ƒç´ ç›¸ç­‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ remove(Object o)ã€‚</p><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/26e8780da21d4624b7a729667d04bc88><p class=pgc-img-caption></p></div><p>ä¸¤ä¸ªåˆ é™¤æ“ä½œéƒ½æ˜¯ï¼Œ<strong>1.å…ˆæ‰¾åˆ°è¦åˆ é™¤å…ƒç´ çš„å¼•ç”¨ï¼›2.ä¿®æ”¹ç›¸å…³å¼•ç”¨ï¼Œå®Œæˆåˆ é™¤æ“ä½œ</strong>ã€‚</p><ul><li>remove(int index)æ–¹æ³•</li></ul><p>é€šè¿‡ä¸‹è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶åˆ é™¤</p><pre><code>public E remove(int index) {        checkElementIndex(index);        return unlink(node(index));}</code></pre><ul><li>remove(Object o)æ–¹æ³•</li></ul><p>é€šè¿‡equalsåˆ¤æ–­æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶åˆ é™¤</p><pre><code>public boolean remove(Object o) {        if (o == null) {            for (Node&lt;E&gt; x = first; x != null; x = x.next) {                if (x.item == null) {                    unlink(x);                    return true;                }            }        } else {            for (Node&lt;E&gt; x = first; x != null; x = x.next) {                if (o.equals(x.item)) {                    unlink(x);                    return true;                }            }        }        return false;}</code></pre><p>åˆ é™¤æ“ä½œéƒ½æ˜¯é€šè¿‡unlink(Node&lt;E> x)æ–¹æ³•å®Œæˆçš„ã€‚è¿™é‡Œéœ€è¦è€ƒè™‘åˆ é™¤å…ƒç´ æ˜¯ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªæ—¶çš„è¾¹ç•Œæƒ…å†µã€‚</p><pre><code>/** * åˆ é™¤ä¸€ä¸ªNodeèŠ‚ç‚¹æ–¹æ³• */E unlink(Node&lt;E&gt; x) {        // assert x != null;        final E element = x.item;        final Node&lt;E&gt; next = x.next;        final Node&lt;E&gt; prev = x.prev;				//åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´         if (prev == null) {            first = next;        } else {            prev.next = next;            x.prev = null;        }		//åˆ é™¤çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´         if (next == null) {            last = prev;        } else {            next.prev = prev;            x.next = null;        }        x.item = null;        size--;        modCount++;        return element;}</code></pre><h3 class=pgc-h-arrow-right>04ã€Vector</h3><p>Vectorç±»å±äºä¸€ä¸ªæŒ½æ•‘çš„å­ç±»ï¼Œæ—©åœ¨jdk1.0çš„æ—¶å€™ï¼Œå°±å·²ç»å­˜åœ¨æ­¤ç±»ï¼Œä½†æ˜¯åˆ°äº†jdk1.2ä¹‹åé‡ç‚¹å¼ºè°ƒäº†é›†åˆçš„æ¦‚å¿µï¼Œæ‰€ä»¥ï¼Œå…ˆåå®šä¹‰äº†å¾ˆå¤šæ–°çš„æ¥å£ï¼Œæ¯”å¦‚ArrayListã€LinkedListï¼Œä½†è€ƒè™‘åˆ°æ—©æœŸå¤§éƒ¨åˆ†å·²ç»ä¹ æƒ¯ä½¿ç”¨Vectorç±»ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†å…¼å®¹æ€§ï¼Œjavaçš„è®¾è®¡è€…ï¼Œå°±è®©Vectorå¤šå®ç°äº†ä¸€ä¸ªListæ¥å£ï¼Œè¿™æ‰å°†å…¶ä¿ç•™ä¸‹æ¥ã€‚</p><p>åœ¨ä½¿ç”¨æ–¹é¢ï¼ŒVectorçš„getã€setã€addã€removeæ–¹æ³•å®ç°ï¼Œä¸ArrayListåŸºæœ¬ç›¸åŒï¼Œä¸åŒçš„æ˜¯Vectoråœ¨æ–¹æ³•ä¸ŠåŠ äº†çº¿ç¨‹åŒæ­¥é”synchronizedï¼Œæ‰€ä»¥ï¼Œæ‰§è¡Œæ•ˆç‡æ–¹é¢ï¼Œä¼šæ¯”è¾ƒæ…¢ï¼</p><h4 class=pgc-h-arrow-right>4.1ã€getæ–¹æ³•</h4><pre><code>public synchronized E get(int index) {        if (index &gt;= elementCount)            throw new ArrayIndexOutOfBoundsException(index);        return elementData(index);}</code></pre><h4 class=pgc-h-arrow-right>4.2ã€setæ–¹æ³•</h4><pre><code>public synchronized E set(int index, E element) {        if (index &gt;= elementCount)            throw new ArrayIndexOutOfBoundsException(index);        E oldValue = elementData(index);        elementData[index] = element;        return oldValue;}</code></pre><h4 class=pgc-h-arrow-right>4.3ã€addæ–¹æ³•</h4><pre><code>public synchronized boolean add(E e) {        modCount++;        ensureCapacityHelper(elementCount + 1);        elementData[elementCount++] = e;        return true;}</code></pre><h4 class=pgc-h-arrow-right>4.4ã€removeæ–¹æ³•</h4><pre><code>public synchronized boolean removeElement(Object obj) {        modCount++;        int i = indexOf(obj);        if (i &gt;= 0) {            removeElementAt(i);            return true;        }        return false;}</code></pre><h3 class=pgc-h-arrow-right>05ã€Stack</h3><p>åœ¨ Java ä¸­ Stack ç±»è¡¨ç¤ºåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„å¯¹è±¡å †æ ˆã€‚æ ˆæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒé‡‡ç”¨å…¸å‹çš„å…ˆè¿›åå‡ºçš„æ“ä½œæ–¹å¼å®Œæˆçš„ï¼›<strong>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæ‰‹æªå¼¹å¤¹çš„å­å¼¹å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åè¿›å…ˆå‡ºçš„ç»“æ„ã€‚</strong></p><p>åœ¨ä½¿ç”¨æ–¹é¢ï¼Œä¸»è¦æ–¹æ³•æœ‰push ã€peek ã€pop ã€‚</p><h4 class=pgc-h-arrow-right>5.1ã€pushæ–¹æ³•</h4><p>pushæ–¹æ³•è¡¨ç¤ºï¼Œå‘æ ˆä¸­æ·»åŠ å…ƒç´ </p><pre><code>public E push(E item) {        addElement(item);        return item;}</code></pre><h4 class=pgc-h-arrow-right>5.2ã€peekæ–¹æ³•</h4><p>peekæ–¹æ³•è¡¨ç¤ºï¼ŒæŸ¥çœ‹æ ˆé¡¶éƒ¨çš„å¯¹è±¡ï¼Œä½†ä¸ä»æ ˆä¸­ç§»é™¤å®ƒ</p><pre><code>public synchronized E peek() {        int     len = size();        if (len == 0)            throw new EmptyStackException();        return elementAt(len - 1);}</code></pre><h4 class=pgc-h-arrow-right>5.3ã€popæ–¹æ³•</h4><p>popæ–¹æ³•è¡¨ç¤ºï¼Œç§»é™¤å…ƒç´ ï¼Œå¹¶å°†è¦ç§»é™¤çš„å…ƒç´ æ–¹æ³•</p><pre><code>  public synchronized E pop() {        E       obj;        int     len = size();        obj = peek();        removeElementAt(len - 1);        return obj;}</code></pre><p>å…³äº Java ä¸­ Stack ç±»ï¼Œæœ‰å¾ˆå¤šçš„è´¨ç–‘å£°ï¼Œæ ˆæ›´é€‚åˆç”¨é˜Ÿåˆ—ç»“æ„æ¥å®ç°ï¼Œè¿™ä½¿å¾—Stackåœ¨è®¾è®¡ä¸Šä¸ä¸¥è°¨ï¼Œå› æ­¤ï¼Œå®˜æ–¹æ¨èä½¿ç”¨Dequeä¸‹çš„ç±»æ¥æ˜¯å®ç°æ ˆï¼</p><h3 class=pgc-h-arrow-right>06ã€æ€»ç»“</h3><div class=pgc-img><img alt="ã€Œé›†åˆç³»åˆ—ã€- æ·±å…¥æµ…å‡ºåˆ†æCollectionä¸­çš„Listæ¥å£" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d41473c440f64e35a94c86708e5bf79c><p class=pgc-img-caption></p></div><ul><li><strong>ArrayList(åŠ¨æ€æ•°ç»„ç»“æ„)ï¼ŒæŸ¥è¯¢å¿«ï¼ˆéšæ„è®¿é—®æˆ–é¡ºåºè®¿é—®ï¼‰ï¼Œå¢åˆ æ…¢ï¼Œä½†åœ¨æœ«å°¾æ’å…¥ï¼Œé€Ÿåº¦ä¸LinkedListç›¸å·®æ— å‡ ï¼</strong></li><li><strong>LinkedListï¼ˆåŒå‘é“¾è¡¨ç»“æ„ï¼‰ï¼ŒæŸ¥è¯¢æ…¢ï¼Œå¢åˆ å¿«ï¼</strong></li><li><strong>Vectorï¼ˆåŠ¨æ€æ•°ç»„ç»“æ„ï¼‰ï¼Œç›¸æ¯”ArrayListéƒ½æ…¢ï¼Œè¢«ArrayListæ›¿ä»£ï¼ŒåŸºæœ¬ä¸åœ¨ä½¿ç”¨ã€‚ä¼˜åŠ¿æ˜¯çº¿ç¨‹å®‰å…¨ï¼ˆå‡½æ•°éƒ½æ˜¯synchronizedï¼‰ï¼Œå¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ï¼Œæ¨èä½¿ç”¨å¹¶å‘å®¹å™¨ä¸­çš„å·¥å…·ç±»æ¥æ“ä½œï¼Œæ•ˆç‡é«˜ï¼</strong></li><li><strong>Stackï¼ˆæ ˆç»“æ„ï¼‰ç»§æ‰¿äºVectorï¼Œæ•°æ®æ˜¯å…ˆè¿›åå‡ºï¼ŒåŸºæœ¬ä¸åœ¨ä½¿ç”¨ï¼Œå¦‚æœè¦å®ç°æ ˆï¼Œæ¨èä½¿ç”¨Dequeä¸‹çš„ArrayDequeï¼Œæ•ˆç‡æ¯”Stacké«˜ï¼</strong></li></ul><h3 class=pgc-h-arrow-right>07ã€å‚è€ƒ</h3><p>1ã€JDK1.7&JDK1.8 æºç </p><p>2ã€CarpenterLee - Javaé›†åˆåˆ†æ</p><p>3ã€åšå®¢å›­ - æœ½æœ¨ - ArrayListã€LinkedListã€Vectorã€Stackçš„æ¯”è¾ƒ</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æµ…å‡º','Collection','List'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>