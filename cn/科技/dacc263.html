<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>MySQL数据库中的事务以及创建表的注意事项 | 极客快訊</title><meta property="og:title" content="MySQL数据库中的事务以及创建表的注意事项 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dacc263.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dacc263.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dacc263.html><meta property="article:published_time" content="2020-10-29T20:50:42+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:42+08:00"><meta name=Keywords content><meta name=description content="MySQL数据库中的事务以及创建表的注意事项"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/dacc263.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>MySQL数据库中的事务以及创建表的注意事项</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>数据库事务：</p><p>一组sql完成一个工作</p><p>例如 转账</p><p>update account set money= money-1000 where id =1;</p><p>update account set money= money+1000 where id= 2;</p><p>这两个语句完成一个工作 ----- 这就是一个事务</p><p>数据库事务的四个基本特征:</p><p>A 原子性</p><p>这个事务不能再拆分 如果再拆开 就不能完成相应的工作</p><p>要保证一个事务中的多个sql语句 同时成功 或 同时失败</p><p>C 一致性</p><p>通常指数据的一致性 事务执行前后 数据的总和不变</p><p>I 隔离性</p><p>多个事务之间不能互相影响</p><p>D 持久性</p><p>事务提交以后 数据要真正的持久化到数据库</p><p>对于MySQL 默认情况下 每个DML语句独自执行在一个事务中 默认自动提交事务</p><p>其他数据库对象：</p><p>1 视图 （view）：</p><p>什么是视图？ 由一个表 或多个表的部分数据组成的一个新的数据库对象</p><p>视图是一张虚拟表</p><p>表示一张表的部分数据或多张表的综合数据</p><p>其结构和数据是建立在对表的查询基础上</p><p>为什么有视图： 1 最主要就是限制数据访问</p><p>2 使得复杂的查询变的简单</p><p>create view v_emp as select id,name,birthday from employee</p><p>create view v2_emp as select id emp_id,name emp_name,birthday emp_birthday from employee</p><p>create view v_emp_dept as</p><p>select e.id,e.name emp_name,e.salary,d.name dept_name</p><p>from employee e left outer join department d on e.department_id = d.id</p><p>查看所有视图：</p><p>USE information_schema;</p><p>SELECT * FROM views\G;</p><p>简单视图 数据来自一个表 形成视图的查询语句中</p><p>简单视图可以做DML（因为对视图进行DML时 要对形成视图表同样做DML操作）</p><p>复杂视图 数据来自一个或多个表 形成视图的查询语句中要有 函数或分组</p><p>复杂视图不能做DML（增删改）</p><p>内建视图： 内建视图不是数据库对象 只是存放在内存中，当查询语句执行结束</p><p>内建视图也就不存在了</p><p>MySQL中必须取别名</p><p>子查询 放在where条件中叫做子查询</p><p>放在from后，叫做内建视图</p><p>select t.name,t.salary</p><p>from (select id,name,birthday,salary from employee) t</p><p>删除视图： drop view 视图名</p><p>2 索引：</p><p>在列上添加索引----- 索引的目的就是为了提高查询效率</p><p>主键约束 唯一性约束 都会在对应的列上添加索引</p><p>根据主键列和有唯一性约束的列查询数据效率高于普通列</p><p>用户可以自定义索引</p><p>create index 索引名 on 表名(列名)</p><p>加索引可以绝对可以提高查询效率 但为什么不在所有列上都添加索引</p><p>添加索引会提高查询效率 但有可能降低增删改的效率</p><p>因为对数据进行增删改时 同样需要维护索引</p><p>在什么样的列上添加索引合适？？？？ 经常根据这个列进行查询</p><p>比较少做增删改操作</p><p>在student表的studentName列创建普通索引</p><p>USE myschool;</p><p>CREATE INDEX `index_student_studentName`</p><p>ON `student`(`studentName`);</p><p>删除索引 drop index 索引名 on 表名</p><p>按照下列标准选择建立索引的列</p><p>频繁搜索的列</p><p>经常用作查询选择的列</p><p>经常排序、分组的列</p><p>经常用作连接的列（主键/外键）</p><p>请不要使用下面的列创建索引</p><p>仅包含几个不同值的列</p><p>表中仅包含几行</p><p>查询时减少使用*返回全部列，不要返回不需要的列</p><p>索引应该尽量小，在字节数小的列上建立索引</p><p>WHERE子句中有多个条件表达式时，包含索引列的表达式应置于其他条件表达式之前</p><p>避免在ORDER BY子句中使用表达式</p><p>查看索引：</p><p>SHOW INDEX FROM 表名;</p><p>Table：创建索引的表</p><p>Non_unique：索引是否非唯一 0代表唯一 1代表不是唯一</p><p>Key_name：索引的名称</p><p>Column_name：定义索引的列字段</p><p>Seq_in_index：该列在索引中的位置</p><p>Null：该列是否能为空值</p><p>Index_type：索引类型</p><p>=====================================================================================</p><p>语句来创建约束：</p><p>主键约束</p><p>外键约束</p><p>非空约束</p><p>唯一性约束</p><p>1 在建表阶段创建</p><p>create table 表名(</p><p>列名 数据类型,</p><p>...</p><p>列名 数据类型</p><p>)</p><p>create table dept(</p><p>id int primary key auto_increment,</p><p>name varchar(200) not null,</p><p>address varchar(200)</p><p>)</p><p>create table emp(</p><p>id int primary key auto_increment,</p><p>name varchar(200) not null,</p><p>email varchar(200) unique,</p><p>dept_id int,</p><p>foreign key emp(dept_id) references dept(id)</p><p>)</p><p>2 表创建后，添加</p><p>create table dept(</p><p>id int,</p><p>name varchar(200) not null,</p><p>address varchar(200)</p><p>)</p><p>表创建完成后再添加主键</p><p>alter table dept add constraint primary key(id)</p><p>create table emp(</p><p>id int,</p><p>name varchar(200) not null,</p><p>email varchar(200),</p><p>dept_id int,</p><p>)</p><p>创建完表后添加主键约束，添加外键约束，添加唯一性约束</p><p>alter table emp add constraint primary key(id)</p><p>alter table emp add constraint unique(email)</p><p>alter table emp add constraint foreign key emp(dept_id) references dept(id)</p><p>====================================================================================</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'MySQL','数据库','事务'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/3269d080.html alt=MySQL数据库的事务管理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152203544367254a708f807 style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/3269d080.html title=MySQL数据库的事务管理>MySQL数据库的事务管理</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>