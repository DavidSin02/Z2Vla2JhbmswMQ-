<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 | 极客快訊</title><meta property="og:title" content="创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/e1734d5d1c7449a282d881ff5f190977"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcd92f6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcd92f6.html><meta property="article:published_time" content="2020-10-29T20:50:25+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:25+08:00"><meta name=Keywords content><meta name=description content="创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/dcd92f6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>板子早就打好了几天了今天放假了有空弄下程序，看到有便宜的东西没忍住又买了个9.9元的12V插电调速小电磨。</p><p>看到论坛好多人都买了，开包拆解就不发了坛里有好多帖子，就是下面这货</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e1734d5d1c7449a282d881ff5f190977><p class=pgc-img-caption></p></div><p>盒子内容，就仨</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2c1b0bf4280b45769f7ccaf2581492be><p class=pgc-img-caption></p></div><p>前部夹头和头环</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3d9c466aa58b4e159a54bdd6e9cb1b13><p class=pgc-img-caption></p></div><p>配的12V/1A电源，轻飘飘的</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7db6f022e8d84bc89cb5093b0175d372><p class=pgc-img-caption></p></div><p>拆开全家福</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/38b1394c4bdb479f8f4c9875bd48e83f><p class=pgc-img-caption></p></div><p>与数码之家22合一螺丝刀合个影，长度差不多。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/38b6af9e267444be8aae74735c22eeae><p class=pgc-img-caption></p></div><p>因为可以调速，实际上说明就是个单片机。可以调速，但是只能一直运行，而且那个按键的位置摆明了就是让你调整后一直用的。本人比较想要个点动的功能，适合打钻或者精细打磨。</p><p>理论上那个sot23-6的单片机（IC2）是个兼容pic的台产otp单片机，其实原厂家开发，还剩一个IO可以加上，但是估计是不好弄了。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f259bac62a4442db9db39c543c89e15a><p class=pgc-img-caption></p></div><p>本着想加个点动的功能，然后既然都要重新lay板子，还得换单片机，不如再加个堵转保护的功能吧，讲道理，这个功能那么简单的东西，也要不了几个io，我是不想用stm8s003的，但是手上存货就这货最多，而且也算用的普及，好多坛友都会玩这个单片机，所以就它了，浪费io就浪费io吧。别跟我讲stc，听不见~~~~</p><p>原理图安排上，堵转测量的原理是测量mos导通时的电压降</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e616e491f5734915b2b9eb8e5854f4f2><p class=pgc-img-caption></p></div><p>pcb就量了下原装板子，然后照着摆就是了。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4b346bd3a40d4aac9edc8f83c52ede63><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/491a08a3f57b48df9b92f636a7462397><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d2310c08065840b6a301489d21f5faf4><p class=pgc-img-caption></p></div><p>到货的空板，不拼版是不可能的，这辈子都不可能不拼版，就算5元也要拼满.jpg</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/da087522ce2643039298c5288f8e07de><p class=pgc-img-caption></p></div><p>原装待宰的板子和新的板子合影 反正上面有的原件，基本都用得着，搬下来就是了</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/53e8fd32ddfa41c093f2f0cfacfdcb2e><p class=pgc-img-caption></p></div><p>焊接完成图，自己需要备的料：stm8s003某宝一抓一大把1元不到包邮的，sot23-5的运放，我这里用的便宜货lmv321不知道哪里拆的了，少许容阻，两个肖特基二极管B5819W可行。</p><p>那个led如果没有rgb的就只焊个原装的蓝色够了，焊接完成图。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/514ddd6b13ba47f89d20915781c62b60><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f591f417f41d451ba0cdd187db20db78><p class=pgc-img-caption></p></div><p>点动按键飞线</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a1812b009e9e4d058afb9d052193c6a6><p class=pgc-img-caption></p></div><p>插在散热孔这里，懒得打洞改外壳了，其实电动工具触摸开关的真的不大好用，参考（论坛ID：yh老杨，用SGL8022W改触摸无极调速）的帖子，触摸控制感觉没有手感，容易误触。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fd30bfbd563241d08efb0d2c13e8d72e><p class=pgc-img-caption></p></div><p>焊接按键线</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a7721e9aac7a41bc9fd7582304c4033f><p class=pgc-img-caption></p></div><p>组装</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/de46a3020e3d4faf828d617230572ff1><p class=pgc-img-caption></p></div><p>完成图整一点点热熔胶</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2479864175b2409b8f43a8a42c0cdbdc><p class=pgc-img-caption></p></div><p>搞定收工，下面具体介绍讲解原理，制作等乱七八糟细节。</p><p>除了1挡的堵转和空载差值不大以外，其他挡位的堵转电流都挺大的，所以其实计算不是太严谨的测试方法，也足够保护了。</p><p>首先是电流检测/堵转检测原理，可以看到板子上用的这个mos管。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a0966d92b28d4996904f977a68525e99><p class=pgc-img-caption></p></div><p>型号EMA09N03CS，25V 50A 内阻9m欧，GS电压加到5V的时候，典型值12m，最大值15m欧。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8a7a910de08c4ebc941c96472df89892><p class=pgc-img-caption></p></div><p>那么就是利用这个12m欧左右的导通电阻作为检流电阻，在mos关闭时，借用t12控制器的原理，用电阻串二极管保护运放输出不过压，R2是测量限流电阻 D2就是借用它0.2V的压降做保护。</p><p>本来设计了直接进单片机io腿的方案，想着这样可以节约掉一个运放，电路更简单，但是嘛，后来算了下，5V供电的10位单片机ADC，一格的分辨率才5mV,相当于12m欧取样，要差不多400mA才能喂得动一格ADC，再加上本身的噪声，啥也测不出来了。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d54d9fc748a04905ad1002ec2d8881e0><p class=pgc-img-caption></p></div><p>然后呢，需要adc和pwm输出同步运行，才可以测出在导通时的电流。所以这才是选择stm8的原因。如果用stc等单片机，就只能软件翻pwm输出了，才能保障adc的测量对齐。</p><p>所以说stm8就时香在这里，可以通过定时器1设置合适的触发信号，然后直接触发adc的采样，同时呢，adc模块集成长度为10次采样的缓存，可以一次采样完所有通道再来缓存中取数据。stc表示根本没听说过。</p><p>所以设置了在pwm输出的下降沿触发adc采样，然后一次采样 输入系统电压、结果运放放大后，mosfet电压降和内部电压基准，主循环用查询状态机方法读取转换结果，整个程序跑起来以后没有任何delay。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0f772d6679b64e77861164bafc727951><p class=pgc-img-caption></p></div><p><strong>操控机制：</strong></p><p>分为两个运行模式，常开模式和点动模式。</p><p>常开模式用原设计位置的按键开启，使用方法和原来的控制板一模一样，5档循环，速度也是一样的。点动模式，用加出来的按键控制，按住动，松开停。<strong>然后在点动按下的时候，按常运行键调整点动的速度</strong>，也是5档。</p><p><strong>led运行机制</strong></p><p>绿色led在不运行的时候闪烁，电机运行时常亮</p><p>蓝色led在电机运行时，根据电机速度闪烁，闪烁频率和原装的差不多，满速运行的时候常亮。红色led显示错误状态，常亮为堵转保护（设置2后自动恢复 类似电源打嗝）快速闪烁为过压保护（目前设置18V）。</p><p>慢速闪烁时欠压保护（目前设置是7V）(因为单片机如果供电小于5V,mos的导通电阻就变了，堵转保护会乱套)</p><p>这些设置的保护阈值都是可调的<br>pcb有误，PCB在画的时候脑抽了把输入电压测量接到了没有adc输入的脚上，所以改了一版，所以看到上面的板子上有飞线，现在上传的文件的是正确的。</p><p>焊接图</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d68c31814c0348d5b12a2af2cbbd5484><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b81256e0a25b44b3bf82f9e473892231><p class=pgc-img-caption></p></div><p>程序注意事项，所有的配置消息都在头文件sys_conf.h里面，这些是可以改的，触发阈值、触发时间 、打嗝时间等参数最好根据自己的情况改一改，毕竟每个人习惯的不同。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4597a93e229e4fb3a16be5b03468ce64><p class=pgc-img-caption></p></div><p>程序就占用了2K空间的样子，剩下的可以改出朵花来都行。</p><div class=pgc-img><img alt=创意DIY：改造9.9元包邮的小电磨，增加堵转保护和点动功能且开源 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b5b1e3f57eb24f69bb4defe23b66c495><p class=pgc-img-caption></p></div><p>开源电路板设计文件-可以直接用于打样，开源所有代码，严禁用于商业用途。</p><p>二次开发需开源且注明来源数码之家及原作者和数码之家帖子链接！</p><p><strong>（</strong><strong>点解</strong><strong>文章底部“了解更多”即可在贴内查看源代码及PCB文件）</strong></p><hr><p>谢谢观看！</p><p>关注数码之家网浏览更多精彩资讯、拆机图文DIY</p><p>技术交流请联系原作者</p><p>作者：<strong>2545889167</strong></p><p>本文来源：数码之家</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'创意','DIY','9.9'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>