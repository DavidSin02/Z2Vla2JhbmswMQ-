<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ä½ åœ¨å¼€å‘APIæ—¶æ˜¯å¦‚ä½•è®¾è®¡ç­¾åéªŒè¯çš„ï¼Ÿ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ä½ åœ¨å¼€å‘APIæ—¶æ˜¯å¦‚ä½•è®¾è®¡ç­¾åéªŒè¯çš„ï¼Ÿ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/dcea13c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/dcea13c.html><meta property="article:published_time" content="2020-10-29T21:04:28+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:28+08:00"><meta name=Keywords content><meta name=description content="ä½ åœ¨å¼€å‘APIæ—¶æ˜¯å¦‚ä½•è®¾è®¡ç­¾åéªŒè¯çš„ï¼Ÿ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/dcea13c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ä½ åœ¨å¼€å‘APIæ—¶æ˜¯å¦‚ä½•è®¾è®¡ç­¾åéªŒè¯çš„ï¼Ÿ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä¸æ¥å£æ‰“äº¤é“ï¼Œæœ‰çš„æ—¶å€™æ˜¯è°ƒå–åˆ«äººç½‘ç«™çš„æ¥å£ï¼Œæœ‰çš„æ—¶å€™æ˜¯ä¸ºä»–äººæä¾›è‡ªå·±ç½‘ç«™çš„æ¥å£ï¼Œä½†æ˜¯åœ¨è¿™è°ƒå–çš„è¿‡ç¨‹ä¸­éƒ½ç¦»ä¸å¼€ç­¾åéªŒè¯ã€‚</p><p>æˆ‘ä»¬åœ¨è®¾è®¡ç­¾åéªŒè¯çš„æ—¶å€™ï¼Œè¯·æ³¨æ„è¦æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å¯å˜æ€§ï¼šæ¯æ¬¡çš„ç­¾åå¿…é¡»æ˜¯ä¸ä¸€æ ·çš„ã€‚</li><li>æ—¶æ•ˆæ€§ï¼šæ¯æ¬¡è¯·æ±‚çš„æ—¶æ•ˆï¼Œè¿‡æœŸä½œåºŸç­‰ã€‚</li><li>å”¯ä¸€æ€§ï¼šæ¯æ¬¡çš„ç­¾åæ˜¯å”¯ä¸€çš„ã€‚</li><li>å®Œæ•´æ€§ï¼šèƒ½å¤Ÿå¯¹ä¼ å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œé˜²æ­¢ç¯¡æ”¹ã€‚</li></ul><p><br></p><p><strong>ä¸€ã€ç­¾åå‚æ•°signç”Ÿæˆçš„æ–¹æ³•</strong></p><p>ç¬¬1æ­¥: å°†æ‰€æœ‰å‚æ•°ï¼ˆæ³¨æ„æ˜¯æ‰€æœ‰å‚æ•°ï¼‰ï¼Œé™¤å»signæœ¬èº«ï¼Œä»¥åŠå€¼æ˜¯ç©ºçš„å‚æ•°ï¼ŒæŒ‰å‚æ•°åå­—æ¯å‡åºæ’åºã€‚</p><p>ç¬¬2æ­¥: ç„¶åæŠŠæ’åºåçš„å‚æ•°æŒ‰å‚æ•°1å€¼1å‚æ•°2å€¼2â€¦å‚æ•°nå€¼nï¼ˆè¿™é‡Œçš„å‚æ•°å’Œå€¼å¿…é¡»æ˜¯ä¼ è¾“å‚æ•°çš„åŸå§‹å€¼ï¼Œä¸èƒ½æ˜¯ç»è¿‡å¤„ç†çš„ï¼Œå¦‚ä¸èƒ½å°†"è½¬æˆâ€åå†æ‹¼æ¥ï¼‰çš„æ–¹å¼æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>ç¬¬3æ­¥: æŠŠåˆ†é…ç»™æ¥å…¥æ–¹çš„éªŒè¯å¯†é’¥keyæ‹¼æ¥åœ¨ç¬¬2æ­¥å¾—åˆ°çš„å­—ç¬¦ä¸²å‰é¢ã€‚</p><p>ç¬¬2æ­¥: åœ¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å­—ç¬¦ä¸²å‰é¢åŠ ä¸ŠéªŒè¯å¯†é’¥key(è¿™é‡Œçš„å¯†é’¥keyæ˜¯æ¥å£æä¾›æ–¹åˆ†é…ç»™æ¥å£æ¥å…¥æ–¹çš„)ï¼Œç„¶åè®¡ç®—md5å€¼ï¼Œå¾—åˆ°32ä½å­—ç¬¦ä¸²ï¼Œç„¶åè½¬æˆå¤§å†™.</p><p>ç¬¬4æ­¥: è®¡ç®—ç¬¬3æ­¥å­—ç¬¦ä¸²çš„md5å€¼(32ä½)ï¼Œç„¶åè½¬æˆå¤§å†™,å¾—åˆ°çš„å­—ç¬¦ä¸²ä½œä¸ºsignçš„å€¼ã€‚</p><p><br></p><p><strong>ä¸¾ä¾‹ï¼š</strong></p><p>å‡è®¾ä¼ è¾“çš„æ•°æ®æ˜¯/interface.php?sign=sign_value&p2=v2& p1=v1&method=cancel&p3=&pn=vnï¼ˆå®é™…æƒ…å†µæœ€å¥½æ˜¯é€šè¿‡postæ–¹å¼å‘é€ï¼‰ï¼Œå…¶ä¸­signå‚æ•°å¯¹åº”çš„sign_valueå°±æ˜¯ç­¾åçš„å€¼ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²ï¼Œé¦–å…ˆå»é™¤signå‚æ•°æœ¬èº«ï¼Œç„¶åå»é™¤å€¼æ˜¯ç©ºçš„å‚æ•°p3ï¼Œå‰©ä¸‹p2=v2&p1=v1&method=cancel& amp;pn=vnï¼Œç„¶åæŒ‰å‚æ•°åå­—ç¬¦å‡åºæ’åºï¼Œmethod=cancel&p1=v1&p2=v2&pn=vn.</p><p>ç¬¬äºŒæ­¥ï¼Œç„¶ååšå‚æ•°åå’Œå€¼çš„æ‹¼æ¥ï¼Œæœ€åå¾—åˆ°methodcancelp1v1p2v2pnvn</p><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨ä¸Šé¢æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²å‰åŠ ä¸ŠéªŒè¯å¯†é’¥keyï¼Œæˆ‘ä»¬å‡è®¾æ˜¯abcï¼Œå¾—åˆ°æ–°çš„å­—ç¬¦ä¸²abcmethodcancelp1v1p2v2pnvn</p><p>ç¬¬å››æ­¥ï¼Œç„¶åå°†è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œmd5è®¡ç®—ï¼Œå‡è®¾å¾—åˆ°çš„æ˜¯abcdefï¼Œç„¶åè½¬ä¸ºå¤§å†™ï¼Œå¾—åˆ°ABCDEFè¿™ä¸ªå€¼å³ä¸ºsignç­¾åå€¼ã€‚</p><p>æ³¨æ„ï¼Œè®¡ç®—md5ä¹‹å‰è¯·ç¡®ä¿æ¥å£ä¸æ¥å…¥æ–¹çš„å­—ç¬¦ä¸²ç¼–ç ä¸€è‡´ï¼Œå¦‚ç»Ÿä¸€ä½¿ç”¨utf-8ç¼–ç æˆ–è€…GBKç¼–ç ï¼Œå¦‚æœç¼–ç æ–¹å¼ä¸ä¸€è‡´åˆ™è®¡ç®—å‡ºæ¥çš„ç­¾åä¼šæ ¡éªŒå¤±è´¥ã€‚</p><p><br></p><p><strong>äºŒã€ç­¾åéªŒè¯æ–¹æ³•ï¼š</strong></p><p>æ ¹æ®å‰é¢æè¿°çš„ç­¾åå‚æ•°signç”Ÿæˆçš„æ–¹æ³•è§„åˆ™ï¼Œè®¡ç®—å¾—åˆ°å‚æ•°çš„ç­¾åå€¼ï¼Œå’Œå‚æ•°ä¸­é€šçŸ¥è¿‡æ¥çš„signå¯¹åº”çš„å‚æ•°å€¼è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆå°±æ ¡éªŒé€šè¿‡ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œè¯´æ˜å‚æ•°è¢«ä¿®æ”¹è¿‡ã€‚</p><p><br></p><p><strong>ä¸‰ã€ä¸‹é¢ç›´æ¥çœ‹ä»£ç </strong></p><pre><code>&lt;?php//&nbsp;è®¾ç½®ä¸€ä¸ªå…¬é’¥(key)å’Œç§é’¥(secret)ï¼Œå…¬é’¥ç”¨äºåŒºåˆ†ç”¨æˆ·ï¼Œç§é’¥åŠ å¯†æ•°æ®ï¼Œä¸èƒ½å…¬å¼€$key&nbsp;=&nbsp;&#34;c4ca4238a0b923820dcc509a6f75849b&#34;;$secret&nbsp;=&nbsp;&#34;28c8edde3d61a0411511d3b1866f0636&#34;;//&nbsp;å¾…å‘é€çš„æ•°æ®åŒ…$data&nbsp;=&nbsp;array(&nbsp;&nbsp;&#39;username&#39;&nbsp;=&gt;&nbsp;&#39;abc@qq.com&#39;,&nbsp;&nbsp;&#39;sex&#39;&nbsp;=&gt;&nbsp;&#39;1&#39;,&nbsp;&nbsp;&#39;age&#39;&nbsp;=&gt;&nbsp;&#39;16&#39;,&nbsp;&nbsp;&#39;addr&#39;&nbsp;=&gt;&nbsp;&#39;guangzhou&#39;,&nbsp;&nbsp;&#39;key&#39;&nbsp;=&gt;&nbsp;$key,&nbsp;&nbsp;&#39;timestamp&#39;&nbsp;=&gt;&nbsp;time(),);//&nbsp;è·å–signfunction&nbsp;getSign($secret,&nbsp;$data)&nbsp;{&nbsp;&nbsp;//&nbsp;å¯¹æ•°ç»„çš„å€¼æŒ‰keyæ’åº&nbsp;&nbsp;ksort($data);&nbsp;&nbsp;//&nbsp;ç”Ÿæˆurlçš„å½¢å¼&nbsp;&nbsp;$params&nbsp;=&nbsp;http_build_query($data);&nbsp;&nbsp;//&nbsp;ç”Ÿæˆsign&nbsp;&nbsp;$sign&nbsp;=&nbsp;md5($params&nbsp;.&nbsp;$secret);&nbsp;&nbsp;return&nbsp;$sign;}//&nbsp;å‘é€çš„æ•°æ®åŠ ä¸Šsign$data[&#39;sign&#39;]&nbsp;=&nbsp;getSign($secret,&nbsp;$data);/**&nbsp;*&nbsp;åå°éªŒè¯signæ˜¯å¦åˆæ³•&nbsp;*&nbsp;@param&nbsp;[type]&nbsp;$secret&nbsp;[description]&nbsp;*&nbsp;@param&nbsp;[type]&nbsp;$data&nbsp;&nbsp;[description]&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]&nbsp;*/function&nbsp;verifySign($secret,&nbsp;$data)&nbsp;{&nbsp;&nbsp;//&nbsp;éªŒè¯å‚æ•°ä¸­æ˜¯å¦æœ‰ç­¾å&nbsp;&nbsp;if&nbsp;(!isset($data[&#39;sign&#39;])&nbsp;||&nbsp;!$data[&#39;sign&#39;])&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&#39;å‘é€çš„æ•°æ®ç­¾åä¸å­˜åœ¨&#39;;&nbsp;&nbsp;&nbsp;&nbsp;die();&nbsp;&nbsp;}&nbsp;&nbsp;if&nbsp;(!isset($data[&#39;timestamp&#39;])&nbsp;||&nbsp;!$data[&#39;timestamp&#39;])&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&#39;å‘é€çš„æ•°æ®å‚æ•°ä¸åˆæ³•&#39;;&nbsp;&nbsp;&nbsp;&nbsp;die();&nbsp;&nbsp;}&nbsp;&nbsp;//&nbsp;éªŒè¯è¯·æ±‚ï¼Œ&nbsp;10åˆ†é’Ÿå¤±æ•ˆ&nbsp;&nbsp;if&nbsp;(time()&nbsp;-&nbsp;$data[&#39;timestamp&#39;]&nbsp;&gt;&nbsp;600)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&#39;éªŒè¯å¤±æ•ˆï¼Œ&nbsp;è¯·é‡æ–°å‘é€è¯·æ±‚&#39;;&nbsp;&nbsp;&nbsp;&nbsp;die();&nbsp;&nbsp;}&nbsp;&nbsp;$sign&nbsp;=&nbsp;$data[&#39;sign&#39;];&nbsp;&nbsp;unset($data[&#39;sign&#39;]);&nbsp;&nbsp;ksort($data);&nbsp;&nbsp;$params&nbsp;=&nbsp;http_build_query($data);&nbsp;&nbsp;//&nbsp;$secretæ˜¯é€šè¿‡keyåœ¨apiçš„æ•°æ®åº“ä¸­æŸ¥è¯¢å¾—åˆ°&nbsp;&nbsp;$sign2&nbsp;=&nbsp;md5($params&nbsp;.&nbsp;$secret);&nbsp;&nbsp;if&nbsp;($sign&nbsp;==&nbsp;$sign2)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;die(&#39;éªŒè¯é€šè¿‡&#39;);&nbsp;&nbsp;}&nbsp;else&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;die(&#39;è¯·æ±‚ä¸åˆæ³•&#39;);&nbsp;&nbsp;}}?&gt;</code></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'å¼€å‘','API','è®¾è®¡'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>