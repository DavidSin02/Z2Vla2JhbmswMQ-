<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基础知识普及：操作系统中的进程与线程 | 极客快訊</title><meta property="og:title" content="基础知识普及：操作系统中的进程与线程 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/7ff1ca2888d742f29a8201fe1c7d60d5"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ddb1c482.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ddb1c482.html><meta property="article:published_time" content="2020-11-14T21:03:14+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:14+08:00"><meta name=Keywords content><meta name=description content="基础知识普及：操作系统中的进程与线程"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ddb1c482.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基础知识普及：操作系统中的进程与线程</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=基础知识普及：操作系统中的进程与线程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7ff1ca2888d742f29a8201fe1c7d60d5><p class=pgc-img-caption></p></div><p>操作系统是管理计算机硬件和软件资源的计算机程序，它管理计算机的内存分配，决定资源供需关系、控制输入输出设备以及提供用户和系统交互的操作界面</p><p>简单的概括一下，操作系统就是一个管理硬件、提供用户交互的软件系统</p><p><br></p><p><strong>二. 操作系统的历程</strong></p><p><strong>1. 无操作系统时代：</strong>人工操作、cup等待人工操作、资源利用率低</p><p><strong>2. 批处理系统时代：</strong>cpu无需等待人工操作、批量输入任务、资源利用率提升、多道程序设计</p><p><strong>3. 分时系统时代：</strong>多用户共享、可调试程序、资源利用率大幅提升</p><p><br></p><p><strong>三. 操作系统的基本功能</strong></p><p>1. 对计算机资源的管理，如处理器资源的管理、IO设备的管理、存储器资源的管理</p><p>2. 实现了对计算机资源的抽象</p><p>3. 提供了用户与计算机之间的接口：如图形界面、shell终端等</p><p><br></p><p><strong>四. 操作系统的相关概念</strong></p><p>多道程序设计</p><p><strong>概述：</strong>多道程序设计是指在计算机内存中同时存放多个程序，而这些个程序在操作系统的管理之下，相互交替运行，对多道程序的管理是操作系统的重要功能</p><p><strong>意义：</strong>早期的批处理系统虽然可以批量输入任务，但一次只能处理一个任务，多道程序设计的出现使得批处理系统可以一次处理多个任务，大大的提高了资源的利用率</p><p><br></p><p><strong>1. 并发性</strong></p><p><strong>概述：</strong>并发性分为并行和并发两种情况</p><p><strong>并行：</strong>是指两个或多个事件可以在同一时刻发生</p><p><strong>并发：</strong>是指两个或多个事件可以在同一时间间隔发生</p><p><br></p><p><strong>2. 共享性</strong></p><p><strong>概述：</strong>共享性表现为操作系统中的资源可供多个并发的程序共同使用，这种共同使用的形式称之为资源共享</p><p><br></p><p><strong>3. 虚拟性</strong></p><p><strong>概述：</strong>把一个物理实体转换为若干个逻辑实体，物理实体是真实存在的，而逻辑实体是虚拟的，这种虚拟化的技术 又分为<strong>时分复用技术</strong>和<strong>空分复用技术</strong></p><p><strong>时分复用技术：</strong>资源在时间上进行复用，不同程序<strong>并发</strong>使用，例如：</p><p>虚拟处理器技术：就是借助<strong>多道程序技术</strong>为每个程序建立进程，多个进程之间分时的使用处理器</p><p>虚拟设备技术：物理设备虚拟为多个逻辑设备，每个程序占用一个逻辑设备，多个设备通过逻辑 设备并发访问</p><p><strong>空分复用技术：</strong>用来实现虚拟磁盘、虚拟内存等</p><p><strong>虚拟磁盘：</strong>一块物理磁盘虚拟为逻辑磁盘，如C、D、E等逻辑磁盘，这样每个磁盘使用起来相对 独立、互不影响更加安全和方便</p><p><strong>虚拟内存：</strong>在逻辑上扩大程序的存储容量，这样我们就可以使用比实际内存更大的容量，内存在 计算机的作用是无可替代的，所有的程序都需要加载到内存中才能执行，如果执行的 程序过大或者过多，就会导致内存不足。为了防止这样的情况，就有了虚拟内存的诞 生，在Windows系统中，使用一部分硬盘空间来充当内存使用，这部分空间即称为虚 拟内存</p><p><br></p><p><strong>4. 异步性</strong></p><p><strong>概述：</strong>在多道程序的设计之下，允许多个程序并发执行，但因进程在使用资源时需要等待或者放弃，所以进程的执行并不是连续的，而是以断断续续的方式进行的</p><p>例如：有三个程序A、B、C它们在交替的运行，并使用同一资源，目前是A正在使用资源，假设A使用完毕 后释放了该资源，B、C开始同时竞争这一资源，而我们不知道谁最后竞争到了这一资源，这时进程 就是在以不可预知的形式在向前推进，我们不知道程序何时执行、何时暂停、何时完成，最后就导致 了程序的异步性</p><p><strong>进程和程序的区别：</strong>1. 程序是静止的而进程是动态的</p><p>2. 程序是永久存在的。进程是程序在数据集上的一次执行，是暂时的</p><p>3. 程序和进程并非是一 一对应的。一个进程肯定有与之对应的程序而且只有一个， 一个程序 可能没有与之对应的进程(这是因为程序还有被运行)，也有可能有多个进程与之对应，这是 因为一个程序运行在不同的数据集上就构成了不同的进程</p><p><br></p><p><strong>五. 进程与线程</strong></p><p><strong>1. 进程</strong></p><p><strong>概述：</strong>进程是系统进行资源分配和调度的基本单位，并作为程序独立运行的载体保证程序正常运行，使得操作系统的资源利用率大大提升</p><p><br></p><p><strong>2. 进程的实体</strong></p><p><strong>概述：</strong>我们用主存(内存分为主存(DRAM)和Cache(SRAM))中的进程形态来描述进程的实体，在主存中进程是一段连续存储的空间，这个空间我们称为进程控制块（PCB）</p><p><strong>进程控制块：</strong>1. PCB是用来描述和控制进程运行的通用数据结构</p><p>2. 记录进程当前状态和控制进程运行的全部信息</p><p>3. PCB是进程能够独立运行的基本单位</p><p>4. PCB是常在内存中的，它会被存放在内存中专门的PCB区域内，这是因为操作系统进行调度作业时 经常会访问到PCB</p><p>在控制块中存放着进程的一些重要信息，如：标识符、状态、优先级、程序计数器、内存指针、上下文数据、IO状态信息、记账信息等</p><p><strong>下面我们对这些重要的信息做一个详细的描述：</strong></p><p><strong>标识符：</strong>一个进程唯一的标记，用来区别于其他进程</p><p><strong>状态：</strong>说明进程当前的运行状态</p><p><strong>优先级：</strong>进程执行的优先次序</p><p><strong>程序计数器：</strong> 记录进程即将被执行的下一条指令的地址</p><p><strong>内存指针：</strong>记录的是程序代码和进程数据相关的地址</p><p><strong>上下文数据：</strong>记录的是进程执行时处理器存储的数据</p><p><strong>IO状态信息：</strong>被进程IO操作所占用的文件列表</p><p><strong>记账信息：</strong>进程所使用的处理器时间等</p><p><br></p><p><strong>3. 进程的类型</strong></p><p>1）<strong>前台进程：</strong>是指用户可以在终端和进程相互交互的进程</p><p>2）<strong>后台进程：</strong>是指没有占用终端的进程，后台进程不需要和用户交互，在Linux系统中用 “&” 结尾的命令运行的 进程可以在后台运行</p><p>3）<strong>守护进程：</strong>是指在系统启动时启动，并且在系统关闭时结束的进程</p><p><br></p><p><strong>4. 进程的标记</strong></p><p><strong>进程ID：</strong>进程ID是进程的唯一标记，每个进程拥有不同的ID。</p><p>ID为0的进程称为idle进程，是系统创建的第一个进程，idle进程的运行时间其实就是指系统的空闲时间 ID为1的进程称为init进程，它是0号进程的子进程，负责完成系统的初始化工作，并且init进程是所有用 户的起始进程</p><p><strong>进程状态：</strong>以下的状态符号具体是体现在Linux系统中的</p><div class=pgc-img><img alt=基础知识普及：操作系统中的进程与线程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24042c2a4a7449d9a27e14f6a63d059a><p class=pgc-img-caption></p></div><p><strong>5. 进程状态模型</strong></p><p><strong>概述：</strong>进程的状态模型分为五种，分别是创建、就绪、阻塞、执行和终止</p><p><strong>下面我们就来详细的说明一下这五大状态：</strong></p><p><strong>创建状态：</strong>进程分配到了PCB但其他资源尚未准备就绪时称为创建状态</p><p><strong>就绪状态：</strong>当进程被分配到除CPU以外的所有必要资源后，此时的进程状态就称为就绪状态</p><p><strong>阻塞状态：</strong>进程因为某种原因如：IO操作，不能立刻执行而放弃CPU使用权的状态称为阻塞状态</p><p><strong>执行状态：</strong>当进程处在就绪状态并获得CPU的使用权后，就可以执行了，此时的状态就称为执行状态（在单核CPU中只能有一个进程是处在执行状态的）</p><p><strong>终止状态：</strong> 进程执行完成由系统回收资源后的状态称为终止状态</p><p><br></p><p><strong>6. 进程间的同步</strong></p><p><strong>1）进程同步</strong></p><p><strong>概述：</strong> 在多道程序设计下，多进程之间需要共同完成一项任务时，需要相互制约、互相合作、互相等待，使得各进程按一定的速度执行的过程称为进程间的同步。</p><p><br></p><p><strong>2) 临界资源</strong></p><p><strong>概述：</strong>临界资源指的某些资源虽作为共享资源却无法同时被多个进程同时使用的资源，如：打印机</p><p><br></p><h5 class="md-end-block md-heading"><strong>3）我们为什么需要进程间的同步？</strong></h5><p><strong>在讨论这个问题之前，我们先来看一个经典的问题：哲学家进餐问题</strong></p><p>有五个哲学家，他们的生活方式是交替地进行思考和进餐，哲学家们共用一张圆桌，分别坐在周围的五张椅子上，在圆桌上有五个碗和五支筷子，平时哲学家进行思考，饥饿时便试图取其左、右最靠近他的筷子，只有在他拿到两支筷子时才能进餐，该哲学家进餐完毕后，放下左右两只筷子又继续思考。</p><p><strong>限制的条件</strong></p><p>(1)只有拿到两只筷子时，哲学家才能吃饭。</p><p>(2)如果筷子已被别人拿走，则必须等别人吃完之后才能拿到筷子。</p><p>(3)任一哲学家在自己未拿到两只筷子吃完饭前，不会放下手中已经拿到的筷子</p><p><strong>我们描述一下哲学家们进餐的流程：</strong></p><p>其中一个哲学家拿起左边的筷子，然后准备去拿右边的筷子，但发现右边的筷子已经被拿走了，他只能等待右边的筷子放回原位才能就餐，这时他不会放下左边的筷子，直到他拿到右边的筷子并就餐之后才会把筷子放回原位，这样看起来好像没什么问题。</p><p><strong>现在我们来讨论一种极端的情况：</strong></p><p>这五个科学家同时拿起左手边的筷子，并在拿到右手边的筷子之前，不会放下已经拿到的左手边的筷子，而他们必须要有左右两只筷子才可以就餐，那么最终的结果是怎样的？我想大家都已经猜到了！</p><p><strong>产生这种极端情况的根本原因是：哲学家之间没有进行相互的沟通</strong></p><p>我们把这个问题引入到进程当中，就可以解释了我们为什么需要 进程之间的同步，它帮助我们解决了在多个并发执行的进程之间如何对<strong>临界资源</strong>进行有效协调的问题</p><p><br></p><p><strong>4）进程间同步的原则</strong></p><ol start=0><li><strong>空闲让进：</strong>当临界资源没有被占用时，这时可以允许一个进程使用该临界资源</li><li><strong>忙则等待：</strong>当临界资源正在被某进程占用时，其他的进程必须等待该临界资源被释放才可以使用</li><li><strong>有限</strong><strong>等待:</strong> 对等待访问的进程，应保证在有限的时间内能访问到临界资源</li><li><strong>让权等待：</strong>当进程暂时不能访问到所需要的临界资源时，应主动的释放CPU资源</li></ol><p><strong>5) 进程间同步的方法</strong></p><ol start=0><li><strong>消息队列</strong></li><li><strong>共享存储</strong></li><li><strong>信号量</strong></li></ol><p><br></p><p><strong>7. 进程调度</strong></p><p><strong>1）概述：</strong>是指计算机通过某种决策决定哪个就绪程序可以获得CPU的使用权，它会保留原来进程的运行信息，然后选择新的进程并分配给它CPU的使用权</p><p><br></p><p><strong>2）调度机制：</strong>（1）就绪队列的排队机制：就绪进程按照一定的方式进行排队，以便调度程序可以快速的找到就绪进 程</p><p>（2）选择运行进程的委派机制 ：调度程序按照相应的策略选择就绪进程，并分配给它CPU使用权</p><p>（3）进程的上下文切换机制：保存当前进程的上下文环境到内存中，并把要执行的进程的上下文环境 加载到CPU中</p><p><strong>问题：若当前的进程没有执行完，操作系统就执行进程的调度，那当前的进程会如何呢？</strong></p><p><strong>答：</strong>我们先要了解一下在操作系统中进程的调度可以分为两类：<strong>抢占式调度</strong>和<strong>非抢占式调度</strong></p><p><strong>抢占式调度：</strong>操作系统允许调度程序以某种策略暂停当前正在运行的进程，把CPU资源分给其他的就绪进程</p><p><strong>非抢占式调度：</strong>调度程序不会以任何形式抢占已经被某进程占用的CPU资源而分给其他的就绪进程，直到该进 程执行完毕或者遇到IO阻塞</p><p><strong>对比</strong>：<strong>抢占式调度</strong>比<strong>非抢占式调度</strong>的系统开销大、但相对公平可以每个就绪进程都能得到运行、适用于大部 分的场景</p><p><br></p><p><strong>3）调度算法：</strong>（1）先来先服务调度算法：是指按照就绪队列中就绪进程的先后顺序进行调度</p><p>（2）短进程优先调度算法：是指调度程序优先选择运行时间可能最短的就绪进程，但如果就绪队 列中有需要运行时间比较长的就绪进程，那么这种算法对它是不友好的</p><p>（3）高优先权优先调度算法：是指调度程序优先选择权重比较高的就绪进程进行处理，这种算法 的好处是可以及时的处理一些比较紧急的任务，如：前台进程就要比后台进程的权重要高， 这是因为前台进程是需要和用户交互的进程</p><p>（4）时间片轮转调度算法：这是比较公平的算法，它是指按照先来先服务的原则给就绪队列中的每 个进程分配相同的运行时间来运行，之后不管当前正在运行的进程有没有执行完， 它都会把 CPU资源分配给下一个就绪进程，但它并不能保证对用户能够及时的响应</p><p><br></p><p><strong>8. 死锁现象</strong></p><p><strong>1）概述：</strong>死锁是指两个或两个以上的进程因为竞争资源或因为彼此之间通信时调度的顺序不当而造成的阻塞现象</p><p><strong>2）产生的必要条件：</strong>（1）<strong>互斥条件</strong> ：是指一个进程对某资源的使用是排他性的，除非这个进程主动释放资源否 则其他的进程想使用此资源只能等待</p><p>（2）<strong>请求保持条件：</strong> 在互斥的条件之下，这个进程又请求了一个新的资源，恰好这个资源 已经被占用，这时此进程请求不到想要的资源但也不会释放已经占有 的资源，这就是请求保持条件</p><p>（3）<strong>不可剥夺条件：</strong> 进程正在使用的资源在未完成之前不能被强制剥夺，只能由自身释放</p><p>（4）<strong>环路等待条件：</strong>发生死锁现象时，必会存在进程与资源形成的等待环形链</p><p><strong>3）避免死锁的方法：</strong>（1）系统规定进程运行之前，一次性申请好所有所需的资源，这样我们就破坏了死锁产生 必要条件的第（2）条：请求保持条件</p><p>（2）当一个进程请求新的资源而得不到时，那么它必须释放已经占有的资源，这样我们就 破坏了必要条件中的第（3）条：不可剥夺条件</p><p>（3）把资源按照线性排序，规定进程申请资源时只能按照所需的资源顺序来申请，这样就 破坏了第（4）条：环路等待条件</p><p><br></p><p><strong>9. 线程</strong></p><p><strong>概述：</strong>1）线程是操作系统进行运行调度的最小单位。</p><p>2）操作系统对进程的调度实际上就是对进程里面线程的调度，它包含在进程当中，是进程中实际运行工作 的单位。</p><p>3）一个进程里面可以并发多个线程，每个线程执行不同的任务。</p><p>4）一个进程中的多个线程是共享进程资源的。</p><p><strong>问题：线程之间需要同步吗？</strong></p><p><strong>答：</strong>同一个进程内的多个线程之间，因为也是存在竞争共享资源的问题，所以也是需要线程同步机制的</p><p><strong>线程间同步的方法：</strong></p><p>1）互斥量</p><p>2）读写锁</p><p>3）自旋锁</p><p>4）条件变量</p><p><br></p><p><strong>10. 进程与线程对比</strong></p><div class=pgc-img><img alt=基础知识普及：操作系统中的进程与线程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7b60283facb5465aa0750f7bb2573bfc><p class=pgc-img-caption></p></div><p><strong>（1）获取更多优质内容及精彩资讯，可前往：https://www.cda.cn/?seo</strong></p><p><strong>（2）了解更多数据领域的优质课程：</strong></p><div class=pgc-img><img alt=基础知识普及：操作系统中的进程与线程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5bbb05870ae8495c9ecd58fa239870ca><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'基础','知识','系统'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>