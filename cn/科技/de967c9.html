<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>用 R 收集和映射推特数据的初学者向导 | 极客快訊</title><meta property="og:title" content="用 R 收集和映射推特数据的初学者向导 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/3216000129d93faaa188"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de967c9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de967c9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de967c9.html><meta property="article:published_time" content="2020-10-29T21:07:00+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:00+08:00"><meta name=Keywords content><meta name=description content="用 R 收集和映射推特数据的初学者向导"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/de967c9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>用 R 收集和映射推特数据的初学者向导</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt="用 R 收集和映射推特数据的初学者向导" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/3216000129d93faaa188></p><blockquote><p>学习使用 R 的 twitteR 和 leaflet 包, 你就可以把任何话题的推文定位画在地图上。 -- Dorris Scott</p></blockquote><blockquote>本文导航<ul class=list-paddingleft-2><li><p>-创建应用程序 …… 09%</p></li><li><p>-收集推特数据 …… 23%</p></li><li><p>-生成地图 …… 50%</p></li><li><p>-总结 …… 81%</p></li></ul></blockquote><blockquote>编译自： https://opensource.com/article/17/6/collecting-and-mapping-twitter-data-using-r<p>作者： Dorris Scott</p><p>译者： XYenChi</p></blockquote><blockquote><p>学习使用 R 的 twitteR 和 leaflet 包, 你就可以把任何话题的推文定位画在地图上。</p></blockquote><p>当我开始学习 R ，我也需要学习如何出于研究的目的地收集推特数据并对其进行映射。尽管网上关于这个话题的信息很多，但我发觉难以理解什么与收集并映射推特数据相关。我不仅是个 R 新手，而且对各种教程中技术名词不熟悉。但尽管困难重重，我成功了！在这个教程里，我将以一种新手程序员都能看懂的方式来攻略如何收集推特数据并将至展现在地图中。</p><h1>创建应用程序</h1><p>如果你没有推特帐号，首先你需要 注册一个[1]。然后，到 apps.twitter.com[2] 创建一个允许你收集推特数据的应用程序。别担心，创建应用程序极其简单。你创建的应用程序会与推特应用程序接口（API）相连。 想象 API 是一个多功能电子个人助手。你可以使用 API 让其它程序帮你做事。这样一来，你可以接入推特 API 令其收集数据。只需确保不要请求太多，因为推特数据请求次数是有限制[3] 的。</p><p>收集推文有两个可用的 API 。你若想做一次性的推文收集，那么使用 REST API. 若是想在特定时间内持续收集，可以用 streaming API。教程中我主要使用 REST API。</p><p>创建应用程序之后，前往 Keys and Access Tokens 标签。你需要 Consumer Key (API key)、 Consumer Secret (API secret)、 Access Token 和 Access Token Secret 才能在 R 中访问你的应用程序。</p><h1>收集推特数据</h1><p>下一步是打开 R 准备写代码。对于初学者，我推荐使用 RStudio[4]，这是 R 的集成开发环境 (IDE) 。我发现 RStudio 在解决问题和测试代码时很实用。 R 有访问该 REST API 的包叫 twitteR[5]。</p><p>打开 RStudio 并新建 RScript。做好这些之后，你需要安装和加载 twitteR 包:</p><blockquote>install.packages("twitteR")<p>#安装 TwitteR</p><p>library (twitteR)</p><p>#载入 TwitteR</p></blockquote><p>安装并载入 twitteR 包之后，你得输入上文提及的应用程序的 API 信息：</p><blockquote>api_key &lt;- ""<p>#在引号内放入你的 API key</p><p>api_secret &lt;- ""</p><p>#在引号内放入你的 API secret token</p><p>token &lt;- ""</p><p>#在引号内放入你的 token</p><p>token_secret &lt;- ""</p><p>#在引号内放入你的 token secret</p></blockquote><p>接下来，连接推特访问 API：</p><blockquote>setup_twitter_oauth(api_key, api_secret, token, token_secret)</blockquote><p>我们来试试让推特搜索有关社区花园和农夫市场：</p><blockquote>tweets &lt;- searchTwitter("community garden OR #communitygarden OR farmers market OR #farmersmarket", n = 200, lang = "en")</blockquote><p>这个代码意思是搜索前 200 篇 (n = 200) 英文 (lang = "en") 的推文, 包括关键词 community garden 或 farmers market 或任何提及这些关键词的话题标签。</p><p>推特搜索完成之后，在数据框中保存你的结果：</p><blockquote>tweets.df &lt;-twListToDF(tweets)</blockquote><p>为了用推文创建地图，你需要收集的导出为 .csv 文件:</p><blockquote>write.csv(tweets.df, "C:\Users\YourName\Documents\ApptoMap\tweets.csv")<p>#an example of a file extension of the folder in which you want to save the .csv file.</p></blockquote><p>运行前确保 R 代码已保存然后继续进行下一步。.</p><h1>生成地图</h1><p>现在你有了可以展示在地图上的数据。在此教程中，我们将用一个 R 包 Leaflet[6] 做一个基本的应用程序，这是一个生成交互式地图的热门 JavaScript 库。 Leaflet 使用 magrittr[7] 管道运算符 (%>%)， 因为其语法自然，易于写代码。刚接触可能有点奇怪，但它确实降低了写代码的工作量。</p><p>为了清晰起见，在 RStudio 打开一个新的 R 脚本安装这些包：</p><blockquote>install.packages("leaflet")<p>install.packages("maps")</p><p>library(leaflet)</p><p>library(maps)</p></blockquote><p>现在需要一个路径让 Leaflet 访问你的数据：</p><blockquote>read.csv("C:\Users\YourName\Documents\ApptoMap\tweets.csv", stringsAsFactors = FALSE)</blockquote><p>stringAsFactors = FALSE 意思是保留信息，不将它转化成 factors。 (想了解 factors，读这篇文章"stringsAsFactors: An unauthorized biography"[8]， 作者 Roger Peng）</p><p>是时候制作你的 Leaflet 地图了。我们将使用 OpenStreetMap基本地图来做你的地图：</p><blockquote>m &lt;- leaflet(mymap) %>% addTiles()</blockquote><p>我们在基本地图上加个圈。对于 lng 和 lat，输入包含推文的经纬度的列名，并在前面加个~。 ~longitude 和 ~latitude 指向你的 .csv 文件中与列名：</p><blockquote>m %>% addCircles(lng = ~longitude, lat = ~latitude, popup = mymap$type, weight = 8, radius = 40, color = "#fb3004", stroke = TRUE, fillOpacity = 0.8)</blockquote><p>运行你的代码。会弹出网页浏览器并展示你的地图。这是我前面收集的推文的地图：</p><p><img alt="用 R 收集和映射推特数据的初学者向导" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/322400029b8bdde3350c></p><p>推文定位地图</p><p>带定位的推文地图，使用了 Leaflet 和 OpenStreetMap CC-BY-SA[9]</p><p>虽然你可能会对地图上的图文数量如此之小感到惊奇，通常只有 1% 的推文记录了地理编码。我收集了总数为 366 的推文，但只有 10（大概总推文的 3%）是记录了地理编码的。如果你为得到记录了地理编码的推文而困扰，改变搜索关键词看看能不能得到更好的结果。</p><h1>总结</h1><p>对于初学者，把以上所有碎片结合起来，从推特数据生成一个 Leaflet 地图可能很艰难。 这个教程基于我完成这个任务的经验，我希望它能让你的学习过程变得更轻松。</p><p>（题图：琼斯·贝克[10]. CC BY-SA 4.0[11]. 来源: Cloud[12], Globe[13]. Both CC0[14].）</p><hr><p>作者简介：</p><p>Dorris Scott - Dorris Scott 是佐治亚大学的地理学博士生。她的研究重心是地理信息系统（GIS）、 地理数据科学、可视化和公共卫生。她的论文是在一个 GIS 系统接口将退伍军人福利医院的传统和非传统数据结合起来，帮助病人为他们的健康状况作出更为明朗的决定。</p><hr><p>via: https://opensource.com/article/17/6/collecting-and-mapping-twitter-data-using-r</p><p>作者：Dorris Scott[15] 译者：XYenChi 校对：wxy</p><p>本文由 LCTT 原创编译，Linux中国 荣誉推出</p><ul class=list-paddingleft-2><li><p>[1]: 注册一个 - https://twitter.com/signup</p></li><li><p>[2]: apps.twitter.com - https://apps.twitter.com/</p></li><li><p>[3]: 限制 - https://dev.twitter.com/rest/public/rate-limiting</p></li><li><p>[4]: RStudio - https://www.rstudio.com/</p></li><li><p>[5]: twitteR - https://cran.r-project.org/web/packages/twitteR/twitteR.pdf</p></li><li><p>[6]: Leaflet - https://rstudio.github.io/leaflet</p></li><li><p>[7]: magrittr - https://github.com/smbache/magrittr</p></li><li><p>[8]: "stringsAsFactors: An unauthorized biography" - http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/</p></li><li><p>[9]: CC-BY-SA - https://creativecommons.org/licenses/by-sa/2.0/</p></li><li><p>[10]: 琼斯·贝克 - https://opensource.com/users/jason-baker</p></li><li><p>[11]: CC BY-SA 4.0 - https://creativecommons.org/licenses/by-sa/4.0/</p></li><li><p>[12]: Cloud - https://pixabay.com/en/clouds-sky-cloud-dark-clouds-1473311/</p></li><li><p>[13]: Globe - https://pixabay.com/en/globe-planet-earth-world-1015311/</p></li><li><p>[14]: CC0 - https://creativecommons.org/publicdomain/zero/1.0/</p></li><li><p>[15]: Dorris Scott - https://opensource.com/users/dorrisscott</p></li></ul></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'推特数','初学者','映射'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>