<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>计算机学科那些事儿（6）-寄存器和内存 | 极客快訊</title><meta property="og:title" content="计算机学科那些事儿（6）-寄存器和内存 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/05560904-c52e-437b-85e5-cfc3017e87a3"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e1d0a5db.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e1d0a5db.html><meta property="article:published_time" content="2020-11-14T21:00:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:32+08:00"><meta name=Keywords content><meta name=description content="计算机学科那些事儿（6）-寄存器和内存"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e1d0a5db.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>计算机学科那些事儿（6）-寄存器和内存</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>前言</h1><p>上一节中我们讲到如何用逻辑门来构建一个ALU，它可以进行算术运算和逻辑运算，那么如果将算出来的结果存起来呢？这就要讲到今天的主角：「 <strong>内存</strong> 」了。</p><p>大家都有这样的经验，在计算机上进行文件编辑，或者正在看电视/电影，如果突然遇到断电，那么之前编辑的内容将没有保存，因为这些内容存储在内存中！电脑用的是"随机存取存储器"，简称为"RAM"！遇到这种状况，只是郁闷的份了。</p><h1>存储 1bit 的电路</h1><p>我们之前讲过的电路都是单向的，就是说有输入，经过电路运算得到输出。现在假如我们将输出连回输入，有趣的事情将会发生！</p><p>让我们拿一个 OR 门，将输出传回输入，看看会发生什么。</p><p class=ql-align-center>首先，两个输入都设为 0，电路输出0；如果将 A 变成1，“1 OR 0”为 1，所以输出 1；</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/05560904-c52e-437b-85e5-cfc3017e87a3><p class=pgc-img-caption></p></div><p class=ql-align-center>一转眼的功夫，输出回到 B，OR门看到两个输入都是 1，“1 OR 1”仍然为1，所以输出不变；</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/89530d32-a298-4f15-8efa-6ac6b6ecc87f><p class=pgc-img-caption></p></div><p>如果这时再将 A 变成 0，OR门依然输出 1！并且无论怎么试，都没法再从 1 变回 0。</p><p>类似的方法，如果将OR门换成AND门，情况正好相反。</p><p class=ql-align-center>A 和 B 都设为 1，“1 AND 1”的输出永远是 1；如果之后 A 设为 0，由于是 AND 门，输出会变成 0；就像之前，之后无论 A 设什么值，电路始终输出 0。</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/7c1e65e5-ba05-4204-a04d-360e89070d6b><p class=pgc-img-caption></p></div><h1>“AND-OR 锁存器”</h1><p>为了做出有用的存储 (memory)，我们将两个电路合起来，变成“AND-OR 锁存器”。它有两个输入，“设置”( SET ) 输入1，将输出变成 1 ；"复位" ( RESET )输入1，将输出变成 0；如果“设置”和“复位”都是 0，电路会输出最后放入的内容，也就是说，它存住了 1 bit 的信息！这就是存储！</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/62c8c10de1994e9e812b8faafcd25685><p class=pgc-img-caption></p></div><p>之所以叫“锁存”，是因为它“锁定”一个特定值并保持状态，将数据放入叫“写入”，将数据输出叫“读取”。</p><p>麻烦的是，用两条线来输入，也就是 SET 和 RESET，有点难理解，为了更容易用，我们希望只有一条输入线，将它设为 0 或 1 来存储值，还需要一根线来“启用”(enable) 内存，启用时允许写入，没启用时“锁定”，这条线叫“允许写入线”！</p><p class=ql-align-center>我们将整个电路抽象一下，输入现在只有“允许写入线”和“数据线”，有1个数据输出。如果将 "数据线" 从 0 换到 1 或 从 1 换到 0，什么也不会发生 - 输出依然是 0，因为“允许写入线”是关闭的（0）来防止内容变化；</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/acf6bb4e-c70d-4442-ba0a-6c5876007e8e><p class=pgc-img-caption></p></div><p class=ql-align-center>当“允许写入线” 输入 1，现在可以在“数据线”上放 1，将 1 存起来。注意输出这时候会变成1了，然后可以关掉 “允许写入线”，这样输出就会保持 1 而无论输入端再输入什么！</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/2cc4aa13-ca73-4421-aba0-9d7fab06a0d4><p class=pgc-img-caption></p></div><h1>寄存器</h1><p class=ql-align-center>只能存1bit 没什么大用，但是如果我们并排放8个锁存器，这样就可以存8 位信息，比如一个8bit数字，一组这样的锁存器叫“寄存器”。写入寄存器之前，首先要启用里面所有锁存器，我们可以用一根线连接所有“允许输入线”，然后设为1，然后用8条数据线发数据，然后将“允许写入线”设回 0，现在 8 bit 的值就存起来了。</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/140d6bbc-9a09-4f5e-b150-2cc30b2b9efb><p class=pgc-img-caption></p></div><p>寄存器能存多少个bit叫“位宽”，早期电脑用8位寄存器，然后是16位，32 位。如今许多计算机都有64位宽的寄存器。</p><p>对于很少的 bit，并排放锁存器勉强够用。但是如果是64 位寄存器，要64 根数据线+64根连到输出端，如果我们只要1根线启用所有锁存器，但加起来也有129条线了；如果是256位寄存器，要513条线，解决这个问题的方法是用「<strong>矩阵</strong>」！</p><h1>矩阵存储</h1><p>在矩阵中，我们不并列排放锁存器，而是做成网格，这样存256 位，我们需要用 16x16 的锁存器，要启用某个锁存器，就打开相应的 行线和列线。</p><p class=ql-align-center>行选和列选总共有有 16+16 =32根线，再加上1条“数据线”，1条“允许写入线”，1条“允许读取线”，总共也只需要35根线！</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/b9873467-ed5c-4fa3-b0a0-cca0903f80b3><p class=pgc-img-caption></p></div><h1>内存地址</h1><p>我们需要有一种方法来唯一指定这个交叉的点，这就是地址。比如一个bit 的地址是“12行 8列”，由于最多 16 行，用 4 个二进制 bit 就够了，“12”用二进制表示为“1100”，“8”用二进制表示为“1000”，所以刚才说的地址可写作“11001000”。</p><p>为了将地址转成 行和列，我们还需要一个部件叫 “多路复用器”，多路复用器有不同大小，因为我们有 16 行，我们需要 1 到 16 多路复用器，它的工作方式是：输入一个4bit数字，它会把那根线连到相应的输出线，如果输入 0000，它会选择第一列；输入 0001，则选择下一列，依此类推。</p><p class=ql-align-center>一个多路复用器处理行(row)，另一个多路复用器处理列(column)。</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/0415c8bc-0542-4dea-8478-0e3f79385776><p class=pgc-img-caption></p></div><h1>内存抽象</h1><p class=ql-align-center>我们将这个能够存储256 bit的内存经行抽象，它输入一个 8 位地址：4 位代表列，4 位代表行，我们还需要 "允许写入线" 和 "允许读取线"，最后，还需要一条数据线，用于读/写数据。</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/2b9c7095-f101-482c-b7a8-e92af241edfe><p class=pgc-img-caption></p></div><p>如果我们将更多的这样的单元连接在一起，就可以组成更大的存储单元。</p><p class=ql-align-center>如果将8个这样的256 bit 内存组在一起，就可以构建一个具有256 个地址，每个地址可以存储1个byte的内存！</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/57b3d5e3-7f51-477e-a197-4fbfcbfe5069><p class=pgc-img-caption></p></div><p class=ql-align-center>现代计算机的内存扩展到千兆字节（GB）的方式，和我们这里做的一样，就是不断把内存打包到更大规模。如下是一条真的内存，上面焊了 8 个内存模块，如果打开其中一个，然后放大，会看到 32 个内存方块，放大其中一个方块，可以看到有 4 个小块，如果再放大，就可以看到存一个"位"的矩阵。</p><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8ef3ef6d71a24bc787286d3c44f6fa92><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=计算机学科那些事儿（6）-寄存器和内存 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7b35e8e2cbb74966be2940d174e32853><p class=pgc-img-caption></p></div><h1><strong><em>总结与展望</em></strong></h1><p>在这一期里，我们从基本的锁存器一步步构建出了寄存器，再到大型存储器，就像计算机中的很多事情，底层其实都很简单，让人难以理解的，是一层层精妙的抽象！</p><p>那么如何利用内存和上一期里的ALU 来构建一个CPU呢？</p><p>关于这个话题，我们下一期再讲~</p><p><strong>PS：本系列文章首发于同名公众号：「 三邵爷的梦呓 」，关注并回复关键字「 1024 」，你懂得！</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'计算','机学科','事儿'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../cn/%E7%A7%91%E6%8A%80/0e4338bb.html alt=计算机学科那些事儿（2）-电子计算机 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/2f4fba2f-f01b-4591-9cd7-12edf3d45e4c style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/0e4338bb.html title=计算机学科那些事儿（2）-电子计算机>计算机学科那些事儿（2）-电子计算机</a></li><hr><li><a href=../../cn/%E7%A7%91%E6%8A%80/98075b0.html alt=计算机学科那些事儿（5）-算数逻辑单元ALU class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/1af586eb-24a1-4d99-9617-9bf101f23fcd style=border-radius:25px></a>
<a href=../../cn/%E7%A7%91%E6%8A%80/98075b0.html title=计算机学科那些事儿（5）-算数逻辑单元ALU>计算机学科那些事儿（5）-算数逻辑单元ALU</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>