<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>简单五步实现 MATLAB/Simulink 锂电池建模 | 极客快訊</title><meta property="og:title" content="简单五步实现 MATLAB/Simulink 锂电池建模 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e127e2b88d334008b4004c464d54a6de"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3459bb.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3459bb.html><meta property="article:published_time" content="2020-10-29T20:51:25+08:00"><meta property="article:modified_time" content="2020-10-29T20:51:25+08:00"><meta name=Keywords content><meta name=description content="简单五步实现 MATLAB/Simulink 锂电池建模"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e3459bb.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>简单五步实现 MATLAB/Simulink 锂电池建模</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e127e2b88d334008b4004c464d54a6de><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>锂电池是目前在各个能源密集型行业中用途广泛，例如新能源汽车、电力微网、航空航天等。电池模型的建立对研究电池的特性、SOC（state-of-charge）估计、SOH（state-of-health）估计、BMS算法开发以及电池系统的快速实时仿真有重要的意义。</p><p class=ql-align-justify>等效电路建模，由于其简单适用性，常常应用在在系统级仿真和控制算法设计过程中。通过实验数据采集、等效电路模型建立和数学优化技术，用相对简单的RC等效电路可以模拟一个电芯。若干电芯模型通过不同类型的并串联方法，形成电池包模型。在电池包模型内，也可加入热电效应仿真。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3b382b0361e248b89efdc360bf953c0c><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>在上图中，10 个电芯以 10S1P 的形式形成一个电池包（此处工具为 Simscape）。蓝色的线表示电线连接，橙色的表示热交换连接。在图中电芯之间的热交换形式为热对流。</p><p class=ql-align-justify>电芯的模型为下图所示：R0 表示内阻，R1C1 表示一对 RC，左边的电压源表示开路电压（Em）。由于只有一对 RC，所以这是一阶等效电路。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a5bfa1eedf4b44e4ad0ca1371c27d1f9><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1e23877225f549eaa5b0ee589db2fc3b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>上图表明，通过在一个不断充放电的工况下的仿真，我们发现电芯 5 和电芯 6 有较高的温度，而电芯 1 和电芯 10 温度较低。原因是在串联结构中，位置处于中间的电芯散热较差，而处于边缘的电芯散热较好。</p><p class=ql-align-justify>锂电池的型号多种多样，比如镍钴锰三元材料 (NMC)、磷酸铁锂 (LFP) 等。每种电池的化学特征决定了各自不同的等效电路特征。等效电路的特征由如下两个要点决定：</p><ol><li class=ql-align-justify>RC 的阶数</li><li class=ql-align-justify>R0 、RC 和 Em 的数值</li></ol><p class=ql-align-justify>下一节中我们将讨论如何获取（估计）上述两个要点数值。</p><p class=ql-align-justify>锂电池的老化对模型的影响也是电池模型研究的方向之一。找出模型的拓扑结构和模型参数的改变趋势，对于 SOH 的估计有很强的现实意义。本文将在第四章中讨论电池老化对电池模型的影响。</p><p class=ql-align-justify>被动均衡也是电池管理系统（BMS）的研究热点之一，文末我们将给出一个被动均衡的示例供读者参考。</p><p class=ql-align-center><strong>◆ ◆ ◆ ◆</strong></p><p class=ql-align-center><strong>RC 等效电路的参数设计</strong></p><p class=ql-align-justify><strong>脉冲放电法</strong></p><p class=ql-align-justify>RC 等效电路有物理意义的前提是电路中所有 RC 对和 R0 都必须完整地“经历过”一个放电周期。 右下图所示的 RC 等效模型中，R0 表示一个放电循环中的“立即响应”，RC 对表示一个放电循环中的“滞后相应”。左下图表示脉冲放电以及开路电压（Em）的回稳过程。 可以看到，在一个脉冲放电后，电芯通过“立即相应”和“滞后响应”再静置一段时间后得到的稳定的开路电压。通常来说静置时间为 1 小时以上为佳。</p><p class=ql-align-justify>脉冲放电的一个脉冲使得 10%（一个比较合适的百分比）的 SOC 下降，静置等待开路电压回稳。此处，10% SOC 的下降为一个估计值，假设一个电池容量为 100mAH，那么我们放电 10% 即 10mAH，如果放电倍率为 1C，分 10 次放完。那么单个脉冲放电时间为 1 小时 * 10% = 6 分钟。</p><p class=ql-align-justify>如此重复多次（避免 SOC 为极限低点而损害电池），得到完整的脉冲放电曲线，我们就可以得出 RC 对、R0 和 Em 估计所需要的实验数据。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d15c4068ce8b4bf094e993cf63fbc318><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2d03260d36114f318f23273ec7a878d2><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center>在某一温度下完整的放电曲线</p><p class=ql-align-justify>由于锂电池对温度敏感，上述放电实验可以在多个温度下进行。加入温度的影响后，建模的任务就是要根据多个温度下放电数据，估计出 R0，RC 和 Em。它们在模型的表现形式均是一个二维的 Look-Up Table。</p><p class=ql-align-center><strong>R0, R1, C1, Em = f(SoC, T)</strong></p><p class=ql-align-justify><strong>电池模型参数估计的步骤</strong></p><p class=ql-align-justify><strong>步骤一：确定RC 阶数</strong></p><p class=ql-align-justify>很多人理解为，RC 阶数越多越准确。这个是错误的观点，因为过多的 RC 阶数会让数学优化过程变得计算量过大；也有可能会造成过拟合现象，即将数据中的噪声数据也拟合出来。这样的数学模型没有意义。</p><p class=ql-align-justify>正确的 RC 阶数取决于：放电静置回稳后的那段指数曲线。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f4552569fa5f40279405d8ee26d5c79a><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>由于 RC 之积 Tau 的单位为时间。线段的长度为时间。该线段的函数表达式为：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6114f112ba414964bcbe0867ab10edc0><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>如果为一个三阶函数，我们可以用 MATLAB 的曲线拟合工具箱去拟合：</p><p class=ql-align-center><strong>y = 1c - a*exp(-b*x) - d*exp(-e*x) - f*exp(-g*x)</strong></p><p class=ql-align-justify>有了这个基本思路，我们就可以从一阶开始逐步用 MATLAB 做曲线拟合，直至符合要求为止。</p><p class=ql-align-justify><strong>步骤二：构建参数估计模型（基于某一温度）</strong></p><p class=ql-align-justify>根据上一小节的原则确定模型阶数以后，我们可以用 Simulink/Simscape 来构建电芯参数估计模型。此处 C1、R1、R0、Em 都是基于 SOC 的 Look-Up Table。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f10adc159dd24358b2338070a7556a14><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/57b120786c8a44f082dc78d0a954134b><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>步骤三：参数估计和验证</strong></p><p class=ql-align-justify>参数估计的输入为某一温度下的放电数据，输出为 Em、RC、R0 等参数的 Look-Up Table（一维）。</p><p class=ql-align-justify>Simulink Design Optimization 可以根据输入数据，选择不同的算法进行参数估计，目的是仿真曲线和实验曲线误差最小。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6298fa4f37d7426ba07f3e0044fc0af7><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>参数估计有几种优化算法可选：</p><ul><li class=ql-align-justify>Gradient descent</li><li class=ql-align-justify>Non-linear least squares</li><li class=ql-align-justify>Pattern search</li><li class=ql-align-justify>Simplex search</li></ul><p class=ql-align-justify>其中 Non-linear least squares 比较常用，但容易找到非全局优化点。Pattern search 为全局优化，适合初学者。</p><p class=ql-align-justify>在参数估计结束之后，可以做实际工况数据对模型的验证工作。所谓验证就是用实际的电池运行数据（同一温度下）来校验得到的等效模型。如果误差很小，那么表示该模型真实可用。例如：下图的黄色（仿真）和紫色（实测）的数据基本一致。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/88bbda01bf6a4fb489d26d85cf896b18><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>很多人抱怨在参数估计中由于计算量过大，导致运行速度很慢，这里给出两个小技巧可显著加快估计速度：</p><ul><li class=ql-align-justify>选择并行多核加速</li><li class=ql-align-justify>打开“Fast Restart”开关</li></ul><p class=ql-align-justify><strong>步骤四：在多个温度下建立电芯模型</strong></p><p class=ql-align-justify>刚才我们的等效电路模型中，RC、R0、Em 等经过参数估计，得出的实际上是一维的 Look-Up Table（维度为SOC），那么我们可以通过设计多个温度下（例如 5、20、40 摄氏度）的：</p><ul><li class=ql-align-justify>脉冲放电实验</li><li class=ql-align-justify>参数估计</li></ul><p class=ql-align-justify>将“温度”这个纬度加入到等效电路中，最终形成二维的 Look-Up Table。即完整的具有温度和 SOC 属性的电芯模型。</p><p class=ql-align-center><strong>R0, R1, C1, Em = f(SoC, T)</strong></p><p class=ql-align-justify><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/846518898ea749fd97c4f6f2684595d5><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>步骤五：形成电池包模型</strong></p><p class=ql-align-justify>在单个电芯模型建立完成后，可通过不同的串并联线路将电芯形成电池包模型。电池包模型可以用来仿真热效应、电芯均衡或者其他应用场景。</p><p class=ql-align-center><strong>◆ ◆ ◆ ◆</strong></p><p class=ql-align-center><strong>电池老化对电池模型的影响</strong></p><p class=ql-align-justify>老化对电池的影响不可忽视，老化的影响应该被反映到电池模型。为了研究这一课题，MathWorks 和其他厂商的工程师设计了为期 13 个月的老化实验：</p><p class=ql-align-justify>为了加速老化过程，工程师选择在 40 度的温度下做 UDDS 的驾驶循环测试，每隔 15 星期记录下变化的数据，并做等效模型的建立和参数估计，试图通过这一过程发现模型拓扑和参数变化的规律。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/34866badb69c494f8353d8144668997f><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><strong>电路拓扑的变化</strong></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fd661096ff1c4b57a42aa1c4d879c147><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>0 周时候的电路拓扑</p><p class=ql-align-justify><br></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e5066a95ae014cfe8568a023693d0131><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>15、45 周时候的电路拓扑</p><p class=ql-align-justify>实验显示：在电池未老化的时候（0 周），用 3 阶等效电路模型可以反映电池特性。</p><p class=ql-align-justify>在电池老化后期，用 5 阶等效电路模型可以反映电池特性。</p><p class=ql-align-justify><strong>电池参数的变化</strong></p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf0671fa06bd4960b3c2dc2bad6c3979><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>实验显示，电池老化对等效电路参数的影响为：</p><ol><li class=ql-align-justify>开路电压不变</li><li class=ql-align-justify>R0 变化很大</li><li class=ql-align-justify>RC 对数增加</li><li class=ql-align-justify>Tau 增加（趋于稳态时间增长）</li></ol><p class=ql-align-justify>BMS 设计者如果能在控制器中建立一个内部的电池模型，通过参数规律和数值的估计，将有助于 SOH 的估计策略。</p><p class=ql-align-center><strong>◆ ◆ ◆ ◆</strong></p><p class=ql-align-center><strong>被动均衡模型示例</strong></p><p class=ql-align-justify>均衡策略是 BMS 的一部分，目前实际应用较多的是被动均衡策略。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c1fac35fa7bc43a89fdae06e5837ea80><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>上图给出了一个被动均衡的示例模型，三个电芯组成的电池包在状态机（Stateflow）的逻辑驱动下控制 MOSFET 电路开关对各个电芯进行电压均衡。</p><div class=pgc-img><img alt="简单五步实现 MATLAB/Simulink 锂电池建模" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f59c3fc0b39a4876819b7aa718576af0><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p>MathWorks 有能力为广大电池（或 BMS）企业提供各种咨询服务，咨询服务可包括：BMS 开发 MBD 咨询、电池模型建立咨询、流程改进咨询（以 ISO26262 为例）。</p><ul><li class=ql-align-justify><br></li></ul></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'简单','实现','MATLAB'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>