<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/37d9000385d3ea9c9c67"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3c80a1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3c80a1.html><meta property="article:published_time" content="2020-10-29T21:07:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:51+08:00"><meta name=Keywords content><meta name=description content="Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e3c80a1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><h1>1.Luceneå…¥é—¨</h1><p>1.1. éœ€æ±‚</p><p>å°†æ•°æ®åº“ä¸­çš„å›¾ä¹¦ä¿¡æ¯ï¼Œåˆ›å»ºä¸ºç´¢å¼•ï¼Œç„¶åå»æ ¹æ®ç´¢å¼•è¿›è¡Œæœç´¢ã€‚</p><p>1.2. Luceneå‡†å¤‡</p><p>Luceneå¯ä»¥åœ¨å®˜ç½‘ä¸Šä¸‹è½½ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯4.10.3ç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37d9000385d3ea9c9c67></p><p>è§£å‹åçš„æ•ˆæœï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37e20001a984373dd864></p><p>ä½¿ç”¨è¿™ä¸‰ä¸ªæ–‡ä»¶çš„jaråŒ…ï¼Œå°±å¯ä»¥å®ç°luceneåŠŸèƒ½</p><p>ä½¿ç”¨çš„æ•°æ®æ˜¯MySQLæ•°æ®åº“çš„æ•°æ®ï¼Œæ‰€ä»¥è¿˜éœ€è¦MySQLçš„è¿æ¥åŒ…</p><p>å¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37e00003b19d905fdc86></p><p>1.1. å¼€å‘ç¯å¢ƒ</p><p>JDKï¼š 1.7 ï¼ˆLucene4.8ä»¥ä¸Šï¼Œå¿…é¡»ä½¿ç”¨JDK1.7åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰</p><p>IDEï¼š eclipse Mars2</p><p>æ•°æ®åº“ï¼š MySQL</p><p>MySQLæ•°æ®å¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37df0003c00a79e872cc></p><p>1.1. åˆ›å»ºJavaå·¥ç¨‹</p><p>åˆ›å»ºjavaå·¥ç¨‹æµ‹è¯•å³å¯ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37d800039bf2dbcceaf6></p><p>1.1. ç´¢å¼•æµç¨‹</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37d9000389a6c9f980d7></p><p><strong>IndexWriter</strong>æ˜¯Luceneå®ç°ç´¢å¼•è¿‡ç¨‹çš„æ ¸å¿ƒç»„ä»¶ï¼Œé€šè¿‡IndexWriterå¯ä»¥åˆ›å»ºæ–°ç´¢å¼•ã€æ›´æ–°ç´¢å¼•ã€åˆ é™¤ç´¢å¼•æ“ä½œã€‚IndexWriteréœ€è¦é€šè¿‡Directoryå¯¹ç´¢å¼•è¿›è¡Œå­˜å‚¨æ“ä½œã€‚</p><p><strong>Directory</strong>æè¿°äº†ç´¢å¼•çš„å­˜å‚¨ä½ç½®ï¼Œåº•å±‚å°è£…äº†I/Oæ“ä½œï¼Œè´Ÿè´£å¯¹ç´¢å¼•è¿›è¡Œå­˜å‚¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å­ç±»å¸¸ç”¨çš„åŒ…æ‹¬</p><p>FSDirectoryï¼ˆåœ¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ç´¢å¼•ï¼‰ã€RAMDirectoryï¼ˆåœ¨å†…å­˜å­˜å‚¨ç´¢å¼•ï¼‰ã€‚</p><p>1.1.1. æ•°æ®é‡‡é›†</p><p>åœ¨ç”µå•†ç½‘ç«™ä¸­ï¼Œå…¨æ–‡æ£€ç´¢çš„æ•°æ®æºåœ¨æ•°æ®åº“ä¸­ï¼Œéœ€è¦é€šè¿‡jdbcè®¿é—®æ•°æ®åº“ä¸­bookè¡¨çš„å†…å®¹ã€‚</p><p>1.1.1.1. åˆ›å»ºpojo</p><p><strong>public</strong> <strong>class</strong> Book {</p><p>// å›¾ä¹¦ID</p><p><strong>private</strong> Integer id;</p><p>// å›¾ä¹¦åç§°</p><p><strong>private</strong> String name;</p><p>// å›¾ä¹¦ä»·æ ¼</p><p><strong>private</strong> Float price;</p><p>// å›¾ä¹¦å›¾ç‰‡</p><p><strong>private</strong> String pic;</p><p>// å›¾ä¹¦æè¿°</p><p><strong>private</strong> String description;</p><p>get/setã€‚ã€‚ã€‚</p><p>}</p><p>1.1.1.2. åˆ›å»ºDAOæ¥å£</p><p><strong>public</strong> <strong>interface</strong> BookDao {</p><p>/**</p><p>* æŸ¥è¯¢æ‰€æœ‰çš„bookæ•°æ®</p><p>* <strong>@return</strong></p><p>*/</p><p>List&lt;Book> queryBookList();</p><p>}</p><p>1.1.1.3. åˆ›å»ºDAOæ¥å£å®ç°ç±»</p><p>ä½¿ç”¨jdbcå®ç°</p><p><strong>public</strong> <strong>class</strong> BookDaoImpl <strong>implements</strong> BookDao {</p><p>@Override</p><p><strong>public</strong> List&lt;Book> queryBookList() {</p><p>// æ•°æ®åº“é“¾æ¥</p><p>Connection connection = <strong>null</strong>;</p><p>// é¢„ç¼–è¯‘statement</p><p>PreparedStatement preparedStatement = <strong>null</strong>;</p><p>// ç»“æœé›†</p><p>ResultSet resultSet = <strong>null</strong>;</p><p>// å›¾ä¹¦åˆ—è¡¨</p><p>List&lt;Book> list = <strong>new</strong> ArrayList&lt;Book>();</p><p><strong>try</strong> {</p><p>// åŠ è½½æ•°æ®åº“é©±åŠ¨</p><p>Class.forName("com.mysql.jdbc.Driver");</p><p>// è¿æ¥æ•°æ®åº“</p><p>connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/solr", "root", "root");</p><p>// SQLè¯­å¥</p><p>String sql = "SELECT * FROM book";</p><p>// åˆ›å»ºpreparedStatement</p><p>preparedStatement = connection.prepareStatement(sql);</p><p>// è·å–ç»“æœé›†</p><p>resultSet = preparedStatement.executeQuery();</p><p>// ç»“æœé›†è§£æ</p><p><strong>while</strong> (resultSet.next()) {</p><p>Book book = <strong>new</strong> Book();</p><p>book.setId(resultSet.getInt("id"));</p><p>book.setName(resultSet.getString("name"));</p><p>book.setPrice(resultSet.getFloat("price"));</p><p>book.setPic(resultSet.getString("pic"));</p><p>book.setDesc(resultSet.getString("desc"));</p><p>list.add(book);</p><p>}</p><p>} <strong>catch</strong> (Exception e) {</p><p>e.printStackTrace();</p><p>}</p><p><strong>return</strong> list;</p><p>}</p><p>}</p><p>1.1.2. å®ç°ç´¢å¼•æµç¨‹</p><p>1. é‡‡é›†æ•°æ®</p><p>2. åˆ›å»ºDocumentæ–‡æ¡£å¯¹è±¡</p><p>3. åˆ›å»ºåˆ†æå™¨ï¼ˆåˆ†è¯å™¨ï¼‰</p><p>4. åˆ›å»ºIndexWriterConfigé…ç½®ä¿¡æ¯ç±»</p><p>5. åˆ›å»ºDirectoryæµå¯¹è±¡ï¼Œå£°æ˜ç´¢å¼•åº“å­˜å‚¨ä½ç½®</p><p>6. åˆ›å»ºIndexWriterå†™å…¥å¯¹è±¡</p><p>7. æŠŠDocumentå†™å…¥åˆ°ç´¢å¼•åº“ä¸­</p><p>8. é‡Šæ”¾èµ„æº</p><p><strong>public</strong> <strong>class</strong> CreateIndexTest{</p><p>@Test</p><p><strong>public</strong> <strong>void</strong> testCreateIndex() <strong>throws</strong> Exception {</p><p>// 1. é‡‡é›†æ•°æ®</p><p>BookDao bookDao = <strong>new</strong> BookDaoImpl();</p><p>List&lt;Book> bookList = bookDao.queryBookList();</p><p>// 2. åˆ›å»ºDocumentæ–‡æ¡£å¯¹è±¡</p><p>List&lt;Document> documents = <strong>new</strong> ArrayList&lt;>();</p><p><strong>for</strong> (Book book : bookList) {</p><p>Document document = <strong>new</strong> Document();</p><p>// Documentæ–‡æ¡£ä¸­æ·»åŠ FieldåŸŸ</p><p>// å›¾ä¹¦Id</p><p>// Store.YES:è¡¨ç¤ºå­˜å‚¨åˆ°æ–‡æ¡£åŸŸä¸­</p><p>document.add(<strong>new</strong> TextField("id", book.getId().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦åç§°</p><p>document.add(<strong>new</strong> TextField("name", book.getName().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦ä»·æ ¼</p><p>document.add(<strong>new</strong> TextField("price", book.getPrice().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦å›¾ç‰‡åœ°å€</p><p>document.add(<strong>new</strong> TextField("pic", book.getPic().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦æè¿°</p><p>document.add(<strong>new</strong> TextField("desc", book.getDesc().toString(), Store.<strong>YES</strong>));</p><p>// æŠŠDocumentæ”¾åˆ°listä¸­</p><p>documents.add(document);</p><p>}</p><p>// 3. åˆ›å»ºAnalyzeråˆ†è¯å™¨,åˆ†ææ–‡æ¡£ï¼Œå¯¹æ–‡æ¡£è¿›è¡Œåˆ†è¯</p><p>Analyzer analyzer = <strong>new</strong> StandardAnalyzer();</p><p>// 4. åˆ›å»ºDirectoryå¯¹è±¡,å£°æ˜ç´¢å¼•åº“çš„ä½ç½®</p><p>Directory directory = FSDirectory.open(<strong>new</strong> File("C:/itcast/lucene/index"));</p><p>// 5. åˆ›å»ºIndexWriteConfigå¯¹è±¡ï¼Œå†™å…¥ç´¢å¼•éœ€è¦çš„é…ç½®</p><p>IndexWriterConfig config = <strong>new</strong> IndexWriterConfig(Version.<strong>LUCENE_4_10_3</strong>, analyzer);</p><p>// 6.åˆ›å»ºIndexWriterå†™å…¥å¯¹è±¡</p><p>IndexWriter indexWriter = <strong>new</strong> IndexWriter(directory, config);</p><p>// 7.å†™å…¥åˆ°ç´¢å¼•åº“ï¼Œé€šè¿‡IndexWriteræ·»åŠ æ–‡æ¡£å¯¹è±¡document</p><p><strong>for</strong> (Document doc : documents) {</p><p>indexWriter.addDocument(doc);</p><p>}</p><p>// 8.é‡Šæ”¾èµ„æº</p><p>indexWriter.close();</p><p>}</p><p>}</p><p>æ‰§è¡Œæ•ˆæœï¼š</p><p>åœ¨æ–‡ä»¶å¤¹ä¸­å‡ºç°äº†ä»¥ä¸‹æ–‡ä»¶ï¼Œè¡¨ç¤ºåˆ›å»ºç´¢å¼•æˆåŠŸ</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37e00003b3814e8a154a></p><p>1.1.1. ä½¿ç”¨LukeæŸ¥çœ‹ç´¢å¼•</p><p>Lukeä½œä¸ºLuceneå·¥å…·åŒ…ä¸­çš„ä¸€ä¸ªå·¥å…·ï¼ˆhttp://www.getopt.org/luke/ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç•Œé¢æ¥è¿›è¡Œç´¢å¼•æ–‡ä»¶çš„æŸ¥è¯¢ã€ä¿®æ”¹</p><p>lukeæ‰€åœ¨ä½ç½®å¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37df0003c1dbfa40863c></p><p>æ‰“å¼€Lukeæ–¹æ³•ï¼šæ‰“å¼€cmdå‘½ä»¤è¡Œè¿è¡Œå‘½ä»¤ï¼šjava -jar lukeall-4.10.3.jar</p><p>æ‰“å¼€åï¼Œä½¿ç”¨å¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37e20001ae0582c247b9></p><p>ä¸‹å›¾æ˜¯ç´¢å¼•åŸŸçš„å±•ç¤ºæ•ˆæœï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37e20001ae3a1d6ea0d8></p><p>ä¸‹å›¾æ˜¯æ–‡æ¡£åŸŸå±•ç¤ºæ•ˆæœ</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37d900038b177de577d9></p><p>1.1. æœç´¢æµç¨‹</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37e00003b4c267cf1451></p><p>1.1.1. è¾“å…¥æŸ¥è¯¢è¯­å¥</p><p>Luceneå¯ä»¥é€šè¿‡<strong>Query</strong><strong>å¯¹è±¡</strong>è¾“å…¥æŸ¥è¯¢è¯­å¥ã€‚åŒæ•°æ®åº“çš„sqlä¸€æ ·ï¼Œluceneä¹Ÿæœ‰å›ºå®šçš„æŸ¥è¯¢è¯­æ³•ï¼š</p><p>æœ€åŸºæœ¬çš„æœ‰æ¯”å¦‚ï¼š<strong>AND, OR, NOT</strong> ç­‰ï¼ˆå¿…é¡»å¤§å†™ï¼‰</p><p>ä¸¾ä¸ªæ —å­:</p><p>ç”¨æˆ·æƒ³æ‰¾ä¸€ä¸ªdescriptionä¸­åŒ…æ‹¬javaå…³é”®å­—å’Œluceneå…³é”®å­—çš„æ–‡æ¡£ã€‚</p><p>å®ƒå¯¹åº”çš„æŸ¥è¯¢è¯­å¥ï¼šdescription:java AND description:lucene</p><p>å¦‚ä¸‹å›¾æ˜¯ä½¿ç”¨lukeæœç´¢çš„ä¾‹å­ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37d900038baa84591b54></p><p>1.1.1. æœç´¢åˆ†è¯</p><p>å’Œç´¢å¼•è¿‡ç¨‹çš„åˆ†è¯ä¸€æ ·ï¼Œè¿™é‡Œè¦å¯¹ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—è¿›è¡Œåˆ†è¯ï¼Œä¸€èˆ¬æƒ…å†µ<strong>ç´¢å¼•å’Œæœç´¢ä½¿ç”¨çš„åˆ†è¯å™¨ä¸€è‡´</strong>ã€‚</p><p>æ¯”å¦‚ï¼šè¾“å…¥æœç´¢å…³é”®å­—â€œjavaå­¦ä¹ â€ï¼Œåˆ†è¯åä¸ºjavaå’Œå­¦ä¹ ä¸¤ä¸ªè¯ï¼Œä¸javaå’Œå­¦ä¹ æœ‰å…³çš„å†…å®¹éƒ½æœç´¢å‡ºæ¥äº†ï¼Œå¦‚ä¸‹ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37d8000396a3acbac978></p><p>1.1.1. ä»£ç å®ç°</p><p>1. åˆ›å»ºQueryæœç´¢å¯¹è±¡</p><p>2. åˆ›å»ºDirectoryæµå¯¹è±¡,å£°æ˜ç´¢å¼•åº“ä½ç½®</p><p>3. åˆ›å»ºç´¢å¼•è¯»å–å¯¹è±¡IndexReader</p><p>4. åˆ›å»ºç´¢å¼•æœç´¢å¯¹è±¡IndexSearcher</p><p>5. ä½¿ç”¨ç´¢å¼•æœç´¢å¯¹è±¡ï¼Œæ‰§è¡Œæœç´¢ï¼Œè¿”å›ç»“æœé›†TopDocs</p><p>6. è§£æç»“æœé›†</p><p>7. é‡Šæ”¾èµ„æº</p><p>IndexSearcheræœç´¢æ–¹æ³•å¦‚ä¸‹ï¼š</p><table><tbody><tr class=firstRow><td><p>æ–¹æ³•</p></td><td><p>è¯´æ˜</p></td></tr><tr><td><p>indexSearcher.search(query, n)</p></td><td><p>æ ¹æ®Queryæœç´¢ï¼Œè¿”å›è¯„åˆ†æœ€é«˜çš„næ¡è®°å½•</p></td></tr><tr><td><p>indexSearcher.search(query, filter, n)</p></td><td><p>æ ¹æ®Queryæœç´¢ï¼Œæ·»åŠ è¿‡æ»¤ç­–ç•¥ï¼Œè¿”å›è¯„åˆ†æœ€é«˜çš„næ¡è®°å½•</p></td></tr><tr><td><p>indexSearcher.search(query, n, sort)</p></td><td><p>æ ¹æ®Queryæœç´¢ï¼Œæ·»åŠ æ’åºç­–ç•¥ï¼Œè¿”å›è¯„åˆ†æœ€é«˜çš„næ¡è®°å½•</p></td></tr><tr><td><p>indexSearcher.search(booleanQuery, filter, n, sort)</p></td><td><p>æ ¹æ®Queryæœç´¢ï¼Œæ·»åŠ è¿‡æ»¤ç­–ç•¥ï¼Œæ·»åŠ æ’åºç­–ç•¥ï¼Œè¿”å›è¯„åˆ†æœ€é«˜çš„næ¡è®°å½•</p></td></tr></tbody></table><p>ä»£ç å®ç°</p><p>public class SearchIndexTest {</p><p>@Test</p><p>public void testSearchIndex() throws Exception {</p><p>// 1. åˆ›å»ºQueryæœç´¢å¯¹è±¡</p><p>// åˆ›å»ºåˆ†è¯å™¨</p><p>Analyzer analyzer = new StandardAnalyzer();</p><p>// åˆ›å»ºæœç´¢è§£æå™¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼šé»˜è®¤FieldåŸŸï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šåˆ†è¯å™¨</p><p>QueryParser queryParser = new QueryParser("description", analyzer);</p><p>// åˆ›å»ºæœç´¢å¯¹è±¡</p><p>Query query = queryParser.parse("description:java AND lucene");</p><p>// 2. åˆ›å»ºDirectoryæµå¯¹è±¡,å£°æ˜ç´¢å¼•åº“ä½ç½®</p><p>Directory directory = FSDirectory.open(new File("C:/itcast/lucene/index"));</p><p>// 3. åˆ›å»ºç´¢å¼•è¯»å–å¯¹è±¡IndexReader</p><p>IndexReader reader = DirectoryReader.open(directory);</p><p>// 4. åˆ›å»ºç´¢å¼•æœç´¢å¯¹è±¡</p><p>IndexSearcher searcher = new IndexSearcher(reader);</p><p>// 5. ä½¿ç”¨ç´¢å¼•æœç´¢å¯¹è±¡ï¼Œæ‰§è¡Œæœç´¢ï¼Œè¿”å›ç»“æœé›†TopDocs</p><p>// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæœç´¢å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šè¿”å›çš„æ•°æ®æ¡æ•°ï¼ŒæŒ‡å®šæŸ¥è¯¢ç»“æœæœ€é¡¶éƒ¨çš„næ¡æ•°æ®è¿”å›</p><p>TopDocs topDocs = searcher.search(query, 10);</p><p>System.out.println("æŸ¥è¯¢åˆ°çš„æ•°æ®æ€»æ¡æ•°æ˜¯ï¼š" + topDocs.totalHits);</p><p>// è·å–æŸ¥è¯¢ç»“æœé›†</p><p>ScoreDoc[] docs = topDocs.scoreDocs;</p><p>// 6. è§£æç»“æœé›†</p><p>for (ScoreDoc scoreDoc : docs) {</p><p>// è·å–æ–‡æ¡£</p><p>int docID = scoreDoc.doc;</p><p>Document doc = searcher.doc(docID);</p><p>System.out.println("=============================");</p><p>System.out.println("docID:" + docID);</p><p>System.out.println("bookId:" + doc.get("id"));</p><p>System.out.println("name:" + doc.get("name"));</p><p>System.out.println("price:" + doc.get("price"));</p><p>System.out.println("pic:" + doc.get("pic"));</p><p>// System.out.println("description:" + doc.get("description"));</p><p>}</p><p>// 7. é‡Šæ”¾èµ„æº</p><p>reader.close();</p><p>}</p><p>}</p><h1>1.åˆ†è¯å™¨</h1><p>1.1. åˆ†è¯ç†è§£</p><p>åœ¨å¯¹Docuemntä¸­çš„å†…å®¹è¿›è¡Œç´¢å¼•ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨åˆ†è¯å™¨è¿›è¡Œåˆ†è¯ ï¼Œåˆ†è¯çš„ç›®çš„æ˜¯ä¸ºäº†æœç´¢ã€‚åˆ†è¯çš„ä¸»è¦è¿‡ç¨‹å°±æ˜¯å…ˆåˆ†è¯åè¿‡æ»¤ã€‚</p><p>låˆ†è¯ï¼šé‡‡é›†åˆ°çš„æ•°æ®ä¼šå­˜å‚¨åˆ°documentå¯¹è±¡çš„FieldåŸŸä¸­ï¼Œåˆ†è¯å°±æ˜¯å°†Documentä¸­Fieldçš„å€¼åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„è¯ã€‚</p><p>lè¿‡æ»¤ï¼šåŒ…æ‹¬å»é™¤æ ‡ç‚¹ç¬¦å·è¿‡æ»¤ã€å»é™¤åœç”¨è¯è¿‡æ»¤ï¼ˆçš„ã€æ˜¯ã€aã€anã€theç­‰ï¼‰ã€å¤§å†™è½¬å°å†™ã€è¯çš„å½¢è¿˜åŸï¼ˆå¤æ•°å½¢å¼è½¬æˆå•æ•°å½¢å‚ã€è¿‡å»å¼è½¬æˆç°åœ¨å¼ã€‚ã€‚ã€‚ï¼‰ç­‰ã€‚</p><p>ä»€ä¹ˆæ˜¯åœç”¨è¯ï¼Ÿåœç”¨è¯æ˜¯ä¸ºèŠ‚çœå­˜å‚¨ç©ºé—´å’Œæé«˜æœç´¢æ•ˆç‡ï¼Œæœç´¢å¼•æ“åœ¨ç´¢å¼•é¡µé¢æˆ–å¤„ç†æœç´¢è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨å¿½ç•¥æŸäº›å­—æˆ–è¯ï¼Œè¿™äº›å­—æˆ–è¯å³è¢«ç§°ä¸ºStop Words(åœç”¨è¯)ã€‚æ¯”å¦‚è¯­æ°”åŠ©è¯ã€å‰¯è¯ã€ä»‹è¯ã€è¿æ¥è¯ç­‰ï¼Œé€šå¸¸è‡ªèº«å¹¶æ— æ˜ç¡®çš„æ„ä¹‰ï¼Œåªæœ‰å°†å…¶æ”¾å…¥ä¸€ä¸ªå®Œæ•´çš„å¥å­ä¸­æ‰æœ‰ä¸€å®šä½œç”¨ï¼Œå¦‚å¸¸è§çš„â€œçš„â€ã€â€œåœ¨â€ã€â€œæ˜¯â€ã€â€œå•Šâ€ç­‰ã€‚</p><p>å¯¹äºåˆ†è¯æ¥è¯´ï¼Œä¸åŒçš„è¯­è¨€ï¼Œåˆ†è¯è§„åˆ™ä¸åŒã€‚Luceneä½œä¸ºä¸€ä¸ªå·¥å…·åŒ…æä¾›ä¸åŒå›½å®¶çš„åˆ†è¯å™¨ï¼Œæœ¬ä¾‹å­ä½¿ç”¨StandardAnalyzerï¼Œå®ƒå¯ä»¥å¯¹ç”¨è‹±æ–‡è¿›è¡Œåˆ†è¯ã€‚</p><p>å¦‚ä¸‹æ˜¯org.apache.lucene.analysis.standard.standardAnalyzerçš„éƒ¨åˆ†æºç ï¼š</p><p>@Override</p><p><strong>protected</strong> TokenStreamComponents createComponents(<strong>final</strong> String fieldName, <strong>final</strong> Reader reader) {</p><p><strong>final</strong> StandardTokenizer src = <strong>new</strong> StandardTokenizer(getVersion(), reader);</p><p>src.setMaxTokenLength(maxTokenLength);</p><p>TokenStream tok = <strong>new</strong> StandardFilter(getVersion(), src);</p><p>tok = <strong>new</strong> LowerCaseFilter(getVersion(), tok);</p><p>tok = <strong>new</strong> StopFilter(getVersion(), tok, stopwords);</p><p><strong>return</strong> <strong>new</strong> TokenStreamComponents(src, tok) {</p><p>@Override</p><p><strong>protected</strong> <strong>void</strong> setReader(<strong>final</strong> Reader reader) <strong>throws</strong> IOException {</p><p>src.setMaxTokenLength(StandardAnalyzer.<strong>this</strong>.maxTokenLength);</p><p><strong>super</strong>.setReader(reader);</p><p>}</p><p>};</p><p>}</p><p>Tokenizerå°±æ˜¯åˆ†è¯å™¨ï¼Œè´Ÿè´£å°†readerè½¬æ¢ä¸ºè¯­æ±‡å•å…ƒå³è¿›è¡Œåˆ†è¯å¤„ç†ï¼ŒLuceneæä¾›äº†å¾ˆå¤šçš„åˆ†è¯å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åˆ†è¯ï¼Œæ¯”å¦‚IKAnalyzerä¸€ä¸ªä¸­æ–‡åˆ†è¯å™¨ã€‚</p><p>TokenFilteræ˜¯åˆ†è¯è¿‡æ»¤å™¨ï¼Œè´Ÿè´£å¯¹è¯­æ±‡å•å…ƒè¿›è¡Œè¿‡æ»¤ï¼ŒTokenFilterå¯ä»¥æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾å„¿ï¼ŒLuceneæä¾›äº†å¾ˆå¤šçš„åˆ†è¯å™¨è¿‡æ»¤å™¨ï¼Œæ¯”å¦‚å¤§å°å†™è½¬æ¢ã€å»é™¤åœç”¨è¯ç­‰ã€‚</p><p>å¦‚ä¸‹å›¾æ˜¯è¯­æ±‡å•å…ƒçš„ç”Ÿæˆè¿‡ç¨‹ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37d8000396fd8b94798b></p><p>ä»ä¸€ä¸ªReaderå­—ç¬¦æµå¼€å§‹ï¼Œåˆ›å»ºä¸€ä¸ªåŸºäºReaderçš„Tokenizeråˆ†è¯å™¨ï¼Œç»è¿‡ä¸‰ä¸ªTokenFilterç”Ÿæˆè¯­æ±‡å•å…ƒTokenã€‚</p><p>æ¯”å¦‚ä¸‹è¾¹çš„æ–‡æ¡£ç»è¿‡åˆ†æå™¨åˆ†æå¦‚ä¸‹ï¼š</p><p>Ã˜åŸæ–‡æ¡£å†…å®¹ï¼š</p><table><tbody><tr class=firstRow><td><p>Lucene is a Java full-text search engine.</p></td></tr></tbody></table><p>Ã˜åˆ†æåå¾—åˆ°çš„å¤šä¸ªè¯­æ±‡å•å…ƒï¼š</p><table><tbody><tr class=firstRow><td><p>lucene ã€javaã€fullã€textã€searchã€engine</p></td></tr></tbody></table><p>1.1. Analyzerä½¿ç”¨æ—¶æœº</p><p>1.1.1. ç´¢å¼•æ—¶ä½¿ç”¨Analyzer</p><p>è¾“å…¥å…³é”®å­—è¿›è¡Œæœç´¢ï¼Œå½“éœ€è¦è®©è¯¥å…³é”®å­—ä¸æ–‡æ¡£åŸŸå†…å®¹æ‰€åŒ…å«çš„è¯è¿›è¡ŒåŒ¹é…æ—¶éœ€è¦å¯¹æ–‡æ¡£åŸŸå†…å®¹è¿›è¡Œåˆ†æï¼Œéœ€è¦ç»è¿‡Analyzeråˆ†æå™¨å¤„ç†ç”Ÿæˆè¯­æ±‡å•å…ƒï¼ˆTokenï¼‰ã€‚åˆ†æå™¨åˆ†æçš„å¯¹è±¡æ˜¯æ–‡æ¡£ä¸­çš„FieldåŸŸã€‚å½“Fieldçš„å±æ€§tokenizedï¼ˆæ˜¯å¦åˆ†è¯ï¼‰ä¸ºtrueæ—¶ä¼šå¯¹Fieldå€¼è¿›è¡Œåˆ†æï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37df0003c40ee07cfe18></p><p>å¯¹äºä¸€äº›Fieldå¯ä»¥ä¸ç”¨åˆ†æï¼š</p><p>1ã€ä¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å†…å®¹ï¼Œæ¯”å¦‚æ–‡ä»¶è·¯å¾„</p><p>2ã€ä¸æ˜¯åŒ¹é…å†…å®¹ä¸­çš„è¯è€ŒåŒ¹é…Fieldçš„æ•´ä½“å†…å®¹ï¼Œæ¯”å¦‚è®¢å•å·ã€èº«ä»½è¯å·ç­‰ã€‚</p><p>1.1.1. æœç´¢æ—¶ä½¿ç”¨Analyzer</p><p>å¯¹æœç´¢å…³é”®å­—è¿›è¡Œåˆ†æå’Œç´¢å¼•åˆ†æä¸€æ ·ï¼Œä½¿ç”¨Analyzerå¯¹æœç´¢å…³é”®å­—è¿›è¡Œåˆ†æã€åˆ†è¯å¤„ç†ï¼Œä½¿ç”¨åˆ†æåæ¯ä¸ªè¯è¯­è¿›è¡Œæœç´¢ã€‚æ¯”å¦‚ï¼šæœç´¢å…³é”®å­—ï¼šspring web ï¼Œç»è¿‡åˆ†æå™¨è¿›è¡Œåˆ†è¯ï¼Œå¾—å‡ºï¼šspring webæ‹¿è¯å»ç´¢å¼•è¯å…¸è¡¨æŸ¥æ‰¾ ï¼Œæ‰¾åˆ°ç´¢å¼•é“¾æ¥åˆ°Documentï¼Œè§£æDocumentå†…å®¹ã€‚</p><p>å¯¹äºåŒ¹é…æ•´ä½“FieldåŸŸçš„æŸ¥è¯¢å¯ä»¥åœ¨æœç´¢æ—¶ä¸åˆ†æï¼Œæ¯”å¦‚æ ¹æ®è®¢å•å·ã€èº«ä»½è¯å·æŸ¥è¯¢ç­‰ã€‚</p><p><strong></strong><strong>æ³¨æ„ï¼šæœç´¢ä½¿ç”¨çš„åˆ†æå™¨è¦å’Œç´¢å¼•ä½¿ç”¨çš„åˆ†æå™¨ä¸€è‡´ã€‚</strong></p><p>1.2. ä¸­æ–‡åˆ†è¯å™¨</p><p>1.2.1. ä»€ä¹ˆæ˜¯ä¸­æ–‡åˆ†è¯å™¨</p><p>å­¦è¿‡è‹±æ–‡çš„éƒ½çŸ¥é“ï¼Œè‹±æ–‡æ˜¯ä»¥å•è¯ä¸ºå•ä½çš„ï¼Œå•è¯ä¸å•è¯ä¹‹é—´ä»¥ç©ºæ ¼æˆ–è€…é€—å·å¥å·éš”å¼€ã€‚æ‰€ä»¥å¯¹äºè‹±æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ä»¥ç©ºæ ¼åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚I love Chinaï¼Œlove å’Œ Chinaå¾ˆå®¹æ˜“è¢«ç¨‹åºåŒºåˆ†å¼€æ¥ã€‚</p><p>è€Œä¸­æ–‡åˆ™ä»¥å­—ä¸ºå•ä½ï¼Œå­—åˆç»„æˆè¯ï¼Œå­—å’Œè¯å†ç»„æˆå¥å­ã€‚ä¸­æ–‡â€œæˆ‘çˆ±ä¸­å›½â€å°±ä¸ä¸€æ ·äº†ï¼Œç”µè„‘ä¸çŸ¥é“â€œä¸­å›½â€æ˜¯ä¸€ä¸ªè¯è¯­è¿˜æ˜¯â€œçˆ±ä¸­â€æ˜¯ä¸€ä¸ªè¯è¯­ã€‚</p><p><strong>æŠŠä¸­æ–‡çš„å¥å­åˆ‡åˆ†æˆæœ‰æ„ä¹‰çš„è¯ï¼Œå°±æ˜¯ä¸­æ–‡åˆ†è¯ï¼Œä¹Ÿç§°åˆ‡è¯</strong>ã€‚æˆ‘çˆ±ä¸­å›½ï¼Œåˆ†è¯çš„ç»“æœæ˜¯ï¼šæˆ‘ã€çˆ±ã€ä¸­å›½ã€‚</p><p>1.2.2. Luceneè‡ªå¸¦ä¸­æ–‡åˆ†è¯å™¨</p><p>lStandardAnalyzerï¼š</p><p>å•å­—åˆ†è¯ï¼šå°±æ˜¯æŒ‰ç…§ä¸­æ–‡ä¸€ä¸ªå­—ä¸€ä¸ªå­—åœ°è¿›è¡Œåˆ†è¯ã€‚å¦‚ï¼šâ€œæˆ‘çˆ±ä¸­å›½â€ï¼Œ</p><p>æ•ˆæœï¼šâ€œæˆ‘â€ã€â€œçˆ±â€ã€â€œä¸­â€ã€â€œå›½â€ã€‚</p><p>lCJKAnalyzer</p><p>äºŒåˆ†æ³•åˆ†è¯ï¼šæŒ‰ä¸¤ä¸ªå­—è¿›è¡Œåˆ‡åˆ†ã€‚å¦‚ï¼šâ€œæˆ‘æ˜¯ä¸­å›½äººâ€ï¼Œæ•ˆæœï¼šâ€œæˆ‘æ˜¯â€ã€â€œæ˜¯ä¸­â€ã€â€œä¸­å›½â€â€œå›½äººâ€ã€‚</p><p>ä¸Šè¾¹ä¸¤ä¸ªåˆ†è¯å™¨æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚</p><p>lSmartChineseAnalyzer</p><p>å¯¹ä¸­æ–‡æ”¯æŒè¾ƒå¥½ï¼Œä½†æ‰©å±•æ€§å·®ï¼Œæ‰©å±•è¯åº“ï¼Œç¦ç”¨è¯åº“å’ŒåŒä¹‰è¯åº“ç­‰ä¸å¥½å¤„ç†</p><p>1.3. ç¬¬ä¸‰æ–¹ä¸­æ–‡åˆ†è¯å™¨</p><p>lpaodingï¼š åº–ä¸è§£ç‰›æœ€æ–°ç‰ˆåœ¨ https://code.google.com/p/paoding/ ä¸­æœ€å¤šæ”¯æŒLucene 3.0ï¼Œä¸”æœ€æ–°æäº¤çš„ä»£ç åœ¨ 2008-06-03ï¼Œåœ¨svnä¸­æœ€æ–°ä¹Ÿæ˜¯2010å¹´æäº¤ï¼Œå·²ç»è¿‡æ—¶ï¼Œä¸äºˆè€ƒè™‘ã€‚</p><p>lmmseg4jï¼šæœ€æ–°ç‰ˆå·²ä» https://code.google.com/p/mmseg4j/ ç§»è‡³ https://github.com/chenlb/mmseg4j-solrï¼Œæ”¯æŒLucene 4.10ï¼Œä¸”åœ¨githubä¸­æœ€æ–°æäº¤ä»£ç æ˜¯2014å¹´6æœˆï¼Œä»09å¹´ï½14å¹´ä¸€å…±æœ‰ï¼š18ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´å‡ ä¹æœ‰3ä¸ªå¤§å°ç‰ˆæœ¬ï¼Œæœ‰è¾ƒå¤§çš„æ´»è·ƒåº¦ï¼Œç”¨äº†mmsegç®—æ³•ã€‚</p><p>l<strong>IK-analyzer</strong>ï¼š æœ€æ–°ç‰ˆåœ¨https://code.google.com/p/ik-analyzer/ä¸Šï¼Œæ”¯æŒLucene 4.10ä»2006å¹´12æœˆæ¨å‡º1.0ç‰ˆå¼€å§‹ï¼Œ IKAnalyzerå·²ç»æ¨å‡ºäº†4ä¸ªå¤§ç‰ˆæœ¬ã€‚æœ€åˆï¼Œå®ƒæ˜¯ä»¥å¼€æºé¡¹ç›®Luenceä¸ºåº”ç”¨ä¸»ä½“çš„ï¼Œç»“åˆè¯å…¸åˆ†è¯å’Œæ–‡æ³•åˆ†æç®—æ³•çš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ã€‚ä»3.0ç‰ˆæœ¬å¼€ å§‹ï¼ŒIKå‘å±•ä¸ºé¢å‘Javaçš„å…¬ç”¨åˆ†è¯ç»„ä»¶ï¼Œç‹¬ç«‹äºLuceneé¡¹ç›®ï¼ŒåŒæ—¶æä¾›äº†å¯¹Luceneçš„é»˜è®¤ä¼˜åŒ–å®ç°ã€‚åœ¨2012ç‰ˆæœ¬ä¸­ï¼ŒIKå®ç°äº†ç®€å•çš„åˆ†è¯ æ­§ä¹‰æ’é™¤ç®—æ³•ï¼Œæ ‡å¿—ç€IKåˆ†è¯å™¨ä»å•çº¯çš„è¯å…¸åˆ†è¯å‘æ¨¡æ‹Ÿè¯­ä¹‰åˆ†è¯è¡åŒ–ã€‚ ä½†æ˜¯ä¹Ÿå°±æ˜¯2012å¹´12æœˆåæ²¡æœ‰åœ¨æ›´æ–°ã€‚</p><p>lansj_segï¼šæœ€æ–°ç‰ˆæœ¬åœ¨ https://github.com/NLPchina/ansj_seg tagsä»…æœ‰1.1ç‰ˆæœ¬ï¼Œä»2012å¹´åˆ°2014å¹´æ›´æ–°äº†å¤§å°6æ¬¡ï¼Œä½†æ˜¯ä½œè€…æœ¬äººåœ¨2014å¹´10æœˆ10æ—¥è¯´æ˜ï¼šâ€œå¯èƒ½æˆ‘ä»¥åæ²¡æœ‰ç²¾åŠ›æ¥ç»´æŠ¤ansj_segäº†â€ï¼Œç°åœ¨ç”±â€nlp_chinaâ€ç®¡ç†ã€‚2014å¹´11æœˆæœ‰æ›´æ–°ã€‚å¹¶æœªè¯´æ˜æ˜¯å¦æ”¯æŒLuceneï¼Œæ˜¯ä¸€ä¸ªç”±CRFï¼ˆæ¡ä»¶éšæœºåœºï¼‰ç®—æ³•æ‰€åšçš„åˆ†è¯ç®—æ³•ã€‚</p><p>limdict-chinese-analyzerï¼šæœ€æ–°ç‰ˆåœ¨ https://code.google.com/p/imdict-chinese-analyzer/ ï¼Œ æœ€æ–°æ›´æ–°ä¹Ÿåœ¨2009å¹´5æœˆï¼Œä¸‹è½½æºç ï¼Œä¸æ”¯æŒLucene 4.10 ã€‚æ˜¯åˆ©ç”¨HMMï¼ˆéšé©¬å°”ç§‘å¤«é“¾ï¼‰ç®—æ³•ã€‚</p><p>lJcsegï¼šæœ€æ–°ç‰ˆæœ¬åœ¨git.oschina.net/lionsoul/jcsegï¼Œæ”¯æŒLucene 4.10ï¼Œä½œè€…æœ‰è¾ƒé«˜çš„æ´»è·ƒåº¦ã€‚åˆ©ç”¨mmsegç®—æ³•ã€‚</p><p>1.4. ä½¿ç”¨ä¸­æ–‡åˆ†è¯å™¨IKAnalyzer</p><p>IKAnalyzerç»§æ‰¿Luceneçš„AnalyzeræŠ½è±¡ç±»ï¼Œä½¿ç”¨IKAnalyzerå’ŒLuceneè‡ªå¸¦çš„åˆ†æå™¨æ–¹æ³•ä¸€æ ·ï¼Œå°†Analyzeræµ‹è¯•ä»£ç æ”¹ä¸ºIKAnalyzeræµ‹è¯•ä¸­æ–‡åˆ†è¯æ•ˆæœã€‚</p><p>å¦‚æœä½¿ç”¨ä¸­æ–‡åˆ†è¯å™¨ik-analyzerï¼Œå°±éœ€è¦åœ¨ç´¢å¼•å’Œæœç´¢ç¨‹åºä¸­ä½¿ç”¨ä¸€è‡´çš„åˆ†è¯å™¨ï¼šIK-analyzerã€‚</p><p>1.4.1. æ·»åŠ jaråŒ…</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37df0003c44d3d172f9c></p><p>1.1.1. ä¿®æ”¹åˆ†è¯å™¨ä»£ç </p><p>@Test</p><p><strong>public</strong> <strong>void</strong> testCreateIndex() <strong>throws</strong> Exception {</p><p>// 1. é‡‡é›†æ•°æ®</p><p>BookDao bookDao = <strong>new</strong> BookDaoImpl();</p><p>List&lt;Book> bookList = bookDao.queryBookList();</p><p>// 2. åˆ›å»ºDocumentæ–‡æ¡£å¯¹è±¡</p><p>List&lt;Document> documents = <strong>new</strong> ArrayList&lt;>();</p><p><strong>for</strong> (Book book : bookList) {</p><p>Document document = <strong>new</strong> Document();</p><p>// Documentæ–‡æ¡£ä¸­æ·»åŠ FieldåŸŸ</p><p>// å›¾ä¹¦Id</p><p>// Store.YES:è¡¨ç¤ºå­˜å‚¨åˆ°æ–‡æ¡£åŸŸä¸­</p><p>document.add(<strong>new</strong> TextField("id", book.getId().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦åç§°</p><p>document.add(<strong>new</strong> TextField("name", book.getName().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦ä»·æ ¼</p><p>document.add(<strong>new</strong> TextField("price", book.getPrice().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦å›¾ç‰‡åœ°å€</p><p>document.add(<strong>new</strong> TextField("pic", book.getPic().toString(), Store.<strong>YES</strong>));</p><p>// å›¾ä¹¦æè¿°</p><p>document.add(<strong>new</strong> TextField("description", book.getDescription().toString(), Store.<strong>YES</strong>));</p><p>// æŠŠDocumentæ”¾åˆ°listä¸­</p><p>documents.add(document);</p><p>}</p><p>// 3. åˆ›å»ºAnalyzeråˆ†è¯å™¨,åˆ†ææ–‡æ¡£ï¼Œå¯¹æ–‡æ¡£è¿›è¡Œåˆ†è¯</p><p>// Analyzer analyzer = new StandardAnalyzer();</p><p>Analyzer analyzer = <strong>new</strong> IKAnalyzer();</p><p>// 4. åˆ›å»ºDirectoryå¯¹è±¡,å£°æ˜ç´¢å¼•åº“çš„ä½ç½®</p><p>Directory directory = FSDirectory.open(<strong>new</strong> File("C:/itcast/lucene/index"));</p><p>// 5. åˆ›å»ºIndexWriteConfigå¯¹è±¡ï¼Œå†™å…¥ç´¢å¼•éœ€è¦çš„é…ç½®</p><p>IndexWriterConfig config = <strong>new</strong> IndexWriterConfig(Version.<strong>LUCENE_4_10_3</strong>, analyzer);</p><p>// 6.åˆ›å»ºIndexWriterå†™å…¥å¯¹è±¡</p><p>IndexWriter indexWriter = <strong>new</strong> IndexWriter(directory, config);</p><p>// 7.å†™å…¥åˆ°ç´¢å¼•åº“ï¼Œé€šè¿‡IndexWriteræ·»åŠ æ–‡æ¡£å¯¹è±¡document</p><p><strong>for</strong> (Document doc : documents) {</p><p>indexWriter.addDocument(doc);</p><p>}</p><p>// 8.é‡Šæ”¾èµ„æº</p><p>indexWriter.close();</p><p>}</p><p>1.2. æ‰©å±•ä¸­æ–‡è¯åº“</p><p>å¦‚æœæƒ³é…ç½®æ‰©å±•è¯å’Œåœç”¨è¯ï¼Œå°±åˆ›å»ºæ‰©å±•è¯çš„æ–‡ä»¶å’Œåœç”¨è¯çš„æ–‡ä»¶ã€‚</p><p>æ³¨æ„ï¼šä¸è¦ç”¨windowè‡ªå¸¦çš„è®°äº‹æœ¬ä¿å­˜æ‰©å±•è¯æ–‡ä»¶å’Œåœç”¨è¯æ–‡ä»¶ï¼Œé‚£æ ·çš„è¯ï¼Œæ ¼å¼ä¸­æ˜¯å«æœ‰bomçš„ã€‚</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37dd0001db20abeceb0e></p><p>ä»ikanalyzeråŒ…ä¸­æ‹·è´é…ç½®æ–‡ä»¶</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37df0003c5003936cc5a></p><p>æ‹·è´åˆ°èµ„æºæ–‡ä»¶å¤¹ä¸­</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37d900038e2c5f8d9993></p><p>IKAnalyzer.cfg.xmlé…ç½®æ–‡ä»¶</p><p>&lt;?xml version="1.0" encoding="UTF-8"?></p><p>&lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"></p><p>&lt;properties></p><p>&lt;comment>IK Analyzer æ‰©å±•é…ç½®&lt;/comment></p><p>&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸ --></p><p>&lt;entry key="ext_dict">ext.dic;&lt;/entry></p><p>&lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•åœæ­¢è¯å­—å…¸--></p><p>&lt;entry key="ext_stopwords">stopword.dic;&lt;/entry></p><p>&lt;/properties></p><p>ä¸­æ–‡è¯åº“ï¼Œæ·»åŠ æ–°è¯çš„åœ°æ–¹</p><p>æœ€ç»ˆåˆ†è¯æ•ˆæœ</p><p><img alt=Luceneï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰è¿›é˜¶-ç¬¬äºŒç¯‡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37d800039a7c1c7bb4c7></p><p>æŒç»­å‘å¸ƒä¸­ï¼Œæ•¬è¯·å…³æ³¨ã€‚å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿äº¤æµæŒ‡æ­£ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Lucene','æ£€ç´¢','è¿›é˜¶'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>