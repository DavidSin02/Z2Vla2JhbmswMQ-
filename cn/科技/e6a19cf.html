<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>I2C串行总线的组成及工作原理 | 极客快訊</title><meta property="og:title" content="I2C串行总线的组成及工作原理 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/5b410003295ac5e47c78"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6a19cf.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6a19cf.html><meta property="article:published_time" content="2020-10-29T21:05:51+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:51+08:00"><meta name=Keywords content><meta name=description content="I2C串行总线的组成及工作原理"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e6a19cf.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>I2C串行总线的组成及工作原理</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=I2C串行总线的组成及工作原理 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/5b410003295ac5e47c78></p><p>常用的串行扩展总线：I2C总线、单总线、SPI总线等。I2C串行总线的概述。<br></p><p>I2C总线是PHLips公司推出的一种串行总线，是具备多主机系统所需的包括总线裁决和高低速器件同步功能的高性能串行总线。</p><p>I2C总线只有两根双向信号线：分别是：数据线SDA；时钟线SCL，I2C总线通过上拉电阻接正电源，当总线空闲时，两根线均为高电平，连到总线上的任一器件输出的低电平都将使总线的信号变低，即各器件的SDA及SCL都实现“与”的关系，即“与逻辑”。通常内置有I2C总线的的器件的引脚都是开漏输出引脚，空闲时通过上拉电阻（通常为10K）接正电源，把SDA和SCL拉高，保证数据的稳定。每个接到I2C总线上的器件都有唯一的地址，主机与其它器件间的数据传送可以是有主机发送数据到其它，这时，主机为发送器，由总线上接收数据的器件为接收器。</p><p>在多个主机系统中，可能同时有几个主机企图启动总线传送数据，为了避免混乱，I2C总线要通过总线仲裁，以决定由哪一台主机控制总线。在STM32单片机应用系统的串行总线扩展中，我们经常遇到的是以STM32单片机为主机，其它接口器件为从机的单主机的情况。</p><p>I2C总线的数据传送：</p><p>（一）、数据位的有效性规定</p><p>I2C总线进行数据传送时，时钟线信号为高电平期间，数据线上的数据必须保持稳定，只有在时钟线上的信号为低电平期间，数据线上的高电平或低电平状态才允许变化。</p><p>（一）、起始信号和终止信号</p><p>起始信号：SCL线为高电平期间，SDA线由高电平向低电平的变化（即下降沿）表示起始信号。</p><p>终止信号：SCL线为高电平期间，SDA线由低电平向高电平的变化（即上升沿）表示终止信号。</p><p>起始信号和终止信号都是有主机发出的，在起始信号产生后，总线就处于被占用状态；在终止信号产生后，总线就处于空闲状态。</p><p>连接到I2C总线上的器件，若具有I2C总线的硬件接口，则很容易检测到起始信号和终止信号；对于不具备I2C总线硬件接口的有些单片机来说，为了检测起始信号和终止信号，必须保证在每个时钟周期内对数据线SDA采样两次。</p><p>接收器件接收到一个完整的数据字节后，有可能需要完成一些其他的工作，如处理内部终端服务，等等，可能无法立即接收下一个字节，这时接收器件可以将SCL线拉成低电平，从而使主机处于等待状态，直到接收器件准备好接收下一个字节时，再释放SCL线为高电平，从而使数据传送可以继续进行。</p><p>I2C总线的寻址：</p><p>I2C总线的协议有明确的规定，采用7位的寻址字节（寻址字节是起始信号后的第一个字节）。</p><p>1. 寻址字节的位定义</p><table><tbody><tr class=firstRow><td><p>从机地址</p></td><td><p>R/W<span>位：7 6 5 4 3 2 1 0</span></p></td></tr></tbody></table><p><br>D7~D1位组成从机的地址，D0位表示数据传送方向，D0位为‘0’时表示主机向从机写数据，为‘1’时表示主机向从机读数据</p><p>数据帧格式：</p><p>I2C上传送的数据是广义的，既包括地址信号，又包括真正的数据信号。</p><p>在起始信号后必须传送一个从机的地址（7位），第8位是数据传送方向位（R/W），用‘0’表示主机发送数据（W），‘1’表示主机接收数据（R），每次数据传送总是有主机产生的终止信号结束；但是若主机希望继续占用总线进行新的数据传送，则可以不产生终止信号，马上再次发出起始信号对另一从机进行寻址。</p><p>数据传送格式</p><p>1.字节传送与应答</p><p>每一字节必须保证是8位长度，数据传送时，先传送最高位（MSB），每一个被传送的字节后面都必须跟随一位应答位（即一帧共有9位）。</p><p>8位数据位是有主机发送；</p><p>1位应答位是由从机应答；</p><p>如果从机对主机进行了应答，但在数据传送一段时间时间后，无法继续接发更多的数据时，从机可以通过对无法接发的第一个数据字节的“非应答”通知主机，主机则应发出终止信号以结束数据的继续传送。</p><p>当主机接发数据时，它收到最后一个数据字节后，必须向从机发出一个结束传送的信号，这个信号时由对从机的“非应答”来实现的，然后，从机释放SDA线，以允许主机产生终止信号。</p><p>主机发送地址时，总线上的每个从机都将这7位地址与自己的地址进行比较，如果相同，则认为自己正被主机寻址，根据R/W位将自己确定为发送器或者接收器。</p><p>从机地址有固定部分和可编程部分组成，在一个系统中可能希望接入多个相同的从机，从机地址中可编程部分决定了可接入总线该类器件的最大数目，如一个从机的7位寻址位有4位是固定位，3位是可编程位，这时仅能寻址8（2^3）个同样的器件，即可以有8个同样的器件接入到该I2C总线系统中。</p><p>写入过程：</p><p>传送数据时，单片机首先发送一个字节的被写入器件的存储区的首地址，收到存储器器件的应答后，单片机就逐个发送各数据字节，但每发送一个字节后都要等待应答信号。</p><p>AT24C系列的器件片内地址在接收到每一个数据字节地址后，自动加1，在芯片的“一次装载字节数”（不同芯片字节数不同）限度内，只需要输入首地址，装载字节数超过芯片的“一次装载字节数”时，数据地址将“上卷”，前面的数据将被覆盖。</p><p>当写入的数据传送完后，单片机应发出终止信号以结束操作。</p><p>读出过程：</p><p>单片机先发送该器件的7位地址码，和写方向位“0”（“伪写”），发送完后释放SDA线，并在SCL线上产生第9个时钟信号，被选中的存储器器件在确认是自己的地址后，在SDA线上产生一个应答信号作为响应。</p><p>然后，再发一个字节的要读出器件的存储区的首地址，收到应答后，单片机要重复一次起始信号，并发出器件地址和读方向位（‘1’），收到器件应答后就可以读出数据字节，每读出一个字节，单片机都要回复应答信号，当最后一个字节数据读完后，单片机应返回以“非应答”（高电平），并发出终止信号以结束读操作。</p><p>I2C总线协议：</p><p>1.只有在总线空闲时才允许启动数据传送。</p><p>2.在数据传送过程中，当时钟线为高电平时，数据线必须保持稳定状态，不允许有跳变，时钟线为高电平时，数据线的任何电平变化将被看作总线的起始或停止。</p><p>注意：</p><p>1.I2C总线写数据时，是先写高位，后写低位；</p><p>2.I2C总线读数据时，也是读写高位，后读低位。</p><p>3.应答信号是从从机产生。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'I2C','总线','组成'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>