<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“ | æå®¢å¿«è¨Š</title><meta property="og:title" content="javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/0c37161f872e469b9ce6b306c9ae6042"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e88aa42.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e88aa42.html><meta property="article:published_time" content="2020-10-29T21:01:26+08:00"><meta property="article:modified_time" content="2020-10-29T21:01:26+08:00"><meta name=Keywords content><meta name=description content="javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e88aa42.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><h1 class=ql-align-justify><strong>1ã€ä»€ä¹ˆæ˜¯æ—¥å¿—ï¼Ÿ</strong></h1><p class=ql-align-justify>ç®€å•çš„è¯´ï¼Œæ—¥å¿—å°±æ˜¯è®°å½•ç¨‹åºçš„è¿è¡Œè½¨è¿¹ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å…³é”®ä¿¡æ¯ï¼Œä¹Ÿæ–¹ä¾¿å¿«é€Ÿå®šä½è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬ Java ç¨‹åºå‘˜åœ¨å¼€å‘é¡¹ç›®æ—¶éƒ½æ˜¯ä¾èµ– Eclipse/ Idea ç­‰å¼€å‘å·¥å…·çš„ Debug è°ƒè¯•åŠŸèƒ½æ¥è·Ÿè¸ªè§£å†³ Bugï¼Œåœ¨å¼€å‘ç¯å¢ƒå¯ä»¥è¿™ä¹ˆåšï¼Œä½†é¡¹ç›®å‘å¸ƒåˆ°äº†æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå‘¢ï¼Ÿä½ æœ‰å¯èƒ½ä¼šè¯´å¯ä»¥ä½¿ç”¨è¿œç¨‹è°ƒè¯•ï¼Œä½†å®é™…å¹¶ä¸èƒ½å…è®¸è®©ä½ è¿™ä¹ˆåšã€‚æ‰€ä»¥ï¼Œæ—¥å¿—çš„ä½œç”¨å°±æ˜¯åœ¨æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒæ²¡æœ‰ Debug è°ƒè¯•å·¥å…·æ—¶å¼€å‘ã€æµ‹è¯•äººå‘˜å®šä½é—®é¢˜çš„æ‰‹æ®µã€‚æ—¥å¿—æ‰“å¾—å¥½ï¼Œå°±èƒ½æ ¹æ®æ—¥å¿—çš„è½¨è¿¹å¿«é€Ÿå®šä½å¹¶è§£å†³çº¿ä¸Šé—®é¢˜ï¼Œåä¹‹ï¼Œæ—¥å¿—è¾“å‡ºä¸å¥½ä¸èƒ½å®šä½åˆ°é—®é¢˜ä¸è¯´åè€Œä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚ä¼˜ç§€çš„é¡¹ç›®éƒ½æ˜¯èƒ½æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜çš„ï¼Œè€Œä¸æ˜¯åœ¨çº¿è°ƒè¯•ï¼Œæˆ–è€…åŠå¤©æ‰¾ä¸åˆ°æœ‰ç”¨çš„æ—¥å¿—ã€‚</p><h1 class=ql-align-justify><strong>2ã€å¸¸ç”¨æ—¥å¿—æ¡†æ¶</strong></h1><p class=ql-align-justify>å¦‚æœæƒ³å­¦ä¹ Javaå·¥ç¨‹åŒ–ã€é«˜æ€§èƒ½åŠåˆ†å¸ƒå¼ã€æ·±å…¥æµ…å‡ºã€‚å¾®æœåŠ¡ã€Springï¼ŒMyBatisï¼ŒNettyæºç åˆ†æçš„æœ‹å‹å¯ä»¥åŠ æˆ‘çš„Javaé«˜çº§äº¤æµï¼š854630135ï¼Œç¾¤é‡Œæœ‰é˜¿é‡Œå¤§ç‰›ç›´æ’­è®²è§£æŠ€æœ¯ï¼Œä»¥åŠJavaå¤§å‹äº’è”ç½‘æŠ€æœ¯çš„è§†é¢‘å…è´¹åˆ†äº«ç»™å¤§å®¶ã€‚</p><p class=ql-align-justify>log4jã€Loggingã€commons-loggingã€slf4jã€logbackï¼Œå¼€å‘çš„åŒå­¦å¯¹è¿™å‡ ä¸ªæ—¥å¿—ç›¸å…³çš„æŠ€æœ¯ä¸é™Œç”Ÿå§ï¼Œä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šæ—¥å¿—æŠ€æœ¯ï¼Œå®ƒä»¬éƒ½æ˜¯ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»å‘¢ï¼Ÿç›¸ä¿¡å¤§å¤šæ•°äººæä¸æ¸…æ¥šå®ƒä»¬çš„å…³ç³»ï¼Œä¸‹é¢æˆ‘å°†ä¸€ä¸€ä»‹ç»ä¸€ä¸‹ï¼Œä»¥åå¤§å®¶å†ä¹Ÿä¸ç”¨å‚»å‚»åˆ†ä¸æ¸…æ¥šäº†ã€‚</p><p class=ql-align-justify><strong>Logging ã€java è‡ªå¸¦å·¥å…·ã€‘</strong></p><p class=ql-align-justify>è¿™æ˜¯ Java è‡ªå¸¦çš„æ—¥å¿—å·¥å…·ç±»ï¼Œåœ¨ JDK 1.5 å¼€å§‹å°±å·²ç»æœ‰äº†ï¼Œåœ¨java.util.logging åŒ…ä¸‹ã€‚</p><p class=ql-align-justify><strong>Log4j ã€æ¡†æ¶å®ç°ã€‘</strong></p><p class=ql-align-justify>Log4j æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºæ—¥å¿—æ¡†æ¶ï¼Œä¹Ÿæ˜¯å¸‚åœºå æœ‰ç‡æœ€å¤šçš„ä¸€ä¸ªæ¡†æ¶ã€‚å¤§å¤šæ•°æ²¡ç”¨è¿‡ Java Loggingï¼Œ ä½†æ²¡äººæ•¢è¯´æ²¡ç”¨è¿‡ Log4j å§ï¼Œåæ­£ä»æˆ‘æ¥è§¦ Java å¼€å§‹å°±æ˜¯è¿™ç§æƒ…å†µï¼Œåš Java é¡¹ç›®å¿…æœ‰ Log4j æ—¥å¿—æ¡†æ¶ã€‚æ³¨æ„ï¼šlog4j åœ¨ 2015/08/05 è¿™ä¸€å¤©è¢« Apache å®£å¸ƒåœæ­¢ç»´æŠ¤äº†ï¼Œç”¨æˆ·éœ€è¦åˆ‡æ¢åˆ° Log4j2ä¸Šé¢å»ã€‚</p><p class=ql-align-justify><em>ä¸‹é¢æ˜¯å®˜æ–¹å®£å¸ƒåŸæ–‡</em></p><p class=ql-align-justify>On August 5, 2015 the Logging Services Project Management Committee announced that Log4j 1.x had reached end of life. For complete text of the announcement please see the Apache Blog. Users of Log4j 1 are recommended to upgrade to Apache Log4j 2.</p><p class=ql-align-justify><strong>Commons-logging ã€æ—¥å¿—æ¥å£ã€‘</strong></p><p class=ql-align-justify>ä¸Šé¢ä»‹ç»çš„ log4j æ˜¯ä¸€ä¸ªå…·ä½“çš„æ—¥å¿—æ¡†æ¶çš„å®ç°ï¼Œè€Œ commons-logging å°±æ˜¯æ—¥å¿—é—¨é¢æ¥å£ï¼Œå®ƒä¹Ÿæ˜¯ apache æœ€æ—©æä¾›çš„æ—¥å¿—é—¨é¢æ¥å£ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å–œå¥½é€‰æ‹©ä¸åŒçš„æ—¥å¿—å®ç°æ¡†æ¶ï¼Œè€Œä¸å¿…æ”¹åŠ¨æ—¥å¿—å®šä¹‰ï¼Œè¿™å°±æ˜¯æ—¥å¿—é—¨é¢çš„å¥½å¤„ï¼Œç¬¦åˆé¢å‘æ¥å£æŠ½è±¡ç¼–ç¨‹ã€‚</p><p class=ql-align-justify><strong>Slf4j ã€æ—¥å¿—æ¥å£ã€‘</strong></p><p class=ql-align-justify>å…¨ç§°ï¼šSimple Logging Facade for Javaï¼Œå³ç®€å•æ—¥å¿—é—¨é¢æ¥å£ï¼Œå’Œ Apache çš„ commons-loggingæ˜¯ä¸€æ ·çš„æ¦‚å¿µï¼Œå®ƒä»¬éƒ½ä¸æ˜¯å…·ä½“çš„æ—¥å¿—æ¡†æ¶ï¼Œä½ å¯ä»¥æŒ‡å®šå…¶ä»–ä¸»æµçš„æ—¥å¿—å®ç°æ¡†æ¶ã€‚Slf4jä¹Ÿæ˜¯ç°åœ¨ä¸»æµçš„æ—¥å¿—é—¨é¢æ¡†æ¶ï¼Œä½¿ç”¨Slf4jå¯ä»¥å¾ˆçµæ´»çš„ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå‚æ•°å ä½ï¼Œç®€åŒ–ä»£ç ï¼Œæ‹¥æœ‰æ›´å¥½çš„å¯è¯»æ€§ï¼Œè¿™ä¸ªåé¢ä¼šè®²åˆ°ã€‚</p><p class=ql-align-justify><strong>Logback ã€æ¡†æ¶å®ç°ã€‘</strong></p><p class=ql-align-justify>Logback æ˜¯ Slf4j çš„åŸç”Ÿå®ç°æ¡†æ¶ï¼ŒåŒæ ·ä¹Ÿæ˜¯å‡ºè‡ª Log4jä¸€ä¸ªäººä¹‹æ‰‹ï¼Œä½†æ‹¥æœ‰æ¯”log4jæ›´å¤šçš„ä¼˜ç‚¹ã€ç‰¹æ€§å’Œæ›´åšå¼ºçš„æ€§èƒ½ï¼Œç°åœ¨åŸºæœ¬éƒ½ç”¨æ¥ä»£æ›¿ log4j æˆä¸ºä¸»æµã€‚</p><p class=ql-align-justify><strong>æ—¥å¿—æ¡†æ¶æ€»ç»“</strong></p><ol><li class=ql-align-justify>commons-logginã€slf4j åªæ˜¯ä¸€ç§æ—¥å¿—æŠ½è±¡é—¨é¢ï¼Œä¸æ˜¯å…·ä½“çš„æ—¥å¿—æ¡†æ¶ã€‚</li><li class=ql-align-justify>log4jã€logback æ˜¯å…·ä½“çš„æ—¥å¿—å®ç°æ¡†æ¶ã€‚</li><li class=ql-align-justify>ä¸€èˆ¬é¦–é€‰å¼ºçƒˆæ¨èä½¿ç”¨ slf4j + logbackã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨slf4j + log4jã€commons-logging + log4j è¿™ä¸¤ç§æ—¥å¿—ç»„åˆæ¡†æ¶ã€‚</li></ol><h1 class=ql-align-justify><strong>3ã€æ—¥å¿—çº§åˆ«è¯¦è§£</strong></h1><p class=ql-align-justify>æ—¥å¿—çš„è¾“å‡ºéƒ½æ˜¯åˆ†çº§åˆ«çš„ï¼Œä¸åŒçš„è®¾ç½®ä¸åŒçš„åœºåˆæ‰“å°ä¸åŒçš„æ—¥å¿—ã€‚ä¸‹é¢æ‹¿æœ€æ™®éç”¨çš„ Log4j æ—¥å¿—æ¡†æ¶æ¥åšä¸ªæ—¥å¿—çº§åˆ«çš„è¯´æ˜ï¼Œè¿™ä¸ªä¹Ÿæ¯”è¾ƒå…¨é¢ï¼Œå…¶ä»–çš„æ—¥å¿—æ¡†æ¶ä¹Ÿéƒ½å¤§åŒå°å¼‚ã€‚Log4j çš„çº§åˆ«ç±» org.apache.log4j.Level é‡Œé¢å®šä¹‰äº†æ—¥å¿—çº§åˆ«ï¼Œæ—¥å¿—è¾“å‡ºä¼˜å…ˆçº§ç”±é«˜åˆ°åº•åˆ†åˆ«ä¸ºä»¥ä¸‹8ç§ã€‚</p><p class=ql-align-justify><strong>æ—¥å¿—çº§åˆ«åŠæè¿°</strong></p><ul><li class=ql-align-justify>ERRORï¼šç³»ç»Ÿå‘ç”Ÿäº†é”™è¯¯äº‹ä»¶ï¼Œä½†ä»ç„¶ä¸å½±å“ç³»ç»Ÿçš„ç»§ç»­è¿è¡Œã€‚ç³»ç»Ÿéœ€è¦å°†é”™è¯¯æˆ–å¼‚å¸¸ç»†èŠ‚è®°å½•ERRORæ—¥å¿—ä¸­ï¼Œæ–¹ä¾¿åç»­äººå·¥å›æº¯è§£å†³ã€‚</li><li class=ql-align-justify>WARNï¼š ç³»ç»Ÿåœ¨ä¸šåŠ¡å¤„ç†æ—¶è§¦å‘äº†å¼‚å¸¸æµç¨‹(å‚æ•°éªŒè¯ä¸è¿‡)ï¼Œä½†ç³»ç»Ÿå¯æ¢å¤åˆ°æ­£å¸¸æ€ï¼Œä¸‹ä¸€æ¬¡ä¸šåŠ¡å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚å¦‚ç¨‹åºè°ƒç”¨äº†ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„æ¥å£ï¼Œå¯é€‰å‚æ•°ä¸åˆæ³•ï¼Œéä¸šåŠ¡é¢„æœŸçš„çŠ¶æ€ä½†ä»å¯ç»§ç»­å¤„ç†ç­‰</li><li class=ql-align-justify>INFOï¼š è®°å½•ç³»ç»Ÿå…³é”®ä¿¡æ¯ï¼Œæ—¨åœ¨ä¿ç•™ç³»ç»Ÿæ­£å¸¸å·¥ä½œæœŸé—´å…³é”®è¿è¡ŒæŒ‡æ ‡ï¼Œå¼€å‘äººå‘˜å¯ä»¥å°†åˆå§‹åŒ–ç³»ç»Ÿé…ç½®ã€ä¸šåŠ¡çŠ¶æ€å˜åŒ–ä¿¡æ¯ï¼Œæˆ–è€…ç”¨æˆ·ä¸šåŠ¡æµç¨‹ä¸­çš„æ ¸å¿ƒå¤„ç†è®°å½•åˆ°INFOæ—¥å¿—ä¸­ï¼Œæ–¹ä¾¿æ—¥å¸¸è¿ç»´å·¥ä½œä»¥åŠé”™è¯¯å›æº¯æ—¶ä¸Šä¸‹æ–‡åœºæ™¯å¤ç°</li><li class=ql-align-justify>DEBUGï¼š å¯ä»¥å°†å„ç±»è¯¦ç»†ä¿¡æ¯è®°å½•åˆ°DEBUGé‡Œï¼Œèµ·åˆ°è°ƒè¯•çš„ä½œç”¨ï¼ŒåŒ…æ‹¬å‚æ•°ä¿¡æ¯ï¼Œè°ƒè¯•ç»†èŠ‚ä¿¡æ¯ï¼Œè¿”å›å€¼ä¿¡æ¯ç­‰ã€‚</li></ul><p class=ql-align-justify><strong>æ—¥å¿—ä¼˜å…ˆçº§åˆ«æ ‡å‡†é¡ºåº</strong></p><p class=ql-align-justify>ALL &lt; TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL &lt; OFF</p><p class=ql-align-justify><strong>è®¾ç½®çº§åˆ«å’Œæ‰“å°çº§åˆ«çš„å…³ç³»</strong></p><p class=ql-align-justify>å¦‚æœæ—¥å¿—çº§åˆ«è®¾ç½® INFOï¼Œåªæœ‰è¾“å‡ºçº§åˆ«ä¸º INFOã€WARNï¼Œåé¢çš„æ—¥å¿—æ‰ä¼šæ­£å¸¸è¾“å‡ºã€‚</p><h1 class=ql-align-justify><strong>4ã€æ—¥å¿—çš„è®°å½•æ—¶æœº</strong></h1><p class=ql-align-justify><strong>ç³»ç»Ÿåˆå§‹åŒ–</strong></p><p class=ql-align-justify>ç³»ç»Ÿåˆå§‹åŒ–æ—¶ä¼šä¾èµ–ä¸€äº›å…³é”®é…ç½®ï¼Œæ ¹æ®å‚æ•°ä¸åŒä¼šæä¾›ä¸ä¸€æ ·çš„æœåŠ¡ã€‚å°†ç³»ç»Ÿçš„å¯åŠ¨å‚æ•°è®°å½•INFOæ—¥å¿—ï¼Œæ‰“å°å‡ºå‚æ•°ä»¥åŠæœåŠ¡å¯åŠ¨å®ŒæˆçŠ¶æ€ã€‚</p><p class=ql-align-justify><strong>ä¸šåŠ¡æµç¨‹ä¸é¢„æœŸä¸ç¬¦</strong></p><p class=ql-align-justify>ç³»ç»Ÿä¸­ç»“æœä¸æœŸæœ›ä¸ç¬¦ï¼Œåº”å½“è®°å½•æ—¥å¿—ã€‚å¸¸è§çš„åˆé€‚åœºæ™¯åŒ…æ‹¬å¤–éƒ¨å‚æ•°ä¸æ­£ç¡®ï¼Œæ•°æ®å¤„ç†é—®é¢˜å¯¼è‡´è¿”å›ç ä¸åœ¨åˆç†èŒƒå›´å†…ç­‰ç­‰ã€‚</p><p class=ql-align-justify><strong>ç³»ç»Ÿæ ¸å¿ƒçš„å…³é”®åŠ¨ä½œ</strong></p><p class=ql-align-justify>ç³»ç»Ÿä¸­æ ¸å¿ƒè§’è‰²è§¦å‘çš„ä¸šåŠ¡åŠ¨ä½œæ˜¯éœ€è¦å¤šåŠ å…³æ³¨çš„ï¼Œæ˜¯è¡¡é‡ç³»ç»Ÿæ­£å¸¸è¿è¡Œçš„é‡è¦æŒ‡æ ‡ï¼Œå»ºè®®è®°å½•INFOçº§åˆ«æ—¥å¿—ï¼Œæ¯”å¦‚å¾®æœåŠ¡å„æœåŠ¡èŠ‚ç‚¹äº¤äº’ç­‰ã€‚</p><p class=ql-align-justify><strong>æ•è·åˆ°å¼‚å¸¸æ—¶</strong></p><p class=ql-align-justify>è¿™ç±»æ•è·çš„å¼‚å¸¸æ˜¯ç³»ç»Ÿå‘ŠçŸ¥å¼€å‘äººå‘˜éœ€è¦åŠ ä»¥å…³æ³¨çš„ï¼Œåº”å½“è®°å½•æ—¥å¿—ï¼Œæ ¹æ®å®é™…æƒ…å†µä½¿ç”¨warnæˆ–è€…errorçº§åˆ«ã€‚</p><p class=ql-align-justify><strong>å¤–éƒ¨æ¥å£æ—¥å¿—</strong></p><p class=ql-align-justify>è¿™ç±»æ—¥å¿—æ¶‰åŠåˆ°ä¸å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’ï¼Œäº‹å…³è´£ä»»é—®é¢˜ï¼Œå»ºè®®å°†åŸå§‹æ•°æ®æ–‡ä»¶å†…å®¹å†™å…¥æ—¥å¿—æˆ–æ•°æ®åº“ï¼ˆå¦‚mongodbï¼‰ï¼Œæ ¸å¿ƒå¤„ç†é€»è¾‘å…³é”®ä¸šåŠ¡æ•°æ®ä¹Ÿå°½é‡å†™å…¥æ—¥å¿—ã€‚å¦‚æœæ¶‰åŠåˆ°é‡å‘ï¼Œå»ºè®®å°†å¤„ç†å¤±è´¥çš„åŸå§‹æ•°æ®æ–‡ä»¶æ—¥å¿—å†™å…¥æ•°æ®åº“ï¼Œä»¥ä¾¿é‡å‘æ‰§è¡Œã€‚</p><h1 class=ql-align-justify><strong>5ã€æ—¥å¿—ä½¿ç”¨è§„çº¦</strong></h1><ul><li class=ql-align-justify>ä½¿ç”¨@SLF4Jä¸­çš„APIè¿›è¡Œæ—¥å¿—æ‰“å°ã€‚</li><li class=ql-align-justify>æ—¥å¿—è¾“å‡ºå¿…é¡»é‡‡ç”¨UTF-8å­—ç¬¦é›†ï¼Œæ¨èæ‰“å°æ—¥å¿—æ—¶è¾“å‡ºè‹±æ–‡ï¼Œé˜²æ­¢ä¸­æ–‡ä¸æ”¯æŒè€Œæ‰“å°å‡ºä¹±ç çš„æƒ…å†µã€‚</li><li class=ql-align-justify>ä¸å…è®¸è®°å½•æ—¥å¿—ååˆæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºè¿™æ ·ä¼šå¤šæ¬¡è®°å½•æ—¥å¿—ï¼Œåªå…è®¸è®°å½•ä¸€æ¬¡æ—¥å¿—ï¼Œåº”æŠ›å‡ºå¼‚å¸¸ï¼Œé¡¶å±‚æ‰“å°ä¸€æ¬¡æ—¥å¿—ã€‚</li></ul><p class=ql-align-right><br></p><pre>try { // é”™è¯¯} catch (Exception e) { log.error("xxxxxx", e); throw eï¼›}</pre><ul><li class=ql-align-justify>è¾“å‡ºExceptionsçš„å…¨éƒ¨å †æ ˆä¿¡æ¯ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨e.printStackTrace()</li></ul><p class=ql-align-right><br></p><pre>// é”™è¯¯ä¾‹å­, ä¸¢å¤±æ‰StackTraceä¿¡æ¯log.error(e.getMessage());// é”™è¯¯ä¾‹å­,ä¸¢å¤±æ‰StackTraceä¿¡æ¯log.error(â€œBad things : {}â€œ, e.getMessage());// æ­£ç¡®ä¾‹å­log.error(â€œBad things : {}â€œ,e); // e.printStackTrace()çš„æºç public void printStackTrace() { printStackTrace(System.err);}</pre><ul><li class=ql-align-justify>ç¦æ­¢system.out ç”¨äºæ—¥å¿—è®°å½•ã€‚</li><li class=ql-align-justify>çº¿ä¸Šå¿…é¡»å…³é—­ DEBUG çº§åˆ«æ—¥å¿—ã€‚</li><li class=ql-align-justify>éæ­£å¸¸çš„æƒ…å†µï¼Œéœ€è¦æ ¹æ®æƒ…å†µé€‰æ‹©æ‰“å°warn æˆ– error æ—¥å¿—,ä¸èƒ½ä½¿ç”¨é”™è¯¯çš„æ—¥å¿—çº§åˆ«ã€‚</li></ul><p class=ql-align-right><br></p><pre>try {// ...} catch (Exception e) {// é”™è¯¯LOG.info("XX å‘ç”Ÿå¼‚å¸¸...", e);}// ç”¨ info è®°å½• error æ—¥å¿—ï¼Œæ—¥å¿—è¾“å‡ºåˆ°äº† info æ—¥å¿—æ–‡ä»¶ä¸­äº†ï¼Œ</pre><p>åŒäº‹æ‹¼å‘½åœ°åœ¨ error é”™è¯¯æ—¥å¿—æ–‡ä»¶é‡Œ é¢æ‰¾æ€ä¹ˆèƒ½æ‰¾åˆ°å‘¢ï¼Ÿ</p><ul><li class=ql-align-justify>æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼ï¼Œå› ä¸ºå³ä½¿ä¿¡æ¯ä¸æ‰“å°ï¼Œä¹Ÿä¼šæ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚</li><li class=ql-align-justify>æ—¥å¿—ä¸­ä¸å…è®¸å‡ºç°è®¡ç®—æˆ–æ–¹æ³•è°ƒç”¨ï¼Œé˜²æ­¢åœ¨æ‰“å°æ—¥å¿—çš„æ—¶å€™æŠ¥é”™ã€‚</li><li class=ql-align-justify>è¾“å‡ºçš„POJOç±»å¿…é¡»é‡å†™toStringæ–¹æ³•ï¼Œå¦åˆ™åªè¾“å‡ºå¯¹è±¡çš„hashCodeå€¼ï¼Œæ²¡æœ‰å‚è€ƒæ„ä¹‰ã€‚</li></ul><pre class=ql-align-justify>ä¸è®°å½•å¯¹äºæ’æŸ¥æ•…éšœæ¯«æ— æ„ä¹‰çš„æ—¥å¿—ä¿¡æ¯ï¼Œæ—¥å¿—ä¿¡æ¯ä¸€å®šè¦å¸¦æœ‰ä¸šåŠ¡ä¿¡æ¯ã€‚//é”™è¯¯log.error(â€œhandle failedâ€œ);//æ­£ç¡®log.error(â€œhandle failedï¼Œid= {}â€œ, id);</pre><ul><li class=ql-align-justify>ç¦æ­¢å¤§é‡æ— æ•ˆé‡å¤çš„æ—¥å¿—è¾“å‡ºï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨ç¨‹åºæ—¥å¿—åªè®°å½•ä¸€äº›æœ‰æ„ä¹‰çš„çŠ¶æ€æ•°æ®ï¼Œå‚è€ƒæ—¥å¿—è®°å½•æ—¶æœºã€‚</li><li class=ql-align-justify>ä¸å¯ä»¥è®²æ•æ„Ÿä¸šåŠ¡ä¿¡æ¯è®°å½•å…¥æ—¥å¿—æ–‡ä»¶ã€‚</li><li class=ql-align-justify>ä¸¥é˜²æ—¥å¿—å æ»¡ç£ç›˜ï¼Œå®šæœŸæ£€æŸ¥ç£ç›˜ï¼ˆç¡®å®šæ˜¯å¦æœ‰ç£ç›˜å‘Šè­¦ï¼‰ã€‚</li><li class=ql-align-justify>ä¸è¦åœ¨åƒå±‚å¾ªç¯ä¸­æ‰“å°æ—¥å¿—</li></ul><pre>for(int i=0; i&lt;2000; i++){LOG.info("XX");}</pre><p>// è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¦‚æœä½ çš„æ¡†æ¶ä½¿ç”¨äº†æ€§èƒ½ä¸é«˜çš„ Log4j æ¡†æ¶ï¼Œ</p><p>é‚£å°±ä¸è¦åœ¨ä¸Šåƒä¸ª for å¾ªç¯ä¸­æ‰“å°æ—¥å¿—ï¼Œ</p><p>// è¿™æ ·å¯èƒ½ä¼šæ‹–å®ä½ çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æœä½ çš„ç¨‹åºå“åº”æ—¶é—´å˜æ…¢ï¼Œ</p><p>é‚£è¦è€ƒè™‘æ˜¯ä¸æ˜¯æ—¥å¿—æ‰“å°çš„è¿‡å¤šäº†ã€‚</p><h1 class=ql-align-justify><strong>6ã€logbacké…ç½®å‚è€ƒ</strong></h1><p class=ql-align-justify><strong>é…ç½®è¯´æ˜</strong></p><ul><li class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨logback.xmlé…ç½®ï¼Œlogback.xml æ–‡ä»¶æ”¾åœ¨ classpath ç›®å½•ä¸‹ã€‚</li><li class=ql-align-justify>æ‰€æœ‰çš„jaråŒ…ä¸­ä¸å»ºè®®åŒ…å«logback.xmlæ–‡ä»¶ï¼Œé¿å…å¹²æ‰°å®é™…çš„ä¸šåŠ¡ç³»ç»Ÿã€‚</li><li class=ql-align-justify>é€šè¿‡åœ¨æ–‡ä»¶logback.xmlä¸­å¼•å…¥èµ„æºæ–‡ä»¶log.propertieså®šä¹‰logbackå±æ€§ä¿¡æ¯ï¼Œlog.propertiesæ ¹æ®ä¸åŒçš„profileæ”¾ç½®åœ¨ä¸åŒä½ç½®ï¼›</li></ul><pre>&lt;property resource="log.properties"/&gt;</pre><ul><li class=ql-align-justify>log.propertiesæ–‡ä»¶</li><li class=ql-align-justify>å±æ€§å‘½åæ¨èä½¿ç”¨ç»Ÿä¸€ä½¿ç”¨å¤§å†™ï¼Œä»¥ä¸‹åˆ’çº¿åˆ†éš”ï¼Œå‚è€ƒ</li></ul><p class=ql-align-right>å¦‚æœæƒ³å­¦ä¹ Javaå·¥ç¨‹åŒ–ã€é«˜æ€§èƒ½åŠåˆ†å¸ƒå¼ã€æ·±å…¥æµ…å‡ºã€‚å¾®æœåŠ¡ã€Springï¼ŒMyBatisï¼ŒNettyæºç åˆ†æçš„æœ‹å‹å¯ä»¥åŠ æˆ‘çš„Javaé«˜çº§äº¤æµï¼š854630135ï¼Œç¾¤é‡Œæœ‰é˜¿é‡Œå¤§ç‰›ç›´æ’­è®²è§£æŠ€æœ¯ï¼Œä»¥åŠJavaå¤§å‹äº’è”ç½‘æŠ€æœ¯çš„è§†é¢‘å…è´¹åˆ†äº«ç»™å¤§å®¶ã€‚</p><pre>APP_NAME = yourAppNameLOG_DIR = /export/home/logs/yourSystem/yourAppNameLOG_PATTERN = [%date{yyyy-MM-dd HH:mm:ss.SSS}] %level [%mdc{invokeNo}] %C{0}:%line - %message%n</pre><ul><li class=ql-align-justify>æ³¨æ„Loggeré—´çš„ç»§æ‰¿å…³ç³»ï¼Œæ¨èadditivityè®¾ç½®false;</li></ul><ol><li class=ql-align-justify>å­loggerä¼šé»˜è®¤ç»§æ‰¿çˆ¶loggerçš„appenderï¼Œå°†å®ƒä»¬åŠ å…¥åˆ°è‡ªå·±çš„Appenderä¸­ï¼›é™¤éåŠ ä¸Šäº†additivity="false"ï¼Œåˆ™ä¸å†ç»§æ‰¿çˆ¶loggerçš„appenderã€‚</li><li class=ql-align-justify>å­loggeråªåœ¨è‡ªå·±æœªå®šä¹‰è¾“å‡ºçº§åˆ«çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§æ‰¿çˆ¶loggerçš„è¾“å‡ºçº§åˆ«ã€‚</li></ol><ul><li class=ql-align-justify>å°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶å½“ä¸­ï¼Œç¦æ­¢ä½¿ç”¨FileAppenderï¼Œæ¨èä½¿ç”¨æä¾›è‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„RollingFileAppender Logæ–‡ä»¶ä½ç½®å’Œå‘½åï¼Œç›®å‰Logæ–‡ä»¶çš„ä½ç½®ç»Ÿä¸€æ”¾åœ¨ç›¸åŒç›®å½•ä¸‹é¢ã€‚</li></ul><div class=pgc-img><img alt=javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0c37161f872e469b9ce6b306c9ae6042><p class=pgc-img-caption></p></div><ul><li class=ql-align-justify>æ—¥å¿—æŒ‰å¤©è®°å½•ï¼Œå•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§ä¸è¶…è¿‡2000MBï¼Œè€ƒè™‘åˆ°æœ‰äº›bugæŒ‰æœˆè§„å¾‹å‡ºç°ï¼Œæ¨èå†å²æ—¥å¿—ä¿ç•™30å¤©ã€‚</li></ul><p class=ql-align-justify><br></p><pre class=ql-align-justify>&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;ã€€ã€€&lt;fileNamePattern&gt;${LOG_DIR}/all-%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;ã€€ã€€&lt;maxHistory&gt;30&lt;/maxHistory&gt;ã€€ã€€&lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;ã€€ã€€&lt;maxFileSize&gt;2000MB&lt;/maxFileSize&gt;ã€€ã€€&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;&lt;/rollingPolicy&gt;</pre><p class=ql-align-justify><br></p><ul><li class=ql-align-justify>åœ¨å‡ºç°é—®é¢˜ä¹‹åï¼Œéœ€è¦ç«‹å³æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜ã€‚å¯¹äºINFOåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—ï¼Œè¦æ±‚æŒ‰ç…§ä¸€å®šé¡ºåºï¼Œè¾“å‡ºä»¥ä¸‹å¿…è¦çš„ä¿¡æ¯ã€‚å‚è€ƒæ—¥å¿—æ ¼å¼å®šä¹‰</li></ul><pre class=ql-align-justify>&lt;encoder charset="UTF-8"&gt;ã€€ã€€&lt;pattern&gt;[%date{yyyy-MM-dd HH:mm:ss.SSS}] %level ã€€ã€€[%mdc{invokeNo}] %C{0}:%line - %message%n&lt;/pattern&gt;&lt;/encoder&gt;</pre><ul><li class=ql-align-justify>ä¸€ä¸ªå®Œæ•´çš„Appenderé…ç½®å¦‚ä¸‹</li></ul><p class=ql-align-justify><br></p><pre class=ql-align-justify>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;configuration&gt;ã€€ã€€&lt;property resource="log.properties"/&gt; ã€€ã€€&lt;contextName&gt;${APP_NAME}&lt;/contextName&gt; ã€€ã€€&lt;appender name="console" class="ch.qos.logback.core.ConsoleAppender"&gt;ã€€ã€€ã€€ã€€&lt;encoder charset="UTF-8"&gt;ã€€ã€€ã€€ã€€ã€€ã€€&lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;ã€€ã€€ã€€ã€€&lt;/encoder&gt;ã€€ã€€&lt;/appender&gt;&lt;appender name="all" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;ã€€ã€€&lt;file&gt;${LOG_DIR}/all.log&lt;/file&gt;ã€€ã€€&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;ã€€ã€€ã€€ã€€&lt;fileNamePattern&gt;${LOG_DIR}/all-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;ã€€ã€€ã€€ã€€&lt;maxHistory&gt;30&lt;/maxHistory&gt;ã€€ã€€ã€€ã€€&lt;timeBasedFileNamingAndTriggeringPolicy ã€€ã€€ã€€ã€€ã€€ã€€class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt; ã€€ã€€ã€€ã€€ã€€ã€€&lt;maxFileSize&gt;2000MB&lt;/maxFileSize&gt; &lt;!-- æ¯ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°ä¸è¶…è¿‡2GB --&gt;ã€€ã€€ã€€ã€€&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;ã€€ã€€&lt;/rollingPolicy&gt;ã€€ã€€&lt;encoder charset="UTF-8"&gt;ã€€ã€€ã€€ã€€&lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;ã€€ã€€&lt;/encoder&gt;ã€€ã€€&lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;ã€€ã€€ã€€ã€€&lt;level&gt;info&lt;/level&gt;ã€€ã€€&lt;/filter&gt;&lt;/appender&gt;&lt;appender name="all-error" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;ã€€ã€€&lt;file&gt;${LOG_DIR}/all-error.log&lt;/file&gt;ã€€ã€€&lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;ã€€ã€€ã€€ã€€&lt;level&gt;ERROR&lt;/level&gt;ã€€ã€€ã€€ã€€&lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;ã€€ã€€ã€€ã€€&lt;onMismatch&gt;DENY&lt;/onMismatch&gt;ã€€ã€€&lt;/filter&gt;ã€€ã€€&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;ã€€ã€€ã€€ã€€&lt;fileNamePattern&gt;ã€€ã€€ã€€ã€€ã€€ã€€${LOG_DIR}/all-error-%d{yyyy-MM-dd}.%i.log ã€€ã€€ã€€ã€€&lt;/fileNamePattern&gt;ã€€ã€€ã€€ã€€&lt;maxHistory&gt;30&lt;/maxHistory&gt;ã€€ã€€ã€€ã€€&lt;timeBasedFileNamingAndTriggeringPolicyã€€ã€€ã€€ã€€ã€€ class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;ã€€ã€€ã€€ã€€ã€€ã€€&lt;!-- æ¯ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°ä¸è¶…è¿‡2GB --&gt;ã€€ã€€ã€€ã€€ã€€ã€€&lt;maxFileSize&gt;2000MB&lt;/maxFileSize&gt;ã€€ã€€ã€€ã€€&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;ã€€ã€€&lt;/rollingPolicy&gt;ã€€ã€€&lt;encoder charset="UTF-8"&gt;ã€€ã€€ã€€ã€€&lt;pattern&gt;ã€€ã€€ã€€ã€€ã€€ã€€[%date{yyyy-MM-dd HH:mm:ss.SSS}] %level [%mdc{invokeNo}] %C{0}:%line - %message%nã€€ã€€ã€€ã€€&lt;/pattern&gt;ã€€ã€€&lt;/encoder&gt;&lt;/appender&gt;&lt;root level="debug"&gt;ã€€ã€€&lt;appender-ref ref="all"/&gt;ã€€ã€€&lt;appender-ref ref="all-error"/&gt;ã€€ã€€&lt;appender-ref ref="console"/&gt;&lt;/root&gt;&lt;/configuration&gt;</pre><p class=ql-align-justify><br></p><h1 class=ql-align-justify><strong>7ã€Log4j2é…ç½®å‚è€ƒ</strong></h1><p class=ql-align-justify><strong>é…ç½®è¯´æ˜</strong></p><ul><li class=ql-align-justify>ç»Ÿä¸€ä½¿ç”¨log4j2.xmlé…ç½®ï¼Œlog4j2.xml æ–‡ä»¶æ”¾åœ¨ resourceç›®å½•ä¸‹ã€‚</li><li class=ql-align-justify>æ³¨æ„Loggeré—´çš„ç»§æ‰¿å…³ç³»ï¼Œæ¨èadditivityè®¾ç½®falseï¼š</li></ul><ol><li class=ql-align-justify>å­loggerä¼šé»˜è®¤ç»§æ‰¿çˆ¶loggerçš„appenderï¼Œå°†å®ƒä»¬åŠ å…¥åˆ°è‡ªå·±çš„Appenderä¸­ï¼›é™¤éåŠ ä¸Šäº†additivity="false"ï¼Œåˆ™ä¸å†ç»§æ‰¿çˆ¶loggerçš„appenderã€‚</li><li class=ql-align-justify>å­loggeråªåœ¨è‡ªå·±æœªå®šä¹‰è¾“å‡ºçº§åˆ«çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§æ‰¿çˆ¶loggerçš„è¾“å‡ºçº§åˆ«ã€‚</li></ol><ul><li class=ql-align-justify>å°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶å½“ä¸­ï¼Œè€ƒè™‘åˆ°RollingRandomAccessFileæ¯”RollingFileæ›´çµæ´»ï¼Œæ¨èç»Ÿä¸€ä½¿ç”¨RollingRandomAccessFileã€‚</li><li class=ql-align-justify>Logæ–‡ä»¶ä½ç½®å’Œå‘½åï¼Œç›®å‰Logæ–‡ä»¶çš„ä½ç½®ç»Ÿä¸€æ”¾åœ¨ç›¸åŒç›®å½•ä¸‹é¢ã€‚</li></ul><div class=pgc-img><img alt=javaæ—¥å¿—è§„çº¦åŠé…ç½®ç¤ºä¾‹ç»ˆææ€»ç»“ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/50cd5d68b16741089384603af9d97b0c><p class=pgc-img-caption></p></div><ul><li class=ql-align-justify>æ—¥å¿—æŒ‰å¤©è®°å½•ï¼Œå•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§ä¸è¶…è¿‡3000MBï¼Œè€ƒè™‘åˆ°æœ‰äº›bugæŒ‰å‘¨è§„å¾‹å‡ºç°ï¼Œæ¨èå†å²æ—¥å¿—ä¿ç•™14å¤©ã€‚</li></ul><p class=ql-align-justify><br></p><pre class=ql-align-justify>&lt;RollingRandomAccessFile name="all-append" immediateFlush="true" ã€€ã€€ã€€ã€€fileName="${LOG_DIR}/all.log" filePattern="${LOG_DIR}/all-%d{yyyy-MM-dd}-%i.log"&gt;&lt;Policies&gt;&lt;SizeBasedTriggeringPolicy size="3GB" /&gt;&lt;TimeBasedTriggeringPolicy interval="8" modulate="true" /&gt;&lt;!-- æœ€å¤šå¤‡ä»½14å¤©ä»¥å†…||æ—¥å¿—æ–‡ä»¶å¤§å°è¾¾åˆ°50GBçš„æ—¥å¿—||æ–‡ä»¶æ•°é‡è¶…è¿‡20æ­¤å¤„ä¸ºç­–ç•¥é™åˆ¶ï¼Œã€€ã€€ã€€ã€€Deleteä¸­å¯ä»¥æŒ‰è‡ªå·±éœ€è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™ --&gt;&lt;DefaultRolloverStrategy&gt;ã€€ã€€&lt;Delete basePath="${filePath}" maxDepth="1"&gt;ã€€ã€€ã€€ã€€&lt;IfLastModified age="14d" /&gt;ã€€ã€€ã€€ã€€&lt;IfAccumulatedFileSize exceeds="50 GB" /&gt;ã€€ã€€ã€€ã€€&lt;IfAccumulatedFileCount exceeds="20" /&gt;ã€€ã€€&lt;/Delete&gt;&lt;/DefaultRolloverStrategy&gt;</pre><p class=ql-align-justify><br></p><ul><li class=ql-align-justify>åœ¨å‡ºç°é—®é¢˜ä¹‹åï¼Œéœ€è¦ç«‹å³æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜ã€‚å¯¹äºINFOåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—ï¼Œè¦æ±‚æŒ‰ç…§ä¸€å®šé¡ºåºï¼Œè¾“å‡ºä»¥ä¸‹å¿…è¦çš„ä¿¡æ¯ã€‚å‚è€ƒæ—¥å¿—æ ¼å¼å®šä¹‰</li></ul><pre class=ql-align-justify>&lt;PatternLayout&gt;ã€€ã€€&lt;Pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level [%mdc{invokeNo}] %C{2}:%L %M - %msg%nã€€ã€€&lt;/Pattern&gt;&lt;/PatternLayout&gt;</pre><ul><li class=ql-align-justify>ä¸€ä¸ªå®Œæ•´çš„Appenderé…ç½®å¦‚ä¸‹</li></ul><p class=ql-align-justify><br></p><pre class=ql-align-justify>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!-- Configurationåé¢çš„statusï¼Œè¿™ä¸ªç”¨äºè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œã€€ã€€ä½ ä¼šçœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡ºã€‚monitorIntervalï¼šLog4jèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹ä¿®æ”¹é…ç½®æ–‡ä»¶å’Œé‡æ–°é…ç½®æœ¬èº«ï¼Œã€€ã€€è®¾ç½®é—´éš”ç§’æ•°ã€‚--&gt;&lt;configuration status="OFF" monitorInterval=â€600â€³&gt;&lt;properties&gt;ã€€ã€€&lt;property name="LOG_PATH"&gt;/export/home/logs/yourSystem/yourAppName&lt;/property&gt;ã€€ã€€&lt;property name="LOG_PATTERN"&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level [%mdc{invokeNo}]ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ %C{2}:%L %M - %msg%n &lt;/property&gt;ã€€ã€€&lt;property name="EVERY_FILE_SIZE"&gt;3GB&lt;/property&gt;ã€€ã€€&lt;property name="OUTPUT_LOG_LEVEL"&gt;info&lt;/property&gt;ã€€ã€€&lt;property name="FILE_COUNT"&gt;20&lt;/property&gt;ã€€ã€€&lt;property name="ERROR_FILE_COUNT"&gt;3&lt;/property&gt;&lt;/properties&gt;&lt;!--å…ˆå®šä¹‰æ‰€æœ‰çš„appender--&gt;&lt;appenders&gt;ã€€ã€€&lt;!--è¾“å‡ºæ§åˆ¶å°çš„é…ç½®--&gt;ã€€ã€€&lt;Console name="console" target="SYSTEM_OUT"&gt;ã€€ã€€ã€€ã€€&lt;!--æ§åˆ¶å°åªè¾“å‡ºlevelåŠä»¥ä¸Šçº§åˆ«çš„ä¿¡æ¯ï¼ˆonMatchï¼‰ï¼Œå…¶ä»–çš„ç›´æ¥æ‹’ç»ï¼ˆonMismatchï¼‰--&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY"/&gt;ã€€ã€€ã€€ã€€&lt;!--è¾“å‡ºæ—¥å¿—çš„æ ¼å¼--&gt;ã€€ã€€ã€€ã€€&lt;PatternLayout pattern="${LOG_PATTERN}"/&gt;ã€€ã€€&lt;/Console&gt;&lt;!-- æ‰“å°ä¿¡æ¯ï¼Œæ¯æ¬¡å¤§å°è¶…è¿‡sizeï¼Œåˆ™è¿™sizeå¤§å°çš„æ—¥å¿—ä¼šè‡ªåŠ¨å­˜å…¥æŒ‰å¹´ä»½-æœˆä»½å»ºç«‹çš„æ–‡ä»¶å¤¹ä¸‹é¢å¹¶è¿›è¡Œå‹ç¼©ï¼Œã€€ã€€ä½œä¸ºå­˜æ¡£--&gt;&lt;RollingRandomAccessFile ã€€ã€€name="all"ã€€ã€€immediateFlush="true" ã€€ã€€fileName="${LOG_DIR}/all.log"ã€€ã€€filePattern="${LOG_DIR}/all-%d{yyyy-MM-dd}-%i.log"&gt;ã€€ã€€&lt;Filters&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="error" onMatch="ACCEPT" onMismatch="NEUTRAL"/&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="warn" onMatch="ACCEPT" onMismatch="NEUTRAL"/&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="NEUTRAL"/&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="trace" onMatch="DENY" onMismatch="DENY"/&gt;ã€€ã€€&lt;/Filters&gt;&lt;PatternLayout&gt;ã€€ã€€&lt;Pattern&gt;${LOG_PATTERN}&lt;/Pattern&gt;&lt;/PatternLayout&gt;&lt;Policies&gt;ã€€ã€€&lt;SizeBasedTriggeringPolicy size="${EVERY_FILE_SIZE}" /&gt;ã€€ã€€&lt;TimeBasedTriggeringPolicy interval="1" modulate="true" /&gt;&lt;/Policies&gt;&lt;!-- DefaultRolloverStrategyå±æ€§å¦‚ä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºæœ€å¤šåŒä¸€æ–‡ä»¶å¤¹ä¸‹7ä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œè®¾ç½®äº†20 --&gt; &lt;DefaultRolloverStrategy&gt;ã€€ã€€&lt;!-- æœ€å¤šå¤‡14 å¤©ä»¥å†…||æ—¥å¿—æ–‡ä»¶å¤§å°è¾¾åˆ°50GBçš„æ—¥å¿—||æ–‡ä»¶æ•°é‡è¶…è¿‡20æ­¤å¤„ä¸ºç­–ç•¥é™åˆ¶ï¼ŒDeleteä¸­å¯ä»¥æŒ‰è‡ªã€€ã€€ã€€ã€€ã€€å·±éœ€è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™ --&gt;ã€€ã€€&lt;Delete basePath="${LOG_DIR}" maxDepth="1"&gt;ã€€ã€€ã€€ã€€&lt;IfLastModified age="14d" /&gt;ã€€ã€€ã€€ã€€&lt;IfAccumulatedFileSize exceeds="50 GB" /&gt;ã€€ã€€ã€€ã€€&lt;IfAccumulatedFileCount exceeds="20" /&gt;ã€€ã€€&lt;/Delete&gt;&lt;/DefaultRolloverStrategy&gt;&lt;/RollingRandomAccessFile&gt;&lt;RollingRandomAccessFile ã€€ã€€name="all-error"ã€€ã€€immediateFlush="true" ã€€ã€€fileName="${LOG_DIR}/all-error.log"ã€€ã€€filePattern="${LOG_DIR}/all-error-%d{yyyy-MM-dd}-%i.log"&gt;ã€€ã€€&lt;Filters&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="error" onMatch="ACCEPT"onMismatch="NEUTRAL"/&gt;ã€€ã€€ã€€ã€€&lt;ThresholdFilter level="warn" onMatch="ACCEPT"onMismatch="DENY"/&gt;ã€€ã€€&lt;/Filters&gt;ã€€ã€€&lt;PatternLayout&gt;ã€€ã€€ã€€ã€€&lt;Pattern&gt;${LOG_PATTERN}&lt;/Pattern&gt;ã€€ã€€&lt;/PatternLayout&gt;ã€€ã€€&lt;Policies&gt;ã€€ã€€ã€€ã€€&lt;SizeBasedTriggeringPolicy size="${EVERY_FILE_SIZE}" /&gt;ã€€ã€€ã€€ã€€&lt;TimeBasedTriggeringPolicy interval="1" modulate="true" /&gt;ã€€ã€€&lt;/Policies&gt;ã€€ã€€&lt;!-- DefaultRolloverStrategyå±æ€§å¦‚ä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºæœ€å¤šåŒä¸€æ–‡ä»¶å¤¹ä¸‹7ä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œè®¾ç½®äº†20 --&gt;&lt;DefaultRolloverStrategy max="${ERROR_FILE_COUNT}"/&gt;&lt;/RollingRandomAccessFile&gt;&lt;/appenders&gt;&lt;!--ç„¶åå®šä¹‰loggerï¼Œåªæœ‰å®šä¹‰äº†loggerå¹¶å¼•å…¥çš„appenderï¼Œappenderæ‰ä¼šç”Ÿæ•ˆ--&gt;&lt;loggers&gt;ã€€ã€€&lt;!--é»˜è®¤çš„rootçš„logger--&gt;ã€€ã€€&lt;Logger name="all" level="info" additivity="false"&gt; ã€€ã€€ã€€ã€€&lt;AppenderRef ref="all" /&gt; ã€€ã€€&lt;/Logger&gt;ã€€ã€€&lt;Logger name="all-error" level="error" additivity="false"&gt; ã€€ã€€ã€€ã€€&lt;AppenderRef ref="all-error" /&gt; ã€€ã€€&lt;/Logger&gt;ã€€ã€€&lt;root level="${OUTPUT_LOG_LEVEL}"&gt;ã€€ã€€ã€€ã€€&lt;appender-ref ref="console"/&gt;ã€€ã€€&lt;/root&gt; &lt;/loggers&gt;&lt;/configuration&gt;</pre><p>æ¬¢è¿å·¥ä½œä¸€åˆ°å…«å¹´çš„Javaå·¥ç¨‹å¸ˆæœ‹å‹ä»¬åŠ å…¥Javaé«˜çº§äº¤æµï¼š854630135</p><p>æœ¬ç¾¤æä¾›å…è´¹çš„å­¦ä¹ æŒ‡å¯¼ æ¶æ„èµ„æ–™ ä»¥åŠå…è´¹çš„è§£ç­”</p><p>ä¸æ‡‚å¾—é—®é¢˜éƒ½å¯ä»¥åœ¨æœ¬ç¾¤æå‡ºæ¥ ä¹‹åè¿˜ä¼šæœ‰ç›´æ’­å¹³å°å’Œè®²å¸ˆç›´æ¥äº¤æµå™¢</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'ç¤ºä¾‹','java','æ—¥å¿—'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>