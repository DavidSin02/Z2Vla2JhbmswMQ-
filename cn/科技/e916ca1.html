<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>IP协议是不可靠无连接的，那为什么当初不直接把它设计为可靠的？ | 极客快訊</title><meta property="og:title" content="IP协议是不可靠无连接的，那为什么当初不直接把它设计为可靠的？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1537486641604199bd5c793"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><meta property="article:published_time" content="2020-10-29T20:49:59+08:00"><meta property="article:modified_time" content="2020-10-29T20:49:59+08:00"><meta name=Keywords content><meta name=description content="IP协议是不可靠无连接的，那为什么当初不直接把它设计为可靠的？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/e916ca1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>IP协议是不可靠无连接的，那为什么当初不直接把它设计为可靠的？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify>因特网使用的IP协议是无连接的，因此其传输是不可靠的。这样容易使人们感到因特网很不可靠，那为什么当初不直接把它设计为可靠的？</p><p class=ql-align-justify>先打一个比方。邮局寄送的平信很像无连接的IP数据报。每封平信可能走不同的传送路径，同时平信也不保证不丢失。当我们发现收信人没有收到寄出的平信时，去找邮局索赔是没有用的。邮局会说：“平信不保证不丢失。怕丢失就请你寄挂号信”。但是大家并不会将所有的信件都用挂号方式邮寄，这是因为邮局从来不会随意地将平信丢弃，而丢失平信的概率并不大，况且寄挂号信要多花些钱，还要去邮局排队，太麻烦。总之，尽管寄平信有可能会丢失，但绝大多数的信件还是平信，因为寄平信方便、便宜。</p><p class=ql-align-justify>我们知道，传统的电信网的最主要的用途是进行电话通信。普通的电话机很简单，没有什么智能，因此电信公司就不得不把电信网设计得非常好，这种电信网可以保证用户通话时的通信质量。这点对使用非常简单的电话机的用户则是非常方便的。但电信公司为了建设能够确保传输质量的电信网则付出了巨大的代价（使用昂贵的程控交换机和网管系统）。</p><p class=ql-align-justify>数据的传送显然必须是非常可靠的。当初美国国防部在设计 ARPANET 时有一个很重要的讨论内容就是：“谁应当负责数据传输的可靠性？”这时出现了两种对立的意见。一种意见是主张应当像电信网那样，由通信网络负责数据传输的可靠性（因为电信网的发展历史及其技术水平已经证明了人们可以将网络设计得相当可靠）。但另一种意见则坚决主张由用户的主机负责数据传输的可靠性。这里最重要的理由是：这样可以使计算机网络便宜、灵活，同时还可以满足军事上的各种特殊的需求。</p><p class=ql-align-justify><strong>下面用一个简单例子来说明这一问题。</strong></p><p class=ql-align-justify>设主机 A 通过因特网向主机 B 传送文件（如下图所示）。怎样才能实现文件数据的可靠传输呢？</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=IP协议是不可靠无连接的，那为什么当初不直接把它设计为可靠的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1537486641604199bd5c793><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>如按照电信网的思路，就是设法（这需要花费相当多的钱）将不可靠的因特网做成为可靠的因特网。</p><p class=ql-align-justify>但设计计算机网络的人采用另外一种思路，即设法实现端到端的可靠传输。</p><p class=ql-align-justify>提出这种思路的人认为，计算机网络和电信网的一个重大区别就是终端设备的性能差别很大。电信网的终端是非常简单的、没有什么智能的电话机。因此电信网的不可靠必然会严重地影响人们利用电话的通信。但计算机网络的终端是有很多智能的主机。这样就使得计算机网络和电信网有两个重要区别。第一，即使传送数据的因特网有一些缺陷（如造成比特差错或分组丢失），但具有很多智能的终端主机仍然有办法实现可靠的数据传输（例如，能够及时发现差错并通知发送方重传刚才出错的数据）。第二，即使网络可以实现 100% 地无差错传输，端到端的数据传输仍然有可能出现差错。</p><p class=ql-align-justify>为了说明这点，我们可以用一个简单例子来说明这个问题。这就是主机 A 向主机 B 传送一个文件的情况。</p><p class=ql-align-justify>文件是通过一个文件系统存储在主机 A 的硬盘中。主机 B 也有一个文件系统，用来接收和存储从 A 发送过来的文件。应用层使用的应用程序现在就是文件传送程序，这个程序一部分在主机 A 运行，另一部分在主机 B 运行。</p><p class=ql-align-justify><strong>现在讨论文件传送的大致步骤：</strong></p><blockquote>(1)主机 A 的文件传送程序调用文件系统将文件从硬盘中读出。然后文件系统将文件传递给文件传送程序。(2)主机 A 请求数据通信系统将文件传送到主机 B。这里包括使用一些通信协议和将数据文件划分为适当大小的分组。(3)通信网络将这些数据分组逐个传送给主机 B。(4)在主机 B，数据通信协议将收到的数据传递给文件传送应用程序在主机 B 运行的那一部分。(5)在主机 B，文件传送程序请求主机 B 的文件系统将收到的数据写到主机 B 的硬盘中。</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>在以上的几个步骤中，都存在使数据受到损伤的一些因素。例如：</strong></p><blockquote>(1)虽然文件原来是正确写在主机 A 的硬盘上，但在读出后就可能出现差错（如在磁盘存储系统中的硬件出现了故障）。(2)文件系统、文件传送程序或数据通信系统的软件在对文件中的数据进行缓存或复制的过程中都有可能出现故障。(3)主机 A 或 B 的硬件处理机或存储器在主机 A 或 B 进行数据缓存或复制的过程中也有可能出现故障。(4)通信系统在传输数据分组时有可能产生检测不出来的比特差错或甚至丢失某些分组。(5)主机 A 或 B 都有可能在进行数据处理的过程中突然崩溃。</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify>由此可看出，即使对于这样一个简单的文件传送任务，仅仅使通信网络非常可靠并不能保证文件从主机 A 硬盘到主机 B 硬盘的传送是可靠的。也就是说，花费很多的钱将通信网络做成为非常可靠的，对传送计算机数据来说是得不偿失的。既然现在的终端设备有智能，就应当把网络设计得简单些，而让具有智能的终端来完成“使传输变得可靠”的任务。</p><p class=ql-align-justify>于是，计算机网络的设计者采用了一种策略，这就是“端到端的可靠传输”。更具体些，就是在运输层使用面向连接的 TCP 协议，它可保证端到端的可靠传输。只要主机 B 的 TCP 发现了数据的传输有差错，就告诉主机 A 将出现差错的那部分数据重传，直到这部分数据正确传送到主机 B 为止。而 TCP 发现不了数据有差错的概率是很小的。采用这样的建网策略，既可以使网络部分价格便宜和灵活可靠，又能够保证端到端的可靠传输。</p><p class=ql-align-justify>这样，我们可以这样想像，将因特网的范围稍微扩大一些，即扩大到主机中的运输层。由于运输层使用了 TCP 协议，使得端到端的数据传输成为可靠的，因此这样扩大了范围的因特网就成为可靠的网络。</p><p class=ql-align-justify>因此，说“因特网提供的数据传输是不可靠的”或“因特网提供的数据传输是可靠的”这两种说法都可以在文献中找到，问题是是怎样界定因特网的范围。如果说因特网提供的数据传输是不可靠的，那么这里的因特网指的是不包括主机在内的网络（仅有下三层）。说因特网提供的数据传输是可靠的，就表明因特网的范围已经扩大到主机的运输层。</p><p class=ql-align-justify><strong>再回到通过邮局寄平信的例子。当我们寄出一封平信后，可以等待收信人的确认（通过他的回信）。如果隔了一些日子还没有收到回信，我们可以将该信件再寄一次。这就是将“端到端的可靠传输”的原理用于寄信的例子</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'可靠','IP','协议'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>