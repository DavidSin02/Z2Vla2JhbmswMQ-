<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/43b29f26fb3f49e7ae0835951adf5999"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ef2da6b1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ef2da6b1.html><meta property="article:published_time" content="2020-11-14T21:01:42+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:42+08:00"><meta name=Keywords content><meta name=description content="ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/ef2da6b1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h2 class=pgc-h-arrow-right>ä»è§‚å¯Ÿè€…æ¨¡å¼è¯´èµ·</h2><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡çš„å¸¸ç”¨æ¨¡å¼ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„ç»„åˆå…³ç³»ï¼Œå­˜åœ¨è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¸¤ç§è§’è‰²ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…æ²¡æœ‰ç›´æ¥çš„ç±»è°ƒç”¨å…³ç³»ï¼Œæœ‰ç€æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ç•Œé™ï¼Œä»è€Œæé«˜äº†è½¯ä»¶çš„å¯ç»´æŠ¤æ€§ã€‚</p><p><br></p><div class=pgc-img><img alt=ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/43b29f26fb3f49e7ae0835951adf5999><p class=pgc-img-caption></p></div><p><br></p><p><strong>è¢«è§‚å¯Ÿè€…</strong></p><p>è¢«è§‚å¯Ÿè€…å°±æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„å¯¹è±¡ï¼Œæ¯”å¦‚ç”¨æˆ·ã€å•†å“ã€æ–‡ä»¶ã€ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å¸Œæœ›äº†è§£è¢«è§‚å¯Ÿè€…çš„çŠ¶æ€å˜åŒ–ï¼Œå¹¶ä¸”è¢«åŠ¨æ¥å—å˜åŒ–æ¶ˆæ¯ã€‚å½“è¢«è§‚å¯Ÿè€…çŠ¶æ€å˜åŒ–æ—¶ï¼Œå‘é€æ¶ˆæ¯é€šçŸ¥è§‚å¯Ÿè€…ã€‚</p><p><strong>è§‚å¯Ÿè€…</strong></p><p>è§‚å¯Ÿè€…å¯ä»¥æœ‰å¤šä¸ªï¼Œäº’ç›¸ä¹‹é—´ä¸€èˆ¬æ²¡æœ‰ä¾èµ–ï¼Œä¹Ÿä¸éœ€è¦ç¡®ä¿è§‚å¯Ÿè€…æ¥æ”¶æ¶ˆæ¯çš„å…ˆåé¡ºåºã€‚è§‚å¯Ÿè€…å…¶å®æ˜¯ç°å®ä¸–ç•Œåœ¨ç¨‹åºä¸­çš„ä¸€ä¸ªç¼©å½±ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸ç”¨ä¸€ç›´ç›¯ç€æ‰‹æœºï¼Œåªéœ€è¦å¬åˆ°é“ƒå£°å°±çŸ¥é“æœ‰ç”µè¯è¿›æ¥ã€‚</p><p><strong>Java ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</strong></p><p>åœ¨ Java ä¸­ï¼Œå†…ç½®äº† Observable ç±»å’Œ Observer æ¥å£æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ã€‚ä½¿ç”¨æ—¶ï¼ŒObservable ä½œä¸ºè¢«è§‚å¯Ÿå¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨ addObserver æ–¹æ³•æ¥å¢åŠ è§‚å¯Ÿè€…ï¼Œå½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œè¢«è§‚å¯Ÿè€…è°ƒç”¨ setChanged æ–¹æ³•æ¥æ ‡è¯†çŠ¶æ€å˜åŒ–ï¼Œç„¶åè°ƒç”¨ notifyObservers æ–¹æ³•æ¥é€šçŸ¥è§‚å¯Ÿè€…ã€‚Observer æ¥å£ç”¨äºå®ç°è§‚å¯Ÿè€…ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³• updateï¼Œå½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§‚å¯Ÿè€…çš„ update æ–¹æ³•è¢«è°ƒç”¨ï¼Œä»è€Œè·çŸ¥çŠ¶æ€å˜åŒ–ã€‚</p><pre><code>public class MyObservable extends Observable {    public static void main(String[] args){        MyObservable myObservable = new MyObservable();        myObservable.addObserver(new Observer() {            @Override            public void update(Observable o, Object arg) {                System.out.println(arg);            }        });        myObservable.setChanged();        myObservable.notifyObservers("hello");    }}</code></pre><h2 class=pgc-h-arrow-right>Spring ä¸­çš„äº‹ä»¶</h2><p>Spring ä¸­çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å®ç°ã€‚è§‚å¯Ÿè€…æ˜¯ ApplicationListenerï¼Œå¯ä»¥å®ç°æ¥å£å®šä¹‰è§‚å¯Ÿè€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£å®šä¹‰è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…æ„Ÿå…´è¶£çš„æ˜¯æŸç§çŠ¶æ€çš„å˜åŒ–ï¼Œè¿™ç§çŠ¶æ€å˜åŒ–ä½¿ç”¨ ApplicationEvent æ¥ä¼ è¾¾ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶å¯¹è±¡ã€‚æˆ‘ä»¬è¯´çš„ Spring ä¸­çš„äº‹ä»¶ï¼Œå°±æ˜¯ ApplicationEventã€‚åœ¨äº‹ä»¶ä¸­ï¼Œè¢«è§‚å¯Ÿè€…å¯ä»¥è®¤ä¸ºæ˜¯å‘å‡ºäº‹ä»¶çš„ä¸€æ–¹ï¼Œåªæœ‰åœ¨çŠ¶æ€å˜åŒ–æ—¶æ‰å‘å¸ƒäº‹ä»¶ã€‚</p><p>å½“æœ‰çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‘å¸ƒè€…è°ƒç”¨ ApplicationEventPublisher çš„ publishEvent æ–¹æ³•å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼ŒSpring å®¹å™¨å¹¿æ’­äº‹ä»¶ç»™æ‰€æœ‰è§‚å¯Ÿè€…ï¼Œè°ƒç”¨è§‚å¯Ÿè€…çš„ onApplicationEvent æ–¹æ³•æŠŠäº‹ä»¶å¯¹è±¡ä¼ é€’ç»™è§‚å¯Ÿè€…ã€‚è°ƒç”¨ publishEvent æ–¹æ³•æœ‰ä¸¤ç§é€”å¾„ï¼Œä¸€ç§æ˜¯å®ç°æ¥å£ç”±å®¹å™¨æ³¨å…¥ ApplicationEventPublisher å¯¹è±¡ç„¶åè°ƒç”¨å…¶æ–¹æ³•ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨å®¹å™¨çš„æ–¹æ³•ï¼Œä¸¤ç§æ–¹æ³•å‘å¸ƒäº‹ä»¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p><p>ç›¸å…³ç±»å‹æ€»ç»“å¦‚ä¸‹ï¼š</p><ul><li>ApplicationListenerï¼šäº‹ä»¶ç›‘å¬è€…ï¼Œè§‚å¯Ÿè€…ï¼›</li><li>ApplicationEventï¼šSpring äº‹ä»¶ï¼Œè®°å½•äº‹ä»¶æºã€æ—¶é—´å’Œæ•°æ®ï¼›</li><li>ApplicationEventPublisherï¼šå‘å¸ƒäº‹ä»¶ï¼›</li></ul><p><strong>ä¼˜åŠ¿</strong></p><p>ä½¿ç”¨äº‹ä»¶å¯ä»¥è§£è€¦ä»£ç ï¼Œè§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…å¯ä»¥åˆ†å¼€å¼€å‘ï¼Œä¸­é—´åªæœ‰äº‹ä»¶ä½œä¸ºè”ç³»ï¼Œä¸ç”¨å…³å¿ƒå¦ä¸€æ–¹å¦‚ä½•å®ç°ã€‚è§‚å¯Ÿè€…å¯ä»¥æœ‰å¤šä¸ªï¼Œæ‰€ä»¥å¯¹äºåŒä¸€ä¸ªäº‹ä»¶å¯ä»¥æœ‰å¤šç§ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œä¸è¿‡è¦ç¡®ä¿ä¸ä¾èµ–å¤„ç†çš„é¡ºåºã€‚ä½¿ç”¨äº‹ä»¶åï¼Œè§‚å¯Ÿè€…å¯ä»¥å•ç‹¬å¼€å‘ï¼Œå¯¹ä¸»æµç¨‹æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå¯ä»¥ç®€åŒ–ä¸»æµç¨‹çš„å¼€å‘ã€‚</p><p>äº‹ä»¶å¯ä»¥ç”¨äºå„ç§åœºæ™¯çš„æ¶ˆæ¯é€šçŸ¥ï¼Œæ¯”å¦‚ç³»ç»Ÿæ”¶åˆ°åœæœºæŒ‡ä»¤åï¼Œå¯ä»¥å‘å‡ºåœæœºäº‹ä»¶ï¼Œè¿™æ ·ç›¸å…³çš„å­ç³»ç»Ÿå°±å¯ä»¥è¿›è¡Œåœæœºå‰çš„å„ç§å¤„ç†ã€‚é‚£ä¹ˆ Spring ä¸­çš„äº‹ä»¶æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p>Spring æ¡†æ¶æä¾›äº†å››ç§å®¹å™¨äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è§‚å¯Ÿï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ContextStartedEventï¼šApplicationContext å¯åŠ¨äº‹ä»¶ï¼›</li><li>ContextRefreshedEventï¼šApplicationContext æ›´æ–°äº‹ä»¶ï¼›</li><li>ContextStoppedEventï¼šApplicationContext åœæ­¢äº‹ä»¶ï¼›</li><li>ContextClosedEventï¼šApplicationContext å…³é—­äº‹ä»¶ã€‚</li></ul><div class=pgc-img><img alt=ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7a1c71a050ad43f79039b8df90bffa60><p class=pgc-img-caption></p></div><p><br></p><p>Spring 4.2 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œäº‹ä»¶å¿…é¡»ç»§æ‰¿ ApplicationEventï¼Œä» Spring 4.2 ç‰ˆå¼€å§‹ï¼Œæ¡†æ¶æä¾›äº† PayloadApplicationEvent ç”¨äºåŒ…è£…ä»»æ„ç±»å‹ï¼Œä¸å¼ºåˆ¶äº‹ä»¶å¯¹è±¡ç»§æ‰¿ ApplicationEventã€‚å½“æˆ‘ä»¬å‘é€ä¸€ä¸ªä»»æ„ç±»å‹çš„äº‹ä»¶å¯¹è±¡æ—¶ï¼Œæ¡†æ¶å†…éƒ¨è‡ªåŠ¨åŒ…è£…ä¸º PayloadApplicationEvent äº‹ä»¶å¯¹è±¡ã€‚</p><h2 class=pgc-h-arrow-right>äº‹ä»¶ç›‘å¬è€…</h2><p>äº‹ä»¶ç›‘å¬è€… ApplicationListener ç»§æ‰¿è‡ª JDK çš„ EventListener ï¼ŒJDK è¦æ±‚æ‰€æœ‰ç›‘å¬è€…ç»§æ‰¿å®ƒã€‚ç›‘å¬è€…åªæœ‰ä¸€ä¸ªæ–¹æ³• onApplicationEventï¼Œç”¨æ¥å¤„ç†äº‹ä»¶ ApplicationEventã€‚</p><pre><code>@FunctionalInterfacepublic interface ApplicationListener&lt;E extends ApplicationEvent&gt;     extends EventListener {    void onApplicationEvent(E event);}</code></pre><p>åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™æ£€æµ‹åº”ç”¨ä¸­çš„ç›‘å¬è€…å¹¶æŠŠç”¨æˆ·å®ç°çš„ç›‘å¬è€…æ³¨å†Œåˆ° SimpleApplicationEventMulticaster é›†åˆä¸­ã€‚</p><p>Spring ä¹Ÿæ”¯æŒç›´æ¥æ³¨è§£çš„å½¢å¼è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œä½¿ç”¨æ³¨è§£ @EventListener å³å¯ã€‚ä½¿ç”¨æ³¨è§£æ—¶ï¼Œæ–¹æ³•å¯ä»¥è¿”å›ä»»æ„ç±»å‹ï¼Œå¦‚æœè¿”å›å€¼ä¸ä¸º null åˆ™å½“åšä¸€ä¸ªæ–°äº‹ä»¶å†æ¬¡å‘å¸ƒã€‚</p><pre><code>@Servicepublic class AnnoEventListener {    @EventListener    public void listen(MyEvent myEvent){        System.out.println("receive " + myEvent.getSource());    }}</code></pre><p>æ³¨è§£å½¢å¼çš„ç›‘å¬è€…æ˜¯é€šè¿‡ EventListenerMethodProcessor æ³¨å†Œåˆ°å®¹å™¨ä¸­çš„ã€‚è¯¥ç±»å®šä¹‰äº†ä¸€ä¸ª Beanï¼Œåœ¨åˆå§‹åŒ–å®Œæˆåï¼Œè°ƒç”¨å®ƒçš„åç½®å›è°ƒæ–¹æ³• afterSingletonsInstantiatedï¼Œåœ¨æ–¹æ³•ä¸­éå†å®¹å™¨ä¸­æ‰€æœ‰çš„ beanï¼Œæå–å‡º EventListener æ³¨è§£ä¿®é¥°çš„æ–¹æ³•å¹¶æ ¹æ®æ³¨è§£çš„å‚æ•°åˆ›å»º ApplicationListener å¯¹è±¡åŠ å…¥åˆ° ApplicationContext ç›‘å¬åˆ—è¡¨ä¸­ã€‚</p><h2 class=pgc-h-arrow-right>å‘å¸ƒäº‹ä»¶</h2><p>ApplicationEventPublisher æ¥å£å®šä¹‰äº†äº‹ä»¶å‘å¸ƒæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>@FunctionalInterfacepublic interface ApplicationEventPublisher {    default void publishEvent(ApplicationEvent event) {        publishEvent((Object) event);    }    void publishEvent(Object event);}</code></pre><p>ApplicationContext æ¥å£ç»§æ‰¿äº† ApplicationEventPublisher ï¼Œå¹¶åœ¨ AbstractApplicationContext å®ç°äº†å…·ä½“ä»£ç ï¼Œå®é™…æ‰§è¡Œæ˜¯å§”æ‰˜ç»™ ApplicationEventMulticasterã€‚</p><div class=pgc-img><img alt=ä¸ºä½ æ­ç§˜ç¥ç§˜çš„springç›‘å¬æœºåˆ¶ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bfbb5a34b4104d81b5edab6158a994e7><p class=pgc-img-caption></p></div><p><br></p><p>ApplicationEventMulticaster æ¥å£å®šä¹‰äº†å¯¹ç›‘å¬è€…çš„æ“ä½œï¼Œå¦‚å¢åŠ ç›‘å¬è€…ã€ç§»é™¤ç›‘å¬è€…ï¼Œä»¥åŠå‘å¸ƒäº‹ä»¶çš„æ–¹æ³•ã€‚æ¡†æ¶æä¾›äº† ApplicationEventMulticaster æ¥å£çš„é»˜è®¤å®ç° SimpleApplicationEventMulticasterï¼Œå¦‚æœæœ¬åœ°å®¹å™¨ä¸­æ²¡æœ‰ ApplicationEventMulticaster çš„å®ç°å°±ä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å®ç°ã€‚</p><pre><code>public interface ApplicationEventMulticaster {    void addApplicationListener(ApplicationListener&lt;?&gt; listener);    void addApplicationListenerBean(String listenerBeanName);    void removeApplicationListener(ApplicationListener&lt;?&gt; listener);    void removeApplicationListenerBean(String listenerBeanName);    void removeAllListeners();    void multicastEvent(ApplicationEvent event);    void multicastEvent(ApplicationEvent event, @Nullable ResolvableType eventType);}</code></pre><p>åœ¨ SimpleApplicationEventMulticaster ä¸­ï¼Œå¯ä»¥çœ‹åˆ° multicastEvent æ–¹æ³•ä¸­éå†äº†æ‰€æœ‰çš„ Listenerï¼Œå¹¶ä¾æ¬¡è°ƒç”¨ Listener çš„ onApplicationEvent æ–¹æ³•å‘å¸ƒäº‹ä»¶ã€‚Spring è¿˜æä¾›äº†å¼‚æ­¥å‘å¸ƒäº‹ä»¶çš„èƒ½åŠ›ï¼ŒtaskExecutor ä¸ä¸º null æ—¶å³å¼‚æ­¥æ‰§è¡Œã€‚</p><pre><code>public class SimpleApplicationEventMulticaster extends AbstractApplicationEventMulticaster {    @Nullable    private Executor taskExecutor;    @Override    public void multicastEvent(final ApplicationEvent event,                                @Nullable ResolvableType eventType) {        ResolvableType type =         (eventType != null ? eventType : resolveDefaultEventType(event));        for (final ApplicationListener&lt;?&gt; listener : getApplicationListeners(event, type)) {            Executor executor = getTaskExecutor();            if (executor != null) {                executor.execute(() -&gt; invokeListener(listener, event));            }            else {                invokeListener(listener, event);            }        }    }}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒSpring å¤„ç†äº‹ä»¶æ˜¯åŒæ­¥çš„ï¼Œç›‘å¬è€…çš„æ‰§è¡Œæ—¶é—´æœ€å¥½ä¸è¦å¤ªé•¿ï¼Œä»¥å…å½±å“ä¸»æµç¨‹ã€‚å¦‚æœäº‹ä»¶çš„å¤„ç†ä¸€å®šè¦è€—è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œè¯·ä½¿ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p><h2 class=pgc-h-arrow-right>é«˜çº§ç›‘å¬è€…</h2><p><strong>SmartApplicationListener</strong></p><p>SmartApplicationListener æ¥å£æ˜¯ ApplicationListener çš„å­æ¥å£ï¼Œè¿˜ç»§æ‰¿äº† Ordered æ¥å£ã€‚SmartApplicationListener å®šä¹‰äº†ä¸¤ä¸ª support æ–¹æ³•ç”¨äºåˆ¤æ–­äº‹ä»¶ç±»å‹ã€æ¥æºç±»å‹æ˜¯å¦å’Œå½“å‰ç›‘å¬è€…åŒ¹é…ï¼Œè¿™æ ·ç›‘å¬è€…å¯ä»¥ç­›é€‰è‡ªå·±æ„Ÿå…´è¶£çš„äº‹ä»¶å’Œæ¥æºã€‚ç»§æ‰¿ Ordered æ¥å£åï¼Œè¯¥ç›‘å¬è€…å…·å¤‡äº†æ’åºçš„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç…§ order ä»å°åˆ°å¤§çš„é¡ºåºç»™ç›‘å¬è€…ç¡®å®šä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä»è€Œç¡®ä¿æ‰§è¡Œé¡ºåºã€‚</p><pre><code>public interface Ordered {    int HIGHEST_PRECEDENCE = Integer.MIN_VALUE;    int LOWEST_PRECEDENCE = Integer.MAX_VALUE;    int getOrder();}public interface SmartApplicationListener     extends ApplicationListener&lt;ApplicationEvent&gt;, Ordered {    boolean supportsEventType(Class&lt;? extends ApplicationEvent&gt; eventType);    boolean supportsSourceType(Class&lt;?&gt; sourceType);}</code></pre><p><strong>GenericApplicationListener</strong></p><p>GenericApplicationListener æ¥å£æ˜¯ ApplicationListener çš„å­æ¥å£ï¼Œä¹Ÿç»§æ‰¿äº† Ordered æ¥å£ï¼ŒåŒ SmartApplicationListener ä¸€æ ·å…·æœ‰äº‹ä»¶ç­›é€‰èƒ½åŠ›å’Œæ’åºèƒ½åŠ›ã€‚ä½†ç­›é€‰äº‹ä»¶ä½¿ç”¨çš„æ˜¯ ResolvableType ç±»å‹ï¼Œè€Œä¸æ˜¯ ApplicationEvent ç±»å‹ã€‚</p><h2 class=pgc-h-arrow-right>æ€»ç»“</h2><p>æœ¬æ–‡æ¢è®¨äº† Spring ä¸­äº‹ä»¶çš„å®ç°åŸç†ï¼ŒåŸºäºäº‹ä»¶å¯ä»¥å¾ˆå¥½åœ°è§£è€¦ä»£ç ï¼Œäº†è§£äº†èƒŒåçš„å®ç°åŸç†å¯ä»¥æ›´å¥½åœ°ä½¿ç”¨äº‹ä»¶ã€‚</p><p><br></p><p>åŸæ–‡é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/40071652</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'spring','ç›‘å¬','æœºåˆ¶'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>