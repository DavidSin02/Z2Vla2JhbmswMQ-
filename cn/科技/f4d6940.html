<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ | æå®¢å¿«è¨Š</title><meta property="og:title" content="é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p9.pstatp.com/large/dfic-imagehandler/4427306b-a579-437c-890d-01b5102611b1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f4d6940.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f4d6940.html><meta property="article:published_time" content="2020-10-29T21:08:25+08:00"><meta property="article:modified_time" content="2020-10-29T21:08:25+08:00"><meta name=Keywords content><meta name=description content="é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/f4d6940.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><blockquote><p>ä½¿ç”¨pythonçš„osæ¨¡å—ï¼Œç®€å•æ–¹ä¾¿å®Œæˆå¯¹æ–‡ä»¶å¤¹ã€æ–‡ä»¶åŠè·¯å¾„çš„ç®¡ç†ä¸è®¿é—®æ“ä½œã€‚</p></blockquote><h1 class=pgc-h-arrow-right>1 å‰è¨€</h1><p>åœ¨æœ€è¿‘å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œè¯»å–ã€éå†ã€ä¿®æ”¹ç­‰æ“ä½œï¼Œæƒ³è¦å¿«é€Ÿã€ç®€å•çš„å®Œæˆè¿™äº›æ“ä½œï¼Œæˆ‘é€‰æ‹©ç”¨ python ã€‚é€šè¿‡ python çš„æ ‡å‡†å†…ç½® os æ¨¡å—ï¼Œåªéœ€è¦å‡ è¡Œä»£ç ï¼Œå³å¯å®Œæˆæƒ³è¦çš„æ“ä½œã€‚ç»è¿‡å¯¹ os çš„ä½¿ç”¨ï¼Œæœ¬æ–‡æŠŠ os æ¨¡å—çš„å¸¸ç”¨çš„æ“ä½œè¿›è¡Œæ€»ç»“ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªåˆ’åˆ†ï¼š</p><ul><li>æ–‡ä»¶å¤¹æ“ä½œï¼šå³æ–‡ä»¶å¤¹çš„åˆ›å»ºã€ä¿®æ”¹ï¼ˆæ”¹å/ç§»åŠ¨ï¼‰ï¼ŒæŸ¥è¯¢ï¼ˆæŸ¥çœ‹ã€éå†ï¼‰ã€åˆ é™¤ç­‰ã€‚</li><li>æ–‡ä»¶æ“ä½œï¼šå³æ–‡ä»¶çš„åˆ›å»ºã€ä¿®æ”¹ã€è¯»å–ã€åˆ é™¤ç­‰ã€‚</li><li>ï¼ˆæ–‡ä»¶å¤¹/æ–‡ä»¶ï¼‰è·¯å¾„æ“ä½œï¼šå³æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶çš„è·¯å¾„æ“ä½œï¼Œå¦‚ç»å¯¹è·¯å¾„ï¼Œæ–‡ä»¶åä¸è·¯å¾„åˆ†å‰²ï¼Œæ‰©å±•ååˆ†å‰²ç­‰</li></ul><p>æœ¬æ–‡æ¶‰åŠå¸¸ç”¨ çš„ os å‡½æ•°çš„ä½¿ç”¨å±•ç¤ºï¼Œä¸»è¦ä½¿ç”¨ python äº¤äº’æ¨¡å¼ä¸‹è¿›è¡Œä»£ç è¯´æ˜ã€‚åç»­æ“ä½œé»˜è®¤å·²ç»å¼•å…¥ os æ¨¡å—ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>import oså¤åˆ¶ä»£ç </code></pre><p><br></p><div class=pgc-img><img alt=é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/4427306b-a579-437c-890d-01b5102611b1><p class=pgc-img-caption></p></div><p><strong>å¦‚æœå¤§å®¶åœ¨å­¦ä¹ ä¸­é‡åˆ°å›°éš¾ï¼Œæƒ³æ‰¾ä¸€ä¸ªpythonå­¦ä¹ äº¤æµç¯å¢ƒï¼Œå¯ä»¥åŠ å…¥æˆ‘ä»¬çš„python</strong><strong>è£™</strong><strong>ï¼Œå…³æ³¨å°ç¼–ï¼Œå¹¶ç§ä¿¡â€œ01â€å³å¯</strong><strong>è¿›è£™</strong><strong>ï¼Œé¢†å–pythonå­¦ä¹ èµ„æ–™ï¼Œä¼šèŠ‚çº¦å¾ˆå¤šæ—¶é—´ï¼Œå‡å°‘å¾ˆå¤šé‡åˆ°çš„éš¾é¢˜ã€‚</strong></p><h1 class=pgc-h-arrow-right>2 æ–‡ä»¶å¤¹æ“ä½œ</h1><p>ä»¥æœ¬åœ° E://pythontest ç›®å½•ä½œä¸ºæ¼”ç¤ºç›®å½•ï¼Œæ­¤ç›®å½•ä¸‹å½“å‰æ–‡ä»¶å¦‚ä¸‹ï¼š</p><pre><code>test â”‚ test.txt â””â”€test-1     test-1.txtå¤åˆ¶ä»£ç </code></pre><p>test åŠ test-1 æ˜¯æ–‡ä»¶å¤¹ï¼Œtest.txt åŠ test-1.txt æ˜¯æ–‡ä»¶ã€‚</p><h1 class=pgc-h-arrow-right>2.1 æŸ¥è¯¢æ“ä½œ</h1><p>ç†Ÿæ‚‰ linux åŒå­¦åº”è¯¥å¯¹ ls / pwd / cd ç­‰æ“ä½œä¸é™Œç”Ÿï¼Œå¯¹åº”çš„ python ä¹Ÿæœ‰å¯¹åº”çš„æ–¹æ³•ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>listdir ï¼š æ–‡ä»¶åŠç›®å½•åˆ—è¡¨</li><li>getcwd ï¼šè·å–å½“å‰ç›®å½•</li><li>chdir ï¼šæ›´æ¢ç›®å½•</li><li>stat ï¼šæ–‡ä»¶åŠç›®å½•åŸºæœ¬ä¿¡æ¯</li><li>walk ï¼šé€’å½’éå†ç›®å½•</li></ul><pre><code>&gt;&gt;&gt; os.chdir("E://pythontest")  # æ›´æ”¹ç›®å½•&gt;&gt;&gt; os.getcwd()                 # è·å–å½“å‰ç›®å½•'E:\\pythontest'&gt;&gt;&gt; os.listdir("test")          # æ–‡ä»¶åŠç›®å½•åˆ—è¡¨ï¼Œç›¸å¯¹è·¯å¾„['test-1', 'test.txt']          &gt;&gt;&gt; os.listdir("E://pythontest/test")  # æ–‡ä»¶åŠç›®å½•åˆ—è¡¨ï¼Œç»å¯¹è·¯å¾„['test-1', 'test.txt']&gt;&gt;&gt; os.stat("test")             # è·å–ç›®å½•ä¿¡æ¯os.stat_result(st_mode=16895, st_ino=4503599627377599, st_dev=266147611, st_nlink=1, st_uid=0, st_gid=0, st_size=0, st_atime=1590833033, st_mtime=1590832647, st_ctime=1590832207)&gt;&gt;&gt; os.stat("test/test.txt")    # è·å–æ–‡ä»¶ä¿¡æ¯os.stat_result(st_mode=33206, st_ino=2251799813692354, st_dev=266147611, st_nlink=1, st_uid=0, st_gid=0, st_size=4, st_atime=1590832653, st_mtime=1590832609, st_ctime=1590832598)å¤åˆ¶ä»£ç </code></pre><p>å…¶ä¸­ stat å‡½æ•°è¿”å›çš„æ˜¯æ–‡ä»¶æˆ–è€…ç›®å½•çš„åŸºæœ¬ä¿¡æ¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><strong>st_mode:</strong> inode ä¿æŠ¤æ¨¡å¼</li><li><strong>st_ino:</strong> inode èŠ‚ç‚¹å·ã€‚</li><li><strong>st_dev:</strong> inode é©»ç•™çš„è®¾å¤‡ã€‚</li><li><strong>st_nlink:</strong> inode çš„é“¾æ¥æ•°ã€‚</li><li><strong>st_uid:</strong> æ‰€æœ‰è€…çš„ç”¨æˆ·IDã€‚</li><li><strong>st_gid:</strong> æ‰€æœ‰è€…çš„ç»„IDã€‚</li><li><strong>st_size:</strong> æ™®é€šæ–‡ä»¶ä»¥å­—èŠ‚ä¸ºå•ä½çš„å¤§å°</li><li><strong>st_atime:</strong> ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ã€‚</li><li><strong>st_mtime:</strong> æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚</li><li><strong>st_ctime:</strong> åˆ›å»ºæ—¶é—´ã€‚</li></ul><p>æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ st_size ã€st_ctime åŠ st_mtime è·å–æ–‡ä»¶å¤§å°ï¼Œåˆ›å»ºæ—¶é—´ï¼Œä¿®æ”¹æ—¶é—´ã€‚å¦å¤–ï¼Œæˆ‘ä»¬çœ‹åˆ°è¾“å‡ºçš„æ—¶é—´æ˜¯ç§’æ•°ï¼Œåœ¨è¿™é‡Œæä¸€ä¸‹ï¼Œå…³äºæ—¥æœŸçš„è½¬æ¢å¤„ç†ã€‚</p><p>ï¼ˆ1ï¼‰ç§’æ•°è½¬æ—¥æœŸæ—¶é—´æ ¼å¼å­—ç¬¦ä¸²</p><pre><code>&gt;&gt;&gt; import time                              # å¼•å…¥timeæ¨¡å—&gt;&gt;&gt; timestruct = time.localtime(1590803070)  # è½¬æ¢ä¸ºæ—¶é—´ç»“æ„ä½“&gt;&gt;&gt; print(timestruct)time.struct_time(tm_year=2020, tm_mon=5, tm_mday=30, tm_hour=9, tm_min=44, tm_sec=30, tm_wday=5, tm_yday=151, tm_isdst=0)&gt;&gt;&gt; time.strftime("%Y-%m-%d %H:%M:%S",timestruct)   # æ ¼å¼åŒ–æ—¶é—´'2020-05-30 09:44:30'å¤åˆ¶ä»£ç </code></pre><p>ï¼ˆ2ï¼‰æ ¼å¼æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²è½¬ç§’æ•°</p><pre><code>&gt;&gt;&gt; import datetime               # å¼•å…¥datetimeæ¨¡å—&gt;&gt;&gt; timeobject = datetime.datetime.strptime("2020-05-23 10:00:00","%Y-%m-%d %H:%M:%S") #è§£ææ—¶é—´å­—ç¬¦ä¸²ä¸ºæ—¶é—´å¯¹è±¡&gt;&gt;&gt; timeseconds=time.mktime(timeobject.timetuple())  # è·å–æ—¶é—´ç§’æ•°&gt;&gt;&gt; print(int(timeseconds))       # è½¬ä¸ºintæ˜¾ç¤º1590199200å¤åˆ¶ä»£ç </code></pre><ul><li>éå†æ“ä½œ walk å‡½æ•°å¯¹ç›®å½•è¿›è¡Œé€’å½’éå†ï¼Œè¿”å› rootï¼Œdirsï¼Œfilesï¼Œåˆ†åˆ«å¯¹åº”å½“å‰çš„éå†çš„ç›®å½•ï¼Œæ­¤ç›®å½•ä¸­çš„å­ç›®å½•åŠæ–‡ä»¶ã€‚</li></ul><pre><code>&gt;&gt;&gt; data = os.walk("test")               # éå†testç›®å½•&gt;&gt;&gt; for root,dirs,files in data:         # é€’å½’éå†åŠè¾“å‡º...    print("root:%s" % root)...    for dir in dirs:...       print(os.path.join(root,dir))...    for file in files:...       print(os.path.join(root,file))...root:testtest\test-1test\test-2test\test.txtroot:test\test-1test\test-1\test-1.txtroot:test\test-2test\test-2\test-2.txtå¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>2.2 åˆ›å»ºæ“ä½œ</h1><ul><li>mkdir ï¼šæ–°å»ºå•ä¸ªç›®å½•ï¼Œè‹¥ç›®å½•è·¯å¾„ä¸­çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¤±è´¥</li><li>makedirs ï¼šæ–°å»ºå¤šä¸ªç›®å½•ï¼Œè‹¥ç›®å½•è·¯å¾„ä¸­çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»º</li></ul><pre><code>&gt;&gt;&gt; os.mkdir("test")&gt;&gt;&gt; os.mkdir("test1/test1-1")          # çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼ŒæŠ¥é”™Traceback (most recent call last):  File "&lt;stdin&gt;", line 1, in &lt;module&gt;FileNotFoundError: [WinError 3] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚: 'test1/test1-1'&gt;&gt;&gt; os.makedirs("test1/test1-1")       # çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨åˆ›å»º&gt;&gt;&gt; os.listdir("test1")['test1-1']å¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>2.3 åˆ é™¤æ“ä½œ</h1><ul><li>rmdir ï¼šåˆ é™¤å•ä¸ªç©ºç›®å½•ï¼Œç›®å½•ä¸ä¸ºç©ºåˆ™æŠ¥é”™</li><li>removedirs ï¼š æŒ‰è·¯å¾„åˆ é™¤é€’å½’å¤šçº§ç©ºç›®å½•ï¼Œç›®å½•ä¸ä¸ºç©ºåˆ™æŠ¥é”™</li></ul><pre><code>&gt;&gt;&gt; os.rmdir("test1")                         # è‹¥ç›®å½•ä¸ä¸ºç©ºï¼ŒæŠ¥é”™Traceback (most recent call last):  File "&lt;stdin&gt;", line 1, in &lt;module&gt;OSError: [WinError 145] ç›®å½•ä¸æ˜¯ç©ºçš„ã€‚: 'test1'&gt;&gt;&gt; os.rmdir("test1/test1-1")&gt;&gt;&gt; os.removedirs("test1/test1-1")            # åˆ é™¤å¤šçº§ç©ºç›®å½•&gt;&gt;&gt; os.listdir(".")['test']å¤åˆ¶ä»£ç </code></pre><p>ç”±äºåˆ é™¤ç©ºç›®å½•çš„é™åˆ¶ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨ shutil æ¨¡å—ä¸­çš„ rmtree å‡½æ•°ï¼Œå¯ä»¥åˆ é™¤ä¸ä¸ºç©ºçš„ç›®å½•åŠå…¶æ–‡ä»¶ã€‚</p><h1 class=pgc-h-arrow-right>2.4 ä¿®æ”¹æ“ä½œ</h1><ul><li>rename ï¼šé‡å‘½åç›®å½•æˆ–æ–‡ä»¶ï¼Œå¯ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ï¼ˆå³ç§»åŠ¨æ“ä½œï¼‰ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ã€‚</li><li>renames ï¼šé‡å‘½åç›®å½•æˆ–æ–‡ä»¶ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»º</li></ul><pre><code>&gt;&gt;&gt; os.makedirs("test1/test1-1")&gt;&gt;&gt; os.rename("test1/test1-1","test1/test1-2")     # test1-1 ä¿®æ”¹ä¸ºtest1-2&gt;&gt;&gt; os.listdir("test1")['test1-2']&gt;&gt;&gt; os.rename("test1/test1-2","test2/test2-2")     # ç”±äºtest2ç›®å½•ä¸å­˜åœ¨ï¼ŒæŠ¥é”™Traceback (most recent call last):  File "&lt;stdin&gt;", line 1, in &lt;module&gt;FileNotFoundError: [WinError 3] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚: 'test1/test1-2' -&gt; 'test2/test2-2'&gt;&gt;&gt; os.renames("test1/test1-2","test2/test2-2")    # renameså¯è‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„ç›®å½•&gt;&gt;&gt; os.listdir("test2")['test2-2']å¤åˆ¶ä»£ç </code></pre><p>å¦‚æœç›®æ ‡è·¯å¾„æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆos.rename()å’Œos.renames()éƒ½ä¼šæŠ¥é”™ï¼šFileExistsError: [WinError 183] å½“æ–‡ä»¶å·²å­˜åœ¨æ—¶ï¼Œæ— æ³•åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</p><h1 class=pgc-h-arrow-right>3 æ–‡ä»¶æ“ä½œ</h1><h1 class=pgc-h-arrow-right>3.1 æŸ¥è¯¢æ“ä½œ</h1><ul><li>open/read/close ï¼šæ–‡ä»¶è¯»å–</li><li>stat ï¼šæ–‡ä»¶ä¿¡æ¯ï¼Œè¯¦ç»†è§å‰é¢æ–‡ä»¶å¤¹ä¸­çš„ stat è¯´æ˜</li></ul><pre><code>&gt;&gt;&gt; f = os.open("test/test.txt", os.O_RDWR|os.O_CREAT)  # æ‰“å¼€æ–‡ä»¶&gt;&gt;&gt; str_bytes = os.read(f,100)                          # è¯»100å­—èŠ‚&gt;&gt;&gt; str = bytes.decode(str_bytes)                       # å­—èŠ‚è½¬å­—ç¬¦ä¸²&gt;&gt;&gt; print(str)test write data&gt;&gt;&gt; os.close(f)                                         # å…³é—­æ–‡ä»¶å¤åˆ¶ä»£ç </code></pre><p>æ³¨æ„ open/read/close éœ€è¦ä¸€èµ·æ“ä½œï¼Œå…¶ä¸­ open æ“ä½œéœ€è¦æŒ‡å®šæ¨¡å¼ï¼Œä¸Šè¿°æ˜¯ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ã€‚å„æ¨¡å¼å…·ä½“å¦‚ä¸‹ï¼š</p><p><strong>flags</strong> -- è¯¥å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹é€‰é¡¹ï¼Œå¤šä¸ªä½¿ç”¨ "|" éš”å¼€ï¼š</p><ul><li><strong>os.O_RDONLY:</strong> ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€</li><li><strong>os.O_WRONLY:</strong> ä»¥åªå†™çš„æ–¹å¼æ‰“å¼€</li><li><strong>os.O_RDWR :</strong> ä»¥è¯»å†™çš„æ–¹å¼æ‰“å¼€</li><li><strong>os.O_NONBLOCK:</strong> æ‰“å¼€æ—¶ä¸é˜»å¡</li><li><strong>os.O_APPEND:</strong> ä»¥è¿½åŠ çš„æ–¹å¼æ‰“å¼€</li><li><strong>os.O_CREAT:</strong> åˆ›å»ºå¹¶æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶</li><li><strong>os.O_TRUNC:</strong> æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¹¶æˆªæ–­å®ƒçš„é•¿åº¦ä¸ºé›¶ï¼ˆå¿…é¡»æœ‰å†™æƒé™ï¼‰</li><li><strong>os.O_EXCL:</strong> å¦‚æœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</li><li><strong>os.O_SHLOCK:</strong> è‡ªåŠ¨è·å–å…±äº«é”</li><li><strong>os.O_EXLOCK:</strong> è‡ªåŠ¨è·å–ç‹¬ç«‹é”</li><li><strong>os.O_DIRECT:</strong> æ¶ˆé™¤æˆ–å‡å°‘ç¼“å­˜æ•ˆæœ</li><li><strong>os.O_FSYNC :</strong> åŒæ­¥å†™å…¥</li><li><strong>os.O_NOFOLLOW:</strong> ä¸è¿½è¸ªè½¯é“¾æ¥</li></ul><h1 class=pgc-h-arrow-right>3.2 åˆ›å»ºæ“ä½œ</h1><p>å‰é¢å·²æåˆ°ï¼Œä½¿ç”¨ open ï¼ŒæŒ‡å®šæ¨¡å¼ï¼Œ è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºã€‚æœ‰ç‚¹ç±»ä¼¼ linux æ“ä½œä¸­çš„ touchã€‚</p><pre><code>&gt;&gt;&gt; f = os.open("test/test.txt", os.O_RDWR|os.O_CREAT)   # è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º&gt;&gt;&gt; os.close(f)å¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>3.3 ä¿®æ”¹æ“ä½œ</h1><ul><li>open/write/close ï¼šå†™å…¥æ–‡ä»¶å†…å®¹</li><li>rename ï¼Œrenames ï¼š ä¸å‰é¢ä»‹ç»çš„ä¿®æ”¹åç§°ã€ç§»åŠ¨æ“ä½œä¸€è‡´ã€‚</li></ul><pre><code>&gt;&gt;&gt; f = os.open("test/test.txt", os.O_RDWR|os.O_CREAT)     # æ‰“å¼€æ–‡ä»¶&gt;&gt;&gt; os.write(f,b"test write data")                         # å†™å…¥å†…å®¹15&gt;&gt;&gt; os.close(f)                                   # å…³é—­æ–‡ä»¶å¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>3.4 åˆ é™¤</h1><ul><li>remove ï¼šåˆ é™¤æ–‡ä»¶ï¼Œæ³¨æ„ä¸èƒ½åˆ é™¤ç›®å½•ï¼ˆä½¿ç”¨ rmdir/removedirsï¼‰</li></ul><pre><code>&gt;&gt;&gt; os.remove("test/test-1")       # åˆ é™¤ç›®å½•æŠ¥é”™Traceback (most recent call last):  File "&lt;stdin&gt;", line 1, in &lt;module&gt;FileNotFoundError: [WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚: 'test/test1'&gt;&gt;&gt; os.remove("test/test.txt")     # åˆ é™¤æ–‡ä»¶&gt;&gt;&gt; os.listdir("test")['test-1']å¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>4 è·¯å¾„æ“ä½œ</h1><p>åœ¨ä½¿ç”¨æ–‡ä»¶æˆ–ç›®å½•è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦å¯¹æ–‡ä»¶åŠç›®å½•è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œå› æ­¤ï¼Œos ä¸­æœ‰ä¸€ä¸ªå­æ¨¡å— pathï¼Œä¸“é—¨å°±æ˜¯å¤„ç†è·¯å¾„æ“ä½œçš„ã€‚ä¸»è¦æœ‰ä»¥ä¸‹æ“ä½œï¼š</p><ul><li>abspath ï¼šè¿”å›ç»å¯¹è·¯å¾„</li></ul><pre><code>&gt;&gt;&gt; os.path.abspath("test")'E:\\pythontest\\test'å¤åˆ¶ä»£ç </code></pre><ul><li>exists ï¼šåˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</li></ul><pre><code>&gt;&gt;&gt; os.path.exists("test")True&gt;&gt;&gt; os.path.exists("test/test.txt")False&gt;&gt;&gt; os.path.exists("test/test-1/test-1.txt")Trueå¤åˆ¶ä»£ç </code></pre><ul><li>isfile/isdir ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶/ç›®å½•</li></ul><pre><code>&gt;&gt;&gt; os.path.isdir("test")True&gt;&gt;&gt; os.path.isfile("test/test-1/test-1.txt")Trueå¤åˆ¶ä»£ç </code></pre><ul><li>basename/dirnameï¼šè·å–è·¯å¾„å°¾éƒ¨å’Œè·¯å¾„å¤´éƒ¨ã€‚å…¶å®å°±æ˜¯ä»¥è·¯å¾„ä¸­æœ€åä¸€ä¸ª / ä¸ºåˆ†å‰²ç¬¦ï¼Œåˆ†ä¸ºå¤´ï¼ˆheadï¼‰ å’Œå°¾ï¼ˆtailï¼‰ä¸¤éƒ¨åˆ†ï¼Œtail æ˜¯ basename è¿”å›çš„å†…å®¹ï¼Œhead æ˜¯ dirname è¿”å›çš„å†…å®¹ã€‚ç»å¸¸ç”¨äºè·å–æ–‡ä»¶åï¼Œç›®å½•åç­‰æ“ä½œ</li></ul><pre><code>&gt;&gt;&gt; os.path.basename("test/test-1/test-1.txt")   # æ–‡ä»¶å'test-1.txt'&gt;&gt;&gt; os.path.basename("test/test-1/")     # ç©ºå†…å®¹''&gt;&gt;&gt; os.path.basename("test/test-1")      # ç›®å½•å'test-1'&gt;&gt;&gt; os.path.dirname("test/test-1/test-1.txt")   # æ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„'test/test-1'&gt;&gt;&gt; os.path.dirname("test/test-1/")   # ç›®å½•è·¯å¾„'test/test-1'&gt;&gt;&gt; os.path.dirname("test/test-1")   # çˆ¶ç›®å½•è·¯å¾„'test'å¤åˆ¶ä»£ç </code></pre><ul><li>join ï¼šåˆæˆè·¯å¾„ï¼Œå³æŠŠä¸¤ä¸ªå‚æ•°ä½¿ç”¨ç³»ç»Ÿè·¯å¾„åˆ†å‰²ç¬¦è¿›è¡Œè¿æ¥ï¼Œå½¢æˆå®Œæ•´è·¯å¾„ã€‚</li></ul><pre><code>&gt;&gt;&gt; os.path.join("test","test-1")   # è¿æ¥ä¸¤ä¸ªç›®å½•'test\\test-1'&gt;&gt;&gt; os.path.join("test\\test-1","test-1.txt")   # è¿æ¥ç›®å½•ä¸æ–‡ä»¶å'test\\test-1\\test-1.txt'å¤åˆ¶ä»£ç </code></pre><ul><li>split ï¼šåˆ†å‰²æ–‡ä»¶åå’Œæ–‡ä»¶å¤¹ï¼Œå³æŠŠ path ä»¥æœ€åä¸€ä¸ªæ–œçº¿"/"ä¸ºåˆ†éš”ç¬¦ï¼Œåˆ‡å‰²ä¸º head å’Œ tail ï¼Œä»¥ (head, tail) å…ƒç»„çš„å½¢åŠ¿è¿”å›ã€‚</li></ul><pre><code>&gt;&gt;&gt; os.path.split("test/test-1")     # åˆ†å‰²ç›®å½•('test', 'test-1')&gt;&gt;&gt; os.path.split("test/test-1/")    # ä»¥/ç»“å°¾çš„ç›®å½•åˆ†å‰²('test/test-1', '')&gt;&gt;&gt; os.path.split("test/test-1/test-1.txt")  # åˆ†å‰²æ–‡ä»¶('test/test-1', 'test-1.txt')å¤åˆ¶ä»£ç </code></pre><ul><li>splitext ï¼šåˆ†å‰²è·¯å¾„åå’Œæ–‡ä»¶æ‰©å±•åï¼ŒæŠŠpath ä»¥æœ€åä¸€ä¸ªæ‰©å±•ååˆ†éš”ç¬¦â€œ.â€åˆ†å‰²ï¼Œåˆ‡å‰²ä¸º head å’Œ tail ï¼Œä»¥ (head, tail) å…ƒç»„çš„å½¢åŠ¿è¿”å›ã€‚æ³¨æ„ä¸ split çš„åŒºåˆ«æ˜¯åˆ†éš”ç¬¦çš„ä¸åŒã€‚</li></ul><pre><code>&gt;&gt;&gt; os.path.splitext("test/test-1")  ('test/test-1', '')&gt;&gt;&gt; os.path.splitext("test/test-1/") ('test/test-1/', '')&gt;&gt;&gt; os.path.splitext("test/test-1/test-1.txt")  # åŒºåˆ†æ–‡ä»¶ååŠæ‰©å±•å('test/test-1/test-1', '.txt')&gt;&gt;&gt; os.path.splitext("test/test-1/test-1.txt.tmp") # ä»¥æœ€åçš„"."ä¸ºåˆ†å‰²ç‚¹('test/test-1/test-1.txt', '.tmp')å¤åˆ¶ä»£ç </code></pre><h1 class=pgc-h-arrow-right>5 ç¤ºä¾‹åº”ç”¨</h1><p>ä¸‹é¢ä»¥ä¸€äº›å¹³æ—¶ä½¿ç”¨åˆ°çš„åœºæ™¯ï¼Œå¯¹å‰é¢çš„æ“ä½œå‡½æ•°è¿›è¡Œç»¼åˆä½¿ç”¨ã€‚</p><h1 class=pgc-h-arrow-right>5.1 æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å</h1><pre><code>def batch_rename(dir_path):    itemlist = os.listdir(dir_path)    # è·å–ç›®å½•æ–‡ä»¶åˆ—è¡¨    for item in itemlist:        # è¿æ¥æˆå®Œæ•´è·¯å¾„        item_path = os.path.join(dir_path, item)        print(item_path)        # ä¿®æ”¹æ–‡ä»¶å        if os.path.isfile(item_path):            splitext = os.path.splitext(item_path)            os.rename(item_path, splitext[0] + "-å‰¯æœ¬" + splitext[1])å¤åˆ¶ä»£ç </code></pre><p><br></p><div class=pgc-img><img alt=é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/129cb9504333475ab86dd39abfa90229><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>5.2 éå†ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶</h1><pre><code>def walk_ext_file(dir_path,ext):    # éå†    for root, dirs, files in os.walk(dir_path):        # è·å–æ–‡ä»¶åç§°åŠè·¯å¾„        for file in files:            file_path = os.path.join(root, file)            file_item = os.path.splitext(file_path)            # è¾“å‡ºæŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶è·¯å¾„            if ext == file_item[1]:                print(file_path)å¤åˆ¶ä»£ç </code></pre><p><br></p><div class=pgc-img><img alt=é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/05d9a2b3b9454c5ab1bc2dde3e906364><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>5.3 æŒ‰ä¿®æ”¹æ—¶é—´æ’åºæŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶</h1><pre><code>def sort_file(dir_path):    # æ’åºå‰    itemlist = os.listdir(dir_path)    print(itemlist)    # æ­£å‘æ’åº    itemlist.sort(key=lambda filename: os.path.getmtime(os.path.join(dir_path, filename)))    print(itemlist)    # åå‘æ’åº    itemlist.sort(key=lambda filename: os.path.getmtime(os.path.join(dir_path, filename)), reverse=True)    print(itemlist)    # è·å–æœ€æ–°ä¿®æ”¹çš„æ–‡ä»¶    print(itemlist[0])å¤åˆ¶ä»£ç </code></pre><p><br></p><div class=pgc-img><img alt=é›¶åŸºç¡€å°ç™½å¿…çœ‹ï¼špythonåŸºæœ¬æ“ä½œ-æ–‡ä»¶ã€ç›®å½•åŠè·¯å¾„ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c043d4bd856b45698b7e33749d018a36><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>6 æ€»ç»“</h1><p>åœ¨éœ€è¦å¯¹æ–‡ä»¶æˆ–è€…ç›®å½•è¿›è¡Œæ“ä½œæ—¶ï¼Œpython æ˜¯ä¸€ä¸ªç®€å•å¿«é€Ÿé€‰æ‹©ã€‚æœ¬æ–‡é€šè¿‡ python çš„æ ‡å‡†å†…ç½® os æ¨¡å—åŠå­æ¨¡å— os.path çš„å¸¸ç”¨æ–¹æ³•è¿›è¡Œä»‹ç»ï¼Œæœ€åç»“åˆä½¿ç”¨åœºæ™¯è¿›è¡Œç»¼åˆä½¿ç”¨ã€‚ç›¸ä¿¡å·²ç»æ»¡è¶³å¤§å®¶å¯¹æ–‡ä»¶åŠç›®å½•æ“ä½œçš„å¤§éƒ¨åˆ†éœ€æ±‚ã€‚</p><p><br><strong>æœ€åå¤šè¯´ä¸€å¥ï¼Œå°ç¼–æ˜¯ä¸€åpythonå¼€å‘å·¥ç¨‹å¸ˆï¼Œè¿™é‡Œæœ‰æˆ‘è‡ªå·±æ•´ç†äº†ä¸€å¥—æœ€æ–°çš„pythonç³»ç»Ÿå­¦ä¹ æ•™ç¨‹ï¼ŒåŒ…æ‹¬ä»åŸºç¡€çš„pythonè„šæœ¬åˆ°webå¼€å‘ã€çˆ¬è™«ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ ç­‰ã€‚æƒ³è¦è¿™äº›èµ„æ–™çš„å¯ä»¥å…³æ³¨å°ç¼–ï¼Œå¹¶ç§ä¿¡â€œ01â€é¢†å–ã€‚</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'åŸºæœ¬æ“ä½œ','é›¶åŸº','å°ç™½å¿…'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>