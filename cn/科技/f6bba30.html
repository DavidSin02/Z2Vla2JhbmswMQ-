<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/d055f9ada84b4227bc9c9f892143df3f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/f6bba30.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è®¯ Geek Bank</a></h1><p class=description>ä¸ºä½ å¸¦æ¥æœ€å…¨çš„ç§‘æŠ€çŸ¥è¯† ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>11.é€‚é…å™¨æ¨¡å¼</p><h3 class="md-end-block md-heading">11.1.å®šä¹‰</h3><p><strong>é€‚é…å™¨æ¨¡å¼</strong>æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½ä½¿æ¥å£ä¸å…¼å®¹çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’åˆä½œã€‚</p><p>é€‚é…å™¨æ¨¡å¼çš„è‹±æ–‡ç¿»è¯‘æ˜¯ <strong>Adapter Design Pattern</strong>ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ¨¡å¼å°±æ˜¯ç”¨æ¥åšé€‚é…çš„ï¼Œå®ƒå°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå¯å…¼å®¹çš„æ¥å£ï¼Œè®©åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p><p><strong>ç¤ºæ„å›¾</strong></p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d055f9ada84b4227bc9c9f892143df3f><p class=pgc-img-caption></p></div><p><strong>ç”Ÿæ´»åœºæ™¯ï¼š</strong>ç”µæºæ’è½¬æ¢å¤´ã€æ‰‹æœºå……ç”µè½¬æ¢å¤´ã€æ˜¾ç¤ºå™¨è½¬æ¥å¤´ã€‚</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7d2dd6539ec843cc916f12a14446d9ff><p class=pgc-img-caption></p></div><p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª<strong>é€‚é…å™¨</strong>ã€‚ è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œ èƒ½å¤Ÿ<strong>è½¬æ¢å¯¹è±¡æ¥å£</strong>ï¼Œ ä½¿å…¶èƒ½<strong>ä¸å…¶ä»–å¯¹è±¡è¿›è¡Œäº¤äº’</strong>ã€‚</p><p>é€‚é…å™¨æ¨¡å¼é€šè¿‡å°è£…å¯¹è±¡<strong>å°†å¤æ‚çš„è½¬æ¢è¿‡ç¨‹è—äºå¹•å</strong>ã€‚ è¢«å°è£…çš„å¯¹è±¡ç”šè‡³å¯Ÿè§‰ä¸åˆ°é€‚é…å™¨çš„å­˜åœ¨ã€‚</p><p>é€‚é…å™¨ä¸ä»…å¯ä»¥è½¬æ¢ä¸åŒæ ¼å¼çš„æ•°æ®ï¼Œ å…¶è¿˜æœ‰åŠ©äºé‡‡ç”¨ä¸åŒæ¥å£çš„å¯¹è±¡ä¹‹é—´çš„åˆä½œã€‚ å®ƒçš„è¿ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p><ol start=0><li>é€‚é…å™¨å®ç°ä¸å…¶ä¸­ä¸€ä¸ªç°æœ‰å¯¹è±¡å…¼å®¹çš„æ¥å£ã€‚</li><li>ç°æœ‰å¯¹è±¡å¯ä»¥ä½¿ç”¨è¯¥æ¥å£å®‰å…¨åœ°è°ƒç”¨é€‚é…å™¨æ–¹æ³•ã€‚</li><li>é€‚é…å™¨æ–¹æ³•è¢«è°ƒç”¨åå°†ä»¥å¦ä¸€ä¸ªå¯¹è±¡å…¼å®¹çš„æ ¼å¼å’Œé¡ºåºå°†è¯·æ±‚ä¼ é€’ç»™è¯¥å¯¹è±¡ã€‚</li></ol><p>æœ‰æ—¶ä½ ç”šè‡³å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒå‘é€‚é…å™¨æ¥å®ç°åŒå‘è½¬æ¢è°ƒç”¨ã€‚</p><h3 class="md-end-block md-heading">11.2.åº”ç”¨åœºæ™¯</h3><ol start=0><li>å°è£…æœ‰ç¼ºé™·çš„æ¥å£è®¾è®¡</li><li>ç»Ÿä¸€å¤šä¸ªç±»çš„æ¥å£è®¾è®¡</li><li>æ›¿æ¢ä¾èµ–çš„å¤–éƒ¨ç³»ç»Ÿ</li><li>å…¼å®¹è€ç‰ˆæœ¬æ¥å£</li><li>é€‚é…ä¸åŒæ ¼å¼çš„æ•°æ®</li></ol><h3 class="md-end-block md-heading">11.3.é€‚é…å™¨è§’è‰²</h3><p>Adaptee æ˜¯ä¸€ç»„ä¸å…¼å®¹ ITarget æ¥å£å®šä¹‰çš„æ¥å£ã€‚</p><p>ITarget è¡¨ç¤ºè¦è½¬åŒ–æˆçš„æ¥å£å®šä¹‰ã€‚</p><p>Adapter/Adaptor å°† Adaptee è½¬åŒ–æˆä¸€ç»„ç¬¦åˆ ITarget æ¥å£å®šä¹‰çš„æ¥å£ã€‚</p><p>é€‚é…å™¨æœ‰3ä¸­å½¢å¼ï¼šç±»é€‚é…å™¨ã€å¯¹è±¡é€‚é…å™¨ã€æ¥å£é€‚é…å™¨</p><h3 class="md-end-block md-heading">11.4.ç±»é€‚é…å™¨</h3><p>ç±»é€‚é…å™¨: åŸºäºç»§æ‰¿ã€‚</p><p>åšæ³•ï¼šè®©Adaptorå®ç°ITargetæ¥å£ï¼Œå¹¶ä¸”ç»§æ‰¿Adapteeï¼Œè¿™æ ·Adaptorå°±å…·å¤‡ITargetå’ŒAdapteeçš„ç‰¹æ€§ï¼Œå°±å¯ä»¥å°†ä¸¤è€…è¿›è¡Œè½¬åŒ–ã€‚</p><p>UMLç±»å›¾ï¼š</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5ff8fdba5fc6449da83b4fa0595e8512><p class=pgc-img-caption></p></div><pre><code>Â // ç±»é€‚é…å™¨: åŸºäºç»§æ‰¿Â â€‹Â // ITarget è¡¨ç¤ºè¦è½¬åŒ–æˆçš„æ¥å£å®šä¹‰Â public interface ITarget {Â  Â void f1();Â  Â void f2();Â  Â void fc();Â }Â â€‹Â // Adaptee æ˜¯ä¸€ç»„ä¸å…¼å®¹ ITarget æ¥å£å®šä¹‰çš„æ¥å£Â public class Adaptee {Â  Â public void fa() { //... }Â  Â public void fb() { //... }Â  Â public void fc() { //... }Â }Â â€‹Â // Adaptor å°† Adaptee è½¬åŒ–æˆä¸€ç»„ç¬¦åˆ ITarget æ¥å£å®šä¹‰çš„æ¥å£ Â  Â  Â Â public class Adaptor extends Adaptee implements ITarget {Â  Â public void f1() {Â  Â  Â super.fa();Â   }Â  Â Â  Â public void f2() {Â  Â  Â //...é‡æ–°å®ç°f2()...Â   }Â  Â Â  Â // è¿™é‡Œfc()ä¸éœ€è¦å®ç°ï¼Œç›´æ¥ç»§æ‰¿è‡ªAdapteeï¼Œè¿™æ˜¯è·Ÿå¯¹è±¡é€‚é…å™¨æœ€å¤§çš„ä¸åŒç‚¹Â }</code></pre><h3 class="md-end-block md-heading">11.5.å¯¹è±¡é€‚é…å™¨</h3><p>å¯¹è±¡é€‚é…å™¨ï¼šåŸºäºç»„åˆã€‚</p><p>åšæ³•ï¼šè®©Adaptor å®ç°ITarget æ¥å£ï¼Œç„¶åå†…éƒ¨æŒæœ‰Adapteeå®ä¾‹ï¼Œç„¶ååœ¨ITargetæ¥å£è§„å®šçš„æ–¹æ³•å†…è½¬æ¢Adapteeã€‚</p><p>URLç±»å›¾ï¼š</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/92485d340cd440d5bfecd87140f4169c><p class=pgc-img-caption></p></div><pre><code>Â // å¯¹è±¡é€‚é…å™¨ï¼šåŸºäºç»„åˆÂ â€‹Â // ITarget è¡¨ç¤ºè¦è½¬åŒ–æˆçš„æ¥å£å®šä¹‰Â public interface ITarget {Â  Â void f1();Â  Â void f2();Â  Â void fc();Â }Â â€‹Â // Adaptee æ˜¯ä¸€ç»„ä¸å…¼å®¹ ITarget æ¥å£å®šä¹‰çš„æ¥å£Â public class Adaptee {Â  Â public void fa() { //... }Â  Â public void fb() { //... }Â  Â public void fc() { //... }Â }Â â€‹Â // Adaptor å°† Adaptee è½¬åŒ–æˆä¸€ç»„ç¬¦åˆ ITarget æ¥å£å®šä¹‰çš„æ¥å£ Â  Â  Â  Â  Â  Â Â public class Adaptor implements ITarget {Â  Â private Adaptee adaptee;Â  Â Â  Â public Adaptor(Adaptee adaptee) {Â  Â  Â this.adaptee = adaptee;Â   }Â  Â Â  Â public void f1() {Â  Â  Â adaptee.fa(); //å§”æ‰˜ç»™AdapteeÂ   }Â  Â Â  Â public void f2() {Â  Â  Â //...é‡æ–°å®ç°f2()...Â   }Â  Â Â  Â public void fc() {Â  Â  Â adaptee.fc();Â   }Â }</code></pre><h3 class="md-end-block md-heading">11.5.æ¥å£é€‚é…å™¨</h3><p>ä½¿ç”¨æ¥å£é€‚é…å™¨è®©æˆ‘ä»¬åªå®ç°æˆ‘ä»¬æ‰€éœ€è¦çš„æ¥å£æ–¹æ³•</p><pre><code>Â public class CD { //è¿™ä¸ªç±»æ¥è‡ªå¤–éƒ¨sdkï¼Œæˆ‘ä»¬æ— æƒä¿®æ”¹å®ƒçš„ä»£ç Â  Â //...Â  Â public static void staticFunction1() { //... }Â  Â Â  Â public void uglyNamingFunction2() { //... }Â â€‹Â  Â public void tooManyParamsFunction3(int paramA, int paramB, ...) { //... }Â  Â Â  Â public void lowPerformanceFunction4() { //... }Â }Â â€‹Â // ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œé‡æ„Â public class ITarget {Â  Â void function1();Â  Â void function2();Â  Â void fucntion3(ParamsWrapperDefinition paramsWrapper);Â  Â void function4();Â  Â //...Â }Â // æ³¨æ„ï¼šé€‚é…å™¨ç±»çš„å‘½åä¸ä¸€å®šéå¾—æœ«å°¾å¸¦AdaptorÂ public class CDAdaptor extends CD implements ITarget {Â  Â //...Â  Â public void function1() {Â  Â  Â  super.staticFunction1();Â   }Â  Â Â  Â public void function2() {Â  Â  Â super.uglyNamingFucntion2();Â   }Â  Â Â  Â public void function3(ParamsWrapperDefinition paramsWrapper) {Â  Â  Â  super.tooManyParamsFunction3(paramsWrapper.getParamA(), ...);Â   }Â  Â Â  Â public void function4() {Â  Â  Â //...reimplement it...Â   }Â }</code></pre><h3 class="md-end-block md-heading">11.6.å®æˆ˜</h3><p>é‡æ„ç¬¬ä¸‰æ–¹ç™»å½•è‡ªç”±é€‚é…åœºæ™¯</p><p>é¦–å…ˆåˆ›å»ºç»Ÿä¸€ç™»é™†ç»“æœResultMsgç±»ï¼š</p><pre><code>Â @DataÂ public class ResultMsg {Â â€‹Â  Â  Â private int code;Â  Â  Â private String msg;Â  Â  Â private Object data;Â â€‹Â  Â  Â public ResultMsg(int code, String msg, Object data) {Â  Â  Â  Â  Â this.code = code;Â  Â  Â  Â  Â this.msg = msg;Â  Â  Â  Â  Â this.data = data;Â  Â   }Â }</code></pre><p>å‡è®¾è€ç³»ç»Ÿçš„çš„ç™»å½•é€»è¾‘PasswordServiceï¼š</p><pre><code>Â public class PassportService {Â â€‹Â  Â  Â /**Â  Â  Â  * æ³¨å†Œæ–¹æ³•Â  Â  Â  * @param usernameÂ  Â  Â  * @param passwordÂ  Â  Â  * @returnÂ  Â  Â  */Â  Â  Â public ResultMsg regist(String username,String password){Â  Â  Â  Â  Â return Â new ResultMsg(200,"æ³¨å†ŒæˆåŠŸ",new Member());Â  Â   }Â â€‹Â  Â  Â /**Â  Â  Â  * ç™»å½•çš„æ–¹æ³•Â  Â  Â  * @param usernameÂ  Â  Â  * @param passwordÂ  Â  Â  * @returnÂ  Â  Â  */Â  Â  Â public ResultMsg login(String username,String password){Â  Â  Â  Â  Â return null;Â  Â   }Â }</code></pre><p>éµå¾ªå¼€é—­åŸåˆ™ï¼Œè€ä»£ç æˆ‘ä»¬ä¸ä¿®æ”¹ã€‚å¼€å¯ä»£ç é‡æ„ä¹‹è·¯ï¼Œåˆ›å»ºMemberç±»ï¼š</p><pre><code>Â @DataÂ public class Member {Â â€‹Â  Â  Â private String username;Â  Â  Â private String password;Â  Â  Â private String mid;Â  Â  Â private String info;Â }</code></pre><p>è¿è¡Œç¨³å®šçš„ä»£ç ä¸æ”¹åŠ¨ã€‚åˆ›å»ºITargetè§’è‰²IPassportForThirdæ¥å£ã€‚</p><pre><code>Â public interface IPassportForThird {Â â€‹Â  Â  Â ResultMsg loginForQQ(String openId);Â â€‹Â  Â  Â ResultMsg loginForWechat(String openId);Â â€‹Â  Â  Â ResultMsg loginForToken(String token);Â â€‹Â  Â  Â ResultMsg loginForTelphone(String phone, String code);Â }</code></pre><p>åˆ›å»ºé€‚é…å™¨å…¼å®¹Adaptorè§’è‰²PassportForThirdAdapterç±»</p><pre><code>Â public class PassportForThirdAdapter implements IPassportForThird {Â â€‹Â  Â  Â public ResultMsg loginForQQ(String openId) {Â  Â  Â  Â  Â return processLogin(openId, LoginForQQAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForWechat(String openId) {Â  Â  Â  Â  Â return processLogin(openId, LoginForWechatAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForToken(String token) {Â  Â  Â  Â  Â return processLogin(token, LoginForTokenAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForTelphone(String phone, String code) {Â  Â  Â  Â  Â return processLogin(phone, LoginForTelAdapter.class);Â  Â   }Â â€‹Â  Â  Â private ResultMsg processLogin(String id,Class&lt;? extends ILoginAdapter&gt; clazz){Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â ILoginAdapter adapter = clazz.newInstance();Â  Â  Â  Â  Â  Â  Â if (adapter.support(adapter)){Â  Â  Â  Â  Â  Â  Â  Â  Â return adapter.login(id,adapter);Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   } catch (Exception e) {Â  Â  Â  Â  Â  Â  Â e.printStackTrace();Â  Â  Â  Â   }Â  Â  Â  Â  Â return null;Â  Â   }Â }</code></pre><p>æ ¹æ®ä¸åŒç™»å½•æ–¹å¼ï¼Œåˆ›å»ºä¸åŒç™»å½•Adaptorã€‚é¦–å…ˆï¼Œåˆ›å»ºLoginAdapteræ¥å£ï¼š</p><pre><code>public interface ILoginAdapter {    boolean support(Object object);    ResultMsg login(String id,Object adapter);}</code></pre><p>åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»AbstraceAdapterç»§æ‰¿PassportServiceåŸæœ‰åŠŸèƒ½ï¼ŒåŒæ—¶å®ç°ILoginAdapteræ¥å£ï¼Œç„¶ååˆ†åˆ«å®ç°ä¸åŒçš„ç™»å½•é€‚é…ã€‚</p><p>QQç™»å½•</p><pre><code>public class LoginForQQAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForQQAdapter;    }    public ResultMsg login(String id, Object adapter) {        if(!support(adapter)){return null;}        //accesseToken        //time        return super.loginForRegist(id,null);    }}</code></pre><p>å¾®ä¿¡ç™»å½•</p><pre><code>public class LoginForWechatAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForWechatAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>æ‰‹æœºç™»å½•</p><pre><code>public class LoginForTelAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForTelAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>Tokenç™»å½•</p><pre><code>public class LoginForTokenAdapter extends AbstraceAdapter {    public boolean support(Object adapter) {        return adapter instanceof LoginForTokenAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>åˆ›å»ºé€‚é…å™¨PassportForThirdAdapterç±»ï¼Œå®ç°ç›®æ ‡æ¥å£IPassportForThirdå…¼å®¹ã€‚</p><pre><code>public class PassportForThirdAdapter implements IPassportForThird {    public ResultMsg loginForQQ(String openId) {        return processLogin(openId, LoginForQQAdapter.class);    }    public ResultMsg loginForWechat(String openId) {        return processLogin(openId, LoginForWechatAdapter.class);    }    public ResultMsg loginForToken(String token) {        return processLogin(token, LoginForTokenAdapter.class);    }    public ResultMsg loginForTelphone(String phone, String code) {        return processLogin(phone, LoginForTelAdapter.class);    }    private ResultMsg processLogin(String id,Class&lt;? extends ILoginAdapter&gt; clazz){        try {            ILoginAdapter adapter = clazz.newInstance();            if (adapter.support(adapter)){                return adapter.login(id,adapter);            }        } catch (Exception e) {            e.printStackTrace();        }        return null;    }}</code></pre><p>å®¢æˆ·ç«¯æµ‹è¯•ä»£ç </p><pre><code>public class Test {    public static void main(String[] args) {        IPassportForThird adapter = new PassportForThirdAdapter();        adapter.loginForQQ("sdfasdfasfasfas");    }}</code></pre><p>ç±»å›¾</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/159ef15e18c94b68badfa664f99f1035><p class=pgc-img-caption></p></div><p>æˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªé€‚é…å™¨åŠ ä¸Šäº†support()æ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦å…¼å®¹ï¼Œå‚æ•°æ˜¯Objectï¼Œæ¥æºäºæ¥å£ã€‚ILoginAdapteræ¥å£æ˜¯ä¸ºäº†ä»£ç è§„èŒƒã€‚ä¸Šé¢çš„ä»£ç ç»¼åˆäº†ç­–ç•¥æ¨¡å¼ã€ç®€å•å·¥å‚å’Œé€‚é…å™¨æ¨¡å¼ã€‚</p><h3 class="md-end-block md-heading">11.7.æºç </h3><p>Spring AOPä¸­çš„AdvisorAdapterã€‚æœ‰ä¸‰ä¸ªå®ç°ç±»MethodBeforeAdviceAdapterã€AfterReturningAdviceAdapterã€ThrowsAdviceAdapterã€‚</p><p>é¡¶å±‚æ¥å£AdvisorAdapterç±»</p><pre><code>public interface AdvisorAdapter {    boolean supportsAdvice(Advice var1);    MethodInterceptor getInterceptor(Advisor var1);}</code></pre><p>MethodBeforeAdviceAdapterå®ç°ã€‚å…¶ä½™ä¸¤ä¸ªä¸è´´äº†ã€‚</p><pre><code>class AfterReturningAdviceAdapter implements AdvisorAdapter, Serializable {    AfterReturningAdviceAdapter() {    }    public boolean supportsAdvice(Advice advice) {        return advice instanceof AfterReturningAdvice;    }    public MethodInterceptor getInterceptor(Advisor advisor) {        AfterReturningAdvice advice = (AfterReturningAdvice)advisor.getAdvice();        return new AfterReturningAdviceInterceptor(advice);    }}</code></pre><p>Spring æ ¹æ®ä¸åŒçš„AOPé…ç½®ç¡®å®šä½¿ç”¨ç›¸åº”çš„Adviceã€‚</p><p>ä¸‹é¢çœ‹SpringMVCçš„HandlerAdapterç±»ï¼Œå®ƒä¹Ÿæœ‰å¤šä¸ªå­ç±»ã€‚</p><p>ç±»å›¾ï¼š</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/860311ff5b5c4d4b8e5df465d66e4b6c><p class=pgc-img-caption></p></div><p><br></p><p>ä»–çš„é€‚é…å…³é”®ä»£ç åœ¨DispatcherServletçš„doDispatch()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬çœ‹æºç ï¼š</p><pre><code>protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {    HttpServletRequest processedRequest = request;    HandlerExecutionChain mappedHandler = null;    boolean multipartRequestParsed = false;    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);    try {        try {            ModelAndView mv = null;            Object dispatchException = null;            try {                processedRequest = this.checkMultipart(request);                multipartRequestParsed = processedRequest != request;                mappedHandler = this.getHandler(processedRequest);                if (mappedHandler == null) {                    this.noHandlerFound(processedRequest, response);                    return;                }                HandlerAdapter ha = this.getHandlerAdapter(mappedHandler.getHandler());                String method = request.getMethod();                boolean isGet = "GET".equals(method);                if (isGet || "HEAD".equals(method)) {                    long lastModified = ha.getLastModified(request, mappedHandler.getHandler());                    if (this.logger.isDebugEnabled()) {                        this.logger.debug("Last-Modified value for [" + getRequestUri(request) + "] is: " + lastModified);                    }                    if ((new ServletWebRequest(request, response)).checkNotModified(lastModified) &amp;&amp; isGet) {                        return;                    }                }                if (!mappedHandler.applyPreHandle(processedRequest, response)) {                    return;                }                mv = ha.handle(processedRequest, response, mappedHandler.getHandler());                if (asyncManager.isConcurrentHandlingStarted()) {                    return;                }                this.applyDefaultViewName(processedRequest, mv);                mappedHandler.applyPostHandle(processedRequest, response, mv);            } catch (Exception var20) {                dispatchException = var20;            } catch (Throwable var21) {                dispatchException = new NestedServletException("Handler dispatch failed", var21);            }            this.processDispatchResult(processedRequest, response, mappedHandler, mv, (Exception)dispatchException);        } catch (Exception var22) {            this.triggerAfterCompletion(processedRequest, response, mappedHandler, var22);        } catch (Throwable var23) {            this.triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException("Handler processing failed", var23));        }    } finally {        if (asyncManager.isConcurrentHandlingStarted()) {            if (mappedHandler != null) {                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);            }        } else if (multipartRequestParsed) {            this.cleanupMultipart(processedRequest);        }    }}</code></pre><p>doDispatchæ–¹æ³•è°ƒç”¨äº†getHandlerAdaperæ–¹æ³•</p><pre><code>@Nullableprotected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception {    if (this.handlerMappings != null) {        Iterator var2 = this.handlerMappings.iterator();        while(var2.hasNext()) {            HandlerMapping hm = (HandlerMapping)var2.next();            if (this.logger.isTraceEnabled()) {                this.logger.trace("Testing handler map [" + hm + "] in DispatcherServlet with name '" + this.getServletName() + "'");            }            HandlerExecutionChain handler = hm.getHandler(request);            if (handler != null) {                return handler;            }        }    }    return null;}</code></pre><p>getHandlerAdapteræ–¹æ³•å¾ªç¯è°ƒç”¨supportsæ–¹æ³•åˆ¤æ–­æ˜¯å¦å…¼å®¹ï¼Œå¾ªç¯è¿­ä»£é›†åˆä¸­çš„Adapteræ˜¯åœ¨åˆå§‹åŒ–æ—¶æ—©å°±èµ‹äº†å€¼çš„ã€‚åªæœ‰æºç ä¸“é¢˜ç»§ç»­è®²è§£ã€‚</p><h3 class="md-end-block md-heading">11.8.é€‚é…å™¨ä¸è£…é¥°å™¨çš„å¯¹æ¯”</h3><p>ä¸¤è€…éƒ½æ˜¯åŒ…è£…æ¨¡å¼</p><p><strong>é€‚é…å™¨è£…é¥°å™¨</strong>å½¢å¼é€‚é…å™¨æ²¡æœ‰å±‚çº§å…³ç³»ï¼Œè£…é¥°å™¨æœ‰å±‚çº§å…³ç³»ã€‚ç‰¹æ®Šçš„é€‚é…å™¨å®šä¹‰é€‚é…å™¨ä¸è¢«é€‚é…è€…æ²¡æœ‰å¿…ç„¶è”ç³»ï¼Œé€šå¸¸é€šè¿‡ç»§æ‰¿æˆ–ä»£ç†è¿›è¡ŒåŒ…è£…è£…é¥°å™¨ä¸è¢«è£…é¥°è€…å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‰©å±•åä¿ç•™OOPå…³ç³»å…³ç³»has-açš„å…³ç³»is-açš„å…³ç³»åŠŸèƒ½æ³¨é‡å…¼å®¹ã€è½¬æ¢æ³¨é‡å¤ç›–ã€æ‰©å±•è®¾è®¡åç½®è€ƒè™‘å‰ç½®è€ƒè™‘</p><h3 class="md-end-block md-heading">11.9.é€‚é…å™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p><ul class=ul-list><li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ã€‚ä½ å¯ä»¥å°†æ¥å£æˆ–æ•°æ®è½¬æ¢ä»£ç ä»ç¨‹åºä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ã€‚</li><li><strong>å¼€é—­åŸåˆ™</strong>ã€‚åªè¦å®¢æˆ·ç«¯ä»£ç é€šè¿‡å®¢æˆ·ç«¯æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ï¼Œ ä½ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é€‚é…å™¨ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul class=ul-list><li><strong>ä»£ç æ•´ä½“å¤æ‚åº¦å¢åŠ </strong>ï¼Œ å› ä¸ºä½ éœ€è¦æ–°å¢ä¸€ç³»åˆ—æ¥å£å’Œç±»ã€‚ æœ‰æ—¶ç›´æ¥æ›´æ”¹æœåŠ¡ç±»ä½¿å…¶ä¸å…¶ä»–ä»£ç å…¼å®¹ä¼šæ›´ç®€å•ã€‚</li></ul><h3 class="md-end-block md-heading">11.10.æ€»ç»“</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œé€‚é…å™¨æ¨¡å¼å¯ä»¥çœ‹ä½œä¸€ç§â€œè¡¥å¿æ¨¡å¼â€ï¼Œç”¨æ¥è¡¥æ•‘è®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚åº”ç”¨è¿™ç§æ¨¡å¼ç®—æ˜¯â€œæ— å¥ˆä¹‹ä¸¾â€ï¼Œå¦‚æœåœ¨è®¾è®¡åˆæœŸï¼Œæˆ‘ä»¬å°±èƒ½åè°ƒè§„é¿æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ï¼Œé‚£è¿™ç§æ¨¡å¼å°±æ²¡æœ‰åº”ç”¨çš„æœºä¼šäº†ã€‚é‚£åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ‰ä¼šå‡ºç°æ¥å£ä¸å…¼å®¹å‘¢ï¼Ÿæˆ‘æ€»ç»“ä¸‹äº†ä¸‹é¢è¿™æ · 5 ç§åœºæ™¯ï¼š</p><ul class=ul-list><li>å°è£…æœ‰ç¼ºé™·çš„æ¥å£è®¾è®¡</li><li>ç»Ÿä¸€å¤šä¸ªç±»çš„æ¥å£è®¾è®¡</li><li>æ›¿æ¢ä¾èµ–çš„å¤–éƒ¨ç³»ç»Ÿ</li><li>å…¼å®¹è€ç‰ˆæœ¬æ¥å£</li><li>é€‚é…ä¸åŒæ ¼å¼çš„æ•°æ®</li></ul><h2 class="md-end-block md-heading">12.æ¡¥æ¥æ¨¡å¼</h2><p>å…ˆå¤ä¹ ä»£ç†æ¨¡å¼ã€‚å®ƒåœ¨ä¸æ”¹å˜åŸå§‹ç±»ï¼ˆæˆ–è€…å«è¢«ä»£ç†ç±»ï¼‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¼•å…¥ä»£ç†ç±»æ¥ç»™åŸå§‹ç±»é™„åŠ åŠŸèƒ½ã€‚ä»£ç†æ¨¡å¼åœ¨å¹³æ—¶çš„å¼€å‘ç»å¸¸è¢«ç”¨åˆ°ï¼Œå¸¸ç”¨åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­å¼€å‘ä¸€äº›éåŠŸèƒ½æ€§éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šç›‘æ§ã€ç»Ÿè®¡ã€é‰´æƒã€é™æµã€äº‹åŠ¡ã€å¹‚ç­‰ã€æ—¥å¿—ã€‚</p><p>ä»Šå¤©å­¦ä¹ æ¡¥æ¥æ¨¡å¼ã€‚æ¡¥æ¥æ¨¡å¼çš„ä»£ç å®ç°éå¸¸ç®€å•ï¼Œä½†æ˜¯ç†è§£èµ·æ¥ç¨å¾®æœ‰ç‚¹éš¾åº¦ï¼Œå¹¶ä¸”åº”ç”¨åœºæ™¯ä¹Ÿæ¯”è¾ƒå±€é™ï¼Œæ‰€ä»¥ï¼Œç›¸å½“äºä»£ç†æ¨¡å¼æ¥è¯´ï¼Œæ¡¥æ¥æ¨¡å¼åœ¨å®é™…çš„é¡¹ç›®ä¸­å¹¶æ²¡æœ‰é‚£ä¹ˆå¸¸ç”¨ï¼Œä½ åªéœ€è¦ç®€å•äº†è§£ï¼Œè§åˆ°èƒ½è®¤è¯†å°±å¯ä»¥ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ã€‚</p><h3 class="md-end-block md-heading">12.1.åŸç†è§£æ</h3><p>æ¡¥æ¥æ¨¡å¼ï¼Œä¹Ÿå«ä½œæ¡¥æ¢æ¨¡å¼ï¼Œè‹±æ–‡æ˜¯ Bridge Design Patternã€‚è¿™ä¸ªæ¨¡å¼å¯ä»¥è¯´æ˜¯ 23 ç§è®¾è®¡æ¨¡å¼ä¸­æœ€éš¾ç†è§£çš„æ¨¡å¼ä¹‹ä¸€äº†ã€‚æˆ‘æŸ¥é˜…äº†æ¯”è¾ƒå¤šçš„ä¹¦ç±å’Œèµ„æ–™ä¹‹åå‘ç°ï¼Œå¯¹äºè¿™ä¸ªæ¨¡å¼æœ‰ä¸¤ç§ä¸åŒçš„ç†è§£æ–¹å¼ã€‚</p><p><strong>ç¤ºæ„å›¾</strong></p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/bffad490149e4871a49e5dd95cece3e6><p class=pgc-img-caption></p></div><p>å½“ç„¶ï¼Œè¿™å…¶ä¸­â€œæœ€çº¯æ­£â€çš„ç†è§£æ–¹å¼ï¼Œå½“å± GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­å¯¹æ¡¥æ¥æ¨¡å¼çš„å®šä¹‰ã€‚æ¯•ç«Ÿï¼Œè¿™ 23 ç§ç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼Œæœ€åˆå°±æ˜¯ç”±è¿™æœ¬ä¹¦æ€»ç»“å‡ºæ¥çš„ã€‚åœ¨ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œæ¡¥æ¥æ¨¡å¼æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼šâ€œDecouple an abstraction from its implementation so that the two can vary independentlyã€‚â€ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼šâ€œå°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚â€</p><p>å…³äºæ¡¥æ¥æ¨¡å¼ï¼Œå¾ˆå¤šä¹¦ç±ã€èµ„æ–™ä¸­ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ç†è§£æ–¹å¼ï¼šâ€œä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œæˆ‘ä»¬é€šè¿‡ç»„åˆçš„æ–¹å¼ï¼Œè®©è¿™ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç»´åº¦å¯ä»¥ç‹¬ç«‹è¿›è¡Œæ‰©å±•ã€‚â€é€šè¿‡ç»„åˆå…³ç³»æ¥æ›¿ä»£ç»§æ‰¿å…³ç³»ï¼Œé¿å…ç»§æ‰¿å±‚æ¬¡çš„æŒ‡æ•°çº§çˆ†ç‚¸ã€‚è¿™ç§ç†è§£æ–¹å¼éå¸¸ç±»ä¼¼äºï¼Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„â€œç»„åˆä¼˜äºç»§æ‰¿â€è®¾è®¡åŸåˆ™ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘å°±ä¸å¤šè§£é‡Šäº†ã€‚æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹ GoF çš„ç†è§£æ–¹å¼ã€‚</p><p>æ¡¥æ¥æ¨¡å¼é€šè¿‡ç»„åˆå…³ç³»æ¥æ›¿ä»£ç»§æ‰¿å…³ç³»ï¼Œé¿å…ç»§æ‰¿å±‚æ¬¡çš„æŒ‡æ•°çº§çˆ†ç‚¸ã€‚</p><h3 class="md-end-block md-heading">12.2.è§’è‰²</h3><p>ç±»å›¾ï¼š</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8971327982bf4c7d8cae7b806f38e3bc><p class=pgc-img-caption></p></div><p><br></p><p>æ¡¥æ¥æ¨¡å¼æœ‰å››ä¸ªè§’è‰²ï¼š</p><p>æŠ½è±¡ï¼ˆAbstraction)ï¼šè¯¥ç±»æŒæœ‰ä¸€ä¸ªå¯¹å®ç°è§’è‰²çš„å¼•ç”¨ï¼ŒæŠ½è±¡è§’è‰²ä¸­çš„æ–¹æ³•éœ€è¦å®ç°è§’è‰²ã€‚è¯¥ç±»ä¸€èˆ¬ä¸ºæŠ½è±¡ç±»ã€‚</p><p>ä¿®æ­£æŠ½è±¡è§’è‰²ï¼ˆRefinedAbstractionï¼‰ï¼šAbstractionçš„å…·ä½“å®ç°ï¼Œå¯¹Abstractionæ–¹æ³•è¿›è¡Œå®Œå–„ä¸æ‰©å±•ã€‚</p><p>æŠ½è±¡å®ç°è§’è‰²ï¼ˆImplementorï¼‰ï¼šç¡®å®šå®ç°ç»´åº¦çš„åŸºæœ¬æ“ä½œï¼Œæä¾›ç»™Abstractionä½¿ç”¨ã€‚è¯¥ç±»ä¸€èˆ¬ä¸ºæ¥å£æˆ–æŠ½è±¡ç±»ã€‚</p><p>å…·ä½“å®ç°è§’è‰²ï¼ˆConcreteImplementorï¼‰ï¼šImplementorçš„å…·ä½“å®ç°ã€‚</p><h3 class="md-end-block md-heading">12.3.é€šç”¨å†™æ³•</h3><p>åˆ›å»ºæŠ½è±¡è§’è‰²</p><pre><code>// æŠ½è±¡public abstract class Abstraction {    protected IImplementor mImplementor;    public Abstraction(IImplementor implementor) {        this.mImplementor = implementor;    }    public void operation() {        this.mImplementor.operationImpl();    }}</code></pre><p>ä¿®æ­£æŠ½è±¡è§’è‰²</p><pre><code>// ä¿®æ­£æŠ½è±¡public class RefinedAbstraction extends Abstraction {    public RefinedAbstraction(IImplementor implementor) {        super(implementor);    }    @Override    public void operation() {        super.operation();        System.out.println("refined operation");    }}</code></pre><p>æŠ½è±¡å®ç°è§’è‰²</p><pre><code>// æŠ½è±¡å®ç°public interface IImplementor {    void operationImpl();}</code></pre><p>å…·ä½“å®ç°è§’è‰²</p><pre><code>// å…·ä½“å®ç°public class ConcreteImplementorA implements IImplementor {    public void operationImpl() {        System.out.println("I'm ConcreteImplementor A");    }}</code></pre><p>æµ‹è¯•ä»£ç </p><pre><code>public class Test {    public static void main(String[] args) {        // æ¥ä¸€ä¸ªå®ç°åŒ–è§’è‰²        IImplementor imp = new ConcreteImplementorA();        // æ¥ä¸€ä¸ªæŠ½è±¡åŒ–è§’è‰²ï¼Œèšåˆå®ç°        Abstraction abs = new RefinedAbstraction(imp);        // æ‰§è¡Œæ“ä½œ        abs.operation();    }}</code></pre><p>è¿è¡Œç»“æœ</p><pre><code>I'm ConcreteImplementor Arefined operation</code></pre><h3 class="md-end-block md-heading">12.4.åº”ç”¨åœºæ™¯</h3><ul class=ul-list><li><strong>æ‹†åˆ†æˆ–é‡ç»„ä¸€ä¸ªå…·æœ‰å¤šé‡åŠŸèƒ½çš„åºæ‚ç±» ï¼ˆä¾‹å¦‚èƒ½ä¸å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„ç±»ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚</strong></li><li><strong>å¦‚æœä½ å¸Œæœ›åœ¨å‡ ä¸ªç‹¬ç«‹ç»´åº¦ä¸Šæ‰©å±•ä¸€ä¸ªç±»ï¼Œå¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</strong></li><li><strong>å¦‚æœä½ éœ€è¦åœ¨è¿è¡Œæ—¶åˆ‡æ¢ä¸åŒå®ç°æ–¹æ³•ï¼Œå¯ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚</strong></li></ul><h3 class="md-end-block md-heading">12.5.ä¸šåŠ¡åœºæ™¯ä¸­çš„è¿ç”¨</h3><p>åŠå…¬å‘é€é‚®ä»¶ã€çŸ­ä¿¡æ¶ˆæ¯æˆ–è€…ç³»ç»Ÿæ¶ˆæ¯ã€‚ç´§æ€¥ç¨‹åº¦åˆ†ä¸ºæ™®é€šæ¶ˆæ¯ã€ç´§æ€¥æ¶ˆæ¯ã€ç‰¹æ€¥æ¶ˆæ¯ã€‚</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/05e9710013ee4e25b7ee7e19e3aa9bd7><p class=pgc-img-caption></p></div><p>ä½¿ç”¨ç»§æ‰¿çš„è¯ï¼Œæƒ…å†µå¤æ‚ï¼Œä¹Ÿä¸åˆ©äºæ‰©å±•ã€‚é€šè¿‡æ¡¥æ¥æ¥è§£å†³ã€‚</p><p>åˆ›å»ºä¸€ä¸ªIMessageæ¥å£æ‹…ä»»æ¡¥æ¥è§’è‰²ï¼š</p><pre><code>public interface IMessage {    //å‘é€æ¶ˆæ¯çš„å†…å®¹å’Œæ¥æ”¶äºº    void send(String message,String toUser);}</code></pre><p>åˆ›å»ºé‚®ä»¶æ¶ˆæ¯å®ç°EmailMessageç±»ï¼š</p><pre><code>public class EmailMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨é‚®ä»¶æ¶ˆæ¯å‘é€" + message + "ç»™" + toUser);    }}</code></pre><p>åˆ›å»ºæ‰‹æœºæ¶ˆæ¯å®ç°SmsMessageç±»ï¼š</p><pre><code>public class SmsMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯å‘é€" + message + "ç»™" + toUser);    }}</code></pre><p>åˆ›å»ºæ¡¥æ¥æŠ½è±¡è§’è‰²AbastractMessageç±»</p><pre><code>public abstract class AbastractMessage {    private IMessage message;    public AbastractMessage(IMessage message) {        this.message = message;    }    void sendMessage(String message,String toUser){        this.message.send(message,toUser);    }}</code></pre><p>åˆ›å»ºå…·ä½“å®ç°æ™®é€šæ¶ˆæ¯ç±»NormalMessageï¼š</p><pre><code>public class NomalMessage extends AbastractMessage {    public NomalMessage(IMessage message) {        super(message);    }}</code></pre><p>åˆ›å»ºçŸ­ä¿¡æ¶ˆæ¯ç±»SmsMessageï¼š</p><pre><code>public class SmsMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯å‘é€" + message + "ç»™" + toUser);    }}</code></pre><p>åˆ›å»ºç´§æ€¥æ¶ˆæ¯UrgencyMessageç±»ï¼š</p><pre><code>public class UrgencyMessage extends AbastractMessage {    public UrgencyMessage(IMessage message) {        super(message);    }    void sendMessage(String message, String toUser){        message = "ã€åŠ æ€¥ã€‘" + message;        super.sendMessage(message,toUser);    }    public Object watch(String messageId){        return null;    }}</code></pre><p>ä»£ç æµ‹è¯•</p><pre><code>public class Test {    public static void main(String[] args) {        IMessage message = new SmsMessage();        AbastractMessage abastractMessage = new NomalMessage(message);        abastractMessage.sendMessage("åŠ ç­ç”³è¯·","ç‹æ€»");        message = new EmailMessage();        abastractMessage = new UrgencyMessage(message);        abastractMessage.sendMessage("åŠ ç­ç”³è¯·","ç‹æ€»");    }}</code></pre><p>è¿è¡Œæ•ˆæœï¼š</p><pre><code>ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯å‘é€åŠ ç­ç”³è¯·ç»™ç‹æ€»ä½¿ç”¨é‚®ä»¶æ¶ˆæ¯å‘é€ã€åŠ æ€¥ã€‘åŠ ç­ç”³è¯·ç»™ç‹æ€»</code></pre><h3 class="md-end-block md-heading">12.6.æºç </h3><p>JDBC APIï¼Œå…¶ä¸­Driverç±»å°±æ˜¯æ¡¥æ¥å¯¹è±¡ã€‚ä½¿ç”¨Class.forNameæ–¹æ³•åŠ¨æ€åŠ è½½å„ä¸ªæ•°æ®åº“å‚å•†çš„Driverç±»ã€‚</p><p>ä»¥MySQLçš„å®ç°ä¸ºä¾‹ï¼š</p><pre><code>//1.åŠ è½½é©±åŠ¨Class.forName("com.mysql.jdbc.Driver");  //åå°„æœºåˆ¶åŠ è½½é©±åŠ¨ç±»// 2.è·å–è¿æ¥Connection//ä¸»æœº:ç«¯å£å·/æ•°æ®åº“åConnection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");// 3.å¾—åˆ°æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡StatementStatement stmt = conn.createStatement();// 4.æ‰§è¡Œsqlè¯­å¥ï¼Œå¹¶è¿”å›ç»“æœ</code></pre><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹Driveræ¥å£å®šä¹‰ï¼š</p><pre><code>public interface Driver {    Connection connect(String url, java.util.Properties info)        throws SQLException;    boolean acceptsURL(String url) throws SQLException;    DriverPropertyInfo[] getPropertyInfo(String url, java.util.Properties info)                         throws SQLException;    int getMajorVersion();    int getMinorVersion();    boolean jdbcCompliant();    public Logger getParentLogger() throws SQLFeatureNotSupportedException;}</code></pre><p>Driveråœ¨JDBCä¸­æ²¡æœ‰åšä»»ä½•å®ç°ï¼Œå…·ä½“çš„åŠŸèƒ½ç”±å„ä¸ªå‚å•†å®Œæˆï¼Œä»¥MySQLçš„å®ç°ä¸ºä¾‹ã€‚</p><pre><code>public class Driver extends NonRegisteringDriver implements java.sql.Driver {    public Driver() throws SQLException {    }    static {        try {            DriverManager.registerDriver(new Driver());        } catch (SQLException var1) {            throw new RuntimeException("Can't register driver!");        }    }}</code></pre><p>å½“æˆ‘ä»¬æ‰§è¡ŒClass.forName("com.mysql.jdbc.Driver")æ–¹æ³•çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œcom.mysql.jdbc.Drvierè¿™ä¸ªç±»çš„é™æ€å—ä¸­çš„ä»£ç ã€‚é™æ€å—ä¸­çš„ä»£ç åªæ˜¯è°ƒç”¨äº†ä¸€ä¸‹DriverManagerçš„referisterDriver()æ–¹æ³•ï¼Œç„¶åå°†Driverå¯¹è±¡æ³¨å†Œåˆ°DriverManangerä¸­ã€‚æˆ‘ä»¬ç»§ç»­è·Ÿè¿›åˆ°DriverManagerè¿™ä¸ªç±»ä¸­ï¼Œæ¥çœ‹ç›¸å…³ä»£ç ï¼š</p><pre><code>public class DriverManager {     // List of registered JDBC drivers    private final static CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = new CopyOnWriteArrayList&lt;&gt;();        /* Prevent the DriverManager class from being instantiated. */    private DriverManager(){}        /**     * Load the initial JDBC drivers by checking the System property     * jdbc.properties and then use the {@code ServiceLoader} mechanism     */    static {        loadInitialDrivers();        println("JDBC DriverManager initialized");    }        public static synchronized void registerDriver(java.sql.Driver driver)        throws SQLException {        registerDriver(driver, null);    }    public static synchronized void registerDriver(java.sql.Driver driver,            DriverAction da)        throws SQLException {        /* Register the driver if it has not already been added to our list */        if(driver != null) {            registeredDrivers.addIfAbsent(new DriverInfo(driver, da));        } else {            // This is for compatibility with the original DriverManager            throw new NullPointerException();        }        println("registerDriver: " + driver);    }}</code></pre><p>åœ¨æ³¨å†Œä¹‹å‰ï¼Œå°†ä¼ è¿‡æ¥çš„Driverå¯¹è±¡ï¼Œå°è£…æˆäº†ä¸€ä¸ªDriverInfoå¯¹è±¡ã€‚æ¥ä¸‹æ¥ç»§ç»­æ‰§è¡Œå®¢æˆ·ç«¯ä»£ç çš„ç¬¬äºŒéƒ¨ï¼Œè°ƒç”¨DriverManagerçš„getConnectionæ–¹æ³•è·å–é“¾æ¥å¯¹è±¡ï¼Œè·Ÿè¿›æºç ï¼š</p><pre><code>Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url,Â  Â  Â  Â  Â java.util.Properties info) throws SQLException {Â â€‹Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url,Â  Â  Â  Â  Â String user, String password) throws SQLException {Â  Â  Â  Â  Â java.util.Properties info = new java.util.Properties();Â â€‹Â  Â  Â  Â  Â if (user != null) {Â  Â  Â  Â  Â  Â  Â info.put("user", user);Â  Â  Â  Â   }Â  Â  Â  Â  Â if (password != null) {Â  Â  Â  Â  Â  Â  Â info.put("password", password);Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url)Â  Â  Â  Â  Â throws SQLException {Â â€‹Â  Â  Â  Â  Â java.util.Properties info = new java.util.Properties();Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â //  Worker method called by the public getConnection() methods.Â  Â  Â private static Connection getConnection(Â  Â  Â  Â  Â String url, java.util.Properties info, Class&lt;?&gt; caller) throws SQLException {Â  Â  Â  Â  Â /*Â  Â  Â  Â  Â  * When callerCl is null, we should check the application'sÂ  Â  Â  Â  Â  * (which is invoking this class indirectly)Â  Â  Â  Â  Â  * classloader, so that the JDBC driver class outside rt.jarÂ  Â  Â  Â  Â  * can be loaded from here.Â  Â  Â  Â  Â  */Â  Â  Â  Â  Â ClassLoader callerCL = caller != null ? caller.getClassLoader() : null;Â  Â  Â  Â  Â synchronized(DriverManager.class) {Â  Â  Â  Â  Â  Â  Â // synchronize loading of the correct classloader.Â  Â  Â  Â  Â  Â  Â if (callerCL == null) {Â  Â  Â  Â  Â  Â  Â  Â  Â callerCL = Thread.currentThread().getContextClassLoader();Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â if(url == null) {Â  Â  Â  Â  Â  Â  Â throw new SQLException("The url cannot be null", "08001");Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â println("DriverManager.getConnection(\"" + url + "\")");Â â€‹Â  Â  Â  Â  Â // Walk through the loaded registeredDrivers attempting to make a connection.Â  Â  Â  Â  Â // Remember the first exception that gets raised so we can reraise it.Â  Â  Â  Â  Â SQLException reason = null;Â â€‹Â  Â  Â  Â  Â for(DriverInfo aDriver : registeredDrivers) {Â  Â  Â  Â  Â  Â  Â // If the caller does not have permission to load the driver thenÂ  Â  Â  Â  Â  Â  Â // skip it.Â  Â  Â  Â  Â  Â  Â if(isDriverAllowed(aDriver.driver, callerCL)) {Â  Â  Â  Â  Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â println(" Â   trying " + aDriver.driver.getClass().getName());Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Connection con = aDriver.driver.connect(url, info);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (con != null) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // Success!Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â println("getConnection returning " + aDriver.driver.getClass().getName());Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return (con);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â  Â  Â  Â  Â   } catch (SQLException ex) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (reason == null) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â reason = ex;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â  Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â  Â   } else {Â  Â  Â  Â  Â  Â  Â  Â  Â println(" Â   skipping: " + aDriver.getClass().getName());Â  Â  Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â // if we got here nobody could connect.Â  Â  Â  Â  Â if (reason != null) Â   {Â  Â  Â  Â  Â  Â  Â println("getConnection failed: " + reason);Â  Â  Â  Â  Â  Â  Â throw reason;Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â println("getConnection: no suitable driver found for "+ url);Â  Â  Â  Â  Â throw new SQLException("No suitable driver found for "+ url, "08001");Â  Â   }</code></pre><p>åœ¨getConnection()ä¸­åˆä¼šè°ƒç”¨å„ä¸ªå‚å•†å®ç°çš„Driverçš„connect()æ–¹æ³•è·å¾—é“¾æ¥å¯¹è±¡ã€‚è¿™æ ·çš„è¯ï¼Œå°±å·§å¦™åœ°é¿å¼€äº†ä½¿ç”¨ç»§æ‰¿ï¼Œä¸ºä¸åŒæ•°æ®åº“æä¾›ç›¸åŒæ¥å£ã€‚JDBC APIä¸­DriverManagerå°±æ˜¯æ¡¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2cc52f173e32443ba57f04ace0ec36c9><p class=pgc-img-caption></p></div><h3 class="md-end-block md-heading">12.7.æ¡¥æ¥æ¨¡å¼ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹</p><ul class=ul-list><li>ä½ å¯ä»¥åˆ›å»ºä¸å¹³å°æ— å…³çš„ç±»å’Œç¨‹åºã€‚</li><li>å®¢æˆ·ç«¯ä»£ç ä»…ä¸é«˜å±‚æŠ½è±¡éƒ¨åˆ†è¿›è¡Œäº’åŠ¨ï¼Œ ä¸ä¼šæ¥è§¦åˆ°å¹³å°çš„è¯¦ç»†ä¿¡æ¯ã€‚</li><li>å¼€é—­åŸåˆ™ã€‚ ä½ å¯ä»¥æ–°å¢æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ï¼Œ ä¸”å®ƒä»¬ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ã€‚</li><li>å•ä¸€èŒè´£åŸåˆ™ã€‚ æŠ½è±¡éƒ¨åˆ†ä¸“æ³¨äºå¤„ç†é«˜å±‚é€»è¾‘ï¼Œ å®ç°éƒ¨åˆ†å¤„ç†å¹³å°ç»†èŠ‚ã€‚</li></ul><p>ç¼ºç‚¹</p><ul class=ul-list><li>å¯¹é«˜å†…èšçš„ç±»ä½¿ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šè®©ä»£ç æ›´åŠ å¤æ‚ã€‚</li></ul><h3 class="md-end-block md-heading">12.8.ä»£ç†ã€æ¡¥æ¥ã€è£…é¥°å™¨ã€é€‚é…å™¨ 4 ç§è®¾è®¡æ¨¡å¼çš„åŒºåˆ«</h3><p>ä»£ç†ã€æ¡¥æ¥ã€è£…é¥°å™¨ã€é€‚é…å™¨ï¼Œè¿™ 4 ç§æ¨¡å¼æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ç»“æ„å‹è®¾è®¡æ¨¡å¼ã€‚å®ƒä»¬çš„ä»£ç ç»“æ„éå¸¸ç›¸ä¼¼ã€‚ç¬¼ç»Ÿæ¥è¯´ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç§°ä¸º Wrapper æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ Wrapper ç±»äºŒæ¬¡å°è£…åŸå§‹ç±»ã€‚</p><p>###</p><p><strong>ä»£ç†æ¨¡å¼ï¼š</strong>ä»£ç†æ¨¡å¼åœ¨ä¸æ”¹å˜åŸå§‹ç±»æ¥å£çš„æ¡ä»¶ä¸‹ï¼Œä¸ºåŸå§‹ç±»å®šä¹‰ä¸€ä¸ªä»£ç†ç±»ï¼Œä¸»è¦ç›®çš„æ˜¯æ§åˆ¶è®¿é—®ï¼Œè€ŒéåŠ å¼ºåŠŸèƒ½ï¼Œè¿™æ˜¯å®ƒè·Ÿè£…é¥°å™¨æ¨¡å¼æœ€å¤§çš„ä¸åŒã€‚</p><p><strong>æ¡¥æ¥æ¨¡å¼ï¼š</strong>æ¡¥æ¥æ¨¡å¼çš„ç›®çš„æ˜¯å°†æ¥å£éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä»è€Œè®©å®ƒä»¬å¯ä»¥è¾ƒä¸ºå®¹æ˜“ã€ä¹Ÿç›¸å¯¹ç‹¬ç«‹åœ°åŠ ä»¥æ”¹å˜ã€‚</p><p><strong>è£…é¥°å™¨æ¨¡å¼ï¼š</strong>è£…é¥°è€…æ¨¡å¼åœ¨ä¸æ”¹å˜åŸå§‹ç±»æ¥å£çš„æƒ…å†µä¸‹ï¼Œå¯¹åŸå§‹ç±»åŠŸèƒ½è¿›è¡Œå¢å¼ºï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªè£…é¥°å™¨çš„åµŒå¥—ä½¿ç”¨ã€‚</p><p><strong>é€‚é…å™¨æ¨¡å¼ï¼š</strong>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§äº‹åçš„è¡¥æ•‘ç­–ç•¥ã€‚é€‚é…å™¨æä¾›è·ŸåŸå§‹ç±»ä¸åŒçš„æ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼æä¾›çš„éƒ½æ˜¯è·ŸåŸå§‹ç±»ç›¸åŒçš„æ¥å£ã€‚</p><h3 class="md-end-block md-heading">12.9.ä½œä¸š</h3><p>1ã€å®Œå–„ç¬¬ä¸‰æ–¹ç™»å½•æ¥å£ï¼Œå®Œæˆä¸ä¿®æ”¹æ¥å£ä¹Ÿèƒ½å®ç°è‡ªåŠ¨é€‚é…çš„åŠŸèƒ½ã€‚</p><p>é€šè¿‡åœ¨æ¥å£ILoginForThirdçš„æ–¹æ³•å‚æ•°æ·»åŠ æ³›å‹çº¦æŸã€‚</p><pre><code>Â /**Â  * ç¬¬ä¸‰æ–¹ç™»å½•çš„æ¥å£ï¼Œæ–¹æ³•é™åˆ¶é€‚é…å™¨çš„ClassÂ  */Â public interface ILoginForThird {Â  Â  Â ResultMsg loginForThird(String id, Class&lt;? extends ILoginAdapter&gt; clazz);Â }Â â€‹Â /**Â  * ç¬¬ä¸‰æ–¹ç™»å½•é€‚é…å™¨å®ç°ï¼Œé€šè¿‡é€‚é…å™¨å¯¹è±¡åˆ¤æ–­æ˜¯å¦å…¼å®¹Â  */Â public class LoginForThirdAdapter implements ILoginForThird {Â  Â  Â @OverrideÂ  Â  Â public ResultMsg loginForThird(String id, Class&lt;? extends ILoginAdapter&gt; clazz) {Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â ILoginAdapter adapter = clazz.newInstance();Â  Â  Â  Â  Â  Â  Â if (adapter.support(adapter)) {Â  Â  Â  Â  Â  Â  Â  Â  Â return adapter.login(id, adapter);Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   } catch (Exception e) {Â  Â  Â  Â  Â  Â  Â e.printStackTrace();Â  Â  Â  Â   }Â  Â  Â  Â  Â return null;Â  Â   }Â }Â â€‹Â /**Â  * ç™»å½•é€‚é…å™¨æ¥å£Â  */Â public interface ILoginAdapter {Â  Â  Â Boolean support(Object object);Â  Â  Â ResultMsg login(String id, Object adapter);Â }Â â€‹Â /**Â  * å¾®åšç™»å½•é€‚é…å™¨Â  */Â public class LoginForWeiboAdapter extends AbstractAdapter {Â  Â  Â @OverrideÂ  Â  Â public Boolean support(Object adapter) {Â  Â  Â  Â  Â return adapter instanceof LoginForWeiboAdapter;Â  Â   }Â â€‹Â  Â  Â @OverrideÂ  Â  Â public ResultMsg login(String id, Object adapter) {Â  Â  Â  Â  Â if (! support(adapter)) {Â  Â  Â  Â  Â  Â  Â return null;Â  Â  Â  Â   }Â  Â  Â  Â  Â return super.loginForRegist(id, null);Â  Â   }Â }Â â€‹Â /**Â  * æŠ½è±¡é€‚é…å™¨Â  */Â public abstract class AbstractAdapter extends PassportService implements ILoginAdapter {Â  Â  Â protected ResultMsg loginForRegist(String username, String password) {Â  Â  Â  Â  Â if(null == password){Â  Â  Â  Â  Â  Â  Â password = "THIRD_EMPTY";Â  Â  Â  Â   }Â  Â  Â  Â  Â super.regist(username,password);Â  Â  Â  Â  Â return super.login(username,password);Â  Â   }Â }Â â€‹Â // åŸæœ‰çš„æ³¨å†Œä¸ç™»å½•æ–¹æ³•Â public class PassportService {Â  Â  Â // æ³¨å†Œæ–¹æ³•Â  Â  Â public ResultMsg regist(String username, String password) {Â  Â  Â  Â  Â return new ResultMsg(200, "æ³¨å†ŒæˆåŠŸ", new Member());Â  Â   }Â â€‹Â  Â  Â // ç™»å½•çš„æ–¹æ³•Â  Â  Â public ResultMsg login(String username, String password) {Â  Â  Â  Â  Â return new ResultMsg(200, "ç™»å½•æˆåŠŸ", new Member());Â  Â   }Â }</code></pre><p>æµ‹è¯•ä»£ç </p><pre><code>Â public class Test {Â  Â  Â public static void main(String[] args) {Â  Â  Â  Â  Â // æ–°å¢å¾®åšç™»å½•Â  Â  Â  Â  Â ILoginForThird loginForThird = new LoginForThirdAdapter();Â  Â  Â  Â  Â ResultMsg resultMsg = loginForThird.loginForThird("å¾®åšè´¦å·", LoginForWeiboAdapter.class);Â  Â  Â  Â  Â System.out.println(resultMsg.toString());Â  Â   }Â }</code></pre><p>è¿è¡Œæ•ˆæœ</p><pre><code>Â ResultMsg(code=200, msg=ç™»å½•æˆåŠŸ, data=Member(username=null, password=null, mid=null, info=null))</code></pre><p>ç±»å›¾</p><div class=pgc-img><img alt=å…«ã€é€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/68c636735b48427882086eeba8122392><p class=pgc-img-caption></p></div><p>2ã€è¯´è¯´ä½ å¯¹æ¡¥æ¥æ¨¡å¼çš„ç†è§£ã€‚</p><p><strong>æ¡¥æ¥æ¨¡å¼</strong>æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å¯å°†ä¸€ä¸ªå¤§ç±»æˆ–ä¸€ç³»åˆ—ç´§å¯†ç›¸å…³çš„ç±»æ‹†åˆ†ä¸ºæŠ½è±¡å’Œå®ç°ä¸¤ä¸ªç‹¬ç«‹çš„å±‚æ¬¡ç»“æ„ï¼Œ ä»è€Œèƒ½åœ¨å¼€å‘æ—¶åˆ†åˆ«ä½¿ç”¨ã€‚</p><p><strong>æ¡¥æ¥æ¨¡å¼ï¼š</strong>æ¡¥æ¥æ¨¡å¼çš„ç›®çš„æ˜¯å°†æ¥å£éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä»è€Œè®©å®ƒä»¬å¯ä»¥è¾ƒä¸ºå®¹æ˜“ã€ä¹Ÿç›¸å¯¹ç‹¬ç«‹åœ°åŠ ä»¥æ”¹å˜ã€‚</p><p>åœ¨ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œæ¡¥æ¥æ¨¡å¼è¢«å®šä¹‰ä¸ºï¼šâ€œå°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚â€</p><p>å®šä¹‰ä¸­çš„â€œæŠ½è±¡â€ï¼ŒæŒ‡çš„å¹¶éâ€œæŠ½è±¡ç±»â€æˆ–â€œæ¥å£â€ï¼Œè€Œæ˜¯è¢«æŠ½è±¡å‡ºæ¥çš„ä¸€å¥—â€œç±»åº“â€ï¼Œå®ƒåªåŒ…å«éª¨æ¶ä»£ç ï¼ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘éœ€è¦å§”æ´¾ç»™å®šä¹‰ä¸­çš„â€œå®ç°â€æ¥å®Œæˆã€‚</p><p>è€Œå®šä¹‰ä¸­çš„â€œå®ç°â€ï¼Œä¹Ÿå¹¶éâ€œæ¥å£çš„å®ç°ç±»â€ï¼Œè€Œæ˜¯çš„ä¸€å¥—ç‹¬ç«‹çš„â€œç±»åº“â€ã€‚â€œæŠ½è±¡â€å’Œâ€œå®ç°â€ç‹¬ç«‹å¼€å‘ï¼Œé€šè¿‡å¯¹è±¡ä¹‹é—´çš„ç»„åˆå…³ç³»ï¼Œç»„è£…åœ¨ä¸€èµ·ã€‚</p><p>ç®€å•çš„ç†è§£ï¼šâ€œä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œæˆ‘ä»¬é€šè¿‡ç»„åˆçš„æ–¹å¼ï¼Œè®©è¿™ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç»´åº¦å¯ä»¥ç‹¬ç«‹è¿›è¡Œæ‰©å±•ã€‚â€</p><p>éµå¾ªâ€œç»„åˆä¼˜äºç»§æ‰¿â€è®¾è®¡åŸåˆ™ï¼Œé€šè¿‡ç»„åˆå…³ç³»æ¥æ›¿ä»£ç»§æ‰¿å…³ç³»ï¼Œé¿å…ç»§æ‰¿å±‚æ¬¡çš„æŒ‡æ•°çº§çˆ†ç‚¸ã€‚</p><p><br></p><hr><p>å‚è€ƒèµ„æ–™</p><ol start=0><li>AlexanÂ­der Shvetsã€ŠDive into Design Patternsã€‹</li><li>æå®¢æ—¶é—´ã€Šè®¾è®¡æ¨¡å¼ä¹‹ç¾ã€‹</li><li>å’•æ³¡å­¦é™¢ã€Šé€‚é…å™¨æ¨¡å¼ä¸æ¡¥æ¥æ¨¡å¼è¯¦è§£ã€‹</li></ol><p><br></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'æ¨¡å¼','æ¡¥æ¥','è¯¦è§£'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>