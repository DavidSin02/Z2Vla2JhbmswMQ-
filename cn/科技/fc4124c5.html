<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Linux dd命令有多强大？ | 极客快訊</title><meta property="og:title" content="Linux dd命令有多强大？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/cd497b94e7ee432eb26bbbcaae462dc4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fc4124c5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fc4124c5.html><meta property="article:published_time" content="2020-11-14T21:03:14+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:14+08:00"><meta name=Keywords content><meta name=description content="Linux dd命令有多强大？"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/fc4124c5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Linux dd命令有多强大？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><blockquote><p>请关注本头条号，每天坚持更新原创干货技术文章。</p><p>如需学习视频，请在微信搜索公众号<strong>“智传网优”</strong>直接开始自助<strong>视频学习</strong></p></blockquote><p><strong>1. 前言</strong></p><p>本文主要介绍Linux dd命令的强大功能与日常的使用案例。<br>Linux中的dd命令是一个用于复制和转换文件的实用工具，有许多实际用途。<br>有人提出，这个名称是源自一个较老的IBM作业控制语言函数，其中dd代表Data Definition，翻译为数据定义。在Linux中，这个缩写表示Data Duplicator(数据复制器)或Disk Dump(磁盘转储)或其他各种名称，具体取决于您的源代码。<br>它甚至还赢得了一个令人心酸的绰号data destroyer(数据破坏者)，这让我想到了一个重要的问题。在练习dd命令时请多加小心。<br>这个命令能造成一些严重的破坏。一定要仔细检查语法，以避免代价高昂的错误。不肯定不想看到由于操作不当而造成数据丢失。<br></p><div class=pgc-img><img alt="Linux dd命令有多强大？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cd497b94e7ee432eb26bbbcaae462dc4><p class=pgc-img-caption>Linux dd日常使用案例</p></div><p><br></p><p><strong>2. 开始了解`dd`命令</strong></p><p>dd命令使用以下语法：</p><pre>dd if=&lt;filename&gt; of=&lt;filename&gt; [options]</pre><p>这个命令有广泛的用途，我将介绍一些常见的方法。</p><p><strong>3. 使用`dd`命令进行物理介质分区克隆或备份</strong></p><p>在上面的语法中，if和of分别用于输入文件和输出文件。这是dd的核心功能，它将数据从一个源复制到另一个源。您不需要在dd中使用物理媒体。</p><div class=pgc-img><img alt="Linux dd命令有多强大？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8e01fc25b70d47e6be0badda77b34e9a><p class=pgc-img-caption>使用dd命令进行物理介质分区克隆或备份</p></div><p><br></p><p><strong>4. 使用`dd`命令进行文本处理</strong></p><p>可以从键盘使用stdin(标准输入)来收集输入并将其指向文件。还可以快速转换大小写，手册页中还包括各种其他有用的文本编辑工具。</p><p>我之前提到过IBM，指的是这个程序的悠久历史。该命令的原始功能之一实际上是将EBCDIDC (IBM创建的一种编码模式)转换为ASCII。</p><p><strong>5. 使用`dd`命令进行文件系统操作</strong></p><p>您也可以使用它来复制文件，但是对于这个简单的应用程序，建议使用cp命令而不是dd。我们有一篇关于cp命令的文章。</p><p>Linux cp命令复制文件</p><p><strong>6. 使用`dd`命令一些行为记录</strong></p><p>使用dd进行复制时，您还应该注意，在默认情况下，它将从指定的源复制完整的信息。</p><p>这意味着如果您试图复制一个分区或磁盘，它也会复制空闲空间。</p><p>因此，例如，如果您要克隆一个具有4TB的硬盘驱动器，您将需要一个至少具有4TB的目标驱动器，以防止文件被截断和出现错误。还要记住，如果磁盘只有1TB的数据，dd仍然会复制其他3TB的空间。这是一个糟糕的举动，会浪费很多时间和资源。</p><p>我们可以限制dd的一些行为，通过指定丰富的参数进行控制。</p><blockquote><p>注意!为了练习，请使用虚拟机</p><p>我强烈建议您将您的目标概念化，并小心地执行它，以避免破坏或破坏重要的文件。很明显，我们对丢失你的信息不承担责任。如果你犯错了。别说我们没警告过你。</p><p>我建议在尝试更改任何生产环境配置之前，先在虚拟的虚拟机上练习加以熟悉。这是因为dd命令能够在您不正确地使用文件系统时进行更改，从而损坏文件系统。</p><p>对于本教程，我决定尝试一下Debian体系之外的Linux发行版，并在VirtualBox中创建了一个Fedora 31的副本。</p></blockquote><p><strong>7. `dd`命令的5个实际例子</strong></p><p>有了警告和一些上下文信息之后，我们就可以开始讨论这个简单但功能强大的命令的一些应用程序了。</p><p><strong>7.1 `dd`命令使用案使用示例1:克隆磁盘</strong></p><p>使用dd可以很容易地将一个磁盘复制到另一个磁盘。例如，我有两个名为sda和sdb的磁盘。</p><div class=pgc-img><img alt="Linux dd命令有多强大？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/aa25b720bdc543509fea89dc17b62587><p class=pgc-img-caption>dd命令使用案使用示例1:克隆磁盘</p></div><p><br></p><p>请记住，sda将试图复制到sdb使用驱动器的整个内容，而不仅仅是数据。</p><p>您需要在输出文件上分配足够的空间来容纳扇区上未使用的空间。您还可以选择将驱动器重新分区到当前由数据填充的确切大小。我推荐这种方法。它将减少执行操作所需的时间，并创建更有用的文档。</p><p>当您准备克隆一个磁盘时，您可以运行fdisk来识别您的磁盘、它们的分区和容量。</p><pre>sudo fdisk -l</pre><p>运行此命令将列出可用的驱动器和分区及其各自的大小。这有助于正确识别目标设备。</p><p>同样，对于我们的应用程序，我们使用的名称是sda和sdb，我们将假设它们的大小相同。</p><pre>[zcwyou@fedora ~]$ sudo dd if=/dev/sda of=/dev/sdb[[enter pw for sudo]]dd: writing to 'dev/sdb': No space left on device8108369+0 records in8108369+0 records out4151484416 bytes (4.2 GB, 3.9 GiB) copied, 12.3602 s 336 MB/s</pre><p>输出让我们知道写入成功，我们可以忽略sdb上已经没有任何空间的消息。</p><p>摘要还列出了复制的数据量、所需时间和复制速度。当我讲到块大小的时候，我们会再多讲一点。</p><p><strong>7.2 `dd`命令使用案例2:备份一个磁盘分区</strong></p><p>克隆设备和备份分区的步骤类似。我们可以创建一个.img(原始磁盘映像)文件，而不是将目标文件作为一个设备。</p><p>假设我们的系统在sda2有一个单独的主目录分区，我们希望将它备份到一个名为home_backup的文件中。在我们当前的目录中。</p><pre>dd if=/dev/sda2 of=home_backup.img</pre><p>就是这么简单!简单和强大的备份程序就在您手上。但总是有更多的东西要学。</p><p><strong>7.3 `dd`命令使用案例3:删除数据并将磁盘归零</strong></p><p>还记得之前的所有警告吗?这个命令将用0替换sda的每个块。即删除数据并无法还原。</p><div class=pgc-img><img alt="Linux dd命令有多强大？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a7f1f4285184473a1ebf2c66a63f17b><p class=pgc-img-caption>dd命令使用案例3:删除数据并将磁盘归零</p></div><p><br></p><pre>dd if=/dev/zero of=/dev/sda</pre><p>这是怎么做到的呢?本质上，与所有其他in和out 选项相同。/dev/zero是什么?</p><p>它是一个包含在Unix/Linux操作系统中的伪设备，它将向文件写入0，直到它到达文件的末尾。</p><p>你也可以使用dev/random来输出随机的数据。如果您计划使用原始图像文件来替换内容，这可能是不必要的，因为使用dd已经复制了未使用的空间。</p><p>请注意，一些恶意有心的人在各种Linux论坛上欺骗不知情的用户来运行这个命令。现在你知道这个命令的作用了，你就不会成为这个邪恶恶作剧的牺牲品了。</p><p><strong>7.4 `dd`命令使用案例4:`CD/DVD`中创建`.ISO`文件</strong></p><p>如果你的电脑还有光驱的话，你可以直接从光驱上拷贝。之前我提到过cd-rom的标准字节大小是2048。我们将设置与之匹配的字节大小以避免转换问题，然后添加几个其他命令。</p><pre>dd if=/dev/cdrom of=space_jam_dvd.iso bs=2048 conv=noerror,sync</pre><p>让我解释一些事情。使用conv=noerror，任何错误都将被忽略。这个程序将一直运行到最后一个块而不停止。它不会为他们停止。</p><p>当与noerror一起使用时，sync将确保任何丢失的数据块将自动用空信息填充。</p><p>这意味着现有数据将被映射到相同的位置，可能会尽可能多地保留内容。</p><p>确保源文件和目标文件具有相同的bs来进行这些操作是很重要的，否则它们将不会得到预期的结果。</p><p><strong>7.5 `dd`命令使用案例5:创建一个可启动的USB</strong></p><p>您可以使用dd创建一个可启动的USB，它就像您所期望的那样简单。事实上，这是dd命令最流行的用法之一。</p><p>这里涉及到一个额外的步骤。在运行dd之前，我们使用mkfs命令在我们的USB上构建文件系统。</p><p>没有选项，它使用默认的ext2系统。因此，假设我们要准备的USB被称为sdb，我们想要将文件系统更改为ext4，我们将运行以下命令:</p><pre>sudo mkfs.ext4 /dev/sdb</pre><p>如果希望与Windows系统一起使用，可以使用mkfs.ntfs来替换命令的第一部分。</p><p>你也可以使用以下语法:</p><pre>mkfs -t [for type] $filesystem.</pre><p>一旦准备好了可启动的介质，我们就可以继续执行dd命令。</p><pre>dd if=someFile.iso of=/dev/sdb</pre><p>使用.iso文件挂载映像并复制到usb设备的相应驱动器名。</p><p><strong>8. 结论</strong></p><p>本文主要介绍Linux dd命令的强大功能与日常的使用案例。有很多不同的方法可以使用这个命令。我试着讲了很多更有用的例子。如果你有什么想看的或直接的问题，我很乐意帮忙。请在评论中告诉我你的想法。</p><p>本文已同步至博客站，尊重原创，转载时请在正文中附带以下链接：<br>https://www.linuxrumen.com/rmxx/1526.html</p><p><strong>点击了解更多，快速查看更多的技术文章列表。</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Linux','dd','强大'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>