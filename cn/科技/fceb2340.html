<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Linux的shell编程(你必看的linux的shell精彩总结) | 极客快訊</title><meta property="og:title" content="Linux的shell编程(你必看的linux的shell精彩总结) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/3a8ded9a54794f078272a6ebd42d5667"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fceb2340.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fceb2340.html><meta property="article:published_time" content="2020-11-14T21:03:14+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:14+08:00"><meta name=Keywords content><meta name=description content="Linux的shell编程(你必看的linux的shell精彩总结)"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/fceb2340.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Linux的shell编程(你必看的linux的shell精彩总结)</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p><p>Shell的作用是解释执行用户的命令，用户输入一条命令，Shell就解释执行一条，这种方式称为交互式（Interactive），Shell还有一种执行命令的方式称为批处理（Batch），用户事先写一个Shell脚本（Script），其中有很多条命令，让Shell一次把这些命令执行完，而不必一条一条地敲命令。Shell脚本和编程语言很相似，也有变量和流程控制语句，但Shell脚本是解释执行的，不需要编译，Shell程序从脚本中一行一行读取并执行这些命令，相当于一个用户把脚本中的命令一行一行敲到Shell提示符下执行</p><p>由于历史原因，UNIX系统上有很多种Shell：</p><p>（1） sh（Bourne Shell）</p><p>由Steve Bourne开发，各种UNIX系统都配有sh。</p><p>（2） csh（C Shell）</p><p>由Bill Joy开发，随BSD UNIX发布，它的流程控制语句很像C语言，支持很多Bourne Shell所不支持的功能：作业控制，命令历史，命令行编辑。</p><p>（3）ksh（Korn Shell）</p><p>由David Korn开发，向后兼容sh的功能，并且添加了csh引入的新功能，是目前很多UNIX系统标准配置的Shell，在这些系统上/bin/sh往往是指向/bin/ksh的符号链接。</p><p>（4）tcsh（TENEX C Shell）</p><p>是csh的增强版本，引入了命令补全等功能，在FreeBSD、MacOS X等系统上替代了csh。</p><p>（5）bash（Bourne Again Shell）</p><p>由GNU开发的Shell，主要目标是与POSIX标准保持一致，同时兼顾对sh的兼容，bash从csh和ksh借鉴了很多功能，是各种Linux发行版标准配置的Shell，在Linux系统上/bin/sh往往是指向/bin/bash的符号链接。虽然如此，bash和sh还是有很多不同的，一方面，bash扩展了一些命令和参数，另一方面，bash并不完全和sh兼容，有些行为并不一致，所以bash需要模拟sh的行为：当我们通过sh这个程序名启动bash时，bash可以假装自己是sh，不认扩展的命令，并且行为与sh保持一致。</p><p><strong>一、最简单的shell</strong></p><p>1、Shell的结构：</p><p>（1）、#!指定执行脚本的shell</p><p>（2）、#注释行</p><p>（3）、控制结构</p><p>2、创建shell的步骤：</p><p>（1）、使用vi编辑器创建以.sh结尾的文件 ：vi demo.sh</p><p>（2）、编辑相关shell程序，编写完毕后加执行权限:</p><p>chmod u+x demo.sh</p><p>（3）、执行程序 ./demo.sh</p><p>也可以使用sh demo.sh来执行</p><p>使用 sh -x demo.sh中的x表示脚本的执行过程</p><p>使用 sh -n demo.sh不执行脚本，只是检查语法的错误，返回所有错误信息</p><p><strong>二、shell的变量</strong></p><p>Shell变量包括：临时变量和环境变量，临时变量时shell程序内部定义的，对其他程序不可见，包括用户自定义变量和位置变量；环境变量就是全局变量，不随着shell脚本的结束而消失。</p><p>在使用变量值的时候，要在变量名前加前缀"$"</p><p>变量赋值用"="，注意两边不能有空格</p><p>变量赋值举例：</p><p>1、 NUM=1</p><p>2、将一个命令的执行结果赋给变量，例如</p><p>time=`date`</p><p>time=(date +%F) echo $time</p><p>3、将一个变量赋给另一个变量：A=$B</p><p>查看变量的值：echo $A</p><p>字符串用单引号或者双引号</p><p>双引号有自动解析变量的功能</p><p>例如：</p><p>sum=100</p><p>echo "The total is $sum"</p><p>set为显示所有的环境变量</p><p>删除变量unset</p><p><strong>三、位置变量和特殊变量</strong></p><p>1、位置变量</p><p>Shell解释执行用户命令的时候，将命令行的第一部分作为命令名，其他部分作为参数。有出现在命令行上的位置确定的参数成为位置参数</p><p>例如：ls -l file1 file2 file3</p><p>$0位置被个程序的文件名占用，其它剩余位置$1 $2 $3…$9</p><p>例如：在test.sh中有如下内容</p><p>mkdir files$1_s00$2_class$3</p><p>执行时候./test.sh 001 1 001，表示$0被test.sh占用、$1被001占用、1被$2占用，001被$3占用</p><p><br></p><p>2、特殊变量</p><p>$*这个程序的所有参数</p><p>$#这个程序的参数个数</p><p>$$这个程序的 PID</p><p>$!执行上一个后台的PID</p><p>$?执行上一个命令的返回值</p><p>例如有test.sh程序，内容如下：</p><p>echo '$# is:' $#</p><p>echo '$* is:' $*</p><p>echo '$? is:' $?</p><p>echo '$$ is:' $$</p><p>echo '$0 is:' $0</p><p>运行 ./test.sh p1 p2 p3 后查看结果</p><p><strong>四、shell的一些常用命令</strong></p><p>1、Read命令：从键盘读入数据，赋给变量</p><p>例如 read x 100 ; echo $x</p><p>如程序test.sh：</p><p>read a1 a2 a3</p><p>echo "the a1 value is $a1"</p><p>echo "the a2 value is $a2"</p><p>echo "the a3 value is $a3"</p><p>则执行的时候</p><p>./test.sh 100 200 300</p><p>2、expr指令：对整型变量进行算术运算</p><p>例如expr 100 + 200注意加号左右有空格</p><p>del@box:/temp$ expr 100 + 200</p><p>300</p><p>另外注意乘法为" \*"，要有转义符</p><p>例如3 \* 5</p><p>复杂的运算：expr `expr 6 + 9` / 3</p><p>将运算的结果赋予变量 x=`expr 1 + 2`</p><p>3、变量测试语句：</p><p>测试变量是否相等、为空等情况。语法：test 测试条件；测试范围：整数、字符串、文件</p><p>（1）字符串测试：</p><p>test str1=str2 测试字符串是否相等</p><p>test str1！=str2 测试字符串是否不相等</p><p>test str1 测试字符串是否不为空</p><p>test -n str1 测试字符串是否不为空</p><p>test -z str1 测试字符串是否为空</p><p><br></p><p>（3）测试整数</p><p>test int1 -eq int2 测试int1和int2是否相等</p><p>test int1 -ge int2 测试int1是否>=int2</p><p>test int1 -gt int2 测试int1是否>int2</p><p>test int1 -le int2 测试int1是否&lt;=int2</p><p>test int1 -lt int2 测试int1是否&lt;int2</p><p>test int1 -ne int2 测试int1和int2是否不相等</p><p>（4）文件测试</p><p>test -d file 指定文件是否目录</p><p>test -f file 指定文件是否常规文件</p><p>test -x file 指定文件是否可执行</p><p>test -r file 指定文件是否可读</p><p>test -w file 指定文件是否可写</p><p>test -a file 指定文件是否存在</p><p>test -s file 文件大小是否非0</p><p>测试语句一般不单独使用，一般配合if语句来判断，如：</p><p>if test -d $1 then</p><p>…….</p><p>fi</p><p>变量测试语句也可以用[]简化，例如：</p><p>test -d $1等价于 [ -d $1 ] 注意：中括号左右的表达式要有空格</p><p><br></p><p><strong>五、流程控制</strong></p><p><strong>1、选择结构if语句</strong></p><p>（1） If [ ]; then</p><p>fi</p><p>（2） If [ ]; then</p><p>else</p><p>fi</p><p>例如：</p><p>If [ $# -ne 2 ]; then</p><p>echo "not enough parameters"</p><p>exit 0 //0表示正常退出</p><p>fi</p><p>If[ $1 -eq $2 ];then</p><p>echo "$1 equals $2"</p><p>fi</p><p><br></p><p>（3） If [ ] then</p><p>elif [ ]</p><p>elif [ ]</p><p>else</p><p>例如：test.sh内容如下</p><p>read file_name</p><p>if [ -d $file_name ]</p><p>then</p><p>echo "This is directory!!!"</p><p>elif [ -f $file_name ]</p><p>then</p><p>echo "This is file!!!"</p><p>else</p><p>echo "This is nothing!!!"</p><p>fi</p><p>条件组合查询：</p><p>-a ：逻辑与，条件都成立的时候结果为真</p><p>-o ：逻辑或，只要有一个条件成立，结果为真</p><p>例如：test.sh内容如下</p><p>read file_name</p><p>if [ -d $file_name ]</p><p>then</p><p>echo "This is directory!!!"</p><p>elif [ -f $file_name ]</p><p>then</p><p>echo "This is file!!!"</p><p>elif [ -c $file_name -o -b $file_name ]</p><p>echo "This is device file!!!"</p><p>else</p><p>echo "This is nothing!!!"</p><p>fi</p><p><strong>2、循环结构</strong></p><p>（1）形式-1：for-in</p><p>语法：</p><p>for 变量 in 名字表</p><p>do</p><p>…..</p><p>done</p><p>例如：</p><p>for x in 11 22 33 44 55 66</p><p>do</p><p>echo "x value is : $x"</p><p>done</p><p>（2）形式-2：for</p><p>语法：</p><p>for ((初始值; 循环条件; 增量 ))</p><p>do</p><p>指令…</p><p>done</p><p>示例-1：输出1 2 3 4 5</p><p>for((i = 1;i &lt;= 5;i++))</p><p>do</p><p>echo $i</p><p>done</p><p>示例-2：求1—100的和</p><p>for (( i=1; i&lt;=100; i++ ))</p><p>do</p><p>sum=$(( $sum + $i ))</p><p>done</p><p>echo "1+2+3+...+100=$sum"</p><p><strong>3、case语句</strong></p><p>语法：</p><p>case "$variable" in</p><p>"$condition1" )</p><p>command...</p><p>;;</p><p>"$condition2" )</p><p>command...</p><p>;;</p><p>esac</p><p>对变量使用""并不是强制的, 因为不会发生单词分割</p><p>每句测试行, 都以右小括号)来结尾</p><p>每个条件判断语句块都以一对分号结尾 ;;</p><p>case块以esac (case的反向拼写)结尾</p><p><br></p><p>例如，有下列程序test.sh内容如下：</p><p>read c</p><p>case $c in</p><p>a)</p><p>echo "this is a"</p><p>;;</p><p>b)</p><p>echo "this is b"</p><p>;;</p><p>c)</p><p>echo "this is c"</p><p>;;</p><p>*)</p><p>echo "none"</p><p>esac</p><p><br></p><p><strong>4、while循环</strong></p><p>基本语法:</p><p>while [ condition ]</p><p>do</p><p>command1</p><p>command2</p><p>command3</p><p>done</p><p>例如，test.sh中的写法如下：</p><p>num=1</p><p>while [ $num -le 10 ]</p><p>do</p><p>sum=`expr $num \* $num`</p><p>echo $sum</p><p>num=`expr $num+1`</p><p>done</p><p><br></p><p><strong>5、break和continue语句</strong></p><p>break:结束循环</p><p>continue:结束本次循环，开始新的一轮循环</p><p>例如：</p><p>while true</p><p>do</p><p>echo "============================"</p><p>echo " 1 add "</p><p>echo "2 delete "</p><p>echo "3 update"</p><p>echo "4 Quit"</p><p>read num_op</p><p>case $num_op in</p><p>1)</p><p>echo "this is add operation"</p><p>;;</p><p>2)</p><p>echo "this is delete operation"</p><p>;;</p><p>3)</p><p>echo "this is update operation"</p><p>;;</p><p>4)</p><p>echo "exit ….."</p><p>break</p><p>;;</p><p>esac</p><p>done</p><p><strong>6、shift指令</strong></p><p>参数左移：每执行一次，参数序列顺次左移一个位置，即$#的值减去1。其用于处理每个参数，移动出去的参数不能再用</p><p>例如，test.sh文件内容如下：</p><p>If [ $# -le 0 ]</p><p>then</p><p>echo "not enough parameters"</p><p>exit 0</p><p>Fi</p><p>Sum=0</p><p>While [ $# -gt 0 ]</p><p>sum=`expr $sum + $1`</p><p>shift</p><p>Done</p><p>Echo $sum</p><p><br></p><p>关注《大数据和人工智能交流》头条号，看高科技新动态，我是头条天涯雨科技作者，请大家多多支持、关注、点赞，谢谢！</p><p>《大数据和人工智能交流》的宗旨</p><p>1、将大数据和人工智能的专业数学：概率数理统计、线性代数、决策论、优化论、博弈论等数学模型变得通俗易懂。</p><p>2、将大数据和人工智能的专业涉及到的数据结构和算法：分类、聚类 、回归算法、概率等算法变得通俗易懂。</p><p>3、最新的高科技动态：数据采集方面的智能传感器技术；医疗大数据智能决策分析；物联网智慧城市等等。</p><p>根据初学者需要会有C语言、Java语言、Python语言、Scala函数式等目前主流计算机语言。</p><p>根据读者的需要有和人工智能相关的计算机科学与技术、电子技术、芯片技术等基础学科通俗易懂的文章。</p><p><br></p><div class=pgc-img><img alt=Linux的shell编程(你必看的linux的shell精彩总结) onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3a8ded9a54794f078272a6ebd42d5667><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'shell','必看','Linux'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>