<!doctype html><html lang=cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Java集合类根接口：Collection 和 Map的深入了解 | 极客快訊</title><meta property="og:title" content="Java集合类根接口：Collection 和 Map的深入了解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="cn"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e6b0b352d7b44345afe8b4d5ec473a7b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><meta property="article:published_time" content="2020-11-14T21:05:53+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:53+08:00"><meta name=Keywords content><meta name=description content="Java集合类根接口：Collection 和 Map的深入了解"><meta name=author content="极客快訊"><meta property="og:url" content="/cn/%E7%A7%91%E6%8A%80/fd963681.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快讯 Geek Bank</a></h1><p class=description>为你带来最全的科技知识 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Java集合类根接口：Collection 和 Map的深入了解</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=cn/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>前言</strong></h1><p>在前文中我们了解了几种常见的数据结构，这些数据结构有着各自的应用场景，并且被广泛的应用于编程语言中，其中，Java中的集合类就是基于这些数据结构为基础。</p><p>Java的集合类是一些非常实用的工具类，主要用于存储和装载数据 (包括对象)，因此，Java的集合类也被成为容器。在Java中，所有的集合类都位于java.util包下，这些集合类主要是基于两个根接口派生而来，它们就是 <strong>Collection</strong>和 <strong>Map</strong>。</p><h1><strong>Collection接口</strong></h1><p>Collection派生出三个子接口，Set代表不可重复的无序集合、List代表可重复的有序集合、Queue是java提供的队列实现，通过它们不断的扩展出很多的集合类，例如HashMap、ArrayList、LinkedList、Deque等，其分布图如下：</p><div class=pgc-img><img alt="Java集合类根接口：Collection 和 Map的深入了解" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e6b0b352d7b44345afe8b4d5ec473a7b><p class=pgc-img-caption></p></div><p>作为最基本的两个根接口之一，Collection提供了很多的基础方法，供它的子类调用。下面是Collection接口的源码：</p><pre>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; { int size(); boolean isEmpty(); boolean contains(Object var1); Iterator&lt;E&gt; iterator(); Object[] toArray(); &lt;T&gt; T[] toArray(T[] var1); boolean add(E var1); boolean remove(Object var1); boolean containsAll(Collection&lt;?&gt; var1); boolean addAll(Collection&lt;? extends E&gt; var1); boolean removeAll(Collection&lt;?&gt; var1); default boolean removeIf(Predicate&lt;? super E&gt; var1) { Objects.requireNonNull(var1); boolean var2 = false; Iterator var3 = this.iterator(); while(var3.hasNext()) { if (var1.test(var3.next())) { var3.remove(); var2 = true; } } return var2; } boolean retainAll(Collection&lt;?&gt; var1); void clear(); boolean equals(Object var1); int hashCode(); default Spliterator&lt;E&gt; spliterator() { return Spliterators.spliterator(this, 0); } default Stream&lt;E&gt; stream() { return StreamSupport.stream(this.spliterator(), false); } default Stream&lt;E&gt; parallelStream() { return StreamSupport.stream(this.spliterator(), true); }}</pre><p>从源码可以看出，里面有很多方法是针对集合的基础操作，例如添加，删除，查询。例如：</p><ul><li>int size() 获取元素个数</li><li>boolean isEmpty() 是否个数为 0</li><li>boolean contains(Object element) 是否包含指定元素</li><li>boolean add(E element) 添加元素，成功时返回 true</li><li>boolean remove(Object element) 删除元素，成功时返回 true</li><li>Iterator&lt;E> iterator() 获取迭代器</li></ul><p>还有一些操作整个集合的方法：</p><p>boolean containsAll(Collection&lt;?> c)</p><p>是否包含指定集合 c 的全部元素</p><p>boolean addAll(Collection&lt;? extends E> c)</p><p>添加集合 c 中所有的元素到本集合中，如果集合有改变就返回 true</p><p>boolean removeAll(Collection&lt;?> c)</p><p>删除本集合中和 c 集合中一致的元素，如果集合有改变就返回 true</p><p>boolean retainAll(Collection&lt;?> c)</p><p>保留本集合中 c 集合中两者共有的，如果集合有改变就返回 true</p><p>void clear()</p><p>删除所有元素</p><p>值得说明的是，在jdk1.8之后，Collection 接口还提供了从集合获取连续的或者并行流的方法：</p><p>Stream&lt;E> stream() 在这个集合上返回一个顺序流 ，单线程</p><p>Stream&lt;E> parallelStream() 在这个集合上返回一个并行的代码流 ，多线程</p><p>Stream相当于高级版本的iterator，可以对集合做比较，分类，甚至是过滤等操作，一般是结合lambda表达式来使用，这样会使代码变得更加简洁 (有人说会更难理解，这个仁者见仁) ，下面举几个简单的例子：</p><p>1、使用顺序流来过滤掉集合中为 “aaa” 的元素并做输出：</p><pre>List&lt;String&gt; list = Arrays.asList("aaa", "bbb", "ccc");list.stream().filter(e -&gt; !e.contains("aaa")) .forEach(e -&gt; System.out.println(e));</pre><p>2、使用并行流来操作集合：</p><pre>List&lt;String&gt; list = Arrays.asList("aaa", "bbb", "ccc");list.parallelStream().filter(e -&gt; !e.contains("aaa")) .forEach(e -&gt; System.out.println(e));</pre><p>当使用顺序流去遍历时，每个item读完后再读下一个item。</p><p>而使用并行流去遍历时，集合会被分成多个段，其中每一个都在不同的线程中处理，然后将结果一起输出，所以理论上，并行流的效率至少是顺序流的两倍以上。</p><h1><strong>Map接口</strong></h1><p>Map接口是和Collection同等级的根接口，它表示一个键值对（key-value）的映射，每一个key对应一个value，查找Map中的数据，总是根据key来获取，所以key是不可重复的，它用于标识集合里的每项数据。跟Collection一样，Map接口派生了很多的集合子类，这是Map的体系架构图：</p><div class=pgc-img><img alt="Java集合类根接口：Collection 和 Map的深入了解" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7fb03926e47248f39d03ee0105b10c36><p class=pgc-img-caption></p></div><p>Map接口提供了很多集合的初识方法，其底层结构是封装一个名为entry的接口，源码如下：</p><pre>public interface Entry&lt;K, V&gt; { K getKey(); V getValue(); V setValue(V var1); boolean equals(Object var1); int hashCode(); static &lt;K extends Comparable&lt;? super K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey() { return (Comparator)((Serializable)((var0x, var1x) -&gt; { return ((Comparable)var0x.getKey()).compareTo(var1x.getKey()); })); } static &lt;K, V extends Comparable&lt;? super V&gt;&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue() { return (Comparator)((Serializable)((var0x, var1x) -&gt; { return ((Comparable)var0x.getValue()).compareTo(var1x.getValue()); })); } static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? super K&gt; var0) { Objects.requireNonNull(var0); return (Comparator)((Serializable)((var1x, var2x) -&gt; { return var0.compare(var1x.getKey(), var2x.getKey()); })); } static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? super V&gt; var0) { Objects.requireNonNull(var0); return (Comparator)((Serializable)((var1x, var2x) -&gt; { return var0.compare(var1x.getValue(), var2x.getValue()); })); }}</pre><p>从源码中可以看出，entry中封装了一系列设值和比较器，这也是Map实现类的元素操作的基础接口，一个entry就相当于一个封装了键值对的元素，是Map接口里的架构核心。</p><p>除此之外，Map中还提供了两个集合来操作自身，这就是 <strong>KeySet</strong> 和 <strong>Values</strong>。</p><pre>Set&lt;K&gt; keySet();Collection&lt;V&gt; values();</pre><p>KeySet 是一个 Map 中 key 的集合，<strong>以 Set 的形式保存</strong>，不允许重复，因此键存储的对象需要重写 equals() 和 hashCode() 方法。</p><p>Values 是一个 Map 中 value 的集合，<strong>以 Collection 的形式保存</strong>，可以重复。</p><p>通过这三种视图，Map可以对自身结构以及内部元素做操作，在集合中非常常用，建议读者们可以多看看源码，作深入的了解。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>'Java','类根','Collection'</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-146415161-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>