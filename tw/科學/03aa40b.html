<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Android 你不知道的調試技巧（Debug操作彙總） | 极客快訊</title><meta property="og:title" content="Android 你不知道的調試技巧（Debug操作彙總） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/07a1f56522de4fa5a6b1a81191718b88"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/03aa40b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/03aa40b.html><meta property="article:published_time" content="2020-10-29T21:02:12+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:12+08:00"><meta name=Keywords content><meta name=description content="Android 你不知道的調試技巧（Debug操作彙總）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/03aa40b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Android 你不知道的調試技巧（Debug操作彙總）</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><blockquote class=warning><p>作者：金燦燦 來源：掘金</p></blockquote><p><strong>前言</strong></p><p>本文通過Android Studio工具來講述你不曾知道的一些Debug小技巧。文中有許多操作，不需要死記硬背，只需瀏覽一遍，瞭解一番，增加個印象。等到要上手操作的時候，再憶起本文，回來查看查看。久而久之你就能熟能生巧，成為一代Debug大師！</p><h1 class=heading>Android Studio 版本</h1><p>使用版本為3.5.3</p><h1 class=heading>調試項目</h1><p>調試的項目只有一張頁面，由 RecyclerView + 底部一個Button組成。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/07a1f56522de4fa5a6b1a81191718b88><p class=pgc-img-caption></p></div><p><br></p><h1 class=heading>使用Logcat查看日誌技巧</h1><h2 class=heading>去除多餘信息</h2><p>為了方便舉例，我使用addOnScrollListener(...)方法來監聽RecyclerView的滑動事件，然後在onScrolled(...)方法裡，通過Log.d("recycler_view", "recycler view was Scrolled...")把信息打印到控制檯，如下圖所示：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/067b6316954f4f52b0a413fb20236d05><p class=pgc-img-caption></p></div><p>大家可能注意到，上圖中有許多內容是我們不需要關心的，例如紅圈裡面的<strong>時間</strong>、<strong>線程</strong>與<strong>包名</strong>。這時我們可以點擊右邊工具欄的Logcat Header圖標，來把這些信息移除，如：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e3f756b44a634a30a6d19a32e4e4794e><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e4ff32af05b34c74896265110a6171af><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1fcb636e8f43425cb7d218d4a85c3cb1><p class=pgc-img-caption></p></div><p>我們只保留一個TAG，這樣我們Logcat界面就會變得清爽很多，看下效果：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0948754eb5f94483b07cf5855edd3990><p class=pgc-img-caption></p></div><h2 class=heading>過濾結果</h2><p>在Logcat界面的搜索欄中，我們可以輸入自定義的TAG來過濾結果：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2a711a679d62439ea1ab2504212d9f34><p class=pgc-img-caption></p></div><p>但如果存在多個TAG的時候，我們應該把它們保存起來，這樣才不僅方便我們回過頭來繼續查看，也無須在腦中開闢塊空間把TAG名記住。來來來，一起動手來編輯一下過濾器配置：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/88a065a540d440d6a0c77d82f59b01fc><p class=pgc-img-caption></p></div><blockquote class=warning><p>圖中左上角的“+”是添加，“-”是移除。</p><p><br></p></blockquote><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/7a56753af01740be8e5309dd67b18ac8><p class=pgc-img-caption></p></div><p>添加完成之後，我們就不用在搜索欄中輸入相應的TAG了，取而代之的是，直接點擊右上角的<strong>過濾器</strong>，選擇我們添加進去的TAG即可。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/57e3f299413d4174b2e8c859b7ae8384><p class=pgc-img-caption></p></div><h2 class=heading>摺疊信息</h2><p>為了方便講解，我在監聽中的onScrollStateChanged(...)方法裡，使用同一個TAG向控制檯打印一條信息：Log.d("recycler_view", "state:" + newState)，如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/96353ae4ee664219b95ca017b7a4cb53><p class=pgc-img-caption></p></div><p><br></p><p>此時我們只想查看有關它state的值，並不關心其他信息。那麼我們可以選中那些多餘且不關心的<strong>子字符串</strong>，右鍵它，點擊Fold lines like this。這樣就為我們創建了一個<strong>過濾器</strong>。</p><p><strong>可以摺疊所有包含我們選中的子字符串的字符串！</strong> 留下我們關心的信息：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d62517e2f6d24cf68a53290212abf536><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3855ef101e2b466c8b2c6be08cf2aee7><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0696f7d366454dc980689c2a50f771c7><p class=pgc-img-caption></p></div><p><br></p><p>現在我們再回過頭看看剛才打印出來的這些Log，是不是頓時覺得眼睛<strong>輕鬆</strong>了很多！當然點擊紅圈裡面的‘+’，可以隨時展開或摺疊。</p><h1 class=heading>Debug斷點跟蹤調試技巧</h1><h2 class=heading>基本使用</h2><p>啟動Debug有<strong>兩種方式</strong>，一種是點擊Debug，即中間的那隻小蟲子，另一種是點擊Attach debugger to Android process，即靠近右邊帶箭頭的小蟲子。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1ec43bdb66bf42f39dc9648e8f60e067><p class=pgc-img-caption></p></div><p><br></p><p>一般我推薦使用Attach debugger to Android process來進入調試模式，它能夠在App處於運行狀態時<strong>進入調試模式</strong>，而要是通過Debug進入調試，它會<strong>停止應用並重啟</strong>。這樣我們還需要一路尋找回我們需要調試的狀態，就稍微有點煩心了。</p><p>我們點擊帶箭頭的小蟲子，彈出Choose Process窗口，選擇對應進程，點擊‘OK‘按鈕，進入調試模式。</p><p>現在我們可以在代碼中打上斷點，打斷點的方法就是點擊目標行代碼<strong>行號右側的空白處</strong>，再點擊一次就是取消斷點，<strong>斷點是可以上下拖動</strong>。</p><p>當App在運行時，如果擊中了斷點，則會在Debug窗口中顯示斷點信息。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7e3419c951574cf4b92da1b735db44e8><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cfd79c5ffe574a0e809cb35703c99f5a><p class=pgc-img-caption></p></div><h2 class=heading>工具欄操作按鈕</h2><p>接著，來了解下Debug的操作按鈕：</p><p><strong>斷點管理區</strong>操作按鈕：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b961b5ee395942f196e8210b513392f0><p class=pgc-img-caption></p></div><p><br></p><p>順序從上到下：</p><ul><li>Resume Program：一是可從當前斷點<strong>移動</strong>到下一個斷點，斷點間的代碼自動執行；二是讓App從暫停狀態<strong>恢復</strong>到運行狀態。</li><li>Pause Program：暫停App。</li><li>Stop：對於普通的JAVA項目則是退出調試，對於Android項目則是<strong>結束</strong>App運行。</li><li>View Breakpoints：查看所有斷點，並可以<strong>管理配置</strong>斷點的行為。</li><li>Mute Breakpoints：切換啟用或禁用<strong>所有</strong>斷點的狀態。</li><li>Get Thread Dump：進入線程Dunmp界面。</li></ul><p><strong>調試區</strong>操作按鈕：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3a6036b559a34749a5e5db035f64ddbf><p class=pgc-img-caption></p></div><p>順序從左往右：</p><p><br></p><ul><li>Show Excution Point：<strong>定位</strong>到正在被執行的斷點位置。</li><li>Step Over：單步執行，即<strong>前進到下一行</strong>代碼。</li><li>Step Into：<strong>進入調用方法</strong>的第一行，不能跳到類庫方法。</li><li>Force Step Info：與Step Into方法類似，只不過他<strong>能跳到類庫的方法裡</strong>。</li><li>Step Out：前進<strong>到當前方法之外</strong>的下一行，可與Step Into配合使用。</li><li>Drop Frame：返回到方法執行的<strong>初始點</strong>（下方有演示）。</li><li>Run to Cursor：跳轉到<strong>光標所在處</strong>，需要當前斷點已經執行到最後一個，且光標所在的代碼行要符合<strong>由上到下的執行順序</strong>，不能顛倒。</li></ul><p><strong>Drop Frame</strong>：可以用來在調試的時候，原本想點擊Step Into進入方法內部看看，卻<strong>不小心</strong>點了Step Over向下走了一行。如果調試運行的設備是Android10以上的版本，那麼我們可以點擊Drop Frame按鈕——它的作用是可以把我們從當前方法<strong>拉出來</strong>，<strong>放回方法開始前的地方</strong>。接著點擊Resume Program按鈕，就相當於獲取到了一次<strong>重新開始的機會</strong>！演示如下：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24fd16fed7ab4c28b40b2fab220bbac9><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>條件斷點</h2><p>我們把斷點打到循環體裡的某行代碼，想看看循環到某一次時的運行狀態。難道此時我們要<strong>不停</strong>的點Resume Program按鈕，直到跳轉到滿足我們要求的斷點嗎？</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/57b676ecaaee4bc6aa84b0b962871278><p class=pgc-img-caption></p></div><p>不，當然不需要。假如我們想查看斷點在運行到第二十次時的狀態，可以右擊這個斷點，在彈出的窗口中的Condition里加入任何<strong>布爾表達式</strong>：i==20（可以選擇語句的語言），點擊‘Done’按鈕完成配置：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b8bdcb0d2d7540e998636892778f6e49><p class=pgc-img-caption></p></div><p>如果條件為“<strong>true</strong>”，當代碼命中這個條件時，那麼就會到達這個斷點！</p><h2 class=heading>日誌斷點</h2><p>App在運行時擊中我們打上的斷點，立馬會把斷點信息顯示在在Variables菜單中，然後我們就需要在整個菜單中<strong>找出我們想要的信息</strong>：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/119599d828d34276b322d42cfcf2b66d><p class=pgc-img-caption></p></div><p>這樣有時還蠻麻煩的，我們真正想做的是直接在代碼中打上Log，但卻<strong>不想把Log語句在代碼中打得到處都是</strong>，這時日誌斷點就派上用場了！</p><p>操作步驟：右擊需要打Log的斷點，在它彈出的窗口中<strong>取消選中</strong>Suspend（下面會介紹到），此時窗口會向下展開一些新內容。我們<strong>勾選</strong>Evaluate and log選項，並在其中添加上Log語句，點擊‘Done’按鈕。</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/83e0d90c71d948a5b667530dac414352><p class=pgc-img-caption></p></div><p>現在，當線程遇上這個斷點的時候並<strong>不會停止</strong>，它只會計算斷點裡的Log表達式，並把它<strong>記錄到控制檯</strong>，然後<strong>繼續運行</strong>。</p><h2 class=heading>異常斷點</h2><p>想必App在運行的過程中遇到各式各樣未知性的異常導致的Crash常常令你抓狂，不過強大的Android Studio提供了<strong>異常斷點</strong>的功能。幫助我們在調試運行的App遇到異常，能夠<strong>先快速準確的定位到產生異常的地方</strong>，而非第一時間停止App的運行。</p><p>我們點擊斷點區工具欄上面的View Breakpoints按鈕，呼出斷點管理界面。然後點擊‘+’，選擇Java Exception Breakpoints。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15003277ed204b5bb1e1d35547e5af85><p class=pgc-img-caption></p></div><p>點擊後呼出Enter Exception Class界面，我們在搜索欄中填入想要監控異常的關鍵字。Java代碼選擇NullPointerException，Kotlin代碼選擇KotlinNullPointerException，點擊‘OK’按鈕即可，如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/12f30739bdf54ef6a9d2d8d81889089a><p class=pgc-img-caption></p></div><p>不過！！在我模擬空指針異常的時候發現，如果用Java代碼寫的話，調試器確實能監控的到異常，並能定位產生異常的代碼。但是！！我用Kotlin寫的話，App直接Crash掉了。並未監控到異常，也沒定位到產生異常的代碼。</p><blockquote class=warning><p>不知道是我調試姿勢有問題，還是暫時不支持Kotlin代碼。</p></blockquote><h2 class=heading>變量賦值</h2><p>可以讓我們在調試期間，<strong>通過更改斷點監控到變量的值，來改變App執行的結果！</strong></p><p>具體操作如下：</p><p>首先我們在獲取數據的循環體裡打上斷點。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b44260d527fb40d7bdbe237ce59348e3><p class=pgc-img-caption></p></div><p><br></p><p>通過Debug進入調試模式，在Variables菜單中，選中我們要改變的變量，右擊它，在打開的選項中點擊Set Value...。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a521938f8e424f4abf424d064c2f532c><p class=pgc-img-caption></p></div><p><br></p><p>我們把i=1更改為i=28，此時能清楚得看到，在代碼中顯示的變量i信息也從i:1變成了i:28。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/26ba3ac3b7e84c9f91c929c5c1b33589><p class=pgc-img-caption></p></div><p><br></p><p>在循環中，原本變量i的值是從1到30，但我們已經把初始i的值改為了28，點擊斷點區工具欄上的Resume Program按鈕，原本需要循環30下才執行完畢的斷點現在點3下便可完成。</p><p>現在來看看更改變量值後App的情況吧：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ee32686f40084108825ab9792a8c3e2d><p class=pgc-img-caption></p></div><h2 class=heading>Suspend 選項</h2><p>在我們右擊斷點的時候，你可能留意到Suspend選項，如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ae1d4ec7b2cf4041ac3f45999067f567><p class=pgc-img-caption></p></div><p><br></p><p>目前我們“All”與“Thread”之中選擇了“All”，意味著在當前執行線程遇到該斷點的時候，<strong>會停止App內的所有線程</strong>，這樣就會停止App整個運行狀態。</p><p>但是如果你正在處理一個多線程App，而你正在尋找一些特別麻煩的異步問題，你可以試著只去<strong>暫停那個撞到斷點的線程</strong>。可把選中“All”改為選中“Thread”。</p><h2 class=heading>直到擊中某一斷點才啟用</h2><p>為了方便舉例，我在示例中RecyclerView的<strong>滑動監聽裡面</strong>與<strong>按鈕的點擊監聽</strong>中分別打上斷點。</p><p>由於斷點被打在RecyclerView的滑動監聽裡，那麼我們手指稍微一滑動，就會立即執行該斷點。那麼在調試的時候<strong>我想必須先擊中按鈕監聽裡面的斷點，才允許執行RecyclerView的滑動監聽裡面的斷點。</strong></p><p>此時，Disable until breakpoint is hit功能就派上用場了。</p><p>右擊RecyclerView的滑動監聽裡斷點，在彈出的窗口裡麵點擊More：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/16eea623130c4feeace48b5864ddab27><p class=pgc-img-caption></p></div><p>我們就會進入到<strong>斷點管理界面</strong>，在該斷點的Disable until breakpoint is hit選項中，<strong>禁用斷點，直到我們選擇的按鈕監聽裡斷點被命中為止</strong>。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/920892d5204f424cbdcddee4717b6f58><p class=pgc-img-caption></p></div><p><br></p><p>現在手指滑動屏幕的時候並<strong>不會觸發</strong>RecyclerVie滑動監聽裡面的斷點，<strong>直到點擊了按鈕</strong>，觸發了點擊監聽裡面的斷點，才被<strong>激活一次</strong>。意味著每次執行完該斷點，就會被禁用掉，<strong>除非再點擊一次按鈕才被重新激活</strong>。演示如下：</p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/08905792cfe34c0c8ca2b527478fd3ae><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>禁用斷點</h2><p>當已被打上的斷點，我們暫時<strong>不需要</strong>命中它的時候，我們可以把它給<strong>禁用</strong>掉，右鍵斷點，在彈出的窗口來取消勾選Enable選擇。此時斷點會變成一個<strong>空心圓</strong>。不過更方便的做法是通過“Alt + 點擊”，Mac是“Opt + 點擊”。這樣就能讓它在<strong>開/關的狀態下切換</strong>：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d6fd2974e70441eb93c1a2c64f780d4c><p class=pgc-img-caption></p></div><p><br></p><h2 class=heading>斷點組</h2><p>有時候我們在執行調試App功能的時候會遇到<strong>一些暫時不需要使用的斷點</strong>，我們又不想把它們刪掉，也許調試下個功能可能會用上，所以只能一個一個禁掉它們。</p><p>其實，只要我們學會使用<strong>斷點組</strong>，這就方便多了！</p><p>右鍵斷點，點擊窗口的More，前往斷點管理界面。我們還可以點擊Debug窗口裡的斷點區工具欄中的View Breakpoint按鈕也能前往。</p><p>在該界面中，可以看到所有斷點都在上面。我們<strong>多選它們</strong>，右擊，創建一個新的組，<strong>你可以把它們起名為你正在處理Bug的名字</strong>。</p><p>這裡我起名為OnScrollListener，意味著該組的斷點都來自addOnScrollListener(...)的監聽裡。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c493aa0c687f4ee2b6e61c8ffc1b8512><p class=pgc-img-caption></p></div><p><br></p><p>分組完畢後，你可以通過點擊組的單選框來<strong>切換組內斷點開/關的狀態</strong>。當你處理完Bug後，可以選中組，並點擊“-”，即可把它們<strong>全部刪掉</strong>。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e6c027a4cbcc43919af4017357bca8be><p class=pgc-img-caption></p></div><h2 class=heading>Evaluate expression</h2><p>系統給Variables區的變量對象提供了<strong>表達式求值的功能</strong>。在抵達斷點後，如果有變量對象。我們可以輸入任何表達式，來<strong>實時查看</strong>表達式的計算結果。</p><p>首先，可通過點擊工具欄上面的Evaluate expression按鈕，或者右鍵目標代碼選擇Evaluate expression來呼出操作界面。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/2b96bd6637dc496f8e12b7b7837039f3><p class=pgc-img-caption></p></div><p><br></p><p>一般首次打開它的時候，是<strong>單行輸入模式</strong>，我們輸入一條textList[position]，點擊‘Evaluate’按鈕，就能在下方Result中瀏覽對象。如下圖所示：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/805a908a0eda44998273b8c02e33b165><p class=pgc-img-caption></p></div><p><br></p><p>如果我們想輸入<strong>更加豐富的表達式</strong>，那麼單行模式不能滿足我們的需求。點擊輸入框的右上角，將單行模式<strong>擴展為多行</strong>。這樣，我們就能夠輸入更加豐富的表達式：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a9664d3b85a0490db025fd2c8357c892><p class=pgc-img-caption></p></div><p><br></p><blockquote class=warning><p>Evaluate expression 是非常適合充當實時檢測器，它能夠讓我們清楚的觀察到當前應用的狀態。</p></blockquote><h1 class=heading>分析堆棧軌跡</h1><p>在合作開發項目中，也許我們會收到來自同事發來的一份包含調用棧的Bug報告，其實也就是一堆文本。我們複製Bug報告，回到Android Studio，點擊工具欄上面的Analyze，然後點擊Analyze Stack Trace...，我們會發現它找到了粘貼板上面的內容：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/11515ca2145d4009b21c67bf54787741><p class=pgc-img-caption></p></div><p><br></p><p>點擊‘OK’按鈕後，它會對我們的調用棧作一個全面的註解，並顯示在控制檯中。我們點擊其中的<strong>鏈接</strong>，就會對我們的代碼庫進行一個快速的檢索並<strong>定位</strong>代碼：</p><p><br></p><div class=pgc-img><img alt="Android 你不知道的調試技巧（Debug操作彙總）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7c7d59cc77644a4cb31283fd8d64f4b4><p class=pgc-img-caption></p></div><p><br></p><h1 class=heading>總結</h1><p>本篇文章大部分內容來自谷歌官方的視頻Android Studio: 調試的技巧與心得，我推薦大家可以關注下谷歌的官方賬號。裡面有很多優質的視頻，都是由開發者本人來講解的。</p><p>希望本文能給大家在調試App的時候提供多一條思路。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Android</a></li><li><a>調試</a></li><li><a>Debug</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/2f0342c.html alt="小技巧｜在 Android Studio 調試應用" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b788a533e7b249a6980495217f914da4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/2f0342c.html title="小技巧｜在 Android Studio 調試應用">小技巧｜在 Android Studio 調試應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/031eafc4.html alt=電廠直流系統調試方案 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5e8200036f19e04c25bf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/031eafc4.html title=電廠直流系統調試方案>電廠直流系統調試方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea182b49.html alt=液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/7e5d0001487382aeec79 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea182b49.html title=液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？>液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8eefa3d.html alt=大彙總，收藏了看！「報警閥組系統」的調試和檢測 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/50ad00022673c3ca1dc4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8eefa3d.html title=大彙總，收藏了看！「報警閥組系統」的調試和檢測>大彙總，收藏了看！「報警閥組系統」的調試和檢測</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2beb44d.html alt=溼式報警閥組件安裝、檢查、檢測、調試及故障分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a027833f8ae24c738984ebeba3fc5668 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2beb44d.html title=溼式報警閥組件安裝、檢查、檢測、調試及故障分析>溼式報警閥組件安裝、檢查、檢測、調試及故障分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c1058aa2.html alt="Android Q下ANGLE圖形引擎性能測試  「農步祥」" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RXTy8D7HmsBWr1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c1058aa2.html title="Android Q下ANGLE圖形引擎性能測試  「農步祥」">Android Q下ANGLE圖形引擎性能測試 「農步祥」</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/89f872ba.html alt=如何做好三軸試驗二(儀器調試與測試參數) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e0287bd5c0724f0ab361e2d3b43c531c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/89f872ba.html title=如何做好三軸試驗二(儀器調試與測試參數)>如何做好三軸試驗二(儀器調試與測試參數)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5aeae6aa.html alt=分析MTK校準調試的原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/6c340001093ce7c9945a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5aeae6aa.html title=分析MTK校準調試的原理>分析MTK校準調試的原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ff07a1f6.html alt=我是怎麼調試出來二叉樹的遍歷(超精彩配圖)，從此遍歷不再愁了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a709d5ec01b24d4da23144253637ca81 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ff07a1f6.html title=我是怎麼調試出來二叉樹的遍歷(超精彩配圖)，從此遍歷不再愁了>我是怎麼調試出來二叉樹的遍歷(超精彩配圖)，從此遍歷不再愁了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0ac13623.html alt="Android 11加入新功能：長期不用的APP自動關閉敏感權限" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Rx4J9h84rlZBze style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0ac13623.html title="Android 11加入新功能：長期不用的APP自動關閉敏感權限">Android 11加入新功能：長期不用的APP自動關閉敏感權限</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/192b9f57.html alt="Android版Firefox 81將引入可自動關閉舊標籤頁的選項" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/SA9N6CXIS75NYa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/192b9f57.html title="Android版Firefox 81將引入可自動關閉舊標籤頁的選項">Android版Firefox 81將引入可自動關閉舊標籤頁的選項</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e3073c3d.html alt="Android端Firefox 81可定時關閉不使用的標籤頁" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S9x6jJb18axAim style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e3073c3d.html title="Android端Firefox 81可定時關閉不使用的標籤頁">Android端Firefox 81可定時關閉不使用的標籤頁</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/355ed5a4.html alt=在Android中的工具欄中添加菜單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a3572ad9d9fb487d8927f703f18179a0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/355ed5a4.html title=在Android中的工具欄中添加菜單>在Android中的工具欄中添加菜單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html alt=【學習筆記】Android開發之kotlin語言（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ee3f9c8348ae4de58a5f62922d2042e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html title=【學習筆記】Android開發之kotlin語言（一）>【學習筆記】Android開發之kotlin語言（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/564b0eda.html alt=硬件調試——眼圖幾個經典案例！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15361403395238d26c42feb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/564b0eda.html title=硬件調試——眼圖幾個經典案例！>硬件調試——眼圖幾個經典案例！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>