<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>數據結構你真的懂了嗎？————「樹篇」 | 极客快訊</title><meta property="og:title" content="數據結構你真的懂了嗎？————「樹篇」 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/4a4650a0-7e1c-4a3f-9a4c-e88c1f143f6d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/1b7ef37b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/1b7ef37b.html><meta property="article:published_time" content="2020-11-14T20:53:56+08:00"><meta property="article:modified_time" content="2020-11-14T20:53:56+08:00"><meta name=Keywords content><meta name=description content="數據結構你真的懂了嗎？————「樹篇」"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/1b7ef37b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>數據結構你真的懂了嗎？————「樹篇」</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><p><br></p><p>樹和二叉樹</p><p>一種非線性結構。樹是遞歸結構，在樹的定義中又用到了樹的概念。</p><p>基本術語：</p><p>樹結點：包含一個數據元素及若干指向子樹的分支；</p><p>孩子結點：結點的子樹的根稱為該結點的孩子；</p><p>雙親結點：B結點是A結點的孩子，則A結點是B結點的雙親；</p><p>兄弟結點：同一雙親的孩子結點；</p><p>堂兄結點：同一層上結點；</p><p>結點層次：根結點的層定義為1；根的孩子為第二層結點，依此類推；</p><p>樹的高（深）度：樹中最大的結點層</p><p>結點的度：結點子樹的個數</p><p>樹的度： 樹中最大的結點度。</p><p>葉子結點：也叫終端結點，是度為0的結點；</p><p>分枝結點：度不為0的結點（非終端結點）；</p><p>森林：互不相交的樹集合；</p><p>有序樹：子樹有序的樹，如：家族樹；</p><p>無序樹：不考慮子樹的順序；</p><p>二叉樹</p><p>二叉樹可以為空。二叉樹結點的子樹要區分左子樹和右子樹，即使只有一棵子樹也要進行區分，說明它是左子樹，還是右子樹。這是二叉樹與樹的最主要的差別。注意區分：二叉樹、二叉查找樹/二叉排序樹/二叉搜索樹、二叉平衡(查找)樹</p><p>二叉平衡樹肯定是一顆二叉排序樹。堆不是一顆二叉平衡樹。</p><p>二叉樹與樹是不同的，二叉樹不等價於分支樹最多為二的有序樹。當一個結點只包含一個子節點時，對於有序樹並無左右孩子之分，而對於二叉樹來說依然有左右孩子之分，所以二叉樹與樹是兩種不同的結構。</p><p>性質：</p><p>在二叉樹的第 i 層上至多有2i-1個結點。</p><p>深度為 k 的二叉樹上至多含 2k-1 個結點（k≥1）</p><p>對任何一棵二叉樹，若它含有n0個葉子結點、n2個度為 2 的結點，則必存在關係式：n0= n2+1。</p><p>具有 n 個結點的完全二叉樹的深度為⎣log2 n⎦+1 。</p><p>n個結點的二叉樹中，完全二叉樹具有最小的路徑長度。</p><p>如果對一棵有n個結點的完全二叉樹的結點按層序編號,則對任一結點i（1&lt;=i&lt;=n),有：</p><p>如果i＝1，則結點i無雙親，是二叉樹的根；如果i>1，則其雙親的編號是 i/2(整除）。</p><p>如果2i>n，無左孩子；否則，其左孩子是結點2i。</p><p>如果2i＋1>n，則結點i無右孩子；否則，其右孩子是結點2i＋1。</p><p>二叉樹的存儲結構</p><p>順序存儲結構：僅僅適用於滿或完全二叉樹，結點之間的層次關係由性質5確定。</p><p>二叉鏈表法：每個節點存儲左子樹和右子樹。三叉鏈表：左子樹、右子樹、父節點，總的指針是n+2</p><p>在有n個結點的二叉鏈表中，值為非空的鏈域的個數為n-1。在有N個結點的二叉鏈表中必定有2N個鏈域。除根結點外，其餘N-1個結點都有一個父結點。所以，一共有N-1個非空鏈域，其餘2N-(N-1)=N+1個為空鏈域。</p><p>二叉鏈存儲法也叫孩子兄弟法，左指針指向左孩子，右指針指向右兄弟。而中序遍歷的順序是左孩子，根，右孩子。這種遍歷順序與存儲結構不同，因此需要堆棧保存中間結果。而中序遍歷檢索二叉樹時，由於其存儲結構跟遍歷順序相符，因此不需要用堆棧。</p><p>遍歷二叉樹和線索二叉樹</p><p>遍歷二叉樹：使得每一個結點均被訪問一次，而且僅被訪問一次。非遞歸的遍歷實現要利用棧。</p><p>先序遍歷DLR：根節點->左子樹->右子樹</p><p>中序遍歷LDR：左子樹->根節點->右子樹。必須要有中序遍歷才能得到一棵二叉樹的正確順序</p><p>後續遍歷LRD：左子樹->右子樹->根節點。需要棧的支持。</p><p>層次遍歷：用一維數組存儲二叉樹時,總是以層次遍歷的順序存儲結點。層次遍歷應該藉助隊列。</p><p>線索二叉樹：對二叉樹所有結點做某種處理可在遍歷過程中實現；檢索（查找）二叉樹某個結點，可通過遍歷實現；如果能將二叉樹線索化，就可以簡化遍歷算法，提高遍歷速度，目的是加快查找結點的前驅或後繼的速度。</p><p>如何線索化？以中序遍歷為例，若能將中序序列中每個結點前趨、後繼信息保存起來，以後再遍歷二叉樹時就可以根據所保存的結點前趨、後繼信息對二叉樹進行遍歷。對於二叉樹的線索化，實質上就是遍歷一次二叉樹，只是在遍歷的過程中，檢查當前結點左，右指針域是否為空，若為空，將它們改為指向前驅結點或後繼結點的線索。前驅就是在這一點之前走過的點，不是下一將要去往的點。</p><p>加上結點前趨後繼信息（結索）的二叉樹稱為線索二叉樹。n個結點的線索二叉樹上每個結點有2個指針域（指向左孩子和右孩子），總共有2n個指針域；一個n個結點的樹有n-1條邊，那麼空指針域= 2n - (n-1) = n + 1，即線索數為n+1。指針域tag為0，存放孩子指針，為1，存放前驅/後繼節點指針。</p><p>線索樹下結點x的前驅與後繼查找：設結點x相應的左（右）標誌是線索標誌，則lchild(rchild)就是前驅(後繼），否則：</p><p>LDR–前驅：左子樹中最靠右邊的結點；後繼：右子樹中最靠左邊的結點</p><p>LRD–前驅：右子樹的根，若無右子樹，為左子樹跟。後繼：x是根，後繼是空；x是雙親的右孩子、x是雙親的左孩子，但雙親無右孩子，雙親是後繼；x是雙親的左孩子，雙親有右孩子，雙親右子樹中最左的葉子是後繼</p><p>DLR–對稱於LRD線索樹—將LRD中所有左右互換，前驅與後繼互換，得到DLR的方法。</p><p>為簡化線索鏈表的遍歷算法，仿照線性鏈表，為線索鏈表加上一頭結點，約定：</p><p>頭結點的lchild域：存放線索鏈表的根結點指針；</p><p>頭結點的rchild域: 中序序列最後一個結點的指針；</p><p>中序序列第一結點lchild域指向頭結點;</p><p>中序序列最後一個結點的rchild域指向頭結點;</p><p>中序遍歷的線索二叉樹以及線索二叉樹鏈表示意圖</p><p>一棵左右子樹均不空的二叉樹在前序線索化後,其中空的鏈域的個數是1。前序和後續線索化後空鏈域個數都是1，中序是2。二叉樹在線索化後，仍不能有效求解的問題是前序求前序先驅，後序求後序後繼。</p><p>中序遍歷的順序為：左、根、右，所以對於每一非空的線索，左子樹結點的後繼為根結點，右子樹結點的前驅為根結點，再遞歸的執行上面的過程，可得非空線索均指向其祖先結點。在中序線索二叉樹中,每一非空的線索均指向其祖先結點。</p><p>在二叉樹上加上結點前趨、後繼線索後，可利用線索對二叉樹進行遍歷,此時，不需棧，也不需遞歸。基本步驟：</p><p>p=T->lchild; p指向線索鏈表的根結點；</p><p>若線索鏈表非空，循環：</p><p>循環，順著p左孩子指針找到最左下結點；訪問之；</p><p>若p所指結點的右孩子域為線索，p的右孩子結點即為後繼結點循環： p=p->rchild； 並訪問p所指結點；（在此循環中，順著後繼線索訪問二叉樹中的結點）</p><p>一旦線索“中斷”，p所指結點的右孩子域為右孩子指針，p=p->rchild，使 p指向右孩子結點；</p><p>樹和森林</p><p>樹的存儲結構：</p><p>雙親表示法</p><p>孩子表示法</p><p>利用圖表示樹</p><p>孩子兄弟表示法（二叉樹表示法）：鏈表中每個結點的兩指針域分別指向其第一個孩子結點和下一個兄弟結點</p><p>將樹轉化成二叉樹：右子樹一定為空</p><p>加線：在兄弟之間加一連線</p><p>抹線：對每個結點，除了其左孩子外，去除其與其餘孩子之間的關係</p><p>旋轉：以樹的根結點為軸心，將整樹順時針轉45°</p><p>森林轉換成二叉樹：</p><p>將各棵樹分別轉換成二叉樹</p><p>將每棵樹的根結點用線相連</p><p>以第一棵樹根結點為二叉樹的根</p><p>樹與轉換後的二叉樹的關係：轉換後的二叉樹的先序對應樹的先序遍歷；轉換後的二叉樹的中序對應樹的後序遍歷</p><p>哈弗曼樹/霍夫曼樹</p><p>一些概念</p><p>路徑：從一個祖先結點到子孫結點之間的分支構成這兩個結點間的路徑；</p><p>路徑長度：路徑上的分支數目稱為路徑長度；</p><p>樹的路徑長度：從根到每個結點的路徑長度之和。</p><p>結點的權：根據應用的需要可以給樹的結點賦權值；</p><p>結點的帶權路徑長度：從根到該結點的路徑長度與該結點權的乘積；</p><p>樹的帶權路徑長度=樹中所有葉子結點的帶權路徑之和；通常記作 WPL=∑wi×li</p><p>哈夫曼樹：假設有n個權值(w1, w2, … , wn)，構造有n個葉子結點的二叉樹，每個葉子結點有一個 wi作為它的權值。則帶權路徑長度最小的二叉樹稱為哈夫曼樹。最優二叉樹。</p><p>前綴碼的定義：在一個字符集中，任何一個字符的編碼都不是另一個字符編碼的前綴。霍夫曼編碼就是前綴碼，可用於快速判斷霍夫曼編碼是否正確。霍夫曼樹是滿二叉樹，若有n個節點，則共有(n+1)/2個碼子</p><p>給定n個權值作為n的葉子結點，構造一棵二叉樹，若帶權路徑長度達到最小，稱這樣的二叉樹為最優二叉樹，也稱為霍夫曼樹(Huffman Tree)。霍夫曼樹是帶權路徑長度最短的樹，權值較大的結點離根較近。</p><p>假設哈夫曼樹是二叉的話，則度為0的結點個數為N，度為2的結點個數為N-1，則結點總數為2N-1。哈夫曼樹的結點個數必為奇數。</p><p>哈夫曼樹不一定是完全二叉樹，但一定是最優二叉樹。</p><p>若度為m的哈夫曼樹中,其葉結點個數為n,則非葉結點的個數為[(n-1)/(m-1)]。邊的數目等於度。</p><p>圖遍歷與回溯</p><p>圖搜索->形成搜索樹</p><p>窮舉法。</p><p>貪心法。多步決策，每步選擇使得構成一個問題的可能性，同時滿足目標函數。</p><p>回溯法。根據題意，選取度量標準，然後將可能的選擇方法按度量標準所要求順序排好，每次處理一個量，得到該意義下的最優解的分解處理。</p><p>圖</p><p>無向圖</p><p>迴路或環：第一個頂點和最後一個頂點相同的路徑。</p><p>簡單迴路或簡單環：除第一個頂點和最後一個頂點之外，其餘頂點不重複出現的迴路</p><p>連通：頂點v至v’ 之間有路徑存在</p><p>連通圖：無向圖圖 G 的任意兩點之間都是連通的，則稱G是連通圖。</p><p>連通分量：極大連通子圖，子圖中包含的頂點個數極大</p><p>所有頂點度的和必須為偶數</p><p>有向圖：</p><p>迴路或環：第一個頂點和最後一個頂點相同的路徑。</p><p>簡單迴路或簡單環：除第一個頂點和最後一個頂點之外，其餘頂點不重複出現的迴路。</p><p>連通：頂點v至v’之間有路徑存在</p><p>強連通圖：有向圖G的任意兩點之間都是連通的，則稱G是強連通圖。各個頂點間均可達。</p><p>強連通分量：極大連通子圖</p><p>有向圖頂點的度是頂點的入度與出度之和。鄰接矩陣中第V行中的1的個數是V的出度</p><p>生成樹：極小連通子圖。包含圖的所有n個結點，但只含圖的n-1條邊。在生成樹中添加一條邊之後，必定會形成迴路或環。</p><p>完全圖：有 n(n-1)/2 條邊的無向圖。其中n是結點個數。必定是連通圖。</p><p>有向完全圖：有n(n-1)條邊的有向圖。其中n是結點個數。每兩個頂點之間都有兩條方向相反的邊連接的圖。</p><p>一個無向圖 G=(V,E) 是連通的，那麼邊的數目大於等於頂點的數目減一：|E|>=|V|-1，而反之不成立。如果 G=(V,E) 是有向圖，那麼它是強連通圖的必要條件是邊的數目大於等於頂點的數目：|E|>=|V|，而反之不成立。沒有迴路的無向圖是連通的當且僅當它是樹，即等價於：|E|=|V|-1。</p><p>圖的存儲形式</p><p>鄰接矩陣和加權鄰接矩陣</p><p>無權有向圖：出度: i行之和；入度: j列之和。</p><p>無權無向圖：i結點的度: i行或i列之和。</p><p>加權鄰接矩陣：相連為w，不相連為∞</p><p>鄰接表</p><p>用頂點數組表、邊（弧）表表示該有向圖或無向圖</p><p>頂點數組表：用數組存放所有的頂點。數組大小為圖頂點數n</p><p>邊表（邊結點表）：每條邊用一個結點進行表示。同一個結點的所有的邊形成它的邊結點單鏈表。</p><p>n個頂點的無向圖的鄰接表最多有n(n-1)個邊表結點。有n個頂點的無向圖最多有n*(n-1)/2條邊，此時為完全無向圖，而在鄰接表中每條邊存儲兩次，所以有n*(n-1)個結點</p><p>圖的遍歷</p><p>深度優先搜索利用棧，廣度優先搜索利用隊列</p><p>求一條從頂點i到頂點s的簡單路徑–深搜。求兩個頂點之間的一條長度最短的路徑–廣搜。當各邊上的權值均相等時,BFS算法可用來解決單源最短路徑問題。</p><p>生成樹和最小生成樹</p><p>每次遍歷一個連通圖將圖的邊分成遍歷所經過的邊和沒有經過的邊兩部分，將遍歷經過的邊同圖的頂點構成一個子圖，該子圖稱為生成樹。因此有DFS生成樹和BFS生成樹。</p><p>生成樹是連通圖的極小子圖，有n個頂點的連通圖的生成樹必定有n-1條邊,在生成樹中任意增加一條邊，必定產生迴路。若砍去它的一條邊，就會把生成樹變成非連通子圖</p><p>最小生成樹：生成樹中邊的權值(代價)之和最小的樹。最小生成樹問題是構造連通網的最小代價生成樹。</p><p>Kruskal算法：令最小生成樹集合T初始狀態為空，在有n個頂點的圖中選取代價最小的邊並從圖中刪去。若該邊加到T中有迴路則丟棄，否則留在T中；依此類推，直至T中有n-1條邊為止。</p><p>Prim算法、Kruskal算法和Dijkstra算法均屬於貪心算法。</p><p>Dijkstra算法解決的是帶權重的有向圖上單源最短路徑問題，該算法要求所有邊的權重都為非負值。</p><p>Dijkstra算法解決了從某個原點到其餘各頂點的最短路徑問題，由循環嵌套可知該算法的時間複雜度為O(N*N)。若要求任一頂點到其餘所有頂點的最短路徑，一個比較簡單的方法是對每個頂點當做源點運行一次該算法，等於在原有算法的基礎上，再來一次循環，此時整個算法的複雜度就變成了O(N*N*N)。</p><p>Bellman-Ford算法解決的是一般情況下的單源最短路徑問題，在這裡，邊的權重可以為負值。該算法返回一個布爾值，以表明是否存在一個從源節點可以到達的權重為負值的環路。如果存在這樣一個環路，算法將告訴我們不存在解決方案。如果沒有這種環路存在，算法將給出最短路徑和它們的權重。</p><p>雙連通圖和關節點</p><p>若從一個連通圖中刪去任何一個頂點及其相關聯的邊，它仍為一個連通圖的話，則該連通圖被稱為重（雙）連通圖。</p><p>若連通圖中的某個頂點和其相關聯的邊被刪去之後，該連通圖被分割成兩個或兩個以上的連通分量，則稱此頂點為關節點。</p><p>沒有關節點的連通圖為雙連通圖</p><p>若生成樹的根結點，有兩個或兩個以上的分支，則此頂點(生成樹的根)必為關節點；</p><p>對生成樹上的任意一個非葉“頂點”，若其某棵子樹中的所有“頂點”沒有和其祖先相通的回邊，則該“頂點”必為關節點。</p><p>有向無環圖及其應用</p><p>拓撲排序。在用鄰接表表示圖時,對有n個頂點和e條弧的有向圖而言時間複雜度為O(n+e)。一個有向圖能被拓撲排序的充要條件就是它是一個有向無環圖。拓撲序列唯一不能唯一確定有向圖。</p><p>AOV網(Activity On Vertex)：用頂點表示活動，邊表示活動的優先關係的有向圖稱為AOV網。AOV網中不允許有迴路，這意味著某項活動以自己為先決條件。</p><p>拓撲有序序列：把AOV網絡中各頂點按照它們相互之間的優先關係排列一個線性序列的過程。若vi是vj前驅，則vi一定在vj之前；對於沒有優先關係的點，順序任意。</p><p>拓撲排序：對AOV網絡中頂點構造拓撲有序序列的過程。方法：</p><p>在有向圖中選一個沒有前驅的頂點且輸出之</p><p>從圖中刪除該頂點和所有以它為尾的弧</p><p>重複上述兩步，直至全部頂點均已輸出；或者當圖中不存在無前驅的頂點為止(此時說明圖中有環）</p><p>採用深度優先搜索或拓撲排序算法可以判斷出一個有向圖中是否有環(迴路).深度優先搜索只要在其中記錄下搜索的節點數n，當n大於圖中節點數時退出，並可以得出有迴路。若有迴路，則拓撲排序訪問不到圖中所有的節點，所以也可以得出迴路。廣度優先搜索過程中如果訪問到一個已經訪問過的節點，可能是多個節點指向這個節點，不一定是存在環。</p><p>算法描述：</p><p>把鄰接表中入度為0的頂點依此進展</p><p>若站不空，則</p><p>棧頂元素vj退棧並輸出；</p><p>在鄰接表中查找vj的直接後繼vk，把vk的入度減1；若vk的入度為0則進棧</p><p>若棧空時輸出的頂點個數不是n，則有向圖有環；否則，拓撲排序完畢。</p><p>AOE網：帶權的有向無環圖，其中頂點表示事件，弧表示活動，權表示活動持續時間。在工程上常用來表示工程進度計劃。</p><p>一些定義：</p><p>事件的最早發生時間（ve(j)）：從源點到j結點的最長的路徑。意味著事件最早能夠發生的時間。</p><p>事件的最遲發生時間（vl(j)）：不影響工程的如期完工，事件j必須發生的時間。</p><p>活動ai由弧</p><p>查找</p><p>順序查找、折半查找、索引查找、分塊查找是靜態查找，動態查找有二叉排序樹查找，最優二叉樹查找，鍵樹查找，哈希表查找</p><p>靜態查找表</p><p>順序表的順序查找：應用範圍：順序表或線性鏈表表示的表，表內元素之間無序。查找過程：從表的一端開始逐個進行記錄的關鍵字和給定值的比較。</p><p>順序有序表的二分查找。平均查找時間(n+1)/n log2(n+1)</p><p>分塊查找：將表分成幾塊，塊內無序，塊間有序，即前一塊中的最大值小於後一塊中的最小值。並且有一張索引表，每一項存放每一塊的最大值和指向該塊第一個元素的指針。索引表有序，塊內無序。所以，塊間查找用二分查找，塊內用順序查找，效率介於順序和二分之間；先確定待查記錄所在塊，再在塊內查找。因此跟表中元素個數和塊中元素個數都有關。</p><p>用數組存放待查記錄,</p><p>建立索引表，由每塊中最大（小）的關鍵字及所屬塊位置的信息組成。</p><p>當索引表較大時，可以採用二分查找</p><p>在數據量極大時，索引可能很多，可考慮建立索引表的索引，即二級索引，原則上索引不超過三級</p><p>分塊查找平均查找長度：ASLbs = Lb + Lw。其中，Lb是查找索引表確定所在塊的平均查找長度， Lw是在塊中查找元素的平均查找長度。在n一定時，可以通過選擇s使ASL儘可能小。當s=sqrt(n)時，ASL最小。</p><p>時間：順序查找最差，二分最好，分塊介於兩者之間</p><p>空間：分塊最大，需要增加索引數據的空間</p><p>順序查找對錶沒有特殊要求</p><p>分塊時數據塊之間在物理上可不連續。所以可以達到插入、刪除數據只涉及對應的塊；另外，增加了索引的維護。</p><p>二分查找要求表有序，所以若表的元素的插入與刪除很頻繁，維持表有序的工作量極大。</p><p>在表不大時，一般直接使用順序查找。</p><p>動態查找</p><p>二叉排序樹的結點刪除：</p><p>x為葉子結點，則直接刪除</p><p>x只有左子樹xL或只有右子樹xR ,則令xL或xR直接成為雙親結點f的子樹；</p><p>x即有左子樹xL也有右子樹xR，在xL中選值最大的代替x，該數據按二叉排序樹的性質應在最右邊。</p><p>平衡二叉樹：每個結點的平衡因子都為 1、－1、0 的二叉排序樹。或者說每個結點的左右子樹的高度最多差1的二叉排序樹。</p><p>平衡二叉樹的平衡：</p><p>左調整(新結點插入在左子樹上的調整)：</p><p>LL(插入在結點左子樹的左子樹上)：旋轉前後高度都為h+1</p><p>LR(新插入結點在左子樹的右子樹上)：旋轉前後高度仍為h+1</p><p>右調整(新結點插入在右子樹上進行的調整):</p><p>RR(插入在的右子樹的右子樹上)：處理方法和 LL對稱</p><p>RL(插入在的右子樹的左子樹上)：處理方法和 LR對稱</p><p>平衡樹建立方法：</p><p>按二叉排序樹插入結點</p><p>如引起結點平衡因子變為|2|，則確定旋轉點，該點是離根最遠（或最接近於葉子的點）</p><p>確定平衡類型後進行平衡處理，平衡後以平衡點為根的子樹高不變</p><p>最小二叉平衡樹的節點的公式如下 F(n)=F(n-1)+F(n-2)+1 這個類似於一個遞歸的數列，可以參考Fibonacci數列，1是根節點，F(n-1)是左子樹的節點數量，F(n-2)是右子樹的節點數量。</p><p>常見的平衡二叉樹：</p><p>紅黑樹是平衡二叉樹，也就是左右子樹是平衡的，高度大概相等。這種情況等價於一塊完全二叉樹的高度，查找的時間複雜度是樹的高度，為logn，插入操作的平均時間複雜度為O(logn)，最壞時間複雜度為O(logn)</p><p></p><p>節點是紅色或黑色。</p><p>根是黑色。</p><p>所有葉子都是黑色（葉子是NIL節點）。</p><p>每個紅色節點的兩個子節點都是黑色。(從每個葉子到根的所有路徑上不能有兩個連續的紅色節點)</p><p>從任一節點到其每個葉子的所有簡單路徑 都包含相同數目的黑色節點。</p><p>avl樹也是自平衡二叉樹；紅黑樹和AVL樹查找、插入、刪除的時間複雜度相同；包含n個內部結點的紅黑樹的高度是o(logn); TreeMap 是一個紅黑樹的實現，能保證插入的值保證排序</p><p>STL和linux多使用紅黑樹作為平衡樹的實現：</p><p>如果插入一個node引起了樹的不平衡，AVL和RB-Tree都是最多只需要2次旋轉操作，即兩者都是O(1)；但是在刪除node引起樹的不平衡時，最壞情況下，AVL需要維護從被刪node到root這條路徑上所有node的平衡性，因此需要旋轉的量級O(logN)，而RB-Tree最多隻需3次旋轉，只需要O(1)的複雜度。</p><p>其次，AVL的結構相較RB-Tree來說更為平衡，再插入和刪除node更容易引起Tree的unbalance，因此在大量數據需要插入或者刪除時，AVL需要rebalance的頻率會更高。因此，RB-Tree在需要大量插入和刪除node的場景下，效率更高。自然，由於AVL高度平衡，因此AVL的search效率更高。</p><p>map的實現只是折衷了兩者在search、insert以及delete下的效率。總體來說，RB-tree的統計性能是高於AVL的。</p><p>查找總結</p><p>既希望較快的查找又便於線性表動態變化的查找方法是哈希法查找。二叉排序樹查找，最優二叉樹查找，鍵樹查找，哈希法查找是動態查找。分塊、順序、折半、索引順序查找均為靜態。分塊法應該是將整個線性表分成若干塊進行保存，若動態變化則可以添加在表的尾部（非順序結構），時間複雜度是O(1)，查找複雜度為O(n)；若每個表內部為順序結構，則可用二分法將查找時間複雜度降至O(logn)，但同時動態變化複雜度則變成O(n)；順序法是挨個查找，這種方法最容易實現，不過查找時間複雜度都是O(n)，動態變化時可將保存值放入線性表尾部，則時間複雜度為O(1)；二分法是基於順序表的一種查找方式，時間複雜度為O(logn)；通過哈希函數將值轉化成存放該值的目標地址，O（1）</p><p>二叉樹的平均查找長度為O(log2n)——O(n).二叉排序樹的查找效率與二叉樹的高度有關，高度越低，查找效率越高。二叉樹的查找成功的平均查找長度ASL不超過二叉樹的高度。二叉樹的高度與二叉樹的形態有關，n個節點的完全二叉樹高度最小，高度為[log2n]+1,n個節點的單隻二叉樹的高度最大，高度為n，此時查找成功的ASL為最大(n+1)/2，因此二叉樹的高度範圍為[log2n]+1——n.</p><p>鏈式存儲不能隨機訪問，必須是順序存儲</p><p>B_樹的B+樹</p><p>B_樹</p><p>B-樹就是B樹。m階B_樹滿足或空，或為滿足下列性質的m叉樹：</p><p>樹中每個結點最多有m棵子樹</p><p>根結點在不是葉子時，至少有兩棵子樹</p><p>除根外，所有非終端結點至少有⎡m/2⎤棵子樹</p><p>有s個子樹的非葉結點具有 n = s-1個關鍵字，結點的信息組織為:(n,A0,K1,A1,K2,A2 … Kn，An)。這裡：n為關鍵字的個數，ki（i=1,2,…,n)為關鍵字，且滿足Ki小於Ki+1,，Ai(i=0,1,..n)為指向子樹的指針。</p><p>所有的葉子結點都出現在同一層上，不帶信息（可認為外部結點或失敗結點）。</p><p>關鍵字集合分佈在整棵樹中</p><p>任何一個關鍵字出現且只出現在一個結點中</p><p>搜索有可能在非葉子結點結束</p><p>其搜索性能等價於在關鍵字全集內做一次二分查找</p><p>只適用於隨機檢索，不適用於順序檢索。</p><p>有結點的平衡因子都為零</p><p>M階B-樹中含有N個關鍵字，最大深度為log⎡m/2⎤(n+1)/2+2</p><p>B_樹中結點的插入</p><p>m代表B_樹的階，插入總髮生在最低層</p><p>插入後關鍵字個數小於等於 m-1,完成。</p><p>插入後關鍵字個數等於m,結點分裂，以中點數據為界一分為二，中點數據放到雙親結點中。這樣就有可能使得雙親結點的數據個數為m,引起雙親結點的分裂，最壞情況下一直波及到根，引起根的分裂——B_樹長高。</p><p>3階B_樹的插入。每個結點最多3棵子樹，2個數據；最少2棵子樹，1個數據。所以3階B_樹也稱為2-3樹。</p><p>B_樹中結點的刪除</p><p>刪除發生在最底層</p><p>被刪關鍵字所在結點中的關鍵字數目大於等於 m/2 ，直接刪除。</p><p>刪除後結點中數據為⎡m/2⎤-2，而相鄰的左（右）兄弟中數據大於⎡m/2⎤-1，此時左（右兄弟）中最大（小）的數據上移到雙親中，雙親中接（靠）在它後（前）面的數據移到被刪數據的結點中</p><p>其左右兄弟結點中數據都是⎡m/2⎤-1，此時和左（右）兄弟合併，合併時連同雙親中相關的關鍵字。此時，雙親中少了一項，因此又可能引起雙親的合併，最壞一直到根，使B-樹降低一層。</p><p>刪除不在最底層</p><p>在大於被刪數據中選最小的代替被刪數據，問題轉換成在最底層的刪除</p><p>B+樹</p><p>在實際的文件系統中，用的是B+樹或其變形。有關性質與操作類似於B_樹。</p><p>差異：</p><p>有n棵子樹的結點中有n個關鍵字，每個關鍵字不保存數據，只用來索引，所有數據都保存在葉子節點。</p><p>所有葉子結點中包含全部關鍵字信息，及對應記錄位置信息及指向含有這些關鍵字記錄的指針，且葉子結點本身依關鍵字的大小自小而大的順序鏈接。(而B樹的葉子節點並沒有包括全部需要查找的信息)</p><p>所有非葉子為索引，結點中僅含有其子樹根結點中最大（或最小）關鍵字。 (而B樹的非終節點也包含需要查找的有效信息)</p><p>非葉最底層順序聯結，這樣可以進行順序查找</p><p>B+特性</p><p>所有關鍵字都出現在葉子結點的鏈表中（稠密索引），且鏈表中的關鍵字恰好是有序的；</p><p>不可能在非葉子結點命中</p><p>非葉子結點相當於是葉子結點的索引（稀疏索引），葉子結點相當於是存儲（關鍵字）數據的數據層</p><p>更適合文件索引系統</p><p>B+樹插入操作的平均時間複雜度為O(logn)，最壞時間複雜度為O(logn)</p><p>查找過程</p><p>在 B+ 樹上，既可以進行縮小範圍的查找，也可以進行順序查找；</p><p>在進行縮小範圍的查找時，不管成功與否，都必須查到葉子結點才能結束；</p><p>若在結點內查找時，給定值≤Ki， 則應繼續在 Ai 所指子樹中進行查找</p><p>插入和刪除的操作：類似於B_樹進行，即必要時，也需要進行結點的“分裂”或“合併”。</p><p>為什麼說B+tree比B樹更適合實際應用中操作系統的文件索引和數據庫索引？</p><p>B+tree的磁盤讀寫代價更低</p><p>B+tree的內部結點並沒有指向關鍵字具體信息的指針。因此其內部結點相對B 樹更小。如果把所有同一內部結點的關鍵字存放在同一盤塊中，那麼盤塊所能容納的關鍵字數量也越多。一次性讀入內存中的需要查找的關鍵字也就越多。相對來說IO讀寫次數也就降低了。</p><p>舉個例子，假設磁盤中的一個盤塊容納16bytes，而一個關鍵字2bytes，一個關鍵字具體信息指針2bytes。一棵9階B-tree(一個結點最多8個關鍵字)的內部結點需要2個盤塊。而B+樹內部結點只需要1個盤塊。當需要把內部結點讀入內存中的時候，B樹就比B+樹多一次盤塊查找時間(在磁盤中就是盤片旋轉的時間)。</p><p>B+tree的查詢效率更加穩定</p><p>由於非終結點並不是最終指向文件內容的結點，而只是葉子結點中關鍵字的索引。所以任何關鍵字的查找必須走一條從根結點到葉子結點的路。所有關鍵字查詢的路徑長度相同，導致每一個數據的查詢效率相當。</p><p>B樹和B+樹都是平衡的多叉樹。B樹和B+樹都可用於文件的索引結構。B樹和B+樹都能有效的支持隨機檢索。B+樹既能索引查找也能順序查找.</p><p><br></p><div class=pgc-img><img alt=數據結構你真的懂了嗎？————「樹篇」 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/4a4650a0-7e1c-4a3f-9a4c-e88c1f143f6d><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>數據</a></li><li><a>結構</a></li><li><a>樹篇</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html alt=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3609570de59a49a9be5667dd9a637f65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html title=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心>數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0e2547f1.html alt=「數據結構」Hash表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/617a6d43032e4efbac6b996c9bb5ab11 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0e2547f1.html title=「數據結構」Hash表>「數據結構」Hash表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b37254e1.html alt=備戰秋招——算法與數據結構（5） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ab6859411bd8435bb2616d6fef468556 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b37254e1.html title=備戰秋招——算法與數據結構（5）>備戰秋招——算法與數據結構（5）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f605b4b8.html alt=懂了數據結構框架思維，一切算法不過是紙老虎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ad2c8a60d9634e0aa36b5d8a664de355 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f605b4b8.html title=懂了數據結構框架思維，一切算法不過是紙老虎>懂了數據結構框架思維，一切算法不過是紙老虎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html alt=數據結構一(哈希表)想進大廠的必備知識點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/86ad7a2f62cc48f98bbe53b42ca4bf9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html title=數據結構一(哈希表)想進大廠的必備知識點>數據結構一(哈希表)想進大廠的必備知識點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/385a3c55.html alt="數據結構中的 Hash 表" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/0e43812c-6f05-4cf6-af7e-18011d0a316a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/385a3c55.html title="數據結構中的 Hash 表">數據結構中的 Hash 表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/629e95d1.html alt=常用數據結構之二叉樹的特性以及適用場景總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d8521175c2eb416e97ccf5747b8a6033 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/629e95d1.html title=常用數據結構之二叉樹的特性以及適用場景總結>常用數據結構之二叉樹的特性以及適用場景總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/13fb0203.html alt=數據結構23｜二叉樹基礎上：什麼樣的二叉樹適合用數組來存儲？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c9a031d4534f4363963c1ad02aac937f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/13fb0203.html title=數據結構23｜二叉樹基礎上：什麼樣的二叉樹適合用數組來存儲？>數據結構23｜二叉樹基礎上：什麼樣的二叉樹適合用數組來存儲？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html alt=數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/02b77c3c1c434606997aa740529d8b17 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html title=數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎>數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0f931f71.html alt=數據結構：二叉樹及存儲結構，學生時代的難點嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0e88a207beca45d08824aaf262458b25 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0f931f71.html title=數據結構：二叉樹及存儲結構，學生時代的難點嗎？>數據結構：二叉樹及存儲結構，學生時代的難點嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f662790b.html alt=「算法與數據結構」二叉樹之美 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/73093d13178e4fa1a45d2babe9d1a54b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f662790b.html title=「算法與數據結構」二叉樹之美>「算法與數據結構」二叉樹之美</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b53da776.html alt=數據結構和算法之二叉樹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/e887f7fd870a4d7ea59cbbfdc132450f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b53da776.html title=數據結構和算法之二叉樹>數據結構和算法之二叉樹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/059fc3b0.html alt=C語言：數據結構-歸併排序 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/539294f811964720923157c1a6eba72c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/059fc3b0.html title=C語言：數據結構-歸併排序>C語言：數據結構-歸併排序</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b67e3584.html alt=一文看懂編程中的基本數據結構與算法思想 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/44d2fdc7ecf6447a860128c60e5cfe5b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b67e3584.html title=一文看懂編程中的基本數據結構與算法思想>一文看懂編程中的基本數據結構與算法思想</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48215327.html alt=數據結構與算法（7）遞歸 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6548910d67bb4d6e82fb33f08f496622 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48215327.html title=數據結構與算法（7）遞歸>數據結構與算法（7）遞歸</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>