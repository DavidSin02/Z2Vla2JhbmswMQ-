<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>CAN協議學習要點總結 | 极客快訊</title><meta property="og:title" content="CAN協議學習要點總結 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/d9d10c0637314484936b2a1c6c13e576"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/22664e7.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/22664e7.html><meta property="article:published_time" content="2020-10-29T21:03:56+08:00"><meta property="article:modified_time" content="2020-10-29T21:03:56+08:00"><meta name=Keywords content><meta name=description content="CAN協議學習要點總結"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/22664e7.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>CAN協議學習要點總結</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><div><div class=pgc-img><img alt=CAN協議學習要點總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d9d10c0637314484936b2a1c6c13e576><p class=pgc-img-caption></p></div><p class=ql-align-justify>CAN協議，即controllerarea network協議，是一種串行數據通信協議，對應的是ISO中物理層與數據鏈路層的功能（另，CAN總線需要接的線少，通信可靠、抗干擾，故在汽車總線等方面得到了大量的應用）。</p><p class=ql-align-justify>對CAN有：</p><p class=ql-align-justify>A.工作：對通信數據的成幀處理（位填充、數據塊編碼、循環冗餘檢驗、優先級判斷等）；</p><p class=ql-align-justify>B.規定了：檢驗錯誤-出錯標定-故障界定、何時收發報文、仲裁、控制幀；</p><p class=ql-align-justify>C.目的：為了任意兩個CAN設備之間的兼容通信。</p><p class=ql-align-justify>D.CAN協議能分為兩層（3小層），其中：</p><p class=ql-align-justify>數據鏈路層（又可以分成邏輯鏈路子層LLC和介質訪問控制子層MAC）：LLC實現了遠程幀請求、數據傳輸、確定收發哪一個報文、報文濾波、恢復管理、過載通知等；MAC（CAN協議的核心）現實了規則的傳輸：控制幀結構、執行仲裁、錯誤檢測、出錯標定、故障界定等；</p><p class=ql-align-justify>物理層：實現了不同節點間的電氣屬性的比特流傳輸、位時間、位編碼；</p><p class=ql-align-justify>至於在應用層，則由另外的協議實現（如：DeviceNet、CANopen）。</p><p class=ql-align-justify><strong>一、特點</strong></p><p class=ql-align-justify>A.多主機、靈活：任一節點在任一時刻都能主動發送信息，不分主從；</p><p class=ql-align-justify>B.不同節點具有不同的優先級；</p><p class=ql-align-justify>C.仲裁：1、兩個節點相對發送信息時，低優先級的主動停止，高優先級的不受影響；</p><p class=ql-align-justify>2、利用標識符實現位仲裁；</p><p class=ql-align-justify>3、數據幀的優先級大於遠程幀的優先級；</p><p class=ql-align-justify>D. 多種發送接收方式：點對點、一對多、全局廣播；</p><p class=ql-align-justify>E.最大傳輸速率為1Mbps（此時最遠傳輸距離為40m），最遠傳輸距離為10km（此時最大傳播速率為5kbps），傳輸速率與相應的最大傳輸距離成反比；</p><p class=ql-align-justify>F.節點數最多可達110個（取決於最少節點的的CAN總線）；</p><p class=ql-align-justify>G. 短幀結構（數據最多是8字節，64位，16個16進制數）；</p><p class=ql-align-justify>H. 具有CRC錯誤檢測與標定功能，因此出錯率極低（總線空閒時，將自動破壞掉的報文重新傳輸）；</p><p class=ql-align-justify>I.對每一個節點具有主動錯誤、被動錯誤、總線關閉三種狀態，記錄的錯誤達到一定數量後節點會自動關閉，總線上其他操作不會受到影響；</p><p class=ql-align-justify>J.通信介質：雙絞線、同軸電纜、光導纖維等，主要是雙絞線（雙絞線中CANL一般是棕色，而CANH則有黑、綠、紫色；而在簡化圖中，CANL為綠色而CANH為黃色）；</p><p class=ql-align-justify>K.報文過濾：利用過濾組、通過寄存器、有一個過濾碼；</p><p class=ql-align-justify>L. 應答機制；</p><p class=ql-align-justify>M.保證延遲時間；</p><p class=ql-align-justify>N.系統寬數據的連通性。</p><p class=ql-align-justify><strong>二、CAN總線系統</strong></p><p class=ql-align-justify>A. CAN總線系統中有設備CPU、CAN控制器、CAN收發器、120Ω終端電阻和CAN總線等；</p><p class=ql-align-justify>B. 電平與邏輯的關係：</p><p class=ql-align-justify>總線上是“與”的邏輯關係，“0”是具有決定作用的；有一個“0”，與的結果就是“0”，顯性；全部為“1”，與的結果才是“1”，隱形；</p><p class=ql-align-justify>定義顯性電平為邏輯“0”，此時CANH為3.5V，CANL為1.5V，差分為2V，表閉合；</p><p class=ql-align-justify>定義隱形電平為邏輯“1”，此時CANH為2.5V，CANL為2.5V，差分為0V，表斷開；</p><p class=ql-align-justify>C. 規範：CAN2.0A/2.0B</p><p class=ql-align-justify>幀：數據幀、遠程幀（請求返回帶有同樣ID的幀）；</p><p class=ql-align-justify>網關：將不同波特率的CAN網絡（如：CAN高速驅動、CAN低速舒適、CAN娛樂）連成一個整體網絡。</p><p class=ql-align-justify><strong>三、術語</strong></p><p class=ql-align-justify>A.報文：固定格式發送、長度受限；</p><p class=ql-align-justify>B.信息路由：（1）不要求節點改變軟硬件就可以接入CAN總線；（2）所有節點均可以接收報文、被同一份報文激活；（3）數據相容性：同一報文可以被所有節點接收、又可以沒有被任何節點接收；</p><p class=ql-align-justify>C.Bps：同一個系統內固定；</p><p class=ql-align-justify>D.優先權：由ID定義；</p><p class=ql-align-justify>E.仲裁：當2個或2個以上的節點同時傳送報文時，就會出現衝突，此時優先度高的節點就有總線訪問權，它發送報文，另外優先度低的節點將會推出發送，在總線空閒的時候再次嘗試發送，這就確保了報文和時間都不會損失；在仲裁過程中，發送器對發送位的電平和被監控的總線的電平比較，如果相同，則繼續發送，如果發送端“1”，被監控端“0”，發送端失去仲裁，退出發送；</p><p class=ql-align-justify>F.錯誤檢測（為了確保無錯）：監視、循環冗餘檢查、位填充、報文格式檢查；</p><p class=ql-align-justify>G.故障界定：累計錯誤0~127為主動錯誤狀態，累計錯誤127~255為被動錯誤狀態，；誒及錯誤超過255時，進入總線關閉狀態；</p><p class=ql-align-justify>H.顯性電平為邏輯“0”，隱形電平為邏輯“1”；</p><p class=ql-align-justify>I.應答：報文連貫的話，接收器應答；否則，接收器做出標誌。</p><p class=ql-align-justify><strong>四、CAN報文及其結構</strong></p><p class=ql-align-justify>A.結構：幀起始（1位“0”）、仲裁場（11位ID+1位RTR，數據幀為“0”，遠程幀為“1”）、控制場（2位保留位+4位DLC表示數據字節數）、數據場（0~8個字節，0~64位）、CRC、應答、結尾幀（7個“1”）；</p><p class=ql-align-justify>B.發送報文的節點在總線空閒或失去仲裁前恆為發送器、不是發送器的節點在總線不空閒的時候為接收器；</p><p class=ql-align-justify>C.數據場：從0~7依次8個字節，如：某個解析文件用到2、3字節時，3字節為高位字節，2字節為低位字節。</p><p class=ql-align-justify><strong>五、同步機制</strong></p><p class=ql-align-justify>A.節點檢測到：“隱/1”→“顯/0”條邊沿，會產生總線位同步；</p><p class=ql-align-justify>B.當跳變沿不在位週期的同步段內的話，會產生相對誤差：發生在採樣點之前、同步段和傳播時間段（補償時延）之後的相位緩衝段1的，是正誤差；發生在採樣點之後，同步段之前的相對緩衝段2的，是負誤差；</p><p class=ql-align-justify>C.硬同步：總線空閒時，下降沿（幀起始“1”→“0”）觸發，所有節點位時間重新開始；</p><p class=ql-align-justify>重同步：在隨後位中出現跳邊沿，並在同步段之外，就會引起重同步（正誤差時增長相對緩衝段1位時間、負誤差時縮短相對緩衝段2位時間，藉此來調整採樣點，確保正確採樣）；</p><p class=ql-align-justify>另，位填充既使數據透明化，又增加同步機會。</p><p class=ql-align-justify><strong>六、故障處理</strong></p><p class=ql-align-justify>用示波器測試CANL與CANH引腳的電壓，可以分析出一些接線錯誤：CANL斷路、CANH斷路、CANL與電瓶短接、CANL與地短接、HL短接、HL交叉錯接等。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>協議</a></li><li><a>學習</a></li><li><a>要點</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/25ca2a55.html alt=LTE協議學習總結之第二章：LTE無線通信技術主體介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/09c2a354b88a4fa49c23419c30cb4f82 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/25ca2a55.html title=LTE協議學習總結之第二章：LTE無線通信技術主體介紹>LTE協議學習總結之第二章：LTE無線通信技術主體介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/849da00a.html alt=學習一下OAuth2.0協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/ac1e484d-68fc-438c-b714-1df376c8b1e9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/849da00a.html title=學習一下OAuth2.0協議>學習一下OAuth2.0協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/895daf6.html alt=名家論英語學習要點彙總——2020春節特輯 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fdf365ae20884c748051b7a0e4d7fc59 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/895daf6.html title=名家論英語學習要點彙總——2020春節特輯>名家論英語學習要點彙總——2020春節特輯</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/344af9ca.html alt=人防工程預留預埋施工要點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6da1b20697df4cc09ff217867fd40984 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/344af9ca.html title=人防工程預留預埋施工要點>人防工程預留預埋施工要點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html alt=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/13adbab9c7f94c7fa81d49a98861b051 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html title=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式>機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e214e6d7.html alt=深度學習/機器學習入門數學知識整理（二）梯度與導數，泰勒展開 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1540372101455de0fb74774 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e214e6d7.html title=深度學習/機器學習入門數學知識整理（二）梯度與導數，泰勒展開>深度學習/機器學習入門數學知識整理（二）梯度與導數，泰勒展開</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f3767255.html alt=講透機器學習中的梯度下降 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5c80301e53424671bc22755be2e4ee33 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f3767255.html title=講透機器學習中的梯度下降>講透機器學習中的梯度下降</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac12f3a1.html alt=直流鍋爐給水控制學習 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/eba10edcc8d14d9f8cde6fd5b212d90e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac12f3a1.html title=直流鍋爐給水控制學習>直流鍋爐給水控制學習</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html alt=HTMLCSS學習筆記（六）——元素類型 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb5988349894ce9bf568c6418f85b7d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html title=HTMLCSS學習筆記（六）——元素類型>HTMLCSS學習筆記（六）——元素類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/97886d06.html alt="web前端（從零開始），每天更新學習筆記 HTML5元素分類" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/46d70004fcd55e1ddad3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/97886d06.html title="web前端（從零開始），每天更新學習筆記 HTML5元素分類">web前端（從零開始），每天更新學習筆記 HTML5元素分類</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html alt="MySQL 學習筆記" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html title="MySQL 學習筆記">MySQL 學習筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html alt=深入學習MySQL事務：ACID特性的實現原理「轉」 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/cdc702d66d6943499997d11e931425eb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html title=深入學習MySQL事務：ACID特性的實現原理「轉」>深入學習MySQL事務：ACID特性的實現原理「轉」</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f6b2ef73.html alt=如何學習模擬IC設計？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f6b2ef73.html title=如何學習模擬IC設計？>如何學習模擬IC設計？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c56ee116.html alt=小猿圈python學習-三大特性之多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ad0e8e3777854337abeb7c779ad79a04 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c56ee116.html title=小猿圈python學習-三大特性之多態>小猿圈python學習-三大特性之多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a286add.html alt=KNX-EIB通信協議的基本原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0eb231dd55b34ebcbbd7ac0328fd48a9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a286add.html title=KNX-EIB通信協議的基本原理>KNX-EIB通信協議的基本原理</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>