<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸ | æå®¢å¿«è¨Š</title><meta property="og:title" content="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/78a5fac2213f451a89b610084a5458b8"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/2a8b0ba.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/2a8b0ba.html><meta property="article:published_time" content="2020-10-29T21:02:05+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:05+08:00"><meta name=Keywords content><meta name=description content="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/2a8b0ba.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>ç§‘å­¸</a></span></div><div class=post-content><p>æœ¬é¡Œä¸»è¦åœ¨æ–¼å°æ¨¹é€™ç¨®æ•¸æ“šçµæ§‹çš„è€ƒå¯Ÿï¼Œä»¥åŠæ·±åº¦å„ªå…ˆéæ­·çš„ä½¿ç”¨ï¼Œå„ªåŒ–æ™‚å¯ä»¥æ¡å–ç©ºé–“æ›æ™‚é–“çš„ç­–ç•¥ã€‚</p><h1 class=pgc-h-arrow-right>åŸé¡Œ</h1><p>çµ¦ä½ ä¸€æ£µæ¨¹ï¼ˆå³ï¼Œä¸€å€‹é€£é€šçš„ç„¡ç’°ç„¡å‘åœ–ï¼‰ï¼Œé€™æ£µæ¨¹ç”±ç·¨è™Ÿå¾ 0 åˆ° n - 1 çš„ n å€‹ç¯€é»çµ„æˆï¼Œä¸”æ°å¥½æœ‰ n - 1 æ¢ edges ã€‚æ¨¹çš„æ ¹ç¯€é»ç‚ºç¯€é» 0 ï¼Œæ¨¹ä¸Šçš„æ¯ä¸€å€‹ç¯€é»éƒ½æœ‰ä¸€å€‹æ¨™ç±¤ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸² labels ä¸­çš„ä¸€å€‹å°å¯«å­—ç¬¦ï¼ˆç·¨è™Ÿç‚º i çš„ ç¯€é»çš„æ¨™ç±¤å°±æ˜¯ labels[i] ï¼‰</p><p>é‚Šæ•¸çµ„ edges ä»¥ edges[i] = [ai, bi] çš„å½¢å¼çµ¦å‡ºï¼Œè©²æ ¼å¼è¡¨ç¤ºç¯€é» ai å’Œ bi ä¹‹é–“å­˜åœ¨ä¸€æ¢é‚Šã€‚</p><p>è¿”å›ä¸€å€‹å¤§å°ç‚º n çš„æ•¸çµ„ï¼Œå…¶ä¸­ ans[i] è¡¨ç¤ºç¬¬ i å€‹ç¯€é»çš„å­æ¨¹ä¸­èˆ‡ç¯€é» i æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸ã€‚</p><p>æ¨¹ T ä¸­çš„å­æ¨¹æ˜¯ç”± T ä¸­çš„æŸå€‹ç¯€é»åŠå…¶æ‰€æœ‰å¾Œä»£ç¯€é»çµ„æˆçš„æ¨¹ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><div class=pgc-img><img alt="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/78a5fac2213f451a89b610084a5458b8><p class=pgc-img-caption></p></div><pre><code>è¼¸å…¥ï¼šn = 7, edges = [[0,1],[0,2],[1,4],[1,5],[2,3],[2,6]], labels = "abaedcd"è¼¸å‡ºï¼š[2,1,1,1,1,1,1]è§£é‡‹ï¼šç¯€é» 0 çš„æ¨™ç±¤ç‚º 'a' ï¼Œä»¥ 'a' ç‚ºæ ¹ç¯€é»çš„å­æ¨¹ä¸­ï¼Œç¯€é» 2 çš„æ¨™ç±¤ä¹Ÿæ˜¯ 'a' ï¼Œå› æ­¤ç­”æ¡ˆç‚º 2 ã€‚æ³¨æ„æ¨¹ä¸­çš„æ¯å€‹ç¯€é»éƒ½æ˜¯é€™æ£µå­æ¨¹çš„ä¸€éƒ¨åˆ†ã€‚ç¯€é» 1 çš„æ¨™ç±¤ç‚º 'b' ï¼Œç¯€é» 1 çš„å­æ¨¹åŒ…å«ç¯€é» 1ã€4 å’Œ 5ï¼Œä½†æ˜¯ç¯€é» 4ã€5 çš„æ¨™ç±¤èˆ‡ç¯€é» 1 ä¸åŒï¼Œæ•…è€Œç­”æ¡ˆç‚º 1ï¼ˆå³ï¼Œè©²ç¯€é»æœ¬èº«ï¼‰ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><div class=pgc-img><img alt="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8465bec7f54d47d4b0b515bc1b6152bd><p class=pgc-img-caption></p></div><pre><code>è¼¸å…¥ï¼šn = 4, edges = [[0,1],[1,2],[0,3]], labels = "bbbb"è¼¸å‡ºï¼š[4,2,1,1]è§£é‡‹ï¼šç¯€é» 2 çš„å­æ¨¹ä¸­åªæœ‰ç¯€é» 2 ï¼Œæ‰€ä»¥ç­”æ¡ˆç‚º 1 ã€‚ç¯€é» 3 çš„å­æ¨¹ä¸­åªæœ‰ç¯€é» 3 ï¼Œæ‰€ä»¥ç­”æ¡ˆç‚º 1 ã€‚ç¯€é» 1 çš„å­æ¨¹ä¸­åŒ…å«ç¯€é» 1 å’Œ 2 ï¼Œæ¨™ç±¤éƒ½æ˜¯ 'b' ï¼Œå› æ­¤ç­”æ¡ˆç‚º 2 ã€‚ç¯€é» 0 çš„å­æ¨¹ä¸­åŒ…å«ç¯€é» 0ã€1ã€2 å’Œ 3ï¼Œæ¨™ç±¤éƒ½æ˜¯ 'b'ï¼Œå› æ­¤ç­”æ¡ˆç‚º 4 ã€‚</code></pre><p>ç¤ºä¾‹ 3 ï¼š</p><div class=pgc-img><img alt="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/33b42c280eed46e781248a28e16d3eec><p class=pgc-img-caption></p></div><pre><code>è¼¸å…¥ï¼šn = 5, edges = [[0,1],[0,2],[1,3],[0,4]], labels = "aabab"è¼¸å‡ºï¼š[3,2,1,1,1]</code></pre><p>ç¤ºä¾‹ 4ï¼š</p><pre><code>è¼¸å…¥ï¼šn = 6, edges = [[0,1],[0,2],[1,3],[3,4],[4,5]], labels = "cbabaa"è¼¸å‡ºï¼š[1,2,1,1,2,1]</code></pre><p>ç¤ºä¾‹ 5ï¼š</p><pre><code>è¼¸å…¥ï¼šn = 7, edges = [[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]], labels = "aaabaaa"è¼¸å‡ºï¼š[6,5,4,1,3,2,1]</code></pre><p>æç¤ºï¼š</p><ul><li>1 &lt;= n &lt;= 10^5</li><li>edges.length == n - 1</li><li>edges[i].length == 2</li><li>0 &lt;= ai, bi &lt; n</li><li>ai != bi</li><li>labels.length == n</li><li>labels åƒ…ç”±å°å¯«è‹±æ–‡å­—æ¯çµ„æˆ</li></ul><p>åŸé¡Œ urlï¼šhttps://leetcode-cn.com/problems/number-of-nodes-in-the-sub-tree-with-the-same-label</p><h1 class=pgc-h-arrow-right>è§£é¡Œ</h1><h1 class=pgc-h-arrow-right>é¦–æ¬¡å˜—è©¦</h1><p>é€™é“é¡Œæ˜¯è¦è®“æˆ‘å€‘è¨ˆç®—ï¼šåœ¨å­æ¨¹ä¸­ï¼Œå’Œç•¶å‰ç¯€é»å­—ç¬¦ç›¸åŒçš„ç¯€é»å€‹æ•¸ã€‚</p><p>é‚£éº¼æˆ‘å€‘å°±å¿…ç„¶éœ€è¦æ§‹å»ºæ¨¹ä¸­å„å€‹ç¯€é»çš„é—œä¿‚ï¼Œé‚£éº¼å°±éœ€è¦è¨˜éŒ„çˆ¶å­ç¯€é»çš„é—œä¿‚ï¼Œå› ç‚ºæ˜¯æ™®é€šçš„æ¨¹ï¼Œä¸€å€‹ç¯€é»çš„å­ç¯€é»å¯èƒ½æœ‰å¤šå€‹ï¼Œå› æ­¤æˆ‘ç”¨LinkedList&lt;Integer>[] treeé€™æ¨£ä¸€å€‹æ•¸çµ„é€²è¡Œå­˜å„²ï¼Œå…¶ä¸­tree[i]ä»£è¡¨ç¯€é» i çš„æ‰€æœ‰å­ç¯€é»ã€‚</p><p>è‡³æ–¼æ±‚ç›¸åŒç¯€é»çš„å€‹æ•¸ï¼Œæˆ‘æƒ³è‘—å¯ä»¥å¾æ ¹ç¯€é» 0 é–‹å§‹é€å€‹éæ­·ï¼Œå…ˆç²å–å…¶ç¬¬ä¸€å±¤å­ç¯€é»ï¼Œå†æ ¹æ“šç¬¬ä¸€å±¤å­ç¯€é»é€å€‹ç²å–ï¼Œå¯ä»¥æ¡ç”¨å»£åº¦å„ªå…ˆéæ­·çš„å½¢å¼ã€‚</p><p>è®“æˆ‘å€‘çœ‹çœ‹ä»£ç¢¼ï¼š</p><pre><code>class Solution {    public int[] countSubTrees(int n, int[][] edges, String labels) {        // æ§‹é€ æ¨¹        LinkedList&lt;Integer&gt;[] tree = new LinkedList[n];        for (int[] edge : edges) {            // edge[0]çš„å­ç¯€é»            LinkedList&lt;Integer&gt; child = tree[edge[0]];            if (child == null) {                child = new LinkedList&lt;&gt;();                tree[edge[0]] = child;            }            // å¢åŠ å­ç¯€é»            child.add(edge[1]);        }        // çµæœ        int[] result = new int[n];        // éæ­·ä¸¦è¨ˆç®—        for (int i = 0; i &lt; n; i++) {            // éœ€è¦éæ­·çš„å­—ç¬¦            char cur = labels.charAt(i);            // è©²ç¯€é»çš„å­æ¨¹ä¸­èˆ‡è©²å­—ç¬¦ç›¸åŒçš„ç¯€é»æ•¸            int curCount = 0;            // å»£åº¦å„ªå…ˆéæ­·            LinkedList&lt;Integer&gt; searchList = new LinkedList&lt;&gt;();            searchList.add(i);            while(!searchList.isEmpty()) {                int index = searchList.removeFirst();                if (cur == labels.charAt(index)) {                    curCount++;                }                // æ‰¾å‡ºè©²ç¯€é»çš„å­æ¨¹                if (tree[index] == null) {                    continue;                }                searchList.addAll(tree[index]);            }            result[i] = curCount;        }        return result;    }}</code></pre><p>æäº¤ä¹‹å¾Œï¼Œç™¼ç¾æœ‰éŒ¯èª¤ã€‚éŒ¯èª¤çš„æƒ…æ³æ˜¯ï¼š</p><pre><code>è¼¸å…¥ï¼š4[[0,2],[0,3],[1,2]]"aeed"è¼¸å‡ºï¼š[1,2,1,1]é æœŸï¼š[1,1,2,1]</code></pre><p>æ ¹æ“šé€™æ¨£è¼¸å…¥ï¼Œæˆ‘æ§‹é€ å‡ºçš„æ¨¹æ˜¯ï¼š</p><pre><code>1   0 \ / \  2   3</code></pre><p>ä½†æ ¹æ“šé æœŸçµæœåæ¨å‡ºä¾†çš„æ¨¹æ˜¯ï¼š</p><pre><code>    0   / \  2   3 /1</code></pre><p>é‚£éº¼è¼¸å…¥ä¸­æœ€å¾Œçµ¦å‡ºçš„[1,2]å°±ä¸æ˜¯å¾çˆ¶ç¯€é»æŒ‡å‘å­ç¯€é»ï¼Œä¹Ÿå°±æ˜¯è¼¸å…¥ä¸­çµ¦å‡ºçš„é‚Šé—œè¯çš„ç¯€é»é †åºï¼Œæ˜¯ä»»æ„çš„ã€‚</p><p>é‚£æˆ‘å€‘çš„æ¨¹ç©¶ç«Ÿè©²å¦‚ä½•æ§‹é€ å‘¢ï¼Ÿ</p><h1 class=pgc-h-arrow-right>é›™å‘è¨˜éŒ„æ§‹é€ æ¨¹</h1><p>æ—¢ç„¶æˆ‘å€‘åœ¨æ§‹é€ æ¨¹çš„æ™‚å€™ï¼Œç„¡æ³•ç›´æ¥å¾—å‡ºçˆ¶å­é—œä¿‚ï¼Œé‚£éº¼å°±å°‡å°æ‡‰å…©å€‹ç¯€é»åŒæ™‚è¨˜éŒ„å¦ä¸€å€‹ç¯€é»ã€‚</p><p>æ ¹æ“šé¡Œç›®ä¸­çµ¦å‡ºçš„æ¢ä»¶ï¼šæ¨¹çš„æ ¹ç¯€é»ç‚ºç¯€é» 0ã€‚é€™æ¨£æˆ‘å€‘åœ¨éæ­·çš„æ™‚å€™ï¼Œå°±å¾ 0 é–‹å§‹ï¼Œåªè¦ 0 é—œè¯çš„ç¯€é»ï¼Œä¸€å®šæ˜¯ 0 çš„å­ç¯€é»ã€‚å°‡é€™äº›ç¯€é»é€²è¡Œæ¨™è¨˜ï¼Œé€™æ¨£å†éæ­¸è¨ªå•æ¥ä¸‹ä¾†çš„ç¯€é»æ™‚ï¼Œå¦‚æœæ˜¯æ¨™è¨˜éçš„ï¼Œå‰‡èªªæ˜æ˜¯çˆ¶ç¯€é»ï¼Œé€™æ¨£å°±å¯ä»¥æ˜ç¢ºçˆ¶å­ç¯€é»é—œä¿‚äº†ã€‚</p><p>è‡³æ–¼éæ­·çš„æ™‚å€™ï¼Œå› ç‚ºé€™æ¬¡æˆ‘å€‘æ˜¯ä¸çŸ¥é“çˆ¶å­ç¯€é»é—œä¿‚çš„ï¼Œæ‰€ä»¥ç„¡æ³•ç›´æ¥æ¡ç”¨å»£åº¦å„ªå…ˆéæ­·ï¼Œæ›æˆæ·±åº¦å„ªå…ˆéæ­·ã€‚</p><p>è®“æˆ‘å€‘çœ‹çœ‹ä»£ç¢¼ï¼š</p><pre><code>class Solution {    // ç¸½ç¯€é»æ•¸    int n;    // æ¨¹    Map&lt;Integer, LinkedList&lt;Integer&gt;&gt; tree;    // å­—ç¬¦ä¸²    String labels;    // æœ€çµ‚çµæœ    int[] result;    public int[] countSubTrees(int n, int[][] edges, String labels) {        this.n = n;        this.labels = labels;        result = new int[n];        LinkedList&lt;Integer&gt; list;        // é›™å‘æ§‹é€ æ¨¹çš„é—œä¿‚        tree = new HashMap&lt;&gt;(n / 4 * 3 + 1);        for (int[] edge : edges) {            // æ·»åŠ æ˜ å°„é—œä¿‚            list = tree.computeIfAbsent(edge[0], k -&gt; new LinkedList&lt;&gt;());            list.add(edge[1]);            list = tree.computeIfAbsent(edge[1], k -&gt; new LinkedList&lt;&gt;());            list.add(edge[0]);        }        // æ·±åº¦å„ªå…ˆæœç´¢        dfs(0);        return result;    }    public int[] dfs(int index) {        // ç•¶å‰å­æ¨¹ä¸­ï¼Œæ‰€æœ‰å­—ç¬¦çš„å€‹æ•¸        int[] charArray = new int[26];        // é–‹å§‹è¨ˆç®—ï¼Œæ¨™èªŒè©²ç¯€é»å·²ç¶“è¨ˆç®—é        result[index] = 1;        // ç²å¾—å…¶é—œè¯çš„ç¯€é»        List&lt;Integer&gt; nodes = tree.get(index);        // éæ­·        for (int node : nodes) {            // å¦‚æœè©²ç¯€é»å·²ç¶“è¨ªå•é            if (result[node] &gt; 0) {                continue;            }            // éæ­¸éæ­·å­ç¯€é»            int[] array = dfs(node);            for (int i = 0; i &lt; 26; i++) {                charArray[i] += array[i];            }        }        // å°‡ç•¶å‰ç¯€é»çš„å€¼è¨ˆç®—ä¸€ä¸‹        charArray[labels.charAt(index) - 'a'] += 1;        result[index] = charArray[labels.charAt(index) - 'a'];        return charArray;    }}</code></pre><p>æäº¤OKï¼ŒåŸ·è¡Œç”¨æ™‚136msï¼Œè¶…é36.71%ï¼Œå…§å­˜æ¶ˆè€—104.5MBï¼Œè¶…é91.38%ã€‚</p><p>æ™‚é–“è¤‡é›œåº¦ä¸Šï¼Œæ‡‰è©²æ˜¯è¦ç ”ç©¶dfsæ–¹æ³•ä¸­çš„å…©å€‹forå¾ªç’°ï¼Œå¤–å±¤è‚¯å®šæ˜¯æ¯å€‹ç¯€é»éƒ½éæ­·ä¸€éï¼Œå…§å±¤é‚„éœ€è¦éæ­·26å€‹è‹±æ–‡å­—æ¯ï¼Œä¹Ÿå°±æ˜¯O(n)ã€‚</p><p>ç©ºé–“è¤‡é›œåº¦ä¸Šï¼Œæœ€å¤§çš„æ‡‰è©²å°±æ˜¯å­˜å„²ç¯€é»æ˜ å°„é—œä¿‚çš„treeäº†ï¼Œè£¡é¢å¯¦éš›ä¸Šå°±æ˜¯ 2n å€‹ç¯€é»ï¼ˆå› ç‚ºæ¯æ¢é‚Šå°æ‡‰çš„å…©å€‹ç¯€é»éƒ½æœƒäº’ç›¸å­˜ä¸€æ¬¡å°æ–¹ï¼‰ï¼Œå› æ­¤ä¹Ÿå°±æ˜¯O(n)ã€‚</p><p>é›–ç„¶éäº†ï¼Œä½†åŸ·è¡Œé€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥é€²ä¸€æ­¥å„ªåŒ–ã€‚</p><h1 class=pgc-h-arrow-right>ç”¨ç©ºé–“æ›æ™‚é–“</h1><p>é‡å°æˆ‘ä¸Šé¢çš„è§£æ³•ï¼Œå…¶ä¸­treeæˆ‘æ˜¯ç”¨çš„Mapï¼Œé›–ç„¶å…¶getæ–¹æ³•ç†è«–ä¸Šæ˜¯O(n)ï¼Œä½†ç•¢ç«Ÿæ¶‰åŠ hashï¼Œå¯ä»¥å„ªåŒ–æˆæ•¸çµ„ã€‚</p><p>è‡³æ–¼æ¯æ¬¡å–ç¯€é»å°æ‡‰çš„å­—ç¬¦æ‰€ç”¨çš„charAtæ–¹æ³•ï¼Œå…·é«”å…¶å¯¦æ˜¯ï¼š</p><pre><code>    public char charAt(int index) {        if ((index &lt; 0) || (index &gt;= value.length)) {            throw new StringIndexOutOfBoundsException(index);        }        return value[index];    }</code></pre><p>æ¯æ¬¡éƒ½æœƒæª¢æŸ¥ä¸€æ¬¡ indexï¼Œå…¶å¯¦é€™å®Œå…¨æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå› æ­¤å¯ä»¥æå‰æ§‹é€ å¥½æ¯å€‹ä½ç½®å°æ‡‰çš„å€¼ï¼Œä¹Ÿç”¨ä¸€å€‹æ•¸çµ„å­˜å„²ã€‚</p><p>è®“æˆ‘å€‘çœ‹çœ‹æ–°çš„ä»£ç¢¼ï¼š</p><pre><code>class Solution {    // ç¸½ç¯€é»æ•¸    int n;    // æ¨¹    LinkedList&lt;Integer&gt;[] tree;    // æ¯å€‹ç¯€é»çš„å€¼ï¼ˆç”¨æ•¸å­—è¡¨ç¤ºï¼‰    int[] nodeValueArray;    // æœ€çµ‚çµæœ    int[] result;    public int[] countSubTrees(int n, int[][] edges, String labels) {        this.n = n;        nodeValueArray = new int[n];        result = new int[n];        // é›™å‘æ§‹é€ æ¨¹çš„é—œä¿‚        tree = new LinkedList[n];        for (int i = 0; i &lt; n; i++) {            tree[i] = new LinkedList&lt;&gt;();        }        for (int[] edge : edges) {            // æ·»åŠ æ˜ å°„é—œä¿‚            tree[edge[0]].add(edge[1]);            tree[edge[1]].add(edge[0]);        }        // ç”Ÿæˆç¯€é»çš„å€¼        for (int i = 0; i &lt; n; i++) {            nodeValueArray[i] = labels.charAt(i) - 'a';        }        // æ·±åº¦å„ªå…ˆæœç´¢        dfs(0);        return result;    }    public int[] dfs(int index) {        // ç•¶å‰å­æ¨¹ä¸­ï¼Œæ‰€æœ‰å­—ç¬¦çš„å€‹æ•¸        int[] charArray = new int[26];        // é–‹å§‹è¨ˆç®—ï¼Œæ¨™èªŒè©²ç¯€é»å·²ç¶“è¨ˆç®—é        result[index] = 1;        // ç²å¾—å…¶é—œè¯çš„ç¯€é»        List&lt;Integer&gt; nodes = tree[index];        // éæ­·        for (int node : nodes) {            // å¦‚æœè©²ç¯€é»å·²ç¶“è¨ªå•é            if (result[node] &gt; 0) {                continue;            }            // éæ­¸éæ­·å­ç¯€é»            int[] array = dfs(node);            for (int i = 0; i &lt; 26; i++) {                charArray[i] += array[i];            }        }        // å°‡ç•¶å‰ç¯€é»çš„å€¼è¨ˆç®—ä¸€ä¸‹        charArray[nodeValueArray[index]] += 1;        result[index] = charArray[nodeValueArray[index]];        return charArray;    }}</code></pre><p>æäº¤ä¹‹å¾Œï¼ŒåŸ·è¡Œç”¨æ™‚æ˜¯96msï¼Œå…§å­˜æ¶ˆè€—æ˜¯402.2MBã€‚çœ‹ä¾†å„ªåŒ–çš„æ•ˆæœä¸¦ä¸æ˜é¡¯ã€‚</p><h1 class=pgc-h-arrow-right>ç ”ç©¶ä¸€ä¸‹ç›®å‰æœ€å„ªè§£æ³•</h1><p>é€™å€‹è§£æ³•çœŸçš„æ˜¯å·§å¦™ï¼ŒåŸ·è¡Œç”¨æ™‚20msï¼Œè¶…éäº†100%ï¼Œå…§å­˜æ¶ˆè€—76.3MBï¼Œè¶…éäº†100%ã€‚</p><p>æˆ‘åœ¨ä»£ç¢¼ä¸­å¢åŠ äº†è¨»é‡‹ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚ä½†é€™æ¨£çš„å¯«æ³•ï¼Œç ”ç©¶ä¸€ä¸‹æ˜¯èƒ½å¤ çœ‹æ‡‚ï¼Œä½†è®“æˆ‘æƒ³ä¼°è¨ˆæ˜¯æ°¸é ä¸å¯èƒ½æƒ³å‡ºä¾†ï¼Œå¯ä»¥è®“å¤§å®¶ä¹Ÿä¸€èµ·å­¸ç¿’å’Œå€Ÿé‘‘ï¼š</p><pre><code>public class Solution {  static class Next {    Next next;    Node node;    Next(Next next, Node node) {      this.next = next;      this.node = node;    }  }  static class Node {    /**     * ç•¶å‰ç¯€é»çš„index     */    final int index;    /**     * ç•¶å‰ç¯€é»å°æ‡‰çš„å­—ç¬¦å€¼ï¼ˆæ¸›å»'a'ï¼‰     */    final int ci;    /**     * æ‰€æœ‰é—œè¯çš„ç¯€é»     */    Next children;    /**     * è©²ç¯€é»çš„çˆ¶ç¯€é»     */    Node parent;    /**     * å­æ¨¹ä¸­å’Œè©²ç¯€é»å«æœ‰ç›¸åŒå­—ç¬¦çš„ç¯€é»ç¸½å€‹æ•¸     */    int result;    /**     * æ˜¯å¦é‚„åœ¨éšŠåˆ—ä¸­ï¼Œå¯ä»¥ç†è§£ç‚ºæ˜¯å¦å·²è¨ªå•é     */    boolean inQueue;    public Node(int index, int ci) {      this.index = index;      this.ci = ci;      this.result = 1;    }    /**     * å¾å¾Œå¾€å‰ï¼Œæ‰¾åˆ°ç•¶å‰ç¯€é»æ²’æœ‰è¨ªå•éçš„ç¬¬ä¸€å€‹å­ç¯€é»     */    Node popChild() {      for (; ; ) {        // ç•¶å‰ç¯€é»çš„æ‰€æœ‰é—œè¯ç¯€é»        Next n = this.children;        // å¦‚æœæ²’æœ‰ï¼Œèªªæ˜å­ç¯€é»éƒ½éæ­·å®Œäº†        if (n == null) {          return null;        }        // å¾å¾Œå¾€å‰ç§»é™¤é—œè¯ç¯€é»        this.children = n.next;        // è¿”å›ç¬¬ä¸€å€‹æ²’æœ‰è¨ªå•éçš„ç¯€é»        if (!n.node.inQueue) {          return n.node;        }      }    }    /**     * è¨ªå•äº†è©²ç¯€é»     */    Node enqueue(Node[] cnodes) {      // è©²ç¯€é»æ¨™è¨˜ç‚ºè¨ªå•é      this.inQueue = true;      // è¨˜éŒ„è©²ç¯€é»çš„çˆ¶ç¯€é»      this.parent = cnodes[ci];      // é‚£éº¼ç¾åœ¨è©²å­—ç¬¦å€¼å°æ‡‰çš„æœ€é«˜ç¯€é»ï¼Œå°±æ˜¯ç•¶å‰ç¯€é»ã€‚      // é€™æ¨£å¦‚æœä¹‹å¾Œä¹Ÿé‡åˆ°ç›¸åŒå­—ç¬¦çš„å­ç¯€é»ï¼Œå°±å¯ä»¥ç‚ºå­ç¯€é»è³¦å€¼å…¶çˆ¶ç¯€é»ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä¸€è¡Œæ˜¯æœ‰æ•ˆçš„      cnodes[ci] = this;      return this;    }    /**     * é€€å‡ºè©²ç¯€é»     */    void dequeue(Node[] cnodes, int[] res) {      // ä¹‹å¾Œæœƒè¨ªå•è©²ç¯€é»çš„å…„å¼Ÿç¯€é»ï¼Œå› æ­¤çˆ¶ç¯€é»éœ€è¦é‡æ–°è¨­ç½®      cnodes[ci] = this.parent;      // è¨­ç½®ç•¶å‰ç¯€é»çš„å€¼      res[index] = this.result;      // çˆ¶ç¯€é»ä¹Ÿå¯ä»¥é€²è¡Œç´¯åŠ       if (this.parent != null) {        this.parent.result += this.result;      }    }    void link(Node x) {      // thisç¯€é»å’Œxç¯€é»ï¼Œäº’ç›¸ç¶å®š      this.children = new Next(this.children, x);      x.children = new Next(x.children, this);    }  }  public int[] countSubTrees(int n, int[][] edges, String labels) {    // æ§‹é€ æ¨¹    Node[] nodes = new Node[n];    // æ¯å€‹ç¯€é»å°æ‡‰çš„å­—ç¬¦    for (int i = 0; i &lt; n; i++) {      nodes[i] = new Node(i, labels.charAt(i) - 'a');    }    // é€šéé‚Šçš„é—œä¿‚ï¼Œå°‡ç¯€é»äº’ç›¸ç¶å®š    for (int[] es : edges) {      nodes[es[0]].link(nodes[es[1]]);    }    // æœ€çµ‚çš„çµæœ    int[] res = new int[n];    // ç•¶å‰è¨ªå•çš„ç¯€é»ä¸‹æ¨™    int sz = 0;    // 26å€‹å°å¯«è‹±æ–‡å­—æ¯å°æ‡‰çš„ç¯€é»æ•¸çµ„    Node[] cnodes = new Node[26];    // ä¸‹é¢ä¸‰è¡Œå¯ä»¥åˆä½µæˆé€™ä¸€è¡Œï¼š    // Node node = nodes[sz++] = nodes[0].enqueue(cnodes);    nodes[sz] = nodes[0].enqueue(cnodes);    // ç•¶å‰è¨ªå•çš„ç¯€é»    Node node = nodes[sz];    // å› ç‚ºç•¶å‰ç¯€é»å·²ç¶“è¨ªå•éï¼Œè‡ªç„¶ä¸‹æ¨™éœ€è¦+1    sz++;    for (; ; ) {      // å¾å¾Œå¾€å‰ï¼Œæ‰¾åˆ°ç•¶å‰ç¯€é»æ²’æœ‰è¨ªå•éçš„ç¬¬ä¸€å€‹å­ç¯€é»      Node child = node.popChild();      // å¦‚æœå·²ç¶“å…¨éƒ¨è¨ªå•éäº†      if (child == null) {        // é–‹å§‹è¨ˆç®—        node.dequeue(cnodes, res);        if (--sz == 0) {          break;        }        // å›æº¯åˆ°çˆ¶ç¯€é»        node = nodes[sz - 1];      } else {        // ä¿è­‰äº†ç›¸é„°ç¯€é»ä¸€å®šæ˜¯çˆ¶å­ç¯€é»        node = nodes[sz++] = child.enqueue(cnodes);      }    }    return res;  }}</code></pre><h1 class=pgc-h-arrow-right>ç¸½çµ</h1><p>ä»¥ä¸Šå°±æ˜¯é€™é“é¡Œç›®æˆ‘çš„è§£ç­”éç¨‹äº†ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯å¦ç†è§£äº†ã€‚æœ¬é¡Œä¸»è¦åœ¨æ–¼å°æ¨¹é€™ç¨®æ•¸æ“šçµæ§‹çš„è€ƒå¯Ÿï¼Œä»¥åŠæ·±åº¦å„ªå…ˆéæ­·çš„ä½¿ç”¨ï¼Œå„ªåŒ–æ™‚å¯ä»¥æ¡å–ç©ºé–“æ›æ™‚é–“çš„ç­–ç•¥ã€‚</p><p>æœ‰èˆˆè¶£çš„è©±å¯ä»¥è¨ªå•æˆ‘çš„åšå®¢æˆ–è€…é—œæ³¨æˆ‘çš„å…¬çœ¾è™Ÿã€é ­æ¢è™Ÿï¼Œèªªä¸å®šæœƒæœ‰æ„å¤–çš„é©šå–œã€‚</p><p>https://death00.github.io/</p><p>å…¬çœ¾è™Ÿï¼šå¥ç¨‹ä¹‹é“</p><p><br></p><div class=pgc-img><img alt="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a6429e9f0946456d9a73ec2009f3fe32><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt="åŠ›æ‰£ 1519â€”â€”å­æ•¸ä¸­æ¨™ç±¤ç›¸åŒçš„ç¯€é»æ•¸" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/35fe6c11a72246e18a5ebe7c94b31e2c><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>åŠ›æ‰£</a></li><li><a>1519</a></li><li><a>å­æ•¸</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/78ab404.html alt=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾‘ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5b3a5789ae2f47f89971a60551cc5128 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/78ab404.html title=åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾‘>åŠ›æ‰£1514â€”â€”æ¦‚ç‡æœ€å¤§çš„è·¯å¾‘</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>