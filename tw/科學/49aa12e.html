<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 | 极客快訊</title><meta property="og:title" content="gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e76ccd7d8db044d28008c3bcb7dcc536"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/49aa12e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/49aa12e.html><meta property="article:published_time" content="2020-10-29T21:02:11+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:11+08:00"><meta name=Keywords content><meta name=description content="gdb實用的調試技巧：啟動方式、堆棧信息、單步調試"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/49aa12e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>gdb實用的調試技巧：啟動方式、堆棧信息、單步調試</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><p>對於很多開發者來說，開發過程中難免會遇到各種各樣的bug, 所以，每個開發者應該考慮如何快速高效定位問題原因，而gdb是linux上很實用的調試工具，熟練掌握其調試技巧，將有助於提高解決問題的效率，也是開發者應該掌握的基本技能。</p><p style=text-align:start>本文首先會講解三種啟動gdb的方式，然後再介紹兩種查看堆棧信息的方法，最後再詳細說明兩種單步調試的實用技巧。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e76ccd7d8db044d28008c3bcb7dcc536><p class=pgc-img-caption></p></div><p style=text-align:start><br></p><h1 class=pgc-h-arrow-right>三種啟動</h1><p style=text-align:start>通過gdb啟動程序，通常有三種方式。下面分別進行講解說明。</p><p style=text-align:start>第一種方式是： gdb + 進程名。 編譯程序的時候，需要加上-g選項，以便可執行程序中加入符號表信息，方便問題定位。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4523a0157c724e6993f04cd28bfd551c><p class=pgc-img-caption></p></div><p style=text-align:start>第二種方式，gdb –symbols=有符號表的進程 –exec=沒有符號表的進程。首先創建沒有符號表的進程，然後創建帶有符號表的進程，最後再啟動進程。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7ee44cf90acc43ae9631c38be7ed4ded><p class=pgc-img-caption></p></div><p style=text-align:start>第三種方式，gdb -p 進程號。 這個方式也是最多使用的。因為進程崩潰的時候，仍然可以使用該方式，附著gdb到進程中，然後查看堆棧信息。</p><p style=text-align:start>首先以後臺運行的方式啟動進程，然後查看進程的進程號，最後執行“gdb -p 進程號”的命令，把gdb附著到進程中，這樣就可以很方便進行調試。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1733a3671f104f6b9588d8fa59dbf3d0><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>兩種堆棧</h1><p style=text-align:start>當程序突然崩潰的時候，可以使用gdb附著到程序中，然後執行bt命令來查看最新的堆棧信息，這往往能夠很快定位到問題的原因。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e73f67bcc9274f1fa8b98db8c3f85c01><p class=pgc-img-caption></p></div><p>如果進程中啟動很多線程，那麼如何查看每個線程的堆棧信息呢，執行命令thread apply all bt，可以查看當前進程的所有線程的堆棧信息。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/674918bec4c64646820e9ba6501fb400><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>兩種技巧</h1><p style=text-align:start>第一個技巧就是利用watch來觀察某個變量的變化，當watch檢測的變量發生變化的時候，gdb就會立即中斷。</p><p style=text-align:start>假設想要檢測Fun函數下i_sum的變化情況，那麼首先在該處設置斷點，然後運行程序。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b01a5a842e7a472da0e4b440b509e532><p class=pgc-img-caption></p></div><p style=text-align:start>運行到斷點位置的時候，程序停止，那麼可以使用p命令打印變量的值，還可以查看變量的地址，最後還可以使用該地址來設置watch的觀察點。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/557b7e02dc4948f08638e6824ca69b10><p class=pgc-img-caption></p></div><p style=text-align:start>第二個技巧就是單步調試，它的好處就是讓開發者可以輕鬆跟蹤代碼的流程，從而不需要通過添加日誌的方式來確定代碼的流程。</p><p style=text-align:start>假設有如下所示的代碼段，我們通過單步調試的方式來跟蹤代碼流程。首先，通過gdb啟動程序，或者程序附著上gdb之後，設置斷點，然後從斷點處開始跟蹤代碼流程。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d8d2bbab2449408b8fbac1bd898a9843><p class=pgc-img-caption></p></div><p style=text-align:start>通過命令r啟動程序，程序停止在斷點處之後，使用n命令(next)進行單步運行，注意該命令不會進入函數內部跟蹤。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bd81f4edb8de44ef87cff2ad6fab7b24><p class=pgc-img-caption></p></div><p style=text-align:start>那麼如果想要進入函數，怎麼辦呢，可以使用s命令（step）來進入函數內部進行單步調試。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d68c70e0c0b14798abb91d43bde09a80><p class=pgc-img-caption></p></div><p style=text-align:start>如果函數內部太長，不想要跟蹤，那麼可以輸入命令finish， 直接跳出函數，注意該命令會執行完成函數之後，再退出。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/016574e5976e4639af868c57cc6fdf1c><p class=pgc-img-caption></p></div><p style=text-align:start>而跳出函數，還有另一個命令return, 但是它不會執行完成函數再退出，而是直接退出。</p><div class=pgc-img><img alt=gdb實用的調試技巧：啟動方式、堆棧信息、單步調試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6d950f4234654cecb59beaa436e85882><p class=pgc-img-caption></p></div><p style=text-align:start>最後補充一個查看局部變量的命令: info locals 。在斷點位置的時候，使用該命令查看局部變量，有助於提高定位問題的效率。</p><h1 class=pgc-h-arrow-right>總結</h1><p style=text-align:start>本文梳理了gdb的常用調試技巧，分別從三個方面進行說明，分別為三種啟動、兩種堆棧以及兩種技巧。啟動方式比較常用的是採用-p選項，將gdb附著到程序中。查看堆棧信息的命令bt適用於程序崩潰的問題，thread apply all bt命令則可以查看所有線程的堆棧信息。watch命令跟蹤變量的變化情況。next則執行單步運行，但是不進入函數內部，step則會進入函數內部； 命令finish可以跳出函數，但是它會執行完成函數之後再退出；而命令return, 則不會執行完成函數，而是馬上就退出。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>調試</a></li><li><a>gdb</a></li><li><a>實用</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8dddaa7.html alt="車頂預留小孔很實用 奧迪SUV車主們請注意" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/403a0000cf2a8c40c1c6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8dddaa7.html title="車頂預留小孔很實用 奧迪SUV車主們請注意">車頂預留小孔很實用 奧迪SUV車主們請注意</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/031eafc4.html alt=電廠直流系統調試方案 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5e8200036f19e04c25bf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/031eafc4.html title=電廠直流系統調試方案>電廠直流系統調試方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html alt=媽媽教的剪刀面做法，無保留分享，簡單又實用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2e3e5ec81da04a70bf4d1fe077acb24c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html title=媽媽教的剪刀面做法，無保留分享，簡單又實用>媽媽教的剪刀面做法，無保留分享，簡單又實用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html alt=6個實用電路圖，簡單易懂！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d4ccc825dea840e0bccda3481c8a96ce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html title=6個實用電路圖，簡單易懂！>6個實用電路圖，簡單易懂！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f35ba13a.html alt=12個實用的電路圖，熟練掌握了你就是初級電工了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8b97dc8eb0fd4558be06c6528dfe81b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f35ba13a.html title=12個實用的電路圖，熟練掌握了你就是初級電工了>12個實用的電路圖，熟練掌握了你就是初級電工了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03ac1cd8.html alt=11個最實用的Excel求和公式，各類求和情況都有模板了！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1535796946527b7df391e10 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03ac1cd8.html title=11個最實用的Excel求和公式，各類求和情況都有模板了！>11個最實用的Excel求和公式，各類求和情況都有模板了！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ce42a78b.html alt=實用經濟的小客廳全景聲4K家庭影院晒單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fc1376d7a7e34c65b134f37430a33a87 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ce42a78b.html title=實用經濟的小客廳全景聲4K家庭影院晒單>實用經濟的小客廳全景聲4K家庭影院晒單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9c8d1ac6.html alt=防滑還帶耐磨層的新型地板，絕對實用！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0ee487c89e3543c8ad923577ae6518a7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9c8d1ac6.html title=防滑還帶耐磨層的新型地板，絕對實用！>防滑還帶耐磨層的新型地板，絕對實用！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/db890d60.html alt=2018年度最具實用價值的10個光學實驗經驗 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f83c6e7c0b204acebb859b60ca4a5cb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/db890d60.html title=2018年度最具實用價值的10個光學實驗經驗>2018年度最具實用價值的10個光學實驗經驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea182b49.html alt=液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/7e5d0001487382aeec79 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea182b49.html title=液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？>液壓系統調試之前，為什麼要讓液壓泵站先空載循環一段時間？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8eefa3d.html alt=大彙總，收藏了看！「報警閥組系統」的調試和檢測 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/50ad00022673c3ca1dc4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8eefa3d.html title=大彙總，收藏了看！「報警閥組系統」的調試和檢測>大彙總，收藏了看！「報警閥組系統」的調試和檢測</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2beb44d.html alt=溼式報警閥組件安裝、檢查、檢測、調試及故障分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a027833f8ae24c738984ebeba3fc5668 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2beb44d.html title=溼式報警閥組件安裝、檢查、檢測、調試及故障分析>溼式報警閥組件安裝、檢查、檢測、調試及故障分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f0597b78.html alt=自我保護早知道！實用乾貨幫你戰“疫” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RoyDw4jFfZipnT style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f0597b78.html title=自我保護早知道！實用乾貨幫你戰“疫”>自我保護早知道！實用乾貨幫你戰“疫”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/67ee75de.html alt=「實用營商指南」企業被列入經營異常名錄，該咋辦？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/67ee75de.html title=「實用營商指南」企業被列入經營異常名錄，該咋辦？>「實用營商指南」企業被列入經營異常名錄，該咋辦？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/89f872ba.html alt=如何做好三軸試驗二(儀器調試與測試參數) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e0287bd5c0724f0ab361e2d3b43c531c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/89f872ba.html title=如何做好三軸試驗二(儀器調試與測試參數)>如何做好三軸試驗二(儀器調試與測試參數)</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>