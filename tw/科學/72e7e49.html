<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Android貝塞爾曲線水紋波動效果、車輛監控效果 | 极客快訊</title><meta property="og:title" content="Android貝塞爾曲線水紋波動效果、車輛監控效果 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/75f3348732fa4ba39478b81030f07881"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/72e7e49.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/72e7e49.html><meta property="article:published_time" content="2020-10-29T21:02:28+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:28+08:00"><meta name=Keywords content><meta name=description content="Android貝塞爾曲線水紋波動效果、車輛監控效果"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/72e7e49.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Android貝塞爾曲線水紋波動效果、車輛監控效果</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><div><p>最近因工作需要做了一個Android基本開發的培訓，這裡把其中Android貝塞爾曲線應用的章節部分拿出來分享。先上圖看效果，包括水紋波動以及利用水紋波動實現車輛監控兩種效果圖，本文主要講解怎麼利用貝塞爾二次曲線實現水紋波動效果。</p><div class=pgc-img><img alt=Android貝塞爾曲線水紋波動效果、車輛監控效果 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/75f3348732fa4ba39478b81030f07881><p class=pgc-img-caption></p></div><h1>1、貝塞爾曲線簡介</h1><p>貝塞爾曲線的得名是由於 1962 年就職於雷諾的法國工程師Pierre Bézier的廣泛宣傳。他使用這種只需要很少的控制點就能夠生成複雜平滑曲線的方法，來輔助汽車車體的工業設計。正是因為控制簡便卻具有極強的描述能力，貝塞爾曲線在工業設計領域迅速得到了廣泛的應用。</p><div class=pgc-img><img alt=Android貝塞爾曲線水紋波動效果、車輛監控效果 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/aacfb44b6acf4aa490c081a4e8bc05d2><p class=pgc-img-caption></p></div><p>如何用de Casteljau算法繪製一條貝塞爾曲線，請參考網上其它文章。貝塞爾曲線是用一系列點來控制曲線狀態的，可以將這些點簡單分為兩類：數據點（確定曲線的起始和結束位置）、控制點（確定曲線的彎曲程度）。通過調整控制點貝塞爾曲線形狀會發生變化。</p><h1>2、Android貝塞爾曲線常用函數</h1><p>Android中Path類中已經有封裝好了的關於貝塞爾曲線的函數。</p><pre>//二階貝賽爾 public void quadTo(float x1, float y1, float x2, float y2) public void rQuadTo(float dx1, float dy1, float dx2, float dy2) //三階貝賽爾 public void cubicTo(float x1, float y1, float x2, float y2,float x3, float y3) public void rCubicTo(float x1, float y1, float x2, float y2,float x3, float y3)</pre><p>2.1、cubicTo()</p><p>查看quadTo()函數源碼看到其參數中(x1,y1)是控制點座標，(x2,y2)是終點座標。整條線的起始點是通過Path.moveTo(x,y)來指定的，而如果我們連續調用quadTo()，前一個quadTo()的終點，就是下一個quadTo()函數的起點。如果初始沒有調用Path.moveTo(x,y)來指定起始點，則默認以控件左上角(0,0)為起始點。</p><p>2.2、rQuadTo()</p><p>rQuadTo()函數參數與quadTo()不同，具體說明如下：</p><p>dx1:控制點X座標，表示相對上一個終點X座標的位移座標，可為負值，正值表示相加，負值表示相減；</p><p>dy1:控制點Y座標，相對上一個終點Y座標的位移座標。同樣可為負值，正值表示相加，負值表示相減；</p><p>dx2:終點X座標，同樣是一個相對座標，相對上一個終點X座標的位移值，可為負值，正值表示相加，負值表示相減；</p><p>dy2:終點Y座標，同樣是一個相對，相對上一個終點Y座標的位移值。可為負值，正值表示相加，負值表示相減；</p><p>假如我們上一個終點座標是(300,400)，那麼利用rQuadTo(100,-100,200,100)； 得到的控制點座標是（300+100,400-100）即(500,300) 同樣，得到的終點座標是(300+200,400+100)即(500,500)，這個方法使用上和quadTo()方法沒什麼區別。</p><p>2.3、cubicTo()</p><p>這是Android的三階貝塞爾曲線方法，查看源碼可以看到參數(x1,y1)是第一個控制點座標，(x2,y2)是第二個控制點座標，(x3，y3)是終點座標。同樣整條線的起始點是通過Path.moveTo(x,y)來指定的，而如果我們連續調用cubicTo()，前一個cubicTo()的終點，就是下一個cubicTo()函數的起點；如果初始沒有調用Path.moveTo(x,y)來指定起始點，則默認以控件左上角(0,0)為起始點。</p><p>2.4、rCubicTo()方法源碼</p><p>參數說明同rQuadTo。</p><h1>3、水紋波動效果</h1><p>為了實現連續的波動效果，我們需要在屏幕內和屏幕外各畫一個完整波紋，然後不間斷進行水平方向平移動畫。</p><div class=pgc-img><img alt=Android貝塞爾曲線水紋波動效果、車輛監控效果 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e37e6adbca3c44ee9c3ac1451e2419db><p class=pgc-img-caption></p></div><p>首先是採用貝塞爾二次曲線畫出兩個完整波紋，即對上圖中AB、BC、CD、DE曲線段利用貝塞爾二次曲線rQuadTo畫出。核心代碼是drawWave()這個方法，其中mWaveDx是計算出的屏幕寬度，mWaveHeight是貝塞爾曲線控制點高度，dx是動畫每次的偏移量。</p><pre>private void drawWave(Canvas canvas) { Path path = new Path(); path.reset(); path.moveTo(-mWaveDx + dx, mHeight / 2); for (int i = -mWaveDx; i &lt; getWidth() + mWaveDx; i += mWaveDx) { path.rQuadTo(mWaveDx / 4, -mWaveHeight, mWaveDx / 2, 0); path.rQuadTo(mWaveDx / 4, mWaveHeight, mWaveDx / 2, 0); } path.lineTo(mWidth, mHeight); path.lineTo(0, mHeight); //path.close() 繪製封閉的區域 path.close(); canvas.drawPath(path, mPaint);}</pre><p>完整的波紋已經畫出，下面就是實現波動效果。這裡藉助ValueAnimator對貝塞爾曲線不斷繪製，並生成一個偏移量dx，使得每次繪製的起點平滑右移，從而實現水紋波動效果。</p><p>ValueAnimator屬性動畫的運行機制是通過不斷地對值進行操作來實現的，而初始值和結束值之間的動畫過渡就是由ValueAnimator這個類來負責計算的。它的內部使用一種時間循環的機制來計算值與值之間的動畫過渡，我們只需要將初始值和結束值提供給ValueAnimator，並且告訴它動畫所需運行的時長，那麼ValueAnimator就會自動完成從初始值平滑地過渡到結束值這樣的效果。</p><pre> public void waveAnimation() { // valueAnimator對象，初始值為0，結束值為mWaveDx，mWaveDx為整個屏幕寬度 ValueAnimator valueAnimator = ValueAnimator.ofInt(0, mWaveDx); // 設置屬性動畫時長 valueAnimator.setDuration(2000); // 無線重複動畫 valueAnimator.setRepeatCount(ValueAnimator.INFINITE); valueAnimator.setInterpolator(new LinearInterpolator()); valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { @Override public void onAnimationUpdate(ValueAnimator animation) { //水平方向的偏移量，值的區間為0~mWaveDx，根據偏移量重繪貝塞爾曲線 dx = (int)animation.getAnimatedValue(); invalidate(); } }); valueAnimator.start(); }</pre><p>最終效果圖就是文章開頭供圖，只給出了靜態截圖，實際演示動態效果可以下載源碼運行，下載地址https://download.csdn.net/download/wangpf2011/10986376。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Android</a></li><li><a>貝塞爾曲線</a></li><li><a>水紋</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c1058aa2.html alt="Android Q下ANGLE圖形引擎性能測試  「農步祥」" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RXTy8D7HmsBWr1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c1058aa2.html title="Android Q下ANGLE圖形引擎性能測試  「農步祥」">Android Q下ANGLE圖形引擎性能測試 「農步祥」</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0ac13623.html alt="Android 11加入新功能：長期不用的APP自動關閉敏感權限" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Rx4J9h84rlZBze style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0ac13623.html title="Android 11加入新功能：長期不用的APP自動關閉敏感權限">Android 11加入新功能：長期不用的APP自動關閉敏感權限</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/192b9f57.html alt="Android版Firefox 81將引入可自動關閉舊標籤頁的選項" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/SA9N6CXIS75NYa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/192b9f57.html title="Android版Firefox 81將引入可自動關閉舊標籤頁的選項">Android版Firefox 81將引入可自動關閉舊標籤頁的選項</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e3073c3d.html alt="Android端Firefox 81可定時關閉不使用的標籤頁" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S9x6jJb18axAim style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e3073c3d.html title="Android端Firefox 81可定時關閉不使用的標籤頁">Android端Firefox 81可定時關閉不使用的標籤頁</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/355ed5a4.html alt=在Android中的工具欄中添加菜單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a3572ad9d9fb487d8927f703f18179a0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/355ed5a4.html title=在Android中的工具欄中添加菜單>在Android中的工具欄中添加菜單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html alt=【學習筆記】Android開發之kotlin語言（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ee3f9c8348ae4de58a5f62922d2042e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html title=【學習筆記】Android開發之kotlin語言（一）>【學習筆記】Android開發之kotlin語言（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/514f2fe0.html alt=Android進階之路之網絡編程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R6GseWQ6pTbxvr style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/514f2fe0.html title=Android進階之路之網絡編程>Android進階之路之網絡編程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d258b9eb.html alt="徹底凍結Android 應用後臺活動 讓他們不耗電、不聯網、不啟動" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/e4fd87bc-b2e5-40e2-841d-2e3dc5f9a2b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d258b9eb.html title="徹底凍結Android 應用後臺活動 讓他們不耗電、不聯網、不啟動">徹底凍結Android 應用後臺活動 讓他們不耗電、不聯網、不啟動</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/68b758a4.html alt="訊飛輸入法Android V9.1.9465 重磅升級拼音手寫A.I.引擎" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/RiF18Oh9i8jWPd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/68b758a4.html title="訊飛輸入法Android V9.1.9465 重磅升級拼音手寫A.I.引擎">訊飛輸入法Android V9.1.9465 重磅升級拼音手寫A.I.引擎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03a7881d.html alt="Android 11公開測試版正式發佈，新增了實用功能" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/76a9b5ad-e27f-4cea-b8b9-2134bc133e5d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03a7881d.html title="Android 11公開測試版正式發佈，新增了實用功能">Android 11公開測試版正式發佈，新增了實用功能</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/036cb180.html alt="首批適配！ColorOS正式發佈Android 11開發者測試版：暗色定時、超級省電" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/S2cySEvGM5dtxu style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/036cb180.html title="首批適配！ColorOS正式發佈Android 11開發者測試版：暗色定時、超級省電">首批適配！ColorOS正式發佈Android 11開發者測試版：暗色定時、超級省電</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9e496dd.html alt="Android 11 beta升級方法，如何申請測試版更新？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ba850edc544843cab07cecf061a1ffde style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9e496dd.html title="Android 11 beta升級方法，如何申請測試版更新？">Android 11 beta升級方法，如何申請測試版更新？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c2b5d261.html alt="三星已開始Android 11測試：Galaxy S10+首個嚐鮮" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RrbBJ1a9L1lUev style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c2b5d261.html title="三星已開始Android 11測試：Galaxy S10+首個嚐鮮">三星已開始Android 11測試：Galaxy S10+首個嚐鮮</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0b177ec2.html alt="Android 11更新媒體存儲API 第三方App也可用上回收站" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/S1fN75RGiuayvJ style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0b177ec2.html title="Android 11更新媒體存儲API 第三方App也可用上回收站">Android 11更新媒體存儲API 第三方App也可用上回收站</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f62039ae.html alt="最全的 Android 技術棧" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7ba93cad11c848e68c6ad42693acf335 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f62039ae.html title="最全的 Android 技術棧">最全的 Android 技術棧</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>