<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>音視頻直播技術——OpenGL渲染（一） | 极客快訊</title><meta property="og:title" content="音視頻直播技術——OpenGL渲染（一） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/37ee0002cb76278cc5e2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/832874e5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/832874e5.html><meta property="article:published_time" content="2020-11-14T20:52:19+08:00"><meta property="article:modified_time" content="2020-11-14T20:52:19+08:00"><meta name=Keywords content><meta name=description content="音視頻直播技術——OpenGL渲染（一）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/832874e5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>音視頻直播技術——OpenGL渲染（一）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><div><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37ee0002cb76278cc5e2></p><p class=pgc-img-caption>model座標</p><h1>前言<br></h1><p>在前面的幾篇文章中我介紹了以下幾種音視頻直播技術：</p><p><b>音視頻直播架構</b></p><p><strong>Android下視頻採集(Camera1)</strong></p><p><strong>Android下視頻採集(Camera2)</strong></p><p><strong>Andriod下H264編碼</strong></p><p><strong>Android下H264解碼</strong></p><p><a href=http://www.toutiao.com/i6456308721348772366><strong>Android下畫中畫的實現</strong></a></p><p>接下來幾篇文章為大家介紹一下Android下如何使用OpenGL進行渲染。</p><h1>OpenGLES</h1><p>在Android下進行視頻渲染使用的是 OpenGLES。OpenGLES（OpenGL for Embedded Systems）就是用在嵌入式系統中的 OpenGL。</p><p>OpenGL是一個非常龐大而又專業的知識，如果想完全撐握它需要花不少時間。而視頻渲染只用到了OpenGL的一小部分知識，所以我們就採取用多少學多少的辦法，這樣可以讓我們更專注於音視頻直播技術。</p><p>但即使這樣，我們還是要先補習一些數據的基本知識。如果沒有這些基礎，我們是無法理解視頻渲染過程的。</p><h1>圖像渲染過程</h1><p>一般將一個3D圖像顯示在2D的平面上需要三個步驟的距陣變換，我們稱之為MVP，即模型（Model）, 觀察(View)以及投影(Projection)。</p><ul class=list-paddingleft-2><li><p>模型：將要顯示的3D物體從模型座標系變成世界座標系。</p></li><li><p>觀察：將3D物體從世界座標系變換成從人眼角度看到物體的座標系。</p></li><li><p>投影：就是將3D座標系換成2D座標系。也就是3D物理如何在2D平面上展示。即我們通常說的降維。</p></li></ul><p>下面我們介紹下實現 MVP 轉換需要的數學知識。</p><h1>距陣</h1><p>在三維圖形學用(x,y,z,w)代表一個頂點，它是一個齊次座標。</p><ul class=list-paddingleft-2><li><p>其中的 x,y 我們都知道是橫軸和縱軸。</p></li><li><p>z 代表深度，比如按右手座標來說，離我們眼睛越遠的深度越深，z值也就越小。</p></li><li><p>w 是為了距陣做乘法運算而增加的。</p></li></ul><p>因此，我們在三維圖形學中只用到4x4矩陣，它能對頂點(x,y,z,w)作變換。頂點變換使用距陣左乘的方法，其公式如下：</p><p>矩陣 x 頂點 = 變換後的頂點。</p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37ef0002c70229a79987></p><p class=pgc-img-caption>距陣左乘</p><blockquote><p>左手指著a，右手指著x，得到ax。 左手移向右邊一個數b，右手移向下一個數y，得到by。依次類推，就得到了右邊的結果。</p></blockquote><h1>距陣的平移</h1><p>有個 4x4 的距陣，如下：</p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37f00000dd060b9d53f4></p><p class=pgc-img-caption>平移距陣</p><p>其中，X、Y、Z是點的位移增量。例如，若想把向量(10, 10, 10, 1)沿X軸方向平移10個單位，可得：<br></p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37e90002dbcb01decfd3></p><p class=pgc-img-caption>平移運算</p><h1>距陣的縮放</h1><p>有個 4x4 的距陣，如下：</p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37f10000a9825fb37f5c></p><p class=pgc-img-caption>縮放距陣</p><p>如果想把一個向量沿各方向放大2倍，可得：<br></p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37ef0002c704b3293e31></p><p class=pgc-img-caption>縮放運算</p><p>是不是很神奇？</p><h1>距陣的旋轉</h1><p>旋轉矩陣比較複雜，繞 X 軸旋轉使用的距陣：</p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37ef0002c7036f702ef9></p><p class=pgc-img-caption>繞X軸旋轉</p><p>繞 Y 軸旋轉使用的距陣：<br></p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37f00000dd04851ac7b1></p><p class=pgc-img-caption>繞Y軸旋轉</p><p>繞 Z 軸旋轉使用的距陣：<br></p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37f00000dd03e66c1ec8></p><p class=pgc-img-caption>繞Y軸旋轉</p><h1>累積距陣變換<br></h1><p>前面已經學習瞭如何旋轉、平移和縮放向量。把這些矩陣相乘就能將它們組合起來，例如：</p><p>TransformedVector = TranslationMatrix * RotationMatrix * ScaleMatrix * OriginalVector;</p><blockquote><p>這行代碼首先執行縮放，接著旋轉，最後才是平移。這就是矩陣乘法的工作方式。</p></blockquote><p>另外，變換的順序不同，得出的結果也不同。所以，順序不能亂。</p><h1>距陣的正投影</h1><p>正投影矩陣也比較複雜，我們這裡直接給出，大家可以在網上查找相關資料，自己推導出這個距陣：</p><p><img alt=音視頻直播技術——OpenGL渲染（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/37e90002dbd48719d393></p><p class=pgc-img-caption>正投影距陣</p><h1>小結<br></h1><p>上面介紹了三維圖型學中需要的一些數學基礎知識。OpenGL也是按照上面的數學知識進行繪圖的。當然，在編寫OpenGL程序時，不需要直接寫這些數學公式，OpenGL已經為我們提供了非常方便的函數，我們只需要調用就行了。但為了便於我們對圖型的理解，這些基礎知識還是非常必要的。</p><h1>參考</h1><ol class=list-paddingleft-2><li><p>齊次座標</p></li><li><p>搞懂 OpenGL 矩陣轉換</p></li><li><p>距陣</p></li></ol><p><strong>希望大家觀注我，謝謝！</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>音視頻</a></li><li><a>技術</a></li><li><a>OpenGL</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/93727dba.html alt="技術帖 | 3分鐘搞定各種測試分析技術" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/f055e0a4477240088de2abb7cd696cfa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/93727dba.html title="技術帖 | 3分鐘搞定各種測試分析技術">技術帖 | 3分鐘搞定各種測試分析技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d0ddee5.html alt=建築房屋結構平衡技術要求，你都會知道嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5e7d0001715d878ed66c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d0ddee5.html title=建築房屋結構平衡技術要求，你都會知道嗎？>建築房屋結構平衡技術要求，你都會知道嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/47c8cac0.html alt=新《裝配式混凝土建築技術標準》有哪些改變？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1540524372015dc56ec3fb9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/47c8cac0.html title=新《裝配式混凝土建築技術標準》有哪些改變？>新《裝配式混凝土建築技術標準》有哪些改變？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b6c2fc2b.html alt=鈦合金精密鑄造技術發展現狀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/SCynkUUBbHN8CF style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b6c2fc2b.html title=鈦合金精密鑄造技術發展現狀>鈦合金精密鑄造技術發展現狀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2e8af08.html alt=傾斜航攝技術小知識——航線設計篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RS1ucOiDvLRlVt style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2e8af08.html title=傾斜航攝技術小知識——航線設計篇>傾斜航攝技術小知識——航線設計篇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d597da51.html alt=黃河電力技術公司在龍羊峽進行無人機傾斜攝影測量 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1528429551298e033646798 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d597da51.html title=黃河電力技術公司在龍羊峽進行無人機傾斜攝影測量>黃河電力技術公司在龍羊峽進行無人機傾斜攝影測量</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cdb604f6.html alt=《雷神4：愛與雷》將採用“虛擬製作”技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/83a320a69b0f44e3baf7db07faac3c65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cdb604f6.html title=《雷神4：愛與雷》將採用“虛擬製作”技術>《雷神4：愛與雷》將採用“虛擬製作”技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1cd5b6b6.html alt=虛擬現實技術在智能製造領域具有重要的應用價值 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3ed327880d3b4c5384619f21d6c81823 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1cd5b6b6.html title=虛擬現實技術在智能製造領域具有重要的應用價值>虛擬現實技術在智能製造領域具有重要的應用價值</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a2b0c81.html alt="虛擬製造的基石：數值模擬技術 | 加快實現工業數字化" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2f2c32f4bd734f9face045546d45a665 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a2b0c81.html title="虛擬製造的基石：數值模擬技術 | 加快實現工業數字化">虛擬製造的基石：數值模擬技術 | 加快實現工業數字化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ee69f5ac.html alt=基於機器視覺技術快速準確地確定收穫後幹大豆種子的品質 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/519b968bf69146fda9bf55f89779d373 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ee69f5ac.html title=基於機器視覺技術快速準確地確定收穫後幹大豆種子的品質>基於機器視覺技術快速準確地確定收穫後幹大豆種子的品質</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e203d547.html alt=和你一起的軍訓，下雨也甜蜜｜四川託普信息技術職業學院軍訓記 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4cd61c2a490f48ebb0aa74d30ec8766b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e203d547.html title=和你一起的軍訓，下雨也甜蜜｜四川託普信息技術職業學院軍訓記>和你一起的軍訓，下雨也甜蜜｜四川託普信息技術職業學院軍訓記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/916c8d26.html alt=鍋爐專業技術問答100條 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/916c8d26.html title=鍋爐專業技術問答100條>鍋爐專業技術問答100條</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0efa050d.html alt=「技術」差速器總成結構與性能參數分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fa9c698160c045c8a64c08dac6018a30 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0efa050d.html title=「技術」差速器總成結構與性能參數分析>「技術」差速器總成結構與性能參數分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4db7ced8.html alt="技術 | 水泥磨主減速機高速軸軸承更換" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a1cfa2b9a4e74251a6b1114ba246a08f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4db7ced8.html title="技術 | 水泥磨主減速機高速軸軸承更換">技術 | 水泥磨主減速機高速軸軸承更換</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/592a3506.html alt=鍋爐技術問答巡檢必看 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/9e74752d-8d81-484a-9349-961881c64498 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/592a3506.html title=鍋爐技術問答巡檢必看>鍋爐技術問答巡檢必看</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>