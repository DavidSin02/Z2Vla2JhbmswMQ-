<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路 | 极客快訊</title><meta property="og:title" content="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c1e4ff43.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c1e4ff43.html><meta property="article:published_time" content="2020-11-14T20:51:10+08:00"><meta property="article:modified_time" content="2020-11-14T20:51:10+08:00"><meta name=Keywords content><meta name=description content="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/c1e4ff43.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><div><p class=ql-align-justify>移動網絡優化是超級App永恆的話題，對於無線電商來說更為重要，網絡請求體驗跟用戶的購買行為息息相關，手機淘寶從過去的HTTP API網關，到2014年升級支持SPDY，2015年雙十一自研高性能、全雙工、安全的ACCS（阿里雲通道服務)扛住雙十一戰場主要流量，無論是基礎架構的演進、網絡調優、協議的優化、異地多活、網絡調度上都有不少寶貴的經驗與大家分享。</p><p class=ql-align-justify>ACCS基於無線場景精心設計的雙工 、安全、低時延、開放的移動統一接入層服務，在雙十一當天穩定高效地服務了近2億的在線用戶，支持了峰值4500萬的在線長連接，這個背後的故事以及我們的思考是什麼呢？</p><p><strong>1.業務高速發展下訴求</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>回到一年前，移動電商在2014年雙十一業務開始興起，2014年雙十一當天移動成交243億佔整體571億的42.6%，業務高速發展希望更多主動推送去觸達用戶，一些新的玩法和互動形式，需要連接買家與買家、買家與賣家、買家與達人，因為沒有有效的通道能力，業務採取的是不停去輪詢服務器，一來對服務器造成不必要的壓力，二來對於用戶手機的電量流量也是極大的浪費，關鍵在大促當天不必要的請求過大甚至會導致後端集群限流，從而影響到用戶體驗。</p><p class=ql-align-justify>信息傳播形態的變化的背後是移動化帶來新的技術特徵導致的結果。在過去的幾年，移動電商從無到有，手機淘寶一直是這個領域的先行者。移動電商從最初的複製WEB的業務形態到移動特性不斷湧現，更多的互動形式的出現，向社交化、娛樂化不斷邁進的今天，一個單純的商品的陳列架形式已經不能滿足業務的需求。</p><p class=ql-align-justify>業務上需要實時的觸達用戶，充分發揮移動的特性，將消費時間的碎片利用起來，事實也證明了用戶的消費時間隨著移動化的進程不斷髮生變化，逐步分佈到全天的碎片時間中。同時貨架形態也在向社區化、娛樂化的方向發展，這些都對網絡層連接用戶有了更高的要求。更多的媒體形態和展示方式，對網絡層提出了更多元的要求。大家可以關注到手機淘寶內的消息盒子、微淘、淘友這些產品都是業務求變的體現，業務的變化倒逼技術的前進。</p><p><strong>2.移動網絡環境依然嚴峻</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>移動網絡的速度在過去幾年有很大提升，但網絡環境的多樣性和差異性使移動網絡的環境更加複雜，在去年雙十一之前我們還常遇到一些移動網絡劫持的事情。網絡劫持這塊問題的排查效率很低，需要找到用戶、復現現場，甚至找網工、運營商配合排查，一查就是幾天過去。</p><p class=ql-align-justify>同時在我們的輿情反饋上總是看到用戶在說－“某個頁面加載中、頁面打不開、請求很慢、打開某個功能很慢”，面對這些問題過去我們是沒有太好的辦法，只能貓抓耗子一樁樁去排雷很被動。很多網絡的問題是偶現的，一旦錯過現在就無從查起，背後的原因很多：</p><ol><li class=ql-align-justify>運營商問題</li><li class=ql-align-justify>機房部署原因</li><li class=ql-align-justify>客戶端SDK Bug</li><li class=ql-align-justify>弱網和網絡抖動</li><li class=ql-align-justify>DNS劫持和數據篡改</li></ol><p class=ql-align-justify><br></p><p class=ql-align-justify>PC時代我們訪問網站的接入條件是相對恆定的，所以在開發時很少考慮網絡對用戶體驗的影響。但是移動APP則不然，尤其是在中國，基礎的移動網絡環境並不好，而且我們有很多用戶的訪問是發生在地鐵、公交車這樣的移動環境下，移動基站的頻繁切換進一步增加了網絡的不穩定。從手機淘寶的數據可以看出，我們每天活躍用戶中有不少來自於類似2G這樣的弱網環境。如果端到雲的連接不穩定、高延時，那麼所有的用戶體驗都無從談起。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>基礎網絡的效率就像一輛列車，時延是火車的速度(啟動時間)，而帶寬就像火車的車廂裝載量，整個傳輸的物理鏈路就像火車的鐵軌。目前現實條件下的移動網絡條件非常複雜，既有高鐵這樣先進的傳輸渠道，也有不少老舊緩慢的綠皮車還在服務很多用戶。我們的目標很簡單，就是想讓所有用戶都能在手機淘寶獲得流暢的體驗，不論你坐的是“高鐵”還是“綠皮車”。</p><p class=ql-align-justify>下面這張圖，能夠讓大家更加直觀的瞭解中國的移動網絡環境。描述了從用戶到IDC的端到端的路由情況，不僅數據傳輸耗時長且丟包率高，同時安全性也是相當糟糕的，DNS劫持、內容劫持在中國就是家常便飯。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>因此我們在改善網絡通道上有很多的事情可以去做，去探索突破運營商基礎網絡的限制，力爭為用戶創造極致的購物體驗。</p><p><strong>3.ACCS整體架構</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>為了滿足移動電商業務高速發展的需求，我們決定打造一個世界級的網絡接入服務，構建一個無線網絡下”水、電、煤“ 一樣的基礎設施。這樣一個基礎設施需要做到的四個目標：</p><p class=ql-align-justify>“ 雙工、低延時、安全、開放”。在這四個目標之上是圍繞這個接入服務配套的運維體系，幫助最終用戶取得良好的端上體驗的同時，幫助開發者快速構建自己的業務。</p><p class=ql-align-justify>如圖-1所示，在整個接入服務上我們劃分為兩層，接入網關層和應用網關層。接入網關負責連接的保持、消息的解析、消息的分發。應用網關實現各種應用層協議：API、SYNC、RPC、PUSH等，在應用網關的背後是具體的業務系統。同時我們建立了一個統一調度服務，而不是採用傳統的DNS，調度服務是我們的控制中心，通過它我們可以強有力的指揮我們的客戶端，並且不會受到DNS汙染的影響。</p><p class=ql-align-justify>與服務端的分層架構對應的是客戶端的SDK，最底層的統一網絡庫SDK集中了我們對網絡優化的策略，並向上為各個應用網關技術的SDK提供API。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>(圖-1)</p><p class=ql-align-justify><br></p><p class=ql-align-justify>基於上面的開放架構，業務方可以選擇直接開放具體的後端服務對接不同的應用網關，不需要了解網絡背後的細節，並通過應用網關如API網關提供的開發工具快速生成客戶端代碼。業務方也可以基於這個接入層設計自己的協議。</p><p class=ql-align-justify>統一接入層集中管理了用戶的設備、在線狀態，並提供信息的雙向傳遞能力。如下圖所示：</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/534dff2b49bd426ba4ca1a6f5bc64cc1><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>網關將致力於解決中間網絡的通訊，為上層的服務提供高質量的雙向通訊能力。</p><p><strong>4.穩定性與容災</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>穩定性與容災是服務端中間件永恆的主題，統一接入層這樣一個匯聚網關收益和風險是並存的，一旦這個入口故障了，波及的用戶範圍是不可想象的，如何做的更加穩定，是一個巨大的挑戰。</p><p class=ql-align-justify><strong>4.1 網關架構的優化</strong></p><p class=ql-align-justify>對於一個統一網關來說，對接的業務網關的信息傳遞特點是不一樣的，大部分的業務在全天都是比較平緩的，但是個別營銷類業務會在短時間內發佈海量的信息，這樣的信息發佈會搶佔網關的大量資源，對於用戶的正常訪問會產生影響。</p><p class=ql-align-justify>舉個例子，push服務需要通過網關推送2億條消息，而這些消息需要在短時間內全部推送完，而同時網關在為正常的用戶的交互提供服務，海量信息的推送和正常的用戶交互相互競爭資源，最終會造成正常用戶的交互失敗，對於業務來說，這是不可接受的。</p><p class=ql-align-justify>基於上面的情況考慮整個網關在佈署上分為兩個集群，一個集群處理常態的在線用戶訪問，另一個集群處理海量信息的推送。如下圖-2所示，通過這樣的方式，避免了業務形態不同，對統一網關的衝擊，將不同的業務形態進行了隔離。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><strong>(圖-2)</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>4.2 異地多活</strong></p><p class=ql-align-justify>阿里這兩年一直在實施的異地多活的架構，在異地多活的整體方案中，統一網關承擔了快速引導流量的職責，也是這一方案順利實施的一個重要環節。</p><p class=ql-align-justify>異地多活是一個多機房的整體方案，在多個地區同時存在對等的多個機房，以用戶維度劃分，多機房共同承擔全量用戶的流量；在單個機房發生故障時，故障機房的流量可以快速的被遷引到可用機房，減少故障的恢復時間。</p><p class=ql-align-justify><strong>4.2.1 無線接入層單元化的協商機制</strong></p><p class=ql-align-justify>先看一下web端在這異地多活中的實現方式</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>(圖-3)</p><p class=ql-align-justify><br></p><p class=ql-align-justify>從圖-3可以看到，瀏覽器的業務器求會發給CDN，由CDN上保存的分發規則，向後續的單元機房分發。無線端也這樣做嗎？客戶端擁有強大的能力，可以做的更靈活；CDN的分發節點帶來更多的機器成本；對於需要雙工通訊能力的客戶端，消息投遞更為複雜。這些是我們思考與WEB不同的地方，是不是能做些不一樣的選擇？</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><strong>(圖-4)</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>如圖-4, 我們藉助了客戶端的強大能力，利用協商的機制來完成用戶的請求正確被分配到不同的單元，含以下幾點:</p><ol><li class=ql-align-justify>客戶端的請求始終帶上當前用戶歸屬單元的信息。</li><li class=ql-align-justify>當請求到達服務端時，服務端判斷用戶歸屬單元是否正確，不正確將用戶重定向到正確的單元 。</li><li class=ql-align-justify>當前請求由網關在服務端上通過跨單元調用保證業務的正確性。</li><li class=ql-align-justify>當客戶端歸屬單元更新後，後續的請求都會發到正確的單元機房。</li></ol><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>4.2.2 無線接入層單元化的旁路調度</strong></p><p class=ql-align-justify>協商機制看起來很不錯，這裡一個重磅炸彈丟過來了，機房的入口網絡斷了！</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center><strong>(圖-5)</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>如圖-5, 外網不可用，協商的機會都沒有故障單元的用戶無法恢復，這時旁路的調度服務出場了。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>(圖-6)</p><p class=ql-align-justify><br></p><p class=ql-align-justify>如上圖-6, 我們設計的調度中心這時又承擔了單元化的旁路調度職責,當app訪問的單元無法訪問的時候, app會訪問不同單元的調度中心，詢問用戶的歸屬單元，通過這種方式取得可用的單元節點，將用戶切到正確的單元。這個方案同樣適用於單機房的接入層網關不可用的場景。</p><p class=ql-align-justify><strong>4.2.3 應用層網關不可用</strong></p><p class=ql-align-justify>某個單元機房的應用層網關不可用，這時等待應用網關排查問題需要的時間比較久，為了達到最快的故障恢復，我們通過開關把修改接入層的轉發規則，將流量切到可用的單元。如下圖-7</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>(圖-7)</p><p class=ql-align-justify><br></p><p><strong>5.端到端網絡優化</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>5.1 統一網絡庫</strong></p><p class=ql-align-justify>在做網絡優化一開始，我們想做一個通用的網絡庫，這個網絡庫包含策略、httpDNS、SPDY協議等一切系統網絡優化需要的方方面面。上層api網關請求邏輯、推送邏輯、上傳下載邏輯對於這樣一個通用網絡庫來說都是業務。在分層上將通用網絡庫和上層應用邏輯分開、徹底解耦，對長期持續優化網絡是很有必要。如下圖-8所示架構。</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-center>(圖-8)</p><p class=ql-align-justify><br></p><p class=ql-align-justify>這樣架構上分離，可以讓我們更專注更系統化去做無線網絡優化。統一網絡庫的幾個重要特性:</p><ol><li class=ql-align-justify>靈活控制客戶端網絡行為策略(建連、超時處理、請求協議、是否加密）</li><li class=ql-align-justify>包含HTTPDNS，支持異地多活</li><li class=ql-align-justify>更細粒度控制和調度(域名級和域名下參數級)</li></ol><p class=ql-align-justify><br></p><p class=ql-align-justify>1、2、3均由網絡調度中心的集群控制，我們希望這個可以做到與業務無關，去掉一些阿里的業務屬性後，這個模塊大家可以理解為HTTPDNS，可以理解我們在HTTPDNS之外做了大量網絡優化的端到端的工作。</p><p class=ql-align-justify><strong>5.2 就近就快接入</strong></p><p class=ql-align-justify>基於網絡庫我們實現了一套智能學習的網絡策略，智能學習客戶端在不同網絡環境下建連策略，用戶重新回到這個網絡環境會給出最優的策略進行快速連接，並定期去更新或淘汰本地cache的歷史最優網絡策略。為了建連更加迅速在各自網絡下穿透性更好，接入服務器支持了多種協議和端口，客戶端建連時可以極速接入網絡。我們有一個重要指標是打開客戶端30S內網絡請求成功率，就是關注連的快給用戶體驗帶來的價值。</p><p class=ql-align-justify>基於調度中心，我們搭建了一個智能大數據分析平臺，將客戶端在在網絡請求過程中的數據如建連時間、首包收取時間、整包收取時間、ssl握手時間等重要指標收集上來 。根據這些指標分析出網絡異常區域，調整我們的就近就快接入規則，甚至推動IDC建設和CDN的布點完善。</p><p class=ql-align-justify><strong>5.3 弱網優化和抗抖動</strong></p><p class=ql-align-justify>在弱網優化上我們嘗試了QUIC,在網絡延時較高、丟包嚴重情況下比TCP有更好表現。線上手機淘寶灰度版本實測切換到QUIC後，平均RT收益有接近20%。考慮QUIC在移動網絡可能存在穿透性問題,未來我們將採取SPDY為主，QUIC為輔助的模式來完善我們的網絡鏈接策略。</p><p class=ql-align-justify>同樣在一些網絡環境較差情況下，我們採取長短鏈接結合方式，在長鏈接遇到請求超時或穿透性較差情況，利用短鏈接HTTP短鏈接去請求數據(在移動網絡環境下HTTP協議尤其HTTP1.0的穿透性是最好的)，這樣可以在一些極端情況下最大程度保證用戶體驗。數據如下圖-9</p><div class=pgc-img><img alt="阿里無線11.11 | 手機淘寶移動端接入網關基礎架構演進之路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e5d1e8f7c894034a902013c15458a91><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>網絡切換和網絡抖動情況下的技術優化也是一個很重要的方面，我們經常遇到移動設備網絡切換和信號不穩定的情況，在這種情況我們怎麼保證用戶的體驗？</p><p class=ql-align-justify>針對這種情況我們的思路是有策略合理增加重試。我們對一個網絡請求以是否發送到socket緩衝區作為分割，將網絡請求生命週期劃分為“請求開始到發送到 socket緩衝區”和“已經發送到socket緩衝區到請求結束”兩個階段。在階段一內請求失敗了，會根據業務需求幫助業務請求去做重試。階段二請求失敗只針對讀操作提供重試能力。</p><p class=ql-align-justify>設想一個場景：用戶在進電梯發起一個刷新數據請求，進到電梯因為網絡抖動的原因網絡鏈接斷了，這個時候我們能夠合理策略去做重試，這樣當用戶離開電梯時很可能網絡請求重試成功，幫助用戶拉到了想要的數據，提升了用戶體驗和客戶端的網絡抗抖動能力。</p><p class=ql-align-justify><strong>5.4 加密傳輸1S鍾法則</strong></p><p class=ql-align-justify>眾所周知的傳統https的整個握手流程是非常重的，在網絡質量不高的情況下，造成建連過慢，用戶體驗慘不能睹，甚至都無法完成安全握手；然而從安全的角度我們是需要一個安全的傳輸通道保護用戶的隱私數據。</p><p class=ql-align-justify>安全與網絡這一對衝突放在我們的面前，需要在技術上有所突破，因此我們自建了一套slight-ssl的技術，參考了tls1.3的協議，通過合併請求，優化加密算法，運用session-ticket等策略，最終在安全和體驗之間找到了一個平衡點，在基本不犧牲用戶體驗的基礎上，達到了安全傳輸的目地, 同時還大幅度提升了服務端的性能。通過技術的創新，我們實現了無線網絡加密傳輸下1S鍾法則。</p><p><strong>6.總結和感悟</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>手機淘寶2015年雙十一網絡接入工作<strong>關鍵字</strong>總結:</p><p class=ql-align-justify>ACCS、網關架構優化、異地多活、弱網優化和抗抖動、加密傳輸1S鍾法則</p><p class=ql-align-justify><strong>幾點感悟：</strong></p><ol><li class=ql-align-justify>網絡接入任重道遠，對於手機淘寶這樣一個億級UV無線電商平臺,穩定性是立足之本。</li><li class=ql-align-justify>接入層架構調整要麼基於業務需求（能夠適應業務的變化的架構才是最合適的)，要麼能夠極大節省成本和提升穩定性。架構的演進一定是迭代式不能一蹴而就，重視積累和反思。</li><li class=ql-align-justify>移動接入層解決方案上可以更多利用客戶端能力，這個是無線對比PC Web的優勢所在。</li><li class=ql-align-justify>無線網絡這兩年網速是提升了但網絡環境更加複雜，萬物互聯、設備隨時隨地在線、運營商的複雜性會對移動網絡優化帶來更多的挑戰，端到端的網絡優化以及推進運營商合作任重而道遠。</li></ol><p class=ql-align-justify><br></p><p class=ql-align-justify>最後打個廣告，基於ACCS的雲推送服務Agoo已經在公測中，未來我們的移動基礎設施將逐步上雲提供給業界開發者朋友們。</p><p>手機淘寶技術團隊吳志華（天施）、洪海（孤星）、陳虓將（仲升）等同學參與本文創作。</p><p><strong>MTT是手機淘寶技術團隊</strong>（Mobile Taobao Tech team）的英文縮寫，歡迎關注手機淘寶技術團隊，一起交流分享無線技術，共創移動開發無限未來！掃描微信二維碼關注我們！我們將分享更多的獨家技術細節！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>無線</a></li><li><a>11.11</a></li><li><a>手機</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d6d002c8.html alt=手機支架桌面萌物無線充電只需一個耐爾金全部搞定 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/03e86b055c994b02a21598f7969e9930 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d6d002c8.html title=手機支架桌面萌物無線充電只需一個耐爾金全部搞定>手機支架桌面萌物無線充電只需一個耐爾金全部搞定</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/40568794.html alt=手機接收不到驗證碼怎麼辦？教你快速解決，學會以備不時之需 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5edf6bf6494e4d2799657427beba8616 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/40568794.html title=手機接收不到驗證碼怎麼辦？教你快速解決，學會以備不時之需>手機接收不到驗證碼怎麼辦？教你快速解決，學會以備不時之需</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ed39a73b.html alt=手機收不到短信怎麼回事 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4c867ab694d54b19954e5777769cc540 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ed39a73b.html title=手機收不到短信怎麼回事>手機收不到短信怎麼回事</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7a0039e6.html alt=手機收不到短信驗證碼怎麼回事？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7cd7583238d44cfeb3be6147f9417125 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7a0039e6.html title=手機收不到短信驗證碼怎麼回事？>手機收不到短信驗證碼怎麼回事？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html alt=手機收不到短信？這10種排查方法，看看你都會了沒？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/557c2fac09c941f69a7359acbaa810b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html title=手機收不到短信？這10種排查方法，看看你都會了沒？>手機收不到短信？這10種排查方法，看看你都會了沒？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/717930a4.html alt=手機收不到驗證碼就要小心了！警方公佈案情，全國超500萬臺手機被操控，成了犯罪分子牟利的工具 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/b1eafc85-ba0f-4499-a1f5-9de5079a2a94 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/717930a4.html title=手機收不到驗證碼就要小心了！警方公佈案情，全國超500萬臺手機被操控，成了犯罪分子牟利的工具>手機收不到驗證碼就要小心了！警方公佈案情，全國超500萬臺手機被操控，成了犯罪分子牟利的工具</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b61d16fd.html alt=手機經常收不到消息是怎麼回事？看完你就知道怎麼是什麼原因了！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/53f300040692811299c9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b61d16fd.html title=手機經常收不到消息是怎麼回事？看完你就知道怎麼是什麼原因了！>手機經常收不到消息是怎麼回事？看完你就知道怎麼是什麼原因了！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d0ace686.html alt=有人手機收不到驗證碼，民警一調查：全國超500萬隻手機已中招 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bcf23766294d481fa4f6757a0d2cca53 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d0ace686.html title=有人手機收不到驗證碼，民警一調查：全國超500萬隻手機已中招>有人手機收不到驗證碼，民警一調查：全國超500萬隻手機已中招</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e47a8a3b.html alt=緊急提醒！浙江有人手機收不到驗證碼，民警一查：全國500多萬隻手機已中招 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7db0555b09794579b544b2d29ed5b194 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e47a8a3b.html title=緊急提醒！浙江有人手機收不到驗證碼，民警一查：全國500多萬隻手機已中招>緊急提醒！浙江有人手機收不到驗證碼，民警一查：全國500多萬隻手機已中招</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/135c11db.html alt=知道手機基站是怎麼安裝的嗎？工藝有哪些要求 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3dc892aae9c74d6a80d6579347b13473 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/135c11db.html title=知道手機基站是怎麼安裝的嗎？工藝有哪些要求>知道手機基站是怎麼安裝的嗎？工藝有哪些要求</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1f949b51.html alt=我們到底需不需要“億級像素”手機 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RqipTxL5HHmoLm style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1f949b51.html title=我們到底需不需要“億級像素”手機>我們到底需不需要“億級像素”手機</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8f087332.html alt=手機1億像素真的能提升拍照效果嗎？淺析像素、CMOS與畫質的關係 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f5cf31426bc84bb5b7c89e2ef18369b1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8f087332.html title=手機1億像素真的能提升拍照效果嗎？淺析像素、CMOS與畫質的關係>手機1億像素真的能提升拍照效果嗎？淺析像素、CMOS與畫質的關係</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/73367b23.html alt=手機外置攝像頭可以改變手機像素嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/46e30003d911b8439ee2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/73367b23.html title=手機外置攝像頭可以改變手機像素嗎？>手機外置攝像頭可以改變手機像素嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/66b0d3ed.html alt=手機已經4000萬像素了，2000萬像素的單反會下崗嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/0a19b21a4a5448968295316c5fd159f3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/66b0d3ed.html title=手機已經4000萬像素了，2000萬像素的單反會下崗嗎？>手機已經4000萬像素了，2000萬像素的單反會下崗嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/443ad8e9.html alt=為何國產手機像素動不動就上億，而蘋果、索尼像素卻只有1200萬？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9422b14657b0418bbbef42083ff1f8e8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/443ad8e9.html title=為何國產手機像素動不動就上億，而蘋果、索尼像素卻只有1200萬？>為何國產手機像素動不動就上億，而蘋果、索尼像素卻只有1200萬？</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>