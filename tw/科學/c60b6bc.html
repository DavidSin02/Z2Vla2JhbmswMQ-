<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>互聯網大廠老司機帶你深入瞭解 Java 調試 | 极客快訊</title><meta property="og:title" content="互聯網大廠老司機帶你深入瞭解 Java 調試 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/cd4f472c-89fb-4392-aa72-05e40b8039b1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/c60b6bc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/c60b6bc.html><meta property="article:published_time" content="2020-10-29T21:02:12+08:00"><meta property="article:modified_time" content="2020-10-29T21:02:12+08:00"><meta name=Keywords content><meta name=description content="互聯網大廠老司機帶你深入瞭解 Java 調試"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/c60b6bc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>互聯網大廠老司機帶你深入瞭解 Java 調試</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><blockquote><p>點擊上方☝，輕鬆關注！及時獲取有趣有料的技術文章</p></blockquote><p><br></p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/cd4f472c-89fb-4392-aa72-05e40b8039b1><p class=pgc-img-caption></p></div><p><br></p><p>Bug(俗稱"八阿哥") 是軟件開發繞不過的一道坎，因此調試便成了每位程序員一項必備的核心技能。調試不僅有助於理解程序的運行流程，還能改進代碼質量，最終提高開發者解決問題的能力以及交付軟件的品質。<br>本文旨在討論 Java 調試關鍵技巧，同時也會介紹生產環境中調試 Java 的最佳實踐。</p><h1 class=pgc-h-arrow-right><strong>0 調試 Java 項目</strong></h1><p><br></p><p>本節討論 Java 項目調試中的常見概念與技巧，包括Breakpoint (斷點)、Step filter (單步過濾器)、Drop to Frame (跳出函數到選定層)等。這些技術同樣可以在複雜場景下使用。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>條件斷點</strong></h1><p><br></p><h1 class=pgc-h-arrow-right>斷點用來指定在調試過程中程序停止執行的位置。通過臨時掛起執行過程，可以觀察或修改字段與變量值。下面的內容雖然使用了 Eclipse進行演示，但是相關概念同樣適用於其他 Java IDE。條件斷點即設置成在滿足特定條件時觸發的斷點，用來檢查條件發生時程序的狀態、調用堆棧及重要的變量值。</h1><p><br></p><h1 class=pgc-h-arrow-right>下面的示例對音樂專輯得分計算算術平均值：</h1><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0723fc8a71ec441f93019582396328e9><p class=pgc-img-caption></p></div><p><br></p><p>假設有數百張專輯，可以在循環中設置條件斷點 album.getRating().score == 0。當出現專輯得分為0時，程序就會停止執行。</p><p><br></p><p><strong>其他斷點類型</strong></p><p>除了上面介紹的斷點類型，不同的 Java IDE 還提供了其他類型的斷點：</p><p><br></p><ul><li>事件斷點：與事件綁定，在遇到調試器能夠識別的事件時觸發；</li></ul><p><br></p><ul><li>字段斷點：給定字段或表達式的值發生變化時，字段斷點將停止正在執行的程序。調試時可以指定一個字段作為觀察點，表達式讀取、修改時停止執行；</li></ul><p><br></p><ul><li>方法斷點 ：進入或退出指定方法時掛起程序，用來檢查特定方法的進入或退出事件；</li></ul><p><br></p><ul><li>行斷點：程序到達斷點中設置的特定代碼行時停止程序執行。</li></ul><h1 class=pgc-h-arrow-right><br></h1><h1 class=pgc-h-arrow-right><strong>使用 Rookout 設置斷點</strong></h1><p><br></p><p>Rookout 是一個創新的調試平臺，在不停止或中斷程序的情況下蒐集調試數據。支持自定義斷點觸發條件。Rookout 提供的"斷點狀態"功能非常強大：在斷點附近通過警告標誌或展示斷點狀態。</p><p><br></p><p>Rookout 有5種斷點狀態：</p><p><br></p><ul><li>Active (紫色, 實心)</li></ul><p><br></p><ul><li>Pending (紫色, 空心)</li></ul><p><br></p><ul><li>Warning (紫色, 實心, 帶三角形)</li></ul><p><br></p><ul><li>Error (紫色, 空心, 帶三角形)</li></ul><p><br></p><ul><li>Disabled (灰色, 空心)</li></ul><p><br></p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/63ed0785f39443eba50004ffbb369e85><p class=pgc-img-caption></p></div><p><br></p><p>"斷點狀態" 可以在查看日誌或調試信息前就能對程序運行狀況有所瞭解。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>Step Filter (單步過濾器)</strong></h1><p><br></p><p>Step Filter 可以在調試中指定需要跳過的 package。在調試多個 class、第三方庫或框架時非常好用。在 Eclipse 中可以通過 Window Preferences >>Java Debug >>Step Filtering 配置。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>Drop to frame (跳出函數到選定層)</strong></h1><p><br></p><p>這種技術可以在調試期間選擇並重新執行程序的一部分：指定程序調用堆棧中任意幀(frame)，在 Debug View 中點擊 Drop-to-frame 按鈕，調試器會從這裡重新啟動。Drop to frame 不會影響字段或現有數據，例如已寫入數據庫的記錄。</p><p><br></p><p><strong>1 遠程調試</strong></p><p>大多數 Java IDE 都支持 JVM 遠程調試。設置調試參數如下：</p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b26ddf18da654847a41cda1727c45889><p class=pgc-img-caption></p></div><p><br></p><p>Eclipse 用戶需輸入主機名 (hostname) 和端口號，如下圖所示：</p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/39e711e53a9f46ccbf7cd2b565921d10><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>2 在生產環境調試 Java</strong></h1><p><br></p><p>現如今開發節奏越來越快，代碼發佈也是如此。無論測試流程如何嚴格，總會有漏網之魚。當這些漏洞遇到生產中的實際數據，產生的壓力隨之飆升。因此，進行系統擴展的同時解決潛在的漏洞非常關鍵。</p><p><br></p><p>下面的策略可供每個 Java 開發者參考：</p><p><br></p><ul><li>確定錯誤發生的時間；</li><li>評估錯誤的嚴重程度(優先級)；</li><li>篩選定位導致程序出錯的狀態；</li><li>接下來，跟蹤並解決根本原因(root cause)；</li><li>最後，打補丁。</li></ul><p><br></p><p>除了上面的五個步驟，還應當遵守下面這些生產環境最佳實踐：</p><p><br></p><h1 class=pgc-h-arrow-right><strong>提高日誌等級</strong></h1><p><br></p><p>大多數情況下，錯誤信息沒有包含足夠的上下文內容，因此調試時需要提升日誌等級。完整的上下文內容可以有效地理解、定位和確定錯誤的根本原因。一種常見的方法，在每個線程的入口點生成 UUID。</p><p><br></p><p>理想情況下，可以按照以下格式設置線程名稱：</p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3cc7431502fc4f59a52985fd7e5886cc><p class=pgc-img-caption></p></div><p><br></p><p>這樣，堆棧跟蹤信息會以 “threadName: pool-7-thread-22, UUID: EB85GTA, MsgType: AnalyzeGraph, MsgID: 415669, 29/03/2020 04:44” 開頭，比起 “pool-7-thread-22” 這樣的名字更有意義。</p><p><br></p><p><strong>集中日誌</strong></p><p><br></p><p>在應用程序生命週期各階段尤其是生產階段處理錯誤時，應優先考慮高效的日誌記錄機制。把會話中所有重要事件彙集到統一的日誌服務器，不但能夠降低調試的難度，而且在跟蹤關鍵產品指標時，還可以幫助監視應用程序中發生錯誤的情況。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>檢查堆棧跟蹤和其他日誌</strong></h1><p>調試異常時，堆棧跟蹤非常有用：它能幫助確定在程序崩潰時調用了哪些函數以及調用順序。下面的代碼使用 printStack() 方法打印異常堆棧：</p><p><br></p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fda11869a4344dab94261ae6492ab961><p class=pgc-img-caption></p></div><p><br></p><p>輸出結果：</p><div class=pgc-img><img alt="互聯網大廠老司機帶你深入瞭解 Java 調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d7033ed9c4d24238a627fede9cdfbfa0><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><br></h1><h1 class=pgc-h-arrow-right><strong>複製實例</strong></h1><p><br></p><p>獲取日誌後，接下來最重要的是在複製場景(實例)。通常會創建一個與 IDE 調試類似的環境，便於分析與解決錯誤。</p><p><br></p><h1 class=pgc-h-arrow-right><strong>3 總結</strong></h1><p><br></p><p>Java 調試並不是開發者的噩夢。一點創造性思維加上合適的工具，開發者會更有信心、更加快速準確地識別、診斷和解決代碼中的錯誤。</p><blockquote><p>來源：覃佑樺</p><p>medium.com/@AriNoman/java-debugging-731c21d278be</p></blockquote><p><br></p><p>上面就是本次文章的全部內容，感謝你的閱讀，希望對你有幫助，也歡迎你點贊留言和轉發~</p><blockquote><p>關注我，不迷路，及時獲取有趣有料內容，See you next good day~</p></blockquote></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>互聯</a></li><li><a>網大廠</a></li><li><a>老司</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/a9a3f5b.html alt=互聯網大廠畢業生吸引力排名出爐，字節跳動成最受青睞的公司 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/8815ecd5c873406aa4137fe594ef5dfd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/a9a3f5b.html title=互聯網大廠畢業生吸引力排名出爐，字節跳動成最受青睞的公司>互聯網大廠畢業生吸引力排名出爐，字節跳動成最受青睞的公司</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b786cc2b.html alt=老司機機電開課了——焊接應力變形和質量檢驗 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/66c10004d1eab51e54cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b786cc2b.html title=老司機機電開課了——焊接應力變形和質量檢驗>老司機機電開課了——焊接應力變形和質量檢驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1d5ed980.html alt="老司機告訴你 選電源看準“夠用、實用、性價比高”包你不踩坑" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/635e6ee7699241da9233496e33b76105 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1d5ed980.html title="老司機告訴你 選電源看準“夠用、實用、性價比高”包你不踩坑">老司機告訴你 選電源看準“夠用、實用、性價比高”包你不踩坑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/52672492.html alt=老司機教你如何選擇電源，十大品牌電源介紹，任你選擇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fbd8de87e2664ec69426af579e95d6bd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/52672492.html title=老司機教你如何選擇電源，十大品牌電源介紹，任你選擇>老司機教你如何選擇電源，十大品牌電源介紹，任你選擇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/366acf56.html alt=小白買車看外觀，老司機買車看這些配置參數，你買車看什麼？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/cfe000470dee963c2f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/366acf56.html title=小白買車看外觀，老司機買車看這些配置參數，你買車看什麼？>小白買車看外觀，老司機買車看這些配置參數，你買車看什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e45fab97.html alt=老司機告訴你，買車看哪些參數，讓你買車不再糾結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15285340671634991991e39 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e45fab97.html title=老司機告訴你，買車看哪些參數，讓你買車不再糾結>老司機告訴你，買車看哪些參數，讓你買車不再糾結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9fa56cb3.html alt=老司機為什麼喜歡喝脈動？原來是因為…… class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/152843951349166ba6b2bf6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9fa56cb3.html title=老司機為什麼喜歡喝脈動？原來是因為……>老司機為什麼喜歡喝脈動？原來是因為……</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0b32de46.html alt=突破量子互聯網瓶頸，新型中繼器發佈，確保信息傳達安全唯一性 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/76b4bb1be43d40bea4630c794dd4230c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0b32de46.html title=突破量子互聯網瓶頸，新型中繼器發佈，確保信息傳達安全唯一性>突破量子互聯網瓶頸，新型中繼器發佈，確保信息傳達安全唯一性</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d18dbdc9.html alt=我的世界：挖礦老司機總結的3條挖礦技巧，學會了不愁挖不到鑽石 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1528561239505a971f604df style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d18dbdc9.html title=我的世界：挖礦老司機總結的3條挖礦技巧，學會了不愁挖不到鑽石>我的世界：挖礦老司機總結的3條挖礦技巧，學會了不愁挖不到鑽石</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7f34388.html alt=您知道照明燈光的質量好壞嗎？老司機帶您瞭解常見光源的顯色性 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/37c80004344138cc7ca7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7f34388.html title=您知道照明燈光的質量好壞嗎？老司機帶您瞭解常見光源的顯色性>您知道照明燈光的質量好壞嗎？老司機帶您瞭解常見光源的顯色性</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9cd25c50.html alt=雲海互聯與晶眾地圖簽署戰略合作協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9cd25c50.html title=雲海互聯與晶眾地圖簽署戰略合作協議>雲海互聯與晶眾地圖簽署戰略合作協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/69627298.html alt=「知識分享」能源互聯網分佈式協同優化控制方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d0cc8c4f53d3484babee1e150171c794 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/69627298.html title=「知識分享」能源互聯網分佈式協同優化控制方法>「知識分享」能源互聯網分佈式協同優化控制方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fbcc8da7.html alt=能源互聯網分佈式協同優化控制方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RZrZ95pFTH1kpC style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fbcc8da7.html title=能源互聯網分佈式協同優化控制方法>能源互聯網分佈式協同優化控制方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/85286094.html alt=UI老司機才懂的那些事兒 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2ae55b10db0c4fc88430b8aedf371d45 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/85286094.html title=UI老司機才懂的那些事兒>UI老司機才懂的那些事兒</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f46b9aeb.html alt=《中國國際光纜互聯互通白皮書（2018年）》發佈 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1532759411210988051a0cb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f46b9aeb.html title=《中國國際光纜互聯互通白皮書（2018年）》發佈>《中國國際光纜互聯互通白皮書（2018年）》發佈</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>