<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>10、OpenCV中圖像和Mat類型（一） | 极客快訊</title><meta property="og:title" content="10、OpenCV中圖像和Mat類型（一） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/24b0ab17ca4f4fc38e616aecfbe79161"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/d34786df.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/d34786df.html><meta property="article:published_time" content="2020-11-14T20:56:35+08:00"><meta property="article:modified_time" content="2020-11-14T20:56:35+08:00"><meta name=Keywords content><meta name=description content="10、OpenCV中圖像和Mat類型（一）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/d34786df.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>10、OpenCV中圖像和Mat類型（一）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><p>Mat類型可以被認為是OpenCV庫的核心。 OpenCV庫中絕大多數的函數都是Mat類的成員，以Mat作為參數，或者Mat作為返回值。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/24b0ab17ca4f4fc38e616aecfbe79161><p class=pgc-img-caption></p></div><p>Mat類用於表示任意維數的密集數組。即使對於數組中的該條目為零，也存在與該條目相對應的數據值。大多數圖像都以密集陣列的形式存儲。在稀疏數組的情況下，通常只存儲非零條目。如果許多條目都是零，那麼可以節省大量的存儲空間。使用稀疏數組而不是密集數組的常見情況是直方圖。對於許多直方圖，大多數條目都是零，並且存儲所有這些零不是必需的。對於稀疏數組的情況，OpenCV有另一種數據結構，SparseMat。</p><p>如果你熟悉OpenCV庫的C接口（2.1之前的版本），您將會記住IplImage和CvMat的數據類型。 你也可能記得CvArr。 在C ++實現中，所有這些都消失了，用Mat代替。Mat類可以用於任何維數的數組。數據被存儲在陣列中，被認為是"光柵掃描順序"的n維數字。這意味著在一維數組中，元素是順序的。在二維數組中，數據按行組織，每行依次出現。對於三維陣列，每個平面都是逐行填充的。</p><p>每個Mat都包含一個標誌元素，指示數組內容，一個dims元素指示維數，rows和cols元素指示行數和列數，指向數據指針的位置數組數據被存儲，一個類似於Ptr &lt;>的的引用計數器。數據數組被佈置成使得其索引由（i0，ii，...，iNd-1）給出的元素的地址是：</p><p>在二維數組的簡單情況下，這可以簡化為：</p><p>&(mtxi, j)= mtx.data +mtx.step 0 *i +mtx.step 1 *j</p><p>Mat中每個數據元素本身可以是單個數字，也可以是多個數字。在多個數字的情況下，這就是多通道數組。一個數組可能被認為是一個32位浮點數的二維三通道數組;在這種情況下，數組的元素是三個32位浮點數，大小為12個字節。在內存中佈局時，數組的行可能不是絕對順序的;在下一個之前可能會有小的間隙緩衝每一行。一個n維單通道陣列和一個（n-1）維多通道陣列之間的區別在於，這個填充將始終發生在整行的末尾,即元素中的通道將始終是連續的）。</p><p>可以簡單地通過實例化一個類型為Mat的變量來創建一個數組。以這種方式創建的數組沒有大小和數據類型。但是，可以使用create（）等成員函數分配數據。 create（）的一個變體將多個行，多個列和一個類型作為參數，並將該數組表示為一個二維對象。數組的類型決定了它具有哪種元素以及通道的數量。所有這些類型都在庫中定義，並具有CV_ {8U，16S，16U，32S，32F，64F} C {1,2,3}的格式。例如，CV_32FC3意味著一個32位浮點三通道陣列。</p><p>也可以在首次分配矩陣時指定這些內容。Mat有許多構造函數，其中一個與create（）具有相同的參數。例如：</p><p>cv::Mat m;</p><p>// 創建3行10列3通道32位浮點型數據</p><p>m.create( 3, 10, CV_32FC3 );</p><p>//設置第一個通道為1.0，第二個通道為0.0，第三個通道為1.0</p><p>m.setTo( cv::Scalar( 1.0f, 0.0f, 1.0f ) );</p><p>//上面的定義與下面的語句等價</p><p>Mat m( 3, 10, CV_32FC3, cv::Scalar( 1.0f, 0.0f, 1.0f ) );</p><p>Mat對象實際上是數據區域的頭，原則上它是一個完全獨立的東西。 例如，可以將一個矩陣n分配給另一個矩陣m（即，m = n）。 在這種情況下，m中的數據指針將被改變為指向與n相同的數據。 先前由m的數據元素指向的數據將被釋放。同時，它們現在共享的數據區域的引用計數器將遞增。同時將更新m成員的數據（如行，列和標誌），以準確描述m中數據指向的數據。</p><p>表1是Mat的構造函數的完整列表。但事實上，大多數時候可能使用其中的一小部分。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5870d38ea65540b5abb1902e0559fb18><p class=pgc-img-caption></p></div><p>表1列出了Mat對象的構造函數。除了默認的構造函數之外，它們分為三個基本類別：有些需要多行和多列來創建二維數組的類，有些使用Size對象創建，有些構造n維數組並要求指定維數並傳入指定每個維的大小的整數數組的指針。此外，其中一些允許初始化數據，或者通過Scalar提供初始化值（這時整個數組將被初始化為該值），或者通過提供指向數據塊的指針來指定。在後一種情況下，只是為現有數據創建一個數據頭，不復制數據;將數據成員設置為指向由數據參數指示的數據）。</p><p>表2的複製構造函數顯示瞭如何從另一個數組創建一個數組。除了基本的複製構造函數外，還有三種方法用於從現有數組的子區域構建數組，以及使用某個矩陣表達式的結果初始化新矩陣的構造函數。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/64d28b6f21924874aaedc4689a7fb6fb><p class=pgc-img-caption></p></div><p>也可以從OpenCV2.1版之前的CvMat或IplImage結構創建新的C ++風格的Mat結構。在這種情況下，可以採用下面表3這種方式轉換。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dce22c82038743fbbb49e656627451bf><p class=pgc-img-caption></p></div><p>這些構造函數可能比你剛開始認識OpenCV的時候要多得多。還有一種構造函數是模板構造函數。 這些被稱為模板構造函數是因為它們從本身就是模板的東西構建了Mat的實例。 這些構造函數允許使用任意Vec &lt;>或Matx &lt;>來創建具有相應維數和類型的Mat數組，或者使用任意類型的STL向量&lt;>對象來構造一個相同類型的數組。表4是這種構造方式。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ba35391c146f41089f3bb817fd6b6ea5><p class=pgc-img-caption></p></div><p>Mat類還提供了許多靜態成員函數來創建特定類型的常用數組（表4-5）。 這些函數包括zero（），ones（）和eye（）等函數，它們分別構造一個全是零的矩陣，一個全是1矩陣的矩陣和一個單位矩陣。表5是這種構造方式</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/88126d698815404c8add90ea49d42f91><p class=pgc-img-caption></p></div><p>對於Mat中的數據訪問方式可以參考第6部分的說明。</p><p>有時候我們需要訪問數組中的某一塊元素，可能是選擇一行或一列，或原始數組的任何子區域。有很多方法可以做到這一點，表6是Mat類的成員函數，並返回調用它們的數組的子部分。</p><div class=pgc-img><img alt=10、OpenCV中圖像和Mat類型（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/96ad411846d14a1eaaf2b19b5f0dd44c><p class=pgc-img-caption></p></div><p>這些方法中最簡單的方法是row（）和col（）。與row（）和col（）緊密相關的是rowRange（）和colRange（）。這些函數基本上是一樣的，只不過他們會提取一個具有多個連續行（或列）的數組。可以通過以下兩種方式之一調用這兩個函數：指定一個整數開始和結束行（或列），或者通過傳遞一個行（或列）的Range對象。範圍包括開始索引但不包括結束索引。</p><p>除了從m.diag（）返回的數組引用矩陣的對角線元素之外，成員函數diag（）與row（）或col（）的作用相同。 m.diag（）需要一個整數參數，用於指示要提取哪個對角線。如果該參數為零，那麼它將是主對角線。如果是正數，則它將從陣列上半部分的主對角線偏移該距離。如果它是負數，那麼它將來自陣列的下半部分。</p><p>提取子矩陣的最後一種方法是使用operator（）。使用這個運算符，你可以傳遞一對範圍（行的Range和列的Range）或者從Rect指定你想要的區域。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>10</a></li><li><a>OpenCV</a></li><li><a>中圖</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/602bcbcd.html alt="每天這樣陪玩 10 分鐘，勝過上萬元早教班" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RlIqLlfA7COpuB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/602bcbcd.html title="每天這樣陪玩 10 分鐘，勝過上萬元早教班">每天這樣陪玩 10 分鐘，勝過上萬元早教班</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html alt=手機收不到短信？這10種排查方法，看看你都會了沒？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/557c2fac09c941f69a7359acbaa810b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html title=手機收不到短信？這10種排查方法，看看你都會了沒？>手機收不到短信？這10種排查方法，看看你都會了沒？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/831354a0.html alt=一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5bfee759920547be9fa569ef49842ad0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/831354a0.html title=一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法>一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4a9d2887.html alt=10塊錢，可以撬動多大的槓桿？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8d6ace340ff04af9945e80694c8429cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4a9d2887.html title=10塊錢，可以撬動多大的槓桿？>10塊錢，可以撬動多大的槓桿？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e342e11c.html alt="2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Rk8ZSn39iz0Be8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e342e11c.html title="2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法">2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/75414528.html alt=招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c737032a00314e3091e2d81d467d777f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/75414528.html title=招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨>招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cfc7290d.html alt=OpenCV項目實戰---人臉檢測 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f267e46946554437b5ffe48234f3b78d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cfc7290d.html title=OpenCV項目實戰---人臉檢測>OpenCV項目實戰---人臉檢測</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html alt=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8716c57443b84bf39d12f7181c19e5d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html title=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣>推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65c5ac44.html alt=跟新型冠狀病毒有關的10個謠言，別被騙了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/8d29a0c1-76c9-462f-93a3-12ac1fb91bb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65c5ac44.html title=跟新型冠狀病毒有關的10個謠言，別被騙了>跟新型冠狀病毒有關的10個謠言，別被騙了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/256535bb.html alt="小米10又推'億級像素'，方向錯了為何還要越走越遠？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e25a6761fe874f28a49818dabfc7d87a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/256535bb.html title="小米10又推'億級像素'，方向錯了為何還要越走越遠？">小米10又推'億級像素'，方向錯了為何還要越走越遠？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4f8d6ade.html alt=耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152094458108473fb60ec01 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4f8d6ade.html title=耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景>耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f448e7cc.html alt=10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1541124052858d1740db0d4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f448e7cc.html title=10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽”>10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1bbb42bf.html alt=2020年10月7日，世界職業拳壇新鮮事兒 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0939c8b4612246ab8bd720d63240562e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1bbb42bf.html title=2020年10月7日，世界職業拳壇新鮮事兒>2020年10月7日，世界職業拳壇新鮮事兒</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5cb94ee8.html alt=60年來新低！佛山10天日照時數僅0.8小時！去年洗的衣服，今年幹了嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R8aij9CAatiYf5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5cb94ee8.html title=60年來新低！佛山10天日照時數僅0.8小時！去年洗的衣服，今年幹了嗎？>60年來新低！佛山10天日照時數僅0.8小時！去年洗的衣服，今年幹了嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d989bb55.html alt=創60年新低！佛山10天日照時數僅0.8小時！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/88a602fd3e244777a8e3504eba69edac style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d989bb55.html title=創60年新低！佛山10天日照時數僅0.8小時！>創60年新低！佛山10天日照時數僅0.8小時！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>