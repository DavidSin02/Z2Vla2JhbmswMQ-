<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>TCP/IP-運輸層-你需要知道的運輸層概念 | 极客快訊</title><meta property="og:title" content="TCP/IP-運輸層-你需要知道的運輸層概念 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/a47a604cc4e34358a5357f9e7af4f2da"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e5%ad%b8/f51b5ddc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e5%ad%b8/f51b5ddc.html><meta property="article:published_time" content="2020-11-14T20:50:24+08:00"><meta property="article:modified_time" content="2020-11-14T20:50:24+08:00"><meta name=Keywords content><meta name=description content="TCP/IP-運輸層-你需要知道的運輸層概念"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E5%AD%B8/f51b5ddc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>TCP/IP-運輸層-你需要知道的運輸層概念</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E5%AD%B8.html>科學</a></span></div><div class=post-content><div class=pgc-img><img alt=TCP/IP-運輸層-你需要知道的運輸層概念 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a47a604cc4e34358a5357f9e7af4f2da><p class=pgc-img-caption></p></div><p>運輸層向它上面的應用層提供通信服務. 兩個主機進行通信就是兩個主機中的<strong>應用進程互相通信</strong>. 從運輸層的角度看, <strong>通信的真正端點並不是主機而是主機的進程</strong>. <strong>運輸層提供應用進程間的邏輯通信. 運輸層之間的通信好像是沿水平方向傳輸數據.但事實上這兩個運輸層之間並沒有一條水平方向的物理連接.要傳送的數據是沿著圖中的虛線向(經過多個層次)傳送的</strong> .</p><h2 class="md-end-block md-heading">5.1 運輸層協議概述</h2><h3 class="md-end-block md-heading">5.1.1 進程之間的通信</h3><ul class=ul-list><li><strong>網絡層是為了主機之間提供邏輯通信,而運輸層為應用進程之間提供端到端的邏輯通信.</strong></li><li><strong>運輸層向高層用戶屏蔽了下面網絡核心的細節,它使應用進程看見的就是好像在兩個運輸層實體之間有一條端到端的邏輯通信信道.</strong></li><li>當運輸層採用面向連接的TCP協議時,儘管下面的網絡是不可靠的,但這種邏輯通信信道就相當於一條全雙工的可信信道.</li><li>採用UDP協議時,這種邏輯通信信道仍然是一條不可靠信道.</li></ul><h3 class="md-end-block md-heading">5.1.2 運輸層的兩個主要協議.</h3><ol start=0><li>UDP(User Datagram Protocol)[RFC 768]</li><li>TCP(Transmission Control Protocol)[RFC793] UDP在傳送數據之間不需要先建立連接. TCP 提供面向連接的服務.</li></ol><h3 class="md-end-block md-heading">5.1.3 運輸層的端口.</h3><p>通過端口解決通信的目的地.雖然通信的終點是應用進程,但我們只要把要傳送的報文交到目的主機的某一個合適的目的端口,剩下的工作(即最後交付給目的進程)就由TCP來完成. <strong>在協議棧層間的抽象的協議端口是軟件端口,軟件端口是應用層的各種協議進程與運輸試題進行層間交換的一種地址</strong> . 端口號只具有本地意義.</p><h2 class="md-end-block md-heading">5.2 UDP</h2><h3 class="md-end-block md-heading">5.2.1 UDP概述</h3><ol start=0><li>無連接</li><li>盡最大努力交付.</li><li>面向報文.</li><li>沒有擁塞控制.</li><li>支持1對1,1對n,n-1和n-n交互通信.</li><li>首部開銷小. 只有8個字節.</li></ol><h3 class="md-end-block md-heading">5.2.2 UDP的首部格式</h3><ol start=0><li>源端口</li><li>目的端口</li><li>長度</li><li>校驗和</li></ol><h2 class="md-end-block md-heading">5.3 TCP</h2><h3 class="md-end-block md-heading">5.3.1 TCP最主要的特點 TCP 是TCP/IP體系中非常複雜的一個協議.</h3><ol start=0><li>面向連接的運輸層協議.<strong>也就是說,應用程序在使用TCP協議之前,必須先建立TCP連接.在傳送數據完畢後,必須釋放已經建立的TCP連接</strong>.</li><li>每一條TCP連接只能有兩個端點(endpoint),每一條TCP連接只能是點對點.</li><li>TCP提供可靠交付的服務.</li><li>TCP提供全雙工通信. <strong>TCP允許通信雙方的應用進程在任何時候都能發送數據.TCP連接的兩端都設有發送緩存和接收緩存,用來臨時存放雙向通信的數據.在發送時,應用程序在把數據傳送給TCP的緩存後,就可以做自己的事,而TCP在合適的時候吧數據發送出去.在接受時,TCP把收到的數據放在緩存,上層的應用進程在合適的時候讀取緩存中的數據</strong>.</li><li>面向字節流. TCP中的<strong>流(stream指的是流入到進程或從進程流出的字節序列</strong>. 雖然應用程序和TCP的交互是一次一個數據塊(大小不等),但TCP把應用程序叫下來的數據看成僅僅是一連串的 <strong>無結構的字節流</strong>. TCP並不知道所傳送的字節流的含義.TCP不保證接收方應用程序鎖收到的數據塊和發送方應用程序所發出的數據塊具有對應大小的關係(例如,發送方應用程序交給發送方的TCP供10個數據塊,但接收方的TCP可能只用了4個數據塊就把收到的字節流交付給了上層的應用程序).但接收方應用程序收到的字節流必須和發送方應用程序發送的字節流完全一樣.當然接收方的應用程序必須有能力識別收到的字節流,把它還原成有意義的應用層數據.</li></ol><h3 class="md-end-block md-heading">5.3.2 TCP的連接</h3><p>TCP把<strong>連接作為最基本的抽象</strong>. 每一條TCP連接有兩個端點. TCP 連接的端點叫做<strong>套接字(socket)或者插口</strong>. 根據RFC793的定義:端口號拼接到(conatenated with)IP地址即構成了套接字.</p><h2 class="md-end-block md-heading">5.4 可靠傳輸的工作原理</h2><p>理想的傳輸條件有以下兩個特點:</p><ol start=0><li>傳輸信道不產生差錯.</li><li>不管發送方以多快的速度發送數據,接收方總是來得及處理收到的數據. 在以上理想傳輸條件下,不需要採取任何措施就能夠實現可靠傳輸</li></ol><h3 class="md-end-block md-heading">5.4.1 停止等待協議</h3><ol start=0><li>無差錯情況.</li><li>出現差錯情況.</li><li>確認丟失和確認遲到</li><li>信道利用率</li></ol><h3 class="md-end-block md-heading">5.4.1 連續ARQ協議</h3><p>滑動窗口協議比較複雜,是TCP協議的精髓所在.</p><h2 class="md-end-block md-heading">5.5 TCP報文段的首部格式.</h2><p>TCP雖然是面向字節流的,但TCP傳送的數據單元確實報文段.一個TCP報文段分為首部和數據兩個部分.</p><p>首部不頂部分個字段的意義</p><ol start=0><li>源端口和目的端口</li><li>序號</li><li>確認號</li><li>數據便宜</li><li>保留</li><li>緊急URG</li><li>確認ACK</li><li>推送PSH</li><li>復位RST</li><li>同步SYN</li><li>終止FIN</li><li>窗口</li><li>校驗和</li><li>緊急指針</li><li>選項</li></ol><h2 class="md-end-block md-heading">5.6 TCP可靠傳輸的實現</h2><h3 class="md-end-block md-heading">5.6.1 以字節為單位的滑動窗口</h3><h3 class="md-end-block md-heading">5.6.2 超時重傳時間的選擇</h3><p>TCP採用自適應算法,記錄一個報文段發出的時間,以及受到相應的確認的時間.這兩個時間之差就是<strong>報文段的往返時間RTT</strong>.TCP保留了RTT的一個加權平均往返時間RTTs.</p><h3 class="md-end-block md-heading">5.6.3選擇確認SACK</h3><h2 class="md-end-block md-heading"><br></h2><h2 class="md-end-block md-heading">5.7TCP的流量控制</h2><h3 class="md-end-block md-heading">5.7.1 利用滑動窗口實現流量控制.</h3><p>流量控制(flow control)就是讓發送方的發送速率不要太快,要讓接收方來得及接受. 發送方的發送窗口不能超過接收方給出的接受窗口的數值.</p><h2 class="md-end-block md-heading">5.9TCP的運輸連接管理</h2><p>連接建立,數據傳送 連接釋放. TCP連接建立過程中要解決以下三個問題:</p><ol start=0><li>要使每一方能夠確知對方的存在.</li><li>要允許雙方協商一些參數(如最大窗口值,是否使用窗口擴大選項和時間戳選項及服務質量等)</li><li>能夠對運輸實體資源(如緩存大小,連接表中的項目等)進行分配. TCP連接的建立採用客戶服務器方式.主動發起連接建立的應用進程叫做客戶(client).而被動等待連接建立的應用進程叫做服務器(server).</li></ol><h3 class="md-end-block md-heading">5.9.1 TCP連接的建立</h3><p>為什麼A還要發送一次確認呢,這主要是為了防止已失效的連接請求報文段突然又傳送到了B,而產生錯誤. A發出的第一個連接請求報文沒有丟失,滯留在網絡上,延誤到連接釋放以後的某個時間才到達B.本來這個是早已失效的報文段.但是B收到此失效的連接請求報文段後,就誤認為是A有發出一次新的連接請求.於是就向A發出確認報文段,同意建立連接.假定不採用三次握手,那麼只要B發出確認,新的連接就建立了. 由於現在A並沒有發出建立連接的請求,因此不會理財B的確認.也不會向B發送數據.但是B卻以為新的運輸連接已經建立了,並一直等待A發送數據.B的許多資源就這樣白白浪費的.</p><h3 class="md-end-block md-heading">5.9.2TCP的連接釋放</h3><p>數據傳輸結束後,通信的雙方都可釋放連接.</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>運輸層</a></li><li><a>TCP</a></li><li><a>IP</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html alt=網絡基本概念-TCP/IP架構及各層網絡協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7f834ac140184ca6a079de4d0d3e515c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html title=網絡基本概念-TCP/IP架構及各層網絡協議>網絡基本概念-TCP/IP架構及各層網絡協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/024d3fc2.html alt=TCP/IP報文格式，康康就知道了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/73eecbbd2b0c4f93ad75a83ff43ace41 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/024d3fc2.html title=TCP/IP報文格式，康康就知道了>TCP/IP報文格式，康康就知道了</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/0365df13.html alt=TCP與IP的對比，TCP的報文頭介紹，TCP的三次握手和TCP的安全機制 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f1fd0df30c1c4366be12eef1be8b593b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/0365df13.html title=TCP與IP的對比，TCP的報文頭介紹，TCP的三次握手和TCP的安全機制>TCP與IP的對比，TCP的報文頭介紹，TCP的三次握手和TCP的安全機制</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a2afccb6.html alt="TCP/IP 門禁控制器通訊不上故障排查方法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a2afccb6.html title="TCP/IP 門禁控制器通訊不上故障排查方法">TCP/IP 門禁控制器通訊不上故障排查方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2eb6f16c.html alt="一文讀懂 TCP/IP 網絡模型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c7aa7812af5c4f46b1cfc94a150dc976 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2eb6f16c.html title="一文讀懂 TCP/IP 網絡模型">一文讀懂 TCP/IP 網絡模型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5351d79a.html alt=學習TCP/IP協議之前，你應該先理解OSI開放式互聯參考模型，功倍 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d7d062cd949b4d148ab7f6a0b6af23b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5351d79a.html title=學習TCP/IP協議之前，你應該先理解OSI開放式互聯參考模型，功倍>學習TCP/IP協議之前，你應該先理解OSI開放式互聯參考模型，功倍</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d3de5499.html alt=說說TCP/IP參考模型與OSI七層模型的關係 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ac183e86a25c4c249fa89a3bd6cbeeb6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d3de5499.html title=說說TCP/IP參考模型與OSI七層模型的關係>說說TCP/IP參考模型與OSI七層模型的關係</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48b15feb.html alt=TCP/IP參考模型 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1e7063fc1fad41fdb324668595754ef6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48b15feb.html title=TCP/IP參考模型>TCP/IP參考模型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/42d2a01.html alt=TCP/IP安全：ACL訪問控制列表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/966d9db48c2a496cb8675c8402cd3855 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/42d2a01.html title=TCP/IP安全：ACL訪問控制列表>TCP/IP安全：ACL訪問控制列表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8edbb66.html alt="【乾貨】TCP/IP 及訪問控制列表（ACL）" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8edbb66.html title="【乾貨】TCP/IP 及訪問控制列表（ACL）">【乾貨】TCP/IP 及訪問控制列表（ACL）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1dce693.html alt=TCP/IP協議族（TCP/UDP的區別） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d023d5e0584149758d5d49fba3fd0613 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1dce693.html title=TCP/IP協議族（TCP/UDP的區別）>TCP/IP協議族（TCP/UDP的區別）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1bd1e17.html alt=一文讀懂TCP/IP協議工作原理和工作流程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/ea27784370b9441090baaf9c8cf57977 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1bd1e17.html title=一文讀懂TCP/IP協議工作原理和工作流程>一文讀懂TCP/IP協議工作原理和工作流程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a6fbf04.html alt=這樣的TCP/IP協議，你看懂了嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/009609673911487a82bf5b8b85d972cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a6fbf04.html title=這樣的TCP/IP協議，你看懂了嗎？>這樣的TCP/IP協議，你看懂了嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/13955a3.html alt="TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/8f291e6a61fa4b45a91b81f2589002c5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/13955a3.html title="TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）">TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8da7b9.html alt=TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/250b6d508b7a4694baa0371a1f53a17c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8da7b9.html title=TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別>TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>