<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>'佩奇'，網絡協議報文格式大集合 | 极客快訊</title><meta property="og:title" content="'佩奇'，網絡協議報文格式大集合 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/8b5811fbc54e405d89ff0096fb740b52"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0198cb40.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0198cb40.html><meta property="article:published_time" content="2020-11-14T21:03:08+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:08+08:00"><meta name=Keywords content><meta name=description content="'佩奇'，網絡協議報文格式大集合"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/0198cb40.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>'佩奇'，網絡協議報文格式大集合</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>1、TCP/IP體系結構</h1><p>TCP/IP協議分為四層結構，每一層完成特定的功能，包括多個協議。本課程實驗中相關協議的層次分佈，如下圖所示。</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8b5811fbc54e405d89ff0096fb740b52><p class=pgc-img-caption></p></div><p>這些協議之間的PDU封裝並不是嚴格按照低層PDU封裝高層PDU的方式進行的，上圖顯示了Ethernet幀、ARP分組、IP分組、ICMP報文、TCP報文段、UDP數據報、RIP報文、OSPF報文和FTP報文之間的封裝關係。</p><p>各協議PDU間的封裝關係</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/585d3e7952d9456882ed4e585bc6fb0d><p class=pgc-img-caption></p></div><h1>2、鏈路層協議報文格式</h1><p>2.1、 Ethernet報文格式</p><p>最新的IEEE 802.3標準（2002年）中定義Ethernet幀格式如下：</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e59b5a3850c64311b854191ea3bfb34a><p class=pgc-img-caption></p></div><ul><li>l其中，類型/長度值小於1536（0x0600）時表示數據字段的長度，大於等於1536（0x0600）時表示數據字段的協議類型。類型/長度值0x0800表示幀中封裝的數據為IP分組，類型值0x0806表示幀中封裝的數據為ARP分組。</li><li>Ethernet II類型以太網幀的最小長度為64字節（6＋6＋2＋46＋4）最大長度為1518字節（6＋6＋2＋1500＋4）。其中前12字節分別標識出發送數據幀的源節點MAC地址和接收數據幀的目標節點MAC地址。（注：ISL封裝後可達1548字節，802.1Q封裝後可達1522字節）</li><li>接下來的2個字節標識出以太網幀所攜帶的上層數據類型，如下</li></ul><pre>IPv4: 0x0800ARP:0x0806PPPoE:0x8864802.1Q tag: 0x8100 IPV6: 0x86DDMPLS Label:0x8847</pre><ul><li>在不定長的數據字段後是4個字節的幀校驗序列（Frame. Check Sequence，FCS）</li></ul><p>2.2、802.1q VLAN數據幀(4字節）</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f09906f8fa024f2b8eb98d49ce824f6b><p class=pgc-img-caption></p></div><ul><li>Type：長度為2字節，取值為0x8100，表示此幀的類型為802.1Q Tag幀。</li><li>PRI：長度為3比特，可取0～7之間的值，表示幀的優先級，值越大優先級越高。該優先級主要為QoS差分服務提供參考依據（COS）。</li><li>CFI 字段標識MAC 地址在不同的傳輸介質中是否以標準格式進行封裝，長度為1bit，取值為0 表示MAC 地址以標準格式進行封裝，為1 表示以非標準格式封裝，缺省取值為0</li><li>VLAN Identifier (VID) : 長度12bits，可配置的VLAN ID取值範圍為1～4094。通常vlan 0和vlan 4095預留，vlan1為缺省vlan，一般用於網管</li></ul><p>3.3、PPP幀格式</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e483918336084ce3abccfc7ca73c54f3><p class=pgc-img-caption></p></div><p>PPP報文的內容是指Address、Control、Protocol和Information四個域的內容。各字段的含義如下。</p><ul><li>lFlag域Flag域標識了一個物理幀的起始和結束，該字節為0x7E。</li><li>Address域PPP協議是被運用在點對點的鏈路上，它可以唯一標識對方。因此使用PPP協議互連的兩個通信設備無須知道對方的數據鏈路層地址。所以該字節已無任何意義，按照協議的規定將該字節填充為全1的廣播地址。</li><li>Control域同Address域一樣，PPP數據幀的Control域也沒有實際意義，按照協議的規定通信雙方將該字節的內容填充為0x03。Address和Control域一起表示了此報文為PPP報文，即PPP報文頭為FF03。</li><li>Protocol域協議域可用來區分PPP數據幀中信息域所承載的數據報文的內容。</li></ul><p>Protocol協議域</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3d54120c54f4448d97173b0880e0698f><p class=pgc-img-caption></p></div><ul><li>Information域信息域最大長度是1500字節，其中包括填充域的內容。信息域的最大長度等於PPP協議中MRU（Maximum Receive Unit）的缺省值。</li></ul><p>2.4、 STP協議格式</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7cb022c1d34b4810af6eeb77a7e7997c><p class=pgc-img-caption></p></div><ul><li>目的mac地址 ― 目的地址是一個固定的橋的組播地址（0x0180c2000000）</li><li>源MAC地址 ― 即發送該配置消息的橋MAC地址</li><li>長度/類型 ― 這裡表示幀長</li><li>LLC Header ― 固定的鏈路頭-0x424203</li><li>Payload ― BPDU數據</li></ul><h1>3 網絡層協議報文</h1><p>3.1 IP報文頭</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d5acd80426134291ac2f68ea50b7f88d><p class=pgc-img-caption></p></div><ul><li>類型：IP報文的類型為0x0800；</li><li>Version：4比特；表示版本；目前為4；即0100</li><li>IHL：Internet Header Length 首部長度；佔4比特。是頭部佔32比特的數字，包括可選項。普通IP數據報（沒有任何選項），該字段的值是5，即160比特=20字節。此字段最大值為60字節；</li><li>服務類型（Type of Service ，TOS）字段：佔8比特。其中前3比特為優先權子字段（Precedence，現已被忽略）。第8比特保留未用。第4至第7比特分別代表延遲、吞吐量、可靠性和花費。當它們取值為1時分別代表要求最小時延、最大吞吐量、最高可靠性和最小費用。這4比特的服務類型中只能置其中1比特為1。可以全為0，若全為0則表示一般服務。服務類型字段聲明瞭數據報被網絡系統傳輸時可以被怎樣處理。例如：TELNET協議可能要求有最小的延遲，FTP協議（數據）可能要求有最大吞吐量，SNMP協議可能要求有最高可靠性，NNTP（Network News Transfer Protocol，網絡新聞傳輸協議）可能要求最小費用，而ICMP協議可能無特殊要求（4比特全為0）。實際上，大部分主機會忽略這個字段，但一些動態路由協議如OSPF（Open Shortest Path First Protocol）、IS-IS（Intermediate System to Intermediate System Protocol）可以根據這些字段的值進行路由決策。</li><li>總長度字段：佔16比特。指明整個數據報的長度（以字節為單位）。最大長度為65535字節。</li><li>標誌字段：佔16比特。用來唯一地標識主機發送的每一份數據報。通常每發一份報文，它的值會加1。</li><li>標誌位字段：佔3比特。標誌一份數據報是否要求分段。</li><li>段偏移字段：佔13比特。如果一份數據報要求分段的話，此字段指明該段偏移距原始數據報開始的位置</li><li>生存期（TTL：Time to Live）字段：佔8比特。用來設置數據報最多可以經過的路由器數。由發送數據的源主機設置，通常為32、64、128等。每經過一個路由器，其值減1，直到0時該數據報被丟棄</li><li>協議字段：佔8比特。指明IP層所封裝的上層協議類型，如ICMP（1）、IGMP（2） 、TCP（6）、UDP（17）等</li><li>頭部校驗和字段：佔16比特。內容是根據IP頭部計算得到的校驗和碼。計算方法是：對頭部中每個16比特進行二進制反碼求和。（和ICMP、IGMP、TCP、UDP不同，IP不對頭部後的數據進行校驗）</li><li>源IP地址、目標IP地址字段：各佔32比特。用來標明發送IP數據報文的源主機地址和接收IP報文的目標主機地址</li><li>可選項字段：佔32比特。用來定義一些任選項：如記錄路徑、時間戳等。這些選項很少被使用，同時並不是所有主機和路由器都支持這些選項。可選項字段的長度必須是32比特的整數倍，如果不足，必須填充0以達到此長度要求</li></ul><p>3.2、ARP協議報文</p><div class=pgc-img><img alt='"佩奇"，網絡協議報文格式大集合' onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d300d2e8d72b4b808c86296150efd4e2><p class=pgc-img-caption></p></div><p>以太網類型為0x0806代表ARP協議</p><p>ARP報文格式：</p><p>前四個字段用來指定後四個字段的類型和長度</p><ul><li>硬件地址類型：本地網絡的硬件類型，例如10 Mb 的Ethernet，是以0001 為代碼。</li><li>協議類型：表示ARP 提供解析的協議類型，常為IP 協議， IP 是以0080 為代碼。</li><li>硬件地址長度：表示該類型的硬件地址長度，例如Ethernet 和 Token Ring 為06，而Frame Relay 為02。</li><li>協議地址長度：通常表示IP 位址的長度，IPv4 為04</li><li>OP:操作資源，ARP可以用於其他類型的網絡，可以解析IP地址以外的地址</li></ul></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>網絡</a></li><li><a>協議</a></li><li><a>報文</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/9f8ef1f4.html alt="一文帶你看網絡協議之因特網中的轉發和編址！| 原力計劃" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/S0IOdi2GF5Q4RI style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9f8ef1f4.html title="一文帶你看網絡協議之因特網中的轉發和編址！| 原力計劃">一文帶你看網絡協議之因特網中的轉發和編址！| 原力計劃</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/90f48362.html alt=帶你看網絡協議之因特網中的轉發和編址 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a00aa25e7b3c40dc9f1dfedcc73b804b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/90f48362.html title=帶你看網絡協議之因特網中的轉發和編址>帶你看網絡協議之因特網中的轉發和編址</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2676980f.html alt="網絡傳輸協議 簡介" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1534151551434ddd1d8094c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2676980f.html title="網絡傳輸協議 簡介">網絡傳輸協議 簡介</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/592058ff.html alt=計算機：網絡協議的概念和網絡拓撲結構 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/06f271e3fa2f475c88af210ccce912d5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/592058ff.html title=計算機：網絡協議的概念和網絡拓撲結構>計算機：網絡協議的概念和網絡拓撲結構</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c64f2380.html alt=Wireshark網絡協議分析：解讀常用統計分析工具的應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/56225061181e44beb27acbe790974592 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c64f2380.html title=Wireshark網絡協議分析：解讀常用統計分析工具的應用>Wireshark網絡協議分析：解讀常用統計分析工具的應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dadbacf5.html alt=圖解：常用網絡通信協議結構圖、OSI七層模型數據封裝/拆封 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/3c6d0003e517acbe8dee style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dadbacf5.html title=圖解：常用網絡通信協議結構圖、OSI七層模型數據封裝/拆封>圖解：常用網絡通信協議結構圖、OSI七層模型數據封裝/拆封</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e347b4c.html alt=網絡協議-TCP和UDP最完整的區別介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/4fa7c983-2109-4db9-84ec-5431e01c87ab style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e347b4c.html title=網絡協議-TCP和UDP最完整的區別介紹>網絡協議-TCP和UDP最完整的區別介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7308701.html alt=網絡協議之TCP和UDP class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/50f23be4fe764f69ab2ed27288e88510 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7308701.html title=網絡協議之TCP和UDP>網絡協議之TCP和UDP</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb829a0.html alt=計算機網絡協議(三)——UDP、TCP、Socket class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5d15456a333f4f66984e4b82253ecef3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb829a0.html title=計算機網絡協議(三)——UDP、TCP、Socket>計算機網絡協議(三)——UDP、TCP、Socket</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6ca56e9.html alt=十步告訴你，基於TCP/IP網絡協議的五層網絡協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/07cf70fa679c488189c79020db058234 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6ca56e9.html title=十步告訴你，基於TCP/IP網絡協議的五層網絡協議>十步告訴你，基於TCP/IP網絡協議的五層網絡協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7ee859.html alt=網絡大神眼中的TCP/IP協議與UDP協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/877c47ee03b748b68a9ebdca40e7990b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7ee859.html title=網絡大神眼中的TCP/IP協議與UDP協議>網絡大神眼中的TCP/IP協議與UDP協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2c9be88.html alt=網絡安全常見協議解析：TCP、UDP、HTTP、FTP、SMTP等之間的區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/27ba51ef59a7455eb6c9b88b144a03bd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2c9be88.html title=網絡安全常見協議解析：TCP、UDP、HTTP、FTP、SMTP等之間的區別>網絡安全常見協議解析：TCP、UDP、HTTP、FTP、SMTP等之間的區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/72c4d26.html alt=通俗易懂網絡協議（TCP/IP概述） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/457ebb7141584994bcb2b292cfa21c0f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72c4d26.html title=通俗易懂網絡協議（TCP/IP概述）>通俗易懂網絡協議（TCP/IP概述）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d0b925d.html alt=網絡協議之TCP/IP協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15220733154077cad6b8990 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d0b925d.html title=網絡協議之TCP/IP協議>網絡協議之TCP/IP協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html alt=光纜——未來網絡主導 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e75c1afe12354a93bad8495ad1057693 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html title=光纜——未來網絡主導>光纜——未來網絡主導</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>