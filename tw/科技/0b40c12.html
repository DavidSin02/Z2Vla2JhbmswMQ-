<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點 | 极客快訊</title><meta property="og:title" content="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/830822a66103438d9859bc2318cb52df"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0b40c12.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0b40c12.html><meta property="article:published_time" content="2020-10-29T21:06:59+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:59+08:00"><meta name=Keywords content><meta name=description content="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/0b40c12.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/830822a66103438d9859bc2318cb52df><p class=pgc-img-caption></p></div><p><br></p><p>有關 Selenium 的介紹在網上實在是太多了，總結起來就是一個目前在 Web 自動化方面運用最為廣泛的一個開源、無瀏覽器要求、可支持多語言、設計測試用例非常靈活的自動化測試框架。<br></p><p><strong>Selenium架構及核心組件</strong></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/623f5bf193724fcfa5c02941e324651f><p class=pgc-img-caption></p></div><p><br></p><p>瞭解 Selenium 之前，我們需要了解 Selenium 的架構及核心組件。俗話說：『工欲善其事，必先利其器』。只有先了解架構及核心組件，才能瞭解該如何正確使用這個工具。才能讓『它』成為我們工作中的一把利器，幫助我們解決難題。<br></p><p>Selenium架構</p><ul><li>client：每個語言都有自己的庫，提供不同的 API 供用戶去調用完成相關的自動化測試行為；這裡調用有關 web 自動化的 API 到 selenium 的 server<br></li><li>selenium：用於將接收到的請求傳給瀏覽器的driver，實施調用，實際上 selenium 就是瀏覽器driver的一個封裝</li><li>driver：針對瀏覽器的一個驅動引擎，每個瀏覽器都有自己的驅動（一般由各個瀏覽器廠商提供），可以通過驅動瀏覽器的API來完成對應操作</li><li>browser：瀏覽器</li></ul><p><br></p><p>Selenium核心組件</p><ul><li>selenium webdriver client （目前主要使用的，依賴於drivers）</li><li>selenium drivers (瀏覽器驅動，被webdriver client 所依賴)</li><li>selenium1 selenium-rc (已棄用)</li><li>selenium IDE (入門錄製工具-本人不常用，僅瞭解過)</li><li>selenium grid （可操縱瀏覽器集群，也可操作App）<br></li></ul><p><strong>Selenium安裝</strong></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/623f5bf193724fcfa5c02941e324651f><p class=pgc-img-caption></p></div><p>第一步：組件安裝</p><p><br></p><ul><li>安裝瀏覽器 ：web自動化，沒瀏覽器好像說不過去了，先裝瀏覽器是必須的</li><li>安裝selenium driver，加入環境變量path ：環境變量，老生常談的問題了</li><li>安裝selenium-client ：安裝到這步後就可以開始web自動化了,不同語言的根據需要進行安裝，如Java的可以使用maven,目前建議使用穩定版本的3.141.59：</li><li>安裝selenium-ide : 新手入門，我在這裡就不去演示了，需要入門瞭解的小夥伴可以查閱資料哈~</li></ul><pre><code>//此處為Selenium-client代碼&lt;dependency&gt;     &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;     &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;    &lt;version&gt;3.141.59&lt;/version&gt;&lt;/dependency&gt;</code></pre><h3 class=pgc-h-arrow-right>第二步：ChromeDriver下載</h3><p>筆者這裡主要用的是Chrome瀏覽器，所以就以Chrome為例 。<br>1）先去到selenium官網的下載中心http://www.seleniumhq.org/download/；往下翻，翻到如下圖的位置：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b9f18d82eff046ddae57128392712db5><p class=pgc-img-caption></p></div><p>2）進去後找到與你當前Chrome瀏覽器版本對應的driver版本，下載對應系統的driver(需要梯子，如果沒有繼續往下看)</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7fc7eb0e96114e8cbb3ee58e8e181975><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ba503ed7f7044149927e7b7342fb1c38><p class=pgc-img-caption></p></div><p>如果你沒有梯子，無法去官網下載driver的話，這裡提供一個淘寶的鏡像，在國內的網絡就可以直接下載 https://npm.taobao.org/mirrors/chromedriver<br></p><p>3）下載完成後解壓到自己指定的路徑即可，別忘了將路徑添加到環境變量中(這裡以Mac為例)</p><pre><code>$ echo 'export PATH=$PATH:chrome' &gt;&gt; ~/.bash_profile# chrome改為chromedriver的存放路徑$ tail -1 ~/.bash_profile</code></pre><p><br></p><p><strong>元素定位</strong></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/623f5bf193724fcfa5c02941e324651f><p class=pgc-img-caption></p></div><p><br></p><h3 class=pgc-h-arrow-right>元素定位是做UI自動化最基礎也是最重要的部分之一了，搞定了元素定位，算是推開了web自動化的大門，即可走進web自動化的世界。</h3><p><br></p><p>現在我們用一個『偵探』的眼光，把元素定位當成一個『刑偵手段』，來看看如何利用元素定位這個刑偵手段，偵破一個『犯罪現場』。</p><p>首先，我們需要認識元素。元素是可識別區分的屬性。Selenium的WebDriver一共提供了九種定位方法，其中最常用的是前八種，先來看看在Java中的對應關係</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b3427e2eef76461cb5f21a04b13b6fa8><p class=pgc-img-caption></p></div><p><br></p><p>如上表所示，web自動化就是靠著HTML的各種標籤、屬性等來定位元素來進行操作，那麼這些定位方式怎麼理解？我們可以參考一個犯罪案例：</p><p>警察正在抓捕一名人犯罪嫌疑人，要確認犯罪嫌疑人的身份就可以根據嫌疑人的姓名、別名、指紋、身份證號、手機號等可識別區分的屬性；同樣的，元素自身也有id、classname、tagname、name等屬性可用於區分定位；</p><p>此嫌疑人的反偵察能力比較強，隱藏了自己的身份特徵，無法根據其自身的屬性進行定位，那麼就可以根據其經常出沒的場所來進行定位抓捕，例如去某省某市的某個酒吧裡，去某縣某村某號的一個住所去；同樣的，元素自身也可以通過Xpath和CSS這種標籤的層級位置來定位元素。</p><p>到目前為止，嫌犯依然在逃，為了躲避偵查，曾經的常去場所都不再接觸，高手！這是高手！苦苦的等待，最終辦案民警們終於有了線索(接下來該辦案民警出場講述轉機了~)：由於犯罪嫌疑人是個大孝子且十分疼愛自己的妻兒，於是在某個地方偷偷的給父母通了電話，去學校見了妻兒；最終根據其家人提供的信息暴露自己，被定位抓獲！同樣的，元素也可以通過與其相關的元素來進行定位，我們就可以用CSS或Xpath來進行父子，兄弟等節點位置的方式來進行定位了。</p><p><br></p><p><strong>案件告破，案件總結-定位元素的方法</strong></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/623f5bf193724fcfa5c02941e324651f><p class=pgc-img-caption></p></div><p>Warning！ 下面在介紹各種定位方式的時候還會順便補充CSS的定位方式作為對比，首次接觸的話可能會因為看不懂而引起不適，不用擔心，可以先忽略，後面會專門介紹CSS的，待了解了CSS定位方式後再回來學習</p><p>1.By ID - 身份證</p><p><br></p><p>現在我們要定位testerhome首頁右上角的歡迎，如下圖：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/58cd2e09a24546889e6bee0e9187adcf><p class=pgc-img-caption></p></div><p>打開Chrome開發者工具，選中元素進行查看，元素是有id的，可以根據id來定位：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/33612a9204684c85a124b3b4a3b7e1ac><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.id("cornertip"));driver.findElement(By.cssSelector("#cornertip"));  //CSS</code></pre><p>小技巧：我們可以在Chrome的開發者工具中Control+F搜索框中對我們要定位的元素進行搜索來確認定位是否正確，支持CSS和xpath，如上圖所示</p><p>2.By Class Name - 別名</p><p>要定位testerhome首頁的搜索框，就可以根據ClassName，如下圖：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3e49d1b2514f4c5685e5916a85f215f6><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.className("form-control"));driver.findElement(By.cssSelector(".form-control"));  //CSS</code></pre><p>3.By Name - 姓名</p><p><br></p><p>依然定位首頁的搜索框，可通過name和CSS定位：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e7d30f80266345d2b98dc3cd65fc1b88><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.className("q"));driver.findElement(By.cssSelector("[name='q']"));  //CSS</code></pre><p>4.By Tag Name</p><p>依然是定位testerhome首頁的搜索框，通過tagname ：input來定位</p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.tagName("input"));driver.findElement(By.cssSelector("input"));  //CSS</code></pre><p>5.By Link Text</p><p>定位testerhome首頁一週最熱的帖子，通過linktest和CSS:</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/aa14166e650e4e2b9f8bc00acadee7f2><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.linkText("[深圳][頭條] 招聘測試 leader"));</code></pre><p>6. By Partial Link Text</p><p>定位testerhome首頁一週最熱的帖子，通過partialLinkText和CSS</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d99c962a6ca84031819ee11d5e94dc9e><p class=pgc-img-caption></p></div><p><br></p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.partialLinkText("[深圳][頭條]"));driver.findElement(By.cssSelector("[title~='[深圳][頭條]']"));  //CSS</code></pre><p>7.Using JavaScript</p><p>有時候我們的頁面元素被遮擋導致無法定位，需要滾動屏幕進行可視化，便可以用JS來操作：<br></p><pre><code>((JavascriptExecutor)(driver)).executeScript("window.scroll(0, 1200)");</code></pre><p>8.By Xpath</p><p>XPath 是一門在 XML 文檔中查找信息的語言。XPath 可用來在 XML 文檔中對元素和屬性進行遍歷,而HTML又正好可以看做是XML的一種實現，因此我們便可以用xpath來定位元素啦</p><ul><li>問題：一般剛開始學定位的時候很多人都會想，都有了上面那麼多種定位方式了，還要xpath幹嗎？感覺還挺複雜的樣子（和其他的定位方式相比卻是要複雜那麼一丟丟）~</li><li><strong>答：</strong>那是因為並不是所有的元素都“如您所願”，就如上面警察抓捕罪犯的例子，有時候元素並不能直接提供給我們想要的定位<br></li></ul><p>常用路徑表達式：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/14a9ddad5d9c46c48649bf89acd09b34><p class=pgc-img-caption></p></div><p><br>舉幾個簡單的栗子<br></p><ul><li>1）絕對路徑定位：<br>做測試開發或者有編程經驗的小夥伴一定對絕對路徑不陌生，通過絕對路徑就是使用元素在頁面上的完整路徑。</li></ul><p>還是以定位一週內的最熱門帖子為例，在Chrome瀏覽器的開發者工具欄中，找到要定位元素的HTML位置，右擊會出現Copy full Xpath,點擊它</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e4b5acccfe5f4bfb9f334add6999ebab><p class=pgc-img-caption></p></div><p>然後我們把複製到的內容黏貼後如下：</p><pre><code>/html/body/div[2]/div[2]/div/div[2]/div[1]/div[2]/div[1]/div/a</code></pre><p>寫到代碼裡就是這樣：</p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.xpath("/html/body/div[2]/div[2]/div/div[2]/div[1]/div[2]/div[1]/div/a"));</code></pre><p>可以用又臭又長來形容了，那麼細心的小夥伴會發現還有一個Copy xpath，複製黏貼後內容如下：</p><pre><code>//*[@id="main"]/div/div[2]/div[1]/div[2]/div[1]/div/a</code></pre><p>看起來好像簡化了點，還用上了xpath的語法，但是實際上也沒優化多少，依然是通過標籤的層級關係，從最外層一級一級的往下找，也不是很可取；</p><p>其實不可取的最主要原因還是這種絕對路徑的方式在實際自動化過程中很不穩定，界面的位置發生任何一丟丟的變化，那元素的絕對路徑就很可能變了，也就無法準確定位了。</p><p>因此我們就要用元素的屬性或者屬性和層級關係相結合的方式來定位，這樣就算頁面變化，只要變化不是非常大，依然可以通過元素的屬性和相對的位置來進行定位，受頁面位置變化的影響就要小的多了</p><p>2）元素屬性定位：</p><p>定位testerhome首頁的歡迎，利用xpath語法通過id來定位：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/eda77359a5124f8db5c8bcf43aefaf23><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.xpath("//div[@id='c-button']"));</code></pre><p><br></p><p>語法解釋：//div表示從當前頁面的div標籤開始匹配，@id表示用id屬性值，=後面跟著具體的id值</p><p>3）屬性和層級關係定位：</p><p>上面的通過屬性定位完全可以用WebDriver的API或者CSS搞定，xpath最大的價值就是上面說的當元素沒有直接可定位的屬性時，它的價值才得以完美體現：</p><p>現在我們要定位”七日最熱 Top10“這個標題，它只有class屬性，我們按照className來進行定位會發現如下情況：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/efc5ad5235794f228acc9456fc0d75f1><p class=pgc-img-caption></p></div><p>沒錯，出現了10個可被定位到的元素，因為有很多的標題都有相同的classname，並且沒有其他如id，name等屬性了；沒辦法了，我們就要往上找，我們發現往上2個div標籤節點，classname為”col-md-3 home-side-bar“的標籤節點是唯一的：</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ff248edc602e41808905216b0877abcf><p class=pgc-img-caption></p></div><p>現在我們就利用Xpath先定位到唯一的那個class，然後往下找兩層div，再取兩層後div中的第一個就可以了</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/810e700df5eb4eb3b7955082263cd1c4><p class=pgc-img-caption></p></div><p><br></p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.xpath("//*[@class='col-md-3 home-side-bar']/div[1]/div[1]"));</code></pre><p>4）使用Xpath運算符定位：</p><p>Xpath還支持運算符，如果元素的一個屬性無法定位，需要使用多個屬性時可以使用Xpath運算符將多個屬性連接起來一起定位</p><p>Xpath常用運算符</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b05d8486622247acb5cb1244596f8f2b><p class=pgc-img-caption></p></div><p><br></p><p>現在需要定位testhome社區首頁一篇最新帖子的作者，作者名為“烏雲烏雲快走開” 如果我們只依靠className的話會發現有28個相同屬性的元素，如下圖：</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d2e91d351d8149e9ae92b7e62ef0423f><p class=pgc-img-caption></p></div><p><br></p><p>繼續觀察會發現還有一個叫做data-name的屬性，屬性值就是作者的姓名，我們通過and符將兩個屬性連接後便發現可以精準定位到指定元素了：</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cad577033b6f4be5b3b59a409a2fb8f2><p class=pgc-img-caption></p></div><p><br></p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.xpath("//a[@class='user-name' and @data-name='烏雲烏雲快走開']"));</code></pre><p>5）使用Xpath函數定位：</p><p>Xpath還提供了很多函數來供我們更靈活的定位，這裡以我常用的一個contains函數為例</p><p>我們依舊來定位testerhome首頁七日最熱貼的首貼“[深圳][頭條] 招聘測試 leader”，通過對DOM的分析可以看到title屬性的內容就是帖子的標題，我們用此屬性值的一部分來作為定位條件：</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4fd75984643947de914ba3693ea92881><p class=pgc-img-caption></p></div><p><br></p><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.xpath("//*[contains(@title,'[深圳][頭條]')]"));</code></pre><p>關於Xpath的語法使用還有很多，包括還有很多函數，具體的可參考W3C進行學習：https://www.w3school.com.cn/xpath/xpath_syntax.asp</p><p>9.By CSS</p><p><br></p><blockquote><p>Web頁面的樣式通常保存在外部的 .css 文件中。通過僅僅編輯一個簡單的 CSS 文檔，外部樣式表使你有能力同時改變站點中所有頁面的佈局和外觀。因此我們可以利用CSS的選擇器來定位頁面綁定了屬性的元素，從而為我們的selenium所用</p></blockquote><p>從上面的文章一路看下來的小夥伴應該發現了，在介紹xpath之前的定位方式時，都另外還寫了一個CSS的定位方式，沒錯，就是它，沒注意的小夥伴可以返回去看一看；</p><p>推薦使用CSS： CSS也是我們在Web自動化中最推薦使用的一種方式，原因又如下幾種：</p><ul><li>例如id這種元素在一個頁面中可能並不唯一，並且很有可能是前端的框架自動生成的，研發人員並未對其進行維護，隨時可能變；而CSS是前端開發最常用的一種維護方式，對於我們開發和維護自動化用例也更為清晰和方便</li><li>大部分定位都可以用CSS來解決</li><li>CSS的寫法相較於Xpath要更為簡潔</li></ul><p>常用的CSS選擇器語法：</p><p><br></p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/71a7af85363d4ade89920c016cf1d55e><p class=pgc-img-caption></p></div><p><br></p><p>先將前面已經演示過的CSS語法在這來個小的彙總：</p><ul><li>通過id</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector("#cornertip"));  //CSS</code></pre><p><br></p><ul><li>通過className</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector(".form-control"));</code></pre><p><br></p><ul><li>通過name</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector("[name='q']"));</code></pre><p><br></p><ul><li>通過tag name</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector("input"));</code></pre><p><br></p><ul><li>通過link text</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector("a[title='[深圳][頭條] 招聘測試 leader']"));</code></pre><p><br></p><ul><li>通過partialLinkText</li></ul><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector("[title~='[深圳][頭條]']"));</code></pre><p><br></p><p>另外CSS也可以將屬性和層級關係組合在一起進行使用，現在我們以這種組合方式來定位testerhome社區置頂帖的第一篇帖子：</p><div class=pgc-img><img alt="乾貨 | 掌握 Selenium 元素定位，解決 Web 自動化測試痛點" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/970ddb801056432d9fe2300f87fe9903><p class=pgc-img-caption></p></div><pre><code>WebDriver driver = new ChromeDriver();driver.findElement(By.cssSelector(".panel-heading+div&gt;div&gt;div.topic-20857"));</code></pre><p>簡要說明： .panel-heading：class值為panel-heading +div : 後面緊接著的div >div：後面所有子的div div.topic-20857：class名為topic-20857的div標籤</p><p>（文章來源於霍格沃茲測試學院）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>乾貨</a></li><li><a>Selenium</a></li><li><a>解決</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/03c9ffb.html alt=乾貨！幫你解決外牆保溫修補技術難題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/361403e10ac04cb08f02f06074a9d704 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03c9ffb.html title=乾貨！幫你解決外牆保溫修補技術難題>乾貨！幫你解決外牆保溫修補技術難題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/204d163e.html alt="五毛錢解決 蘋果 AirPods容易掉的問題" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/61600003f2800f627a0d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/204d163e.html title="五毛錢解決 蘋果 AirPods容易掉的問題">五毛錢解決 蘋果 AirPods容易掉的問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/efdb7210.html alt=乾貨丨光纖跳線類型、尾纖類型（附PPT全文） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/cb29513613c245eb85b248ac90e3b149 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/efdb7210.html title=乾貨丨光纖跳線類型、尾纖類型（附PPT全文）>乾貨丨光纖跳線類型、尾纖類型（附PPT全文）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24b0e60e.html alt=乾貨|西大學長教你玩轉計算機07——圖像導數實戰 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/74830a84f854431294e917cf61f29fb7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24b0e60e.html title=乾貨|西大學長教你玩轉計算機07——圖像導數實戰>乾貨|西大學長教你玩轉計算機07——圖像導數實戰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/02402c9e.html alt=「乾貨」藍牙耳機編碼（SBC、AAC、aptX）都有啥區別？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/feb0ab00-bb82-4c38-9e77-e3570f56137d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/02402c9e.html title=「乾貨」藍牙耳機編碼（SBC、AAC、aptX）都有啥區別？>「乾貨」藍牙耳機編碼（SBC、AAC、aptX）都有啥區別？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ce442e1f.html alt=【購房乾貨】層高和淨高的區別？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ba8f2c776647469baae689a0da1b401d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ce442e1f.html title=【購房乾貨】層高和淨高的區別？>【購房乾貨】層高和淨高的區別？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d98984a.html alt=重磅乾貨！柯春曉談“世界一流企業的創新生態與知識創新服務業” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2211f4f2f5c349ffa46e9937b47c9f39 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d98984a.html title=重磅乾貨！柯春曉談“世界一流企業的創新生態與知識創新服務業”>重磅乾貨！柯春曉談“世界一流企業的創新生態與知識創新服務業”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac4494ba.html alt=乾貨｜機械行業面試題大整合，興許哪天就用上了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4f9b97c36b5848f4af9c56ac14d665cf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac4494ba.html title=乾貨｜機械行業面試題大整合，興許哪天就用上了>乾貨｜機械行業面試題大整合，興許哪天就用上了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/652f4ceb.html alt=智慧電廠乾貨｜火電燃煤機組APS啟動步序設計管窺 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/RsEtY3nI5h4LXq style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/652f4ceb.html title=智慧電廠乾貨｜火電燃煤機組APS啟動步序設計管窺>智慧電廠乾貨｜火電燃煤機組APS啟動步序設計管窺</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bfcc99b0.html alt=智慧電廠乾貨｜火電燃煤機組APS邏輯步序設計管窺：停機步序設計點評 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/RsEtY3nI5h4LXq style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bfcc99b0.html title=智慧電廠乾貨｜火電燃煤機組APS邏輯步序設計管窺：停機步序設計點評>智慧電廠乾貨｜火電燃煤機組APS邏輯步序設計管窺：停機步序設計點評</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e1ab8af.html alt=乾貨｜你知道像素和分辨率的關係嗎？（轉載） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1538281328795ef3472794a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e1ab8af.html title=乾貨｜你知道像素和分辨率的關係嗎？（轉載）>乾貨｜你知道像素和分辨率的關係嗎？（轉載）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38ae079e.html alt=乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/b2e4d031-2bd9-4ad0-83b1-b4efc2c7cdb5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38ae079e.html title=乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！>乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7d8b2470.html alt=固定翼乾貨教學（一）|滾轉技能的前置——側飛 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0db847e70bb246fa984b944ad03c867c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7d8b2470.html title=固定翼乾貨教學（一）|滾轉技能的前置——側飛>固定翼乾貨教學（一）|滾轉技能的前置——側飛</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/56844b1a.html alt=乾貨！鋼結構焊接中局部變形的預防措施 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2257712ee72b4328897d67ef1b3090ce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/56844b1a.html title=乾貨！鋼結構焊接中局部變形的預防措施>乾貨！鋼結構焊接中局部變形的預防措施</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/60684aec.html alt=刀具斷屑不可靠的原因分析及解決方法，建議收藏！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f407c10bcc734093ba560997011073c3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/60684aec.html title=刀具斷屑不可靠的原因分析及解決方法，建議收藏！>刀具斷屑不可靠的原因分析及解決方法，建議收藏！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>