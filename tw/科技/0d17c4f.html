<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「硬見小百科」單片機中斷系統 | 极客快訊</title><meta property="og:title" content="「硬見小百科」單片機中斷系統 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8ec9b20334bf4852a4fa5c94cc98b877"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0d17c4f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0d17c4f.html><meta property="article:published_time" content="2020-10-29T20:50:02+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:02+08:00"><meta name=Keywords content><meta name=description content="「硬見小百科」單片機中斷系統"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/0d17c4f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「硬見小百科」單片機中斷系統</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=「硬見小百科」單片機中斷系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8ec9b20334bf4852a4fa5c94cc98b877><p class=pgc-img-caption></p></div><p><strong>單片機中斷系統的概念</strong></p><p>什麼是中斷，我們從一個生活中的例程引入。</p><p>你正在家中看書，突然電話鈴響了，你放下書本，去接電話，和來電話的人交談，然後放下電話，回來繼續看你的書。這就是生活中的“中斷”的現象，就是正常的工作過程被外部的事件打斷了。仔細研究一下生活中的中斷，對於我們學習單片機的中斷也很有好處。</p><p>第一、什麼可經引起中斷。生活中很多事件能引起中斷：有人按了門鈴了，電話鈴響了，你的鬧鐘鬧響了，你燒的水開了….等等諸如此類的事件，我們把能引起中斷的稱之為中斷源。<strong>單片機中也有一些能引起中斷的事件，8031中一共有5個：兩個外部中斷，兩個計數/定時器中斷，一個串行口中斷。</strong></p><p>第二、中斷的嵌套與優先級處理。設想一下，我們正在看書，電話鈴響了，同時又有人按了門鈴，你該先做那樣呢？如果你正是在等一個很重要的電話，你一般不會去理會門鈴的，而反之，你正在等一個重要的客人，則可能就不會去理會電話了。如果不是這兩者（即不等電話，也不是等人上門），你可能會按你常常的習慣去處理。總之這裡存在一個優先級的問題，單片機中也是如此，也有優先級的問題。優先級的問題不僅僅發生在兩個中斷同時產生的情況，也發生在一箇中斷已產生，又有一箇中斷產生的情況，比如你正接電話，有人按門鈴的情況，或你正開門與人交談，又有電話響了情況。考慮一下我們會怎麼辦吧。</p><p>第三、中斷的響應過程。當有事件產生，進入中斷之前我們必須先記住現在看書的第幾頁了，或拿一個書籤放在當前頁的位置，然後去處理不一樣的事情（因為處理完了，我們還要回來繼續看書）：電話鈴響我們要到放電話的地方去，門鈴響我們要到門那邊去，也說是不一樣的中斷，我們要在不一樣的地點處理，而這個地點常常還是固定的。計算機中也是採用的這種辦法，五個中斷源，每個中斷產生後都到一個固定的地方去找處理這個中斷的程序，當然在去之前首先要保存下面將執行的指令的地址，以便處理完中斷後回到原來的地方繼續往下執行程序。具體地說，中斷響應能分為以下幾個步驟：1、保護斷點，即保存下一將要執行的指令的地址，就是把這個地址送入堆棧。2、尋找中斷入口，根據5個不一樣的中斷源所產生的中斷，查找5個不一樣的入口地址。以上工作是由計算機自動完成的，與編程者無關。在這5個入口地址處存放有中斷處理程序（這是程序編寫時放在那兒的，如果沒把中斷程序放在那兒，就錯了，中斷程序就不能被執行到）。3、執行中斷處理程序。4、中斷返回：執行完中斷指令後，就從中斷處返回到主程序，繼續執行。</p><p><strong>MCS-51單片機中斷系統的結構</strong></p><p>5箇中斷源的符號、名稱及產生的條件如下。</p><p><strong>INT0</strong>：外部中斷0，由P3．2端口線引入，低電平或下跳沿引起。</p><p><strong>INT1</strong>：外部中斷1，由P3．3端口線引入，低電平或下跳沿引起。</p><p><strong>T0</strong>：定時器／計數器0中斷，由T0計滿回零引起。</p><p><strong>T1</strong>：定時器／計數器l中斷，由T1計滿回零引起。</p><p><strong>TI／RI</strong>：串行I／O中斷，串行端口完成一幀字符發送／接收後引起。</p><p>整個中斷系統的結構框圖見下圖所示。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=「硬見小百科」單片機中斷系統 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/25ad517ec6e94e90ad7b1503fa594475><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-center>&lt;51單片機中斷系統結構></p><p>如圖所示，由與中斷有關的特殊功能寄存器、中斷入口、次序查詢邏輯電路等組成，包括5箇中斷請求源，4個用於中斷控制的寄存器IE、IP、ECON和SCON來控制中斷類弄、中斷的開、關和各種中斷源的優先級確定。</p><p><strong>中斷請求源</strong></p><p>（1）<strong>外部中斷請求源</strong>：</p><p>即外中斷0和1，經由外部管腳引入的，在單片機上有兩個管腳，名稱為INT0、INT1，也就是P3.2、P3.3這兩個管腳。在內部的TCON中有四位是與外中斷有關的。</p><p>IT0：INT0觸發方式控制位，可由軟件進和置位和復位，IT0=0，INT0為低電平觸發方式，IT0=1，INT0為負跳變觸發方式。這兩種方式的差異將在以後再談。</p><p>IE0：INT0中斷請求標誌位。當有外部的中斷請求時，這位就會置1（這由硬件來完成），在CPU響應中斷後，由硬件將IE0清0。</p><p>IT1、IE1的用途和IT0、IE0相同。</p><p>（2）<strong>內部中斷請求源TF0</strong>：</p><p>定時器T0的溢出中斷標記，當T0計數產生溢出時，由硬件置位TF0。當CPU響應中斷後，再由硬件將TF0清0。</p><p>TF1：與TF0類似。</p><p>TI、RI：串行口發送、接收中斷，在串行口中再講解。</p><p>中斷允許寄存器IE在MCS－51中斷系統中，中斷的允許或禁止是由片內可進行位尋址的8位中斷允許寄存器IE來控制的。</p><p><strong>中斷系統的控制寄存器</strong></p><p>中斷系統有兩個控制寄存器IE和IP，它們分別用來設定各個中斷源的打開／關閉和中斷優先級。此外，在TCON中另有4位用於選擇引起外部中斷的條件並作為標誌位。</p><p><strong>1．中斷允許寄存器--IE</strong></p><p>IE在特殊功能寄存器中，字節地址為A8H，位地址(由低位到高位)分別是A8H-AFH。</p><p>IE用來打開或關斷各中斷源的中斷請求，基本格式如下圖1所示：</p><div class=pgc-img><img alt=「硬見小百科」單片機中斷系統 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ead045c9d0734a99ac38f279ed3c6d42><p class=pgc-img-caption></p></div><p class=ql-align-center>圖1</p><p>EA：全局中斷允許位。EA＝0，關閉全部中斷；EA＝1，打開全局中斷控制，在此條件下，由各個中斷控制位確定相應中斷的打開或關閉。</p><p>×：無效位。</p><p>ES：串行I／O中斷允許位。ES＝1，打開串行I／O中斷；ES＝0，關閉串行I／O中斷。</p><p>ETl：定時器／計數器1中斷允許位。ETl＝1，打開T1中斷；ETl＝O，關閉T1中斷。</p><p>EXl：外部中斷l中斷允許位。EXl＝1，打開INT1；EXl＝0，關閉INT1。</p><p>ET0：定時器／計數器0中斷允許位。ET0＝1，打開T0中斷；ET0＝0，關閉TO中斷。</p><p>EXO：外部中斷0中斷允許位。Ex0＝1，打開INT0;EX0=0,關閉INT0.</p><p><strong>2、中斷優先寄存器--IP</strong></p><p>IP在特殊功能寄存器中，字節地址為B8H，位地址(由低位到高位)分別是B8H一BFH,IP用來設定各個中斷源屬於兩級中斷中的哪一級，IP的基本格式如下圖2所示：</p><div class=pgc-img><img alt=「硬見小百科」單片機中斷系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d3acc58786e04bbf958570be0ca6fa84><p class=pgc-img-caption></p></div><p class=ql-align-center>圖2</p><p>×：無效位。</p><p>PS：串行I／O中斷優先級控制位。PS＝1，高優先級；PS＝0，低優先級。</p><p>PTl：定時器／計數器1中斷優先級控制位。PTl＝1，高優先級；PTl＝0，低優先級。</p><p>Pxl：外部中斷1中斷優先級控制位。Pxl＝1，高優先級；PXl＝O，低優先級。</p><p>PT0：定時器／計數器o中斷優先級控制位。PT0＝1，高優先級；PTO＝0，低優先級。</p><p>Px0：外部中斷0中斷優先級控制位。Px0＝1，高優先級；Px0＝0，傷優先級。</p><p>在MCS-51單片機系列中，高級中斷能夠打斷低級中斷以形成中斷嵌套；同級中斷之間，或低級對高級中斷則不能形成中斷嵌套。若幾個同級中斷同時向CPU請求中斷響應，則CPU按如下順序確定響應的先後順序：</p><p><strong>INT0一T0---INT1一T1一RI／T1.</strong></p><hr><p><strong>以上所有信息僅作為學習交流使用，不作為任何學習和商業標準。若您對文中任何信息有異議，歡迎隨時提出，謝謝！</strong></p><p class=ql-align-justify><strong>關於雲創硬見</strong></p><p class=ql-align-justify>雲創硬見是國內最具特色的電子工程師社區，融合了行業資訊、社群互動、培訓學習、活動交流、設計與製造分包等服務，以開放式硬件創新技術交流和培訓服務為核心，連接了超過30萬工程師和產業鏈上下游企業，聚焦電子行業的科技創新，聚合最值得關注的產業鏈資源， 致力於為百萬工程師和創新創業型企業打造一站式公共設計與製造服務平臺。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>硬見</a></li><li><a>單片</a></li><li><a>機中斷</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/396d97d.html alt=51單片機中斷學習 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153051381644548d5075dc6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/396d97d.html title=51單片機中斷學習>51單片機中斷學習</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b2ad775.html alt=單片機中斷方面的知識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/21545b4d54da41559093fb4a5dd95785 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b2ad775.html title=單片機中斷方面的知識>單片機中斷方面的知識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a11df0e.html alt=【硬見小百科】PCB生產工藝之焊接方法簡介（二） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/94aaedb086714088a3e814620d210946 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a11df0e.html title=【硬見小百科】PCB生產工藝之焊接方法簡介（二）>【硬見小百科】PCB生產工藝之焊接方法簡介（二）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1ae01e8c.html alt=「硬見小百科」半導體與二極管的趣味分享 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/69578c33e375484b8456b26979a4630c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1ae01e8c.html title=「硬見小百科」半導體與二極管的趣味分享>「硬見小百科」半導體與二極管的趣味分享</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9445b884.html alt=單片機中的數據存儲器ram class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/bad477a7-f963-4822-870a-02c620806ccf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9445b884.html title=單片機中的數據存儲器ram>單片機中的數據存儲器ram</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95158d9c.html alt=多種單片機結構和原理講解！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fe498059ad344f5cb66e9fc769da1b8f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95158d9c.html title=多種單片機結構和原理講解！>多種單片機結構和原理講解！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b56116d4.html alt=教你用單片機驅動LED數碼管顯示數字0到9 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d2931e4f95bd46408dccf2a18f8cfa83 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b56116d4.html title=教你用單片機驅動LED數碼管顯示數字0到9>教你用單片機驅動LED數碼管顯示數字0到9</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3775731a.html alt=51單片機用彙編語言實現程序跳轉表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fd151b82a9ab463181558fdbe0bd7d68 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3775731a.html title=51單片機用彙編語言實現程序跳轉表>51單片機用彙編語言實現程序跳轉表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7edacb46.html alt=Stm32單片機開發KEIL啟動文件彙編語言詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9a63184582d34eebb5e951834c301311 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7edacb46.html title=Stm32單片機開發KEIL啟動文件彙編語言詳解>Stm32單片機開發KEIL啟動文件彙編語言詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f31cda41.html alt=單片機入門-要從彙編開始 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fb78707d8e744a079fcb4c3a1ada759c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f31cda41.html title=單片機入門-要從彙編開始>單片機入門-要從彙編開始</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d96e488.html alt=如何弄懂單片機時序_關於單片機時序分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ce005f4cc8d74bc5bd37acf5605f746c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d96e488.html title=如何弄懂單片機時序_關於單片機時序分析>如何弄懂單片機時序_關於單片機時序分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/163210f7.html alt=「硬見小百科」pcb的地線，電源線，信號線 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3689e03fcd1941bea0a9a55107d11b83 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/163210f7.html title=「硬見小百科」pcb的地線，電源線，信號線>「硬見小百科」pcb的地線，電源線，信號線</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/9ae3d2fc.html alt=單片機偷天系列之初窺門道 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153873672441542eeeba929 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/9ae3d2fc.html title=單片機偷天系列之初窺門道>單片機偷天系列之初窺門道</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/6cfda7f2.html alt=「硬見小百科」一文詳解紅外遙控模塊工作原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f8150ae15e1745c7b1b43539dbde6e8a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/6cfda7f2.html title=「硬見小百科」一文詳解紅外遙控模塊工作原理>「硬見小百科」一文詳解紅外遙控模塊工作原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/9ff0031f.html alt=單片機系統的擴展、配置及抗干擾方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Ru2onaW8G5QHLT style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/9ff0031f.html title=單片機系統的擴展、配置及抗干擾方法>單片機系統的擴展、配置及抗干擾方法</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>