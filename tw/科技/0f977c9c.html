<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>讀書筆記｜《Think in Java》Ⅷ 多態 | 极客快訊</title><meta property="og:title" content="讀書筆記｜《Think in Java》Ⅷ 多態 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/6ee50002bf049682647d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/0f977c9c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/0f977c9c.html><meta property="article:published_time" content="2020-11-14T21:08:07+08:00"><meta property="article:modified_time" content="2020-11-14T21:08:07+08:00"><meta name=Keywords content><meta name=description content="讀書筆記｜《Think in Java》Ⅷ 多態"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/0f977c9c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>讀書筆記｜《Think in Java》Ⅷ 多態</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>內容導讀</h1><blockquote><p>多態可以幫助你創建可拓展的程序,在開發的後期和維護階段，可以較方便地添加或修改功能。Mammalian向上轉型到Animal的過程中，是安全的，只是可能會縮小接口。比如上文中的active方法，它是在運行時，根據對象的類型來進行綁定。這個步驟會遞歸下去，首先是根，然後是下一層導出類，接著繼續。在某些程序設計語言中，比如C++，必須執行一些特殊的操作來保證安全的向下轉型。為了有效地運用多態乃至面向對象，必須拓展自己的編程視野，將類與類的共同特性和和相互之間的關係聯繫起來。</p></blockquote><p><img alt="讀書筆記｜《Think in Java》Ⅷ 多態" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/6ee50002bf049682647d></p><p>信仰牌咖啡</p><h3>Ⅷ 多態</h3><p>多態主要將做什麼和怎麼做分離開來，從而改善了代碼的組織結構和可讀性。多態可以幫助你創建可拓展的程序,在開發的後期和維護階段，可以較方便地添加或修改功能。</p><p>多態主要是為了消除類型間的耦合關係。</p><h4>8.1 再論向上轉型</h4><p>先寫一個向上轉型的例子：</p><pre>class Animal{ private String name; public void eat(){ System.out.print("Animal eat"); }}class Mammalian extends Animal{ private String name; @override public void eat(){ System.out.print("Mammalian eat"); }}class Reptiles extends Animal{ private String name; @override public void eat(){ System.out.print("Reptiles eat"); }}//測試類public class Test{ //主函數 public static void main(String[] args){ Mammalian m=new Mammalian(); Reptiles r=new Reptiles(); Animal[] array_ani={new Mammalian(),new Reptiles()}; active(array_ani[0]);//輸出Mammalian eat active(array_ani[1]);//輸出Reptiles eat} //成員函數 public static void active(Animal a){ a.eat(); }}</pre><p><code>Test.active()</code>接收Animal的引用，那麼同時接收任何Animal的子類，而這不需要經過任何類型轉換。Mammalian向上轉型到Animal的過程中，是安全的，只是可能會縮小接口。</p><h5>8.1.1 忘記對象類型</h5><p>在上述代碼中，<code>Test.active()</code>似乎故意忘記了參數的類型。假如沒有多態，那麼需要為每一個Animal類型的引用編寫一個<code>Test.active()</code>（順帶一提，此時同名的active函數為重載），而且意味著，當我們想添加一個針對Animal類型的，類似於active的方法時，還需要做大量的工作。這是相當麻煩且沒有必要的。</p><h4>8.2 轉機</h4><p>那麼應該大家都會有一個疑惑，為什麼active方法能忘記參數類型，怎麼才能讓編譯器知道這是一個指向Mammalian，而不是Animal的引用呢？實際上，編譯器並不知道。這和<em>綁定</em>有關。</p><h5>8.2.1 方法調用綁定</h5><p>將一個調用同一個方法體關聯起來被稱為綁定。在方法被調用之前，由編譯器和連接程序實現的綁定被稱為<em>前期綁定</em>（比如C語言等一些面向過程的語言只有只有這一種默認綁定方式）</p><p>解決的方式是<em>後期綁定</em>，也被稱為<em>動態綁定</em>和<em>運行時綁定</em>。比如上文中的active方法，它是在運行時，根據對象的類型來進行綁定。而這一切，編譯器並不知道，而是一種方法調用機制能找到正確的方法體。那麼問題又來了，這種調用機制是怎麼找到正確的方法體的呢？這是在對象中安置了某種“類型信息”。</p><p>在Java中，除了static和final方法（private為隱式final），其餘所有方法都是採用了後期綁定。</p><h5>8.2.4 缺陷：“覆蓋”私有方法</h5><p>基類中的<code>private</code>修飾的方法，因為是隱式的<code>final</code>方法，所以是不可繼承的。即使在子類中寫了一個同名方法，那相當於是一個全新的方法。基類中只有非<code>private</code>方法才能被覆蓋。</p><h5>8.2.5 缺陷：域與靜態方法</h5><p>只有普通的方法調用才是多態的，直接訪問某個域，這將會在編譯期進行。</p><p>之前也提到過了，靜態方法的行為不具有多態，因為靜態方法是與類，而非單個對象相通信的。</p><h4>8.3 構造器和多態</h4><p>構造器其實是隱式的<code>static</code>方法，所以構造器不具備多態。不過還是需要理解構造器怎麼樣通過多態在複雜的層次結構中運作，這一理解將有助於大家避免一些困擾。</p><h5>8.3.1 構造器的調用順序</h5><p>為什麼構造子類時要調用基類構造器？書中這一段話已經寫的很好了：</p><blockquote><p>基類的構造器總是在導出類的構造過程中被調用，而且按照繼承層次逐漸向上鏈接，以使每個基類的構造器都能得到調用。這樣做是有意義的，因為構造器具有一項特殊任務：檢查對象是否被正確構造。導出類只能訪問自己的成員，不能訪問基類成員（基類成員通常都是private的）只有基類的構造器才具有恰當的知識和權限來對自己的元素進行初始化。因此，必須令所有的構造器都得到調用否則就不可能正確構造完整對象。</p></blockquote><p>構造順序：</p><ol class=list-paddingleft-2><li><p>調用基類構造器。這個步驟會遞歸下去，首先是根，然後是下一層導出類，接著繼續。</p></li><li><p>按聲明順序調用成員的初始化方法。</p></li><li><p>調用導出類構造器的主體。</p></li></ol><h5>8.3.2 繼承與清理</h5><p>對象通常將由垃圾回收器來處理，不過當我們需要進行一些必要的手動清理工作時，需要注意一點（假如我們定義了一個清理方法為<code>dispose()</code>）：因為執行子類的<code>dispose()</code>會覆蓋基類的<code>dispose()</code>，所以需要在子類中顯式地執行<code>super.dispose()</code>才能完成基類地清理工作。而且需要注意調用順序，構造時是由上而下的，清理時就是由下而上的。</p><h5>8.3.3 構造器內部的多態方法的行為</h5><p>這一小節有點難理解，先跳過。</p><h5>8.5.2 向下轉型與運行時類型識別</h5><p>向上轉型是安全的，但是會丟失具體的類型信息。類似的，我們猜想，向下轉型應該能獲取類型信息，但是這該怎麼獲取呢?</p><p>首先我們要保證向下轉型的正確性。在某些程序設計語言中，比如C++，必須執行一些特殊的操作來保證安全的向下轉型。在Java中，所有轉型都會得到檢查，在進入運行時仍會對其進行檢查，以保證他的確是我們需要的類型。若檢查到不是，則拋出類轉型異常。這些操作 被稱為RTTI（運行時類型識別）</p><h4>8.6 總結</h4><p>如果不是數據抽象的繼承，就不可能理解和運用多態。所以多態不是一個孤立的特性。</p><p>為了有效地運用多態乃至面向對象，必須拓展自己的編程視野，將類與類的共同特性和和相互之間的關係聯繫起來。這是一個漸趨成熟的過程，它將有效縮短開發過程，更好地組織代碼，更容易拓展和更方便地維護。</p><hr><p></p><p>掃一掃，關注公眾號</p><p>小白的成長探索之路。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>讀書</a></li><li><a>筆記</a></li><li><a>Think</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/b6e3a42d.html alt=我的讀書筆記-讀《思考中醫》第四版有感 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4ca5ee4c1f3c4e14beeab0a010662f4c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/b6e3a42d.html title=我的讀書筆記-讀《思考中醫》第四版有感>我的讀書筆記-讀《思考中醫》第四版有感</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/eca21788.html alt=三年級《奇妙的數王國》讀書筆記 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/af3802a225b34c5ea562ad3d1e553a38 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/eca21788.html title=三年級《奇妙的數王國》讀書筆記>三年級《奇妙的數王國》讀書筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/5fe1c88a.html alt=《斯通納》讀書筆記 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2ebfb5682e364e1586da571edbf885cb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/5fe1c88a.html title=《斯通納》讀書筆記>《斯通納》讀書筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/d267c9ac.html alt=讀書筆記丨大渡河畔春潮湧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RECAAPuFTxCNJS style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/d267c9ac.html title=讀書筆記丨大渡河畔春潮湧>讀書筆記丨大渡河畔春潮湧</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/8528c0c8.html alt=讀書筆記：朝抵抗力最大的路徑走（下） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/725e8391dcd94f8db21ecf094d7215e4 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/8528c0c8.html title=讀書筆記：朝抵抗力最大的路徑走（下）>讀書筆記：朝抵抗力最大的路徑走（下）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fe08462.html alt="李政道《對稱與不對稱》讀書筆記與摘錄part 02物理學中的對稱與" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/76fdfd4408154572ad47c54000008c48 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fe08462.html title="李政道《對稱與不對稱》讀書筆記與摘錄part 02物理學中的對稱與">李政道《對稱與不對稱》讀書筆記與摘錄part 02物理學中的對稱與</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ba8d715.html alt=讀書筆記｜動態複雜系統的八個特性 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/390f12fb7ac34943bc4752abd7ebad85 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ba8d715.html title=讀書筆記｜動態複雜系統的八個特性>讀書筆記｜動態複雜系統的八個特性</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4e9dbef.html alt=《程序是如何跑起來的》讀書筆記（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1521354749054efded5b901 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4e9dbef.html title=《程序是如何跑起來的》讀書筆記（一）>《程序是如何跑起來的》讀書筆記（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/da39431.html alt=讀書筆記-java高級編程之面向對象程序設計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7cc56fd78f914540a886d489f73cef16 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/da39431.html title=讀書筆記-java高級編程之面向對象程序設計>讀書筆記-java高級編程之面向對象程序設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/ce9b322.html alt=《林園炒股祕籍》讀書筆記 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f6eb2edc111d4ade8bafc58e901c7ddb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/ce9b322.html title=《林園炒股祕籍》讀書筆記>《林園炒股祕籍》讀書筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html alt=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/13adbab9c7f94c7fa81d49a98861b051 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html title=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式>機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html alt=HTMLCSS學習筆記（六）——元素類型 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb5988349894ce9bf568c6418f85b7d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html title=HTMLCSS學習筆記（六）——元素類型>HTMLCSS學習筆記（六）——元素類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html alt="MySQL 學習筆記" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html title="MySQL 學習筆記">MySQL 學習筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ced8e25a.html alt=為什麼很多讀書厲害的人，最後卻混得不好？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4dd9347597bb4269bbeef8251a53f393 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ced8e25a.html title=為什麼很多讀書厲害的人，最後卻混得不好？>為什麼很多讀書厲害的人，最後卻混得不好？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c489c1e2.html alt="為了買一個馬桶，我做了十幾頁的筆記... 馬桶選購原來水這麼深！" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6ebfc0f61b9d44818571c56f832e3c84 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c489c1e2.html title="為了買一個馬桶，我做了十幾頁的筆記... 馬桶選購原來水這麼深！">為了買一個馬桶，我做了十幾頁的筆記... 馬桶選購原來水這麼深！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>