<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「技術」App可靠性設計 | 极客快訊</title><meta property="og:title" content="「技術」App可靠性設計 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/152475476360184f2ae84e9"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/105eabee.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/105eabee.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/105eabee.html><meta property="article:published_time" content="2020-11-14T21:07:11+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:11+08:00"><meta name=Keywords content><meta name=description content="「技術」App可靠性設計"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/105eabee.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「技術」App可靠性設計</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=「技術」App可靠性設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/152475476360184f2ae84e9></p><p>可靠性是軟件一個重要的質量屬性，它關注的是軟件功能持續的可用性，以及出現故障之後是否能夠容錯，是否能快速的恢復使用。</p><p><strong>可靠性六條基本準則</strong></p><p>1、故障應在第一時間被檢測和感知；</p><p>2、能避免的故障都不應該發生；</p><p>3、不可避免或無法預測的故障，需進行容錯；</p><p>4、已發生故障，需在最短時間內得到恢復；</p><p>5、對象狀態和生命期都應該是完備的，閉合的；</p><p>6、資源必須合理和均衡地使用；</p><p>應用作為直接提供用戶服務，與用戶交互最多的環節，其可靠性對用戶體驗的影響巨大，甚至會高於系統對用戶造成的影響。</p><p><strong>可靠性故障的現象及根因</strong></p><p><strong>應用不響應（ANR）</strong></p><p>(1)應用將耗時操作或者同步調用放在UI線程，廣播接收器裡處理；</p><p>(2)應用資源異常，如內存，文件，線程等的濫用、洩露；</p><p>(3)消息、通知過載，忙不過來；</p><p>(4)獲取系統資源阻塞，比如訪問文件系統，數據庫，網絡，CPU等；</p><p><strong>應用啟動不起來，界面卡住凍屏，黑屏，白屏</strong></p><p>(1)應用啟動階段必現閃退；</p><p>(2)應用在啟動階段做了特殊的耗時、阻塞動作；</p><p>(3)應用事件處理bug，例如：應用接收事件但不做任何響應；</p><p>(4)應用資源異常，獲取系統資源阻塞；</p><p>(5)應用窗口狀態異常，或者使用定製的顯示繪製接口導致；</p><p><strong>應用閃退或者頻繁閃退</strong></p><p>(1)低級編碼錯誤，多線程併發錯誤，app質量不合格；</p><p>(2)異常處理不閉合，不完備；</p><p>(3)版本兼容性問題，硬件兼容性問題；</p><p><strong>Android應用故障案例分享</strong></p><p><strong>一、應用資源異常</strong></p><p>1、某輸入法軟件為了保證應用能常駐內存不被系統清理，在應用進程退出時，高頻率註冊1秒的定時器，定時器到時候，立即拉起該應用及關聯應用。如果系統反覆清理該應用，該應用會反覆自啟動，導致系統卡頓很嚴重。</p><p>2、某應用反覆註冊了800+個應用權限管理的AppOps Listener，在執行callback的時候直接導致system_server進程的global reference table overflow，系統重啟。</p><p>3、某著名社交軟件收到消息通知之前，需要獲取通話狀態。如果該應用短時間內收到通知消息特別多，直接會將system_server的binder線程全部佔滿，導致其他應用和服務無法與system_server通信，直接導致系統重啟。</p><p><strong>二、應用的特殊行為</strong></p><p>1、某社交軟件在自身升級後的首次啟動過程中，長時間進入dex2oat優化過程，應用界面顯示黑屏。按back鍵無效，只能手殺，大量用戶反饋手機黑屏死機。</p><p>2、某著名社交軟件收到消息通知之前，需要獲取通話狀態。如果該應用短時間內收到通知消息特別多，直接會將system_server的binder線程全部佔滿，導致其他應用和服務無法與system_server通信，直接導致系統重啟。</p><p>3、某應用註冊加速度傳感器以及近距離傳感器監聽的邏輯：若兩個傳感器的註冊有任何一個失敗或者被拒，則會進行無限重試，直到兩者全成功，該邏輯會導致距離傳感器被反覆執行註冊，致使system_server的fd數量急速增加，超過1024，導致system_server進程崩潰，系統重啟。</p><p><strong>三、兼容性問題</strong></p><p>1、Google 版本升級導致。應用升級N版本之後，應用頻繁閃退，功能缺失，應用無法使用，清除數據和緩存也無效，系統負載高，用戶退機。</p><p>2、某應用推送最新版本異常。應用升級之後，用戶無法使用。</p><p>3、ROM升級之後，導致應用無法使用。ROM升級之後，該應用讀取電話薄失敗，應用頻繁Crash，導致手機電話過程中無法掛斷。</p><p><strong>可靠性設計的一般準則</strong></p><p><strong>一、業務功能的可靠性設計</strong></p><p>1、合理分配執行任務：哪些放在前臺？哪些放在後臺？</p><p>2、仔細設計任務同步&併發：採用同步還是異步？多任務併發？</p><p>3、任務負載的均衡：多個業務執行流有序執行；</p><p>4、對象生命週期的閉合；</p><p>5、良好的用戶交互和提示：別讓用戶以為應用crash</p><p><strong>二、應用數據源可靠性設計</strong></p><p>1、應用核心的數據/文件應有備份和容錯設計</p><p>2、來自外部輸入設備的數據，應用應能判別數據的合法性，例如被破壞的數據源，非法的外部數據/命令</p><p>3、向外發起的服務請求，要有超時和有限重試設計，外部擾動不導致應用卡死</p><p>4、外部發起的攻擊性請求，例如通知，廣播，要有防護設計</p><p><strong>三、應用的資源可靠性設計</strong></p><p>1、分配的資源必須在確定的地方釋放；</p><p>2、使用資源必須有明確的上界，如內存，磁盤，文件，線程。</p><p><strong>四、優秀的編碼能力</strong></p><p>優秀的編碼能力是應用可靠性設計的基礎；</p><p><strong>五、完備的測試故障用例</strong></p><p>事先考慮到應用內部、外部可能發生的故障，將故障的集合定義出來，針對性的設計故障用例。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>技術</a></li><li><a>App</a></li><li><a>設計</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/92ac0d94.html alt=技術文章—如何快速設計紅外體溫檢測儀？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b2db4225ff734a078ff4d3862782b10f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/92ac0d94.html title=技術文章—如何快速設計紅外體溫檢測儀？>技術文章—如何快速設計紅外體溫檢測儀？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/51f533f3.html alt=「技術探祕」5層可靠性設計，保障數據永遠在線 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c5a4ed7e8e1b483a9cc7aa5ecf153ba4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/51f533f3.html title=「技術探祕」5層可靠性設計，保障數據永遠在線>「技術探祕」5層可靠性設計，保障數據永遠在線</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/537098ae.html alt=模型驅動的可靠性設計與分析技術展望 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/537098ae.html title=模型驅動的可靠性設計與分析技術展望>模型驅動的可靠性設計與分析技術展望</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ae2c5cf6.html alt=【技術】壓鑄件的工藝分析與澆注系統設計（中）：流道佈局設計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/89f5aa2b28434bfcbf4d7ef9718a031c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ae2c5cf6.html title=【技術】壓鑄件的工藝分析與澆注系統設計（中）：流道佈局設計>【技術】壓鑄件的工藝分析與澆注系統設計（中）：流道佈局設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/37d1a8a2.html alt=針對施工技術人員經常問設計頻率高的問題，設計答疑總結（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/e4ce8859-131f-4f5b-94cf-f3bc43bb885d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37d1a8a2.html title=針對施工技術人員經常問設計頻率高的問題，設計答疑總結（一）>針對施工技術人員經常問設計頻率高的問題，設計答疑總結（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/33d036b7.html alt="技術 | 軟包卷繞電池的電化學設計和結構設計" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RwIu3PeDaCcBzZ style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/33d036b7.html title="技術 | 軟包卷繞電池的電化學設計和結構設計">技術 | 軟包卷繞電池的電化學設計和結構設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/82d747f8.html alt=「技術帖」基於分析驅動設計的封閉白車身輕量化多目標優化 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bc809f53a9294f5fb37dac6141e5391c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/82d747f8.html title=「技術帖」基於分析驅動設計的封閉白車身輕量化多目標優化>「技術帖」基於分析驅動設計的封閉白車身輕量化多目標優化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/807bb96a.html alt=「技術」關於遮陽設計的問題全解答 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9bc83c7a9e10448d815a5bd3707ac447 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/807bb96a.html title=「技術」關於遮陽設計的問題全解答>「技術」關於遮陽設計的問題全解答</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/dd537d7e.html alt=MBD技術在設計與製造協同過程中的實踐 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/aa7bb190be744b4394709c068186c02e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/dd537d7e.html title=MBD技術在設計與製造協同過程中的實踐>MBD技術在設計與製造協同過程中的實踐</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8a9e44b0.html alt=品牌向上的榮威樣本：設計+技術雙輪驅動 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8ebf81d836704242b35ccb5e34cdb462 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8a9e44b0.html title=品牌向上的榮威樣本：設計+技術雙輪驅動>品牌向上的榮威樣本：設計+技術雙輪驅動</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6e025cf8.html alt=抗震支架設計、技術、安裝及管理相關要求 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1c33fc6346bb4c829128f464575b1b6d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6e025cf8.html title=抗震支架設計、技術、安裝及管理相關要求>抗震支架設計、技術、安裝及管理相關要求</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f14ba3f3.html alt=交易中臺技術要點設計之高性能 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/eab6fd27c3f1418c9f3c51e4169f48c1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f14ba3f3.html title=交易中臺技術要點設計之高性能>交易中臺技術要點設計之高性能</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/1d225a9.html alt=沸石轉輪技術原理及設計要點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f684b1b84e104dd0979ac5c6ea6126f0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/1d225a9.html title=沸石轉輪技術原理及設計要點>沸石轉輪技術原理及設計要點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/72c6a51.html alt=福建省住宅工程設計若干技術規定-給排水專業 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/fc5331c5-e0d1-4db9-a44d-9657e4a3bb63 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72c6a51.html title=福建省住宅工程設計若干技術規定-給排水專業>福建省住宅工程設計若干技術規定-給排水專業</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8d2b1dd.html alt=「機械設計」快速成型技術的應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8d2b1dd.html title=「機械設計」快速成型技術的應用>「機械設計」快速成型技術的應用</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>