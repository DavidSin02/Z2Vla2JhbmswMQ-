<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 | 极客快訊</title><meta property="og:title" content="詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/dfic-imagehandler/9e742a84-f5eb-4044-b7ec-9214909f8ebd"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1252885c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1252885c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1252885c.html><meta property="article:published_time" content="2020-11-14T21:03:41+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:41+08:00"><meta name=Keywords content><meta name=description content="詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/1252885c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/9e742a84-f5eb-4044-b7ec-9214909f8ebd><p class=pgc-img-caption></p></div><p class=pgc-end-literature>作者：ChokCoco</p><p class=pgc-end-literature>https://www.cnblogs.com/coco1s/p/11463599.html</p><p>本文是內部的一次分享沉澱，偏向基礎但是涉及了一些有意思的細節，文筆有限，才疏學淺，文中若有不正之處，萬望告知。</p><p>不知道小夥們是否還得小編之前也整理了2篇關於移動端各種機型適配問題詳細解答，咱們一起來回顧回顧（<strong>有興趣的小夥伴建議看看</strong>）：</p><p>《<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6815773718770352651/?group_id=6815773718770352651?group_id=6815773718770352651" rel="noopener noreferrer" target=_blank>大廠是怎麼做移動端適配的</a>》</p><p>《<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6808803145490104844/?group_id=6808803145490104844?group_id=6808803145490104844" rel="noopener noreferrer" target=_blank>手把手教你繞過移動端適配大坑</a>》</p><p><br></p><p>前端的一大工作內容就是去兼容頁面在不同內核的瀏覽器，不同的設備，不同的分辨率下的行為，使頁面的能正常工作在各種各樣的宿主環境當中。</p><p>而本文的主題 -- 移動端開發的兼容適配與性能優化，就是希望能從一些常見的移動端開發問題出發，理清 Web 移動端開發的前前後後，一些技術的發展過程，一些問題的優化手段以及給出一些常見的兼容性問題的解決方案。</p><h1 class=pgc-h-arrow-right>什麼是響應式設計</h1><p>首先先聊聊響應式設計，這個與移動端開發有著密切的聯繫。</p><p>響應式設計即是 RWD，Responsive Web Design。</p><p>這裡百度或者谷歌一下會有各種各樣的答案。這裡一段摘自知乎上我覺得很棒的一個答案：什麼是響應式佈局設計？（地址：https://www.zhihu.com/question/20976405）</p><p>根據維基百科及其參考文獻，理論上，響應式界面能夠適應不同的設備。描述響應式界面最著名的一句話就是“Content is like water”，翻譯成中文便是“如果將屏幕看作容器，那麼內容就像水一樣”。</p><h1 class=pgc-h-arrow-right>為什麼要設計響應式界面</h1><p>為什麼要費神地嘗試統一所有設備呢？</p><ul><li>即便是PC或Mac用戶，有查顯示只有一半的人會將瀏覽器全屏顯示，而剩下的一般人使用多大的瀏覽器，很難預知；</li><li>臺式機、投影、電視、筆記本、手機、平板、手錶、VR……智能設備正在不斷增加，“主流設備”的概念正在消失；</li><li>屏幕分辨率正飛速發展，同一張圖片在不同設備上看起來，大小可能天差地別；</li><li>鼠標、觸屏、筆、攝像頭手勢……不可預期的操控方式正在不斷出現。</li></ul><h1 class=pgc-h-arrow-right>響應式界面的四個層次</h1><ul><li>同一頁面在不同大小和比例上看起來都應該是舒適的；</li><li>同一頁面在不同分辨率上看起來都應該是合理;</li><li>同一頁面在不同操作方式（如鼠標和觸屏）下，體驗應該是統一的；</li><li>同一頁面在不同類型的設備（手機、平板、電腦）上，交互方式應該是符合習慣的。</li></ul><h1 class=pgc-h-arrow-right>響應式界面的基本規則</h1><ul><li>可伸縮的內容區塊：內容區塊的在一定程度上能夠自動調整，以確保填滿整個頁</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b1dd168266284db1ad2d6335de019f8d><p class=pgc-img-caption></p></div><ul><li>可自由排布的內容區塊：當頁面尺寸變動較大時，能夠減少/增加排布的列</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3b738c2b928c4dd092d70795aada0984><p class=pgc-img-caption></p></div><ul><li>適應頁面尺寸的邊距：到頁面尺寸發生更大變化時，區塊的邊距也應該變化</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/694464636632475abb2db14873a0c240><p class=pgc-img-caption></p></div><ul><li>能夠適應比例變化的圖片：對於常見的寬度調整，圖片在隱去兩側部分時，依舊保持美觀可用</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/943a426d532f4ef3846637d568174a60><p class=pgc-img-caption></p></div><ul><li>能夠自動隱藏/部分顯示的內容：如在電腦上顯示的的大段描述文本，在手機上就只能少量顯示或全部隱藏</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8a285a8e93a840d686d75069f5e0e0aa><p class=pgc-img-caption></p></div><ul><li>能自動摺疊的導航和菜單：展開還是收起，應該根據頁面尺寸來判斷</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/592aa6beaf174d3a9ed6911cad22a748><p class=pgc-img-caption></p></div><ul><li>放棄使用像素作為尺寸單位：用dp(對於前端來說，這裡可能是rem)尺寸等方法來確保頁面在分辨率相差很大的設備上，看起來也能保持一致。同時也要求提供的圖片應該比預想的更大，才能適應高分辨率的屏幕。</li></ul><p>上面一段我覺得已經涵蓋了響應式設計的絕大部分，簡單總結起來，可以概括為：</p><ul><li>媒體查詢，邊界斷點的規則設定（Media queries && break point）</li><li>內容的可伸縮性效果（Flexibel visuals）</li><li>流式網格佈局(Fluid grids)</li><li>主要內容呈現及圖片的高質量(Main content and high quality)</li></ul><h1 class=pgc-h-arrow-right>響應式 vs. 自適應</h1><p>響應式設計是 Responsive Web Design（RWD），自適應設計是 Adaptive Web Design（AWD）。經常有人會將兩者混為一談，或者其實根本也區分不了所謂的響應式與自適應。</p><p>其實在我寫這篇文章的時候，我也無法很好的去區分兩者。</p><p>RWD 和 AWD 兩者都是為了適配各種不同的移動設備，致力於提升用戶體驗所產生的的技術。核心思想是用技術來使網頁適應從小到大（現在到超大）的不同分辨率的屏幕。通常認為，RWD 是 AWD 的子集。</p><p>RWD：Ethan Marcote 的文章是大家認為 RWD 的起源。他提出的 RWD 方案是通過 HTML 和 CSS 的媒體查詢技術，配合流體佈局實現。RWD 傾向於只改變元素的外觀佈局，而不大幅度改變內容。Jeffrey Zeldman 總結說，我們就把 RWD 定義為一切能用來為各種分辨率和設備性能優化視覺體驗的技術。</p><p>AWD：Adaptive Design 是 Aaron Gustafson 的書的標題。他認為 AWD 在包括 RWD 的 CSS 媒體查詢技術以外，也要用 Javascript 來操作 HTML 來更適應移動設備的能力。AWD 有可能會針對移動端用戶減去內容，減去功能。AWD 可以在服務器端就進行優化，把優化過的內容送到終端上。</p><p>一圖勝千言。</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4aab3cabdac4473c9413d90885637c51><p class=pgc-img-caption></p></div><p>從定義上而言，RWD 是一套代碼，適用於所有屏幕。而 AWD 則是多端多套代碼。本文不會過多去糾結響應式與自適應區別，我覺得這兩者的本質都是致力於適配不同設備，更好地提升用戶體驗。</p><h1 class=pgc-h-arrow-right>漸進增強 vs. 優雅降級</h1><ul><li>漸進增強（progressive enhancement）：針對低版本瀏覽器進行構建頁面，保證最基本的功能，然後再針對高級瀏覽器進行效果、交互等改進和追加功能達到更好的用戶體驗。</li><li>優雅降級（graceful degradation）：一開始就構建完整的功能，然後再針對低版本瀏覽器進行兼容。</li></ul><p><strong>區別：</strong>優雅降級是從複雜的現狀開始，並試圖減少用戶體驗的供給，而漸進增強則是從一個非常基礎的，能夠起作用的版本開始，並不斷擴充，以適應未來環境的需要。降級（功能衰減）意味著往回看；而漸進增強則意味著朝前看，同時保證其根基處於安全地帶。　</p><p>漸進增強/優雅降級通常是 AWD 會牽扯到的另一個技術術語。本質上而言即是隨著屏幕的大小的改變，功能會一點一點增強。</p><p>也通常會用在一些高級 CSS3 屬性上，我們對一些 CSS 屬性進行特性檢測，甚至不進行特性檢測直接使用。後果是在支持它的網頁上該屬性正常展示，而不支持它的網頁該屬性不生效，但也不影響用戶的基本使用。</p><p>典型的例子是 CSS3 逐漸被大眾認可並被使用，PC端頁面開始由 IE678 向兼容性更好的IE9+，chrome，firefox瀏覽器轉變的時期。我們可以對頁面元素直接使用陰影，圓角等屬性。對於不支持它的低版本 IE 而言，沒有什麼損失，而對於支持它的高級瀏覽器而言，帶給了用戶更好的交互視覺體驗，這就是漸進增強。</p><h1 class=pgc-h-arrow-right><strong>移動端屏幕適配方案</strong></h1><p>下面會針對一些具體的案例，展開講講。第一個是高保真還原設計稿，也就是如何適配移動端繁雜的屏幕大小。</p><p>通常而言，設計師只會給出單一分辨率下的設計稿，而我們要做的，就是以這個設計稿為基準，去適配所有不同大小的移動端設備。</p><p>在此之前，有一些基礎概念需要理解。</p><h1 class=pgc-h-arrow-right><strong>提示：一些概念性的東西，大部分人很難一次性記住，或者記了又忘，我覺得記憶這個東西比較看技巧，比如關聯法，想象法，把這些生硬的概念與一些符合我們常識的知識關聯在一起記憶，往往能夠事半功倍。</strong></h1><h1 class=pgc-h-arrow-right>設備獨立像素</h1><p>以 iPhone6/7/8為例，這裡我們打開 Chrome 開發者工具：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/821747d99d0e4f3fa0245c51f1944b5f><p class=pgc-img-caption></p></div><p>這裡的 375 * 667 表示的是什麼呢，表示的是設備獨立像素（DIP），也可以理解為 CSS 像素，也稱為邏輯像素：</p><p>設備獨立像素 = CSS 像素 = 邏輯像素</p><p>如何記憶呢？這裡使用 CSS 像素來記憶，也就是說。我們設定一個寬度為 375px 的 div，剛好可以充滿這個設備的一行，配合高度 667px ，則 div 的大小剛好可以充滿整個屏幕。</p><h1 class=pgc-h-arrow-right>物理像素</h1><p>OK，那麼，什麼又是物理像素呢。我們到電商網站購買手機，都會看一看手機的參數，以 JD 上的 iPhone7 為例：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/82ccf17943ee43979081754cb01ec140><p class=pgc-img-caption></p></div><p>可以看到，iPhone7 的分辨率是 1334 x 750，這裡描述的就是屏幕實際的物理像素。</p><p>物理像素，又稱為設備像素。顯示屏是由一個個物理像素點組成的，1334 x 750 表示手機分別在垂直和水平上所具有的像素點數。通過控制每個像素點的顏色，就可以使屏幕顯示出不同的圖像，屏幕從工廠出來那天起，它上面的物理像素點就固定不變了，單位為pt。</p><p>設備像素 = 物理像素</p><h1 class=pgc-h-arrow-right>DPR（Device Pixel Ratio） 設備像素比</h1><p>OK，有了上面兩個概念，就可以順理成章引出下一個概念。DPR（Device Pixel Ratio） 設備像素比，這個與我們通常說的視網膜屏（多倍屏，Retina屏）有關。</p><p>設備像素比描述的是未縮放狀態下，物理像素和設備獨立像素的初始比例關係。</p><p>簡單的計算公式：</p><p>DPR = 物理像素 / 設備獨立像素</p><p>我們套用一下上面 iPhone7 的數據（取設備的物理像素寬度與設備獨立像素寬度進行計算）：</p><p>iPhone7’s DPR = iPhone7’s 物理像素寬度 / iPhone7's 設備獨立像素寬度 = 2</p><p><strong>提示：750 / 375 = 2</strong><br><strong>或者是 1334 / 667 = 2</strong></p><p>可以得到 iPhone7 的 dpr 為 2。也就是我們常說的視網膜屏幕。</p><p>視網膜（Retina）屏幕是蘋果公司"發明"的一個營銷術語。蘋果公司將 dpr > 1 的屏幕稱為視網膜屏幕。</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/053355d06c8344b7a5ebcfd606a5458c><p class=pgc-img-caption></p></div><p>在視網膜屏幕中，以 dpr = 2 為例，把 4(2x2) 個像素當 1 個像素使用，這樣讓屏幕看起來更精緻，但是元素的大小本身卻不會改變：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/18f89521dcaf4fc3a43b815590d5fe05><p class=pgc-img-caption></p></div><p>OK，我們再來看看 iPhone XS Max：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/710b8bbb531d4156b7b8bbc62d9a1541><p class=pgc-img-caption></p></div><p>它的物理像素如上圖是 2688 x 1242，</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5cce9dda131c4f28a86a29fd857c5df4><p class=pgc-img-caption></p></div><p>它的 CSS 像素是 896 x 414，很容易得出 iPhone XS Max 的 dpr 為 3。</p><p>上面三個概念（CSS像素、設備獨立像素、DPR）是我覺得比較重要的，還有一些其他比較重要的概念 PPI、DPI 不影響後續的內容，可以自行去加深理解。</p><p>OK，到這裡我們就完成了一個小的里程碑。我們通常說的H5手機適配也就是指的這兩個維度：</p><ul><li>適配不同屏幕大小，也就是適配不同屏幕下的 CSS 像素</li><li>適配不同像素密度，也就是適配不同屏幕下 dpr 不一致導致的一些問題</li></ul><h1 class=pgc-h-arrow-right>適配不同屏幕大小</h1><p>適配不同屏幕大小，也就是適配不同屏幕下的 CSS 像素。最早移動端屏幕 CSS 像素適配方案是CSS媒體查詢。但是無法做到高保真接近 100% 的還原。</p><p>適配不同屏幕大小其實只需要遵循一條原則，確保頁面元素大小的與屏幕大小保持一定比例。也就是：按比例還原設計稿。</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/65c9ff497bd64f78a6bcbbdb5af783f6><p class=pgc-img-caption></p></div><p>假設我們現在拿到標註為 375*667 的大小的設計稿，其中一個元素的標註如下：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8581683be1d94f9da191c36a847e73ef><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8dcd16f8f138416784d3c17343cb4438><p class=pgc-img-caption></p></div><p>以頁面寬度為基準的話，那麼，</p><ul><li>元素的寬度為：209/375 = 55.73%</li><li>元素的高度為：80/375 = 21.33%</li><li>元素的上左右邊距依次計算...</li></ul><p>這樣，無論屏幕的 CSS 像素寬度是 320px 還是 375px 還是 414px，按照等量百分比還原出來的界面總是正確的。</p><p>然而，理想很豐滿，現實很骨感。實現上述百分比方案的核心需要一個全局通用的基準單位，讓所有百分比展示以它為基準，但是在 CSS 中，根據CSS Values and Units Module Level 4的定義：</p><p><strong>提示：百分比值總要相對於另一個量，比如長度。每個允許使用百分比值的屬性，同時也要定義百分比值參照的那個量。這個量可以是相同元素的另一個屬性的值，也可以是祖先元素的某個屬性的值，甚至是格式化上下文的一個度量（比如包含塊的寬度）。</strong></p><p>具體來說：</p><ul><li>寬度（width）、間距（maring/padding）支持百分比值，但默認的相對參考值是包含塊的寬度；</li><li>高度（height）百分比的大小是相對其父級元素高的大小；</li><li>邊框（border）不支持百分值；</li><li>邊框圓角半徑（border-radius）支持百分比值，但水平方向相對參考值是盒子的寬度，垂直方向相對參考值是盒子的高度；</li><li>文本大小（font-size）支持百分比值，但相對參考值是父元素的font-size的值；</li><li>盒陰影（box-shadow）和文本陰影（text-shadow）不支持百分比值；</li></ul><p>首先，支持百分比單位的度量屬性有其各自的參照基準，其次並非所有度量屬性都支持百分比單位。所以我們需要另闢蹊徑。</p><h1 class=pgc-h-arrow-right>rem 適配方案</h1><p>在 vw 方案出來之前，最被大眾接受的就是使用 rem 進行適配的方案，因為 rem 滿足上面說的，可以是一個全局性的基準單位。</p><p>rem（font size of the root element），在 CSS Values and Units Module Level 3中的定義就是， 根據網頁的根元素來設置字體大小，和 em（font size of the element）的區別是，em 是根據其父元素的字體大小來設置，而 rem 是根據網頁的跟元素（html）來設置字體大小。</p><h1 class=pgc-h-arrow-right>flexible</h1><p>基於此，淘寶早年推行的一套以 rem 為基準的適配方案：lib-flexible。其核心做法在於：</p><ul><li>根據設備的 dpr 動態改寫 &lt;meta> 標籤，設置 viewport 的縮放</li><li>給 &lt;html> 元素添加 data-dpr 屬性，並且動態改寫 data-dpr 的值</li><li>根據 document.documentElement.clientWidth 動態修改 &lt;html> 的 font-size ，頁面其他元素使用 rem 作為長度單位進行佈局，從而實現頁面的等比縮放</li></ul><p><strong>提示：關於頭兩點，其實現在的 lib-flexible 庫已經不這樣做了，不再去縮放 Viewport，字體大小的設定也直接使用了 rem</strong></p><h1 class=pgc-h-arrow-right>hotcss</h1><p>hotcss 不是一個庫，也不是一個框架。它是一個移動端佈局開發解決方案。使用 hotcss 可以讓移動端佈局開發更容易。本質的思想與 flexible 完全一致。</p><h1 class=pgc-h-arrow-right><strong>對於 rem 方案的一些總結</strong></h1><p>使用 flexible/hotcss 作為屏幕寬度適配解決方案，是存在一些問題的：</p><ul><li>動態修改 Viewport 存在一定的風險的，譬如通過 Viewport 改變了頁面的縮放之後，獲取到的 innerWidth/innerHeight 也會隨之發生變化，如果業務邏輯有獲取此類高寬進行其他計算的，可能會導致意想不到的錯誤；</li></ul><p><strong>提示：到今天，其實存在很多在 flexible 基礎上演化而來的各種 rem 解決方案，有的不會對 Viewport 進行縮放處理，自行處理 1px 邊框問題。</strong></p><ul><li>flexible/hotcss 都並非純 CSS 方案，需要引入一定的 Javascript 代碼</li><li>rem 的設計初衷並非是用於解決此類問題，用 rem 進行頁面的寬度適配多少有一種 hack 的感覺</li><li>存在一定的兼容性問題，對於安卓 4.4 以下版本系統不支持 viewport 縮放（當然，flexible 處理 Android 系列時，始終認為其 dpr 為 1，沒有進行 viewport 縮放）</li></ul><h1 class=pgc-h-arrow-right>vw 適配方案</h1><p>嚴格來說，使用 rem 進行頁面適配其實是一種 hack 手段，rem 單位的初衷本身並不是用來進行移動端頁面寬度適配的。</p><p>到了今天，有了一種更好的替代方案，使用 vw 進行適配 。</p><p>百分比適配方案的核心需要一個全局通用的基準單位，rem 是不錯，但是需要藉助 Javascript 進行動態修改根元素的 font-size，而 vw/vh（vmax/vmin） 的出現則很好彌補 rem 需要 JS 輔助的缺點。</p><p>根據 CSS Values and Units Module Level 4：vw等於初始包含塊（html元素）寬度的1%，也就是</p><ul><li>1vw 等於 window.innerWidth 的數值的 1%</li><li>1vh 等於window.innerHeight 的數值的 1%</li></ul><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2aaf96b28b11450b8bdc33edc6a55428><p class=pgc-img-caption></p></div><p>再以上面設計稿圖的元素為例，那麼，</p><ul><li>元素的寬度為：209/375 = 55.73% = 55.73vw</li><li>元素的高度為：80/375 = 21.33% = 21.33vw</li><li>元素的上左右邊距依次計算...</li></ul><p>根據相關的測試，可以使用 vw 進行長度單位的有：</p><ul><li>容器大小適配，可以使用 vw</li><li>文本大小的適配，可以使用 vw</li><li>大於 1px 的邊框、圓角、陰影都可以使用 vw</li><li>內距和外距，可以使用 vw</li></ul><p>簡單的一個頁面，看看效果，完全是等比例縮放的效果：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/befbbfba23b748feab7c6cca0fb7718d><p class=pgc-img-caption></p></div><p>CodePen Demo（移動端打開）：使用 vw 進行頁面適配。</p><h1 class=pgc-h-arrow-right>自動轉換插件</h1><p>當我們使用 rem 作為長度單位的時，通常會有藉助 Sass/Less 實現一個轉換函數，像是這樣：</p><pre><code>// 假設設計稿的寬度是 375px，假設取設計稿寬度下 1rem = 100px$baseFontSize: 100;@function px2rem($px) {    @return $px / $baseFontSize * 1rem;}</code></pre><p>同理，在 vw 方案下，我們只需要去改寫這個方法：</p><pre><code>// 假設設計稿的寬度是 375px@function px2rem($px) {    @return $px / 375 * 100vw;}</code></pre><p>當然，我們還可以藉助一些插件包去實現這個自動轉換，提高效率，譬如 postcss-px-to-viewport。</p><h1 class=pgc-h-arrow-right>vw polyfill</h1><p>vw 現在畢竟還是存在兼容問題的，看看兼容性：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9d3d41730aa645718872e3e19d68114c><p class=pgc-img-caption></p></div><p>其實已經覆蓋了絕大部分設備，那麼如果業務使用了且又真的出現了兼容問題，應該怎麼處理呢？有兩種方式可以進行降級處理：</p><ul><li>CSS Houdini：通過CSS Houdini針對vw做處理，調用CSS Typed OM Level1 提供的 CSSUnitValue API。</li><li>CSS Polyfill：通過相應的Polyfill做相應的處理，目前針對於 vw 單位的 Polyfill 主要有：vminpoly、Viewport Units Buggyfill、vunits.js和 Modernizr</li></ul><h1 class=pgc-h-arrow-right>對於 vw 方案的一些總結</h1><p>vw 確實看上去很不錯，但是也是存在它的一些問題：</p><ul><li>也沒能很好的解決 1px 邊框在高清屏下的顯示問題，需要自行處理</li><li>由於 vw 方案是完全的等比縮放，在完全等比還原設計稿的同時帶來的一個問題是無法很好的限定一個最大最小寬度值，由於 rem 方案是藉助 Javascript 的，所以這一點 rem 比 vw 會更加的靈活</li></ul><p>當然，兩個方案現階段其實都可以使用甚至一起搭配使用，更多詳情可以讀讀：</p><ul><li>再聊移動端頁面的適配</li><li>H5必知必會之像素級還原設計稿</li><li>Responsive And Fluid Typography With vh And vw Units</li><li>使用VH和VW實現真正的流體排版</li></ul><h1 class=pgc-h-arrow-right>1px線</h1><p>上面說到使用 vw 適配屏幕大小方案，其中有一個缺點就是在 Retina 屏下，無法很好的展示真正的 1px 物理像素線條。</p><p>設計師想要的 retina 下 border: 1px，其實是 1 物理像素寬，而不是 1 CSS 像素寬度，對於 CSS 而言：</p><ul><li>在 dpr = 1 時，此時 1 物理像素等於 1 CSS 像素寬度；</li><li>在 dpr = 2 時，此時 1 物理像素等於 0.5 CSS 寬度像素，可以認為 border-width: 1px 這裡的 1px 其實是 1 CSS像素寬度，等於 2 像素物理寬度，設計師其實想要的是 border-width: 0.5px;</li><li>在 dpr = 3 時，此時 1 物理像素等於 0.33 CSS 寬度像素，設計師其實想要的是 border: 0.333px</li></ul><p>然而，並不是所有手機瀏覽器都能識別 border-width: 0.5px，在 iOS7 以下，Android 等其他系統裡，小於 1px 的單位會被當成為 0px 處理，那麼如何實現這 0.5px、0.33px 呢？</p><p>這裡介紹幾種方法：</p><ul><li>漸變實現</li><li>使用縮放實現</li><li>使用圖片實現（base64）</li><li>使用SVG實現（嵌入 background url）</li></ul><p>Retina 屏幕下 1px 線的實現。</p><h1 class=pgc-h-arrow-right>圖片適配及優化</h1><p>圖像通常佔據了網頁上下載資源的絕大部分。優化圖像通常可以最大限度地減少從網站下載的字節數以及提高網站性能。</p><p>通常可以，有一些通用的優化手段：</p><ul><li>消除多餘的圖像資源</li><li>儘可能利用 CSS3\SVG 矢量圖像替代某些光柵圖像</li><li>謹慎使用字體圖標，使用網頁字體取代在圖像中進行文本編碼</li><li>選擇正確的圖片格式</li><li>為不同 DPR 屏幕提供最適合的圖片尺寸</li></ul><p>本文重點關注如何在不同的 dpr 屏幕下，讓圖片看起來都不失真。</p><p>首先就是上述的第二點，儘可能利用 CSS3\SVG 矢量圖像替代某些光柵圖像。某些簡單的幾何圖標，可以用 CSS3 快速實現的圖形，都應該儘量避免使用光柵圖像。這樣能夠保證它們在任何尺寸下都不會失真。</p><p>其次，實在到了必須使用光柵圖像的地步，也是有許多方式能保證圖像在各種場景下都不失真。</p><h1 class=pgc-h-arrow-right>無腦多倍圖</h1><p>在移動端假設我們需要一張 CSS 像素為 300 x 200 的圖像，考慮到現在已經有了 dpr = 3 的設備，那麼要保證圖片在 dpr = 3 的設備下也正常高清展示，我們最大可能需要一張 900 x 600 的原圖。</p><p>這樣，不管設備的 dpr 是否為 3，我們統一都使用 3 倍圖。這樣即使在 dpr = 1，dpr = 2 的設備上，也能非常好的展示圖片。</p><p>當然這樣並不可取，會造成大量帶寬的浪費。現代瀏覽器，提供了更好的方式，讓我們能夠根據設備 dpr 的不同，提供不同尺寸的圖片。</p><h1 class=pgc-h-arrow-right>srcset 配合 1x 2x 像素密度描述符</h1><p>簡單來說，srcset 可以根據不同的 dpr 拉取對應尺寸的圖片：</p><pre><code>&lt;div class='illustration'&gt;&lt;img src='illustration-small.png'srcset='images/illustration-small.png 1x,               images/illustration-big.png 2x'style='max-width: 500px'/&gt;&lt;/div&gt;</code></pre><p>上面 srcset 裡的 1x，2x 表示 像素密度描述符，表示</p><ul><li>當屏幕的 dpr = 1 時，使用 images/illustration-small.png 這張圖</li><li>當屏幕的 dpr = 2 時，使用 images/illustration-big.png 這張圖</li></ul><h1 class=pgc-h-arrow-right>srcset 屬性配合 sizes 屬性 w 寬度描述符</h1><p>上面 1x，2x 的寫法比較容易接受易於理解。</p><p>除此之外，srcset屬性還有一個 w 寬度描述符，配合 sizes 屬性一起使用，可以覆蓋更多的面。</p><p>以下面這段代碼為例子：</p><pre><code>&lt;imgsizes = “(min-width: 600px) 600px, 300px"src = "photo.png"srcset = “photo@1x.png 300w,photo@2x.png 600w,photo@3x.png 1200w,&gt;</code></pre><p>解析一下：</p><p>sizes = “(min-width: 600px) 600px, 300px" 的意思是，如果屏幕當前的 CSS 像素寬度大於或者等於 600px，則圖片的 CSS 寬度為 600px，反之，則圖片的 CSS 寬度為 300px。</p><p>也就是 sizes 屬性聲明瞭在不同寬度下圖片的 CSS 寬度表現。這裡可以理解為，大屏幕下圖片寬度為 600px，小屏幕下圖片寬度為 300px。（具體的媒體查詢代碼由 CSS 實現）</p><p>這裡的 sizes 屬性只是聲明瞭在不同寬度下圖片的 CSS 寬度表現，而具體使圖片在大於600px的屏幕上展示為600px寬度的代碼需要另外由 CSS 或者 JS 實現，有點繞。</p><p>srcset = “photo@1x.png 300w, photo@2x.png 600w, photo@3x.png 1200w 裡面的 300w，600w，900w 叫寬度描述符。怎麼確定當前場景會選取哪張圖片呢？</p><h1 class=pgc-h-arrow-right>1. 當前屏幕 dpr = 2 ，CSS 寬度為 375px。</h1><p>當前屏幕 CSS 寬度為 375px，則圖片 CSS 寬度為 300px。分別用上述 3 個寬度描述符的數值除以 300。</p><ul><li>300 / 300 = 1</li><li>600 / 300 = 2</li><li>1200 / 300 = 4</li></ul><p>上面計算得到的 1、 2、 4 即是算出的有效的像素密度，換算成和 x 描述符等價的值 。這裡 600w 算出的 2 即滿足 dpr = 2 的情況，選擇此張圖。</p><h1 class=pgc-h-arrow-right>2. 當前屏幕 dpr = 3 ，CSS 寬度為 414px。</h1><p>當前屏幕 CSS 寬度為 414px，則圖片 CSS 寬度仍為 300px。再計算一次：</p><ul><li>300 / 300 = 1</li><li>600 / 300 = 2</li><li>1200 / 300 = 4</li></ul><p>因為 dpr = 3，2 已經不滿足了，則此時會選擇 1200w 這張圖。</p><h1 class=pgc-h-arrow-right>3. 當前屏幕 dpr = 1 ，CSS 寬度為 1920px。</h1><p>當前屏幕 CSS 寬度為 1920px，則圖片 CSS 寬度變為了 600px。再計算一次：</p><ul><li>300 / 600 = .5</li><li>600 / 600 = 1</li><li>1200 / 600 = 2</li></ul><p>因為 dpr = 1，所以此時會選擇 600w 對應的圖片。</p><p>具體的可以試下這個 Demo：CodePen Demo -- srcset屬性配合w寬度描述符配合sizes屬性</p><p>此方案的意義在於考慮到了響應性佈局的複雜性與屏幕的多樣性，利用上述規則，可以一次適配 PC 端大屏幕和移動端高清屏，一箭多雕。</p><p>瞭解更多細節，推薦看看：</p><ul><li>Google Web Fundamentals -- Web Responsive Images</li><li>響應式圖片srcset全新釋義sizes屬性w描述符</li></ul><h1 class=pgc-h-arrow-right>字體適配方案</h1><h1 class=pgc-h-arrow-right>字體大小</h1><p>字體是很多前端開發同學容易忽略的一個點，但是其中也是有很多小知識點。</p><p>首先要知道，瀏覽器有最小字體限制：</p><ul><li>PC上最小 font-size=12px</li><li>手機上最小 font-size=8px</li></ul><p>如果小於最小字體，那麼字體默認就是最小字體。</p><p>其次，很多早期的文章規範都建議不要使用奇數級單位來定義字體大小（如 13px，15px...），容易在一些低端設備上造成字體模糊，出現鋸齒。</p><h1 class=pgc-h-arrow-right>字體的選擇展示</h1><p>在字體適配上面，我們需要從性能和展示效果兩個維度去考慮。</p><p>完整的一個字體資源實在太大了，所以我們應該儘可能的使用用戶設備上已有的字體，而不是額外去下載字體資源，從而使加載時間明顯加快。</p><p>而從展示效果層面來說，使用系統字體能更好的與當前操作系統使用的相匹配，得到最佳的展示效果。所以我們在字體使用方面，有一個應該儘量去遵循的原則，也是現在大部分網站在字體適配上使用的策略：</p><p>使用各個支持平臺上的默認系統字體。</p><h1 class=pgc-h-arrow-right>兼顧各個操作系統</h1><p>常見的操作系統有 Windows、Windows Phone、Mac OS X、iPhone、Android Phone、Linux。當然對於普通用戶而言，無須關注 Linux 系統。</p><p>下面就以 CSS-Trick 網站最新的 font-family 為例，看看他們是如何在字體選擇上做到適配各個操作系統的</p><pre><code>{font-family:    system-ui,-apple-system,BlinkMacSystemFont,segoe ui,Roboto,    Helvetica,Arial,    sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;}</code></pre><h1 class=pgc-h-arrow-right>font-family 關鍵字</h1><p>對於 CSS 中的 font-family 而言，它有兩類取值。</p><ul><li>一類是類似這樣的具體的字體族名定義：font-family: Arial 這裡定義了一個具體的字體樣式，字體族名為 Arial;</li><li>一類是通用字體族名，它是一種備選機制，用於在指定的字體不可用時給出較好的字體，類似這樣：font-family: sans-serif 。</li></ul><p>其中，sans-serif 表無襯線字體族，例如， "Open Sans", "Arial" "微軟雅黑" 等等。</p><p>關於通用字體族名，在 CSS Fonts Module Level 3 -- Basic Font Properties 中，定義了 5 個，也就是我們熟知的幾個通用字體族名：</p><ul><li>serif 襯線字體族</li><li>sans-serif 非襯線字體族</li><li>monospace 等寬字體，即字體中每個字寬度相同</li><li>cursive 草書字體</li><li>fantasy 主要是那些具有特殊藝術效果的字體</li></ul><h1 class=pgc-h-arrow-right>新增通用字體族關鍵字</h1><p>而在 CSS Fonts Module Level 4 -- Generic font families 中，新增了幾個關鍵字：</p><ul><li>system-ui 系統默認字體</li><li>emoji 用於兼容 emoji 表情符號字符</li><li>math 適用於數學表達式</li><li>fangsong 此字體系列用於中文的（仿宋）字體。</li></ul><p>我們看看用的最多的 system-ui。</p><h1 class=pgc-h-arrow-right>system-ui</h1><p>簡單而言，font-family: system-ui 的目的就是在不同的操作系統的 Web 頁面下，自動選擇本操作系統下的默認系統字體。</p><p>默認使用特定操作系統的系統字體可以提高性能，因為瀏覽器或者 webview 不必去下載任何字體文件，而是使用已有的字體文件。 font-family: system-ui 字體設置的優勢之處在於它與當前操作系統使用的字體相匹配，對於文本內容而言，它可以得到最恰當的展示。</p><h1 class=pgc-h-arrow-right>San Francisco Fonts</h1><p>OK，簡單瞭解了 system-ui 字體族。但是像 -apple-system、BlinkMacSystemFont 沒有在最新的標準裡出現。它們又代表什麼意思呢？</p><p>在此之前，先了解下 San Francisco Fonts 。</p><p>San Francisco Fonts 又叫舊金山字體，是一款西文字體。隨著 iOS 9 更新面世，在 WatchOS 中隨 Apple Watch 一起悄然發售，並且還將在 Apple TV 上的新 tvOS 中使用。</p><p>San Francisco Fonts 在 iOS 系統上用於替代升級另外一款西文字體 Helvetica Neue。Apple 做了一些重要的改變，使其成為平臺上更好的， 甚至是完美的西文字體。</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1c7dece5fc3d43e3be1e67406325ed62><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>-apple-system/BlinkMacSystemFont</h1><p>話說回來。正如每個前端開發人員都知道的那樣，將一個功能納入規範是一回事，將其納入瀏覽器又是另一回事。</p><p>幸運的是，system-ui 的普及很快。Chrome 和 Safari 都可以在各種平臺上完全支持它。只有 Mozilla 和 Windows 相對落後。</p><p>看看 system-ui 的兼容性，Can i Use -- system-ui(圖片截取日 2019-08-13)：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9d3d41730aa645718872e3e19d68114c><p class=pgc-img-caption></p></div><p>仔細看上圖的最後兩行：</p><ul><li>Supported as the -apple-system value (only on macOS and iOS)</li><li>Supported as the BlinkMacSystemFont value (only on macOS)</li></ul><p>考慮到不同平臺及向後兼容，在 macOS 和 iOS 上，我們需要使用 -apple-system 及 BlinkMacSystemFont 來兼容適配 system-ui 標準。</p><h1 class=pgc-h-arrow-right>Segoe UI</h1><p>Segoe UI 是 Windows 從 Vista 開始的默認西文字體族，只有西文，不支持漢字，屬於無襯線體。</p><p>它也表示一個系列而不是某一款單一字體。使用 font-family: Segoe UI 可以在 Windows 平臺及 Windows Phone 上選取最佳的西文字體展示。</p><h1 class=pgc-h-arrow-right>Roboto</h1><p>Roboto 是為 Android 操作系統設計的一個無襯線字體家族。Google 描述該字體為“現代的、但平易近人”和“有感情”的。</p><p>這個字體家族包含Thin、Light、Regular、Medium、Bold、Black六種粗細及相配的斜體。</p><h1 class=pgc-h-arrow-right>總結一下</h1><p>到此，我們可以總結一下了。以 CSS-Tricks 網站的 font-family 定義為例子：</p><p><br></p><pre><code>{font-family:    system-ui,-apple-system,BlinkMacSystemFont,segoe ui,Roboto,    Helvetica,Arial,    sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;}</code></pre><ul><li>system-ui，使用各個支持平臺上的默認系統字體</li><li>-apple-system， 在一些稍低版本 Mac OS X 和 iOS 上，它針對舊版上的 Neue Helvetica 和 Lucida Grande 字體，升級使用更為合適的 San Francisco Fonts</li><li>BlinkMacSystemFont，針對一些 Mac OS X 上的 Chrome 瀏覽器，使用系統默認字體</li><li>segoe ui，在 Windows 及 Windows Phone 上選取系統默認字體</li><li>Roboto，面向 Android 和一些新版的的 Chrome OS</li><li>Helvetica,Arial，在針對不同操作系統不同平臺設定採用默認系統字體後，針對一些低版本瀏覽器的降級方案</li><li>sans-serif，兜底方案，保證字體風格統一，至少也得是無襯線字體</li></ul><p>上述 5 個字體族定義，優先級由高到底，可以看到，它們 5 個都並非某個特定字體，基本的核心思想都是選擇對應平臺上的默認系統字體。</p><p>涵蓋了 iOS、MAC OS X、Android、Windows、Windows Phone 基本所有用戶經常使用的主流操作系統。</p><p>使用系統默認字體的主要原因是性能。字體通常是網站上加載的最大/最重的資源之一。如果我們可以使用用戶機器上已有的字體，我們就完全不需要再去獲取字體資源，從而使加載時間明顯加快。</p><p>並且系統字體的優點在於它與當前操作系統使用的相匹配，因此它的文本展示必然也是一個讓人舒適展示效果。</p><p>當然，上述 font-family 的定義不一定是最佳的。譬如天貓移動端在 font-family 最前面添加了 "PingFang SC",miui,..必定也有他們的業務上的考慮。但是一些 fallback 方案向後兼容的思想都是一致的，值得參考學習。</p><p>更多的關於字體方面的細節知識，可以看看這幾篇文章：</p><ul><li>你該知道的字體 -- font-family</li><li>Web 字體 font-family 再探祕</li><li>Using UI System Fonts In Web Design: A Quick Practical Guide</li><li>System Fonts in CSS</li><li>Apple’s San Francisco Font</li></ul><h1 class=pgc-h-arrow-right>前端佈局的兼容適配</h1><p>前端工程師的一大工作內容就是頁面佈局。無論在PC端還是移動端，頁面佈局的兼容適配都是重中之重。在整個前端發展的歷程中，佈局的方法也在不斷的推陳出新。</p><h1 class=pgc-h-arrow-right>佈局發展歷程</h1><p>簡單來說，前端的佈局發展歷程經歷了下面幾個過程：</p><p>表格佈局 --> 定位佈局 --> 浮動佈局 --> flexbox佈局 --> gridbox佈局</p><p>每一種佈局在特定時期都發揮了重要的作用，而每一種新的佈局方式的出現，往往都是因為現有的佈局方式已經在該時期已經無法很好的滿足開發者的需求，無法滿足越來越潮流的頁面佈局的方式。</p><p>以 Flexbox 的出現為例子，在 Flexbox 被大家廣為接受使用之前。我們一直在使用定位+浮動的佈局方式。像下面這個佈局：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7161c97b078245f69a7c81859b80a8f5><p class=pgc-img-caption></p></div><p>容器寬度不定，內部三個元素，均分排列且佔滿整個空間，並且垂直居中。如果使用定位+浮動的佈局方式，你無法很快想到最佳的解決方式。三個元素並排那麼必然需要浮動或者絕對定位，容器寬度不定且中間元素始終居中，需要顧慮的方面就很多了。也許使用 text-align: justufy 可以 hack 實現，等等等等。</p><p>然而，使用 flexbox 佈局的話，只需要：</p><pre><code>{font-family:    system-ui,-apple-system,BlinkMacSystemFont,segoe ui,Roboto,    Helvetica,Arial,    sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;}</code></pre><p>flexbox 的出現，一次性解決了流動佈局，彈性佈局，排列方式等多個問題。並且它是簡潔的，可控的。</p><p>再來看一個例子，水平垂直居中一個元素。使用 flexbox 也許是最便捷的：</p><pre><code>.container {display: flex;}.item {margin: auto;}</code></pre><p>最便捷的垂直居中方式。</p><h1 class=pgc-h-arrow-right>CSS Grid Layout</h1><p>OK，flexbox 已經足夠優秀了，為什麼 gird 網格佈局的出現又是為什麼？它解決了什麼 flex 佈局無法很好解決的問題？</p><p>看看下面這張圖：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/45cae52284e44a4495a5433e9577a27f><p class=pgc-img-caption></p></div><p><br></p><p>flexbox 是一維佈局，他只能在一條直線上放置你的內容區塊；而grid是一個二維佈局。它除了可以靈活的控制水平方向之外，還能輕易的控制垂直方向的佈局模式。對於上圖那樣的九宮格佈局，它就可以輕而易舉的完成。</p><p>一圖以蔽之，flexbox：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f35eb27c377747ae9d2eb4464b2898e2><p class=pgc-img-caption></p></div><p>gridbox：</p><div class=pgc-img><img alt=詳細講解移動端開發的屏幕、圖像、字體與佈局的兼容適配【圖文】 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d65f7b72987d48479928e124f076b8d1><p class=pgc-img-caption></p></div><p>圖片截取自陳慧晶老師在 2019 第五屆 CSS 大會上的分享 -- 新時代CSS佈局</p><p>在現階段，移動端佈局應當更多使用 flexbox 去完成（相對那些還在使用 float 佈局的），而考慮到未來頁面佈局的推陳出新。對於 Grid 佈局我們應當像前幾年對待 flexbox 一樣，重視起來，隨著兼容性的普及，Grid 佈局也會慢慢成為主流。</p><h1 class=pgc-h-arrow-right>最後</h1><p>好了，本文到此結束，希望對你有幫助 :)</p><h1 class=pgc-h-arrow-right>推薦移動端適配問題詳解相關文章</h1><p>《<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6815773718770352651/?group_id=6815773718770352651?group_id=6815773718770352651" rel="noopener noreferrer" target=_blank>大廠是怎麼做移動端適配的</a>》</p><p>《<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6808803145490104844/?group_id=6808803145490104844?group_id=6808803145490104844" rel="noopener noreferrer" target=_blank>手把手教你繞過移動端適配大坑</a>》</p><p class=pgc-end-literature>作者：ChokCoco</p><p class=pgc-end-literature>https://www.cnblogs.com/coco1s/p/11463599.html</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>詳細</a></li><li><a>講解</a></li><li><a>移動端</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/e71fb88c.html alt=和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8cd49cb368f1488b8c4a65a3fe556d75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e71fb88c.html title=和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你>和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c60a2936.html alt=防錯法，五大部分詳細講解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c74e008722e848e8b5a3509084a256d8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c60a2936.html title=防錯法，五大部分詳細講解>防錯法，五大部分詳細講解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/130f06ad.html alt="詳細講解常用的測試數據 邊界條件 次邊界條件" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1539169862065d6fa81a3b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/130f06ad.html title="詳細講解常用的測試數據 邊界條件 次邊界條件">詳細講解常用的測試數據 邊界條件 次邊界條件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/559f4a83.html alt=詳細講解交流接觸器的主要結構、工作原理和選用原則 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a36424ec62594f9186ccc21993839f5f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/559f4a83.html title=詳細講解交流接觸器的主要結構、工作原理和選用原則>詳細講解交流接觸器的主要結構、工作原理和選用原則</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/80e111da.html alt=電氣大牛詳細講解《PLC系統通信》，看完就明瞭（下） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6cb647b99e29452c91846d59bfe62a5d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/80e111da.html title=電氣大牛詳細講解《PLC系統通信》，看完就明瞭（下）>電氣大牛詳細講解《PLC系統通信》，看完就明瞭（下）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/54176d98.html alt=詳細講解有功、無功及功率因數 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/471500040653eb15d008 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/54176d98.html title=詳細講解有功、無功及功率因數>詳細講解有功、無功及功率因數</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/db1558fe.html alt=綠松石著名礦口詳細講解！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a91fdbc71e8645319f4fa3800d1ca2ac style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/db1558fe.html title=綠松石著名礦口詳細講解！>綠松石著名礦口詳細講解！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/475fb08f.html alt=最有趣生動的方法講解最詳細三極管知識，值得你一看 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a979e925ee504b8782e93358fc54b981 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/475fb08f.html title=最有趣生動的方法講解最詳細三極管知識，值得你一看>最有趣生動的方法講解最詳細三極管知識，值得你一看</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6e359400.html alt=一文詳細講解API網關核心功能和API管理擴展 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dd99cf31064849fa8e0b357249d15cf8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6e359400.html title=一文詳細講解API網關核心功能和API管理擴展>一文詳細講解API網關核心功能和API管理擴展</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7d12d19f.html alt=詳細講解不鏽鋼的典型腐蝕-晶間腐蝕-應力腐蝕 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/48ef6ee2e79a413b875d2e0e43d64abb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7d12d19f.html title=詳細講解不鏽鋼的典型腐蝕-晶間腐蝕-應力腐蝕>詳細講解不鏽鋼的典型腐蝕-晶間腐蝕-應力腐蝕</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/233e4c35.html alt=純手工土豆粉：做法詳細講解，勁道爽滑，乾淨無添加，老婆最愛吃 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f1a04ece7c4f405cb10c096874f04e9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/233e4c35.html title=純手工土豆粉：做法詳細講解，勁道爽滑，乾淨無添加，老婆最愛吃>純手工土豆粉：做法詳細講解，勁道爽滑，乾淨無添加，老婆最愛吃</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/35b81d7e.html alt=詳細講解：鋼筋直螺紋連接施工工藝 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cd872ce372a640ce9685d71385f8f8e6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/35b81d7e.html title=詳細講解：鋼筋直螺紋連接施工工藝>詳細講解：鋼筋直螺紋連接施工工藝</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/54e7205.html alt=「收藏」詳細講解什麼是焊接電弧，產生過程及工作原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ec0aa82bd8e54fa9adf0211dbdb4bcf8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/54e7205.html title=「收藏」詳細講解什麼是焊接電弧，產生過程及工作原理>「收藏」詳細講解什麼是焊接電弧，產生過程及工作原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ce501ce.html alt=詳細的講解-低壓母線槽和電纜的性能比較！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3b114f13248e484482ade5d0eff63b6d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ce501ce.html title=詳細的講解-低壓母線槽和電纜的性能比較！>詳細的講解-低壓母線槽和電纜的性能比較！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7e3b86c.html alt=詳細講解：礦山破碎機常見的幾種型號 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/55c1294b35b340e1826f0baa6e84a7c0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7e3b86c.html title=詳細講解：礦山破碎機常見的幾種型號>詳細講解：礦山破碎機常見的幾種型號</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>