<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>HTML中，閉合優先的神奇標籤 | 极客快訊</title><meta property="og:title" content="HTML中，閉合優先的神奇標籤 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/3ecb00024a310d6311ec"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/14038e9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/14038e9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/14038e9.html><meta property="article:published_time" content="2020-10-29T21:07:53+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:53+08:00"><meta name=Keywords content><meta name=description content="HTML中，閉合優先的神奇標籤"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/14038e9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>HTML中，閉合優先的神奇標籤</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>先看一段HTML</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/3ecb00024a310d6311ec></p><p>看上去就是展示了一張圖片而已。用瀏覽器打開看看。</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/3ecb00024a322233c0f3></p><p>咦？怎麼彈框了？看看源碼。</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/3ecc0000b694e47779e0></p><p>原來，img標籤src屬性裡的&lt;/noframes>把外層的&lt;noframes>給閉合了，導致src後半部分的script標籤被解析成了HTML，從而觸發了彈框。</p><p>這可奇怪了。&lt;/noframes>明明在雙引號裡面，怎麼就跨越了src屬性跨越了img標籤，漂洋過海地把外層的noframes標籤給閉合了？難道說，noframes標籤有一種特殊的魔力。它的閉合優先級，高於雙引號的完整性優先級，高於嵌套在內層的標籤的閉合優先級。</p><p>推薦下我的前端群：524262608，不管你是小白還是大牛，小編我都挺歡迎，不定期分享乾貨，包括我自己整理的一份2017最新的前端資料和零基礎入門教程，歡迎初學和進階中的小夥伴。</p><p>還有其他標籤也有這樣的魔力麼？我們fuzz一下看看。</p><p>fuzz找找</p><p>從w3school找到所有的HTML標籤：</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/3ecd00005cf5c40caafa></p><p>整理成tags.txt。</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/3eca000261def87f8f47></p><p>按照前述noframes的格式，依次把他們輸出到show.html中。</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/3ec90002703a18fa3451></p><p>打開show.html看一下效果。</p><p><img alt=HTML中，閉合優先的神奇標籤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/3ecb00024a33c831ce78></p><p>現在我們知道，這些標籤都是閉合優先級高於雙引號完整性優先級的特殊標籤。</p><ul class=list-paddingleft-2><li><p>&lt;!--</p></li><li><p>&lt;iframe></p></li><li><p>&lt;noframes></p></li><li><p>&lt;noscript></p></li><li><p>&lt;script></p></li><li><p>&lt;style></p></li><li><p>&lt;textarea></p></li><li><p>&lt;title></p></li><li><p>&lt;xmp></p></li></ul><p>攻擊場景</p><p>這個特性出現的原因，可能是源於瀏覽器對DOM樹的特殊處理。而在某些XSS攻擊的場景下，這一特性可能導致意想不到的結果。</p><p>特別是，對於郵箱或者論壇等支持富文本的應用中。出於防禦xss的考慮，一定會對用戶的輸入進行語法分析和檢查。但是，如果語法分析的結果和瀏覽器的識別結果不一致的話，就會形成xss的攻擊點。</p><p>推薦下我的前端群：524262608，不管你是小白還是大牛，小編我都挺歡迎，不定期分享乾貨，包括我自己整理的一份2017最新的前端資料和零基礎入門教程，歡迎初學和進階中的小夥伴。</p><p>比如文章開頭的那段noframs語句，如果將src中的內容統一理解為img的src屬性，就可能形成XSS攻擊。</p><p>這個特性還有哪些用處，就需要你的腦洞大開了：）</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>HTML</a></li><li><a>閉合</a></li><li><a>優先</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/9bc5e83f.html alt=HTML大整合（上） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/efc5e4d5fd8846878d09624aee6fc391 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9bc5e83f.html title=HTML大整合（上）>HTML大整合（上）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6e99d68b.html alt=HTML大整合（下） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6e99d68b.html title=HTML大整合（下）>HTML大整合（下）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6fe27eab.html alt="前端 | HTML入門基礎知識-網頁" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e7a0b61194f445b8b9e5ae330961d2ea style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6fe27eab.html title="前端 | HTML入門基礎知識-網頁">前端 | HTML入門基礎知識-網頁</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/50dab2fa.html alt=HTML+CSS：html元素分類之塊級元素、內聯元素、內聯塊級元素 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cab13d69e80a497b940ea14422743baf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/50dab2fa.html title=HTML+CSS：html元素分類之塊級元素、內聯元素、內聯塊級元素>HTML+CSS：html元素分類之塊級元素、內聯元素、內聯塊級元素</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5513d652.html alt=HTML元素類型如何分類？如何相互轉化？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5513d652.html title=HTML元素類型如何分類？如何相互轉化？>HTML元素類型如何分類？如何相互轉化？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4a8b411e.html alt=物理技巧，閉合電路動態分析及功率計算 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/e6cb6416170340d7862e56485242c717 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4a8b411e.html title=物理技巧，閉合電路動態分析及功率計算>物理技巧，閉合電路動態分析及功率計算</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/911da3b3.html alt=HTML基礎教程：瀏覽器中符號是怎麼顯示出來的 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4f09001c7ecf4fa8b2a860b46fb39210 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/911da3b3.html title=HTML基礎教程：瀏覽器中符號是怎麼顯示出來的>HTML基礎教程：瀏覽器中符號是怎麼顯示出來的</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0cee3ba9.html alt=我掏空了各大搜索引擎，整理了HTML圖片標籤筆記，滿滿乾貨 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/aadd00f23372497c84fadb3c1a4c76c2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0cee3ba9.html title=我掏空了各大搜索引擎，整理了HTML圖片標籤筆記，滿滿乾貨>我掏空了各大搜索引擎，整理了HTML圖片標籤筆記，滿滿乾貨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/98ec8409.html alt=高中物理：閉合電路歐姆定律知識點總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/224e7c19490c4eafa1aab19b2f14a3d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/98ec8409.html title=高中物理：閉合電路歐姆定律知識點總結>高中物理：閉合電路歐姆定律知識點總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d9582413.html alt=「建設工程」建設工程價款優先受償權的行使期限 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/0c5dd9e8-18e6-4bd7-8443-122b7f20b61e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d9582413.html title=「建設工程」建設工程價款優先受償權的行使期限>「建設工程」建設工程價款優先受償權的行使期限</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a37bffb1.html alt="HTML 文本格式化" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/452e10cfd88b40d4aab76849c5a86abb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a37bffb1.html title="HTML 文本格式化">HTML 文本格式化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95f5bcf7.html alt="HTML 的文本格式化" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/aebf981d-7dfa-420f-a45b-a8f0f7b66215 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95f5bcf7.html title="HTML 的文本格式化">HTML 的文本格式化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5d8aaafd.html alt="HTML基礎 補充——文本格式化標籤" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/616200014d7e00220eb7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5d8aaafd.html title="HTML基礎 補充——文本格式化標籤">HTML基礎 補充——文本格式化標籤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/88a65b35.html alt=HTML基礎教程：文本格式化實例 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/35111479-8b43-458b-a4f7-7fcf38c688d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/88a65b35.html title=HTML基礎教程：文本格式化實例>HTML基礎教程：文本格式化實例</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/99d461aa.html alt=HTML文本格式化 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/379bfb2586d648fcad2ba1e69b0b3b40 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/99d461aa.html title=HTML文本格式化>HTML文本格式化</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>