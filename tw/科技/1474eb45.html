<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 | 极客快訊</title><meta property="og:title" content="繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/46e600029753e04e1b28"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1474eb45.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1474eb45.html><meta property="article:published_time" content="2020-11-14T21:03:32+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:32+08:00"><meta name=Keywords content><meta name=description content="繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/1474eb45.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>本來半年前就做好的東西了，因為各種各樣的原因拖到現在才得閒發出來，算是讓大夥久等了</p><p>相信大家之前都擼了不少一元pos機吧。</p><p>上面有款藍牙模塊tc35661，因為需要協議棧才能使用，所以困擾了不少人，大家基本的處理方法都是棄之堆灰。</p><p>直到論壇大神@yht7891984 給出了初始化和協議轉接的方法，見：</p><p>stm32驅動藍牙pos機裡面的藍牙模塊 tc35661:http://bbs.mydigit.cn/read.php?tid=1682908</p><p>於是這個芯片得以能玩轉。然而因為需要一些編程水平，所以大家的選擇還是繼續讓這個模塊繼續堆灰。</p><p>於是我就有了個想法，做個透傳模塊，於是有了這個帖子：</p><p>不用拆芯片，不用調程序，直接在pos機板上玩TC35661藍牙模塊|http://bbs.mydigit.cn/read.php?tid=1690088</p><p>但是這樣離方便使用，可以零基礎玩轉還有一些距離，為了達到最終完美，於是就有了本貼</p><p>首先需要找一款有兩個串口的MCU，而且要體積小，成本低，於是選擇了efm32tg110這個芯片（具體為什麼成本低，樓下細說）</p><p>這款芯片的手冊截圖</p><p>arm cortex m3內核 運行在32mhz（強大運算足夠處理大數據量下的協議棧）</p><p>32k flash+4kram</p><p>兩個串口（這是最關鍵的）</p><p>有一路12位dac，兩路12位adc（麻雀雖小，五臟俱全），方便和藍牙搭配做便攜式小設備</p><p>體積小，qfn封裝</p><p>功耗低</p><p>等等</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e600029753e04e1b28></p><p>原理圖</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027a02693168c5></p><p>pcb</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002974f8dd41d4f></p><p>pcb的面積很小，就是一個正常藍牙模塊大小+天線+排針佔用的面積</p><p>30mm*16mm</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e90000a5a4fcc9306f></p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e400029fe700d70086></p><p>沒有用上的引腳全部引出，其中包括完整的dac和adc，這樣的好處是，以後如果有餘力開發，可以直接用這個最小藍牙板做一個無線的測量儀器，或者無線小控制器</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e5000279fda5a70b1a></p><p>打好的pcb</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027a072ba068e6></p><p>焊接完成的模塊正面</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e800024213edd21dea></p><p>焊接完成的模塊背面</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002975c59f4181b></p><p>上電以後，可以在手機或者帶藍牙的電腦上搜搜到藍牙模塊 默認名稱是 POSYSTORAGE_TC35661</p><p>設備地址碼是唯一的，防止衝突（使用了單片機的唯一uid）</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000002ef15129e2b></p><p>連接成功，正常通訊中</p><p>電腦通過串口發送mydigit</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a5a789584e54></p><p>手機通過藍牙發送2545889167 posystorage</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027a0870392914></p><p>正常聯機的各種狀態指示信息</p><p>第一行提示當前波特率</p><p>第二行提示已經初始化成功啦</p><p>第三行提示藍牙已連接</p><p>第四號提示藍牙已斷開</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e70002551b431a33c4></p><p>板子正面有個LED</p><p>在初始化過程中快速閃爍。當初始化成功後，轉為慢閃</p><p>當連接後，變成常亮。斷開連接則為慢閃</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027a4f1320cd66></p><p>板子有6個排針孔。</p><p>vcc和gnd是電源，不多說</p><p>rx tx為透傳串口</p><p>swd和sck為板載mcu調試和程序下載接口。也可做普通io使用</p><p>BT指令的詳細解釋</p><p>為了方便使用，實現一鍵零基礎操作，我就搞了個BT指令集（參考市面上的某些無線模塊的AT指令集）。這樣一些簡單的配置，比如模塊改名或者更改波特率什麼的就不需要程序編譯程序，直接BT指令操作就行。</p><p>BT指令的使用方法：首先連接串口，給藍牙模塊上電，等待初始化完成（指示燈由快閃變為慢閃為初始化成功，或者串口提示初始化成功）</p><p>不用連接藍牙（即在非連接狀態下）</p><p>輸入BT和BT+xxx指令來實現操作。</p><p>注意，所有的指令均不需要換行，不需要加回車</p><p>比如說，輸入BT</p><p>回覆BT OK！</p><p>表示串口正常，指令正確，工作正常</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e6000297f4fba04989></p><p>輸入BT_ABOUT 顯示關於信息，版本信息，設備mac，固件版本，作者信息</p><p>1.0版本的消息</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea00000374348ea46c></p><p>1.1版本的消息</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a64b639c1896></p><p>輸入BT_LIST</p><p>將羅列 BT指令集支持的所有指令</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f5db93ef23></p><p>BT_MSG_ON打開提示信息</p><p>如果打開了提示信息，會提示初始化狀態，是否聯機得到信息</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000297f209478687></p><p>BT_MSG_OFF關閉提示信息</p><p>所有提示信息均不顯示</p><p>這樣的好處是，如果是外接MCU使用，就可以真正透傳消息，而不受提示信息的干擾</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f348dd9527></p><p>BT_RES_FAC 恢復原始出廠狀態，沒啥好講的</p><p>藍牙名稱恢復TC35661_POSYSTORAGE</p><p>波特率恢復115200</p><p>默認消息提示打開</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000297f7b66a0bdb></p><p>BT_HELP 幫助信息，提示有些BT指令怎麼使用，比如說，怎麼設置串口波特率和結束符，奇偶校驗什麼的</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a64fd19683ce></p><p>BT_RENAME 更改藍牙的名稱。更改後下次上電生效</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027aa483ef4eca></p><p>BT_UART_BPS 更改波特率。更改後下次上電生效</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027aa57fa04252></p><p>如果輸入了錯誤指令，會這樣提示。比如說輸了小寫什麼的</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e7000255a7b07a9ebc></p><p>開始講述製作心路歷程</p><p>之前樓上不是說了，一直在苦苦尋覓 “兩個串口，而且要體積小，成本低的MCU”</p><p>找了一久，突然一日在某論壇商家看見一款拆機的板子，價格便宜（為了避免打廣告嫌疑，就不說商家明和價格了）</p><p>賣家的圖</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000003e41c2fb346></p><p>這個板子，上面有一個似MCU的芯片，沒有主絲印，數了下24腳，封裝應該是QFN24</p><p>然後就開始腦洞了~</p><p>以下幾個條件判斷出了大概80%的概率是efm32的MCU</p><p>如圖</p><p>1、封裝是QFN24，能對應上</p><p>2、芯片側面所有腳都是io或者電源，沒有gnd腳，說明gnd只有中間大焊盤有</p><p>3、電源引腳能對上三，其中兩個104的電容顏色是一樣的，另外一個是105，不是一個材質（顏色有微差異）</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a6d3059353aa></p><p>這樣確定下來可能有三款芯片</p><p>efm32tg110</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027b1993a9226a></p><p>efm32zg110</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e500027b1e6de4dd27></p><p>和efm32hg110</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027b1879cb9a91></p><p>三款是屬於不同的產品系列線，但是引腳和封裝都是一樣的，看外觀無法辨別。</p><p>猶豫許久，決定買來碰碰運氣</p><p>因為便宜嘛，買少了郵費不划算，所以買了一小包</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e60002986c8f9d87a6></p><p>體積很小的pos機（又是pos機，摔~~~~~）</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000003e1eb3a9dc8></p><p>拆開，第一個拆的有點失敗哈，太暴力了，不過主要元件沒事</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0ee85aaba63></p><p>各部分拆開對照圖</p><p>22合一友情上鏡~~</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0ef26665a77></p><p>後面的電池基本沒電了</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e40002a0f164763e11></p><p>板子正面</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e700025634e551dde8></p><p>板子背面</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e40002a0f212918ba2></p><p>小6腳芯片特寫。到現在我也不知道這是啥功能</p><p>反正不是豬腳，不重要，不管了</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002431e8682035c></p><p>右上角有個雙運放</p><p>注意到板子是4年前的老東西了，怪不得電池都沒電了</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000298792565de94></p><p>繼續排除走線，發現和efm32吻合度99%，所有電源腳都能對上，切引出來調試接口，就是圖上上錫的那兩個焊盤</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256380ca246e1></p><p>掏出自制jlink（做個小巧漂亮的jlink調試器|http://bbs.mydigit.cn/read.php?tid=2037182）</p><p>按手冊接線開始測試</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256af2e3d0334></p><p>配套好simplicity和jlink軟件</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027b938b87ae04></p><p>一聯機，果然大驚喜，啊hhhhhh</p><p>賺翻了賺翻了</p><p>果然賭對了</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000298e7d2d7c332></p><p>這樣看不出來是吧，我圈圈重點</p><p>看到沒 energy micro</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256b136812ed0></p><p>energy micro被silion lab收購</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256ae0cd5aef9></p><p>這尼瑪不就是efm32 哈哈哈哈哈哈</p><p>圖上說芯片被鎖住了，那就嘗試解鎖 使用unnlock efm32gxxxx指令</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a74b37ba1da7></p><p>解鎖成功 so easy~~</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002439dc8d7e72b></p><p>再次聯機</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002439e35023a55></p><p>看到沒有 arm cortex m3內核，這樣果斷確定是efm32tg110</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e40002a178f396e8f0></p><p>因為只有他是cortex m3內核，另外兩個是cortex m0內核</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a75087dcb0bb></p><p>繼續來確定下芯片容量</p><p>使用jflash</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea0000046c79a43e08></p><p>先選該系列最大容量，嘗試能不能讀寫成功</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46ea0000046b0fb85439></p><p>顯然是可以的</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e7000256b416a7438d></p><p>沒問題~~</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a752a9ed621e></p><p>最終確定型號EFM32TG110F32</p><p>得到整個“賭”芯片中最好的結局，三個系列中配置最好的mcu，通型號中儲存空間最大的，哈哈哈~</p><p>繼續玩，焊接個led上去，嘗試成功點燈</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e6000298eaf4efdd30></p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea0000046ee63925c2></p><p>吧外殼都拆掉，元件進行分揀，方便保存</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e8000243a31b966d5b></p><p>這些是不要的垃圾</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea00000470d452c513></p><p>先說說怎麼靠使用Simplicity Studio 來進行快速的，簡單的，圖形化傻瓜配置的點燈實驗，以方便快速測試</p><p>首先下載安裝並打開Simplicity Studio，新建工程</p><p>選擇本貼的豬腳efm32tg110f32</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c0d5ab8374a></p><p>選擇Simplicity configurator program，圖形化配置工程</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e8000244193aa5dfa2></p><p>名字隨便寫</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e6000299492369c145></p><p>選擇led引腳</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e80002441a5d9d08a3></p><p>配置為推輓</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e564d42a51></p><p>main函數很簡單</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7ca3fdb9984></p><p>很簡單，是不是</p><p>複製代碼</p><ol class=list-paddingleft-2><li><p>#include "em_device.h"</p></li><li><p>#include "em_chip.h"</p></li><li><li><li><li><li><p>int main(void)</p></li><li><p>{</p></li><li><p>int i;</p></li><li><p>CHIP_Init();</p></li><li><p>enter_DefaultMode_from_RESET();</p></li><li><p>while (1)</p></li><li><p>{</p></li><li><p>for(i = 0; i &lt; 200000; i++);//做延時作用</p></li><li><p>GPIO_PinOutToggle(gpioPortC, 15);//翻轉LED</p></li><li><p>}</p></li><li><p>}</p></li><li><li><li><li></li></li></li></li></li></li></li></li></ol><p>然後，編譯下載，就可以看見led開始賣力的閃爍了</p><p>好了，說是製作心路歷程，現在說的有點跑題了，拉回來哈</p><p>拿出之前玩efm32tg剩下的轉接板。反正引腳都一樣，直接往上懟唄</p><p>這裡吐槽下垃圾板廠的v割工，都吧絲印割沒了你知道麼。精度這麼差，哎~</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7cfce7f283c></p><p>拆下芯片</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002994b2ee8e2fe></p><p>焊接過程略過不表</p><p>qfn總體不怎麼好焊接，需要耐心和細心</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e73335de4a></p><p>背面全是容阻元件。這MCU電源腳奇多</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e80002441c61360853></p><p>日常成功點燈</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c117cf35ee3></p><p>這裡放下這個小核心板的原理圖和pcb截圖</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e60002994c24d111d7></p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46e500027c14041cd371></p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e60002994e763c1a33></p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a7d19afbef8d></p><p>背面用絲印畫了個mini小壁虎，結果實物出來，這都啥玩意啊？四不像？</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000004e817c74b60></p><p>繼續哈，拆完芯片的板子不能浪費</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46ea000004e957a96b3f></p><p>來跑下走線，方便在板玩耍</p><p>跑走線第一步，日常先上銼刀嘛</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e800024420902a35c0></p><p>最終標註出所有io的走線結果，這裡還需要感謝壇友 @shi988</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e80002442182e1c825></p><p>好了，一個破板子研究了半天，終於要步入正題了</p><p>開始研究藍牙透傳</p><p>初期測試是這樣的</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a7d4efc66723></p><p>調通透傳程序以後</p><p>畫了1.0版本的轉接板</p><p>打樣歸來如圖</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea000005424e415ffc></p><p>開始焊接藍牙轉接板</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e40002a2238071d23a></p><p>拆下芯片+轉接板背面</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a8167ef41b1b></p><p>tc35661模塊來自某pos板子</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea0000054040fc63de></p><p>焊接過程略過不表</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46ea00000541bc901c3a></p><p>焊完才發現，疏忽大意陰溝裡面翻船了</p><p>引腳接錯了，只能靠飛線補救了</p><p></p><p>好吧，修改好再打一版，哎</p><p>v1.1來了</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e90000a818924098b8></p><p>這次就不用飛線了嘛，舒服</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e800024465cff257be></p><p>可以用直排針這樣焊，能比彎排針顯著減小體積，不過也犧牲了些許牢固程度</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e8000244671a02ac5e></p><p>因為板子位置有限。部分元件標註了參數值</p><p>剩下沒標的，都是104電容 100nF</p><p>圖中紅圈圈中</p><p>板子上的元件，除了106電容，基本都可以從原芯片的小板子上拆到</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/46ea00000545d0d89d72></p><p>為了保護元件，建議套個熱縮管</p><p>左邊的板子是拆完有用元件後的樣子~</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/46e90000a81949dcd9f9></p><p>最後來個大合影</p><p><img alt=繼續榨乾一元pos機價值！製作TC35661藍牙透傳轉接板 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/46e500027c548a68ae28></p><p>源代碼，固件和原理圖需至原帖中獲取：http://bbs.mydigit.cn/read.php?tid=2281216</p><p>謝謝觀看！</p><p>瀏覽更多精彩內容請登錄數碼之家網站</p><p>技術交流請聯繫原作者</p><p>作者：2545889167</p><p>本文來源：數碼之家</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>繼續</a></li><li><a>榨乾</a></li><li><a>pos</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/09c5a5e3.html alt="海南繼續發佈颱風三級預警 瓊州海峽客滾輪14日6時起停運" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/09c5a5e3.html title="海南繼續發佈颱風三級預警 瓊州海峽客滾輪14日6時起停運">海南繼續發佈颱風三級預警 瓊州海峽客滾輪14日6時起停運</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c397121d.html alt="生產資質審批繼續“暫停”狀態 ?新能源汽車將清理行業投機者" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/6146002180498a27222c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c397121d.html title="生產資質審批繼續“暫停”狀態 ?新能源汽車將清理行業投機者">生產資質審批繼續“暫停”狀態 ?新能源汽車將清理行業投機者</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a0acaa48.html alt="西方國家繼續對俄外交制裁 俄稱西方指控是無根據挑釁" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a0acaa48.html title="西方國家繼續對俄外交制裁 俄稱西方指控是無根據挑釁">西方國家繼續對俄外交制裁 俄稱西方指控是無根據挑釁</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ebad378f.html alt=繼續學習打卡，還真心學不會了，努力，堅持 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f36d6d47a06840aaaf78138853b9d9d1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ebad378f.html title=繼續學習打卡，還真心學不會了，努力，堅持>繼續學習打卡，還真心學不會了，努力，堅持</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5b49359d.html alt="北方炎熱高溫繼續蔓延 南方雨水南壓需防強對流" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RxmmAIDIe4W6B0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5b49359d.html title="北方炎熱高溫繼續蔓延 南方雨水南壓需防強對流">北方炎熱高溫繼續蔓延 南方雨水南壓需防強對流</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/899a73b7.html alt=熱水器接線板並不好買，明天白天繼續吧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/86bb9c977a634fdfb9378f29bc1d804a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/899a73b7.html title=熱水器接線板並不好買，明天白天繼續吧>熱水器接線板並不好買，明天白天繼續吧</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/42daa8e0.html alt=百度和好未來的面試官把我榨乾了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/27a2a1dbff764465a2cd291e9de96c07 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/42daa8e0.html title=百度和好未來的面試官把我榨乾了>百度和好未來的面試官把我榨乾了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/87b5866e.html alt=雪峰嶺公園設施如何繼續完善 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/87b5866e.html title=雪峰嶺公園設施如何繼續完善>雪峰嶺公園設施如何繼續完善</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b4b6cbc4.html alt=“下雨天”繼續播放！本週四川恐怕基本被雨水“承包”了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1531139720048ffac15e6c4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b4b6cbc4.html title=“下雨天”繼續播放！本週四川恐怕基本被雨水“承包”了>“下雨天”繼續播放！本週四川恐怕基本被雨水“承包”了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e92c9b4a.html alt=《《繼續》》 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e92c9b4a.html title=《《繼續》》>《《繼續》》</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6a4073d7.html alt="《愛回家》播放3週年收視繼續高企 細數10個劇中你不知道的祕事" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/57d84f52aaee481595f4922730d67bec style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6a4073d7.html title="《愛回家》播放3週年收視繼續高企 細數10個劇中你不知道的祕事">《愛回家》播放3週年收視繼續高企 細數10個劇中你不知道的祕事</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8d04001a.html alt=《追我吧》並未停播，改名以網綜形式繼續播出，只有會員才能看 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/607747d5747a49b4822bc1a7065ee4c0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8d04001a.html title=《追我吧》並未停播，改名以網綜形式繼續播出，只有會員才能看>《追我吧》並未停播，改名以網綜形式繼續播出，只有會員才能看</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b2f05022.html alt=《香蜜沉沉燼如霜》繼續領跑熱播榜，播放量驚人！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15359771387977139d95782 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b2f05022.html title=《香蜜沉沉燼如霜》繼續領跑熱播榜，播放量驚人！>《香蜜沉沉燼如霜》繼續領跑熱播榜，播放量驚人！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/227021ae.html alt=中日對抗來襲！陳夢繼續圍剿伊藤美誠，央視5天全程播放國乒戰役 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/67c9cda7-e2d9-4955-88ae-e84686cbf513 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/227021ae.html title=中日對抗來襲！陳夢繼續圍剿伊藤美誠，央視5天全程播放國乒戰役>中日對抗來襲！陳夢繼續圍剿伊藤美誠，央視5天全程播放國乒戰役</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/18c1521a.html alt="今起3天南京好天氣繼續循環播放 適宜外出賞秋" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/18c1521a.html title="今起3天南京好天氣繼續循環播放 適宜外出賞秋">今起3天南京好天氣繼續循環播放 適宜外出賞秋</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>