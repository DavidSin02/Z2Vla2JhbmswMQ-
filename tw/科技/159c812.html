<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨ | æå®¢å¿«è¨Š</title><meta property="og:title" content="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/8a0a10ae0db9431c8e2cdf7d935e3dcd"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/159c812.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/159c812.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/159c812.html><meta property="article:published_time" content="2020-10-29T20:58:37+08:00"><meta property="article:modified_time" content="2020-10-29T20:58:37+08:00"><meta name=Keywords content><meta name=description content="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/159c812.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä¸ç®¡åœ¨ä»»ä½•é ˜åŸŸï¼Œåªè¦èƒ½è®“éç¨‹åºå“¡èƒ½é€šéæ‹–æ‹½ä¾†å¯¦ç¾ 2D å’Œ 3D çš„è¨­è¨ˆåœ–å°±æ˜¯å¾ˆç‰›çš„ï¼Œä»Šå¤©æˆ‘å€‘ä¸éœ€è¦ 3dMaxs ç­‰è¨­è¨ˆè»Ÿä»¶ï¼Œç›´æ¥ç”¨ HT å°±èƒ½è‡ªå·±å¯«å‡ºä¸€å€‹ 2D 3D ç·¨è¼¯å™¨ï¼Œå¯¦ç¾é€™å€‹åŠŸèƒ½æˆ‘è¦ºå¾—æˆå°±æ„Ÿé‚„æ˜¯çˆ†æ£šçš„ï¼Œå“ˆå“ˆï¼åªè¦ä½ æœƒæƒ³ï¼Œèƒ½åšï¼Œå°±èƒ½æ ¹æ“šé€™å€‹ç·¨è¼¯å™¨å»¶å±•æˆ big thingï¼</p><p>ä¸‹é¢æ˜¯å¯¦ç¾æ•ˆæœåœ–ï¼š</p><div class=pgc-img><img alt="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8a0a10ae0db9431c8e2cdf7d935e3dcd><p class=pgc-img-caption></p></div><p>æˆ‘å€‘é¦–å…ˆå°‡æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„ json æ–‡ä»¶ä½œç‚ºçŸ¢é‡åœ–è¼¸å‡ºï¼ŒçŸ¢é‡åœ–çš„å¥½è™•æ˜¯çµ„ä»¶ä¸Šçš„åœ–å…ƒç¸®æ”¾éƒ½ä¸æœƒå¤±çœŸï¼Œä¸¦ä¸”ä¸å†éœ€è¦ç‚º Retina é¡¯ç¤ºå±æä¾›ä¸åŒå°ºå¯¸çš„åœ–ç‰‡ï¼Œ åœ¨ devicePixelRatio å¤šæ¨£åŒ–çš„ç§»å‹•æ™‚ä»£ï¼Œ è¦å¯¦ç¾å®Œç¾çš„è·¨å¹³è‡ºï¼ŒçŸ¢é‡å¯èƒ½æ˜¯çš„æœ€ä½æˆæœ¬çš„è§£æ±ºæ–¹æ¡ˆã€‚</p><p>HT é€šé ht.Default.setImage å‡½æ•¸ä¾†è¨»å†Šåœ–ç‰‡ï¼Œå¯ä»¥æ˜¯ base64ã€jpgã€ png ä»¥åŠ json æ ¼å¼çš„åœ–ç‰‡ï¼š</p><pre>ht.Default.setImage('edit', 'images/default.json');ht.Default.setImage('shape', 'images/edit.json');ht.Default.setImage('edge', 'images/edge.json');ht.Default.setImage('circle', 'images/circle.json');ht.Default.setImage('roundRect', 'images/roundRect.json');ht.Default.setImage('rect', 'images/rect.json');</pre><p>é€™é‚Šæˆ‘è¨»å†Šçš„æ˜¯é ‚éƒ¨å·¥å…·æ¢çš„ 6 å€‹åœ–ç‰‡ï¼Œåˆ†åˆ¥ç‚ºâ€œç·¨è¼¯â€ã€â€œä¸è¦å‰‡åœ–å½¢â€ã€â€œåœ“â€ã€â€œåœ“è§’çŸ©å½¢â€ã€â€œçŸ©å½¢â€ä»¥åŠâ€œé€£ç·šâ€ï¼ŒåŠŸèƒ½å¦‚å…¶åã€‚ä¸»è¦æ“ä½œï¼šé»æ“Šå·¥å…·æ¢çš„ä»»æ„ä¸€å€‹åœ–æ¨™ï¼Œåœ¨å·¥å…·æ¢ä¸‹çš„ç©ºç™½è™•æ‹–å‹•é¼ æ¨™ï¼Œå³å¯å¯¦ç¾ç¹ªåœ–ã€‚</p><div class=pgc-img><img alt="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/67aaabadd5c944ac8e3d08e77617d3fe><p class=pgc-img-caption></p></div><p>é‚£éº¼æ¥ä¸‹ä¾†çš„æ­¥é©Ÿå°±æ˜¯å‰µå»ºâ€œå·¥å…·æ¢â€ï¼ŒHT å°è£äº†å·¥å…·æ¢çš„çµ„ä»¶ ht.widget.Toolbar åœ¨é€™å€‹å‡½æ•¸çš„åƒæ•¸ä¸­å¡«å…¥å·¥å…·æ¢ä¸­çš„å…ƒç´ ï¼Œå…·é«”æ“ä½œæ–¹æ³•è«‹çœ‹ HT for Web å·¥å…·æ¢æ‰‹å†Šï¼Œé€™é‚Šå€¼å¾—æ³¨æ„çš„ä¸€å€‹é»æ˜¯ï¼ŒgroupId æ˜¯å°‡ä¸€å€‹é¡å‹çš„å…ƒç´ åˆ†çµ„ï¼Œåˆ†çµ„çš„å¥½è™•æ˜¯åœ¨æˆ‘å€‘é¸ä¸­é€™å€‹çµ„ä¸­çš„ä»»æ„ä¸€å€‹å…ƒç´ çš„æ™‚å€™ï¼Œå…¶ä»–çš„å…ƒç´ éƒ½ä¸é¸ä¸­ï¼Œå°±èƒ½é€ æˆâ€œå–®é¸â€çš„æ•ˆæœï¼š</p><pre>toolbar = new ht.widget.Toolbar();toolbar.addItem(createItem('edit', 'edit', 'ç·¨è¼¯', [ new ht.graph.EditInteractor(graphView)]));//é€™é‚Šæœ€å¾Œä¸€å€‹åƒæ•¸æ•¸çµ„å¯æ”¾ç½®å¤šå€‹äº¤äº’å™¨ï¼Œå…·é«”å®šç¾©è«‹åƒè¦‹ HT for Web å…¥é–€æ‰‹å†Š//addItem(item, index)å¯åœ¨æŒ‡å®šindexä½ç½®æ’å…¥æ–°å…ƒç´ ï¼Œindexç‚ºç©ºä»£è¡¨æ’å…¥åˆ°æœ€å¾Œã€‚toolbar.addItem(createItem('shape', 'shape', 'ä¸è¦å‰‡åœ–å½¢', [ new CreateShapeInteractor(graphView)]));toolbar.addItem(createItem('circle', 'circle', 'åœ“', [ new CreateNodeInteractor(graphView)]));toolbar.addItem(createItem('roundRect', 'roundRect', 'åœ“è§’çŸ©å½¢', [ new CreateNodeInteractor(graphView)]));toolbar.addItem(createItem('rect', 'rect', 'çŸ©å½¢', [ new CreateNodeInteractor(graphView)]));toolbar.addItem(createItem('edge', 'edge', 'é€£ç·š', [ new CreateEdgeInteractor(graphView)]));toolbar.getItemById('edit').selected = true;//é»˜èªé¸ä¸­â€œç·¨è¼¯â€toolbar.getSelectBackground = function(){//é‡è¼‰è‡ªå®šç¾©é¸ä¸­èƒŒæ™¯é¡è‰² return '#eee';}</pre><p>åœ¨ä¸Šé¢ç”¨åˆ°çš„ addItem å‡½æ•¸æ˜¯å‘ ht.widget.Toolbar å·¥å…·æ¢ä¸­æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ çš„å…ƒç´ æ˜¯å¾ createItem å‡½æ•¸ä¸­å‚³å›ä¾†çš„å…ƒç´ ï¼Œæˆ‘å€‘åœ¨é€™å€‹å‡½æ•¸ä¸­åˆ©ç”¨äº† vector çŸ¢é‡å‰µé€ äº†ä¸€å€‹çŸ©å½¢å’Œä¸€å¼µåœ–ç‰‡çš„çµåˆé«”ï¼Œæˆ‘å€‘å°‡ä¹‹å‰è¨»å†Šå¥½çš„çŸ¢é‡åœ–å‚³çµ¦é€™å€‹çµåˆé«”ä¸­çš„â€œåœ–ç‰‡â€ï¼Œç„¶å¾Œé€šéæ§åˆ¶é€™å€‹åœ–ç‰‡çš„â€œæ¸²æŸ“é¡è‰²â€ï¼Œä¾†éæ¿¾å·¥å…·æ¢é¸ä¸­å’Œéé¸ä¸­ç‹€æ…‹çš„é¡è‰²ï¼š</p><pre>function createItem(id, iconName, toolTip, interactorsArr){ var item = { id: id,//å·¥å…·æ¢å…ƒç´ çš„å”¯ä¸€æ¨™ç¤ºï¼Œå¦‚æœè¨­ç½®å¯é€šégetItemByIdç²å– unfocusable: true,//å·¥å…·æ¢å…ƒç´ æ˜¯å¦ä¸å¯ç²å–ç„¦é»ï¼Œé»˜èªé¼ æ¨™æ»‘éæ™‚æœƒé¡¯ç¤ºä¸€å€‹çŸ©å½¢é‚Šæ¡†ï¼Œå¯è¨­ç½®ç‚ºtrueé—œé–‰æ­¤æ•ˆæœ icon: iconName,//å·¥å…·æ¢å…ƒç´ çš„åœ–æ¨™ toolTip: toolTip,//å·¥å…·æ¢å…ƒç´ çš„æ–‡å­—æç¤º groupId: 'bar'//å°å·¥å…·æ¢å…ƒç´ é€²è¡Œåˆ†çµ„ï¼ŒåŒä¸€å€‹åˆ†çµ„å…§çš„å…ƒç´ é¸ä¸­æœƒè‡ªå‹•å‡ºç¾äº’æ–¥æ•ˆæœ }; var json = ht.Default.getImage(iconName); var width = json ? json.width : 16; var height = json ? json.height : 16; item.icon = { width: width + 8, height: height + 8, fitSize: json ? json.fitSize : false, comps: [ { type: 'rect',//çµ„ä»¶é¡å‹ rect: [0, 0, width + 8, height + 8]//æŒ‡å®šçµ„ä»¶ç¹ªè£½åœ¨çŸ¢é‡ä¸­çš„çŸ©å½¢é‚Šç•Œ }, { type: 'image', name: iconName, color: {//æ¸²æŸ“é¡è‰²ï¼ŒHTç³»çµ±æœƒè‡ªå‹•æ¡ç”¨è©²é¡è‰²å°åœ–ç‰‡å…§å®¹é€²è¡Œæ¸²æŸ“ func: (data, view) =&gt; { return '#000' } } } ] }; item.action = function(){//å‡½æ•¸é¡å‹ï¼Œå·¥å…·æ¢å…ƒç´ è¢«é»æ“Šæ™‚èª¿ç”¨ for(var i = 0; i &lt; toolbar.getItems().length; i++){ toolbar.getItems()[i].icon.comps[1].color = '#000'; } item.icon.comps[1].color = '#1E90FF'; graphView.setInteractors(interactorsArr);//çµ„åˆå¤šå€‹äº¤äº’å™¨ graphView.sm().clearSelection();//æ¯æ¬¡å·¥å…·æ¢æœ‰é»æ“Šçš„æ™‚å€™å°±æ¸…ç©ºæ‰€æœ‰çš„é¸ä¸­ } return item;}</pre><p>æ¥è‘—åˆ©ç”¨ HT å°è£çš„é¢æ¿çµ„ä»¶ ht.widget.BorderPane å°‡æ•´å€‹ç•Œé¢åˆ†æˆå…©å€‹éƒ¨åˆ†ï¼šé ‚éƒ¨å’Œåº•éƒ¨ã€‚æˆ‘å€‘åˆåˆ©ç”¨ HT å°è£çš„ ht.widget.SplitView åˆ†å‰²çµ„ä»¶å°‡åº•éƒ¨åˆ†ç‚ºä¸Šä¸‹å…©å€‹éƒ¨åˆ†ï¼Œæœ€å¾Œå°‡é€™å€‹å¤–é‚Šæ¡† borderPane æ·»åŠ é€² body é«”ä¸­ï¼š</p><pre>splitView = new ht.widget.SplitView(graphView, g3d, 'v', 0.5);borderPane = new ht.widget.BorderPane();borderPane.setTopView(toolbar);borderPane.setCenterView(splitView);borderPane.addToDOM(); </pre><p>æ•´å€‹å ´æ™¯éƒ½è£½ä½œå®Œç•¢ï¼Œæ¥è‘—å°±æ˜¯åŠŸèƒ½éƒ¨åˆ†ã€‚æˆ‘å€‘æŠŠè£½ä½œâ€œä¸è¦å‰‡åœ–å½¢â€ä½œç‚ºä¸€å€‹å–®ç¨çš„éƒ¨åˆ†æ”¾åˆ° CreateShapeInteractor.js ä¸­ï¼Œè£½ä½œâ€œåœ“â€ã€â€œåœ“è§’çŸ©å½¢â€ä»¥åŠâ€œçŸ©å½¢â€ä¸‰å€‹éƒ¨åˆ†åˆ†ç‚ºä¸€å€‹éƒ¨åˆ†æ”¾åˆ° CreateNodeInteractor.js ä¸­ï¼Œå°‡â€œé€£ç·šâ€åˆ†ç‚ºä¸€å€‹éƒ¨åˆ†æ”¾åˆ° CreateEdgeInteractor.js ä¸­ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°‡å°é€™ä¸‰å€‹ js æ–‡ä»¶ä¸€å€‹å€‹è§£æã€‚</p><div class=pgc-img><img alt="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/599278788b2b407bb988471e275f45bf><p class=pgc-img-caption></p></div><p>é€™ä¸‰å€‹ js æ–‡ä»¶çš„å…±åŒé»æ˜¯é€šé HT å°è£çš„ç¹¼æ‰¿å‡½æ•¸ ht.Default.def ç¹¼æ‰¿ä¸¦å‰µå»ºæ–°çš„é¡ï¼Œé€™ä¸‰å€‹é¡æˆ‘å€‘åœ¨å‰é¢çš„ä»£ç¢¼ä¸­æ˜¯æœ‰æåˆ°çš„ï¼š CreateShapeInteractorã€CreateNodeInteractor ä»¥åŠ CreateEdgeInteractor é¡ï¼Œéƒ½å¤§åŒå°ç•°ï¼Œæˆ‘å€‘é€™è£¡é‡é»è§£æ CreateNodeInteractor.js æ–‡ä»¶ã€‚</p><p>é¦–å…ˆå°±æ˜¯è¦è²æ˜å®šç¾©ä¸€å€‹ CreateNodeInteractor é¡ï¼Œå°±æ˜¯é€™ä¸‰å€‹éƒ¨åˆ†ï¼š</p><div class=pgc-img><img alt="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1b455e08680242798f10e74d39089e28><p class=pgc-img-caption></p></div><pre>var CreateNodeInteractor = function (graphView) { CreateNodeInteractor.superClass.constructor.call(this, graphView); };ht.Default.def(CreateNodeInteractor, ht.graph.Interactor, { //è‡ªå®šç¾©é¡ï¼Œç¬¬ä¸€å€‹åƒæ•¸ç‚ºé¡åï¼Œç¬¬äºŒå€‹åƒæ•¸ç‚ºç¹¼æ‰¿çš„é¡ï¼Œç¬¬ä¸‰å€‹åƒæ•¸ç‚ºæ­¤é¡çš„æ–¹æ³• //é€™é‚Šé‡æ–°ç¹ªè£½é€™å€‹é¡çš„æ–¹æ³•}</pre><p>æ¥è‘—å°±æ˜¯å‘é€™å€‹é¡ä¸­æ·»åŠ æˆ‘å€‘éœ€è¦çš„åŠŸèƒ½ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯â€œé¼ æ¨™é»æ“Šäº‹ä»¶çš„è§¸ç™¼â€ä»¥åŠâ€œè§¸æ‘¸å±å¹•äº‹ä»¶çš„è§¸ç™¼â€ï¼Œæˆ‘å€‘é€šéå°äº‹ä»¶çš„ç›£è½ä¾†ç¹ªè£½åœ–å½¢ï¼Œé¦–å…ˆå°±æ˜¯åˆ¤æ–·é¼ æ¨™å·¦éµæˆ–è€…è§¸å±æ˜¯å¦é»æ“Šï¼š</p><pre>handle_touchstart: function (e) {//è§¸å± é–‹å§‹é»æ“Š ht.Default.preventDefault(e);//é˜»æ­¢æ‰€æœ‰çš„é»˜èªäº¤äº’äº‹ä»¶ if (ht.Default.isLeftButton(e)) {//é¼ æ¨™å·¦éµæ˜¯å¦é»æ“Š this._graphView.setFocus(e);//è¨­ç½®ç„¦é» this.p1 = this._graphView.lp(e);//ç²å–ç•¶å‰é‚è¼¯åº§æ¨™é» this.startDragging(e);//èª¿ç”¨ startDragging é–‹å§‹æ‹–æ‹½å‡½æ•¸  }} </pre><p>ç„¶å¾Œå°é¼ æ¨™å½ˆèµ·æˆ–è€…è§¸å±æ˜¯å¦çµæŸé€²è¡Œäº‹ä»¶çš„åˆ¤æ–·ï¼Œä¸¦ç›´æ¥ç”Ÿæˆä¸€å€‹ ht.Node ç¯€é»ã€‚HT æŠŠå–®ç´”çš„é»æ“Šäº‹ä»¶å’Œæ‹–æ‹½äº‹ä»¶åˆ†ç‚ºå…©ç¨®å‘½åæ ¼å¼ï¼Œå–®ç´”çš„é»æ“Šäº‹ä»¶ç‚º handle_* æ–¹æ³•ï¼Œæ‹–æ‹½äº‹ä»¶æ˜¯ handleWindow* æ–¹æ³•ã€‚ä¸Šé¢çš„ä»£ç¢¼å°±æ˜¯å¾é»æ“Šå·¥å…·æ¢çš„èƒ½è§¸ç™¼ CreateNodeInteractor é¡çš„å…ƒç´ é–‹å§‹ï¼Œåˆ°æ”¾åˆ°ç•Œé¢ä¸­ç”Ÿæˆåœ–å…ƒçµæŸã€‚ä¸¦æ²’æœ‰æ‹–æ‹½çš„éç¨‹ï¼Œæœƒæœ‰ä¸€å€‹é»˜èªçš„å¤§å°ï¼š</p><div class=pgc-img><img alt="åŸºæ–¼ HTML5 Canvas çš„ç°¡æ˜“ 2D 3D ç·¨è¼¯å™¨" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b42ac3fa9b504f5496a6dae8b3bb5f43><p class=pgc-img-caption></p></div><p>HT é»˜èªèª¿ç”¨ ht.graph.DefaultInteractor äº‹ä»¶ï¼Œè£¡é¢æœ‰ä¸€ç³»åˆ—çš„æ“ä½œï¼Œæˆ‘å€‘ç¾åœ¨è¦åšçš„æ‹–æ‹½è·Ÿé€™å€‹æœ‰è¡çªï¼Œæ‰€ä»¥åœ¨å‰é¢æˆ‘å€‘å…ˆå°‡é€™å€‹é»˜èªçš„äº‹ä»¶é˜»æ­¢ï¼Œç²å–é¼ æ¨™é»ä¸‹çš„ç¬¬ä¸€å€‹é»çš„é‚è¼¯åº§æ¨™å’Œç¬¬äºŒå€‹é»çš„é‚è¼¯åº§æ¨™ï¼Œæ ¹æ“šé€™å…©å€‹åº§æ¨™çš„é»ç”Ÿæˆä¸€å€‹çŸ©å½¢ï¼Œç„¶å¾Œé–‹å§‹ç¹ªè£½ç¯€é»ï¼š</p><pre>handleWindowTouchMove: function(e) { ht.Default.preventDefault(e);//é˜»æ­¢äº‹ä»¶çš„é»˜èªè¡Œç‚ºï¼Œå¸¸ç”¨æ–¼å±è”½è§¸å±ä¸Šé»˜èªDoubleTapç¸®æ”¾ç­‰è¡Œç‚º if (!this.p1) { return; } this.p2 = this._graphView.lp(e); const rect = ht.Default.unionPoint(this.p1, this.p2);//å°‡ p1 å’Œ p2 å…©å€‹é»çµ„åˆæˆä¸€å€‹çŸ©å½¢ if (this.node) { this.node.setRect(rect); } else { if (!rect.width || !rect.height) { return; } this._graphView.dm().beginTransaction();//é¡ä¼¼æ•¸æ“šåº«è£¡é–‹å•Ÿäº‹å‹™ï¼Œå¾beginTransaction()åˆ°endTransaction()ä¹‹é–“æ‰€æœ‰çš„ä¿®æ”¹å¯è¢«ä¸€æ¬¡æ€§æ’¤éŠ·æˆ–é‡åš this.createNode(rect, false);//èª¿ç”¨ createNode å‡½æ•¸ }}</pre><p>ç„¶å¾Œåœ¨æ‹–æ‹½çµæŸçš„æ™‚å€™åšçµæŸç¹ªè£½åœ–å½¢çš„æ“ä½œï¼Œé€™è£¡æˆ‘æ˜¯ç›´æ¥è¨­ç½®ç¹ªè£½çµæŸå¾Œå°±å°‡å·¥å…·æ¢é¸ä¸­â€œç·¨è¼¯â€çš„å…ƒç´ ï¼š</p><pre>handleWindowTouchEnd: function(e) { ht.Default.preventDefault(e); this._graphView.dm().endTransaction();//é¡ä¼¼æ•¸æ“šåº«è£¡çµæŸäº‹å‹™ï¼Œå¾beginTransaction()åˆ°endTransaction()ä¹‹é–“æ‰€æœ‰çš„ä¿®æ”¹å¯è¢«ä¸€æ¬¡æ€§æ’¤éŠ·æˆ–é‡åš if (!this.node &amp;&amp; this.p1) { this.createNode({ x: this.p1.x - 25, y: this.p1.y - 25, width: 50, height: 50 }, true); } var continuousCreating = false; if (!continuousCreating) { for(var i = 0; i &lt; toolbar.getItems().length; i++){ toolbar.getItems()[i].selected = false; toolbar.getItems()[i].icon.comps[1].color = '#000'; } toolbar.getItemById('edit').selected = true; toolbar.getItemById('edit').icon.comps[1].color = '#1E90FF'; borderPane.iv(); this._graphView.setEditable(true); this._graphView.sm().ss(this.node); } else { this.node = this.p1 = this.p2 = null; }}</pre><p>æœ€å¾Œï¼Œæˆ‘å€‘åªè¦çŸ¥é“å¦‚ä½•ç¹ªè£½åœ–å…ƒå°±å¥½äº†ï¼Œåœ¨ HT ä¸­ï¼ŒåŸºç¤çš„åœ–å…ƒéƒ½å¯ä»¥é€šéè¨­ç½®æ¨£å¼ä¸­çš„ shape æˆ–è€… shape3d ä¾†ç”Ÿæˆä¸åŒçš„åœ–å…ƒï¼Œæˆ‘å€‘é€™é‚Šå°±æ˜¯é€šéé€™ç¨®é€”å¾‘ï¼Œå¦‚æœæƒ³è¦åœ¨ç•Œé¢ä¸­ç”Ÿæˆè¤‡é›œåœ–å½¢ï¼Œå¦‚ï¼šæ©Ÿæ«ƒæ¨¡å‹ï¼Œå¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç« ï¼šhttp://www.cnblogs.com/xhload3d/p/7887229.html</p><pre>createNode: function(rect, click) { // create instance if (ht.Default.isFunction(this.type)) { this.node = this.type(rect, click); } else { this.node = new ht.Node(); } this.node.setTall(50);//ç‚º 3D åœ–å½¢åšæº–å‚™ï¼Œè¨­ç½®å…¶åšåº¦ï¼Œæ‰æœƒæœ‰ç«‹é«”æ„Ÿ if(toolbar.getItemById('circle').selected){//å¦‚æœå·¥å…·æ¢çš„ â€˜circleâ€™ è¢«é¸ä¸­ this.node.s({//è¨­ç½® style æ¨£å¼ "shape": "oval",//æ©¢åœ“å½¢ï¼Œç‚ºç©ºæ™‚é¡¯ç¤ºç‚ºåœ–ç‰‡ï¼Œå¯è¨­ç½®å¤šé‚Šå½¢é¡å‹åƒè¦‹å…¥é–€æ‰‹å†Š "shape.background": "#D8D8D8",//å¤šé‚Šå½¢é¡å‹åœ–å…ƒèƒŒæ™¯ "shape.border.width": 1,//å¤šé‚Šå½¢é¡å‹åœ–å…ƒé‚Šæ¡†å¯¬åº¦ "shape.border.color": "#979797",//å¤šé‚Šå½¢é¡å‹åœ–å…ƒé‚Šæ¡†é¡è‰² "shape3d": "sphere"//ç‚ºç©ºæ™‚é¡¯ç¤ºç‚ºå…­é¢ç«‹æ–¹é«”ï¼Œå…¶ä»–å¯é¸å€¼ç‚ºbox|sphere|cylinder|cone|torus|star|rect|roundRect|triangle|rightTriangle|parallelogram|trapezoid }); }else if(toolbar.getItemById('roundRect').selected){ this.node.s({ "shape": "roundRect",//åœ“è§’çŸ©å½¢ "shape.background": "#D8D8D8", "shape.border.width": 1, "shape.border.color": "#979797", "shape3d": "roundRect" }); }else if(toolbar.getItemById('rect').selected){ this.node.s({ "shape": "rect",//çŸ©å½¢ "shape.background": "#D8D8D8", "shape.border.width": 1, "shape.border.color": "#979797", "shape3d": "rect" }); } // set bounds if (click) { this.node.setPosition(rect.x + rect.width / 2, rect.y + rect.height / 2);//è¨­ç½® node çš„åº§æ¨™é» } else { this.node.setRect(rect);//è¨­ç½® node çš„å¤–çŸ©å½¢é‚Šæ¡†å¤§å° } // add to data model this._graphView.dm().add(this.node);//å°‡é€™å€‹ node æ·»åŠ é€²æ•¸æ“šå®¹å™¨ DataModel ä¸­}</pre><p>åˆ°æ­¤ï¼Œå‰µå»º ht.Node ç¯€é»çš„è²æ˜å…¨éƒ¨çµæŸï¼Œå¤§å®¶å¯ä»¥æ ¹æ“šè‡ªå·±çš„æƒ³è±¡å‰µå»ºä½ æƒ³è¦çš„ç·¨è¼¯å™¨ï¼</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>HTML5</a></li><li><a>Canvas</a></li><li><a>ç°¡æ˜“</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8362ae1.html alt=ç°¡æ˜“åŸºç¤æ•¸å­—é›†æˆé›»è·¯å°è£½ä½œâ€”â€”é›»å®¹æ¸¬è©¦å„€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a736c74d1f1d48c887afe14db1bf1c48 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8362ae1.html title=ç°¡æ˜“åŸºç¤æ•¸å­—é›†æˆé›»è·¯å°è£½ä½œâ€”â€”é›»å®¹æ¸¬è©¦å„€>ç°¡æ˜“åŸºç¤æ•¸å­—é›†æˆé›»è·¯å°è£½ä½œâ€”â€”é›»å®¹æ¸¬è©¦å„€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/88e47e80.html alt=è§’è½ç°¡æ˜“å®¶ç”¨å¤šåŠŸèƒ½é‚Šæ¡Œæ²™ç™¼å®¢å»³å°èŒ¶å‡ é‚Šå¹¾é™½è‡ºæ¸…æ–°æ“ºä»¶æˆäººå€‹æ€§ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b59ab7439dad4a0ebd0c73828d538696 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/88e47e80.html title=è§’è½ç°¡æ˜“å®¶ç”¨å¤šåŠŸèƒ½é‚Šæ¡Œæ²™ç™¼å®¢å»³å°èŒ¶å‡ é‚Šå¹¾é™½è‡ºæ¸…æ–°æ“ºä»¶æˆäººå€‹æ€§>è§’è½ç°¡æ˜“å®¶ç”¨å¤šåŠŸèƒ½é‚Šæ¡Œæ²™ç™¼å®¢å»³å°èŒ¶å‡ é‚Šå¹¾é™½è‡ºæ¸…æ–°æ“ºä»¶æˆäººå€‹æ€§</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/22886eee.html alt=ç°¡æ˜“æ†æµæ†å£“å……é›»é›»è·¯ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/03467a6cf6434093b4e27edc26f6ccb5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/22886eee.html title=ç°¡æ˜“æ†æµæ†å£“å……é›»é›»è·¯>ç°¡æ˜“æ†æµæ†å£“å……é›»é›»è·¯</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9f9ef4e4.html alt=è„ˆè¨ºç°¡æ˜“å…¥é–€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9f9ef4e4.html title=è„ˆè¨ºç°¡æ˜“å…¥é–€>è„ˆè¨ºç°¡æ˜“å…¥é–€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/37ac2a8a.html alt=ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œç³»åˆ—(ä¸€)ï¼Œ12Vç°¡æ˜“ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/88b9ff73c46a4a67bc043f0c240126b3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37ac2a8a.html title=ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œç³»åˆ—(ä¸€)ï¼Œ12Vç°¡æ˜“ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œ>ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œç³»åˆ—(ä¸€)ï¼Œ12Vç°¡æ˜“ç‰¹æ–¯æ‹‰ç·šåœˆè£½ä½œ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac457b52.html alt="ç°¡æ˜“ é »è­œå„€ UVæ®µ å¸¶è·Ÿè¹¤æº 136-173MHz 400-470MHz" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/569b1f8df4124573a66d164386ec2dd9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac457b52.html title="ç°¡æ˜“ é »è­œå„€ UVæ®µ å¸¶è·Ÿè¹¤æº 136-173MHz 400-470MHz">ç°¡æ˜“ é »è­œå„€ UVæ®µ å¸¶è·Ÿè¹¤æº 136-173MHz 400-470MHz</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7942f3d9.html alt="ç°¡æ˜“å¤šè‡ªç”±åº¦å¸¶äºŒçˆªå¤¾æŒæ©Ÿæ§‹æ©Ÿæ¢°è‡‚3Dåœ–ç´™ STEPæ ¼å¼" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/31709e841bd04eadb3ef6079dac5ff6e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7942f3d9.html title="ç°¡æ˜“å¤šè‡ªç”±åº¦å¸¶äºŒçˆªå¤¾æŒæ©Ÿæ§‹æ©Ÿæ¢°è‡‚3Dåœ–ç´™ STEPæ ¼å¼">ç°¡æ˜“å¤šè‡ªç”±åº¦å¸¶äºŒçˆªå¤¾æŒæ©Ÿæ§‹æ©Ÿæ¢°è‡‚3Dåœ–ç´™ STEPæ ¼å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5541e7eb.html alt=ç©ºæ°£å£“ç¸®æ©Ÿçš„ç°¡æ˜“é¸å‹æ–¹æ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e61131a0cb174db99e4d4883b3afcf1c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5541e7eb.html title=ç©ºæ°£å£“ç¸®æ©Ÿçš„ç°¡æ˜“é¸å‹æ–¹æ³•>ç©ºæ°£å£“ç¸®æ©Ÿçš„ç°¡æ˜“é¸å‹æ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/55b9fcd0.html alt=æ¸…ç†±æ½¤è‚ºæ­¢å’³åŒ–ç—°çš„æª¸æª¬è†è¶…ç°¡æ˜“åšæ³•ã€‚ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c144bcd962844526bbf29d3c8350d2a7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/55b9fcd0.html title=æ¸…ç†±æ½¤è‚ºæ­¢å’³åŒ–ç—°çš„æª¸æª¬è†è¶…ç°¡æ˜“åšæ³•ã€‚>æ¸…ç†±æ½¤è‚ºæ­¢å’³åŒ–ç—°çš„æª¸æª¬è†è¶…ç°¡æ˜“åšæ³•ã€‚</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/86c2c23c.html alt=è¬æœ‰å¼•åŠ›ç°¡æ˜“è¨ˆç®—DIYï¼ˆä¸€ï¼‰â€”â€”åœ¨è½æ‡‚æ´›å¸Œæ¥µé™å’Œå¼•åŠ›å½ˆå¼“ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£é€™å€‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R6mV3ym4iWje8b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/86c2c23c.html title=è¬æœ‰å¼•åŠ›ç°¡æ˜“è¨ˆç®—DIYï¼ˆä¸€ï¼‰â€”â€”åœ¨è½æ‡‚æ´›å¸Œæ¥µé™å’Œå¼•åŠ›å½ˆå¼“ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£é€™å€‹>è¬æœ‰å¼•åŠ›ç°¡æ˜“è¨ˆç®—DIYï¼ˆä¸€ï¼‰â€”â€”åœ¨è½æ‡‚æ´›å¸Œæ¥µé™å’Œå¼•åŠ›å½ˆå¼“ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£é€™å€‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/bbc9d71f.html alt=åœ’æ—æ¤ç‰©æ ½æ¤èˆ‡é¤Šè­·ç°¡æ˜“æŠ€è¡“â€”â€”ç—…èŸ²å®³é˜²æ²» class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/defb98c1c0d7424fa1b77e0edef8d25d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/bbc9d71f.html title=åœ’æ—æ¤ç‰©æ ½æ¤èˆ‡é¤Šè­·ç°¡æ˜“æŠ€è¡“â€”â€”ç—…èŸ²å®³é˜²æ²»>åœ’æ—æ¤ç‰©æ ½æ¤èˆ‡é¤Šè­·ç°¡æ˜“æŠ€è¡“â€”â€”ç—…èŸ²å®³é˜²æ²»</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/1ea54d0a.html alt=ç°¡æ˜“å‡é™æ©Ÿé‚£äº›äº‹å…’ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/622d2c3caf3243ea972e1064b74eaa70 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/1ea54d0a.html title=ç°¡æ˜“å‡é™æ©Ÿé‚£äº›äº‹å…’>ç°¡æ˜“å‡é™æ©Ÿé‚£äº›äº‹å…’</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/568a9c34.html alt="å¿«é€Ÿé–‹ç™¼åŸºæ–¼ HTML5 ç¶²çµ¡æ‹“æ’²åœ–æ‡‰ç”¨â€”â€”å…¥é–€ç¯‡ï¼ˆä¸€ï¼‰" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/199ab4c89df745d2b1f93d79e2ece5e7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/568a9c34.html title="å¿«é€Ÿé–‹ç™¼åŸºæ–¼ HTML5 ç¶²çµ¡æ‹“æ’²åœ–æ‡‰ç”¨â€”â€”å…¥é–€ç¯‡ï¼ˆä¸€ï¼‰">å¿«é€Ÿé–‹ç™¼åŸºæ–¼ HTML5 ç¶²çµ¡æ‹“æ’²åœ–æ‡‰ç”¨â€”â€”å…¥é–€ç¯‡ï¼ˆä¸€ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/15190306.html alt=äº”è‡Ÿä¹‹é™°è™›é™½è™›çš„ç°¡æ˜“è¨ºæ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8414ffa2d0cf4729a271ec9b1684fdb5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/15190306.html title=äº”è‡Ÿä¹‹é™°è™›é™½è™›çš„ç°¡æ˜“è¨ºæ³•>äº”è‡Ÿä¹‹é™°è™›é™½è™›çš„ç°¡æ˜“è¨ºæ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/297de3d9.html alt=ã€Œæµ·å¤–ææ€–è¥²æ“Šã€ç°¡æ˜“çˆ†ç‚¸è£ç½®ï¼ˆIEDï¼‰è­˜åˆ¥ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0cb9e2d9cb2946cfa57f715ffa48660f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/297de3d9.html title=ã€Œæµ·å¤–ææ€–è¥²æ“Šã€ç°¡æ˜“çˆ†ç‚¸è£ç½®ï¼ˆIEDï¼‰è­˜åˆ¥>ã€Œæµ·å¤–ææ€–è¥²æ“Šã€ç°¡æ˜“çˆ†ç‚¸è£ç½®ï¼ˆIEDï¼‰è­˜åˆ¥</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>