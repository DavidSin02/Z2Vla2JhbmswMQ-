<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>REST API一些必備的安全基礎--瞭解一下 | 极客快訊</title><meta property="og:title" content="REST API一些必備的安全基礎--瞭解一下 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/9d96827535e743af9bf55e5af185e5b7"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/17be6b38.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/17be6b38.html><meta property="article:published_time" content="2020-11-14T21:00:29+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:29+08:00"><meta name=Keywords content><meta name=description content="REST API一些必備的安全基礎--瞭解一下"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/17be6b38.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>REST API一些必備的安全基礎--瞭解一下</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>REST 是一種現代架構風格，它定義了一種設計 Web 服務的新方法。和之前的 HTTP 以及 SOA 不同，它不是一個協議（即：一套嚴格的規則），而是一些關於 Web 服務應該如何相互通信的一些建議和最佳實踐。按照 REST 最佳實踐開發的服務被稱為 “RESTful Web 服務”。</p><p>安全性是 RESTful 服務的基石。啟用它的方法之一是儘可能內置用戶身份驗證和授權機制。</p><p>在 RESTful 服務中實現用戶身份驗證和授權的方法有很多。我們今天要講的主要方法（或標準）有：</p><ul><li>Basic 認證</li><li>OAuth 2.0</li><li>OAuth 2.0 + JWT</li></ul><p>為了讓我們的討論更加具體，假設我們的後端程序有微服務，並且每個用戶請求時，必須調用後端的幾個服務來返回請求的數據。所以，我們將不僅從安全性問題方面，而且在它們產生的額外流量和服務器負載的背景下檢查每個標準。下面開始吧…</p><h1 class=pgc-h-arrow-right>Basic 認證</h1><p>最古老也是最簡單的標準。</p><p><strong>看起來像：</strong> 用戶名 + 密碼 + Base64（對用戶名和密碼做哈希的基礎算法）。</p><p><strong>工作原理：</strong>加入有人嘗試登錄用戶的 Fackbook 賬戶，去訪問他的消息、歷史記錄、群組信息，這些都是獨立的服務。當用戶輸入用戶名和密碼後，系統會允許登錄。但是，默認情況下，系統不知道用戶的角色和權限是什麼，他們可以訪問哪些服務等等。</p><p>所以每次用戶嘗試訪問任何一個服務的時候，系統都應該再次驗證是否允許執行這個操作，這意味著需要對身份驗證進行額外的調用。就我們的示例中有四個服務而言，在這種情況下，每個用戶將有四個額外的調用。</p><p>現在假設每秒有 3k 個請求，在 Facebook 的系統中每秒 300k 請求更現實。將這請求乘以四，結果是每秒要向服務器發出 12k 次調用。</p><div class=pgc-img><img alt="REST API一些必備的安全基礎--瞭解一下" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9d96827535e743af9bf55e5af185e5b7><p class=pgc-img-caption></p></div><p><strong>總結：</strong>可伸縮性差，大量的額外流量（額外調用）沒有帶來業務價值，服務器的負載很大。</p><h1 class=pgc-h-arrow-right>OAuth 2.0</h1><p><strong>看起來像：</strong>用戶名 + 密碼 + 訪問令牌 + 過期令牌</p><p><strong>工作原理：</strong>OAuth 2.0 標準的核心思想是，用戶使用用戶名和密碼登錄系統後，客戶端（用戶訪問系統的設備）會收到一對令牌，這是一個訪問權限令牌和刷新令牌。</p><p>訪問令牌用於訪問系統中的所有服務。到期後，系統使用刷新令牌生成一對新的令牌。所以，如果用戶每天都進入系統，令牌也會每天更新，不需要每次都用用戶名和密碼登錄系統。刷新令牌也有它的過期時間（雖然它比訪問令牌長得多），如果一個用戶一年沒有進入系統，那麼很可能會被要求再次輸入用戶名和密碼。</p><p>OAuth 2.0 標準取代了基本的身份驗證方法，它具有一定的優勢，例如用戶每次想要進入系統時不用輸入用戶名和密碼。但是，系統仍然需要調用身份驗證服務器，就像使用基本身份驗證方法時一樣，以檢查擁有該令牌的用戶有權限做什麼。</p><p>假設有效期是一天。這意味著登錄服務器上的負載要少得多，因為用戶每天只需要輸入一次憑證，而不是每次都要進入系統。但是，系統仍需要驗證每個令牌並檢查用戶角色的存儲狀態。所以我們最終還要調用身份驗證服務器。</p><div class=pgc-img><img alt="REST API一些必備的安全基礎--瞭解一下" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ec14485e4f9943108aeb5ddc60279e85><p class=pgc-img-caption></p></div><p><strong>總結：</strong>和 Basic 驗證有相同的問題 - 可伸縮性差，身份驗證服務器負載較高。</p><h1 class=pgc-h-arrow-right>OAuth2 + JSON Web 令牌</h1><p><strong>看起來像：</strong>用戶名 + 密碼 + JSON數據 + Base64 + 私鑰 + 到期日期</p><p><strong>工作原理：</strong>當用戶第一次使用用戶名和密碼登錄系統時，系統不僅會返回一個訪問令牌（只是一個字符串），而是一個包含所有用戶信息的 JSON 對象，比如角色和權限，使用 Base64 進行編碼並使用私鑰簽名。下圖是它在沒有編碼的情況下的樣子：</p><div class=pgc-img><img alt="REST API一些必備的安全基礎--瞭解一下" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9bebdd9bf21c41ceb9b6c7b5b6a9c265><p class=pgc-img-caption></p></div><p>看起來很可怕，但這確實有效！主要區別在於我們可以在令牌中存儲狀態，而服務保持無狀態。這意味著用戶自己擁有自己的信息，不需要額外的調用來檢查它，因為所有的內容都在令牌裡。這對於減少服務器負載方面是一個很大的優勢。這個標準在世界範圍內得到廣泛應用。</p><p><strong>總結：</strong>良好的可伸縮性，可以和微服務一起工作。</p><h1 class=pgc-h-arrow-right>新玩意：亞馬遜簽名方式</h1><p>一種全新的，奇特的方法，稱為 HTTP 簽名，亞馬遜是目前使用它的大廠之一。</p><p>它的思路是，當你創建亞馬遜帳戶的時候，會生成一個永久的、非常安全的訪問令牌，你要非常小心地存儲起來並且不要給任何人顯示。當你要從 Amazon 請求某些資源時，你可以獲取到所有相關的 http 頭信息，使用這個私鑰對其進行簽名，然後將簽名的字符串作為 header 發送。</p><p>在服務器端，亞馬遜也有你的訪問密鑰。它們接下來做什麼？只需要使用你的 http 頭信息和這個密鑰進行簽名。然後將簽名字符串和你作為簽名的字符串進行比較；如果相同那麼就知道你是誰。</p><p>最大的好處是你只需要發送一次用戶名和密碼 - 就可以獲得令牌。至於使用私鑰簽名的 header 信息，基本上沒有機會對它們進行編碼。就算有人截獲了信息——誰在乎呢 ;）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>REST</a></li><li><a>API</a></li><li><a>必備</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/f0ff6432.html alt=鋼結構必備知識38問 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f0ff6432.html title=鋼結構必備知識38問>鋼結構必備知識38問</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb258a5a.html alt=鋼結構必備知識38問，你的晉級之路！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1535975955779bcac330762 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb258a5a.html title=鋼結構必備知識38問，你的晉級之路！>鋼結構必備知識38問，你的晉級之路！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b4e33540.html alt="收藏 | 這些航測必備的知識點你瞭解嗎？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b4e33540.html title="收藏 | 這些航測必備的知識點你瞭解嗎？">收藏 | 這些航測必備的知識點你瞭解嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/02e1ffd2.html alt=臨床必備的石膏固定技術，你get了嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/260a4e82375e46b29f0d7e4ebc7c2a01 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/02e1ffd2.html title=臨床必備的石膏固定技術，你get了嗎？>臨床必備的石膏固定技術，你get了嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/55165a07.html alt=老電工必備的六個基礎電路圖 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/23e99e5693c54df2955e819bb96bc0f5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/55165a07.html title=老電工必備的六個基礎電路圖>老電工必備的六個基礎電路圖</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/640ad953.html alt=電工必備：22個經典電路圖，老電工：都看懂就可以去考高級電工了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1537327298284fedcbce28b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/640ad953.html title=電工必備：22個經典電路圖，老電工：都看懂就可以去考高級電工了>電工必備：22個經典電路圖，老電工：都看懂就可以去考高級電工了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc667d44.html alt=不可不知！每個機床行家必備的軸承選型資料 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/887afde1-3463-49ab-958a-3d03ef126152 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc667d44.html title=不可不知！每個機床行家必備的軸承選型資料>不可不知！每個機床行家必備的軸承選型資料</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2c2d0ac7.html alt=工程造價必備：16套造價基礎講義+計量計價+識圖，輕鬆學造價 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/eb9fa13af6284a158f15a13aec98fef2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2c2d0ac7.html title=工程造價必備：16套造價基礎講義+計量計價+識圖，輕鬆學造價>工程造價必備：16套造價基礎講義+計量計價+識圖，輕鬆學造價</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/66d69fa2.html alt=懶人必備！小米有品上架和麵機：智能醒面 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RU85Fe4Gpp7qW8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/66d69fa2.html title=懶人必備！小米有品上架和麵機：智能醒面>懶人必備！小米有品上架和麵機：智能醒面</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b85ef9fc.html alt=科研必備“武器”之BOD分析儀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0574d78d5cc147668c9eefa86e773322 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b85ef9fc.html title=科研必備“武器”之BOD分析儀>科研必備“武器”之BOD分析儀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b2f84bf4.html alt=開發者必備：正則表達式生成神器—VerbalExpressions class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c9798a1f80544ed5a32b33ea74783a47 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b2f84bf4.html title=開發者必備：正則表達式生成神器—VerbalExpressions>開發者必備：正則表達式生成神器—VerbalExpressions</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e7ecedde.html alt=如果你懂得如何培養領導者必備的指派工作能力，就可以創造卓越！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/66b50000eceafa88afad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e7ecedde.html title=如果你懂得如何培養領導者必備的指派工作能力，就可以創造卓越！>如果你懂得如何培養領導者必備的指派工作能力，就可以創造卓越！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8b24e0c.html alt=車工必備的工件知識，分清十種常用淬火方法，加工無憂 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/076c85cd8fd0429c8dd59ff0002ca39f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8b24e0c.html title=車工必備的工件知識，分清十種常用淬火方法，加工無憂>車工必備的工件知識，分清十種常用淬火方法，加工無憂</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/53021754.html alt="性能之王、家居必備之佳品 耐時鋰鐵電池體驗" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153624406146472ce9e560b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/53021754.html title="性能之王、家居必備之佳品 耐時鋰鐵電池體驗">性能之王、家居必備之佳品 耐時鋰鐵電池體驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/552953ae.html alt=製作大刨子，學木匠的必備技能 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/39fb0000f6037ec40f59 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/552953ae.html title=製作大刨子，學木匠的必備技能>製作大刨子，學木匠的必備技能</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>