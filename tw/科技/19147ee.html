<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Dos 命令進階(三)---批處理(中) | 极客快訊</title><meta property="og:title" content="Dos 命令進階(三)---批處理(中) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/4ae10002ce86a9ed7e42"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/19147ee.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/19147ee.html><meta property="article:published_time" content="2020-10-29T21:04:54+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:54+08:00"><meta name=Keywords content><meta name=description content="Dos 命令進階(三)---批處理(中)"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/19147ee.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Dos 命令進階(三)---批處理(中)</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae10002ce86a9ed7e42></p><p class=pgc-img-caption>變量, set命令, IF命令的講解思路</p><hr><h1><strong>接上篇: <a href=https://www.toutiao.com/i6494459604687127054/>Dos 命令進階(三)---批處理(上)</a></strong></h1><hr><h1><strong>變量</strong></h1><hr><p><strong>1. 在windows操作系統中，變量可分為兩種</strong>:</p><p>一種是系統已經定義好的變量，叫做“<strong>系統變量</strong>”；</p><p>一種就是用戶自己定義的變量。也叫做“<strong>自定義變量</strong>”。</p><hr><p>系統變量如下圖：</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4add000485e139aca797></p><p class=pgc-img-caption>使用 set 命令獲取系統中的環境變量列表</p><p><strong>注：</strong>可以通過在CMD下輸入“<strong>set</strong>”命令就可以看見系統中變量</p><p>那麼我們<strong>如何</strong>獲取單個系統變量的值呢，可以通過在CMD下輸入</p><p><strong>echo %windir% </strong>就可以打印系統變量對應的值</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ade00047ceb29fe1a36></p><p class=pgc-img-caption>獲取系統環境變量所對應的值</p><p>舉例說明：</p><p>copy copy c:\cdir.txt %windir%\</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ade00048d027cabe05a></p><p class=pgc-img-caption>環境變更的應用</p><p>%WINDIR%\ 是一個系統變量(不區分大小寫)，表示的值可通過上面介紹的方法來查看</p><p>如: copy c:\IPList.txt "%USERPROFILE%\「開始」菜單\程序\Startup\"</p><p><strong>注意: </strong>如果路徑中帶有空格, 這個""符號(上節講的定界符)最好不要省哦。</p><hr><p><strong>2. </strong><strong>以上系統變量只是返回一些具體的值, 還有一些系統變量，它們是代表一個意思，或者一個操作</strong></p><p>分別是<strong>%0 %1 %2 %3 %4 %5....</strong>到<strong>%9</strong>，還有一個<strong>%*</strong></p><p>我們先來說一下<strong>%1-%9</strong>的意思(上節也有提到過, 在變量裡再敘一遍, 一起復習一下)。</p><p>%1 返回批處理的<strong>第一個參數</strong></p><p>%2 返回批處理的<strong>第二個參數</strong></p><p>%3-%9 同樣如此</p><p><strong>什麼是返回批處理參數呢?</strong>我們先來看個例子來理解一下</p><p>第九個實例.bat 的代碼：</p><p>@echo off</p><p>echo %1 %2 %3 %4 %5 %6</p><p>echo %1</p><p>echo %2</p><p>echo %3</p><p>echo %4</p><p>echo %5</p><p>echo %6</p><p>打開CMD，輸入"第九個實例.bat 條 友 們 萬 歲 !"</p><p>注意中間的空格，主要是用來區分各個參數的</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ade000494c0a4aa3870></p><p class=pgc-img-caption>系統變量%1-%9的應用</p><p>那麼這裡還有一個<strong>%*</strong>，它的作用是<strong>返回所有參數的值</strong>.</p><p>例子：</p><p>@echo off</p><p>echo %*</p><p>打開CMD，輸入"第九個實例.bat 條 友 們 萬 歲 !"</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4add0004a572ce4ef4a0></p><p class=pgc-img-caption>%* 可以匹配所有外部參數</p><p><strong>再嘮叨一下:</strong> 注意參數之間的空格，主要是用來區分各個參數的</p><p>再來講一下 <strong>%0</strong> 這個參數，它有<strong>兩個意思</strong></p><p>第<strong>一個</strong>意思，用%0可以返回批處理<strong>腳本文件本身所在的絕對路徑</strong></p><p>例子：</p><p>@echo off</p><p>echo %0</p><p>pause</p><p>說白了就是把批處理所在的路徑給打印出來了</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ade00049daf0c70575b></p><p class=pgc-img-caption>%0 這個系統變量的使用方法</p><p>第<strong>二</strong>個意思就是用它來<strong>無限循環</strong>執行批處理程序</p><p>例子：</p><p>@echo off</p><p>echo 廣大條友們萬歲!萬萬歲!!!</p><p>%0</p><p>這樣的話，它就會無限循環的執行批處理程序(無限調用自身)</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae100002226683ef08c></p><p class=pgc-img-caption>無限循環</p><hr><p><strong>3.</strong> <strong>我們現在來說說自定義變量的實用性</strong></p><p>如果要自定義一個批處理變量，那麼我們就要用到系統中的一個<strong>set命令,</strong></p><p><strong>請使用"set /?" 看一下它的幫助文檔</strong></p><p>例子代碼：</p><p>@echo off</p><p>set var=感謝條友們的關注支持, 條友們萬萬歲!</p><p>echo %var%</p><p>pause</p><p>這樣系統就會將我們自定義變量的值給輸出了，即字符串“感謝條友們的關注支持, 條友們萬萬歲!”</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae300001f1d81ef3ae1></p><p class=pgc-img-caption>自定義變量的定義方式</p><hr><p>我們還可以<strong>讓用戶自己給它賦予任意一個值</strong></p><p>這時就會用到<strong>set /p</strong>這個參數了</p><p>例子代碼：</p><p>@echo off</p><p>set /p var=請給變量賦個值：</p><p>::打印出用戶輸入的數據</p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4add0004ba8c70436ed7></p><p class=pgc-img-caption>提示用戶輸入信息</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4add0004ba4aca47735e></p><p class=pgc-img-caption>打印輸出用戶輸入的信息</p><p>這樣的話，我們就可以<strong>使用批處理程序與用戶進行交互</strong>。這個變量的值也就是用戶自己任意輸入的。系統只是將它所對應的值給輸出了而已</p><hr><h1><strong>Set命令詳解</strong><br></h1><hr><h1><strong>一. </strong>回顧上面提到過的<strong>set命令的使用</strong>(重複的實例就不再重複截圖浪費大家流量了)</h1><p><strong>(1)</strong>代碼例子：</p><p>@echo off</p><p>set var=<strong>感謝條友們的關注支持, 條友們萬萬歲!</strong></p><p>echo %var%</p><p>pause</p><p>這個例子中var這個變量我們已經定義好了並且給它賦了一個初值就是<strong>“感謝條友們的關注支持, 條友們萬萬歲!”</strong>, 那麼這也是它<strong>最簡單的用法</strong>。這個我相信大家都已經明白了.</p><p><strong>(2)</strong>代碼例子：</p><p>@echo off</p><p>set /p var=請給變量賦個值：</p><p>echo %var%</p><p>pause</p><p><strong>向上滑兩下就能看到剛講過, 跟著操作一遍的條友肯定已經搞明白了, 還不懂的請私信我或留言.</strong></p><hr><h1><strong>二. 我們現在來學習下 set /a 這個參數的使用</strong></h1><p>首先說明下，這個<strong>/a參數</strong>主要是用來進行<strong>數學運算</strong>的。</p><p>就好比是1+1=2，4-2=2，2*2=4，6/3=2</p><p>很簡單吧，先列下參數/a有那些運算符</p><p>(這些是Set命令幫助中內容, 可以通過CMD窗口執行 "<strong>set /?</strong>" 獲取)</p><p><strong>() - 分組</strong></p><p><strong>! ~ - - 一元運算符</strong></p><p><strong>* / % - 算數運算符</strong></p><p><strong>+ - - 算數運算符</strong></p><p><strong>&lt;&lt; >> - 邏輯移位</strong></p><p><strong>& - 按位“與”</strong></p><p><strong>^ - 按位“異”</strong></p><p><strong>| - 按位“或”</strong></p><p><strong>= *= /= %= += -= - 賦值</strong></p><p><strong>&= ^= |= &lt;&lt;= >>= </strong><strong>- 表達式分隔符</strong></p><p><strong>這麼多的運算符, 都需要在 /a 參數下才能發揮作用</strong></p><p>看幾個例子來理解一下<strong> set /a </strong>這個參數的使用：</p><p><strong>set /a var=1+1</strong> 當你需要獲取1+1這個表達式的結果時, 就必須使用 /a 這個參數, 否則返回就是 "1+1"</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000a48127a55fae></p><p class=pgc-img-caption>無 /a 參數set命令的不運算 = 號右邊的算術表達式</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf0003d0f19b43e113></p><p class=pgc-img-caption>使用了 /a 參數後進行前後對比看看</p><p>set /a var=4-2</p><p>set /a var=2*2</p><p>set /a var=6/3</p><p>set /a var=(1+1)+(1+1)</p><hr><p>set /a a=1+1,b=1+2,c=1+3 還可以多個變量同時定義</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000ab8cb5143d91></p><p class=pgc-img-caption>多變量同時定義的操作</p><p>好，再來看看在<strong>原變量上進行加減乘除的操作</strong></p><hr><p><strong>set /a var+=1</strong></p><p>這是一種簡寫方法，其原形原形就是</p><p>set /a var=%var%+1</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae60000765e181266dd></p><p class=pgc-img-caption>+= 運算符的使用, 其它組合運算符作用類似</p><p>那麼<strong>加減乘除同樣是如此</strong>，這些就不用小編囉嗦了吧, 如果真的還有條友不理解, 請私信我, 定回覆.</p><p>還有一些<strong>“與”，“或”<strong>，“異或”</strong></strong>運算符，跟學校學過的C語言運算符一樣，同樣先看幾個例子</p><p>set /a var= 1 <strong>"|"</strong> 1 <strong>注意這裡對運算符使用了 "" 定界符號, 或運算, 一真則真</strong></p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae10000c914fed983fe></p><p class=pgc-img-caption>1 或 1 的運算</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae000037bf197f0182f></p><p class=pgc-img-caption>1 或 0 , 0 或 1 的運算</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae30000c38d8bb175e9></p><p class=pgc-img-caption>0 或 0的運算</p><p>set /a var= 1 <strong>"^"</strong> 1 <strong>異或運算, 同為假, 異為真</strong></p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae60000fa2838707143></p><p class=pgc-img-caption>異或運算 1 ^ 1</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae60000fa36b53b7835></p><p class=pgc-img-caption>異或運算 1 ^ 0 或 0 ^ 1</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae200013eab047704c4></p><p class=pgc-img-caption>異或運算 0 ^ 0</p><p>set /a var= 1 <strong>"&"</strong> 1 <strong>與運算, 一假則假</strong></p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae200028313d94ea783></p><p class=pgc-img-caption>與運算 1 & 1</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae60002417f24966017></p><p class=pgc-img-caption>與運算 1&0 或 0&1</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae200028356307fecab></p><p class=pgc-img-caption>與運算 0&0</p><hr><p>與, 或, 異或 這些運算符在使用時如果不使用 "" 定界符包括, 就會報錯, 看演示:</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf00047a66976cffe1></p><p class=pgc-img-caption>邏輯運算符不加定界符 "" 會報異常</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae1000155d7203c7526></p><p class=pgc-img-caption>基礎運算的加減乘除則不會, 但建議統一對所有運算符使用定界符</p><p>set /a var= 1 "+" 1</p><p>set /a var= 1 "%" 1 <strong>模運算, 即取餘運算, 只返回運算的餘數, 整除的返回0</strong></p><p>set /a var= 2 "&lt;&lt;" 2</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4adf00048a98012a5c59></p><p class=pgc-img-caption>位運算之左移操作</p><p>set /a var= 4 ">>" 2</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae2000164278531e7ca></p><p class=pgc-img-caption>位運算之右移操作</p><p>學過二進制的條友可以看出, <strong>與, 或, 非, 異或, 位運算等都是在二進制上操作的</strong>, 即運算前先將操作數都轉換為二進制, 再進行, 與, 或, 非, 異或, 位移等運算. 建議有時間多玩玩, 再百度一下二進制, 幾個小時就搞懂了.</p><p><strong>注意再注意: </strong>通過演練可以看到有的運算符號可以不用 "" 這個定界符, 有的必須用, 那麼就<strong>統一起來</strong>, <strong>所有運算符使用中都使用 "" 包括起來</strong>, 以避免不必要的異常.</p><hr><h1><strong>三、環境變量替換增強用法</strong></h1><p><strong>(1)%PATH:str1=str2%</strong></p><p>會擴展 PATH 環境變量，用 "str2" 代替擴展結果中的每個 "str1".</p><p>要有效地從擴展結果中刪除所有的 "str1"，"str2" 可以是空的。</p><p>"str1" 可以以星號打頭；在這種情況下，"str1" 會從擴展結果的開始到 str1 剩餘部分第一次出現的地方，都一直保持相配。</p><hr><p><strong>示例(1)：</strong></p><p>@echo off</p><p>set var=感謝條友們的關注支持, 條友們萬萬歲!</p><p>echo 原樣輸出:“%var%”</p><p><strong>set var=%var:條友=朋友%</strong></p><p>echo 修改後的:“%var%”</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae30001b4ccc6542da9></p><p class=pgc-img-caption>就是一個字符串替換操作</p><hr><p><strong>示例(2)：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p>echo 原樣輸出:“%var%”</p><p><strong>set var=%var:.=替換的字符%</strong></p><p>echo 修改後的:“%var%”</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae10001cc26448f38b1></p><p class=pgc-img-caption>字符替換操作</p><p>只要是認真看了圖解的, <strong>比著葫蘆畫個瓢</strong>之後, 肯定也能理解了吧, 不懂就問, 或留言大家討論 或私信我.</p><p>大家不要被 "環境變量替換增強" 這個標題給整蒙圈了, 看實例, 操作一下就懂了.</p><hr><p><strong>(2)%PATH:~10,5%</strong></p><p><strong>例1：</strong></p><p>@echo off</p><p>set var=www.baidu.com</p><p><strong>set var=%var:~1,3%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4adf000503271ae3d8db></p><p class=pgc-img-caption>從指定位置開始截取指定長度的字符串</p><p>首先說明下，這是一種<strong>截取字符串的用法</strong>。用上例中我們可以看出要截取的字符是從第一個字符開始，然後截取它後面的三個字符。請看圖理解一下, 最好敲一下.</p><hr><p>好，再來看看下面的這種用法</p><p><strong>%PATH:~-10%</strong></p><p><strong>例2：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4adf000503dfac9c65d4></p><p class=pgc-img-caption>截取字符串最後幾位字符</p><p>它就是<strong>截取變量var值的最後五位</strong>，看下結果就知道了。那麼改成正數也是一樣的</p><hr><p>還可以這樣子<strong>%PATH:~0,-2%</strong></p><p><strong>例3：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~0,-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae4000186d3828863a3></p><p class=pgc-img-caption>截取 從正向指定位置到反向指定位置 長度的字符串</p><p>解釋下這種截取的方法，它就是從0開始一直到最後的五個字符之前的位置，看文字太枯燥, 建議有興趣的條友實際操作一下.</p><hr><p><strong>例4：</strong></p><p>@echo off</p><p>set var=www.safer.com.cn</p><p><strong>set var=%var:~3,-5%</strong></p><p>echo %var%</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae000049231023fa8cd></p><p class=pgc-img-caption>截取 從正向指定位置到反向指定位置 長度的字符串</p><hr><h1><strong>IF命令詳解</strong></h1><hr><h1><strong>一、if的三種用法(可通過"IF /?"命令獲取幫助文檔)</strong></h1><p>IF [NOT] <strong>ERRORLEVEL number</strong> command</p><p>IF [NOT] <strong>string1==string2</strong> command</p><p>IF [NOT] <strong>EXIST filename</strong> command</p><p><strong>NOT</strong> 指定<strong>只有條件為 false 的情況下</strong>，Windows 才應該執行該命令。</p><p><strong>ERRORLEVEL number</strong> 如果最後運行的程序返回一個等於或大於指定數字的<strong>返回代碼</strong>，指定條件為 true。</p><p><strong>string1==string2</strong> 如果指定的文字字符串匹配(可理解成<strong>相同的字符串</strong>)，指定條件為 true。</p><p><strong>EXIST filename</strong> 如果<strong>指定的文件名存在</strong>，指定條件為 true。</p><p><strong>command</strong> 如果符合條件，指定<strong>要執行的命令</strong>。如果指定的條件為 FALSE，命令後可跟 ELSE 命令，該命令將在 ELSE 關鍵字之後執行該命令。</p><hr><p><strong>(1)、IF [NOT] ERRORLEVEL number do something</strong> 如果返回碼是什麼, 就做某事兒</p><p>ERRORLEVEL number 是錯誤碼也稱返回碼。（只是這麼個理解，但它與錯誤沒有必然聯繫。）</p><p>如果最後運行的程序返回一個錯誤碼（返回碼），或它等於或大於指定數字number，則指定條件為 true。</p><p><strong>示例代碼1：</strong></p><p>@echo off</p><p>ipconfig</p><p>if errorlevel 1 goto a</p><p>if errorlevel 0 goto b</p><p>:a</p><p>echo 結果為 ipconfig 執行失敗!</p><p>pause</p><p>exit</p><p>:b</p><p>echo 結果為 ipconfig 正確執行!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/4ae700005655496c6e1a></p><p class=pgc-img-caption>單分支判斷語句操作實例</p><p><strong>說明：“ipconfig”執行成功，則返回碼為0</strong></p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae100024f326e0033f9></p><p class=pgc-img-caption>這是關於errorlevel的返回碼的操作演示</p><hr><p><strong>(2)、IF [NOT] string1==string2 do something</strong> 如果字符串相等或不等, 就做某事兒<br></p><p>如果與指定的文字字符串匹配，指定條件為 true。</p><p><strong>示例代碼2：</strong></p><p>@echo off</p><p>if "abcd" =="abcd" echo 我們相等!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002546d55e9d3b0></p><p class=pgc-img-caption>字符串比較判斷</p><p>當然，也可以用於字符串變量的比較，如下：</p><p>@echo off</p><p>set str1=abcd</p><p>set str2=abcd</p><p>if %str1% == %str2% echo 我們相等!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae2000254d4c403e618></p><p class=pgc-img-caption>字符串比較判斷</p><p>這裡去掉兩個變量的值，在加個<strong>/p</strong>來理解這個參數的作用吧!</p><p><strong>set /p </strong>這個參數的作用, 相必大家還沒忘, 如果忘了, 就滑到上面再看看, 就是<strong>用於腳本與用戶交互</strong>的.</p><p>@echo off</p><p>set /p str1=請輸入第一個值:</p><p>set /p str2=請輸入第二個值:</p><p>if %str1% == %str2% (echo 你輸入的兩個值是相等的!) else echo 你輸入的兩個值不相等!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae3000259ab07957ea7></p><p class=pgc-img-caption>輸入相等的值</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae100026369e43fd294></p><p class=pgc-img-caption>輸入不相等的值</p><hr><p><strong>(3)、IF [NOT] EXIST filename do something </strong>如果某個文件存在, 就做某事兒</p><p>如果指定的文件名存在，指定條件為 true。</p><p>例:</p><p>@echo off</p><p>if not exist mstsc.exe echo 當前目錄下存在文件mstsc.exe</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002657ba0f4d281></p><p class=pgc-img-caption>如果存在或不存在某個文件時</p><p><strong>說明：</strong>如果當前文件夾下存在mstsc.exe則打印“當前目錄下存在文件mstsc.exe”，否則不顯示。</p><p>以上各句中的[NOT]是可選項，表示只有條件為 false 的情況下，才應該執行該命令。</p><hr><h1><strong>二、if...else...語句</strong></h1><p><strong>ELSE 子句必須在 IF 之後且必須出現在同一行上(重點)。</strong></p><p><strong>示例1：</strong></p><p>@echo off</p><p>IF EXIST a.txt (del a.txt) ELSE echo 不存在文件!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae700007d39f3416e50></p><p class=pgc-img-caption>分支判斷的使用</p><p><strong>說明：</strong><strong>如果</strong>存在文件 a.txt <strong>則</strong>刪除，<strong>否則</strong>顯示 “不存在文件!”。</p><p>本程序段的這種寫法是<strong>ELSE 子句</strong><strong>在 IF 之後出現在同一行上的特殊形式</strong>，<strong>它是通過括號“(”和“)”相連接的</strong>。</p><hr><p><strong>下面說明幾種錯誤理解的用法</strong></p><p>由於 ELSE 命令必須與 IF 命令的尾端在同一行上，<strong>以下子句 不會 有效:</strong></p><p>IF EXIST a.txt del a.txt</p><p>ELSE echo a.txt 不存在文件!</p><p>因為 del 命令需要用一個新行終止，<strong>以下子句 不會 有效:</strong></p><p>IF EXIST a.txt del a.txt ELSE echo 不存在文件!</p><p><strong>需要用括號擴上(重點)。</strong></p><p><strong>IF EXIST a.txt (del a.txt) ELSE echo 不存在文件!</strong></p><hr><h1><strong>三、IF 的嵌套用法</strong></h1><p><strong>示例1:</strong></p><p>@echo off</p><p>set /p var=請輸入一個數字：</p><p>if %var% gtr 5 if %var% lss 10 echo 這是一個大於5小於10的數!</p><p>pause</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae6000238ac8a31bf20></p><p class=pgc-img-caption>雙重判斷的操作</p><p><strong>說明：</strong>首先要注意“%var%”，若要取出變量的值要用%%將變量括起來。其次運算符gtr代表大於，lss代表小於，類似的運算符還有(不區分大小寫, 如上圖示)：</p><p><strong>EQU - 等於</strong></p><p><strong>NEQ - 不等於</strong></p><p><strong>LSS - 小於</strong></p><p><strong>LEQ - 小於或等於</strong></p><p><strong>GTR- 大於</strong></p><p><strong>GEQ- 大於或等於</strong></p><hr><p><strong>綜合實例：</strong></p><p>@echo off</p><p>:again</p><p>s=</p><p>cls</p><p>color f</p><p>set /p p=please input password:</p><p>set s=abcd</p><p>if"%p%"=="%s%" (</p><p>echo 密碼輸入正確, 即將為你打開新的CMD窗口! & start cmd.exe) else (echo 密碼錯誤!)</p><p>pause >nul 進入暫停狀態,但不顯示暫停提示字符.</p><p>goto again</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae20002b03b15f0c5fe></p><p class=pgc-img-caption>密碼輸入正確時</p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/4ae70000bc6b2fb4b10f></p><p class=pgc-img-caption>密碼輸入錯誤時</p><hr><p>這一篇就先到這裡吧, 可能是小編想簡單了, 沒有變量, SET命令, IF 命令會佔這麼長的篇幅.</p><p>明天就FOR一個命令可能都要佔一篇, 因為這個循環命令較常用, 我要更加認真的去細化梳理, 所以內容可能還會很長.<br></p><p>有興趣條友不要太急於求成, 慢慢嚼, 學到順手拈來才應該是你們的目標.</p><p><strong>非常感謝大家的關注與支持!!!我會繼續努力的-_-</strong><br></p><p><img alt="Dos 命令進階(三)---批處理(中)" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/4ae2000298c5e2fa1116></p><p class=pgc-img-caption>謝謝各條友的關注與支持</p><hr></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Dos</a></li><li><a>進階</a></li><li><a>---</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/7c1c4004.html alt="乾貨 | 高中地理---地球公轉的基本常識" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c3d525f66fad4784ae52bf695956717c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7c1c4004.html title="乾貨 | 高中地理---地球公轉的基本常識">乾貨 | 高中地理---地球公轉的基本常識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4e632b6e.html alt=PHP進階教程-PHP的協程怎麼玩？這一篇帶你搞定swoole協程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a646cf102cf74b4a953855ebedbc7d29 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4e632b6e.html title=PHP進階教程-PHP的協程怎麼玩？這一篇帶你搞定swoole協程>PHP進階教程-PHP的協程怎麼玩？這一篇帶你搞定swoole協程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cd56e2f3.html alt=PHP進階教程-PHP還能玩多線程？看我怎麼用多線程實現CC攻擊器。 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cce9b3fb23ce41b88311823510e419da style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cd56e2f3.html title=PHP進階教程-PHP還能玩多線程？看我怎麼用多線程實現CC攻擊器。>PHP進階教程-PHP還能玩多線程？看我怎麼用多線程實現CC攻擊器。</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/637cf111.html alt=PHP進階教程-phper需要知道常駐內存中的上下文是什麼東西 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/bc66832213514f2996f2e48c9e9cc747 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/637cf111.html title=PHP進階教程-phper需要知道常駐內存中的上下文是什麼東西>PHP進階教程-phper需要知道常駐內存中的上下文是什麼東西</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e3b6719c.html alt=PHP進階教程-一文理解和實現現代PHP框架裡的IOC容器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/423ce7eefc5d433f86a14589b1ba0043 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e3b6719c.html title=PHP進階教程-一文理解和實現現代PHP框架裡的IOC容器>PHP進階教程-一文理解和實現現代PHP框架裡的IOC容器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fe9184d7.html alt=PHP進階教程-實現一個簡單的MySQL連接池 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/aa2df096a4274ba1b5c8540bcb5b5c73 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fe9184d7.html title=PHP進階教程-實現一個簡單的MySQL連接池>PHP進階教程-實現一個簡單的MySQL連接池</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html alt=PHP進階教程-設計模式之建造者模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ef25f91086df41eca76e35ff3434b003 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html title=PHP進階教程-設計模式之建造者模式>PHP進階教程-設計模式之建造者模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html alt=PHP進階教程-設計模式之橋接模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html title=PHP進階教程-設計模式之橋接模式>PHP進階教程-設計模式之橋接模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html alt=PHP進階教程-設計模式之組合模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6f2acee37d624649ac7a592bfe5b29af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html title=PHP進階教程-設計模式之組合模式>PHP進階教程-設計模式之組合模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html alt=PHP進階教程-設計模式之裝飾器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8cbbfcfedd544572a62adc6df84d2e60 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html title=PHP進階教程-設計模式之裝飾器模式>PHP進階教程-設計模式之裝飾器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bbec5978.html alt=長壽功法---拔腰功，方法簡便，容易學，容易堅持，減肥拔腰 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cc14df19abe24fde89c96814f767499c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bbec5978.html title=長壽功法---拔腰功，方法簡便，容易學，容易堅持，減肥拔腰>長壽功法---拔腰功，方法簡便，容易學，容易堅持，減肥拔腰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0ef4a8fd.html alt=「網工進階」路由交換：鏈路聚合的配置，你都會嗎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f5b7228828484a249973d030a8ae92a6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0ef4a8fd.html title=「網工進階」路由交換：鏈路聚合的配置，你都會嗎>「網工進階」路由交換：鏈路聚合的配置，你都會嗎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6886951d.html alt="IT面試---Java基礎：Collection 和 Collections 有什麼區別？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a61f90ddf82c41ffb6fb3b30b86ea5bb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6886951d.html title="IT面試---Java基礎：Collection 和 Collections 有什麼區別？">IT面試---Java基礎：Collection 和 Collections 有什麼區別？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8c89331.html alt=描述統計學上的一些基本概念（二）——投資技能進階 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/6586a65a-a953-4eae-a29b-ea386ca13f79 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8c89331.html title=描述統計學上的一些基本概念（二）——投資技能進階>描述統計學上的一些基本概念（二）——投資技能進階</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/159d3b59.html alt="新生活，新體驗---ORICO XIS-4A3U接線板測評" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RyMADnB6IyTkoP style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/159d3b59.html title="新生活，新體驗---ORICO XIS-4A3U接線板測評">新生活，新體驗---ORICO XIS-4A3U接線板測評</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>