<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>連續型變量的離散化(5)——R軟件segmented包 | 极客快訊</title><meta property="og:title" content="連續型變量的離散化(5)——R軟件segmented包 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/401e0001c7fa5e6f6f1c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1cd92a6.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1cd92a6.html><meta property="article:published_time" content="2020-10-29T20:59:29+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:29+08:00"><meta name=Keywords content><meta name=description content="連續型變量的離散化(5)——R軟件segmented包"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/1cd92a6.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>連續型變量的離散化(5)——R軟件segmented包</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>作者：袁聯雄 中山大學附屬第三醫院（微信：boy_for_）</p><p>來源：微信公眾號“鄭正有詞”</p><p>還記得上一個帖子，在用R軟件strucchange函數包做Chow test的時候，結果顯示的是“Optimal 2-segment partition”嗎，實際上關於連續型變量的離散化，R軟件中還有1個函數包可供使用，那就是segmented包。那這一期袁老師就給大家介紹一下segmented包的使用方法。</p><p>首先看看segmented包的簡介：</p><p>Package segmented is aimed to estimate linear and generalized linear models (and virtually any regression model) having one or more segmented relationships in the linear predictor. Estimates of the slopes and breakpoints are provided along with standard errors.</p><p>從中我們可以看到，幾乎對於任意的迴歸模型（目前最主要還是線性迴歸、logistics迴歸等，對於COX迴歸尚不完善）當自變量有1個或多個分段函數關係時，segmented包都是適用的，而且，對於breakpoints還提供了標準誤，有了標準誤就代表著置信區間，從此我們高歌在breakpoints的道路上又多了一個亮點了。</p><p>那麼具體如何使用呢，還是以上個帖子提到的JCO文章的數據為例，在上個帖子中我們已經提取到了ELN、原始的OR，並得到了LOWESS平滑處理後的OR。Segmented計算breakpoint的過程如下</p><p><img alt=連續型變量的離散化(5)——R軟件segmented包 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/401e0001c7fa5e6f6f1c></p><p>結果顯示break point為16.6，95%置信區間為16.04~17.17，與Chow test的結果接近！</p><p><img alt=連續型變量的離散化(5)——R軟件segmented包 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/401c0001e390779bfc5f></p><p>上圖左側是segmented包得到的結果，黑色線條和紅色線圖表示兩條不同的迴歸直線，橫座標上綠色點的代表的是break point，兩側伸出來的線條表示95%置信區間；圖中右側是JCO文章中的原圖，黃色曲線為LOWESS曲線，對應左圖中的散點，藍色的折線為兩條迴歸直線，對應作圖中黑色和紅色線條，可以看出兩個圖形基本一致！</p><p>儘管segmented包使用方便，但在實際應用中，與Chow test一樣，更適用於明顯只有1個拐點的情況，當LOWESS平滑曲線提示存在多個拐點時，segmented包也許就不靈了。</p><p>此外對於上一期的帖子，如果讀者模仿JCO的文章進行統計分析，需要注意原文中能通過分別計算各個ELN數量相對於1個ELN的OR值，構建OR關於ELN的函數關係，有兩個重要的數據特點支撐：第一，ELN是整數型取值，便於計算各個ELN數量相對於1個ELN的OR值，如果數據是血糖這種指標，那就沒辦法直接計算了，折中的方法是把兩個連續整數之間的數統一按某個值處理；第二，原文中的樣本量相對較大，因此各個ELN都能有一定的患者數量，計算得到的OR估計值相對來說較為可靠，若樣本量較小，計算得到的OR置信區間很寬，OR估計值本身就不太可靠，此時構建的OR關於ELN的函數關係很可能也是有問題的。但是不用氣餒，細心的讀者可能會發現本期帖子提到的segment包好像可以直接處理logistics迴歸模型，也就是說可以不用通過計算各個ELN數量相對於1個ELN的OR值來構建OR關於ELN的函數關係，而是直接通過模型獲得結局變量的函數與ELN的關係，從而探索拐點，是不是有種“柳暗花明又一村”的感覺呢！</p><p>責任編輯：腫瘤資訊-Ruby</p><p><img alt=連續型變量的離散化(5)——R軟件segmented包 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/37f300034759fd2da197></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>連續</a></li><li><a>變量</a></li><li><a>散化</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/ed23dd8.html alt=連續型變量的離散化(6)——再談兩類常用方法的比較 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/401e0001e1c0758024ff style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ed23dd8.html title=連續型變量的離散化(6)——再談兩類常用方法的比較>連續型變量的離散化(6)——再談兩類常用方法的比較</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a4c4bce.html alt=北大郭弘團隊在連續變量量子密鑰分發方向取得重要進展 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9feec080e9d042ed86e418ef78c7f3c7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a4c4bce.html title=北大郭弘團隊在連續變量量子密鑰分發方向取得重要進展>北大郭弘團隊在連續變量量子密鑰分發方向取得重要進展</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9720c59.html alt="每日丁點 | 定量和定性變量、連續和離散變量，到底怎麼分？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0e15401cb9944769ae673da4eb81dd05 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9720c59.html title="每日丁點 | 定量和定性變量、連續和離散變量，到底怎麼分？">每日丁點 | 定量和定性變量、連續和離散變量，到底怎麼分？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b460a62.html alt=連續變量量子密鑰分發芯片研製成功 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RZeCio342lJYwB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b460a62.html title=連續變量量子密鑰分發芯片研製成功>連續變量量子密鑰分發芯片研製成功</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c87c04b.html alt=青島市連續變量量子密鑰分發應用示範項目通過驗收 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/REHqPvsI8t4FyB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c87c04b.html title=青島市連續變量量子密鑰分發應用示範項目通過驗收>青島市連續變量量子密鑰分發應用示範項目通過驗收</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb83c54f.html alt=中國最大跨度連續管翼緣鋼混組合橋蘭州至蘭州新區段架設 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e7b723dc504143a19e9b274c7169a5f2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb83c54f.html title=中國最大跨度連續管翼緣鋼混組合橋蘭州至蘭州新區段架設>中國最大跨度連續管翼緣鋼混組合橋蘭州至蘭州新區段架設</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e5579b3f.html alt=國內最大跨度連續管翼緣鋼混組合橋開始架設 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a2c29b2da3564087a78a96b9442661aa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e5579b3f.html title=國內最大跨度連續管翼緣鋼混組合橋開始架設>國內最大跨度連續管翼緣鋼混組合橋開始架設</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7ce12b55.html alt=我國最大跨度連續管翼緣鋼混組合橋在“蘭州北大門”開架 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Ryovnrs2nT7uHt style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7ce12b55.html title=我國最大跨度連續管翼緣鋼混組合橋在“蘭州北大門”開架>我國最大跨度連續管翼緣鋼混組合橋在“蘭州北大門”開架</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/04b90800.html alt=我國最大跨度連續管翼緣鋼混組合橋在蘭州北龍口開架 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RyqROtQHmm5l1q style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/04b90800.html title=我國最大跨度連續管翼緣鋼混組合橋在蘭州北龍口開架>我國最大跨度連續管翼緣鋼混組合橋在蘭州北龍口開架</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1787232b.html alt=我國最大跨度連續管翼緣鋼混組合橋在蘭州架設完工 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S3xKzE64bErzXB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1787232b.html title=我國最大跨度連續管翼緣鋼混組合橋在蘭州架設完工>我國最大跨度連續管翼緣鋼混組合橋在蘭州架設完工</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/270db281.html alt=我國最大跨度連續管翼緣鋼混組合橋開始架設 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/270db281.html title=我國最大跨度連續管翼緣鋼混組合橋開始架設>我國最大跨度連續管翼緣鋼混組合橋開始架設</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/099cc2ea.html alt=國內最大跨度連續管翼緣鋼混組合橋在蘭州新區完成架設 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/S42Rp99EhB8lOY style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/099cc2ea.html title=國內最大跨度連續管翼緣鋼混組合橋在蘭州新區完成架設>國內最大跨度連續管翼緣鋼混組合橋在蘭州新區完成架設</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1f1abf53.html alt=我國最大跨度連續管翼緣鋼混組合橋在蘭州架設 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RymUEDrDYZppyB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1f1abf53.html title=我國最大跨度連續管翼緣鋼混組合橋在蘭州架設>我國最大跨度連續管翼緣鋼混組合橋在蘭州架設</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4a4602c3.html alt=我國最大跨度連續管翼緣鋼混組合橋架設完工 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/S3qmvXU2KBNMV style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4a4602c3.html title=我國最大跨度連續管翼緣鋼混組合橋架設完工>我國最大跨度連續管翼緣鋼混組合橋架設完工</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/70065b84.html alt=鐵龍雄跨！我國最大跨度連續管翼緣鋼混組合橋架設完工 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/4452b5f7d79d4444a3d4c81f0e247dcd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/70065b84.html title=鐵龍雄跨！我國最大跨度連續管翼緣鋼混組合橋架設完工>鐵龍雄跨！我國最大跨度連續管翼緣鋼混組合橋架設完工</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>