<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Mysql知識總結 | 极客快訊</title><meta property="og:title" content="Mysql知識總結 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/53ea00052344dfa26d44"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1e03b0ea.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1e03b0ea.html><meta property="article:published_time" content="2020-10-29T21:09:08+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:08+08:00"><meta name=Keywords content><meta name=description content="Mysql知識總結"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/1e03b0ea.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Mysql知識總結</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/53ea00052344dfa26d44></p><p class=pgc-img-caption>廣東IT優就業</p><p><strong>mysql 登錄命令：</strong></p><p>mysql -uroot -pbank 這句話的意思是用root用戶登錄，密碼是bank。</p><p>mysql -uroot -p bank 這句話的意思是用root用戶登錄，bank是進入後切換到bank這個數據庫，此時按下回車會提示輸入密碼。進入後不用use bank 來切換到bank數據庫，自動就是bank數據庫。</p><p>mysql -uroot -pbank &lt;=等價於=> mysql -u root -pbank 也就是說-uroot 等價於 -u root 。不論中間是否有空格隔開都一樣。代表用root這個用戶進行登錄。</p><p><strong>查看當前時間：</strong></p><p>mysql> select now() from dual;</p><p>+---------------------+</p><p>| now() |</p><p>+---------------------+</p><p>| 2017-10-25 22:05:38 |</p><p>+---------------------+</p><p>1 row in set (0.03 sec)</p><p>mysql> select now();</p><p>+---------------------+</p><p>| now() |</p><p>+---------------------+</p><p>| 2017-10-25 22:05:47 |</p><p>+---------------------+</p><p>1 row in set (0.00 sec)</p><p>之所以要使用from dual是為了兼容oracle數據庫，如果只是MySQL的話，可以省略from dual；因為某些數據庫服務器規定查詢語句中必須包含from字句，並在其中至少指明一個表名。</p><p><strong>MySQL字符型數據</strong></p><p>字符型數據分為定長或者變長兩類，不同點在於固定長度的字符串使用空格向右填充，以保證佔用同樣的字節數；變長字符串不需要向右填充，並且所有字節數可變。當定義一個字符串類型時，必須要指定能存放的字符串最大長度。例如，需要存儲最大不超過20個字節的字符串，可以用下列方式：</p><p>char(20) /* fixed-length */</p><p>varchar(20) /* variable-length */</p><p>char最大可以設置為255個字節，varchar則可以最多保存65535個字節。要存儲比65535更長的字符串則要使用文本類型了。</p><p><strong>文本數據</strong></p><p>如果需要存儲的數據超過64KB（varchar的上限），就需要使用文本類型。</p><p>文本類型　　　　　　　　　　最大能存儲的字節數（B）</p><p>tinytext　　　　　　　　　　　　　　255</p><p>text　　　　　　　　　　　　　　 65535</p><p>mediumtext　　　　　　　　　　 16777215</p><p>longtext　　　　　　　　　　　　4294967295</p><p>觀察可以發現，其實是用規律的，255 = 2^8 -1 ; 65535 = 2^16 -1 ; 16777215 = 2^24 -1 ; 4294967295 = 2^32 -1 ;</p><p>注意事項：</p><p>1.如果被裝載到文本列中的數據超出了該類型的最大長度，數據會被截斷。</p><p>2.在向文本列裝載數據時，不會消除數據的尾部空格。而char類型會。</p><p>3.使用文本列進行排序、分組的時候，只會使用前1024個字符</p><p>4.這些不同的文本類型只是針對MySQL，sql Server對於大的字符型數據只提供text類型，而db2和oracle使用的數據類型是Clob。</p><p>5.現在MySQL允許varchar列最大容納65535個字節了（在MysQL4中為255個字符），也就是和text一樣大了，所以一般情況不會用到tinytext、text了，超過65535用mediumtext或者longtext；少於65535則使用varchar。</p><p>6.Oracle中，char能容納2000個字節，varchar2能容納4000個，sql Server中char和varchar都能容納8000個字節。</p><p><strong>MySQL中的浮點數</strong></p><p>浮點數是用來表示實數的一種方法，它用 M(尾數) * B( 基數)的E(指數）次方來表示實數，相對於定點數來說，在長度一定的情況下，具有表示數據範圍大的特點。但同時也存在誤差問題。 浮點數有多種實現方法，計算機中浮點數的實現大都遵從 IEEE754 標準，IEEE754 規定了單精度浮點數和雙精度浮點數兩種規格：</p><p>單精度浮點數用4字節（32bit）表示浮點數，格式是： 1位符號位 8位表示指數 23位表示尾數</p><p>雙精度浮點數用8字節（64bit）表示浮點數，格式是： 1位符號位 11位表示指數 52位表示尾數</p><p>IEEE754標準還對尾數的格式做了規範：d.dddddd...，小數點左面只有1位且不能為零，計算機內部是二進制，因此，尾數小數點左面部分總是1。顯然，這個1可以省去，以提高尾數的精度。</p><p>下圖是IEEE754的浮點數標準圖：</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/53ee0000ba30e4170471></p><p class=pgc-img-caption>廣東IT優就業</p><p>由上圖可知，單精度浮點數的尾數雖然只有23位，但是由於第一位一定是1，所以其實是用24bit表示的；</p><p>雙精度浮點數的尾數雖然只有52位，但是由於第一位一定是1，所以其實是用53bit表示的；</p><p>IEEE754標準中，一個規格化32位的浮點數x的真值表示為：</p><p><strong>　　　　x=(−1)S×(1.M)×2^e</strong></p><p><strong>　　　　e=E−127</strong></p><p>其中尾數域表示的值是1.M。因為規格化的浮點數的尾數域最左位總是1，故這一位不予存儲，而認為隱藏在小數點的左邊。</p><p>8 位的階碼<strong>e</strong>指數為可以表達 0 到 255 之間的 256 個指數值。但是，指數可以為正數，也可以為負數。為了處理負指數的情況，實際的指數值按要求需要加上一個偏差（Bias）值作為保存在指數域中的值，單精度數的偏差值為 127；偏差的引入使得對於單精度數，實際可以表達的指數值的範圍就變成 -127（0 - 偏差值127） 到 128 （255 - 偏差值127）之間（包含兩端）。在本文中，最小指數和最大指數分別用 emin 和 emax 來表達。實際的指數值 -127（保存為全0）以及 +128（保存為全 1）保留用作特殊值的處理。</p><p>（1）最大正數</p><p>單精度浮點數最大正數值的符號位S=0，階碼E=254，指數e=254-127=127，尾數M=111 1111 1111 1111 1111 1111，其機器碼為：0 11111110 111 1111 1111 1111 1111 1111。</p><p>那麼最大正數值:</p><p>PosMax=(−1)S×1.M×2^e=+(1.11111111111111111111111)×2^127 ≈ <strong>3.402823e+38</strong></p><p>（2）最小正數 最小正數符號位S=0，階碼E=1，指數e=1-127=-126，尾數M=0，其機器碼為0 00000001 000 0000 0000 0000 0000 0000。 那麼最小正數為：</p><p>PosMin=(−1)S×1.M×2e=+(1.0)×2−126 ≈ <strong>1.175494e−38</strong></p><p>當使用浮點類型時，可以指定其精度（小數點左邊右邊所允許的數字總位數）和有效位（小數點右邊所允許的數字位數）。比如float（5,2）代表的是小數點左邊3位，小數點右邊2位。因此，如果添加11.275會被四捨五入到11.28。最大支持添加的數字是999.99，當添加比999.99大的數字的時候，就會報錯。</p><p>注意，float也可以聲明為unsigned類型，但是這聲明只會禁止列中存放負數，並沒有改變該列存儲數據的範圍。</p><p><strong>MySQL中的整數類型</strong></p><p>類型　　　　　　帶符號的範圍　　　　　　　　無符號的範圍</p><p>tinyint　　　　　　-128~127　　　　　　　　　　0~255</p><p>smallint　　　　 -32768~32767　　　　　　　　0~65535</p><p>mediumint　　　-8388608~8388607　　　　　　0~16777215</p><p>int 　　　　　　-2147483648~2147483647　　 0~4294967295</p><p>bigint　　　　-9223372036854755808　　　　0~18446744073709551615</p><p>~ 9223372036854755807</p><p>當使用tinyint時，分配1字節；使用smallint時，分配2字節；使用mediumint時，分配3字節；使用int時，分配4字節；使用bigint，分配8字節。</p><p>選擇類型時，只需要確保能夠容納預期的最大數字即可，這樣可以避免不必要的浪費。</p><p><strong>MySQL的時間類型</strong></p><p>類型　　　　　　默認格式　　　　　　　　允許的值</p><p>date　　　　　　YYYY-MM-DD　　　　　　 1000-01-01~9999-12-31</p><p>datetime　　　　YYYY-MM-DD HH:MI:SS　　1000-01-01~9999-12-31 23:59:59</p><p>timestamp　　　 YYYY-MM-DD HH:MI:SS　　 1000-01-01~9999-12-31 23:59:59</p><p>year　　　　　　YYYY　　　　　　　　　　 1901~2155</p><p>time　　　　　　HHH:MI:SS　　　　　　　　-838:59:59~838:59:59</p><p>如上表，如果需要向默認格式為YYYY-MM-DD的日期列插入日期2017年1月23日，必須使用字符串'2017-01-23'。</p><p>timestamp類型和datetime類型一樣（包括了年月日 時分秒），但是Mysql服務器可以支持在向表中添加或者修改數據行時，自動為timestamp類型列產生當前的日期和時間。</p><p><strong>GMT和UTC時間</strong></p><p>GMT時間就是著名的格林威治標準時間，其他所有地區都可以使用與GMT的差距的小時數來表示，比如GMT +8代表中國北京的時間。</p><p>UTC時間是克服了GMT時間的一些缺陷後，用原子鐘提供的時間，比GMT更加準一些，其實還是以格林威治作為標準的。北京的時間可以表示為UTC +8</p><p>簡單地理解他倆，GMT舊一些，不太準；UTC新一些，用的技術更加高級，更加準。其他區別可以忽略不計。</p><p>現在計算機中都用了更加準確的utc時間，所以MySQL中可以使用utc_timestamp()來獲取。</p><p>mysql> select utc_timestamp();</p><p>+---------------------+</p><p>| utc_timestamp() |</p><p>+---------------------+</p><p>| 2017-10-26 02:42:02 |</p><p>+---------------------+</p><p>1 row in set (0.02 sec)</p><p>可以看到返回的格式是YYYY-MM-DD HH:MI:SS。Sql Server可以用getutcdate（）函數獲取。</p><p><strong>查看全局時區和會話時區</strong></p><p>mysql> SELECT @@global.time_zone,@@session.time_zone;</p><p>+--------------------+---------------------+</p><p>| @@global.time_zone | @@session.time_zone |</p><p>+--------------------+---------------------+</p><p>| SYSTEM | SYSTEM |</p><p>+--------------------+---------------------+</p><p>1 row in set (0.00 sec)</p><p>可以看到，結果值為system，這表示服務器根據數據庫所在地使用相應的時區設置。</p><p>假如你坐在中國，遠程一臺紐約的mysql服務器，可以通過執行下面的指令暫時改變當前會話的時區設置：</p><p>SET time_zone = '+08:00'；</p><p>mysql> select @@global.time_zone,@@session.time_zone;</p><p>+--------------------+---------------------+</p><p>| @@global.time_zone | @@session.time_zone |</p><p>+--------------------+---------------------+</p><p>| SYSTEM　　　　　 |　　　　 +08:00　　　 |</p><p>+--------------------+---------------------+</p><p>1 row in set (0.00 sec)</p><p>此時會話中顯示的所有日期都符合北京時間。</p><p>如果需要向datetime或者timestamp列中添加一條2017年1月23日下午15:00的數據，可以使用下列的字符串：</p><p>‘2017-01-23 15:00:00’</p><p>'2017/01/23 15,00,00'</p><p>'2017,01,23 15,00,00'</p><p>'20170123150000'</p><p>以上的字符串都可以產生日期，但是會比較死板，必須要有固定的格式，缺一不可。</p><p><strong>產生日期的函數</strong></p><p><strong></strong>如果你現在手上的數據不是像上邊一樣的格式，而是其他類型的字符串，比如‘September 17, 2008’ 或者'September 2008 , 17' 等等更加隨意的排列方式，那麼怎麼辦呢，要不要一個一個轉化成上邊的那種格式呢，顯然，MySQL也考慮到了這種情況，所以提供了一個str_to_date（）函數，可以將這種類型的數據不用修改成上邊那種格式就能直接插入到數據庫中。是不是很方便呢，來看看怎麼用的。</p><p><strong>UPDATE TABLE1</strong></p><p><strong>　　SET birth_date = STR_TO_DATE('September 17 , 2008' , '%M %d , %Y')</strong></p><p><strong>　　WHERE cust_id = 9999;</strong></p><p><strong>　　或者</strong></p><p><strong>　　UPDATE TABLE1</strong></p><p><strong>　　SET birth_date = STR_TO_DATE('September 2008 , 17' , '%M %Y , %d')</strong></p><p><strong>　　WHERE cust_id = 9999;</strong></p><p>這樣就可以插入到數據庫了,當然，此時在數據庫中保存的格式就變成　<strong>2008-09-17 00:00:00 </strong>這種格式的了.</p><p>用這個str_to_date()函數的時候，需要查閱下邊的表，來知道%M 代表什麼？%Y代表什麼？ 就像C語言中%d代表整數，%f代表浮點數一樣，多用就自然記住了。</p><p>日期格式表</p><p><strong>格式部件 　　　　　　　　　　 描述</strong></p><p>%M　　　　　　　　　　 月名稱（January,February,March.....）</p><p>%m　　　　　　　　　　 月序號(01 ~ 12)</p><p>%d　　　　　　　　　　 日序號（01 ~ 31）</p><p>%j　　　　　　　　　　 日在一年中的序號（001 ~ 366）</p><p>%W　　　　　　　　　　星期名稱（Sunday , Monday,Tuesday....）</p><p>%Y　　　　　　　　　　 4位數表示的年份（2011，2012 , 2013.....）</p><p>%y　　　　　　　　　　 兩位數代表的年份（11,12,13......）</p><p>%H　　　　　　　　　　 小時（00 ~ 23）</p><p>%h　　　　　　　　　　 小時（01 ~ 12）</p><p>%p　　　　　　　　　　 A.M. 或者 P.M.</p><p>%i　　　　　　　　　　 分鐘(00 ~ 59 )</p><p>%s　　　　　　　　　　 秒鐘(00 ~ 59 )</p><p>%f 　　　　　　　　　　 微秒(000000 ~ 999999 ）</p><p>注意：</p><p>1.str_to_date()函數將根據格式字符串的內容自動決定返回datetime，date 或者 time 類性值。舉例來說，如果格式字符串只包含%H %i或者 %s，那麼將返回time值。</p><p>2.Oracle數據庫，to_date()函數和mysql的str_to_date()函數具有同樣的功能。</p><p>3.可以使用select current_date()返回當前date，使用select current_time()返回當前time，使用select current_timestamp()返回當前timestamp/datetime。</p><p><strong>操作時間數據的幾個函數</strong></p><p><strong>1.date_add()函數</strong></p><p><strong>　　 2.last_day()函數</strong></p><p><strong>　　 3.convert_tz()函數</strong></p><p><strong>　　 4.dayname()函數</strong></p><p><strong>　　 5.extract()函數</strong></p><p><strong>　　 6.datediff()函數</strong></p><p><strong>　　下面依次來看一下這幾個函數。</strong></p><p><strong>1.date_add()函數</strong></p><p><strong>　　</strong>MySQL的date_add()函數可以為指定的日期增加任意一段時間間隔（如天、月、年），併產生另外一個日期。</p><p>#在現在的時間基礎上添加5天。</p><p>mysql><strong> select date_add(current_timestamp(),interval 5 day);</strong></p><p>+----------------------------------------------+</p><p>| date_add(current_timestamp(),interval 5 day) |</p><p>+----------------------------------------------+</p><p>| <strong>2017-10-31 11:58:00</strong> |</p><p>+----------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>#在現在的時間的基礎上增加3小時25分鐘0秒</p><p>mysql> <strong>select date_add(current_timestamp(),interval '3:25:00' hour_second);</strong></p><p>+--------------------------------------------------------------+</p><p>| date_add(current_timestamp(),interval '3:25:00' hour_second) |</p><p>+--------------------------------------------------------------+</p><p>| <strong>2017-10-26 15:23:53</strong> |</p><p>+--------------------------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>#在現在的時間的基礎上增加了1年12月</p><p>mysql><strong> select date_add(current_timestamp(),interval '1-12' year_month);</strong></p><p>+----------------------------------------------------------+</p><p>| date_add(current_timestamp(),interval '1-12' year_month) |</p><p>+----------------------------------------------------------+</p><p>| <strong>2019-10-26 11:59:23</strong> |</p><p>+----------------------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>#在現在的時間基礎上增加5分鐘10秒</p><p>mysql> <strong>select date_add(current_timestamp(),interval '5:10' minute_second);</strong></p><p>+-------------------------------------------------------------+</p><p>| date_add(current_timestamp(),interval '5:10' minute_second) |</p><p>+-------------------------------------------------------------+</p><p>|<strong> 2017-10-26 12:07:59</strong> |</p><p>+-------------------------------------------------------------+</p><p>1 row in set (0.02 sec)</p><p><strong>常用的時間間隔類型表</strong></p><p><strong>間隔名稱　　　　　　　　　　　　描述</strong></p><p>second　　　　　　　　　　　　　秒數</p><p>minute　　　　　　　　　　　　　分鐘數</p><p>hour　　　　　　　　　　　　　　小時數</p><p>day　　　　　　　　　　　　　　 天數</p><p>month　　　　　　　　　　　　　 月份數</p><p>year　　　　　　　　　　　　　　年份</p><p>minute_second　　　　　　　　 分鐘數和秒數，中間用“：”隔開</p><p>hour_second 　　　　　　　　　 小時數、分鐘數、秒數，中間用“：”隔開</p><p>year_month 　　　　　　　　　　 年份和月份，中間用“-”隔開</p><p><strong>2.last_day()函數</strong></p><p>要獲取當前時刻的月底是哪一天，可以使用last_day（）函數，這個函數的作用就是簡單地返回傳入的日期的月末日期。</p><p>mysql><strong> select last_day(current_timestamp());</strong></p><p>+-------------------------------+</p><p>| last_day(current_timestamp()) |</p><p>+-------------------------------+</p><p>| <strong>2017-10-31</strong> |</p><p>+-------------------------------+</p><p>1 row in set (0.00 sec)</p><p>可以像上邊一樣傳入datetime類型的值，也可以傳入date的類型值，都一樣會返回date類型的值。</p><p><strong>3.convert_tz()函數</strong></p><p>該函數能夠將某個時區的datetime類型的值轉化為另外一個時區的對應時間。在Oracle中，這個函數叫new_time()函數。</p><p>mysql><strong> select convert_tz('2014-09-28','US/Eastern','UTC');</strong></p><p>+---------------------------------------------+</p><p>| convert_tz('2014-09-28','US/Eastern','UTC') |</p><p>+---------------------------------------------+</p><p>| <strong>NULL</strong> |</p><p>+---------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>可以看到此時的返回值為null，是因為我的電腦上沒有安裝mysql的時區數據，就是說，系統現在不認識US/Eastern 這個地區，UTC地區也不認識。所以返回了一個空值。</p><p><strong>4.dayname()函數</strong></p><p>dayname()函數可以直接返回傳入的日期那天是星期幾。</p><p>mysql> <strong>select dayname('2008-09-18');</strong></p><p>+-----------------------+</p><p>| dayname('2008-09-18') |</p><p>+-----------------------+</p><p>| <strong>Thursday</strong> |</p><p>+-----------------------+</p><p>1 row in set (0.00 sec)</p><p>比如上面的例子中，返回了2008年9月18日那天，是星期四。</p><p>除了dayname，還有<strong>monthname</strong>()函數，同理可以返回傳入日期代表的月份的名稱。比如下面的例子：</p><p>mysql><strong> select monthname('2008-09-18');</strong></p><p>+-------------------------+</p><p>| monthname('2008-09-18') |</p><p>+-------------------------+</p><p>| <strong>September</strong> |</p><p>+-------------------------+</p><p>1 row in set (0.00 sec)</p><p>很簡單就能理解，不多說了。</p><p><strong>5.extract()函數</strong></p><p>該函數用於從日期或者時間中提取出某一部分內容。</p><p>mysql> <strong>select extract(hour_second from '2008-09-18 22:19:05');</strong></p><p>+-------------------------------------------------+</p><p>| extract(hour_second from '2008-09-18 22:19:05') |</p><p>+-------------------------------------------------+</p><p>| <strong>221905</strong> |</p><p>+-------------------------------------------------+</p><p>1 row in set (0.02 sec)</p><p>mysql> <strong>select extract(year_month from '2008-09-18 22:19:05');</strong></p><p>+------------------------------------------------+</p><p>| extract(year_month from '2008-09-18 22:19:05') |</p><p>+------------------------------------------------+</p><p>| <strong>200809</strong> |</p><p>+------------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>mysql><strong> select extract(minute from '2008-09-18 22:19:05');</strong></p><p>+--------------------------------------------+</p><p>| extract(minute from '2008-09-18 22:19:05') |</p><p>+--------------------------------------------+</p><p>| <strong>19</strong> |</p><p>+--------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p><strong>6.datediff()函數</strong></p><p>該函數用於傳入兩個時間，求出他們之間的時間間隔。</p><p>比如</p><p>mysql> <strong>select datediff('2009-08-28','2009-08-24');</strong></p><p>+-------------------------------------+</p><p>| datediff('2009-08-28','2009-08-24') |</p><p>+-------------------------------------+</p><p>| <strong>4</strong> |</p><p>+-------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>可以看到該日期不包含最後一天，即24,25,26,27.不過，也有可能是25,26,27,28，總之是包含其中一天，不包含兩天。</p><p>注意點：</p><p>datediff函數會忽略參數中的時間值，就算我把前一個日期設置為一天的最後一秒，後一個日期設置為一天的第一秒，也不會影響計算結果。</p><p>比如：</p><p>mysql><strong> select datediff('2009-08-28 23:59:59','2009-08-24 00:00:01');</strong></p><p>+-------------------------------------------------------+</p><p>| datediff('2009-08-28 23:59:59','2009-08-24 00:00:01') |</p><p>+-------------------------------------------------------+</p><p>| <strong>4</strong> |</p><p>+-------------------------------------------------------+</p><p>1 row in set (0.00 sec)</p><p>可以發現，該函數並沒有關注時間，而是選擇直接忽略了。</p><p>假如交換一下第一個參數和第二個參數的話，就會發現日期的值變成了負數。</p><p><strong>MySQL的查詢語句</strong></p><p><strong>1.select子句</strong></p><p>query字句表</p><p>字句名稱　　　　　　　　　　使用目的</p><p>select　　　　　　　　　　 確定結果集中應該包含哪些列</p><p>from　　　　　　　　　　 指明所要提取數據的表，以及這些表示如何連接的</p><p>where　　　　　　　　　　 過濾掉不需要的數據</p><p>group by　　　　　　　　　用於對具有相同列值的行進行分組</p><p>having　　　　　　　　　　過濾掉不需要的組</p><p>order by　　　　　　　　　 按一個或多個列，對最後結構集中的行進行排序</p><p>從最簡單的例子開始：</p><p>（1）選擇一個 表中所有的數據</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ec000432f473b8639e></p><p class=pgc-img-caption>廣東IT優就業</p><p>（2）選擇其中的某一列或者多列</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53f100004d0887413837></p><p class=pgc-img-caption>廣東IT優就業</p><p>如果數據庫限制了只能返回from字句後面各個表所包含的列，就顯得相當乏味了。幸運的是，我們可以在select字句中加上一些“調料”，例如</p><p>1.字符，比如數字或字符串</p><p>2.表達式，比如transaction.amount*-1</p><p>3.調用內建函數，比如round（transaction.amount,2）;</p><p>4.用戶自定義的函數調用。</p><p>（4）展示對於剛才的Department表，在查詢中添加一些調料，比如使用自定義的列名、字符、表達式、內建函數調用：</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ed0003c6e6fd273bba></p><p class=pgc-img-caption>廣東IT優就業</p><p>(5)調用更多的內建函數</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/53f000009159bff1d315></p><p class=pgc-img-caption>廣東IT優就業</p><p>可以看到三個內建函數分別返回不同的值，version代表的是數據庫版本，user代表的是當前登錄的用戶名稱，database代表的是現在正在使用的數據庫的名稱。</p><p><strong>現在先在department表中先插入一個同名的公寓，插入語句和插入後結果如下：</strong></p><p><strong><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ef0000b8e731b239af></strong></p><p class=pgc-img-caption>廣東IT優就業</p><p>（6）去除重複的行</p><p>如果此時只選擇name列的話，會有四個值，但是有兩個Loans重複的，我需要獨一無二的，重複值不論出現多少次，我都只取一次，那麼就需要使用到<strong>distinct</strong>關鍵字了。</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53f200003ca8e27c0321></p><p class=pgc-img-caption>廣東IT優就業</p><p>注意此處使用的distinct，添加這個關鍵詞對小數據量沒啥影響，但是如果數據量大了之後，性能影響較大。原因是要產生無重複的結果集需要首先對數據排序，這對於大的結果集來說是相當耗時的。因此不要為了確保去除重複行而隨意地使用distinct，而是應該先了解所使用的數據是否可能包含重複行，以減少對distinct的不必要的使用。</p><p><strong>2.from子句</strong></p><p>from子句定義了查詢中所使用的表，以及連接這些表的方式。</p><p>當使用術語“表”時，往往想到的是實實在在存在的表格，就像上面的Department表。其實from子句後邊不僅僅可以跟這種實體表（用create table創建），還可以從臨時表（子查詢返回的表）以及虛擬表（使用create view 子句所創建的視圖）中返回數據。</p><p>（1）從子查詢返回的表中查詢數據</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ee0000ba337be2b028></p><p class=pgc-img-caption>廣東IT優就業</p><p>上圖中會先執行括號中的select，然後會在內存中生成一個虛的表，這個虛的表叫d。然後再執行外層的select，從這個虛的表中選擇相應的dept_id列和name列。</p><p>假如這個虛擬表在選擇的時候給一個別名的話，外層也就只能通過這個別名來選擇。比如：</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ee0000ba35fae1dde9></p><p class=pgc-img-caption>廣東IT優就業</p><p>可以看到，內部選擇的時候，給dept_id出了個別名，叫做id，給name出了一個別名，叫做department_name。外層再選擇的時候，就得通過這個新的別名去虛表d中選擇了。</p><p>(2)從視圖中返回數據</p><p>下面先定義一個查詢Department表的視圖，在Department表的基礎上多了一列當前操作時候的時間，並將dept_id重命名為id，將name重命名為department_name。</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ed0003c6e7fab5a04c></p><p class=pgc-img-caption>廣東IT優就業</p><p>然後從這個視圖返回所有的數據：</p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ec000432f8b64ba56a></p><p class=pgc-img-caption>廣東IT優就業</p><p>可以發現，從視圖選擇數據成功了。</p><p><strong>3. where子句</strong></p><p>現在假如我有一個員工表，主要有4個字段，emp_id（員工id）、fname(姓）、lname（名字）、start_date（入職時間）。</p><p>讓我們一起解決一些問題：</p><p>（1）如何獲得員工id為99號的員工的所有信息？</p><p>（2）如何獲得id 大於等於20，小於等於40的員工信息？（請用兩種不同方式分別實現）</p><p>（3）如何獲得11,45,99,124號員工的信息？（用兩種方式實現）</p><p>（4）如何獲得除了11,45,99,124號員工外，其他員工的信息？（用兩種方式實現）</p><p>（5）如何獲得入職時間在2011年10月1日前的，並且姓 ‘李’的所有員工？（用三種方式實現）</p><p>（6）如何獲取所有emp_id的末尾為1的所有記錄，比如emp_id為1,11,21,31.。。。101，121，。。。1001，1011，。。。。。（用三種方式來實現）</p><p>（7）如何獲取101,111,121,131,141,151,161,171,181,191這幾個員工的記錄？（分別用通配和正則來實現）</p><p>上面的這些問題基本涵蓋了where語句中的所有知識點，大家可以先試試看，按照題目的描述和括號中的條件來實現。</p><p>思考後，再查看下面的答案。</p><p>答案：</p><p>（1）<strong>select * from employee where emp_id = 99;</strong></p><p>（2）<strong>select * from employee where emp_id between 20 and 40;</strong></p><p><strong>　　　　 select * from employee where emp_id >=20 and emp_id &lt;=40;</strong></p><p>（3）<strong>select * from employee where emp_id = 11 or emp_id = 45 or emp_id = 99 or emp_id = 124;</strong></p><p><strong>　　　　 select * from employee where emp_id in (11,45,99,124);</strong></p><p>（4）<strong>select * from employee where emp_id !=11 and emp_id !=45 and emp_id != 99 and emp_id !=124;</strong></p><p><strong>　　　　 select * from employee where emp_id not in (11,45,99,124);</strong></p><p>（5）<strong>select * from employee where start_date&lt;'2011-10-01' and fname = '李';</strong></p><p><strong>　　　　 select * from (select * from employee where fname = '李' ) d where d.start_date &lt; '2011-10-01';</strong></p><p><strong>　　　　 select * from employee where emp_id in (select emp_id from employee where fname = '李' ) and start_date &lt; '2011-10-01';</strong></p><p>（6）<strong>select * from employee where emp_id like '%1';</strong></p><p><strong>　　　　 select * from employee where emp_id regexp '.*1$';</strong></p><p><strong>　　　　 select * from employee where right(emp_id,1) = 1;</strong></p><p>（7）<strong>select * from employee where emp_id like '1_1;'</strong></p><p><strong>　　　　 select * from employee where emp_id regexp '1.1';</strong></p><p><img alt=Mysql知識總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/53ee0000bb190529f5f9></p><p class=pgc-img-caption>廣東IT優就業</p><p>希望廣州IT培訓老師上述分享的內容對大家有所幫助。</p><p>出處：https://www.cnblogs.com/lukairui/p/7735050.html</p><p>更多IT精彩推薦：</p><p>人人都要學的IT小技巧：http://xue.ujiuye.com/zt/renrenxue/</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Mysql</a></li><li><a>知識</a></li><li><a>總結</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/f86bf26c.html alt=2745個字總結銑刀的所有知識，一點廢話沒有的“硬貨” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f86bf26c.html title=2745個字總結銑刀的所有知識，一點廢話沒有的“硬貨”>2745個字總結銑刀的所有知識，一點廢話沒有的“硬貨”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e3cffb4e.html alt=最全的磁珠知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4bd841492a194badb07f73a902b4b333 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e3cffb4e.html title=最全的磁珠知識總結>最全的磁珠知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/811d62bf.html alt=電子電路基礎知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/9003d7a3-59b8-4617-9a18-0ac9fb90ef52 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/811d62bf.html title=電子電路基礎知識總結>電子電路基礎知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6bcc823d.html alt=超全面的語音交互知識總結：從原理、場景到趨勢 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RYzWTFa450S6dI style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6bcc823d.html title=超全面的語音交互知識總結：從原理、場景到趨勢>超全面的語音交互知識總結：從原理、場景到趨勢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cc5bf679.html alt=初中地理知識歸納總結（七年級）上冊 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c4ee2fa64ffd4d87b27729c9ab91cd02 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cc5bf679.html title=初中地理知識歸納總結（七年級）上冊>初中地理知識歸納總結（七年級）上冊</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d4209099.html alt=比與比例知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15295664986623e206bdbcf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d4209099.html title=比與比例知識總結>比與比例知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e369ad80.html alt=配電知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15410552401641a34d8e4b3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e369ad80.html title=配電知識總結>配電知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2754827.html alt=總結歸納機械製圖形位公差知識，什麼是直線度，平面度，圓度？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1535168216328db4badc612 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2754827.html title=總結歸納機械製圖形位公差知識，什麼是直線度，平面度，圓度？>總結歸納機械製圖形位公差知識，什麼是直線度，平面度，圓度？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5f12388.html alt=最全拼音知識總結——發音.書寫.拼讀.混淆點附可打印拼讀音節表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/80db278ca2cf42de82b78b017a828231 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5f12388.html title=最全拼音知識總結——發音.書寫.拼讀.混淆點附可打印拼讀音節表>最全拼音知識總結——發音.書寫.拼讀.混淆點附可打印拼讀音節表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6ccf834.html alt=激光原理基礎知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6ccf834.html title=激光原理基礎知識總結>激光原理基礎知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0db223c.html alt=最全總結！嵌入式系統知識和接口技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2113e6a1b41146deb35c8ba719ce9e2d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0db223c.html title=最全總結！嵌入式系統知識和接口技術>最全總結！嵌入式系統知識和接口技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0146643.html alt=“顯微鏡”知識總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/02586b9685e147f3813dda5ab7f3d25e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0146643.html title=“顯微鏡”知識總結>“顯微鏡”知識總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/920d706.html alt=焊接基本知識大總結，又漲知識了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/f73898032ef940f7b95fca75fe723e5e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/920d706.html title=焊接基本知識大總結，又漲知識了>焊接基本知識大總結，又漲知識了</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/77af0a0.html alt=護理知識總結149條 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/77af0a0.html title=護理知識總結149條>護理知識總結149條</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/804ea540.html alt=「行業知識」結構工程師的心結——鋼樑扭轉計算 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/177f1b37fa4b41698a4e78accf7efbb4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/804ea540.html title=「行業知識」結構工程師的心結——鋼樑扭轉計算>「行業知識」結構工程師的心結——鋼樑扭轉計算</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>