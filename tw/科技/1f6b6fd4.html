<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>â€‹mysql AB è¤‡è£½æŠ€è¡“(ä¸»å¾),æ›‰æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06 | æå®¢å¿«è¨Š</title><meta property="og:title" content="â€‹mysql AB è¤‡è£½æŠ€è¡“(ä¸»å¾),æ›‰æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06 - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/1f6b6fd4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/1f6b6fd4.html><meta property="article:published_time" content="2020-10-29T21:09:57+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:57+08:00"><meta name=Keywords content><meta name=description content="â€‹mysql AB è¤‡è£½æŠ€è¡“(ä¸»å¾),æ›‰æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/1f6b6fd4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>â€‹mysql AB è¤‡è£½æŠ€è¡“(ä¸»å¾),æ›‰æ¡‚ç§‘æŠ€åˆ†äº«mysql_04/06</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä¸‹é¢ç¹¼çºŒåˆ†äº«æ²’æœ‰ç”Ÿæ°£äº†æ•¸æ“šåº«1-6ç¯€èª²ï¼Œä¹‹04</p><p>mysql AB è¤‡è£½æŠ€è¡“(ä¸»å¾)<br></p><p>MySQLæ”¯æŒå–®å‘ã€ç•°æ­¥(async)è¤‡è£½ï¼Œè¤‡è£½éç¨‹ä¸­ä¸€å€‹æœå‹™å™¨å……ç•¶ä¸»æœå‹™å™¨ï¼Œè€Œä¸€å€‹æˆ–å¤šå€‹å…¶å®ƒæœå‹™å™¨å……ç•¶å¾æœå‹™å™¨ã€‚</p><p>åŒæ­¥è¤‡è£½éœ€è¦ä½¿ç”¨ndbcluster(å„é›†ç¾¤ç¯€é»éƒ½å¯è®€å¯å¯«)æˆ–è€…drbd(ç¶²çµ¡raid)é€™äº›æŠ€è¡“ï¼Œæˆ–è€…æ˜¯æ–°ç‰ˆmysqlçš„åŠåŒæ­¥è¤‡è£½</p><p>mysqlä¸» - - > mysqlå¾</p><p>master slave</p><p>æŠŠä¸»ä¸Šçš„äºŒé€²åˆ¶æ—¥èªŒ(bin-log)çš„å…§å®¹å‚³åˆ°å¾ä¸Šçš„ä¸€å€‹æ–°çš„æ—¥èªŒå«relay-bin-log</p><p>å¾ä¸Šçš„ IO ç·šç¨‹ è² è²¬å‚³è¼¸</p><p>å¾ä¸Šçš„ SQL ç·šç¨‹ è² è²¬å¾æœå‹™å™¨è§£ææ—¥èªŒ</p><p>è¤‡è£½çš„éç¨‹ï¼š</p><p>1ï¼Œslaveç«¯çš„IOç·šç¨‹é€£ä¸Šmasterç«¯ï¼Œè«‹æ±‚</p><p>2ï¼Œmasterç«¯è¿”å›çµ¦slaveç«¯ï¼Œbin logæ–‡ä»¶åå’Œä½ç½®ä¿¡æ¯</p><p>3ï¼ŒIOç·šç¨‹æŠŠmasterç«¯çš„bin logå…§å®¹ä¾æ¬¡å¯«åˆ°slaveç«¯relay bin logè£¡ï¼Œä¸¦æŠŠmasterç«¯çš„bin-logæ–‡ä»¶åå’Œä½ç½®è¨˜éŒ„åˆ°master.infoè£¡ã€‚</p><p>4ï¼Œsalveç«¯çš„sqlç·šç¨‹ï¼Œæª¢æ¸¬åˆ°relay bin logä¸­å…§å®¹æ›´æ–°ï¼Œå°±æœƒè§£ærelay logè£¡æ›´æ–°çš„å…§å®¹ï¼Œä¸¦åŸ·è¡Œé€™äº›æ“ä½œï¼›ä¹Ÿå°±æ˜¯èªªsalveåŸ·è¡Œå’Œmasterä¸€æ¨£çš„æ“ä½œè€Œé”åˆ°æ•¸æ“šåŒæ­¥çš„ç›®çš„ï¼›</p><p>å®¢æˆ¶</p><p>ï½œ</p><p>ï½œ</p><p>webç¨‹åºï¼ŒéŠæˆ²ç¨‹åºï¼ˆc,php,java.......)</p><p>|</p><p>|</p><p>ä»£ç†å±¤ (mysqlproxy,amoeba)</p><p>|</p><p>|</p><p>mysqlä¸» ----> mysqlå¾</p><p>æ€è€ƒï¼š</p><p>1ï¼Œä¸»è¦æ‰“é–‹äºŒé€²åˆ¶æ—¥èªŒï¼Œå¾è¦ä¸è¦é–‹äºŒé€²åˆ¶æ—¥èªŒ?</p><p>å¾mysqlå¯é–‹å¯ä¸é–‹ï¼Œè¦çœ‹æƒ…æ³</p><p>2ï¼Œä¸»å’Œå¾çš„è®€å¯«æƒ…æ³æ€éº¼åšï¼Ÿ</p><p>å¾ä¸èƒ½å¯«ï¼Œå¾åªèƒ½è®€ï¼›ä¸»å¯è®€å¯å¯«ï¼›</p><p>æ‰€ä»¥æœ‰äº›æ™‚å€™åšä¸»åªå¯«ï¼Œå¾åªè®€ï¼Œä¹Ÿå°±æ˜¯è®€å¯«åˆ†é›¢</p><p>3ï¼Œæˆ‘åšäº†è®€å¯«åˆ†é›¢çš„ä¸€ä¸»ä¸€å¾çš„æ¶æ§‹ï¼Œè«‹å•æˆ‘å‰ç«¯çš„ç¨‹åº(web,éŠæˆ²,æ¥­å‹™ç­‰)å¦‚ä½•ä¾†è¨ªå•æ•¸æ“šåº«</p><p>å¦‚æœè£å‰ç«¯webï¼ˆå‡è¨­phpwind)ï¼Œå¡«å¯«æ•¸æ“šåº«çš„IPç‚ºä¸»çš„IPï¼Œé‚£éº¼é€™ç¨®æƒ…æ³ï¼Œ</p><p>mysqlå¾å°±å®Œå…¨è®Šæˆäº†ä¸€å€‹å¯¦æ™‚å‚™ä»½çš„æœå‹™å™¨ï¼Œæ‰€æœ‰çš„è®€å¯«å…¨åœ¨ä¸»ä¸Š</p><p>æ‰€ä»¥è¦åœ¨å‰ç«¯ç¨‹åºå’Œæ•¸æ“šåº«ä¹‹é–“åŠ å…¥ä»£ç†å±¤ç¨‹åºï¼Œä¹Ÿå°±æ˜¯å¡«å¯«çš„æ•¸æ“šåº«IPä¸æ˜¯ä¸»çš„ä¹Ÿä¸æ˜¯å¾çš„ï¼Œ</p><p>è€Œæ˜¯ä»£ç†çš„ï¼Œç”±ä»£ç†ä¾†è² è²¬æŠŠå¯«æ“ä½œçµ¦ä¸»ï¼Œè®€æ“ä½œçµ¦å¾</p><p>4ï¼Œé—œæ–¼å–®é»æ•…éšœçš„å•é¡Œ,å¦‚æœå¾æ›æ‰äº†ï¼Œæ€éº¼è§£æ±ºï¼Ÿå¦‚æœä¸»æ›æ‰äº†ï¼Œæ€éº¼è§£æ±º?</p><p>å¾æ›æ‰äº†ï¼Œé‚£éº¼ä¸»å°±è¦è² è²¬è®€å’Œå¯«çš„æ‰€æœ‰æ“ä½œï¼Œç”±ä»£ç†å±¤å¹«ä½ å¯¦ç¾æ“ä½œçš„è½‰æ›ã€‚å¾ä¿®å¥½å¾Œï¼Œç›´æ¥å•Ÿå‹•ï¼Œç„¶å¾Œå°±è‡ªå‹•è®€å¯«åˆ†é›¢ï¼Œé‚„æ˜¯ä»£ç†å±¤è‡ªå‹•å¯¦ç¾æ“ä½œè½‰æ›.</p><p>ä¸»æ›æ‰äº†ï¼ˆå‡è¨­æ›æ‰ä¸€å€‹å°æ™‚)ï¼Œé‚£éº¼å¯«æ“ä½œè‚¯å®šéœ€è¦æœ‰äººä¾†åšï¼Œåªèƒ½æ˜¯mysqlå¾æœå‹™å™¨ä¾†è² è²¬è®€å’Œå¯«æ“ä½œã€‚ä¸»ä¿®å¥½å•Ÿå‹•å¾Œï¼Œå¯«æ“ä½œå¯ä»¥å†çµ¦å›ä¸»ï¼Œä½†æ˜¯å¾åœ¨é€™ä¸€å°æ™‚å…§å¯«çš„æ“ä½œå¦‚ä½•çµ¦ä¸»?(é€™è£¡å°±æ¯”è¼ƒéº»ç…©ï¼Œå¾Œé¢è¬›é›™ä¸»æ¶æ§‹å†è¨è«–)</p><p>é—œæ–¼å¦å¹¾ç¨®æ¶æ§‹çš„æ¢è¨ï¼š</p><p>ä¸€ä¸»å¤šå¾</p><p>ï¼ï¼> salve</p><p>master ï¼ï¼> salve</p><p>ï¼ï¼> salve</p><p>å¯« è®€</p><p>--é©åˆæ–¼ä»¥è®€ç‚ºä¸»çš„æ¥­å‹™ï¼Œä½¿ç”¨å¤šå€‹salveåˆ†æ“”è®€çš„å£“åŠ›ï¼Œä½†è¦æ³¨æ„çš„æ˜¯é€™ç¨®æ¶æ§‹ï¼Œsalveè¶Šå¤šï¼Œé‚£éº¼masterè¤‡è£½çš„å£“åŠ›å°±è¶Šå¤§</p><p>------------------------------------------------</p><p>å¤šä¸»ä¸€å¾ --é€™ç¨®æ¶æ§‹ä¸æ”¯æŒ</p><p>ä¸»A phpwind</p><p>å¾C</p><p>ä¸»B discuz</p><p>------------------------------------------------</p><p>é›™ä¸»æ¶æ§‹ master A &lt;ï¼ï¼> master B</p><p>phpwind discuz</p><p>1ï¼Œæœƒå¾ªç’°è¤‡è£½å—ï¼Ÿ</p><p>ä»–å€‘ä¸æœƒå¾ªç’°è¤‡è£½ï¼Œå› ç‚ºåšè¤‡è£½æ™‚æœƒæŒ‡å®šIDå€¼ï¼Œä¸¦ä¸”ä¸ä¸€è‡´</p><p>2ï¼Œå…©é‚ŠçœŸçš„èƒ½åŒæ™‚å¯«ç›¸åŒçš„æ•¸æ“šå—?</p><p>ä¸å¯ä»¥</p><p>å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p>æ™‚é–“é» master A master B</p><p>1 aï¼1æ”¹ç‚ºa=2</p><p>2 a=1æ”¹ç‚ºa=3</p><p>3 açš„æ”¹è®Šè¤‡è£½éä¾†,ä¸¦è§£æ,aæœƒåˆæ”¹ç‚º2</p><p>4 bçš„æ”¹è®Šè¤‡è£½éä¾†ä¸¦è§£æ,aåˆæœƒæ”¹ç‚º3</p><p>å•é¡Œç”¢ç”Ÿï¼Œæ•¸æ“šä¸ä¸€è‡´</p><p>3ï¼Œå…©é‚Šå¯ä»¥å¯«ä¸åŒçš„æ•¸æ“šå—ï¼Ÿ</p><p>å¯ä»¥</p><p>å¯ä»¥é€šéæ¥­å‹™ç¨‹åºå±¤ï¼ŒæŒ‡å®šä¸€äº›è¡¨çš„å¯«æ“ä½œå…¨åœ¨ä¸€ç«¯ï¼Œå¦ä¸€äº›è¡¨çš„å¯«æ“ä½œå…¨åœ¨å¦ä¸€ç«¯ï¼Œä¹Ÿå°±æ˜¯èªªå…©é‚Šä¸æœƒåŒæ™‚å¯«ç›¸åŒçš„è¡¨ï¼ˆç•¶ç„¶é€™æ˜¯ç†æƒ³ç‹€æ…‹ï¼Œå› ç‚ºæ¥­å‹™è¤‡é›œçš„è©±æœƒæœ‰è¡¨çš„è¯çµç­‰æƒ…æ³ï¼‰</p><p>ç„¶å¾Œé€šéæŒ‡å®šmysqlè¤‡è£½çš„åƒæ•¸ï¼Œä¸€éƒ¨åˆ†è¡¨æˆ–åº«æœƒå¾Aè¤‡è£½åˆ°Bï¼Œå¦å¤–ä¸€éƒ¨åˆ†è¡¨æˆ–åº«å¾Bè¤‡è£½åˆ°Aå°±å¯ä»¥é¿å…ä¸Šé¢çš„å•é¡Œäº†</p><p>æˆ–è€…å…©å€‹åº«ï¼Œä¸€å€‹åº«master Aä¾†å¯«ï¼Œå¦ä¸€å€‹åº«master Bä¾†å¯«</p><p>æ•¸æ“šåˆ‡åˆ†</p><p>----------------------------</p><p>å‰é¢ä¸‰å€‹å•é¡Œä¹Ÿèªªæ˜äº†é›™ä¸»æ¶æ§‹çš„ç¬¬ä¸€ç¨®æ‡‰ç”¨ï¼ˆå°±æ˜¯å…©é‚Šå¯«ä¸é—œè¯çš„æ•¸æ“šï¼Œäº’ç›¸è¤‡è£½)ï¼Œé›™ä¸»æ¶æ§‹çš„ç¬¬äºŒç¨®æ‡‰ç”¨å°±æ˜¯è§£æ±ºä¸€ä¸»ä¸€å¾æ¶æ§‹è£¡ä¸»æ›æ‰äº†çš„å•é¡Œã€‚</p><p>çœ‹ä¸‹é¢çš„åˆ†æ</p><p>mysqlä¸» mysqlå¾</p><p>æ€è€ƒï¼š</p><p>å•é¡Œ1:å¦‚æœä¸€ä¸»ä¸€å¾ï¼Œä¸»æ›äº†ï¼Œslaveèƒ½ä¸èƒ½å¯«ï¼Œå¦‚æœèƒ½å¯«ï¼Œä¸»ä¿®å¥½å•Ÿèµ·ä¾†å¾Œï¼Œsalveå¯«çš„æ•¸æ“šå¦‚ä½•å‚³å›çµ¦ä¸»?</p><p>ç­”æ¡ˆ:ä¸»æ›äº†ï¼Œslaveæ‡‰è©²è¦å¯«ï¼Œå¦å‰‡è«–å£‡ä¸èƒ½ç™¼è²¼ï¼Œåªèƒ½çœ‹è²¼ï¼›</p><p>ä¸»ä¿®å¥½å¾Œï¼ˆå‡è¨­ä¸€å°æ™‚)ï¼Œslaveå¯«äº†é€™ä¸€å°æ™‚çš„æ•¸æ“šæ‡‰è©²è¦æƒ³è¾¦æ³•å‚³å›ä¸»æ‰è¡Œã€‚</p><p>æ–¹æ³•ä¸€ï¼šDBAäººç‚ºçš„æŠŠsalveé€™ä¸€å°æ™‚å¯«çš„æ•¸æ“šæ‰¾å‡ºä¾†å†å°å…¥åˆ°ä¸»(å¦‚æœå¾ˆå¤šè¡¨ï¼Œä¸€å°æ™‚çš„æ“ä½œä¹Ÿéå¸¸å¤šï¼Œå¯ä»¥èªªå¹¾ä¹ä¸å¯èƒ½æ‰¾å‡ºé€™å°æ™‚æ”¹è®Šäº†å•¥ï¼‰</p><p>æ–¹æ³•äºŒï¼šä½¿ç”¨é¡ä¼¼rsyncçš„åŒæ­¥æ–¹æ³•,é€™æ˜¯é€šéå­˜å„²å±¤ä¾†å¯¦ç¾æ•¸æ“šåŒæ­¥å›å»ï¼Œä½†æ•ˆæœæ²’æœ‰é©—è­‰éï¼Œç„¡æ³•èªªæ˜</p><p>æ–¹æ³•ä¸‰:DBAäººç‚ºçš„æŠŠå¾é€™ä¸€å°æ™‚æ”¹è®Šçš„äºŒé€²åˆ¶æ—¥èªŒï¼ˆè¦ç¢ºèªslaveæ‰“é–‹äºŒé€²åˆ¶æ—¥èªŒ)çµ¦æ‰¾å‡ºä¾†ç„¶å¾Œæ‡‰ç”¨åˆ°ä¸»ä¸Šå»</p><p>å•é¡Œ2:ä¸Šé¢çš„æ–¹æ³•ç„¡è«–å“ªä¸€ç¨®éƒ½æœƒæœ‰ä¸€å€‹å•é¡Œï¼Œå°±æ˜¯æŠŠå¾å¯«çš„ä¸€å°æ™‚æ•¸æ“šå‚³å›çµ¦ä¸»éœ€è¦ä¸€å®šçš„æ™‚é–“</p><p>å°±æ˜¯å‡è¨­é€™ä¸€å°æ™‚slaveå‰µå»ºäº†ä¸€å€‹aaaè¡¨ï¼Œä¸»mysqlä¿®å¥½å•Ÿå‹•å¾Œï¼Œ</p><p>å¦‚æœä¸»é¦¬ä¸Šæ¥ç®¡å¾çš„å¯«åŠŸèƒ½ï¼Œé€™æ™‚å‰ç«¯ç¨‹åºé¦¬ä¸Šçµ¦äº†ä¸€å€‹insert into aaaçš„æ’å…¥æ“ä½œï¼Œé€™æ¨£è‚¯å®šæœƒå‡ºå•é¡Œï¼Œå› ç‚ºå‰µå»ºaaaè¡¨çš„æ“ä½œé‚„æ²’æœ‰å¾slaveé‚£å‚³å›ä¾†,å¦‚ä½•è§£æ±º?</p><p>è§£æ±ºæ–¹æ³•ä¸€:äººç‚ºæ§åˆ¶ä¸»ç¾åœ¨ä¸èƒ½å¯«ï¼Œç­‰slaveçš„æ•¸æ“šå‚³å›ä¾†å¾Œå†å¯«ï¼›ä½†é€™æ¨£çš„è©±ï¼Œç­‰å¾…æ™‚é–“å¤ªé•·äº†</p><p>è§£æ±ºæ–¹æ³•äºŒ:å°±æ˜¯æŠŠä¸€ä¸»ä¸€å¾çš„æ¶æ§‹æ”¹æˆé›™ä¸»çš„æ¶æ§‹ï¼ˆå‡è¨­master Aå’Œmaster B)</p><p>master A ---> master B (å¹³æ™‚ä¸»Båªè®€ï¼Œä¸å¯«ï¼Œåªæœ‰åˆ°ä¸»Aæ›äº†ï¼Œæ‰æœƒå¯«)</p><p>æ›ä¸€å€‹å°æ™‚</p><p>è®€å¯«ä¸€å€‹å°æ™‚</p><p>ä¿®å¾©å¾Œå•Ÿå‹•äº†</p><p>æŠŠè®€çµ¦A å¯«ç•™çµ¦B</p><p>å•é¡Œ3:ä½†æ˜¯æ”¹æˆé›™ä¸»å¾Œï¼Œmaster Båœ¨master Aæ›æ‰çš„ä¸€å°æ™‚å…§å¹«ä»–å¯«äº†æ•¸æ“šï¼ŒAä¿®å¥½å•Ÿèµ·ä¾†å¾Œï¼ŒBçš„æ•¸æ“šå¯ä»¥è‡ªå‹•å‚³å›Aï¼›ä½†æ˜¯å¦‚æœæ•¸æ“šé‡å¤§çš„è©±ï¼Œé€™å€‹å‚³å›ä¹Ÿå¯èƒ½éœ€è¦ä¸€å®šæ™‚é–“ï¼Œå¦‚æœæ­£å¥½åœ¨é€™å€‹å‚³å›æ™‚é–“å…§ä¹Ÿå‡ºç¾äº†å•é¡Œ2çš„æƒ…æ³ï¼Œåˆå¦‚ä½•è§£æ±º?</p><p>è§£æ±ºæ–¹æ³•ä¸€:äººç‚ºæ§åˆ¶ä¸»ä¸èƒ½å¯«ï¼Œé€™æ¨£çš„è©±ç­‰å¾…æ™‚é–“å¾ˆçŸ­ï¼ˆå› ç‚ºæ˜¯è‡ªå‹•å‚³å›ä¾†ï¼Œè·Ÿæ‰‹å‹•å°å›ä¾†é€Ÿåº¦å¿«å¾ˆå¤š)ï¼Œå½±éŸ¿ä¸å¤§</p><p>è§£æ±ºæ–¹æ³•äºŒ:å°±ç›´æ¥æŠŠmaster B åšç‚ºæ–°çš„å¯«æœå‹™å™¨ï¼Œmaster Aå•Ÿå‹•å¾Œï¼Œä¹Ÿåªæ˜¯åšç‚ºè®€æœå‹™å™¨ï¼›é™¤éç­‰ä¸‹ä¸€æ¬¡Bæ›äº†ï¼ŒAæœƒé‡æ–°æˆç‚ºå¯«æœå‹™å™¨ï¼ˆç•¶ç„¶é€™æ˜¯åœ¨å…©è‡ºæœå‹™å™¨æ€§èƒ½ç›¸ç­‰çš„æƒ…æ³ä¸‹)</p><p>ç¸½çµ:ä¸Šé¢èªªæ˜é›™ä¸»æ¶æ§‹çš„å…©ç¨®æ‡‰ç”¨</p><p>-------------------------------------------------ï¼ï¼ï¼ï¼ï¼</p><p>master C</p><p>| |</p><p>ç’°å‹æ¶æ§‹ master A ï¼ï¼ master B</p><p>--ä¸å¯è¡Œ</p><p>------------------------------------------------------</p><p>ï¼ï¼ salve ï¼ï¼ salve</p><p>ç´šè¯æ¶æ§‹ master ï¼ï¼ salve ï¼ï¼ salve</p><p>ï¼ï¼ salve ï¼ï¼ salve</p><p>bin-log bin-log ?</p><p>ç‚ºäº†è§£æ±ºä¸€ä¸»å¤šå¾çš„masterçš„è¤‡è£½å£“åŠ›</p><p>å¯ä»¥æŠŠslaveåšç‚ºä¸‹ä¸€ç´šå¾æ©Ÿçš„master</p><p>å¢åŠ è¤‡è£½çš„ç´šè¯å±¤æ¬¡ï¼Œé€ æˆçš„å»¶é²æ›´é•·</p><p>æ‰€ä»¥é€™ç¨®æ¶æ§‹ä¸¦ä¸æ˜¯å¾ˆæ¨è–¦ï¼Œä¸€èˆ¬æœƒé€²è¡Œåˆ†æ‹†é›†ç¾¤</p><p>--------------------------------------------------</p><p>é›™ä¸»å’Œç´šè¯åˆèµ·ä¾†</p><p>master ----salve --slave</p><p>|</p><p>| ï¼ï¼ slave</p><p>master ï¼ï¼ salve ï¼ï¼ slave</p><p>ï¼ï¼ slave</p><p>------------------------------------------------------</p><p>å„ªåŒ–åŸå‰‡:åˆ†</p><p>å¤§å‹çµæ§‹çš„æ•¸æ“šé‡å¤ªå¤§ï¼Œè¦ç”¨åˆ°æ•¸æ“šåˆ‡åˆ†(æ°´å¹³ï¼Œå‚ç›´)</p><p>mysqlproxy</p><p>amoeba</p><p>---------------------------------------------------------</p><p>ABè¤‡è£½å‰æº–å‚™</p><p>æŠŠå…©è‡ºmysqlå•Ÿèµ·ä¾†ï¼ˆè¦æ±‚å…©è‡ºæ•¸æ“šä¸€è‡´)</p><p>/etc/hostsè£¡éƒ½åŠ ä¸Šä¸»æ©Ÿåå’ŒIPå°æ‡‰ï¼Œ</p><p>æ™‚é–“åŒæ­¥å¥½</p><p>é˜²ç«ç‰†,selinuxæª¢æŸ¥ä¸€ä¸‹</p><p>yumé…ç½®</p><p>mysql ABè¤‡è£½é–‹å§‹æ­å»º</p><p>1,ä¸»å¾æ•¸æ“šå¿…é ˆè¦åŒæ­¥</p><p>2,ä¸»ï¼šè¦å•Ÿç”¨äºŒé€²åˆ¶æ—¥èªŒ</p><p>3,ä¸»å’Œå¾éƒ½è¦è¨­ç½® server-idå€¼ï¼Œä¸¦ä¸”å…©é‚Šè¦ä¸ä¸€æ¨£</p><p>4,éœ€è¦å»ºç«‹ä¸€å€‹ç”¨ä¾†è¤‡åˆ¶çš„ç”¨æˆ¶ï¼Œä¸¦æˆæ–¼ç›¸æ‡‰æ¬Šé™</p><p>master ï¼ï¼ slave</p><p>2.2.2.128 2.2.2.129</p><p>ç”¨rpmç‰ˆçš„mysqlä¾†åšï¼š</p><p>ç¬¬ä¸€æ­¥ï¼›æ”¹é…ç½®æ–‡ä»¶</p><p>master,2.2.2.128 ä¸Šæ·»åŠ 2è¡Œ</p><p>vim /etc/my.cnf</p><p>ï¼»mysqld] --åœ¨mysqldåƒæ•¸çµ„ä¸‹æ·»åŠ 2è¡Œ</p><p>log-bin=mysql-bin --æŒ‡å®šäºŒé€²åˆ¶æ—¥èªŒçš„åå­—</p><p>server-id=2 --æŒ‡å®šidï¼Œidå€¼ä»»æ„</p><p>slave,2.2.2.129 ä¸Šæ·»åŠ 1è¡Œ</p><p>vim /etc/my.cnf</p><p>[mysqld] --åœ¨mysqldåƒæ•¸çµ„ä¸‹æ·»åŠ 1è¡Œ</p><p>server-id=3 --æŒ‡å®šidï¼Œidå€¼ä»»æ„ï¼Œèˆ‡ä¸»ä¸ä¸€æ¨£</p><p>ç„¶å¾Œé‡å•Ÿæœå‹™</p><p>master,2.2.2.128 ä¸Šé‡å•Ÿï¼š</p><p>/etc/init.d/mysqld restart</p><p>slave,2.2.2.129 ä¸Šé‡å•Ÿï¼š</p><p>/etc/init.d/mysqld restart</p><p>ç¬¬äºŒæ­¥ï¼šæˆæ¬Š</p><p>åœ¨masterä¸Šåšæˆæ¬Š,superå’Œreplication slaveéƒ½æ˜¯è¤‡è£½è¦ç”¨çš„æ¬Šé™</p><p>mysql> grant super,replication slave on *.* to 'slave1'@'2.2.2.129' identified by '123';</p><p>ç”¨æˆ¶@å¾çš„ipï¼Œå…è¨±å¾çš„ipé€£æ¥ä¸»</p><p>mysql> flush privileges;</p><p>åœ¨slaveä¸Šæœ€å¥½ä½¿ç”¨å‰›æ‰æˆæ¬Šçš„ç”¨æˆ¶æ˜¯é ç¨‹ç™»éŒ„ä¸€ä¸‹ä¸»å»é©—è­‰ä¸€ä¸‹</p><p># mysql -u slave1 -h 2.2.2.128 -p</p><p>ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹masterçš„æ­£åœ¨å¯«çš„äºŒé€²åˆ¶æ–‡ä»¶åå’Œä½ç½®</p><p>mysql> flush tables with read lock; --å…ˆåŠ é–ï¼Œé˜²æ­¢å…©é‚Šæ•¸æ“šä¸ä¸€è‡´;å¦‚æœæ¥­å‹™é‚„æœªä¸Šç·šï¼Œé€™å€‹å°±æ²’æœ‰å¿…è¦äº†</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>mysql> show master status; --åªæœ‰æ‰“é–‹äºŒé€²åˆ¶æ—¥èªŒï¼Œé€™å¥å‘½ä»¤æ‰æœ‰çµæœï¼Œè¡¨ç¤ºç•¶å‰æ•¸æ“šåº«çš„äºŒé€²åˆ¶æ—¥èªŒå¯«åˆ°ä»€éº¼ä½ç½®</p><p>+------------------+----------+--------------+------------------+</p><p>| File | Position | Binlog_Do_DB | Binlog_Ignore_DB |</p><p>+------------------+----------+--------------+------------------+</p><p>| mysql-bin.000003 | 336 | | |</p><p>+------------------+----------+--------------+------------------+</p><p>äºŒé€²åˆ¶æ–‡ä»¶å æ­£åœ¨å¯«å…¥çš„ä½ç½®</p><p>slaveç«¯çš„é…ç½®</p><p>mysql> slave stop; --å¦‚æœæ²’æœ‰å•Ÿéslaveï¼Œé€™ä¸€æ­¥ä¹Ÿæ˜¯éå¿…è¦çš„</p><p>Query OK, 0 rows affected, 1 warning (0.00 sec)</p><p>mysql> stop slave; --mysql5.6</p><p>Query OK, 0 rows affected, 1 warning (0.00 sec)</p><p>mysql> show warnings;</p><p>+-------+------+--------------------------------+</p><p>| Level | Code | Message |</p><p>+-------+------+--------------------------------+</p><p>| Note | 1255 | Slave already has been stopped |</p><p>+-------+------+--------------------------------+</p><p>mysql> change master to</p><p>-> master_user='slave1',</p><p>-> master_password='123',</p><p>-> master_host='2.2.2.128', --ä¸»çš„IP</p><p>-> master_port=3306, --ç«¯å£ï¼Œå¦‚æœç‚º3307å°±è¦æ›æˆ3307</p><p>-> master_log_file='mysql-bin.000003', --ä¸»ä¸Šé¢æŸ¥åˆ°çš„æ–‡ä»¶å</p><p>-> master_log_pos=336; --ä¸»ä¸Šé¢æŸ¥åˆ°çš„ä½ç½®è™Ÿ</p><p>mysql > mysql -u slave1 -h 2.2.2.128 -p123</p><p>mysql> change master to master_user='slave1', master_password='123', master_host='2.2.2.128', master_port=3306, master_log_file='mysql-bin.000003', master_log_pos=336;</p><p>mysql> start slave;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>mysql> show slave status\G</p><p>*************************** 1. row ***************************</p><p>Slave_IO_State: Waiting for master to send event</p><p>Master_Host: 2.2.2.128</p><p>Master_User: li</p><p>Master_Port: 3306</p><p>Connect_Retry: 60</p><p>Master_Log_File: mysql-bin.000001</p><p>Read_Master_Log_Pos: 681</p><p>Relay_Log_File: mysql55-relay-bin.000002</p><p>Relay_Log_Pos: 253</p><p>Relay_Master_Log_File: mysql-bin.000001</p><p>Slave_IO_Running: Yes</p><p>Slave_SQL_Running: Yes --é€™è£¡å…©å€‹YESï¼Œè¡¨ç¤ºå…©å€‹ç·šç¨‹OK</p><p>Replicate_Do_DB:</p><p>Replicate_Ignore_DB:</p><p>Replicate_Do_Table:</p><p>Replicate_Ignore_Table:</p><p>Replicate_Wild_Do_Table:</p><p>Replicate_Wild_Ignore_Table:</p><p>Last_Errno: 0</p><p>Last_Error:</p><p>Skip_Counter: 0</p><p>Exec_Master_Log_Pos: 681</p><p>Relay_Log_Space: 411</p><p>Until_Condition: None</p><p>Until_Log_File:</p><p>Until_Log_Pos: 0</p><p>Master_SSL_Allowed: No</p><p>Master_SSL_CA_File:</p><p>Master_SSL_CA_Path:</p><p>Master_SSL_Cert:</p><p>Master_SSL_Cipher:</p><p>Master_SSL_Key:</p><p>Seconds_Behind_Master: 0</p><p>Master_SSL_Verify_Server_Cert: No</p><p>Last_IO_Errno: 0</p><p>Last_IO_Error:</p><p>Last_SQL_Errno: 0</p><p>Last_SQL_Error:</p><p>Replicate_Ignore_Server_Ids:</p><p>Master_Server_Id: 2</p><p>1 row in set (0.00 sec)</p><p>...................................</p><p>å›åˆ°masterç«¯è§£é–ï¼š</p><p>mysql> unlock tables;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>é€²è¡Œæ¸¬è©¦ï¼š</p><p>1ï¼Œå…ˆæ¯”è¼ƒä¸»ï¼Œå¾çš„æ•¸æ“šç›®éŒ„æ–‡ä»¶çš„ä¸åŒ</p><p># ls /var/lib/mysql/ --master</p><p>ibdata1 ib_logfile1 mysql-bin.000001 mysql-bin.000003 mysql.sock</p><p>ib_logfile0 mysql mysql-bin.000002 mysql-bin.index test</p><p># ls /var/lib/mysql/ --slave</p><p>ibdata1 ib_logfile1 mysql mysqld-relay-bin.000002 mysql.sock test</p><p>ib_logfile0 master.info mysqld-relay-bin.000001 mysqld-relay-bin.index relay-log.info</p><p># cat /var/lib/mysql/master.info</p><p># cat /var/lib/mysql/relay-log.info</p><p># mysqlbinlog /var/lib/mysql/mysqld-relay-bin.000002</p><p>é©—è­‰2ï¼šåªæœ‰masterå¯«ï¼Œslaveå¯ä»¥çœ‹åˆ°</p><p>slaveå¯«ï¼Œmasterçœ‹ä¸åˆ°</p><p>å¦‚æœè¤‡è£½å‡ºç¾å•é¡Œ</p><p>ï¼ˆè¦æ¨¡æ“¬å•é¡Œçš„è©±ï¼Œåœ¨å¾ä¸Šå‰µå»ºä¸€å€‹åº«ï¼Œç„¶å¾Œåœ¨ä¸»ä¸Šä¹Ÿå‰µå»ºé€™å€‹åº«ï¼Œå°±æœƒè¡çªï¼Œé€ æˆè¤‡è£½å‡ºç¾å•é¡Œï¼‰ï¼Œ</p><p>é‡åšè¤‡è£½é›†ç¾¤åªéœ€è¦é‡æ–°åœ¨å¾ä¸ŠåŸ·è¡Œstop slave; change master to ...... ; start slave;</p><p>é©—è­‰3ï¼šæŠŠå¾é‡å•Ÿå¾Œï¼Œå†ä¸Šå»æŸ¥çœ‹ç‹€æ…‹ï¼Œé‚„æ˜¯é€£æ¥çš„ï¼Œæ²’ä»€éº¼å½±éŸ¿</p><p>æŠŠä¸»é‡å•Ÿå¾Œï¼Œå†å»slaveä¸Šå»æŸ¥çœ‹ç‹€æ…‹ï¼Œç™¼ç¾é‡è©¦æ™‚é–“ç‚º60ç§’ï¼Œç­‰60ç§’å¾Œåˆè‡ªå‹•é€£æ¥OKäº†</p><p>--å¦‚æœæƒ³è¦æ”¹é€™å€‹60ç§’çš„è©±ï¼Œå¯ä»¥æŠŠå¾æœå‹™å™¨ä¸Šçš„master.infoæ–‡ä»¶è£¡çš„60ç›´æ¥æ”¹æˆ30(rpmç‰ˆæ¸¬è©¦æœ‰é»å•é¡Œ)</p><p>------------------------------------------------------------</p><p>ä¸€ä¸»å¤šå¾çš„åšæ³•</p><p>å°±æ˜¯ä¸Šé¢çš„æ­¥é©Ÿæœ‰å¹¾å€‹å¾å°±åšå¹¾æ¬¡</p><p>-------------------------------------------------------------------</p><p>é›™ä¸»æ¶æ§‹çš„åšæ³•ï¼š</p><p>åœ¨ä¸Šé¢çš„slaveæ©Ÿä¹Ÿæ‰“é–‹äºŒé€²åˆ¶æ—¥èªŒï¼Œåè‘—åšä¸€éå°±è¡Œï¼Œæ³¨æ„åšçš„éç¨‹ä¸­ï¼Œä¿è­‰æ•¸æ“šä¸€è‡´</p><p>åšå¥½çš„æ¶æ§‹ï¼Œåªè¦å…©é‚Šä¸åŒæ™‚æ“ä½œç›¸åŒçš„æ•¸æ“šï¼Œå°±ä¸æœƒå‡ºç¾è¤‡è£½ä¸ä¸€è‡´çš„å•é¡Œï¼›</p><p>æˆ–è€…æ˜¯åœ¨æ¥­å‹™ç¨‹åºå±¤ï¼Œå°‡ä¸€éƒ¨åˆ†çš„å¯«æ“ä½œå®šç¾©åˆ°master A,å¦ä¸€éƒ¨åˆ†çš„å¯«æ“ä½œå®šç¾©åˆ°master B</p><p>-------------------------------------------------------------</p><p>ç´šè¯æ¶æ§‹</p><p>master -slave -slave</p><p>æŠŠä¸­é–“çš„å¾ä¹Ÿè¦æ‰“é–‹äºŒé€²åˆ¶æ—¥èªŒã€‚ä½†æ˜¯å®ƒé»˜èªä¸æŠŠæ‡‰ç”¨masterçš„æ“ä½œè¨˜éŒ„åˆ°è‡ªå·±çš„äºŒé€²åˆ¶æ—¥èªŒã€‚æ‰€ä»¥éœ€è¦æ‰“é–‹ä¸€å€‹åƒæ•¸è®“å®ƒè¨˜éŒ„ï¼Œæ‰å¯ä»¥å‚³çµ¦ç¬¬ä¸‰ç´šçš„å¾</p><p># /usr/local/mysql/bin/mysqld --verbo --help |grep log-slave</p><p>--log-slave-updates Tells the slave to log the updates from the slave thread</p><p>--log-slave-updates is used.</p><p>log-slave-updates FALSE</p><p>--é»˜èªå€¼ç‚ºfalseï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šlog-slave-updates=1ï¼Œç„¶å¾Œé‡å•Ÿæœå‹™</p><p>æ‰€ä»¥æ‰“é–‹ä¸­é–“å¾çš„é…ç½®æ–‡ä»¶</p><p># vim /usr/local/mysql/etc/my.cnf --åŠ ä¸Šä¸‹é¢å…©å¥ï¼Œç„¶å¾Œé‡å•Ÿæœå‹™</p><p>log-bin=mid-slave</p><p>log-slave-updates=1</p><p>ç„¶å¾Œåœ¨ä¸­é–“å¾å’Œç¬¬ä¸‰ç´šçš„å¾ä¹‹é–“å†åšä¸€æ¬¡ABè¤‡è£½å°±å¯ä»¥äº†</p><p>æˆ‘çš„çµæ§‹åœ–</p><p>master A slave B slave C</p><p>2.2.2.128 2.2.2.129 2.2.2.130</p><p>sever-id=2 server-id=3 server-id=4</p><p>log-bin=mysql-bin-128 log-bin=mysql-bin-129</p><p>log-slave-updates=1</p><p>bin-log relay-bin-log relay-bin-log</p><p>bin-log ------> relay-bin-log</p><p>æ‰“é–‹log-slave-updates=1</p><p>è®“ç¬¬ä¸€è‡ºå‚³éä¾†relayæ—¥èªŒè¨˜éŒ„</p><p>åˆ°è‡ªå·±çš„äºŒé€²åˆ¶æ—¥èªŒ</p><p>bin-log -------> relay-bin-log</p><p>==============================================================</p><p>é—œæ–¼æ§åˆ¶è¤‡è£½çš„åº«å’Œè¡¨çš„ç›¸é—œåƒæ•¸è¨è«–ï¼š</p><p>Replicate_Do_DB: --æ¥å—å“ªå€‹åº«çš„è¤‡è£½</p><p>Replicate_Ignore_DB: --å¿½ç•¥å“ªå€‹åº«çš„è¤‡è£½</p><p>Replicate_Do_Table: --æ¥å—å“ªå€‹è¡¨çš„è¤‡è£½</p><p>Replicate_Ignore_Table: --å¿½ç•¥å“ªå€‹è¡¨çš„è¤‡è£½</p><p>Replicate_Wild_Do_Table: --é€šé…ç¬¦è¡¨ç¤ºè¤‡è£½å“ªäº›è¡¨</p><p>Replicate_Wild_Ignore_Table: --é€šé…ç¬¦è¡¨ç¤ºå¿½ç•¥å“ªäº›è¡¨</p><p>å¯¦ä¾‹èªªæ˜ï¼š</p><p>master A slave B</p><p>1ï¼Œå…ˆæŠŠå…©è‡ºåšæˆabè¤‡è£½çš„æ¶æ§‹</p><p>2ï¼Œåœ¨master aä¸Šå‰µå»ºaaaåº«åŠå…¶è£¡é¢çš„aaaè¡¨ï¼Œbbbåº«åŠå…¶è£¡é¢çš„bbbè¡¨</p><p>é‚£éº¼slave bè£¡ä¹Ÿæœƒè¤‡è£½ç”¢ç”Ÿé€™å…©å¼µæ¸¬è©¦è¡¨</p><p>3ï¼Œç¾åœ¨çš„æ¥­å‹™éœ€æ±‚æ˜¯ï¼š</p><p>æˆ‘åœ¨slave bä¸Šè¦æ±‚è¤‡è£½çš„ç‚ºaaaåº«è£¡æ‰€æœ‰è¡¨ï¼›bbbåº«åŠå…¶æ‰€æœ‰è¡¨ä¸è¦æ±‚è¤‡è£½éå»</p><p>4ï¼Œåœ¨slave bçš„my.cnfé…ç½®æ–‡ä»¶çš„[mysqld]åƒæ•¸çµ„è£¡åŠ ä¸Š</p><p>replicate_do_db=aaa --åªæ¥å—aaaåº«çš„è¤‡è£½</p><p>replicate_ignore_db=bbb --å¿½ç•¥bbbåº«çš„è¤‡è£½</p><p>5ï¼Œé‡å•Ÿslave bï¼Œç„¶å¾Œæ¸¬è©¦</p><p>æ¸¬è©¦çµæœç‚º</p><p>åœ¨master aä¸Šæ“ä½œï¼š</p><p>use aaa;</p><p>insert into aaa values ....;</p><p>slave bä¸Šå¯ä»¥çœ‹åˆ°insertçš„è¨˜éŒ„ --OK</p><p>åœ¨master a ä¸Šæ“ä½œï¼š</p><p>use bbb;</p><p>insert into bbb values ....;</p><p>slave bä¸Šçœ‹ä¸åˆ°insertçš„è¨˜éŒ„ --OKï¼›ä½†é€™è£¡çš„æ“ä½œé‚„æ˜¯æœƒè¨˜éŒ„åˆ°slave bçš„relay-bin-logè£¡</p><p>åœ¨master aä¸Šæ“ä½œï¼š</p><p>use bbb;</p><p>insert into aaa.aaa values ....;</p><p>slave bä¸Šå»çœ‹ä¸åˆ°insertçš„æ“ä½œ --æœ‰å•é¡Œ</p><p>--åŸå› æ˜¯ï¼šå®ƒé»˜èªåªæœƒè¤‡è£½åœ¨aaaåº«ä¸‹å°å®ƒä¸‹é¢çš„è¡¨çš„æ“ä½œï¼›è€Œåˆ¥çš„åº«ä¸‹å°aaaåº«ä¸‹è¡¨çš„æ“ä½œæœƒå¿½ç•¥</p><p>6ï¼Œè§£æ±ºæ–¹æ³•ï¼š</p><p>åœ¨slave bä¸ŠæŠŠç¬¬4æ­¥åšçš„å…©å€‹åƒæ•¸æ›æˆä¸‹é¢å…©å€‹</p><p>replicate_wild_do_table=aaa.%</p><p>replicate_wild_ignore_table=bbb.%</p><p>å†æŠŠslave bé‡å•Ÿï¼›å°±ä¸æœƒå‡ºç¾å‰›æ‰çš„å•é¡Œäº†</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>æ­å»ºç’°å¢ƒ å…©è‡ºè™›æ“¬æ©Ÿ</p><p>master ï¼ï¼ slave</p><p>å…ˆå®‰è£mysql5.5ä¹‹å¾Œçš„ç‰ˆæœ¬ï¼Œå› ç‚ºé€™å€‹ç‰ˆæœ¬ä¹‹å¾Œæ‰å¯¦ç¾çš„åŠåŒæ­¥è¤‡è£½</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>MySQLçš„è¤‡è£½å…¶å¯¦æ˜¯ç•°æ­¥æ“ä½œï¼Œè€Œä¸æ˜¯åŒæ­¥ï¼Œä¹Ÿå°±æ„å‘³è‘—å…è¨±ä¸»å¾ä¹‹é–“çš„æ•¸æ“šå­˜åœ¨ä¸€</p><p>å®šçš„å»¶é²ï¼Œmysqlç•¶åˆé€™æ¨£è¨­è¨ˆçš„ç›®çš„ä¹Ÿæ˜¯åŸºæ–¼å¯ç”¨æ€§çš„è€ƒæ…®ï¼Œç‚ºäº†ä¿è­‰master</p><p>ä¸å—slaveçš„å½±éŸ¿ï¼Œä¸¦ä¸”ç•°æ­¥è¤‡è£½ä½¿å¾—masterè™•æ–¼ä¸€ç¨®æ€§èƒ½æœ€å„ªçš„ç‹€æ…‹ï¼š</p><p>å¯«å®Œbinlogå¾Œå³å¯æäº¤è€Œä¸éœ€è¦ç­‰å¾…slaveçš„æ“ä½œå®Œæˆã€‚é€™æ¨£å­˜åœ¨ä¸€å€‹éš±æ‚£ï¼Œç•¶ä½ ä½¿ç”¨slaveä½œç‚ºå‚™ä»½æ™‚ï¼Œ</p><p>å¦‚æœmasteræ›æ‰ï¼Œé‚£éº¼æœƒå­˜åœ¨éƒ¨åˆ†å·²æäº¤çš„äº‹å‹™æœªèƒ½æˆåŠŸå‚³è¼¸åˆ°slaveçš„å¯èƒ½ï¼Œé€™å°±æ„å‘³è‘—æ•¸æ“šä¸Ÿå¤±ï¼</p><p>æ‰€è¬‚çš„åŠåŒæ­¥è¤‡è£½å°±æ˜¯masteræ¯commitä¸€å€‹äº‹å‹™,è¦slaveæ‡‰ç”¨é€™å€‹äº‹ç‰©å¾Œå›çµ¦masterä¿¡è™Ÿã€‚é€™æ¨£masteræ‰èƒ½æŠŠäº‹ç‰©æˆåŠŸcommitã€‚é€™æ¨£å°±ä¿è­‰äº†master-slaveçš„æ•¸æ“šçµ•å°çš„ä¸€è‡´ï¼ˆä½†æ˜¯ä»¥çŠ§ç‰²masterçš„æ€§èƒ½ç‚ºä»£åƒ¹).ä½†ç­‰å¾…æ™‚é–“ä¹Ÿæ˜¯å¯ä»¥èª¿æ•´çš„ã€‚</p><p>mysqlåŠåŒæ­¥è¤‡è£½ç­‰å¾…æ™‚é–“è¶…æ™‚å¾Œ(é»˜èªæ™‚é–“ç‚º10ç§’)ï¼Œæœƒè‡ªå‹•è½‰æ›æˆç•°æ­¥è¤‡è£½</p><p>--ä¸‹é¢çš„æ­¥é©Ÿç”¨5.6.26ç‰ˆæ¸¬è©¦æ˜¯ä¸€æ¨£çš„åšæ³•</p><p>ï¼ˆæ³¨æ„5.6.xç‰ˆæœ¬é»˜èªä»¥mysql@localhostç™»éŒ„çš„ï¼Œä½ è¦-u rootä¾†æŒ‡å®šä»¥root@localhostç™»éŒ„å°±å¯ä»¥äº†)</p><p>æ­å»ºå¥½ mysqlABç•°æ­¥è¤‡è£½å¾Œ</p><p>åœ¨masterä¸Šå®‰è£é€™å€‹æ’ä»¶</p><p>master> install plugin rpl_semi_sync_master soname 'semisync_master.so';</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>--åˆªé™¤æ’ä»¶çš„æ–¹æ³• mysql > uninstall plugin rpl_semi_sync_master;</p><p>master> show global variables like 'rpl_semi_sync%'; --å®‰è£OKå¾Œï¼Œä¸»ä¸Šæœƒå¤šå¹¾å€‹åƒæ•¸</p><p>+------------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+------------------------------------+-------+</p><p>| rpl_semi_sync_master_enabled | OFF | --æ˜¯å¦å•Ÿç”¨masterçš„åŠåŒæ­¥è¤‡è£½</p><p>| rpl_semi_sync_master_timeout | 10000 | --é»˜èªä¸»ç­‰å¾…å¾è¿”å›ä¿¡æ¯çš„è¶…æ™‚é–“æ™‚é–“ï¼Œ10ç§’ã€‚</p><p>| rpl_semi_sync_master_trace_level | 32 | --ç›£æ§</p><p>| rpl_semi_sync_master_wait_no_slave | ON | --æ˜¯å¦å…è¨±æ¯å€‹äº‹ç‰©çš„æäº¤éƒ½è¦ç­‰å¾…slaveçš„ä¿¡è™Ÿ.onç‚ºæ¯ä¸€å€‹äº‹ç‰©éƒ½ç­‰å¾…</p><p>+------------------------------------+-------+</p><p>åœ¨slaveä¸Šå®‰è£æ’ä»¶</p><p>slave> install plugin rpl_semi_sync_slave soname 'semisync_slave.so';</p><p>Query OK, 0 rows affected (0.03 sec)</p><p>slave> show global variables like 'rpl_semi_sync%';</p><p>+---------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+---------------------------------+-------+</p><p>| rpl_semi_sync_slave_enabled | OFF |</p><p>| rpl_semi_sync_slave_trace_level | 32 |</p><p>+---------------------------------+-------+</p><p>masterä¸Šæ¿€æ´»åŠåŒæ­¥è¤‡è£½</p><p>master> set global rpl_semi_sync_master_enabled =on;</p><p>Query OK, 0 rows affected (0.00 sec)</p><p>slaveä¸Šæ¿€æ´»åŠåŒæ­¥è¤‡è£½</p><p>slave> set global rpl_semi_sync_slave_enabled=on;</p><p>slave> stop slave IO_THREAD;</p><p>slave> start slave IO_THREAD;</p><p>åœ¨masteræŸ¥çœ‹ç‹€æ…‹</p><p>master > show global status like 'rpl_semi_sync%';</p><p>+--------------------------------------------+-------+</p><p>| Variable_name | Value |</p><p>+--------------------------------------------+-------+</p><p>| Rpl_semi_sync_master_clients | 1 | --æœ‰ä¸€å€‹å¾æœå‹™å™¨å•Ÿç”¨åŠåŒæ­¥è¤‡è£½</p><p>| Rpl_semi_sync_master_net_avg_wait_time | 0 | --masterç­‰å¾…slaveå›è¦†çš„å¹³å‡ç­‰å¾…æ™‚é–“ã€‚å–®ä½æ¯«ç§’</p><p>| Rpl_semi_sync_master_net_wait_time | 0 | --masterç¸½çš„ç­‰å¾…æ™‚é–“ã€‚å–®ä½æ¯«ç§’</p><p>| Rpl_semi_sync_master_net_waits | 0 | --masterç­‰å¾…slaveå›è¦†çš„ç¸½çš„ç­‰å¾…æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_no_times | 0 | --masteré—œé–‰åŠåŒæ­¥è¤‡è£½çš„æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_no_tx | 0 | --master ç­‰å¾…è¶…æ™‚çš„æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_status | ON | --æ¨™è¨˜masterç¾åœ¨æ˜¯å¦æ˜¯åŠåŒæ­¥è¤‡è£½ç‹€æ…‹</p><p>| Rpl_semi_sync_master_timefunc_failures | 0 | --masterèª¿ç”¨æ™‚é–“ï¼ˆå¦‚gettimeofday())å¤±æ•—çš„æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_tx_avg_wait_time | 0 | --masterèŠ±åœ¨æ¯å€‹äº‹å‹™ä¸Šçš„å¹³å‡ç­‰å¾…æ™‚é–“</p><p>| Rpl_semi_sync_master_tx_wait_time | 0 | --masterèŠ±åœ¨äº‹ç‰©ä¸Šç¸½çš„ç­‰å¾…æ™‚é–“</p><p>| Rpl_semi_sync_master_tx_waits | 0 | --masteräº‹ç‰©ç­‰å¾…æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_wait_pos_backtraverse | 0 | --å¾Œä¾†çš„å…ˆåˆ°äº†ï¼Œè€Œå…ˆä¾†çš„é‚„æ²’æœ‰åˆ°çš„æ¬¡æ•¸</p><p>| Rpl_semi_sync_master_wait_sessions | 0 | --ç•¶å‰æœ‰å¤šå°‘å€‹sessionå› ç‚ºslaveå›è¦†è€Œé€ æˆç­‰å¾…</p><p>| Rpl_semi_sync_master_yes_tx | 0 | --æ¨™è¨˜slaveæ˜¯å¦åœ¨åŠåŒæ­¥ç‹€æ…‹</p><p>+--------------------------------------------+-------+</p><p>åœ¨slaveä¸ŠæŸ¥çœ‹ç‹€æ…‹å°±åªæœ‰ä¸‹é¢ä¸€æ¢ä¿¡æ¯</p><p>slave > show global status like 'rpl_semi_sync%';</p><p>+----------------------------+-------+</p><p>| Variable_name | Value |</p><p>+----------------------------+-------+</p><p>| Rpl_semi_sync_slave_status | ON |</p><p>+----------------------------+-------+</p><p>æ¸¬è©¦ï¼š</p><p>master > insert into a values (3);</p><p>Query OK, 1 row affected (0.01 sec)</p><p>master > show global status like 'rpl_semi_sync%_yes_tx';</p><p>+-----------------------------+-------+</p><p>| Variable_name | Value |</p><p>+-----------------------------+-------+</p><p>| Rpl_semi_sync_master_yes_tx | 1 | --è¡¨ç¤ºé€™æ¬¡äº‹ç‰©æˆåŠŸå¾slaveè¿”å›ä¸€æ¬¡ç¢ºèªä¿¡è™Ÿ</p><p>+-----------------------------+-------+</p><p>æ¨¡æ“¬éŒ¯èª¤ï¼ŒæŠŠslaveä¸Šçš„mysqlåœæ‰/etc/init.d/mysql56 stop</p><p>--å†å›åˆ°masterä¸Šæ¸¬è©¦</p><p>master> insert into a values (4);</p><p>Query OK, 1 row affected (10.00 sec) --é€™æ¬¡æ’å…¥ä¸€å€‹å€¼éœ€è¦ç­‰å¾…10ç§’ï¼ˆé»˜èªçš„ç­‰å¾…æ™‚é–“)</p><p>master> insert into a values (5);</p><p>Query OK, 1 row affected (0.01 sec) --ç¾åœ¨è‡ªå‹•è½‰æˆäº†åŸä¾†çš„ç•°æ­¥æ¨¡å¼ï¼ˆé¡ä¼¼oracle DGè£¡çš„æœ€å¤§æ€§èƒ½æ¨¡å¼)</p><p>å†æ¬¡æŠŠslaveå•Ÿå‹•ï¼Œçœ‹åˆ°åŠåŒæ­¥è¤‡è£½æ²’å•Ÿä¾†ï¼Œæ˜¯ç•°æ­¥æ¨¡å¼</p><p>é‡æ–°æŒ‰ä¸‹é¢çš„æ­¥é©ŸæŠŠåŒæ­¥æ¨¡å¼å†å•Ÿèµ·ä¾†å°±å¯ä»¥äº†</p><p>slave> set global rpl_semi_sync_slave_enabled=on;</p><p>slave> stop slave IO_THREAD;</p><p>slave> start slave IO_THREAD;</p><p>slaveå•Ÿèµ·ä¾†å¾Œï¼ŒæŸ¥çœ‹éŒ¶ï¼Œç™¼ç¾å‰›æ‰slaveé—œé–‰æœŸé–“çš„é‚£å¹¾æ¢æ•¸æ“šé‚„æ˜¯æœƒè‡ªå‹•è¤‡è£½éä¾†ï¼Œæ•¸æ“šåˆå›åˆ°ä¸€è‡´</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>mysqlçš„å»¶æ™‚è¤‡è£½</p><p>ç•°æ­¥æˆ–åŒæ­¥è¤‡è£½</p><p>A ----------> B</p><p>|</p><p>|-------> C</p><p>å»¶æ™‚1å¤©</p><p>å‡è¨­åœ¨Aä¸Šèª¤åˆªé™¤ä¸€æ¢æ•¸æ“šï¼Œç”¨äºŒé€²åˆ¶æ—¥èªŒä¾†æ¢å¾©ä¸å¤ªæ–¹ä¾¿ï¼Œå› ç‚ºæ—¥èªŒè£¡è¨˜éŒ„çš„æ˜¯åˆªé™¤çš„æ“ä½œï¼Œä¸¦æ²’æœ‰è¨˜éŒ„é€™æ¢æ•¸æ“šå…·é«”æ˜¯ä»€éº¼ï¼Œæ‰€ä»¥ä½ è¦åœ¨æ‰€æœ‰çš„æ—¥èªŒè£¡æ‰¾åˆ°ç•¶åˆæ’å…¥é€™æ¢æ•¸æ“šæ™‚çš„è¨˜éŒ„ï¼Œé€™æ˜¯å¾ˆéº»ç…©çš„ã€‚</p><p>ä¹Ÿæœ‰åˆ¥çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠèª¤åˆªé™¤ä¹‹å‰çš„å‚™ä»½åœ¨æ¸¬è©¦åº«ä¸Šæ¢å¾©ï¼Œç„¶å¾ŒæŠŠæ•¸æ“šæ‰¾å‡ºä¾†ï¼Œä¸¦å°å›ä¾†</p><p>å‚™ä»½ æ”¹1 æ”¹2 åˆªé™¤</p><p>0 8 12 16</p><p>delete from emp where ename='zhangsan';</p><p>drop table emp;</p><p>èª¤åˆªé™¤1å¼µè¡¨,ç”¨äºŒé€²åˆ¶æ—¥èªŒä¾†æ¢å¾©,ä¸å¤ªå¥½æ‰¾ç›¸é—œçš„æ•¸æ“š,å› ç‚ºé€™å¼µè¡¨å¦‚æœä½¿ç”¨äº†å¥½å¹¾å¹´,æ•¸æ“šæ“ä½œå¤ªå¤š;æœ‰å»¶æ™‚è¤‡è£½çš„è©±,åœ¨Cä¸Šå°å‡ºé€™å¼µè¡¨,å°å›A</p><p>èª¤åˆªé™¤æœ€è¿‘ä¸€æ®µæ™‚é–“ç›¸é—œçš„æ•¸æ“š,ç”¨äºŒé€²åˆ¶æ—¥èªŒæ‰¾åˆ°é‚£å€‹æ™‚é–“é»,å¾é‚£å€‹æ™‚é–“é»æ¢å¾©åˆ°ç¾åœ¨</p><p>mysqlé–‹æºç®¡ç†å·¥å…·</p><p>maatkit --perlå¯«çš„ï¼Œè€å¤–å¸¸ç”¨</p><p># ls /share/soft/maatkit/</p><p>maatkit-7410[1].tar.gz maatkit-7540[1].tar.gz</p><p>maatkit-7486[1].tar.gz</p><p>--åœ¨mysql ABçš„slaveä¸Šå®‰è£ï¼ˆåªéœ€è¦åœ¨slaveä¸Šå®‰è£)</p><p># tar xf /share/soft/maatkit/maatkit-7540\[1\].tar.gz -C /usr/src/</p><p># cd /usr/src/maatkit-7540/</p><p>å®‰è£æ–¹æ³•READMEæ–‡ä»¶è£¡æœ‰å¯«</p><p># perl Makefile.PL --å¦‚æœä¸æˆåŠŸï¼Œéœ€è¦å®‰è£perlæœ‰é—œçš„å¤šå€‹åŒ…ï¼Œå¯ä»¥yum install perl*</p><p># make install</p><p>[root@li maatkit-7540]# ls bin/ --é€™äº›å‘½ä»¤ï¼Œå°±æ˜¯å„å€‹ç®¡ç†å·¥å…·</p><p>mk-archiver mk-purge-logs</p><p>mk-checksum-filter mk-query-advisor</p><p>mk-config-diff mk-query-digest</p><p>mk-deadlock-logger mk-query-profiler</p><p>mk-duplicate-key-checker mk-show-grants</p><p>mk-error-log mk-slave-delay</p><p>mk-fifo-split mk-slave-find</p><p>mk-find mk-slave-move</p><p>mk-heartbeat mk-slave-prefetch</p><p>mk-index-usage mk-slave-restart</p><p>mk-kill mk-table-checksum</p><p>mk-loadavg mk-table-sync</p><p>mk-log-player mk-table-usage</p><p>mk-merge-mqd-results mk-tcp-model</p><p>mk-parallel-dump mk-upgrade</p><p>mk-parallel-restore mk-variable-advisor</p><p>mk-profile-compact mk-visual-explain</p><p>--ä½¿ç”¨--helpæŸ¥çœ‹ä¸€å€‹å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•</p><p># mk-slave-delay --help</p><p>mk-slave-delay starts and stops a slave server as needed to make it lag behind</p><p>the master. The SLAVE-HOST and MASTER-HOST use DSN syntax, and values are</p><p>copied from the SLAVE-HOST to the MASTER-HOST if omitted. For more details,</p><p>please use the --help option, or try 'perldoc /usr/bin/mk-slave-delay' for</p><p>complete documentation.</p><p># perldoc /usr/bin/mk-slave-delay --æŸ¥çœ‹æ–‡æª”</p><p>æˆ–è€…ç›´æ¥man mk-slave-delay</p><p>--mysql AB(ç„¡è«–åŒæ­¥æˆ–ç•°æ­¥)æ­£åœ¨é‹è¡ŒOKçš„æƒ…æ³ä¸‹ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨slaveä¸Šé‹è¡Œ;åšä¹‹é–“å»ºè­°æŠŠæ™‚é–“åŒæ­¥ä¸€ä¸‹</p><p># mk-slave-delay --defaults-file=/usr/local/mysql56/etc/my.cnf --delay=1m --interval=15s --user=root --password=123 --socket=/var/run/mysqld/mysql56.socket --quiet localhost &</p><p>--è¡¨ç¤ºå»¶æ™‚1åˆ†é˜ï¼Œæ‰æœƒæ‡‰ç”¨SQLç·šç¨‹ï¼›é€™è£¡æ˜¯æ¸¬è©¦æ‰€ä»¥æ‰ä½¿ç”¨å¾ˆå°çš„æ™‚é–“ï¼Œå¯¦éš›æƒ…æ³å¯ä»¥èª¿æˆ1å°æ™‚æˆ–2å°æ™‚</p><p>æ¸¬è©¦ï¼š</p><p>åœ¨masterä¸Šéš¨ä¾¿æ’å…¥å¹¾æ¢æ•¸æ“š</p><p>ç„¶å¾Œåœ¨slaveä¸Šç™¼ç¾æ²’æœ‰é¦¬ä¸ŠåŒæ­¥éä¾†</p><p>slave > show slave status\G; --æŸ¥çœ‹ç‹€æ…‹æœƒç™¼ç¾SQLç·šç¨‹ç‹€æ…‹ç‚ºNO</p><p>Slave_IO_Running: Yes</p><p>Slave_SQL_Running: NO</p><p>å¤§æ¦‚ç­‰1åˆ†é˜ï¼Œå°±æœƒè‡ªå‹•å»¶æ™‚åŒæ­¥éä¾†äº†ï¼›</p><p>--æ³¨æ„:æ—¥èªŒå·²ç¶“å‚³åˆ°slaveçš„relay-bin logè£¡äº†ï¼Œä½†ç”±SQLç·šç¨‹å»¶æ™‚å»è§£æ</p><p>ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>åŸç†ç†è§£é¡Œ</p><p>é¡Œ1</p><p>mysqlæ¶æ§‹ä¸­,ä¸€ä¸»å¤šå¾ï¼Œé›™ä¸»ï¼Œç´šè¯ï¼ˆå¤šä¸»ä¸€å¾å’Œç’°å‹ä¸æ”¯æŒ)é€™ä¸‰ç¨®çš„å€åˆ¥å’Œå„ªç¼ºé»</p><p>é¡Œ2</p><p>å¦‚æœç¾åœ¨ä¸€å€‹å°å…¬å¸mysqlæ•¸æ“šåº«å·²ç¶“è·‘äº†ä¸€å¹´ï¼Œç¾åœ¨è¦æ­å»ºmysqlABè¤‡è£½ï¼Œä½ æª¢æŸ¥äº†ä¸»åº«å¾Œï¼Œç™¼ç¾å®ƒé€™ä¸€å¹´éƒ½æ²’æœ‰ä½¿ç”¨äºŒé€²åˆ¶æ—¥èªŒï¼Œè«‹å•å¦‚ä½•åšè¤‡è£½ï¼Ÿ</p><p>1,å…ˆä¸»åº«é–‹äºŒé€²åˆ¶æ—¥èªŒ</p><p>2,å‚™ä»½ä¸»åº«ï¼Œæ¢å¾©åˆ°å¾åº«</p><p>3ï¼ŒåšABè¤‡è£½ï¼ŒæŒ‡å®šå¾å‚™ä»½çš„positionå¾€å¾Œè¤‡è£½</p><p>é¡Œ3</p><p>åœ¨å¯¦éš›çš„å¤§æ•¸æ“šé‡çš„æ•¸æ“šåº«ä¸­ï¼Œå› ç‚ºè² è¼‰å¤ªé«˜æˆ–è€…ç¶²çµ¡å•é¡Œï¼Œç¾åœ¨é€ æˆè¤‡è£½æ™‚çš„æ•¸æ“šå»¶æ™‚ï¼Œè«‹å•ä½ å¦‚ä½•åšç‚ºDBAæ‡‰è©²å¦‚ä½•å»è™•ç†ï¼Ÿ</p><p>æ¶æ§‹æ“´å±•æ€§</p><p>é¡Œ4</p><p>å¦‚æœä¸€å€‹lampæ¶æ§‹åœ¨æ·±åœ³æ©Ÿæˆ¿åœ¨é‹è¡Œï¼Œå¦‚ä½•å„˜é‡ç„¡å½±éŸ¿çš„æŠŠé€™å€‹lampé·ç§»åˆ°æƒ å·çš„æ©Ÿæˆ¿</p><p>1ï¼Œåœ¨æƒ å·æ©Ÿæˆ¿åšä¸€å€‹lampï¼Œmysqlé›™ä¸»æ¶æ§‹ï¼Œwebåšrsyncé ç¨‹å¯¦æ™‚åŒæ­¥</p><p>2ï¼ŒæŠŠç¶²ç«™åŸŸåå°æ‡‰çš„IPåœ°å€Aè¨˜éŒ„æ”¹æˆæƒ å·çš„IP</p><p>3ï¼Œç•¶æ·±åœ³æ©Ÿæˆ¿æœå‹™å™¨ç„¡é€£æ¥æ™‚ï¼Œå°±å¯ä»¥é—œé–‰æ·±åœ³æ©Ÿæˆ¿çš„æœå‹™å™¨äº†</p><p>é¡Œ5</p><p>åšmysqlABè¤‡è£½ä¸èƒ½åŒè®€åŒå¯«ï¼Œå¦‚æœæœ‰å¹¾å€‹åˆ†å…¬å¸ï¼Œå„åˆ†å…¬å¸éƒ½æœ‰mysqlæ•¸æ“šåº«ï¼Œè¦æ±‚ï¼Œå„åœ°mysqlæ•¸æ“šåŒæ­¥ï¼Œä¸¦ä¸”å„åœ°éƒ½èƒ½è®€èƒ½å¯«ã€‚</p><p>ndbcluster</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>mysql</a></li><li><a>AB</a></li><li><a>ä¸»å¾</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/6e8f3f2e.html alt=é€£mysqlé–çš„æ©Ÿåˆ¶éƒ½ä¸ç­è§£ï¼Œæ€éº¼åšæ¶æ§‹å¸« class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1533476323070887266574f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6e8f3f2e.html title=é€£mysqlé–çš„æ©Ÿåˆ¶éƒ½ä¸ç­è§£ï¼Œæ€éº¼åšæ¶æ§‹å¸«>é€£mysqlé–çš„æ©Ÿåˆ¶éƒ½ä¸ç­è§£ï¼Œæ€éº¼åšæ¶æ§‹å¸«</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d7247a8.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro810å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ab296919d6ff4c15bc433cf48e05475a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d7247a8.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro810å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro810å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0077882a.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro820å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/bf0bc764e5994cceb9ff4d769d34a161 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0077882a.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro820å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro820å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/27cba6f9.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro850å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/aad9b13bcccc494496c9d6d89cd9ea7a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/27cba6f9.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro850å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro850å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2dbba1bd.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro870å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b3eb4b0c39bb4822b6803ffae3c922d3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2dbba1bd.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro870å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–Micro870å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±å‹è™ŸåŠåŠŸèƒ½ä»‹ç´¹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/953ca5fa.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1100å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5a9bfeabc7e7468887928d37e14dc0d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/953ca5fa.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1100å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1100å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4115e029.html alt=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1400å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/eb15dbef91d24bb4a9a47196245f5960 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4115e029.html title=ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1400å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½>ABç¾…å…‹éŸ‹çˆ¾è‡ªå‹•åŒ–MicroLogix1400å¯ç·¨ç¨‹é‚è¼¯æ§åˆ¶å™¨ç³»çµ±ä»‹ç´¹åŠåŠŸèƒ½</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/89184519.html alt="mysql å‰µå»ºè¡¨ï¼ŒæŸ¥çœ‹éŒ¶ï¼Œä¿®æ”¹è¡¨åå­—ï¼ŒæŒ‡å®šå¼•æ“å’Œå­—ç¬¦é›†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/3e173dc6-28ba-4101-8576-c70b1d96b5d5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/89184519.html title="mysql å‰µå»ºè¡¨ï¼ŒæŸ¥çœ‹éŒ¶ï¼Œä¿®æ”¹è¡¨åå­—ï¼ŒæŒ‡å®šå¼•æ“å’Œå­—ç¬¦é›†">mysql å‰µå»ºè¡¨ï¼ŒæŸ¥çœ‹éŒ¶ï¼Œä¿®æ”¹è¡¨åå­—ï¼ŒæŒ‡å®šå¼•æ“å’Œå­—ç¬¦é›†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65535165.html alt=mysqlæ•™ç¨‹:MySQLå¤šè¡¨æŸ¥è©¢å¤§å…¨,18å€‹ç¤ºä¾‹ç¸½æœ‰ä½ éœ€è¦çš„ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/43cf07c314554ea0887eaa8fd25c178f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65535165.html title=mysqlæ•™ç¨‹:MySQLå¤šè¡¨æŸ¥è©¢å¤§å…¨,18å€‹ç¤ºä¾‹ç¸½æœ‰ä½ éœ€è¦çš„>mysqlæ•™ç¨‹:MySQLå¤šè¡¨æŸ¥è©¢å¤§å…¨,18å€‹ç¤ºä¾‹ç¸½æœ‰ä½ éœ€è¦çš„</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/78fdddee.html alt=mysqlå¿«é€Ÿè¤‡è£½è¡¨çµæ§‹çš„å¹¾ç¨®æ–¹æ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/78fdddee.html title=mysqlå¿«é€Ÿè¤‡è£½è¡¨çµæ§‹çš„å¹¾ç¨®æ–¹æ³•>mysqlå¿«é€Ÿè¤‡è£½è¡¨çµæ§‹çš„å¹¾ç¨®æ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b923e71e.html alt=mysqlæ•¸æ“šåº«ä¸»å¾è¤‡è£½æ‹“æ’²çµæ§‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/6c3e00007aa0307b6043 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b923e71e.html title=mysqlæ•¸æ“šåº«ä¸»å¾è¤‡è£½æ‹“æ’²çµæ§‹>mysqlæ•¸æ“šåº«ä¸»å¾è¤‡è£½æ‹“æ’²çµæ§‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/53471e9b.html alt=mysqlç•°æ­¥è¤‡è£½èˆ‡åŠåŒæ­¥è¤‡è£½çš„æ¶æ§‹åŸç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/4e7b00019c175cf0ab61 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/53471e9b.html title=mysqlç•°æ­¥è¤‡è£½èˆ‡åŠåŒæ­¥è¤‡è£½çš„æ¶æ§‹åŸç†>mysqlç•°æ­¥è¤‡è£½èˆ‡åŠåŒæ­¥è¤‡è£½çš„æ¶æ§‹åŸç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4a2673f2.html alt="é«˜æ€§èƒ½ä¸»å¾æ¨¡å¼å‹•æ…‹å¯é‡æ§‹çš„SPI IPæ ¸è¨­è¨ˆ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/6ec8000fd9fe8b59debd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4a2673f2.html title="é«˜æ€§èƒ½ä¸»å¾æ¨¡å¼å‹•æ…‹å¯é‡æ§‹çš„SPI IPæ ¸è¨­è¨ˆ">é«˜æ€§èƒ½ä¸»å¾æ¨¡å¼å‹•æ…‹å¯é‡æ§‹çš„SPI IPæ ¸è¨­è¨ˆ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5b4a6f12.html alt="mysql explain è©³è§£" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/43d249c02fa64e4192cc7d6f1aa4a748 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5b4a6f12.html title="mysql explain è©³è§£">mysql explain è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/760cb665.html alt="è¨€æƒ…å°èªªæ¨è–¦ï¼šç”·å¥³ä¸»å¾å°å®šä¸‹å¨ƒå¨ƒè¦ªç³»åˆ—æ–‡ â€‹â€‹â€‹â€‹" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/23a5d68afd6f4bc39757a79142e14d84 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/760cb665.html title="è¨€æƒ…å°èªªæ¨è–¦ï¼šç”·å¥³ä¸»å¾å°å®šä¸‹å¨ƒå¨ƒè¦ªç³»åˆ—æ–‡ â€‹â€‹â€‹â€‹">è¨€æƒ…å°èªªæ¨è–¦ï¼šç”·å¥³ä¸»å¾å°å®šä¸‹å¨ƒå¨ƒè¦ªç³»åˆ—æ–‡ â€‹â€‹â€‹â€‹</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>