<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 | 极客快訊</title><meta property="og:title" content="沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/2d906b089a5b448f9cc8c13c1031d4c0"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/27147bdc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/27147bdc.html><meta property="article:published_time" content="2020-11-14T20:59:17+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:17+08:00"><meta name=Keywords content><meta name=description content="沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/27147bdc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>接口（interface）定義了一個對象的行為規範，只定義規範不實現，由具體的對象來實現規範的細節。</p><h1><strong>接口</strong></h1><p><strong>接口類型</strong></p><p>在Go語言中接口（interface）是一種類型，一種抽象的類型。</p><p>interface是一組method的集合，是duck-type programming的一種體現。接口做的事情就像是定義一個協議（規則），只要一臺機器有洗衣服和甩乾的功能，我就稱它為洗衣機。不關心屬性（數據），只關心行為（方法）。</p><p>為了保護你的Go語言職業生涯，請牢記接口（interface）是一種類型。</p><p><strong>為什麼要使用接口</strong></p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2d906b089a5b448f9cc8c13c1031d4c0><p class=pgc-img-caption></p></div><p>上面的代碼中定義了貓和狗，然後它們都會叫，你會發現main函數中明顯有重複的代碼，如果我們後續再加上豬、青蛙等動物的話，我們的代碼還會一直重複下去。那我們能不能把它們當成“能叫的動物”來處理呢？</p><p>像類似的例子在我們編程過程中會經常遇到：</p><p>比如一個網上商城可能使用支付寶、微信、銀聯等方式去在線支付，我們能不能把它們當成“支付方式”來處理呢？</p><p>比如三角形，四邊形，圓形都能計算周長和麵積，我們能不能把它們當成“圖形”來處理呢？</p><p>比如銷售、行政、程序員都能計算月薪，我們能不能把他們當成“員工”來處理呢？</p><p>Go語言中為了解決類似上面的問題，就設計了接口這個概念。接口區別於我們之前所有的具體類型，接口是一種抽象的類型。當你看到一個接口類型的值時，你不知道它是什麼，唯一知道的是通過它的方法能做什麼。</p><p><strong>接口的定義</strong></p><p>Go語言提倡面向接口編程。</p><p>每個接口由數個方法組成，接口的定義格式如下：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e085341f000f421f8384f4407e1d0178><p class=pgc-img-caption></p></div><p>其中：</p><ul><li>接口名：使用type將接口定義為自定義的類型名。Go語言的接口在命名時，一般會在單詞後面添加er，如有寫操作的接口叫Writer，有字符串功能的接口叫Stringer等。接口名最好要能突出該接口的類型含義。</li><li>方法名：當方法名首字母是大寫且這個接口類型名首字母也是大寫時，這個方法可以被接口所在的包（package）之外的代碼訪問。</li><li>參數列表、返回值列表：參數列表和返回值列表中的參數變量名可以省略。</li></ul><p>舉個例子：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/05313d425039478082e7e559a4d59bb6><p class=pgc-img-caption></p></div><p>當你看到這個接口類型的值時，你不知道它是什麼，唯一知道的就是可以通過它的Write方法來做一些事情。</p><p><strong>實現接口的條件</strong></p><p>一個對象只要全部實現了接口中的方法，那麼就實現了這個接口。換句話說，接口就是一個<strong>需要實現的方法列表</strong>。</p><p>我們來定義一個Sayer接口：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/01b72a4830924ffb8533f1d7ee028201><p class=pgc-img-caption></p></div><p>定義dog和cat兩個結構體：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/27e7d7f560624c7e86773d632da219d8><p class=pgc-img-caption></p></div><p>因為Sayer接口裡只有一個say方法，所以我們只需要給dog和cat 分別實現say方法就可以實現Sayer接口了。</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/11c8404154a447ec8aa639942a364f24><p class=pgc-img-caption></p></div><p>接口的實現就是這麼簡單，只要實現了接口中的所有方法，就實現了這個接口。</p><p><strong>接口類型變量</strong></p><p>那實現了接口有什麼用呢？</p><p>接口類型變量能夠存儲所有實現了該接口的實例。 例如上面的示例中，Sayer類型的變量能夠存儲dog和cat類型的變量。</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/88917c4e65454dc8b2cb292ed4a9334c><p class=pgc-img-caption></p></div><p><strong>值接收者和指針接收者實現接口的區別</strong></p><p>使用值接收者實現接口和使用指針接收者實現接口有什麼區別呢？接下來我們通過一個例子看一下其中的區別。</p><p>我們有一個Mover接口和一個dog結構體。</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5c54ab9cadba4f90a6792e410520838f><p class=pgc-img-caption></p></div><p><strong>值接收者實現接口</strong></p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/101caab6b47744aa98cdb1f0f4315ad9><p class=pgc-img-caption></p></div><p>此時實現接口的是dog類型：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1d3c3bf3c0754c119f72a54bcd1546f3><p class=pgc-img-caption></p></div><p>從上面的代碼中我們可以發現，使用值接收者實現接口之後，不管是dog結構體還是結構體指針*dog類型的變量都可以賦值給該接口變量。因為Go語言中有對指針類型變量求值的語法糖，dog指針fugui內部會自動求值*fugui。</p><p><strong>指針接收者實現接口</strong></p><p>同樣的代碼我們再來測試一下使用指針接收者有什麼區別：</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c69a4b0f3f004f4a94854208d0887636><p class=pgc-img-caption></p></div><p>此時實現Mover接口的是*dog類型，所以不能給x傳入dog類型的wangcai，此時x只能存儲*dog類型的值。</p><p><strong>面試題</strong></p><p>請問下面的代碼是否能通過編譯？</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a3433f19b034379b3319b5b9fb4d65e><p class=pgc-img-caption></p></div><p><strong>類型與接口的關係</strong></p><p><strong>一個類型實現多個接口</strong></p><p>一個類型可以同時實現多個接口，而接口間彼此獨立，不知道對方的實現。 例如，狗可以叫，也可以動。我們就分別定義Sayer接口和Mover接口，如下： Mover接口。</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4da6a28ffa39402ab0bee843950c2165><p class=pgc-img-caption></p></div><p>dog既可以實現Sayer接口，也可以實現Mover接口。</p><div class=pgc-img><img alt=沒掌握這個知識點，你的Go語言基礎是不紮實的：接口很重要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4e48a59876a245129e4265bfb8c0edba><p class=pgc-img-caption></p></div><blockquote><p>原文鏈接：https://www.liwenzhou.com/posts/Go/12_interface/</p><p>本文作者：李文周</p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>這個</a></li><li><a>知識點</a></li><li><a>Go</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/8cb961a.html alt=這個知識點讓你高考光的波動性得六分！｜楠叔物理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1538967117459825c1188bd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8cb961a.html title=這個知識點讓你高考光的波動性得六分！｜楠叔物理>這個知識點讓你高考光的波動性得六分！｜楠叔物理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d5da73b6.html alt=這個公司產品市佔率九成，市場空間3倍增速，今年淨利潤將翻倍 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/40949c99ee0e4221b4d4875c00def5a4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d5da73b6.html title=這個公司產品市佔率九成，市場空間3倍增速，今年淨利潤將翻倍>這個公司產品市佔率九成，市場空間3倍增速，今年淨利潤將翻倍</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/603069e5.html alt=這個汽車不光能在公路上開，還能拉著火車在鋼軌上跑！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/04f4307e-7e97-4e10-9f95-a3c00221151d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/603069e5.html title=這個汽車不光能在公路上開，還能拉著火車在鋼軌上跑！>這個汽車不光能在公路上開，還能拉著火車在鋼軌上跑！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f3070f16.html alt=買這個編碼格式的藍牙設備，又便宜又好用！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/8d5cc4a5-5d5b-4a34-adbd-cb74f8d4db2b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f3070f16.html title=買這個編碼格式的藍牙設備，又便宜又好用！>買這個編碼格式的藍牙設備，又便宜又好用！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/455de12a.html alt=多喝水就能讓大便變軟？便祕吃這個才有效 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b846b2b184614e2599cc9b4900c9a30b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/455de12a.html title=多喝水就能讓大便變軟？便祕吃這個才有效>多喝水就能讓大便變軟？便祕吃這個才有效</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65a60d8c.html alt=常用機械設計知識點總結01 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65a60d8c.html title=常用機械設計知識點總結01>常用機械設計知識點總結01</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b9d1da16.html alt=知識點——糖類的種類、作用和分類依據 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/01bed2d5-5a86-4c59-ba91-7659769138a2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b9d1da16.html title=知識點——糖類的種類、作用和分類依據>知識點——糖類的種類、作用和分類依據</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3cc75c16.html alt=新疆這個地方平臥著一個神奇的大湖！總面積有260平方公里 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a21703c8647641d5a77af54510346969 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3cc75c16.html title=新疆這個地方平臥著一個神奇的大湖！總面積有260平方公里>新疆這個地方平臥著一個神奇的大湖！總面積有260平方公里</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/54f6b885.html alt=成都東郊新動態，這個文創公園你去過沒？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/95f2a244159a4751aee4672cbcc04f93 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/54f6b885.html title=成都東郊新動態，這個文創公園你去過沒？>成都東郊新動態，這個文創公園你去過沒？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1be03739.html alt=這個穴位，中醫為什麼稱它為身之“糧倉”？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S6E0LfQ8hqNrud style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1be03739.html title=這個穴位，中醫為什麼稱它為身之“糧倉”？>這個穴位，中醫為什麼稱它為身之“糧倉”？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/85697d72.html alt="我用 Go 生成的隨機數為什麼不隨機？隨機數是怎樣產生的" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/47dfbe87bec844cf988f2e497c78641a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/85697d72.html title="我用 Go 生成的隨機數為什麼不隨機？隨機數是怎樣產生的">我用 Go 生成的隨機數為什麼不隨機？隨機數是怎樣產生的</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/05e8fcdd.html alt=這個地方，去過一次，將成為一生永久的愛戀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/43850002ba6e8929bebc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/05e8fcdd.html title=這個地方，去過一次，將成為一生永久的愛戀>這個地方，去過一次，將成為一生永久的愛戀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/521e944c.html alt=廣西這個縣是北部灣重鎮，被譽為“南珠之鄉”，海陸空交通發達！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/861ebdfd098a4da1a9c763dad2381556 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/521e944c.html title=廣西這個縣是北部灣重鎮，被譽為“南珠之鄉”，海陸空交通發達！>廣西這個縣是北部灣重鎮，被譽為“南珠之鄉”，海陸空交通發達！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a8114090.html alt=高顏值低消費！這個歐洲國家超低調，風景卻美得無需濾鏡 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RZtayab8Tt32qX style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a8114090.html title=高顏值低消費！這個歐洲國家超低調，風景卻美得無需濾鏡>高顏值低消費！這個歐洲國家超低調，風景卻美得無需濾鏡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/401d7e61.html alt=大家都熟知日出時間，那麼你們知道這個時間是怎麼算出來的嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e240bd51910c4924b88d747cff22c8e8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/401d7e61.html title=大家都熟知日出時間，那麼你們知道這個時間是怎麼算出來的嗎？>大家都熟知日出時間，那麼你們知道這個時間是怎麼算出來的嗎？</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>