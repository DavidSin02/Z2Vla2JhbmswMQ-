<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>一天一個設計模式：適配器模式(Adapter) | 极客快訊</title><meta property="og:title" content="一天一個設計模式：適配器模式(Adapter) - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/775b20fa61974cb08e440fb1f0972085"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/2ce9f41.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/2ce9f41.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="一天一個設計模式：適配器模式(Adapter)"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/2ce9f41.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>一天一個設計模式：適配器模式(Adapter)</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>前言</h1><p><strong>適配器模式</strong>把一個<strong>類的接口</strong>變換成<strong>客戶端</strong>所期待的<strong>另一種接口</strong>，從而使原本因<strong>接口不匹配</strong>而無法在一起工作的<strong>兩個類</strong>能夠在一起工作。</p><p>適配器模式的用途</p><p>最經典的就是電器的例子，筆記本電腦的插頭一般都是三相的，即除了陽極、陰極之外，還有一個地極。而有些地方的電源插座卻只有兩極，沒有地極。電源插座與筆記本電腦的電源插頭不匹配使得筆記本電腦無法使用。這時候一個三相到兩相的轉換器（適配器）就能解決此問題，而這正像是本模式所做的事情。</p><p>適配器模式的形式</p><p><strong>適配器模式</strong>有<strong>類的適配器模式</strong>和<strong>對象的適配器模式</strong>兩種不同的形式。</p><h1>正文</h1><p>類的適配器模式</p><p>類的適配器模式，簡單來說，就是<strong>適配的類</strong>的API轉換成為<strong>目標接口</strong>的API。</p><div class=pgc-img><img alt=一天一個設計模式：適配器模式(Adapter) onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/775b20fa61974cb08e440fb1f0972085></div><p>從上圖可以看出，Adaptee類並沒有sampleOperation2()方法，而<strong>客戶端</strong>則期待這個方法。</p><p>為了使<strong>客戶端</strong>能夠使用Adaptee類，提供一個<strong>中間環節</strong>，即類Adapter，把Adaptee類的API同Target接口的API銜接起來。Adapter與Adaptee是<strong>繼承關係</strong>，這決定了這個適配器模式是<strong>類的適配器模式</strong>。</p><p>相關角色</p><ol><li><strong>目標(Target)角色</strong>：這就是所期待得到的接口。注意：由於這裡討論的是類適配器模式，因此目標不可以是類。</li><li><strong>源(Adaptee)角色</strong>：現在需要適配的到<strong>目標角色</strong>的類。</li><li><strong>適配器(Adapter)角色</strong>：適配器是<strong>目標角色</strong>和<strong>源角色</strong>之間的橋樑。適配器把<strong>源角色的類</strong>轉換成<strong>目標接口</strong>的實現。</li></ol><p>示例代碼</p><p>Target.java</p><p>public interface Target {</p><p>/**</p><p>* 這是源類Adaptee中也有的方法</p><p>*/</p><p>public void sampleOperation1();</p><p>/**</p><p>* 這是源類Adaptee中沒有的方法</p><p>*/</p><p>public void sampleOperation2();</p><p>}</p><p>上面給出的是<strong>目標角色</strong>的接口代碼，這個角色是以一個接口的形式實現的。可以看出，這個<strong>接口</strong>聲明瞭兩個方法：sampleOperation1()和sampleOperation2()，而<strong>源角色</strong>Adaptee是一個<strong>具體類</strong>，它有一個sampleOperation1()方法，但是沒有sampleOperation2()方法。</p><p>Adaptee.java</p><p>public class Adaptee {</p><p>public void sampleOperation1() {</p><p>System.out.println("Operation 1st");</p><p>}</p><p>}</p><p>適配器角色Adapter拓展了Adaptee，同時又實現了<strong>目標角色</strong>Target接口。由於Adaptee沒有提供sampleOperation2()方法，而<strong>目標接口</strong>有要求這個方法，因此<strong>適配器角色</strong>Adapter實現了這個方法。</p><p>Adapter.java</p><p>public class Adapter extends Adaptee implements Target {</p><p>@Override</p><p>public void sampleOperation2() {</p><p>System.out.println("Operation 2nd");</p><p>}</p><p>}</p><p>對象的適配器模式</p><p>與<strong>類的適配器模式</strong>一樣，<strong>對象的適配器模式</strong>把被<strong>適配類</strong>的API轉換成為<strong>目標類</strong>的API。</p><p>與<strong>類的適配器模式</strong>不同的是，<strong>對象的適配器模式</strong>不是使用<strong>繼承關係</strong>鏈接到Adaptee類，而是使用<strong>委派關係</strong>連接到Adaptee類。</p><div class=pgc-img><img alt=一天一個設計模式：適配器模式(Adapter) onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3b3276c850244aaca2597fd4de02cced></div><p>從上圖可以看出，Adaptee類並沒有sampleOperation2()方法，而<strong>客戶端</strong>則期待這個方法。</p><p>為使客戶端能夠使用Adaptee類，需要提供一個包裝Wrapper類Adapter。這個包裝類包括了一個Adaptee的實例，從而此<strong>包裝類</strong>能夠把Adaptee的API與Target類的API銜接起來。Adapter類與Adaptee類是<strong>委派關係</strong>，這決定了<strong>適配器模式</strong>是<strong>對象</strong>的。</p><p>相關角色</p><ol><li><strong>目標(Target)角色</strong>：這就是所期待得到的接口。注意：由於這裡討論的是類適配器模式，因此目標不可以是類。</li><li><strong>源(Adaptee)角色</strong>：現在需要適配的到<strong>目標角色</strong>的類。</li><li><strong>適配器(Adapter)角色</strong>：適配器是<strong>目標角色</strong>和<strong>源角色</strong>之間的橋樑。適配器把<strong>源角色的類</strong>包裝到<strong>目標接口</strong>的實現中。</li></ol><p>示例代碼</p><p>Target.java</p><p>public interface Target {</p><p>/**</p><p>* 這是源類Adaptee中也有的方法</p><p>*/</p><p>public void sampleOperation1();</p><p>/**</p><p>* 這是源類Adaptee中沒有的方法</p><p>*/</p><p>public void sampleOperation2();</p><p>}</p><p>上面給出的是<strong>目標角色</strong>的接口代碼，這個角色是以一個接口的形式實現的。可以看出，這個<strong>接口</strong>聲明瞭兩個方法：sampleOperation1()和sampleOperation2()，而<strong>源角色</strong>Adaptee是一個<strong>具體類</strong>，它有一個sampleOperation1()方法，但是沒有sampleOperation2()方法。</p><p>Adaptee.java</p><p>public class Adaptee {</p><p>public void sampleOperation1() {</p><p>System.out.println("Operation 1st");</p><p>}</p><p>}</p><p>在<strong>對象的適配器模式</strong>中，<strong>適配器角色</strong>中持有一個對<strong>源角色</strong>的引用，並在需要適配的方法中使用<strong>源角色</strong>的方法實現。</p><p>Adapter.java</p><p>public class Adapter {</p><p>private Adaptee adaptee;</p><p>public Adapter (Adaptee adaptee) {</p><p>this.adaptee = adaptee;</p><p>}</p><p>/**</p><p>* 源類Adaptee有方法sampleOperation1</p><p>* 因此適配器可以直接進行委派</p><p>*/</p><p>public void sampleOperation1() {</p><p>this.adaptee.sampleOperation1();</p><p>}</p><p>/**</p><p>* 源類Adaptee沒有方法sampleOperation2</p><p>* 因此適配器需要自己實現此方法</p><p>*/</p><p>public void sampleOperation2() {</p><p>System.out.println("Operation 2nd");</p><p>}</p><p>}</p><p>兩種適配器模式的對比</p><p>類的適配器模式</p><ol><li>使用<strong>對象繼承</strong>的方式，是<strong>靜態</strong>的定義方式。</li><li>由於<strong>適配器</strong>直接繼承了Adaptee，使得<strong>適配器</strong>不能和Adaptee的子類一起工作。因為繼承是<strong>靜態</strong>的關係，而<strong>適配器</strong>繼承了Adaptee後，就不可能再去處理Adaptee的<strong>子類</strong>了。</li><li>適配器可以重定義Adaptee的部分行為，相當於子類<strong>覆蓋</strong>父類的部分實現方法。</li><li>不需要額外的引用過來間接得到Adaptee。</li></ol><p>對象的適配器模式</p><ol><li>使用<strong>對象組合</strong>的方式，是<strong>動態</strong>的組合方式。</li><li>一個適配器可以把<strong>多種</strong>不同的<strong>適配源</strong>適配到同<strong>一個目標類</strong>上。換言之，同一個適配器可以把<strong>源類</strong>和<strong>它的子類</strong>都適配到<strong>目標接口</strong>。因為對象適配器採用的是<strong>對象組合</strong>的關係，只要對象<strong>類型</strong>正確，是不是子類都無所謂。</li><li>要重定義Adaptee的行為比較困難，這種情況下，需要定義Adaptee的子類來實現重定義，然後讓<strong>適配器</strong>組合子類。這樣，雖然增加了一定的複雜性，也提供了一定的靈活性。</li><li>需要額外的引用來間接得到Adaptee。</li></ol><p>建議儘量使用<strong>對象適配器</strong>的實現方式，多用<strong>合成/聚合</strong>，少用<strong>繼承</strong>。當然，具體問題還是需要具體分析，根據需要來選用實現方式，最適合的才是最好的。</p><h1>總結</h1><p>適配器模式的優點</p><ul><li><strong>更好的複用性</strong></li></ul><p>系統需要使用現有的類，因此類的接口不符合系統的需要。那麼通過適配器模式就可以讓這些功能得到更好的複用。</p><ul><li><strong>更好的拓展性</strong></li></ul><p>在實現適配器功能的時候，可以調用自己開發的功能，從而自然的拓展系統的功能。</p><p>適配器模式的缺點</p><p><strong>過多</strong>的使用適配器，會讓系統非常<strong>零亂</strong>，不易整體進行把握。比如，明明看到調用的是A接口，其實內部都被適配成了B接口的實現。一個系統如果太多的出現這種情況，無異於異常災難。</p><p>因此如果不是很有必要，可以不是用適配器，而是直接對系統進行重構。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>模式</a></li><li><a>一個</a></li><li><a>設計</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/09d03a85.html alt=垂直簾創新設計，一個簡單的裝置就可以改變世界 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ebdbcb9549954b97a575d2f13e13de62 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/09d03a85.html title=垂直簾創新設計，一個簡單的裝置就可以改變世界>垂直簾創新設計，一個簡單的裝置就可以改變世界</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f6448fbf.html alt=一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6090b10ff8b34110a3cdbedd89424db0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f6448fbf.html title=一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏>一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bf666261.html alt=設計一個電子束光刻機原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bf666261.html title=設計一個電子束光刻機原理>設計一個電子束光刻機原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/041e4095.html alt=如何設計一個安全對外的接口？加簽驗簽了解一下 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/75d54ee4e7cf4557ae1f70b4655a74a0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/041e4095.html title=如何設計一個安全對外的接口？加簽驗簽了解一下>如何設計一個安全對外的接口？加簽驗簽了解一下</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7df5800c.html alt=用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/184a185c5dbe4d49a9bbc6c9a982063f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7df5800c.html title=用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的>用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/210ccbc7.html alt=設計模式專題07-適配模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/61e5bbbccefd445ca47e5ac95ad5c655 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/210ccbc7.html title=設計模式專題07-適配模式>設計模式專題07-適配模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/16f06603.html alt=手把手教你設計一個自動旋轉工作臺，看到即是賺到。 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/562f9337-6531-4b2d-91e5-7933e2832e81 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16f06603.html title=手把手教你設計一個自動旋轉工作臺，看到即是賺到。>手把手教你設計一個自動旋轉工作臺，看到即是賺到。</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24095cc.html alt=一個開關電源工程師的設計筆記（三）變壓器設計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/97b4147ba9ef4bf99dec61784b728511 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24095cc.html title=一個開關電源工程師的設計筆記（三）變壓器設計>一個開關電源工程師的設計筆記（三）變壓器設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95b0a0d.html alt=接地是電子設計中一個極其重要的問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95b0a0d.html title=接地是電子設計中一個極其重要的問題>接地是電子設計中一個極其重要的問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2abb7ea.html alt=「系統設計」如何設計一個“穩、準、快”的秒殺系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5f1b283fc044438c93611d0f29613b9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2abb7ea.html title=「系統設計」如何設計一個“穩、準、快”的秒殺系統>「系統設計」如何設計一個“穩、準、快”的秒殺系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9359c34.html alt=如何設計一個小而美的秒殺系統？[轉] class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fd5e8a47853a445abb0430ea164219f7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9359c34.html title=如何設計一個小而美的秒殺系統？[轉]>如何設計一個小而美的秒殺系統？[轉]</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62228be.html alt=看十年架構師，如何設計一個優秀的分佈式系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d8103b3dfaa14ffeab22134e2f6e0b0c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62228be.html title=看十年架構師，如何設計一個優秀的分佈式系統>看十年架構師，如何設計一個優秀的分佈式系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb199be.html alt=如何從零開始設計一個億級系統架構？總結萬字的完整思路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cbce349ae3974d7bbd85e6caf4d27ca7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb199be.html title=如何從零開始設計一個億級系統架構？總結萬字的完整思路>如何從零開始設計一個億級系統架構？總結萬字的完整思路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/87c923e.html alt=如何設計一個高可用、高併發秒殺系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/276d44d4e08e46c091540e4c54b5b98c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/87c923e.html title=如何設計一個高可用、高併發秒殺系統>如何設計一個高可用、高併發秒殺系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48a6b6a.html alt="5 PHP 設計模式系列「對象池模式（Object Pool）」" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/29c712d86aa04c48ad6b0d262ed8026e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48a6b6a.html title="5 PHP 設計模式系列「對象池模式（Object Pool）」">5 PHP 設計模式系列「對象池模式（Object Pool）」</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>