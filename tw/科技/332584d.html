<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>科普虛擬內存 | 极客快訊</title><meta property="og:title" content="科普虛擬內存 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/5e7f0001fbf41536346d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/332584d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/332584d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/332584d.html><meta property="article:published_time" content="2020-10-29T20:59:04+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:04+08:00"><meta name=Keywords content><meta name=description content="科普虛擬內存"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/332584d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>科普虛擬內存</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>虛擬內存</p><p>虛擬內存是計算機系統內存管理的一種技術。它使得應用程序認為它擁有連續的可用的內存（一個連續完整的地址空間），而實際上，它通常是被分隔成多個物理內存碎片，還有部分暫時存儲在外部磁盤存儲器上，在需要時進行數據交換。目前，大多數操作系統都使用了虛擬內存，如Windows家族的“虛擬內存”；Linux的“交換空間”等。<br></p><p>技術介紹：虛擬內存別稱虛擬存儲器（Virtual Memory）。</p><p><img alt=科普虛擬內存 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/5e7f0001fbf41536346d></p><p>電腦中所運行的程序均需經由內存執行，若執行的程序佔用內存很大或很多，則會導致內存消耗殆盡。為解決該問題，Windows中運用了虛擬內存 技術，即勻出一部分硬盤空間來充當內存使用。當內存耗盡時，電腦就會自動調用硬盤來充當內存，以緩解內存的緊張。若計算機運行程序或操作所需的隨機存儲器(RAM)不足時，則 Windows 會用虛擬存儲器進行補償。它將計算機的RAM和硬盤上的臨時空間組合。當RAM運行速率緩慢時，它便將數據從RAM移動到稱為“分頁文件”的空間中。將數據移入分頁文件可釋放RAM，以便完成工作。 一般而言，計算機的RAM容量越大，程序運行得越快。若計算機的速率由於RAM可用空間匱乏而減緩，則可嘗試通過增加虛擬內存來進行補償。但是，計算機從RAM讀取數據的速率要比從硬盤讀取數據的速率快，因而擴增RAM容量（可加內存條）是最佳選擇。</p><h1>虛擬內存是Windows 為作為內存使用的一部分硬盤空間。虛擬內存在硬盤上其實就是為一個碩大無比的文件，文件名是PageFile.Sys，通常狀態下是看不到的。必須關閉資源管理器對系統文件的保護功能才能看到這個文件。虛擬內存有時候也被稱為是“頁面文件”就是從這個文件的文件名中來的。</h1><p>內存在計算機中的作用很大，電腦中所有運行的程序都需要經過內存來執行，如果執行的程序很大或很多，就會導致內存消耗殆盡。為了解決這個問題，WINDOWS運用了虛擬內存技術，即拿出一部分硬盤空間來充當內存使用，這部分空間即稱為虛擬內存，虛擬內存在硬盤上的存在形式就是 PAGEFILE.SYS這個頁面文件。<br></p><p>工作原理</p><p>虛擬存儲器是由硬件和操作系統自動實現存儲信息調度和管理的。它的工作過程包括6個步驟：</p><p>①中央處理器訪問主存的邏輯地址分解成組號a和組內地址b，並對組號a進行地址變換，即將邏輯組號a作為索引，查地址變換表，以確定該組信息是否存放在主存內。</p><p>②如該組號已在主存內，則轉而執行④；如果該組號不在主存內，則檢查主存中是否有空閒區，如果沒有，便將某個暫時不用的組調出送往輔存，以便將這組信息調入主存。</p><p>③從輔存讀出所要的組，並送到主存空閒區，然後將那個空閒的物理組號a和邏輯組號a登錄在地址變換表中。</p><p>④從地址變換表讀出與邏輯組號a對應的物理組號a。</p><p>⑤從物理組號a和組內字節地址b得到物理地址。</p><p>⑥根據物理地址從主存中存取必要的信息。</p><p>調度方式有分頁式、段式、段頁式3種。頁式調度是將邏輯和物理地址空間都分成固定大小的頁。主存按頁順序編號，而每個獨立編址的程序空間有自己的頁號順序，通過調度輔存中程序的各頁可以離散裝入主存中不同的頁面位置，並可據表一一對應檢索。頁式調度的優點是頁內零頭小，頁表對程序員來說是透明的，地址變換快，調入操作簡單；缺點是各頁不是程序的獨立模塊，不便於實現程序和數據的保護。段式調度是按程序的邏輯結構劃分地址空間，段的長度是隨意的，並且允許伸長，它的優點是消除了內存零頭，易於實現存儲保護，便於程序動態裝配；缺點是調入操作複雜。將這兩種方法結合起來便構成段頁式調度。在段頁式調度中把物理空間分成頁，程序按模塊分段，每個段再分成與物理空間頁同樣小的頁面。段頁式調度綜合了段式和頁式的優點。其缺點是增加了硬件成本，軟件也較複雜。大型通用計算機系統多數採用段頁式調度。</p><p>虛實地址</p><p>實地址與虛地址</p><p>用戶編制程序時使用的地址稱為虛地址或邏輯地址，其對應的存儲空間稱為虛存空間或邏輯地址空間；而計算機物理內存的訪問地址則稱為實地址或物理地址，其對應的存儲空間稱為物理存儲空間或主存空間。程序進行虛地址到實地址轉換的過程稱為程序的再定位。<br></p><p>虛存的訪問過程</p><p>虛存空間的用戶程序按照虛地址編程並存放在輔存中。程序運行時，由地址變換機構依據當時分配給該程序的實地址空間把程序的一部分調入實存。每次訪存時，首先判斷該虛地址所對應的部分是否在實存中：如果是，則進行地址轉換並用實地址訪問主存；否則，按照某種算法將輔存中的部分程序調度進內存，再按同樣的方法訪問主存。由此可見，每個程序的虛地址空間可以遠大於實地址空間，也可以遠小於實地址空間。前一種情況以提高存儲容量為目的，後一種情況則以地址變換為目的。後者通常出現在多用戶或多任務系統中：實存空間較大，而單個任務並不需要很大的地址空間，較小的虛存空間則可以縮短指令中地址字段的長度。</p><p>異構體系</p><p>從虛存的概念可以看出，主存-輔存的訪問機制與cache-主存的訪問機制是類似的。這是由cache存儲器、主存和輔存構成的三級存儲體系中的兩個層次。cache和主存之間以及主存和輔存之間分別有輔助硬件和輔助軟硬件負責地址變換與管理，以便各級存儲器能夠組成有機的三級存儲體系。cache和主存構成了系統的內存，而主存和輔存依靠輔助軟硬件的支持構成了虛擬存儲器。<br></p><p>在三級存儲體系中，cache-主存和主存-輔存這兩個存儲層次有許多相同點：</p><p>(1)出發點相同：二者都是為了提高存儲系統的性能價格比而構造的分層存儲體系，都力圖使存儲系統的性能接近高速存儲器，而價格和容量接近低速存儲器。</p><p>(2)原理相同：都是利用了程序運行時的局部性原理把最近常用的信息塊從相對慢速而大容量的存儲器調入相對高速而小容量的存儲器。</p><p>但cache-主存和主存-輔存這兩個存儲層次也有許多不同之處：</p><p>(1)側重點不同：cache主要解決主存與CPU的速度差異問題；而就性能價格比的提高而言，虛存主要是解決存儲容量問題，另外還包括存儲管理、主存分配和存儲保護等方面。</p><p>(2)數據通路不同：CPU與cache和主存之間均有直接訪問通路，cache不命中時可直接訪問主存；而虛存所依賴的輔存與CPU之間不存在直接的數據通路，當主存不命中時只能通過調頁解決，CPU最終還是要訪問主存。</p><p>(3)透明性不同：cache的管理完全由硬件完成，對系統程序員和應用程序員均透明；而虛存管理由軟件（操作系統）和硬件共同完成，由於軟件的介入，虛存對實現存儲管理的系統程序員不透明，而只對應用程序員透明（段式和段頁式管理對應用程序員“半透明”）。</p><p>(4)未命中時的損失不同：由於主存的存取時間是cache的存取時間的5～10倍，而主存的存取速度通常比輔存的存取速度快上千倍，故主存未命中時系統的性能損失要遠大於cache未命中時的損失。</p><p>關鍵問題</p><p>(1)調度問題：決定哪些程序和數據應被調入主存。</p><p>(2)地址映射問題：在訪問主存時把虛地址變為主存物理地址（這一過程稱為內地址變換）；在訪問輔存時把虛地址變成輔存的物理地址（這一過程稱為外地址變換），以便換頁。此外還要解決主存分配、存儲保護與程序再定位等問題。</p><p>(3)替換問題：決定哪些程序和數據應被調出主存。</p><p>(4)更新問題：確保主存與輔存的一致性。</p><p>在操作系統的控制下，硬件和系統軟件為用戶解決了上述問題，從而使應用程序的編程大大簡化。</p><p>調度介紹</p><p>頁式調度</p><p>1、頁式虛存地址映射頁式虛擬存儲系統中，虛地址空間被分成等長大小的頁，稱為邏輯頁；主存空間也被分成同樣大小的頁，稱為物理頁。相應地，虛地址分為兩個字段：高字段為邏輯頁號，低字段為頁內地址（偏移量）；實存地址也分兩個字段：高字段為物理頁號，低字段為頁內地址。通過頁表可以把虛地址（邏輯地址）轉換成物理地址。</p><p>在大多數系統中，每個進程對應一個頁表。頁表中對應每一個虛存頁面有一個表項，表項的內容包含該虛存頁面所在的主存頁面的地址（物理頁號），以及指示該邏輯頁是否已調入主存的有效位。地址變換時，用邏輯頁號作為頁表內的偏移地址索引頁表（將虛頁號看作頁表數組下標）並找到相應物理頁號，用物理頁號作為實存地址的高字段，再與虛地址的頁內偏移量拼接，就構成完整的物理地址。現代的中央處理機通常有專門的硬件支持地址變換。</p><p>2、轉換後援緩衝器由於頁表通常在主存中，因而即使邏輯頁已經在主存中，也至少要訪問兩次物理存儲器才能實現一次訪存，這將使虛擬存儲器的存取時間加倍。為了避免對主存訪問次數的增多，可以對頁表本身實行二級緩存，把頁表中的最活躍的部分存放在高速存儲器中，組成快表。這個專用於頁表緩存的高速存儲部件通常稱為轉換後援緩衝器(TLB)。保存在主存中的完整頁表則稱為慢表。</p><p>3、內頁表是虛地址到主存物理地址的變換表，通常稱為內頁表。與內頁表對應的還有外頁表，用於虛地址與輔存地址之間的變換。當主存缺頁時，調頁操作首先要定位輔存，而外頁表的結構與輔存的尋址機制密切相關。例如對磁盤而言，輔存地址包括磁盤機號、磁頭號、磁道號和扇區號等。</p><p>段式調度</p><p>段是按照程序的自然分界劃分的長度可以動態改變的區域。通常，程序員把子程序、操作數和常數等不同類型的數據劃分到不同的段中，並且每個程序可以有多個相同類型的段。在段式虛擬存儲系統中，虛地址由段號和段內地址（偏移量）組成。虛地址到實主存地址的變換通過段表實現。每個程序設置一個段表，段表的每一個表項對應一個段。每個表項至少包含下面三個字段：<br></p><p>(1)有效位：指明該段是否已經調入實存。</p><p>(2)段起址：指明在該段已經調入實存的情況下，該段在實存中的首地址。</p><p>(3)段長：記錄該段的實際長度。設置段長字段的目的是為了保證訪問某段的地址空間時，段內地址不會超出該段長度導致地址越界而破壞其他段。段表本身也是一個段，可以存在輔存中，但一般駐留在主存中。</p><p>段式虛擬存儲器有許多優點：</p><p>①段的邏輯獨立性使其易於編譯、管理、修改和保護，也便於多道程序共享。②段長可以根據需要動態改變，允許自由調度，以便有效利用主存空間。段式虛擬存儲器也有一些缺點：</p><p>①因為段的長度不固定，主存空間分配比較麻煩。②容易在段間留下許多外碎片，造成存儲空間利用率降低。</p><p>③由於段長不一定是2的整數次冪，因而不能簡單地像分頁方式那樣用虛地址和實地址的最低若干二進制位作為段內偏移量，並與段號進行直接拼接，必須用加法操作通過段起址與段內偏移量的求和運算求得物理地址。因此，段式存儲管理比頁式存儲管理方式需要更多的硬件支持。</p><p>段頁式調度</p><p>段頁式虛擬存儲器是段式虛擬存儲器和頁式虛擬存儲器的結合。實存被等分成頁。每個程序則先按邏輯結構分段，每段再按照實存的頁大小分頁，程序按頁進行調入和調出操作，但可按段進行編程、保護和共享。它把程序按邏輯單位分段以後，再把每段分成固定大小的頁。程序對主存的調入調出是按頁面進行的，但它又可以按段實現共享和保護，兼備頁式和段式的優點。缺點是在映象過程中需要多次查表。在段頁式虛擬存儲系統中，每道程序是通過一個段表和一組頁表來進行定位的。段表中的每個表目對應一個段，每個表目有一個指向該段的頁表起始地址及該段的控制保護信息。由頁表指明該段各頁在主存中的位置以及是否已裝入、已修改等狀態信息。如果有多個用戶在機器上運行，多道程序的每一道需要一個基號,由它指明該道程序的段表起始地址。虛擬地址格式如下：<br></p><p>基號 段號 頁號 頁內地址</p><p>變換算法</p><p>虛擬存儲器地址變換基本上有3種形虛擬存儲器工作過程式：全聯想變換、直接變換和組聯想變換。任何邏輯空間頁面能夠變換到物理空間任何頁面位置的方式稱為全聯想變換。每個邏輯空間頁面只能變換到物理空間一個特定頁面的方式稱為直接變換。組聯想變換是指各組之間是直接變換，而組內各頁間則是全聯想變換。替換規則用來確定替換主存中哪一部分，以便騰空部分主存，存放來自輔存要調入的那部分內容。常見的替換算法有4種。<br></p><p>①隨機算法：用軟件或硬件隨機數產生器確定替換的頁面。</p><p>②先進先出：先調入主存的頁面先替換。</p><p>③近期最少使用算法（LRU，Least Recently Used）：替換最長時間不用的頁面。</p><p>④最優算法：替換最長時間以後才使用的頁面。這是理想化的算法，只能作為衡量其他各種算法優劣的標準。</p><p>虛擬存儲器的效率是系統性能評價的重要內容，它與主存容量、頁面大小、命中率，程序局部性和替換算法等因素有關。[</p><p>內存不足</p><p>【1】、感染病毒：有些病毒發作時會佔用大量內存空間，導致系統出現內存不足問題。</p><p>【2】、虛擬內存設置不當：通常，應設置為物理內存大小的2倍。若設置過小，則會影響系統程序的正常運行。此時便需重設虛擬內存數值，以“Windows XP”為例，右擊“我的電腦”，選擇“屬性”，在“高級”標籤頁點擊“性能”框中的“設置”按鈕，切換至“高級”標籤頁，後在“虛擬內存”框中點擊“更改”按鈕，接著重設虛擬內存數值，再點“設置”並“確定”，完後重啟系統即可。</p><p>【3】、系統盤空間不足：在默認情況下，虛擬內存是以名為“Pagefile.sys”的交換文件存於硬盤的系統分區中。若系統盤剩餘容量過小，即會出現該問題。系統盤至少應留有300MB的可用空間，當然此數值需據用戶的實際需要而定。儘量不要將各種應用軟件裝在系統盤，以保證有足夠的空間供虛擬內存文件使用，且最好將虛擬內存文件安放至非系統盤內。</p><p>【4】、System用戶權限設置不當：基於NT內核的Windows系統啟動時，System用戶會為系統創建虛擬內存文件。有些用戶為了系統的安全，採用NTFS文件系統，但卻取消了System用戶在系統盤“寫入”和“修改”的權限，這樣就無法為系統創建虛擬內存文件，運行大型程序時，也會出現此類問題。對策：重新賦予System用戶“寫入”和“修改”的權限即可。（注：該僅限於使用NTFS文件系統的用戶。）</p><p>合理設置</p><p>如何確定虛擬內存大小？</p><p>新手篇</p><p>由系統或系統優化軟件分配或設置為物理內存的1.5-3倍。</p><p>相對於設置步驟複雜的Linux系統，Windows系統下對虛擬內存的設置比較簡單：</p><ol class=list-paddingleft-2><li><p>在我的電腦圖標上單擊右鍵，選擇屬性。</p></li><li><p>在系統屬性窗口中選擇高級，在性能區域中單擊設置按鈕。</p></li><li><p>在性能選項中選擇高級，在虛擬內存區域中單擊更改按鈕。</p></li><li><p>選擇一個比較空閒的分區用來存放虛擬內存的Pagefile.sys文件。</p></li><li><p>在自定義大小區域中設置虛擬內存的大小為物理內存的1.5倍到3倍。</p></li></ol><p>事實上，嚴格按照1.5-3倍的倍數關係來設置並不科學，因此我們可以根據系統的實際應用情況進行設置。在這過程中需要用到Windows 2000/XP Pro/2003自帶的性能監視器。</p><ol class=list-paddingleft-2><li><p>運行“perfmon.msc”打開性能監視器，展開左側的性能日誌和警報，並點擊選擇計數器日誌，在右側的面板中空白處點擊鼠標右鍵，選擇新建日誌設置，並命名為Pagefile，然後回車確認。</p></li><li><p>在常規選項卡下，點擊添加計數器按鈕，在新彈出的窗口的性能對象下拉菜單中選擇Paging File，並選擇“從列表選擇計數器”，然後點擊% Usage Peak，在範例中選擇“_Total”，並接著點擊“添加”按鈕。</p></li><li><p>然後關閉這個窗口，並點擊圖三中的“確定”按鈕。點擊“是”創建日誌文件。接著打開“日誌文件”選項卡，在日誌文件類型下拉菜單中選則“文本文件（逗號分隔）”，然後記住“例如”框中顯示的日誌文件的路徑。</p></li><li><p>這樣，點擊確定後這個計數器已經開始運行了，你可以在電腦上進行你的日常操作，並儘可能多的打開和關閉各種經常使用的應用程序和遊戲。經過幾個小時的使用，基本上計數器已經可以對你的使用情況做出一個完整的評估。</p></li><li><p>這時你需要先停止這個記數器的運行，同樣是在計數器日誌窗口中，選中我們新建的Page File記數器，然後右鍵點擊，並且選擇停止。用記事本打開日誌文件。</p></li><li><p>需要注意的是，在日誌中的數值並不是分頁文件的使用量，而是使用率。也就是說，根據日誌文件的顯示，該系統一般情況下的分頁文件只使用了25%左右，而系統當前設置的分頁文件足有2GB，那麼為了節省硬盤空間，完全可以把分頁文件最大值縮小為512MB大小。而對於最小值，可以先根據日誌中的佔用率求出平均佔用率，然後再與最大值相乘，就可以得到了。</p></li></ol><p>相關信息</p><p>虛擬內存的位置</p><p>在設置虛擬內存的時候還需要注意，如果你有超過一塊硬盤，那麼最好能把分頁文件設置在沒有安裝操作系統或應用程序的硬盤上，或者所有硬盤中速率最快的硬盤上。這樣在系統繁忙的時候才不會產生同一個硬盤既忙於讀取應用程序的數據又同時進行分頁操作的情況。相反，如果應用程序和分頁文件在不同的硬盤上，這樣才能最大程度降低硬盤利用率，同時提高效率。當然，如果你只有一個硬盤，那麼把頁面文件設置在其他分區，也不會有提高磁盤效率的效果。</p><p>虛擬內存頁面文件與磁盤碎片</p><p>由於虛擬內存使用了硬盤，硬盤上非連續寫入的文件會產生磁盤碎片，因此一旦用於實現虛擬內存的文件或分區過於零碎，會加長硬盤的尋道時間，影響系統性能。有觀點誤認為Windows系統頻繁讀寫pagefile.sys就會產生磁盤碎片，實則不然。因為pagefile.sys文件一旦創立，在分區中的分佈連續形式就固定下來，文件內部讀寫並不增加或減少pagefile.sys的文件大小。僅當頁面文件告罄後系統創建的temppf.sys會帶來磁盤碎片。 而在Linux系統中，將用於虛擬內存的部分置於單獨的分區中，不影響其他的分區或文件，則基本杜絕了磁盤碎片帶來的影響。</p><p>虛擬內存太低的解決辦法</p><p>一般windowsXP默認情況下是利用C盤的剩餘空間來做虛擬內存的，因此，C盤的剩餘空間越大，對系統運行就越好，虛擬內存是隨著你的使用而動態地變化的，這樣C盤就容易產生磁盤碎片，影響系統運行速率，所以，最好將虛擬內存設置在其它分區，如D盤中。查看虛擬內存設置情況如下：</p><p>右鍵點“我的電腦”，左鍵點“屬性”，點選“高級”選項卡，點“性能”裡的“設置”按鈕，再選“高級”選項卡，點下面的“更改”按鈕，所彈出的窗口就是虛擬內存設置窗口，一般默認的虛擬內存是從小到大的一段取值範圍，這就是虛擬內存變化大小的範圍，最好給它一個固定值，這樣就不容易產生磁盤碎片了，具體數值根據你的物理內存大小來定，一般為物理內存的1.5到3倍，如512M內存，可以設置256-768MB(內存+虛擬內存之和一般比正常佔用高256MB即可)。1GB的內存的話，設為128-1024MB(內存+虛擬內存之和一般比正常佔用高256-512MB即可)，2GB內存以上的話，一般可以禁用虛擬內存了，部分確實會使用大量內存的人，如玩大型3D遊戲、製作大幅圖片、3D建模等，並收到系統內存不足警告的，才需要酌情設定虛擬內存[4]</p><p>，設置方法如下：</p><p>假設內存為256M，虛擬內存放在D盤，先要將默認的清除，保持C盤為選中狀態，單選“無分頁文件（N）”再按“設置”按鈕，此時C盤旁的虛擬內存就消失了，然後選中D盤，單選“自定義大小”，在下面的“初始大小”和“最大值”兩個方框裡都添上512，再點一下“設置”按鈕，會看到D盤的旁邊出現了“512-512”的字樣，這樣就說明設置好了，再一路確定，最終，系統會要重新啟動，重啟一下，便完成了設置。</p><p>設置方法</p><p>手動設置</p><p>找出最合適的虛擬內存大小範圍值後，</p><p>①用右鍵點擊桌面上的“我的電腦”圖標，在出現的右鍵菜單中選“屬性”選項打開“系統屬性”窗口。在窗口中點擊“高級”選項卡，出現高級設置的對話框</p><p>②點擊“性能”區域的“設置”按鈕，在出現的“性能選項”窗口中選擇“高級”選項卡，打開其對話框。</p><p>③在該對話框中可看到關於虛擬內存的區域，點擊“更改”按鈕進入“虛擬內存”的設置窗口。選擇一個有較大空閒容量的分區，勾選“自定義大小”前的複選框，將具體數值填入“初始大小”、“最大值”欄中，而後依次點擊“設置→確定”按鈕即可，最後重新啟動計算機使虛擬內存設置生效。</p><p>調整分頁位置</p><p><img alt=科普虛擬內存 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/5e8500035a4d43d5fc6a></p><p>虛擬內存的顯示</p><p>Windows9x的虛擬內存分頁位置，其實就是保存在C盤根目錄下的一個虛擬內存文件（也稱為交換文件）Win386.swp，它的存放位置可以是任何一個分區，如果系統盤C容量有限，我們可以把Win386.swp調到別的分區中，方法是在記事本中打開System.ini（C:Windows下）文件，在[386Enh]小節中，將“PagingDrive=C:WindowsWin386.swp”，改為其他分區的路徑，如將交換文件放在D:中，則改為“PagingDrive=D:Win386.swp”，如沒有上述語句可以直接鍵入即可。</p><p>而對於使用Windows2000和WindowsXP的，可以選擇“控制面板→系統→高級→性能”中的“設置→高級→更改”，打開虛擬內存設置窗口，在驅動器[卷標]中默認選擇的是系統所在的分區，如果想更改到其他分區中，首先要把原先的分區設置為無分頁文件，然後再選擇其他分區。</p><p>或者，WinXP一般要求物理內存在256M以上。如果你喜歡玩大型3D遊戲，而內存（包括顯存）又不夠大，系統會經常提示說虛擬內存不夠，系統會自動調整（虛擬內存設置為系統管理）。</p><p>注意事項</p><p>允許設置的虛擬內存最小值為2MB，最大值不能超過當前硬盤的剩餘空間值，同時也不能超過32位操作系統的內存尋址範圍——4GB。</p><p>禁用頁面文件</p><p>當擁有了1G以上的內存時，頁面文件的作用將不再明顯，因此我們可以將其禁用。方法是：依次進入註冊表編輯器“HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SessionManager\MemoryManagement”下，在“DisablePagingExecutive”（禁用頁面文件）選項中將其值設為“1”即可。</p><p>PS：此舉可能會造成系統不穩定.某些程序無法運行或死機。請根據自己實際情況更改。</p><p>在擁有4G以上的內存時，虛擬內存已經無足輕重了。在關閉後日常使用中沒有報錯、收到系統內存不足警告以及出現卡死等情況，那麼可以高枕無憂了，不用擔心關閉虛擬內存帶來的負面影響。</p><p>清空頁面文件</p><p>在同一位置上有一個“ClearPageFileAtShutdown（關機時清除頁面文件）”，將該值設為“1”。這裡所說的“清除”頁面文件並非是指從硬盤上完全刪除pagefile.sys文件，而是對其進行“清洗”和整理，根據微軟的說法，這是一個安全選項，與性能無關。</p><p>高級話題：使用 SweepRAM 工具。適用於 Windows 2000/XP/2003。網上可以找到 SweepRAM 程序。該程序最大的作用是把所有進程的工作集清空。所謂工作集是指進程已映射的物理內存部分（即這些內存塊全在物理內存中，並且 CPU 可以直接訪問），還有一部分不在工作集中的虛擬內存則可能在轉換列表中（CPU 不能通過虛地址訪問，需要 Windows 映射之後才能訪問），還有一部分則在磁盤上的頁面文件裡。工作集在進程運行時會被 Windows 自動調整，頻繁訪問的頁面（4KB 的塊）會留在內存中，而不頻繁訪問的頁面在內存緊張時會被從工作集中移出，暫時保存在內存中的“轉換列表”中，或者進一步換出到頁面文件中。當應用程序再次訪問某一頁面時，操作系統會將它重新加回工作集中。</p><p>SweepRAM 工具以一種適中的頻率（大約 40 分鐘一次）反覆運行，可以將各進程的工作集清空，而之後各進程的工作集會慢慢恢復。這樣可以保持更好的工作集平衡，從而提高系統性能。</p><p>關機自動清除</p><p>設置步驟如下：</p><ol class=list-paddingleft-2><li><p>運行：gpedit.msc進入組策略對象編輯器。</p></li><li><p>如圖依次打開如下內容：“計算機配置”---“Windows 設置”---“安全設置”---“本地策略”---“安全選項”---“關機：清除虛擬內存頁面”。</p></li><li><p>右擊“屬性”點擊“已啟用”。</p></li><li><p>確定，這樣設置就ok了。</p></li></ol><p>對於沒有組策略的解決方案如下：</p><ol class=list-paddingleft-2><li><p>按系統快捷鍵win+r運行regedit打開註冊表編輯器。</p></li><li><p>查找到“HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Control/Session Manager/Memory Management”，然後在右邊的列表中雙擊“ClearPageFileAtShutdown”。</p></li><li><p>在彈出的“編輯DWORD”值對話框中改為1。</p></li><li><p>重新啟動計算機，使修改生效。</p></li></ol><p>使用技巧</p><p>對於虛擬內存如何設置的問題，微軟已經給我們提供了官方的解決辦法，對於一般情況下，我們推薦採用如下的設置方法：</p><ul class=list-paddingleft-2><li><p>頁面文件，文件的大小由你對系統的設置決定。具體設置方法如下：打開"我的電腦"的"屬性"設置窗口，切換到"高級"選項卡，在"啟動和故障恢復"窗口的"寫入調試信息"欄，如果你採用的是試和錯誤報告了。所以折中的辦法是在系統盤設置較小的頁面文件，只要夠用就行了。</p></li><li><p>內存，其最小值設置為物理內存的1.5倍，最大值設置為物理內存的3倍，該分區專門用來存儲頁面文件，不要再存放其它任何文件。之所以單獨劃分一個分區用來設置虛擬內存，主要是基於兩點考慮：其一，由於該分區上沒有其它文件，這樣分區不會產生磁盤碎片，這樣能保證頁面文件的數據讀寫不受磁盤碎片的干擾；其二，按照Windows對內存的管理技術，Windows會優先使用不經常訪問的分區上的頁面文件，這樣也減少了讀取系統盤裡的頁面文件的機會，減輕了系統盤的壓力。</p></li></ul><ul class=list-paddingleft-2><li><li><p>頁面文件，則其它硬盤分區不設置任何頁面文件。因為過多的分區設置頁面文件，這樣會導致，硬盤磁頭反覆的在不同的分區來回讀取。這樣既耽誤了系統速率，也會減少硬盤的壽命。當然，如果你有多個硬盤，則可以為每個硬盤都創建一個頁面文件。當信息分佈在多個頁面文件上時，硬盤控制器可以同時在多個硬盤上執行讀取和寫入操作。這樣系統性能將得到提高。[2]</p></li><li><p>需要注意！設置過大的虛擬內存將導致關機過慢甚至幾十分鐘，例如2G電腦設置16G虛擬內存雖然增加了電腦性能但是關機可能需要幾分鐘。</p></li></li></ul><p><img alt=科普虛擬內存 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/5e8900011fa2a5caba30></p><p class=pgc-img-caption>虛擬內存</p><p>虛擬內存，本詞條由“科普中國”百科科學詞條編寫與應用工作項目 審核 。</p><p>信息來源百科</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>虛擬</a></li><li><a>內存</a></li><li><a>科普</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/65f74e6.html alt=虛擬內存系列(一)硬件基本結構 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/0f550e3faa1445979d845ecd6bae7117 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65f74e6.html title=虛擬內存系列(一)硬件基本結構>虛擬內存系列(一)硬件基本結構</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1808feb.html alt=物理內存與虛擬內存 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/abf0c1099c7e4cea8fc4dccc6734e097 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1808feb.html title=物理內存與虛擬內存>物理內存與虛擬內存</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cc7392f1.html alt=科普｜常用的鑄造鋁合金牌號 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/b3135bb62fcb45bf9ba7880db04ec886 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cc7392f1.html title=科普｜常用的鑄造鋁合金牌號>科普｜常用的鑄造鋁合金牌號</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8abf55d.html alt=虛擬主機服務器適用哪些類型網站？其選擇看什麼？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/e73b4b7a-50c7-4687-823c-30a7523d8c4a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8abf55d.html title=虛擬主機服務器適用哪些類型網站？其選擇看什麼？>虛擬主機服務器適用哪些類型網站？其選擇看什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/81e23745.html alt=2018年中國虛擬現實行業規模超200億元，其中虛擬製造佔比最高 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9ea544b278cc4007bf1ea7c686f4af6a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/81e23745.html title=2018年中國虛擬現實行業規模超200億元，其中虛擬製造佔比最高>2018年中國虛擬現實行業規模超200億元，其中虛擬製造佔比最高</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1801773a.html alt="AI芯天下丨虛擬工廠 ，2025智能製造新路徑" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9fc63c421a37451d950eb1efcde49091 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1801773a.html title="AI芯天下丨虛擬工廠 ，2025智能製造新路徑">AI芯天下丨虛擬工廠 ，2025智能製造新路徑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1ac5f4f.html alt=中國製造2025創新創新路徑——虛擬現實技術與智能製造的碰撞 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/ac039708-4d1e-436f-ae3a-c4751c9c43b1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1ac5f4f.html title=中國製造2025創新創新路徑——虛擬現實技術與智能製造的碰撞>中國製造2025創新創新路徑——虛擬現實技術與智能製造的碰撞</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3472979b.html alt=在虛擬現實中製造夢幻機器，《Ruberg》滿足很多人的夢想 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15283362007010b77c22c5c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3472979b.html title=在虛擬現實中製造夢幻機器，《Ruberg》滿足很多人的夢想>在虛擬現實中製造夢幻機器，《Ruberg》滿足很多人的夢想</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a667cf12.html alt=工業VR應用於智能製造升級、虛擬展示、虛擬裝配、虛擬製造 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a667cf12.html title=工業VR應用於智能製造升級、虛擬展示、虛擬裝配、虛擬製造>工業VR應用於智能製造升級、虛擬展示、虛擬裝配、虛擬製造</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d742110.html alt=從虛擬拍攝到虛擬角色，VR設備如何助力《頭號玩家》虛擬製作 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1524184038757d3ecf415e3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d742110.html title=從虛擬拍攝到虛擬角色，VR設備如何助力《頭號玩家》虛擬製作>從虛擬拍攝到虛擬角色，VR設備如何助力《頭號玩家》虛擬製作</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/70b7fdfb.html alt=新銳丨虛擬工廠，2025智能製造新路徑 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/Rw0wheGANJXrpx style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/70b7fdfb.html title=新銳丨虛擬工廠，2025智能製造新路徑>新銳丨虛擬工廠，2025智能製造新路徑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/32b07cdf.html alt=淺談虛擬現實技術在實際中的應用是什麼？你的看法是？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/320e000488d3da066723 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/32b07cdf.html title=淺談虛擬現實技術在實際中的應用是什麼？你的看法是？>淺談虛擬現實技術在實際中的應用是什麼？你的看法是？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e99cf5b7.html alt=虛擬現實+智能製造，歌爾股份華南智能製造園區落戶松山湖 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Rgxxjrp1DVNah7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e99cf5b7.html title=虛擬現實+智能製造，歌爾股份華南智能製造園區落戶松山湖>虛擬現實+智能製造，歌爾股份華南智能製造園區落戶松山湖</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1cd5b6b6.html alt=虛擬現實技術在智能製造領域具有重要的應用價值 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3ed327880d3b4c5384619f21d6c81823 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1cd5b6b6.html title=虛擬現實技術在智能製造領域具有重要的應用價值>虛擬現實技術在智能製造領域具有重要的應用價值</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0217fc4d.html alt=虛擬現實智能製造的關鍵技術，三維掃描技術應用領域超出你想象 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15242101381199c3beaf8bc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0217fc4d.html title=虛擬現實智能製造的關鍵技術，三維掃描技術應用領域超出你想象>虛擬現實智能製造的關鍵技術，三維掃描技術應用領域超出你想象</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>