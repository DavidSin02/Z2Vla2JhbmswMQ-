<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat | æå®¢å¿«è¨Š</title><meta property="og:title" content="2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/257680b8c2514d67861f1984e8e50cfe"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/34c5ace.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/34c5ace.html><meta property="article:published_time" content="2020-10-29T20:50:41+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:41+08:00"><meta name=Keywords content><meta name=description content="2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/34c5ace.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>æ¶æ§‹è¨­è¨ˆ</p><div class=pgc-img><img alt=2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/257680b8c2514d67861f1984e8e50cfe><p class=pgc-img-caption></p></div><p>æµç¨‹åœ–</p><div class=pgc-img><img alt=2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b7d2e30b10db4f14a388374e3b96d02d><p class=pgc-img-caption></p></div><p>æµç¨‹åœ–åŸç†è©³è§£</p><div class=pgc-img><img alt=2éšæ®µæäº¤åˆ†ä½ˆå¼äº‹å‹™ä¸­é–“ä»¶Raincat onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cee77c89003c492082be9a36b85d1ca0><p class=pgc-img-caption></p></div><p>é¦–å…ˆç”¨æˆ¶ç™¼èµ·requestè«‹æ±‚é€²å…¥consumeç«¯ï¼ˆä¹Ÿå¯ä»¥æ˜¯controllerå±¤ï¼‰ï¼Œcontrollerå±¤é€²å…¥AOPåˆ‡é¢ï¼Œé–‹å•Ÿåˆ†ä½ˆå¼äº‹å‹™</p><ul><li>æœƒèˆ‡txManageré€šä¿¡ï¼Œå‰µå»ºäº‹å‹™çµ„</li><li>ç™¼èµ·æ¥­å‹™æ–¹æ³•èª¿ç”¨point.proceed(),é€™ä¸€æ­¥æ˜¯åˆ†ä½ˆå¼äº‹å‹™èª¿ç”¨RPCæ–¹æ³•çš„å…¥å£ï¼Œæœƒä¸€å€‹ä¸€å€‹èª¿ç”¨RPCæ–¹æ³•</li><li>ä¸»ç·šç¨‹èª¿ç”¨provder1 æä¾›çš„RPCæ–¹æ³•ï¼ŒåŒæ¨£æœƒé€²å…¥åˆ‡é¢ï¼Œæ­¤æ™‚ï¼Œæœƒå•Ÿå‹•å¦ä¸€å€‹ç·šç¨‹å»èª¿ç”¨è©²RPCæ–¹æ³•ï¼Œç•¶å‰ç·šç¨‹wait</li></ul><pre>èª¿ç”¨å¤±æ•—ï¼Œèª¿ç”¨æ¥­å‹™æ–¹æ³•ç·šç¨‹ï¼Œæœƒå–šé†’ç­‰å¾…çš„ä¸»ç·šç¨‹ï¼Œä¸¦æŠŠç•°å¸¸ä¿¡æ¯è¿”å›ï¼Œèµ°çš„å°±æ˜¯one fial rollbacké€™æ¢ç·šï¼Œæ¶ˆè²»æ–¹ç²å–ç•°å¸¸ä¿¡æ¯ï¼Œè‡ªå‹•å›æ»¾ç•¶å‰äº‹å‹™ï¼Œåˆ†ä½ˆå¼äº‹å‹™çµæŸã€‚èª¿ç”¨æˆåŠŸ æ¥­å‹™ç·šç¨‹ï¼Œå°‡å–šé†’ä¸»ç·šç¨‹ï¼Œä¸¦è¿”å›æ•¸æ“šã€‚æ¥­å‹™ç·šç¨‹åŒtxManager é€šä¿¡ å°‡è‡ªå·±åŠ å…¥åˆ°ç•¶å‰äº‹å‹™çµ„ä¸­ï¼Œæ¥­å‹™ç·šç¨‹é€²å…¥ç­‰å¾…ï¼Œç­‰å¾…txManageræŒ‡ä»¤ï¼Œcommit or rollback å³ åœ–ä¸­çš„4,5,6</pre><ul><li>ä¸»ç·šç¨‹ç¹¼çºŒèª¿ç”¨provider2æä¾›çš„RPCæ–¹æ³• ï¼ŒåŒæ¨£æœƒé€²å…¥AOPåˆ‡é¢ï¼Œç•¶å‰ä¸»ç·šç¨‹ç­‰å¾…ï¼Œå•Ÿå‹•ä¸€å€‹æ¥­å‹™ç·šç¨‹å»èª¿ç”¨æ¥­å‹™æ–¹æ³•</li></ul><pre>èª¿ç”¨å¤±æ•—ï¼Œèª¿ç”¨æ¥­å‹™æ–¹æ³•ç·šç¨‹ï¼Œæœƒå–šé†’ç­‰å¾…çš„ä¸»ç·šç¨‹ï¼Œä¸¦æŠŠç•°å¸¸ä¿¡æ¯è¿”å›ï¼Œèµ°çš„å°±æ˜¯two fial rollbacké€™æ¢ç·šï¼Œæ¶ˆè²»æ–¹ç²å–ç•°å¸¸ä¿¡æ¯ï¼Œè‡ªå‹•å›æ»¾ç•¶å‰äº‹å‹™ï¼Œä¸¦èˆ‡txManageré€²è¡Œé€šä¿¡ï¼ˆtwo TransactionGroup fail é€™æ¢ç·šï¼‰ï¼ŒtxManagerç™¼èµ·rollbackæŒ‡ä»¤ï¼ˆtwo fail rollback é€™æ¢ç·šï¼‰ï¼Œé€šçŸ¥provider1 rollbackèª¿ç”¨æˆåŠŸ æ¥­å‹™ç·šç¨‹ï¼Œå°‡å–šé†’ä¸»ç·šç¨‹ï¼Œä¸¦è¿”å›æ•¸æ“šã€‚æ¥­å‹™ç·šç¨‹åŒtxManager é€šä¿¡ å°‡è‡ªå·±åŠ å…¥åˆ°ç•¶å‰äº‹å‹™çµ„ä¸­ï¼Œæ¥­å‹™ç·šç¨‹é€²å…¥ç­‰å¾…ï¼Œç­‰å¾…txManageræŒ‡ä»¤ï¼Œcommit or rollback å³ åœ–ä¸­çš„9,10,11</pre><ul><li>ä¸»ç·šç¨‹point.proceed()æ–¹æ³•æˆåŠŸåŸ·è¡Œï¼Œæœƒå‘txManagerç™¼å‡ºcommitè«‹æ±‚ï¼ŒtxManageræ¥æ”¶è«‹æ±‚å¾Œï¼Œæœƒæª¢æŸ¥å„æ¨¡å¡Šçš„ç¶²çµ¡é€šä¿¡ç­‰ç‹€æ…‹ï¼Œç¬¦åˆæ¢ä»¶å¾Œï¼Œç™¼å‡ºcommitæŒ‡ä»¤ï¼Œå³ 14ã€‚é€šçŸ¥å„å€‹æ¨¡å¡Šæäº¤è‡ªå·±çš„äº‹å‹™ã€‚</li></ul><p>ä¸‰éšæ®µæäº¤æœ€å¤§çš„å•é¡Œï¼Œåœ¨æ–¼ç•¶txManagerç™¼å‡ºcommitæŒ‡ä»¤å¾Œï¼Œæ¥­å‹™æ–¹downæ©Ÿï¼Œæˆ–è€…ç¶²çµ¡é€šä¿¡æ–·äº†ã€‚æ€éº¼è§£æ±ºäº‹å‹™ä¸€è‡´æ€§çš„å•é¡Œã€‚æˆ‘å€‘é€™éº¼æƒ³ï¼Œç•¶txManager ç™¼å‡ºcommitæŒ‡ä»¤çš„æ™‚å€™ï¼Œå…¶å¯¦æ¥­å‹™æ–¹æ³•éƒ½æ²’æœ‰ä»»ä½•ç•°å¸¸ï¼Œéƒ½æ˜¯åŸ·è¡ŒæˆåŠŸçš„ï¼Œé‚£éº¼æ•¸æ“šå°±æ˜¯éœ€è¦æäº¤çš„ã€‚é‚£éº¼æˆ‘å€‘æœ¬åœ°çš„è£œå„Ÿæ©Ÿåˆ¶æ­£æ˜¯ç‚ºäº†è©²å ´æ™¯è€Œè€ƒæ…®ï¼Œå¦‚æœdownæ©Ÿï¼Œæˆ–è€…ç¶²çµ¡ç•°å¸¸ã€‚æœ¬åœ°æœå‹™æ¢å¾©å¾Œï¼ŒæœƒåŸ·è¡Œè£œå„Ÿï¼Œé”åˆ°æ•¸æ“šçš„ä¸€è‡´æ€§ã€‚å¦‚æœæ¥­å‹™æ–¹æ˜¯é›†ç¾¤éƒ¨ç½²çš„è©±ï¼Œæœƒç«‹åˆ»åŸ·è¡Œè£œå„Ÿï¼Œé”åˆ°æ•¸æ“šçš„ä¸€è‡´æ€§ã€‚</p><p>é‡è¦æé†’ï¼Œå¦‚æœèª¿ç”¨æœå‹™æ–¹æ˜¯timeoutï¼Œé‚£éº¼æœƒåˆ¤æ–·ç•¶å‰äº‹å‹™ä¸æˆåŠŸï¼Œé€™æ¬¡åˆ†ä½ˆå¼äº‹å‹™çµ±ä¸€ä¸æœƒåŸ·è¡Œã€‚</p><p>å¿«é€Ÿé–‹å§‹ï¼š</p><h1><strong>Spring-Boot-Starter</strong></h1><p>å°å‡º</p><ul><li>é¦–å…ˆå¼•å…¥rpcæ¡†æ¶æ‰€æ”¯æŒçš„jaråŒ…,æ³¨æ„ï¼šç‰ˆæœ¬è™Ÿï¼Œæ ¹æ“šä½ æ‹‰ä»£ç¢¼è‡ªå·±æ‰“åŒ…ä¸Šå‚³åˆ°ç§æœä¸€è‡´</li><li>Dubbo</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-dubbo&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>SpringCloud</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-springcloud&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>Motan</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-spring-boot-starter-motan&lt;/artifactId&gt; &lt;version&gt;${your version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>åœ¨ä½ çš„ application.yml ä¸­æ–°å¢å¦‚ä¸‹é…ç½®ï¼š</li></ul><pre>raincat: tx : txManagerUrl: http://localhost:8761 serializer: kroy nettySerializer: kroy compensation: true compensationCacheType : db txDbConfig : driverClassName : com.mysql.jdbc.Driver url : jdbc:mysql://10.4.4.202:3306/tx?useUnicode=true&amp;characterEncoding=utf8 username : root password : 123123 # repositorySupport : redis # txRedisConfig : # hostName : 192.168.1.68 # port : 6379 # password : # repositorySupport : zookeeper # tx-zookeeper-config : # host : 92.168.1.73:2181 # sessionTimeOut : 100000 # rootPath : /tx # repositorySupport : mongodb # tx-mongo-config : # mongoDbUrl : localost:27017 # mongoDbName : xiaoyu # mongoUserName : xiaoyu # mongoUserPwd : 123456 # repositorySupport : file # tx-file-config: # path : /consume # prefix : consume</pre><p>TxManageré…ç½®è©³è§£</p><ul><li>application.properties ä¸»è¦æ˜¯é…ç½®tmManagerçš„httpæœå‹™ç«¯å£ï¼Œredisä¿¡æ¯,nettyç›¸é—œä¿¡æ¯ æ³¨æ„ï¼šå› ç‚ºç¾åœ¨tmManager æ˜¯è‡ªå·±å‘è‡ªå·±è¨»å†Šï¼Œæ‰€ä»¥httpç«¯å£ï¼ˆserver.portï¼‰æ‡‰è©²è¦èˆ‡eurekaçš„ç«¯å£ä¸€è‡´ã€‚</li></ul><p>server.port=8761 txManager çš„httpç«¯å£</p><p>tx.manager.netty.port=9998 å°æ¥­å‹™æ–¹æä¾›çš„TCP ç«¯å£ã€‚</p><p>tx.manager.netty.serialize=kryo netty åºåˆ—åŒ–æ–¹å¼ï¼Œæ³¨æ„æ‡‰è©²è¦èˆ‡æ¥­å‹™æ–¹çš„åºåˆ—åŒ–æ–¹å¼ä¸€è‡´ã€‚</p><ul><li>bootstrap.yml ä¸»è¦æ˜¯é…ç½®eurekaçš„ç›¸é—œå±¬æ€§ï¼Œæ¯”å¦‚renewæ™‚é–“ï¼Œè¨»å†Šåœ°å€ç­‰</li><li>éƒ¨ç½²é›†ç¾¤é…ç½®ï¼š 1.ä¿®æ”¹application.propertiesä¸­çš„ server.port å¦‚ï¼š ç¬¬ä¸€ä»½æœå‹™ç‚º server.port=8761 tx.manager.netty.port=9998; ç¬¬äºŒä»½æœå‹™ç‚ºï¼šserver.port=8762 tx.manager.netty.port=9999; 2. ä¿®æ”¹bootstrap.ymlä¸­çš„eureka:client:serviceUrl:defaultZone:http://localhost:8761/eureka/,http://localhost:8762/eureka/ å†ä¾æ¬¡å•Ÿå‹•</li></ul><p>æ¥­å‹™æ–¹é…ç½®è©³è§£</p><pre> @TxTransaction è©²è¨»è§£ç‚ºåˆ†ä½ˆå¼äº‹å‹™çš„åˆ‡é¢ï¼ˆAOP pointï¼‰ï¼Œå¦‚æœæ¥­å‹™æ–¹çš„serviceæœå‹™éœ€è¦åƒèˆ‡åˆ†ä½ˆå¼äº‹å‹™ï¼Œå‰‡éœ€è¦åŠ ä¸Šæ­¤è¨»è§£</pre><p>applicationContext.xml è©³è§£ï¼š</p><pre> &lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦é–‹å•ŸAOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æƒæåˆ†ä½ˆå¼äº‹å‹™çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å•Ÿå‹•é¡å±¬æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;TxTransactionBootstrap è©³è§£ï¼ˆå…·é«”åƒè¦‹com.raincat.core.config.TxConfigï¼‰ï¼š &lt;!--é€™è£¡é…ç½®çš„TxManager httpè«‹æ±‚çš„IP:PORT (å¦‚æœTxManageræœ‰æ”¹å‹•ï¼Œé€™è£¡è¦è·Ÿè‘—æ”¹å‹•)--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;!-- èˆ‡txManageré€šä¿¡çš„åºåˆ—åŒ–æ–¹å¼ï¼Œspiæ“´å±•æ”¯æŒ kroyï¼Œhessian protostuff æ¨è–¦ä½¿ç”¨kroy--&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;!-- ç·šç¨‹æ± ä¸­çš„éšŠåˆ—é¡å‹ spiæ“´å±•æ”¯æŒ Linked Array SynchronousQueue--&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;!--ç·šç¨‹æ± ä¸­çš„æ‹’çµ•ç­–ç•¥ spiæ“´å±•æ”¯æŒ Abort Blocking CallerRuns Discarded Rejected--&gt; &lt;property name="rejectPolicy" value="Abort"/&gt; &lt;!--é–‹å•Ÿæœ¬åœ°è£œå„Ÿï¼ˆé»˜èªé–‹å•Ÿï¼‰--&gt; &lt;property name="compensation" value="true"/&gt;  &lt;!--æœ¬åœ°æ•¸æ“šåºåˆ—åŒ–æ–¹å¼ spiæ“´å±•æ”¯æŒ java kroyï¼Œhessian protostuff æ¨è–¦ä½¿ç”¨kroy--&gt; &lt;property name="serializer" value="kryo"/&gt;</pre><p>æœ¬åœ°æ•¸æ“šä¿å­˜é…ç½®èˆ‡è©³è§£(spiæ“´å±•æ”¯æŒdbï¼Œredisï¼Œzookeeperï¼Œmongodbï¼Œfile),è©³æƒ…é…ç½®è«‹åƒç…§sampleå·¥ç¨‹:</p><ol><li>æœ¬åœ°æ•¸æ“šå­˜å„²ç‚ºæ•¸æ“šåº«ï¼ˆæ•¸æ“šåº«æ”¯æŒmysqlï¼Œoracle ï¼ŒsqlServerï¼‰ï¼Œç•¶æ¥­å‹™æ¨¡å¡Šç‚ºé›†ç¾¤æ™‚ï¼Œæ¨è–¦ä½¿ç”¨ æœƒè‡ªå‹•å‰µå»ºè¡¨ï¼Œè¡¨åç¨±ç‚º tx_transaction_æ¨¡å¡Šåç¨±ï¼ˆapplicationNameï¼‰,æ¯å€‹æ¨¡å¡Šé…ç½®æˆä¸€æ¨£çš„è£œå„Ÿæ–¹å¼ï¼Œå¦‚æœæ˜¯ç”¨dbé€²è¡Œå­˜å„²ï¼Œè«‹ä½¿ç”¨åŒä¸€å€‹åº«ä¾†å­˜å„²ã€‚</li></ol><pre> &lt;!--é…ç½®è£œå„Ÿé¡å‹ç‚ºdb--&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;!--æ•¸æ“šåº«url--&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;!--æ•¸æ“šåº«é©…å‹•åç¨± --&gt;  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="1234567"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•¸æ“šå­˜å„²ç‚ºredisï¼Œç•¶æ¥­å‹™æ¨¡å¡Šç‚ºé›†ç¾¤æ™‚ï¼Œæ¨è–¦ä½¿ç”¨ã€‚ï¼ˆæ›´å¤šé…ç½®è«‹åƒè€ƒ com.happylifeplat.transaction.core.config.TxRedisConfigï¼‰</li></ol><pre> &lt;!--é…ç½®è£œå„Ÿé¡å‹ç‚ºreids--&gt; &lt;property name="compensationCacheType" value="redis"/&gt; &lt;property name="txRedisConfig"&gt; &lt;bean class="com.raincat.common.config.TxRedisConfig"&gt; &lt;!--redis host--&gt; &lt;property name="hostName" value="192.168.1.78"/&gt; &lt;!--redis port--&gt; &lt;property name="port" value="6379"/&gt; &lt;!--redis å¯†ç¢¼ ï¼ˆæœ‰å¯†ç¢¼å°±é…ç½®ï¼Œç„¡å¯†ç¢¼å‰‡ä¸éœ€è¦é…ç½®ï¼‰--&gt; &lt;property name="password" value=""/&gt;  &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•¸æ“šå­˜å„²ç‚ºzookeeperï¼Œç•¶æ¥­å‹™æ¨¡å¡Šç‚ºé›†ç¾¤æ™‚ï¼Œæ¨è–¦ä½¿ç”¨</li></ol><pre> &lt;!--é…ç½®è£œå„Ÿé¡å‹ç‚ºzookeeper--&gt; &lt;property name="compensationCacheType" value="zookeeper"/&gt; &lt;property name="txZookeeperConfig"&gt; &lt;bean class="com.raincat.common.config.TxZookeeperConfig"&gt; &lt;!--zookeeper hostï¼šport--&gt; &lt;property name="host" value="192.168.1.66:2181"/&gt; &lt;!--zookeeper sessionéæœŸæ™‚é–“--&gt; &lt;property name="sessionTimeOut" value="2000"/&gt; &lt;!--zookeeper æ ¹ç¯€é»è·¯å¾‘--&gt; &lt;property name="rootPath" value="/tx"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•¸æ“šå­˜å„²ç‚ºmongodbï¼Œç•¶æ¥­å‹™æ¨¡å¡Šç‚ºå–®ç¯€é»æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ã€‚æœƒè‡ªå‹•å‰µå»ºé›†åˆï¼Œé›†åˆåç¨±ç‚º tx_transaction_æ¨¡å¡Šåç¨±ï¼ˆapplicationNameï¼‰ é€™è£¡mongdbé€£æ¥æ–¹å¼æ¡ç”¨3.4.0ç‰ˆæœ¬æ¨è–¦ä½¿ç”¨çš„Sha1,ä¸æ˜¯CRæ¨¡å¼ï¼ŒåŒæ™‚mongdbæ‡‰è©²é–‹å•Ÿæ¬Šé™èªè­‰ï¼Œä½¿ç”¨è€…éœ€è¦æ³¨æ„</li></ol><pre> &lt;!--é…ç½®è£œå„Ÿé¡å‹ç‚ºmongodb--&gt; &lt;property name="compensationCacheType" value="mongodb"/&gt; &lt;property name="txMongoConfig"&gt; &lt;bean class="com.raincat.common.config.TxMongoConfig"&gt; &lt;!--mongodb url--&gt; &lt;property name="mongoDbUrl" value="192.168.1.78:27017"/&gt; &lt;!--mongodb æ•¸æ“šåº«--&gt; &lt;property name="mongoDbName" value="happylife"/&gt; &lt;!--mongodb ç”¨æˆ¶å--&gt; &lt;property name="mongoUserName" value="xiaoyu"/&gt; &lt;!--mongodb å¯†ç¢¼--&gt; &lt;property name="mongoUserPwd" value="123456"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><ol><li>æœ¬åœ°æ•¸æ“šå­˜å„²ç‚ºfileï¼Œç•¶æ¥­å‹™æ¨¡å¡Šç‚ºå–®ç¯€é»æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ã€‚å‰µå»ºçš„æ–‡ä»¶åç¨±TX_ + prefixé…ç½® + æ¨¡å¡Šåç¨±</li></ol><pre> &lt;!--é…ç½®è£œå„Ÿé¡å‹ç‚ºfile--&gt; &lt;property name="compensationCacheType" value="file"/&gt; &lt;property name="txFileConfig"&gt; &lt;bean class="com.raincat.common.config.TxFileConfig"&gt; &lt;!--æŒ‡å®šæ–‡ä»¶è·¯å¾‘ï¼ˆå¯å¡«å¯ä¸å¡«ï¼Œä¸å¡«æ™‚å€™ï¼Œé»˜èªå°±æ˜¯ç•¶å‰é …ç›®æ‰€åœ¨çš„è·¯å¾‘ï¼‰--&gt; &lt;property name="path" value=""/&gt; &lt;!--æŒ‡å®šæ–‡ä»¶å‰ç¶´ï¼Œç”Ÿæˆæ–‡ä»¶åç¨±--&gt; &lt;property name="prefix" value="consume"/&gt; &lt;/bean&gt; &lt;/property&gt;</pre><h1><strong>dubboç”¨æˆ¶æŒ‡å—</strong></h1><p>å°å‡º</p><p>dubboç”¨æˆ¶æŒ‡å—(jaråŒ…çš„ç‰ˆæœ¬å•é¡Œå¯ä»¥è‡ªå·±gitæºä»£ç¢¼ï¼Œç„¶å¾Œç·¨è­¯ä¸Šå‚³åˆ°è‡ªå·±å…¬å¸çš„ç§æœ)</p><ul><li>é…ç½®ä¸¦ä¸”å•Ÿå‹•txManager,åœ¨aoolication.propertiesä¿®æ”¹ä½ çš„æœå‹™ç«¯å£ï¼Œredisé…ç½®ï¼Œå…·é«”å¯ä»¥åƒè€ƒé…ç½®è©³è§£</li><li>åœ¨ä½ çš„dubboæœå‹™ç«¯æ·»åŠ jaråŒ…ï¼Œä¸¦åœ¨éœ€è¦åƒèˆ‡åˆ†ä½ˆå¼äº‹å‹™çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionè¨»è§£</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-dubbo&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>é…ç½®applicationContext.xml,å¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœ‰å…¶ä»–å•é¡Œå¯ä»¥åƒè€ƒé…ç½®è©³è§£</li></ul><pre>&lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦é–‹å•ŸAOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æƒæåˆ†ä½ˆå¼äº‹å‹™çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å•Ÿå‹•é¡å±¬æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;!--é€™è£¡çš„urlæ˜¯txMangagerçš„ip+ç«¯å£--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;</pre><ul><li>åœ¨dubboçš„æ¶ˆè²»æ–¹ï¼Œä¹Ÿæ˜¯å¦‚ä¸Šé…ç½®ï¼Œé…ç½®å¥½ä»¥å¾Œï¼Œå•Ÿå‹•é …ç›®.</li></ul><p>å¿«é€Ÿé«”æª¢ï¼Œé‹è¡Œdubbo-sampleï¼ˆ ä½¿ç”¨è€…JDKå¿…é ˆç‚º1.8ï¼‰</p><p>æ­¥é©Ÿä¸€ï¼š</p><p>é…ç½®txManaager, ä¿®æ”¹application.propertiesä¸­ä½ è‡ªå·±çš„redisé…ç½®</p><p>å•Ÿå‹•TxManagerApplication</p><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ä¿®æ”¹æœå‹™ç«¯å£ï¼Œå‰‡æ‡‰è©²ä¿è­‰èˆ‡eureka:client:serviceUrl:defaultZoneä¸­çš„ç«¯å£ä¸€è‡´</p><p>æ­¥é©ŸäºŒï¼š</p><ol><li>å¼•å…¥ä¾è³´åŒ…ï¼ˆsampleå·²ç¶“å¼•å…¥ï¼‰</li></ol><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-dubbo&lt;/artifactId&gt; &lt;version&gt;${you.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ol><li>åŸ·è¡Œ raincat-dubbo-sample å·¥ç¨‹ sqlæ–‡ä»¶ dubbo-sample.sql</li><li>åœ¨æ¯å€‹å·¥ç¨‹ä¸‹çš„application.yml ä¸­é…ç½®æ‚¨çš„æ•¸æ“šåº«é€£æ¥(åªéœ€è¦æ”¹ipå’Œç«¯å£)</li><li>åœ¨å·¥ç¨‹ä¸‹çš„spring-dubbo.xml ä¸­é…ç½®æ‚¨çš„zookeeperè¨»å†Šä¸­å¿ƒ</li><li>åœ¨æ¯å€‹å·¥ç¨‹ä¸‹ applicationContext.xmlä¸­çš„TxDbConfig é…ç½®æ‚¨çš„è£œå„Ÿæ•¸æ“šåº«é€£æ¥ï¼Œæä¾›å–®ç¨çš„åº«ä¾†å­˜å„²ã€‚</li><li>åœ¨éœ€è¦åšåˆ†ä½ˆå¼äº‹å‹™çš„æ¥å£ä¸ŠåŠ ä¸Šè¨»è§£ @TxTransaction ï¼ˆsampleå·²ç¶“åŠ ä¸Šï¼‰</li><li>ä¾æ¬¡å•Ÿå‹•orderæ¨¡å¡Šï¼Œstock æ¨¡å¡Š ,consumeæ¨¡å¡Š</li><li>è¨ªå•http://localhost:8888/swagger-ui.html é€²è¡Œæ¸¬è©¦é«”é©—</li></ol><h1><strong>springcloudç”¨æˆ¶æŒ‡å—</strong></h1><p>å°å‡º</p><p>springcloudç”¨æˆ¶æŒ‡å—(jaråŒ…çš„ç‰ˆæœ¬å•é¡Œå¯ä»¥è‡ªå·±gitæºä»£ç¢¼ï¼Œç„¶å¾Œç·¨è­¯ä¸Šå‚³åˆ°è‡ªå·±å…¬å¸çš„ç§æœ)</p><ul><li>é…ç½®ä¸¦ä¸”å•Ÿå‹•txManager,åœ¨aoolication.propertiesä¿®æ”¹ä½ çš„æœå‹™ç«¯å£ï¼Œredisé…ç½®ï¼Œå…·é«”å¯ä»¥åƒè€ƒé…ç½®è©³è§£</li><li>åœ¨ä½ çš„springcloudæœå‹™ç«¯æ·»åŠ jaråŒ…ï¼Œä¸¦åœ¨éœ€è¦åƒèˆ‡åˆ†ä½ˆå¼äº‹å‹™çš„æ–¹æ³•ä¸Šæ·»åŠ  @TxTransactionè¨»è§£</li></ul><pre>&lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-springcloud&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt;&lt;/dependency&gt;</pre><ul><li>é…ç½®applicationContext.xml,å¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœ‰å…¶ä»–å•é¡Œå¯ä»¥åƒè€ƒé…ç½®è©³è§£</li></ul><pre>&lt;!-- Aspect åˆ‡é¢é…ç½®ï¼Œæ˜¯å¦é–‹å•ŸAOPåˆ‡é¢--&gt; &lt;aop:aspectj-autoproxy expose-proxy="true"/&gt; &lt;!--æƒæåˆ†ä½ˆå¼äº‹å‹™çš„åŒ…--&gt; &lt;context:component-scan base-package="com.raincat.*"/&gt; &lt;!--å•Ÿå‹•é¡å±¬æ€§é…ç½®--&gt; &lt;bean id="txTransactionBootstrap" class="com.raincat.core.bootstrap.TxTransactionBootstrap"&gt; &lt;!--é€™è£¡çš„urlæ˜¯txMangagerçš„ip+ç«¯å£--&gt; &lt;property name="txManagerUrl" value="http://192.168.1.66:8761"/&gt; &lt;property name="serializer" value="kryo"/&gt; &lt;property name="nettySerializer" value="kryo"/&gt; &lt;property name="blockingQueueType" value="Linked"/&gt; &lt;property name="compensation" value="true"/&gt; &lt;property name="compensationCacheType" value="db"/&gt; &lt;property name="txDbConfig"&gt; &lt;bean class="com.raincat.common.config.TxDbConfig"&gt; &lt;property name="url" value="jdbc:mysql://192.168.1.78:3306/order?useUnicode=true&amp;characterEncoding=utf8"/&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="password" value="password"/&gt; &lt;property name="username" value="xiaoyu"/&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt;</pre><ul><li>åœ¨springcloudçš„æ¶ˆè²»æ–¹ï¼Œä¹Ÿæ˜¯å¦‚ä¸Šé…ç½®ï¼Œé…ç½®å¥½ä»¥å¾Œï¼Œå•Ÿå‹•é …ç›®.</li></ul><p>å¿«é€Ÿé«”æª¢ï¼Œé‹è¡Œspringcloud-sampleï¼ˆ ä½¿ç”¨è€…JDKå¿…é ˆç‚º1.8ï¼‰</p><p>æ­¥é©Ÿä¸€ï¼š</p><pre>é…ç½®txManaager, ä¿®æ”¹application.propertiesä¸­ä½ è‡ªå·±çš„redisé…ç½® å•Ÿå‹•TxManagerApplication</pre><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ä¿®æ”¹æœå‹™ç«¯å£ï¼Œå‰‡æ‡‰è©²ä¿è­‰èˆ‡eureka:client:serviceUrl:defaultZoneä¸­çš„ç«¯å£ä¸€è‡´</p><p>æ­¥é©ŸäºŒï¼š</p><ul><li>å¼•å…¥ä¾è³´åŒ…ï¼ˆsampleå·²ç¶“å¼•å…¥ï¼‰</li></ul><pre> &lt;dependency&gt; &lt;groupId&gt;com.raincat&lt;/groupId&gt; &lt;artifactId&gt;raincat-springcloud&lt;/artifactId&gt; &lt;version&gt;${your.version}&lt;/version&gt; &lt;/dependency&gt;</pre><ul><li>åŸ·è¡Œ raincat-springcloud-sample å·¥ç¨‹ sqlæ–‡ä»¶ springcloud-sample.sql</li><li>åœ¨æ¯å€‹å·¥ç¨‹ä¸‹ application.yml ä¸­é…ç½®æ‚¨çš„æ•¸æ“šåº«é€£æ¥(åªéœ€è¦æ”¹ipå’Œç«¯å£)</li><li>åœ¨æ¯å€‹å·¥ç¨‹ä¸‹ applicationContext.xmlä¸­çš„TxDbConfig é…ç½®æ‚¨çš„è£œå„Ÿæ•¸æ“šåº«é€£æ¥ï¼Œæä¾›å–®ç¨çš„æ•¸æ“šåº«ä¾†å­˜å„²ã€‚</li><li>åœ¨éœ€è¦åšåˆ†ä½ˆå¼äº‹å‹™çš„æ¥å£ä¸ŠåŠ ä¸Šè¨»è§£ @TxTransaction ï¼ˆsampleå·²ç¶“åŠ ä¸Šï¼‰</li><li>ä¾æ¬¡å•Ÿå‹•AliPayApplicationï¼ŒWechatApplication ,PayApplication</li><li>è¨ªå•http://localhost:8881/pay-service/swagger-ui.html é€²è¡Œé«”é©—æ¸¬è©¦</li></ul><h1><strong>å•Ÿå‹•äº‹å‹™ç®¡ç†å¾Œè‡ºï¼ˆadminï¼‰</strong></h1><p>å°å‡º</p><p>raincat-admin å•Ÿå‹•æ•™ç¨‹</p><p>å•Ÿå‹•å‰æï¼šåˆ†ä½ˆå¼äº‹å‹™é …ç›®å·²ç¶“éƒ¨ç½²ä¸¦ä¸”é‹è¡Œèµ·ä¾†ï¼Œç”¨æˆ¶æ ¹æ“šè‡ªå·±çš„RPCæ¡†æ¶é€²è¡Œä½¿ç”¨ dubbo ç”¨æˆ¶ springcloud ç”¨æˆ¶</p><ul><li>é¦–å…ˆç”¨æˆ¶ä½¿ç”¨çš„JDKå¿…é ˆæ˜¯1.8+ æœ¬åœ°å®‰è£äº†git ,maven ï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤</li></ul><pre>git clone https://github.com/yu199195/Raincat.gitmaven clean install</pre><ul><li>ä½¿ç”¨ä½ çš„é–‹ç™¼å·¥å…·æ‰“é–‹é …ç›®ï¼Œæ¯”å¦‚idea Eclipse</li></ul><p>æ­¥é©Ÿä¸€ï¼š é…ç½®ä¸¦ä¸”å•Ÿå‹•transaction-admin</p><ul><li>åœ¨é …ç›®ä¸­çš„application.propertiesæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹æ‚¨çš„æœå‹™ç«¯å£ï¼Œredisé…ç½®ç­‰é…ç½®:</li></ul><pre>#adminé …ç›®çš„tomcatç«¯å£server.port=8888#adminé …ç›®çš„ä¸Šä¸‹æ–‡server.context-path=/adminserver.address=0.0.0.0#adminé …ç›®çš„æ‡‰ç”¨åç¨±spring.application.name=tx-transaction-admin# adminé …ç›®æ¿€æ´»çš„é¡å‹ï¼Œæ”¯æŒdbï¼Œfileï¼Œmongoï¼Œzookeeperï¼Œredis ä¸‹æ–‡æœƒç¹¼çºŒè¬›è§£spring.profiles.active=db# txManager redis é…ç½®#é›†ç¾¤é…ç½®#tx.redis.cluster=true#tx.redis.cluster.nodes=127.0.0.1:70001;127.0.1:7002#tx.redis.cluster.redirects=20#å–®æ©Ÿé…ç½®tx.redis.cluster=falsetx.redis.hostName=192.168.1.68#redisä¸»æ©Ÿç«¯å£tx.redis.port=6379#tx.redis.password=happylifeplat01# adminç®¡ç†å¾Œè‡ºçš„ç”¨æˆ¶åï¼Œç”¨æˆ¶å¯ä»¥è‡ªå·±æ›´æ”¹tx.admin.userName=admin# adminç®¡ç†å¾Œè‡ºçš„å¯†ç¢¼ï¼Œç”¨æˆ¶å¯ä»¥è‡ªå·±æ›´æ”¹tx.admin.password=admin#æ¡ç”¨äºŒéšæ®µæäº¤é …ç›®çš„æ‡‰ç”¨åç¨±é›†åˆï¼Œé€™å€‹å¿…é ˆè¦å¡«å¯«recover.application.list=alipay-service,wechat-service,pay-service#äº‹å‹™è£œå„Ÿæœ€å¤§é‡è©¦æ¬¡æ•¸recover.retry.max=10#äº‹å‹™è£œå„Ÿçš„åºåˆ—æ–¹å¼recover.serializer.support=kryo#dbSuport æ¡ç”¨dbé€²è¡Œçš„è£œå„Ÿæ–¹å¼çš„é…ç½®recover.db.driver=com.mysql.jdbc.Driverrecover.db.url=jdbc:mysql://192.168.1.68:3306/tx?useUnicode=true&amp;characterEncoding=utf8recover.db.username=xiaoyurecover.db.password=Wgj@555888#redis æ¡ç”¨redisé€²è¡Œè£œå„Ÿæ–¹å¼çš„é…ç½®recover.redis.cluster=falserecover.redis.hostName=192.168.1.68recover.redis.port=6379recover.redis.password=#recover.redis.clusterUrl=127.0.0.1:70001;127.0.1:7002#mongo æ¡ç”¨mongo é€²è¡Œè£œå„Ÿæ–¹å¼çš„é…ç½®recover.mongo.url=192.168.1.68:27017recover.mongo.dbName=happyliferecover.mongo.userName=xiaoyurecover.mongo.password=123456#zookeeper æ¡ç”¨zookeeperé€²è¡Œè£œå„Ÿçš„æ–¹å¼é…ç½®recover.zookeeper.host=192.168.1.132:2181recover.zookeeper.sessionTimeOut=200000</pre><p>é…ç½®è§£é‡‹</p><ul><li>é—œæ–¼txManagerçš„redisé…ç½®:å…¶å¯¦å°±æ˜¯åœ¨txManageré …ç›®ä¸­çš„redisé…ç½®ï¼Œåœ¨é€™è£¡éœ€è¦é…ç½®æˆä¸€æ¨£çš„ï¼› æ³¨æ„ï¼Œå¦‚æœä½ çš„redisæ˜¯é›†ç¾¤æ¨¡å¼è«‹åƒè€ƒé›†ç¾¤é…ç½®ï¼Œä¸¦è¨»é‡‹æ‰å–®æ©Ÿredisé…ç½®ï¼ŒåŒç†rediså–®æ©Ÿæ¨¡å¼ä¹Ÿä¸€æ¨£ã€‚</li><li>é—œæ–¼ recover.application.listé…ç½®ï¼šé€™è£¡éœ€è¦é…ç½®æ¯å€‹åƒèˆ‡äºŒéšæ®µåˆ†ä½ˆå¼äº‹å‹™çš„ç³»çµ±æ¨¡å¡Šçš„applicationNameï¼Œå¤šå€‹æ¨¡å¡Šç”¨ "," åˆ†éš”ï¼Œé€™è£¡å¿…é ˆè¦é…ç½®ã€‚</li><li>é—œæ–¼ recover.serializer.support é…ç½®ï¼Œé€™è£¡æ˜¯æŒ‡åƒèˆ‡äºŒéšæ®µåˆ†ä½ˆå¼äº‹å‹™ç³»çµ±ä¸­ï¼Œé…ç½®äº‹å‹™è£œå„Ÿä¿¡æ¯çš„åºåˆ—åŒ–æ–¹å¼ã€‚</li><li>é—œæ–¼ spring.profiles.active é…ç½® adminé …ç›®æ¿€æ´»çš„é¡å‹ï¼Œæ”¯æŒdbï¼Œfileï¼Œmongoï¼Œzookeeperï¼Œ é€™è£¡æ˜¯æŒ‡åƒèˆ‡äºŒéšæ®µåˆ†ä½ˆå¼äº‹å‹™ç³»çµ±ä¸­ï¼Œé…ç½®äº‹å‹™è£œå„Ÿä¿¡æ¯å­˜å„²æ–¹å¼ï¼Œå¦‚æœæ‚¨ç”¨dbå­˜å„²ï¼Œé‚£é€™è£¡å°±é…ç½®æˆdbï¼ŒåŒæ™‚é…ç½®å¥½ recover.dbç­‰ä¿¡æ¯ã€‚ å…¶ä»–æ–¹å¼åŒç†ã€‚ æ³¨æ„ï¼Œæ¯å€‹æ¨¡å¡Šè«‹ä½¿ç”¨ç›¸åŒçš„åºåˆ—åŒ–æ–¹å¼å’Œå­˜å„²é¡å‹</li><li>é—œæ–¼ tx.admin ç­‰é…ç½®ã€‚ é€™è£¡å°±æ˜¯ç®¡ç†å¾Œè‡ºç™»éŒ„çš„ç”¨æˆ¶èˆ‡å¯†ç¢¼ï¼Œç”¨æˆ¶å¯ä»¥é€²è¡Œè‡ªå®šç¾©æ›´æ”¹ã€‚</li></ul><p>æ­¥é©ŸäºŒï¼šä¿®æ”¹ index.html</p><pre>&lt;!--href ä¿®æ”¹æˆä½ çš„ip ç«¯å£--&gt;&lt;a id="serverIpAddress" style="display: none" href="http://192.168.1.132:8888/admin"&gt;</pre><p>æ­¥é©Ÿä¸‰: é‹è¡Œ AdminApplication ä¸­çš„mainæ–¹æ³•ã€‚</p><p>æ­¥é©Ÿå››:åœ¨ç€è¦½å™¨è¨ªå• http://ip:prot/admin ,è¼¸å…¥ç”¨æˆ¶åï¼Œå¯†ç¢¼ç™»éŒ„ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>éšæ®µ</a></li><li><a>äº‹å‹™</a></li><li><a>ä¸­é–“</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/99094aa6.html alt=åˆåŒæ¬¾æ”¶ä¸åˆ°ï¼Ÿè­¦æƒ•ä¸­é–“å…¬å¸ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/69613a6e-4e57-4e06-937f-15334b7d453c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/99094aa6.html title=åˆåŒæ¬¾æ”¶ä¸åˆ°ï¼Ÿè­¦æƒ•ä¸­é–“å…¬å¸>åˆåŒæ¬¾æ”¶ä¸åˆ°ï¼Ÿè­¦æƒ•ä¸­é–“å…¬å¸</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html alt="MySQL äº‹å‹™è™•ç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html title="MySQL äº‹å‹™è™•ç†">MySQL äº‹å‹™è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8a538d3c.html alt=MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/29d4c92c9c2344838eb72ef948cf08fa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8a538d3c.html title=MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£>MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3269d080.html alt=MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152203544367254a708f807 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3269d080.html title=MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç†>MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8293e598.html alt=MySQläº‹å‹™æœ€å…¨è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c61163c863114226b14bb3760da19e4d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8293e598.html title=MySQläº‹å‹™æœ€å…¨è©³è§£>MySQläº‹å‹™æœ€å…¨è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/011d2da0.html alt=MySqlä½µç™¼èˆ‡äº‹å‹™çš„è™•ç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/f13d8a1e-5e60-4b48-90bc-3c26e312a208 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/011d2da0.html title=MySqlä½µç™¼èˆ‡äº‹å‹™çš„è™•ç†>MySqlä½µç™¼èˆ‡äº‹å‹™çš„è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ab1dd0d.html alt=Mysqläº‹å‹™ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ab1dd0d.html title=Mysqläº‹å‹™>Mysqläº‹å‹™</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb944fe7.html alt=Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cb7ba6cbda8c44438d9d3d7c57bd25b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb944fe7.html title=Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™)>Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e9d6f488.html alt="SQL Serverä¸­çš„äº‹å‹™ï¼ˆé™„æœ‰å¯¦ä¾‹ï¼‰" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/21e047bd6e3c41fba0beac7ef3f1ce4e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e9d6f488.html title="SQL Serverä¸­çš„äº‹å‹™ï¼ˆé™„æœ‰å¯¦ä¾‹ï¼‰">SQL Serverä¸­çš„äº‹å‹™ï¼ˆé™„æœ‰å¯¦ä¾‹ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb071e7e.html alt="SQL äº‹å‹™æ©Ÿåˆ¶-transaction" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3231427d97bf4a04b148360fea032241 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb071e7e.html title="SQL äº‹å‹™æ©Ÿåˆ¶-transaction">SQL äº‹å‹™æ©Ÿåˆ¶-transaction</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html alt=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html title=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹>SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24b98634.html alt=SqlServerä½¿ç”¨äº‹å‹™æ³¨æ„äº‹é …ï¼Œé«˜ç´šç¨‹åºå“¡å¿…èƒŒ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24b98634.html title=SqlServerä½¿ç”¨äº‹å‹™æ³¨æ„äº‹é …ï¼Œé«˜ç´šç¨‹åºå“¡å¿…èƒŒ>SqlServerä½¿ç”¨äº‹å‹™æ³¨æ„äº‹é …ï¼Œé«˜ç´šç¨‹åºå“¡å¿…èƒŒ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/090306a0.html alt="[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a8c6dbd7c51741f5a76262e8e2c7a670 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/090306a0.html title="[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†">[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html alt="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html title="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†">ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1678b1c4.html alt=ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/433259b5-1936-4cee-ab74-70aef36536ee style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1678b1c4.html title=ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç†>ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç†</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>