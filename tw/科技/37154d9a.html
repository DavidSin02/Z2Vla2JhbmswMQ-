<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？ | 极客快訊</title><meta property="og:title" content="寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/dfic-imagehandler/eadb4752-5f6b-4a85-ac99-5c6fae2b5bbc"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/37154d9a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/37154d9a.html><meta property="article:published_time" content="2020-11-14T21:01:42+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:42+08:00"><meta name=Keywords content><meta name=description content="寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/37154d9a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><blockquote><p>接觸過不少號稱寫了10多年代碼的程序員，可經常還是會發現他們的代碼給人一種亂糟糟的感覺，那麼如何才能寫出讓同事感覺不那麼亂的代碼呢？</p></blockquote><div class=pgc-img><img alt=寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/dfic-imagehandler/eadb4752-5f6b-4a85-ac99-5c6fae2b5bbc><p class=pgc-img-caption></p></div><h1><strong>一、為什麼要寫這篇文章</strong></h1><p>在開篇之前先說明下為什麼要寫這篇文章？在Java的世界裡MVC軟件架構模式絕對是經典的存在（PS：MVC是一種軟件架構方式並不只有Java有），如果你是在最近十年前後進入Java的編程世界，那麼你會發現自己這些年似乎從來沒有逃離MVC架構模式的牢籠，只不過換著使用了不同的MVC框架，如早期的Struts1、Struts2以及現在幾乎一統江湖的Spring MVC（少數自行封裝MVC框架的公司除外）。</p><p>而隨著互聯網技術的發展，特別是Ajax等富客戶端技術的發展，前端技術逐步形成了一套體系，並且逐步從後端代碼（如JSP）中剝離出來，從而形成了現在普遍流行的前後端分離模式（這也是一段時間內為什麼前端工程師會出現大量需求的原因），而這也對傳統的MVC模式產生了一點小的改變，因為現在基於Java的後端服務中很少會有大量處理複雜界面邏輯的代碼出現，因此MVC中的V（View）這一層就逐步被各類前端技術所替代，如AngularJS、React等。</p><p>所以現在的Java服務端絕大部分情況下只是在處理M(Model)+C(Controller)的邏輯，而從概念上來看，好像Model代表的就是數據模型、而C則是一種控制層邏輯，所以很多人（甚至包括一些寫了很多年Java代碼的人）有時候都會被這個概念所迷惑而在Model和Controller層之間搖擺不定，在這裡我們需要明確MVC模式中的M不僅僅代表的是數據模型，而是包括了數據模型之內的所有業務邏輯相關的代碼，而C則是比較輕的，它被賦予只有處理輸入/輸出參數以及對該請求進行邏輯流程控制的職能，如果你的代碼中對Controller層有過重的邏輯代碼侵入，要知道這是不符合MVC架構規範的！</p><p>在MVC架構定義中，由於M代表了所有業務邏輯相關的代碼，所以M是要重點設計和規範的，其代碼的結構和規範直接決定了軟件的可維護性及質量，從本質上來說就是如何進行"代碼結構+軟件設計原則+設計模式"的組合運用。當然上面只是一句話，而其內涵則是一件非常考驗編程水平的事情。關於軟件設計原則+設計模式的內容非常豐富也需要時間+經驗的積累！而代碼結構則是可以通過一定規範進行約定，結合Spring MVC框架至少我們可以寫出層次結構儘可能一致的代碼！</p><h1><strong>二、應用分層怎麼搞？</strong></h1><p>事實上關於Java如何規範開發的問題，不同公司的規範略有不同，不過作為國內Java語言應用最為廣泛的公司——阿里巴巴發佈的《阿里巴巴Java開發手冊》中對應用的分層結構已經做了比較合理的劃分！這裡作者並不想標新立異，只是在此基礎上做更為詳細的解釋和說明從而讓使用Spring MVC框架的同學能夠更好地明確其分層的對應關係！</p><p><strong>分層結構</strong></p><p>以下分層結構基於Spring MVC框架，總體上與阿里巴巴開發手冊應用分層方式一致，分層結構示意圖如下：</p><div class=pgc-img><img alt=寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d3921fb8369c4fe3964d273b941b1949><p class=pgc-img-caption></p></div><p>在基於Spring MVC框架的開發中，Controller層作為服務的入口主要承擔接收和轉換由終端層或者其他服務發送的網絡請求，並將其轉化為Java數據對象，然後對數據對象進行參數合法性校驗（如字段長度、類型、數值的合法性等等）。之後通過在Controller依賴注入對應Service層服務接口，並進行業務邏輯層方法調用，如果業務邏輯並不複雜（是否複雜判斷標準可通過方法代碼行數、條件邏輯複雜度以及站在旁者角度看看是否便於維護等指標進行判斷）那麼可以直接操作數據庫持久層完成業務邏輯；而如果Service層方法寫著寫著發現非常的多，邏輯條件也比較多，並且每個條件所需要處理的代碼量超過一定的規模，那麼此時你就要考慮是否需要要對該方法進行優化了！</p><p>而關於優化的方式依據邏輯的複雜程度可以做不同等級的拆分，例如簡單點可以拆分一個私有方法處理該方法中的某一部分邏輯，從而減少主業務方法的代碼量。而如果該業務層方法後面對應的是一個龐大的邏輯，例如在交易支付系統中，Controller層定義了一個支付的入口服務，而進入Service層方法後根據不同的業務接入方、不同的支付方式及支付渠道，都需要進行大量不同邏輯的處理，那麼此時就需要考慮對這些不同場景的業務邏輯進行類級別的拆分，如通過工廠模式拆分不同的支付渠道處理類邏輯，而對於公共的處理邏輯則可以通過抽象類定義抽象方法進行抽象。例如私有方法拆分代碼示例：</p><pre>@Overridepublic SearchCouponNameBO searchCouponNameList(SearchCouponNameDTO searchCouponNameDTO) { SearchCouponNameBO searchCouponNameBO = SearchCouponNameBO.builder().total(0).build(); SearchResult searchResult; try { BoolQueryCondition boolQueryCondition = searchCouponNameListConditionBuild(searchCouponNameDTO); SearchBuilderConstructor searchBuilderConstructor = new SearchBuilderConstructor(boolQueryCondition); searchBuilderConstructor.addFieldSort("id", SortOrderEnum.DESC); searchBuilderConstructor.setFrom(searchCouponNameDTO.getOffset()); searchBuilderConstructor.setSize(searchCouponNameDTO.getLimit()); searchResult = salesCouponEsMapper.selectCouponNameByCondition(searchBuilderConstructor); } catch (Exception e) { throw new SalesCouponNameException(SalesCouponNameErrorCode.COUPON_NAME_ES_QUERY_ERROR.getCode(), SalesCouponNameErrorCode.COUPON_NAME_ES_QUERY_ERROR.getMessage(), searchCouponNameDTO); } if (searchResult != null &amp;&amp; searchResult.getHits().getHits().length &gt; 0) { List&lt;Integer&gt; idList = getIdListFromEsSearchResult(searchResult); List&lt;SalesCouponNamePO&gt; salesCouponNamePOList = salesCouponNameMapper.selectByIdList(idList); List&lt;SalesCouponNameBO&gt; couponNameBOList = SalesCouponNameConvert.INSTANCE .convertCouponNameBOList(salesCouponNamePOList); searchCouponNameBO.setList(couponNameBOList); searchCouponNameBO.setTotal((int) searchResult.getTotalHits()); } return searchCouponNameBO;}</pre><p>在該Service入口方法中，需要根據從ES查詢的分頁ID去真實的MySQL中進行數據獲取（ES數據存儲不全，只是為了進行優化性能將分頁邏輯放入ES），而在處理ES數據時，需要從ES數據結果集中抽象ID列表，對於這部分邏輯出於代碼量的考慮，這裡我們抽象一個Service層私有方法，如：</p><pre>private List&lt;Integer&gt; getIdListFromEsSearchResult(SearchResult searchResult) { SearchHit[] searchHits = searchResult.getHits().getHits(); List&lt;Integer&gt; idList = Arrays.asList(searchHits).stream().map(SearchHit::getSourceAsMap) .map(o -&gt; Integer.parseInt(String.valueOf(o.get("id")))) .collect(Collectors.toList()); return idList;}</pre><p>以上代碼示例，本質上是一種最簡單的方法抽象（別的語言叫函數），如果在代碼量略大，但是邏輯本身複雜度還不是特別高的情況下，這種方式是最常用的！也是在你不知道怎麼拆分，讓代碼不那麼難以維護的一種非常有效的手段。</p><p>而工廠+責任鏈等也是業務層拆分常用的手段，此時需要基於Service層業務入口方法進行代碼結構的二次拆分，在分層結構上這部分介於Service層和Dao層之間的代碼稱之為通用業務處理層（Manager）。關於這部分由於可以發揮空間非常大，很難有一套標準的答案，但作為一名優秀的程序設計者要時刻有抽象的思維，不管拆分得是否足夠合理，至少要讓你的代碼不至於過於臃腫！這裡我們將Service層拆分層次定義為以下三個等級：</p><ul><li><strong>等級1：私有方法拆分；</strong></li><li><strong>等級2：工廠+責任鏈運用（有效的類的拆分）；</strong></li><li><strong>等級3：高級設計模式（優雅的類的拆分）；</strong></li></ul><p><strong>分層領域模型約定</strong></p><p>聊完分層結構接下來我們說一下分層領域數據模型的約定，注意這裡的分層領域並不是指“DDD（領域驅動設計）模式”，而是對以上分層結構中各層之間交互數據對象的定義約定。在上述分層結構圖中已經標識了DTO、BO、PO的使用範圍（本規範只約定三種領域對象，事實上已經足夠，並不需要搞的太複雜）。具體如下：</p><div class=pgc-img><img alt=寫了10年JAVA代碼，為何還是給人一種亂糟糟的感覺？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fd59dbf80de749f2811fcb477dde7b2c><p class=pgc-img-caption></p></div><p>在Controller層接收網絡請求數據後，由於Controller層並不需要處理額外的邏輯，所以大部分情況下直接將DTO對象傳送給Service層；而Service層如果邏輯不復雜只是需要根據DTO的數據進行數據庫操作，那麼此時根據需要將DTO轉換為PO進行操作，完成後由於大部分場景下Service的輸出參數與輸入DTO對象都存在差異，因此為了區分我們將Service層的輸出數據對象統一定義為BO。</p><p>而Service層拆分時對於Manager層方法的輸入/輸出對象則統一為BO，包括Manager層操作第三方數據接口的數據對象轉換也統一為BO。以上劃分並沒有什麼特別的強制約定，而過分人為的去揣摩其含義本質上也沒什麼意義，只是大家共同遵守一個約定，這樣代碼風格看起來會更加統一一點。</p><h1><strong>三、如何保持代碼的簡潔性</strong></h1><p>作為一名對代碼有追求的程序員，能少些一行代碼就絕對不要囉嗦，而Java豐富的開源生態體系也給了我們這種懶惰很多便利，所以在編程的過程中其實是有很多工具可以幫助節省代碼的。這裡給大家分別介紹三種方式：</p><p><strong>MapStruct</strong></p><p>在前面介紹的分層結構中，無論是DTO到BO，還是BO到PO亦或BO到BO，都會有很多的數據對象轉換的邏輯，傳統的方法是需要通過一堆Setter方法來完成的，而高級一點的lombok包提供的<strong>@Builder</strong>註解也是需要你寫一堆".build()"來完成數據的轉換，這樣的代碼寫到Service層中顯然很浪費很多代碼行，而MapStruct是一種更優雅的完成這件事的工具，使用方法如下：</p><p>項目pom.xml中引入依賴：</p><pre>&lt;!--MapStruct Java實體映射工具依賴--&gt;&lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-jdk8&lt;/artifactId&gt; &lt;version&gt;1.3.1.Final&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;1.3.1.Final&lt;/version&gt;&lt;/dependency&gt;</pre><p>也需要在pom.xml引入一下Maven插件：</p><pre>&lt;!--提供給MapStruct使用 --&gt;&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&lt;/plugin&gt;</pre><p>之後編寫數據對象映射轉換接口：</p><pre>package com.mafengwo.sales.sp.coupon.convert;import com.mafengwo.sales.sp.coupon.client.bo.SalesCouponChannelBO;import com.mafengwo.sales.sp.coupon.client.dto.SalesCouponChannelsDTO;import com.mafengwo.sales.sp.coupon.dao.model.SalesCouponChannelsPO;import java.util.List;import org.mapstruct.Mapper;import org.mapstruct.Mapping;import org.mapstruct.Mappings;import org.mapstruct.factory.Mappers;/** * @author qiaojiang */@Mapperpublic interface SalesCouponChannelsConvert { SalesCouponChannelsConvert INSTANCE = Mappers.getMapper(SalesCouponChannelsConvert.class); @Mappings({ @Mapping(target = "flag", expression = "java(java.lang.Integer.valueOf(\"0\"))"), @Mapping(target = "ctime", expression = "java(com.mafengwo.sales.sp.coupon.util.DateUtils.getCurrentTimestamp())"), @Mapping(target = "mtime", expression = "java(com.mafengwo.sales.sp.coupon.util.DateUtils.getCurrentTimestamp())") }) SalesCouponChannelsPO convertSalesCouponChannelsPO(SalesCouponChannelsDTO salesCouponChannelsDTO); @Mappings({}) List&lt;SalesCouponChannelBO&gt; convertCouponChannelBOList(List&lt;SalesCouponChannelsPO&gt; salesCouponChannelsPO);}</pre><p>以上方法的入參為源數據對象，而返回對象則為目標數據對象，如果兩個對象的字段名稱完成一致，那麼其實是不需要進行任何單獨映射的，直接 @Mappings({})即可；而如果映射對象之間字段名稱有差異則可以通過@Mappings({@Mapping(target = "ctime", source = "createTime")})進行指定映射。而在業務層方法具體操作時使用方法如下：</p><pre>//實體數據轉換SalesCouponChannelsPO salesCouponChannelsPO = SalesCouponChannelsConvert.INSTANCE .convertSalesCouponChannelsPO(salesCouponChannelsDTO);</pre><p>這樣對象數據之間的拷貝將變得非常容易，從某種層面上看無論代碼層次結構多麼繞，至少數據對象之間的拷貝將不再是一件麻煩的事！</p><p><strong>lambada表達式</strong></p><p>在Java8種提供了lambada表達式，在Java8中如果操作List相關數據結構，如果能夠使用lambada表達式也可以省一些代碼，例如：</p><pre>private List&lt;Integer&gt; getIdListFromEsSearchResult(SearchResult searchResult) { SearchHit[] searchHits = searchResult.getHits().getHits(); List&lt;Integer&gt; idList = Arrays.asList(searchHits).stream().map(SearchHit::getSourceAsMap) .map(o -&gt; Integer.parseInt(String.valueOf(o.get("id")))) .collect(Collectors.toList()); return idList;}</pre><p>有關lambada表達式更多的用法，大家有時間可以多看看相關語法知識，這裡就不再贅述！</p><p><strong>tk.mybatis</strong></p><p>在使用Mybatis框架作為數據庫開發框架時，相比較於Hibernate或其他JPA框架，Mybatis具有較強的對原生SQL的支持能力，因而會顯得比較靈活。但在大部分互聯網系統中，對數據庫的操作很多時候都是單表的操作，在這種情況下使用Mybatis也需要在Mapper代碼和映射.xml文件中編寫大量的SQL，而這些單表SQL本質上大同小異，完全可以通用化。</p><p>因此在Mybatis領域為了減少開發量很多項目會使用mybatis-generator插件生成一份完整的映射代碼，但是這樣的方式也會增加大量的無用代碼，看起來並不是那麼的簡潔。而tk.mybatis則是考慮到了這個問題，可以兼顧對單表操作的便捷性（不需要再寫額外的代碼）、多表聯合查詢的靈活性以及代碼的簡潔性。具體用法如下：</p><p>項目pom.xml文件引入相關依賴：</p><pre>&lt;!--Mybatis通用Mapper集成--&gt;&lt;dependency&gt; &lt;groupId&gt;tk.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mapper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.3&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;exclusion&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;tk.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mapper&lt;/artifactId&gt; &lt;version&gt;4.1.3&lt;/version&gt;&lt;/dependency&gt;</pre><p>主類@MapperScan註解換成tk.mybatis的：</p><pre>import org.springframework.boot.SpringApplication;import org.springframework.boot.actuate.autoconfigure.elasticsearch.ElasticSearchRestHealthIndicatorAutoConfiguration;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.boot.web.servlet.ServletComponentScan;import org.springframework.cloud.client.discovery.EnableDiscoveryClient;import org.springframework.transaction.annotation.EnableTransactionManagement;import org.springframework.web.servlet.config.annotation.EnableWebMvc;//不要使用Mybatis原生註解，用tk.mybatis的import tk.mybatis.spring.annotation.MapperScan;import java.util.Date;@SpringBootApplication(exclude = {ElasticSearchRestHealthIndicatorAutoConfiguration.class})@ServletComponentScan@EnableDiscoveryClient@EnableWebMvc@MonitorEnableAutoConfiguration@MapperScan("com.mafengwo.sales.sp.coupon.dao.mapper")@EnableTransactionManagementpublic class SpCouponApplication { public static void main(String[] args) { SpringApplication.run(SpCouponApplication.class, args); }}</pre><p>編寫映射接口，單表操作將不再需要額外定義操作方法及映射SQL代碼，而是可以直接用tk.mybatis提供的通用方法，代碼如下：</p><pre>import com.mafengwo.sales.sp.coupon.dao.model.CouponNameScopeRelationPO;import org.springframework.stereotype.Repository;import tk.mybatis.mapper.common.Mapper;@Repositorypublic interface CouponNameScopeRelationMapper extends Mapper&lt;CouponNameScopeRelationPO&gt; {}</pre><p>而在Mybatis SQL映射文件*.xml中單表也只需要定義簡單的字段映射即可，而不在需要定義通篇的SQL代碼了，如下：</p><pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;&lt;mapper namespace="com.mafengwo.sales.sp.coupon.dao.mapper.SalesCouponChannelsMapper"&gt; &lt;resultMap id="BaseResultMap" type="com.mafengwo.sales.sp.coupon.dao.model.SalesCouponChannelsPO"&gt; &lt;id column="ID" property="id" jdbcType="INTEGER"/&gt; &lt;result column="NAME" property="name" jdbcType="VARCHAR"/&gt; &lt;result column="DESC" property="desc" jdbcType="VARCHAR"/&gt; &lt;result column="ADMIN_UID" property="adminUid" jdbcType="INTEGER"/&gt; &lt;result column="FLAG" property="flag" jdbcType="INTEGER"/&gt; &lt;result column="CTIME" property="ctime" jdbcType="TIMESTAMP"/&gt; &lt;result column="MTIME" property="mtime" jdbcType="TIMESTAMP"/&gt; &lt;result column="SCENEID" property="sceneId" jdbcType="INTEGER"/&gt; &lt;/resultMap&gt;&lt;/mapper&gt;</pre><p>除以上工具外，在實際的開發過程中還有很多開源或通過自定義組件的方式能夠讓代碼寫的更簡潔，大家可以保持探索！</p><h1><strong>四、Java程序設計原則與設計模式</strong></h1><p>構建複雜的軟件系統只有遵循一定的設計原則併合適地運用相應地設計模式，這樣的代碼才不至於在複雜的邏輯中迷失方向。關於設計原則及設計模式的話題是一個需要時間打磨和反覆歷練的修行，因此這裡只是為大家簡單陳列，在Java程序設計時應該遵循的一些原則以及可用的設計原則，做到心中有劍！</p><p><strong>設計原則</strong></p><p>單一職責（一個蘿蔔一個坑）、里氏替換（繼承複用）、依賴倒置（面向接口編程）、接口隔離（高內聚、低耦合）、迪米特法則（降低類與類之間的耦合）、開閉原則（對擴展開發、對修改關閉）。</p><p><strong>設計模式</strong></p><p>在Java領域，大概有23種設計模式，它們分別是：</p><ul><li><strong>創建型模式</strong>：單例模式、抽象工廠模式、建造者模式、工廠模式、原型模式</li><li><strong>結構型模式</strong>：適配器模式、橋接模式、裝飾模式、組合模式、外觀模式、享元模式、代理模式</li><li><strong>行為型模式</strong>：模板方法模式、命令模式、迭代器模式、觀察者模式、中介者模式、備忘錄模式、解釋器模式、狀態模式、策略模式</li></ul><p>以上這些模式或多或少在我們日常的編程中都會見到或者聽過，但在平時能夠用到的卻並不多，很多原因在於目前Java領域的開發框架如Spring已經給我們做了很多的限定，而在大部分互聯網系統中，編程模式又很固定。在多數情況下，工廠模式的運用就能搞定大多數業務編程場景，因此很多模式只有在很多中間件系統等基礎軟件中被使用得比較多。通過羅列上述設計模式，並不是要大家為了設計而生硬的使用設計模式，而是要努力向著“<strong>心中有丘壑，眉目作山河</strong>”目標境界前進！只有這樣才能不至於日復一日的碼磚生涯中，迷失自我，失去方向！</p><h1><strong>後記</strong></h1><p>隨著時光的流逝，越來越多的程序員步入中年，寫了10多年代碼的人也越來越多，而行業的發展卻在走下坡路，種種因素讓越來越多的人感到焦慮！個人覺得作為一名程序員，我們的核心能力還在於代碼，因此在日復一日的碼磚生涯中不斷修煉自己的代碼能力才是關鍵！否則可能就會出現被年輕人鄙視了！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>10</a></li><li><a>JAVA</a></li><li><a>代碼</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/42f7cda3.html alt=寫了10年的代碼，收藏了這18個代碼生成框架！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/42f7cda3.html title=寫了10年的代碼，收藏了這18個代碼生成框架！>寫了10年的代碼，收藏了這18個代碼生成框架！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/602bcbcd.html alt="每天這樣陪玩 10 分鐘，勝過上萬元早教班" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RlIqLlfA7COpuB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/602bcbcd.html title="每天這樣陪玩 10 分鐘，勝過上萬元早教班">每天這樣陪玩 10 分鐘，勝過上萬元早教班</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html alt=手機收不到短信？這10種排查方法，看看你都會了沒？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/557c2fac09c941f69a7359acbaa810b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1017785d.html title=手機收不到短信？這10種排查方法，看看你都會了沒？>手機收不到短信？這10種排查方法，看看你都會了沒？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/831354a0.html alt=一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5bfee759920547be9fa569ef49842ad0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/831354a0.html title=一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法>一看就懂！10年老電工經驗總結：3個區分光纖是多模還是單模方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4a9d2887.html alt=10塊錢，可以撬動多大的槓桿？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8d6ace340ff04af9945e80694c8429cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4a9d2887.html title=10塊錢，可以撬動多大的槓桿？>10塊錢，可以撬動多大的槓桿？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e342e11c.html alt="2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Rk8ZSn39iz0Be8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e342e11c.html title="2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法">2019掌上生活10元風暴怎麼玩攻略 快速獲取小招喵方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/75414528.html alt=招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c737032a00314e3091e2d81d467d777f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/75414528.html title=招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨>招行掌上生活10元風暴續-10元購的膳魔師電飯煲到貨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html alt=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8716c57443b84bf39d12f7181c19e5d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html title=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣>推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65c5ac44.html alt=跟新型冠狀病毒有關的10個謠言，別被騙了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/8d29a0c1-76c9-462f-93a3-12ac1fb91bb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65c5ac44.html title=跟新型冠狀病毒有關的10個謠言，別被騙了>跟新型冠狀病毒有關的10個謠言，別被騙了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/256535bb.html alt="小米10又推'億級像素'，方向錯了為何還要越走越遠？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e25a6761fe874f28a49818dabfc7d87a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/256535bb.html title="小米10又推'億級像素'，方向錯了為何還要越走越遠？">小米10又推'億級像素'，方向錯了為何還要越走越遠？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4f8d6ade.html alt=耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152094458108473fb60ec01 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4f8d6ade.html title=耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景>耗時4年，奴役勞工10萬餘人，偽滿時期水豐、水滿水電站施工場景</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a90a489a.html alt=JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15310942260931dda577a75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a90a489a.html title=JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點>JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9cfcdd6f.html alt=《JAVA編程思想》5分鐘速成：第8章（多態） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/399a29d93fde48fca4bae44dffbced07 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9cfcdd6f.html title=《JAVA編程思想》5分鐘速成：第8章（多態）>《JAVA編程思想》5分鐘速成：第8章（多態）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f448e7cc.html alt=10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1541124052858d1740db0d4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f448e7cc.html title=10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽”>10月市區日照時數僅27.3小時創十年新低，這真的很“貴陽”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1bbb42bf.html alt=2020年10月7日，世界職業拳壇新鮮事兒 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0939c8b4612246ab8bd720d63240562e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1bbb42bf.html title=2020年10月7日，世界職業拳壇新鮮事兒>2020年10月7日，世界職業拳壇新鮮事兒</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>