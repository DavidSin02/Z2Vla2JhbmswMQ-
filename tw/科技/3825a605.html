<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>掌握Seaborn的三分之一：使用relplot進行統計繪圖 | 极客快訊</title><meta property="og:title" content="掌握Seaborn的三分之一：使用relplot進行統計繪圖 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/b47f7f64fde24f42afae5615d12eb0ff"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3825a605.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3825a605.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3825a605.html><meta property="article:published_time" content="2020-10-29T21:09:49+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:49+08:00"><meta name=Keywords content><meta name=description content="掌握Seaborn的三分之一：使用relplot進行統計繪圖"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/3825a605.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>掌握Seaborn的三分之一：使用relplot進行統計繪圖</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b47f7f64fde24f42afae5615d12eb0ff><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>介紹</h1><blockquote><p>本文的目標是讓你對使用Seaborn的relplot()函數繪製統計圖有一定的瞭解。</p></blockquote><p>當我開始學習數據可視化時，我第一次被介紹到Matplotlib。它是一個如此巨大的庫，你幾乎可以看到任何與數據相關的東西。正是這種廣闊的空間，使人們能夠以多種方式創造一個單一的圖表。</p><p>雖然它的靈活性對於經驗豐富的科學家來說是理想的，但作為一個初學者，要區分這些方法之間的代碼對我來說簡直是一場噩夢。作為一名程序員，我甚至考慮過使用Tableau的無代碼接口，這一點我深感羞愧。我想要一個易於使用的東西，同時，使我能夠創建那些其他人(在代碼中)正在製作的酷圖。</p><p>我在學生階段瞭解了Seaborn，最後找到了我的選擇。我對數據可視化的黃金法則理解是“如果你能在Seaborn做的話，就在Seaborn做”。它比其對應的Matplotlib提供了許多優勢。</p><p>首先，它非常容易使用。只需幾行代碼就可以創建複雜的繪圖，並且使用內置樣式仍然可以使其看起來很漂亮。其次，它與Pandas數據幀配合得非常好，這正是作為數據科學家所需要的。</p><p>最後但並非最不重要的是，它構建在Matplotlib本身之上。這意味著你將享受Mpl提供的大部分靈活性，同時仍將代碼語法保持在最低限度。</p><p>Seaborn將其所有API分為三類：繪製統計關係、可視化數據分佈和分類數據繪圖。Seaborn提供了三個高級函數，它們包含了它的大部分特徵，其中之一是relplot()。</p><p>relplot()可以可視化定量變量之間的任何統計關係。在本文中，我們將介紹這個函數的幾乎所有特性，包括如何創建子圖等等。</p><h1 class=pgc-h-arrow-right>概述</h1><ol start=1><li>簡介</li><li>安裝</li><li>帶有relplot()的散點圖 散點圖的點大小 散點圖的色調 散點圖樣式 散點圖的點透明度 散點圖中的子圖</li><li>線圖 多行線圖 線圖線條樣式 線條的點標記 線圖置信區間</li><li>結論</li></ol><p>獲取此GitHub repo上文章的notebook和示例數據：https://github.com/BexTuychiev/medium_stories/tree/master/learn_one_third_of_seaborn_relplot</p><h1 class=pgc-h-arrow-right>安裝</h1><pre><code># 加載必要的庫import pandas as pdimport matplotlib.pyplot as pltimport seaborn as snsimport numpy as np# 繪製漂亮的圖形，避免模糊的圖像%config InlineBackend.figure_format = 'retina'# 設置環境sns.set_context('notebook')# 忽略警告import warningswarnings.filterwarnings('ignore')# 啟用多個單元輸出from IPython.core.interactiveshell import InteractiveShellInteractiveShell.ast_node_interactivity = 'all'</code></pre><p>我們以sns的縮寫導入Seaborn。你可能一直在想，為什麼它不被縮寫為sb。好吧，看看這個：它的別名來自電視劇《The West Wing》中的一個虛構人物Samuel Norman Seaborn。這是一個開玩笑的首字母縮寫。</p><p>對於示例數據，我將使用Seaborn的一個內置數據集和一個我從Kaggle下載的數據集。你可以通過這個鏈接得到它:https://www.kaggle.com/dgawlik/nyse/download</p><pre><code># 加載示例數據cars = sns.load_dataset('mpg')stocks = pd.read_csv('data/prices-split-adjusted.csv',                     parse_dates=['date'],                     index_col=0)</code></pre><p>第一個數據集是關於汽車的數據，包括發動機、車型等。第二個數據集提供了500多家公司的紐約股票價格信息。</p><h1 class=pgc-h-arrow-right>基礎探索</h1><pre><code>cars.head()cars.info()cars.describe()</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d0748b97386c4a9db09bb917d9926efb><p class=pgc-img-caption></p></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;RangeIndex: 398 entries, 0 to 397Data columns (total 9 columns): #   Column        Non-Null Count  Dtype  ---  ------        --------------  -----   0   mpg           398 non-null    float64 1   cylinders     398 non-null    int64   2   displacement  398 non-null    float64 3   horsepower    392 non-null    float64 4   weight        398 non-null    int64   5   acceleration  398 non-null    float64 6   model_year    398 non-null    int64   7   origin        398 non-null    object  8   name          398 non-null    object dtypes: float64(4), int64(3), object(2)memory usage: 28.1+ KB</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d0b807f6c3904b6995597e7df99e232c><p class=pgc-img-caption></p></div><pre><code>stocks.head()stocks.info()</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/da558d6e42284c339c22838db1701598><p class=pgc-img-caption></p></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;DatetimeIndex: 851264 entries, 2016-01-05 to 2016-12-30Data columns (total 6 columns): #   Column  Non-Null Count   Dtype  ---  ------  --------------   -----   0   symbol  851264 non-null  object  1   open    851264 non-null  float64 2   close   851264 non-null  float64 3   low     851264 non-null  float64 4   high    851264 non-null  float64 5   volume  851264 non-null  float64dtypes: float64(5), object(1)memory usage: 45.5+ MB</code></pre><p>兩個數據集中都有一些空值。我們目的是演示，我們就可以放心的丟棄它們。</p><pre><code>cars.dropna(inplace=True)stocks.dropna(inplace=True)</code></pre><blockquote><p>專業提示：讓你的數據集儘可能的整潔，這樣Seaborn才能表現出色。確保每一行都是一個觀察值，每一列都是一個變量。</p></blockquote><hr><h1 class=pgc-h-arrow-right>使用relplot繪散點圖</h1><p>讓我們從散點圖開始。散點圖是用來找出變量之間的模式和關係的最好和最廣泛使用的圖之一。</p><p>這些變量通常是定量的，例如測量值、一天中的溫度或任何數值。散點圖將x和y值的每個元組可視化為一個點，並且該圖將形成一個點雲。這些類型的圖是人眼探測模式和關係的理想選擇。</p><p>你可以使用sb(我將從現在開始縮寫為sb)的內置scatterplot()函數創建散點圖。但是這個函數缺少relplot()中版本所提供的靈活性。讓我們看一個使用relplot()的示例。</p><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf63d73ca39e4666bdd9d94c80bc0721><p class=pgc-img-caption></p></div><p>利用汽車數據集，我們想知道重型汽車是否具有更大的馬力。由於這兩個特徵都是數值型的，我們可以使用散點圖：</p><pre><code>sns.relplot(x='weight', y='horsepower',             data=cars, kind='scatter');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9f0dcdaf10dc47568ff46723e9dc82cd><p class=pgc-img-caption></p></div><p>函數具有參數x、y和data參數，分別指定要在X、Y軸上繪製的值以及它應該使用的數據。我們使用kind參數指定它應該使用散點圖。實際上，默認情況下，它被設置為scatter。</p><p>從圖表來看，可以解釋為較重的汽車確實有更大的馬力。很明顯，還有更多的汽車重量在1500到3000之間，馬力50-110。</p><h1 class=pgc-h-arrow-right>散點圖的點大小</h1><p>在前面的圖的基礎上，現在我們還想添加一個新變量。讓我們看看重車是否有更大的排量(他們能儲存多少燃料)。理想情況下，我們希望將此變量繪製為點的大小：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2d2b244874e04d5395c5509d10658987><p class=pgc-img-caption></p></div><p>使用size參數來改變相對於第三個變量的點大小。只需將列名作為字符串傳遞，就可以進行設置，就像我們的示例中一樣。此圖顯示了重量和發動機尺寸之間的明確關係。但是，你可以在中心看到一些不符合趨勢的點。</p><p>重要的是傳遞一個數值變量，它將具有較少的“值週期”。如果太多的話，你的眼睛會很難理解這些事情。如果我們用第三個變量weight創建上面的圖，你可以看到：</p><pre><code>sns.relplot(x='displacement',            y='horsepower',            data=cars,            kind='scatter',            size='weight');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a2cf264c13674fd0a6ed0c893ef5515c><p class=pgc-img-caption></p></div><p>正如你所見，趨勢並不明顯，很難區分大小。</p><h1 class=pgc-h-arrow-right>散點圖的色調</h1><p>也可以將顏色標記用於散點圖中的第三個變量。它也非常簡單，就像點大小一樣。假設我們還想將加速度(汽車達到60英里/小時(秒)的時間)編碼為點顏色：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/184d8ac03d52454baa3a637ff9e04e40><p class=pgc-img-caption></p></div><p>從圖中，我們可以看到數據集中一些速度最快的汽車(較暗的點)馬力較低，但重量也較輕。注意，我們使用hue參數來編碼顏色。顏色根據傳遞給此參數的變量類型而變化。如果我們傳遞origin列，它是一個範疇變量，那麼它將有三個顏色標記，而不是一個連續的(從亮到暗)色調：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='origin');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d13a7e2a37ea4afdad0fd0d341974544><p class=pgc-img-caption></p></div><blockquote><p>專業提示：注意輸入到hue參數的變量類型。類型可以完全更改結果。</p></blockquote><p>如果你不喜歡默認調色板(默認情況下非常好)，可以輕鬆自定義：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration',            palette='crest');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a767f11b7206405ab441f179c25910de><p class=pgc-img-caption></p></div><p>將palette參數設置為你自己的顏色映射。可在此處找到可用選項板的列表：http://seaborn.pydata.org/tutorial/color_palettes.html</p><h1 class=pgc-h-arrow-right>散點圖樣式</h1><p>讓我們回到第一個圖。我們繪製了重量與馬力的散點圖。現在，讓我們添加origin列作為第三個變量：</p><pre><code>sns.relplot(x='weight', y='horsepower',             data=cars, hue='origin');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0483541937e54938996135311f77cd0e><p class=pgc-img-caption></p></div><p>雖然顏色在這張圖中增加了一層額外的信息，但在更大的數據集中，可能很難區分點群中的顏色。為了更清晰起見，我們將點的樣式添加到繪圖中：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            hue='origin',            style='origin');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2af5f9389e004cb2ba119c1d2bf5e633><p class=pgc-img-caption></p></div><p>好一點了。改變點的樣式和顏色是非常有效的。如果我們只使用點的樣式來指定原點，看看會發生什麼：</p><pre><code>sns.relplot(x='weight', y='horsepower',             data=cars, style='origin');</code></pre><blockquote><p>提示：將色調和樣式參數結合使用，可以使繪圖更加清晰。</p></blockquote><p>我們去掉了色調的參數，這使得我們的圖表更難理解。如果不喜歡默認顏色，你可以更改：</p><p>首先，你應該創建一個字典，將各個顏色映射到每個類別。請注意，該字典的鍵應該與圖例中的名稱相同。</p><pre><code>hue_colors = {'usa': 'red',               'japan': 'orange',               'europe': 'green'}sns.relplot(x='weight',            y='horsepower',            data=cars,            hue='origin',            style='origin',            palette=hue_colors);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d882e3c8d2f54919ad217b2f235fff3e><p class=pgc-img-caption></p></div><p>從圖中可以看出，我們數據集中的大部分汽車都來自美國。</p><h1 class=pgc-h-arrow-right>散點圖的點透明度</h1><p>讓我們再次回到我們的第一個例子。讓我們再畫一次，但要增加一點透明度：</p><pre><code>sns.relplot(x='weight', y='horsepower',             data=cars, alpha=0.6);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1e06d4b04f314492af043b3b257e579b><p class=pgc-img-caption></p></div><p>我們使用alpha參數來設置點的透明度。它接受0到1之間的值。0是完全透明的，1是完全不透明的。當你有一個大的數據集並且你想找出圖中的簇或組時，它是一個非常有用的特性。降低透明度時，圖中有許多圓點的部分將變暗。</p><h1 class=pgc-h-arrow-right>散點圖中的子圖</h1><p>在Seaborn也可以使用子圖。我之所以使用relplot()而不是scatterplot()，因為它不能創建一個子圖。</p><p>由於relplot是一個圖形級別的函數，它生成一個FacetGrid(一個由多個繪圖組成的網格)對象，而scatterplot()只打印到一個matplotlib.pyplot.Axes(單個繪圖)不能轉換為子圖的對象：</p><pre><code>fg = sns.relplot()print(type(fg))plot = sns.scatterplot()print(type(plot))&lt;class 'seaborn.axisgrid.FacetGrid'&gt;&lt;class 'matplotlib.axes._subplots.AxesSubplot'&gt;</code></pre><p>讓我們看一個例子，我們想在其中使用子圖。在上面的其中一個圖中，我們將4個變量編碼到一個單獨的圖中(重量，馬力，排量和加速度)。現在，我們還要添加汽車的原產地。為了使信息更易於解釋，我們應該將其劃分為子圖：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration',            palette='crest',            col='origin');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c15da81a847a4a2eb17d8541a7dcf5eb><p class=pgc-img-caption></p></div><p>這一次，我們添加了一個新參數col，指出我們希望在列中創建子圖。這些類型的子區間非常有用，因為現在很容易看到第五個變量的趨勢。順便說一句，傳遞給col的變量應該是離散的，這樣才能起作用。此外，SB在一行中顯示列。如果有多個類別需要繪製，我們不希望這樣。讓我們看一個使用我們的數據的用例，儘管它的類別較少：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration',            palette='crest',            col='origin',            col_wrap=2);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3f1fd5d8d90e4dc595e76f095bb558fe><p class=pgc-img-caption></p></div><p>col_wra參數告訴SB我們希望一行中有多少列。</p><p>還可以指定列中類別的順序：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration',            palette='crest',            col='origin',            col_order=['japan', 'europe', 'usa']);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d177d14abca64eb6a7015ce699f50064><p class=pgc-img-caption></p></div><p>也可以在行中顯示相同的信息：</p><pre><code>sns.relplot(x='weight',            y='horsepower',            data=cars,            kind='scatter',            size='displacement',            hue='acceleration',            palette='crest',            row='origin');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e59c8b32c1174f15975ad0af82f902bd><p class=pgc-img-caption></p></div><p>如果有很多類別，那麼使用行並不是很有用，最好還是堅持使用列。你可以再次使用row_order指定行的順序。</p><h1 class=pgc-h-arrow-right>線圖</h1><p>關係圖的另一種常見類型是線圖。而在散點圖中，每個點都是一個獨立的觀察點，在線圖中，我們繪製了一個變量和一些連續變量，通常是一段時間。我們的第二個樣本數據集包含2010年至2016年跟蹤的501家公司的紐約證券交易所數據。</p><p>為了便於說明，讓我們觀察給定時間段內所有公司的收盤價。由於涉及日期，因此線條圖是此任務的最佳視覺類型：</p><blockquote><p>專業提示：如果數據集中有一個日期列，請將其設置為日期類型，然後使用set_index()函數將其設置為索引。或使用<em>pd.read_csv(parse_dates=['date_column'], index_col='date_column')</em>。它將允許你繪製線圖，並使日期的設置更容易。</p></blockquote><p>對於線圖，我們再次使用relplot()並將kind設置為line。這將繪製第二個連續變量(通常是時間)上跟蹤的單個變量。</p><pre><code>sns.relplot(x=stocks.index, y='close',             data=stocks, kind='line');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a1d9550522e242d6a14031904aa73f19><p class=pgc-img-caption></p></div><p>我們可以看到明顯的趨勢。所有公司的股票在給定的時間段內都在增長。藍色較深的線代表6年來追蹤的所有公司收盤價的平均值。</p><p>SB會自動增加一個置信區間，如果對一個點有多個觀測會添加那條線周圍的陰影區域，稍後會詳細介紹。現在，讓我們把數據集中到3家公司:</p><pre><code>am_ap_go = stocks[stocks['symbol'].isin(['AMZN', 'AAPL', 'GOOGL'])]am_ap_go.shape(5286, 6)</code></pre><h1 class=pgc-h-arrow-right>多行線圖</h1><p>現在，讓我們通過將數據分組到三個公司來重新創建上面的線圖。這將在同一繪圖中創建三條線，而不是一條：</p><pre><code>sns.relplot(x=am_ap_go.index,            y='close',            data=am_ap_go,            kind='line',            hue='symbol');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9ecca0789ae44243915e043fa9d0aa1f><p class=pgc-img-caption></p></div><p>就像我們在散點圖示例中所做的那樣，我們使用hue參數在數據中創建子組。同樣，你必須將一個範疇變量傳遞到hue中。在這幅圖中，我們可以看到，在2016年之後，亞馬遜和谷歌的股價非常接近，而蘋果在整個期間都處於底部。現在，讓我們看看我們是如何將每一行與顏色區分開來的：</p><h1 class=pgc-h-arrow-right>線圖線條樣式</h1><p>我們使用style參數來指定每一行需要不同的線條樣式：</p><pre><code>sns.relplot(x=am_ap_go.index,            y='close',            data=am_ap_go,            kind='line',            hue='symbol',            style='symbol');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9b83d4a9e6534099a5d9be18b0a83c8d><p class=pgc-img-caption></p></div><p>好吧，這可能不是不同線條風格的最佳例子，因為觀察是針對每一天的，而且非常緊湊。讓我們僅對2015-2016年期間進行子集劃分，並繪製相同的線圖：</p><pre><code>am_ap_go_subset = am_ap_go.loc['2015-01-01':'2015-12-31']sns.relplot(x=am_ap_go_subset.index,            y='close',            data=am_ap_go_subset,            kind='line',            hue='symbol',            style='symbol');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/34eed59e16d34225b848e3b2f7bb35f1><p class=pgc-img-caption></p></div><p>現在線條風格更清晰了。你可能會說，這好像沒什麼分別。但是當你有一個圖表，它的線非常緊湊的話，這可能可以幫助你理解某些東西。</p><h1 class=pgc-h-arrow-right>線圖的點標記</h1><p>當你有一個較小的數據集並且想要創建一個線圖時，用點標記來標記每個數據點可能會很有用。對於我們較小的股票價格分佈數據來說仍然是非常緊張的。所以，讓我們用一個更小的時間段，來看看如何使用點標記：</p><pre><code>smaller_subset = am_ap_go_subset.loc["2015-01-01":"2015-03-01"]sns.relplot(x=smaller_subset.index,            y='close',            data=smaller_subset,            kind='line',            hue='symbol',            style='symbol',            markers=True)plt.xticks(rotation=60);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/81becb1008e1433880086cd07d2e2c4c><p class=pgc-img-caption></p></div><p>現在每行都有不同的標記。我們將markers參數設置為True以激活此功能。</p><h1 class=pgc-h-arrow-right>線圖置信區間</h1><p>接下來，我們將探討在SB中計算線圖的置信區間。如果對一個點有多個觀測值，則會自動添加置信區間。</p><p>在我們對這三家公司的數據中，每一天都有三個觀察結果：一個是亞馬遜，一個是谷歌，一個是蘋果。當我們創建不帶子組(不帶色調參數)的線條圖時，默認情況下，SB取這三個值的平均值：</p><pre><code>sns.relplot(x=am_ap_go.index, y='close',             data=am_ap_go, kind='line');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/c903cb05c6254255ad42fb9d4eef48ad><p class=pgc-img-caption></p></div><p>較暗的線表示這三家公司股價的平均值。陰影區域為95%置信區間。這是非常巨大的，因為我們的樣本數據只有三家公司。陰影區意味著95%的人的平均值在這個區間內。它表明了我們數據的不確定性。</p><p>例如，2017年，人口平均數在100到800之間。置信區間的範圍是巨大的。將ci參數設置為“None”可以關閉置信區間：</p><pre><code>sns.relplot(x=am_ap_go.index,              y='close',             data=am_ap_go,              kind='line', ci=None);</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5ed1624ef75541f294ad8d9688428b6a><p class=pgc-img-caption></p></div><p>或者，如果需要，可以顯示標準偏差而不是置信區間。將ci參數設置為sd：</p><pre><code>sns.relplot(x=am_ap_go.index,             y='close',             data=am_ap_go,             kind='line',             ci='sd');</code></pre><div class=pgc-img><img alt=掌握Seaborn的三分之一：使用relplot進行統計繪圖 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/448c961f6acb41b783d4aed70f2fc4a7><p class=pgc-img-caption></p></div><p>也許這些參數對於我們的示例數據不是很有用，但是當你處理大量真實數據時，它們將非常重要。</p><p>最後一點：如果要為線圖創建子圖，可以使用相同的col和row參數。</p><h1 class=pgc-h-arrow-right>結論</h1><p>最後，我們完成了Seaborn的關係圖。線圖和散點圖是在數據海洋中發現洞察力和趨勢的非常重要的視覺輔助工具。因此，掌握它們是很重要的。儘可能使用Seaborn來創建它們。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Seaborn</a></li><li><a>relplot</a></li><li><a>進行</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/72139afe.html alt=怎樣對臍橙樹進行扭枝（彎枝）促花？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fe6ea8ad111f421c9673e3f61072fa1f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72139afe.html title=怎樣對臍橙樹進行扭枝（彎枝）促花？>怎樣對臍橙樹進行扭枝（彎枝）促花？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0c52137.html alt=作文裡面怎麼進行場面描寫？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/230976bf-ee1d-44c0-8ce9-4a4714b8ad40 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0c52137.html title=作文裡面怎麼進行場面描寫？>作文裡面怎麼進行場面描寫？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cc683c38.html alt=怎樣進行場面描寫？中小學生高分作文技巧，作文快速提分 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7559326b0b254462970a98290ef15e9f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cc683c38.html title=怎樣進行場面描寫？中小學生高分作文技巧，作文快速提分>怎樣進行場面描寫？中小學生高分作文技巧，作文快速提分</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/862b0119.html alt=庭院景觀進行分類，分析其設計手法及景觀元素 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0b2a23998d02489a9f65c5ac190e0ab1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/862b0119.html title=庭院景觀進行分類，分析其設計手法及景觀元素>庭院景觀進行分類，分析其設計手法及景觀元素</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9aacad8d.html alt=四子王旗著陸場進行夜間返回器回收演練 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/SGCsDGZChiSE1J style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9aacad8d.html title=四子王旗著陸場進行夜間返回器回收演練>四子王旗著陸場進行夜間返回器回收演練</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1051ab4.html alt=稅務機關是如何進行稅務檢查的？小白必看 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/5910228d-1631-4921-8a4e-08a892a227ca style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1051ab4.html title=稅務機關是如何進行稅務檢查的？小白必看>稅務機關是如何進行稅務檢查的？小白必看</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b24cd416.html alt="有勒索軟件冒充解密工具對用戶文件進行二次加密 真是壞透了" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d2b5b02227754787880b9798bc0d8451 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b24cd416.html title="有勒索軟件冒充解密工具對用戶文件進行二次加密 真是壞透了">有勒索軟件冒充解密工具對用戶文件進行二次加密 真是壞透了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1d30af34.html alt=脈動進行年輕化品牌升級，起用吳亦凡為品牌全球代言人 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RxWrYnBCPI4mSB style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1d30af34.html title=脈動進行年輕化品牌升級，起用吳亦凡為品牌全球代言人>脈動進行年輕化品牌升級，起用吳亦凡為品牌全球代言人</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d160830e.html alt="基於 Oracle 的系統識別方法來進行 Control-CPS 軟件缺陷定位" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7f751bafd94a4c9a933109a7b3f275eb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d160830e.html title="基於 Oracle 的系統識別方法來進行 Control-CPS 軟件缺陷定位">基於 Oracle 的系統識別方法來進行 Control-CPS 軟件缺陷定位</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/839128d9.html alt=如何利用MES系統進行生產防錯？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1a9be6af1166482e9570cecda0f01f8c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/839128d9.html title=如何利用MES系統進行生產防錯？>如何利用MES系統進行生產防錯？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a3cbc9ea.html alt=進行百年的瀝青滴落實驗，如此大費干戈，究竟是為了證明什麼？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9729abe48f9c47919432f44bf48e02e2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a3cbc9ea.html title=進行百年的瀝青滴落實驗，如此大費干戈，究竟是為了證明什麼？>進行百年的瀝青滴落實驗，如此大費干戈，究竟是為了證明什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e9c9b225.html alt=9座市管隨路橋樑今起進行“體檢” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e9c9b225.html title=9座市管隨路橋樑今起進行“體檢”>9座市管隨路橋樑今起進行“體檢”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2f8212b0.html alt=中交怒江連心橋進行荷載試驗 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c5de27c9149c45b29e1fb42cc5f16f9f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2f8212b0.html title=中交怒江連心橋進行荷載試驗>中交怒江連心橋進行荷載試驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5465ffdc.html alt=利用等距通道進行價格行為交易的核心方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/f7d9e5eb-8cdd-44e7-8ea2-a0b7057b8c45 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5465ffdc.html title=利用等距通道進行價格行為交易的核心方法>利用等距通道進行價格行為交易的核心方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bafe1e0c.html alt=創想小知識：管道焊接需要進行的七個步驟 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9306fc55883d446e956d5918fa47082b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bafe1e0c.html title=創想小知識：管道焊接需要進行的七個步驟>創想小知識：管道焊接需要進行的七個步驟</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>