<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>PYTHON PANDAS數據幀重塑 | 极客快訊</title><meta property="og:title" content="PYTHON PANDAS數據幀重塑 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/299c6e128a574817b9c6b33a79dabebb"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3faac91.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/3faac91.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/3faac91.html><meta property="article:published_time" content="2020-10-29T21:06:37+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:37+08:00"><meta name=Keywords content><meta name=description content="PYTHON PANDAS數據幀重塑"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/3faac91.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>PYTHON PANDAS數據幀重塑</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>在Python中融化重塑Pandas數據框-教程和可視化</p><p>可視化pd.melt如何從寬到長格式重塑Pandas數據幀</p><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/299c6e128a574817b9c6b33a79dabebb><p class=pgc-img-caption>> Visual tutorial on how to use pd.melt() to reshape pandas dataframes from wide to long in Python</p></div><p></p><p>Pandas的melt（）方法如何重塑數據幀？ 您如何將數據框從寬格式重塑到長格式？ 本教程將引導您逐步使用pd.melt（）（或與pandas數據幀相關聯的melt方法）重塑數據幀。</p><p>我強烈建議您在閱讀本文時嘗試使用Python編寫代碼。 嘗試在共享的DeepNote筆記本上運行本教程（您只能運行但不能編輯此筆記本）。</p><p>另外，您可能想查看官方的Pandas文檔和我的numpy重塑教程：</p><h1 class=pgc-h-arrow-right>在Python中重塑numpy數組—分步教程</h1><h1 class=pgc-h-arrow-right>本教程和備忘單提供可視化幫助您瞭解numpy如何重塑數組。</h1><h1 class=pgc-h-arrow-right>寬還是長數據幀</h1><p>如果我們將一個寬數據框與長數據框進行比較，最容易理解它是什麼樣。</p><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/aae94cb6d96e473da9a56c42a86f6518><p class=pgc-img-caption>> Wide pandas dataframe can be melted/stacked using pd.melt()</p></div><p>下面是相應的數據框（具有相同的信息），但格式較長：</p><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3f1d0bc572274424b3d14358acd5cb4f><p class=pgc-img-caption>> Long pandas dataframe can be "unmelted" using pd.pivot_table() (not covered in this article)</p></div><p></p><p>在開始我們的pd.melt教程之前，讓我們使用pd.DataFrame在Python中重新創建上面的寬數據框。</p><p>import pandas as pd</p><p># create wide dataframe</p><p>df_wide = pd.DataFrame( {"student": ["Andy", "Bernie", "Cindy", "Deb"], "school": ["Z", "Y", "Z", "Y"], "english": [10, 100, 1000, 10000], # eng grades "math": [20, 200, 2000, 20000], # math grades "physics": [30, 300, 3000, 30000] # physics grades })</p><h1 class=pgc-h-arrow-right>融化例1</h1><p>我們通過id_vars指定標識符列來融化數據框。 "剩餘的"非標識符列（英語，數學，物理學）將融化或彼此堆疊成一列。</p><p>將創建一個新的指標列（包含值英語，數學，物理），我們可以通過var_name重命名該新列（cLaSs）。 我們還可以通過value_name重命名包含所有實際成績的列（gRaDe）。</p><blockquote class=pgc-blockquote-abstract><p>print(df_wide)</p><p>> student school english math physics Andy Z 10 20 30 Bernie Y 100 200 300 Cindy Z 1000 2000 3000 Deb Y 10000 20000 30000</p><p>df_wide.melt(id_vars=["student", "school"], var_name="cLaSs",</p><p># rename value_name="gRaDe")</p><p># rename> student school cLaSs gRaDe0 Andy Z english 101 Bernie Y english 1002 Cindy Z english 10003 Deb Y english 100004 Andy Z math 205 Bernie Y math 2006 Cindy Z math 20007 Deb Y math 200008 Andy Z physics 309 Bernie Y physics 30010 Cindy Z physics 300011 Deb Y physics 30000</p></blockquote><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d448f8dfb5d44d7a9fa36948c162c8f6><p class=pgc-img-caption>> Wide to long: new indicator column "cLaSs" + values melted/stacked "gRaDe" column</p></div><p></p><h1 class=pgc-h-arrow-right>融化例2</h1><p>您可以使用value_vars指定要融合或堆疊到列中的列（此處，我們不包括物理列，因此value_vars = [" english"，" math"]）。 我們還從id_vars中刪除了school列。</p><blockquote class=pgc-blockquote-abstract><p>print(df_wide)</p><p>> student school english math physics Andy Z 10 20 30 Bernie Y 100 200 300 Cindy Z 1000 2000 3000 Deb Y 10000 20000 30000</p><p>df_wide.melt(id_vars="student", value_vars=["english", "math"], var_name="cLaSs", #rename value_name="gRaDe")</p><p># rename></p><p>student cLaSs gRaDe0 Andy english 101 Bernie english 1002 Cindy english 10003 Deb english 100004 Andy math 205 Bernie math 2006 Cindy math 20007 Deb math 2000</p></blockquote><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/05818ca1839140189c295f4b34a6db42><p class=pgc-img-caption></p></div><p></p><h1 class=pgc-h-arrow-right>融化例3</h1><p>最後，讓我們看看如果僅將學生列指定為標識符列（id_vars =" student"），但未指定要通過value_vars堆疊的列，會發生什麼情況。 結果，所有非標識符列（學校，英語，數學，物理）將被堆疊到一列中。</p><p>最終的長數據幀看起來是錯誤的，因為現在cLaSs和gRaDe列包含了不應包含的值。 這裡的重點是向您展示pd.melt的工作方式。</p><blockquote class=pgc-blockquote-abstract><p>print(df_wide)> student school english math physics Andy Z 10 20 30 Bernie Y 100 200 300 Cindy Z 1000 2000 3000 Deb Y 10000 20000 30000</p><p>df_wide.melt(id_vars="student", var_name="cLaSs", # rename value_name="gRaDe")</p><p># rename> student cLaSs gRaDe0 Andy school Z1 Bernie school Y2 Cindy school Z3 Deb school Y4 Andy english 105 Bernie english 1006 Cindy english 10007 Deb english 100008 Andy math 209 Bernie math 20010 Cindy math 200011 Deb math 2000012 Andy physics 3013 Bernie physics 30014 Cindy physics 300015 Deb physics 30000</p></blockquote><div class=pgc-img><img alt="PYTHON PANDAS數據幀重塑" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a278aaff6f0142ce8053bd67325b675b><p class=pgc-img-caption>> Wide to long: school column isn't an identifier column</p></div><p></p><h1 class=pgc-h-arrow-right>結束語</h1><p>我希望您現在對pd.meltreshapes如何塑造數據幀有更好的瞭解。 我期待您的想法和評論。</p><p>如果您認為這篇文章有用，請關注我並訪問我的網站，以獲取更多數據科學教程以及其他文章：</p><p>(本文翻譯自Hause Lin的文章《Reshape pandas dataframe with melt in Python — tutorial and visualization》，參考：https://towardsdatascience.com/reshape-pandas-dataframe-with-melt-in-python-tutorial-and-visualization-29ec1450bb02)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>PYTHON</a></li><li><a>PANDAS</a></li><li><a>數據</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/862c99dd.html alt=數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3e507bb24abc482fb28df1121a7ee097 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/862c99dd.html title=數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出>數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1f742b21.html alt="數據科學家常犯的 10 個編程錯誤" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1f742b21.html title="數據科學家常犯的 10 個編程錯誤">數據科學家常犯的 10 個編程錯誤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d5773fc2.html alt=數據科學家常遇到的10個錯誤 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/59f660bac8b541888e71459b604ba733 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d5773fc2.html title=數據科學家常遇到的10個錯誤>數據科學家常遇到的10個錯誤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5ff7d77e.html alt=WORD表格的數據老闆讓增加合計，同事用計算器計算，我3秒鐘搞定 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f120ed2c1ed549e39bfa60bb3a86d591 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5ff7d77e.html title=WORD表格的數據老闆讓增加合計，同事用計算器計算，我3秒鐘搞定>WORD表格的數據老闆讓增加合計，同事用計算器計算，我3秒鐘搞定</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cea55527.html alt="多列數據合併一列，還在用數據透視就out了，用=號只要三步完成" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7aa6ee1b961f467e8090ed56f45c110f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cea55527.html title="多列數據合併一列，還在用數據透視就out了，用=號只要三步完成">多列數據合併一列，還在用數據透視就out了，用=號只要三步完成</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html alt=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3609570de59a49a9be5667dd9a637f65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html title=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心>數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0e2547f1.html alt=「數據結構」Hash表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/617a6d43032e4efbac6b996c9bb5ab11 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0e2547f1.html title=「數據結構」Hash表>「數據結構」Hash表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b37254e1.html alt=備戰秋招——算法與數據結構（5） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ab6859411bd8435bb2616d6fef468556 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b37254e1.html title=備戰秋招——算法與數據結構（5）>備戰秋招——算法與數據結構（5）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f605b4b8.html alt=懂了數據結構框架思維，一切算法不過是紙老虎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ad2c8a60d9634e0aa36b5d8a664de355 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f605b4b8.html title=懂了數據結構框架思維，一切算法不過是紙老虎>懂了數據結構框架思維，一切算法不過是紙老虎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html alt=數據結構一(哈希表)想進大廠的必備知識點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/86ad7a2f62cc48f98bbe53b42ca4bf9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html title=數據結構一(哈希表)想進大廠的必備知識點>數據結構一(哈希表)想進大廠的必備知識點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/385a3c55.html alt="數據結構中的 Hash 表" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/0e43812c-6f05-4cf6-af7e-18011d0a316a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/385a3c55.html title="數據結構中的 Hash 表">數據結構中的 Hash 表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7739dc7a.html alt=Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5d4a0000046e1bea8b90 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7739dc7a.html title=Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？>Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/46925324.html alt=什麼，每組數據都要直觀顯示出趨勢？別慌，迷你圖來幫你 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/dacc2e5d44c547fbb97f666290862260 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/46925324.html title=什麼，每組數據都要直觀顯示出趨勢？別慌，迷你圖來幫你>什麼，每組數據都要直觀顯示出趨勢？別慌，迷你圖來幫你</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0f6d007f.html alt=數據顯示，這幾組“情商”低的表現可得小心了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/aaa6491f8e334aa1a7dd2a3904f423c7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0f6d007f.html title=數據顯示，這幾組“情商”低的表現可得小心了>數據顯示，這幾組“情商”低的表現可得小心了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4646402b.html alt=為什麼Excel數據透視表不能按日期創建組？教你輕鬆解決 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d0ad14c0ac504f878152ad79a041b645 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4646402b.html title=為什麼Excel數據透視表不能按日期創建組？教你輕鬆解決>為什麼Excel數據透視表不能按日期創建組？教你輕鬆解決</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>