<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules | æå®¢å¿«è¨Š</title><meta property="og:title" content="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/489b8a2776e84f01bcea4276f80bdaf1"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/42060af5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/42060af5.html><meta property="article:published_time" content="2020-11-14T20:59:53+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:53+08:00"><meta name=Keywords content><meta name=description content="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/42060af5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><p>1. Easy Rules æ¦‚è¿°</p><p>Easy Rulesæ˜¯ä¸€å€‹Javaè¦å‰‡å¼•æ“ï¼Œéˆæ„Ÿä¾†è‡ªä¸€ç¯‡åç‚ºã€ŠShould I use a Rules Engine?ã€‹çš„æ–‡ç« </p><blockquote><p>è¦å‰‡å¼•æ“å°±æ˜¯æä¾›ä¸€ç¨®å¯é¸çš„è¨ˆç®—æ¨¡å‹ã€‚èˆ‡é€šå¸¸çš„å‘½ä»¤å¼æ¨¡å‹ï¼ˆç”±å¸¶æœ‰æ¢ä»¶å’Œå¾ªç’°çš„å‘½ä»¤ä¾æ¬¡çµ„æˆï¼‰ä¸åŒï¼Œè¦å‰‡å¼•æ“åŸºæ–¼ç”Ÿç”¢è¦å‰‡ç³»çµ±ã€‚é€™æ˜¯ä¸€çµ„ç”Ÿç”¢è¦å‰‡ï¼Œæ¯æ¢è¦å‰‡éƒ½æœ‰ä¸€å€‹æ¢ä»¶ï¼ˆconditionï¼‰å’Œä¸€å€‹å‹•ä½œï¼ˆactionï¼‰â€”â€”â€”â€” ç°¡å–®çš„èªªï¼Œå¯ä»¥å°‡å…¶çœ‹ä½œæ˜¯ä¸€çµ„if-thenèªå¥ã€‚</p><p>ç²¾å¦™ä¹‹è™•åœ¨æ–¼è¦å‰‡å¯ä»¥æŒ‰ä»»ä½•é †åºç·¨å¯«ï¼Œå¼•æ“æœƒæ±ºå®šä½•æ™‚ä½¿ç”¨å°é †åºæœ‰æ„ç¾©çš„ä»»ä½•æ–¹å¼ä¾†è¨ˆç®—å®ƒå€‘ã€‚è€ƒæ…®å®ƒçš„ä¸€å€‹å¥½æ–¹æ³•æ˜¯ç³»çµ±é‹è¡Œæ‰€æœ‰è¦å‰‡ï¼Œé¸æ“‡æ¢ä»¶æˆç«‹çš„è¦å‰‡ï¼Œç„¶å¾ŒåŸ·è¡Œç›¸æ‡‰çš„æ“ä½œã€‚é€™æ¨£åšçš„å¥½è™•æ˜¯ï¼Œå¾ˆå¤šå•é¡Œéƒ½å¾ˆè‡ªç„¶åœ°ç¬¦åˆé€™å€‹æ¨¡å‹ï¼š</p><p>if car.owner.hasCellPhone then premium += 100; if car.model.theftRating > 4 then premium += 200; if car.owner.livesInDodgyArea && car.model.theftRating > 2 then premium += 300;</p><p>è¦å‰‡å¼•æ“æ˜¯ä¸€ç¨®å·¥å…·ï¼Œå®ƒä½¿å¾—é€™ç¨®è¨ˆç®—æ¨¡å‹ç·¨ç¨‹è®Šå¾—æ›´å®¹æ˜“ã€‚å®ƒå¯èƒ½æ˜¯ä¸€å€‹å®Œæ•´çš„é–‹ç™¼ç’°å¢ƒï¼Œæˆ–è€…ä¸€å€‹å¯ä»¥åœ¨å‚³çµ±å¹³è‡ºä¸Šå·¥ä½œçš„æ¡†æ¶ã€‚ç”Ÿç”¢è¦å‰‡è¨ˆç®—æ¨¡å‹æœ€é©åˆåƒ…è§£æ±ºä¸€éƒ¨åˆ†è¨ˆç®—å•é¡Œï¼Œå› æ­¤è¦å‰‡å¼•æ“å¯ä»¥æ›´å¥½åœ°åµŒå…¥åˆ°è¼ƒå¤§çš„ç³»çµ±ä¸­ã€‚</p><p>ä½ å¯ä»¥è‡ªå·±æ§‹å»ºä¸€å€‹ç°¡å–®çš„è¦å‰‡å¼•æ“ã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯å‰µå»ºä¸€çµ„å¸¶æœ‰æ¢ä»¶å’Œå‹•ä½œçš„å°è±¡ï¼Œå°‡å®ƒå€‘å­˜å„²åœ¨ä¸€å€‹é›†åˆä¸­ï¼Œç„¶å¾Œéæ­·å®ƒå€‘ä»¥è©•ä¼°æ¢ä»¶ä¸¦åŸ·è¡Œé€™äº›å‹•ä½œã€‚</p></blockquote><p>Easy Ruleså®ƒæä¾›RuleæŠ½è±¡ä»¥å‰µå»ºå…·æœ‰æ¢ä»¶å’Œå‹•ä½œçš„è¦å‰‡ï¼Œä¸¦æä¾›RuleEngine APIï¼Œè©²APIé€šéä¸€çµ„è¦å‰‡é‹è¡Œä»¥è©•ä¼°æ¢ä»¶ä¸¦åŸ·è¡Œå‹•ä½œã€‚</p><p>Easy Rulesç°¡å–®æ˜“ç”¨ï¼Œåªéœ€å…©æ­¥ï¼š</p><p>é¦–å…ˆï¼Œå®šç¾©è¦å‰‡ï¼Œæ–¹å¼æœ‰å¾ˆå¤šç¨®</p><p>æ–¹å¼ä¸€ï¼šè¨»è§£</p><pre><code>@Rule(name = "weather rule", description = "if it rains then take an umbrella")public class WeatherRule {    @Condition    public boolean itRains(@Fact("rain") boolean rain) {        return rain;    }        @Action    public void takeAnUmbrella() {        System.out.println("It rains, take an umbrella!");    }}</code></pre><p>æ–¹å¼äºŒï¼šéˆå¼ç·¨ç¨‹</p><pre><code>Rule weatherRule = new RuleBuilder()        .name("weather rule")        .description("if it rains then take an umbrella")        .when(facts -&gt; facts.get("rain").equals(true))        .then(facts -&gt; System.out.println("It rains, take an umbrella!"))        .build();</code></pre><p>æ–¹å¼ä¸‰ï¼šè¡¨é”å¼</p><pre><code>Rule weatherRule = new MVELRule()        .name("weather rule")        .description("if it rains then take an umbrella")        .when("rain == true")        .then("System.out.println(\"It rains, take an umbrella!\");");</code></pre><p>æ–¹å¼å››ï¼šymlé…ç½®æ–‡ä»¶</p><p>ä¾‹å¦‚ï¼šweather-rule.yml</p><pre><code>name: "weather rule"description: "if it rains then take an umbrella"condition: "rain == true"actions:  - "System.out.println(\"It rains, take an umbrella!\");"</code></pre><pre><code>MVELRuleFactory ruleFactory = new MVELRuleFactory(new YamlRuleDefinitionReader());Rule weatherRule = ruleFactory.createRule(new FileReader("weather-rule.yml"));</code></pre><p>æ¥ä¸‹ä¾†ï¼Œæ‡‰ç”¨è¦å‰‡</p><pre><code>public class Test {    public static void main(String[] args) {        // define facts        Facts facts = new Facts();        facts.put("rain", true);        // define rules        Rule weatherRule = ...        Rules rules = new Rules();        rules.register(weatherRule);        // fire rules on known facts        RulesEngine rulesEngine = new DefaultRulesEngine();        rulesEngine.fire(rules, facts);    }}</code></pre><p><strong>å…¥é–€æ¡ˆä¾‹ï¼šHello Easy Rules</strong></p><pre><code>&lt;dependency&gt;    &lt;groupId&gt;org.jeasy&lt;/groupId&gt;    &lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;    &lt;version&gt;4.0.0&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>é€šééª¨æ¶å‰µå»ºmavené …ç›®ï¼š</p><pre><code>mvn archetype:generate \    -DarchetypeGroupId=org.jeasy \    -DarchetypeArtifactId=easy-rules-archetype \    -DarchetypeVersion=4.0.0</code></pre><p>é»˜èªçµ¦æˆ‘å€‘ç”Ÿæˆäº†ä¸€å€‹HelloWorldRuleè¦å‰‡ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>package com.cjs.example.rules;import org.jeasy.rules.annotation.Action;import org.jeasy.rules.annotation.Condition;import org.jeasy.rules.annotation.Rule;@Rule(name = "Hello World rule", description = "Always say hello world")public class HelloWorldRule {    @Condition    public boolean when() {        return true;    }    @Action    public void then() throws Exception {        System.out.println("hello world");    }}</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/489b8a2776e84f01bcea4276f80bdaf1><p class=pgc-img-caption></p></div><p>2. è¦å‰‡å®šç¾©</p><p>2.1. å®šç¾©è¦å‰‡</p><p>å¤§å¤šæ•¸æ¥­å‹™è¦å‰‡å¯ä»¥ç”¨ä»¥ä¸‹å®šç¾©è¡¨ç¤ºï¼š</p><ul><li>Name : ä¸€å€‹å‘½åç©ºé–“ä¸‹çš„å”¯ä¸€çš„è¦å‰‡åç¨±</li><li>Description : è¦å‰‡çš„ç°¡è¦æè¿°</li><li>Priority : ç›¸å°æ–¼å…¶ä»–è¦å‰‡çš„å„ªå…ˆç´š</li><li>Facts : äº‹å¯¦ï¼Œå¯ç«‹å³ç‚ºè¦è™•ç†çš„æ•¸æ“š</li><li>Conditions : ç‚ºäº†æ‡‰ç”¨è¦å‰‡è€Œå¿…é ˆæ»¿è¶³çš„ä¸€çµ„æ¢ä»¶</li><li>Actions : ç•¶æ¢ä»¶æ»¿è¶³æ™‚åŸ·è¡Œçš„ä¸€çµ„å‹•ä½œ</li></ul><p>Easy Rulesç‚ºæ¯å€‹é—œéµé»æä¾›äº†ä¸€å€‹æŠ½è±¡ä¾†å®šç¾©æ¥­å‹™è¦å‰‡ã€‚</p><p>åœ¨Easy Rulesä¸­ï¼ŒRuleæ¥å£ä»£è¡¨è¦å‰‡</p><pre><code>public interface Rule {    /**    * This method encapsulates the rule's conditions.    * @return true if the rule should be applied given the provided facts, false otherwise    */    boolean evaluate(Facts facts);    /**    * This method encapsulates the rule's actions.    * @throws Exception if an error occurs during actions performing    */    void execute(Facts facts) throws Exception;    //Getters and setters for rule name, description and priority omitted.}</code></pre><p>evaluateæ–¹æ³•å°è£äº†å¿…é ˆè¨ˆç®—çµæœç‚ºTRUEæ‰èƒ½è§¸ç™¼è¦å‰‡çš„æ¢ä»¶ã€‚executeæ–¹æ³•å°è£äº†åœ¨æ»¿è¶³è¦å‰‡æ¢ä»¶æ™‚æ‡‰è©²åŸ·è¡Œçš„å‹•ä½œã€‚æ¢ä»¶å’Œæ“ä½œç”±Conditionå’ŒActionæ¥å£è¡¨ç¤ºã€‚</p><p>å®šç¾©è¦å‰‡æœ‰å…©ç¨®æ–¹å¼ï¼š</p><ul><li>é€šéåœ¨POJOé¡ä¸Šæ·»åŠ è¨»è§£</li><li>é€šéRuleBuilder APIç·¨ç¨‹</li></ul><p>å¯ä»¥åœ¨ä¸€å€‹POJOé¡ä¸Šæ·»åŠ @Ruleè¨»è§£ï¼Œä¾‹å¦‚ï¼š</p><pre><code>@Rule(name = "my rule", description = "my rule description", priority = 1)public class MyRule {    @Condition    public boolean when(@Fact("fact") fact) {        //my rule conditions        return true;    }    @Action(order = 1)    public void then(Facts facts) throws Exception {        //my actions    }    @Action(order = 2)    public void finally() throws Exception {        //my final actions    }}</code></pre><p>@Conditionè¨»è§£æŒ‡å®šè¦å‰‡æ¢ä»¶@Factè¨»è§£æŒ‡å®šåƒæ•¸@Actionè¨»è§£æŒ‡å®šè¦å‰‡åŸ·è¡Œçš„å‹•ä½œ</p><p>RuleBuilderæ”¯æŒéˆå¼é¢¨æ ¼å®šç¾©è¦å‰‡ï¼Œä¾‹å¦‚ï¼š</p><pre><code>Rule rule = new RuleBuilder()                .name("myRule")                .description("myRuleDescription")                .priority(3)                .when(condition)                .then(action1)                .then(action2)                .build();</code></pre><p>çµ„åˆè¦å‰‡</p><p>CompositeRuleç”±ä¸€çµ„è¦å‰‡çµ„æˆã€‚é€™æ˜¯ä¸€å€‹å…¸å‹åœ°çµ„åˆè¨­è¨ˆæ¨¡å¼çš„å¯¦ç¾ã€‚</p><p>çµ„åˆè¦å‰‡æ˜¯ä¸€å€‹æŠ½è±¡æ¦‚å¿µï¼Œå› ç‚ºå¯ä»¥ä»¥ä¸åŒæ–¹å¼è§¸ç™¼çµ„åˆè¦å‰‡ã€‚</p><p>Easy Rulesè‡ªå¸¶ä¸‰ç¨®CompositeRuleå¯¦ç¾ï¼š</p><ul><li>UnitRuleGroup : è¦éº¼æ‡‰ç”¨æ‰€æœ‰è¦å‰‡ï¼Œè¦éº¼ä¸æ‡‰ç”¨ä»»ä½•è¦å‰‡ï¼ˆANDé‚è¼¯ï¼‰</li><li>ActivationRuleGroup : å®ƒè§¸ç™¼ç¬¬ä¸€å€‹é©ç”¨è¦å‰‡ï¼Œä¸¦å¿½ç•¥çµ„ä¸­çš„å…¶ä»–è¦å‰‡ï¼ˆXORé‚è¼¯ï¼‰</li><li>ConditionalRuleGroup : å¦‚æœå…·æœ‰æœ€é«˜å„ªå…ˆç´šçš„è¦å‰‡è¨ˆç®—çµæœç‚ºtrueï¼Œå‰‡è§¸ç™¼å…¶é¤˜è¦å‰‡</li></ul><p>è¤‡åˆè¦å‰‡å¯ä»¥å¾åŸºæœ¬è¦å‰‡å‰µå»ºä¸¦è¨»å†Šç‚ºå¸¸è¦è¦å‰‡ï¼š</p><pre><code>//Create a composite rule from two primitive rulesUnitRuleGroup myUnitRuleGroup = new UnitRuleGroup("myUnitRuleGroup", "unit of myRule1 and myRule2");myUnitRuleGroup.addRule(myRule1);myUnitRuleGroup.addRule(myRule2);//Register the composite rule as a regular ruleRules rules = new Rules();rules.register(myUnitRuleGroup);RulesEngine rulesEngine = new DefaultRulesEngine();rulesEngine.fire(rules, someFacts);</code></pre><p>æ¯å€‹è¦å‰‡éƒ½æœ‰å„ªå…ˆç´šã€‚å®ƒä»£è¡¨è§¸ç™¼è¨»å†Šè¦å‰‡çš„é»˜èªé †åºã€‚é»˜èªæƒ…æ³ä¸‹ï¼Œè¼ƒä½çš„å€¼è¡¨ç¤ºè¼ƒé«˜çš„å„ªå…ˆç´šã€‚å¯ä»¥é‡å¯«compareToæ–¹æ³•ä»¥æä¾›è‡ªå®šç¾©å„ªå…ˆç´šç­–ç•¥ã€‚</p><p>2.2. å®šç¾©äº‹å¯¦</p><p>åœ¨Easy Rulesä¸­ï¼ŒFact APIä»£è¡¨äº‹å¯¦</p><pre><code>public class Fact&lt;T&gt; {     private final String name;     private final T value;}</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bd381996b2b84fd5926d42f98eea093c><p class=pgc-img-caption></p></div><p>èˆ‰å€‹ä¾‹å­ï¼š</p><pre><code>Fact&lt;String&gt; fact = new Fact("foo", "bar");Facts facts = new Facts();facts.add(fact);</code></pre><p>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ç”¨é€™æ¨£ç°¡å¯«å½¢å¼</p><pre><code>Facts facts = new Facts();facts.put("foo", "bar");</code></pre><p>ç”¨@Factè¨»è§£å¯ä»¥å°‡Factsæ³¨å…¥åˆ°conditionå’Œactionæ–¹æ³•ä¸­</p><pre><code>@Ruleclass WeatherRule {    @Condition    public boolean itRains(@Fact("rain") boolean rain) {        return rain;    }    @Action    public void takeAnUmbrella(Facts facts) {        System.out.println("It rains, take an umbrella!");        // can add/remove/modify facts    }}</code></pre><p>2.3. å®šç¾©è¦å‰‡å¼•æ“</p><p>Easy Rulesæä¾›å…©ç¨®RulesEngineæ¥å£å¯¦ç¾ï¼š</p><ul><li>DefaultRulesEngine : æ ¹æ“šè¦å‰‡çš„è‡ªç„¶é †åºæ‡‰ç”¨è¦å‰‡</li><li>InferenceRulesEngine : æŒçºŒå°å·²çŸ¥äº‹å¯¦æ‡‰ç”¨è¦å‰‡ï¼Œç›´åˆ°ä¸å†é©ç”¨ä»»ä½•è¦å‰‡ç‚ºæ­¢</li></ul><p>å‰µå»ºè¦å‰‡å¼•æ“ï¼š</p><pre><code>RulesEngine rulesEngine = new DefaultRulesEngine();// orRulesEngine rulesEngine = new InferenceRulesEngine();</code></pre><p>ç„¶å¾Œï¼Œè¨»å†Šè¦å‰‡</p><pre><code>rulesEngine.fire(rules, facts);</code></pre><p>è¦å‰‡å¼•æ“æœ‰ä¸€äº›å¯é…ç½®çš„åƒæ•¸ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/816642eed04041e1b8e6e53db3e64c93><p class=pgc-img-caption></p></div><p>èˆ‰å€‹ä¾‹å­ï¼š</p><pre><code>RulesEngineParameters parameters = new RulesEngineParameters()    .rulePriorityThreshold(10)    .skipOnFirstAppliedRule(true)    .skipOnFirstFailedRule(true)    .skipOnFirstNonTriggeredRule(true);RulesEngine rulesEngine = new DefaultRulesEngine(parameters);</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8e0c6ef2ef5345c1857573c5fa605e6d><p class=pgc-img-caption></p></div><p>2.4. å®šç¾©è¦å‰‡ç›£è½å™¨</p><p>é€šéå¯¦ç¾RuleListeneræ¥å£</p><pre><code>public interface RuleListener {    /**     * Triggered before the evaluation of a rule.     *     * @param rule being evaluated     * @param facts known before evaluating the rule     * @return true if the rule should be evaluated, false otherwise     */    default boolean beforeEvaluate(Rule rule, Facts facts) {        return true;    }    /**     * Triggered after the evaluation of a rule.     *     * @param rule that has been evaluated     * @param facts known after evaluating the rule     * @param evaluationResult true if the rule evaluated to true, false otherwise     */    default void afterEvaluate(Rule rule, Facts facts, boolean evaluationResult) { }    /**     * Triggered on condition evaluation error due to any runtime exception.     *     * @param rule that has been evaluated     * @param facts known while evaluating the rule     * @param exception that happened while attempting to evaluate the condition.     */    default void onEvaluationError(Rule rule, Facts facts, Exception exception) { }    /**     * Triggered before the execution of a rule.     *     * @param rule the current rule     * @param facts known facts before executing the rule     */    default void beforeExecute(Rule rule, Facts facts) { }    /**     * Triggered after a rule has been executed successfully.     *     * @param rule the current rule     * @param facts known facts after executing the rule     */    default void onSuccess(Rule rule, Facts facts) { }    /**     * Triggered after a rule has failed.     *     * @param rule the current rule     * @param facts known facts after executing the rule     * @param exception the exception thrown when attempting to execute the rule     */    default void onFailure(Rule rule, Facts facts, Exception exception) { }}</code></pre><p>3. ç¤ºä¾‹</p><pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;com.cjs.example&lt;/groupId&gt;    &lt;artifactId&gt;easy-rules-quickstart&lt;/artifactId&gt;    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;    &lt;packaging&gt;jar&lt;/packaging&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-core&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-support&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jeasy&lt;/groupId&gt;            &lt;artifactId&gt;easy-rules-mvel&lt;/artifactId&gt;            &lt;version&gt;4.0.0&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;            &lt;version&gt;1.7.30&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/project&gt;</code></pre><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/078d31def54640f39ea45002a3c16c31><p class=pgc-img-caption></p></div><p>4. æ“´å±•</p><p>è¦å‰‡æœ¬è³ªä¸Šæ˜¯ä¸€å€‹å‡½æ•¸ï¼Œå¦‚y=f(x1,x2,..,xn)</p><p>è¦å‰‡å¼•æ“å°±æ˜¯ç‚ºäº†è§£æ±ºæ¥­å‹™ä»£ç¢¼å’Œæ¥­å‹™è¦å‰‡åˆ†é›¢çš„å¼•æ“ï¼Œæ˜¯ä¸€ç¨®åµŒå…¥åœ¨æ‡‰ç”¨ç¨‹åºä¸­çš„çµ„ä»¶ï¼Œå¯¦ç¾äº†å°‡æ¥­å‹™æ±ºç­–å¾æ‡‰ç”¨ç¨‹åºä»£ç¢¼ä¸­åˆ†é›¢ã€‚</p><p>é‚„æœ‰ä¸€ç¨®å¸¸è¦‹çš„æ–¹å¼æ˜¯Java+Groovyä¾†å¯¦ç¾ï¼ŒJavaå…§åµŒGroovyè…³æœ¬å¼•æ“é€²è¡Œæ¥­å‹™è¦å‰‡å‰é›¢ã€‚</p><p><strong>ç·¨è¼¯ä¸æ˜“ï¼Œå¸Œæœ›çœ‹åˆ°çš„å°å¤¥ä¼´å¤šå¤šè½‰ç™¼ï¼Œæ”¶è—ï¼Œçµ¦å°ç·¨ä¸€å€‹ é—œæ³¨ï¼æ„Ÿè¬æ‚¨çš„é–±è®€ï¼Œä¸‹é¢å°ç·¨çµ¦å¤§å®¶æº–å‚™äº†ä¸€ä»½ï¼ˆæ·˜å¯¶1998è²·çš„é¦¬å£«å…µå¤§ä½¬çš„è¦–é »ï¼Œé¢è©¦è³‡æ–™æŠ€è¡“æ–‡æª”ï¼‰å…è²»åˆ†äº«ï¼š<br>https://docs.qq.com/doc/DR2J4V01FZERaam91ï¼ˆç²˜è²¼ä¹‹å¾Œå»ç€è¦½å™¨æ‰“é–‹ï¼‰å…è²»é€çµ¦å¤§å®¶ï¼ä¹Ÿå¯ä»¥ç§ä¿¡[ é«˜ä½µç™¼ ]å…è²»ç²å¾—ï¼</strong></p><p><br></p><div class=pgc-img><img alt="ã€Œ javaæ¶æ§‹å¸«ä¹‹è·¯å¿…å‚™ ã€ Javaè¦å‰‡å¼•æ“ Easy Rules" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fcf16fbd247e4e63bc9988ed42c3c656><p class=pgc-img-caption></p></div><p>å¦‚æœä½ æƒ³æˆç‚ºä¸€åå„ªç§€çš„ Java æ¶æ§‹å¸«ï¼Œé‚£éº¼é€™ä»½æ‰‹å†Šä¸Šçš„å…§å®¹å¹¾ä¹æ˜¯å¿…é ˆè¦æŒæ¡çš„ã€‚å¦‚æœä½ æƒ³ç²å–é€™ä»½å­¸ç¿’è³‡æ–™çš„å°å¤¥ä¼´ï¼Œé—œæ³¨å°ç·¨ï¼Œè½‰ç™¼ï¼Œæ”¶è—æ–‡ç« ï¼Œç§ä¿¡[é«˜ä½µç™¼]å³å¯ç²å¾—ç²å–æ–¹å¼ï¼</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>java</a></li><li><a>æ¶æ§‹</a></li><li><a>å¸«ä¹‹è·¯</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/24a6006e.html alt=æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2af10e2429bc47a5823244277a07bb77 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24a6006e.html title=æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹>æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6237da3d.html alt=æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0670cbc9828449c782ac323a238b99e3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6237da3d.html title=æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ>æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/69818103.html alt=javaç›¸é—œçŸ¥è­˜(10)ç¸½çµ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/84649e6ba0f8442a8b10584403bf6635 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/69818103.html title=javaç›¸é—œçŸ¥è­˜(10)ç¸½çµ>javaç›¸é—œçŸ¥è­˜(10)ç¸½çµ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/02729303.html alt=javaå¯¦æˆ°é …ç›®å¸¸ç”¨é¡ï¼ŒDateã€Calendarã€BigDecimalã€Mathã€UUID class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d69c7c9d8b85444da9360e334ba6555d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/02729303.html title=javaå¯¦æˆ°é …ç›®å¸¸ç”¨é¡ï¼ŒDateã€Calendarã€BigDecimalã€Mathã€UUID>javaå¯¦æˆ°é …ç›®å¸¸ç”¨é¡ï¼ŒDateã€Calendarã€BigDecimalã€Mathã€UUID</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5f8b26e0.html alt=å¤šæ…‹çš„æœ¬è³ªï¼Œjavaå‹•æ…‹ç¶å®š class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/50ac000493fbc8532b5e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5f8b26e0.html title=å¤šæ…‹çš„æœ¬è³ªï¼Œjavaå‹•æ…‹ç¶å®š>å¤šæ…‹çš„æœ¬è³ªï¼Œjavaå‹•æ…‹ç¶å®š</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f3d4671c.html alt=æ´»å‹•æ–‡ä»¶æ«ƒçš„æ¶æ§‹æ˜¯ä»€éº¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/104d3629a97947b19d62b03dc3b8d82f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f3d4671c.html title=æ´»å‹•æ–‡ä»¶æ«ƒçš„æ¶æ§‹æ˜¯ä»€éº¼>æ´»å‹•æ–‡ä»¶æ«ƒçš„æ¶æ§‹æ˜¯ä»€éº¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2ea7884b.html alt=javaç¨‹åºå“¡æ³¨æ„ï¼šå°‘æœ‰äººçŸ¥çš„å“ˆå¸Œè¡çªè§£æ±ºç­–ç•¥ï¼Œå­¸åˆ°å°±æ˜¯è³ºåˆ° class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/54d45b20ef6a4a3f960411db61474538 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2ea7884b.html title=javaç¨‹åºå“¡æ³¨æ„ï¼šå°‘æœ‰äººçŸ¥çš„å“ˆå¸Œè¡çªè§£æ±ºç­–ç•¥ï¼Œå­¸åˆ°å°±æ˜¯è³ºåˆ°>javaç¨‹åºå“¡æ³¨æ„ï¼šå°‘æœ‰äººçŸ¥çš„å“ˆå¸Œè¡çªè§£æ±ºç­–ç•¥ï¼Œå­¸åˆ°å°±æ˜¯è³ºåˆ°</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b506f512.html alt=ä¹å¹´æ–°æµªæ¶æ§‹å¸«æ•´ç†PHPæ¶æ§‹æ ¸å¿ƒæŠ€è¡“æ•™ç¨‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b3a3c32254344742b6746996f7fab54b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b506f512.html title=ä¹å¹´æ–°æµªæ¶æ§‹å¸«æ•´ç†PHPæ¶æ§‹æ ¸å¿ƒæŠ€è¡“æ•™ç¨‹>ä¹å¹´æ–°æµªæ¶æ§‹å¸«æ•´ç†PHPæ¶æ§‹æ ¸å¿ƒæŠ€è¡“æ•™ç¨‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html alt="java å¸¸ç”¨çš„æ­£å‰‡è¡¨é”å¼" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1540129072390e6c4c05126 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html title="java å¸¸ç”¨çš„æ­£å‰‡è¡¨é”å¼">java å¸¸ç”¨çš„æ­£å‰‡è¡¨é”å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html alt=javaå¸¸ç”¨æ­£å‰‡è¡¨é”å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c811c3c14e4a4fa4825845b2868ee645 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html title=javaå¸¸ç”¨æ­£å‰‡è¡¨é”å¼>javaå¸¸ç”¨æ­£å‰‡è¡¨é”å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d5b99796.html alt=javaæ­£å‰‡è¡¨é”å¼æ‹¬è™Ÿçš„ä½¿ç”¨ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/88ce74502881405281b2e2e5ae84f5d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d5b99796.html title=javaæ­£å‰‡è¡¨é”å¼æ‹¬è™Ÿçš„ä½¿ç”¨>javaæ­£å‰‡è¡¨é”å¼æ‹¬è™Ÿçš„ä½¿ç”¨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03619879.html alt="java foreach  å°ç•°å¸¸çš„è™•ç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/66551f46-dfc4-46b3-8cb2-b3551d77e648 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03619879.html title="java foreach  å°ç•°å¸¸çš„è™•ç†">java foreach å°ç•°å¸¸çš„è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c67e6cfe.html alt=javaåå°„æ©Ÿåˆ¶çš„è¬›è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9ad2c92f100a4d2e8213dcf70d4781c0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c67e6cfe.html title=javaåå°„æ©Ÿåˆ¶çš„è¬›è§£>javaåå°„æ©Ÿåˆ¶çš„è¬›è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ff2ba73c.html alt=javaä½µç™¼ç·¨ç¨‹-å­¸ç¿’æ–¹æ³•ã€é€²ç¨‹å’Œç·šç¨‹çš„å€åˆ¥ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/96ffe13dbf2b45109664e14541532812 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ff2ba73c.html title=javaä½µç™¼ç·¨ç¨‹-å­¸ç¿’æ–¹æ³•ã€é€²ç¨‹å’Œç·šç¨‹çš„å€åˆ¥>javaä½µç™¼ç·¨ç¨‹-å­¸ç¿’æ–¹æ³•ã€é€²ç¨‹å’Œç·šç¨‹çš„å€åˆ¥</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b7ce9ac1.html alt=javaä½µç™¼ç·¨ç¨‹ä¹‹é€²ç¨‹ç‹€æ…‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0779ab7cadfe428f8d74d66161aa48b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b7ce9ac1.html title=javaä½µç™¼ç·¨ç¨‹ä¹‹é€²ç¨‹ç‹€æ…‹>javaä½µç™¼ç·¨ç¨‹ä¹‹é€²ç¨‹ç‹€æ…‹</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>