<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼） | 极客快訊</title><meta property="og:title" content="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/431a4fb9cb0f4359a50cfec2a27d5ebd"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4313f7a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4313f7a.html><meta property="article:published_time" content="2020-10-29T20:50:35+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:35+08:00"><meta name=Keywords content><meta name=description content="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/4313f7a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><p>『運籌OR帷幄』原創</p><p><br></p><p><strong>作者：康仔</strong></p><p><br></p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/431a4fb9cb0f4359a50cfec2a27d5ebd><p class=pgc-img-caption></p></div><p>編者按：</p><p>列生成算法作為一種處理大規模線性規劃問題的常用算法，在為NP-hard 問題設計啟發式算法方面亦有廣泛的應用，同時常與DW分解聯合使用。本文從下料問題的建模方式出發，向讀者展示了簡單的適用於列生成算法的問題模型特徵。本文將使用Python調用Gurobi實現下料問題的列生成算法求解。由於下料問題模型特性，因此省去了DW分解方法的贅述，其次基於下料問題子問題的特殊性，也省去了對普適的子問題求解方法（例如動態規劃，分支定界等）的介紹，因此本文將是一篇言簡意賅的列生成算法入門教程。</p><p><br></p><p>該文首次編輯於2018.1.11，本次為舊文新發。</p><p><br></p><p><strong>【編碼】</strong>系列文章為<strong>『運籌OR帷幄』</strong>最新推出的版塊之一，主要聚焦於經典算法的代碼實現及案例可視化，或最新paper算法復現。目的是為了理論聯繫實際，以代碼為基礎讓算法理論能夠落地。</p><p><strong>前言：</strong></p><p>“列生成方法（Column Generation，CG）用來解決大型線性規劃問題”，這是許多書中對列生成算法的描述最多的一句話，接下來的D-W分解（Dantzig-Wolfe decomposition），可能就讓初學者迷迷糊糊，從理論到理論的證明並不是工科生的強項，所以我換了一個角度來簡單描述一下列生成方法的一個初步使用。旅行商問題（Travelling salesman problem,TSP），車輛路徑問題（Vehicle Routing Problem,VRP），車間調度問題（scheduling）等一系列組合優化問題的下界（lower bound）求解方向的論文可以查得到許多，其中也有人使用拉格朗日鬆弛（lagrangian relaxation）等不同的求解技術。</p><p><br></p><p>優化對象：一維下料問題</p><p>1</p><p><br></p><p>一維下料問題的 一般描述是：鋼材廠（也許是木材廠，鋁材廠，造紙廠，emmm..）有一批鋼管數量為</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0133ce22642b4600a085e2c6ec3d8b9a><p class=pgc-img-caption></p></div><p>，長度都為</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/435901b78cae432e8dd8fff01000c885><p class=pgc-img-caption></p></div><p>；假設有</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5e2710a94189475fa089bd474672b691><p class=pgc-img-caption></p></div><p>個顧客，來鋼廠下訂單:每位顧客需要長度為</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b84f6a0354b647ee9c4a605f0a753784><p class=pgc-img-caption></p></div><p>（</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/06625b41d89649fb80e45fe62953e5c1><p class=pgc-img-caption></p></div><p>，也就是下文切割規格 ）的鋼管</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/97d328e342054c57954874e1fd06e88c><p class=pgc-img-caption></p></div><p>根，優化的目標是:如何切割鋼管使得我既能滿足客戶的需求又使得的消耗的最少呢？</p><p><br></p><p>顯然，在不加附加約束的情況下，這是一個典型的0-1整數規劃(IP)，可以參見 @留德華叫獸相關介紹，例如：</p><p><strong>【學界】離散/整數/組合/非凸優化概述及其在AI的應用：http://t.cn/RohgcpT</strong></p><p>而且我們知道最差的情況是用料</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a378e6386faa482493b1350d8ce4ee42><p class=pgc-img-caption></p></div><p>，也就是我每一根都拿來切，每一根只切成</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b84f6a0354b647ee9c4a605f0a753784><p class=pgc-img-caption></p></div><p>的長度。這樣是很可恥的，剩下的拿來做金箍棒嗎？？所以我們得利用數學的力量！建模啊</p><p><br></p><ul class=list-paddingleft-2><li>模型1：一種直觀的建模方式</li></ul><p><br></p><p>第一步：確定我們的決策變量為</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4330d5424140451ca6a76a9c28fa58fe><p class=pgc-img-caption></p></div><p>表示是否寫切割鋼管i, 既然是整數規劃，</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4330d5424140451ca6a76a9c28fa58fe><p class=pgc-img-caption></p></div><p>的取值只能是整數。</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1aa96207af624b688edb50352a45d9fe><p class=pgc-img-caption></p></div><p>在每一根上我們不可能只切割一種</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b84f6a0354b647ee9c4a605f0a753784><p class=pgc-img-caption></p></div><p>；為確保最小浪費，所以要儘可能安排多的切割規格在一根鋼管上，所以還需要添加變量</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8b6f75fe2e9f4ca3bc0844bc1767aca4><p class=pgc-img-caption></p></div><p>,表示在鋼管i上切</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8b6f75fe2e9f4ca3bc0844bc1767aca4><p class=pgc-img-caption></p></div><p>次來滿足客戶j的需求。到此大家可能自己也把約束想出來了：</p><p>優化目標：最少的切割鋼管數</p><p>約束1：不管怎樣咋切，顧客的要求一定滿足（他們是上帝）</p><p>約束2：我在選中的每根鋼管上切割，不管安排幾個切割規格，加和總不能大於我的鋼管長度</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/435901b78cae432e8dd8fff01000c885><p class=pgc-img-caption></p></div><p>（巧婦難為無米之炊）</p><p>這種方式emmmmm...........不太數學，換一下</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/86767c8a0bbd4cab81ca73e2cc3bec8d><p class=pgc-img-caption></p></div><p>還是抽象？那具體到一個例子來看：</p><p>假設我的鋼管長度為120米，總共有240根，現在有10個顧客，顧客的要求用Python隨機生成如下：</p><p>demands = [10, 11, 11, 12, 12, 12, 10, 11, 12, 10]</p><p>lengths = [92, 59, 97, 32, 38, 55, 80, 75, 108, 57]</p><p>把上邊約束寫開：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f971dade5da940098af38ded36313e8b><p class=pgc-img-caption></p></div><p>這樣就比較清楚了，接下來，我們用Python2.7寫調用gurobi 求解器進行求解(這個模型這麼完美，一定很快得出答案！千萬不要這麼想，因為我們還沒用列生成)，我們把程序錄入</p><pre><code>#-*- coding: cp936 -*-import numpy as npimport randomfrom gurobipy import *L = 120 #最大長M =240 #總數demands =[ 10 , 11,  11 , 12 , 12 , 12 , 10 , 11 , 12 , 10]lengths = [ 92,  59  ,97 , 32,  38 , 55 , 80 , 75 ,108,  57]demands=np.array(demands )lengths =np.array(lengths)c = {}x={}mol = Model("XP")for i in range(M):    c[i] = mol.addVar(obj=1,  vtype=GRB.BINARY,name="c[%s]"%i ) #添加決策變量for i in range(10):    for j in range(M):#添加變量        x[j,i]=mol.addVar(lb=0,obj=0,  vtype=GRB.INTEGER,name="c[%s][%s]"%(j,i))for k in range(10):            coef =[1 for j in range(M) ]    var = [x[j,k] for j in range(M) ]    mol.addConstr(LinExpr(coef, var), "&gt;=", demands[k], name="demands" )for l in range(M):            coef = [lengths[i] for i in range(10)]    var = [x[l, i] for i in range(10) ]    mol.addConstr(LinExpr(coef, var), "&lt;=", L*c[l], name="withlimit" )mol.optimize()mol.printAttr('x')obj = mol.getObjective()print objfor v in mol.getVars():    print('%s %g' % (v.varName, v.x))</code></pre><p>waiting。。。。</p><p>waiting。。。。</p><p>。。。。。。</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15d3a448b7de48bd93d52c5acbf33a69><p class=pgc-img-caption></p></div><p>gurobi的求解過程</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e13d68624a1c44889b52c88a97627f5d><p class=pgc-img-caption></p></div><p>輸出的最後的結果</p><p>以上截圖是gurobi的log部分截圖，我們找到最優了！只需要切割72根，沒錯，時間就是這麼長1295s，我們的規模也不大，10客戶都滿足不了？？工廠恐怕每天不止10個客戶............不要想：一定是Python的問題！你可以用C++,C, 那就是求解器gurobi的問題，你可以選用cplex,(有用的，可以對比結果)。此模型在1939 年，由前蘇聯經濟學家 Kantorovich 給出[1]</p><ul class=list-paddingleft-2><li>對模型1的反思</li></ul><p><br></p><p>只要思想不滑坡，方法總比困難多！</p><p>如果我們這樣思考：在模型1中我們算的是最小的鋼管被切割數量，但是我們同時也知道了每一種切割規格被切割的次數和每一根鋼管上的切割規格。我們可以把每一種鋼管的切割看著成一種模式，再次建模。</p><p>舉例說明：假設有4個顧客和其要求來看，其要求的長度lengths=[92, 59, 97, 32]數量是demands=[10, 11, 11, 12]我們可以列出其切割模式：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d6a0228ffc304154830b5d5cd7d6e992><p class=pgc-img-caption></p></div><p>。。。</p><p>可以看出我們只要從中找出最好的組合，問題就迎刃而解。換成數學表達形式：</p><p>用</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4330d5424140451ca6a76a9c28fa58fe><p class=pgc-img-caption></p></div><p>此時用來表示切割模式</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4c3bd844c1674448bb796b9e77afe007><p class=pgc-img-caption></p></div><p>使用的次數;</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/44c4a6ef628544239f6617a35dcef7fe><p class=pgc-img-caption></p></div><p>表示在第j種模式下，第i個要求切割次數。</p><p><br></p><p>表示成矩陣形式：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6a6076af703c4e18bcaeef89bae3969b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/727cf69f2aa84cd0831aa8127416da15><p class=pgc-img-caption></p></div><p>其第一列表示的含義第二種要求切割兩次，其餘的不切取0。那每一列就代表一個可行的切割方式，把所有的的列找出來，那問題就解決了。但是我們面臨的問題是當我的要求是幾百個客戶時，它可行的列的個數是成千上萬個，窮舉找出所有的列是不可行的，這就是我們面臨的組合爆炸問題。但還是要給出這個問題的模型</p><ul class=list-paddingleft-2><li>模型2 ：列生成初探</li></ul><p><br></p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4b4d8ff9341b4517864355cb5d5cc3e1><p class=pgc-img-caption></p></div><p>當</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4330d5424140451ca6a76a9c28fa58fe><p class=pgc-img-caption></p></div><p>取正整數的時候，又是一個整數規劃，這種表現形式就是我們熟知的set covering形式（參見孫小玲《整數規劃》）。這個模型比上一個更為簡單，但是面臨的 問題是當規模較大的時候無法找到所有的列。</p><p>當我們把</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4330d5424140451ca6a76a9c28fa58fe><p class=pgc-img-caption></p></div><p>鬆弛以後，即讓其取值為正數。模型就變成一個線性規劃，對於線性規劃，我們想到的就是單純形法，從一個頂點解開始，求其檢驗數，迭代....思路是對的。但是單純形法要求知道所有列，這又矛盾！所以我們要找到一種方法使得，不需要列出所有列的迭代方式就能求解。</p><p>在單純形法和其對偶形式中：單純形法及其對偶中，其非基變量檢驗數最終的表達形式</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/748fba63be2544b794a75fb2cfe37978><p class=pgc-img-caption></p></div><p>,如果</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/23a58b76039748689c9fe585666c01a4><p class=pgc-img-caption></p></div><p>，此時便找到最優解，否則我們選擇進基列和出基列進行換基，再次迭代（檢驗數有兩種的表現形式，其中差一個負號，判斷方式也就相反）。</p><p>所以列生成的思想：單純形法要找到所有的N！我們想能不能不用找出所有列，我們先找到其中的一小部分可行解，計算其檢驗數，如果小於零，再添加一列，再求解新問題及其檢驗數，如果還小於零，再添加一列，往復循環，直至求到最優。我們把這種方法成為列生成方法。當只有部分可行解構成的模型時，如下所示，我們把此模型稱之為限制主問題（RMP），其此時檢驗數的形式</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3a208c8e9b0145fe893feabd70edd158><p class=pgc-img-caption></p></div><p>,令</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/39463208be0945caa7ce2d1cc487051a><p class=pgc-img-caption></p></div><p>,檢驗數的形式變為</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/60f2404764734c0b9676d594dc936b39><p class=pgc-img-caption></p></div><p>，在此問題中</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fbabc6116fef4ae3a422bc5602254b9a><p class=pgc-img-caption></p></div><p>為1，</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7ce3b8e76c1946528a328f0ccba5947f><p class=pgc-img-caption></p></div><p>可以通過gurobi 等求解器求出。那麼剩下的就是解決怎麼找到可行的一列m，我們把尋找找求解可行的一列m稱為求解子問題（sub-problem）。</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8fa907cde20441e09889870e43a77130><p class=pgc-img-caption></p></div><p>其中m&lt;n，以上的形式就是限制主問題，當我們求解限制主問題時，我們會得到乘子</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7ce3b8e76c1946528a328f0ccba5947f><p class=pgc-img-caption></p></div><p>，子問題是什麼呢？既然當我們的檢驗數是負的才可以添加一列，等價於我要找一個最大的</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6096f983286e4d009286a18129c51a38><p class=pgc-img-caption></p></div><p>(</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6096f983286e4d009286a18129c51a38><p class=pgc-img-caption></p></div><p>代表每一根鋼管上的切割模式及其切割次數),這一列要滿足的情況就是我切割要求的長度</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b84f6a0354b647ee9c4a605f0a753784><p class=pgc-img-caption></p></div><p>時，不能大於我的鋼管固定長度</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/435901b78cae432e8dd8fff01000c885><p class=pgc-img-caption></p></div><p></p><p>寫出子問題</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7e30bc1f606c4fdd8743e86e842c4f0a><p class=pgc-img-caption></p></div><p>求出新的一列然後添加到限制主規劃中，重新求解，再更新子問題，求解新的一列。</p><p>我們仍然通過一個小例子來看一下列生成算法：</p><p>假設鋼管的長度是120米,有三個顧客來下單lengths=[56,78,30];demands=[50,65,80],首先，我們要建模並且給出一個可行解，最笨的可行解莫過於每一種模式只取一種</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b84f6a0354b647ee9c4a605f0a753784><p class=pgc-img-caption></p></div><p>那在RLMP模型下,</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8627b83681b14a2abc9dd12b52b6b555><p class=pgc-img-caption></p></div><p>,</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ade467e3ff8d443fa2981d243cf07940><p class=pgc-img-caption></p></div><p>,</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/75ff371011a4453e830b73f29599cee8><p class=pgc-img-caption></p></div><p>=1，其餘取值為0建立模型如下：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4d87768fa1c74b6ab3d59d340e4440f2><p class=pgc-img-caption></p></div><p>還是使用Python建模，gurobi求解，並且gurobi 可以通過getAttr(GRB.Attr.Pi)來獲得乘子</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7ce3b8e76c1946528a328f0ccba5947f><p class=pgc-img-caption></p></div><pre><code>================= RESTART: C:\gurobi752\win64\python27\m.py =================Optimize a model with 3 rows, 3 columns and 3 nonzerosIteration    Objective       Primal Inf.    Dual Inf.      Time       0    1.9500000e+02   0.000000e+00   0.000000e+00      0sSolved in 0 iterations and 0.06 secondsOptimal objective  1.950000000e+02y1 = 50y2 = 65y3 = 80Obj: 195pi: [1.0, 1.0, 1.0]&gt;&gt;&gt;</code></pre><p>接下來我們要求解子問題，看能否找到一列使得檢驗數為負，從而添加一列，繼續優化</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dd4a4d82c9e0413b967261d1cab970cc><p class=pgc-img-caption></p></div><p>結果為：</p><pre><code>Optimize a model with 1 rows, 3 columns and 3 nonzerosIteration    Objective       Primal Inf.    Dual Inf.      Time       0    4.0000000e+00   0.000000e+00   0.000000e+00      1sSolved in 0 iterations and 1.15 secondsOptimal objective  4.000000000e+00m1 = 0m2 = 0m3 = 4Obj: 4</code></pre><p>我們找到一列新的</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e600021f53654abd825f6afbfb799e99><p class=pgc-img-caption></p></div><p>,然後計算檢驗數</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2b98f25fd89948c0bd48e054431d8f3c><p class=pgc-img-caption></p></div><p>=1-4=-3，可以將這一列選中，添加RMP變為：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cb5241ba01c0436b9354c1c90dce19a5><p class=pgc-img-caption></p></div><p>結果為：</p><pre><code>Optimize a model with 3 rows, 4 columns and 4 nonzerosIteration    Objective       Primal Inf.    Dual Inf.      Time       0    1.3500000e+02   0.000000e+00   0.000000e+00      0sSolved in 0 iterations and 0.03 secondsOptimal objective  1.350000000e+02y1 = 50y2 = 65y3 = 0y4 = 20Obj: 135pi: [1.0, 1.0, 0.25]</code></pre><p>再求解子問題：</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3984cd7f91eb43b4817e9fd8723e6d0a><p class=pgc-img-caption></p></div><p>結果為：</p><pre><code>Optimize a model with 1 rows, 3 columns and 3 nonzerosIteration    Objective       Primal Inf.    Dual Inf.      Time       0    2.1428571e+00   0.000000e+00   0.000000e+00      0sSolved in 0 iterations and 0.07 secondsOptimal objective  2.142857143e+00m1 = 2.14286m2 = 0m3 = 0Obj: 2.14286</code></pre><p>顯然，檢驗數仍為負數，可以選擇一列再迭代</p><p>Continue。。。</p><p>注意到我們的子問題沒有讓變量取整數，是因為在列生成算法中，通常需要自己設計分枝策略，所以未規定其變量為整數。</p><p>第二種模型由Gilmore 和 Gomory 分別在文章[2]、[3]、[4]中提出並使用。</p><p>現簡單給出列生成算法步驟：</p><p>step1：給出模型的初始解，其解代表可行列</p><p>step2: 求解主規劃（RMP）並獲取乘子</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7ce3b8e76c1946528a328f0ccba5947f><p class=pgc-img-caption></p></div><p>step3: 求解子問題 ，並計算</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2b98f25fd89948c0bd48e054431d8f3c><p class=pgc-img-caption></p></div><p>，如果小於0，向限制主問題中添加一列求解，返回step2</p><p>step4: 若</p><div class=pgc-img><img alt="優化 | 從下料問題看整數規劃中的列生成方法（附求解器源代碼）" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2b98f25fd89948c0bd48e054431d8f3c><p class=pgc-img-caption></p></div><p>大於等於零，停止算法，輸出最優解</p><p><br></p><p>結論</p><p>2</p><p><br></p><p>但是當我們去翻看SCI中關於這方面的論文，會發現列生成方法通常結合動態規劃，分支定界算法結合使用，稱之為分支定價算法（branch and price）。這裡我們通過一個下料問題小例子，來從另一個角度闡述了一下列生成算法的思想，繞過了DW分解的理論，但是如果想要深入研究，請從線性規劃，凸優化，閔可夫斯基定理等開始看起，本文的指導思想是孫小玲教授《整數規劃》，章學仁《線性規劃》，錢頌迪《運籌學》參考寫成，參考論文：</p><p>[1] Haessler R W. Sweeney P E. Cutting Stock Problem and Solution Procedures [J]. European Journal of Operation of Research, 1991, 54: 141-150</p><p>[2] Gilmore P C, Gomory R E. A linear programming approach to the cutting stock problem [J] Operations Research,1961, 9: 849-859.</p><p>[3] Gilmore P C, Gomory R E. A linear programming approach to the cutting stock problem [J]. Operations Research, 1963, 1:863-888.</p><p>[4] Gilmore P C, Gomory R E. Multistage cutting stock problems of two and more dimensions [J].Operations Research, 1965, 13: 94-120.</p><p>由於匆忙，難免有不足之處，懇請賜教。</p><p>對於車間調度的問題求解最優解的問題，大家使用最多的是智能算法比如遺傳，模擬退火，果蠅，蝙蝠，花粉，粒子群，EDA算法等等，但是通過列生成得到的優良的下界可以對智能算法的上界進行一個良好的估計，這也是價值所在。</p><p>關於這部分內容，可以參考：</p><p><strong>【學界】整數規劃精確算法/近似算法/(元)啟發算法/神經網絡反向傳播等算法的區別與關聯：http://t.cn/RlNoJ19</strong></p><blockquote><p><strong>主問題和子問題的Python 程序已上傳（鏈接：https://pan.baidu.com/s/1jIVMNnK 密碼：znru）但作者暫時沒有做一鍵啟動，以後會添加在上述鏈接中。</strong></p></blockquote><hr><p>審稿人 知乎ID：PhilFWu 系美國俄亥俄州立大學運籌學博士現為LLamasoft的應用科學家，專注於研究並編寫路徑優化問題和供應鏈網絡優化問題的求解器；博士期間專注於隨機優化，整數規劃，最優控制理論，以及電力市場及電網運行策略；曾在洛斯·阿拉莫斯國家試驗室研究天然氣管網的控制與優化，天然氣市場的重構。</p><p>知乎ID：吐服 大連海事大學物流實驗室：楊敏，大連海事物流工程與管理研究生在讀，研究方向為港口仿真，航線優化等。</p><p>知乎ID：濁清風 孫卓，大連海事大學物流系教授，博士生導師，從事交通物流網絡優化、計算機仿真等研究。曾獲由阿里巴巴、香港科技大學、美國INFORMS協會舉辦的菜鳥網絡全球算法大賽季軍。開源空間建模框架MicroCity：http://microcity.github.io/。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>下料</a></li><li><a>優化</a></li><li><a>問題</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/9ce957f.html alt=甘蔗雙高栽培存在的問題，及優化對策，趕緊看，太實用了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b044044827c643cc8e376db886c6db62 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/9ce957f.html title=甘蔗雙高栽培存在的問題，及優化對策，趕緊看，太實用了>甘蔗雙高栽培存在的問題，及優化對策，趕緊看，太實用了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2686b41.html alt="優化 | 如何寫對偶問題" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8108f2e09f634f229e77ca7effe9712b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2686b41.html title="優化 | 如何寫對偶問題">優化 | 如何寫對偶問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65b6452.html alt="優化 | 從集合劃分問題到列生成算法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4c93a259a0354762a467da417e558fc5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65b6452.html title="優化 | 從集合劃分問題到列生成算法">優化 | 從集合劃分問題到列生成算法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2f87337a.html alt=收不到交警便民通知？可能是這裡出了問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdf88511c83f431c9f75609d9e44d585 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2f87337a.html title=收不到交警便民通知？可能是這裡出了問題>收不到交警便民通知？可能是這裡出了問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8db1a012.html alt=問題408:在變壓器送電前後怎樣檢測差動保護裝置？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e7912ea051664f678d2616da1c042a37 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8db1a012.html title=問題408:在變壓器送電前後怎樣檢測差動保護裝置？>問題408:在變壓器送電前後怎樣檢測差動保護裝置？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d54fe0b.html alt="深度研究自然梯度優化，從入門到放棄 | Deep Reading" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2cc1b8ef47a5458190c22d26d8bd164c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d54fe0b.html title="深度研究自然梯度優化，從入門到放棄 | Deep Reading">深度研究自然梯度優化，從入門到放棄 | Deep Reading</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d8adef2.html alt=樑配筋特徵，板、柱鋼筋下料分析，剪力牆筋構造，鋼筋知識順口溜 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/41066b7c174f47f38ee89f4113601791 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d8adef2.html title=樑配筋特徵，板、柱鋼筋下料分析，剪力牆筋構造，鋼筋知識順口溜>樑配筋特徵，板、柱鋼筋下料分析，剪力牆筋構造，鋼筋知識順口溜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/84e317ac.html alt=檢測虛設問題，應當採取強有力的措施加以解決 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/115bad769be144f19346317e77eed4b3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/84e317ac.html title=檢測虛設問題，應當採取強有力的措施加以解決>檢測虛設問題，應當採取強有力的措施加以解決</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dfdb3278.html alt=南通中海問題多多？！竟遭市住建局通報批評 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RZ6gaqQHcJXxWV style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dfdb3278.html title=南通中海問題多多？！竟遭市住建局通報批評>南通中海問題多多？！竟遭市住建局通報批評</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3afc3600.html alt="歡居改造家 一篇看懂，砌牆需要注意的問題有哪些，再也不怕被坑" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fe51a7bcc26445fa95824ca74c172f17 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3afc3600.html title="歡居改造家 一篇看懂，砌牆需要注意的問題有哪些，再也不怕被坑">歡居改造家 一篇看懂，砌牆需要注意的問題有哪些，再也不怕被坑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/97268c50.html alt=蛋糕製作中的十一個常見問題及原因 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/2658ec69-8ea5-490e-a30a-08c8ed990c73 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/97268c50.html title=蛋糕製作中的十一個常見問題及原因>蛋糕製作中的十一個常見問題及原因</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7245dc43.html alt=別說我沒提醒你！螺栓連接有問題，趕緊測一下扭矩！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/35dce4fcbaa64306ab138cc84d150d4e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7245dc43.html title=別說我沒提醒你！螺栓連接有問題，趕緊測一下扭矩！>別說我沒提醒你！螺栓連接有問題，趕緊測一下扭矩！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/56faa63d.html alt=航空發動機軸承問題解析：慎重選用軸承遊隙和​防止軸承打滑 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fa005c54189c4c61bf01b5c6f8afe285 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/56faa63d.html title=航空發動機軸承問題解析：慎重選用軸承遊隙和​防止軸承打滑>航空發動機軸承問題解析：慎重選用軸承遊隙和​防止軸承打滑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7deecdbb.html alt=定製文件櫃需要注意哪些問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/931a82db62a14175b712856354243b2e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7deecdbb.html title=定製文件櫃需要注意哪些問題>定製文件櫃需要注意哪些問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/25ca0d4f.html alt=有些暗傷，破解與和解，從來都不是問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b5e2b6f988c141fdbd859d5f5e943129 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/25ca0d4f.html title=有些暗傷，破解與和解，從來都不是問題>有些暗傷，破解與和解，從來都不是問題</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>