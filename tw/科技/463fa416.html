<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ | æå®¢å¿«è¨Š</title><meta property="og:title" content="MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/827b597cea3c4927a30175adbb9ed922"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/463fa416.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/463fa416.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/463fa416.html><meta property="article:published_time" content="2020-10-29T21:09:58+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:58+08:00"><meta name=Keywords content><meta name=description content="MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/463fa416.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p><br></p><h3 class=pgc-h-arrow-right><br></h3><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/827b597cea3c4927a30175adbb9ed922><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>æ¦‚è¿°</h3><p>æ•¸æ“šåº«ç³»çµ±ä¸€èˆ¬æ¡ç”¨WAL(write ahead log)æŠ€è¡“ä¾†å¯¦ç¾åŸå­æ€§å’ŒæŒä¹…æ€§ï¼ŒMYSQLä¹Ÿä¸ä¾‹å¤–ã€‚WALä¸­è¨˜éŒ„äº‹å‹™çš„æ›´æ–°å…§å®¹ï¼Œé€šéWALå°‡éš¨æ©Ÿçš„é«’é å¯«å…¥è®Šæˆé †åºçš„æ—¥èªŒåˆ·ç›¤ï¼Œå¯æ¥µå¤§æå‡æ•¸æ“šåº«å¯«å…¥æ€§èƒ½ï¼Œå› æ­¤ï¼ŒWALçš„å¯«å…¥èƒ½åŠ›æ±ºå®šäº†æ•¸æ“šåº«æ•´é«”æ€§èƒ½çš„ä¸Šé™ï¼Œå°¤å…¶æ˜¯åœ¨é«˜ä½µç™¼æ™‚ã€‚</p><p>åœ¨MYSQL 8ä»¥å‰ï¼Œå¯«æ—¥èªŒè¢«ä¿è­·åœ¨ä¸€æŠŠå¤§é–ä¹‹ä¸‹ï¼Œæœ¬ä¾†ä¸¦è¡Œäº‹å‹™æ—¥èªŒå¯«å…¥è¢«äººç‚ºä¸²è¡ŒåŒ–è™•ç†ã€‚é›–ç°¡åŒ–äº†é‚è¼¯ï¼Œä½†ä¹Ÿæ¥µå¤§é™åˆ¶äº†æ•´é«”çš„æ€§èƒ½è¡¨ç¾ã€‚8.0å¾ˆå¤§çš„ä¸€éƒ¨åˆ†å·¥ä½œä¾¿æ˜¯å°‡æ—¥èªŒç³»çµ±ä¸¦è¡ŒåŒ–ã€‚</p><h3 class=pgc-h-arrow-right>æ—¥èªŒä¸¦è¡ŒåŒ–</h3><p>æ—¥èªŒä¸¦è¡ŒåŒ–çš„æ€è·¯ä¹Ÿå¾ˆç°¡å–®ï¼šå°‡å¯«æ—¥èªŒæ‹†åˆ†ç‚ºå…©å€‹éç¨‹ï¼š</p><ol start=1><li>å¾å…§å­˜log bufferä¸­ç‚ºæ—¥èªŒé ç•™ç©ºé–“</li></ol><p>2. å°‡æ—¥èªŒå…§å®¹æ‹·è²è‡³1é ç•™çš„ç©ºé–“</p><p>è€Œåœ¨é€™å…©å€‹æ­¥é©Ÿä¸­ï¼Œåªéœ€è¦æ­¥é©Ÿ1ä¿è­‰åœ¨å¤šä½µç™¼ä½µç™¼é ç•™ç©ºé–“æ™‚çš„æ­£ç¢ºæ€§å³å¯ï¼Œç¢ºä¿ä½µç™¼ç·šç¨‹é ç•™çš„æ—¥èªŒç©ºé–“ä¸æœƒäº¤å‰ã€‚ä¸€æ—¦é ç•™æˆåŠŸï¼Œæ­¥é©Ÿ2å„ä½µç™¼ç·šç¨‹å¯äº’ä¸å¹²æ“¾åœ°åŸ·è¡Œæ‹·è²è‡³è‡ªå·±çš„é ç•™ç©ºé–“å³å¯ï¼Œé€™å¤©ç„¶å¯ä½µç™¼ã€‚</p><p>è€Œåœ¨æ­¥é©Ÿ1ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åŸå­è®Šé‡ä¾†ä»£æ›¿ä»£åƒ¹è¼ƒé«˜é–å¯¦è¡Œé ç•™ï¼Œåœ¨mysql 8å¯¦ç¾ä¸­ï¼Œå…¶å¯¦å°±å…©è¡Œä»£ç¢¼ï¼š</p><pre><code>Log_handle log_buffer_reserve(log_t &amp;log, size_t len) {    ...    const sn_t start_sn = log.sn.fetch_add(len);    const sn_t end_sn = start_sn + len;    ...}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåªéœ€è¦ä¸€å€‹åŸå­è®Šé‡log.snè¨˜éŒ„ç•¶å‰åˆ†é…çš„ä½ç½®ä¿¡æ¯ï¼Œä¸‹æ¬¡åˆ†é…æ™‚æ›´æ–°è©²log.snå³å¯ï¼Œéå¸¸ç°¡æ½”å„ªé›…ã€‚</p><p>8.0ä¸­å¼•å…¥çš„ä¸¦è¡Œæ—¥èªŒç³»çµ±é›–ç„¶å¾ˆç¾å¥½ï¼Œä½†æ˜¯ä¹Ÿæœƒå¸¶ä¾†ä¸€äº›å°éº»ç…©ï¼Œæˆ‘å€‘ä¸‹é¢æœƒè©³ç´°æè¿°å…¶å¼•å…¥çš„æ—¥èªŒç©ºæ´å•é¡Œä¸¦é—¡è¿°å…¶è§£æ±ºæ–¹æ¡ˆã€‚</p><h3 class=pgc-h-arrow-right>Log Bufferç©ºæ´å•é¡Œ</h3><p>Mysql 8.0ä¸­ä½¿ç”¨äº†ç„¡é–é åˆ†é…çš„æ–¹å¼å¯ä»¥ä½¿MTRä¸¦è¡Œåœ°å°‡WALæ—¥èªŒå¯«å…¥åˆ°Log Bufferï¼Œæå‡æ€§èƒ½ã€‚ä½†é€™æ¨£å‹¢å¿…æœƒå¸¶ä¾†Redo Log Bufferçš„ç©ºæ´å•é¡Œï¼Œå¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/4227f14c46a243759c49e77d338f7d57><p class=pgc-img-caption></p></div><p>ä¸Šåœ–ä¸­ï¼Œ3å€‹ç·šç¨‹åˆ†åˆ¥åˆ†é…äº†å°æ‡‰çš„redo bufferï¼Œç·šç¨‹1å’Œ3å·²ç¶“å®Œæˆäº†walæ—¥èªŒå…§å®¹çš„æ‹·è²ï¼Œè€Œç·šç¨‹2å‰‡é‚„åœ¨æ‹·è²ä¸­ï¼Œæ­¤æ™‚å¯«å…¥ç·šç¨‹æœ€å¤šéš»èƒ½å°‡thread-1çš„redo logå¯«å…¥æ—¥èªŒæ–‡ä»¶ã€‚ ç‚ºæ­¤ï¼ŒMySQL 8.0ä¸­å¼•å…¥äº† <strong>Link_buf</strong> ã€‚</p><h3 class=pgc-h-arrow-right>Link_bufåŸç†</h3><p>Link_bufç”¨æ–¼è¼”åŠ©è¡¨ç¤ºå…¶ä»–æ•¸æ“šçµæ§‹çš„ä½¿ç”¨æƒ…æ³ï¼Œåœ¨Link_bufä¸­ï¼Œå¦‚æœä¸€å€‹ç´¢å¼•ä½ç½®indexè™•å­˜å„²çš„æ˜¯é0å€¼nï¼Œå‰‡è¡¨ç¤ºLink_bufè¼”åŠ©æ¨™è¨˜çš„é‚£å€‹æ•¸æ“šçµæ§‹ï¼Œå¾indexé–‹å§‹å¾Œé¢nå€‹å…ƒç´ å·²è¢«ä½”ç”¨ã€‚</p><pre><code>template &lt;typename Position = uint64_t&gt;class Link_buf { private:  ...  size_t m_capacity;  std::atomic&lt;Distance&gt; *m_links;  alignas(INNOBASE_CACHE_LINE_SIZE) std::atomic&lt;Position&gt; m_tail;};</code></pre><p>Link_bufæ˜¯ä¸€å€‹å®šé•·æ•¸çµ„ï¼Œä¸”ä¿è­‰æ•¸çµ„çš„æ¯å€‹å…ƒç´ çš„æ›´æ–°æ˜¯åŸå­æ“ä½œçš„ã€‚ä»¥ç’°å½¢çš„æ–¹å¼è¤‡ç”¨å·²ç¶“é‡‹æ”¾çš„ç©ºé–“ã€‚</p><p>åŒæ™‚Link_bufå…§éƒ¨ç¶­è­·äº†ä¸€å€‹è®Šé‡ m_tail è¡¨ç¤ºç•¶å‰æœ€å¤§å¯é”çš„LSNã€‚</p><p>Innodbæ—¥èªŒç³»çµ±ä¸­ç‚ºLog Bufferç¶­è­·äº†å…©å€‹Link_bufé¡å‹çš„è®Šé‡ recent_written å’Œ recent_closed ã€‚ç¤ºæ„åœ–å¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f1b02edfb4b74c96b0a59c375f5ae60c><p class=pgc-img-caption></p></div><p>ä¸Šåœ–ä¸­ï¼Œå…±æœ‰å…©è™•æ—¥èªŒç©ºæ´ï¼Œèµ·å§‹çš„LSNç‚ºlsn1èˆ‡lsn3ï¼Œå‡æœ‰4å€‹å­—ç¯€ã€‚è€Œlsn2è™•çš„redo logå·²ç¶“å¯«å…¥ï¼Œå…±3å€‹å­—ç¯€ã€‚åœ¨ recent_written ä¸­ï¼Œlsn1é–‹å§‹è™•çš„4å€‹atomicå‡æ˜¯0ï¼Œlsn3åŒæ¨£å¦‚æ­¤ï¼Œè€Œlsn2è™•é–‹å§‹çš„å­˜å„²çš„å‰‡æ˜¯3ï¼Œ0ï¼Œ0è¡¨ç¤ºå¾è©²ä½ç½®èµ·çš„3å€‹å­—ç¯€å·²ç¶“æˆåŠŸå¯«å…¥äº†redoæ—¥èªŒã€‚</p><p>æ¥ä¸‹ä¾†ç•¶lsn1è™•çš„ç©ºæ´è¢«å¡«å……å¾Œï¼ŒLink_bufä¸­è©²è™•å°æ‡‰çš„å…§å®¹å°±æœƒè¢«è¨­ç½®ï¼Œå¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0cb803821dbb4986b9754a634a3b29e7><p class=pgc-img-caption></p></div><p>åŒç†ï¼Œç•¶lsn3è™•çš„ç©ºæ´ä¹Ÿè¢«å¡«å……å¾Œï¼Œç‹€æ…‹è®Šæˆä¸‹é¢é€™æ¨£ï¼š</p><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/de6b8c77b1e941cd99b0b09b8364ae6c><p class=pgc-img-caption></p></div><h3 class=pgc-h-arrow-right>Link_bufå¯¦ç¾</h3><p><strong>åˆå§‹åŒ–</strong></p><pre><code>bool log_sys_init(...){    ...    log_allocate_recent_written(log);    ...}â€‹constexpr ulong INNODB_LOG_RECENT_WRITTEN_SIZE_DEFAULT = 1024 * 1024;ulong srv_log_recent_written_size = INNODB_LOG_RECENT_WRITTEN_SIZE_DEFAULT;â€‹static void log_allocate_recent_written(log_t &amp;log) {  // é»˜èªå€¼ç‚º1MB  log.recent_written = Link_buf&lt;lsn_t&gt;{srv_log_recent_written_size};}â€‹// Link_bufæ§‹é€ template &lt;typename Position&gt;Link_buf&lt;Position&gt;::Link_buf(size_t capacity)    : m_capacity(capacity), m_tail(0){  ...  m_links = UT_NEW_ARRAY_NOKEY(std::atomic&lt;Distance&gt;, capacity);  for (size_t i = 0; i &lt; capacity; ++i) {    m_links[i].store(0);  }}</code></pre><p>å¾æ§‹é€ å‡½æ•¸ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒLinkBufå…§æ ¸å¿ƒæˆå“¡æ˜¯ä¸€ç¶­æ•¸çµ„ï¼Œæ•¸çµ„çš„æˆå“¡é¡å‹æ˜¯åŸå­é¡å‹çš„Distanceï¼ˆuint64_tï¼‰ï¼Œæ•¸çµ„æˆå“¡å€‹æ•¸å‰‡ç”±å‰µå»ºè€…æ±ºå®šï¼Œå¦‚Innodbä¸­ç‚ºrecent_writtenå‰µå»ºçš„LinkBufçš„æ•¸çµ„æˆå“¡å€‹æ•¸ç‚º1MBï¼Œè€Œç‚ºrecent_closedå‰µå»ºçš„LinkBufçš„æ•¸çµ„æˆå“¡å€‹æ•¸ç‚º2MBã€‚</p><p>åŒæ™‚ï¼Œå‰µå»ºå®Œæˆå¾Œæœƒå°‡æ•¸çµ„çš„æ¯å€‹æˆå“¡åˆå§‹åŒ–ç‚º0ã€‚</p><h3 class=pgc-h-arrow-right>mtr logæ‹·è²å®Œæˆ</h3><p>mtråœ¨commitæ™‚æœƒå°‡å…¶é‹è¡Œæ™‚ç”¢ç”Ÿçš„æ‰€æœ‰redo logæ‹·è²è‡³Innodbå…¨å±€çš„redo log bufferï¼Œé€™è—‰åŠ©äº† mtr_write_log_t å°è±¡ä¾†å®Œæˆï¼Œä¸”æ¯æ¬¡æ‹·è²æŒ‰ç…§blockç‚ºå–®ä½é€²è¡Œã€‚éœ€è¦èªªæ˜çš„æ˜¯ï¼šä¸€å€‹mträ¸­å¯èƒ½å­˜åœ¨å¤šå€‹blockä¾†å­˜å„²mtré‹è¡Œæ™‚ç”¢ç”Ÿçš„redo logï¼Œæ¯å€‹blockæ‹·è²å®Œæˆå¾Œå‡è§¸ç™¼ä¸€æ¬¡Link_bufçš„æ›´æ–°ã€‚</p><pre><code>struct mtr_write_log_t {  bool operator()(const mtr_buf_t::block_t *block) {    ...    // æ‹·è²å®Œæˆå¾Œè§¸ç™¼LinkBufæ›´æ–°    log_buffer_write_completed(*log_sys, m_handle, start_lsn, end_lsn);  }}â€‹void log_buffer_write_completed(log_t &amp;log, const Log_handle &amp;handle,                                lsn_t start_lsn, lsn_t end_lsn) {  ...  // æ›´æ–°æœ¬æ¬¡å¯«å…¥çš„å…§å®¹ç¯„åœå°æ‡‰çš„LinkBufå…§ç‰¹å®šçš„æ•¸çµ„é …å€¼  log.recent_written.add_link(start_lsn, end_lsn);}â€‹template &lt;typename Position&gt;inline size_t Link_buf&lt;Position&gt;::slot_index(Position position) const {  return position &amp; (m_capacity - 1);}â€‹template &lt;typename Position&gt;inline void Link_buf&lt;Position&gt;::add_link(Position from, Position to) {  // å®šä½æœ¬æ¬¡å¯«å…¥çš„å…§å®¹ç¯„åœæ‰€åœ¨æ•¸çµ„é …index  // ç®—æ³•æ˜¯å°‡èµ·å§‹lsn(@from)å°æ•¸çµ„å®¹é‡å–æ¨¡ï¼Œå³from % capacity  const auto index = slot_index(from);  auto &amp;slot = m_links[index];  slot.store(to - from);}</code></pre><p>åœ¨é€™è£¡æœƒæ‰¾åˆ°start_lsnå°æ‡‰çš„slotï¼Œä¸¦åœ¨è©²slotå…§è¨­ç½®å€¼ç‚ºend_lsn - start_lsnï¼Œè¨˜éŒ„è©²ä½ç½®è™•å·²å¯«å…¥çš„å…§å®¹æ•¸é‡ã€‚</p><p><strong>log_advance_ready_for_write_lsn</strong></p><p>Innodbå°‡redo log bufferå…§å®¹å¯«å…¥æ—¥èªŒæ–‡ä»¶æ™‚éœ€è¦ä¿è­‰ä¸èƒ½å­˜åœ¨ç©ºæ´ï¼Œå³åœ¨å¯«å…¥å‰éœ€è¦ç²å¾—ç•¶å‰æœ€å¤§çš„ç„¡ç©ºæ´lsnã€‚é€™åŒæ¨£ä¾è³´LinkBufã€‚åœ¨å¾Œè‡ºå¯«æ—¥èªŒç·šç¨‹ log_writer çš„ log_advance_ready_for_write_lsn å‡½æ•¸ä¸­å®Œæˆã€‚</p><pre><code>void log_writer(log_t *log_ptr) {    ...    for (uint64_t step = 0;; ++step) {      (void)log_advance_ready_for_write_lsn(log);    }}â€‹bool log_advance_ready_for_write_lsn(log_t &amp;log) {  const lsn_t write_lsn = log.write_lsn.load();  const auto write_max_size = srv_log_write_max_size;â€‹  auto stop_condition = [&amp;](lsn_t prev_lsn, lsn_t next_lsn) {    return (next_lsn - write_lsn &gt;= write_max_size);  };  const lsn_t previous_lsn = log_buffer_ready_for_write_lsn(log);â€‹  if (log.recent_written.advance_tail_until(stop_condition)) {    const lsn_t previous_lsn = log_buffer_ready_for_write_lsn(log);    return (true);  } else {    return (false);  }}</code></pre><p>é€™è£¡çš„é—œéµåœ¨æ–¼å‡½æ•¸ Link_buf::advance_tail_until ï¼Œå³æ¨é€²Link_buf::m_tailã€‚</p><pre><code>bool Link_buf&lt;Position&gt;::next_position(Position position, Position &amp;next) {  const auto index = slot_index(position);  auto &amp;slot = m_links[index];  const auto distance = slot.load();  next = position + distance;  return distance == 0;}â€‹bool Link_buf&lt;Position&gt;::advance_tail_until(Stop_condition stop_condition) {  auto position = m_tail.load();  while (true) {    Position next;    bool stop = next_position(position, next);    if (stop || stop_condition(position, next)) {      break;    }    /* å›æ”¶slot */    claim_position(position);    position = next;  }  if (position &gt; m_tail.load()) {    m_tail.store(position);    return true;  } else {    return false;  }}</code></pre><p>é€™è£¡çš„åŸç†ä¹Ÿæ¯”è¼ƒç°¡å–®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„åœ–ä¾†è¡¨ç¤ºï¼š</p><div class=pgc-img><img alt=MySQLç„¡é–åŒ–WALç³»çµ±é‚£äº›äº‹å…’ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/29eeefb00be2484a8d7d7baec8d214d7><p class=pgc-img-caption></p></div><p>ç°¡å–®ä¾†èªªï¼Œå°±æ˜¯å¾ä¸Šæ¬¡å°¾éƒ¨ä½ç½®(m_tail)é–‹å§‹ï¼Œé †åºéæ­·æ•¸çµ„ï¼Œå¦‚æœè©²é …ä¸ç‚º0ï¼Œå‰‡æ¨é€²m_tailï¼Œå¦å‰‡æ„å‘³è‘—å‡ºç¾äº†ç©ºæ´ï¼Œå°±ä¸èƒ½å†å¾€ä¸‹æ¨é€²äº†ã€‚</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>MySQL</a></li><li><a>ç„¡é–åŒ–</a></li><li><a>WAL</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html alt="MySQL äº‹å‹™è™•ç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html title="MySQL äº‹å‹™è™•ç†">MySQL äº‹å‹™è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html alt="MySQL å­¸ç¿’ç­†è¨˜" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9091681.html title="MySQL å­¸ç¿’ç­†è¨˜">MySQL å­¸ç¿’ç­†è¨˜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8a538d3c.html alt=MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/29d4c92c9c2344838eb72ef948cf08fa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8a538d3c.html title=MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£>MySQLâ€”â€”äº‹å‹™(Transaction)è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a79ba4c0.html alt=MySQLäº‹å‹™éš”é›¢ç´šåˆ¥ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2d4e804a44534da997212c94ea61e90c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a79ba4c0.html title=MySQLäº‹å‹™éš”é›¢ç´šåˆ¥>MySQLäº‹å‹™éš”é›¢ç´šåˆ¥</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3269d080.html alt=MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152203544367254a708f807 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3269d080.html title=MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç†>MySQLæ•¸æ“šåº«çš„äº‹å‹™ç®¡ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html alt=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb044d821f74107a3fd9119fc34c642 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html title=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§>[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/156d2a92.html alt="åœ–è§£MySQL | ã€ŒåŸç†è§£æã€ MySQLçµ„æäº¤(group commit)" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e5444e9094614d6b88bd3fc8ac0524fb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/156d2a92.html title="åœ–è§£MySQL | ã€ŒåŸç†è§£æã€ MySQLçµ„æäº¤(group commit)">åœ–è§£MySQL | ã€ŒåŸç†è§£æã€ MySQLçµ„æäº¤(group commit)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7d322f7b.html alt=MySQLç³»åˆ—-ç¬¬14ç¯‡ï¼šäº‹å‹™è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a5b520dd476345e2b3aac97a8fcb77d5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7d322f7b.html title=MySQLç³»åˆ—-ç¬¬14ç¯‡ï¼šäº‹å‹™è©³è§£>MySQLç³»åˆ—-ç¬¬14ç¯‡ï¼šäº‹å‹™è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d95e4e3f.html alt=MySQLé€²éšä¹‹InnoDBäº‹å‹™åŸå­æ€§å¯¦ç¾åŸç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/e1d208ac-c0ed-4238-bce5-e4b3760228c3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d95e4e3f.html title=MySQLé€²éšä¹‹InnoDBäº‹å‹™åŸå­æ€§å¯¦ç¾åŸç†>MySQLé€²éšä¹‹InnoDBäº‹å‹™åŸå­æ€§å¯¦ç¾åŸç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/efc2a519.html alt=ä½ çŸ¥é“MySQLçš„äº‹å‹™è™•ç†å’Œéš”é›¢ç´šåˆ¥å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/efc2a519.html title=ä½ çŸ¥é“MySQLçš„äº‹å‹™è™•ç†å’Œéš”é›¢ç´šåˆ¥å—ï¼Ÿ>ä½ çŸ¥é“MySQLçš„äº‹å‹™è™•ç†å’Œéš”é›¢ç´šåˆ¥å—ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cf061a5c.html alt="æˆ‘å° MySQL é–ã€äº‹å‹™ã€MVCC çš„ä¸€äº›èªè­˜" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5d6e32482c364fe3b5f9436a30671330 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cf061a5c.html title="æˆ‘å° MySQL é–ã€äº‹å‹™ã€MVCC çš„ä¸€äº›èªè­˜">æˆ‘å° MySQL é–ã€äº‹å‹™ã€MVCC çš„ä¸€äº›èªè­˜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4959ed6a.html alt="æŠ€è¡“åˆ†äº« | MySQL çš„åµŒå¥—äº‹å‹™ã€è‡ªæ²»äº‹å‹™èˆ‡éˆå¼äº‹å‹™" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4959ed6a.html title="æŠ€è¡“åˆ†äº« | MySQL çš„åµŒå¥—äº‹å‹™ã€è‡ªæ²»äº‹å‹™èˆ‡éˆå¼äº‹å‹™">æŠ€è¡“åˆ†äº« | MySQL çš„åµŒå¥—äº‹å‹™ã€è‡ªæ²»äº‹å‹™èˆ‡éˆå¼äº‹å‹™</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ad3f3a1e.html alt="æ•¸æ“šåº«æŠ€è¡“ï¼šMySQL åŸºç¤å’Œ SQL å…¥é–€ï¼Œå–®è¡¨ã€ç´„æŸå’Œäº‹å‹™" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/107897c16ae7461caa62dd375b631afe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ad3f3a1e.html title="æ•¸æ“šåº«æŠ€è¡“ï¼šMySQL åŸºç¤å’Œ SQL å…¥é–€ï¼Œå–®è¡¨ã€ç´„æŸå’Œäº‹å‹™">æ•¸æ“šåº«æŠ€è¡“ï¼šMySQL åŸºç¤å’Œ SQL å…¥é–€ï¼Œå–®è¡¨ã€ç´„æŸå’Œäº‹å‹™</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html alt=æ·±å…¥å­¸ç¿’MySQLäº‹å‹™ï¼šACIDç‰¹æ€§çš„å¯¦ç¾åŸç†ã€Œè½‰ã€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/cdc702d66d6943499997d11e931425eb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html title=æ·±å…¥å­¸ç¿’MySQLäº‹å‹™ï¼šACIDç‰¹æ€§çš„å¯¦ç¾åŸç†ã€Œè½‰ã€>æ·±å…¥å­¸ç¿’MySQLäº‹å‹™ï¼šACIDç‰¹æ€§çš„å¯¦ç¾åŸç†ã€Œè½‰ã€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8ff1c7a8.html alt=è§£è®€æ•¸æ“šåº«ï¼šæ·±å…¥åˆ†æMySQLä¸­äº‹å‹™ä»¥åŠMVCCçš„å¯¦ç¾åŸç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/8f370516-d41a-4803-84ba-2c01e4637c8b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8ff1c7a8.html title=è§£è®€æ•¸æ“šåº«ï¼šæ·±å…¥åˆ†æMySQLä¸­äº‹å‹™ä»¥åŠMVCCçš„å¯¦ç¾åŸç†>è§£è®€æ•¸æ“šåº«ï¼šæ·±å…¥åˆ†æMySQLä¸­äº‹å‹™ä»¥åŠMVCCçš„å¯¦ç¾åŸç†</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>