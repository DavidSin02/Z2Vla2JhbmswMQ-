<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基於CPLD和PCI 總線如何實現數據傳輸？ | 极客快訊</title><meta property="og:title" content="基於CPLD和PCI 總線如何實現數據傳輸？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/S2i9ZtB95D3DMF"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47629893.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/47629893.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/47629893.html><meta property="article:published_time" content="2020-11-14T20:59:43+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:43+08:00"><meta name=Keywords content><meta name=description content="基於CPLD和PCI 總線如何實現數據傳輸？"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/47629893.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基於CPLD和PCI 總線如何實現數據傳輸？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>目前衛星技術已廣泛應用於國民生產的各個方面。通訊衛星，氣象衛星以及遙感衛星，科學探測衛星等與人們的生活密切相關。衛星所收集的大量數據資料能否及時準確地下傳、接收和存儲是衛星技術的一個重要方面。其傳送過程如圖 1 所示。</p><img alt="基於CPLD和PCI 總線如何實現數據傳輸？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S2i9ZtB95D3DMF><p>從衛星上高速下傳的數據由地面衛星接收站轉發為基帶信號，通過光纜傳送至數據中心，速度可達上百兆波特率，要求系統正確接收，經過同步和預處理，然後存入計算機系統，供數據中心使用。其特點是：數據下傳速度高，數據量大，持續時間長，並且要求具有差錯控制功能。而本文介紹了為了滿足此要求而設計的數據接收和存儲系統。</p><p><strong>系統設計</strong></p><p>數據接收和存儲系統主要包括數據接收和預處理，數據傳送，數據存儲等部分。本文主要介紹 CPLD，PCI 總線結構，總線控制器 PCI9054。其系統組成如圖 2 所示。</p><p>基帶串行信號由複雜可編程邏輯器件（CPLD）進行串並轉換，變為 8 位數據信號後根據編碼方式找到同步幀，並進行預處理，然後傳到先入先出存儲器 FIFO， 在邏輯控制下將數據送入 PCI 總線控制器 PCI9054，由 9054 採用 DMA 突發方式傳輸至內存，再存儲到 RAID 磁盤陣列。</p><p>採用複雜可編程邏輯器件（CPLD）可大大減少複雜的控制，通過 VHDL 語言即可靈活設置控制邏輯。而且隨著超大規模集成電路的發展，可編程邏輯器件的發展非常迅速，現已達到數十萬門，速度《1ns（管腳之間）。由於高速電路設計中的干擾問題非常嚴重，因此要儘可能地減少線路設計，所以採用 CPLD 不僅可滿足系統要求的複雜的邏輯關係，而且可大大減少佈線干擾，調試和更改也非常方便，是今後邏輯控制的發展方向。在本系統中，CPLD 不僅實現串並轉換和同步的功能，同時還用以實現數據進入 FIFO 以及由 FIFO 傳入 PCI9054 的傳輸控制邏輯，中斷邏輯以及主機對數據傳輸通道的前端控制。</p><p>在總線結構上，由於數據傳輸速度高，以往的 ISA 總線不能滿足要求（ISA 總線最大傳輸速度 5MB/S），必須採用更快的 PCI 總線結構。PCI 總線協議是 Intel 公司 1992 年提出的，為滿足高速數據輸入 / 輸出要求而設計的一種低成本，高性能的局部總線協議。它是一種獨立於處理器的總線結構，具有 32 位或 64 位的複用的數據地址總線，總線上的設備可以以系統總線的速度在相互之間進行數據傳輸，或直接訪問系統內存，可以達到 132MB/s 的數據傳輸速率（64 位則性能加倍）。採用 PCI 接口的設備必須滿足 PCI 接口規範 V2.2 標準。</p><p>PCI 總線結構具有非常明顯的優點，但其總線規範十分複雜，要求非常嚴格的時序關係，接口的設計難度較大。因此，為了減少 PCI 總線在實際應用中的複雜性，許多公司設計出了專門針對 PCI 總線接口的控制芯片。PCI9054 就是其中比較先進的一種。PCI9054 是 PLX 公司推出的一種 33M， 32 位 PCI 接口控制器，可同時支持 3.3V 和 5V 兩種信號環境，並且具有電源管理功能。其結構框圖如圖 3 所示。</p><img alt="基於CPLD和PCI 總線如何實現數據傳輸？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S2i9ZtmENOKYxI><p>它提供了三種物理總線接口：PCI 總線接口，LOCAL 總線接口，及串行 EPROM 接口。</p><p>LOCAL 總線的數據寬度為 32 位，時鐘頻率可達到 50MHZ， 並且支持數據預取功能。 9054 的 LOCAL 總線與 PCI 總線之間數據傳輸有三種方式：主模式（Direct Master），從模式（Direct Slave），DMA 方式。其內部具有兩個 DMA 數據通道，雙向數據通路上各有 6 個 FIFO 進行數據緩衝，可同時進行高速的數據接收和發送。8 個 32 位 Maibox 寄存器可為雙向數據通路提供消息傳送。9054 還有 2 個 32 位 Doorbell 寄存器，用來在 PCI 和 Local 總線上產生中斷。</p><img alt="基於CPLD和PCI 總線如何實現數據傳輸？" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S2i9Zu5DTpAcBT><p>用戶通過設置其內部寄存器，即可完成各種控制功能。9054 內部寄存器的配置信息可以寫在一片串行 EPROM 中，在加電時 9054 自動加載串行 EPROM 配置信息，並由 PCIBIOS 通過 PCI 總線對配置寄存器讀寫。9054 可方便地與各種存儲設備相連接，在本設計中，它與 FIFO 及 EPROM 的設計接口如圖 4 所示。在本系統中，數據傳輸是單方向的，因此只設計 PCI9504 從 FIFO 中讀數據的情況，只用到與讀 FIFO 有關的信號，如 REN，RCLK 等。其中的 CPLD 邏輯關係如下：</p><p>REN 平時為高電平（無效電平），當 ADS#為低（有效），BLAST 為高（無效），LW/R 為低（有效）時，表明 9054 開始了一個有效的讀數據週期，CPLD 產生一個低電平信號 REN（有效電平）給 FIFO，同時作為 Ready 信號返回給 9054，通知 9054 設備已準備就緒。此信號持續到 ADS#為高（無效）且 BLAST 為低（有效）時，表明 9054 已經開始最後一個週期，此時 REN 信號再次變高電平（無效）。</p><p>OE 信號與 REN 信號可同樣設置，在讀信號允許的同時使能 FIFO 芯片。</p><p>本設計中採用了 PCI9054 的 DMA 工作方式，在此方式下，9054 作為 PCI 總線的主設備，同時也是 Local 總線的控制者，通過設置其 DMA 控制器內部的寄存器即可實現兩總線之間的數據傳送。表 1 顯示了與 DMA 傳輸相關的寄存器在 PCI 總線上的地址分配：</p><p><strong>PCI9054 的 DMA 傳輸過程可由以下幾個步驟實現：</strong></p><p>1．設置方式寄存器：設置 DMA 通道的傳輸方式，寄存器 DMAMODE0 或者 DMAMODE1 的位 9:0- 表示塊傳輸，1- 表示散 / 聚傳輸；</p><p>2．設置 PCI 地址寄存器：設置 PCI 總線側的地址空間。</p><p>3．設置 LOCAL 地址寄存器：設置 LOCAL 總線側的地址空間。</p><p>4．設置傳輸計數寄存器：以字節位單位設置傳輸數據量。</p><p>5．設置描述寄存器：設置 DMA 傳輸的方向；在散 / 聚方式下，位 0 表示傳輸參數的加載地址，0-PCI 地址，1-Local 地址； 位 1 表示傳輸鏈結束，0- 未結束，1- 結束；位 2 設置當前塊傳輸結束後中斷；位 3 指示 DMA 的傳輸方向，0- 從 PCI 總線到 Local 總線，1- 從 Local 總線到 PCI 總線；高 28 位［31:4］表示傳輸參數表的地址指針。</p><p>6．設置命令 / 狀態寄存器：啟動或停止 DMA 操作，並讀此寄存器返回 DMA 狀態 。</p><img alt="基於CPLD和PCI 總線如何實現數據傳輸？" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S2i9ZuUEcpFrhu><p>通過 PCI9054 的 DMA 傳輸方式，高速數據可以較容易地實現從 PCI 接口板上傳入計算機，不必考慮 PCI 總線接口的實現，從而大大簡化了設計中的複雜度，加快了設計週期。</p><p><strong>結語</strong></p><p>隨著數字技術的發展，要求的數據傳輸速率將會越來越高，CPLD 技術和 PCI 總線將會越來越多地應用在數據傳輸的設計中，PCI9054 總線控制器有著較高的性能 / 價格比，將來的應用將會更加廣泛。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>CPLD</a></li><li><a>PCI</a></li><li><a>總線</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/1a3ee55d.html alt=臺達PLC、伺服、總線在多線切割機排線應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/81b4f47eaf02436d85835d3a63750236 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1a3ee55d.html title=臺達PLC、伺服、總線在多線切割機排線應用>臺達PLC、伺服、總線在多線切割機排線應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/02ed3fa0.html alt=教你讀懂M.2、SATA、PCI-E、NVME各個接口含義及用途 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/12ababf2acd8412da3a4b201bec7b6a5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/02ed3fa0.html title=教你讀懂M.2、SATA、PCI-E、NVME各個接口含義及用途>教你讀懂M.2、SATA、PCI-E、NVME各個接口含義及用途</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fc7b0de9.html alt=總線控制盤、多線控制盤的區別及應用-火災自動報警系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/71b4fd2b0652481e9818bdf50bb6fdce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fc7b0de9.html title=總線控制盤、多線控制盤的區別及應用-火災自動報警系統>總線控制盤、多線控制盤的區別及應用-火災自動報警系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38d72913.html alt="美菲特M.2 PCI-E雙路SDI 2K超高清obs錄直播音視頻採集卡介紹" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5e7d0001724f54e15eaf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38d72913.html title="美菲特M.2 PCI-E雙路SDI 2K超高清obs錄直播音視頻採集卡介紹">美菲特M.2 PCI-E雙路SDI 2K超高清obs錄直播音視頻採集卡介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/47ff86c2.html alt=臺式黑蘋果PCI-E轉接卡BCM94360CS千兆無線、藍牙和隔空投送體驗 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e4bf8b35f2174b09a3998c955392be12 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/47ff86c2.html title=臺式黑蘋果PCI-E轉接卡BCM94360CS千兆無線、藍牙和隔空投送體驗>臺式黑蘋果PCI-E轉接卡BCM94360CS千兆無線、藍牙和隔空投送體驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fc370aff.html alt="銀欣發佈PCI-E x16 SSD轉接卡：可裝一塊M.2" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/a6190009dfec64ea421d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fc370aff.html title="銀欣發佈PCI-E x16 SSD轉接卡：可裝一塊M.2">銀欣發佈PCI-E x16 SSD轉接卡：可裝一塊M.2</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/364b9b0f.html alt=RS-485總線的負載能力和通訊電纜長度之間的關係 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/550df2bf0e144cde99083e4c59569628 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/364b9b0f.html title=RS-485總線的負載能力和通訊電纜長度之間的關係>RS-485總線的負載能力和通訊電纜長度之間的關係</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d6eee46.html alt=1553B數據總線測試方法簡介 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7913c6423e0447058a0e80ec5a156228 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d6eee46.html title=1553B數據總線測試方法簡介>1553B數據總線測試方法簡介</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/183f6a3f.html alt=CAN總線入門 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S4bNC723WtYWIV style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/183f6a3f.html title=CAN總線入門>CAN總線入門</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/105065b3.html alt=CAN總線和LIN總線技術介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ca8bc207942d4cae90cd49b5177deb8a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/105065b3.html title=CAN總線和LIN總線技術介紹>CAN總線和LIN總線技術介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5065d0bc.html alt=CAN總線技術詳解與測試 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a5c496f06463480aa1158cb8440879b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5065d0bc.html title=CAN總線技術詳解與測試>CAN總線技術詳解與測試</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/11ef4524.html alt=RS-485總線通信協議解析及拓撲結構 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f3e5a2a9794f4a5f8af0bf545d8197f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/11ef4524.html title=RS-485總線通信協議解析及拓撲結構>RS-485總線通信協議解析及拓撲結構</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e04dac89.html alt=RS-485總線通信故障怎麼處理？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e04dac89.html title=RS-485總線通信故障怎麼處理？>RS-485總線通信故障怎麼處理？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c42dc15e.html alt=「博文連載」Wishbone總線週期之數據組織 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1525419805457574310c5d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c42dc15e.html title=「博文連載」Wishbone總線週期之數據組織>「博文連載」Wishbone總線週期之數據組織</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/745fc178.html alt="「手機維修自學教程」蘋果手機中MIPI總線的認識 mipi總線維修技巧" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d4a675ee343040b8ae67c41671b84ef5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/745fc178.html title="「手機維修自學教程」蘋果手機中MIPI總線的認識 mipi總線維修技巧">「手機維修自學教程」蘋果手機中MIPI總線的認識 mipi總線維修技巧</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>