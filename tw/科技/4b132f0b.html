<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>單片機軟件抗干擾技術 | 极客快訊</title><meta property="og:title" content="單片機軟件抗干擾技術 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/9e53f2d66b104ac58fd26c4cf6baf670"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/4b132f0b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/4b132f0b.html><meta property="article:published_time" content="2020-10-29T21:11:19+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:19+08:00"><meta name=Keywords content><meta name=description content="單片機軟件抗干擾技術"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/4b132f0b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>單片機軟件抗干擾技術</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>電子儀器設備的抗干擾技術是一門博大精深的領域。大部分的電子設備所在的工作環境往往比較惡劣，干擾嚴重，這些干擾會嚴重影響設備的正常工作，使其不能正常運行，比如空調就工作在高溫、大電流、強幹擾(電機)的環境下。因此，為了保證這些設備能在實際應用中可靠地工作，必須要周密考慮和解決抗干擾的問題。除了在硬件上考慮抗干擾的問題，我們也可以在軟件上做一些抗干擾的措施，來提高系統的抗干擾能力。下面簡單介紹了幾個抗干擾的措施，起一個拋磚引玉的作用，希望各位同事可以在工作中加以應用和完善。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9e53f2d66b104ac58fd26c4cf6baf670><p class=pgc-img-caption></p></div><p>一、數字量輸入輸出中的軟件抗於擾</p><p>數字量輸入過程中的干擾，其作用時間較短，因此在採集數字信號時，可多次重複採集，直到若干次採樣結果一致時才認為其有效。例如通過A/D轉換器測量各種模擬量時，如果有干擾作用於模擬信號上，就會使A/D轉換結果偏離真實值。這時如果只採樣一次A/D轉換結果，就無法知道其是否真實可靠，而必須進行多次採樣，得到一個A/D轉換結果的數據系列，對這一系列數據再作各種數字濾波處理，最後才能得到一個可信度較高的結果值。如果對於同一個數據點經多次採樣後得到的信號值變化不定，說明此時的干擾特別嚴重，已經超出允許的範圍，應該立即停止採樣並給出報警信號。如果數字信號屬於開關量信號，如限位開關、<span>操作按扭</span>等，則不能用多次採樣取平均值的方法，而必須每次採樣結果絕對一致才行。這時可編寫一個採樣子程序，程序中設置有采樣成功和採樣失敗標誌，如果對同一開關量信號進行若干次採樣，其採樣結果完全一致，則成功標誌置位;否則失敗標誌<span>置位</span>。後續程序可通過判別這些標誌來決定程序的流向。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0f99448952934208a1a08e59d0ff374a><p class=pgc-img-caption></p></div><p>單片機控制的設備對外輸出的控制信號很多是以數字量的形式出現的。單片機給出一個正確的數據後，由於外部干擾的作用有可能使輸出裝置得到一個被改變了的錯誤數據，從而使輸出裝置發生誤動作。對於數字量輸出軟件抗干擾最有效的方法是重複輸出同一個數據，重複週期應儘量短。這樣輸出裝置在得到一個被幹擾的錯誤信號後，還來不及反應，一個正確的信號又來到了，從而可以防止誤動作的產生。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/efea0fc2972e49fbaecd3a16e5220f4c><p class=pgc-img-caption></p></div><p>在程序結構上，可將輸出過程安排在監控循環中。循環週期取得儘可能短，就能有效地防止輸出設備的錯誤動作。需要注意的是。經過這種安排後輸出功能是作為一個完整的模塊來執行的，與這種重複輸出措施相對應。軟件設計中還必須為各個外部輸出設備建立一個輸出暫存單元，每次將應輸出的結果存入暫存單元中，然後再調用輸出功能模塊將各暫存單元的數據一一輸出，不管該數據是剛送來的，還是以前就有的。這樣可以讓每個外部設備不斷得到控制數據，從而使干擾造成的錯誤狀態不能得以維持。在執行輸出功能模塊時，應將有關輸出接口芯片的初始狀態也一併重新設置。因為由於干擾的作用可能使這些芯片的工作方式控制字發生變化，而不能實現正確的輸出功能，重新設置控制字就能避免這種錯誤.確保輸出功能的正確實現。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6077ceea2d034ebab89671a6525ebc93><p class=pgc-img-caption></p></div><p>二、程序執行過程中的軟件抗於擾</p><p>前面述及的是針對輸入輸出通道而言的，干擾信號還未作用到CPU本身，CPU還能正確地執行各種抗干擾程序。如果幹擾信號已經通過某種途徑作用到了CPU上，則CPU就不能按正常狀態執行程序，從而引起混亂，這就是通常所說的程序“跑飛”。程序“跑飛”後使其恢復正常的一個最簡單的方法是使CPU復位，讓程序從頭開始重新運行。很多單片機控制的設備中都有設置人工復位電路。人工復位一般是在整個系統已經完全癱瘓，無計可施的情況下才不得已而為之的。因此在進行軟件設計時就要考慮到萬一程序“跑飛”，應讓其能夠自動恢復到正常狀態下運行。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1a9ed1c979bc4f6883ad607688e982ab><p class=pgc-img-caption></p></div><p>程序“跑飛”後往往將一些操作數當作指令碼來執行，從而引起整個程序的混亂。採用“指令冗餘”是使“跑飛”的程序恢復正常的一種措施。所謂“指令冗餘”，就是在一些關鍵的地方人為地插入一些單字節的空操作指令NOP。當程序“跑飛”到某條單字節指令上時，就不會發生將操作數當成指令來執行的錯誤。對於MCS51單片機來說，所有的指令都不會超過3個字節，因此在某條指令前面插入兩條NOP指令，則該條指令就不會被前面衝下來的失控程序拆散，而會得到完整的執行，從而使程序重新納入正常軌道。通常是在一些對程序的流向起關鍵作用的指令前面插入兩條NOP指令。應該注意的是在一個程序中“指令冗餘”不能使用過多，否則會降低程序的執行效率。</p><div class=pgc-img><img alt=單片機軟件抗幹擾技術 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/175338d31e0d4208a1dfa4f562b800e6><p class=pgc-img-caption></p></div><p>採用“指令冗餘”使“跑飛”的程序恢復正常是有條件的，首先“跑飛”的程序必須落到程序區，其次必須執行到所設置的冗餘指令。如果“跑飛”的程序落到非程序區(如 EPROM中未用完的空間或某些數據表格等)，或在執行到冗餘指令之前已經形成了一個死循環，則“指令冗餘”措施就不能使“跑飛”的程序恢復正常了。這時可以採用另一種軟件抗干擾措施，即腸胃“軟件陷阱”。“軟件陷阱”是一條引導指令，強行將捕獲的程序引向一個指定的地址，在那裡有一段專門處理錯誤的程序。假設這段處理錯誤的程序入口地址為ERR，則下面三條指令即組成一個“軟件陷阱”</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>單片</a></li><li><a>機軟件</a></li><li><a>抗干擾</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/9445b884.html alt=單片機中的數據存儲器ram class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/bad477a7-f963-4822-870a-02c620806ccf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9445b884.html title=單片機中的數據存儲器ram>單片機中的數據存儲器ram</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95158d9c.html alt=多種單片機結構和原理講解！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fe498059ad344f5cb66e9fc769da1b8f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95158d9c.html title=多種單片機結構和原理講解！>多種單片機結構和原理講解！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b56116d4.html alt=教你用單片機驅動LED數碼管顯示數字0到9 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d2931e4f95bd46408dccf2a18f8cfa83 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b56116d4.html title=教你用單片機驅動LED數碼管顯示數字0到9>教你用單片機驅動LED數碼管顯示數字0到9</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3775731a.html alt=51單片機用彙編語言實現程序跳轉表 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fd151b82a9ab463181558fdbe0bd7d68 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3775731a.html title=51單片機用彙編語言實現程序跳轉表>51單片機用彙編語言實現程序跳轉表</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7edacb46.html alt=Stm32單片機開發KEIL啟動文件彙編語言詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9a63184582d34eebb5e951834c301311 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7edacb46.html title=Stm32單片機開發KEIL啟動文件彙編語言詳解>Stm32單片機開發KEIL啟動文件彙編語言詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f31cda41.html alt=單片機入門-要從彙編開始 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fb78707d8e744a079fcb4c3a1ada759c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f31cda41.html title=單片機入門-要從彙編開始>單片機入門-要從彙編開始</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d96e488.html alt=如何弄懂單片機時序_關於單片機時序分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ce005f4cc8d74bc5bd37acf5605f746c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d96e488.html title=如何弄懂單片機時序_關於單片機時序分析>如何弄懂單片機時序_關於單片機時序分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2f202e83.html alt=常見的電纜抗干擾技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1531462032378871c57700a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2f202e83.html title=常見的電纜抗干擾技術>常見的電纜抗干擾技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/9ae3d2fc.html alt=單片機偷天系列之初窺門道 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153873672441542eeeba929 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/9ae3d2fc.html title=單片機偷天系列之初窺門道>單片機偷天系列之初窺門道</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/9ff0031f.html alt=單片機系統的擴展、配置及抗干擾方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/Ru2onaW8G5QHLT style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/9ff0031f.html title=單片機系統的擴展、配置及抗干擾方法>單片機系統的擴展、配置及抗干擾方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/f2ef60e6.html alt=電子電路的抗干擾方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/f2ef60e6.html title=電子電路的抗干擾方法>電子電路的抗干擾方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/333401de.html alt=51單片機計數脈衝頻率超過晶振頻率1/24也行？仿真與實際 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4acf2a5b45e644bbaca0185b1308d9a6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/333401de.html title=51單片機計數脈衝頻率超過晶振頻率1/24也行？仿真與實際>51單片機計數脈衝頻率超過晶振頻率1/24也行？仿真與實際</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0d56a2ff.html alt=單片機學習問題集，都搞懂你就厲害了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1528167865539cef4f5fa12 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0d56a2ff.html title=單片機學習問題集，都搞懂你就厲害了>單片機學習問題集，都搞懂你就厲害了</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/da672eff.html alt=STM32單片機學習筆記（超詳細整理143個問題，學習必看） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cb7030374fbd447fbb9cfc7ccab5f44d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/da672eff.html title=STM32單片機學習筆記（超詳細整理143個問題，學習必看）>STM32單片機學習筆記（超詳細整理143個問題，學習必看）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1a41faff.html alt="ADA GNSS 抗干擾系統，同時防禦多個干擾" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/67079e4a4a4944eeb5d549eba33868c1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1a41faff.html title="ADA GNSS 抗干擾系統，同時防禦多個干擾">ADA GNSS 抗干擾系統，同時防禦多個干擾</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>