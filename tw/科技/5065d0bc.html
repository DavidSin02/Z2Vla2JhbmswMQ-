<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>CAN總線技術詳解與測試 | 极客快訊</title><meta property="og:title" content="CAN總線技術詳解與測試 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a5c496f06463480aa1158cb8440879b9"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5065d0bc.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5065d0bc.html><meta property="article:published_time" content="2020-11-14T20:59:43+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:43+08:00"><meta name=Keywords content><meta name=description content="CAN總線技術詳解與測試"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/5065d0bc.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>CAN總線技術詳解與測試</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>CAN總線在硬件系統中佔有一席之地，國際上應用最廣泛的現場總線之一，與我們講過的SPI、UART不同，屬於"高端高效"系列。很多小夥伴希望我們講講CAN總線，今天就來了。</p><p><br></p><p>一句話總結：CAN總線是將離散獨立的數據線整理到統一節點上。接下來認真看，一文教會你CAN總線——</p><p><br></p><p><strong>01 CAN總線由來</strong>CAN總線最早是由Bosch和Intel在80年代末開發的，雖然最早是用在汽車級的通信系統中的，但是隨著技術的發展，CAN總線應用範圍已經不在侷限於汽車中，像機器人、工業、自動控制系統中，都有廣泛的應用。</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a5c496f06463480aa1158cb8440879b9><p class=pgc-img-caption></p></div><p><br></p><p><strong>02 CAN總線為什麼這麼好用</strong></p><p>以CAN總線應用最廣的汽車給大家舉例，汽車電子控制系統之間的數據通信基本上都是通過CAN總線實現。</p><p>在下圖中，Motronic控制單元和變速箱控制單元之間的數據通信包含5根數據線。這還僅僅是兩個控制器之間的傳輸線。如果我們再加上轉向控制、雨刷控制、車窗控制等等，就需要大量的信號數據線，這個時候會導致整車的電子控制系統線路複雜，維修起來也非常困難。</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/17892f2ee8f44326a14bd3265dc9ae66><p class=pgc-img-caption></p></div><p>而如果使用CAN總線，各個控制單元之間的信息通過兩根數據線就可以進行交換了：</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cc6ee5a95ba64f48abb534f6fc34f1e2><p class=pgc-img-caption></p></div><p>使用CAN總線之後的通信網絡對比：</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/0bf2eee56c7945e7ad837681f54c0fb5><p class=pgc-img-caption></p></div><p><strong>03 CAN總線技術原理</strong></p><p>CAN總線使用串行數據傳輸方式，可以1Mb/s的速率在40m的雙絞線上運行，也可以使用光纜連接，而且支持多主控制器。</p><p>當CAN總線上的一個節點（站）發送數據時，它以報文形式廣播給網絡中所有節點。對每個節點來說，無論數據是否是發給自己的，都對其進行接收。</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4e7b6c580a3d470dbfd69a12a233a83d><p class=pgc-img-caption></p></div><p>CAN總線的軟件報文在上面這組報文中：仲裁域，每組報文開頭內容，前11位字符為標識符，定義了報文的優先級，這種報文格式稱為面向內容的編址方案。在同一系統中標識符是唯一的，不可能有兩個站發送具有相同標識符的報文。當幾個站同時競爭總線讀取時，這種配置十分重要。</p><p><br></p><p>在仲裁域的最後一位是遠程傳輸請求位（RTR），代表信息幀是數據幀還是不包含任何數據的遠地請求幀</p><p>控制域，前兩位是保留位，作為擴展位，DLC表示一幀中數據字節的數目。</p><p>數據域，包含0～8字節的數據。</p><p>校驗域，檢驗位錯用的循環冗餘校驗域，共15位。</p><p>結束域，由七位隱性電平組成。</p><p><br></p><p>CAN總線是可靠性很高的總線，共有五種錯誤：</p><p>CRC錯誤：發送與接收的CRC值不同發生該錯誤；</p><p>格式錯誤：幀格式不合法發生該錯誤；</p><p>應答錯誤：發送節點在ACK階段沒有收到應答信息發生該錯誤；</p><p>位發送錯誤：發送節點在發送信息時發現總線電平與發送電平不符發生該錯誤；</p><p>位填充錯誤：通信線纜上違反通信規則時發生該錯誤。</p><p>當發生這五種錯誤之一時，發送節點或接受節點將發送錯誤幀。</p><p><br></p><p><strong>04 CAN總線物理層</strong></p><p>在節點終端的接口器件有三種形式，如下圖：</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bcbad637dd4940ccbc06558696b36e97><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8f9c1086cc8445098017e0bf29d64912><p class=pgc-img-caption></p></div><p>CAN總線的終端電阻的接法如下：</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fdffaf28be024acdbf9481f623f76e4e><p class=pgc-img-caption></p></div><p>增加終端電阻的目的是為了增強CAN通訊的可靠性，消除CAN總線終端信號反射干擾。CAN總線網絡最遠的兩個端點通常要加入終端匹配電阻，如上圖。一般如果CAN總線使用的是在雙絞線上運行，這時我們會增加120Ω的電阻，這是因為匹配電阻是由傳輸電纜的特性阻抗決定的。</p><p><br></p><p><strong>05 常用CAN控制器與收發器</strong></p><p>在開發板上CAN總線需要控制器和收發器，下圖是常用的CAN總線接口電路：</p><div class=pgc-img><img alt=CAN總線技術詳解與測試 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/43166b0117c3466d9e78df72a2928fe3><p class=pgc-img-caption></p></div><p><br></p><p>SJA1000是用的較多的獨立CAN控制器，價格又很便宜，幾十塊錢。SJA1000可以和51單片機、STM32等組合快速搭建CAN總線網絡。SJA1000通過並行總線與MCU連接，需要通過地址、數據、讀寫控制等多個線進行連接。PCA82C250收發器是CAN控制器的物理接口，可以給總線提供差動發送和接受信號。和SJA1000一樣，都是採用5V供電。</p><p><br></p><p>沒玩過CAN總線的小夥伴，可以自制或者淘寶購買2個帶有單片機+控制器和收發器的開發板，兩者之間一對一點對點通信，一塊作為主控發送控制數據，另一塊接受數據並執行操作，比如點個燈。如此簡單，就試試吧！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>總線</a></li><li><a>技術</a></li><li><a>詳解</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/1fc66c30.html alt=「主流技術」分佈式詳解：什麼是分佈式系統？如何學習分佈式系統？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/49be09e1dc824d28ac034b897d04e4ea style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1fc66c30.html title=「主流技術」分佈式詳解：什麼是分佈式系統？如何學習分佈式系統？>「主流技術」分佈式詳解：什麼是分佈式系統？如何學習分佈式系統？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4c943d11.html alt=快照技術原理詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4c943d11.html title=快照技術原理詳解>快照技術原理詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d41cd84a.html alt=氣保焊操作技術詳解，記得收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/83c9d60583c74dc782ab6141a8015313 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d41cd84a.html title=氣保焊操作技術詳解，記得收藏>氣保焊操作技術詳解，記得收藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7993385.html alt=芯片光刻技術的流程詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0db5459e111d4c4eb755eb00ce3dc738 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7993385.html title=芯片光刻技術的流程詳解>芯片光刻技術的流程詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/105065b3.html alt=CAN總線和LIN總線技術介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ca8bc207942d4cae90cd49b5177deb8a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/105065b3.html title=CAN總線和LIN總線技術介紹>CAN總線和LIN總線技術介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1dca91e8.html alt=當下流行總線技術（USB、CAN、USART、SPI...）彙總，你都知道嗎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d578808839a24d3ba3a097d8208983bb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1dca91e8.html title=當下流行總線技術（USB、CAN、USART、SPI...）彙總，你都知道嗎>當下流行總線技術（USB、CAN、USART、SPI...）彙總，你都知道嗎</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/c449e7a1.html alt=最新！技術詳解：大盤現在處於什麼階段？後市A股會怎麼走？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e9e38a82562f48b1be6ed7fa1edf3163 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/c449e7a1.html title=最新！技術詳解：大盤現在處於什麼階段？後市A股會怎麼走？>最新！技術詳解：大盤現在處於什麼階段？後市A股會怎麼走？</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/be23178d.html alt=四代骨水泥技術詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7935d0a6a60641ec9ac22deab9d62e3b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/be23178d.html title=四代骨水泥技術詳解>四代骨水泥技術詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8fe8c095.html alt=技術參數詳解，MOS管知識全錄！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d03fd2ad74874c5080403c7ed26391fb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8fe8c095.html title=技術參數詳解，MOS管知識全錄！>技術參數詳解，MOS管知識全錄！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/16d151ad.html alt=阿里雙11技術詳解：容量規劃+LDC+彈性架構+大促中控等 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/00759f193ab444d9b0ee8c2c8f980615 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16d151ad.html title=阿里雙11技術詳解：容量規劃+LDC+彈性架構+大促中控等>阿里雙11技術詳解：容量規劃+LDC+彈性架構+大促中控等</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1a9e79e.html alt=CAN總線協議詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/72c49427aae34856b73a5f367c1f2c28 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1a9e79e.html title=CAN總線協議詳解>CAN總線協議詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/81f50ae1.html alt=乾貨分享：一文看懂總線技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/399ce6f9-1d2e-40e3-97a0-e99a8a9bf55c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/81f50ae1.html title=乾貨分享：一文看懂總線技術>乾貨分享：一文看懂總線技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/60596793.html alt=CAN總線詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/87bb4d2e10de4ce68eb8fd03a2b3becb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/60596793.html title=CAN總線詳解>CAN總線詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/707afe95.html alt="乾貨 | 一文讀懂總線技術" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/01b367adf2a845e08f6f6ec78ca98aa9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/707afe95.html title="乾貨 | 一文讀懂總線技術">乾貨 | 一文讀懂總線技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ccb4d5e.html alt=隧道施工之光面爆破技術詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5b490000a27effd6a2ca style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ccb4d5e.html title=隧道施工之光面爆破技術詳解>隧道施工之光面爆破技術詳解</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>