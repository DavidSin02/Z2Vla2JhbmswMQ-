<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>世界上最簡單的Kubernetes儀表板：k1s | 极客快訊</title><meta property="og:title" content="世界上最簡單的Kubernetes儀表板：k1s - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/3fc27e49e0a647bba6ea0374ce297297"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/53c9524.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/53c9524.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/53c9524.html><meta property="article:published_time" content="2020-10-29T21:07:33+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:33+08:00"><meta name=Keywords content><meta name=description content="世界上最簡單的Kubernetes儀表板：k1s"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/53c9524.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>世界上最簡單的Kubernetes儀表板：k1s</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3fc27e49e0a647bba6ea0374ce297297><p class=pgc-img-caption></p></div><p>我用50多行Bash代碼實現了我稱之為“世界上最簡單的Kubernetes儀表板”，它被稱為k1s，本文將介紹如何使用它以及它是如何工作的。</p><p>當然，“世界上最簡單”並不是一個很嚴格的說辭。</p><p>你可以在GitHub上的倉庫weibeld/k1s[1]上找到完整代碼和詳細使用說明。</p><h1 class=pgc-h-arrow-right>概述</h1><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f5abd845dfc47a1bf0762120b8084ee><p class=pgc-img-caption></p></div><p>k1s大致如下圖：</p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bf1894ed60574b02a69814106ccb85bc><p class=pgc-img-caption></p></div><p><br></p><p>儀表板展示了任意命名空間（或跨所有命名空間）中任何類型的資源列表，並實時更新它。某些類型的資源會顯示額外的信息，例如Pod的當前狀態，Deployment中所需的副本數和實際數量。<br></p><p>你可以運行多個k1s實例從而可以同時觀察多個資源類型的更新。</p><p><br></p><p>下圖是運行三個儀表板實例的例子，一個用於Deployment，一個用戶ReplicasSet，還有一個用於Pod（使用tmux運行）。然後對Deployment上執行一些伸縮操作和滾動更新。</p><p>請注意，你可以實時觀察Deployment、其管理的ReplicaSets和Pods之間的交互。這有可能提供許多認知，有助於瞭解Deployment和其他資源的工作原理。</p><h1 class=pgc-h-arrow-right>安裝</h1><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f5abd845dfc47a1bf0762120b8084ee><p class=pgc-img-caption></p></div><p>如果你在macOS上使用homebrew，你可以這樣安裝：</p><pre><code>$ brew install weibeld/core/k1s</code></pre><p>如果是其他情況，你可以參考下面腳本安裝它：</p><pre><code>{  wget https://raw.githubusercontent.com/weibeld/k1s/master/k1s  chmod +x k1s  mv k1s /usr/local/bin}</code></pre><p>k1s依賴於機器上安裝的以下工具：</p><ul><li>jq：https://stedolan.github.io/jq/</li><li>watch：https://linux.die.net/man/1/watch</li><li>curl：https://curl.haxx.se/</li><li>kubectl：https://kubernetes.io/docs/tasks/tools/install-kubectl/</li></ul><p>可能你已經擁有大部分工具，要是沒有的話你可以在GitHub倉庫[2]上找到安裝嚮導。</p><h1 class=pgc-h-arrow-right>使用</h1><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f5abd845dfc47a1bf0762120b8084ee><p class=pgc-img-caption></p></div><p>k1s是一個可直接在你本機運行的Bash腳本，它的命令行接口如下：</p><pre><code>$ k1s [namespace] [resource-type]</code></pre><p>兩個額外的命令行參數分別是：</p><p><br></p><ul><li>namespace：指定要觀察的資源所在的Kubernetes命名空間（默認是default）</li><li>resource-type：指定要觀察的Kubernetes資源類型（默認是pods）</li></ul><p>如果需要跨所有命名空間觀察資源，你可以指定命名空間參數為-。</p><p><br></p><p>資源類型參數的值可以指定為Kubernetes接受的任意名稱，包括複數模式，單數模式和簡寫（如果可用的話）。例如以下參數都是有效的：</p><ul><li>deployments、deployment、deploy</li><li>replicasets、replicaset、rs</li><li>services、service、svc</li></ul><p>k1s是由本機上的kubeconfig文件支撐的。這意味著k1s始終是連接到你的kubeconfig文件中指定的集群。換句話說，k1s默認使用與kubectl使用的同一個集群。</p><p><br></p><p>如要退出儀表板請鍵入Ctrl-C。</p><h1 class=pgc-h-arrow-right>實現</h1><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f5abd845dfc47a1bf0762120b8084ee><p class=pgc-img-caption></p></div><p>現在，我們來談談k1s的實現，上面提到k1s是一個Bash腳本，k1s v0.1.0版本的完整代碼：</p><pre><code>#!/bin/bash[[ "$1" = -v || "$1" = --version ]] &amp;&amp; { echo "0.1.1"; exit; }for d in jq watch curl kubectl; do which "$d" &gt;/dev/null || { echo "Missing dependency: $d"; exit 1; }; donens=${1:-default}; res=${2:-pods}c() { echo -e "\033[$1m"; }cc() { echo -e "\033[$1;1m"; }printf Loading &amp;&amp; while true; do printf . &amp;&amp; sleep 0.1; done &amp;set -o pipefailpath=$(kubectl get "$res" "$([[ "$ns" = - ]] &amp;&amp; echo --all-namespaces || echo -n=$ns)" -v 6 2&gt;&amp;1 &gt;/dev/null | grep GET | tail -n 1 | sed -n 's#.*https://[^/]*\([a-z0-9/.-]*\).*#\1#p')pid=$?kill -9 "$!" &amp;&amp; wait "$!" 2&gt;/dev/null[[ "$pid" -ne 0 ]] &amp;&amp; echo -e "\nInvalid resource type: $res" &amp;&amp; exit 1[[ $(echo -n "${path//[^\/]}" | wc -c) -lt 5 ]] &amp;&amp; ns=-res=${path##*/}exec 3&lt; &lt;(kubectl proxy -p 0)port=$(head -n 1 &lt;&amp;3 | sed 's/.*:\([0-9]\{4,5\}\)\b.*/\1/')file=$(mktemp)cat &lt;&lt;EOF &gt;"$file"$(cc 36) ____ ____ ____||$(cc 33)k$(cc 36) |||$(cc 33)1$(cc 36) |||$(cc 33)s$(cc 36) ||  $(cc 0)Kubernetes Dashboard$(cc 36)||__|||__|||__||  $(cc 0)Namespace: $ns$(cc 36)|/__\|/__\|/__\|  $(cc 0)Resources: $res$(c 0)EOFcurl -N -s "http://localhost:$port$path?watch=true" |  while read -r event; do    name=$(jq -r '.object.metadata.name' &lt;&lt;&lt;"$event")    case "$res" in    pods)      phase=$(jq -r '.object.status.phase' &lt;&lt;&lt;"$event")      is_ready=$(jq -r 'if .object.status | has("conditions") then .object.status.conditions[] | if select(.type=="Ready").status=="True" then "1" else "" end else "" end' &lt;&lt;&lt;"$event")      is_scheduled=$(jq -r 'if .object.status | has("conditions") then .object.status.conditions[] | if select(.type=="PodScheduled").status=="True" then "1" else "" end else "" end' &lt;&lt;&lt;"$event")      [[ "$is_scheduled" &amp;&amp; ! "$is_ready" ]] &amp;&amp; info=NonReady || info=$phase      [[ "$info" = Running ]] &amp;&amp; info=$(c 32)$info$(c 0) || info=$(c 33)$info$(c 0) ;;    deployments|replicasets|statefulsets)      spec=$(jq -r '.object.spec.replicas' &lt;&lt;&lt;"$event")      stat=$(jq -r '.object.status.readyReplicas // 0' &lt;&lt;&lt;"$event")      [[ "$stat" = "$spec" ]] &amp;&amp; info="$(c 32)($stat/$spec)$(c 0)" || info="$(c 33)($stat/$spec)$(c 0)" ;;    esac    case $(jq -r .type &lt;&lt;&lt;"$event") in      ADDED) echo "$name $info" &gt;&gt;"$file" ;;      MODIFIED) sed -i "s/^$name .*$/$name ${info//\//\\/}/" "$file" ;;      DELETED) sed -i "/^$name .*$/d" "$file";;    esac  done &amp;watch -ctn 0.1 cat "$file"</code></pre><p>下面我們將一步步閱讀項目代碼。不過首先我們先來討論一下k1s所基於的思路。</p><p><br></p><p><strong>基礎機制</strong></p><p><br></p><p>以下是k1s工作的主要部分：</p><ol start=1><li>使用kubectl proxy用於輕鬆請求Kubernetes API服務（第20行）。</li><li>使用curl執行一個向Kubernetes API服務請求指定資源類型的watch監視請求（第32行）。這將向API服務器創建一個持久連接，該連接返回任意ADDED、MODIFIED或DELETED類型的JSON格式資源事件流。</li><li>使用jq解析每個事件並從中提取信息，例如事件相關的資源的名稱。將該信息作為額外的記錄行寫入到文件系統上的一個文件（稱之為狀態文件）。如果資源在文件中已存在，則更新它，如果資源被刪除，則從狀態文件中刪除具體行（第48-50行）。</li><li>使用watch定期更新顯示該狀態文件（第53行）。這給人一種動態全屏終端應用的印象。</li></ol><p>簡而言之，k1s會不斷地將某個資源類型的狀態整合到一個文件中，並將這個文件用watch顯示出來，這樣你就可以實時觀察到任何更新。</p><p><br></p><p>現在我們來看看實際代碼。</p><p><br></p><p><strong>具體實現</strong></p><p>k1s腳本從以下代碼行開始：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8cbc49fb6f814f15bd0769df2dbf800d><p class=pgc-img-caption></p></div><p><br></p><p>這將執行一些基本檢查和初始化：</p><ul><li>第三行提供了-v/--version選項用於打印k1s的版本。</li><li>第四行檢查所有依賴是否已在本機安裝，如果沒有則顯示錯誤信息並退出。</li><li>第五行將命令行參數讀進變量（namespace和resource-type），如果這些參數沒有提供則使用默認值。</li></ul><p>接下來的兩行代碼如下：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/22a4a2fa104448d9ba1fe84ac1b90ede><p class=pgc-img-caption></p></div><p><br></p><p>這定義了兩個Bash函數用於輸出ANSI轉義序列，用來以特定的顏色打印文本。這些函數將在以下用來給k1s的輸出著色。</p><p><br></p><p>接下來是這行：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bda45dedbb264730a998bd6843274179><p class=pgc-img-caption></p></div><p><br></p><p>此行打印啟動k1s後立即顯示的加載指示器。此任務由一個每0.1秒打印字符.的無限循環組成，並作為後臺進程啟動。當k1s初始化完成之後該進程將會被殺死。</p><p><br></p><p>接著是下一段代碼：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9a1e2546611147a599e539fbc2926220><p class=pgc-img-caption></p></div><p><br></p><p>此段代碼實現了k1s的主要初始化步驟。它確定了用戶請求的資源類型和命名空間的Kubernetes API路徑：</p><ul><li>第12行啟用Bash的pipefail選項，如果管道語句中包含的任何一條命令返回一個非零的退出碼，那麼該選項就會使整個管道語句返回一個非零的退出碼。這是後續命令正常執行的前提。</li><li>第13行執行了請求的資源類型和命令空間的kubectl get請求並從輸出中提取相應的Kubernetes API路徑。這裡的訣竅是通過提高kubectl的輸出級別（-v=6），kubectl會輸出它向Kubernetes API服務器發出的HTTP GET請求的確切URL。通過這個URL，可通過grep和sed提取出來。</li><li>第14行記錄了13行中kubectl get的退出碼，如果請求成功則退出碼為零，否則為非零。退出碼非零的很大可能是用戶提交了一個無效的資源類型（例如使用dep替代deploy/deployment）。</li><li>第15行殺掉第10行開啟的加載指示器後臺進程。注意加載指示器的進程ID（PID）被指定為Bash內置變量$!。在Bash中$!變量始終保存已啟動的最後一個後臺進程的進程ID。因為從第10行後沒有其他後臺進程啟動，所以該變量保證是指向加載指示器進程。</li><li>第16行檢查第13行kubectl get請求的退出碼，如果退出碼非零，則假設用戶提供了一個無效的資源類型規範，之後腳本以相應的錯誤信息終止。</li></ul><p>接下來的兩行具有相當的裝飾用途：</p><ul><li>第17行檢查提取的API路徑是否包含了命名空間部分。如果沒有，則代表著用戶請求跨所有命名空間的資源類型或者是非命名空間級別的資源類型。在這種情況下，命名空間將會被設置並在儀表板中顯示為為-。這修復了當用戶指定了非命名空間級別資源卻同時指定命名空間的情況。</li><li>第18行將從API路徑中提取的用戶請求的資源類型設置為相應資源的複數形式，該值會顯示在儀表板的標題上。這意味著如果用戶指定deploy/deployment來監視Deployments，那麼儀表板會在標題橫幅處統一顯示為deployments。</li></ul><p>緊接著是下面兩行代碼：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a990643ab9b3463688bcab1aa2fc4073><p class=pgc-img-caption></p></div><p><br></p><p>這兩行腳本配置了kubectl proxy並在之後被用於連接Kubernetes API服務：</p><ul><li>第20行啟動kubectl proxy作為後臺進程，該命令為Kubernetes API服務創建一個本地代理，並在本機監聽一個隨機端口（通過-p=0指定）。該後臺進程的輸出被新文件描述符3捕獲。</li><li>第21行從上一行的kubectl proxy的輸出文件描述符中提取端口。知道這個端口號在後續代碼中才能構建Kubernetes API服務的監視請求。</li></ul><p>在這個StackOverflow的回答[3]中，介紹了上述捕捉後臺進程輸出的技術。</p><p><br></p><p>接著是下一段代碼：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/34f5707ee5774e16bdaa61084008f0c0><p class=pgc-img-caption></p></div><p><br></p><p>這段代碼創建並初始化狀態文件，該文件之後會被watch命令調用顯示：</p><ul><li>第23行創建狀態文件</li><li>第24-30行將標題橫幅寫入到狀態文件。標題橫幅由（彩色的）k1s logo和其他一些信息組成，包括正在使用的命名空間和資源類型。</li></ul><p>下一段代碼如下：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1d96a3b61ee64f1f86b6c58024d2fc6d><p class=pgc-img-caption></p></div><p><br></p><p>這段代碼執行向Kubernetes API服務發起的實際監視請求並處理事件流響應。以上代碼實際上是單個Bash語句，其將curl命令輸出到管道並通過while循環從管道中讀取curl命令的輸出：</p><p><br></p><ul><li>第32行使用curl發起監視請求。URL由之前確定的Kubernetes API路徑和kubectl proxy端口號組成。監視請求返回的每個響應都是對應於一個資源事件的JSON單行。curl使用了-N選項禁止輸出緩衝，這樣每一行在收到後就會立即輸出。</li><li>第33行開啟一個while循環讀取curl的每一行輸出到名為event的變量。該循環會無限運行，只有當用戶鍵入Ctrl-C退出儀表板時才被終止。</li></ul><p>循環體從34行開始到51行。開頭的幾行從JSON事件對象中提取一些數據，傳遞到循環的主體中：</p><p><br></p><ul><li>第34行提取事件相關的資源的名稱（即創建、修改或刪除的資源），提取操作使用jq完成。</li><li>第35行使用case語句根據正在監視的資源類型執行不同的操作。其目的是對某些資源類型進行特殊處理，並確定和提取它們的附加信息。</li></ul><p>第36到41行以特別的方式處理Pods：<br></p><ul><li>第37行提取Pod的當前階段。階段是對Pod狀態的高級指示，如Running或Pending。</li><li>第38行確定Pod的Ready條件是否設置為True。如果是的話，那麼Pod中的所有容器都通過了就緒探測，Pod可以為用戶請求提供服務。</li><li>第39行確定Pod的PodScheduled條件是否設置為True。如果是的話，那麼Pod已被Kubernetes調度器分配了一個節點。</li><li>第40行確定k1s將顯示的Pod的狀態。默認情況下，k1s顯示Pod的階段。但是，在下面的情況下，行為會有所不同：如果Pod已經被調度，但目前還沒有準備好，那麼k1s顯示NonReady而不是phase字段（此時phase為Pending）。這使得它更容易區分尚未調度的Pod和僅僅是臨時暫停或終止的Pod。</li><li>第41行為Pod的狀態指示器著色，以獲得更好的視覺效果：如果狀態為Running則為綠色，其他情況為黃色。</li></ul><p>第42到45行以特別的方式處理Deployments、ReplicaSets和StatefulSets（這些都是Pod控制器）。</p><p><br></p><ul><li>第43行確定Pod控制器指定的（需要的）副本的數量</li><li>第44行確定Pod控制器當前可用（準備好）的副本數量。</li><li>第45行格式化並著色副本指示器：如果可用的副本數量符合要求，則為綠色，否則為黃色。</li></ul><p>接下來，第47行到51行根據事件的類型和上面確定的信息更新狀態文件。</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ba78de3f38fb4ea68e12a2b72e96c740><p class=pgc-img-caption></p></div><p><br></p><ul><li>第47行啟動一個case語句根據事件的類型採取不同的操作，事件類型可以是ADDED、MODIFIED或是DELETED。</li><li>第48行處理ADDED事件：如果添加了一個資源，它的名稱（以及之前確定的任何附加的資源類型特定信息）將被簡單地追加為一個新行到狀態文件中。</li><li>第49行處理MODIFIED事件：如果一個資源被修改（如Pod的相位改變），狀態文件中該資源的現有行將被一個由新信息組成的新行取代。</li><li>第50行處理DELETED事件：如果資源被刪除，狀態文件中相應行也會被刪除。</li></ul><p>最後只剩下一行了：</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/99c6e17365b64dae8fe5d8461a7169ca><p class=pgc-img-caption></p></div><p><br></p><p>此行執行watch命令來定時更新並顯示狀態文件在你的終端窗口。更新時間間隔設置為0.1秒，這個時間間隔小到足以讓人眼看似 "實時"。</p><p><br></p><p>k1s的完整代碼總共就只有這麼多！</p><h1 class=pgc-h-arrow-right>討論和結論</h1><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2f5abd845dfc47a1bf0762120b8084ee><p class=pgc-img-caption></p></div><p>正如其口號所說，k1s的重點是簡單和簡潔。這就帶來了一些侷限性，必須指出：</p><p><br></p><ul><li>可能目前最大的限制是，當儀表盤中的項目列表超過終端窗口的高度時，窗口底部以外的所有輸出都會被截斷，沒有辦法滾動。這是因為watch不允許在超過終端高度的文件中滾動。如果你知道什麼簡單的方法來處理這個問題，請在評論中告訴我。</li><li>如果能顯示更多的附加信息，包括其他資源類型的信息（如服務和端點），將會很有意思。然而，這有可能是一個無底洞，因為總是有更多的東西可以顯示，而且不同的人會關注於不同的東西。然而，由於目前的代碼是如此簡短簡單，所以應該很容易為特定的用例或調查來按需定製。</li><li>該工具依賴於其他工具的輸出格式，尤其是kubectl。這意味著，如果這些工具的輸出格式發生變化，那麼k1s也需要進行調整。不過考慮到k1s代碼的簡潔性，這應該是一個相對快速的任務。</li></ul><p>當然，大多數這些限制可以通過用真正的編程語言（比如Go）實現k1s來解決，就像所有成熟的Kubernetes儀表盤一樣。然而，k1s一開始也是作為實驗性的，用儘可能簡單的手段（和儘可能少的代碼）來實現一些有用的東西。實際上，它一開始是一個Bash單行腳本，用於顯示默認命名空間中的當前Pod的集合。</p><p><br></p><p>考慮到這一重點，該工具仍然被證明是令人驚訝的有用的（至少對於實驗或教育用例），它可以作為圍繞Kubernetes的高級腳本的基礎。</p><p><br></p><p>本著這種精神，請盡情使用k1s，並提交問題[4]和PR[5]！</p><p>相關鏈接：</p><ol start=1><li>https://github.com/weibeld/k1s</li><li>https://github.com/weibeld/k1s#dependencies</li><li>https://stackoverflow.com/a/20018118/4747193</li><li>https://github.com/weibeld/k1s/issues</li><li>https://github.com/weibeld/k1s/pulls</li></ol><p><br></p><p>原文鏈接：https://itnext.io/the-worlds-simplest-kubernetes-dashboard-k1s-4246e03191df</p><p><br></p><div class=pgc-img><img alt=世界上最簡單的Kubernetes儀錶板：k1s onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/85edf33526174b15b3e5438294261f24><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>簡單</a></li><li><a>Kubernetes</a></li><li><a>儀表板</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/51e434ad.html alt=新手用雲服務器快速搭建個人網站簡單教程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/51e434ad.html title=新手用雲服務器快速搭建個人網站簡單教程>新手用雲服務器快速搭建個人網站簡單教程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/61d5b89d.html alt=場面描寫很簡單，讓語文老師舉例，教會你好用的寫作技巧和方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/a12e06c3-dac8-4ef1-a44b-bbf85671edb2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/61d5b89d.html title=場面描寫很簡單，讓語文老師舉例，教會你好用的寫作技巧和方法>場面描寫很簡單，讓語文老師舉例，教會你好用的寫作技巧和方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ecbd05fe.html alt="比搶錢還要簡單！蘋果上架Mac Pro配件：四個輪子要五千塊" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5e07933580e64355abbbcac953abfc3d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ecbd05fe.html title="比搶錢還要簡單！蘋果上架Mac Pro配件：四個輪子要五千塊">比搶錢還要簡單！蘋果上架Mac Pro配件：四個輪子要五千塊</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9ababaae.html alt=初中科學元素的簡單分類每日一練含答案解析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/cc6f0300765348b3a57404a617d32c99 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9ababaae.html title=初中科學元素的簡單分類每日一練含答案解析>初中科學元素的簡單分類每日一練含答案解析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e4707da0.html alt=高中化學物質分類竟如此簡單，你還記得多少？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b73cc7c22bc14eb9af43cf76f66e5d70 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e4707da0.html title=高中化學物質分類竟如此簡單，你還記得多少？>高中化學物質分類竟如此簡單，你還記得多少？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ec613168.html alt=十大世界足球先生，認識四位以上的人都不簡單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8bf0e55d0e30483abc88ce0fa1ac279d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ec613168.html title=十大世界足球先生，認識四位以上的人都不簡單>十大世界足球先生，認識四位以上的人都不簡單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/35c96373.html alt=14種家常哨子面的做法，美味不油膩，簡單易學又實用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1ef1a62cd3ad4bf9b000021a38952cb4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/35c96373.html title=14種家常哨子面的做法，美味不油膩，簡單易學又實用>14種家常哨子面的做法，美味不油膩，簡單易學又實用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html alt=媽媽教的剪刀面做法，無保留分享，簡單又實用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2e3e5ec81da04a70bf4d1fe077acb24c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html title=媽媽教的剪刀面做法，無保留分享，簡單又實用>媽媽教的剪刀面做法，無保留分享，簡單又實用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bd7a84b7.html alt=鑑別被追尾車就是這麼簡單！這4個方法你都瞭解嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a51a16723af8485ab69705c547ea4fd8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bd7a84b7.html title=鑑別被追尾車就是這麼簡單！這4個方法你都瞭解嗎？>鑑別被追尾車就是這麼簡單！這4個方法你都瞭解嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html alt=6個實用電路圖，簡單易懂！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d4ccc825dea840e0bccda3481c8a96ce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html title=6個實用電路圖，簡單易懂！>6個實用電路圖，簡單易懂！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/75c082ee.html alt=一個買入和賣出股票的簡單方法——金字塔法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1539052330140848b6dfdb4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/75c082ee.html title=一個買入和賣出股票的簡單方法——金字塔法>一個買入和賣出股票的簡單方法——金字塔法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d4099ff.html alt=經典的股票賣出技巧，簡單高效，掌握大有益處 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R6Vq6K4Fye4OrU style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d4099ff.html title=經典的股票賣出技巧，簡單高效，掌握大有益處>經典的股票賣出技巧，簡單高效，掌握大有益處</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7ea39ba5.html alt=股票交易指南：幾種簡單易學的股票賣出技巧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/8e36000b3bf0548a94ba style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7ea39ba5.html title=股票交易指南：幾種簡單易學的股票賣出技巧>股票交易指南：幾種簡單易學的股票賣出技巧</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4227e37e.html alt=金字塔買賣法，一個最簡單的買入賣出方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153732971874727be0bf3b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4227e37e.html title=金字塔買賣法，一個最簡單的買入賣出方法>金字塔買賣法，一個最簡單的買入賣出方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cd49bea3.html alt="EXCEL工資表彙總 的最簡單公式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/40088849b0394c9eab2d0820184f16a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cd49bea3.html title="EXCEL工資表彙總 的最簡單公式">EXCEL工資表彙總 的最簡單公式</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>