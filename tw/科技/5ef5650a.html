<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å¥½æ–‡æ¨è–¦ï¼šå¾®æœå‹™ç¶²é—œå¯¦æˆ°â€”Spring Cloud Gateway | æå®¢å¿«è¨Š</title><meta property="og:title" content="å¥½æ–‡æ¨è–¦ï¼šå¾®æœå‹™ç¶²é—œå¯¦æˆ°â€”Spring Cloud Gateway - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/b94fdab501d3430ca916d7786df2d235"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/5ef5650a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/5ef5650a.html><meta property="article:published_time" content="2020-11-14T21:03:16+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:16+08:00"><meta name=Keywords content><meta name=description content="å¥½æ–‡æ¨è–¦ï¼šå¾®æœå‹™ç¶²é—œå¯¦æˆ°â€”Spring Cloud Gateway"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/5ef5650a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å¥½æ–‡æ¨è–¦ï¼šå¾®æœå‹™ç¶²é—œå¯¦æˆ°â€”Spring Cloud Gateway</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>ä½œè€…ï¼šåšé›²BoCloud|</p><h1>å‰è¨€</h1><div class=pgc-img><img alt="å¥½æ–‡æ¨è–¦ï¼šå¾®æœå‹™ç¶²é—œå¯¦æˆ°â€”Spring Cloud Gateway" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b94fdab501d3430ca916d7786df2d235><p class=pgc-img-caption></p></div><p>ä½œç‚ºNetflix Zuulçš„æ›¿ä»£è€…ï¼ŒSpring Cloud Gatewayæ˜¯ä¸€æ¬¾éå¸¸å¯¦ç”¨çš„å¾®æœå‹™ç¶²é—œï¼Œåœ¨Spring Cloudå¾®æœå‹™æ¶æ§‹é«”ç³»ä¸­ç™¼æ®éå¸¸å¤§çš„ä½œç”¨ã€‚æœ¬æ–‡å°Spring Cloud Gatewayå¸¸è¦‹ä½¿ç”¨å ´æ™¯é€²è¡Œäº†æ¢³ç†ï¼Œå¸Œæœ›å°å¾®æœå‹™é–‹ç™¼äººå“¡æä¾›ä¸€äº›å¹«åŠ©ã€‚</p><p>å¾®æœå‹™ç¶²é—œSpringCloudGateway</p><h1>1.æ¦‚è¿°</h1><p>Spring cloud gatewayæ˜¯springå®˜æ–¹åŸºæ–¼Spring 5.0ã€Spring Boot2.0å’ŒProject Reactorç­‰æŠ€è¡“é–‹ç™¼çš„ç¶²é—œï¼ŒSpring Cloud Gatewayæ—¨åœ¨ç‚ºå¾®æœå‹™æ¶æ§‹æä¾›ç°¡å–®ã€æœ‰æ•ˆå’Œçµ±ä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼ï¼ŒSpring Cloud Gatewayä½œç‚ºSpring Cloudç”Ÿæ…‹ç³»çµ±ä¸­çš„ç¶²é—œï¼Œç›®æ¨™æ˜¯æ›¿ä»£Netflix Zuulï¼Œå…¶ä¸åƒ…æä¾›çµ±ä¸€çš„è·¯ç”±æ–¹å¼ï¼Œä¸¦ä¸”é‚„åŸºæ–¼Fileréˆçš„æ–¹å¼æä¾›äº†ç¶²é—œåŸºæœ¬çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå®‰å…¨ã€ç›£æ§/åŸ‹é»ã€é™æµç­‰ã€‚</p><h1>2.æ ¸å¿ƒæ¦‚å¿µ</h1><p>ç¶²é—œæä¾›APIå…¨è¨—ç®¡æœå‹™ï¼Œè±å¯Œçš„APIç®¡ç†åŠŸèƒ½ï¼Œè¼”åŠ©ä¼æ¥­ç®¡ç†å¤§è¦æ¨¡çš„APIï¼Œä»¥é™ä½ç®¡ç†æˆæœ¬å’Œå®‰å…¨é¢¨éšªï¼ŒåŒ…æ‹¬å”è­°é©é…ã€å”è­°è½‰ç™¼ã€å®‰å…¨ç­–ç•¥ã€é˜²åˆ·ã€æµé‡ã€ç›£æ§æ—¥èªŒç­‰è²¢å‘¢ã€‚ä¸€èˆ¬ä¾†èªªç¶²é—œå°å¤–æš´éœ²çš„URLæˆ–è€…æ¥å£ä¿¡æ¯ï¼Œæˆ‘å€‘çµ±ç¨±ç‚ºè·¯ç”±ä¿¡æ¯ã€‚å¦‚æœç ”ç™¼éç¶²é—œä¸­é–“ä»¶æˆ–è€…ä½¿ç”¨éZuulçš„äººï¼ŒæœƒçŸ¥é“ç¶²é—œçš„æ ¸å¿ƒæ˜¯Filterä»¥åŠFilter Chainï¼ˆFilterè²¬ä»»éˆï¼‰ã€‚Sprig Cloud Gatewayä¹Ÿå…·æœ‰è·¯ç”±å’ŒFilterçš„æ¦‚å¿µã€‚ä¸‹é¢ä»‹ç´¹ä¸€ä¸‹Spring Cloud Gatewayä¸­å¹¾å€‹é‡è¦çš„æ¦‚å¿µã€‚</p><p>è·¯ç”±ã€‚è·¯ç”±æ˜¯ç¶²é—œæœ€åŸºç¤çš„éƒ¨åˆ†ï¼Œè·¯ç”±ä¿¡æ¯æœ‰ä¸€å€‹IDã€ä¸€å€‹ç›®çš„URLã€ä¸€çµ„æ–·è¨€å’Œä¸€çµ„Filterçµ„æˆã€‚å¦‚æœæ–·è¨€è·¯ç”±ç‚ºçœŸï¼Œå‰‡èªªæ˜è«‹æ±‚çš„URLå’Œé…ç½®åŒ¹é…</p><p>æ–·è¨€ã€‚Java8ä¸­çš„æ–·è¨€å‡½æ•¸ã€‚Spring Cloud Gatewayä¸­çš„æ–·è¨€å‡½æ•¸è¼¸å…¥é¡å‹æ˜¯Spring5.0æ¡†æ¶ä¸­çš„ServerWebExchangeã€‚Spring Cloud Gatewayä¸­çš„æ–·è¨€å‡½æ•¸å…è¨±é–‹ç™¼è€…å»å®šç¾©åŒ¹é…ä¾†è‡ªæ–¼http requestä¸­çš„ä»»ä½•ä¿¡æ¯ï¼Œæ¯”å¦‚è«‹æ±‚é ­å’Œåƒæ•¸ç­‰ã€‚</p><p>éæ¿¾å™¨ã€‚ä¸€å€‹æ¨™æº–çš„Spring webFilterã€‚Spring cloud gatewayä¸­çš„filteråˆ†ç‚ºå…©ç¨®é¡å‹çš„Filterï¼Œåˆ†åˆ¥æ˜¯Gateway Filterå’ŒGlobal Filterã€‚éæ¿¾å™¨Filterå°‡æœƒå°è«‹æ±‚å’ŒéŸ¿æ‡‰é€²è¡Œä¿®æ”¹è™•ç†</p><p>Spring cloudGatewayç™¼å‡ºè«‹æ±‚ã€‚ç„¶å¾Œå†ç”±Gateway Handler Mappingä¸­æ‰¾åˆ°èˆ‡è«‹æ±‚ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°‡å…¶ç™¼é€åˆ°Gateway web handlerã€‚Handlerå†é€šéæŒ‡å®šçš„éæ¿¾å™¨éˆå°‡è«‹æ±‚ç™¼é€åˆ°æˆ‘å€‘å¯¦éš›çš„æœå‹™åŸ·è¡Œæ¥­å‹™é‚è¼¯ï¼Œç„¶å¾Œè¿”å›ã€‚</p><h1>å¿«é€Ÿå…¥é–€</h1><p>ä»¥Spring Bootæ¡†æ¶é–‹ç™¼ç‚ºä¾‹ï¼Œå•Ÿå‹•ä¸€å€‹Gatewayæœå‹™æ¨¡å¡Šï¼ˆä»¥Consulä½œç‚ºè¨»å†Šä¸­å¿ƒï¼‰ï¼Œä¸€å€‹å¾Œç«¯æœå‹™æ¨¡å¡Šã€‚clientç«¯è«‹æ±‚ç¶“gatewayæœå‹™æŠŠè«‹æ±‚è·¯ç”±åˆ°å¾Œç«¯æœå‹™ã€‚</p><p>å‰ææ¢ä»¶ï¼š</p><ul><li>Consulï¼šç‰ˆæœ¬1.5.0ã€‚</li><li>Spring botï¼šç‰ˆæœ¬2.1.5ã€‚</li><li>Spring cloudï¼šç‰ˆæœ¬Greenwich.SR1ã€‚</li><li>Redisï¼šç‰ˆæœ¬5.0.5ã€‚</li></ul><p>1.å¾®æœå‹™é–‹ç™¼</p><p>é€™è£¡ä»¥ä½¿ç”¨Spring Bootæ¡†æ¶é–‹ç™¼å¾®æœå‹™ç‚ºä¾‹ï¼Œå•Ÿå‹•ä¸€å€‹æœå‹™ä¸¦è¨»å†Šåˆ°Consulã€‚</p><p>å¼•å…¥ä¾è³´ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>è¨»å†Šæœå‹™åˆ°Consulï¼Œé…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:application:name: service-consumercloud:consul: host: 127.0.0.1 port: 8500 discovery: service-name: service-consumer</pre><p>å¦‚ä¸‹å®šç¾©RestControllerï¼Œç™¼ä½ˆHTTPæ¥å£ã€‚</p><pre>@RestController@RequestMapping("/user")public class UserController {@Resourceprivate UserService userService;@GetMapping(value = "/info")public User info() { return userService.info();}</pre><p>}</p><blockquote><p>æ³¨ï¼šæ­¤ç‚ºæœå‹™ç«¯é…ç½®ï¼Œç¶“GatewayæŠŠè«‹æ±‚è·¯ç”±è½‰ç™¼åˆ°è©²æœå‹™ä¸Šã€‚</p></blockquote><p>2.ç¶²é—œé…ç½®</p><p>å‰µå»ºä¸€å€‹Gatewayæœå‹™ï¼Œå¼•å…¥ä»¥ä¸‹ä¾è³´ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>å•Ÿå‹•é¡é…ç½®å¦‚ä¸‹ï¼š</p><pre>@SpringBootApplication@EnableDiscoveryClientpublic class GatewayApplication {public static void main(String[] args) { SpringApplication.run(GatewayApplication.class, args);}</pre><p>}</p><p>Spring Cloud Gatewayå°clientç«¯è«‹æ±‚èµ·åˆ°è·¯ç”±åŠŸèƒ½ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre>server:port: 8098spring:application:name: service-gatewaycloud:gateway: discovery: locator: enabled: true  lower-case-service-id: true consul: host: 127.0.0.1 #è¨»å†Šgatewayç¶²é—œåˆ°consul port: 8500 discovery: service-name: service-gateway</pre><p>æ­¤æ™‚ä½¿ç”¨http://localhost:8089/service-consumer/user/infoè¨ªå•æœå‹™ï¼Œç¶²é—œå³å¯å°æœå‹™é€²è¡Œè·¯ç”±è½‰ç™¼ï¼ŒæŠŠè«‹æ±‚è½‰ç™¼åˆ°å…·é«”å¾Œç«¯æœå‹™ä¸Šã€‚æ­¤æ™‚ï¼Œurlä¸­ä½¿ç”¨çš„urlå‰ç¶´service-consumerï¼Œæ˜¯å¾Œç«¯æœå‹™åœ¨Consulè¨»å†Šçš„æœå‹™åç¨±è½‰ç‚ºå°å¯«å­—æ¯ä»¥å¾Œçš„å­—ç¬¦ä¸²ã€‚</p><h1>æœ€ä½³å¯¦è¸</h1><p><strong>01 Gatewayç¶²é—œé…ç½®</strong></p><p>æœ¬æ–‡ç¬¬äºŒéƒ¨åˆ†é–‹ç™¼è¦ç¯„ä¸­å®šç¾©äº†ç¶²é—œé€²è¡Œè·¯ç”±è½‰ç™¼çš„é…ç½®ï¼Œé™¤äº†ä¸Šè¿°é…ç½®æ–¹å¼é‚„å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼é€²è¡Œé…ç½®ï¼š</p><pre>gateway: discovery: locator: enabled: true lower-case-service-id: true routes: - id: service_consumer uri: lb://service-consumer predicates: - Path= /consumer/** filters: - StripPrefix=1</pre><p>åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œé…ç½®äº†ä¸€å€‹Pathçš„predicat,å°‡ä»¥/consumer/**é–‹é ­çš„è«‹æ±‚éƒ½æœƒè½‰ç™¼åˆ°uriç‚ºlb://service-consumerçš„åœ°å€ä¸Šï¼Œlb://service-consumerï¼ˆè¨»å†Šä¸­å¿ƒä¸­æœå‹™çš„åç¨±ï¼‰å³service-consumeræœå‹™çš„è² è¼‰å‡è¡¡åœ°å€ï¼Œä¸¦ç”¨StripPrefixçš„filter åœ¨è½‰ç™¼ä¹‹å‰å°‡/consumerå»æ‰ã€‚åŒæ™‚å°‡spring.cloud.gateway.discovery.locator.enabledæ”¹ç‚ºfalseï¼Œå¦‚æœä¸æ”¹çš„è©±ï¼Œä¹‹å‰çš„http://localhost:8081/service-consumer/user/infoé€™æ¨£çš„è«‹æ±‚åœ°å€ä¹Ÿèƒ½æ­£å¸¸è¨ªå•ï¼Œå› ç‚ºé€™æ™‚ç‚ºæ¯å€‹æœå‹™å‰µå»ºäº†2å€‹routerã€‚</p><p>æœ¬æ–‡ç¬¬äºŒéƒ¨åˆ†å’Œæœ¬ç¯€ä¸€å…±è¬›è¿°äº†å…©ç¨®é…ç½®æ–¹å¼ï¼Œå…©ç¨®é…ç½®éƒ½å¯ä»¥å¯¦ç¾è«‹æ±‚è·¯ç”±è½‰ç™¼çš„åŠŸèƒ½ã€‚åƒæ•¸spring.cloud.gateway.discovery.locator.enabledç‚ºtrueï¼Œè¡¨æ˜Gatewayé–‹å•Ÿæœå‹™è¨»å†Šå’Œç™¼ç¾çš„åŠŸèƒ½ï¼Œä¸¦ä¸”Spring Cloud Gatewayè‡ªå‹•æ ¹æ“šæœå‹™ç™¼ç¾ç‚ºæ¯ä¸€å€‹æœå‹™å‰µå»ºäº†ä¸€å€‹routerï¼Œé€™å€‹routerå°‡ä»¥æœå‹™åé–‹é ­çš„è«‹æ±‚è·¯å¾‘è½‰ç™¼åˆ°å°æ‡‰çš„æœå‹™ã€‚spring.cloud.gateway.discovery.locator.lowerCaseServiceIdæ˜¯å°‡è«‹æ±‚è·¯å¾‘ä¸Šçš„æœå‹™åé…ç½®ç‚ºå°å¯«ï¼ˆå› ç‚ºæœå‹™è¨»å†Šçš„æ™‚å€™ï¼Œå‘è¨»å†Šä¸­å¿ƒè¨»å†Šæ™‚å°‡æœå‹™åè½‰æˆå¤§å¯«çš„äº†ï¼‰ã€‚</p><pre>gateway: discovery: locator: enabled: true lower-case-service-id: true</pre><p><strong>02 Gatewayè·¨åŸŸè¨ªå•</strong></p><p>Spring Cloud Gatewayé‚„é‡å°è·¨åŸŸè¨ªå•åšäº†è¨­è¨ˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®è§£æ±ºè·¨åŸŸè¨ªå•å•é¡Œï¼š</p><pre>spring:cloud:gateway: globalcors: corsConfigurations: '[/**]': allowedOrigins: "https://docs.spring.io" allowedMethods: - GET allowHeaders: - Content-Type</pre><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå…è¨±ä¾†è‡ªhttps://docs.spring.ioçš„getè«‹æ±‚é€²è¡Œè¨ªå•,ä¸¦ä¸”è¡¨æ˜æœå‹™å™¨å…è¨±è«‹æ±‚é ­ä¸­æ”œå¸¶å­—æ®µContent-Typeã€‚</p><p><strong>03 Gateway éæ¿¾å™¨</strong></p><p>Spring Cloud Gatewayçš„filterç”Ÿå‘½é€±æœŸä¸åƒZuulé‚£éº¼è±å¯Œï¼Œå®ƒåªæœ‰å…©å€‹ï¼šâ€œpreâ€å’Œâ€œpostâ€ï¼š</p><p>pre:é€™ç¨®éæ¿¾å™¨åœ¨è«‹æ±‚è¢«è·¯ç”±ä¹‹å‰èª¿ç”¨ã€‚å¯ä»¥åˆ©ç”¨é€™å€‹éæ¿¾å™¨å¯¦ç¾èº«ä»½é©—è­‰ã€åœ¨é›†ç¾¤ä¸­é¸æ“‡è«‹æ±‚çš„å¾®æœå‹™ã€è¨˜éŒ„èª¿è©¦çš„ä¿¡æ¯ã€‚</p><p>postï¼šé€™ç¨®éæ¿¾å™¨åœ¨è·¯ç”±åˆ°æœå‹™å™¨ä¹‹å¾ŒåŸ·è¡Œã€‚é€™ç¨®éæ¿¾å™¨å¯ç”¨ä¾†ç‚ºéŸ¿æ‡‰æ·»åŠ HTTP Headerã€çµ±è¨ˆä¿¡æ¯å’ŒæŒ‡æ¨™ã€éŸ¿æ‡‰å¾å¾®æœå‹™ç™¼é€çµ¦å®¢æˆ¶ç«¯ç­‰ã€‚</p><p>Spring Cloud gatewayçš„filteråˆ†ç‚ºå…©ç¨®ï¼šGatewayFilterå’ŒGlobalfilterã€‚GlobalFilteræœƒæ‡‰ç”¨åˆ°æ‰€æœ‰çš„è·¯ç”±ä¸Šï¼Œè€ŒGatewayfilterå°‡æ‡‰ç”¨åˆ°å–®å€‹è·¯ç”±æˆ–è€…ä¸€å€‹åˆ†çµ„çš„è·¯ç”±ä¸Šã€‚</p><p>åˆ©ç”¨Gatewayfilterå¯ä»¥ä¿®æ”¹è«‹æ±‚çš„httpçš„è«‹æ±‚æˆ–è€…æ˜¯éŸ¿æ‡‰ï¼Œæˆ–è€…æ ¹æ“šè«‹æ±‚æˆ–è€…éŸ¿æ‡‰åšä¸€äº›ç‰¹æ®Šçš„é™åˆ¶ã€‚æ›´å¤šæ™‚å€™å¯ä»¥åˆ©ç”¨Gatewayfilteråšä¸€äº›å…·é«”çš„è·¯ç”±é…ç½®ã€‚</p><p>ä¸‹é¢çš„é…ç½®æ˜¯AddRequestParameter Gatewayfilterçš„ç›¸é—œé…ç½®ã€‚</p><pre>spring:application:name: service-gatewaycloud:gateway: discovery: locator: enabled: true routes: - id: parameter_route uri: http://localhost:8504/user/info filters: - AddRequestParameter=foo, bar predicates: - Method=GET</pre><p>ä¸Šè¿°é…ç½®ä¸­æŒ‡å®šäº†è½‰ç™¼çš„åœ°å€ï¼Œè¨­ç½®æ‰€æœ‰çš„GETæ–¹æ³•éƒ½æœƒè‡ªå‹•æ·»åŠ foo=bar,ç•¶è«‹æ±‚ç¬¦åˆä¸Šè¿°è·¯ç”±æ¢ä»¶æ™‚ï¼Œå³å¯åœ¨å¾Œç«¯æœå‹™ä¸Šæ¥æ”¶åˆ°Gatewayç¶²é—œæ·»åŠ çš„åƒæ•¸ã€‚</p><p>å¦å¤–å†ä»‹ç´¹ä¸€ç¨®æ¯”è¼ƒå¸¸ç”¨çš„filterï¼Œå³StripPrefix gateway filterã€‚</p><p>é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: stripprefixfilter uri: lb://service-consumer predicates: - Path=/consumer/** filters: - StripPrefix=1</pre><p>ç•¶clientç«¯ä½¿ç”¨http://localhost:8098/consumer/user/infoè·¯å¾‘é€²è¡Œè«‹æ±‚æ™‚ï¼Œå¦‚æœæ ¹æ“šä¸Šè¿°é€²è¡Œé…ç½®Gatewayæœƒå°‡è«‹æ±‚è½‰æ›ç‚ºhttp://localhost:8098/service-consumer/user/infoã€‚ä»¥æ­¤ä½œç‚ºå‰ç«¯è«‹æ±‚çš„æœ€çµ‚ç›®çš„åœ°ã€‚</p><p><strong>04 Gatewayè«‹æ±‚åŒ¹é…</strong></p><p>Gatewayç¶²é—œå¯ä»¥æ ¹æ“šä¸åŒçš„æ–¹å¼é€²è¡ŒåŒ¹é…é€²è€ŒæŠŠè«‹æ±‚åˆ†ç™¼åˆ°ä¸åŒçš„å¾Œç«¯æœå‹™ä¸Šã€‚</p><p>é€šéheaderé€²è¡ŒåŒ¹é…ï¼ŒæŠŠè«‹æ±‚åˆ†ç™¼åˆ°ä¸åŒçš„æœå‹™ä¸Šï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: header_route uri: http://baidu.com predicates: - Header=X-Request-Id, \d+</pre><p>é€šécurlæ¸¬è©¦ï¼šcurl http://localhost:8080 -H "X-Request-Id:666666",è¿”å›é é¢ä»£ç¢¼è­‰æ˜åŒ¹é…æˆåŠŸã€‚</p><p>å¦‚æœæ˜¯ä»¥Hosté€²è¡ŒåŒ¹é…ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: host_route uri: http://baidu.com predicates: - Host=**.baidu.com</pre><p>é€šécurl http://localhost:8098 -H "Host: www.baidu.com"é€²è¡Œæ¸¬è©¦ï¼Œè¿”å›é é¢ä»£ç¢¼å³è½‰ç™¼æˆåŠŸã€‚</p><p>å¯ä»¥é€šéPOSTã€GETã€PUTã€DELTEç­‰ä¸åŒçš„æ–¹å¼é€²è¡Œè·¯ç”±ï¼š</p><pre>spring:cloud:gateway: routes: - id: method_route uri: http://baidu.com predicates: - Method=GET</pre><p>é€šé curl http://localhost:8098 é€²è¡Œæ¸¬è©¦ï¼Œè¿”å›é é¢ä»£ç¢¼å³è¡¨ç¤ºæˆåŠŸã€‚</p><p>ä¸Šè¿°æ˜¯å–®å€‹åŒ¹é…é€²è¡Œè·¯ç”±ï¼Œå¦‚æœæŠŠå¤šå€‹åŒ¹é…åˆåœ¨ä¸€èµ·é€²è¡Œè·¯ç”±ï¼Œå¿…é ˆæ»¿è¶³æ‰€æœ‰çš„è·¯æœ‰æ¢ä»¶æ‰æœƒé€²è¡Œè·¯ç”±è½‰ç™¼ã€‚</p><p><strong>05 Gatewayç†”æ–·</strong></p><p>Spring Cloud Gatewayä¹Ÿå¯ä»¥åˆ©ç”¨Hystrixçš„ç†”æ–·ç‰¹æ€§ï¼Œåœ¨æµé‡éå¤§æ™‚é€²è¡Œæœå‹™é™ç´šï¼ŒåŒæ™‚é …ç›®ä¸­å¿…é ˆåŠ ä¸ŠHystrixçš„ä¾è³´ã€‚</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; </pre><p>é…ç½®å¾Œï¼ŒGatewayå°‡ä½¿ç”¨fallbackcmdä½œç‚ºåç¨±ç”ŸæˆHystrixCommandå°è±¡é€²è¡Œç†”æ–·è™•ç†ã€‚å¦‚æœæƒ³æ·»åŠ ç†”æ–·å¾Œçš„å›èª¿å…§å®¹ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><pre>spring:cloud:gateway: routes: - id: hystrix_route uri: lb://consumer-service predicates: - Path=/consumer/** filters: - name: Hystrix args: name: fallbackcmd fallbackUri: forward:/fallback - StripPrefix=1hystrix: command:fallbackcmd: execution: isolation: thread: timeoutInMilliseconds: 5000 #è¶…æ™‚æ™‚é–“ï¼Œè‹¥ä¸è¨­ç½®è¶…æ™‚æ™‚é–“å‰‡æœ‰å¯èƒ½ç„¡æ³•è§¸ç™¼ç†”æ–·</pre><p>ä¸Šè¿°é…ç½®ä¸­çµ¦å‡ºäº†ç†”æ–·ä¹‹å¾Œè¿”å›è·¯å¾‘ï¼Œå› æ­¤ï¼Œåœ¨Gatewayæœå‹™æ¨¡å¡Šæ·»åŠ /fallbackè·¯å¾‘ï¼Œä»¥ä½œç‚ºæœå‹™ç†”æ–·æ™‚çš„è¿”å›è·¯å¾‘ã€‚</p><pre>@RestControllerpublic class GatewayController {@RequestMapping(value = "/fallback")public String fallback(){ return "fallback nothing";}</pre><p>}</p><p>fallbackUri: forward:/fallbacké…ç½®äº† fallback æ™‚è¦æœƒèª¿çš„è·¯å¾‘ï¼Œç•¶èª¿ç”¨ Hystrix çš„ fallback è¢«èª¿ç”¨æ™‚ï¼Œè«‹æ±‚å°‡è½‰ç™¼åˆ°/fallbacké€™å€‹ URIï¼Œä¸¦ä»¥æ­¤è·¯å¾‘çš„è¿”å›å€¼ä½œç‚ºè¿”å›çµæœã€‚</p><p><strong>06 Gatewayé‡è©¦è·¯ç”±å™¨</strong></p><p>é€šéç°¡å–®çš„é…ç½®ï¼ŒSpring Cloud Gatewayå°±å¯ä»¥æ”¯æŒè«‹æ±‚é‡è©¦åŠŸèƒ½ã€‚</p><pre>spring:cloud:gateway: routes: - id: header_route uri: http://localhost:8504/user/info predicates: - Path=/user/** filters: - name: Retry args: retries: 3 status: 503 - StripPrefix=1</pre><p>Retry GatewayFilteré€šéå››å€‹åƒæ•¸ä¾†æ§åˆ¶é‡è©¦æ©Ÿåˆ¶ï¼Œåƒæ•¸èªªæ˜å¦‚ä¸‹ï¼š</p><ul><li>retriesï¼šé‡è©¦æ¬¡æ•¸ï¼Œé»˜èªå€¼æ˜¯ 3 æ¬¡ã€‚</li><li>statusesï¼šHTTP çš„ç‹€æ…‹è¿”å›ç¢¼ï¼Œå–å€¼è«‹åƒè€ƒï¼šorg.springframework.http.HttpStatusã€‚</li><li>methodsï¼šæŒ‡å®šå“ªäº›æ–¹æ³•çš„è«‹æ±‚éœ€è¦é€²è¡Œé‡è©¦é‚è¼¯ï¼Œé»˜èªå€¼æ˜¯ GET æ–¹æ³•ï¼Œå–å€¼åƒè€ƒï¼šorg.springframework.http.HttpMethodã€‚</li><li>seriesï¼šä¸€äº›åˆ—çš„ç‹€æ…‹ç¢¼é…ç½®ï¼Œå–å€¼åƒè€ƒï¼šorg.springframework.http.HttpStatus.Seriesã€‚ç¬¦åˆçš„æŸæ®µç‹€æ…‹ç¢¼æ‰æœƒé€²è¡Œé‡è©¦é‚è¼¯ï¼Œé»˜èªå€¼æ˜¯ SERVER_ERRORï¼Œå€¼æ˜¯ 5ï¼Œä¹Ÿå°±æ˜¯ 5XX(5 é–‹é ­çš„ç‹€æ…‹ç¢¼)ï¼Œå…±æœ‰5å€‹å€¼ã€‚</li></ul><p>ä½¿ç”¨ä¸Šè¿°é…ç½®é€²è¡Œæ¸¬è©¦ï¼Œç•¶å¾Œè‡ºæœå‹™ä¸å¯ç”¨æ™‚ï¼Œæœƒåœ¨æ§åˆ¶æª¯çœ‹åˆ°è«‹æ±‚ä¸‰æ¬¡çš„æ—¥èªŒï¼Œè­‰æ˜æ­¤é…ç½®æœ‰æ•ˆã€‚</p><p><strong>07 Gateway é™æµæ“ä½œ</strong></p><p>Spring Cloud Gatewayæœ¬èº«é›†æˆäº†é™æµæ“ä½œï¼ŒGatewayé™æµéœ€è¦ä½¿ç”¨Redisï¼Œpomæ–‡ä»¶ä¸­æ·»åŠ Redisä¾è³´ï¼š</p><pre>&lt;dependency&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-data-redis-reactive&lt;/artifactId&gt;&lt;/dependency&gt;</pre><p>é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><pre>spring:cloud:gateway: routes: - id: rate_limit_route uri: lb://service-consumer predicates: - Path=/user/** filters: - name: RequestRateLimiter args: key-resolver: "#{@hostAddrKeyResolver}" redis-rate-limiter.replenishRate: 1 redis-rate-limiter.burstCapacity: 3 - StripPrefix=1consul: host: 127.0.0.1 port: 8500 discovery: service-name: service-gateway instance-id: service-gateway-233redis:host: localhostport: 6379</pre><p>åœ¨ä¸Šé¢çš„é…ç½®å•åƒ¹ä¸­ï¼Œé…ç½®äº†Redisçš„ä¿¡æ¯ï¼Œä¸¦é…ç½®äº†RequestRateLimiterçš„é™æµéæ¿¾å™¨ï¼Œè©²éæ¿¾å™¨éœ€è¦é…ç½®ä¸‰å€‹åƒæ•¸ï¼š</p><ul><li>BurstCapacityï¼šä»¤ç‰Œæ¡¶çš„ç¸½å®¹é‡ã€‚</li><li>replenishRateï¼šä»¤ç‰Œé€šæ¯ç§’å¡«å……å¹³å‡é€Ÿç‡ã€‚</li><li>Key-resolverï¼šç”¨æ–¼é™æµçš„è§£æå™¨çš„Beanå°è±¡çš„åå­—ã€‚å®ƒä½¿ç”¨SpELè¡¨é”å¼#{@beanName}å¾Springå®¹å™¨ä¸­ç²å–beanå°è±¡ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼šfilterä¸‹çš„nameå¿…é ˆæ˜¯RequestRateLimiterã€‚</p></blockquote><p>Key-resolveråƒæ•¸å¾Œé¢çš„beanéœ€è¦è‡ªå·±å¯¦ç¾ï¼Œç„¶å¾Œæ³¨å…¥åˆ°Springå®¹å™¨ä¸­ã€‚KeyResolveréœ€è¦å¯¦ç¾resolveæ–¹æ³•ï¼Œæ¯”å¦‚æ ¹æ“šipé€²è¡Œé™æµï¼Œå‰‡éœ€è¦ç”¨hostAddresså»åˆ¤æ–·ã€‚å¯¦ç¾å®ŒKeyResolverä¹‹å¾Œï¼Œéœ€è¦å°‡é€™å€‹é¡çš„Beanè¨»å†Šåˆ°Iocå®¹å™¨ä¸­ã€‚é‚„å¯ä»¥æ ¹æ“šurié™æµï¼ŒåŒhostnameé™æµæ˜¯ä¸€æ¨£çš„ã€‚ä¾‹å¦‚ä»¥ipé™æµç‚ºä¾‹ï¼Œåœ¨gatewayæ¨¡å¡Šä¸­æ·»åŠ ä»¥ä¸‹å¯¦ç¾ï¼š</p><pre>public class HostAddrKeyResolver implements KeyResolver {@Overridepublic Mono&lt;String&gt; resolve(ServerWebExchange exchange) { return Mono.just(exchange.getRequest().getRemoteAddress().getAddress().getHostAddress());}public HostAddrKeyResolver hostAddrKeyResolver() { return new HostAddrKeyResolver();}</pre><p>}</p><p>æŠŠè©²é¡æ³¨å…¥åˆ°springå®¹å™¨ä¸­ï¼š</p><pre>@SpringBootApplication@EnableDiscoveryClientpublic class GatewayApplication {public static void main(String[] args) { SpringApplication.run(GatewayApplication.class, args);}@Beanpublic HostAddrKeyResolver hostAddrKeyResolver(){ return new HostAddrKeyResolver();}</pre><p>}</p><p>åŸºæ–¼ä¸Šè¿°é…ç½®ï¼Œå¯ä»¥å°è«‹æ±‚åŸºæ–¼ipçš„è¨ªå•é€²è¡Œé™æµã€‚</p><p><strong>08 è‡ªå®šç¾©Gatewayfilter</strong></p><p>Spring Cloud Gatewayå…§ç½®äº†éæ¿¾å™¨ï¼Œèƒ½å¤ æ»¿è¶³å¾ˆå¤šå ´æ™¯çš„éœ€æ±‚ã€‚ç•¶ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå®šç¾©éæ¿¾å™¨ã€‚åœ¨Spring Cloud Gatewayè‡ªå®šç¾©éæ¿¾å™¨ï¼Œéæ¿¾å™¨éœ€è¦å¯¦ç¾GatewayFilterå’ŒOrderedé€™å…©å€‹æ¥å£ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å¯¦ç¾äº†Gatewayfilterï¼Œå®ƒå¯ä»¥ä»¥logæ—¥èªŒçš„å½¢å¼è¨˜éŒ„æ¯æ¬¡è«‹æ±‚è€—è²»çš„æ™‚é–“ï¼Œå…·é«”å¯¦ç¾å¦‚ä¸‹ï¼š</p><pre>public class RequestTimeFilter implements GatewayFilter, Ordered {private static final Log log = LogFactory.getLog(GatewayFilter.class);private static final String REQUEST_TIME_BEGIN = "requestTimeBegin";@Overridepublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) { exchange.getAttributes().put(REQUEST_TIME_BEGIN, System.currentTimeMillis()); return chain.filter(exchange).then( Mono.fromRunnable(() -&gt; { Long startTime = exchange.getAttribute(REQUEST_TIME_BEGIN); if (startTime != null) { log.info("è«‹æ±‚è·¯å¾‘ï¼š"+exchange.getRequest().getURI().getRawPath() + "æ¶ˆè€—æ™‚é–“: " + (System.currentTimeMillis() - startTime) + "ms"); } }) );}@Overridepublic int getOrder() { return 0;}</pre><p>}</p><p>ä¸Šè¿°ä»£ç¢¼ä¸­å®šç¾©äº†è‡ªå·±å¯¦ç¾çš„éæ¿¾å™¨ã€‚Orderedçš„int getOrderï¼ˆï¼‰æ–¹æ³•æ˜¯ä¾†çµ¦éæ¿¾å™¨å®šå„ªå…ˆç´šçš„ï¼Œå€¼è¶Šå¤§å„ªå…ˆç´šè¶Šä½ã€‚é‚„æœ‰ä¸€å€‹filter(ServerWebExchange exchange, GatewayFilterChain chain)æ–¹æ³•ï¼Œåœ¨è©²æ–¹æ³•ä¸­ï¼Œå…ˆè¨˜éŒ„äº†è«‹æ±‚çš„é–‹å§‹æ™‚é–“ï¼Œä¸¦ä¿å­˜åœ¨ServerWebExchangeä¸­ï¼Œæ­¤è™•æ˜¯ä¸€å€‹â€œpreâ€é¡å‹çš„éæ¿¾å™¨ã€‚ç„¶å¾Œå†chain.filter()çš„å…§éƒ¨é¡ä¸­çš„run()æ–¹æ³•ä¸­ç›¸ç•¶æ–¼"post"éæ¿¾å™¨ï¼Œåœ¨æ­¤è™•æ‰“å°äº†è«‹æ±‚æ‰€æ¶ˆè€—çš„æ™‚é–“ã€‚</p><p>æ¥ä¸‹ä¾†å°‡è©²éæ¿¾å™¨è¨»å†Šåˆ°routerä¸­ï¼Œä»£ç¢¼å¦‚ä¸‹ã€‚</p><pre>@Beanpublic RouteLocator customerRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(r -&gt; r.path("/user/**") .filters(f -&gt; f.filter(new RequestTimeFilter()) .addResponseHeader("X-Response-Default-Foo", "Default-Bar")) .uri("http://localhost:8504/user/info") .order(0) .id("customer_filter_router") ) .build();</pre><p>}</p><p>é™¤äº†ä¸Šè¿°ä»£ç¢¼çš„æ–¹å¼é…ç½®æˆ‘å€‘è‡ªå®šç¾©çš„éæ¿¾å™¨çš„æ–¹å¼ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨application.ymlæ–‡ä»¶ä¸­ç›´æ¥é…ç½®ï¼Œé€™è£¡ä¸å†è´…è¿°ã€‚</p><p>å•Ÿå‹•ç¨‹åºï¼Œé€šécurl http://localhost:8098/user/infoæ§åˆ¶æª¯æœƒæ‰“å°å‡ºè«‹æ±‚æ¶ˆè€—æ™‚é–“ï¼Œæ—¥èªŒå¦‚ä¸‹ï¼š</p><pre>....2019-05-22 15:13:31.221 INFO 19780 --- [ctor-http-nio-4] o.s.cloud.gateway.filter.GatewayFilter : è«‹æ±‚è·¯å¾‘ï¼š/user/infoæ¶ˆè€—æ™‚é–“: 54ms...2019-05-22 16:46:23.785 INFO 29928 --- [ctor-http-nio-1] o.s.cloud.gateway.filter.GatewayFilter : è«‹æ±‚è·¯å¾‘ï¼š/user/info3æ¶ˆè€—æ™‚é–“: 5ms....</pre><p><strong>09 è‡ªå®šç¾©GlobalFilter</strong></p><p>Spring Cloud Gatewayæ ¹æ“šä½œç”¨ç¯„åœåˆ†ç‚ºGatewayFilterå’ŒGlobalFilterï¼ŒäºŒè€…å€åˆ¥å¦‚ä¸‹ï¼š</p><p>GatewayFilter : éœ€è¦é€šéspring.cloud.routes.filters é…ç½®åœ¨å…·é«”è·¯ç”±ä¸‹ï¼Œåªä½œç”¨åœ¨ç•¶å‰è·¯ç”±ä¸Šæˆ–é€šéspring.cloud.default-filtersé…ç½®åœ¨å…¨å±€ï¼Œä½œç”¨åœ¨æ‰€æœ‰è·¯ç”±ä¸Šã€‚</p><p>GlobalFilter:å…¨å±€éæ¿¾å™¨ï¼Œä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œä½œç”¨åœ¨æ‰€æœ‰çš„è·¯ç”±ä¸Šï¼Œæœ€çµ‚é€šéGatewayFilterAdapteråŒ…è£æˆGatewayFilterChainå¯è­˜åˆ¥çš„éæ¿¾å™¨ï¼Œå®ƒç‚ºè«‹æ±‚æ¥­å‹™ä»¥åŠè·¯ç”±çš„URIè½‰æ›ç‚ºçœŸå¯¦æ¥­å‹™æœå‹™çš„è«‹æ±‚åœ°å€çš„æ ¸å¿ƒéæ¿¾å™¨ï¼Œä¸éœ€è¦é…ç½®ï¼Œç³»çµ±åˆå§‹åŒ–æ™‚åŠ è¼‰ï¼Œä¸¦ä½œç”¨åœ¨æ¯å€‹è·¯ç”±ä¸Šã€‚</p><p>åœ¨ä¸Šä¸€å°ç¯€ä¸­å®šç¾©çš„æ˜¯Gatewayfilterï¼Œä¸‹é¢å¯¦ç¾çš„æ˜¯Globalfilterï¼š</p><pre>public class TokenFilter implements GlobalFilter, Ordered {Logger logger= LoggerFactory.getLogger( TokenFilter.class );@Overridepublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) { String token = exchange.getRequest().getQueryParams().getFirst("token"); if (token == null || token.isEmpty()) { logger.info( "token ç‚ºç©ºï¼Œç„¡æ³•é€²è¡Œè¨ªå•." ); exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED); return exchange.getResponse().setComplete(); } return chain.filter(exchange);}@Overridepublic int getOrder() { return 0;}</pre><p>}</p><p>ä¸Šè¿°ä»£ç¢¼å¯¦ç¾äº†Globalfilterï¼Œå…·é«”é‚è¼¯æ˜¯åˆ¤æ–·è«‹æ±‚ä¸­æ˜¯å¦å«åƒæ•¸tokenï¼Œå¦‚æœæ²’æœ‰ï¼Œå‰‡æ ¡é©—ä¸é€šéï¼Œå°æ‰€æœ‰è«‹æ±‚éƒ½æœ‰æ•ˆã€‚å¦‚æœå«æœ‰tokenå‰‡è½‰ç™¼åˆ°å…·é«”å¾Œç«¯æœå‹™ä¸Šï¼Œå¦‚æœæ²’æœ‰å‰‡æ ¡é©—ä¸é€šéã€‚</p><p>é€šécurl http://localhost:8098/user/infoé€²è¡Œè¨ªå•ï¼Œå› ç‚ºè·¯å¾‘ä¸­ä¸å«æœ‰åƒæ•¸tokenï¼Œå‰‡ç„¡æ³•é€šéæ ¡é©—ï¼Œæ‰“å°æ—¥èªŒå¦‚ä¸‹ï¼š</p><pre>2019-05-22 15:27:11.078 INFO 5956 --- [ctor-http-nio-1] com.song.gateway.TokenFilter : token ç‚ºç©ºï¼Œç„¡æ³•é€²è¡Œè¨ªå•....</pre><p>é€šécurl http://localhost:8098/user/info?token=123é€²è¡Œè¨ªå•æ™‚ï¼Œå‰‡å¯ä»¥ç²å–åˆ°å¾Œç«¯æœå‹™è¿”å›çµæœã€‚</p><h1><strong>æœ€å¾Œ</strong></h1><p>å¦‚æœè¦ºå¾—æœ¬æ–‡å°æ‚¨æœ‰å¹«åŠ©çš„è©±ï¼Œè¨˜å¾—<strong>é—œæ³¨ã€è½‰ç™¼</strong>å“¦ï¼Œæˆ‘æœƒç‚ºå¤§å®¶æŒçºŒæä¾›åŸå‰µä¹¾è²¨ã€‚éœ€è¦è³‡æ–™ï¼Œè«‹<strong>é—œæ³¨ã€è½‰ç™¼ï¼Œ</strong>ç§ä¿¡â€œè³‡æ–™â€é¢è©¦+å¾®æœå‹™+springbootè³‡æ–™å…è²»è´ˆé€ã€‚</p><p><strong>åŸæ–‡ï¼šhttp://www.dockone.io/article/8900</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>å¥½æ–‡</a></li><li><a>æ¨è–¦</a></li><li><a>ç¶²é—œ</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/75293feb.html alt=å¥½æ–‡æ¨è–¦ï½œä½ çœŸçš„æœƒå¯©è©•æ™®æ´±èŒ¶å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/42c556fb50c24bc5a1f3dd3fa32919de style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/75293feb.html title=å¥½æ–‡æ¨è–¦ï½œä½ çœŸçš„æœƒå¯©è©•æ™®æ´±èŒ¶å—ï¼Ÿ>å¥½æ–‡æ¨è–¦ï½œä½ çœŸçš„æœƒå¯©è©•æ™®æ´±èŒ¶å—ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6a18e42f.html alt=å¥½æ–‡æ¨è–¦ï¼šçµ‚æ–¼æœ‰äººæŠŠElasticsearchåŸç†è¬›é€äº† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2dad09ec37d34565b9a3a057fdf9c0c8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6a18e42f.html title=å¥½æ–‡æ¨è–¦ï¼šçµ‚æ–¼æœ‰äººæŠŠElasticsearchåŸç†è¬›é€äº†>å¥½æ–‡æ¨è–¦ï¼šçµ‚æ–¼æœ‰äººæŠŠElasticsearchåŸç†è¬›é€äº†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e55aaf9b.html alt="è«–æ–‡æ¨è–¦ | è¢ä¿®å­ï¼šèˆªæ”å½±åƒå¯†é›†åŒ¹é…çš„ç ”ç©¶é€²å±•èˆ‡å±•æœ›" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6Ieh75DBRtmcY style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e55aaf9b.html title="è«–æ–‡æ¨è–¦ | è¢ä¿®å­ï¼šèˆªæ”å½±åƒå¯†é›†åŒ¹é…çš„ç ”ç©¶é€²å±•èˆ‡å±•æœ›">è«–æ–‡æ¨è–¦ | è¢ä¿®å­ï¼šèˆªæ”å½±åƒå¯†é›†åŒ¹é…çš„ç ”ç©¶é€²å±•èˆ‡å±•æœ›</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4653cf8e.html alt=è«–æ–‡æ¨è–¦ï½œç‹æ¿¤ï¼šåœ‹ç”¢æ©Ÿè¼‰å¤§è¦–å ´ä¸‰ç·šé™£CCDç›¸æ©ŸGNSSåå¿ƒçŸ¢é‡å’ŒIMUè¦–è»¸åå¿ƒè§’æ¨™å®šæŠ€è¡“ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6Ieh75DBRtmcY style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4653cf8e.html title=è«–æ–‡æ¨è–¦ï½œç‹æ¿¤ï¼šåœ‹ç”¢æ©Ÿè¼‰å¤§è¦–å ´ä¸‰ç·šé™£CCDç›¸æ©ŸGNSSåå¿ƒçŸ¢é‡å’ŒIMUè¦–è»¸åå¿ƒè§’æ¨™å®šæŠ€è¡“>è«–æ–‡æ¨è–¦ï½œç‹æ¿¤ï¼šåœ‹ç”¢æ©Ÿè¼‰å¤§è¦–å ´ä¸‰ç·šé™£CCDç›¸æ©ŸGNSSåå¿ƒçŸ¢é‡å’ŒIMUè¦–è»¸åå¿ƒè§’æ¨™å®šæŠ€è¡“</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html alt=æ¨è–¦10å€‹å€¼å¾—ä¸€å»çš„åœ‹å¤–ç¥å™¨ç¶²ç«™ï¼ç™»éŒ„ç„¡éœ€ä»»ä½•æ‰‹æ®µï¼Œå¯¦ç”¨åˆæœ‰è¶£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8716c57443b84bf39d12f7181c19e5d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html title=æ¨è–¦10å€‹å€¼å¾—ä¸€å»çš„åœ‹å¤–ç¥å™¨ç¶²ç«™ï¼ç™»éŒ„ç„¡éœ€ä»»ä½•æ‰‹æ®µï¼Œå¯¦ç”¨åˆæœ‰è¶£>æ¨è–¦10å€‹å€¼å¾—ä¸€å»çš„åœ‹å¤–ç¥å™¨ç¶²ç«™ï¼ç™»éŒ„ç„¡éœ€ä»»ä½•æ‰‹æ®µï¼Œå¯¦ç”¨åˆæœ‰è¶£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c4bdc082.html alt=åŒ–å­¸è€å¸«æ¨è–¦ï¼šæŒ‰å…ƒç´ æ­¸é¡çš„åˆä¸­åŒ–å­¸æ–¹ç¨‹å¼é›†åˆï¼è€ƒå‰è¤‡ç¿’å¥½è³‡æ–™ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e672e532fceb4bde92dc10ca986250ad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c4bdc082.html title=åŒ–å­¸è€å¸«æ¨è–¦ï¼šæŒ‰å…ƒç´ æ­¸é¡çš„åˆä¸­åŒ–å­¸æ–¹ç¨‹å¼é›†åˆï¼è€ƒå‰è¤‡ç¿’å¥½è³‡æ–™>åŒ–å­¸è€å¸«æ¨è–¦ï¼šæŒ‰å…ƒç´ æ­¸é¡çš„åˆä¸­åŒ–å­¸æ–¹ç¨‹å¼é›†åˆï¼è€ƒå‰è¤‡ç¿’å¥½è³‡æ–™</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5718fd72.html alt="è«–æ–‡æ¨è–¦ | é–†å»£å³°ï¼šL1ç¯„æ•¸æ¢æ¸¬ç²—å·®å¤±æ•ˆçš„è§€æ¸¬é‡è­˜åˆ¥æ–¹æ³•" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6W0QpMHySg0Qb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5718fd72.html title="è«–æ–‡æ¨è–¦ | é–†å»£å³°ï¼šL1ç¯„æ•¸æ¢æ¸¬ç²—å·®å¤±æ•ˆçš„è§€æ¸¬é‡è­˜åˆ¥æ–¹æ³•">è«–æ–‡æ¨è–¦ | é–†å»£å³°ï¼šL1ç¯„æ•¸æ¢æ¸¬ç²—å·®å¤±æ•ˆçš„è§€æ¸¬é‡è­˜åˆ¥æ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1fb68281.html alt=æ–°å“æ¨è–¦ï½œä½ è¦çš„ä¸‰é˜²æ¼†æ–°å“ä¾†å•¦ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0d18e71454334714a9ab8ac0e0e8d019 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1fb68281.html title=æ–°å“æ¨è–¦ï½œä½ è¦çš„ä¸‰é˜²æ¼†æ–°å“ä¾†å•¦>æ–°å“æ¨è–¦ï½œä½ è¦çš„ä¸‰é˜²æ¼†æ–°å“ä¾†å•¦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2c7df1e.html alt=ã€Œè«–æ–‡æ¨è–¦ã€å·¦å»ºå¹³æ•™æˆè«‡å²©å±¤ç§»å‹•ç ”ç©¶é€²å±•åŠé‡é» class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RmTmvrAHAwNOUb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2c7df1e.html title=ã€Œè«–æ–‡æ¨è–¦ã€å·¦å»ºå¹³æ•™æˆè«‡å²©å±¤ç§»å‹•ç ”ç©¶é€²å±•åŠé‡é»>ã€Œè«–æ–‡æ¨è–¦ã€å·¦å»ºå¹³æ•™æˆè«‡å²©å±¤ç§»å‹•ç ”ç©¶é€²å±•åŠé‡é»</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/811e0e2a.html alt=ä¸­ç§‘åœ°ä¿¡æ¨è–¦ä¸¨é€™äº›åœ°è³ªå‹•åœ–ï¼Œå¸¶ä½ çœ‹ç›¡åœ°çƒæ¿å¡Šè®ŠåŒ–ç†è§£åœ°è³ªæ§‹é€  class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1622aa4e323b417592715cfb657cdede style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/811e0e2a.html title=ä¸­ç§‘åœ°ä¿¡æ¨è–¦ä¸¨é€™äº›åœ°è³ªå‹•åœ–ï¼Œå¸¶ä½ çœ‹ç›¡åœ°çƒæ¿å¡Šè®ŠåŒ–ç†è§£åœ°è³ªæ§‹é€ >ä¸­ç§‘åœ°ä¿¡æ¨è–¦ä¸¨é€™äº›åœ°è³ªå‹•åœ–ï¼Œå¸¶ä½ çœ‹ç›¡åœ°çƒæ¿å¡Šè®ŠåŒ–ç†è§£åœ°è³ªæ§‹é€ </a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d77a0e0.html alt=ã€Œè«–æ–‡æ¨è–¦ã€éƒ­å»£ç¦®ç­‰ï¼šç„¡äº•å¼ç…¤ç‚­åœ°ä¸‹æ°£åŒ–å²©å±¤åŠåœ°è¡¨ç§»å‹•èˆ‡æ§åˆ¶ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ReafrDd7EHXniF style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d77a0e0.html title=ã€Œè«–æ–‡æ¨è–¦ã€éƒ­å»£ç¦®ç­‰ï¼šç„¡äº•å¼ç…¤ç‚­åœ°ä¸‹æ°£åŒ–å²©å±¤åŠåœ°è¡¨ç§»å‹•èˆ‡æ§åˆ¶>ã€Œè«–æ–‡æ¨è–¦ã€éƒ­å»£ç¦®ç­‰ï¼šç„¡äº•å¼ç…¤ç‚­åœ°ä¸‹æ°£åŒ–å²©å±¤åŠåœ°è¡¨ç§»å‹•èˆ‡æ§åˆ¶</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/52d575a2.html alt=å¦‚ä½•åœ¨è½‰è½‰è¼•é¬†è³£å‡ºäºŒæ‰‹ç‰©å“ï¼Ÿåè¡€æ¨è–¦é€™å¹¾æ¢å¯¦æˆ°ç¶“é©— class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c54abd15210f441ebd596b09560bbeca style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/52d575a2.html title=å¦‚ä½•åœ¨è½‰è½‰è¼•é¬†è³£å‡ºäºŒæ‰‹ç‰©å“ï¼Ÿåè¡€æ¨è–¦é€™å¹¾æ¢å¯¦æˆ°ç¶“é©—>å¦‚ä½•åœ¨è½‰è½‰è¼•é¬†è³£å‡ºäºŒæ‰‹ç‰©å“ï¼Ÿåè¡€æ¨è–¦é€™å¹¾æ¢å¯¦æˆ°ç¶“é©—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a262c260.html alt=6.28ä»Šæ—¥ç«¶å½©æ¨è–¦ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a262c260.html title=6.28ä»Šæ—¥ç«¶å½©æ¨è–¦>6.28ä»Šæ—¥ç«¶å½©æ¨è–¦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d29327f0.html alt=èºæ “æ“°ç·ŠåŠ›çŸ©åŠæ¨™æº–ï¼Œè»¸æ‰¿å°ç™½æ¨è–¦ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/9b23578e-89f1-4726-84a3-1d7bf909d4b8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d29327f0.html title=èºæ “æ“°ç·ŠåŠ›çŸ©åŠæ¨™æº–ï¼Œè»¸æ‰¿å°ç™½æ¨è–¦>èºæ “æ“°ç·ŠåŠ›çŸ©åŠæ¨™æº–ï¼Œè»¸æ‰¿å°ç™½æ¨è–¦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a677af22.html alt="æ–‡ä»¶æ«ƒå°ºå¯¸ä¸€èˆ¬æ˜¯å¤šå°‘ æ–‡ä»¶æ«ƒå» å®¶æ¨è–¦" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/RBVyEQ2EzlJKba style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a677af22.html title="æ–‡ä»¶æ«ƒå°ºå¯¸ä¸€èˆ¬æ˜¯å¤šå°‘ æ–‡ä»¶æ«ƒå» å®¶æ¨è–¦">æ–‡ä»¶æ«ƒå°ºå¯¸ä¸€èˆ¬æ˜¯å¤šå°‘ æ–‡ä»¶æ«ƒå» å®¶æ¨è–¦</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>