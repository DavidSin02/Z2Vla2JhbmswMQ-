<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>SpringBoot>08 - 配置文件、基本註解使用 | 极客快訊</title><meta property="og:title" content="SpringBoot>08 - 配置文件、基本註解使用 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/65aee0c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/65aee0c.html><meta property="article:published_time" content="2020-10-29T20:59:54+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:54+08:00"><meta name=Keywords content><meta name=description content="SpringBoot>08 - 配置文件、基本註解使用"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/65aee0c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>SpringBoot>08 - 配置文件、基本註解使用</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>一、配置文件：</p><p>配置文件格式 分 application.properties 和 application.yml(官方推薦使用)。</p><p>1、常見的自帶屬性:</p><p>############ tomcat 相關 ############</p><p>#訪問的根路徑</p><p>server.context-path=/</p><p>#端口號</p><p>server.port=8080</p><p>#session失效時間 （秒）</p><p>server.session-timeout=30</p><p>#編碼</p><p>server.tomcat.uri-encoding=utf-8</p><p>########### 數據庫相關 #############</p><p>spring.datasource.url= #數據庫地址</p><p>spring.datasource.username=</p><p>spring.datasource.password=</p><p>spring.datasource.driver-class-name= #數據庫驅動</p><p>########### Mybatis 配置 ###########</p><p>mybatis.typeAliasesPackage= #別名，對應實體類包</p><p>mybatis.mapperLocations= #mybatis xml位置</p><p>########### 自帶日誌的配置 ##########</p><p># 日誌級別</p><p>logging.level.com.coolron.user.dao=debug</p><p>logging.file=my.log #日誌名稱</p><p>logging.path=./log #日誌路徑（默認日誌名為 spring.log） 和 logging.file 只能出現一個</p><p>spring.output.ansi.enabled=DETECT # 控制檯多彩輸出</p><p>########### Redis 配置 ###########</p><p>## Redis數據庫索引（默認為0）</p><p>spring.redis.database=0</p><p>## Redis服務器地址</p><p>spring.redis.host=191.250.49.120</p><p>## Redis服務器連接端口</p><p>spring.redis.port=6333</p><p>## Redis服務器連接密碼（默認為空）</p><p>spring.redis.password=</p><p>## 連接池最大連接數（使用負值表示沒有限制）</p><p>spring.redis.pool.max-active=8</p><p>## 連接池最大阻塞等待時間（使用負值表示沒有限制）</p><p>spring.redis.pool.max-wait=-1</p><p>## 連接池中的最大空閒連接</p><p>spring.redis.pool.max-idle=8</p><p>## 連接池中的最小空閒連接</p><p>spring.redis.pool.min-idle=0</p><p>## 連接超時時間（毫秒）</p><p>spring.redis.timeout=3000</p><p><br></p><p>其他屬性參看：http://blog.yuqiyu.com/spring-boot-chapter31.html</p><p>2、自定義屬性：</p><p>application.properties文件中：</p><p>############## 自定義屬性 #################</p><p>custom.properties.social.weixin.app-id = wxfd65ab1fadb2</p><p>custom.properties.social.weixin.app-secret = 66bb4566de776ac6ds1dbejhhcc3dd1</p><p>custom.properties.social.clients[0] = coolron</p><p>custom.properties.social.clients[1] = test</p><p></p><p>自定義屬性的讀取：</p><p>提供兩種方式：使用@Value 讀取，將配置文件的屬性賦給實體類讀取。</p><p>方式一、利用@Value 讀取</p><p>1、測試controller：</p><p>/**</p><p>* @Auther: xf</p><p>* @Date: 2018/10/31 15:06</p><p>* @Description: 測試自定義屬性</p><p>*/</p><p>@Slf4j</p><p>@RestController</p><p>public class PropertiesController {</p><p>@Value("${custom.properties.social.weixin.app-id}")</p><p>private String appId;</p><p>@Value("${custom.properties.social.clients[0].clientId}")</p><p>private String clientId;</p><p>@GetMapping(value = "getProperties")</p><p>public ApiResult test(){</p><p>log.info("custom.properties.social.weixin.app-id,{}", appId);</p><p>log.info("custom.properties.social.clients[0].clientId,{}", clientId);</p><p>return ApiResult.ok(appId + ">>>>>>>>>>" + clientId);</p><p>}</p><p>}</p><p><br></p><p>方式二、利用實體類讀取配置文件自定義屬性：</p><p>注意： 以下各類中屬性的命名一定要跟配置文件中自定義的屬性名稱相對應</p><p>1、配置文件讀取器：對應配置文件中 custom.properties</p><p>/**</p><p>* 配置文件讀取器 讀取整個系統配置</p><p>*/</p><p>// 會讀取 custom.properties 開頭的配置項</p><p>@Data</p><p>@Component</p><p>@ConfigurationProperties(prefix = "custom.properties")</p><p>public class CustomProperties {</p><p>// social 會讀取到 此類中去</p><p>private SocialProperties social = new SocialProperties();</p><p>}</p><p></p><p>2、social 實體類：對應配置文件中 social</p><p>@Data</p><p>public class SocialProperties {</p><p>private WeixinProperties weixin = new WeixinProperties();</p><p>private String[] clients = {}; // 默認空數組</p><p>}</p><p></p><p>3、weixin 實體類：對應配置文件中 weixin</p><p>@Data</p><p>public class WeixinProperties{</p><p>private String appId;</p><p>private String appSecret;</p><p>}</p><p></p><p>4、讀取器配置類：</p><p>@Configuration</p><p>// 作用 : 使 CustomProperties 配置文件讀取器生效</p><p>@EnableConfigurationProperties(CustomProperties.class)</p><p>public class PropertiesCoreConfig {</p><p>}</p><p></p><p>5、在 Propertiescontroller 中新增代碼：</p><p>// 注入配置文件讀取器</p><p>@Autowired</p><p>private CustomProperties customProperties;</p><p>@GetMapping(value = "getBeanPro")</p><p>public ApiResult beanPro(){</p><p>log.info("app-id: ,{}", customProperties.getSocial().getWeixin().getAppId());</p><p>log.info("clients[0].clientId: ,{}", customProperties.getSocial().getClients()[0]);</p><p>log.info("clients[1].clientId: ,{}", customProperties.getSocial().getClients()[1]);</p><p>return ApiResult.ok(appId + ">>>>>>>>>>" + clientId);</p><p>}</p><p></p><p>6、測試：請求接口：localhost:8080/getBeanPro 控制檯如下：</p><p>在這裡插入圖片描述</p><p>二、多環境配置：</p><p>在開發、測試、生成不同的環境使用不同的配置文件，以swagger 為例，生產和測試環境不需要。Spring Boot中多環境配置文件名需要滿足 application-{profile}.properties 的格式，其中{profile}對應你的環境標識。</p><p>1、在src/main/resources 下新建：</p><p>在這裡插入圖片描述</p><p>2、選擇配置文件</p><p>方式一、 在application.properties中指定使用dev/pro/test哪種環境：</p><p># 指定配置文件</p><p>spring.profiles.active=dev</p><p>#spring.profiles.active=pro</p><p>#spring.profiles.active=test</p><p></p><p>效果：開發環境配置文件application-dev.properties 生效。</p><p>方式二： 運行 jar 包（後續章節涉及打包）的時候指定配置文件：</p><p>指定配置文件</p><p>java -jar xxx.jar --spring.profiles.active=test</p><p>java -jar xxx.jar --spring.profiles.active=pro</p><p></p><p>附加：自定義配置文件</p><p>若配置較多，不想都寫到application.properties中，可以自定義配置文件，例如：custome.properties, 只需使用@PropertySource 註解映入即可。</p><p>// 建議寫到啟動類、自定義屬性配置類（CustomProperties ）上或者根據自身環境決定。</p><p>@PropertySource(value = “classpath:custom.properties”)</p><p></p><p>三、springboot 基本註解的使用</p><p>此處總結幾個常用註解，其他註解遇到了再補充：</p><p>@Configuration：類上，表明這是一個IOC容器，相當於springMVC中的配置文件，springboot使用該註解用作java配置。</p><p>@Bean： 方法上，常結合@Configuration使用，往spring容器中添加一個組件。</p><p>@Component： 類上，將備被註解的類交給spring容器管理，例如本章的 CustomProperties類</p><p>@ComponentScan：類上，相當於 xml配置文件中的context:component-scan標籤，對標註了@Controller、@Service、@Respoitory、@Component等的類掃描，註冊為bean</p><p>@SpringBootConfiguration：啟動類上，包含@SpringBootConfiguration（繼承@Configuration）、 @EnableAutoConfiguration和 @ComponentScan註解</p><p>@RestController：包含@ResponseBody 和 @Controller 的註解</p><p>@PathVariable、@RequestParam、@RequestMapping、@Controller、@Service、@RequestBody、@ResponseBody：跟SpringMVC相同。</p><p># 請求路徑 PUT、DELETE、PATCH 同下</p><p>@GetMapping = @RequestMapping(method = RequestMethod.GET)</p><p>@PostMapping = @RequestMapping(method = RequestMethod.POST)</p><p>@EnableScheduling：建議加到啟動類上，開啟springboot定時支持，結合@Scheduled做定時任務。</p><p>@PropertySource：加載指定的配置文件，例如本章中附加：自定義配置文件</p><p></p><p>至此，springboot配置中常見的自帶屬性、按需自定義屬性，以及它們的兩種讀取方式：@Value 和 實體類映射，自定義配置文件的引入，常用的幾種註解，重點為利用實體類讀取配置文件自定義屬性。</p><p><br></p><p>原文鏈接：https://blog.csdn.net/cp026la/java/article/details/86497342</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>配置文件</a></li><li><a>SpringBoot</a></li><li><a>08</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/16141dc.html alt=SpringBoot之配置文件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9be2b97daab14982b35a52cdecc2cf4b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16141dc.html title=SpringBoot之配置文件>SpringBoot之配置文件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/201295f.html alt=SpringBoot應用多個子項目配置文件規劃、多環境支持（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d5249d1faf2741c8a538e35f13e04666 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/201295f.html title=SpringBoot應用多個子項目配置文件規劃、多環境支持（一）>SpringBoot應用多個子項目配置文件規劃、多環境支持（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6845cc4.html alt=SpringBoot獲取配置文件，就這麼簡單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/32a771927a234585855909887759b126 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6845cc4.html title=SpringBoot獲取配置文件，就這麼簡單>SpringBoot獲取配置文件，就這麼簡單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/457b4da.html alt=SpringBoot系列乾貨：配置文件詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4406be7272824cf8956780530ff96706 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/457b4da.html title=SpringBoot系列乾貨：配置文件詳解>SpringBoot系列乾貨：配置文件詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62c273e.html alt=SpringBoot配置文件詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0a45e7ad17914e0e9efbef923ec8be39 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62c273e.html title=SpringBoot配置文件詳解>SpringBoot配置文件詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a519b6a.html alt=企業級SpringBoot應用多個子項目配置文件之配置中心（三） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/8103eeec65e647f9a1c3604ec802acb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a519b6a.html title=企業級SpringBoot應用多個子項目配置文件之配置中心（三）>企業級SpringBoot應用多個子項目配置文件之配置中心（三）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html alt=SpringBoot事務詳細簡介 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html title=SpringBoot事務詳細簡介>SpringBoot事務詳細簡介</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html alt=Win10系統如何刪除用戶配置文件？這個方法麻煩收好 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5d9b3c531d8e4d64ac1f5582c2a6867e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html title=Win10系統如何刪除用戶配置文件？這個方法麻煩收好>Win10系統如何刪除用戶配置文件？這個方法麻煩收好</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html alt="Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Ry0yIZwBOBWLcl style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html title="Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生">Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e5f86559.html alt="外媒發現Windows 10用戶配置文件丟失問題仍舊存在" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RxyuIVJ8HFwmLA style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e5f86559.html title="外媒發現Windows 10用戶配置文件丟失問題仍舊存在">外媒發現Windows 10用戶配置文件丟失問題仍舊存在</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a21b0013.html alt=SpringBoot切面Aop的demo簡單講解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ec7dea99ced1417b940a9ffe67dc81aa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a21b0013.html title=SpringBoot切面Aop的demo簡單講解>SpringBoot切面Aop的demo簡單講解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/341006dc.html alt="SpringBoot系列（14）：Spring AOP裝逼指南之實現操作日誌記錄" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7bc702acb84d4284b4df028da09900db style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/341006dc.html title="SpringBoot系列（14）：Spring AOP裝逼指南之實現操作日誌記錄">SpringBoot系列（14）：Spring AOP裝逼指南之實現操作日誌記錄</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html alt=如何來實現SpringBoot應用的JPA數據持久化和熱插拔 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dc38450079574dd685472184b5fa06f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html title=如何來實現SpringBoot應用的JPA數據持久化和熱插拔>如何來實現SpringBoot應用的JPA數據持久化和熱插拔</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/10452796.html alt=開封市縣街小學六08中隊金色少年社團走進開封茶博館參觀學習 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d3301eb18895437783715e93569816cd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/10452796.html title=開封市縣街小學六08中隊金色少年社團走進開封茶博館參觀學習>開封市縣街小學六08中隊金色少年社團走進開封茶博館參觀學習</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/6232c9b4.html alt="風魔小次郎 第08卷 四千年的夢之卷" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4079646606ad485dae7ca3d421fedba3 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/6232c9b4.html title="風魔小次郎 第08卷 四千年的夢之卷">風魔小次郎 第08卷 四千年的夢之卷</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>