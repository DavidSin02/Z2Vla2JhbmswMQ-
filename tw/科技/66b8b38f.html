<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>想用Labview做一個反激電源設計軟件（一） | 极客快訊</title><meta property="og:title" content="想用Labview做一個反激電源設計軟件（一） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/5cdd36c8d120454db9d609903e62559b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/66b8b38f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/66b8b38f.html><meta property="article:published_time" content="2020-11-14T21:01:14+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:14+08:00"><meta name=Keywords content><meta name=description content="想用Labview做一個反激電源設計軟件（一）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/66b8b38f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>想用Labview做一個反激電源設計軟件（一）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>在論壇和網絡上有很多關於反激變壓器的設計方法，但這些方法多是隻介紹部分電路設計，所以一直以來對電源沒有一個整體的認識現在想把這些個方法綜合起來看看是否能讓自己對電源有更深的瞭解。（這裡所使用的公式都是來自於論壇或網絡，用execel或mathcad均可，不過本人都不擅長所以就用了Labview軟件。）</p><p>初步實現的功能如下：</p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5cdd36c8d120454db9d609903e62559b><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/54c8eac06b6343ef93cdf7e7bd5f19c6><p class=pgc-img-caption></p></div><p>圖1 低壓輸入80V的設計參數及仿真對比</p><p>設計流程自左向右，第一步確定輸入電容</p><p>先設置好輸入輸出參數，如輸入最低電壓有效值80V、電源頻率50Hz、開關頻率60KHz、輸出電壓5V、輸出功率6W。</p><p>設置輸入波動為20%，這時會自動計算出輸入電容，可能不存這個算出來的容值那麼選實際有的容值輸入到輸入電容框中，輸入波動和波動電壓都會相應的發生輕微變化。這個新的輸入波動將作為後面計算的參照。</p><p>第二步確定匝比</p><p>設置佔空比為45%，這時會得到反射電壓Vor和匝比值，選一個最接近的整數匝比輸入到匝比框，佔空比和反射電壓都會有輕微變化，這些新值將作為後續計算的參照。</p><p>第三步確定電感</p><p>當佔空比和匝比確定了之後電感自動計算出來，這裡有個參數深度係數K，當K=0時為臨界或者斷續模式，當K取值0~1之間時時連續模式。</p><p>第四步確定吸收電路參數</p><p>輸入漏感、Uc、波動電壓後會自動計算出吸收電阻Rc和吸收電容Cc。</p><p>第五步確定輸出最小電容</p><p>設置輸出紋波電壓自動計算出所需最小輸出電容值。</p><p>Ap算法（改進版02）.pdf</p><p><br></p><p><strong>在未安裝Labview軟件的電腦上運行此軟件需下載安裝Run-Time engine，下面是兩個鏈接地址（未測試）</strong></p><p><strong><u>http://www.ni.com/download/labview-run-time-engine-8.2.1/550/en/</u></strong></p><p><strong><u>http://www.ni.com/download/labview-run-time-engine-2012/3433/en/</u></strong></p><p><strong>此軟件目前完善了電路設計功能，測試使用過程中如發現錯誤歡迎指正。</strong></p><p><br></p><p><strong>反激設計Rev09.rar</strong></p><p><br></p><p>版本Rev02</p><p>● 更正Vds電壓計算公式漏掉一個字母的錯誤。</p><p>版本Rev03</p><p>● 修復參數設置偶爾無效的問題</p><p>● 修正輸入電容、輸出電容、Vds電壓的計算公式</p><p>● 修正了斷續模式的計算公式</p><p>● 通過Saber仿真軟件驗證，二者結果基本一致。</p><p>版本Rev04</p><p>● 修正輸出二極管反向耐壓公式</p><p>版本Rev05</p><p>● 修復臨界模式附近電路震盪的問題</p><p>● 修正斷續模式下電感電流波形顯示公式</p><p>版本Rev06</p><p>● 深度係數表示法更改為浮點數格式</p><p>● 開放變壓器設計功能</p><p>版本Rev07</p><p>● 修正匝比、Vds電壓、Ap算法等公式及部分代碼。</p><p>● 更改變壓器設計界面以方便操作，補全磁芯數據資料。</p><p><br></p><p>版本Rev08</p><p>● 修復低壓到高壓或重載到輕載大範圍切換震盪的問題。</p><p>● 增加繞組設計功能，增加漆包線查詢表。</p><p>版本Rev09</p><p>● 修改佔空比計算公式，增加效率因數。</p><p>● 修正Ap算法。</p><p>很多資料說輸入電容一般按2~3uF/W來選擇，反射電壓一般取100V左右，圖1是輸入80V功率6W計算得輸入電容25uF換算大約4uF/W，反射電壓為75V左右。如果把最低輸入電壓設為120V計算結果如下：</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2707dd4067ef41bcaa96a4090038bb4b><p class=pgc-img-caption></p></div><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15f4af43a35d48bf99371053d9479a5d><p class=pgc-img-caption></p></div><p>圖2 低壓120V輸入的設計參數及仿真對比</p><p>功率6W輸入電壓為120V計算的輸入電容為11uF換算後大約2uF/W，反射電壓106V接近100V，可見在輸入在120V左右時“一般”取值才準確，當輸入電壓條件改變後這個“一般”數據就不可靠了。</p><p>除了給定的條件外如輸入電壓、輸出電壓、輸出功率、開關頻率等，這裡還有幾個參數無法確定比如深度係數K，RCD吸收參數。為此增加了檢測功能以便查看不同工況下的參數變化，順便探討一下這“一般”取值的來由。</p><p>給定條件：</p><p>輸入AC：110-265V</p><p>輸出DC：56V</p><p>輸出功率：84W</p><p>開關頻率：65KHz</p><p>輸入波動電壓：30V</p><p>輸出波動電壓：120mV</p><p>效率：0.8</p><p>計算得到的設計參數如下：</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/237eecb1e16141db82a5acd078eaf587><p class=pgc-img-caption></p></div><p>圖3 輸入110V的設計參數</p><p>圖3中順便加了三個波形圖，第一個是輸入電壓波形，第二個是PWM信號和輸入電感電流波形，第三個是輸出電壓紋波波形。</p><p>在圖中右側中下部多了一個按鍵用來進行參數設計和反向測試切換，在進行參數設計時電路中的各個參數都是相關聯的，通常修改一個參數就會引起其它參數的變化，所以在設計的時候參數要按一定的先後順序來設置。當切換到測試模式後切斷了輸入電壓同電路元件之間的聯繫，當修改輸入電壓值時電路中的電感、電容、電阻這些元件參數不變其它數據時時變化，方便觀察在不同輸入電壓條件下的電路工作狀況。</p><p>深度係數值的選取：</p><p>深度係數k體現的是電路的工作模式，當K=0時電路為臨界模式，當K>0時為連續模式，當k&lt;0時為斷續模式，k值定義如下圖4</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/055551172956460493c561d3c7a9310d><p class=pgc-img-caption></p></div><p>圖4 深度係數k</p><p>所以k的取值範圍為0~1，當斷續模式時軟件會自己計算出負值來。</p><p>一般認為電路在低壓輸入時工作於連續模式，高壓輸入時為斷續模式時比較合理，深度係數k就是調節這個連續和斷續模式的分界點的。這個電路我將分界點設為178V，110~178V工作於連續模式，178~265V工作於斷續模式。將軟件切換至測試模式輸入電壓改為178V結果如下：</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ffb0cef8ff0e4b40bb6466fc6f8a5af6><p class=pgc-img-caption></p></div><p>圖5 輸入178V臨界模式參數</p><p>圖5中深度係數變為0.0048約等於零，觀察輸入電感電流波形剛好在臨界模式狀態。所以這個電路將深度係數設置為0.2比較合適。</p><p>RCD參數的選取</p><p>MOS管上承受的電壓Vds由輸入電壓、反射電壓及漏感電壓三部分構成，反射電壓受峰值電流和漏感影響在這個電路中不同模式下的峰值電流變化不大所以漏感電壓變化也不大，輸出電壓不變反射電壓也不變，那麼對Vds影響大的是輸入電壓，也就是當輸入最高壓時MOS管承受的壓力最大，見下面的265V輸入時參數</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1cbed133281f4e02bde0b48ecf997678><p class=pgc-img-caption></p></div><p>圖6 輸入265V斷續模式參數</p><p>當輸入電壓為265V時電路處於斷續模式MOS管的Vds電壓為563V還有30V的餘量（假設用的600V管子），RCD中的電阻和電容取值還是可以接受的。但是有個問題如果仍然保留MOS管30V餘量那麼RCD的參數可以有任意多的組合，如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9baf004357714fbaaefcb784282613a2><p class=pgc-img-caption></p></div><p>圖7 不同RCD組合參數</p><p>圖7中的第四組參數Rc=3K、Cc=500nF不太合適，200V以上500nF的電容成本高些，其它三組參數選哪個更合適？理論計算第一組Rc=0.5K、Cc=66nF損耗最低，波動62.1V最大這樣是否有利於降低開關損耗？</p><p>再看一下鉗位電壓Uc=133V，疊加波動電壓62.1/2=±31V後已經低於反射電壓Vor=113V，這時吸收電路會直接消耗主電感功率大大了降低電路的效率。從這方面看好像反射電壓Vor設計的低一點電路效率會高些，這時變壓器匝比會變小直接影響是對輸出二極管的反向耐壓要求高了，同時佔空比也會變小這可能又會降低電路效率。</p><p>在前面的給定參數中輸入波動電壓30V，輸出紋波120mV是提前給定的，波動越小電源性能越好但成本會增加，如何確定這兩個參數大概需要綜合損耗分析和成本分析，另外還要考慮各參數對動態特性的影響，看來一個好的電源設計對綜合性要求很高。</p><p>變壓器設計功能</p><p>在完成電路設計後下一步要進行變壓器設計，通過把所以公式整合到一起後發現變壓器的設計變的簡單了。用論壇中的一個實例做分析：</p><p>輸入電壓：195~265V</p><p>輸出電壓：32V</p><p>輸出電流:1.9A</p><p>開關頻率：132KHz</p><p>效率：80%</p><p>第一步計算電路參數如下：</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/a62c994e3a694bab8239891dbae62bc6><p class=pgc-img-caption></p></div><p>圖8、60W電源電路參數</p><p>這個參數是按低壓臨界模式設計得到的，當輸入為265V時MOS管的Vds=553V餘量足夠。在調整輸入電壓參數時發現當輸入為低壓195V時電路工作於臨界模式計算所需Ap=0.35cm^4，當輸入為高壓265V時電路工作於斷續模式計算所需Ap=0.48cm^4，這大概意味著高壓斷續模式時需要的變壓器體個頭更大。</p><p>第二步完成電路參數設計後切換到變壓器設計界面如下</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f19394962e784fcc9e8198f6aee759d5><p class=pgc-img-caption></p></div><p>圖9、60W電源變壓器設計參數</p><p>在論壇中發現多個版本的Ap算法這裡選用了三種，通過界面中的Ap法選擇器來選擇，其它參數的設置步驟如下：</p><p>1） 設置最大慈通密度Bm=0.21，最大電流密度Jm=400，窗口係數0.4，參數設置好後Ap值自動計算出來，這裡Ap=0.48</p><p>2） 選取Ap>=0.48的磁芯，這裡選PQ25/26，參數：Ap=0.9971，Ae=118，Aw=84.5，Al=5250，Pt=195W，將相關參數輸入到變壓器設計界面中。</p><p>3） 調節初級匝數Np觀察磁通密度B和電流密度J的變化已期達到理想效果。</p><p><br></p><p>這裡將初級匝數Np設置為30匝，電路高壓滿載時的實際磁通密度B=0.13實際電流密度為262.65。低壓滿載時的實際磁通密度B=0.131實際電流J=262.65高低壓的變化不大。</p><p>從1開始逐漸增加初級匝數，當Np=19時B=0.205、J=166，Np=19既為最小匝數此時磁芯臨近飽和而導線餘量比較大。當Np=45時B=0.086、J=394，Np=45既為最大匝數此時導線接近電流上限而磁芯餘量比較大。當Np=32時B=0.122、J=280兩個值均比較低，見下圖10</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/33e19868d5114a68a114d443c59e93e1><p class=pgc-img-caption></p></div><p>圖10 不同匝數下的磁芯參數</p><p>設置匝數在19~45之間的變壓器都可以使用，但如果匝數太少磁芯損耗大如果匝數太多導線損耗大，有資料說當鐵損（磁損）等於銅損（導線損耗）時總的損耗最低，或許這可以作為設置最佳匝數的依據。這個問題先留著到損耗分析時再探討。</p><p>簡單介紹下設計思路，這裡方法並不是很重要用Labview軟件只是界面清爽些。</p><p>首先把所有的計算公式放在一起構成一個多元一次方程組，電源的設計可以看成是對這個多元一次方程組的求解過程。在這個方程組中未知數量大於方程組量其結果是得不到確定的解，要解這個方程組就需提前設定幾個未知量，比如我們先設定開關頻率、佔空比或反射電壓等等。</p><p>因提前設定的量不一定合理最終得到的結果可能不滿足要求，這樣需再重新設定直到得到滿意的答案。這種反覆求解驗證過程應當是開關電源設計中比較合理的步驟，只不過經過多年的實踐驗證我們有了“一般”取值，將這些“一般”值代入方程後一般直接就能得到較滿意的結果。但如果條件改變了如輸入電壓100~500V、MOS管耐壓1000V等等這些“一般”值就不一定適用了。</p><p>這種反覆計算驗證的過程是繁瑣的，得益於計算機的輔助計算功能只要把公式輸入進去就能得到答案，當然公式要提前處理一下就是要先消元，儘量減少公式中的未知量同時讓各個未知量之間建立起聯繫。經過這樣處理後的結果是隻要調節一個未知量參數就能看到相關的其它未知量的變化，再加上一些約束條件就可以輕鬆得到合理的參數。</p><p>如果有足夠的方程組，比如再加上損耗分析方程組、成本分析方程組等，我們就有可能得到這個方程組唯一的解，也就是最合理的設計。（這裡只能用合理，因要求不同有的要求效率高有的求成本低）</p><p>這裡公式方程就比較重要了，沒有準確的方程是得不到準確的結果的，論壇中這方面的資料很多有的採用的是近似法有的公式則很準確，還有些略有差異主要是公式中的係數有所不同，不同波形或者不同模式下的係數不一吧這個有待探討。關於反激中RCD吸收電路的設計好像介紹的比較少，在這裡跟大家探討一下。</p><p>RCD吸收電路方程：</p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e83c020848cb449482cfc3bd82b6fbd0><p class=pgc-img-caption></p></div><p>RCD吸收公式</p><p><br></p><p>這個公式可在百度中搜索“反激RCD鉗位計算”</p><p>百度中的那篇文章用的是能量守恆法推導出的這個公式，我們換個角度從電路上來推導。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5c7a89b8d15740678173b01651fd2a68><p class=pgc-img-caption></p></div><p>圖11 RCD吸收等效電路</p><p>圖11中（1）是在MOS開關Toff時反射電壓的方向，在反射電壓Vor維持的期間可以等效為圖（2），將圖（2）等效變化後得到圖（3），圖（3）這個電路是一個典型的Boost電路，其中的漏感Lk作為其升壓電感，這樣 RCD吸收電路就可以當成一個工作於非典型模式下的Boost電路來分析。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8ee6817a0c77463987a21cf64b3c8261><p class=pgc-img-caption></p></div><p>圖12 RCD漏感上的非典型電流波形</p><p>在開關的Ton期間漏感中的電流受主電感限制其波形為主電感Lm的電流波形，在開關Toff期間電路才進入Boost模式，所以這是個工作於非典型模式的的Boost電路。</p><p>漏感中存儲的能量少在很短的時間內就能將能量釋放完，如圖12所示toff’時間要小於Toff時間，這個非典型Boost電路是工作於斷續模式的，推導過程參考圖 11和圖12。</p><p>第一步toff’推導 (Uc-Vor)/Lk*toff’=Ipk → toff’=Ipk*Lk/(Uc-Vor)</p><p>第二步 漏感儲能推導 Wk=1/2*Lk*Ipk^2*toff’</p><p>第三步 電阻耗能推導 Wr=Uc^2/Rc*T</p><p>漏感儲能最終是被電阻消耗的所以Wk=Wr，三個方程合併後最終得到的方程為：</p><p>Rc=2*Uc*（Uc-Vor）/(Lr *Ipk^2*f)</p><p>電容可以用電荷量的變換來推導，電容上的波動電壓等效值為Uc我在前面叫它鉗位電壓不知道是否準確，推導如下：</p><p>負載Rc消耗的電荷 Qr=i*T=（Uc/Rc）*T</p><p>電容Cc變化的電荷Qc=△U*C</p><p>消耗的電荷等於變化的電荷既Qr=Qc，最終得到的方程為：</p><p>C=Uc /(△U *Rc*f)</p><p>Bode圖功能</p><p>環路方面的知識以前沒有太重視直到最近才產生了興趣，對電路拓撲的分析通常只需一個開關週期，如伏妙平衡、輸入輸出能量守恆等。這種單週期分析法也稱時域分析但有個前提條件就是電路要處於穩態，如果電路處於非穩狀態時（既動態）時域分析就無能為力了，這時就要用到頻域分析了。頻域分析和時域分析是兩種截然不同的分析法，這次編這個軟件的主要目的是來學環路設計的，望各位大俠們不吝賜教。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3c74a72535794e7b926d349ff545e756><p class=pgc-img-caption></p></div><p>圖13-1 RC幅頻特性和相頻特性圖</p><p>先從簡單的入手實現一個RC電路的特性Bode圖，另外在右側增加了一個S域波形圖，形象一些更容易加深理解。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5b21af83239e4363a9c0227322c1cc34><p class=pgc-img-caption></p></div><p>圖13-2 LR幅頻特性相頻特性圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/74990d5c50174f458af8a471a87b0212><p class=pgc-img-caption></p></div><p>圖13-3 典型二階雙極點bode圖</p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d38c073cd2e9431da745cddb5e471bc6><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/182dd058049f4844a6560b05700845c2><p class=pgc-img-caption></p></div><p>圖13-4 時域動態特性</p><p>一般先要知道功率級的傳遞函數，再根據期望的傳遞函數（總開環傳遞函數）去設計補償電路傳遞函數。</p><p>根據控制方式的不同反激的功率級分為電流模式和電壓模式兩種，參考《環球電源講義》首先是電流模式的傳遞函數的仿真對比，參考資料 環路反饋.pdf</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3bf2216e9a4447e0851589105b7ce3eb><p class=pgc-img-caption></p></div><p>圖13-5 反激電流模式傳遞函數及仿真Bode圖對比</p><p>圖13-5中上面的兩個傳遞函數右邊的為代入已知條件後的簡化傳遞函數，右邊的Bode圖就是以此傳遞函數繪製的。對比左右兩張Bode圖（左邊藍色曲線為功率級曲線）發現在曲線的後半段差別較大，這個問題糾結了好幾天一度懷疑自己的Bode圖繪製算法有誤，後仿真了另一份資料 開關電源控制環路設計（初級篇）.pdf 中的Buck電路控制環路</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/80a1b4a4bffb4a859f37328034d37683><p class=pgc-img-caption></p></div><p>圖13-6 Buck電路功率級傳遞函數及Bode圖對比</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c44b76387eff4041ac9301322d184c5e><p class=pgc-img-caption></p></div><p>圖13-7 Buck電路補償環器傳遞函數及Bode圖對比</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ee46918d45b34ab6a877faa5e144922e><p class=pgc-img-caption></p></div><p>圖13-8 總的開環傳統函數</p><p>通過圖13-6、圖13-7、圖13-8的對比可以看出這裡所採用的Bode圖繪製算法是沒有問題的，其繪製的Bode圖同資料中給的Bode圖基本沒差別。</p><p>反激相對於Buck電路多了一個右平面零點問題，這個右平面零點在繪製Bode圖是否需要特殊處理？後又仿真了另一份資料 TOPSWITCH反激電源控制環路設計.pdf，結果如下</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3428b1a1580d41f589eb16c5d5f1bebe><p class=pgc-img-caption></p></div><p>圖13-9 TOPSWITH反激除補償外的傳遞函數及Bode圖對比</p><p>圖13-9中的傳遞函數包含了右平面零點，但仿真結果跟資料中的Bode圖也基本沒差別，至此已基本確認這裡的Bode圖繪製方法沒有問題，那麼《環球電源講義》中傳遞函數和Bode圖對應不上問題出在哪裡？</p><p>觀察圖13-5中左邊的Bode圖，其頻率在33K-100K之間曲線的變化類似雙極點特性，嘗試在原傳遞函數的基礎上增加雙極點函數後的仿真結果如下</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e05d540f84f845b698d8ff51f6c7ce0b><p class=pgc-img-caption></p></div><p>圖13-10 增加雙極點後的反激Bode圖對比</p><p>後增加的雙極點頻率為80k，對比圖13-10左邊（藍色曲線）和右邊曲線，這兩張Bode圖已經非常接近了。但是這個80KHz是根據Bode圖湊上去的並無理論依據，想要搞明白這個問題大概需要先研究一下功率級傳遞函數的推導過程。</p><p>在論壇中搜索到《環球電源講義》中傳遞函數與Bode圖對應不上的原因了，原作者（估計是CMG版）給的解釋是這個傳遞函數在50KHz左右有個雙極點，由於這個頻率對帶寬設計幾乎沒有影響所以沒有提及，但Bode圖是包含這個雙極點的完整的幅相頻曲線。對於這個雙極點可參考資料 反激變換器設計小結（蕁麻草）.pdf</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6547d9ab803e4f899409dd772c7acbea><p class=pgc-img-caption></p></div><p><br></p><p>其中的公式（3）就是那個忽略掉的雙極點。</p><p>有一篇介紹傅里葉變化、頻域、時域等的文章很不錯</p><p>http://zhuanlan.zhihu.com/wille/19763358</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15ab740f05ce447791f1fee5478d34c5><p class=pgc-img-caption></p></div><p>這篇文章對於我來說幫助很大，形象的波形比抽象的公式要容易理解的多。</p><p>環路設計的初步功能如下</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2f2610a6906c4ef4a57e892a46223b27><p class=pgc-img-caption></p></div><p>圖13-11 環路設計初步功能圖</p><p>目前調試時還是覺得不太方便，需要一種更便捷的算法。</p><p>仿一個《環球電源講義》的實例（參考資料：反饋環路）CCM電流模式反激輸出電容為3*1000u，每個電容ESR=130mΩ等效ESR=43mΩ，這個ESR內阻會在頻率1.225k處引起一個零點如圖13-12中的H(s)白色曲線。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/67b1167ce03f4760bdd8a212ce12b298><p class=pgc-img-caption></p></div><p>圖13-12 大ESR電阻單極點補償</p><p>環路設計參數中Kmode中的K由IC決定，Rsense是電流採樣電阻，Kpwr中的Resr為輸出電容等效ESR，R3、R4、CTR與光耦和IC有關，輸入電阻Rb的選取要考慮TL431的最小工作電流及功耗，一般小於18k左右，這裡設置為5.1K。</p><p>基本參數設置好後先將零點頻率和極點頻率設置的很大（極點頻率要大於零點頻率）這時可以從相頻幅頻圖上看出補償函數G(s)（紅色曲線）是個單極點函數規律，而環路參數中電阻R2=0.2電容C2=0.5相當於短路和斷路，去掉這個電阻和電容後電路也剛好是一個單極點補償電路。</p><p>對於單極點補償只需調節低頻（10Hz）增益即可，這裡低頻增益設置為63dB，總開環相位餘量67穿越頻率約8k達到預期效果。</p><p>如果輸出電容ESR電阻較小如資料中的30mΩ，等效ESR=10mΩ，這時如果仍然採用單極點補償如下圖13-13</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ceb4db941cb64deda84658e1b2b2aaf4><p class=pgc-img-caption></p></div><p>圖13-13 小ESR單極點補償</p><p>需要將低頻增益設置為74dB，而相位餘量只有42偏小，74db增益換成後約等於5000偏高，因此對於小ESR的採用一類補償不太合適。</p><p>根據資料中給的參數將零點頻率設置為fz=1600極點頻率設置為fp=fesr=5269，調節低頻增益至65.3dB其結果如下圖13-14</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/af727a56a5934af19dd74ede65f16684><p class=pgc-img-caption></p></div><p>圖13-14 小ESR二類補償</p><p>上圖中隱藏了功率級的波形，穿越頻率為8000，相位餘量65，這裡截止增益不準確因功率函數中的那個雙極點沒有準確的描述。</p><p>原本想設計成輸入相位餘量和截止頻率後直接算出零極點及相應電阻電容值，那樣雖然方便但不夠靈活，現在的這種方式可以隨心所欲的控制曲線，如下面的例子</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9a22bbc2478f4f738afb38c5e7826c34><p class=pgc-img-caption></p></div><p>圖13-15 小ESR補償2</p><p>將低頻增益設置為50dB通過調整fz=200，fp=3600可得到圖13-15中的效果，這個曲線相對於上面的幾組曲線優點就是全程的相位餘量都比較大，可以減少發生條件穩定的概率。</p><p>在調節零極點時發現一個規律，當增大極點時穿越頻率和相位餘量都增大，當增大零點時穿越頻率減小而相位餘量一般都增大。運用這個規律零極點的設置就簡單了許多，仍然以圖13-14小ESR二類補償為例，下圖是在不同低頻增益下實現8000Hz穿越頻率65度相位餘量的伯德圖對比。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/caa38a830cce477796b91e8cc982f199><p class=pgc-img-caption></p></div><p>圖13-16 低頻增益由30dB-75dB的伯德圖</p><p>圖13-16中白色曲線為功率級曲線H(s)，因在傳遞函數中這個曲線是不變的所以後面的圖中將其隱藏。當低頻增益低於30dB時穿越頻率無法達到8000Hz，當低頻增益高於75dB時穿越頻率始終高於8000Hz。雖然這幾張圖都滿足了在穿越頻率處有65度的相位餘量但在其它頻段上顯然低增益的相位餘量更充裕更容易實現穩定。</p><p>保持低頻增益40dB相位餘量54度，不同穿越頻率下的波形如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/edcd5905674043208b8cdac13e4f3886><p class=pgc-img-caption></p></div><p>圖13-17 1k、5k、10k穿越頻率伯德圖</p><p>保持低頻增益60dB穿越頻率8000Hz不變，不同相位餘量的波形如下</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/69a0f987449f40859036bf6223850b2a><p class=pgc-img-caption></p></div><p>圖13-18 相位餘量分別為45、55、65、75的波形對比</p><p>上面的幾組曲線都能使電路達到穩定但哪組的綜合效果最好？穿越頻率、相位餘量、零極點、中頻帶寬、低頻增益等這些參數該如何選取？</p><p>為了方便理解這些名詞設想一個S域模型如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b2a60e87fbee44869af5775c91c522ab><p class=pgc-img-caption></p></div><p>圖13-19 S域模型</p><p>模型中x軸為實軸y軸為虛軸，x軸的負半軸（S域左半平面）等效一個電阻，x軸的正半軸（S域的右半平面）等效為一個電源，y軸的正半軸負半軸分別等效為電感和電容。實軸體現的是有功功率虛軸代表的是無功功率。</p><p>用一個二階振盪系統C(s)/R(s)=10*ω^2/(s^2+2ζ*ω*s+ω^2)（這個系統相對於典型二階系統多乘了一個10倍）來分析這個模型的用法。</p><p>ζ——阻尼比</p><p>ω——無阻尼自振頻率</p><p>第一種情況，假設初始狀態電容中充滿電荷，運行方向為順時針旋轉，電容經電阻將能量傳遞給電感下一階段電感中的能量經電阻回傳給電容如此反覆直到能量消耗完畢。這是典型的欠阻尼振盪0&lt;ζ&lt;1。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0529920a06c744a7937dfea26d7c4d99><p class=pgc-img-caption></p></div><p>圖13-20 欠阻尼二階振盪S域</p><p><br></p><p>圖13-20中分別為頻域bode圖、S域空間圖、時域動態圖，這裡的S域圖是由bode圖轉換來的是不同角度的增益與相位統一的bode圖，個人覺得更像是空間方位圖。S域中起點是a從y軸的負半周開始（電容軸）經過b點（雙極點，相位-90度）到達c點（穿越頻率點同S域原點重合），從原點到曲線上點的半徑為模（增益）與y軸負半軸的夾角為相角。</p><p>如何從S域分析動態特性？從圖形上看就是要降低abc曲線相對於x軸的對稱性從而增大相位餘量，從阻尼係數ζ=1/2*R*sqrt(C/L)上看就是增大阻值R或者增大電容/電感的比同樣也是改變對稱性，見下圖不同ζ係數的結果。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8386d7b895434189b8abf7a2b75454c8><p class=pgc-img-caption></p></div><p>圖13-21 大阻尼係數的欠阻尼二階S域</p><p>第二種情況，臨界阻尼ζ=1</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/c61b9722a1b649a49ee9d798d978f4a6><p class=pgc-img-caption></p></div><p>圖13-22 臨界阻尼二階S域</p><p>第三種情況，過阻尼ζ>1</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5cea5abd170c451bac6edb06de34e1af><p class=pgc-img-caption></p></div><p>圖13-23 過阻尼二階S域</p><p>從變化趨勢看阻尼係數、相位餘量越大電路越容易穩定但動態響應越慢，在頻域分析中一般將相位餘量設置在45-65之間以兼容穩定與動態響應，那麼如果相位餘量為45-65度之間是否可以說電路的動態和穩定性都比較理想？這個問題在後面的分析中或許可以證明。</p><p>第四種情況，無阻尼ζ=0</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a779ec5dca28459a89dddb1668c8b6be><p class=pgc-img-caption></p></div><p>圖 13-24 無阻尼二階S域</p><p>這屬於比較特殊的一直欠阻尼情況，增益軌跡只在y虛軸上運動，在這種理想情況下LC諧振腔內無電阻無損耗震盪會一直持續下去。</p><p>第五種情況，週期震盪</p><p>前面的四種情況增益軌跡都是在S域的左半平面或者在虛軸上，這些情況下電路最終都會達到穩定不同的只是時間快慢（第四種無阻尼在現實電路中是不存在的）。如果增益軌跡出現在S域的右半平面，分析圖13-19的S域模型在右半平面等效為一個電源其會對電容或者電感充電起到增幅震盪的作用，當其與左半平面的電阻所消耗的能量平衡時電路將以一個穩定的振幅做週期震盪，這種情況一般在設計週期震盪電路時才需考慮。</p><p>第六種情況，條件穩定</p><p>如果增益軌跡出現在右半平面後又繞回左半平面（在bode圖中表現為在穿越頻率前某一段相移超過180度）這種情況就稱作條件穩定。假設由負載突變引起擾動，經傅里葉分解得到一系列週期波，這些波長的頻譜是不連續的那麼就有可能不包含出現在右半平面的頻率電路最終也會穩定。這種穩定是不可靠的，用下面的小球來描述更容易理解。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3428534d1cec41fcafb3d6819dd2e18d><p class=pgc-img-caption></p></div><p>圖13-25 條件穩定圖示</p><p><br></p><p>圖中位置4是最終的穩定點，第一種情況小球初速度比較慢，小球沿著軌跡1運動最終到達位置4形成穩定。情況2小球初速度比較高，小球沿著軌跡2運動最終也可以達到位置4形成穩定。情況3小球中速運動，這時小球的運動軌跡為3到達一個相對穩定點而無法達到最終穩定點，如果在小球的初速度中不包含情況3中的軌跡3那麼這種情況就形成條件穩定。</p><p>將圖13-14的例子用S域來分析，首先是功率級bode圖及S域圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d1bf8297b0274df38ac96a8ed52ff740><p class=pgc-img-caption></p></div><p>圖13-26 功率級bode圖及S域圖</p><p>圖13-26中起點a相移接近0度在S域上接近y軸的負半軸，極點b相移45度極點也是轉折點在S域中表現為在該極點處增益軌跡順時針旋轉，效果是相角滯後使增益軌跡向穿越點靠近，雙極點就是轉兩次轉的角度更大一些。穿越點即穿越頻率，穿越這個詞很形象其就如同黑洞一般從左邊看有進無出從右邊看特性完全不一樣了（穿越到另一時空？）。模值即為增益，圖中的最大增益為25db從S域中可以直觀的看出這個功率級傳遞函數增益較小。補償函數的bode圖和S域圖如下。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c6461e93fba5404896f4f5da4a8b6fd8><p class=pgc-img-caption></p></div><p>圖13-27 補償級bode及傳S域函數</p><p><br></p><p>在上一個功率級S域中我們已經知道極點是使增益曲線順時針旋轉向穿越點逼近，零點正好相反在零點處增益軌跡逆時針旋轉，效果為相角超前使增益軌跡遠離穿越點（這個可以解釋為何零極點一般要成對增加）。圖中採用的是Ⅱ類補償有個原極點所以起點滯後90度從x軸的負半軸開始。這裡低頻增益設置為60db用來提升最終的開環傳遞函數的增益。將功率級同補償級合成就構成了最終的開環傳遞函數，見下圖。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6445adaeb61b4de683319ec6c04d282a><p class=pgc-img-caption></p></div><p>圖13-28 開環bode圖及S域圖</p><p><br></p><p>開環特性是最終我們判定一個環路是否穩定可靠的依據，從圖13-28中或許可以解釋一些關於環路方面的疑惑。</p><p>圖13-28的S域中曲線a-b-c-d是一條用頻率變化來描述的曲線（從a起點10Hz變化到d穿越點8KHz），a點到d點的距離rad就是a點的模值（增益db），曲線a-b-c-d的周長體現帶寬。</p><p>參考圖13-19的S域模型，其左半平面的物理意義是一個RLC電路是一直在消耗能量其最終結果必然會穩定，所以設計開環bode圖時只要使增益軌跡都在左半平面那麼這個電路就是穩定的。右平面零點右平面極點都是不允許存在於增益軌跡上，反激電路中的右平面零點是通過將其設置在穿越頻率後來處理的。</p><p>模值rad代表的是低頻增益可以調節負載調整率，從圖中看如果增加低頻增益後只需再調整一下b極點的位置而原相位餘量可以保持不變，低頻增益增大後可使曲線周長變長也就是帶寬變寬這是有益的，但低頻增益過大的話環路中某器件可能會超出工作上限，另外觀察圖13-16隨著低頻增益的變大極點b可能會進入到右平面再返回形成條件穩定。在以往的bode圖資料描述中有一段以-40db下降的曲線，這段曲線就是由這個極點引起的，這個-40db(-2斜率)的曲線可以提升低頻段增益，其原因在這S域中可以看到比較清楚。</p><p>極點b使增益曲線順時針旋轉向穿越點靠近，如果沒有這個極點增益曲線直接就進入到了右平面。零點c使增益曲線逆時針旋轉，如果沒有這個零點增益曲線bd段要非常的靠近y軸的正半軸才能達到穿越點，這種情況極易進入到右半平面是不穩定的所以加入一個零點使bc段離開y正虛軸一段距離。在bode圖中要以-20db(斜率-1)穿過穿越頻率原因大概就在於此。</p><p>開關電源中的Ⅰ、Ⅱ、Ⅲ類補償該如何選擇，Ⅰ類補償自身相位滯後90度適用於相角＜45度的電路如電流模式的大ESR電容的電源，Ⅱ類補償自身相位滯後0-90度適用於相角&lt;135度的電路如電流模式、電壓模式等電源，Ⅲ類補償自身相位可超前90度適用於相角&lt;225度的電路如LLC等幾乎所有的電源，Ⅲ類>Ⅱ類>Ⅰ類向下兼容。這裡似乎有個規律效率越高的電路其相位餘量越小越難控制，另外一個合適的控制方式可以降低對補償環路的要求比如電流模式可使相位餘量多90度，如果LLC電路也用電流模式來控制是否意味著其相角可以&lt;135度從而可選用Ⅱ類電路來補償，再如果LLC換一種更優秀的控制方式或許Ⅰ類補償就能使其穩定。是否可以有Ⅳ類、Ⅴ類補償應用於更復雜的系統，這在S域中來進行設計估計會容易些。</p><p>電壓模式的反激的功率級傳遞函數如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/39561ca45eea43a987e938da420a6c3e><p class=pgc-img-caption></p></div><p>圖13-29 電壓模式的功率級bode圖及S域圖</p><p>從圖中看電壓模式中有個雙極點b最大相位角有150度超過了135度，如果避開這個雙極點將穿越頻率設置在600Hz以內則Ⅰ類補償就可以不過帶寬和低頻增益都太低，所以這裡採用Ⅲ類補償比較合適。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/67c3d9b2f6d9467d9a644046c35174c2><p class=pgc-img-caption></p></div><p>圖13-30 電壓模式的補償級bode圖及S域圖</p><p><br></p><p>因功率級傳遞函數在600Hz處有個雙極點所以補償級在此頻率處加兩個零點補償（雙零點b），高頻處再加入極點c和d用於調節穿越頻率，原極點a調節低頻增益。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9236b20b931047eebb34a6ced4c6b597><p class=pgc-img-caption></p></div><p>圖13-31 電壓模式的開環bode圖及S域圖</p><p>上圖為最終的開環傳遞函數結果，從S域圖看增益曲線在雙零點b處繞了個彎結果使後面曲線的相位都得到了提升，整個曲線都在左半平面並且d-e段有著不錯的斜率經過穿越頻率點。</p><p>分析電路的傳遞函數時一般都只用到二階而實際的電路往往為多階函數，下圖是模擬的一個四階傳遞函數bode圖和S域圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/fdb7418d42dc45febaee09147fb31aae><p class=pgc-img-caption></p></div><p>圖13-32 模擬四階功率級bode圖及S域圖</p><p>在這個圖中四階函數的表現為兩個不重疊的雙極點，如果把穿越頻率設置在第二個雙極點前那麼這個傳遞函數就可以當成是二階函數來處理了，這大概是為何可以用二階函數來分析電路的原因。</p><p>如果一個電路非常的高效（比如LLC電路）那麼其補償電路及補償後的效果又如何呢？在圖13-29的基礎上將阻尼係數降低得到如下一個新的功率級bode和S域圖（實際仿真用的是三階函數，從圖形上看同二階差別很小）。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/00482c46d16e454bbf0daf2e6749f8aa><p class=pgc-img-caption></p></div><p>圖13-33 高效率電路的功率級bode及S域圖</p><p>補償電路仍然採用Ⅲ類補償，參數略作調整。</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5654373570514871b6a8268326e77b0c><p class=pgc-img-caption></p></div><p>圖13-34 高效率電路的補償級bode圖及S域圖</p><p>補償後的結果為</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9cddeadfff094b3b9ef08aaf90c8e4a7><p class=pgc-img-caption></p></div><p>圖13-35 高效率電路的開環級bode圖及S域圖</p><p>圖13-35中的S域圖中c點和d點同右半平面距離近似相同可認為這是最佳狀態，如果補償級的零點（雙零點可不重合，可單獨設置）設置的偏左其會造成相位補償過量，如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/798a91c0e7804fc596cc908c9e206d45><p class=pgc-img-caption></p></div><p>圖13-36 高效率電路相位補償過量</p><p>圖13-36中c點已經跑到右半平面了形成了條件穩定，整體來說是不可靠的。</p><p>如果補償級零點設置的偏右其會造成相位補償不足，如下圖</p><p><br></p><div class=pgc-img><img alt=想用Labview做一個反激電源設計軟件（一） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/719d5627eca84559af4213e7238bbbae><p class=pgc-img-caption></p></div><p>圖13-37 高效率電路相位補償不足</p><p>圖13-37中d點跑的了右半平面形成條件穩定，最終也是不可靠的。</p><p>從這裡可以看出對於高效率電路其可用的補償參數範圍非常窄，效率越高越窄，而對於前面的非高效電路要滿足環路穩定可選的參數很多，在一定範圍內或許隨便一個參數都能滿足要求。補償參數範圍窄這大概是LLC之類高效電路環路難設計的原因之一吧？</p><p><br></p><p>圖13-35中如果想提高穩定度（加大c、d點同右半平面的距離）可通過降低補償級的低頻增益來實現。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Labview</a></li><li><a>一個</a></li><li><a>反激</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac25d2d0.html alt=30分鐘教你搭建一個網站（一）：購買和配置服務器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5f26f1582a564e93bde33a7dd9448c3b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac25d2d0.html title=30分鐘教你搭建一個網站（一）：購買和配置服務器>30分鐘教你搭建一個網站（一）：購買和配置服務器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8be5e94.html alt=不會買服務器？一個辦法讓你輕鬆搭網站 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/84d9c54578de46058796824f1bcb6a9b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8be5e94.html title=不會買服務器？一個辦法讓你輕鬆搭網站>不會買服務器？一個辦法讓你輕鬆搭網站</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c811c5f7.html alt=使用服務器搭建一個網站 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/63a6cc0eb4d146e0890515500c0040ca style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c811c5f7.html title=使用服務器搭建一個網站>使用服務器搭建一個網站</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4b69aa7f.html alt=做一個小型網站，服務器需要什麼配置的呢？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4b69aa7f.html title=做一個小型網站，服務器需要什麼配置的呢？>做一個小型網站，服務器需要什麼配置的呢？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/eee4b8ad.html alt=搭建一個網站，租服務器大概多少錢？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/eee4b8ad.html title=搭建一個網站，租服務器大概多少錢？>搭建一個網站，租服務器大概多少錢？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62d46b38.html alt=素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5e7b0005767168b2b87d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62d46b38.html title=素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！>素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/647df9c2.html alt=一個男人每天24小時跟妻子在一起，久而久之會怎樣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8359cc22f03e478a8cdb889dcfea3f99 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/647df9c2.html title=一個男人每天24小時跟妻子在一起，久而久之會怎樣>一個男人每天24小時跟妻子在一起，久而久之會怎樣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5a86d7d9.html alt=每天一個好習慣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RKdGgquJFM6gnc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5a86d7d9.html title=每天一個好習慣>每天一個好習慣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/756b16fb.html alt=奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/3fd8ec4e-64c1-446a-adfa-38088fb06c01 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/756b16fb.html title=奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點>奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b29ee719.html alt=又一個走上不歸路的搬磚人 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bf471da0a06441f88bce49b959234257 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b29ee719.html title=又一個走上不歸路的搬磚人>又一個走上不歸路的搬磚人</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d6d5661.html alt=多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/833949926ebf49b89c5fb4075a9cffdd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d6d5661.html title=多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏>多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/917424fc.html alt=一個三年級小孩掌握腦王速記法之數字編碼後倒背如流圓周率1萬位 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5b430002414bdad7cc1f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/917424fc.html title=一個三年級小孩掌握腦王速記法之數字編碼後倒背如流圓周率1萬位>一個三年級小孩掌握腦王速記法之數字編碼後倒背如流圓周率1萬位</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/25157041.html alt=聖胡安（波多黎各）：一個很不美國的美國城市 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d049f3231cda4890ae11c23b2c8f8f70 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/25157041.html title=聖胡安（波多黎各）：一個很不美國的美國城市>聖胡安（波多黎各）：一個很不美國的美國城市</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2ca7396.html alt=人工智能的下一個春天：情緒和情感計算 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ReV1j945oIOAmo style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2ca7396.html title=人工智能的下一個春天：情緒和情感計算>人工智能的下一個春天：情緒和情感計算</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f649e4a6.html alt=舊廠房孵化新科技——一個國家級高新區的“雙創”見聞 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f649e4a6.html title=舊廠房孵化新科技——一個國家級高新區的“雙創”見聞>舊廠房孵化新科技——一個國家級高新區的“雙創”見聞</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>