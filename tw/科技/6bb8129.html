<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>C++同時處理多個任務？一篇短文，9成小白都能看懂！ | 极客快訊</title><meta property="og:title" content="C++同時處理多個任務？一篇短文，9成小白都能看懂！ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/b8bacdf0ec5242b78998a75b7552ea75"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/6bb8129.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/6bb8129.html><meta property="article:published_time" content="2020-10-29T21:00:07+08:00"><meta property="article:modified_time" content="2020-10-29T21:00:07+08:00"><meta name=Keywords content><meta name=description content="C++同時處理多個任務？一篇短文，9成小白都能看懂！"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/6bb8129.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>C++同時處理多個任務？一篇短文，9成小白都能看懂！</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b8bacdf0ec5242b78998a75b7552ea75></div><p><strong>很多大牛都關注了《一碳科技》哦！</strong></p><hr><h1>多線程到底是啥？</h1><p>瞭解多線程之前，我們先來了解一下<strong>進程、線程、操作系統</strong>這三者關係，進程是操作系統調度資源的最小單位，而線程是CPU調度資源的最小單位。</p><p>一個進程必將擁有一個或多個線程，一個進程內的所有線程共享該進程所擁有的資源（操作系統給的），為什麼是這樣的呢？打個比方，一所食堂每天都要為學校中的<strong>100名</strong>學生打（<strong>進程</strong>）飯，100名學生會排起一條長長的隊伍等待打飯阿姨（<strong>線程</strong>）打飯（<strong>任務</strong>），在這個例子當中，學校就是<strong>操作系統</strong>，<strong>進程</strong>就是學校，<strong>線程</strong>就是打飯阿姨，所處理的任務就是“<strong>給100名學生打飯</strong>”。</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f34a483605784066a3f9a017cd88faf1></div><p>在這裡問題就來了：只有<strong>1位</strong>打飯阿姨給<strong>100名</strong>學生打飯，這未免也太慢了，就沒有更快的方法了麼？</p><p><strong>答案是：有，多找幾個打飯阿姨！</strong></p><p>在這個問題上面，食堂可以多招幾個打飯阿姨給這100名學生打飯，這樣就可以減少很多時間了，而多線程與這個類似，<strong>進程將一個大的“任務”分別交給多個線程，每個線程完成“一部分任務”，等線程都完成“一部分任務”後，進程的“大任務”也就完成了，在這個過程中省下了不少時間。</strong></p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5be117aa70ff4b9a9b77ae135b6bd0db></div><h1>實例演示多線程編程（簡單實例）</h1><p>首先我們先了解一下這個函數：<strong>CreateThread()</strong>，這個函數是用來創建一個新線程的，他接受6各參數，分別為<strong>線程安全相關屬性</strong>，<strong>新線程所佔棧的大小（通常設為0）</strong>，<strong>新線程的回調函數（線程函數）</strong>，<strong>傳給線程函數的參數</strong>，<strong>控制線程創建的標誌</strong>，最後一個為<strong>傳出參數</strong>（<strong>用於獲得線程ID，如果為NULL則不返回線程ID</strong>）。</p><p>首先我們先來構建一下我們的線程函數<strong>DWORD WINAPI Fun(LPVOID lpParamter)</strong>，這個函數裡面其實就是我們想要實現的功能（隨便寫），在這裡要注意，線程函數的通用格式是：<strong>DWORD WINAPI 函數名 （LPVOID DateType）</strong>，函數名和參數名隨便寫，但是返回值類型和參數類型不能變！<strong>如果想要改變的請看下文↓</strong></p><p><strong>DWORD WINAPI Fun(LPVOID lpParamter)</strong></p><p>在這個函數裡面，只有一條循環輸出語句，在屏幕上打印出10條：“<strong>A Thread Fun Display!</strong>”。</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c9636c8e6dbb45dcb8e85bf9bac3b36d></div><p>隨後我們在主函數main()中，也相應循環輸出：“<strong>Main Thread Display!\n</strong>”。</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dd93ac2daa914afea23d3516ae50c2c9></div><p><strong>創建新線程，並釋放線程句柄</strong></p><p>我們使用<strong>CreateThread()</strong>函數來創建新線程，該函數的參數在上面已經寫清楚了，唯有一點就是線程函數的編寫格式問題，如何才能不用想上面那樣編寫線程函數呢？很簡單，在線程函數名稱前面加一個(<strong>LPTHREAD_START_ROUTINE</strong>)，例如這樣子↓</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/06bf4c8d85b74081aad3de52e756868d></div><p>隨後我們將線程句柄釋放掉，注意！這裡的線程<strong>句柄</strong>與<strong>線程本身</strong>是不同的概念哦，在這裡並不意味著我們將線程相關的資源釋放掉了！</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6fe64c09eaea4235aecaf76e25c9c0bc></div><h1>跑起來！看看效果</h1><p>點擊調試運行！</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fd5ef5be877e46dabd1e739aa3cd2e3e></div><p><strong>咦？這個結果我們預期的結果不一致呀？怎麼只有主函數在運行？</strong>小編再稍稍修改一下↓</p><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9b37646d89cf412ea02118c15a73aea0></div><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/04e249e2be314407b0497ab10118508f></div><div class=pgc-img><img alt=C++同時處理多個任務？一篇短文，9成小白都能看懂！ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c4f65522d9454d75ad1b0da26f946d1a></div><p>心細的小夥伴可能已經看出了不對的地方，小編給兩個函數都加上了一個<strong>掛起函數</strong>，並且上面兩幅運行結果圖均有同一份源碼運行生成的！也就是說，同一個程序，出現了兩種不同結果，這是為什麼呢？</p><p>這裡簡單的說一下，這是由於CPU分配給各個線程的時間片導致的，一個線程的時間片用完，但是線程執行的“任務”並沒有完成，就會出現“任務”執行到一半的情況，也就是上面這種情況！</p><p><strong>在下一篇推文中，小編將會給大家帶來多線程編程的進階知識，以及解答上面這個結果出現的原因。</strong></p><h1><strong>私信可獲取本篇文章的學習源碼</strong></h1><p>先關注《一碳科技》，在屏幕下方留下您寶貴的建議或疑問，然後即可私信小編<strong>關鍵字</strong>：“<strong>多線程學習源碼</strong>”獲取學習源碼。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>C++</a></li><li><a>同時</a></li><li><a>處理</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/89db442.html alt=同時處理多個任務的能力是與生俱來的嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1532145777118129079d066 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/89db442.html title=同時處理多個任務的能力是與生俱來的嗎？>同時處理多個任務的能力是與生俱來的嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b4b904e6.html alt=每天一杯奶茶，杭州倆閨蜜同時滿臉長痘：糖、奶攝入過多 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/SFXScvFHLkLZxT style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b4b904e6.html title=每天一杯奶茶，杭州倆閨蜜同時滿臉長痘：糖、奶攝入過多>每天一杯奶茶，杭州倆閨蜜同時滿臉長痘：糖、奶攝入過多</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7697e301.html alt=退休夫妻同時患癌，還是中晚期！兩人每天都要吃一斤這種零食 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/SB5GydOIYBAOWk style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7697e301.html title=退休夫妻同時患癌，還是中晚期！兩人每天都要吃一斤這種零食>退休夫妻同時患癌，還是中晚期！兩人每天都要吃一斤這種零食</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/10c7d8fd.html alt=神州泰嶽：公司在自然語言處理領域的基礎技術研究和應用落地均走在行業前列 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/10c7d8fd.html title=神州泰嶽：公司在自然語言處理領域的基礎技術研究和應用落地均走在行業前列>神州泰嶽：公司在自然語言處理領域的基礎技術研究和應用落地均走在行業前列</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html alt="MySQL 事務處理" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0be408a4.html title="MySQL 事務處理">MySQL 事務處理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/011d2da0.html alt=MySql併發與事務的處理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/f13d8a1e-5e60-4b48-90bc-3c26e312a208 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/011d2da0.html title=MySql併發與事務的處理>MySql併發與事務的處理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d3c48fcc.html alt=Spring聲明式事務處理的實現原理，來自面試官的窮追拷問 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d3c48fcc.html title=Spring聲明式事務處理的實現原理，來自面試官的窮追拷問>Spring聲明式事務處理的實現原理，來自面試官的窮追拷問</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/efc2a519.html alt=你知道MySQL的事務處理和隔離級別嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/efc2a519.html title=你知道MySQL的事務處理和隔離級別嗎？>你知道MySQL的事務處理和隔離級別嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/26327cd2.html alt=C++｜自定義偽隨機數和標準庫中的隨機數 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/26327cd2.html title=C++｜自定義偽隨機數和標準庫中的隨機數>C++｜自定義偽隨機數和標準庫中的隨機數</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0cdba029.html alt=C++｜徹底弄清偽隨機數與隨機數 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0cdba029.html title=C++｜徹底弄清偽隨機數與隨機數>C++｜徹底弄清偽隨機數與隨機數</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb808de3.html alt=C++中的多態（動態多態）究竟是如何實現 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/30cae7ea5f5647deba7c518ed4e1a91b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb808de3.html title=C++中的多態（動態多態）究竟是如何實現>C++中的多態（動態多態）究竟是如何實現</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/00674040.html alt=CC++語言16｜通過繼承、虛函數、指針來實現動態多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/00674040.html title=CC++語言16｜通過繼承、虛函數、指針來實現動態多態>CC++語言16｜通過繼承、虛函數、指針來實現動態多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/160af1cf.html alt=牆面基層處理有哪些基本步驟 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RZdKr6O1pG4jKu style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/160af1cf.html title=牆面基層處理有哪些基本步驟>牆面基層處理有哪些基本步驟</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bf790e4b.html alt=地面基層處理是什麼意思？地面基層清理方法及注意事項有哪些 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/339700cdb9c04fdd98fcc3e95cdc166c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bf790e4b.html title=地面基層處理是什麼意思？地面基層清理方法及注意事項有哪些>地面基層處理是什麼意思？地面基層清理方法及注意事項有哪些</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/44c6d5cb.html alt=豎向鋼筋位移施工加固處理措施 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a7d965c73c1542978ae9091d6bf34aa9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/44c6d5cb.html title=豎向鋼筋位移施工加固處理措施>豎向鋼筋位移施工加固處理措施</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>