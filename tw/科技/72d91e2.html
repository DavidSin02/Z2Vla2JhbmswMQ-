<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>如何利用Qt quick開發嵌入式應用程序，並實現遠程調試 | 极客快訊</title><meta property="og:title" content="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/262d0d4567724756af1f04c908cdb7ce"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/72d91e2.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/72d91e2.html><meta property="article:published_time" content="2020-10-29T20:59:01+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:01+08:00"><meta name=Keywords content><meta name=description content="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/72d91e2.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>如何利用Qt quick開發嵌入式應用程序，並實現遠程調試</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><span style="color:#555;--tt-darkmode-color: #555555">在本文的</span><a class=pgc-link data-content=mp data-source=innerLink href="https://www.toutiao.com/i6877089982658544140/?group_id=6877089982658544140" rel="noopener noreferrer" target=_blank>第1部分</a>中，我們展示瞭如何在Visual Studio中針對Windows和嵌入式Linux創建多平臺Qt Quick應用程序項目。現在，我們將展示如何在嵌入式設備上運行該應用程序。然後，我們將繼續將該項目開發為我們打算創建的完整嵌入式應用程序。最後，我們將使用VS調試器對應用程序的C ++和QML代碼進行遠程調試。</p><p style=text-align:justify><strong>在嵌入式設備上運行</strong></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">我們已經展示瞭如何交叉編譯在Visual Studio中創建的“ hello world” Qt Quick應用程序。現在，我們將看到如何在Raspberry Pi上運行該應用程序。由於我們將以全屏模式運行，因此我們必須首先向應用程序窗口中添加一些內容。</span></p><pre><code>Window {    visible: true    title: qsTr("Hello World")    Text {        id: clock        font.pointSize: 72        Timer {            interval: 1000; running: true; repeat: true            onTriggered: clock.text = (new Date).toLocaleTimeString(Qt.locale("de_DE"), "hh:mm:ss");        }    }}</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">和以前一樣，選擇Linux項目配置，然後按F7鍵開始交叉編譯。</span></p><pre><code>1&gt;------ Build started: Project: QuickMirror, Configuration: Debug_RPi x64 ------1&gt;rcc qml.qrc1&gt;Invoking 'mkdir -p $(dirname qml.qrc); mkdir -p $(dirname /mnt/c/Users/user/Source/Repos/QuickMirror/main.qml); mkdir -p $(dirname /mnt/c/Users/user/Source/Repos/QuickMirror/obj/x64/Debug_RPi/rcc/qrc_qml.cpp); (/home/user/raspi/qt5/bin/rcc /mnt/c/Users/user/Source/Repos/QuickMirror/qml.qrc --name qml -o /mnt/c/Users/user/Source/Repos/QuickMirror/obj/x64/Debug_RPi/rcc/qrc_qml.cpp)', working directory: '/mnt/c/Users/user/Source/Repos/QuickMirror'1&gt;Starting remote build1&gt;Compiling sources:1&gt;qrc_qml.cpp1&gt;Linking objects1&gt;QuickMirror.vcxproj -&gt; C:\Users\user\Source\Repos\QuickMirror\bin64\Debug_RPi\QuickMirror.out========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">要在每次構建結束時自動複製應用程序文件，可以在“ WSL構建後事件”屬性頁中設置以下命令（</span><strong>A</strong>TTN： 這將以明文形式保存設備密碼）。</p><pre><code>C:\Users\user&gt; scp C:\Users\user\Source\Repos\QuickMirror\bin64\Debug_RPi\QuickMirror.out pi@192.168.1.98:/home/pi/pi@192.168.1.98's password:QuickMirror.out 100% 465KB 1.6MB/s 00:00C:\Users\user&gt;</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">在啟動Qt Quick應用程序之前，我們需要設置一些必需的環境變量：</span></p><ul><li><strong><span style="color:#666;--tt-darkmode-color: #666666">LD_LIBRARY_PATH</span></strong><span style="color:#666;--tt-darkmode-color: #666666"><br>Qt二進制文件安裝目錄的路徑。<br></span></li><li><strong><span style="color:#666;--tt-darkmode-color: #666666">QT_QPA_PLATFORM</span></strong><span style="color:#666;--tt-darkmode-color: #666666"><br>平臺插件。<br></span></li><li><strong><span style="color:#666;--tt-darkmode-color: #666666">QT_QPA_PLATFORM_PLUGIN_PATH</span></strong><span style="color:#666;--tt-darkmode-color: #666666"><br>平臺插件安裝目錄的路徑。<br></span></li><li><strong><span style="color:#666;--tt-darkmode-color: #666666">QT_QPA_EGLFS_PHYSICAL_WIDTH<br>QT_QPA_EGLFS_PHYSICAL_HEIGHT</span></strong><span style="color:#666;--tt-darkmode-color: #666666"><br>物理屏幕的寬度和高度，以毫米為單位。<br></span></li><li><strong><span style="color:#666;--tt-darkmode-color: #666666">QML2_IMPORT_PATH</span></strong><span style="color:#666;--tt-darkmode-color: #666666"><br>安裝的QML模塊的路徑。</span></li></ul><pre><code>pi@raspberry-pi:~$ export LD_LIBRARY_PATH="/usr/local/qt5pi/lib"pi@raspberry-pi:~$ export QT_QPA_PLATFORM="eglfs"pi@raspberry-pi:~$ export QT_QPA_PLATFORM_PLUGIN_PATH="/usr/local/qt5pi/plugins/platforms"pi@raspberry-pi:~$ export QT_QPA_EGLFS_PHYSICAL_WIDTH="326"pi@raspberry-pi:~$ export QT_QPA_EGLFS_PHYSICAL_HEIGHT="520"pi@raspberry-pi:~$ export QML2_IMPORT_PATH="/usr/local/qt5pi/qml"pi@raspberry-pi:~$ ./QuickMirror.out</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">樹莓派顯示器</span></p><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/262d0d4567724756af1f04c908cdb7ce><p class=pgc-img-caption></p></div><p style=text-align:center><span style="color:#555;--tt-darkmode-color: #555555">在Raspberry Pi中運行“ Hello World”應用程序</span></p><h1 class=pgc-h-arrow-right>開發應用程序</h1><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">我們的應用程序的要求包括顯示以下信息：</span></p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">當前時間</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">當前日期</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">週年紀念</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">天氣預報</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">下次出發的公共交通工具</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">新聞</span></li></ul><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">我們將把每個項目封裝為專用的QML類型。為此，我們必須首先將QML模塊定義（qmldir）文件添加到項目中：</span></p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">選擇“項目>添加新項。。> Qt> QML模塊定義”。</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">在位置字段中，指示將包含QML文件的文件夾的路徑。</span></li></ul><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d2fb342a66034b33beff3efa14ace6af><p class=pgc-img-caption></p></div><p style=text-align:center><span style="color:#555;--tt-darkmode-color: #555555">向項目添加新的QML模塊定義</span></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">按下“添加”後，</span><strong>qmldir </strong>文件將在項目樹中可用。我們將使用此文件來定義每種QML類型到其對應源文件的映射。</p><pre><code>ApiCall         1.0 QuickMirror.ApiCall.qmlCalendar        1.0 QuickMirror.Calendar.qmlClock           1.0 QuickMirror.Clock.qmlNewsTicker      1.0 QuickMirror.NewsTicker.qmlOnThisDay       1.0 QuickMirror.OnThisDay.qmlPublicTransport 1.0 QuickMirror.PublicTransport.qmlWeather         1.0 QuickMirror.Weather.qml</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">要將新的QML源文件添加到項目中：</span></p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">選擇“項目>添加新項...> Qt> QML文件”。</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">將位置設置qmldir為創建文件的相同目錄。</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">設置QML文件名。</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">按“添加”。</span></li></ul><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/bab5b2756f354268b929a4d46bb05b00><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">我們將首先添加QML類型以顯示當前時間，當前日期和重要的週年紀念日。該</span><strong>Clock</strong>類型將顯示當前時間，每秒刷新一次。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">QuickMirror.Clock.qml</span></p><pre><code>  function refresh() {        text = (new Date).toLocaleTimeString(Qt.locale("de_DE"), "hh:mm");    }    Component.onCompleted : refresh();    Timer {        interval: 1000; running: true; repeat: true onTriggered: parent.refresh();    }} </code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">該</span><strong>Calendar</strong>類型將顯示當前日期，並在不同語言環境之間循環。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">QuickMirror.Calendar.qml</span></p><pre><code>Text {    renderType: Text.NativeRendering    id: calendar    color: "white"    font.family: FontFamily_Bold    font.styleName: FontStyle_Bold    font.pointSize: 72    property var locales: ["en_US", "de_DE", "pt_PT"]    property var localeIdx: 0    function capitalize(s) {        return s.replace(/(^|-)./g, function(c) { return c.toUpperCase(); });    }    function setNextLocale() {        localeIdx = (localeIdx + 1) % locales.length;    }    function getCurrentText() {        var date = new Date;        var locale = Qt.locale(locales[localeIdx]);        var calendarText = capitalize(date.toLocaleDateString(locale, "dddd, dd"));        var monthShort = date.toLocaleDateString(locale, "MMM");        var monthLong = date.toLocaleDateString(locale, "MMMM");        if (monthLong.length &lt;= 5) { calendarText += capitalize(monthLong); } else { calendarText += capitalize(monthShort); if (!monthShort.endsWith(".")) calendarText += "."; } calendarText += date.toLocaleDateString(locale, " yyyy"); return calendarText; } Component.onCompleted: { text = getCurrentText(); } Timer { interval: 15000; running: true; repeat: true onTriggered: { setNextLocale(); text = getCurrentText(); } } Behavior on text { SequentialAnimation { NumberAnimation { target: calendar; property: "opacity"; to: 0.0; duration: 1000 } PropertyAction { target: calendar; property: "text" } NumberAnimation { target: calendar; property: "opacity"; to: 1.0; duration: 500 } } } }</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">除了日期/時間，我們的應用程序還將依靠Web API來檢索信息。我們將</span><strong>curl</strong>在一個單獨的過程中運行以連接到Web API。流程創建將由名為的C ++類處理<strong>Process</strong>。然後，QML類型<strong>ApiCall</strong>將使用一個<strong>Process</strong>對象以<strong>curl</strong>必要的參數開始並收集其輸出。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">QuickMirror.ApiCall.qml</span></p><pre><code>Item {    property var url: ""    property var path: []    property var query: []    signal response(var response)    signal error(var error)    Process {        id: curl        property var path: Q_OS_WIN ? "C:\\Windows\\System32\\curl.exe" : "/usr/bin/curl"        property var request: ""        command: path + " -s \"" + request + "\""    }    function sendRequest() {        curl.request = url;        if (path.length &gt; 0)            curl.request += "/" + path.join("/");         if (query.length &gt; 0)            curl.request += "?" + query.join("&amp;");        curl.start();    }    Connections {        target: curl        onExit /*(int exitCode, QByteArray processOutput)*/ : {            if (exitCode != 0) {                console.log("ApiCall: exit " + exitCode);                console.log("==== ApiCall: request: " + curl.request);                return error("exit " + exitCode);            }            try {                return response(JSON.parse(processOutput));            } catch (err) {                console.log("ApiCall: error: " + err.toString());                console.log("==== ApiCall: request: " + curl.request);                console.log("==== ApiCall: response: " + processOutput);                return error(err);            }        }    }}</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">要創建</span><strong>Process</strong>C ++類：</p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">選擇“項目>添加Qt類> Qt類”</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">將類名設置為Process</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">按“添加”</span></li></ul><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4efb65d124d44112bd30737478c15b05><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><pre><code>class Process : public QProcess{    Q_OBJECT    Q_PROPERTY(QString command READ command WRITE setCommand NOTIFY commandChanged)public:    Process(QObject* parent = 0);    ~Process();public:    Q_INVOKABLE void start();    void setCommand(const QString&amp; cmd);    QString command() const;signals:    void commandChanged();    void exit(int exitCode, QByteArray processOutput);protected:    void onFinished(int exitCode, QProcess::ExitStatus status);    void onErrorOccurred(QProcess::ProcessError error);private:    QString m_command;};</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">Process.cpp</span></p><pre><code>Process(QObject* parent) : QProcess(parent){    connect(        this, QOverload::of(&amp;QProcess::finished),        this, &amp;Process::onFinished);    connect(        this, &amp;QProcess::errorOccurred,        this, &amp;Process::onErrorOccurred);}Process::~Process(){}void Process::setCommand(const QString&amp; cmd){    if (cmd != m_command) {        m_command = cmd;        emit commandChanged();    }}QString Process::command() const{    return m_command;}void Process::start(){    if (state() == ProcessState::NotRunning)        QProcess::start(m_command);    else        qInfo() &lt;&lt; "==== QProcess: ERROR already running:" &lt;&lt; m_command; } void Process::onFinished(int exitCode, QProcess::ExitStatus status) { emit exit((status == ExitStatus::NormalExit) ? exitCode : -1, readAll()); } void Process::onErrorOccurred(QProcess::ProcessError error) { qInfo() &lt;&lt; "==== QProcess: ERROR " &lt;&lt; error; }</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">main.cpp</span></p><pre><code>int main(int argc, char* argv[]){    qmlRegisterType("Process", 1, 0, "Process");...</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">該</span><strong>OnThisDay</strong> QML類型將使用的實例，通過它們來獲取顯著的紀念日列表和循環每隔幾秒鐘。<strong> ApiCall</strong></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">QuickMirror.OnThisDay.qml</span></p><pre><code>Item {    id: onThisDay    clip: true    property int viewportHeight    property var events: []    property var births: []    property var deaths: []    property int idxEventType: -1    ApiCall {        id: onThisDayApi        property int month: 0        property int day: 0        property string eventType: ""        url: "https://byabbe.se"; path: ["on-this-day", month, day, eventType + ".json" ]        onResponse: {            if ("events" in response) {                events = shuffle(response.events);                eventType = "births";                sendRequest();            } else if ("births" in response) {                births = shuffle(response.births);                for (var i in births)                    births[i].year = "*" + births[i].year;                eventType = "deaths";                sendRequest();            } else if ("deaths" in response) {                deaths = shuffle(response.deaths);                for (var i in deaths)                    deaths[i].year = "†" + deaths[i].year;                next();            }        }    }    function init() {        events = [];        births = [];        deaths = [];        idxEventType = -1;        var today = new Date;        onThisDayApi.month = today.getMonth() + 1;        onThisDayApi.day = today.getDate();        onThisDayApi.eventType = "events";        onThisDayApi.sendRequest();    }    function next() {        if (events.length + births.length + deaths.length == 0)            return;        var today = new Date;        if (onThisDayApi.month != today.getMonth() + 1 || onThisDayApi.day != today.getDate())            return init();        onThisDayText.color = "white";        idxEventType = (idxEventType + 1) % 3;        var event;        switch (idxEventType) {            case 0:                if (events.length == 0)                    return next();                event = events.shift();                events = shuffle(events);                events.push(event);                break;            case 1:                if (births.length == 0)                    return next();                event = births.shift();                births = shuffle(births);                births.push(event);                break;            case 2:                if (deaths.length == 0)                    return next();                event = deaths.shift();                deaths = shuffle(deaths);                deaths.push(event);                break;        }        onThisDayText.text = event.year + " – " + event.description;        showText.start();    }    Component.onCompleted: {        init();    }    Timer {        id: timerRetry        interval: 10000; running: true; repeat: true        onTriggered: {            if (events.length + births.length + deaths.length == 0)                init();        }    }    SequentialAnimation {        id: showText        PropertyAction { target: onThisDayText; property: "y"; value: 25 }        NumberAnimation { target: onThisDayText; property: "opacity"; to: 1.0; duration: 500 }        PauseAnimation { duration: 3000 }        NumberAnimation {            target: onThisDayText            property: "y"            to: Math.min(-(25 + onThisDayText.contentHeight) + viewportHeight, 25)            duration: Math.max(0, (Math.abs(to - from) * 1000) / 25)        }        PauseAnimation { duration: 3000 }        NumberAnimation { target: onThisDayText; property: "opacity"; to: 0.0; duration: 1000 }        onFinished: {            onThisDay.next();        }    }    Text {        renderType: Text.NativeRendering        id: onThisDayText        wrapMode: Text.WordWrap        font.family: FontFamily_Normal        font.styleName: FontStyle_Normal        font.pointSize: 40        textFormat: Text.RichText        color: "white"        y: 25        anchors.left: parent.left        width: parent.width        height: contentHeight        opacity: 0    }    Rectangle {        id: top        anchors.top: parent.top        anchors.left: parent.left        width: parent.width        height: 10        gradient: Gradient {            orientation: Gradient.Vertical            GradientStop { position: 0.0; color: "black" }            GradientStop { position: 0.5; color: "transparent" }        }    }    Rectangle {        id: bottomFade        anchors.top: parent.top        anchors.topMargin: viewportHeight        anchors.left: parent.left        width: parent.width        height: 0.1 * viewportHeight        gradient: Gradient {            orientation: Gradient.Vertical            GradientStop { position: 0.0; color: "transparent" }            GradientStop { position: 0.5; color: "black" }        }    }    Rectangle {        anchors.top: bottomFade.bottom        anchors.bottom: parent.bottom        anchors.left: parent.left        width: parent.width        color: "black"    }}</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">現在，我們已經定義了一些應用程序的QML類型，我們將它們排列在主QML文件上。</span></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">main.qml</span></p><pre><code>import "QuickMirrorTypes"Window {    visible: true    title: qsTr("Quick Mirror")    Flickable {        anchors.fill: parent        contentWidth: mirror.width        contentHeight: mirror.height        Rectangle {            id: mirror            width: 1080            height: 1920            color: "black"            Clock {                id: clock                anchors.top: mirror.top                anchors.left: mirror.left            }            Calendar {                id: calendar                anchors.top: clock.bottom                anchors.topMargin: -20                anchors.left: mirror.left            }            Rectangle {                anchors.top: calendar.bottom                anchors.topMargin: -5                anchors.left: mirror.left                width: 800                height: 2                color: "white"            }            OnThisDay {                id: onThisDay                anchors.top: calendar.bottom                anchors.left: mirror.left                anchors.leftMargin: 10                anchors.bottom: mirror.bottom                width: 780                viewportHeight: 260            }        }    }}</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">最後，</span><strong>qmldir </strong>必須將QML文件和該文件全部添加到應用程序的資源文件中：</p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">雙擊項目樹中的QRC文件</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">在“ Qt資源編輯器”窗口中，按“添加>添加文件”</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">選擇所有QML文件和qmldir文件</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">在Qt資源編輯器中按“保存”</span></li></ul><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/48310e32cfbd4b568324aedc2763a036><p class=pgc-img-caption></p></div><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">構建和部署後，我們將能夠啟動應用程序並查看顯示的信息。</span></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">樹莓派顯示器</span></p><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/317513d6e5274e7194e926e6e6db3700><p class=pgc-img-caption></p></div><p style=text-align:center><span style="color:#555;--tt-darkmode-color: #555555">在Raspberry Pi上運行的應用程序</span></p><h1 class=pgc-h-arrow-right>在Visual Studio中進行調試</h1><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">VS支持通過調試在WSL上運行的應用程序</span><strong>gdb</strong>。要在Raspberry Pi上運行時進行調試，我們將使用啟動應用程序<strong>gdbserver</strong>，然後配置<strong>gdb</strong>為連接到設備並啟動遠程調試會話。</p><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d6c331f9d8dd4326a5e8337f1f8aa0aa><p class=pgc-img-caption></p></div><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">為此，</span><strong>gdb </strong>WSL中安裝的組件必須支持目標設備體系結構。一種簡單的方法是安裝<strong>gdb-multiarch</strong>。為了確保VS使用正確的調試器，我們將創建從<strong>gdb</strong>到的符號鏈接<strong>gdb-multiarch</strong>。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">WSL命令外殼</span></p><pre><code>user@buildhost:~$ sudo apt-get install gdb-multiarch...user@buildhost:~$ cd /usr/binuser@buildhost:/usr/bin$ sudo mv gdb gdb-bkupuser@buildhost:/usr/bin$ sudo ln -s gdb-multiarch gdbuser@buildhost:/usr/bin$ ls -go gdb*lrwxrwxrwx 1 13 Sep 2 11:31 gdb -&gt; gdb-multiarch-rwxr-xr-x 1 8440200 Feb 11 2020 gdb-bkup-rwxr-xr-x 1 15192808 Feb 11 2020 gdb-multiarchuser@buildhost:/usr/bin$</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">要在Visual Studio中設置遠程調試會話，必須將兩個附加命令傳遞給</span><strong>gdb</strong>。這是在“ GDB調試器”屬性頁面中配置的。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">Project Properties > Debugging > Additional Debugger Commands</span></p><pre><code>target extended-remote 192.168.1.98:2345set remote exec-file /home/pi/QuickMirror.out</code></pre><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1d7f29d0b50f41edad3b6368d484e757><p class=pgc-img-caption></p></div><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">在開始遠程調試會話之前，我們必須設置所需的環境變量並</span><strong>gdbserver</strong>在設備上啟動。</p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">Raspberry Pi命令外殼</span></p><pre><code>pi@raspberry-pi:~$ export LD_LIBRARY_PATH="/usr/local/qt5pi/lib"pi@raspberry-pi:~$ export QT_QPA_PLATFORM="eglfs"pi@raspberry-pi:~$ export QT_QPA_PLATFORM_PLUGIN_PATH="/usr/local/qt5pi/plugins/platforms"pi@raspberry-pi:~$ export QT_QPA_EGLFS_PHYSICAL_WIDTH="326"pi@raspberry-pi:~$ export QT_QPA_EGLFS_PHYSICAL_HEIGHT="520"pi@raspberry-pi:~$ export QML2_IMPORT_PATH="/usr/local/qt5pi/qml"pi@raspberry-pi:~$ gdbserver --once --multi :2345Listening on port 2345</code></pre><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">按F5將啟動遠程調試會話。</span></p><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15f275a114be4302bbfeabaa6eb39956><p class=pgc-img-caption></p></div><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">在遠程調試期間在C ++代碼中的斷點處停止</span></p><p style=text-align:justify><strong>遠程QML調試</strong></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">在嵌入式設備上運行應用程序時，也可以調試QML代碼。</span></p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">在Qt設置中啟用QML調試：項目屬性> Qt項目設置<br></span></li><li><span style="color:#666;--tt-darkmode-color: #666666">用於啟動QML調試會話的安裝程序參數</span></li></ul><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">項目屬性>調試>程序參數</span></p><pre><code>-qmljsdebugger=port:8989,host:192.168.1.98,block</code></pre><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/58172861b64a466a93aa6a5559d3bdf4><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><h1 class=pgc-h-arrow-right>打包</h1><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">我們已經展示瞭如何使用Qt VS Tools擴展在帶有Qt Quick的Visual Studio中創建多平臺嵌入式應用程序。這包括：</span></p><ul><li><span style="color:#666;--tt-darkmode-color: #666666">從頭開始創建Qt Quick項目</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">用QML編寫應用程序代碼</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">交叉編譯應用程序</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">在嵌入式設備上部署和運行</span></li><li><span style="color:#666;--tt-darkmode-color: #666666">在Visual Studio中對C ++和QML代碼進行遠程調試</span></li></ul><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">該項目，包括所有源代碼，可從以下網址獲得：https : //github.com/micosta/quickmirror。</span></p><div class=pgc-img><img alt="如何利用Qt quick開發嵌入式應用程序，並實現遠程調試" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/bba17d71b18744f096680f0d5de88239><p class=pgc-img-caption></p></div><p style=text-align:justify><br></p><p style=text-align:center><span style="color:#555;--tt-darkmode-color: #555555">應用程序在嵌入式設備上運行</span></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">感謝您的閱讀和對Qt和VS Tools擴展的關注。如果您有任何疑問或建議，請在下面發表評論。</span></p><p style=text-align:justify><span style="color:#555;--tt-darkmode-color: #555555">如果這篇文章沒能滿足你的需求、點擊</span><strong>“瞭解更多”</strong>！免費獲取更多Qt資源教程！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Qt</a></li><li><a>quick</a></li><li><a>開發</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/a980c6f3.html alt=教你從頭學前端開發——第一個網頁（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1c44113d83f24f5db93c8353aff0c670 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a980c6f3.html title=教你從頭學前端開發——第一個網頁（一）>教你從頭學前端開發——第一個網頁（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e1f5a66a.html alt=網頁開發網頁的相關概念你知道嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8ca7902bdcb14bc5a25a88be4953edd6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e1f5a66a.html title=網頁開發網頁的相關概念你知道嗎？>網頁開發網頁的相關概念你知道嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9552c1b8.html alt="軟件開發中數據庫必備基礎01 - 圖解事務基礎" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e4e00ac778db451792b955bde23add02 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9552c1b8.html title="軟件開發中數據庫必備基礎01 - 圖解事務基礎">軟件開發中數據庫必備基礎01 - 圖解事務基礎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f8c3b92d.html alt=python安全開發軍規之四：使用安全的隨機數生成器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bbda123b84db44148aca9d3e26ddf119 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f8c3b92d.html title=python安全開發軍規之四：使用安全的隨機數生成器>python安全開發軍規之四：使用安全的隨機數生成器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/234d55fa.html alt=Java開發課程（十）——面向對象5、多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/df3621e51e4242fd90731dd013472f12 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/234d55fa.html title=Java開發課程（十）——面向對象5、多態>Java開發課程（十）——面向對象5、多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8dd83b90.html alt=常用最全正則表達式整理(開發必備) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5127ac984657471b853b307afe52b2fe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8dd83b90.html title=常用最全正則表達式整理(開發必備)>常用最全正則表達式整理(開發必備)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e2ad303f.html alt=給JAVA開發人員的正則表達式入門課 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5d620d422d0a4855924c5bcbf8ba483a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e2ad303f.html title=給JAVA開發人員的正則表達式入門課>給JAVA開發人員的正則表達式入門課</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a278a157.html alt=中國尚未被開發的海島，遊客甚少景色美爆，距江浙滬超近 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6150f65415b047acad00ca52441a93ec style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a278a157.html title=中國尚未被開發的海島，遊客甚少景色美爆，距江浙滬超近>中國尚未被開發的海島，遊客甚少景色美爆，距江浙滬超近</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d260a748.html alt=測試開發專題：spring-boot統一異常捕獲 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/135918e30e2f4a2ea248b539eb383688 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d260a748.html title=測試開發專題：spring-boot統一異常捕獲>測試開發專題：spring-boot統一異常捕獲</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d7062663.html alt="道韻筋骨開發 解讀普及體系中大家所熟悉的“開胯”（撥胯）練法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f09cbcf088974d11b128e0446ea00ccb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d7062663.html title="道韻筋骨開發 解讀普及體系中大家所熟悉的“開胯”（撥胯）練法">道韻筋骨開發 解讀普及體系中大家所熟悉的“開胯”（撥胯）練法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/aa93bfe3.html alt=服務器開發專題1-程序，進程的區別和併發概念 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1534549004517ed1429f6ce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/aa93bfe3.html title=服務器開發專題1-程序，進程的區別和併發概念>服務器開發專題1-程序，進程的區別和併發概念</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/63619dc0.html alt=匯川六宗肥地上架，開發商們都不淡定了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5fb5a9d4ae93444e8660c99914c3e7ad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/63619dc0.html title=匯川六宗肥地上架，開發商們都不淡定了>匯川六宗肥地上架，開發商們都不淡定了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d068068a.html alt=柬埔寨知名開發公司指定雷邦仕為防水材料合作品牌 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/3331dc1b6b1d4754acf196f00164ed8c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d068068a.html title=柬埔寨知名開發公司指定雷邦仕為防水材料合作品牌>柬埔寨知名開發公司指定雷邦仕為防水材料合作品牌</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/826d97dc.html alt=石油開發與開採基礎知識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/826d97dc.html title=石油開發與開採基礎知識>石油開發與開採基礎知識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3906fa80.html alt=JAVA應用程序開發之集合類 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/aa9e1fe1752a4a1886a691485e0e1373 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3906fa80.html title=JAVA應用程序開發之集合類>JAVA應用程序開發之集合類</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>