<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>自動生成文本摘要 | 极客快訊</title><meta property="og:title" content="自動生成文本摘要 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/1538400331459b76fe012b0"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/73b16eb.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/73b16eb.html><meta property="article:published_time" content="2020-10-29T20:50:39+08:00"><meta property="article:modified_time" content="2020-10-29T20:50:39+08:00"><meta name=Keywords content><meta name=description content="自動生成文本摘要"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/73b16eb.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>自動生成文本摘要</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538400331459b76fe012b0><p class=pgc-img-caption></p></div><p><strong>譯者 | Revolver</strong></p><p>導讀：這篇文章介紹的主要內容是關於自動生成文本摘要。我們要嘗試讓計算機為我們提取一篇文章的重要信息，並用一句話概括出來。</p><p>本文提及的主要內容有：</p><ul><li>什麼是文本摘要生成</li><li>如何從網頁上提取數據</li><li>·如何清洗數據</li><li>如何構建直方圖</li><li>·如何計算句子分數</li><li>如何提取分數最高的句子/摘要</li></ul><p>在繼續往下閱讀之前，我假設你已經瞭解下面幾個方面的基礎知識：</p><ul><li>正則表達式</li><li>自然語言處理</li><li>網頁爬蟲</li></ul><h1>1. <strong>什麼是文本摘要生成</strong></h1><p>生成文本摘要的過程其實就是<strong>總結文本文檔中心意思</strong>的過程，目的是創建包含原始文檔主要內容的摘要。</p><p>生成摘要的主要思想是<strong>找到包含整個數據集"信息"的數據子集</strong>。這種技術在當今行業內被廣泛使用。搜索引擎就是一個例子; 其他還包括文檔摘要生成，圖像收集和視頻處理。文檔摘要生成算法試圖通過查找信息量最大的句子來創建整個文檔的代表性摘要，而在圖像摘要中，計算機則試圖找到最具代表性的顯著的圖像。對於監控視頻，人們可能希望從平靜的環境影像中提取出重要事件。</p><p>自動摘要有兩種通用方法：提取和抽象。</p><h1>2. <strong>如何從網頁上提取數據？</strong></h1><p>第1步：導入庫/包</p><p><strong>Beautiful Soup(bs)</strong>是一個Python庫，用於從HTML和XML文件中提取數據。你可以把它和你最喜歡的解析器一起搭配使用，它們一起提供了一種符合我們習慣的導航，搜索和修改解析樹的方法。這通常可以節省程序員數小時或數天的工作量。</p><p><strong>Urllib</strong>是一個集合多個URL處理模塊的軟件包：</p><p><strong>urllib.request</strong> 用於打開url鏈接並讀取內容</p><p><strong>urllib.error</strong> 包含由urllib.request拋出的異常值</p><p><strong>urllib.parse</strong> 用於解析URL</p><p><strong>urllib.robotparser</strong>用於解析 robots.txt 文件</p><p>re模塊提供了類似於在Perl語言裡的正則表達式匹配操作功能。</p><p>nltk是一個幫助構建處理人類語言數據的Python程序的強大平臺。它為 50多種語料庫和詞法資源提供了易於使用的接口(如WordNet)，還提供了一套用於分類，分詞，詞幹提取，標註，解析和語義推理的文本處理工具庫。</p><p>heapq這個模塊提供了一個堆隊列算法的實現，也稱為優先隊列算法。</p><pre>import bs4 as bsimport urllib.requestimport reimport nltkimport heapq</pre><p>接下來檢查一下數據包中的stopwords包(停用詞)和punkt包是否更新到最新。</p><pre>nltk.download('stopwords')nltk.download('punkt')</pre><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903451c3ae51d950><p class=pgc-img-caption>圖1</p></div><p>第2步：提取數據</p><p>這裡選用了維基上的 Artificial Neural Network 這個頁面為例子來說明。你可以根據需要選擇其他任何文章。</p><pre>page = urllib.request.urlopen("https://en.wikipedia.org/wiki/Artificial_neural_network").read()soup = bs.BeautifulSoup(page,'lxml')print(page) #print the page</pre><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15383999035346a58135856><p class=pgc-img-caption>圖2</p></div><p>現在你可以看到我們提取出來的內容，但它看起來有點醜。我們使用BeautifulSoup來解析文檔, 並以漂亮的方式來呈現文本。我還使用了prettify函數來使html語法看起來更美觀。</p><pre>print(soup.prettify)</pre><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903625e46b6e81eb><p class=pgc-img-caption>圖3</p></div><p>注意：維基百科中的大多數文章都是在&lt;p>標籤下編寫的，但不同的網站可能採取不同的方式。例如，一些網站會把文字內容寫在&lt;div>標籤下。</p><pre>text = ""for paragraph in soup.find_all('p'):text += paragraph.textprint(text)</pre><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/15383999037156f164d21cf><p class=pgc-img-caption>圖4</p></div><h1>3. <strong>如何清洗數據</strong></h1><p>數據清洗指的是對數據集，數據表或數據庫中的所有數據，檢測並糾正(或刪除)損壞的或不準確的記錄的過程，也即識別數據中不完整，不正確，不準確或不相關的部分，然後替換，修改，或刪除這部分髒數據。</p><pre>text = re.sub(r'\[[0-9]*\]',' ',text)text = re.sub(r'\s+',' ',text)clean_text = text.lower()clean_text = re.sub(r'\W',' ',clean_text)clean_text = re.sub(r'\d',' ',clean_text)clean_text = re.sub(r'\s+',' ',clean_text)sentences = nltk.sent_tokenize(text)stop_words = nltk.corpus.stopwords.words('english')print(sentences)</pre><p>第1行：刪除文本中由類似[1]，[2]表示的所有引用(參見上面的輸出文本段)</p><p>第2行：用單個空格替換了所有額外的空格</p><p>第3行：轉換成小寫</p><p>第4,5,6行：移除所有額外的標點符號，數字，額外空格等。</p><p>第7行：使用sent_tokenize()函數將大段的文本分解為句子</p><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399903781027c356ef9><p class=pgc-img-caption>圖5</p></div><pre>stop_words #list</pre><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1538399904065071acf47e7><p class=pgc-img-caption>圖6</p></div><h1>4. <strong>如何構建直方圖</strong></h1><p>構建一個直方圖可以幫助你直觀地發現文章中比較特別的單詞。例如"Geoffrey Hinton is the god father of deep learning. And I love deep learning"這一句，需要計算每個不同的單詞出現在句子中的次數，例如"deep"和"learning"都出現兩次，其餘的單詞在一個句子中只出現一次。但在現實世界中，你有成千上萬條句子，要具體找出每個單詞出現多少次就需要構建直方圖來表現。</p><pre>word2count = {} #line 1for word in nltk.word_tokenize(clean_text): #line 2if word not in stop_words: #line 3if word not in word2count.keys():word2count[word]=1else:word2count[word]+=1for key in word2count.keys(): #line 4word2count[key]=word2count[key]/max(word2count.values())</pre><p>第1行：創建一個空字典</p><p>第2行：使用word_tokenize分詞clean _text分詞，對每個單詞循環</p><p>第3行：檢查單詞是否在stop_words中，然後再次檢查單詞是否在word2count的鍵集中，不在則把word2count [word]置為1，否則word2count [word] 加1。</p><p>第4行：計算加權直方圖(參見下面的輸出，你可以看到對每個單詞計算了權重而不是計數。 例如有 'artificial':0.3620689等)</p><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538399903171c16cf187fc><p class=pgc-img-caption>圖7</p></div><h1>5. <strong>如何計算句子分數</strong></h1><p>第1行：創建一個空字典</p><p>第2行：對sentences中每個sentence進行循環</p><p>第3行：將sentence轉換成小寫並分詞，對每個word循環</p><p>第4行：使用if檢查word2count.keys()中是否存在該單詞</p><p>第5行：這裡我指定計算句子長度小於30的那部分，你可以根據需要更改</p><p>第6行：再次使用if-else條件，判斷如果句子不存在於sentence2keys()中，則執行 sent2score [sentence] = word2count [word]，否則執行 sent2score [sentence] + = word2count [word]</p><pre># 計算句子分數sent2score = {}for sentence in sentences:for word in nltk.word_tokenize(sentence.lower()):if word in word2count.keys():if len(sentence.split(' '))&lt;30:if sentence not in sent2score.keys():sent2score[sentence]=word2count[word]else:sent2score[sentence]+=word2count[word]</pre><h1>6. <strong>查看句子得分</strong></h1><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1538399903284fbd90a651c><p class=pgc-img-caption>圖8</p></div><h1>7. <strong>如何提取分數最高的句子作為簡短摘要</strong></h1><p>使用heapq從文章中找到得分最高的七個句子。</p><pre>best_sentences = heapq.nlargest(7,sent2score,key=sent2score.get)for sentences in best_sentences:print(sentences,'\n')</pre><p>關於Artificial Neural Network這篇文章七條概括得最好的句子</p><div class=pgc-img><img alt=自動生成文本摘要 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1538399903387f9e69b778e><p class=pgc-img-caption>圖9</p></div><p>對深度學習感興趣，熱愛Tensorflow的小夥伴，歡迎關注我們的網站！http://www.panchuang.net 我們的公眾號：磐創AI。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>自動</a></li><li><a>文本</a></li><li><a>摘要</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/ad1f45e0.html alt="第 11 篇：自動生成文章摘要" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5a7e1be841ca450db7497bf826728088 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ad1f45e0.html title="第 11 篇：自動生成文章摘要">第 11 篇：自動生成文章摘要</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8fcf8e6.html alt=深度學習之文本摘要自動生成 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/de33e624639749bcab7ee814be3b56fc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8fcf8e6.html title=深度學習之文本摘要自動生成>深度學習之文本摘要自動生成</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/31adec60.html alt=方大九鋼檢測部推出生石灰自動取樣器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/31adec60.html title=方大九鋼檢測部推出生石灰自動取樣器>方大九鋼檢測部推出生石灰自動取樣器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/74f03106.html alt=方大九鋼：給石灰粉自動取樣器腔體洗“鹽酸浴”效果好 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/74f03106.html title=方大九鋼：給石灰粉自動取樣器腔體洗“鹽酸浴”效果好>方大九鋼：給石灰粉自動取樣器腔體洗“鹽酸浴”效果好</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/06708c4c.html alt=excel小技巧：自動求和，當新增數據時自動求和 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1523970520159b755ba89ba style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/06708c4c.html title=excel小技巧：自動求和，當新增數據時自動求和>excel小技巧：自動求和，當新增數據時自動求和</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f65108b5.html alt=37.3度以上自動報警！實時體溫監測，揭祕“抗疫神器”紅外熱像儀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4e8a4e07bff64e6db5dcef502221fa45 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f65108b5.html title=37.3度以上自動報警！實時體溫監測，揭祕“抗疫神器”紅外熱像儀>37.3度以上自動報警！實時體溫監測，揭祕“抗疫神器”紅外熱像儀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ede488a4.html alt=「乾貨」自動噴水滅火系統三大報警閥組原理探索 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/46846030db1d42069626e2365af33521 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ede488a4.html title=「乾貨」自動噴水滅火系統三大報警閥組原理探索>「乾貨」自動噴水滅火系統三大報警閥組原理探索</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/49a393b8.html alt=「注消每日考點」自動噴水滅火系統“報警閥組”的現場檢查要求 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/49a393b8.html title=「注消每日考點」自動噴水滅火系統“報警閥組”的現場檢查要求>「注消每日考點」自動噴水滅火系統“報警閥組”的現場檢查要求</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2699be3e.html alt=新版自動噴水滅火系統規範：第六章-報警閥組 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15251639042140ad0c55a7b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2699be3e.html title=新版自動噴水滅火系統規範：第六章-報警閥組>新版自動噴水滅火系統規範：第六章-報警閥組</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0634c992.html alt=消防自動噴淋糸統的溼式式報警閥組的工作原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2f728f8c921f4740983ffec87a508565 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0634c992.html title=消防自動噴淋糸統的溼式式報警閥組的工作原理>消防自動噴淋糸統的溼式式報警閥組的工作原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/830c83f4.html alt=溼式報警閥彙總，自動噴水滅火系統最重要的部件，消防必會知識！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/526e34ac258043fe92a9f2f078ea5a6c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/830c83f4.html title=溼式報警閥彙總，自動噴水滅火系統最重要的部件，消防必會知識！>溼式報警閥彙總，自動噴水滅火系統最重要的部件，消防必會知識！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c73c40a0.html alt=自動噴水滅火系統溼式報警閥組成及原理圖 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9ba360b558964895b7024e2057d4d331 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c73c40a0.html title=自動噴水滅火系統溼式報警閥組成及原理圖>自動噴水滅火系統溼式報警閥組成及原理圖</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8caf26ac.html alt=自動噴水滅火系統（8）報警閥組的設置 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/616c3e2a-0421-408e-b7b3-e74d6bcf420f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8caf26ac.html title=自動噴水滅火系統（8）報警閥組的設置>自動噴水滅火系統（8）報警閥組的設置</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a4446818.html alt=PLC自動控制系統的可靠性分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/d4269003-f30a-4f2d-8344-2d22662baa75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a4446818.html title=PLC自動控制系統的可靠性分析>PLC自動控制系統的可靠性分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f6e3ed1e.html alt=球閥工作密封自動退出的故障分析及改進 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5e8b000510040f13bd40 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f6e3ed1e.html title=球閥工作密封自動退出的故障分析及改進>球閥工作密封自動退出的故障分析及改進</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>