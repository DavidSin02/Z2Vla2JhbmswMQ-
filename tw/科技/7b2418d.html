<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>“黑客”深度學習之“公鑰基礎設施（PKI）詳解” | 极客快訊</title><meta property="og:title" content="“黑客”深度學習之“公鑰基礎設施（PKI）詳解” - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/516a1b9bdfa44d72891561d99ce80057"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b2418d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b2418d.html><meta property="article:published_time" content="2020-10-29T20:51:34+08:00"><meta property="article:modified_time" content="2020-10-29T20:51:34+08:00"><meta name=Keywords content><meta name=description content="“黑客”深度學習之“公鑰基礎設施（PKI）詳解”"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/7b2418d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>“黑客”深度學習之“公鑰基礎設施（PKI）詳解”</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>這些年隨著電子商務行業的迅速發展，頻繁的網絡交易行為每一秒都在發生，網絡交易過程面臨著竊聽、篡改、偽造等行為的威脅，交易安全無法得到保障，一旦受到攻擊，就很難辨別所收到的信息是否由某個確定實體發出的以及在信息的傳遞過程中是否被非法篡改過。而公鑰基礎設施PKI技術就是解決以上網絡安全威脅的主要方式之一。</p><p><strong>今天就以本篇文章詳細闡述一下PKI技術的原理、組成架構以及應用場景！</strong></p><p><strong>一、</strong> <strong>什麼是PKI？</strong></p><p><strong>官方定義：</strong>PKI是Public Key Infrastructure的首字母縮寫，翻譯過來就是公鑰基礎設施；PKI是一種遵循標準的利用公鑰加密技術為電子商務的開展提供一套安全基礎平臺的技術和規範。PKI技術是一種遵循既定標準的密鑰管理平臺，它的基礎是加密技術，核心是證書服務，支持集中自動的密鑰管理和密鑰分配，能夠為所有的網絡應用提供加密和數字簽名等密碼服務及所需要的密鑰和證書管理體系。</p><p><strong>通俗理解：</strong>PKI就是利用公開密鑰理論和技術建立提供安全服務的、具有通用性的基礎設施，是創建、頒發、管理、註銷公鑰證書所涉及的所有軟件、硬件集合體，PKI可以用來建立不同實體間的"信任"關係，它是目前網絡安全建設的基礎與核心。PKI的主要任務是在開放環境中為開放性業務提供基於非對稱密鑰密碼技術的一系列安全服務，包括身份證書和密鑰管理、機密性、完整性、身份認證和數字簽名等。</p><p>因此，用戶可利用PKI平臺提供的服務進行電子商務和電子政務應用。</p><p><strong>二、</strong> <strong>PKI技術原理與組成架構</strong></p><p>2.1 <strong>PKI技術要解決哪些問題</strong></p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/516a1b9bdfa44d72891561d99ce80057><p class=pgc-img-caption></p></div><p><strong>先了解什麼是密鑰？什麼是證書？</strong></p><p>密鑰在我之前寫的"密碼學原理"文章裡有提到過。</p><p><strong>密鑰通俗理解</strong>就是你想傳送文件和數據時，怕被別人截獲後看到，就在傳輸前用一種算法加上密，使別人截獲了也不容易得到明文，然後接受方得到密文後，解密出來就可以看到你傳給他的數據和文件了。密鑰的作用就是保密，算法是加密的方法。</p><p><strong>證書的通俗理解</strong>：要開車得先考駕照，駕照上面記有本人的照片、姓名、出生日期等個人信息，以及有效期、準駕車輛的類型等信息，並由公安局在上面蓋章。我們只要看到駕照，就可以知道公安局認定此人具有駕駛車輛的資格。</p><p>證書其實和駕照很相似，裡面記有姓名、組織、郵箱地址等個人信息，以及屬於此人的公鑰，並由認證機構( Certification Authority. Certifying Authority, CA )施加數字簽名。只要看到公鑰證書，我們就可以知道認證機構認定該公鑰的確屬於此人。公鑰證書也簡稱為證書( certificate)。</p><p><strong>2.2 PKI的組成</strong></p><p>PKI作為一組在分佈式計算系統中利用公鑰技術和X.509證書所提供的安全服務，企業或組織可利用相關產品建立安全域，並在其中發佈密鑰和證書。在安全域內，PKI管理加密密鑰和證書的發佈，並提供諸如密鑰管理（包括密鑰更新，密鑰恢復和密鑰委託等）、證書管理（包括證書產生和撤銷等）和策略管理等。PKI產品也允許一個組織通過證書級別或直接交叉認證等方式來同其他安全域建立信任關係。這些服務和信任關係不能侷限於獨立的網絡之內，而應建立在網絡之間和Internet之上，為電子商務和網絡通信提供安全保障，所以具有互操作性的結構化和標準化技術成為PKI的核心</p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a8afd1466c484407954ed86634a6e615><p class=pgc-img-caption></p></div><p>一個典型的PKI系統如上圖所示，其中包括<strong>PKI策略</strong>、<strong>軟硬件系統</strong>、<strong>證書機構CA</strong>、<strong>註冊機構RA</strong>、<strong>證書發佈系統</strong>等。</p><p><strong>1．PKI安全策略</strong>建立和定義了一個組織信息安全方面的指導方針，同時也定義了密碼系統使用的處理方法和原則。它包括一個組織怎樣處理密鑰和有價值的信息，根據風險的級別定義安全控制的級別。一般情況下，在PKI中有兩種類型的策略：<strong>一是證書策略</strong>，用於管理證書的使用，比如，可以確認某一CA是在Internet上的公有CA，還是某一企業內部的私有CA；<strong>另外一個就是CPS</strong>（Certificate Practice Statement）。一些由商業證書發放機構（CCA）或者可信的第三方操作的PKI系統需要CPS。這是一個包含如何在實踐中增強和支持安全策略的一些操作過程的詳細文檔。它包括CA是如何建立和運作的，證書是如何發行、接收和廢除的，密鑰是如何產生、註冊的，以及密鑰是如何存儲的，用戶是如何得到它的等等。</p><p><strong>2. 證書機構CA</strong>是PKI的信任基礎，它管理公鑰的整個生命週期，其作用包括：發放證書、規定證書的有效期和通過發佈證書廢除列表（CRL）確保必要時可以廢除證書。</p><p><strong>3. 註冊機構RA</strong>提供用戶和CA之間的一個接口，它獲取並認證用戶的身份，向CA提出證書請求。它主要完成收集用戶信息和確認用戶身份的功能。這裡指的用戶，是指將要向認證中心（即CA）申請數字證書的客戶，可以是個人，也可以是集團或團體、某政府機構等。註冊管理一般由一個獨立的註冊機構（即RA）來承擔。它接受用戶的註冊申請，審查用戶的申請資格，並決定是否同意CA給其簽發數字證書。註冊機構並不給用戶簽發證書，而只是對用戶進行資格審查。因此，RA可以設置在直接面對客戶的業務部門，如銀行的營業部、機構認識部門等。當然，對於一個規模較小的PKI應用系統來說，可把註冊管理的職能由認證中心CA來完成，而不設立獨立運行的RA。但這並不是取消了PKI的註冊功能，而只是將其作為CA的一項功能而已。PKI國際標準推薦由一個獨立的RA來完成註冊管理的任務，可以增強應用系統的安全。</p><p><strong>4. 證書發佈系統負責證書的發放</strong>，如可以通過用戶自己，或是通過目錄服務。目錄服務器可以是一個組織中現存的，也可以是PKI方案中提供的。</p><p>一個簡單的PKI系統包括證書機構CA、註冊機構RA和相應的PKI存儲庫。CA用於簽發並管理證書；RA可作為CA的一部分，也可以獨立，其功能包括個人身份審核、CRL管理、密鑰產生和密鑰對備份等；PKI存儲庫包括LDAP目錄服務器和普通數據庫，用於對用戶申請、證書、密鑰、CRL和日誌等信息進行存儲和管理，並提供一定的查詢功能。</p><p><strong>2.3 PKI體系的關鍵技術</strong></p><p><strong>1、CA框架模型</strong></p><p><strong>證書機構CA用於創建和發佈證書</strong>，它通常為一個稱為安全域（security domain）的有限群體發放證書。創建證書的時候，CA系統首先獲取用戶的請求信息，其中包括用戶公鑰（如果用戶端是個人使用或者測試用，則公鑰一般由用戶端產生，如電子郵件程序或瀏覽器等或者使用第三方開發的具有獨立CSP的智能終端如USBkey），CA將根據用戶的請求信息產生證書，並用自己的私鑰對證書進行簽名。其他用戶、應用程序或實體將使用CA的公鑰對證書進行驗證。如果一個CA系統是可信的，則驗證證書的用戶可以確信，他所驗證的證書中的公鑰屬於證書所代表的那個實體。</p><p>CA還負責維護和發佈證書廢除列表CRL（certificate revocation lists，又稱為證書黑名單）。當一個證書，特別是其中的公鑰因為其他原因無效時（不是因為到期），CRL提供了一種通知用戶和其他應用的中心管理方式。CA系統生成CRL以後，要麼是放到LDAP服務器中供用戶查詢或下載，要麼是放置在Web服務器的合適位置，以頁面超級連接的方式供用戶直接查詢或下載。</p><p><strong>一個典型的CA系統包括安全服務器、註冊機構RA、CA服務器、LDAP目錄服務器和數據庫服務器等。如下圖所示：</strong></p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/54a9ba4486a64d1c9860e80000b07d8a><p class=pgc-img-caption></p></div><p><strong>安全服務器</strong>：安全服務器面向普通用戶，用於提供證書申請、瀏覽、證書撤消列表以及證書下載等安全服務。安全服務器與用戶的的通信採取安全信道方式（如SSL的方式，不需要對用戶進行身份認證）。用戶首先得到安全服務器的證書（該證書由CA頒發），然後用戶與服務器之間的所有通信，包括用戶填寫的申請信息以及瀏覽器生成的公鑰均以安全服務器的密鑰進行加密傳輸，只有安全服務器利用自己的私鑰解密才能得到明文，這樣可以防止其他人通過竊聽得到明文。從而保證了證書申請和傳輸過程中的信息安全性。</p><p><strong>CA服務器</strong>：CA服務器使整個證書機構的核心，負責證書的簽發。CA首先產生自身的私鑰和公鑰（密鑰長度至少為1024位），然後生成數字證書，並且將數字證書傳輸給安全服務器。CA還負責為操作員、安全服務器以及註冊機構服務器生成數字證書。安全服務器的數字證書和私鑰也需要傳輸給安全服務器。CA服務器是整個結構中最為重要的部分，存有CA的私鑰以及發行證書的腳本文件，出於安全的考慮，應將CA服務器與其他服務器隔離，任何通信採用人工干預的方式，確保認證中心的安全。</p><p><strong>註冊機構RA</strong>：登記中心服務器面向登記中心操作員，在CA體系結構中起承上啟下的作用，一方面向CA轉發安全服務器傳輸過來的證書申請請求，另一方面向LDAP服務器和安全服務器轉發CA頒發的數字證書和證書撤消列表。</p><p>LDAP服務器：LDAP服務器提供目錄瀏覽服務，負責將註冊機構服務器傳輸過來的用戶信息以及數字證書加入到服務器上。這樣其他用戶通過訪問LDAP服務器就能夠得到其他用戶的數字證書。</p><p>數據庫服務器：數據庫服務器是認證機構中的核心部分，用於認證機構中數據（如密鑰和用戶信息等）、日誌合統計信息的存儲和管理。實際的的數據庫系統應採用多種措施，如磁盤陣列、雙機備份和多處理器等方式，以維護數據庫系統的安全性、穩定性、可伸縮性和高性能。</p><p><strong>2、密鑰管理</strong></p><p>密鑰管理也是PKI（主要指CA）中的一個核心功能，主要是指密鑰對的安全管理，包括密鑰產生、密鑰備份、密鑰恢復和密鑰更新等。</p><p>（1）密鑰產生 密鑰對的產生是證書申請過程中重要的一步，其中產生的私鑰由用戶保留，公鑰和其他信息則交於CA中心進行簽名，從而產生證書。根據證書類型和應用的不同，密鑰對的產生也有不同的形式和方法。對普通證書和測試證書，一般由瀏覽器或固定的終端應用來產生，這樣產生的密鑰強度較小，不適合應用於比較重要的安全網絡交易。而對於比較重要的證書，如商家證書和服務器證書等，密鑰對一般由專用應用程序或CA中心直接產生，這樣產生的密鑰強度大，適合於重要的應用場合。 另外，根據密鑰的應用不同，也可能會有不同的產生方式。比如簽名密鑰可能在客戶端或RA中心產生，而加密密鑰則需要在CA中心直接產生。</p><p>（2）密鑰備份和恢復 在一個PKI系統中，維護密鑰對的備份至關重要，如果沒有這種措施，當密鑰丟失後，將意味著加密數據的完全丟失，對於一些重要數據，這將是災難性的。所以，密鑰的備份和恢復也是PKI密鑰管理中的重要一環。 使用PKI的企業和組織必須恩能夠得到確認：即使密鑰丟失，受密要加密保護的重要信息也必須能夠恢復，並且不能讓一個獨立的個人完全控制最重要的主密鑰，否則將引起嚴重後果。 企業級的PKI產品至少應該支持用於加密的安全密鑰的存儲、備份和恢復。密鑰一般用口令進行保護，而口令丟失則是管理員最常見的安全疏漏之一。所以，PKI產品應該能夠備份密鑰，即使口令丟失，它也能夠讓用戶在一定條件下恢復該密鑰，並設置新的口令。 例如，在某些情況下用戶可能有多對密鑰，至少應該有兩個密鑰：一個用於加密，一個用於簽名。簽名密要不需要備份，因為用於驗證簽名的公鑰（或公鑰證書）廣泛發佈，即使簽名私鑰丟失，任何用於相應公要的人都可以對已簽名的文檔進行驗證。但PKI系統必須備份用於加密的密鑰對，並允許用戶進行恢復，否則，用於解密的私鑰丟失將意味著加密數據的完全不可恢復。 另外，使用PKI的企業也應該考慮所使用密鑰的生命週期，它包括密鑰和證書的有效時間，以及已撤銷密鑰和證書的維護時間等。</p><p>（3）密鑰更新 對每一個由CA頒發的證書都會有有效期，密鑰對生命週期的長短由簽發證書的CA中心來確定，各CA系統的證書有效期限有所不同，一般大約為2-3年。 當用戶的私鑰被洩漏或證書的有效期快到時，用戶應該更新私鑰。這時用戶可以廢除證書，產生新的密鑰對，申請新的證書。</p><p><strong>2.4 通過一個案例描述剖析PKI技術原理實現過程</strong></p><p><strong>案例描述如下：甲想將一份合同文件通過Internet發給遠在國外的乙，此合同文件對雙方非常重要，不能有絲毫差錯，而且此文件絕對不能被其他人得知其內容。如何才能實現這個合同的安全發送？</strong></p><p><strong>問題1：</strong>最自然的想法是，甲必須對文件加密才能保證不被其他人查看其內容，那麼，到底應該用什麼加密技術，才能使合同傳送既安全又快速呢？</p><p>可以採用一些成熟的對稱加密算法，如DES、3DES、RC5等對文件加密。對稱加密採用了對稱密碼編碼技術，它的特點是文件加密和解密使用相同的密鑰，即加密密鑰也可以用作解密密鑰，這種方法在密碼學中叫做對稱加密算法。</p><p><strong>問題2：</strong>如果黑客截獲此文件，是否用同一算法就可以解密此文件呢？</p><p>不可以，因為加密和解密均需要兩個組件：加密算法和對稱密鑰，加密算法需要一個對稱密鑰來解密，黑客並不知道此密鑰。</p><p><strong>問題3</strong>：既然黑客不知密鑰，那麼乙怎樣才能安全地得到其密鑰呢？</p><p>用電話通知，若電話被竊聽，通過Internet發送此密鑰給乙，可能被黑客截獲，怎麼辦？</p><p>方法是用非對稱密鑰算法加密對稱密鑰後進行傳送。與對稱加密算法不同，非對稱加密算法需要兩個密鑰：公開密鑰（Public Key）和私有密鑰（Private Key）。公開密鑰與私有密鑰是一對，如果公開密鑰對數據進行加密，只有用對應的私有密鑰才能解密；如果用私有密鑰對數據進行加密，只有用對應的公開密鑰才能解密。因為加密和解密使用的是兩個不同的密鑰，所以這種算法叫做非對稱加解密算法（公/私鑰可由專門軟件生成）。甲乙雙方各有一對公/私鑰，公鑰可在Internet上傳送，私鑰自己保存。這樣甲就可以用乙的公鑰加密問題1中提到的對稱加密算法中的對稱密鑰。即使黑客截獲到此密鑰，也會因為黑客不知乙的私鑰，而解不開對稱密鑰，因此解不開密文，只有乙才能解開密文。</p><p><strong>問題4</strong>：既然甲可以用乙的公鑰加密其對稱密文，為什麼不直接用乙的公鑰加密其文件呢？這樣不僅簡單，而且省去了用對稱加密算法加密文件的步驟？</p><p>不可以這麼做。因為非對稱密碼算法有兩個缺點：加密速度慢，比對稱加密算法慢10~100倍，因此只可用其加密小數據（如對稱密鑰），另外加密後會導致得到的密文變長。因此一般採用對稱加密算法加密文件，然後用非對稱算法加密對稱算法所用到的對稱密鑰。</p><p><strong>問題5：</strong>如果黑客截獲到密文，同樣也截獲到用公鑰加密的對稱密鑰，由於黑客無乙的私鑰，因此它解不開對稱密鑰，但如果他用對稱加密算法加密一份假文件，並用乙的公鑰加密一份假文件的對稱密鑰，併發給乙，乙會以為收到的是甲發送的文件，會用其私鑰解密假文件，並高興地閱讀其內容，但不知已經被替換，換句話說，乙並不知道這不是甲發給他的，怎麼辦？</p><p>答案是用數字簽名證明其身份。數字簽名是通過散列算法，如MD5、SHA-1等算法從大塊的數據中提取一個摘要。而從這個摘要中不能通過散列算法恢復出任何一點原文，即得到的摘要不會透露出任何最初明文的消息，但如果原信息受到任何改動，得到的摘要卻肯定會有所不同。因此甲可以對文件進行散列算法得到摘要，並用自己的私鑰加密，這樣即使黑客截獲也無用，黑客不會從摘要內獲得任何信息，但乙不一樣，他可用甲的公鑰解密，得到其摘要（如果公鑰能夠解開此摘要，說明此摘要肯定是甲發的，因為只有甲的公鑰才能解開用甲的私鑰加密的信息，而甲的私鑰只有甲自己知道），並對收到的文件（解密後的合同文件）也進行同樣的散列算法，通過比較其摘要是否一致，就可得知此文件是否被篡改過（因為若摘要相同，則肯定信息未被改動，這是散列算法的特點）。這樣不僅解決了證明發送人身份的問題，同時還解決了文件是否被篡改的問題。</p><p><strong>問題6</strong>：通過對稱加密算法加密其文件，再通過非對稱算法加密其對稱密鑰，又通過散列算法證明發送者身份和其信息的正確性，這樣是否就萬無一失了？</p><p>回答是否定的。問題在於乙並不能肯定他所用的所謂的甲的公鑰一定是甲的，解決辦法是用數字證書來綁定公鑰與公鑰所屬人。</p><p>數字證書是一個經證書授權中心數字簽名的包含公開密鑰擁有者信息以及公開密鑰的文件，是網絡通信中標識通信各方身份信息的一系列數據，它提供了一種在Internet上驗證身份的方式，其作用類似於司機的駕駛執照或日常中的身份證，人們可以在交往中用它來識別對方的身份。</p><p>最簡單的證書包含一個公開密鑰，名稱以及證書授權中心的數字簽名。一般情況下證書還包含有密鑰的有效時間、發證機關（證書授權中心）名稱、該證書的序列號等信息。它是由一個權威機構—CA機構，又稱為證書授權（Certificate Authority）中心發放的。CA機構作為電子商務交易中受信任的第三方，承擔公鑰體系中公鑰的合法性檢驗的責任。CA中心為每個使用公開密鑰的用戶發放一個數字證書，數字證書的作用是證明證書中列出的用戶合法擁有證書中列出的公開密鑰。CA機構的數字簽名使得攻擊者不能偽造和篡改證書，CA是PKI的核心，負責管理PKI結構下的所有用戶（包括各種應用程序）的證書，把用戶的公鑰和用戶的其他信息捆綁在一起，在網上驗證用戶的身份。</p><p>因為數字證書是公開的，就像公開的電話簿一樣，在實踐中，發送者（即甲）會將一份自己的數字證書的拷貝連同密文、摘要等放在一起發送給接收者（即乙），而乙則通過驗證證書上權威機構的簽名來檢查此證書的有效性（只需用那個可信的權威機構的公鑰來驗證該證書上的簽名就可以了），如果證書檢查一切正常，那麼就可以相信包含在該證書中的公鑰的確屬於列在證書中的那個人（即甲）。</p><p><strong>問題7</strong>：至此似乎很安全了。但仍存在安全漏洞，例如：甲雖將合同文件發給乙，但甲拒不承認在簽名所顯示的那一刻簽署過此文件（數字簽名就相當於書面合同的文字簽名），並將此過錯歸咎於電腦，進而不履行合同，怎麼辦？</p><p>解決辦法是採用可信的時鐘服務（由權威機構提供），即由可信的時間源和文件的簽名者對文件進行聯合簽名。在書面合同中，文件簽署的日期和簽名一樣均是十分重要的防止文件被偽造和篡改的關鍵性內容（例如合同中一般規定在文件簽署之日起生效）。在電子文件中，由於用戶桌面時間很容易改變（不準確或可人為改變），由該時間產生的時間戳不可信賴，因此需要一個第三方來提供時間戳服務（數字時間戳服務（DTS）是網上安全服務項目，由專門的機構提供）。此服務能提供電子文件發表時間的安全保護。</p><p>時間戳產生的過程為：用戶首先將需要加時間戳的文件用哈希編碼加密形成摘要。然後將該摘要發送到DTS，DTS在加入了收到文件摘要的日期和時間信息後再對該文件加密（數字簽名），然後送回用戶。因此時間戳（time-stamp）是一個經加密後形成的憑證文檔，它包含三個部分：需加時間戳的文件的摘要，DTS收到文件的日期和時間，DTS的數字簽名。由於可信的時間源和文件的簽名者對文件進行了聯合簽名，進而阻止了文檔簽名的那一方（即甲方）在時間上欺詐的可能，因此具有不可否認性。</p><p><strong>問題8</strong>：有了數字證書將公/私鑰和身份綁定，又有權威機構提供時鐘服務使其具有不可否認性，是不是就萬無一失了？不，仍然有問題。乙還是不能證明對方就是甲，因為完全有可能是別人盜用了甲的私鑰（如別人趁甲不在使用甲的電腦），然後以甲的身份來和乙傳送信息，這怎麼解決呢？</p><p>解決辦法是使用強口令、認證令牌、智能卡和生物特徵等技術對使用私鑰的用戶進行認證，以確定其是私鑰的合法使用者。</p><p>解決這個問題之前我們先來看看目前實現的基於PKI的認證通常是如何工作的。以瀏覽器或者其他登記申請證書的應用程序為例說明，在第一次生成密鑰的時候會創建一個密鑰存儲，瀏覽器用戶會被提示輸入一個口令，該口令將被用於構造保護該密鑰存儲所需的加密密鑰。如過密鑰存儲只有脆弱的口令保護或根本沒有口令保護，那麼任何一個能夠訪問該電腦瀏覽器的用戶都可以訪問那些私鑰和證書。在這種場景下，又怎麼可能信任用PKI創建的身份呢？正因為如此，一個強有力的PKI系統必須建立在對私鑰擁有者進行強認證的基礎之上，現在主要的認證技術有：強口令、認證令牌、智能卡和生物特徵（如指紋和眼膜等認證）。</p><p>以認證令牌舉例：假設用戶的私鑰被保存在後臺服務器的加密容器裡，要訪問私鑰，用戶必須先使用認證令牌認證（如用戶輸入賬戶名、令牌上顯示的通行碼和PIN等），如果認證成功，該用戶的加密容器就下載到用戶系統並解密。</p><p><strong>通過以上問題的解決，就基本滿足了安全發送文件的需求。下面總結一下這個過程，對甲而言整個發送過程如下：</strong></p><p>1. 創建對稱密鑰（相應軟件生成，並且是一次性的），用其加密合同，並用乙的公鑰打包對稱密鑰。</p><p>2. 創建數字簽名，對合同進行散列算法（如MD5算法）併產生原始摘要，甲用自己的私鑰加密該摘要（公/私鑰既可以自己創建也可由CA提供）。</p><p>3. 最後甲將加密後的合同、打包後的密鑰、加密後的摘要，以及甲的數字證書（由權威機構CA簽發）一起發給乙。</p><p><strong>而乙接收加密文件後，需完成以下動作：</strong></p><p>1. 接收後，用乙的私鑰解密得到的對稱密鑰，並用對稱密鑰解開加密的合同，得到合同明文。</p><p>2. 通過甲的數字證書獲得甲的公鑰，並用其解開摘要（稱作摘要1）。</p><p>3. 對解密後的合同使用和發送者同樣的散列算法來創建摘要（稱作摘要2）。</p><p>4. 比較摘要1和摘要2，若相同，則表示信息未被篡改，且來自於甲。</p><p>甲乙傳送信息過程看似並不複雜，但實際上它由許多基本成分組成，如：對稱/非對稱密鑰密碼技術、數字證書、數字簽名、證書發放機構（CA）、公開密鑰的安全策略等，這其中最重要、最複雜的是證書發放機構（CA）的構建。</p><p><strong>三、</strong> <strong>PKI的主要應用場景</strong></p><p>PKI提供的安全服務恰好可以滿足電子商務、電子政務、網上銀行、網上證券等金融業交易的安全需求，是確保這些活動順利進行必備的安全措施，沒有這些安全服務，電子商務、電子政務、網上銀行、網上證券等都無法正常運作。</p><p><strong>1、電子商務應用</strong></p><p>電子商務的參與方一般包括買方、賣方、銀行和作為中介的電子交易市場。買方通過自己的瀏覽器上網，登錄到電子交易市場的Web服務器並尋找賣方。當買方登錄服務器時，互相之間需要驗證對方的證書以確認其身份，這被稱為雙向認證。</p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/33185b2a6488486fa8229912cf03198c><p class=pgc-img-caption></p></div><p>在雙方身份被互相確認以後，建立起安全通道，並進行討價還價，之後向商場提交訂單。訂單裡有兩種信息:一部分是訂貨信息，包括商品名稱和價格；另一部分是提交銀行的支付信息，包括金額和支付賬號。買方對這兩種信息進行"雙重數字簽名"，分別用商場和銀行的證書公鑰加密上述信息。當商場收到這些交易信息後，留下訂貨單信息，而將支付信息轉發給銀行。商場只能用自己專有的私鑰解開訂貨單信息並驗證簽名。同理，銀行只能用自己的私鑰解開加密的支付信息、驗證簽名並進行劃賬。銀行在完成劃賬以後，通知起中介作用的電子交易市場、物流中心和買方，並進行商品配送。整個交易過程都是在PKI所提供的安全服務之下進行，實現了安全、可靠、保密和不可否認性。</p><p><strong>2、電子政務</strong></p><p>電子政務包含的主要內容有：網上信息發佈、辦公自動化、網上辦公、信息資源共享等。按應用模式也可分為G2C、G2B、G2G，PKI在其中的應用主要是解決身份認證、數據完整性、數據保密性和不可抵賴性等問題。</p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1ad7d75d383244c381bb8a8c26764ad0><p class=pgc-img-caption></p></div><p>例如，一個保密文件發給誰或者哪一級公務員有權查閱某個保密文件等，這些都需要進行身份認證，與身份認證相關的還有訪問控制，即權限控制。認證通過證書進行，而訪問控制通過屬性證書或訪問控制列表（ACL）完成。有些文件在網絡傳輸中要加密以保證數據的保密性;有些文件在網上傳輸時要求不能被丟失和篡改;特別是一些保密文件的收發必須要有數字簽名等。只有PKI提供的安全服務才能滿足電子政務中的這些安全需求。</p><p><strong>3、網上銀行</strong></p><p>網上銀行是指銀行藉助於互聯網技術向客戶提供信息服務和金融交易服務。銀行通過互聯網向客戶提供信息查詢、對賬、網上支付、資金劃轉、信貸業務、投資理財等金融服務。網上銀行的應用模式有B2C個人業務和B2B對公業務兩種。</p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/98be09d1935e4d7285bf046763c05334><p class=pgc-img-caption></p></div><p>網上銀行的交易方式是點對點的，即客戶對銀行。客戶瀏覽器端裝有客戶證書，銀行服務器端裝有服務器證書。當客戶上網訪問銀行服務器時，銀行端首先要驗證客戶端證書，檢查客戶的真實身份，確認是否為銀行的真實客戶；同時服務器還要到CA的目錄服務器，通過LDAP協議查詢該客戶證書的有效期和是否進入"黑名單"；認證通過後，客戶端還要驗證銀行服務器端的證書。雙向認證通過以後，建立起安全通道，客戶端提交交易信息，經過客戶的數字簽名並加密後傳送到銀行服務器，由銀行後臺信息系統進行劃賬，並將結果進行數字簽名返回給客戶端。這樣就做到了支付信息的保密和完整以及交易雙方的不可否認性。</p><p><strong>4、網上證券</strong></p><p>網上證券廣義地講是證券業的電子商務，它包括網上證券信息服務、網上股票交易和網上銀證轉賬等。</p><div class=pgc-img><img alt=“黑客”深度學習之“公鑰基礎設施（PKI）詳解” onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5a74c0452c6c4c528a703abb5d0ab462><p class=pgc-img-caption></p></div><p>一般來說，在網上證券應用中，股民為客戶端，裝有個人證書；券商服務器端裝有Web證書。在線交易時，券商服務器只需要認證股民證書，驗證是否為合法股民，是單向認證過程，認證通過後，建立起安全通道。股民在網上的交易提交同樣要進行數字簽名，網上信息要加密傳輸；券商服務器收到交易請求並解密，進行資金劃賬並做數字簽名，將結果返回給客戶端。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>學習</a></li><li><a>公鑰</a></li><li><a>基礎</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/19dad067.html alt="php基礎教程 第三步 學習字符串及相關函數" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2de059299d42438197662d23644f2244 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/19dad067.html title="php基礎教程 第三步 學習字符串及相關函數">php基礎教程 第三步 學習字符串及相關函數</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fd9d0da5.html alt="php基礎教程 第二步 通俗易懂的學習變量、常量與數據類型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e316d9706340489ba14da6d5572064a4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fd9d0da5.html title="php基礎教程 第二步 通俗易懂的學習變量、常量與數據類型">php基礎教程 第二步 通俗易懂的學習變量、常量與數據類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d692f78.html alt=基礎通俗講解集成學習算法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/36100dd3a1b940f28c135f9165ff526a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d692f78.html title=基礎通俗講解集成學習算法>基礎通俗講解集成學習算法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0255cf8a.html alt=「學習」家裝板材基礎知識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2cecefb259974601932099fe4527c54c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0255cf8a.html title=「學習」家裝板材基礎知識>「學習」家裝板材基礎知識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f6c47495.html alt=Python基礎學習筆記（十二）文件和目錄 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/500b368c28be42739bf6ff5a5c022567 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f6c47495.html title=Python基礎學習筆記（十二）文件和目錄>Python基礎學習筆記（十二）文件和目錄</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/bb72106c.html alt=MATLAB基礎學習之矩陣變換 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/6e64edca-706a-4e30-82f7-60a8b3e9d167 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/bb72106c.html title=MATLAB基礎學習之矩陣變換>MATLAB基礎學習之矩陣變換</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a91a0d6c.html alt=文言文基礎知識學習：虛詞用法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a91a0d6c.html title=文言文基礎知識學習：虛詞用法>文言文基礎知識學習：虛詞用法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/41558fc3.html alt=繪畫基礎學習：瞭解了這些人體比例關係，讓你速寫不在困難！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1536811984532635decdda7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/41558fc3.html title=繪畫基礎學習：瞭解了這些人體比例關係，讓你速寫不在困難！>繪畫基礎學習：瞭解了這些人體比例關係，讓你速寫不在困難！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/58aaf76b.html alt="Flink 基礎學習(七) 窗口 Window" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a5ba05cd74894e939e1a8fb461677d41 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/58aaf76b.html title="Flink 基礎學習(七) 窗口 Window">Flink 基礎學習(七) 窗口 Window</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b78b3729.html alt=0基礎學習C語言第五章：輸入與輸出 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cc585bf3c5cb46c4b21788d65c61d0e5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b78b3729.html title=0基礎學習C語言第五章：輸入與輸出>0基礎學習C語言第五章：輸入與輸出</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b97d10e3.html alt=C語言基礎學習基本數據類型-變量的輸出與輸入 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/69aecd7fa7264d59ba61a9ff18f40725 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b97d10e3.html title=C語言基礎學習基本數據類型-變量的輸出與輸入>C語言基礎學習基本數據類型-變量的輸出與輸入</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cca53f5.html alt=NLP學習（一）—基礎篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bbd1c98e4e784228b81dcf6c82b7a500 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cca53f5.html title=NLP學習（一）—基礎篇>NLP學習（一）—基礎篇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1f15630.html alt=機器學習基礎——帶你實戰樸素貝葉斯模型文本分類 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/2422efca60844260be30c96b636f86dc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1f15630.html title=機器學習基礎——帶你實戰樸素貝葉斯模型文本分類>機器學習基礎——帶你實戰樸素貝葉斯模型文本分類</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2184d01.html alt=加工基礎學習：注塑工藝參數設定 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/0bfc057b-938e-4767-a0c5-12e382f1e5f5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2184d01.html title=加工基礎學習：注塑工藝參數設定>加工基礎學習：注塑工藝參數設定</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ffe12b1.html alt=造價基礎學習筆記——勞動定額 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0ee9c002ae7542c1a79f28cdef2f745d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ffe12b1.html title=造價基礎學習筆記——勞動定額>造價基礎學習筆記——勞動定額</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>