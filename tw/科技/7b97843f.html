<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools | æå®¢å¿«è¨Š</title><meta property="og:title" content="35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/ceac9629132b415586fd3872913607af"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7b97843f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7b97843f.html><meta property="article:published_time" content="2020-11-14T20:59:54+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:54+08:00"><meta name=Keywords content><meta name=description content="35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/7b97843f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p>æ—¥å¸¸ç”Ÿæ´»æ˜¯ç”±è¦å‰‡é©…å‹•çš„ã€‚ç´…ç‡ˆåœç¶ ç‡ˆè¡Œï¼Œé€™æ˜¯æˆ‘å€‘çš„äº¤é€šè¦å‰‡ï¼›æˆ‘å€‘ç«™è‘—å¾€ä¸Šè·³ï¼Œæœ€çµ‚é‚„æ˜¯è¦è½ä¸‹ä¾†ï¼Œé€™æ˜¯åœ°çƒçš„å¼•åŠ›è¦å‰‡ã€‚è¦å‰‡åœ¨ç”Ÿæ´»ä¸­ç„¡è™•ä¸åœ¨ã€‚è»Ÿä»¶é–‹ç™¼ä¸­æˆ‘å€‘ä¹Ÿéœ€è¦è¦å‰‡ï¼Œæ»¿è¶³ä»€éº¼è¦å‰‡æ‡‰è©²é€²å…¥ä»€éº¼åˆ†æ”¯ã€‚å¦‚æœåšéé¢¨æ§ç³»çµ±ï¼Œå°±çŸ¥é“é¢¨æ§ç³»çµ±è£¡å­˜åœ¨éå¸¸å¤šçš„è¦å‰‡ï¼ˆæ¯”å¦‚ï¼šage &lt; 16 || age > 50 -> REJECT ï¼‰ã€‚æœ€ä¾¿æ·çš„å¯¦ç¾å°±æ˜¯ç”¨ if-else ä¾†å¯«ï¼Œä½†æ˜¯éš¨è‘—è¦å‰‡çš„å¢åŠ ä»¥åŠéœ€æ±‚çš„è®Šå‹•ï¼Œä»£ç¢¼å°‡è®Šå¾—è¶Šä¾†è¶Šé›£é–±è®€å’Œç†è§£ï¼Œå¦‚æœå†å»ä¿®æ”¹é€™äº›ä»£ç¢¼ï¼Œç„¶å¾Œæ¸¬è©¦ä¸å¤ å……åˆ†çš„è©±ï¼Œå°‡ç”¢ç”Ÿåš´é‡çš„ç”Ÿç”¢äº‹æ•…ã€‚é€™æ™‚å€™å°±è¦å¼•å…¥Droolsç­‰è¦å‰‡å¼•æ“äº†ã€‚Droolså°±æ˜¯ç‚ºäº†è§£æ±ºæ¥­å‹™ä»£ç¢¼å’Œæ¥­å‹™è¦å‰‡åˆ†é›¢çš„å¼•æ“ã€‚</p><p>è¦ä½¿ç”¨Droolsè¦å‰‡å¼•æ“ï¼Œéœ€è¦å…ˆå®‰è£å®‰è£JBoss Drools Supportæ’ä»¶ï¼Œé€™è£¡å°±ä¸å¤šèªªæ€éº¼å®‰è£å®‰è£JBoss Drools Supportæ’ä»¶ã€‚ä¸‹è¼‰åœ°å€å¦‚ä¸‹ï¼š</p><p>https://download.jboss.org/drools/release/7.3.0.Final/droolsjbpm-tools-distribution-7.3.0.Final.zip</p><p>1ã€ æ–°å»ºé …ç›®sc-activiti-droolsï¼Œå°æ‡‰çš„pom.xmlæ–‡ä»¶å¦‚ä¸‹</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.sc&lt;/groupId&gt; &lt;artifactId&gt;sc-activiti-drools&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;sc-activiti-drools&lt;/name&gt; &lt;!-- FIXME change it to the project's website --&gt; &lt;url&gt;http://www.example.com&lt;/url&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Finchley.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-engine&lt;/artifactId&gt; &lt;version&gt;6.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;6.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;drools-core&lt;/artifactId&gt; &lt;version&gt;7.0.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;drools-compiler&lt;/artifactId&gt; &lt;version&gt;7.0.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.drools&lt;/groupId&gt; &lt;artifactId&gt;knowledge-api&lt;/artifactId&gt; &lt;version&gt;6.5.0.Final&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven  defaults (may be moved to parent pom) --&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt; &lt;/plugin&gt; &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.7.0&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.20.1&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt; &lt;version&gt;2.8.2&lt;/version&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt; &lt;/project&gt;</pre><p>2ã€æ–°å»ºspringé…ç½®æ–‡ä»¶application.yml</p><pre>spring: datasource: driver-class-name: com.mysql.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/sc?characterEncoding=utf8&amp;useSSL=true username: root password: root activiti: check-process-definitions: false #è‡ªå‹•éƒ¨ç½²é©—è­‰è¨­ç½®:true-é–‹å•Ÿï¼ˆé»˜èªï¼‰ã€false-é—œé–‰ jpa: properties: hibernate: hbm2ddl: auto: update show-sql: true server: port: 8081 context-path: / session: timeout: 10 tomcat: uri-encoding: UTF-8</pre><p>3ã€æ–°å»ºactivitiå°æ‡‰çš„é…ç½®æ–‡ä»¶activiti.cfg.xml</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource"&gt; &lt;property name="driverClass" value="com.mysql.jdbc.Driver" /&gt; &lt;property name="url" value="jdbc:mysql://localhost:3306/act?useUnicode=true&amp;characterEncoding=UTF-8" /&gt; &lt;property name="username" value="root" /&gt; &lt;property name="password" value="root" /&gt; &lt;/bean&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;property name="transactionManager" ref="transactionManager" /&gt; &lt;property name="databaseSchemaUpdate" value="true" /&gt; &lt;property name="customPostDeployers"&gt; &lt;list&gt;  &lt;bean class="org.activiti.engine.impl.rules.RulesDeployer" /&gt; &lt;/list&gt;  &lt;/property&gt; &lt;!--  &lt;property name="deploymentResources" value="classpath*:/bpmn/*.bpmn" /&gt;  --&gt; &lt;/bean&gt; &lt;bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean"&gt; &lt;property name="processEngineConfiguration" ref="processEngineConfiguration" /&gt; &lt;/bean&gt; &lt;bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService" /&gt; &lt;bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService" /&gt; &lt;bean id="taskService" factory-bean="processEngine" factory-method="getTaskService" /&gt; &lt;bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService" /&gt; &lt;bean id="managementService" factory-bean="processEngine" factory-method="getManagementService" /&gt; &lt;/beans&gt;</pre><p>4ã€æ–°å»ºè«‹å‡æµç¨‹å°æ‡‰çš„bpmnæ–‡ä»¶å¦‚ä¸‹</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test"&gt; &lt;process id="leave" name="è«‹å‡å¯©æ‰¹" isExecutable="true"&gt; &lt;startEvent id="startevent1" name="Start"&gt;&lt;/startEvent&gt; &lt;endEvent id="endevent1" name="End"&gt;&lt;/endEvent&gt; &lt;userTask id="usertask1" name="éƒ¨é–€ç¶“ç†å¯©æ‰¹"&gt;&lt;/userTask&gt; &lt;businessRuleTask id="businessruletask1" name="å¤©æ•¸åˆ¤æ–·" activiti:ruleVariablesInput="${leave}" activiti:rules="leave1,leave2" activiti:resultVariable="reason"&gt;&lt;/businessRuleTask&gt; &lt;serviceTask id="servicetask1" name="ç²å–è®Šé‡" activiti:class="sc.ad.service.DroolsService"&gt;&lt;/serviceTask&gt; &lt;userTask id="usertask2" name="HRå¯©æ‰¹"&gt;&lt;/userTask&gt; &lt;sequenceFlow id="flow1" sourceRef="startevent1" targetRef="usertask1"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow2" sourceRef="usertask1" targetRef="businessruletask1"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow3" sourceRef="businessruletask1" targetRef="servicetask1"&gt;&lt;/sequenceFlow&gt; &lt;userTask id="usertask3" name="ç¸½ç¶“ç†å¯©æ‰¹"&gt;&lt;/userTask&gt; &lt;sequenceFlow id="flow4" sourceRef="servicetask1" targetRef="usertask3"&gt; &lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[${reason[0].total &gt;= 10}]]&gt;&lt;/conditionExpression&gt; &lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow5" sourceRef="servicetask1" targetRef="usertask2"&gt; &lt;conditionExpression xsi:type="tFormalExpression"&gt;&lt;![CDATA[${reason[0].total &lt; 10}]]&gt;&lt;/conditionExpression&gt; &lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow6" sourceRef="usertask3" targetRef="usertask2"&gt;&lt;/sequenceFlow&gt; &lt;sequenceFlow id="flow7" sourceRef="usertask2" targetRef="endevent1"&gt;&lt;/sequenceFlow&gt; &lt;/process&gt; &lt;/definitions&gt;</pre><p>bpmnæ–‡ä»¶å°æ‡‰çš„åœ–å¦‚ä¸‹</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/ceac9629132b415586fd3872913607af><p class=pgc-img-caption></p></div><p>5ã€æ–°å»ºè¦å‰‡æ–‡ä»¶leave.drl</p><pre>package sc.ad; import sc.ad.model.Leave; rule "leave1" when u : Leave(day &lt; 3); then u.setTotal(u.getDay() + 2); end rule "leave2" when u : Leave(day &gt;= 3); then u.setTotal(u.getDay() + 5); end</pre><p>å°æ‡‰çš„åœ–å¦‚ä¸‹</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/996cf62b503a49fdb304c0c9b9c6aca5><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>6ã€æ–°å»ºspringbootå•Ÿå‹•é¡æ–‡ä»¶</p><pre>package sc.ad; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.context.annotation.ImportResource; @SpringBootApplication @ImportResource("activiti.cfg.xml") public class ActivitiDroolsApp { public static void main(String[] args) { SpringApplication.run(ActivitiDroolsApp.class, args); } }</pre><p>7ã€æ–°å»ºä¸€å€‹controllerï¼Œç”¨ä¾†ç™¼èµ·è«‹å‡è«‹æ±‚</p><pre>package sc.ad.controller; import java.util.HashMap; import java.util.List; import java.util.Map; import org.activiti.engine.RepositoryService; import org.activiti.engine.RuntimeService; import org.activiti.engine.TaskService; import org.activiti.engine.repository.Deployment; import org.activiti.engine.repository.DeploymentBuilder; import org.activiti.engine.repository.ProcessDefinition; import org.activiti.engine.runtime.ProcessInstance; import org.activiti.engine.task.Task; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import sc.ad.model.Leave; @RestController public class ADController { @Autowired private RepositoryService repositoryService; @Autowired private RuntimeService runtimeService; @Autowired private TaskService taskService; // @RequestMapping("/ad") // public void ad() { // // // æ ¹æ“šbpmnæ–‡ä»¶éƒ¨ç½²æµç¨‹ // Deployment deployment = repositoryService.createDeployment() // .addClasspathResource("holiday.bpmn").deploy(); // // ç²å–æµç¨‹å®šç¾© // ProcessDefinition processDefinition = repositoryService // .createProcessDefinitionQuery() // .deploymentId(deployment.getId()).singleResult(); // // å•Ÿå‹•æµç¨‹å®šç¾©ï¼Œè¿”å›æµç¨‹å¯¦ä¾‹ // ProcessInstance pi = runtimeService // .startProcessInstanceById(processDefinition.getId()); // String processId = pi.getId(); // System.out.println("æµç¨‹å‰µå»ºæˆåŠŸï¼Œç•¶å‰æµç¨‹å¯¦ä¾‹IDï¼š" + processId); // // Task task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("ç¬¬ä¸€æ¬¡åŸ·è¡Œå‰ï¼Œä»»å‹™åç¨±ï¼š" + task.getName()); // taskService.complete(task.getId()); // // task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("ç¬¬äºŒæ¬¡åŸ·è¡Œå‰ï¼Œä»»å‹™åç¨±ï¼š" + task.getName()); // taskService.complete(task.getId()); // // task = taskService.createTaskQuery().processInstanceId(processId) // .singleResult(); // System.out.println("taskç‚ºnullï¼Œä»»å‹™åŸ·è¡Œå®Œç•¢ï¼š" + task); // } @RequestMapping("/drl") public void drl() { /** * æ³¨æ„é€™è£¡ï¼šå¿…é ˆè¦æŠŠdrlæ–‡ä»¶ä¸€èµ·deploy */ DeploymentBuilder deploy = repositoryService.createDeployment(); deploy.addClasspathResource("leave.bpmn").addClasspathResource("leave.drl"); deploy.deploy(); ProcessInstance pi = runtimeService.startProcessInstanceByKey("leave"); Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();  vars.put("leave", new Leave("ç™½å±•å ‚", 12)); /** * ç•¶å‰ä»»å‹™ */ List&lt;Task&gt; tasks = taskService.createTaskQuery().processInstanceId(pi.getId()).list(); for(Task task : tasks) { System.out.println(task.getId() + " , " + task.getName()); taskService.complete(task.getId(), vars); } /** * ä¸‹ä¸€æ­¥ä»»å‹™ */ tasks = taskService.createTaskQuery().processInstanceId(pi.getId()).list(); for(Task task : tasks) { System.out.println(task.getId() + " , " + task.getName()); } } }</pre><p>8ã€å•Ÿå‹•ä¸¦é©—è­‰è¦å‰‡æ˜¯å¦ç”Ÿæ•ˆ</p><p>å¾æ—¥èªŒä¸­çœ‹å•Ÿå‹•æˆåŠŸ</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/84c0a86f42e34364b901d5f9dd05724a><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>è¨ªå•http://127.0.0.1:8081/drlå¾Œï¼Œå†æ¬¡æŸ¥çœ‹æ—¥èªŒï¼š</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/acb4f7ef9244458e99b0d110f403448b><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>æŠŠä¿®æ”¹controllerçš„å¦‚ä¸‹ä»£ç¢¼</p><p>vars.put("leave", new Leave("ç™½å±•å ‚", 12));</p><p>æ”¹æˆ</p><p>vars.put("leave", new Leave("å–¬å³°", 2));</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c8e226cff0d3492c87f858e2c788596e><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p>å¯ä»¥çœ‹åˆ°è¦å‰‡æ–‡ä»¶çš„è¦å‰‡å·²ç¶“ç”Ÿæ•ˆï¼š</p><div class=pgc-img><img alt=35ã€Activitiæ•´åˆè¦å‰‡å¼•æ“Drools onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/500c4921d01e47e091d65a6a5bb0d930><p class=pgc-img-caption></p></div></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>35</a></li><li><a>Activiti</a></li><li><a>è¦å‰‡</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/5b8eb959.html alt=å°å¿ƒéå¸¸ç¾è§€çš„ä¸è¦å‰‡å‡¸å‹è¨­è¨ˆç©ºé–“ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/f270e446-9481-449b-8681-76c0a1d78e5e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5b8eb959.html title=å°å¿ƒéå¸¸ç¾è§€çš„ä¸è¦å‰‡å‡¸å‹è¨­è¨ˆç©ºé–“>å°å¿ƒéå¸¸ç¾è§€çš„ä¸è¦å‰‡å‡¸å‹è¨­è¨ˆç©ºé–“</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6224d4fa.html alt=åŸºé‡‘â€œè²·å…¥è³£å‡ºâ€çš„è¦å‰‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c3cda6f978b94e0db2f01247f5f6e3b1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6224d4fa.html title=åŸºé‡‘â€œè²·å…¥è³£å‡ºâ€çš„è¦å‰‡>åŸºé‡‘â€œè²·å…¥è³£å‡ºâ€çš„è¦å‰‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e8faf4b9.html alt=å¾è²¨å¹£åŸºé‡‘é–‹å§‹(4)è²¨å¹£åŸºé‡‘çš„äº¤æ˜“è¦å‰‡ï¼ˆè²·å…¥ã€è³£å‡ºè¦å‰‡ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/abd02d25fd604c78b9c7dd8705cf0d5c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e8faf4b9.html title=å¾è²¨å¹£åŸºé‡‘é–‹å§‹(4)è²¨å¹£åŸºé‡‘çš„äº¤æ˜“è¦å‰‡ï¼ˆè²·å…¥ã€è³£å‡ºè¦å‰‡ï¼‰>å¾è²¨å¹£åŸºé‡‘é–‹å§‹(4)è²¨å¹£åŸºé‡‘çš„äº¤æ˜“è¦å‰‡ï¼ˆè²·å…¥ã€è³£å‡ºè¦å‰‡ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b6deee44.html alt=35ï½110KVè®Šé›»æ‰€è¨­è¨ˆè¦ç¯„ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b6deee44.html title=35ï½110KVè®Šé›»æ‰€è¨­è¨ˆè¦ç¯„>35ï½110KVè®Šé›»æ‰€è¨­è¨ˆè¦ç¯„</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bd584a6e.html alt=å·¥ç¨‹é€ åƒ¹é ç®—è¦å‰‡æŠ€å·§ï¼Œé€ åƒ¹å“¡å¿…å‚™åŸºç¤ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f2d5ebc5ff4743708693e819368d63eb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bd584a6e.html title=å·¥ç¨‹é€ åƒ¹é ç®—è¦å‰‡æŠ€å·§ï¼Œé€ åƒ¹å“¡å¿…å‚™åŸºç¤>å·¥ç¨‹é€ åƒ¹é ç®—è¦å‰‡æŠ€å·§ï¼Œé€ åƒ¹å“¡å¿…å‚™åŸºç¤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/63db3e57.html alt="ç²¾ç›Šç”Ÿç”¢ 35ï¼šè³ªé‡æª¢é©—" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cb9b4d907d6240228394d78d220c4239 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/63db3e57.html title="ç²¾ç›Šç”Ÿç”¢ 35ï¼šè³ªé‡æª¢é©—">ç²¾ç›Šç”Ÿç”¢ 35ï¼šè³ªé‡æª¢é©—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/26ed2d4c.html alt=1:35æ¿°æŸ´æšå·ç››é”ç¤¦å±±è‡ªå¸è»Šä»¿çœŸæ¨¡å‹é‘‘è³ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4c603e56f7084b35a3a5d79814a7b113 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/26ed2d4c.html title=1:35æ¿°æŸ´æšå·ç››é”ç¤¦å±±è‡ªå¸è»Šä»¿çœŸæ¨¡å‹é‘‘è³>1:35æ¿°æŸ´æšå·ç››é”ç¤¦å±±è‡ªå¸è»Šä»¿çœŸæ¨¡å‹é‘‘è³</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/96000ad2.html alt=è·å ´è¦å‰‡ï¼šå¥åº·ç™¼å±•çš„ä¸‰å¿…èˆ‡å…©ä¸ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/8f5de6c6-6cb6-4c45-bc40-429e6d8401be style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/96000ad2.html title=è·å ´è¦å‰‡ï¼šå¥åº·ç™¼å±•çš„ä¸‰å¿…èˆ‡å…©ä¸>è·å ´è¦å‰‡ï¼šå¥åº·ç™¼å±•çš„ä¸‰å¿…èˆ‡å…©ä¸</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4e591557.html alt=ä»€éº¼æ˜¯è¦å‰‡ï¼Ÿä»€éº¼æ˜¯åº«ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0e18bf22744f4ccea55c41d4aae6b97f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4e591557.html title=ä»€éº¼æ˜¯è¦å‰‡ï¼Ÿä»€éº¼æ˜¯åº«ï¼Ÿ>ä»€éº¼æ˜¯è¦å‰‡ï¼Ÿä»€éº¼æ˜¯åº«ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0d32622c.html alt=â€œå¤©ä¸‹ç¬¬ä¸€ç˜‹â€è¬å»ºå…‰ï¼š35å¹´å¾’æ­¥æ‹‰è»Šèµ°30è¬å…¬é‡Œï¼Œçµ‚ç—…äº¡ä»–é„‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/24ef50f42bf145738af0d4396878d088 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0d32622c.html title=â€œå¤©ä¸‹ç¬¬ä¸€ç˜‹â€è¬å»ºå…‰ï¼š35å¹´å¾’æ­¥æ‹‰è»Šèµ°30è¬å…¬é‡Œï¼Œçµ‚ç—…äº¡ä»–é„‰>â€œå¤©ä¸‹ç¬¬ä¸€ç˜‹â€è¬å»ºå…‰ï¼š35å¹´å¾’æ­¥æ‹‰è»Šèµ°30è¬å…¬é‡Œï¼Œçµ‚ç—…äº¡ä»–é„‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b9402a09.html alt="é€™éƒ¨35å¹´å‰çš„Walkmanç£å¸¶æ©Ÿï¼Œå¦‚ä»Šå¯æ›ä¸€è‡ºiPhone XRï¼" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/99936721716b467aaa7ab4cbe903f4b5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b9402a09.html title="é€™éƒ¨35å¹´å‰çš„Walkmanç£å¸¶æ©Ÿï¼Œå¦‚ä»Šå¯æ›ä¸€è‡ºiPhone XRï¼">é€™éƒ¨35å¹´å‰çš„Walkmanç£å¸¶æ©Ÿï¼Œå¦‚ä»Šå¯æ›ä¸€è‡ºiPhone XRï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ef6d4a3a.html alt=35æ­²ç™½ç™¾ä½•ä¸€é ­æ²é«®é¡¯æˆç†Ÿï¼Œå³æ‰‹ç„¡åæŒ‡é‡‘æˆ’æŒ‡å¼•äººæ³¨æ„ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e48ccbead9824eb2a551bbfd2dff1cba style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ef6d4a3a.html title=35æ­²ç™½ç™¾ä½•ä¸€é ­æ²é«®é¡¯æˆç†Ÿï¼Œå³æ‰‹ç„¡åæŒ‡é‡‘æˆ’æŒ‡å¼•äººæ³¨æ„>35æ­²ç™½ç™¾ä½•ä¸€é ­æ²é«®é¡¯æˆç†Ÿï¼Œå³æ‰‹ç„¡åæŒ‡é‡‘æˆ’æŒ‡å¼•äººæ³¨æ„</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8b6c8564.html alt=35å¹´ç­ä¸»ä»»ï¼šæ­å§†å®šå¾‹ç¶“å…¸ç·´ç¿’é¡Œï¼ˆ80é“ï¼‰ï¼Œå­©å­åƒé€ï¼Œ2å¹´ç©©å±…ç¬¬1 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5d51643c6056442881e13c782a0a4c1a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8b6c8564.html title=35å¹´ç­ä¸»ä»»ï¼šæ­å§†å®šå¾‹ç¶“å…¸ç·´ç¿’é¡Œï¼ˆ80é“ï¼‰ï¼Œå­©å­åƒé€ï¼Œ2å¹´ç©©å±…ç¬¬1>35å¹´ç­ä¸»ä»»ï¼šæ­å§†å®šå¾‹ç¶“å…¸ç·´ç¿’é¡Œï¼ˆ80é“ï¼‰ï¼Œå­©å­åƒé€ï¼Œ2å¹´ç©©å±…ç¬¬1</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7ad0cc7a.html alt=æ–°ä¸‰æ¿è½‰æ¿è¦å‰‡ä¾†äº†ï¼ç²¾é¸å±¤ä¼æ¥­å¯èµ´ç§‘å‰µæ¿ã€å‰µæ¥­æ¿ä¸Šå¸‚ï¼Œæ›ç‰Œæ»¿ä¸€å¹´å¯ç”³è«‹è½‰æ¿ï¼ä¾†çœ‹äº”å¤§ç„¦é» class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7ad0cc7a.html title=æ–°ä¸‰æ¿è½‰æ¿è¦å‰‡ä¾†äº†ï¼ç²¾é¸å±¤ä¼æ¥­å¯èµ´ç§‘å‰µæ¿ã€å‰µæ¥­æ¿ä¸Šå¸‚ï¼Œæ›ç‰Œæ»¿ä¸€å¹´å¯ç”³è«‹è½‰æ¿ï¼ä¾†çœ‹äº”å¤§ç„¦é»>æ–°ä¸‰æ¿è½‰æ¿è¦å‰‡ä¾†äº†ï¼ç²¾é¸å±¤ä¼æ¥­å¯èµ´ç§‘å‰µæ¿ã€å‰µæ¥­æ¿ä¸Šå¸‚ï¼Œæ›ç‰Œæ»¿ä¸€å¹´å¯ç”³è«‹è½‰æ¿ï¼ä¾†çœ‹äº”å¤§ç„¦é»</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9cbc8308.html alt=æ’åˆ—35ç¬¬20253æœŸ(ä¸­09å¯¶)ï¼Œ252æœŸä¸­24ä½66 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/75a9ef643d5c4be09460d249c902ce77 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9cbc8308.html title=æ’åˆ—35ç¬¬20253æœŸ(ä¸­09å¯¶)ï¼Œ252æœŸä¸­24ä½66>æ’åˆ—35ç¬¬20253æœŸ(ä¸­09å¯¶)ï¼Œ252æœŸä¸­24ä½66</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>