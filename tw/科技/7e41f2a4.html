<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>從EventLoop到宏任務與微任務 | 极客快訊</title><meta property="og:title" content="從EventLoop到宏任務與微任務 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/79a6de2f384a4574920524c200fb5949"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/7e41f2a4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/7e41f2a4.html><meta property="article:published_time" content="2020-11-14T21:05:39+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:39+08:00"><meta name=Keywords content><meta name=description content="從EventLoop到宏任務與微任務"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/7e41f2a4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>從EventLoop到宏任務與微任務</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><strong>1、javascript是單線程的</strong></p><p>javascript是單線程的，意思是javascript在同一時間內只能做一件事情。</p><p>為什麼是單線程的？</p><p>因為js的主要用途是用於用戶交互和操作DOM，如果是多線程的，會引起復雜的同步問題， 比如一個線程操作某個節點的內容，另一個線程同一時間卻在刪除這個節點，這時候到底該執行那一條命令呢？到底以哪一個線程為準呢。</p><p><strong>2、同步和異步</strong></p><p>同步是阻塞模式，後一個任務必須等待前一個任務執行完後才能繼續執行。</p><p>異步是非阻塞模式，當遇到異步任務無需等待其執行完，繼續向下執行，而異步任務會進入協程執行，執行完後將回調任務加入任務隊列，等到主線程執行完成後，一條一條的讀取任務隊列中的任務。</p><blockquote><p>協程是什麼？</p></blockquote><p><strong>3、任務（消息）隊列</strong></p><p>同步任務都在主線程上執行並且會產生一個執行棧</p><p>js的主線程外有一個任務隊列，當異步任務執行完後，會將其"回掉函數"push進這個任務隊列，當主線程執行完成後，會一個一個的讀取任務隊列中的任務並推入主線程的執行棧開始執行。</p><p><strong>4、EventLoop</strong></p><p>js主線程從"任務隊列"當中讀取事件推入執行棧，這個過程不斷重複的，所以這個過程被稱作"事件循環"</p><div class=pgc-img><img alt=從EventLoop到宏任務與微任務 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/79a6de2f384a4574920524c200fb5949><p class=pgc-img-caption></p></div><p><strong>5、setTimeout(fn, 0)</strong></p><p>setTimeout(fn,0)意思是將回掉函數立即加入任務隊列 ，在第一個eventloop執行完後也就是在主線程將同步任務執行完後，第二個eventloop開始時執行，記住是第二個eventloop才執行。不精確，因為同步任務有可能很耗時。</p><p><strong>6、微任務和宏任務</strong></p><p>微任務：</p><pre>process.nextTick()Promise.thenObject.observe() （已經廢除）MutaionObserver</pre><p>宏任務</p><pre>setTimeoutsetIntervalsetImmediateIOUI渲染</pre><p>在一個eventLoop中，執行完宏任務後就會清空微任務隊列，所以微任務在本次eventLoop的執行棧的尾部執行的， 而異步任務會被推入任務隊列在下一個eventLoop中執行， 所以微任務先於異步任務執行的。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>任務</a></li><li><a>EventLoop</a></li><li><a>到宏</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/f97d341c.html alt=使用易語言控制檯製作（任務管理器）系統進程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153036512103769cec6250b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f97d341c.html title=使用易語言控制檯製作（任務管理器）系統進程>使用易語言控制檯製作（任務管理器）系統進程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9215af22.html alt=“十一”超7成白領在旅途中工作，職場上該如何有效指派任務？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/27492ce76b7d45a1a1b935e56c695b22 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9215af22.html title=“十一”超7成白領在旅途中工作，職場上該如何有效指派任務？>“十一”超7成白領在旅途中工作，職場上該如何有效指派任務？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f1d32f3f.html alt=javascript中的宏任務與微任務 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/664e98c4-c156-458f-a172-5502c246e157 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f1d32f3f.html title=javascript中的宏任務與微任務>javascript中的宏任務與微任務</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/51cec254.html alt=百度多個短視頻嵌套了“收徒做任務賺現金”模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R8Ld2A5AsKC7Zw style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/51cec254.html title=百度多個短視頻嵌套了“收徒做任務賺現金”模式>百度多個短視頻嵌套了“收徒做任務賺現金”模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7262ab0d.html alt=除了支付寶，百度也正在做活動，每天登陸做任務都可以領取 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ee2949da8f7342678c8f6678b8d88cd2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7262ab0d.html title=除了支付寶，百度也正在做活動，每天登陸做任務都可以領取>除了支付寶，百度也正在做活動，每天登陸做任務都可以領取</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0701c85a.html alt=JavaScript的宏任務和微任務 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/73a5badff31b42da8f8c62a9761be636 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0701c85a.html title=JavaScript的宏任務和微任務>JavaScript的宏任務和微任務</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f8b58ea4.html alt=百度做任務領紅包 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7ec3ba96286444dda8e0729ff9d15751 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f8b58ea4.html title=百度做任務領紅包>百度做任務領紅包</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/51a25bf9.html alt=這位機器房工人的祕密抗日任務，遠比電視劇精彩得多...... class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cf67a0aeb3df42c8a458ae0c5fe8eb37 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/51a25bf9.html title=這位機器房工人的祕密抗日任務，遠比電視劇精彩得多......>這位機器房工人的祕密抗日任務，遠比電視劇精彩得多......</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cc962891.html alt=任務管理器沒有標題欄怎麼辦 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/db8bab8d29bd437283ca980922933c7c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cc962891.html title=任務管理器沒有標題欄怎麼辦>任務管理器沒有標題欄怎麼辦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/83be900a.html alt="緊貼形勢任務 培育戰鬥精神" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/83be900a.html title="緊貼形勢任務 培育戰鬥精神">緊貼形勢任務 培育戰鬥精神</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9b837730.html alt="原神奇貨百貨璃月港北邊七天神像位置 立本第六天任務位置" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15c29fc4dca3455e9c95af4f9eb48dd7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9b837730.html title="原神奇貨百貨璃月港北邊七天神像位置 立本第六天任務位置">原神奇貨百貨璃月港北邊七天神像位置 立本第六天任務位置</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/2682fe3f.html alt="《怪物獵人世界》冥赤龍任務完成攻略 冥赤龍野團打法配裝推薦" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Rl5ZVFTHbvPE1G style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/2682fe3f.html title="《怪物獵人世界》冥赤龍任務完成攻略 冥赤龍野團打法配裝推薦">《怪物獵人世界》冥赤龍任務完成攻略 冥赤龍野團打法配裝推薦</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/686bee7d.html alt=王者榮耀：好友不上線，無法完成守護星任務？天美開放個人任務 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/324e8e2469af4aa5bd2b0859b4332f08 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/686bee7d.html title=王者榮耀：好友不上線，無法完成守護星任務？天美開放個人任務>王者榮耀：好友不上線，無法完成守護星任務？天美開放個人任務</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/49a3e4ca.html alt=夢幻西遊：神器任務的獎勵這麼差嗎？連經驗都要跟別人擲骰子搶 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6469f21a29014cba9026dfbf95a41ba7 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/49a3e4ca.html title=夢幻西遊：神器任務的獎勵這麼差嗎？連經驗都要跟別人擲骰子搶>夢幻西遊：神器任務的獎勵這麼差嗎？連經驗都要跟別人擲骰子搶</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/ac26d036.html alt="劍俠世界2手遊 成就任務攻略 隱藏成就任務位置座標" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ba212bbb8abc49cbb5d9ff46e02f11d1 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/ac26d036.html title="劍俠世界2手遊 成就任務攻略 隱藏成就任務位置座標">劍俠世界2手遊 成就任務攻略 隱藏成就任務位置座標</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>