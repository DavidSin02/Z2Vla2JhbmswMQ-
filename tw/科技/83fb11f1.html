<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐 | 极客快訊</title><meta property="og:title" content="Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/3a662c625a654e68b46de5b4b3524230"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/83fb11f1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/83fb11f1.html><meta property="article:published_time" content="2020-11-14T20:59:37+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:37+08:00"><meta name=Keywords content><meta name=description content="Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/83fb11f1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>日前，雲棲大會新一代CDN的技術突破與應用實踐專場中，bilibili資深運維工程師李寧進行了《DCDN在遊戲應用加速中的實踐》主題分享，從bilibili遊戲應用CDN的效果和成本入手，深入淺出地分享DCDN全站加速在遊戲加速場景中的應用。</p><h1 class=pgc-h-arrow-right>bilibili的業務部署架構及CDN的應用</h1><p style=text-align:start>bilibili一直以來是作為中國Z世代高度聚集的文化社區而被大家熟知，已經成為了國內二次元遊戲的主要分發渠道和發行方。在公司不斷髮展過程中，CDN扮演著不可或缺的角色。</p><p style=text-align:start>簡單的七層應用遊戲的部署架構如下圖所示，業務的後端以中心化部署的方式完全隱藏在公共雲的網絡內，出向網絡經過NAT轉發，業務的入口只通過公網負載均衡進行暴露，靜態資源存放在對象存儲上，然後從用戶動靜態的請求全部經過CDN進行轉發，這樣的方式不僅能進行常規靜態資源的緩存加速，也能幫助隱藏源站，並進行相應的DDoS防護。</p><div class=pgc-img><img alt=Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/3a662c625a654e68b46de5b4b3524230><p class=pgc-img-caption></p></div><p style=text-align:start>李寧介紹到：bilibili對CDN的使用大概分三個階段，初期業務規模比較小，主要通過基於雲內專線自建代理的方式實現區域加速；隨著業務規模增加，運維管理問題和安全問題暴露， bilibili基於不同的緩存策略，在商業靜態CDN上去實現動靜態請求的分發，雖然解決了自建帶來的管理和安全問題，但是也帶來了新問題，比如靜態CDN中間源大量回源過載、靜態CDN鏈路過長，多級代理導致響應耗時增加等等；直到近兩年，市場上出現了專門針對動態請求加速的產品，在原有CDN功能豐富度提升的基礎上，通過智能路由帶來了更好的加速質量提升。</p><h1 class=pgc-h-arrow-right>遊戲應用運維工作對CDN的核心訴求</h1><p style=text-align:start>在遊戲運維的日常工作裡經常會遇到以下場景：靜態突發流量報備不及時，單一廠商無法全部承接，導致業務進退兩難，業務和運維揹著炸藥包上線；遊戲熱更中大量的刷新預熱需求，帶給運維帶來繁重的工作；熱點遊戲海外用戶訪問質量如何保障；國內小運營商環境中各種劫持與弱網傳輸；遊戲業務突發式增長對彈性伸縮、快速交付的挑戰等等。</p><p><strong>簡單總結，業務對運維的需求就是：</strong></p><p style=text-align:start>a) 熱點資源、導致流量突發運維需要做好保障<br>b) 保障業務發展過程中快速交付、並且保障易用性<br>c) 業務的基礎網絡鏈路實現跨境優化<br>d) 要能覆蓋國內的小運營商<br>e) 需要有政企關係，具備推進運營商快速處理問題的能力</p><p style=text-align:start>基於上述需求綜合考慮，bilibili選擇使用公共雲CDN，而非自建的形式。其業務對雲CDN的使用運維有以下訴求：</p><p style=text-align:start>a) 業務接入的時候控制檯要快、簡單，接口要完善、可編程，功能豐富、不支持的功能也要支持定製化<br>b) 產品需要支持自動調度、方便的配置和內容管理，底層要對跨境網絡進行優化<br>c) 針對海量的CDN數據有簡化分析的方案，以便數據管理運營<br>d) 要有豐富的報警指標、在業務報障的時候輔助運維進行決策</p><div class=pgc-img><img alt=Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/694d36543f7a4f35a6054dd518a64908><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right>bilibili選擇使用阿里雲全站加速進行業務分發</h1><p style=text-align:start>為了解決以上問題，bilibili使用阿里雲全站加速產品支持遊戲應用內容的分發加速。在接入之後，質量有明顯的提升，平響耗時降低了32%，首包的耗時降低了18.6%。同時，當異常發生的時候，CDN告警的收斂聚合，可以與源站監控報警進行比對，用於快速的排除故障。</p><div class=pgc-img><img alt=Bilibili資深運維工程師：DCDN在遊戲應用加速中實踐 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1c1bf99b35584cd6aa87bc024acdcd34><p class=pgc-img-caption></p></div><p style=text-align:start>全站加速是阿里雲自主研發的融合了動態加速和靜態加速技術的CDN產品，解決了頁面動靜態資源混雜、跨運營商、網絡不穩定、單線源站、突發流量、網絡擁塞等諸多因素導致的響應慢、丟包、服務不穩定的問題，提升全站性能和用戶體驗。對於源站的適配，全站加速產品無需對服務器資源進行調整，會智能的區分動態和靜態內容並分別加速，這也是目前比較適合遊戲應用的加速方案。</p><p style=text-align:start>全站加速可以提供傳輸加速、穩定均衡、HTTPS、基礎防護和管控靈活五大價值。</p><p style=text-align:start><strong>傳輸加速：</strong>一站式靜態、動態資源分離，靜態資源可以基於遍佈全球的邊緣節點緩存進行加速，動態資源利用智能路由、傳輸協議優化、壓縮傳輸、鏈路複用等技術實現回源加速；<br><strong>穩定均衡：</strong>通過全網節點的負載均衡，以及主備源站、有序回源、源站健康檢查等多重策略，確定高併發情況下的業務穩定運行以及加速效果平穩。<br><strong>HTTPS：</strong>國內運營商環境複雜，網站被劫持，站點內容遭篡改，僅使用HTTP協議傳輸可能會有用戶動態內容洩露風險，需要尋求更安全高效的網絡鏈路和內容分發途徑，那麼阿里雲支持全鏈路HTTPS安全加速，提供多種證書格式，支持keyless方案，滿足客戶對於安全訪問的不同場景需求。<br><strong>基礎防護：</strong>在DCDN之上逐漸集成雲安全能力，打造邊緣安全能力。在更接近攻擊源產生的位置，通過覆蓋全球各地的DCDN邊緣節點進行防劫持、防篡改、防DDoS攻擊，減輕源站壓力。<br><strong>管控靈活：</strong>基於緩存多源優化，可以控制每個回源量，從而能夠對節省源站的帶寬，以此保護源站，有序回源這一塊，當活動突發的時候，DCDN可以通過有序回源的策略來明確哪些請求優先返還源站，哪些可以通過隊列的方式來控制源站的回源量，從而能達到穩定均衡的一個效果。</p><h1 class=pgc-h-arrow-right>bilibili實踐經驗</h1><p style=text-align:start>針對使用CDN的效率以及成本幾大問題，bilibili具備以下實踐經驗：</p><p style=text-align:start><strong>第一，在交付效率上</strong>，bilibili通過gitops加基礎設施及代碼實現了一套資源編排，CDN也包含其中，研發通過選擇CDN的配置模板（比如CDN多線策略，緩存配置模板）生成資源堆棧，再結合流程審批實現分鐘級別的資源交付，在交付過程中我們力求讓使用者只做選擇題，少做問答題，減少反覆溝通的成本；當然平臺也集成了很多的小工具，比如最高頻的刷新預熱操作，我們將不同雲平臺的需求收斂到統一的界面，提供給研發自助進行操作；還有ip歸屬查詢這類小工具，儘量實現研發自助，以減少溝通提升人效。</p><p style=text-align:start><strong>第二，針對成本的問題</strong>，強調可計價，可度量；在CDN成本優化方面，首先要先知道錢花到了哪裡，通過雲計費api拿到實時數據，進行簡單地同比環比，對成本突發進行預警，然後人工干預及時止損；第二是花一樣的錢做更多的事，通過業務數據壓縮以及開啟雲廠商的智能壓縮功能進行技術優化，同時，提升靜態緩存命中率，降低對象存儲回源；第三是做一樣的事情花更少的錢，就需要更優的計費策略和更優的核算策略。</p><h1 class=pgc-h-arrow-right>對未來遊戲CDN的思考</h1><p style=text-align:start>李寧表示：我理解的運維工作的主要目標之一就是可控，CDN可控就是實現智能調度，未來會圍繞著數據治理進行一些嘗試：</p><p style=text-align:start>a) 通過第三方撥測、客戶端數據上報、業務全鏈路監測，收集到完善的業務數據<br>b) 在此基礎上進行多維度的分析，比如異常情況下，進行多維度的數據關聯聚合，減少多個運維監控組件之間切換排查<br>c) 最終結合少量的人工輔助決策，去實現智能調度</p><p style=text-align:start><br></p><p><strong>本文為阿里雲原創內容，未經允許不得轉載。</strong></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Bilibili</a></li><li><a>資深</a></li><li><a>運維</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/1ac9c635.html alt=資深操盤手的交易心得：牢記以下短線賣出技巧，從未虧損！借鑑 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/a278f226-82d3-4373-9cd2-63a3e0c1ca27 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1ac9c635.html title=資深操盤手的交易心得：牢記以下短線賣出技巧，從未虧損！借鑑>資深操盤手的交易心得：牢記以下短線賣出技巧，從未虧損！借鑑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/479c1326.html alt=資深總工總結，知名施工企業最新版鋼筋機械連接技術規程培訓內容 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/7c449f3ab1ff41998df64cf4d8e8c543 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/479c1326.html title=資深總工總結，知名施工企業最新版鋼筋機械連接技術規程培訓內容>資深總工總結，知名施工企業最新版鋼筋機械連接技術規程培訓內容</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7c342cf5.html alt=一位資深項目經理總結的十條職場經驗 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4d9b82a03a934beebb74f58faaa32b0a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7c342cf5.html title=一位資深項目經理總結的十條職場經驗>一位資深項目經理總結的十條職場經驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8c1cf905.html alt=資深調音師分享行業經驗：專業壓限器使用技巧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dbdd8ed6e0e348139727b97461908bb2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8c1cf905.html title=資深調音師分享行業經驗：專業壓限器使用技巧>資深調音師分享行業經驗：專業壓限器使用技巧</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/eaad46d9.html alt=做了技術，別不知道運維工作到底是做什麼的？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1d32085c69b24be089a7ab915584c90c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/eaad46d9.html title=做了技術，別不知道運維工作到底是做什麼的？>做了技術，別不知道運維工作到底是做什麼的？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0e08e2b3.html alt="國網安徽檢修公司蚌埠運維分部黨支部：主題黨日出實效 責任擔當幹精彩" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/S3HYy9AAIgYfJq style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0e08e2b3.html title="國網安徽檢修公司蚌埠運維分部黨支部：主題黨日出實效 責任擔當幹精彩">國網安徽檢修公司蚌埠運維分部黨支部：主題黨日出實效 責任擔當幹精彩</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7e08514c.html alt=國網湖北檢修鄂西北運維分部：孤島堅守38天，讓他們變成了全能戰士 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b5fd04edd5064f9ea782c13c87352e2f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7e08514c.html title=國網湖北檢修鄂西北運維分部：孤島堅守38天，讓他們變成了全能戰士>國網湖北檢修鄂西北運維分部：孤島堅守38天，讓他們變成了全能戰士</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/596af5ae.html alt=大唐吉林電力檢修運維新增二期熱網及其附屬設備維護輔助招標公告 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/596af5ae.html title=大唐吉林電力檢修運維新增二期熱網及其附屬設備維護輔助招標公告>大唐吉林電力檢修運維新增二期熱網及其附屬設備維護輔助招標公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/190ee7c6.html alt=大唐吉林電力檢修運維有限公司機組檢修前後試驗輔助服務招標公告 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/190ee7c6.html title=大唐吉林電力檢修運維有限公司機組檢修前後試驗輔助服務招標公告>大唐吉林電力檢修運維有限公司機組檢修前後試驗輔助服務招標公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b8ab92f1.html alt=運維工作到底都幹嘛？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bd5fe403147146b0a603984680a60ebc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b8ab92f1.html title=運維工作到底都幹嘛？>運維工作到底都幹嘛？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a5c56bd4.html alt=風電特別篇：聰敏的運維“會說話” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/SFASkq92xJvTJ7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a5c56bd4.html title=風電特別篇：聰敏的運維“會說話”>風電特別篇：聰敏的運維“會說話”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc7ee0f0.html alt=資深項目經理通過切身經驗告訴你：測試用例是必備的嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/42d0b1743a9b429686077bc11b946abd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc7ee0f0.html title=資深項目經理通過切身經驗告訴你：測試用例是必備的嗎？>資深項目經理通過切身經驗告訴你：測試用例是必備的嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cf368517.html alt="西班牙資深概念設計師Arturo Serrano，一組槍械設計" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15336175041488b0081132b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cf368517.html title="西班牙資深概念設計師Arturo Serrano，一組槍械設計">西班牙資深概念設計師Arturo Serrano，一組槍械設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fc52bfeb.html alt=網絡運維：各類網線和光纖線的有效傳輸距離 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a29c54c75b604b6888d40fd5b3ba660e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fc52bfeb.html title=網絡運維：各類網線和光纖線的有效傳輸距離>網絡運維：各類網線和光纖線的有效傳輸距離</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/c740ee52.html alt="山泉、密林、負氧離子 國慶期間大批資深玩家吊羅山“醉氧”" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RdvOdO687bpxiD style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/c740ee52.html title="山泉、密林、負氧離子 國慶期間大批資深玩家吊羅山“醉氧”">山泉、密林、負氧離子 國慶期間大批資深玩家吊羅山“醉氧”</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>