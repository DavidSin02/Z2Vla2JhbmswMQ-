<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº† | æå®¢å¿«è¨Š</title><meta property="og:title" content="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº† - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e66a7bcfded64b34b43ebc1565b3e557"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/852c87e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/852c87e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/852c87e.html><meta property="article:published_time" content="2020-10-29T20:59:17+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:17+08:00"><meta name=Keywords content><meta name=description content="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/852c87e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p><strong>æœ¬æ–‡å°è®€ï¼š</strong></p><ul><li><strong>æ¥­å‹™éœ€æ±‚å ´æ™¯ä»‹ç´¹</strong></li><li><strong>æŠ€è¡“è¨­è¨ˆæ–¹æ¡ˆæ€è€ƒ</strong></li><li><strong>Future è¨­è¨ˆæ¨¡å¼å¯¦æˆ°</strong></li><li><strong>CompletableFuture æ¨¡å¼å¯¦æˆ°</strong></li><li><strong>CompletableFuture ç”Ÿç”¢å»ºè­°</strong></li><li><strong>CompletableFuture æ€§èƒ½æ¸¬è©¦</strong></li><li><strong>CompletableFuture ä½¿ç”¨æ“´å±•</strong></li></ul><hr><p><strong>1ã€æ¥­å‹™éœ€æ±‚å ´æ™¯ä»‹ç´¹</strong></p><hr><p>ä¸è®Šçš„æ±è¥¿å°±æ˜¯ä¸€ç›´åœ¨è®ŠåŒ–ä¸­ã€‚</p><p>æƒ³å¿…ï¼Œå¤§å®¶åœ¨é–’æš‡æ™‚åˆ»ï¼Œæœƒç¶“å¸¸çœ‹è¦–é »ï¼Œç¶“å¸¸ç”¨çš„å¹¾å€‹ APPï¼Œæ¯”å¦‚å„ªé…·ã€æ„›å¥‡è—ã€é¨°è¨Šç­‰ã€‚</p><p>é€™äº›è¦–é » APP ä¸åƒ…åƒ…å¯ä»¥åœ¨æ‰‹æ©Ÿä¸Šæ’­æ”¾ï¼Œé‚„èƒ½å¤ æ”¯æŒåœ¨é›»è¦–ä¸Šæ’­æ”¾ã€‚</p><p>åœ¨é›»è¦–çµ‚ç«¯ä¸Šæ’­æ”¾çš„ APP æ˜¯ç¨ç«‹ç™¼ä½ˆçš„ç‰ˆæœ¬ï¼Œè·Ÿæ‰‹æ©Ÿç«¯çš„ APP æ˜¯ä¸ä¸€æ¨£çš„ã€‚</p><p>ç•¶æˆ‘å€‘çœ‹ä¸€éƒ¨é›»å½±æ™‚ï¼Œé»æ“Šé€²å…¥æŸä¸€éƒ¨é›»å½±ï¼Œå°±é€²å…¥åˆ°äº†å°ˆè¼¯è©³æƒ…é é é¢ï¼Œæ­¤æ™‚ï¼Œæ’­æ”¾å™¨æœƒè‡ªå‹•æ’­æ”¾è¦–é »ã€‚ç”¨æˆ¶åœ¨æ‰‹æ©Ÿä¸Šçœ‹åˆ°çš„å°ˆè¼¯è©³æƒ…é ï¼Œèˆ‡é›»è¦–ä¸Šçœ‹åˆ°çš„å°ˆè¼¯è©³æƒ…é ï¼Œé é¢æ¨£å¼è¨­è¨ˆä¸Šæ˜¯ä¸åŒçš„ã€‚</p><p>æˆ‘å€‘ä¾†ç›´è§€çš„çœ‹ä¸€ä¸‹æ•ˆæœã€‚</p><p>æ‰‹æ©Ÿä¸Šçš„é¨°è¨Šè¦–é »å°ˆè¼¯è©³æƒ…é :</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e66a7bcfded64b34b43ebc1565b3e557><p class=pgc-img-caption></p></div><p>ä¸ŠåŠéƒ¨åˆ†æˆªåœ–ï¼Œä¸‹é¢é‚„æœ‰ç‚ºä½ æ¨è–¦ã€æ˜æ˜Ÿæ¼”å“¡ã€å‘¨é‚Šæ¨è–¦ã€è©•è«–ç­‰åŠŸèƒ½ã€‚</p><p>ç›¸æ‡‰çš„ï¼Œåœ¨é›»è¦–ç«¯çš„å°ˆè¼¯è©³æƒ…é å±•ç¤ºæ–¹å¼æ˜¯ä¸ä¸€æ¨£çš„ã€‚å‡è¨­ç”¢å“ç¶“ç†æå‡ºä¸€å€‹éœ€æ±‚ï¼Œè¦æ±‚å°è©³æƒ…é åšå€‹æ”¹ç‰ˆã€‚</p><p>æ¨£å¼è¦æ±‚å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/6529422d9088498eae0ccc2fce47b782><p class=pgc-img-caption></p></div><p>å…©å€‹çµ‚ç«¯çš„æ¨£å¼å°æ¯”ï¼Œåœ¨é›»è¦–ç«¯å°ˆè¼¯è©³æƒ…é ä¸­ï¼ŒåŒ…å«äº†å¾ˆå¤šæ¿å¡Šï¼Œæ¯å€‹æ¿å¡Šæ©«å‘å±•ç¤ºå¤šå€‹å…§å®¹ã€‚</p><p>ç”¢å“çš„è¨­è¨ˆä¸Šè¦æ±‚æ˜¯ï¼Œæœ‰çš„æ¿å¡Šå…§å®¹ä¾†æºæ–¼æ¨è–¦ã€æœ‰çš„æ¿å¡Šä¾†æºæ–¼æœç´¢ã€æœ‰çš„æ¿å¡Šä¾†æºCMSï¼ˆå…§å®¹ç®¡ç†ç³»çµ±ï¼‰ã€‚ç°¡å–®ç†è§£ç‚ºï¼Œæ¯å€‹æ¿å¡Šå…§å®¹ä¾†æºä¸åŒï¼Œä¾†æºæ–¼æ¨è–¦ã€æœç´¢ç­‰æ¥å£çš„å…§å®¹è¦æ±‚æ˜¯è¿‘å¯¦æ™‚çš„è«‹æ±‚ã€‚</p><p><strong>2ã€æŠ€è¡“è¨­è¨ˆæ–¹æ¡ˆæ€è€ƒ</strong></p><hr><p>è€ƒæ…®åˆ°ç”¢å“æçš„é€™å€‹éœ€æ±‚ï¼Œå…¶å¯¦å¯¦ç¾èµ·ä¾†ä¸¦ä¸é›£ã€‚</p><p>ä¸»è¦åˆ†ç‚ºäº†éœæ…‹æ•¸æ“šéƒ¨åˆ†å’Œå‹•æ…‹æ•¸æ“šéƒ¨åˆ†ï¼Œå°æ–¼ä¸ç¶“å¸¸è®ŠåŒ–çš„æ•¸æ“šå¯ä»¥é€šééœæ…‹æ¥å£ç²å–ï¼Œå°æ–¼è¿‘ä¹å¯¦æ™‚çš„æ•¸æ“šå¯ä»¥é€šéå‹•æ…‹æ¥å£ç²å–ã€‚</p><p><strong>éœæ…‹æ¥å£è¨­è¨ˆï¼š</strong></p><p>å°ˆè¼¯æœ¬èº«çš„å±¬æ€§ä»¥åŠå°ˆè¼¯ä¸‹çš„è¦–é »æ•¸æ“šï¼Œä¸€èˆ¬æ˜¯ä¸ç¶“å¸¸è®ŠåŒ–çš„ã€‚</p><p>åœ¨éœ€æ±‚å ´æ™¯ä»‹ç´¹ä¸­ï¼Œæˆ‘æˆªåœ–çš„æ˜¯é›»å½±é »é“ã€‚å¦‚æœæ˜¯é›»è¦–åŠ‡é »é“ï¼Œæœƒå±•ç¤ºåŠ‡é›†åˆ—è¡¨ï¼ˆå°ˆè¼¯ä¸‹çš„æ‰€æœ‰è¦–é »ï¼Œå¦‚ç¬¬ 1 é›†ã€ç¬¬ 2 é›†...ï¼‰ï¼Œè€Œè¦–é »çš„æ›´æ–°ä¸€èˆ¬æ˜¯ä¸å¤ªé »ç¹çš„ï¼Œæ‰€ä»¥åœ¨å°ˆè¼¯è©³æƒ…é åŠ‡é›†åˆ—è¡¨æ•¸æ“šå°±å¯ä»¥å¾éœæ…‹æ¥å£ç²å–ã€‚</p><p>éœæ…‹æ¥å£æ•¸æ“šç”Ÿæˆæµç¨‹ï¼š</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/52d585253ae24a7aa174d87db3baf078><p class=pgc-img-caption></p></div><p>å¦å¤–ä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯éœ€è¦å‹•æ…‹æ¥å£ä¾†å¯¦ç¾ï¼Œèª¿ç”¨ç¬¬ä¸‰æ–¹æ¥å£ç²å–æ•¸æ“šï¼Œæ¯”å¦‚æ¨è–¦ã€æœç´¢æ•¸æ“šã€‚</p><p>åŒæ™‚ï¼Œè¦æ±‚æ¿å¡Šèˆ‡æ¿å¡Šä¹‹é–“çš„å…§å®¹ä¸å…è¨±é‡è¤‡ã€‚</p><p><strong>å‹•æ…‹æ¥å£è¨­è¨ˆï¼š</strong></p><p><strong>æ–¹æ¡ˆä¸€ï¼š</strong></p><p>ä¸²è¡Œèª¿ç”¨ï¼Œå³æŒ‰ç…§æ¯å€‹æ¿å¡Šçš„å±•ç¤ºå…ˆå¾Œé †åºï¼Œèª¿ç”¨ç›¸æ‡‰çš„ç¬¬ä¸‰æ–¹æ¥å£ç²å–æ•¸æ“šã€‚</p><p><strong>æ–¹æ¡ˆäºŒï¼š</strong></p><p>ä¸¦è¡Œèª¿ç”¨ï¼Œå³å¤šå€‹æ¿å¡Šä¹‹é–“å¯ä»¥ä¸¦è¡Œèª¿ç”¨ï¼Œæé«˜æ•´é«”æ¥å£éŸ¿æ‡‰æ•ˆç‡ã€‚</p><p>å…¶å¯¦ä»¥ä¸Šå…©å€‹æ–¹æ¡ˆï¼Œå„æœ‰åˆ©å¼Šã€‚</p><p>æ–¹æ¡ˆä¸€ä¸²è¡Œèª¿ç”¨ï¼Œå¥½è™•æ˜¯é–‹ç™¼æ¨¡å‹ç°¡å–®ï¼ŒæŒ‰ç…§ä¸²è¡Œæ–¹å¼ä¾æ¬¡èª¿ç”¨æ¥å£ï¼Œå…§å®¹æ•¸æ“šå»é‡ï¼Œèšåˆæ‰€æœ‰çš„æ•¸æ“šè¿”å›çµ¦å®¢æˆ¶ç«¯ã€‚</p><p>ä½†æ˜¯ï¼Œæ¥å£éŸ¿æ‡‰æ™‚é–“ä¾è³´æ–¼ç¬¬ä¸‰æ–¹æ¥å£çš„éŸ¿æ‡‰æ™‚é–“ï¼Œé€šå¸¸ç¬¬ä¸‰æ–¹æ¥å£ç¸½æ˜¯ä¸å¯é çš„ï¼Œå¯èƒ½å°±æœƒæ‹‰é«˜æ¥å£æ•´é«”éŸ¿æ‡‰æ™‚é–“ï¼Œé€²è€Œå°è‡´ä½”ç”¨ç·šç¨‹æ™‚é–“éé•·ï¼Œå½±éŸ¿æ¥å£æ•´é«”ååé‡ã€‚</p><p>æ–¹æ¡ˆäºŒä¸¦è¡Œèª¿ç”¨ï¼Œç†è«–ä¸Šæ˜¯å¯ä»¥æé«˜æ¥å£çš„æ•´é«”éŸ¿æ‡‰æ™‚é–“ï¼Œå‡è¨­åŒæ™‚èª¿ç”¨å¤šå€‹ç¬¬ä¸‰æ–¹æ¥å£ï¼Œå–æ±ºæ–¼æœ€æ…¢çš„æ¥å£éŸ¿æ‡‰æ™‚é–“ã€‚</p><p>ä¸¦è¡Œèª¿ç”¨æ™‚ï¼Œéœ€è¦è€ƒæ…®åˆ°ã€Œæ± åŒ–æŠ€è¡“ã€ï¼Œå³ä¸èƒ½ç„¡é™åˆ¶çš„åœ¨ JVM é€²ç¨‹ä¸Šå‰µå»ºéå¤šçš„ç·šç¨‹ã€‚åŒæ™‚ï¼Œä¹Ÿè¦è€ƒæ…®åˆ°æ¿å¡Šèˆ‡æ¿å¡Šä¹‹é–“çš„å…§å®¹æ•¸æ“šï¼Œè¦æŒ‰ç…§ç”¢å“è¨­è¨ˆä¸Šçš„å…ˆå¾Œé †åºåšå»é‡ã€‚</p><p>æ ¹æ“šé€™å€‹éœ€æ±‚å ´æ™¯ï¼Œæˆ‘å€‘é¸æ“‡ç¬¬äºŒç¨®æ–¹æ¡ˆä¾†å¯¦ç¾æ›´åˆé©ä¸€äº›ã€‚</p><p>é¸æ“‡äº†æ–¹æ¡ˆäºŒï¼Œæˆ‘å€‘æŠ½è±¡å‡ºå¦‚ä¸‹åœ–æ‰€ç¤ºçš„ç°¡æ˜“æ¨¡å‹ï¼š</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9bea889c2f8f45a883b29b65072655d3><p class=pgc-img-caption></p></div><p>T1ã€T2ã€T3 è¡¨ç¤ºå¤šå€‹æ¿å¡Šå…§å®¹ç·šç¨‹ã€‚T1 ç·šç¨‹å…ˆè¿”å›çµæœï¼ŒT2 ç·šç¨‹è¿”å›çš„çµæœä¸èƒ½èˆ‡èˆ‡ T1 ç·šç¨‹è¿”å›çš„çµæœå…§å®¹é‡è¤‡ï¼ŒT3 ç·šç¨‹è¿”å›çš„çµæœä¸èƒ½èˆ‡ T1ã€T2 å…©å€‹ç·šç¨‹è¿”å›çš„çµæœå…§å®¹é‡è¤‡ã€‚</p><p>æˆ‘å€‘å¾æŠ€è¡“å¯¦ç¾ä¸Šè€ƒé‡ï¼Œç•¶ä¸¦è¡Œèª¿ç”¨å¤šå€‹ç¬¬ä¸‰æ–¹æ¥å£æ™‚ï¼Œéœ€è¦ç²å–æ¥å£çš„è¿”å›çµæœï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ Future ï¼Œèƒ½å¤ å¯¦ç¾ç•°æ­¥ç²å–ä»»å‹™çµæœã€‚</p><p>å¦å¤–ï¼ŒJDK8 æä¾›äº† CompletableFuture æ˜“æ–¼ä½¿ç”¨çš„ç²å–ç•°æ­¥çµæœçš„å·¥å…·é¡ï¼Œè§£æ±ºäº† Future çš„ä¸€äº›ä½¿ç”¨ä¸Šçš„ç—›é»ï¼Œä»¥æ›´å„ªé›…çš„æ–¹å¼å¯¦ç¾çµ„åˆå¼ç•°æ­¥ç·¨ç¨‹ï¼ŒåŒæ™‚ä¹Ÿå¥‘åˆå‡½æ•¸å¼ç·¨ç¨‹ã€‚</p><p><strong>3ã€Future è¨­è¨ˆæ¨¡å¼å¯¦æˆ°</strong></p><hr><p><strong>Future æ¥å£è¨­è¨ˆï¼š</strong></p><p>æä¾›äº†ç²å–ä»»å‹™çµæœã€å–æ¶ˆä»»å‹™ã€åˆ¤æ–·ä»»å‹™ç‹€æ…‹æ¥å£ã€‚èª¿ç”¨ç²å–ä»»å‹™çµæœæ–¹æ³•ï¼Œåœ¨ä»»å‹™æœªå®Œæˆæƒ…æ³ä¸‹ï¼Œæœƒå°è‡´èª¿ç”¨é˜»å¡ã€‚</p><p><strong>Future æ¥å£æä¾›çš„æ–¹æ³•ï¼š</strong></p><p>```</p><p>// ç²å–ä»»å‹™çµæœ</p><p>V get() throws InterruptedException, ExecutionException;</p><p>// æ”¯æŒè¶…æ™‚æ™‚é–“çš„ç²å–ä»»å‹™çµæœ</p><p>V get(long timeout, TimeUnit unit)</p><p>throws InterruptedException, ExecutionException, TimeoutException;</p><p>// åˆ¤æ–·ä»»å‹™æ˜¯å¦å·²å®Œæˆ</p><p>boolean isDone();</p><p>// åˆ¤æ–·ä»»å‹™æ˜¯å¦å·²å–æ¶ˆ</p><p>boolean isCancelled();</p><p>// å–æ¶ˆä»»å‹™</p><p>boolean cancel(boolean mayInterruptIfRunning);</p><p>```</p><p>é€šå¸¸ï¼Œæˆ‘å€‘åœ¨è€ƒæ…®åˆ°ä½¿ç”¨ Future ç²å–ä»»å‹™çµæœæ™‚ï¼Œæœƒä½¿ç”¨ ThreadPoolExecutor æˆ–è€… FutureTask ä¾†å¯¦ç¾åŠŸèƒ½éœ€æ±‚ã€‚</p><p><strong>ThreadPoolExecutorã€FutureTask èˆ‡ Future æ¥å£é—œä¿‚é¡åœ–ï¼š</strong></p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/be71e30e6bc7453eaf76bc3f7e7579b0><p class=pgc-img-caption></p></div><p><strong>TheadPoolExecutor æä¾›ä¸‰å€‹ submit æ–¹æ³•ï¼š</strong></p><pre>// 1. æäº¤ç„¡éœ€è¿”å›å€¼çš„ä»»å‹™ï¼ŒRunnable æ¥å£ run() æ–¹æ³•ç„¡è¿”å›å€¼public Future&lt;?&gt; submit(Runnable task) {}// 2. æäº¤éœ€è¦è¿”å›å€¼çš„ä»»å‹™ï¼ŒCallable æ¥å£ call() æ–¹æ³•æœ‰è¿”å›å€¼public &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task) {}// 3. æäº¤éœ€è¦è¿”å›å€¼çš„ä»»å‹™ï¼Œä»»å‹™çµæœæ˜¯ç¬¬äºŒå€‹åƒæ•¸ result å°è±¡public &lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result) {}</pre><p>ç¬¬ 3 å€‹ submit æ–¹æ³•ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre>static String x = "æ±æ˜‡çš„æ€è€ƒ";public static void main(String[] args) throws Exception { ExecutorService executor = Executors.newFixedThreadPool(1); // å‰µå»º Result å°è±¡ r Result r = new Result(); r.setName(x); // æäº¤ä»»å‹™ Future&lt;Result&gt; future = executor.submit(new Task(r), r); Result fr = future.get(); // ä¸‹é¢ç­‰å¼æˆç«‹ System.out.println(fr == r); System.out.println(fr.getName() == x); System.out.println(fr.getNick() == x);}static class Result { private String name; private String nick; // ... ignore getter and setter }static class Task implements Runnable { Result r; // é€šéæ§‹é€ å‡½æ•¸å‚³å…¥ result Task(Result r) { this.r = r; } @Override public void run() { // å¯ä»¥æ“ä½œ result String name = r.getName(); r.setNick(name); }}</pre><p>åŸ·è¡Œçµæœéƒ½æ˜¯trueã€‚</p><p><strong>FutureTask è¨­è¨ˆå¯¦ç¾ï¼š</strong></p><p>å¯¦ç¾äº† Runnable å’Œ Future å…©å€‹æ¥å£ã€‚å¯¦ç¾äº† Runnable æ¥å£ï¼Œèªªæ˜å¯ä»¥ä½œç‚ºä»»å‹™å°è±¡ï¼Œç›´æ¥æäº¤çµ¦ ThreadPoolExecutor å»åŸ·è¡Œã€‚å¯¦ç¾äº† Future æ¥å£ï¼Œèªªæ˜èƒ½å¤ ç²å–åŸ·è¡Œä»»å‹™çš„è¿”å›çµæœã€‚</p><p>æˆ‘å€‘ä¾†æ ¹æ“šç”¢å“çš„éœ€æ±‚ï¼Œä½¿ç”¨ FutureTask æ¨¡æ“¬å…©å€‹ç·šç¨‹ï¼Œé€šéç¤ºä¾‹å¯¦ç¾ä¸‹åŠŸèƒ½ã€‚</p><p>çµåˆç¤ºä¾‹ä»£ç¢¼è¨»é‡‹ç†è§£ï¼š</p><pre>public static void main(String[] args) throws Exception { // å‰µå»ºä»»å‹™ T1 çš„ FutureTaskï¼Œèª¿ç”¨æ¨è–¦æ¥å£ç²å–æ•¸æ“š FutureTask&lt;String&gt; ft1 = new FutureTask&lt;&gt;(new T1Task()); // å‰µå»ºä»»å‹™ T1 çš„ FutureTaskï¼Œèª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“šï¼Œä¾è³´ T1 çµæœ FutureTask&lt;String&gt; ft2 = new FutureTask&lt;&gt;(new T2Task(ft1)); // ç·šç¨‹ T1 åŸ·è¡Œä»»å‹™ ft1 Thread T1 = new Thread(ft1); T1.start(); // ç·šç¨‹ T2 åŸ·è¡Œä»»å‹™ ft2 Thread T2 = new Thread(ft2); T2.start(); // ç­‰å¾…ç·šç¨‹ T2 åŸ·è¡Œçµæœ System.out.println(ft2.get());}// T1Task èª¿ç”¨æ¨è–¦æ¥å£ç²å–æ•¸æ“šstatic class T1Task implements Callable&lt;String&gt; { @Override public String call() throws Exception { System.out.println("T1: èª¿ç”¨æ¨è–¦æ¥å£ç²å–æ•¸æ“š..."); TimeUnit.SECONDS.sleep(1); System.out.println("T1: å¾—åˆ°æ¨è–¦æ¥å£æ•¸æ“š..."); TimeUnit.SECONDS.sleep(10); return " [T1 æ¿å¡Šæ•¸æ“š] "; }} // T2Task èª¿ç”¨æœç´¢æ¥å£æ•¸æ“šï¼ŒåŒæ™‚éœ€è¦æ¨è–¦æ¥å£æ•¸æ“šstatic class T2Task implements Callable&lt;String&gt; { FutureTask&lt;String&gt; ft1; // T2 ä»»å‹™éœ€è¦ T1 ä»»å‹™çš„ FutureTask è¿”å›çµæœå»é‡ T2Task(FutureTask&lt;String&gt; ft1) { this.ft1 = ft1; } @Override public String call() throws Exception { System.out.println("T2: èª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“š..."); TimeUnit.SECONDS.sleep(1); System.out.println("T2: å¾—åˆ°æœç´¢æ¥å£çš„æ•¸æ“š..."); TimeUnit.SECONDS.sleep(5); // ç²å– T2 ç·šç¨‹çš„æ•¸æ“š System.out.println("T2: èª¿ç”¨ T1.get() æ¥å£ç²å–æ¨è–¦æ•¸æ“š"); String tf1 = ft1.get(); System.out.println("T2: ç²å–åˆ°æ¨è–¦æ¥å£æ•¸æ“š:" + tf1); System.out.println("T2: å°‡ T1 èˆ‡ T2 æ¿å¡Šæ•¸æ“šåšå»é‡è™•ç†"); return "[T1 å’Œ T2 æ¿å¡Šæ•¸æ“šèšåˆçµæœ]"; }}</pre><p>åŸ·è¡Œçµæœå¦‚ä¸‹ï¼š</p><pre>&gt; Task :FutureTaskTest.main()T1: èª¿ç”¨æ¨è–¦æ¥å£ç²å–æ•¸æ“š...T2: èª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“š...T1: å¾—åˆ°æ¨è–¦æ¥å£æ•¸æ“š...T2: å¾—åˆ°æœç´¢æ¥å£çš„æ•¸æ“š...T2: èª¿ç”¨ T1.get() æ¥å£ç²å–æ¨è–¦æ•¸æ“šT2: ç²å–åˆ°æ¨è–¦æ¥å£æ•¸æ“š: [T1 æ¿å¡Šæ•¸æ“š] T2: å°‡ T1 èˆ‡ T2 æ¿å¡Šæ•¸æ“šåšå»é‡è™•ç†[T1 å’Œ T2 æ¿å¡Šæ•¸æ“šèšåˆçµæœ] </pre><p><strong>å°çµï¼š</strong></p><p>Future è¡¨ç¤ºã€Œæœªä¾†ã€çš„æ„æ€ï¼Œä¸»è¦æ˜¯å°‡è€—æ™‚çš„ä¸€äº›æ“ä½œä»»å‹™ï¼Œäº¤çµ¦å–®ç¨çš„ç·šç¨‹å»åŸ·è¡Œã€‚å¾è€Œé”åˆ°ç•°æ­¥çš„ç›®çš„ï¼Œæäº¤ä»»å‹™çš„ç•¶å‰ç·šç¨‹ï¼Œåœ¨æäº¤ä»»å‹™å¾Œå’Œç²å–ä»»å‹™çµæœçš„éç¨‹ä¸­ï¼Œç•¶å‰ç·šç¨‹å¯ä»¥ç¹¼çºŒåŸ·è¡Œå…¶ä»–æ“ä½œï¼Œä¸éœ€è¦åœ¨é‚£å‚»ç­‰è‘—è¿”å›åŸ·è¡Œçµæœã€‚</p><p><strong>4ã€CompleteableFuture æ¨¡å¼å¯¦æˆ°</strong></p><hr><p>å°æ–¼ Future è¨­è¨ˆæ¨¡å¼ï¼Œé›–ç„¶æˆ‘å€‘æäº¤ä»»å‹™æ™‚ï¼Œä¸æœƒé€²å…¥ä»»ä½•é˜»å¡ï¼Œä½†æ˜¯ç•¶èª¿ç”¨æ–¹è¦ç²å¾—é€™å€‹ä»»å‹™çš„åŸ·è¡Œçµæœï¼Œé‚„æ˜¯å¯èƒ½æœƒé˜»å¡ç›´è‡³ä»»å‹™åŸ·è¡Œå®Œæˆã€‚</p><p>åœ¨ JDK1.5 è¨­è¨ˆä¹‹åˆå°±ä¸€ç›´å­˜åœ¨é€™å€‹å•é¡Œï¼Œç™¼å±•åˆ° JDK1.8 å¼•å…¥äº† CompletableFuture æ‰å¾—åˆ°å®Œç¾çš„å¢å¼·ã€‚</p><p>åœ¨æ­¤æœŸé–“ï¼ŒGoogle é–‹æºçš„ Guava å·¥å…·åŒ…æä¾›äº† ListenableFuture ï¼Œç”¨æ–¼æ”¯æŒä»»å‹™å®Œæˆæ™‚æ”¯æŒå›èª¿æ–¹å¼ï¼Œæ„Ÿèˆˆè¶£çš„æœ‹å‹å€‘å¯ä»¥è‡ªè¡ŒæŸ¥é–±ç ”ç©¶ã€‚</p><p>åœ¨æ¥­å‹™éœ€æ±‚å ´æ™¯ä»‹ç´¹ä¸­ï¼Œä¸åŒæ¿å¡Šçš„æ•¸æ“šä¾†æºæ˜¯ä¸åŒçš„ï¼Œä¸¦ä¸”æ¿å¡Šèˆ‡æ¿å¡Šä¹‹é–“æ˜¯å­˜åœ¨æ•¸æ“šä¾è³´é—œä¿‚çš„ã€‚</p><p>å¯ä»¥ç†è§£ç‚ºä»»å‹™èˆ‡ä»»å‹™ä¹‹é–“æ˜¯æœ‰æ™‚åºé—œä¿‚çš„ï¼Œè€Œæ ¹æ“š CompletableFuture æä¾›çš„ä¸€äº›åŠŸèƒ½ç‰¹æ€§ï¼Œæ˜¯éå¸¸é©åˆé€™ç¨®æ¥­å‹™å ´æ™¯çš„ã€‚</p><p><strong>CompletableFuture é¡åœ–ï¼š</strong></p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/963ea7f277e24eaf9ec15a916b9c2815><p class=pgc-img-caption></p></div><p>CompletableFuture å¯¦ç¾äº† Future å’Œ CompletionStage å…©å€‹æ¥å£ã€‚å¯¦ç¾ Future æ¥å£æ˜¯ç‚ºäº†é—œæ³¨ç•°æ­¥ä»»å‹™ä»€éº¼æ™‚å€™çµæŸï¼Œå’Œç²å–ç•°æ­¥ä»»å‹™åŸ·è¡Œçš„çµæœã€‚å¯¦ç¾ CompletionStage æ¥å£ï¼Œå…¶æä¾›äº†éå¸¸è±å¯Œçš„åŠŸèƒ½ï¼Œå¯¦ç¾äº†ä¸²è¡Œé—œä¿‚ã€ä¸¦è¡Œé—œä¿‚ã€åŒ¯èšé—œä¿‚ç­‰ã€‚</p><p><strong>CompletableFuture æ ¸å¿ƒå„ªå‹¢ï¼š</strong></p><p>1ï¼‰ç„¡éœ€æ‰‹å·¥ç¶­è­·ç·šç¨‹ï¼Œçµ¦ä»»å‹™åˆ†é…ç·šç¨‹çš„å·¥ä½œç„¡éœ€é–‹ç™¼äººå“¡é—œæ³¨ï¼›</p><p>2ï¼‰åœ¨ä½¿ç”¨ä¸Šï¼Œèªç¾©æ›´åŠ æ¸…æ™°æ˜ç¢ºï¼›</p><p>ä¾‹å¦‚ï¼št3 = t1.thenCombine(t2, () -> { // doSomething ... } èƒ½å¤ æ˜ç¢ºçš„è¡¨è¿°ä»»å‹™ 3 è¦ç­‰ä»»å‹™ 2 å’Œ ä»»å‹™ 1å®Œæˆå¾Œæ‰æœƒé–‹å§‹åŸ·è¡Œã€‚</p><p>3ï¼‰ä»£ç¢¼æ›´åŠ ç°¡ç·´ï¼Œæ”¯æŒéˆå¼èª¿ç”¨ï¼Œè®“ä½ æ›´å°ˆæ³¨æ¥­å‹™é‚è¼¯ã€‚</p><p>4ï¼‰æ–¹ä¾¿çš„è™•ç†ç•°å¸¸æƒ…æ³</p><p>æ¥ä¸‹ä¾†ï¼Œé€šé CompletableFuture ä¾†æ¨¡æ“¬å¯¦ç¾å°ˆè¼¯ä¸‹å¤šæ¿å¡Šæ•¸æ“šèšåˆè™•ç†ã€‚</p><p>ä»£ç¢¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre>public static void main(String[] args) throws Exception { // æš«å­˜æ•¸æ“š List&lt;String&gt; stashList = Lists.newArrayList(); // ä»»å‹™ 1ï¼šèª¿ç”¨æ¨è–¦æ¥å£ç²å–æ•¸æ“š CompletableFuture&lt;String&gt; t1 = CompletableFuture.supplyAsync(() -&gt; { System.out.println("T1: ç²å–æ¨è–¦æ¥å£æ•¸æ“š..."); sleepSeconds(5); stashList.add("[T1 æ¿å¡Šæ•¸æ“š]"); return "[T1 æ¿å¡Šæ•¸æ“š]"; }); // ä»»å‹™ 2ï¼šèª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“š CompletableFuture&lt;String&gt; t2 = CompletableFuture.supplyAsync(() -&gt; { System.out.println("T2: èª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“š..."); sleepSeconds(3); return " [T2 æ¿å¡Šæ•¸æ“š] "; }); // ä»»å‹™ 3ï¼šä»»å‹™ 1 å’Œä»»å‹™ 2 å®Œæˆå¾ŒåŸ·è¡Œï¼Œèšåˆçµæœ CompletableFuture&lt;String&gt; t3 = t1.thenCombine(t2, (t1Result, t2Result) -&gt; { System.out.println(t1Result + " èˆ‡ " + t2Result + "å¯¦ç¾å»é‡é‚è¼¯è™•ç†"); return "[T1 å’Œ T2 æ¿å¡Šæ•¸æ“šèšåˆçµæœ]"; }); // ç­‰å¾…ä»»å‹™ 3 åŸ·è¡Œçµæœ System.out.println(t3.get(6, TimeUnit.SECONDS));}static void sleepSeconds(int timeout) { try { TimeUnit.SECONDS.sleep(timeout); } catch (InterruptedException e) { e.printStackTrace(); }}</pre><p>åŸ·è¡Œçµæœå¦‚ä¸‹ï¼š</p><pre>&gt; Task :CompletableFutureTest.main()T1: ç²å–æ¨è–¦æ¥å£æ•¸æ“š...T2: èª¿ç”¨æœç´¢æ¥å£ç²å–æ•¸æ“š...[T1 æ¿å¡Šæ•¸æ“š] èˆ‡ [T2 æ¿å¡Šæ•¸æ“š] å¯¦ç¾å»é‡é‚è¼¯è™•ç†[T1 å’Œ T2 æ¿å¡Šæ•¸æ“šèšåˆçµæœ]</pre><p>ä¸Šè¿°çš„ç¤ºä¾‹ä»£ç¢¼åœ¨ IDEA ä¸­æ–°å»ºå€‹Classï¼Œç›´æ¥è¤‡è£½é€²å»ï¼Œå³å¯æ­£å¸¸é‹è¡Œã€‚</p><p><strong>** 5ã€CompletableFuture ç”Ÿç”¢å»ºè­°**</strong></p><hr><p><strong>å‰µå»ºåˆç†çš„ç·šç¨‹æ± ï¼š</strong></p><p>åœ¨ç”Ÿç”¢ç’°å¢ƒä¸‹ï¼Œä¸å»ºè­°ç›´æ¥ä½¿ç”¨ä¸Šè¿°ç¤ºä¾‹ä»£ç¢¼å½¢å¼ã€‚å› ç‚ºç¤ºä¾‹ä»£ç¢¼ä¸­ä½¿ç”¨çš„</p><p>CompletableFuture.supplyAsync(() -> {});</p><p>å‰µå»º CompletableFuture å°è±¡çš„ supplyAsync() æ–¹æ³•ï¼ˆé€™è£¡ä½¿ç”¨çš„å·¥å» æ–¹æ³•æ¨¡å¼ï¼‰ï¼Œåº•å±¤ä½¿ç”¨çš„é»˜èªç·šç¨‹æ± ï¼Œä¸ä¸€å®šèƒ½æ»¿è¶³æ¥­å‹™éœ€æ±‚ã€‚</p><p>çµåˆåº•å±¤æºä»£ç¢¼ä¾†çœ‹ä¸€ä¸‹ï¼š</p><pre>// é»˜èªä½¿ç”¨ ForkJoinPool ç·šç¨‹æ± private static final Executor asyncPool = useCommonPool ? ForkJoinPool.commonPool() : new ThreadPerTaskExecutor();public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier) { return asyncSupplyStage(asyncPool, supplier);}</pre><p>å‰µå»º ForkJoinPool ç·šç¨‹æ± ï¼š</p><p>é»˜èªç·šç¨‹æ± å¤§å°æ˜¯ Runtime.getRuntime().availableProcessors() - 1ï¼ˆCPU æ ¸æ•¸ - 1ï¼‰ï¼Œå¯ä»¥é€šé JVM åƒæ•¸ -Djava.util.concurrent.ForkJoinPool.common.parallelism è¨­ç½®ç·šç¨‹æ± å¤§å°ã€‚</p><p>JVM åƒæ•¸ä¸Šé…ç½® -Djava.util.concurrent.ForkJoinPool.common.threadFactory è¨­ç½®ç·šç¨‹å·¥å» é¡ï¼›é…ç½® -Djava.util.concurrent.ForkJoinPool.common.exceptionHandler è¨­ç½®ç•°å¸¸è™•ç†é¡ï¼Œé€™å…©å€‹åƒæ•¸è¨­ç½®å¾Œï¼Œå…§éƒ¨æœƒé€šéç³»çµ±é¡åŠ è¼‰å™¨åŠ è¼‰ Classã€‚</p><p>å¦‚æœæ‰€æœ‰ CompletableFuture éƒ½ä½¿ç”¨é»˜èªç·šç¨‹æ± ï¼Œä¸€æ—¦æœ‰ä»»å‹™åŸ·è¡Œå¾ˆæ…¢çš„ I/O æ“ä½œï¼Œå°±æœƒå°è‡´æ‰€æœ‰ç·šç¨‹éƒ½é˜»å¡åœ¨ I/O æ“ä½œä¸Šï¼Œé€²è€Œå½±éŸ¿ç³»çµ±æ•´é«”æ€§èƒ½ã€‚</p><p>æ‰€ä»¥ï¼Œå»ºè­°å¤§å®¶åœ¨ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨æ™‚ï¼Œæ ¹æ“šä¸åŒçš„æ¥­å‹™é¡å‹å‰µå»ºä¸åŒçš„ç·šç¨‹æ± ï¼Œä»¥é¿å…äº’ç›¸å½±éŸ¿ã€‚</p><p>CompletableFuture é‚„æä¾›äº†å¦å¤–æ”¯æŒç·šç¨‹æ± çš„æ–¹æ³•ã€‚</p><pre>// ç¬¬äºŒå€‹åƒæ•¸æ”¯æŒå‚³é Executor è‡ªå®šç¾©ç·šç¨‹æ± public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier, Executor executor) { return asyncSupplyStage(screenExecutor(executor), supplier);}</pre><p>è‡ªå®šç¾©ç·šç¨‹æ± ï¼Œå»ºè­°åƒè€ƒ ã€Œé˜¿é‡Œå·´å·´ Java é–‹ç™¼æ‰‹å†Šã€ï¼Œæ¨è–¦ä½¿ç”¨ ThreadPoolExecutor è‡ªå®šç¾©ç·šç¨‹æ± ï¼Œä½¿ç”¨æœ‰ç•ŒéšŠåˆ—ï¼Œæ ¹æ“šå¯¦éš›æ¥­å‹™æƒ…æ³è¨­ç½®éšŠåˆ—å¤§å°ã€‚</p><p>ç·šç¨‹æ± å¤§å°çš„è¨­ç½®ï¼Œåœ¨ ã€ŒJava ä½µç™¼ç·¨ç¨‹å¯¦æˆ°ã€ä¸€æ›¸ä¸­ï¼ŒBrian Goetz æä¾›äº†ä¸å°‘å„ªåŒ–å»ºè­°ã€‚å¦‚æœç·šç¨‹æ± æ•¸é‡éå¤šï¼Œç«¶çˆ­ CPU å’Œå…§å­˜è³‡æºï¼Œå°è‡´å¤§é‡æ™‚é–“åœ¨ä¸Šä¸‹æ–‡åˆ‡æ›ä¸Šã€‚åä¹‹ï¼Œå¦‚æœç·šç¨‹æ± æ•¸é‡éå°‘ï¼Œç„¡æ³•å……åˆ†åˆ©ç”¨ CPU å¤šæ ¸å„ªå‹¢ã€‚</p><p>ç·šç¨‹æ± å¤§å°èˆ‡ CPU è™•ç†å™¨çš„åˆ©ç”¨ç‡ä¹‹æ¯”å¯ä»¥ç”¨ä¸‹é¢å…¬å¼ä¼°ç®—ï¼š</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15a2f43eee5747129967153c9b0fff42><p class=pgc-img-caption></p></div><p><strong>ç•°å¸¸è™•ç†ï¼š</strong></p><p>CompletableFuture æä¾›äº†éå¸¸ç°¡å–®çš„ç•°å¸¸è™•ç† ï¼Œå¦‚ä¸‹é€™äº›æ–¹æ³•ï¼Œæ”¯æŒéˆå¼ç·¨ç¨‹æ–¹å¼ã€‚</p><pre>// é¡ä¼¼æ–¼ try{}catch{} ä¸­çš„ catch{}public CompletionStage&lt;T&gt; exceptionally (Function&lt;Throwable, ? extends T&gt; fn); // é¡ä¼¼æ–¼ try{}finally{} ä¸­çš„ finally{}ï¼Œä¸æ”¯æŒè¿”å›çµæœpublic CompletionStage&lt;T&gt; whenComplete (BiConsumer&lt;? super T, ? super Throwable&gt; action);public CompletionStage&lt;T&gt; whenCompleteAsync (BiConsumer&lt;? super T, ? super Throwable&gt; action); // é¡ä¼¼æ–¼ try{}finally{} ä¸­çš„ finally{}ï¼Œæ”¯æŒè¿”å›çµæœpublic &lt;U&gt; CompletionStage&lt;U&gt; handle (BiFunction&lt;? super T, Throwable, ? extends U&gt; fn);public &lt;U&gt; CompletionStage&lt;U&gt; handleAsync (BiFunction&lt;? super T, Throwable, ? extends U&gt; fn);</pre><p><strong>#### 6ã€CompletableFuture æ€§èƒ½æ¸¬è©¦ï¼š</strong></p><p>å¾ªç’°å£“æ¸¬ä»»å‹™æ•¸å¦‚ä¸‹æ‰€ç¤ºï¼Œæ¯æ¬¡åŸ·è¡Œå£“æ¸¬ï¼Œå¾ 1 åˆ° jobNum æ•¸æ“šç–ŠåŠ åŒ¯èšçµæœï¼Œè¨ˆç®—è€—æ™‚ã€‚</p><p>çµ±è¨ˆç¶­åº¦ï¼šCompletableFuture é»˜èªç·šç¨‹æ±  èˆ‡ è‡ªå®šç¾©ç·šç¨‹æ± ã€‚</p><p>æ€§èƒ½æ¸¬è©¦ä»£ç¢¼ï¼š</p><pre>// æ€§èƒ½æ¸¬è©¦ä»£ç¢¼Arrays.asList(-3, -1, 0, 1, 2, 4, 5, 10, 16, 17, 30, 50, 100, 150, 200, 300).forEach(offset -&gt; { int jobNum = PROCESSORS + offset; System.out.println( String.format("When %s tasks =&gt; stream: %s, parallelStream: %s, future default: %s, future custom: %s", testCompletableFutureDefaultExecutor(jobNum), testCompletableFutureCustomExecutor(jobNum)));});// CompletableFuture ä½¿ç”¨é»˜èª ForkJoinPool ç·šç¨‹æ± private static long testCompletableFutureDefaultExecutor(int jobCount) { List&lt;CompletableFuture&lt;Integer&gt;&gt; tasks = new ArrayList&lt;&gt;(); IntStream.rangeClosed(1, jobCount).forEach(value -&gt; tasks.add(CompletableFuture.supplyAsync(CompleteableFuturePerfTest::getJob))); long start = System.currentTimeMillis(); int sum = tasks.stream().map(CompletableFuture::join).mapToInt(Integer::intValue).sum(); checkSum(sum, jobCount); return System.currentTimeMillis() - start;}// CompletableFuture ä½¿ç”¨è‡ªå®šç¾©çš„ç·šç¨‹æ± private static long testCompletableFutureCustomExecutor(int jobCount) { ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(200, 200, 5, TimeUnit.MINUTES, new ArrayBlockingQueue&lt;&gt;(100000), new ThreadFactory() { @Override public Thread newThread(Runnable r) { Thread thread = new Thread(r); thread.setName("CUSTOM_DAEMON_COMPLETABLEFUTURE"); thread.setDaemon(true); return thread; } }, new ThreadPoolExecutor.CallerRunsPolicy()); List&lt;CompletableFuture&lt;Integer&gt;&gt; tasks = new ArrayList&lt;&gt;(); IntStream.rangeClosed(1, jobCount).forEach(value -&gt; tasks.add(CompletableFuture.supplyAsync(CompleteableFuturePerfTest::getJob, threadPoolExecutor))); long start = System.currentTimeMillis(); int sum = tasks.stream().map(CompletableFuture::join).mapToInt(Integer::intValue).sum(); checkSum(sum, jobCount); return System.currentTimeMillis() - start;}</pre><p>æ¸¬è©¦æ©Ÿå™¨é…ç½®ï¼š8 æ ¸CPUï¼Œ16Gå…§å­˜</p><p>æ€§èƒ½æ¸¬è©¦çµæœï¼š</p><div class=pgc-img><img alt="æœ‰äº† CompletableFutureï¼Œä½¿å¾—ç•°æ­¥ç·¨ç¨‹æ²’æœ‰é‚£éº¼é›£äº†" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5cbf2ad690624651b897fc36cafb8794><p class=pgc-img-caption></p></div><p>æ ¹æ“šå£“æ¸¬çµæœçœ‹åˆ°ï¼Œéš¨è‘—å£“æ¸¬ä»»å‹™æ•¸é‡è¶Šå¤§ï¼Œä½¿ç”¨é»˜èªçš„ç·šç¨‹æ± æ€§èƒ½è¶Šå·®ã€‚</p><p><strong>7ã€CompletableFuture ä½¿ç”¨æ“´å±•ï¼š</strong></p><hr><p><strong>å°è±¡å‰µå»ºï¼š</strong></p><p>é™¤å‰é¢æåˆ°çš„ supplyAsync æ–¹æ³•å¤–ï¼ŒCompletableFuture é‚„æä¾›ç­å¦‚ä¸‹æ–¹æ³•ï¼š</p><pre>// åŸ·è¡Œä»»å‹™ï¼ŒCompletableFuture&lt;Void&gt; ç„¡è¿”å›å€¼ï¼Œé»˜èªç·šç¨‹æ± public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable) { return asyncRunStage(asyncPool, runnable);}// åŸ·è¡Œä»»å‹™ï¼ŒCompletableFuture&lt;Void&gt; ç„¡è¿”å›å€¼ï¼Œæ”¯æŒè‡ªå®šç¾©ç·šç¨‹æ± public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable, Executor executor) { return asyncRunStage(screenExecutor(executor), runnable);}</pre><p>æˆ‘å€‘åœ¨ CompletableFuture æ¨¡å¼å¯¦æˆ°ä¸­ï¼Œæåˆ°äº† CompletableFuture å¯¦ç¾äº† CompletionStage æ¥å£ï¼Œè©²æ¥å£æä¾›äº†éå¸¸è±å¯Œçš„åŠŸèƒ½ã€‚</p><p>CompletionStage æ¥å£æ”¯æŒä¸²è¡Œé—œä¿‚ã€åŒ¯èš AND é—œä¿‚ã€åŒ¯èš OR é—œä¿‚ã€‚</p><p>ä¸‹é¢å°é€™äº›é—œä¿‚çš„æ¥å£åšå€‹ç°¡å–®æè¿°ï¼Œå¤§å®¶åœ¨ä½¿ç”¨æ™‚å¯ä»¥å»è‡ªè¡ŒæŸ¥é–± JDK APIã€‚</p><p>åŒæ™‚ï¼Œé€™äº›é—œä¿‚æ¥å£ä¸­æ¯å€‹æ–¹æ³•éƒ½æä¾›äº†å°æ‡‰çš„ xxxAsync() æ–¹æ³•ï¼Œè¡¨ç¤ºç•°æ­¥åŒ–åŸ·è¡Œä»»å‹™ã€‚</p><p><strong>ä¸²è¡Œé—œä¿‚ï¼š</strong></p><p>CompletionStage æè¿°ä¸²è¡Œé—œä¿‚ï¼Œä¸»è¦æœ‰ thenApplyã€thenRunã€thenAccept å’Œ thenCompose ç³»åˆ—æ¥å£ã€‚</p><p>æºç¢¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre>// å°æ‡‰ U apply(T t) ï¼Œæ¥æ”¶åƒæ•¸ Tä¸¦æ”¯æŒè¿”å›å€¼ Upublic &lt;U&gt; CompletionStage&lt;U&gt; thenApply(Function&lt;? super T,? extends U&gt; fn);public &lt;U&gt; CompletionStage&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn);// ä¸æ¥æ”¶åƒæ•¸ä¹Ÿä¸æ”¯æŒè¿”å›å€¼public CompletionStage&lt;Void&gt; thenRun(Runnable action);public CompletionStage&lt;Void&gt; thenRunAsync(Runnable action);// æ¥æ”¶åƒæ•¸ä½†ä¸æ”¯æŒè¿”å›å€¼public CompletionStage&lt;Void&gt; thenAccept(Consumer&lt;? super T&gt; action);public CompletionStage&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action);// çµ„åˆå…©å€‹ä¾è³´çš„ CompletableFuture å°è±¡public &lt;U&gt; CompletionStage&lt;U&gt; thenCompose (Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn);public &lt;U&gt; CompletionStage&lt;U&gt; thenComposeAsync (Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn);</pre><p><strong>åŒ¯èš AND é—œä¿‚ï¼š</strong></p><p>CompletionStage æè¿° åŒ¯èš AND é—œä¿‚ï¼Œä¸»è¦æœ‰ thenCombineã€thenAcceptBoth å’Œ runAfterBoth ç³»åˆ—æ¥å£ã€‚</p><p>æºç¢¼å¦‚ä¸‹æ‰€ç¤ºï¼ˆçœç•¥äº†Async æ–¹æ³•ï¼‰ï¼š</p><pre>// ç•¶å‰å’Œå¦å¤–çš„ CompletableFuture éƒ½å®Œæˆæ™‚ï¼Œå…©å€‹åƒæ•¸å‚³éçµ¦ fnï¼Œfn æœ‰è¿”å›å€¼public &lt;U,V&gt; CompletionStage&lt;V&gt; thenCombine (CompletionStage&lt;? extends U&gt; other, BiFunction&lt;? super T,? super U,? extends V&gt; fn);// ç•¶å‰å’Œå¦å¤–çš„ CompletableFuture éƒ½å®Œæˆæ™‚ï¼Œå…©å€‹åƒæ•¸å‚³éçµ¦ actionï¼Œaction æ²’æœ‰è¿”å›å€¼public &lt;U&gt; CompletionStage&lt;Void&gt; thenAcceptBoth (CompletionStage&lt;? extends U&gt; other, BiConsumer&lt;? super T, ? super U&gt; action);// ç•¶å‰å’Œå¦å¤–çš„ CompletableFuture éƒ½å®Œæˆæ™‚ï¼ŒåŸ·è¡Œ actionpublic CompletionStage&lt;Void&gt; runAfterBoth(CompletionStage&lt;?&gt; other, Runnable action);</pre><p><strong>åŒ¯èš OR é—œä¿‚ï¼š</strong></p><p>CompletionStage æè¿° åŒ¯èš OR é—œä¿‚ï¼Œä¸»è¦æœ‰ applyToEitherã€acceptEither å’Œ runAfterEither ç³»åˆ—æ¥å£ã€‚</p><p>æºç¢¼å¦‚ä¸‹æ‰€ç¤ºï¼ˆçœç•¥äº†Async æ–¹æ³•ï¼‰ï¼š</p><pre>// ç•¶å‰èˆ‡å¦å¤–çš„ CompletableFuture ä»»ä½•ä¸€å€‹åŸ·è¡Œå®Œæˆï¼Œå°‡å…¶å‚³éçµ¦ fnï¼Œæ”¯æŒè¿”å›å€¼public &lt;U&gt; CompletionStage&lt;U&gt; applyToEither (CompletionStage&lt;? extends T&gt; other, Function&lt;? super T, U&gt; fn);// ç•¶å‰èˆ‡å¦å¤–çš„ CompletableFuture ä»»ä½•ä¸€å€‹åŸ·è¡Œå®Œæˆï¼Œå°‡å…¶å‚³éçµ¦ actionï¼Œä¸æ”¯æŒè¿”å›å€¼public CompletionStage&lt;Void&gt; acceptEither (CompletionStage&lt;? extends T&gt; other, Consumer&lt;? super T&gt; action);// ç•¶å‰èˆ‡å¦å¤–çš„ CompletableFuture ä»»ä½•ä¸€å€‹åŸ·è¡Œå®Œæˆï¼Œç›´æ¥åŸ·è¡Œ actionpublic CompletionStage&lt;Void&gt; runAfterEither(CompletionStage&lt;?&gt; other, Runnable action);</pre><p>åˆ°æ­¤ï¼ŒCompletableFuture çš„ç›¸é—œç‰¹æ€§éƒ½ä»‹ç´¹å®Œäº†ã€‚</p><p>ç•°æ­¥ç·¨ç¨‹æ…¢æ…¢è®Šå¾—è¶Šä¾†è¶Šæˆç†Ÿï¼ŒJava èªè¨€å®˜ç¶²ä¹Ÿé–‹å§‹æ”¯æŒç•°æ­¥ç·¨ç¨‹æ¨¡å¼ï¼Œæ‰€ä»¥å­¸å¥½ç•°æ­¥ç·¨ç¨‹é‚„æ˜¯æœ‰å¿…è¦çš„ã€‚</p><p>æœ¬æ–‡çµåˆæ¥­å‹™éœ€æ±‚å ´æ™¯é©…å‹•ï¼Œå¼•å‡ºäº† Future è¨­è¨ˆæ¨¡å¼å¯¦æˆ°ï¼Œç„¶å¾Œå° JDK1.8 ä¸­çš„ CompletableFuture æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œæ ¸å¿ƒå„ªå‹¢ã€æ€§èƒ½æ¸¬è©¦å°æ¯”ã€ä½¿ç”¨æ“´å±•æ–¹é¢åšäº†é€²ä¸€æ­¥å‰–æã€‚</p><p>å¸Œæœ›å°å¤§å®¶æœ‰æ‰€å¹«åŠ©ï¼</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>CompletableFuture</a></li><li><a>ç•°æ­¥</a></li><li><a>ç·¨ç¨‹</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/fd08b19.html alt=ç•°æ­¥ç·¨ç¨‹ï¼šå”ä½œæ€§å¤šä»»å‹™è™•ç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/dbd0ddd7-eda4-430a-8176-da9804319771 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fd08b19.html title=ç•°æ­¥ç·¨ç¨‹ï¼šå”ä½œæ€§å¤šä»»å‹™è™•ç†>ç•°æ­¥ç·¨ç¨‹ï¼šå”ä½œæ€§å¤šä»»å‹™è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f74b39f.html alt="Java ç•°æ­¥ç·¨ç¨‹å°è«–" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3c356b1aa9b4416ca7b35a07f3033e13 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f74b39f.html title="Java ç•°æ­¥ç·¨ç¨‹å°è«–">Java ç•°æ­¥ç·¨ç¨‹å°è«–</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4cb74cd.html alt="Springç•°æ­¥ç·¨ç¨‹ | ä½ çš„@Asyncå°±çœŸçš„ç•°æ­¥å—ï¼Ÿç•°æ­¥æ­·éšªå¥‡é‡è¨˜" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b9d102263d0f46a0b5b203d7b6cd4a2e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4cb74cd.html title="Springç•°æ­¥ç·¨ç¨‹ | ä½ çš„@Asyncå°±çœŸçš„ç•°æ­¥å—ï¼Ÿç•°æ­¥æ­·éšªå¥‡é‡è¨˜">Springç•°æ­¥ç·¨ç¨‹ | ä½ çš„@Asyncå°±çœŸçš„ç•°æ­¥å—ï¼Ÿç•°æ­¥æ­·éšªå¥‡é‡è¨˜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e8c3b8.html alt=è©³è§£ç·¨ç¨‹ä¸­çš„åŒæ­¥å’Œç•°æ­¥ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b292fb03b256422bb94215ce3ec3bbaf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e8c3b8.html title=è©³è§£ç·¨ç¨‹ä¸­çš„åŒæ­¥å’Œç•°æ­¥>è©³è§£ç·¨ç¨‹ä¸­çš„åŒæ­¥å’Œç•°æ­¥</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a0dfd7.html alt="ç•°æ­¥ç·¨ç¨‹å¯¦ä¾‹ï¼šJava8 APIçš„ç†è§£å’ŒCompletableFutureé¡çš„å¯¦ç¾" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1522150125651deaa9d51b2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a0dfd7.html title="ç•°æ­¥ç·¨ç¨‹å¯¦ä¾‹ï¼šJava8 APIçš„ç†è§£å’ŒCompletableFutureé¡çš„å¯¦ç¾">ç•°æ­¥ç·¨ç¨‹å¯¦ä¾‹ï¼šJava8 APIçš„ç†è§£å’ŒCompletableFutureé¡çš„å¯¦ç¾</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c81ec36.html alt=ç•°æ­¥ç·¨ç¨‹æå‡æœå‹™æ€§èƒ½ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15260210063976700d35c2d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c81ec36.html title=ç•°æ­¥ç·¨ç¨‹æå‡æœå‹™æ€§èƒ½>ç•°æ­¥ç·¨ç¨‹æå‡æœå‹™æ€§èƒ½</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9cfcdd6f.html alt=ã€ŠJAVAç·¨ç¨‹æ€æƒ³ã€‹5åˆ†é˜é€Ÿæˆï¼šç¬¬8ç« ï¼ˆå¤šæ…‹ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/399a29d93fde48fca4bae44dffbced07 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9cfcdd6f.html title=ã€ŠJAVAç·¨ç¨‹æ€æƒ³ã€‹5åˆ†é˜é€Ÿæˆï¼šç¬¬8ç« ï¼ˆå¤šæ…‹ï¼‰>ã€ŠJAVAç·¨ç¨‹æ€æƒ³ã€‹5åˆ†é˜é€Ÿæˆï¼šç¬¬8ç« ï¼ˆå¤šæ…‹ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ede16bf9.html alt=ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆäºŒï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/17685aad04c54d02928724fb99fea026 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ede16bf9.html title=ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆäºŒï¼‰>ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆäºŒï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/69e45bf9.html alt=ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆä¸€ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/355d0f0c0f274bdfaeb90747dbd918fb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/69e45bf9.html title=ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆä¸€ï¼‰>ã€Œç·¨ç¨‹åŸºç¤ã€PHPåŸºç¤æ•™ç¨‹ï¼ˆä¸€ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b96f9421.html alt=é›¶åŸºç¤å¦‚ä½•å­¸PHPç·¨ç¨‹èªè¨€ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b96f9421.html title=é›¶åŸºç¤å¦‚ä½•å­¸PHPç·¨ç¨‹èªè¨€ï¼Ÿ>é›¶åŸºç¤å¦‚ä½•å­¸PHPç·¨ç¨‹èªè¨€ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6e6dcd03.html alt=ç·¨ç¨‹æ˜¯ä»€éº¼â€”â€”ä¸–ç•Œç¬¬ä¸€è‡ºé›»å­è¨ˆç®—æ©Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/aac93e54a8f84d04b0d01165200ce1a2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6e6dcd03.html title=ç·¨ç¨‹æ˜¯ä»€éº¼â€”â€”ä¸–ç•Œç¬¬ä¸€è‡ºé›»å­è¨ˆç®—æ©Ÿ>ç·¨ç¨‹æ˜¯ä»€éº¼â€”â€”ä¸–ç•Œç¬¬ä¸€è‡ºé›»å­è¨ˆç®—æ©Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7eb8afcd.html alt=éŠæˆ²å¼•æ“ç·¨ç¨‹éœ€è¦å“ªäº›åŸºæœ¬æ•¸å­¸çŸ¥è­˜ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3f6ca97249fa468db6982c44a024979d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7eb8afcd.html title=éŠæˆ²å¼•æ“ç·¨ç¨‹éœ€è¦å“ªäº›åŸºæœ¬æ•¸å­¸çŸ¥è­˜ï¼Ÿ>éŠæˆ²å¼•æ“ç·¨ç¨‹éœ€è¦å“ªäº›åŸºæœ¬æ•¸å­¸çŸ¥è­˜ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e4bfe813.html alt=UGç·¨ç¨‹ç¨ç•¶ä¸€é¢ï¼Œå¦‚ä½•æé«˜é‘½å­”ç²¾åº¦æ–¹æ³•ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1532093430052c29be7656f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e4bfe813.html title=UGç·¨ç¨‹ç¨ç•¶ä¸€é¢ï¼Œå¦‚ä½•æé«˜é‘½å­”ç²¾åº¦æ–¹æ³•ï¼Ÿ>UGç·¨ç¨‹ç¨ç•¶ä¸€é¢ï¼Œå¦‚ä½•æé«˜é‘½å­”ç²¾åº¦æ–¹æ³•ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f9db061d.html alt=ä¸‰ç›¸ç•°æ­¥é›»å‹•æ©Ÿçµ•ç·£è™•ç†çš„ç›®çš„åŠæ–¹æ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/3c439a15bdf64f1f975914c96a2c66e7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f9db061d.html title=ä¸‰ç›¸ç•°æ­¥é›»å‹•æ©Ÿçµ•ç·£è™•ç†çš„ç›®çš„åŠæ–¹æ³•>ä¸‰ç›¸ç•°æ­¥é›»å‹•æ©Ÿçµ•ç·£è™•ç†çš„ç›®çš„åŠæ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b44410f0.html alt=ç•°æ­¥é›»æ©Ÿå…¸å‹çµæ§‹ç°¡è¿° class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15349080656472f5dd62512 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b44410f0.html title=ç•°æ­¥é›»æ©Ÿå…¸å‹çµæ§‹ç°¡è¿°>ç•°æ­¥é›»æ©Ÿå…¸å‹çµæ§‹ç°¡è¿°</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>