<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>如何設計一個高可用、高併發秒殺系統 | 极客快訊</title><meta property="og:title" content="如何設計一個高可用、高併發秒殺系統 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/276d44d4e08e46c091540e4c54b5b98c"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/87c923e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/87c923e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/87c923e.html><meta property="article:published_time" content="2020-10-29T20:59:27+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:27+08:00"><meta name=Keywords content><meta name=description content="如何設計一個高可用、高併發秒殺系統"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/87c923e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>如何設計一個高可用、高併發秒殺系統</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>作者：vincentsu，騰訊 PCG 後臺開發工程師</p><blockquote><p>如今的互聯網已經在海量服務領域有了很成熟的理論，因此自己也很慶幸，能夠從 0 到 1 完整踐行海量服務。微視春節項目中的集卡瓜分活動，是一個典型的秒殺場景，自己參與其中，分享一些心得和總結。</p></blockquote><p>如今的互聯網已經在海量服務領域有了很成熟的理論，因此自己也很慶幸，能夠從 0 到 1 完整踐行海量服務。微視春節項目中的集卡瓜分活動，是一個典型的秒殺場景，自己參與其中，分享一些心得和總結。</p><h1>秒殺系統的難點</h1><ul><li>友好的用戶體驗</li><li>用戶不能接受破窗的體驗，例如：系統超時、系統錯誤的提示，或者直接 404 頁面</li><li>瞬時高併發流量的挑戰</li><li>木桶短板理論，整個系統的瓶頸往往都在 DB，如何設計出高併發、高可用系統？</li></ul><h1>如何設計</h1><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/276d44d4e08e46c091540e4c54b5b98c></div><p><br></p><p>上圖是一個典型的互聯網業務，用戶完成一個寫操作，一般會通過接入層和邏輯層，這裡的服務都是無狀態，可以通過平行拓展去解決高併發的問題；到了 db 層，必須要落到介質中，可以是磁盤/ssd/內存，如果出現 key 的衝突，會有一些併發控制技術，例如 cas/加鎖/串行排隊等。</p><p><strong>直筒型</strong></p><p>直筒型業務，指的是用戶請求 1:1 的洞穿到 db 層，如下圖所示。在比較簡單的業務中，才會採用這個模型。隨著業務規模複雜度上來，一定會有 db 和邏輯層分離、邏輯層和接入層分離。</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/25e71cf09cae4cd284a786a32ca01ff8></div><p><br></p><p><strong>漏斗型</strong></p><p>漏斗型業務，指的是，用戶的請求，從客戶端到 db 層，層層遞減，遞減的程度視業務而定。例如當 10w 人去搶 1 個物品時，db 層的請求在個位數量級，這就是比較理想的模型。如下圖所示</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f2bfd1310e374b0aa70b93ef240738b6></div><p><br></p><p>這個模型，是高併發的基礎，翻譯一下就是下面這些：</p><ul><li>及早發現，及早拒絕</li><li>Fast Fail</li><li>前端保護後端</li></ul><p><br></p><h1>如何實現漏斗型系統</h1><p>漏斗型系統需要從產品策略/客戶端/接入層/邏輯層/DB 層全方位立體的設計。</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ebc9a259e0d04efdbf0e110d24ba4e8f></div><p><br></p><p>產品策略</p><ul><li>輕重邏輯分離，以秒殺為例，將搶到和到賬分開；</li><li>搶到，是比較輕的操作，庫存扣成功後，就可以成功了</li><li>到賬，是比較重的操作，需要涉及到到事務操作</li><li>用戶分流，以整點秒殺活動為例，在 1 分鐘內，陸續對用戶放開入口，將所有用戶請求打散在 60s 內，請求就可以降一個數量級</li><li>頁面簡化，在秒殺開始的時候，需要簡化頁面展示，該時刻只保留和秒殺相關的功能。例如，秒殺開始的時候，頁面可以不展示推薦的商品。</li></ul><p><br></p><p>客戶端</p><ul><li>重試策略非常關鍵，如果用戶秒殺失敗了，頻繁重試，會加劇後端的雪崩。如何重試呢？根據後端返回碼的約定，有兩種方法：</li><li>不允許重試錯誤，此時 ui 和文案都需要有一個提示。同時不允許重試</li><li>可重試錯誤，需要策略重試，例如二進制退避法。同時文案和 ui 需要提示。</li><li>ui 和文案，秒殺開始前後，用戶的所有異常都需要有精心設計的 ui 和文案提示。例如：【當前活動太火爆，請稍後再重試】【你的貨物堵在路上，請稍後查看】等</li><li>前端隨機丟棄請求可以作為降級方案，當用戶流量遠遠大於系統容量時，人工下發隨機丟棄標記，用戶本地客戶端開始隨機丟棄請求。</li></ul><p><br></p><p>接入層</p><ul><li>所有請求需要鑑權，校驗合法身份</li><li>如果是長鏈接的服務，鑑權粒度可以在 session 級別；如果是短鏈接業務，需要應對這種高併發流量，例如 cache 等</li><li>根據後端系統容量，需要一個全局的限流功能，通常有兩種做法：</li><li>設置好 N 後，動態獲取機器部署情況 M，然後下發單機限流值 N/M。要求請求均勻訪問，部署機器統一。</li><li>維護全局 key，以時間戳建 key。有熱 key 問題，可以通過增加更細粒度的 key 或者定時更新 key 的方法。</li><li>對於單用戶/單 ip 需要頻控，主要是防黑產和惡意用戶。如果秒殺是有條件的，例如需要完成 xxx 任務，解鎖資格，對於獲得資格的步驟，可以進行安全掃描，識別出黑產和惡意用戶。</li></ul><p><br></p><p>邏輯層</p><ul><li>邏輯層首先應該進入校驗邏輯，例如參數的合法性，是否有資格，如果失敗的用戶，快速返回，避免請求洞穿到 db。</li><li>異步補單，對於已經扣除秒殺資格的用戶，如果發貨失敗後，通常的兩種做法是：</li><li>事務回滾，回滾本次行為，提示用戶重試。這個代價特別大，而且用戶重試和前面的重試策略結合的話，用戶體驗也不大流暢。</li><li>異步重做，記錄本次用戶的 log，提示用戶【稍後查看，正在發貨中】，後臺在峰值過後，啟動異步補單。需要服務支持冪等</li><li>對於發貨的庫存，需要處理熱 key。通常的做法是，維護多個 key，每個用戶固定去某個查詢庫存。對於大量人搶紅包的場景，可以提前分配。</li></ul><p><br></p><p>存儲層</p><p>對於業務模型而言，對於 db 的要求需要保證幾個原則：</p><ul><li>可靠性</li><li>主備：主備能互相切換，一般要求在同城跨機房</li><li>異地容災：當一地異常，數據能恢復，異地能選主</li><li>數據需要持久化到磁盤，或者更冷的設備</li><li>一致性</li><li>對於秒殺而言，需要嚴格的一致性，一般要求主備嚴格的一致。</li></ul><p><br></p><h1>實踐——微視集卡瓜分系統</h1><p>微視集卡瓜分項目屬於微視春節項目之一。用戶的體驗流程如下：</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6133eff6e396435097de8b5f74e2ae39></div><p><br></p><p>架構圖</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a47f13bca966442c893c407699b015ba></div><p><br></p><ul><li>客戶端主要是微視主 app 和 h5 頁面，主 app 是入口，h5 頁面是集卡活動頁面和瓜分頁面。</li><li>邏輯部分為分：髮卡來源、集卡模塊、獎品模塊，髮卡來源主要是任務模塊；集卡模塊主要由活動模塊和集卡模塊組成。瓜分部分主要在活動控制層。</li><li>獎品模塊主要是發錢和其他獎品。</li></ul><p>瓜分降級預案</p><p>為了做好瓜分時刻的高併發，對整個系統需要保證兩個重要的事情：</p><ul><li>全鏈路梳理，包括調用鏈的合理性和時延設置</li><li>降級服務預案分析，提升系統的魯棒性</li></ul><p>如下圖所示，是針對瓜分全鏈路調用分析如下圖，需要特別說明的幾點：</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/77c113e69a574c6bba95e6312117f56d></div><p><br></p><ul><li>時延很重要，需要全鏈路分析。不但可以提高吞吐量，而且可以快速暴露系統的瓶頸。</li><li>峰值時刻，補單邏輯需要關閉，避免加劇雪崩。</li></ul><p>我們的降級預案大概如下：</p><ul><li>一級預案，瓜分時刻前後 5 分鐘自動進入：</li><li>入口處 1 分鐘內陸續放開入口倒計時，未登錄用戶不彈入口</li><li>主會場排隊，進入主會場以 100wqps 為例，超過了進入排隊，由接入層頻控控制</li><li>拉取資格接口排隊，拉取資格接口 100wqps，超過了進入排隊，由接入層頻控控制</li><li>搶紅包排隊，搶紅包 100wqps，超過了進入排隊，由接入層頻控控制</li><li>紅包到賬排隊，如果資格扣除成功，現金髮放失敗，進入排隊，24 小時內到賬。異步補單</li><li>入口處調用後端非關鍵 rpc:ParticipateStatus，手動關閉</li><li>異步補單邏輯關閉。</li><li>二級預案，後端隨機丟請求，接入層頻控失效或者下游服務過載，手動開啟進入</li><li>三級預案，前端隨機丟請求，後端服務過載或者宕機進入。手動開啟</li></ul><p>綜上，整個瓜分時刻體驗如下所示：</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/8dbb1710bf004552b7a9119364c79cb0></div><p><br></p><p>回顧下漏斗模型，總結下整個實踐：</p><div class=pgc-img><img alt=如何設計一個高可用、高併發秒殺系統 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/75f8eec593bc42f5a59056e0ef1c5f63></div><p><br></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>設計</a></li><li><a>一個</a></li><li><a>發秒</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/09d03a85.html alt=垂直簾創新設計，一個簡單的裝置就可以改變世界 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ebdbcb9549954b97a575d2f13e13de62 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/09d03a85.html title=垂直簾創新設計，一個簡單的裝置就可以改變世界>垂直簾創新設計，一個簡單的裝置就可以改變世界</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f6448fbf.html alt=一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6090b10ff8b34110a3cdbedd89424db0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f6448fbf.html title=一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏>一個登陸功能究竟如何設計測試用例？我把文章都整理好了，收藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bf666261.html alt=設計一個電子束光刻機原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bf666261.html title=設計一個電子束光刻機原理>設計一個電子束光刻機原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/041e4095.html alt=如何設計一個安全對外的接口？加簽驗簽了解一下 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/75d54ee4e7cf4557ae1f70b4655a74a0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/041e4095.html title=如何設計一個安全對外的接口？加簽驗簽了解一下>如何設計一個安全對外的接口？加簽驗簽了解一下</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7df5800c.html alt=用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/184a185c5dbe4d49a9bbc6c9a982063f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7df5800c.html title=用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的>用SW設計一個帶滑塊停留的連桿機構，所用的零件都是入門級的</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/16f06603.html alt=手把手教你設計一個自動旋轉工作臺，看到即是賺到。 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/562f9337-6531-4b2d-91e5-7933e2832e81 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16f06603.html title=手把手教你設計一個自動旋轉工作臺，看到即是賺到。>手把手教你設計一個自動旋轉工作臺，看到即是賺到。</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24095cc.html alt=一個開關電源工程師的設計筆記（三）變壓器設計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/97b4147ba9ef4bf99dec61784b728511 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24095cc.html title=一個開關電源工程師的設計筆記（三）變壓器設計>一個開關電源工程師的設計筆記（三）變壓器設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95b0a0d.html alt=接地是電子設計中一個極其重要的問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95b0a0d.html title=接地是電子設計中一個極其重要的問題>接地是電子設計中一個極其重要的問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2abb7ea.html alt=「系統設計」如何設計一個“穩、準、快”的秒殺系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5f1b283fc044438c93611d0f29613b9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2abb7ea.html title=「系統設計」如何設計一個“穩、準、快”的秒殺系統>「系統設計」如何設計一個“穩、準、快”的秒殺系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9359c34.html alt=如何設計一個小而美的秒殺系統？[轉] class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fd5e8a47853a445abb0430ea164219f7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9359c34.html title=如何設計一個小而美的秒殺系統？[轉]>如何設計一個小而美的秒殺系統？[轉]</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62228be.html alt=看十年架構師，如何設計一個優秀的分佈式系統 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d8103b3dfaa14ffeab22134e2f6e0b0c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62228be.html title=看十年架構師，如何設計一個優秀的分佈式系統>看十年架構師，如何設計一個優秀的分佈式系統</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb199be.html alt=如何從零開始設計一個億級系統架構？總結萬字的完整思路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cbce349ae3974d7bbd85e6caf4d27ca7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb199be.html title=如何從零開始設計一個億級系統架構？總結萬字的完整思路>如何從零開始設計一個億級系統架構？總結萬字的完整思路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/11e35eb.html alt=不要小看一個小小的螺絲孔尺寸設計，裡面大有文章 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/56ed480e583d43d4850b4f43509de83c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/11e35eb.html title=不要小看一個小小的螺絲孔尺寸設計，裡面大有文章>不要小看一個小小的螺絲孔尺寸設計，裡面大有文章</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3b1695b.html alt=用SW設計一個無齒60度傳動裝置，具體如何實用，有待進一步開發 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e2404c2aee7c47d986cebe9494de047a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3b1695b.html title=用SW設計一個無齒60度傳動裝置，具體如何實用，有待進一步開發>用SW設計一個無齒60度傳動裝置，具體如何實用，有待進一步開發</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/844d97b.html alt=想做一個好設計，模具彈簧計算的方法，忽視不得！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/77f8b13e9f4847218b8c0d3635f4740a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/844d97b.html title=想做一個好設計，模具彈簧計算的方法，忽視不得！>想做一個好設計，模具彈簧計算的方法，忽視不得！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>