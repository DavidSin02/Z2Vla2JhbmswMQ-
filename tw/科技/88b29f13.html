<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>關於static和const的解釋 | 极客快訊</title><meta property="og:title" content="關於static和const的解釋 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/ccda3473-d99c-47b5-8199-6c5b471a81e6"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/88b29f13.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/88b29f13.html><meta property="article:published_time" content="2020-11-14T20:59:56+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:56+08:00"><meta name=Keywords content><meta name=description content="關於static和const的解釋"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/88b29f13.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>關於static和const的解釋</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>static 是c++中很常用的修飾符，它被用來控制變量的存儲方式和可見性，下面我將從 static 修飾符的產生原因、作用談起，全面分析static 修飾符的實質。</p><p><strong>static 的兩大作用:</strong></p><p><strong>一、控制存儲方式：</strong></p><p>　　static被引入以告知編譯器，將變量存儲在程序的靜態存儲區而非棧上空間。</p><p>　　1、引出原因：函數內部定義的變量，在程序執行到它的定義處時，編譯器為它在棧上分配空間，大家知道，函數在棧上分配的空間在此函數執行結束時會釋放掉，這樣就產生了一個問題: 如果想將函數中此變量的值保存至下一次調用時，如何實現？</p><p>最容易想到的方法是定義一個全局的變量，但定義為一個全局變量有許多缺點，最明顯的缺點是破壞了此變量的訪問範圍（使得在此函數中定義的變量，不僅僅受此函數控制）。</p><p>　　2、 解決方案：因此c++ 中引入了static，用它來修飾變量，它能夠指示編譯器將此變量在程序的靜態存儲區分配空間保存，這樣即實現了目的，又使得此變量的存取範圍不變。</p><p><strong>二、控制可見性與連接類型 :</strong></p><p>　　static還有一個作用，它會把變量的可見範圍限制在編譯單元中，使它成為一個內部連接，這時，它的反義詞為”extern”.</p><p>　　static作用分析總結：static總是使得變量或對象的存儲形式變成靜態存儲，連接方式變成內部連接，對於局部變量（已經是內部連接了），它僅改變其存儲方式；對於全局變量（已經是靜態存儲了），它僅改變其連接類型。</p><p><br></p><p><strong>類中的static成員：</strong></p><p><strong>一、出現原因及作用：</strong></p><p>　　1、需要在一個類的各個對象間交互，即需要一個數據對象為整個類而非某個對象服務。</p><p>　　2、同時又力求不破壞類的封裝性,即要求此成員隱藏在類的內部，對外不可見。</p><p>　　類的static成員滿足了上述的要求，因為它具有如下特徵：有獨立的存儲區，屬於整個類。</p><p><strong>二、注意：</strong></p><p>　　1、對於靜態的數據成員，連接器會保證它擁有一個單一的外部定義。靜態數據成員按定義出現的先後順序依次初始化，注意靜態成員嵌套時，要保證所嵌套的成員已經初始化了。消除時的順序是初始化的反順序。</p><p>　　2、類的靜態成員函數是屬於整個類而非類的對象，所以它沒有this指針，這就導致了它僅能訪問類的靜態數據和靜態成員函數。</p><p>const 是c++中常用的類型修飾符，但我在工作中發現，許多人使用它僅僅是想當然爾，這樣,有時也會用對，但在某些微妙的場合，可就沒那麼幸運了，究其實質原由，大多因為沒有搞清本源。故在本篇中我將對const進行辨析。溯其本源，究其實質，希望能對大家理解const有所幫助，根據思維的承接關係，分為如下幾個部分進行闡述。</p><p><br></p><p><strong>c++中為什麼會引入const</strong></p><p>　　c++的提出者當初是基於什麼樣的目的引入（或者說保留）const關鍵字呢？，這是一個有趣又有益的話題，對<strong>理解const</strong>很有幫助。</p><p>1． 大家知道，c++有一個類型嚴格的編譯系統，這使得c++程序的錯誤在編譯階段即可發現許多，從而使得出錯率大為減少，因此，也成為了c++與c相比，有著突出優點的一個方面。</p><p>2． c中很常見的預處理指令 #define variablename variablevalue 可以很方便地進行值替代，這種值替代至少在<strong>三個方面優點突出</strong>：</p><p>　　一是避免了意義模糊的數字出現，使得程序語義流暢清晰，如下例：</p><p>　　#define user_num_max 107 這樣就避免了直接使用107帶來的困惑。</p><p>　　二是可以很方便地進行參數的調整與修改，如上例，當人數由107變為201時，進改動此處即可，</p><p>　　三是提高了程序的執行效率，由於使用了預編譯器進行值替代，並不需要為這些常量分配存儲空間，所以執行的效率較高。</p><p>　　鑑於以上的優點，這種預定義指令的使用在程序中隨處可見。</p><p>3． 說到這裡，大家可能會迷惑上述的1點、2點與const<strong>有什麼關係呢</strong>？好，請接著向下看：</p><p>　　預處理語句雖然有以上的許多優點，但它有個比較致命的缺點，即，預處理語句僅僅只是簡單值替代，缺乏類型的檢測機制。這樣預處理語句就不能享受c++嚴格類型檢查的好處，從而可能成為引發一系列錯誤的隱患。</p><p>4．好了，第一階段結論出來了：</p><p>結論： const 推出的初始目的，正是為了取代預編譯指令，消除它的缺點，同時繼承它的優點。</p><p>現在它的形式變成了：</p><p>const datatype variablename = variablevalue ;</p><p><br></p><p><strong>為什麼const能很好地取代預定義語句？</strong></p><p><strong>const 到底有什麼大神通，使它可以振臂一揮取代預定義語句呢？</strong></p><p><strong>1． 首先</strong>，以const 修飾的常量值，具有不可變性，這是它能取代預定義語句的基礎。</p><p><strong>2． 第二</strong>，很明顯，它也同樣可以避免意義模糊的數字出現，同樣可以很方便地進行參數的調整和修改。</p><p><strong>3． 第三</strong>，c++的編譯器通常不為普通const常量分配存儲空間，而是將它們保存在符號表中，這使得它成為一個編譯期間的常量，沒有了存儲與讀內存的操作，使得它的效率也很高，同時，這也是它取代預定義語句的重要基礎。這裡，我要提一下，為什麼說這一點是也是它能取代預定義語句的基礎，這是因為，編譯器不會去讀存儲的內容，如果編譯器為const分配了存儲空間，它就不能夠成為一個編譯期間的常量了。</p><p><strong>4． 最後</strong>，const定義也像一個普通的變量定義一樣，它會由編譯器對它進行類型的檢測，消除了預定義語句的隱患。</p><div class=pgc-img><img alt=關於static和const的解釋 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/ccda3473-d99c-47b5-8199-6c5b471a81e6><p class=pgc-img-caption></p></div><p><br></p><p><strong>const 使用情況分類詳析</strong></p><p><br></p><p>1.const 用於指針的兩種情況分析：</p><pre>　int const *a; 　file://a可變，*a不可變　int *const a; 　file://a不可變，*a可變 </pre><p>　　分析：const 是一個左結合的類型修飾符，它與其左側的類型修飾符和為一個類型修飾符，所以，int const 限定 *a,不限定a。int *const 限定a,不限定*a。</p><p><br></p><p>2.const 限定函數的傳遞值參數：</p><pre>　void fun(const int var);</pre><p>　　分析：上述寫法限定參數在函數體中不可被改變。由值傳遞的特點可知，var在函數體中的改變不會影響到函數外部。所以，此限定與函數的使用者無關，僅與函數的編寫者有關。</p><p>結論：最好在函數的內部進行限定，對外部調用者屏蔽，以免引起困惑。如可改寫如下：</p><pre>void fun(int var){const int &amp; varalias = var;varalias .........} </pre><p>3.const 限定函數的值型返回值：</p><pre>const int fun1(); const myclass fun2();</pre><p>　分析:上述寫法限定函數的返回值不可被更新，當函數返回內部的類型時（如fun1），已經是一個數值，當然不可被賦值更新，所以，此時const無意義，最好去掉，以免困惑。當函數返回自定義的類型時（如fun2），這個類型仍然包含可以被賦值的變量成員，所以，此時有意義。</p><p>4. 傳遞與返回地址： 此種情況最為常見，由地址變量的特點可知，適當使用const，意義昭然。</p><p>5.　const 限定類的成員函數：</p><pre>class classname {　public:　　int fun() const;　.....}</pre><p>　　注意：採用此種const 後置的形式是一種規定，亦為了不引起混淆。在此函數的聲明中和定義中均要使用const,因為const已經成為類型信息的一部分。</p><p>獲得能力：可以操作常量對象。</p><p>失去能力：不能修改類的數據成員，不能在函數中調用其他不是const的函數。</p><p>　　在本篇中，const方面的知識我講的不多，因為我不想把它變成一本c++的教科書。我只是想詳細地闡述它的實質和用處. 我會盡量說的很詳細，因為我希望在一種很輕鬆隨意的氣氛中說出自己的某些想法，畢竟，編程也是輕鬆，快樂人生的一部分。有時候，你會驚歎這其中的世界原來是如此的精美。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>關於</a></li><li><a>static</a></li><li><a>const</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html alt=面試總結：關於MySQL事務的10個問題常見面試問答 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/1669c986-315c-4339-a5a0-a918a47f2e57 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html title=面試總結：關於MySQL事務的10個問題常見面試問答>面試總結：關於MySQL事務的10個問題常見面試問答</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/813d5912.html alt=關於Facebook像素，這些你瞭解嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RM0p5dK51SH9EU style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/813d5912.html title=關於Facebook像素，這些你瞭解嗎？>關於Facebook像素，這些你瞭解嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/13eee8fe.html alt="清理“奇葩”證明 提升基層治理效能——《關於改進和規範基層群眾性自治組織出具證明工作的指導意見》專家談" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R69nEZm84HSieS style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/13eee8fe.html title="清理“奇葩”證明 提升基層治理效能——《關於改進和規範基層群眾性自治組織出具證明工作的指導意見》專家談">清理“奇葩”證明 提升基層治理效能——《關於改進和規範基層群眾性自治組織出具證明工作的指導意見》專家談</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8b79295e.html alt=木材切削原理與刀具：關於木工刀具的角度設計與角度大小的選擇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/63844235ae1b4c45b355eda2c960bcb9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8b79295e.html title=木材切削原理與刀具：關於木工刀具的角度設計與角度大小的選擇>木材切削原理與刀具：關於木工刀具的角度設計與角度大小的選擇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a9f75477.html alt=關於木工刀具角度 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RLlITHkB9DnhAe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a9f75477.html title=關於木工刀具角度>關於木工刀具角度</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/33e967e0.html alt=關於剪力牆豎向鋼筋邊緣柱和牆接頭位置區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/33fe00ab44c7473dbd7fa648247eee4a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/33e967e0.html title=關於剪力牆豎向鋼筋邊緣柱和牆接頭位置區別>關於剪力牆豎向鋼筋邊緣柱和牆接頭位置區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1def0f00.html alt=關於虹吸壺萃取咖啡的最全攻略，建議珍藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/98751a91-fbb9-4713-a234-f36643728b2c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1def0f00.html title=關於虹吸壺萃取咖啡的最全攻略，建議珍藏>關於虹吸壺萃取咖啡的最全攻略，建議珍藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/66b7e1d9.html alt=關於0.5mA漏電微斷技術探討 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f132e3d2677c45618d948224c1ed810a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/66b7e1d9.html title=關於0.5mA漏電微斷技術探討>關於0.5mA漏電微斷技術探討</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/92675aff.html alt=關於哈希表，你該瞭解這些 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8d18861a74ac4577abd03b0064a1016b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/92675aff.html title=關於哈希表，你該瞭解這些>關於哈希表，你該瞭解這些</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/52e8abe1.html alt=關於工程造價，你瞭解嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/52e8abe1.html title=關於工程造價，你瞭解嗎？>關於工程造價，你瞭解嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5dd7bf7c.html alt="福建頂點軟件股份有限公司 關於2020年第三季度使用閒置自有資金購買理財產品的彙總公告" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5dd7bf7c.html title="福建頂點軟件股份有限公司 關於2020年第三季度使用閒置自有資金購買理財產品的彙總公告">福建頂點軟件股份有限公司 關於2020年第三季度使用閒置自有資金購買理財產品的彙總公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/98b62aa2.html alt="福建頂點軟件股份有限公司 關於持股5%以上股東減持達到1%的 提示性公告" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/98b62aa2.html title="福建頂點軟件股份有限公司 關於持股5%以上股東減持達到1%的 提示性公告">福建頂點軟件股份有限公司 關於持股5%以上股東減持達到1%的 提示性公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cff1b9cf.html alt=福建頂點軟件股份有限公司關於2019年度利潤分配及資本公積轉增股本的公告 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cff1b9cf.html title=福建頂點軟件股份有限公司關於2019年度利潤分配及資本公積轉增股本的公告>福建頂點軟件股份有限公司關於2019年度利潤分配及資本公積轉增股本的公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c6ca8689.html alt=關於汙水中氨氮的主要去除方法概述 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/a8e941c3-b471-4bab-853f-38d690a79628 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c6ca8689.html title=關於汙水中氨氮的主要去除方法概述>關於汙水中氨氮的主要去除方法概述</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2b05180c.html alt=關於2020年上半年日照市百項重點工業項目實施情況的通報（日工強辦發〔2020〕7號） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/6a52a8b38cbf488ca6d9a3faf7614fbf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2b05180c.html title=關於2020年上半年日照市百項重點工業項目實施情況的通報（日工強辦發〔2020〕7號）>關於2020年上半年日照市百項重點工業項目實施情況的通報（日工強辦發〔2020〕7號）</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>