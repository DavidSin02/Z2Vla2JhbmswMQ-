<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>如何禁止公司內網主機訪問外網？ | 极客快訊</title><meta property="og:title" content="如何禁止公司內網主機訪問外網？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RZecx6II5jZ2WA"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8925034.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8925034.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8925034.html><meta property="article:published_time" content="2020-10-29T21:05:53+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:53+08:00"><meta name=Keywords content><meta name=description content="如何禁止公司內網主機訪問外網？"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/8925034.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>如何禁止公司內網主機訪問外網？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>有朋友多次問到，如何讓企業的某個部分只能訪問內網，不能訪問外網，這個在企業實際應用中非常廣泛，為了保密，會使企業的部分網絡禁止與外部通信。</p><p>這裡面我們就需要用到ACL了，首先我們來了解下ACL，ACL即訪問控制列表，那麼它有什麼作用呢？</p><p></p><h2><strong>ACL的作用</strong></h2><p>1、ACL可以限制網絡流量、提高網絡性能。例如，ACL可以根據數據包的協議，指定數據包的優先級。</p><p>2、ACL提供對通信流量的控制手段。例如，ACL可以限定或簡化路由更新信息的長度，從而限制通過路由器某一網段的通信流量。</p><p>3、ACL是提供網絡安全訪問的基本手段。ACL允許主機A訪問人力資源網絡，而拒絕主機B訪問。</p><p>4、ACL可以在路由器端口處決定哪種類型的通信流量被轉發或被阻塞。例如，用戶可以允許E-mail通信流量被路由，拒絕所有的Telnet通信流量。</p><p>例如：</p><p>某部門要求只能使用 WWW 這個功能，就可以通過ACL實現；</p><p>又例如，</p><p>為了某部門的保密性，不允許其訪問外網，也不允許外網訪問它，就可以通過ACL實現。</p><p>那麼我們來看下實例，如何實現使用 ACL 限制內網主機訪問外網。</p><p><strong>1、案例</strong></p><p>某公司通過交換機實現各部門之間的互連。現要求Switch能夠禁止研發部和市場部的部分主機訪問外網，防止公司機密洩露。以華為例。</p><p><strong>1、拓撲圖</strong></p><img alt=如何禁止公司內網主機訪問外網？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RZecx6II5jZ2WA><p><strong>2、配置思路</strong></p><p>採用如下的思路在Switch上進行配置：</p><p>1、配置基本ACL和基於ACL的流分類，使設備可以對研發部與市場部的指定主機的 報文進行過濾。</p><p>2、配置流行為，拒絕匹配上ACL的報文通過。</p><p>3. 配置並應用流策略，使ACL和流行為生效。</p><p><strong>步驟1 配置接口所屬的VLAN以及接口的IP地址</strong></p><p># 創建VLAN10和VLAN20。</p><p>&lt;HUAWEI> system-view</p><p>[HUAWEI] sysname Switch</p><p>[Switch] vlan batch 10 20</p><p># 配置Switch的接口GE0/0/1、GE0/0/2為trunk類型接口，並分別加入VLAN10和 VLAN20；配置Switch的接口GE0/0/3為trunk類型接口，加入VLAN10和VLAN20。</p><p>[Switch] interface gigabitethernet 0/0/1</p><p>[Switch-GigabitEthernet0/0/1] port link-type trunk</p><p>[Switch-GigabitEthernet0/0/1] port trunk allow-pass vlan 10</p><p>[Switch-GigabitEthernet0/0/1] quit</p><p>[Switch] interface gigabitethernet 0/0/2</p><p>[Switch-GigabitEthernet0/0/2] port link-type trunk</p><p>[Switch-GigabitEthernet0/0/2] port trunk allow-pass vlan 20</p><p>[Switch-GigabitEthernet0/0/2] quit</p><p>[Switch] interface gigabitethernet 0/0/3</p><p>[Switch-GigabitEthernet0/0/3] port link-type trunk</p><p>[Switch-GigabitEthernet0/0/3] port trunk allow-pass vlan 10 20</p><p>[Switch-GigabitEthernet0/0/3] quit</p><p># 創建VLANIF10和VLANIF20，並配置各VLANIF接口的IP地址。</p><p>[Switch] interface vlanif 10</p><p>[Switch-Vlanif10] ip address 10.1.1.1 24</p><p>[Switch-Vlanif10] quit</p><p>[Switch] interface vlanif 20</p><p>[Switch-Vlanif20] ip address 10.1.2.1 24</p><p>[Switch-Vlanif20] quit</p><p>這裡面普及下vlanif接口和vlan端口的區別：</p><p><strong>（1）vlan端口：</strong>是物理端口，通常我們通過配置access vlan 10 使某個物理接口屬於vlan 10</p><p><strong>（2）vlan if ：</strong>interface vlan 是邏輯端口，通常這個接口地址作為vlan下面用戶的網關。</p><p><strong>步驟2 配置ACL</strong></p><p># 創建基本ACL 2001並配置ACL規則，拒絕源IP地址為10.1.1.11和10.1.2.12的主機的報 文通過。</p><p>[Switch] acl 2001</p><p>[Switch-acl-basic-2001] rule deny source 10.1.1.11 0 //禁止IP地址為10.1.1.11的主機訪問外網</p><p>[Switch-acl-basic-2001] rule deny source 10.1.2.12 0 //禁止IP地址為10.1.2.12的主機訪問外網</p><p>[Switch-acl-basic-2001] quit</p><p><strong>步驟3 配置基於基本ACL的流分類</strong></p><p>#配置基於基本ACL的流分類 # 配置流分類tc1，對匹配ACL 2001的報文進行分類。</p><p>[Switch] traffic classifier tc1 //創建流分類</p><p>[Switch-classifier-tc1] if-match acl 2001 //將ACL與流分類關聯</p><p>[Switch-classifier-tc1] quit</p><p><strong>步驟4 配置流行為</strong></p><p># 配置流行為tb1，動作為拒絕報文通過。</p><p>[Switch] traffic behavior tb1 //創建流行為</p><p>[Switch-behavior-tb1] deny //配置流行為動作為拒絕報文通過 [Switch-behavior-tb1] quit</p><p><strong>步驟5 配置流策略</strong></p><p># 定義流策略，將流分類與流行為關聯。</p><p>[Switch] traffic policy tp1 //創建流策略</p><p>[Switch-trafficpolicy-tp1] classifier tc1 behavior tb1 //將流分類tc1與流行為tb1關聯</p><p>[Switch-trafficpolicy-tp1] quit</p><p><strong>步驟6 在接口下應用流策略</strong></p><p># 由於內網主機訪問外網的流量均從接口GE0/0/3出口流向Internet，所以可以在接口 GE0/0/3的出方向應用流策略。</p><p>[Switch] interface gigabitethernet 0/0/3</p><p>[Switch-GigabitEthernet0/0/3] traffic-policy tp1 outbound //流策略應用在接口出方向</p><p>[Switch-GigabitEthernet0/0/3] quit</p><p><strong>3、驗收配置結果</strong></p><p># 查看ACL規則的配置信息</p><img alt=如何禁止公司內網主機訪問外網？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RZecx6ZJCtxX7G><p># 查看流分類的配置信息。</p><img alt=如何禁止公司內網主機訪問外網？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RZecx6n6aZfhk1><p># 查看流策略的配置信息。</p><img alt=如何禁止公司內網主機訪問外網？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RZecx6y1E4U3N1><p>IP地址為10.1.1.11和10.1.2.12的主機無法訪問外網，其他主機均可以訪問外網。</p><p>最新弱電資料更新—弱電最新各類經典項目ppt方案（8月4日）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>內網</a></li><li><a>主機訪</a></li><li><a>問外網</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/92398cfe.html alt=什麼是內網、公網和NAT？讀懂這一篇就夠！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9fbdb7afa9ae4b0fba8caa8617dd79a8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/92398cfe.html title=什麼是內網、公網和NAT？讀懂這一篇就夠！>什麼是內網、公網和NAT？讀懂這一篇就夠！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7c24c50f.html alt=增加一條內網，如何實現外網內網同時使用，路由器設置介紹。 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d6c35985a44e4ca2891acaaa77beb69e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7c24c50f.html title=增加一條內網，如何實現外網內網同時使用，路由器設置介紹。>增加一條內網，如何實現外網內網同時使用，路由器設置介紹。</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c7b9be29.html alt=三維通信：公司聚焦室內網優覆蓋設備及服務 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c7b9be29.html title=三維通信：公司聚焦室內網優覆蓋設備及服務>三維通信：公司聚焦室內網優覆蓋設備及服務</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/50a6ac6.html alt="搭建內網Linux CentOS yum源，擺脫依賴包困擾" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b7f2a741a968426db73f06ed116508f3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/50a6ac6.html title="搭建內網Linux CentOS yum源，擺脫依賴包困擾">搭建內網Linux CentOS yum源，擺脫依賴包困擾</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ed0bdc.html alt=內網穿透端口映射太複雜？用蒲公英X1旁路路由器，真的很簡單 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7fa9e357a3b8414aa8144f4bd11736f2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ed0bdc.html title=內網穿透端口映射太複雜？用蒲公英X1旁路路由器，真的很簡單>內網穿透端口映射太複雜？用蒲公英X1旁路路由器，真的很簡單</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dfeb7c5.html alt=如何禁止外網訪問公司內網服務器？ACL配置立馬解決 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/09dc0542ea0a4ea78010b5ed2e201e03 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dfeb7c5.html title=如何禁止外網訪問公司內網服務器？ACL配置立馬解決>如何禁止外網訪問公司內網服務器？ACL配置立馬解決</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/82b865d.html alt=公司內網監控桌面如何實現？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c20f399b98654536935a94ac9978ce77 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/82b865d.html title=公司內網監控桌面如何實現？>公司內網監控桌面如何實現？</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>