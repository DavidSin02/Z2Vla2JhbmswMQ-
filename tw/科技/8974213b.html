<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>接口測試框架實戰（三）| JSON 請求與響應斷言 | 极客快訊</title><meta property="og:title" content="接口測試框架實戰（三）| JSON 請求與響應斷言 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/3f2fc8fe5b6f46039e98a04ed5467444"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8974213b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/8974213b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/8974213b.html><meta property="article:published_time" content="2020-11-14T21:03:15+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:15+08:00"><meta name=Keywords content><meta name=description content="接口測試框架實戰（三）| JSON 請求與響應斷言"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/8974213b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>接口測試框架實戰（三）| JSON 請求與響應斷言</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt="接口測試框架實戰（三）| JSON 請求與響應斷言" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3f2fc8fe5b6f46039e98a04ed5467444><p class=pgc-img-caption></p></div><blockquote><p>關注公眾號，獲取測試開發實戰乾貨合輯。本文節選自霍格沃茲《測試開發實戰進階》課程教學內容，進階學習文末加群。</p></blockquote><p>數據驅動就是通過數據的改變驅動自動化測試的執行，最終引起測試結果的改變。簡單來說，就是<strong>參數化在自動化測試中的應用</strong>。</p><p>測試過程中使用<strong>數據驅動的優勢</strong>主要體現在以下幾點：</p><ol start=1><li>提高代碼複用率，相同的測試邏輯只需編寫一條測試用例，就可以被多條測試數據複用，提高了測試代碼的複用率，同時提高了測試代碼的編寫效率。</li><li>異常排查效率高，測試框架依據測試數據，每條數據生成一條測試用例，用例執行過程相互隔離。如果其中一條失敗，不會影響其他的測試用例。</li><li>代碼可維護性高，清晰的測試框架利於其他測試工程師閱讀，提高代碼的可維護性。</li></ol><h3 class=pgc-h-arrow-right>測試數據的數據驅動</h3><p>數據量小的測試用例可以使用代碼的參數化來實現數據驅動，數據量大的情況下建議大家使用一種結構化的文件（例如 YAML，JSON 等）來對數據進行存儲，然後在測試用例中讀取這些數據。</p><h4 class=pgc-h-arrow-right>參數化實現數據驅動</h4><p>Pytest 提供了 @pytest.mark.parametrize 裝飾器來進行參數化，可以使用參數化來實現數據驅動。代碼如下：</p><pre><code>import pytest@pytest.mark.parametrize("key, stock_type, price", [        ("alibaba", "BABA", 200),        ("JD", "JD", 20)    ])    def test_search_data(self, key, stock_type, price):        assert self.main.goto_search_page().\        search(key).get_price(stock_type) &gt; price</code></pre><p>上面的代碼首先使用 @pytest.mark.parametrize 裝飾器，傳遞了兩組數據，測試結果顯示有兩條測試用例被執行，而不是一條測試用例。也就是 Pytest 會將兩組測試數據自動生成兩個對應的測試用例並執行，生成兩條測試結果。</p><h4 class=pgc-h-arrow-right>使用 YAML 文件實現數據驅動</h4><p>當測試數據量大的情況下，可以考慮把數據存儲在結構化的文件中。從文件中讀取出代碼中所需要格式的數據，傳遞到測試方法中執行。這裡推薦大家使用 YAML 類型的文件來存儲測試數據。YAML 使用動態字段進行結構化，它以數據為中心，比 Excel、CSV、JSON、XML 等更適合做數據驅動。</p><p>下面，我們將上面參數化的兩組數據存儲到 YAML 文件中，創建一個 data/searchdata.yml 文件，代碼如下：</p><pre><code>-  - 'alibaba'  - 'BABA'  - 200-  - 'JD'  - 'JD'  - 20</code></pre><p>上面的代碼定義了一個 yaml 格式的數據文件 searchdata.yml ，文件中定義了一個列表，列表中有兩組數據，最後生成的是這樣的數據格式：[["alibaba", "BABA", 200],["JD", "JD", 20]] 。</p><p>下一步將測試用例中參數化的數據改造成從 searchdata.yml 文件中讀取，代碼如下：</p><pre><code>import pytestimport yaml@pytest.mark.parametrize("search_key, type, price",\yaml.safe_load(open("../data/searchdata.yml")))    def test_search(self, search_key, type, price):        assert self.main.goto_search_page().\        search(search_key).get_price(type)&gt;price</code></pre><p>上面的代碼，只需要使用 yaml.safe_load() 方法，就來讀取 searchdata.yml 文件中的數據，分別傳入到用例 test_search() 方法中完成數據的輸入與結果的驗證。而如果使用 Excel、CSV 文件格式進行數據的存儲，需要先從 Excel 文件中讀取數據，再解析成需要的格式。而使用 YAML 則完全省去了這個過程。</p><p>以上，關於其他環節的數據驅動，在後續章節分享。</p><p>(文章來源於霍格沃茲測試學院）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>測試</a></li><li><a>實戰</a></li><li><a>JSON</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/8ecc39cc.html alt="接口測試框架實戰（四）| 搞定 Schema 斷言" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ab43a63e33b04df19787c1a94bf26718 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8ecc39cc.html title="接口測試框架實戰（四）| 搞定 Schema 斷言">接口測試框架實戰（四）| 搞定 Schema 斷言</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cfc7290d.html alt=OpenCV項目實戰---人臉檢測 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f267e46946554437b5ffe48234f3b78d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cfc7290d.html title=OpenCV項目實戰---人臉檢測>OpenCV項目實戰---人臉檢測</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fcc2ad9e.html alt=音頻編碼實戰 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/aacf5cab-b987-443f-815e-236f984fb2d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fcc2ad9e.html title=音頻編碼實戰>音頻編碼實戰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d1c2a0c.html alt=塑料扯斷伸長率的概念及測試要點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/6fe0ba07-c929-4046-9216-7f6d5eaa1716 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d1c2a0c.html title=塑料扯斷伸長率的概念及測試要點>塑料扯斷伸長率的概念及測試要點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/02729303.html alt=java實戰項目常用類，Date、Calendar、BigDecimal、Math、UUID class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d69c7c9d8b85444da9360e334ba6555d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/02729303.html title=java實戰項目常用類，Date、Calendar、BigDecimal、Math、UUID>java實戰項目常用類，Date、Calendar、BigDecimal、Math、UUID</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ebbbc375.html alt=時間繼電器測試儀的使用方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1205bf787f1f4de6a5f1e73e7737887b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ebbbc375.html title=時間繼電器測試儀的使用方法>時間繼電器測試儀的使用方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/73ba27bb.html alt=老股民總結的賣出技巧實戰圖解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/7575000bb7b8e57fa260 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/73ba27bb.html title=老股民總結的賣出技巧實戰圖解>老股民總結的賣出技巧實戰圖解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/22408815.html alt=股票交易指南：實戰圖解經典的賣出技巧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15305260751844061be70e0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/22408815.html title=股票交易指南：實戰圖解經典的賣出技巧>股票交易指南：實戰圖解經典的賣出技巧</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/eaa95354.html alt=股票賣出實戰技術圖解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/88520001219b9b7dabd2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/eaa95354.html title=股票賣出實戰技術圖解>股票賣出實戰技術圖解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bee6be40.html alt=河北省邯鄲市計量測試所大力實施專業技能提升行動 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bee6be40.html title=河北省邯鄲市計量測試所大力實施專業技能提升行動>河北省邯鄲市計量測試所大力實施專業技能提升行動</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9b084990.html alt=介質損耗測試儀的操作方法與注意事項 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/1a746168-e5df-4643-9117-3f1fb4faf100 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9b084990.html title=介質損耗測試儀的操作方法與注意事項>介質損耗測試儀的操作方法與注意事項</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d38b572e.html alt=有關於射頻測試設備：電纜/天線分析儀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/0e79c2e668d84f09be994180e66f90c8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d38b572e.html title=有關於射頻測試設備：電纜/天線分析儀>有關於射頻測試設備：電纜/天線分析儀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0f90fbd.html alt=透氣性、透氣度測試知多少？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/45ac8fb9-3365-4327-901d-b21b7cd9cbbf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0f90fbd.html title=透氣性、透氣度測試知多少？>透氣性、透氣度測試知多少？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/26e2bf51.html alt=振動測試中需要了解的27個常識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/523bd012e455466f857587d9314c3084 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/26e2bf51.html title=振動測試中需要了解的27個常識>振動測試中需要了解的27個常識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/72951256.html alt=現場密度測試方法——灌砂法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/4e780002be67a3fa5bad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72951256.html title=現場密度測試方法——灌砂法>現場密度測試方法——灌砂法</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>