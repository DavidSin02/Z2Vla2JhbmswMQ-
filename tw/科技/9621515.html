<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「五分鐘讀懂」芯片常用數字接口（8）CAN總線 | 极客快訊</title><meta property="og:title" content="「五分鐘讀懂」芯片常用數字接口（8）CAN總線 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a15cde4091f94fb28da07a32e474c680"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9621515.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9621515.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9621515.html><meta property="article:published_time" content="2020-10-29T20:52:59+08:00"><meta property="article:modified_time" content="2020-10-29T20:52:59+08:00"><meta name=Keywords content><meta name=description content="「五分鐘讀懂」芯片常用數字接口（8）CAN總線"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/9621515.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「五分鐘讀懂」芯片常用數字接口（8）CAN總線</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><strong>【CAN總線概述】</strong></p><p>CAN（Controller Area Network）總線是控制器局域網絡的簡稱，由BOSCH公司提出一種大量應用於車載控制系統，工業局域網的現場總線。</p><p><strong>【CAN總線應用框圖】</strong></p><div class=pgc-img><img alt=「五分鐘讀懂」芯片常用數字接口（8）CAN總線 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a15cde4091f94fb28da07a32e474c680><p class=pgc-img-caption>圖1 CAN應用框圖</p></div><p>一個CAN總線可以掛載多個CAN節點，CAN節點通過CAN收發器接入CAN總線。任意CAN節點均可通過仲裁獲取總線控制權（多主機系統）。CAN節點通過對比總線上報文的ID信息，若ID匹配則選擇接收幀。CAN總線為異步總線，總線內進行通信前需要統一總線中所有節點的傳輸速率。</p><p><strong>【CAN總線接口信號】</strong></p><div class=pgc-img><img alt=「五分鐘讀懂」芯片常用數字接口（8）CAN總線 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2872a0dbe40b4bd49d8f3044db1eec12><p class=pgc-img-caption>表1 CAN接口信號</p></div><p>CAN收發器與CAN節點直接通過CMOS電平通信。CAN收發器負責監聽CAN總線上的電平通過RXD發送給CAN節點。同時CAN節點通過TXD控制CAN收發器向總線發送信息。TXD為0時，CAN收發器發送顯性電平（CANH-CANL>0.9v，CANH比CANL電平高）；TXD為1時，發送隱形電平（CANH-CANL&lt;0.5v，CANH和CANL電平相同）。</p><p><strong>【CAN總線數據/遠程幀格式】</strong></p><div class=pgc-img><img alt=「五分鐘讀懂」芯片常用數字接口（8）CAN總線 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/db8219b4d6cb4b03a081c72e95d5df65><p class=pgc-img-caption>圖2 CAN數據/遠程幀標準幀格式</p></div><p>CAN總共有4種消息類型：數據幀，遠程幀，錯誤幀，過載幀。數據幀和遠程幀格式類似如圖2所示，數據/遠程幀由多個域組成：</p><ul><li><em><strong>幀間隔：</strong></em>當總線空閒時，總線為隱形電平（1）。</li></ul><ul><li><em><strong>幀起始：</strong></em>CAN節點向總線發送1bit顯性電平（0），標誌幀起始位</li></ul><ul><li><em><strong>仲裁域</strong></em>：仲裁域包含兩部分，11bit的ID指示幀發送節點身份標識，1bit RTR（Remote Transmission Request）指示該幀為數據幀（顯性電平）還是遠程幀（隱性電平）。該域之所以稱之為仲裁域，是因為其除了承載上述信息外，還被應用於CAN總線獨特的非破壞性仲裁機制。其仲裁原理為，當多個CAN節點向總線同時發送CAN數據/遠程幀時，當發送至仲裁域時，對於ID數值大的節點就會檢測到總線上的電平與其發送的電平不匹配於是其終止發送，直到剩下ID數值最小的幀，繼續發送。<strong> </strong>CAN總線為線與邏輯，有一個節點發送0則總線為0，所有節點發送1才為1，因此ID在逐位發送時（高位先傳）必然是數字小的ID可以始終保持和總線電平一致，最終能獲取總線控制權。仲裁失敗的節點在總線空閒時，自動重發幀。</li></ul><ul><li><em><strong>控制域：</strong></em>控制域總共6bit，高2bit為保留位（顯性電平），低4bit DLC（Data Length Code）指示數據域長度，可以是0~8字節。對於遠程幀DLC域無意義。</li></ul><ul><li><em><strong>數據域：</strong></em>0~8字節數據Payload，數據長度由DLC決定。遠程幀該域長度為0。</li></ul><ul><li><em><strong>CRC域：</strong></em>包含15bit CRC，1bit CRC定界符（隱性電平）。CRC保護範圍從幀起始符開始至數據域結束。</li></ul><ul><li><em><strong>ACK域：</strong></em>2bit長度，包含ACK Slot和ACK定界符。對於發送方，該兩bit均為隱性電平，接收方如果正確接收則將ACK Slot位置為顯性電平。</li></ul><ul><li><em><strong>幀結束：</strong></em>ACK域結束後發送7bit隱性電平，標識本次幀發送完畢。</li></ul><p>數據幀用於發送節點向接收節點發送數據，遠程幀為接收節點主動向總線上發起發送數據請求。</p><div class=pgc-img><img alt=「五分鐘讀懂」芯片常用數字接口（8）CAN總線 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2a5d148de5334b1fb3dc36531caf5751><p class=pgc-img-caption>圖3 CAN數據/遠程幀擴展幀格式</p></div><p>數據幀和遠程幀格式有標準幀格式和擴展幀格式的區別，擴展幀格式如圖3所示。擴展幀和標準幀的差異在仲裁域的不同，擴展幀通過拓寬仲裁域達到拓寬ID位寬（11bità19bit）。為了擴展幀和標準幀兼容，增加了SRR（隱性電平）和IDE（隱性電平）域，這樣對於CAN節點來說區分擴展幀和標準幀僅需要檢查從幀起始開始第12bit（SRR/RTR），第13bit（IDE/R1）的電平即可。{bit12,bit13}=2’bx0則為標準幀，{bit12,bit13}=2’b11則為擴展幀。</p><p>數據/遠程幀在發送至總線時會進行位填充編碼。當節點檢測到發送數據中包含5個連續隱性或者顯性電平時會增加一位反型數據。CAN節點只會對數據/遠程幀從幀起始到CRC域（不包含CRC定界符）數據進行位填充編碼。</p><p>【CAN總線其他幀格式】</p><div class=pgc-img><img alt=「五分鐘讀懂」芯片常用數字接口（8）CAN總線 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5ccd04eafad6473f9b950084cd9c95c6><p class=pgc-img-caption>圖4 CAN錯誤幀格式</p></div><p>錯誤幀，用於某節點檢測到錯誤後，告知總線上其他節點。如圖4所示，錯誤幀由錯誤標識域、錯誤定界符由兩部分組成，。</p><ul><li><em><strong>錯誤標識域：</strong></em>分主動錯誤標識和被動錯誤標識兩種類型。對於獲得總線控制權的節點（主動節點）檢測到錯誤時，發起連續6個顯性電平稱為主動錯誤標識。總線上的被動節點識別到錯誤後，啟動發送6個隱性電平稱為被動錯誤標識。如果此時主動節點未發現錯誤被動錯誤幀被忽略。錯誤標識會在不同節點中重疊，因此在總線上看到的錯誤標識符長度可能為6~12位。</li></ul><ul><li><em><strong>錯誤定界符：</strong></em>節點在總線上檢測到第1個隱性電平後，再發送7位的隱性電平，則錯誤幀發送完畢。</li></ul><p>過載幀，某個接收節點沒有做好接收下一幀數據的準備時，將發送過載幀以通知發送節點。過載幀和錯誤幀格式相同，過載標識域對應錯誤標識域，過載定界符對應錯誤定界符。區別在於錯誤幀在只會在幀發送過程中出現，過載幀只會在幀間隔中出現。</p><p><strong>【參考資料】</strong></p><p><em>CAN Specification 2.0</em> Sep.1991,BOSCH</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>鐘讀</a></li><li><a>數字</a></li><li><a>總線</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/aaa2476.html alt="「五分鐘讀懂」芯片常用數字接口（5） QSPI" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/515c5785259d499e92dfe11db00722f7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/aaa2476.html title="「五分鐘讀懂」芯片常用數字接口（5） QSPI">「五分鐘讀懂」芯片常用數字接口（5） QSPI</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/461acd2.html alt=「五分鐘讀懂」芯片常用數字接口（7）I2S class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/31694b0f8c9d45aa842b69e22b0847ec style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/461acd2.html title=「五分鐘讀懂」芯片常用數字接口（7）I2S>「五分鐘讀懂」芯片常用數字接口（7）I2S</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3c5292d6.html alt="2019年度數字孿生城市之無人機 航攝應用及真三維建模技術培訓班" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3c5292d6.html title="2019年度數字孿生城市之無人機 航攝應用及真三維建模技術培訓班">2019年度數字孿生城市之無人機 航攝應用及真三維建模技術培訓班</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bc3f7e61.html alt="「新制造 新格局」數字孿生引領虛擬製造" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bc3f7e61.html title="「新制造 新格局」數字孿生引領虛擬製造">「新制造 新格局」數字孿生引領虛擬製造</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/489352f0.html alt=強氧配合中傳動畫與數字藝術學院組織的虛擬製作技術交流會結束 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/f4d699a353d746088b22598027faced3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/489352f0.html title=強氧配合中傳動畫與數字藝術學院組織的虛擬製作技術交流會結束>強氧配合中傳動畫與數字藝術學院組織的虛擬製作技術交流會結束</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/25707bf3.html alt="海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ccecc8a705b74016a0d67974abf3b156 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/25707bf3.html title="海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生">海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4e49d1f3.html alt=信息編碼：數字和文字是如何誕生的？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1f3d0677443e48bfbb2435b71f6da199 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4e49d1f3.html title=信息編碼：數字和文字是如何誕生的？>信息編碼：數字和文字是如何誕生的？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/17a36096.html alt=傳統廣播與數字廣播的區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e39a9b4cac0347d8829c87ee93f86af4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/17a36096.html title=傳統廣播與數字廣播的區別>傳統廣播與數字廣播的區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b021af7a.html alt=你聽到的“槍聲”，是數字模式的怒吼！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/101c00004f8ca9f754d2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b021af7a.html title=你聽到的“槍聲”，是數字模式的怒吼！>你聽到的“槍聲”，是數字模式的怒吼！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0994626b.html alt=模擬電路，數字電路，電子工程師經驗筆記！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/a02e9fe5-2b6f-489f-b57f-78ac8ebb8f65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0994626b.html title=模擬電路，數字電路，電子工程師經驗筆記！>模擬電路，數字電路，電子工程師經驗筆記！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb57a216.html alt=螺栓頭上的數字代表什麼含義？螺栓強度等級劃分 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/84f6e6d1ea3145c0a756c8b68a88623d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb57a216.html title=螺栓頭上的數字代表什麼含義？螺栓強度等級劃分>螺栓頭上的數字代表什麼含義？螺栓強度等級劃分</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ec40b9ff.html alt=HT2565數字雙顯絕緣電阻測試儀八大特性 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/470c00024671e0357f68 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ec40b9ff.html title=HT2565數字雙顯絕緣電阻測試儀八大特性>HT2565數字雙顯絕緣電阻測試儀八大特性</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8362ae1.html alt=簡易基礎數字集成電路小製作——電容測試儀 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a736c74d1f1d48c887afe14db1bf1c48 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8362ae1.html title=簡易基礎數字集成電路小製作——電容測試儀>簡易基礎數字集成電路小製作——電容測試儀</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/847a2aa0.html alt=“數字基底”，讓城市更聰明更智慧 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/847a2aa0.html title=“數字基底”，讓城市更聰明更智慧>“數字基底”，讓城市更聰明更智慧</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1a3ee55d.html alt=臺達PLC、伺服、總線在多線切割機排線應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/81b4f47eaf02436d85835d3a63750236 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1a3ee55d.html title=臺達PLC、伺服、總線在多線切割機排線應用>臺達PLC、伺服、總線在多線切割機排線應用</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>