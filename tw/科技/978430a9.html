<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>IO字節輸入流輸出流的實用講解 | 极客快訊</title><meta property="og:title" content="IO字節輸入流輸出流的實用講解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/978430a9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/978430a9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/978430a9.html><meta property="article:published_time" content="2020-10-29T21:09:47+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:47+08:00"><meta name=Keywords content><meta name=description content="IO字節輸入流輸出流的實用講解"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/978430a9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>IO字節輸入流輸出流的實用講解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><h2 class="md-end-block md-heading">介紹</h2><ul><li>IO流，主要是用於處理數據的傳輸，包含字節輸入流，字節輸出流，字符輸入流，字符輸出流，今天著重說下字節流；</li></ul><p>所有的字節輸入流繼承 InputStream</p><ul><li>InputStream，這個抽象類是表示輸入字節流的所有類的超類。</li><li>BufferedInputStream，當創建BufferedInputStream時，將創建一個內部緩衝區數組。 當從流中讀取或跳過字節時，內部緩衝區將根據需要從所包含的輸入流中重新填充，一次有多個字節。 mark操作會記住輸入流中的一點，並且reset操作會導致從最近的mark操作之後讀取的所有字節在從包含的輸入流中取出新的字節之前重新讀取。</li><li>ByteArrayInputStream，包含一個內部緩衝區，其中包含可以從流中讀取的字節； 內部計數器跟蹤read方法要提供的下一個字節 。</li><li>FileInputStream，獲取文件輸入流。</li></ul><p>所有的字節輸出流繼承 OutputStream</p><ul><li>OutputStream，這個抽象類是表示字節輸出流的所有類的超類。 輸出流接收輸出字節並將其發送到某個接收器。</li></ul><ul><li>BufferedOutputStream，該類實現緩衝輸出流。 通過設置這樣的輸出流，應用程序可以向底層輸出流寫入字節，而不必為寫入的每個字節導致底層系統的調用。</li><li>ByteArrayOutputStream，該類實現了將數據寫入字節數組的輸出流。 當數據寫入緩衝區時，緩衝區會自動增長。</li><li>FileOutputStream，文件輸出流是用於將數據寫入到文件。</li></ul><p>使用輸入流輸出流時注意是否需要成對出現，就好比大管道小管道似的，輸入管道要與輸出管道匹配才行。</p><h2 class="md-end-block md-heading">IO流使用</h2><p>使用以上介紹的輸入輸出流，簡單的測試代碼</p><ul><li>BufferedInputStream</li></ul><pre><code> &nbsp; &nbsp;public static void main(String[] args) { &nbsp; &nbsp; &nbsp; &nbsp;try ( InputStream inputStream =new FileInputStream(&#34;E:\\測試.txt&#34;);//讀取文件輸入流 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);//聲明BufferedInputStream &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OutputStream outputStream = new FileOutputStream(&#34;E:\\測試輸出.txt&#34;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(outputStream) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ){ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//每次讀取1024個字節 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;byte[] buffer=new byte[1024]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int len; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//讀到文件末尾時返回-1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while ((len = bufferedInputStream.read(buffer))!=-1){ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//b - 數據。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//off - 數據中的起始偏移量。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//len - 要寫入的字節數。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bufferedOutputStream.write(buffer,0,len); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bufferedOutputStream.flush();//刷新此輸出流，並強制將任何緩衝的輸出字節寫入流 &nbsp; &nbsp; &nbsp;  } catch (FileNotFoundException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } catch (IOException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } &nbsp;  }</code></pre><ul><li>ByteArrayOutputStream</li></ul><p>讀取固定的字節數，效率上肯定是有一定的影響的</p><pre><code> &nbsp; &nbsp;public static void main(String[] args) { &nbsp; &nbsp; &nbsp; &nbsp;try(InputStream inputStream =new FileInputStream(&#34;E:\\測試.txt&#34;);//讀取文件輸入流 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int len = -1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;byte[] buffer = new byte[1024]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;while ((len = inputStream.read(buffer)) != -1) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outputStream.write(buffer, 0, len); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(outputStream.toString(&#34;gb2312&#34;)); &nbsp; &nbsp; &nbsp;  } catch (FileNotFoundException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } catch (IOException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } &nbsp;  }</code></pre><p>接著使用StreamUtils或者Hutool工具轉換文件輸入流為字節數組</p><pre><code> &nbsp; &nbsp;public static void main(String[] args) { &nbsp; &nbsp; &nbsp; &nbsp;try(InputStream inputStream =new FileInputStream(&#34;E:\\測試.txt&#34;);//讀取文件輸入流 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;byte[] bytes = StreamUtils.copyToByteArray(inputStream); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;outputStream.write(bytes); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(outputStream.toString(&#34;gb2312&#34;)); &nbsp; &nbsp; &nbsp;  } catch (FileNotFoundException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } catch (IOException e) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.printStackTrace(); &nbsp; &nbsp; &nbsp;  } &nbsp;  }</code></pre><h2 class="md-end-block md-heading">遇到的問題</h2><p>使用流操作時，就一定要注意資源是否關閉，如果是手動關閉，則需要注意的是關閉的順序，遵循後打開的流先關閉的順序。</p><p>如果非正常關閉，則會造成資源的浪費，文件的寫入錯誤，如zip文件會出現 “不可預料的壓縮文件末端”導致無法打開。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>IO</a></li><li><a>節輸</a></li><li><a>輸出</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/566b8be3.html alt=動力輸出傳動齒輪失效淺析及整改措施 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/48044ceae6a54a43865a9a93497a0dfc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/566b8be3.html title=動力輸出傳動齒輪失效淺析及整改措施>動力輸出傳動齒輪失效淺析及整改措施</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6c56eb26.html alt=散列表和IO class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/97b8afef46e3488f9e0b27792550266b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6c56eb26.html title=散列表和IO>散列表和IO</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/09897862.html alt=說說功放輸出功率 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/c37a6b568da44ec1906328d56fbe6a2f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/09897862.html title=說說功放輸出功率>說說功放輸出功率</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ed63538.html alt=合肥研究院在改善離軸積分腔輸出光譜信號方面獲進展 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Ret3lwW8K4IJAL style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ed63538.html title=合肥研究院在改善離軸積分腔輸出光譜信號方面獲進展>合肥研究院在改善離軸積分腔輸出光譜信號方面獲進展</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/07beccda.html alt=PHP輸出緩衝區詳細教程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/07beccda.html title=PHP輸出緩衝區詳細教程>PHP輸出緩衝區詳細教程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9753c7b3.html alt="動力輸出平順 試駕奇瑞全新瑞虎7 1.5T車型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d9f3082ab6294e819f60d8c0e881815c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9753c7b3.html title="動力輸出平順 試駕奇瑞全新瑞虎7 1.5T車型">動力輸出平順 試駕奇瑞全新瑞虎7 1.5T車型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ae042690.html alt=動力輸出平順性的主要影響因素有哪些？你可能被老司機套路了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2f1d6b53d5204b1eada53d9a7f6f727e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ae042690.html title=動力輸出平順性的主要影響因素有哪些？你可能被老司機套路了>動力輸出平順性的主要影響因素有哪些？你可能被老司機套路了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8a3d9e7a.html alt=「JAVA」從格式化輸出到掃描輸入，深究Java正則表達式匹配之道 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/ea11259e-5098-451f-b989-4e3169a16a1c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8a3d9e7a.html title=「JAVA」從格式化輸出到掃描輸入，深究Java正則表達式匹配之道>「JAVA」從格式化輸出到掃描輸入，深究Java正則表達式匹配之道</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e3e39d2f.html alt=計算機輸入輸出系統的概論-I/O設備編址 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/2fabdb4c-7e98-4e78-aee6-f04dab55e4d2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e3e39d2f.html title=計算機輸入輸出系統的概論-I/O設備編址>計算機輸入輸出系統的概論-I/O設備編址</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a8fbe992.html alt=把輸入/輸出接口視為存儲單元，與存儲器統一編址 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1526536447865be6f7e7065 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a8fbe992.html title=把輸入/輸出接口視為存儲單元，與存儲器統一編址>把輸入/輸出接口視為存儲單元，與存儲器統一編址</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f67ff69d.html alt=恆流輸出模式下LCC諧振變換器的特性與設計-AET class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RBJY8pwGfVAAiM style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f67ff69d.html title=恆流輸出模式下LCC諧振變換器的特性與設計-AET>恆流輸出模式下LCC諧振變換器的特性與設計-AET</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bab183da.html alt=輸入輸出接口電路是主機與外部設備連接的邏輯控制部件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/6b97626a4ebe4e599e78b0933f04b785 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bab183da.html title=輸入輸出接口電路是主機與外部設備連接的邏輯控制部件>輸入輸出接口電路是主機與外部設備連接的邏輯控制部件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ba3a2c0f.html alt=800G端口開啟商用，IO銅纜互聯還能走多遠？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/11af985785594241ba53b769be5a617f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ba3a2c0f.html title=800G端口開啟商用，IO銅纜互聯還能走多遠？>800G端口開啟商用，IO銅纜互聯還能走多遠？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f9ec74be.html alt="Advanced Energy推出多路輸出的Ascent MS中頻交流電源解決方案" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S6wTUpf59gFEJW style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f9ec74be.html title="Advanced Energy推出多路輸出的Ascent MS中頻交流電源解決方案">Advanced Energy推出多路輸出的Ascent MS中頻交流電源解決方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d5283201.html alt=輸出時常用的幾種存儲格式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/5b530000a38e974a1206 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d5283201.html title=輸出時常用的幾種存儲格式>輸出時常用的幾種存儲格式</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>