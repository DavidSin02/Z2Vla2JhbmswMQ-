<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ç¶²çµ¡é€šä¿¡3ï¼šHTTPå¯¦ç¾æ–‡æœ¬å‚³è¼¸ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ç¶²çµ¡é€šä¿¡3ï¼šHTTPå¯¦ç¾æ–‡æœ¬å‚³è¼¸ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9940ac4.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9940ac4.html><meta property="article:published_time" content="2020-10-29T21:04:30+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:30+08:00"><meta name=Keywords content><meta name=description content="ç¶²çµ¡é€šä¿¡3ï¼šHTTPå¯¦ç¾æ–‡æœ¬å‚³è¼¸"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/9940ac4.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ç¶²çµ¡é€šä¿¡3ï¼šHTTPå¯¦ç¾æ–‡æœ¬å‚³è¼¸</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>HTTPå”è­°å³è¶…æ–‡æœ¬å‚³é€å”è­°(Hypertext Transfer Protocol )ï¼Œæ˜¯Webè¯ç¶²çš„åŸºç¤ï¼ŒHTTPå”è­°æ˜¯å»ºç«‹åœ¨TCPå”è­°ä¹‹ä¸Šçš„ä¸€ç¨®æ‡‰ç”¨ã€‚ç”±æ–¼HTTPåœ¨æ¯æ¬¡è«‹æ±‚çµæŸå¾Œéƒ½æœƒä¸»å‹•é‡‹æ”¾é€£æ¥ï¼Œå› æ­¤HTTPé€£æ¥æ˜¯ä¸€ç¨®çŸ­é€£æ¥ã€‚HTTPéµå¾ªè«‹æ±‚ï¼ˆRequestï¼‰/æ‡‰ç­”ï¼ˆResponseï¼‰æ¨¡å‹ã€‚æ‰€ä»¥ä¸€å®šéœ€è¦å¯¦ç¾è«‹æ±‚(Gk8HttpRequest)ã€‚åŒæ™‚éœ€è¦å¯¦ç¾è¿”å›(Gk8HttpResponse)ã€‚åœ¨éŠæˆ²ç ”ç™¼ç·¨ç¨‹ä¸­HTTPè«‹æ±‚é¡å‹å¸¸ç”¨çš„å°±æ˜¯GETå’ŒPOSTã€‚æ¡†æ¶è¨­è¨ˆä¸­å°±éœ€è¦å¯¦ç¾å®ŒæˆHTTPè«‹æ±‚å’Œè¿”å›çš„Gk8HttpClienté¡ã€‚HTTPä¸ç®¡æ˜¯æ–‡æœ¬å‚³è¼¸é‚„æ˜¯äºŒé€²åˆ¶å‚³è¼¸Gk8HttpClienté¡éƒ½èƒ½å…¼å®¹å®ŒæˆéŸ¿æ‡‰çš„åŠŸèƒ½ã€‚HTTPæ–‡æœ¬å‚³è¼¸æ–¹ä¾¿ç°¡æ½”ã€‚å¯¦ç¾è¼•é‡ç´šé€šä¿¡çš„æœ€ä½³æ–¹å¼ã€‚</p><p>libCurlä½œç‚ºæ˜¯ä¸€å€‹å¤šå”è­°çš„ä¾¿æ–¼å®¢æˆ¶ç«¯ä½¿ç”¨çš„URLå‚³è¼¸åº«ï¼ŒåŸºæ–¼Cèªè¨€ï¼Œæä¾›Cèªè¨€çš„APIæ¥å£ã€‚åº•å±¤é€šä¿¡éƒ½æ˜¯ä½¿ç”¨libCurlåº«ä¾†å®Œæˆã€‚å…·é«”å¯æ‰¾ç›¸é—œè³‡æ–™å’Œåƒé–±ç›¸é—œä»£ç¢¼ã€‚Cèªè¨€å°è£é–‹ç™¼çš„å„ªå‹¢å°±æ˜¯æ”¯æŒè·¨å¹³è‡ºã€‚Windowså¹³è‡ºï¼Œå®‰å“å¹³è‡ºï¼ŒIOSå¹³è‡ºã€‚è·¨å¹³è‡ºé·ç§»ä»£ç¢¼ç„¡éœ€å†æ¬¡é–‹ç™¼ã€‚ä¸€å‹æ°¸é€¸çš„è§£æ±ºé€šä¿¡å•é¡Œã€‚ç‚ºäº†æ–¹ä¾¿é–‹ç™¼æ™‚HTTPä½µç™¼å’Œå›èª¿ã€‚åˆå¯¦ç¾äº†Gk8HttpServleté¡(httpnetç›®éŒ„ä¸­)ã€‚é«˜åº¦å°è£çš„ä»£ç¢¼ç›®çš„å°±æ˜¯æ˜“æ–¼ç†è§£ä¾¿æ–¼ä½¿ç”¨ã€‚</p><p>C++å¯¦ç¾ç¶²çµ¡HTTPè«‹æ±‚é¡ï¼šGk8HttpRequest.h</p><pre><code>&nbsp;#ifndef __GK8HTTPREQUEST_H__&nbsp;#define __GK8HTTPREQUEST_H__&nbsp;â€‹&nbsp;#pragma once&nbsp;#include &#34;Gk8BaseObj.h&#34;&nbsp;#include &#34;Gk8ByteMaker.h&#34;&nbsp;#include &#34;Gk8Str.h&#34;&nbsp;â€‹&nbsp;typedef GK8_VOID (Gk8BaseObj::*HTTPREQUEST_CALLBACK_FUN)(GK8_LPVOID pHttpResponse);&nbsp;â€‹&nbsp;class Gk8HttpRequest&nbsp;{&nbsp;public:&nbsp;    //[å®šç¾©HTTPè«‹æ±‚é¡å‹]&nbsp;    typedef enum&nbsp;    {&nbsp;        kHttpGet,&nbsp;        kHttpPost,&nbsp;        kHttpUnkown,&nbsp;    }HttpRequestType;&nbsp;â€‹&nbsp;protected:&nbsp;    HttpRequestType m_eRequestType;         //[HTTPè«‹æ±‚é¡å‹]&nbsp;    Gk8Str m_sHttpUrl;                      //[HTTPè«‹æ±‚åœ°å€]&nbsp;    Gk8ByteMaker m_iRequestData;            //[HTTPè«‹æ±‚æ•¸æ“š]&nbsp;    Gk8BaseObj* m_pTarget;                  //[HTTPè«‹æ±‚å›èª¿ç›®æ¨™å°è±¡]&nbsp;    HTTPREQUEST_CALLBACK_FUN m_pSelector;   //[HTTPè«‹æ±‚å›èª¿å‡½æ•¸]&nbsp;public:&nbsp;    Gk8HttpRequest()&nbsp;    {&nbsp;        m_eRequestType=kHttpUnkown;&nbsp;        m_sHttpUrl.Empty();&nbsp;        m_iRequestData.Destroy();&nbsp;        m_pTarget=NULL;&nbsp;        m_pSelector=NULL;&nbsp;    };&nbsp;â€‹&nbsp;    virtual ~Gk8HttpRequest()&nbsp;    {&nbsp;        ClearRequestData();&nbsp;    };&nbsp;    inline GK8_VOID ClearRequestData()&nbsp;    {&nbsp;        m_iRequestData.Destroy();&nbsp;    }&nbsp;    inline GK8_VOID SetRequestType(HttpRequestType eRequestType)&nbsp;    {&nbsp;        m_eRequestType=eRequestType;&nbsp;    };&nbsp;â€‹&nbsp;    inline HttpRequestType GetRequestType()&nbsp;    {&nbsp;        return m_eRequestType;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_VOID SetHttpUrl(GK8_LPCSTR lpHttpUrl)&nbsp;    {&nbsp;        m_sHttpUrl=lpHttpUrl;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_LPCSTR GetHttpUrl()&nbsp;    {&nbsp;        return m_sHttpUrl;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_VOID SetRequestData(Gk8ByteMaker* pRequestData)&nbsp;    {&nbsp;        pRequestData-&gt;ShiftTo(m_iRequestData);&nbsp;    };&nbsp;â€‹&nbsp;    inline Gk8ByteMaker* GetRequestData()&nbsp;    {&nbsp;        return &m_iRequestData;&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_INT GetRequestDataSize()&nbsp;    {&nbsp;        return m_iRequestData.GetStreamSize();&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_VOID SetResponseCallBack(Gk8BaseObj* pTarget,HTTPREQUEST_CALLBACK_FUN pSelector)&nbsp;    {&nbsp;        m_pTarget=pTarget;&nbsp;        m_pSelector=pSelector;&nbsp;    }&nbsp;â€‹&nbsp;    inline Gk8BaseObj* GetTarget()&nbsp;    {&nbsp;        return m_pTarget;&nbsp;    }&nbsp;â€‹&nbsp;    inline HTTPREQUEST_CALLBACK_FUN GetSelector()&nbsp;    {&nbsp;        return m_pSelector;&nbsp;    }&nbsp;};&nbsp;#endif</code></pre><p>C++å¯¦ç¾ç¶²çµ¡HTTPè¿”å›é¡ï¼šGk8HttpResponse.h</p><pre><code>&nbsp;#ifndef __GK8HTTPRESPONSE_H__&nbsp;#define __GK8HTTPRESPONSE_H__&nbsp;â€‹&nbsp;#pragma once&nbsp;#include &#34;Gk8HttpRequest.h&#34;&nbsp;â€‹&nbsp;â€‹&nbsp;class Gk8HttpResponse&nbsp;{&nbsp;protected:&nbsp;    Gk8HttpRequest* m_pHttpRequest;         //[HTTPè«‹æ±‚é¡]&nbsp;    GK8_BOOL m_bSucceed;                    //[HTTPè«‹æ±‚åé¥‹æˆåŠŸ]&nbsp;    Gk8ByteMaker m_iResponseData;           //[HTTPè«‹æ±‚åé¥‹æ•¸æ“š]&nbsp;    GK8_INT m_nResponseCode;                //[HTTPè«‹æ±‚åé¥‹ç¢¼]&nbsp;    Gk8Str m_sErrorBuffer;                  //[HTTPè«‹æ±‚éŒ¯èª¤ä¿¡æ¯]&nbsp;protected:&nbsp;    GK8_BOOL InitWithRequest(Gk8HttpRequest* pHttpRequest);&nbsp;â€‹&nbsp;public:&nbsp;â€‹&nbsp;    Gk8HttpResponse(Gk8HttpRequest* pHttpRequest)&nbsp;    {&nbsp;        m_pHttpRequest=pHttpRequest;&nbsp;        m_bSucceed=false;&nbsp;        m_iResponseData.Destroy();&nbsp;        m_sErrorBuffer.Empty();&nbsp;    }&nbsp;â€‹&nbsp;    virtual ~Gk8HttpResponse()&nbsp;    {&nbsp;        if(m_pHttpRequest) delete m_pHttpRequest;&nbsp;        ClearResponseData();&nbsp;    }&nbsp;    inline GK8_VOID ClearResponseData()&nbsp;    {&nbsp;        m_iResponseData.Destroy();&nbsp;    }&nbsp;â€‹&nbsp;    inline Gk8HttpRequest* GetHttpRequest()&nbsp;    {&nbsp;        return m_pHttpRequest;&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_VOID SetSucceed(GK8_BOOL bSucceed)&nbsp;    {&nbsp;        m_bSucceed=bSucceed;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_BOOL IsSucceed()&nbsp;    {&nbsp;        return m_bSucceed;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_VOID SetResponseData(Gk8ByteMaker* pResponseData)&nbsp;    {&nbsp;        pResponseData-&gt;ShiftTo(m_iResponseData);&nbsp;    }&nbsp;â€‹&nbsp;    inline Gk8ByteMaker* GetResponseData()&nbsp;    {&nbsp;        return &m_iResponseData;&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_VOID SetResponseCode(GK8_INT nResponseCode)&nbsp;    {&nbsp;        m_nResponseCode=nResponseCode;&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_INT GetResponseCode()&nbsp;    {&nbsp;        return m_nResponseCode;&nbsp;    }&nbsp;â€‹&nbsp;    inline GK8_VOID SetErrorBuffer(GK8_LPCSTR lpErrorBuffer)&nbsp;    {&nbsp;        m_sErrorBuffer=lpErrorBuffer;&nbsp;    };&nbsp;â€‹&nbsp;    inline GK8_LPCSTR GetErrorBuffer()&nbsp;    {&nbsp;        return m_sErrorBuffer;&nbsp;    }&nbsp;};&nbsp;â€‹&nbsp;#endif</code></pre><p>C++å¯¦ç¾HTTPé€šä¿¡é¡ï¼šGk8HttpClient.h</p><pre><code>&nbsp;#ifndef __GK8HTTPCLIENT_H__&nbsp;#define __GK8HTTPCLIENT_H__&nbsp;â€‹&nbsp;#pragma once&nbsp;#include &#34;Gk8HttpRequest.h&#34;&nbsp;#include &#34;Gk8HttpResponse.h&#34;&nbsp;â€‹&nbsp;â€‹&nbsp;class Gk8HttpClient&nbsp;{&nbsp;private:&nbsp;    GK8_INT m_nTimeOutForConnect;       //[é€£æ¥è¶…æ™‚æ™‚é–“]&nbsp;    GK8_INT m_nTimeOutForRead;          //[è®€å–è¶…æ™‚æ™‚é–“]&nbsp;â€‹&nbsp;private:&nbsp;    Gk8HttpClient();&nbsp;    virtual ~Gk8HttpClient();&nbsp;â€‹&nbsp;    GK8_BOOL InitThreadSemphore();&nbsp;public:&nbsp;â€‹&nbsp;    inline GK8_VOID SetTimeoutForConnect(GK8_INT nTimeOutForConnect){m_nTimeOutForConnect=nTimeOutForConnect;};&nbsp;    inline GK8_INT GetTimeoutForConnect(){return m_nTimeOutForConnect;}&nbsp;â€‹&nbsp;    inline GK8_VOID SetTimeoutForRead(GK8_INT nTimeOutForRead){m_nTimeOutForRead=nTimeOutForRead;};&nbsp;    inline GK8_INT GetTimeoutForRead(){return m_nTimeOutForRead;};&nbsp;â€‹&nbsp;    GK8_VOID Send(Gk8HttpRequest* pHttpRequest);&nbsp;â€‹&nbsp;    GK8_VOID HttpClientTick();&nbsp;    static Gk8HttpClient* GetInstance();&nbsp;};&nbsp;#endif</code></pre><p>C++å¯¦ç¾HTTPé€šä¿¡é¡ï¼šGk8HttpClient.cpp</p><pre><code>&nbsp;&nbsp;#include &#34;Gk8HttpClient.h&#34;&nbsp;#include &#34;curl/curl.h&#34;&nbsp;#include &#34;Gk8OperSys.h&#34;&nbsp;#include &#34;Gk8SetMb.cpp&#34;&nbsp;â€‹&nbsp;#include &lt;queue&gt;&nbsp;#include &lt;pthread.h&gt;&nbsp;#include &lt;semaphore.h&gt;&nbsp;#include &lt;errno.h&gt;&nbsp;#include &lt;fcntl.h&gt;&nbsp;â€‹&nbsp;â€‹&nbsp;static Gk8HttpClient* sg_pHttpClient=NULL;      //[éœæ…‹HTTPå®¢æˆ¶ç«¯]&nbsp;â€‹&nbsp;static GK8_BOOL sg_bHttpClientQuit=false;       //[é€€å‡ºHTTP]&nbsp;static sem_t* sg_pSem=NULL;                     //[ä¿¡è™Ÿé‡çš„æ•¸æ“šé¡å‹]&nbsp;static GK8_INT sg_AsyncRequestCount=0;          //[åŒæ­¥è«‹æ±‚æ•¸]&nbsp;â€‹&nbsp;//[ç·šç¨‹åŠäº’æ–¥å®šç¾©]&nbsp;static pthread_t sg_NetWorkThread;              //[HTTPç·šç¨‹]&nbsp;static pthread_mutex_t sg_RequestQueueMutex;    //[HTTPè«‹æ±‚éšŠåˆ—äº’æ–¥é«”]&nbsp;static pthread_mutex_t sg_ResponseQueueMutex;   //[HTTPéŸ¿æ‡‰éšŠåˆ—äº’æ–¥é«”]&nbsp;â€‹&nbsp;static Gk8SetMb&lt;Gk8HttpRequest*&gt; sg_iRequestQueue;      //[HTTPè«‹æ±‚éšŠåˆ—]&nbsp;static Gk8SetMb&lt;Gk8HttpResponse*&gt; sg_iResponseQueue;    //[HTTPéŸ¿æ‡‰éšŠåˆ—]&nbsp;â€‹&nbsp;â€‹&nbsp;static GK8_CHAR sg_szErrorBuf[CURL_ERROR_SIZE];         //[éŒ¯èª¤ä¿¡æ¯]&nbsp;static Gk8Str sg_iErrorStr;&nbsp;â€‹&nbsp;typedef size_t (*HTTPWRITE_CALLBACK)(GK8_LPVOID lpData,size_t nSize,size_t nMemBlock,GK8_LPVOID lpResponseData);&nbsp;â€‹&nbsp;#if (GK8_TARGET_PLATFORM==GK8_PLATFORM_IOS)&nbsp;#define GK8_ASYNC_HTTPREQUEST_USE_NAMED_SEMAPHORE 1&nbsp;#else&nbsp;#define GK8_ASYNC_HTTPREQUEST_USE_NAMED_SEMAPHORE 0&nbsp;#endif&nbsp;â€‹&nbsp;#if GK8_ASYNC_HTTPREQUEST_USE_NAMED_SEMAPHORE&nbsp;#define GK8_ASYNC_HTTPREQUEST_SEMAPHORE &#34;Gk8HttpAsync&#34;&nbsp;#else&nbsp;static sem_t sg_iSem;&nbsp;#endif&nbsp;â€‹&nbsp;â€‹&nbsp;GK8_BOOL ConfigureCURL(CURL* pCurl);&nbsp;GK8_INT ProcessGetTask(Gk8HttpRequest* pHttpRequest,HTTPWRITE_CALLBACK lpCallBack,GK8_LPVOID lpStream,GK8_LPINT lpResponseCode);&nbsp;GK8_INT ProcessPostTask(Gk8HttpRequest* pHttpRequest,HTTPWRITE_CALLBACK lpCallBack,GK8_LPVOID lpStream,GK8_LPINT lpResponseCode);&nbsp;â€‹&nbsp;â€‹&nbsp;//[æ¥æ”¶HTTPæ•¸æ“š]&nbsp;size_t WriteHttpData(GK8_LPVOID lpData,size_t nSize,size_t nMemBlock,GK8_LPVOID lpResponseData)&nbsp;{&nbsp;    Gk8ByteMaker* pResponseData=(Gk8ByteMaker*)lpResponseData;&nbsp;    size_t nLength=nSize*nMemBlock;&nbsp;    pResponseData-&gt;WriteBuf(lpData,(GK8_INT)nLength);&nbsp;    return nLength;&nbsp;}&nbsp;â€‹&nbsp;//[è¨­ç½®CURLè¶…æ™‚å±¬æ€§è¨­ç½®]&nbsp;GK8_BOOL ConfigureCURL(CURL* pCurl)&nbsp;{&nbsp;    if(!pCurl) return false;&nbsp;â€‹&nbsp;    CURLcode nCurlCode=curl_easy_setopt(pCurl,CURLOPT_ERRORBUFFER,sg_szErrorBuf);&nbsp;    if(nCurlCode!=CURLE_OK) return false;&nbsp;â€‹&nbsp;    nCurlCode=curl_easy_setopt(pCurl,CURLOPT_TIMEOUT,Gk8HttpClient::GetInstance()-&gt;GetTimeoutForRead());&nbsp;    if(nCurlCode!=CURLE_OK) return false;&nbsp;â€‹&nbsp;    nCurlCode=curl_easy_setopt(pCurl,CURLOPT_CONNECTTIMEOUT,Gk8HttpClient::GetInstance()-&gt;GetTimeoutForConnect());&nbsp;    if(nCurlCode!=CURLE_OK) return false;&nbsp;    &nbsp;    curl_easy_setopt(pCurl,CURLOPT_SSL_VERIFYPEER,0L);&nbsp;    curl_easy_setopt(pCurl,CURLOPT_SSL_VERIFYHOST,0L);&nbsp;â€‹&nbsp;    curl_easy_setopt(pCurl,CURLOPT_NOSIGNAL,1L);&nbsp;    return true;&nbsp;}&nbsp;â€‹&nbsp;//[è™•ç†Getè«‹æ±‚]&nbsp;GK8_INT ProcessGetTask(Gk8HttpRequest* pHttpRequest,HTTPWRITE_CALLBACK lpCallBack,GK8_LPVOID lpStream,GK8_LPINT lpResponseCode)&nbsp;{&nbsp;    CURLcode nCurlCode=CURL_LAST;&nbsp;    CURL* pCurl=curl_easy_init();&nbsp;    &nbsp;    do&nbsp;    {&nbsp;        if(!ConfigureCURL(pCurl)) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_URL,pHttpRequest-&gt;GetHttpUrl());&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;        &nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_WRITEFUNCTION,lpCallBack);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_WRITEDATA,lpStream);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;        &nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_FOLLOWLOCATION,true);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_USERAGENT,&#34;libcurl-agent/1.0&#34;);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_perform(pCurl);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_getinfo(pCurl,CURLINFO_RESPONSE_CODE,lpResponseCode);&nbsp;        //[200:æŒ‡ç¤ºå®¢æœç«¯çš„è«‹æ±‚å·²ç¶“æˆåŠŸæ”¶åˆ°ï¼Œè§£æï¼Œæ¥å—]&nbsp;        if(nCurlCode!=CURLE_OK||*lpResponseCode!=200)&nbsp;        {&nbsp;            nCurlCode=CURLE_HTTP_RETURNED_ERROR;&nbsp;        }&nbsp;    }while(0);&nbsp;    &nbsp;    if(pCurl) curl_easy_cleanup(pCurl);&nbsp;â€‹&nbsp;    return (nCurlCode==CURLE_OK?0:1);&nbsp;}&nbsp;â€‹&nbsp;//[è™•ç†POSTè«‹æ±‚:æµçš„è¡Œäº‹ç™¼å‡º]&nbsp;GK8_INT ProcessPostTask(Gk8HttpRequest* pHttpRequest,HTTPWRITE_CALLBACK lpCallBack,GK8_LPVOID lpStream,GK8_LPINT lpResponseCode)&nbsp;{&nbsp;    CURLcode nCurlCode=CURL_LAST;&nbsp;    CURL* pCurl=curl_easy_init();&nbsp;â€‹&nbsp;    do&nbsp;    {&nbsp;        if(!ConfigureCURL(pCurl)) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_URL,pHttpRequest-&gt;GetHttpUrl());&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_WRITEFUNCTION,lpCallBack);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_WRITEDATA,lpStream);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_POST,1);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_POSTFIELDS,pHttpRequest-&gt;GetRequestData()-&gt;GetBuf());&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_setopt(pCurl,CURLOPT_POSTFIELDSIZE,pHttpRequest-&gt;GetRequestDataSize());&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_perform(pCurl);&nbsp;        if(nCurlCode!=CURLE_OK) break;&nbsp;â€‹&nbsp;        nCurlCode=curl_easy_getinfo(pCurl,CURLINFO_RESPONSE_CODE,lpResponseCode);&nbsp;        &nbsp;        if(nCurlCode!=CURLE_OK||*lpResponseCode!=200)&nbsp;        {&nbsp;            nCurlCode=CURLE_HTTP_RETURNED_ERROR;&nbsp;        }&nbsp;    }while(0);&nbsp;    if(pCurl) curl_easy_cleanup(pCurl);&nbsp;â€‹&nbsp;    return (nCurlCode==CURLE_OK?0:1);&nbsp;}&nbsp;â€‹&nbsp;//[å‰µå»ºç¶²çµ¡ç·šç¨‹]&nbsp;static GK8_LPVOID NetWorkThread(GK8_LPVOID lpData)&nbsp;{&nbsp;    Gk8HttpRequest* pHttpRequest=NULL;&nbsp;    Gk8HttpResponse* pHttpResponse=NULL;&nbsp;â€‹&nbsp;    while(true)&nbsp;    {&nbsp;        //Wait for http request tasks from main thread&nbsp;        GK8_INT nSemWaitRet=sem_wait(sg_pSem);&nbsp;        if(nSemWaitRet&lt;0)&nbsp;        {&nbsp;            _GK8ERR&lt;&lt;&#34;HttpRequest async thread semaphore error:&#34;&lt;&lt;strerror(errno)&lt;&lt;CR;&nbsp;            break;&nbsp;        }&nbsp;â€‹&nbsp;        if(sg_bHttpClientQuit) break;&nbsp;â€‹&nbsp;        //[ç¬¬ä¸€æ­¥:ç™¼é€HTTPè«‹æ±‚]&nbsp;        pHttpRequest=NULL;&nbsp;        pthread_mutex_lock(&sg_RequestQueueMutex);&nbsp;        if(0!=sg_iRequestQueue.GetSize())&nbsp;        {&nbsp;            pHttpRequest=sg_iRequestQueue.GetItemAt(0);&nbsp;            sg_iRequestQueue.RemoveItemAt(0);&nbsp;        }&nbsp;        pthread_mutex_unlock(&sg_RequestQueueMutex);&nbsp;â€‹&nbsp;        if(NULL==pHttpRequest) continue;&nbsp;â€‹&nbsp;        //[ç¬¬äºŒæ­¥:libCurlåŒæ­¥è«‹æ±‚]&nbsp;        pHttpResponse=new Gk8HttpResponse(pHttpRequest);&nbsp;â€‹&nbsp;        GK8_INT nResponseCode=-1;&nbsp;        GK8_INT nRetValue=0;&nbsp;â€‹&nbsp;        switch(pHttpRequest-&gt;GetRequestType())&nbsp;        {&nbsp;            case Gk8HttpRequest::kHttpGet:&nbsp;                nRetValue=ProcessGetTask(pHttpRequest,WriteHttpData,pHttpResponse-&gt;GetResponseData(),&nResponseCode);&nbsp;                break;&nbsp;            case Gk8HttpRequest::kHttpPost:&nbsp;                nRetValue=ProcessPostTask(pHttpRequest,WriteHttpData,pHttpResponse-&gt;GetResponseData(),&nResponseCode);&nbsp;                break;&nbsp;            default:&nbsp;                _GK8ERR&lt;&lt;&#34;Gk8HttpClient:Unkown Request Type,Only GET And POST Are Supported&#34;&lt;&lt;CR;&nbsp;                break;&nbsp;        }&nbsp;        pHttpResponse-&gt;SetResponseCode(nResponseCode);&nbsp;        //[æ¸…é™¤è«‹æ±‚ä¸­çš„äºŒé€²åˆ¶æ•¸æ“š]&nbsp;        pHttpRequest-&gt;ClearRequestData();&nbsp;â€‹&nbsp;        if(nRetValue!=0)&nbsp;        {&nbsp;            pHttpResponse-&gt;SetSucceed(false);&nbsp;            sg_iErrorStr=sg_szErrorBuf;&nbsp;            pHttpResponse-&gt;SetErrorBuffer(sg_iErrorStr);&nbsp;        }else&nbsp;        {&nbsp;            pHttpResponse-&gt;SetSucceed(true);&nbsp;        }&nbsp;â€‹&nbsp;        pthread_mutex_lock(&sg_ResponseQueueMutex);&nbsp;        sg_iResponseQueue.AddItem(pHttpResponse);&nbsp;        pthread_mutex_unlock(&sg_ResponseQueueMutex);&nbsp;    }&nbsp;â€‹&nbsp;    sg_AsyncRequestCount-=sg_iRequestQueue.GetSize();&nbsp;    pthread_mutex_lock(&sg_RequestQueueMutex);&nbsp;    sg_iRequestQueue.Clear();&nbsp;    pthread_mutex_unlock(&sg_RequestQueueMutex);&nbsp;    &nbsp;    if(sg_pSem!=NULL)&nbsp;    {&nbsp;#if GK8_ASYNC_HTTPREQUEST_USE_NAMED_SEMAPHORE&nbsp;        sem_unlink(GK8_ASYNC_HTTPREQUEST_SEMAPHORE);&nbsp;        sem_close(sg_pSem);&nbsp;#else&nbsp;        sem_destroy(sg_pSem);&nbsp;#endif&nbsp;        sg_pSem=NULL;&nbsp;â€‹&nbsp;        pthread_mutex_destroy(&sg_RequestQueueMutex);&nbsp;        pthread_mutex_destroy(&sg_ResponseQueueMutex);&nbsp;â€‹&nbsp;        //[ä¾æ¬¡åˆªé™¤æ•¸æ“š]&nbsp;        GK8_INT nIndex;&nbsp;        for(nIndex=0;nIndex&lt;sg_iRequestQueue.GetSize();nIndex++)&nbsp;        {&nbsp;            pHttpRequest=sg_iRequestQueue.GetItemAt(nIndex);&nbsp;            delete pHttpRequest;&nbsp;        }&nbsp;        for(nIndex=0;nIndex&lt;sg_iResponseQueue.GetSize();nIndex++)&nbsp;        {&nbsp;            pHttpResponse=sg_iResponseQueue.GetItemAt(nIndex);&nbsp;            delete pHttpResponse;&nbsp;        }&nbsp;        sg_iRequestQueue.Destroy();&nbsp;        sg_iResponseQueue.Destroy();&nbsp;    }&nbsp;    pthread_exit(NULL);&nbsp;    return 0;&nbsp;}&nbsp;â€‹&nbsp;/////////////////////////////////////////////////////////////////&nbsp;Gk8HttpClient::Gk8HttpClient()&nbsp;:m_nTimeOutForRead(60)&nbsp;,m_nTimeOutForConnect(30)&nbsp;{&nbsp;â€‹&nbsp;}&nbsp;â€‹&nbsp;Gk8HttpClient::~Gk8HttpClient()&nbsp;{&nbsp;    sg_bHttpClientQuit=true;&nbsp;    if(sg_pSem!=NULL)&nbsp;    {&nbsp;        sem_post(sg_pSem);&nbsp;    }&nbsp;}&nbsp;â€‹&nbsp;//[åˆå§‹åŒ–ç·šç¨‹]&nbsp;GK8_BOOL Gk8HttpClient::InitThreadSemphore()&nbsp;{&nbsp;    if(sg_pSem!=NULL)&nbsp;    {&nbsp;        return true;&nbsp;    }else&nbsp;    {&nbsp;#if GK8_ASYNC_HTTPREQUEST_USE_NAMED_SEMAPHORE&nbsp;        sg_pSem=sem_open(GK8_ASYNC_HTTPREQUEST_SEMAPHORE,O_CREAT,0644,0);&nbsp;        if(sg_pSem==SEM_FAILED)&nbsp;        {&nbsp;            _GK8ERR&lt;&lt;&#34;Open HttpRequest Semaphore Failed&#34;&lt;&lt;CR;&nbsp;            sg_pSem=NULL;&nbsp;            return false;&nbsp;        }&nbsp;#else&nbsp;        GK8_INT nSemRet=sem_init(&sg_iSem,0,0);&nbsp;        if(nSemRet&lt;0)&nbsp;        {&nbsp;            _GK8ERR&lt;&lt;&#34;Init HttpRequest Semaphore Failed&#34;&lt;&lt;CR;&nbsp;            return false;&nbsp;        }&nbsp;        sg_pSem=&sg_iSem;&nbsp;#endif&nbsp;â€‹&nbsp;        pthread_mutex_init(&sg_RequestQueueMutex,NULL);&nbsp;        pthread_mutex_init(&sg_ResponseQueueMutex,NULL);&nbsp;â€‹&nbsp;        pthread_create(&sg_NetWorkThread,NULL,NetWorkThread,NULL);&nbsp;        pthread_detach(sg_NetWorkThread);&nbsp;â€‹&nbsp;        sg_bHttpClientQuit=false;&nbsp;    }&nbsp;    return true;&nbsp;}&nbsp;â€‹&nbsp;//[ç™¼é€HTTPè«‹æ±‚]&nbsp;GK8_VOID Gk8HttpClient::Send(Gk8HttpRequest* pHttpRequest)&nbsp;{&nbsp;    if(false==InitThreadSemphore()) return;&nbsp;    if(!pHttpRequest) return;&nbsp;â€‹&nbsp;    ++sg_AsyncRequestCount;&nbsp;â€‹&nbsp;    pthread_mutex_lock(&sg_RequestQueueMutex);&nbsp;    sg_iRequestQueue.AddItem(pHttpRequest);&nbsp;    pthread_mutex_unlock(&sg_RequestQueueMutex);&nbsp;â€‹&nbsp;    sem_post(sg_pSem);&nbsp;}&nbsp;â€‹&nbsp;//[ç²å–HTTPå–®ä¾‹]&nbsp;Gk8HttpClient* Gk8HttpClient::GetInstance()&nbsp;{&nbsp;    if(sg_pHttpClient==NULL) sg_pHttpClient=new Gk8HttpClient();&nbsp;    return sg_pHttpClient;&nbsp;}&nbsp;â€‹&nbsp;//[HTTPéŸ¿æ‡‰å¹€æ§åˆ¶]&nbsp;GK8_VOID Gk8HttpClient::HttpClientTick()&nbsp;{&nbsp;    if(sg_pSem==NULL) return;&nbsp;â€‹&nbsp;    Gk8HttpResponse* pHttpResponse=NULL;&nbsp;â€‹&nbsp;    pthread_mutex_lock(&sg_ResponseQueueMutex);&nbsp;    if(sg_iResponseQueue.GetSize()&gt;0)&nbsp;    {&nbsp;        pHttpResponse=sg_iResponseQueue.GetItemAt(0);&nbsp;        sg_iResponseQueue.RemoveItemAt(0);&nbsp;    }&nbsp;    pthread_mutex_unlock(&sg_ResponseQueueMutex);&nbsp;    &nbsp;    if(pHttpResponse)&nbsp;    {&nbsp;        --sg_AsyncRequestCount;&nbsp;        Gk8HttpRequest* pHttpRequest=pHttpResponse-&gt;GetHttpRequest();&nbsp;        Gk8BaseObj* pTarget=pHttpRequest-&gt;GetTarget();&nbsp;        HTTPREQUEST_CALLBACK_FUN pSelector=pHttpRequest-&gt;GetSelector();&nbsp;â€‹&nbsp;        //[å›èª¿è™•ç†:è¨˜éŒ„æ•¸æ“š]&nbsp;        if(pTarget&&pSelector)&nbsp;        {&nbsp;            (pTarget-&gt;*pSelector)(pHttpResponse);&nbsp;        }&nbsp;        //[éŠ·ç‡¬è«‹æ±‚æ•¸æ“š]&nbsp;        delete pHttpResponse;&nbsp;    }&nbsp;}</code></pre><p>C++å¯¦ç¾Servleté¡ï¼šGk8HttpServlet.h</p><pre><code>&nbsp;#ifndef __GK8HTTPSERVICE_H__&nbsp;#define __GK8HTTPSERVICE_H__&nbsp;â€‹&nbsp;#pragma once&nbsp;#include &#34;curl/curl.h&#34;&nbsp;#include &#34;Gk8HttpClient.h&#34;&nbsp;#include &#34;Gk8HttpRequest.h&#34;&nbsp;#include &#34;Gk8HttpResponse.h&#34;&nbsp;â€‹&nbsp;class Gk8HttpServlet:public Gk8BaseObj&nbsp;{&nbsp;    DECLARE_TOSPP_MAP;&nbsp;private:&nbsp;    Gk8Str m_sHttpUrl;              //[HTTPè«‹æ±‚åœ°å€]&nbsp;    Gk8ByteMaker m_iRequestData;    //[HTTPè«‹æ±‚æ•¸æ“š]&nbsp;    Gk8Var m_iHttpCallVar;          //[HTTPå›èª¿ä¿¡æ¯]&nbsp;â€‹&nbsp;    GK8_VOID ServletRequestCompleted(GK8_LPVOID lpHttpResponse);&nbsp;public:&nbsp;    Gk8HttpServlet();&nbsp;    ~Gk8HttpServlet();&nbsp;â€‹&nbsp;    GK8_VOID TOSPPFUNC SendHttpMessage(GK8_LPCSTR lpHttpData,Gk8Var& iHttpCallVar);&nbsp;};&nbsp;#endif</code></pre><p>C++å¯¦ç¾Servleté¡ï¼šGk8HttpServlet.cpp</p><pre><code>&nbsp;#include &#34;Gk8HttpServlet.h&#34;&nbsp;#include &#34;Gk8OperSys.h&#34;&nbsp;#include &#34;Gk8Helper.h&#34;&nbsp;â€‹&nbsp;static Gk8Str sg_iReceiveMessageEvent(&#34;OnReceiveMessage&#34;);//[æ¥æ”¶ç¶²çµ¡ä¿¡æ¯]&nbsp;â€‹&nbsp;#define HTTPSERVLET_FAIL        0       //[HTTPè«‹æ±‚å¤±æ•—]&nbsp;#define HTTPSERVLET_SUCC        1       //[HTTPè«‹æ±‚æˆåŠŸ]&nbsp;â€‹&nbsp;/////////////////////////////////////////////CLASS-TOLUA////////////////////////////////////////////////////&nbsp;TOLUA_CLASS_COLLECT_FUNC(Gk8HttpServlet)&nbsp;â€‹&nbsp;BEGIN_TOLUA_CLASS_FUNC(Gk8HttpServlet,NewObj)&nbsp;    if(!CheckToLuaFunParam(L,&#34;NewObj&#34;,Gk8Var()&lt;&lt;ISUSERTABLE(&#34;Gk8HttpServlet&#34;)&lt;&lt;ISVABOOLEAN&lt;&lt;ISNOOBJ)) return 0;&nbsp;    Gk8HttpServlet* pHttpServlet=(Gk8HttpServlet*)Mtolua_new((Gk8HttpServlet)());&nbsp;    tolua_pushusertype(L,(GK8_LPVOID)pHttpServlet,&#34;Gk8HttpServlet&#34;);&nbsp;    if(IFBOOLEAN(2)) tolua_register_gc(L,lua_gettop(L));&nbsp;END_TOLUA_CLASS_FUNC&nbsp;â€‹&nbsp;BEGIN_TOLUA_CLASS_FUNC(Gk8HttpServlet,SendHttpMessage)&nbsp;    if(!CheckToLuaFunParam(L,&#34;SendHttpMessage&#34;,Gk8Var()&lt;&lt;ISUSERTYPE(&#34;Gk8HttpServlet&#34;)&lt;&lt;ISSTRING&lt;&lt;ISVAFUNCTION&lt;&lt;ISNOOBJ)) return 0;&nbsp;    //TOLUAGETOBJ(Gk8HttpServlet,1)-&gt;SendHttpMessage(TOLUAGETSTRING(2),TOLUAGETFUNEX(L,3,0));&nbsp;END_TOLUA_CLASS_FUNC&nbsp;â€‹&nbsp;//[å•Ÿå‹•è¨»å†Šé¡çš„å…¨éƒ¨TOLUAå‡½æ•¸]&nbsp;BEGIN_TOLUA_FUN_MAP(Gk8HttpServlet)&nbsp;    TOLUA_CLASS(Gk8HttpServlet,Gk8BaseObj,&#34;[ç¶²çµ¡é¡]&#34;,&#34;[HTTPè«‹æ±‚é¡]&#34;)&nbsp;    TOLUA_CLASS_FUNC(Gk8HttpServlet,NewObj,&#34;[Gk8HttpServlet* NewObj(GK8_BOOL ifLocal=false)?å‰µå»ºGk8HttpServletå°è±¡]&#34;)&nbsp;    TOLUA_CLASS_FUNC(Gk8HttpServlet,SendHttpMessage,&#34;[GK8_VOID SendHttpMessage(GK8_LPCSTR lpHttpData,iHttpCallVar)?ç™¼é€HTTPè«‹æ±‚,å­—ç¬¦ä¸²æ¨¡å¼]&#34;)&nbsp;END_TOLUA_FUN_MAP&nbsp;â€‹&nbsp;/////////////////////////////////////////////CLASS-TOSPP////////////////////////////////////////////////////&nbsp;BEGIN_TOSPP_MAP(Gk8HttpServlet,Gk8BaseObj)&nbsp;    TOSPP_FUNC(Gk8HttpServlet,SendHttpMessage,&#39; &#39;,&#34;s&v&#34;,&#34;SendHttpMessage(lpHttpData,iHttpCallVar)&#34;)&nbsp;END_TOSPP_MAP()&nbsp;/////////////////////////////////////////////////////////////////////////////////////////////////&nbsp;â€‹&nbsp;Gk8HttpServlet::Gk8HttpServlet()&nbsp;{&nbsp;â€‹&nbsp;}&nbsp;â€‹&nbsp;Gk8HttpServlet::~Gk8HttpServlet()&nbsp;{&nbsp;â€‹&nbsp;}&nbsp;â€‹&nbsp;//[ç™¼é€HTTPè«‹æ±‚æ³¨æ„ç·¨ç¢¼å•é¡Œ]&nbsp;GK8_VOID Gk8HttpServlet::SendHttpMessage(GK8_LPCSTR lpHttpData,Gk8Var& iHttpCallVar)&nbsp;{&nbsp;    m_sHttpUrl=lpHttpData;&nbsp;    //[è¨»å†Šè…³æœ¬å›èª¿æ¶ˆæ¯]&nbsp;    m_iHttpCallVar=iHttpCallVar;&nbsp;    Gk8Var iEmptyVar;&nbsp;    if(m_iHttpCallVar.GetSize()==1 && m_iHttpCallVar[0].IfInt()) SetEvent(sg_iReceiveMessageEvent,m_iHttpCallVar[0],iEmptyVar);&nbsp;    Gk8HttpRequest* pHttpRequest=new Gk8HttpRequest();&nbsp;    pHttpRequest-&gt;SetRequestType(Gk8HttpRequest::kHttpGet);&nbsp;    pHttpRequest-&gt;SetHttpUrl(m_sHttpUrl);&nbsp;    pHttpRequest-&gt;SetResponseCallBack(this,(HTTPREQUEST_CALLBACK_FUN)&Gk8HttpServlet::ServletRequestCompleted);&nbsp;    pHttpRequest-&gt;SetRequestData(&m_iRequestData);&nbsp;â€‹&nbsp;    Gk8HttpClient::GetInstance()-&gt;Send(pHttpRequest);&nbsp;}&nbsp;â€‹&nbsp;//[HTTPè«‹æ±‚ä¿¡æ¯å›èª¿]&nbsp;GK8_VOID Gk8HttpServlet::ServletRequestCompleted(GK8_LPVOID lpHttpResponse)&nbsp;{&nbsp;    Gk8HttpResponse* pHttpResponse=(Gk8HttpResponse*)lpHttpResponse;&nbsp;    if(!pHttpResponse) return;&nbsp;â€‹&nbsp;    //[æŠŠæœå‹™å™¨æ•¸æ“šæ´¾é£åˆ°è…³æœ¬ä¸­]&nbsp;    GK8_INT nFailCode=HTTPSERVLET_SUCC;&nbsp;    Gk8Str iResponstStr;&nbsp;    if(!pHttpResponse-&gt;IsSucceed())&nbsp;    {&nbsp;        _GK8ERR&lt;&lt;&#34;Gk8HttpServlet Response Failed Error Is &#34;&lt;&lt;pHttpResponse-&gt;GetErrorBuffer()&lt;&lt;CR;&nbsp;        iResponstStr=&#34;UnKown Error&#34;;&nbsp;        nFailCode=HTTPSERVLET_FAIL;&nbsp;    }else&nbsp;    {&nbsp;        Gk8ByteMaker* pResponseData=pHttpResponse-&gt;GetResponseData();&nbsp;        iResponstStr.BinToStr(pResponseData-&gt;GetBuf(),pResponseData-&gt;GetStreamSize());&nbsp;    }&nbsp;â€‹&nbsp;    if(m_iHttpCallVar.GetSize()==1)&nbsp;    {&nbsp;        RunEventWithArgs(sg_iReceiveMessageEvent,iResponstStr);&nbsp;    }else&nbsp;    {&nbsp;        if(!m_iHttpCallVar[0].IfPtr()||!IfObjPtr(m_iHttpCallVar[0].GetPtr(),m_iHttpCallVar[0].GetPtrId())) return;&nbsp;â€‹&nbsp;        Gk8Obj* pBindObj=m_iHttpCallVar[0].GetSafePtr();&nbsp;        Gk8Var iParamVar;&nbsp;        iParamVar&lt;&lt;nFailCode&lt;&lt;iResponstStr;&nbsp;        pBindObj-&gt;OnCall(m_iHttpCallVar[1],iParamVar);&nbsp;    }&nbsp;    //[ç›´æ¥åˆªé™¤æœ¬èº«]&nbsp;    SafeDeleteObj(this);&nbsp;}</code></pre><p><br></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>ç¶²çµ¡</a></li><li><a>HTTP</a></li><li><a>å¯¦ç¾</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c06e6a1.html alt=ç¶²çµ¡ä¸­æ€æ¨£é€šéå®‰å…¨æ§åˆ¶åˆ—è¡¨ACLå¯¦ç¾å®‰å…¨æ§åˆ¶ï¼Œå¯¦ç¾é ç¨‹ç™»éŒ„è¨ªå• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4bb8179f7be245e9bb3f154229247e66 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c06e6a1.html title=ç¶²çµ¡ä¸­æ€æ¨£é€šéå®‰å…¨æ§åˆ¶åˆ—è¡¨ACLå¯¦ç¾å®‰å…¨æ§åˆ¶ï¼Œå¯¦ç¾é ç¨‹ç™»éŒ„è¨ªå•>ç¶²çµ¡ä¸­æ€æ¨£é€šéå®‰å…¨æ§åˆ¶åˆ—è¡¨ACLå¯¦ç¾å®‰å…¨æ§åˆ¶ï¼Œå¯¦ç¾é ç¨‹ç™»éŒ„è¨ªå•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/060195b.html alt="ç”¨ Ansible å¯¦ç¾ç¶²çµ¡è‡ªå‹•åŒ–" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153576827890540a4f9e152 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/060195b.html title="ç”¨ Ansible å¯¦ç¾ç¶²çµ¡è‡ªå‹•åŒ–">ç”¨ Ansible å¯¦ç¾ç¶²çµ¡è‡ªå‹•åŒ–</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html alt=å…‰çºœâ€”â€”æœªä¾†ç¶²çµ¡ä¸»å° class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e75c1afe12354a93bad8495ad1057693 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html title=å…‰çºœâ€”â€”æœªä¾†ç¶²çµ¡ä¸»å°>å…‰çºœâ€”â€”æœªä¾†ç¶²çµ¡ä¸»å°</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bdc59733.html alt="ç¶²çµ¡è©åå ´é¢æ˜¯ä»€éº¼æ„æ€ åå ´é¢æ˜¯ä»€éº¼æ¢—" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bdc59733.html title="ç¶²çµ¡è©åå ´é¢æ˜¯ä»€éº¼æ„æ€ åå ´é¢æ˜¯ä»€éº¼æ¢—">ç¶²çµ¡è©åå ´é¢æ˜¯ä»€éº¼æ„æ€ åå ´é¢æ˜¯ä»€éº¼æ¢—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a002ca18.html alt=ç‹ä¸€åšé‚£å¥å¹´åº¦ç¶²çµ¡æµè¡Œèªã€Œä¸æ„§æ˜¯æˆ‘ã€çš„ï¼šæ­£ç‰ˆè‹±æ–‡ç¿»è­¯ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/26add5cdc08e4214800b25e21b623eb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a002ca18.html title=ç‹ä¸€åšé‚£å¥å¹´åº¦ç¶²çµ¡æµè¡Œèªã€Œä¸æ„§æ˜¯æˆ‘ã€çš„ï¼šæ­£ç‰ˆè‹±æ–‡ç¿»è­¯>ç‹ä¸€åšé‚£å¥å¹´åº¦ç¶²çµ¡æµè¡Œèªã€Œä¸æ„§æ˜¯æˆ‘ã€çš„ï¼šæ­£ç‰ˆè‹±æ–‡ç¿»è­¯</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html alt=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RkPMb9G6tipobr style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html title=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢>å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ad6f0929.html alt=è°·æ­Œå¤§è…¦ç™¼ä½ˆç¥ç¶“ç¶²çµ¡çš„ã€Œæ ¸ç£å…±æŒ¯ã€ï¼Œä¸¦å…¬é–‹ç›¸é—œä»£ç¢¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/65c4000bda98898dcdbb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ad6f0929.html title=è°·æ­Œå¤§è…¦ç™¼ä½ˆç¥ç¶“ç¶²çµ¡çš„ã€Œæ ¸ç£å…±æŒ¯ã€ï¼Œä¸¦å…¬é–‹ç›¸é—œä»£ç¢¼>è°·æ­Œå¤§è…¦ç™¼ä½ˆç¥ç¶“ç¶²çµ¡çš„ã€Œæ ¸ç£å…±æŒ¯ã€ï¼Œä¸¦å…¬é–‹ç›¸é—œä»£ç¢¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html alt=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb044d821f74107a3fd9119fc34c642 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html title=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§>[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html alt="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html title="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†">ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e41fd8de.html alt="æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e41fd8de.html title="æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›">æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f22ee5ad.html alt="Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f22ee5ad.html title="Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬">Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8dce33e7.html alt=ç†è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼Œä¸€æ­¥ä¸€æ­¥æ¨ç†å¾—åˆ°GANsï¼ˆä¸€ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bee194d6fbec4d6f82e82998def3f7a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8dce33e7.html title=ç†è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼Œä¸€æ­¥ä¸€æ­¥æ¨ç†å¾—åˆ°GANsï¼ˆä¸€ï¼‰>ç†è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼Œä¸€æ­¥ä¸€æ­¥æ¨ç†å¾—åˆ°GANsï¼ˆä¸€ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1fe1c2dd.html alt=ç­è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼ˆGANï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/634604de44ad4d17931ccc0bcf3e46ef style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1fe1c2dd.html title=ç­è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼ˆGANï¼‰>ç­è§£ç”Ÿæˆå°æŠ—ç¶²çµ¡ï¼ˆGANï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/56e2a065.html alt=é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/50ab0003166decded7e4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/56e2a065.html title=é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡>é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html alt="Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9d3b0e55813d46b4982ae7d9b81d1802 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html title="Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½">Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>