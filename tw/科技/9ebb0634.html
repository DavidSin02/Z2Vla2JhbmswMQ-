<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基於STM32的頻譜測量系統的設計 | 极客快訊</title><meta property="og:title" content="基於STM32的頻譜測量系統的設計 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RM5bTXbAhNrnKf"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9ebb0634.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9ebb0634.html><meta property="article:published_time" content="2020-11-14T20:59:24+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:24+08:00"><meta name=Keywords content><meta name=description content="基於STM32的頻譜測量系統的設計"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/9ebb0634.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基於STM32的頻譜測量系統的設計</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>頻譜測量在射電頻譜測量的研究中十分重要。傳統的頻譜測量儀器非常笨重，功耗也比較大，如今許多科學工作者的射電頻譜測量工作逐漸轉向環境惡劣的工作場所，工作者需要每隔一段時間去檢查一次系統工作情況，這樣就需要系統可以實現數據存儲功能，便於數據分析<sup>[1]</sup>。而資源的匱乏就對頻譜測量系統提出了低功耗的要求。本設計從實際出發以超外差測量頻譜和鎖相環技術來得到頻譜及U盤存儲數據等方式解決這些問題。</p><p><strong>1 頻譜測量原理</strong></p><p>本系統採用了超外差頻譜測量和中高頻調諧的方法實現了頻譜的測量<sup>[2]</sup>，此方法很大程度上減少了干擾並且提高了系統的穩定性，並通過鎖相環技術的運用實現了液晶屏上顯示採集的波形，然後將數據存入U盤<sup>[3]</sup>。</p><p><strong>2 系統硬件設計</strong></p><p>整個系統主要由STM32F103控制芯片、鎖相環電路模塊、按鍵、液晶顯示、存儲模塊、A/D採集、環路濾波器組成，硬件電路結構圖如圖1所示。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RM5bTXbAhNrnKf><p><strong>2.1 主控芯片硬件電路</strong></p><p>考慮到需要的I/O數、運行速度、A/D採集精度和性價比等因素，本系統採用STM32F103ZET6芯片，自帶512 KB大容量Flash，3個12位A/D轉換器使系統採樣精度高，轉換速率快。其性能穩定、功耗低，溫度適用範圍大，外圍模塊豐富。</p><p><strong>2.2 液晶顯示電路</strong></p><p>本系統選擇了卓力恩科技的ZLG240128F-BTSSWE-YBC的液晶屏，其分辨率為240×128，液晶的溫度一般是-30 ℃~70 ℃之間，對周圍環境的侷限性相對較小，從而脫離了上位機，而且增加了人機的友好交互效果。</p><p><strong>2.3 數據存儲電路</strong></p><p>為了使系統在低功耗情況下快速、精準地存儲數據信息，本系統選擇CH378文件管理控制芯片，選擇8位並口方式與單片機連接，可實現U盤或SD卡的快速讀寫，支持12 Mb/s全速和480 Mb/s高速USB通信，其最大可支持容量為32 GB<sup>[4]</sup>，其應用框圖如圖2所示。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTYF7wOO2v1><p><strong>2.4 鎖相環電路</strong></p><p>鎖相環路主要通過ADI公司的ADF4351芯片的分頻器靈活控制輸出頻率，為了得到更合適的環路穩定性和頻率鎖定時間，本系統採用三階無源濾波器(其環路帶寬為75 kHz~150 kHz，相位裕度取47°~55°)以及HXO-32的10 MHz晶振<sup>[5]</sup>，濾波電路如圖3所示。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RM5bTYTIRYONhV><p><strong>3 系統軟件設計</strong></p><p>軟件程序是在MDK5開發環境中用C語言編寫的，根據人機交互程度的不同將系統工作模式分為全自動、半自動、全手動三種模式。程序中增加了對採集數據的軟件處理，採用平均算法使數據獲得較高的精準度和穩定度，並使用8位並行傳輸方式進行數據存儲。</p><p><strong>3.1 程序流程圖</strong></p><p>本系統包含三種模式，這裡主要介紹全手動模式。全手動模式程序流程圖如圖4所示。程序主要包含初始化程序、主程序和U盤檢測程序等。初始化程序是對系統參數的設置，保證了各部分功能正常進行。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTYgEjgAtYy><p><strong>3.2 矩陣鍵盤的軟件實現</strong></p><p>為了實現按鍵的中斷級別最高，系統採用了掃描的方法進行檢測，並給予延時消除抖動以保證系統的穩定性<sup>[6]</sup>。各按鍵功能說明表如表1所示。</p><p><strong>3.3 點頻輸出計算方法</strong></p><p>ADF4351的點頻輸出的計算方法可根據式：</p><p>以及系統的參考晶振頻率RF<sub>IN</sub>=10 MHz求得INT和FRAC的值。根據其值可將輸出模式設置為小數模式或者整數模式，由此將上述所求值放入對應寄存器中即可<sup>[7]</sup>。</p><p>軟件的掃頻劃分為7個段來編程，調用AetPLL函數即可完成點頻配置，通過程序循環進而完成多頻掃描，並通過軟件配置低噪聲模式及防反衝脈衝寬度配置可以改善相位噪聲和雜散性能，通過減少周跳擴展了PFD的線性範圍，從而加快了鎖定時間<sup>[8]</sup>。掃頻程序配置流程圖如圖5所示。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/RM5bTiiFtvdJY6><p><strong>3.4 扇區方式存儲數據</strong></p><p>全手動模式下的扇區存儲通過單片機控制CH378寫入扇區數，以返回的中斷標誌來判斷是否已經存儲成功<sup>[9]</sup>。連續存儲大量數據時，可以在關閉文件時更新數據長度或者間隔一段時間更新，這樣不僅可以增加數據存儲的時間利用率，又可以延長U盤的壽命。全手動模式下扇區存儲流程如圖6所示。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTiv1FEYzvJ><p><strong>4 實驗結果</strong></p><p>圖7為頻譜測量的硬件實物圖，系統通過參數值的調製最終可實現在35 MHz~4.4 GHz整個頻段的每個頻點都可以輸出較好的頻譜，圖8為鎖相環輸出點頻1 500 MHz的頻譜，其環路帶寬為124 kHz，相位裕度為49.3°。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTj8B0nNwkn><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTjM4eptG2w><p>系統的操作界面是人機交互的關鍵，用戶可根據自己的需求選擇系統的工作模式，模式選擇界面如圖9所示，全手動參數配置界面如圖10所示，圖11為480 MHz帶寬下1 200 Mz頻率信號在液晶中呈現的頻譜。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RM5bTqnCJnbjbb><p>當系統採集完數據以後，將數據存入到U盤中TXT格式的文本中，取出後對數據進行分析，圖12為部分文檔數據的結果。</p><img alt=基於STM32的頻譜測量系統的設計 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RM5bTrFH6vOiEZ><p><strong>5 結論</strong></p><p>本文主要介紹了以STM32F103ZET6為主控芯片的頻譜測量系統，系統可實現頻譜的測量，並通過按鍵操作實現液晶顯示以及數據存儲。本系統功耗低、易操作、便於攜帶且具有存儲功能，在野外通信測量活動、勘探活動中有著很好的應用前景。</p><p><strong>參考文獻</strong></p><p>[1] 竇玉江.太陽射電觀測的微波技術研究[D].北京：北京師範大學，2009.</p><p>[2] LIN M C，TSAI G R，TU Y C.FPGA-based specturm analyzer with high area efficiency by goertzel algorithm[J].IEEE Computer Society，2008(743)：157-159.</p><p>[3] 鄧旭亮，李曉軍.超外差頻譜分析儀頻率下限擴展技術研究[J].科技信息:科學教研，2008(22)：414-415.</p><p>[4] ZHANG H，ZHAO R，TIAN C.Design and implementation of the music player based on interface chip CH378[C].Seventh International Conference on Advanced Communication and Networking，2015：40-43.</p><p>[5] 高立俊.基於ADIsimPLL 3.1的鎖相環環路濾波器設計[J].現代電子技術，2013，36(15)：56-58.</p><p>[6] 餘江，曹雲建，熊韜.一種2～4 GHz寬帶接收機的小型化前端設計[J].無線電通信技術，2016，42(2)：96-98.</p><p>[7] 李菁.手持式頻譜儀本振電路的研究與實現[D].成都：電子科技大學，2015.</p><p>[8] 譚成豪，許建明.試述51系列單片機矩陣鍵盤編程[J].科技傳播,2011(6)：225.</p><p>[9] 郭佳欣，單彥虎，任勇峰.基於CH378的通用大容量數據記錄器的設計與實現[J].電子器件，2016，39(6)：1429-1434.</p><p><strong>作者信息:</strong></p><p>孫 威，殷興輝，王新君</p><p>（河海大學 計算機與信息學院，江蘇 南京211100）</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>STM32</a></li><li><a>頻譜</a></li><li><a>測量</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/14b7c8f1.html alt=90個攝影測量與遙感術語 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/14b7c8f1.html title=90個攝影測量與遙感術語>90個攝影測量與遙感術語</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c2eb33ca.html alt=愈加專業的航攝測量無人機 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/6387/8391397794 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c2eb33ca.html title=愈加專業的航攝測量無人機>愈加專業的航攝測量無人機</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ffc607e4.html alt=「質量控制」房建施工測量方案及質量保證措施 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9f4f697f1ec641e6b8f7e1330b6359b6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ffc607e4.html title=「質量控制」房建施工測量方案及質量保證措施>「質量控制」房建施工測量方案及質量保證措施</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38ae079e.html alt=乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/b2e4d031-2bd9-4ad0-83b1-b4efc2c7cdb5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38ae079e.html title=乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！>乾貨｜建築工程測量常見的錯誤分析，測量人一定要知道！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fe77eeec.html alt=測量管理複習題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fe77eeec.html title=測量管理複習題>測量管理複習題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/72ec926b.html alt=導線測量知識：附和導線內業平差計算方法，新手看了就學會 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/3c6200017df14d7df9be style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72ec926b.html title=導線測量知識：附和導線內業平差計算方法，新手看了就學會>導線測量知識：附和導線內業平差計算方法，新手看了就學會</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/88eabd51.html alt=建築工程測量中高差閉合差的計算與調整 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/3b0f000060c5c5ed1d3f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/88eabd51.html title=建築工程測量中高差閉合差的計算與調整>建築工程測量中高差閉合差的計算與調整</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/09d665aa.html alt=施工測量時如何放線？放線時應注意哪些問題？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1535334140972502d43e310 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/09d665aa.html title=施工測量時如何放線？放線時應注意哪些問題？>施工測量時如何放線？放線時應注意哪些問題？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5ca30744.html alt=施工測量管理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5ca30744.html title=施工測量管理>施工測量管理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/56cf3a98.html alt="測繪十二時辰 | 測量實習，你在做什麼？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RcrRQEY89L7q1y style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/56cf3a98.html title="測繪十二時辰 | 測量實習，你在做什麼？">測繪十二時辰 | 測量實習，你在做什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ce4642b3.html alt=道路工程測量放線 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/29ea9892b8944c67a828756ac65d5b7e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ce4642b3.html title=道路工程測量放線>道路工程測量放線</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2fdbb94d.html alt=鋼結構測量方案 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5b08e48188d34dd59905fcd93ab9d1d1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2fdbb94d.html title=鋼結構測量方案>鋼結構測量方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d53eae43.html alt=高層框剪工程測量專項施工方案 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1bec7b0839884385a0c4f675e84dd186 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d53eae43.html title=高層框剪工程測量專項施工方案>高層框剪工程測量專項施工方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8308c51d.html alt=線陣CCD測量儀器研究及誤差分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/37ed0003c0f56b6da8c9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8308c51d.html title=線陣CCD測量儀器研究及誤差分析>線陣CCD測量儀器研究及誤差分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fd33cc8b.html alt=產品檢測時這些測量工具你都認識嗎，測量工具分類和常見工具介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/4a32b4de0bc3426193dd29e3cb3abb63 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fd33cc8b.html title=產品檢測時這些測量工具你都認識嗎，測量工具分類和常見工具介紹>產品檢測時這些測量工具你都認識嗎，測量工具分類和常見工具介紹</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>