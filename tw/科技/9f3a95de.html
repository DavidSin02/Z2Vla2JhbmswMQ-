<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃 | 极客快訊</title><meta property="og:title" content="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/RrlSVa01MRUDMJ"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/9f3a95de.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/9f3a95de.html><meta property="article:published_time" content="2020-11-14T21:03:23+08:00"><meta property="article:modified_time" content="2020-11-14T21:03:23+08:00"><meta name=Keywords content><meta name=description content="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/9f3a95de.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RrlSVa01MRUDMJ><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RzWw8UA6cvVSvL><p>作者 | IronmanJay</p><p>責編 | 王曉曼</p><p>出品 | CSDN博客</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT4Gwk56bt5iOJ><p><strong>Docker 基礎介紹</strong></p><p>下圖為 Docker 圖標（是一個鯨魚上面是集裝箱）。</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/S10W7nm4hgx5ZD><p><strong>1、我們為什麼要使用Docker</strong></p><p>當我們在工作中，一款產品從開發設計到上線運行，其中需要開發人員和運維工程師，開發人員負責代碼編寫，開發產品，運維工程師需要測試環境，產品部署。這之間就會有分歧。</p><p>比如開發人員在自己的電腦上運行產品沒有問題，可是換了一個環境，運維工程師部署的時候由於操作環境和開發人員不一致，其中包括操作系統、開發環境、部署文件等等。</p><p>開發人員需要告訴運維團隊所需的全部配置文件+所有的軟件環境，也就導致產品部署出現問題，開發人員和運維工程師出現分歧。</p><p>就好比我們要開發一個電商項目，其中肯定包括 Java 環境/Tomcat/ MySQL / JDBC 驅動包/相應 jar 包等，還需要較複雜的安裝配置，並且不能跨平臺使用，如果開發人員在 Windows 上開發，而運維工程師部署產品在 Linux 上，就會導致由於環境不同的產品部署問題，就算不跨系統，而是換一臺同樣操作系統的服務器，要移植部署依然非常麻煩。為了解決這個問題，我們的 Docker 應運而生!</p><p><strong>2、Docker是什麼</strong></p><p>說了這麼多，那麼 Docker 到底是什麼，能幫我們做什麼，且聽我慢慢道來。</p><p>首先我們要知道，Docker 是基於 Go 語言實現的雲開源項目，Docker 的主要目標是“Build，Ship and Run Any App，Anywhere”，Docker 其中包括，鏡像、容器、倉庫，很簡單，目的就是通過對應用組件的封裝、分發、部署、運行等生命週期的管理，使用戶的產品（可以是 web 應用或者數據庫應用）及其環境能夠做到“一次封裝，到處運行”。</p><p>再通俗點說，就是我們使用 Docker，使得運行在 Docker 容器上面的應用，配置好一次環境，換到別的機器上可以一鍵部署，大大簡化了操作，實現了跨平臺，跨服務器，由下而上打包，達到應用程式跨平臺間的無縫接軌運作。</p><p>一句話，<strong>Docker解決了運行環境和配置問題軟件容器，方便做持續集成並有助於整體發佈的容器虛擬化技術。</strong><strong>3、Docker能幹什麼</strong></p><p>這個需要對比來說，其實我們常用的虛擬機就和Docker類似，我將通過之前的虛擬機技術和現在和容器虛擬化技術做一個對比。</p><p>（1）之前的虛擬機技術</p><p>我們對虛擬機並不陌生，其實它也可以看作是一個Docker，是一種帶環境安裝的解決方案，可以在一個操作系統中運行另一個操作系統，對於計算機底層來說，虛擬機就是一個軟件而已，不需要的時候就可以刪掉，對其他部分毫無影響，我們也可以通過虛擬機實現不同產品的打包發佈，但是它也有很多缺點，比如：資源佔用多、冗餘步驟多、啟動慢。</p><p>（2）容器虛擬化技術</p><p>由於前面虛擬機存在諸多問題，Linux 發展出了另一種虛擬化技術：Linux 容器，Linux 容器不是模擬一個完整的操作系統而是對進程進行隔離，有了容器，我們就可以將軟件運行所需的所有資源打包到一個隔離的容器中，容器與虛擬機不同，不需要捆綁一整套操作系統，只需要軟件工作所需的庫資源和設置。系統因此而變得高效輕量並保證部署在任何環境中的軟件都能始終如一地運行。</p><p>（3）小總結</p><ul><li><p>傳統虛擬機技術是虛擬出一套硬件後，在其上運行一個完整操作系統，在該系統上再運行所需應用進程。</p></li><li><p>而容器內的應用進程直接運行於宿主的內核，容器內沒有自己的內核，而且也沒有進行硬件虛擬。因此容器要比傳統虛擬機更為輕便。</p></li><li><p>每個容器之間互相隔離，每個容器有自己的文件系統 ，容器之間進程不會相互影響，能區分計算資源。</p></li></ul><p><strong>4、Docker的優勢</strong></p><ul><li><p>更快速的應用交付和部署；</p></li><li><p>更便捷的升級和擴縮容；</p></li><li><p>更簡單的系統運維；</p></li><li><p>更高效的計算資源利用。</p></li></ul><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RT7S2kzFTfre26><p><strong>Docker安裝</strong></p><p><strong>1、前提說明</strong></p><p>目前，CentOS 僅發行版本中的內核支持 Docker。Docker 運行在CentOS-7 上，要求系統為64位、系統內核版本為3.10 以上。</p><p>Docker 運行在 CentOS-6.5 或更高的版本的 CentOS 上，要求系統為64位、系統內核版本為 2.6.32-431 或者更高版本。</p><p>所以我們需要查看自己的Centos內核是否支持Docker，使用下面的命令，可根據上面對照看自己的Centos是否符合要求，如不符合請升級。</p><pre>[ironmanjay@localhost ~]$ uname -a<br>Linux localhost.localdomain 3.10.0-1062.12.1.el7.x86_64 #1 SMP Tue Feb 4 23:02:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</pre><p><strong>2、具體安裝步驟</strong></p><p>Dcoker安裝比較簡單，只要按照我的步驟一步一步走，肯定沒問題，請讀者細心。</p><p>（1）更新下載源</p><pre>1、先備份<br>sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br>2、更換源<br>sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</pre><p>（2）更新yum包</p><pre><p>sudo yum update</p></pre><p>（3）安裝相關軟件包</p><pre><p>sudo yum -y install gcc</p></pre><pre><p>sudo yum -y install gcc-c++</p></pre><pre>sudo yum install -y yum-utils device-mapper-persistent-data lvm2<br></pre><p>（4）更新yum軟件包索引</p><pre><p>sudo yum makecache fast</p></pre><p>（5）安裝Dcoker</p><pre><p>sudo yum -y install docker-ce</p></pre><p>（6）啟動Dcoker服務</p><pre>systemctl start docker<br></pre><p>（7）開機自啟</p><pre><p>sudo systemctl enable docker</p></pre><p>（8）將Docker加入到組中</p><pre><p>sudo groupadd docker</p></pre><pre><p>sudo gpasswd -a [本地用戶名] docker</p></pre><p>（9）配置鏡像加速</p><p>首先進入阿里雲的容器鏡像服務網站點擊這個連接，使用支付寶淘寶登錄都可以，如下圖，複製加速器地址。</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W7ohDZBTBj7><p>然後按照下面操作修改鏡像加速：</p><pre><p>sudo mkdir -p /etc/docker</p></pre><pre><p>sudo vim /etc/docker/daemon.json</p></pre><p>在打開的文件中按照下面編輯：</p><pre>{<br>"registry-mirrors": ["剛剛複製的加速器地址"]<br>}<br></pre><p>加載配置文件：</p><pre>sudo systemctl daemon-reload<br></pre><p>重啟Docker服務</p><pre><p>sudo systemctl restart docker</p></pre><p><strong>3、測試</strong></p><p>（1）查看版本</p><pre><p>docker version</p></pre><p>如下圖：</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W7p42B1rvre><p><strong>（2）HelloWorld</strong></p><pre><p>docker pull hello-world</p></pre><pre>docker run hello-world<br></pre><p>如下圖：</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/S10W8UNGWBbXPa><p>至此安裝完畢！</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTJXJ1kBqzfCnu><p><strong>Docker常用命令</strong></p><p><strong>1、幫助命令</strong></p><pre>docker version #查看版本號<br>docker info #顯示Docker系統信息，包括鏡像和容器數<br>docker --help #查看Docker有哪些命令</pre><p><strong>2、鏡像命令</strong></p><pre>docker images #查看當前Docker中的鏡像<br>docker search 某個鏡像名字 #查詢某個鏡像<br>docker pull 某個鏡像名字 #拉取(下載)某個鏡像<br>docker rmi 某個鏡像名字ID #刪除某個鏡像</pre><p><strong>3、容器基本命令(切記，有鏡像才能創建容器)</strong></p><pre>docker run [OPTIONS] image [COMMAND] [ARG...] #新建並啟動容器<br>docker ps [OPTIONS] #列出當前所有正在運行的容器<br>exit #容器停止退出<br>ctrl+P+Q #容器不停止退出<br>docker start 容器ID或者容器名 #啟動容器<br>docker restart 容器ID或者容器名 #重啟容器<br>docker stop 容器ID或者容器名 #停止容器<br>docker kill 容器ID或者容器名 #強制停止容器<br>docker rm 容器ID #刪除已停止的容器<br>docker rm -f $(docker ps -a -q) #一次性刪除多個容器<br>docker ps -a -q | xargs docker rm #一次性刪除多個容器</pre><p><strong>4、容器重要命令</strong></p><pre>docker run -d 容器名 #啟動守護式容器<br>docker logs -f -t --tail 容器ID #查看容器日誌,-t是加入時間戳，-f是最新的日誌打印,--tail數字顯示最後多少條<br><br>docker top 容器ID #查看容器內運行的進程<br>docker inspect 容器ID #查看容器內部細節<br>docker exec -it 容器ID bashShell #進入正在運行的容器並以命令行交互<br>docker attach 容器ID #重新進入Docker容器<br>docker cp 容器ID:容器內路徑 目的主機路徑 #從容器內拷貝文件到主機上</pre><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7YR5xGDl><p><strong>Docker 鏡像</strong></p><p><strong>1、Docker鏡像是什麼？</strong></p><p>是一種UnionFS（聯合文件系統），是一種分層、輕量級並且高性能的文件系統，它支持對文件系統的修改作為一次提交來一層層的疊加，同時可以將不同目錄掛載到同一個虛擬文件系統下(unite several directories into a single virtual filesystem)。</p><p>Union 文件系統是 Docker 鏡像的基礎。鏡像可以通過分層來進行繼承，基於基礎鏡像（沒有父鏡像），可以製作各種具體的應用鏡像。</p><p><strong>2、Docker鏡像加載原理</strong></p><p>Docker的鏡像實際上由一層一層的文件系統組成，這種層級的文件系統UnionFS。bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引導加載kernel, Linux剛啟動時會加載bootfs文件系統，在Docker鏡像的最底層是bootfs。</p><p>這一層與我們典型的Linux/Unix系統是一樣的，包含boot加載器和內核。當boot加載完成之後整個內核就都在內存中了，此時內存的使用權已由bootfs轉交給內核，此時系統也會卸載bootfs。</p><p><strong>3、Docker鏡像為什麼很小</strong></p><p>如果我們從倉庫pull一個centos只有200左右mb，但是我們的鏡像centos文件高達4G左右，因為我們的在倉庫pull的centos剔除了無用的東西，只是一個精簡的OS，rootfs可以很小，只包含了最基本的命令、工具和程序庫就可以了，因為底層直接用Host的kernel，自己只需要提供rootfs 就行了。</p><p><strong>4、Docker分層的鏡像</strong></p><p>如下圖所見，當我們在倉庫下載tomcat時，是一層一層下載的，這裡麵包含著運行tomcat的環境，就像洋蔥一樣，一層一層的最終展示給我們鏡像版的tomcat。</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/S10W8V18Bg9Wq8><p><strong>5、Docker鏡像為什麼要採用分層結構</strong></p><p>Docker鏡像最大的一個好處就是 - 共享資源。</p><p>比如：有多個鏡像都從相同的 base 鏡像構建而來，那麼宿主機只需在磁盤上保存一份base鏡像，同時內存中也只需加載一份 base 鏡像，就可以為所有容器服務了。而且鏡像的每一層都可以被共享。</p><p><strong>6、Docker鏡像的特點</strong></p><p>Docker鏡像都是隻讀的當容器啟動時，一個新的可寫層被加載到鏡像的頂部。這一層通常被稱作“容器層”，“容器層”之下的都叫“鏡像層”。</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTJXJ7uHXU5GZc><p><strong>Docker 容器數據卷</strong></p><p><strong>1、什麼是Docker容器數據卷</strong></p><p>首先我們先明確一個理念，我們的Redia使用RDB和AOF來實現持久化，其實我們的Docker容器數據卷就類似這個，為了實現Docker的數據持久化，當我們運用與運行的環境打包形成容器，運行可以伴隨著容器，但是我們對數據的要求希望是持久化的，而容器之間希望有可能共享數據，也就是為了能保存數據在Docker中我們使用卷。</p><p><strong>2、Docker容器數據卷能幹嗎</strong>簡而言之，容器數據卷可以幫我們實現容器的持久化，和容器間繼承+共享數據，而什麼又是卷呢？</p><p>卷就是目錄或文件，存在於一個或多個容器中，由docker掛載到容器，但不屬於聯合文件系統，因此能夠繞過Union File System提供一些用於持續存儲或共享數據的特性，卷的設計目的就是數據的持久化，完全獨立於容器的生存週期，因此Docker不會在容器刪除時刪除其掛載的數據卷。</p><p><strong>3、怎麼用數據卷(容器內添加)</strong>我們有兩種方式來添加容器內數據卷，一種是直接命令添加，另一種是DockerFile添加，下面我們詳解。</p><p>第一種方式：直接命令添加：</p><p>（1）掛載容器內數據卷</p><pre><p>docker run -it -v /宿主機絕對路徑目錄:/容器內目錄 鏡像名</p></pre><p>（2）查看數據卷是否掛載成功</p><pre><p>docker inspect 容器ID</p></pre><p>第二種方式：DockerFile添加：</p><p>（1）根目錄下新建mydocker文件夾並進入</p><pre># 進入根目錄<br>cd /<br># 新建mydocker<br>sudo mkdir mydocker</pre><p>（2）在mydocker中新建Dockerfile文件</p><pre>sudo touch Dockerfile # 新建<br>sudo vim Dockerfile # 編輯</pre><p>（3）File構建</p><pre># volume test<br>FROM centos<br>VOLUME ["/dataVolumeContainer1","/dataVolumeContainer2"]<br>CMD echo "finished,--------success1"<br>CMD /bin/bash</pre><p>（4）build後生成鏡像</p><pre><p>docker build Dockerfile</p></pre><p><strong>4、注意</strong>如果Docker掛載主機目錄Docker訪問出現cannot open directory .: Permissiondenied。</p><p>解決辦法：在掛載目錄後多加一個–privileged=true參數即可。</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RTLSNam5ZxLDlM><p><strong>DockerFile</strong></p><p><strong>1、DockerFile是什麼</strong></p><p>Dockerfile是用來構建Docker鏡像的構建文件，是由一系列命令和參數構成的腳本。</p><p><strong>2、DockerFile構建三步驟</strong></p><ul><li><p>編寫Dockerfile文件</p></li><li><p>dockerbuild</p></li><li><p>dockerrun</p></li></ul><p><strong>3、DockerFile構建過程解析</strong></p><ul><li><p>docker從基礎鏡像運行一個容器；</p></li><li><p>執行一條指令並對容器作出修改；</p></li><li><p>執行類似docker commit的操作提交一個新的鏡像層；</p></li><li><p>docker再基於剛提交的鏡像運行一個新容器；</p></li><li><p>執行dockerfile中的下一條指令直到所有指令都執行完成。</p></li></ul><p><strong>4、DockerFile體系結構(保留字指令)</strong></p><pre>FROM #基礎鏡像，當前新鏡像是基於哪個鏡像的<br>MAINTAINER #鏡像維護者的姓名和郵箱地址<br>RUN #容器構建時需要運行的命令<br>EXPOSE #當前容器對外暴露出的端口<br>WORKDIR #指定在創建容器後，終端默認登陸的進來工作目錄<br>ENV #用來在構建鏡像過程中設置環境變量<br>ADD #將宿主機目錄下的文件拷貝進鏡像且ADD命令會自動處理URL和解壓tar壓縮包<br>COPY #類似ADD，拷貝文件和目錄到鏡像中。將從構建上下文目錄中 &lt;源路徑&gt; 的文件/目錄複製到新的一層的鏡像內的 &lt;目標路徑&gt; 位置<br>VOLUME #容器數據卷，用於數據保存和持久化工作<br>CMD #指定一個容器啟動時要運行的命令，Dockerfile 中可以有多個 CMD 指令，但只有最後一個生效，CMD 會被 docker run 之後的參數替換<br>ENTRYPOINT #指定一個容器啟動時要運行的命令，ENTRYPOINT 的目的和 CMD 一樣，都是在指定容器啟動程序及參數<br>ONBUILD #當構建一個被繼承的Dockerfile時運行命令，父鏡像在被子繼承後父鏡像的onbuild被觸發</pre><p><strong>5、自定義鏡像mycentos</strong></p><p>（1）進入根目錄新建mydocker</p><pre>#進入根目錄<br>cd /<br>#新建mydocker文件夾<br>sudo mkdir mydocker</pre><p>（2）在此目錄下新建DockerFile文件</p><pre><p>vim DockerFile</p></pre><p>（3）編輯DockerFile</p><pre>FROM centos<br>MAINTAINER IronmanJay&lt;IronmanJay@qq.com&gt;<br>ENV MYPATH /usr/localWORKDIR $MYPATH<br>RUN yum -y install vimRUN yum -y install net-tools<br>EXPOSE 80<br>CMD echo $MYPATHCMD echo "success--------------ok"CMD /bin/bash</pre><p>（4）構建</p><pre><p>docker build -t 新鏡像名字:TAG .</p></pre><p>（5）運行</p><pre><p>docker run -it 新鏡像名字:TAG </p></pre><p>（6）列出鏡像的變更歷史</p><pre><p>docker history 鏡像名</p></pre><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/RTRIuPNI7JPB03><p><strong>Docker常用安裝</strong></p><p><strong>1、總體步驟</strong></p><ul><li><p>搜索鏡像</p></li><li><p>拉取鏡像</p></li><li><p>查看鏡像</p></li><li><p>啟動鏡像</p></li><li><p>停止容器</p></li><li><p>移除容器</p></li></ul><p><strong>2、安裝tomcat</strong></p><p>（1）dockerhub上面查找tomcat鏡像</p><pre><p>docker search tomcat</p></pre><p>（2）從docker hub上拉取tomcat鏡像到本地</p><pre><p>docker pull tomcat</p></pre><p>（3）dockerimages查看是否有拉取到的tomcat</p><pre><p>docker images</p></pre><p>（4）使用tomcat鏡像創建容器(也叫運行鏡像)</p><pre><p>docker run -it -p 8080:8080 tomcat</p></pre><p>（5）其他</p><pre>-p #主機端口:docker容器端口<br>-P #隨機分配端口<br>i #交互<br>t #終端</pre><p><strong>3、安裝MySQL</strong></p><p>（1）dockerhub上面查找mysql鏡像</p><pre><p>docker search mysql</p></pre><p>（2）從docker hub上(阿里雲加速器)拉取mysql鏡像到本地</p><pre><p>docker pull mysql</p></pre><p>（3）使用mysql鏡像創建容器(也叫運行鏡像)</p><pre><p>docker run -p 12345:3306 --name mysql -v /IronmanJay/mysql/conf:/etc/mysql/conf.d -v /IronmanJay/mysql/logs:/logs -v /IronmanJay/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql</p></pre><p>（4）命令說明</p><pre>-p 12345:3306： #將主機的12345端口映射到docker容器的3306端口<br>--name mysql： #運行服務名字<br>/IronmanJay/mysql/conf:/etc/mysql/conf.d ： #將主機/IronmanJay/mysql錄下的conf/my.cnf 掛載到容器的 /etc/mysql/conf.d-v<br>/IronmanJay/mysql/logs:/logs： #將主機/IronmanJay/mysql目錄下的 logs 目錄掛載到容器的 /logs<br>-v /IronmanJay/mysql/data:/var/lib/mysql ： #將主機/IronmanJay/mysql目錄下的data目錄掛載到容器的 /var/lib/mysql -e<br>MYSQL_ROOT_PASSWORD=123456： #初始化 root 用戶的密碼。-d mysql: 後臺程序運行mysql</pre><p><strong>4、安裝Redis</strong></p><p>（1）從docker hub上(阿里雲加速器)拉取redis鏡像到本地</p><pre><p>docker pull redis</p></pre><p>（2）使用redis鏡像創建容器(也叫運行鏡像)</p><pre><p>docker run -p 6379:6379 -v /IronmanJay/myredis/data:/data -v /IronmanJay/myredis/conf/redis.conf:/usr/local/etc/redis/redis.conf -d redis:3.2 redis-server /usr/local/etc/redis/redis.conf --appendonly yes</p></pre><p>（3）測試redis-cli連接</p><pre><p>docker exec -it 運行著Redis服務的容器ID redis-cli</p></pre><p>版權聲明：本文為CSDN博主「IronmanJay」的原創文章，原文鏈接：https://blog.csdn.net/IronmanJay/article/details/104677814</p><img alt="整理了一份 Docker系統知識，從安裝到熟練操作看這篇就夠了 | 原力計劃" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/R69FpRH4d90a7d><pre><pre><pre><p>☞程序員在這些地方敲代碼，普通筆記本根本扛不住</p><p>☞怒肝 8 個月源碼，我成為了 Spring 開源貢獻者</p><p>☞可怕！CPU 竟成了黑客的幫凶</p><p>☞Gary Marcus：因果熵理論的荒誕和認知科學帶給AI的11個啟示 | 文末贈書</p><p>☞這 10 個雲計算錯誤，會讓你的業務一蹶不振</p><p>☞好撲科技結合區塊鏈行業發展趨勢，重磅推出“好撲區塊鏈合夥人”計劃</p></pre></pre></pre></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Docker</a></li><li><a>系統</a></li><li><a>知識</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/21e58907.html alt=局部放電檢測系統基本知識介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9d90c6078986423fac1879d5d85887d4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/21e58907.html title=局部放電檢測系統基本知識介紹>局部放電檢測系統基本知識介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0404c40.html alt=弱電工程管路系統知識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/46f4e6fdc0e64702ab49742e8d0d9df3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0404c40.html title=弱電工程管路系統知識>弱電工程管路系統知識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ddb1c482.html alt=基礎知識普及：操作系統中的進程與線程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7ff1ca2888d742f29a8201fe1c7d60d5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ddb1c482.html title=基礎知識普及：操作系統中的進程與線程>基礎知識普及：操作系統中的進程與線程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8807672.html alt=下一代AI系統基石：知識圖譜將何去何從？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/db72b607c05646e9b4ce4b3d5f6bb559 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8807672.html title=下一代AI系統基石：知識圖譜將何去何從？>下一代AI系統基石：知識圖譜將何去何從？</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/1bff574a.html alt=圖解版心血管系統知識彙總，值得收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/9642a32f-5d6c-4c88-8a58-8627a87dbaf1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/1bff574a.html title=圖解版心血管系統知識彙總，值得收藏>圖解版心血管系統知識彙總，值得收藏</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/f6ae2d45.html alt=健康知識科普男性生殖系統感染，梅毒的傳播途徑避免接觸傳染 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/f1663b24-8d7c-4782-bf49-71bad1c56ec7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/f6ae2d45.html title=健康知識科普男性生殖系統感染，梅毒的傳播途徑避免接觸傳染>健康知識科普男性生殖系統感染，梅毒的傳播途徑避免接觸傳染</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/b2c96bfa.html alt=嵌入式系統知識和接口技術總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3146b109a9234b4c85e4725d039258d6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/b2c96bfa.html title=嵌入式系統知識和接口技術總結>嵌入式系統知識和接口技術總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6bf6215.html alt=勵磁控制系統的基本知識 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/279b1553ef4e4566a58a4f3d8cc0df8e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6bf6215.html title=勵磁控制系統的基本知識>勵磁控制系統的基本知識</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0db223c.html alt=最全總結！嵌入式系統知識和接口技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2113e6a1b41146deb35c8ba719ce9e2d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0db223c.html title=最全總結！嵌入式系統知識和接口技術>最全總結！嵌入式系統知識和接口技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/804ea540.html alt=「行業知識」結構工程師的心結——鋼樑扭轉計算 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/177f1b37fa4b41698a4e78accf7efbb4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/804ea540.html title=「行業知識」結構工程師的心結——鋼樑扭轉計算>「行業知識」結構工程師的心結——鋼樑扭轉計算</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bcc4c942.html alt=「鋼構知識」經典鋼結構設計問答 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bcc4c942.html title=「鋼構知識」經典鋼結構設計問答>「鋼構知識」經典鋼結構設計問答</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7f6e1fd9.html alt=「鋼構知識」經典鋼結構設計問答彙總 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/76195b1e9d934c2e952b060dad0951e6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7f6e1fd9.html title=「鋼構知識」經典鋼結構設計問答彙總>「鋼構知識」經典鋼結構設計問答彙總</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0fc448f5.html alt=各種門窗知識大全，是我見過最全的了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15349013240149cf1ef5531 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0fc448f5.html title=各種門窗知識大全，是我見過最全的了>各種門窗知識大全，是我見過最全的了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f0ff6432.html alt=鋼結構必備知識38問 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f0ff6432.html title=鋼結構必備知識38問>鋼結構必備知識38問</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb258a5a.html alt=鋼結構必備知識38問，你的晉級之路！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1535975955779bcac330762 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb258a5a.html title=鋼結構必備知識38問，你的晉級之路！>鋼結構必備知識38問，你的晉級之路！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>