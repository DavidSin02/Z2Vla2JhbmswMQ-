<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/ec7dea99ced1417b940a9ffe67dc81aa"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a21b0013.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a21b0013.html><meta property="article:published_time" content="2020-11-14T21:04:30+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:30+08:00"><meta name=Keywords content><meta name=description content="SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/a21b0013.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>å‰è¨€</p><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç´¹çš„æ˜¯SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£ã€‚</p><h2 class=pgc-h-arrow-right>SpringBoot Aop</h2><p><strong>èªªæ˜ï¼šå¦‚æœæƒ³ç›´æ¥ç²å–å·¥ç¨‹é‚£éº¼å¯ä»¥ç›´æ¥è·³åˆ°åº•éƒ¨ï¼Œé€šééˆæ¥ä¸‹è¼‰å·¥ç¨‹ä»£ç¢¼ã€‚</strong></p><h3 class=pgc-h-arrow-right>åˆ‡é¢(Aop)</h3><p><strong>ä¸€ã€æ¦‚å¿µ</strong></p><blockquote><p>AOPï¼ˆAspect OrientedProgrammingï¼‰ï¼šé¢å‘åˆ‡é¢ç·¨ç¨‹ï¼Œé¢å‘åˆ‡é¢ç·¨ç¨‹ï¼ˆä¹Ÿå«é¢å‘æ–¹é¢ç·¨ç¨‹ï¼‰ï¼Œæ˜¯ç›®å‰è»Ÿä»¶é–‹ç™¼ä¸­çš„ä¸€å€‹ç†±é»ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€å€‹é‡è¦å…§å®¹ã€‚åˆ©ç”¨AOPå¯ä»¥å°æ¥­å‹™é‚è¼¯çš„å„å€‹éƒ¨åˆ†é€²è¡Œéš”é›¢ï¼Œå¾è€Œä½¿å¾—æ¥­å‹™é‚è¼¯å„éƒ¨åˆ†ä¹‹é–“çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ™‚æé«˜äº†é–‹ç™¼çš„æ•ˆç‡ã€‚</p></blockquote><p><strong>äºŒã€ç”¨é€”</strong></p><blockquote><p>æ—¥èªŒè¨˜éŒ„ï¼Œæ€§èƒ½çµ±è¨ˆï¼Œå®‰å…¨æ§åˆ¶ï¼Œæ¬Šé™ç®¡ç†ï¼Œäº‹å‹™è™•ç†ï¼Œç•°å¸¸è™•ç†ï¼Œè³‡æºæ± ç®¡ç†ã€‚</p></blockquote><p><strong>ä¸‰ã€è©³è§£</strong></p><p>1.åˆ‡é¢ï¼ˆAspectï¼‰:å®˜æ–¹çš„æŠ½è±¡å®šç¾©ç‚ºâ€œä¸€å€‹é—œæ³¨é»çš„æ¨¡å¡ŠåŒ–ï¼Œé€™å€‹é—œæ³¨é»å¯èƒ½æœƒæ©«åˆ‡å¤šå€‹å°è±¡â€ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œâ€œåˆ‡é¢â€å°±æ˜¯é¡TestAspectæ‰€é—œæ³¨çš„å…·é«”è¡Œç‚ºï¼Œä¾‹å¦‚ï¼šAServiceImpl.barA()çš„èª¿ç”¨å°±æ˜¯åˆ‡é¢TestAspectæ‰€é—œæ³¨çš„è¡Œç‚ºä¹‹ä¸€ã€‚â€œåˆ‡é¢â€åœ¨ApplicationContextä¸­aop:aspectä¾†é…ç½®ã€‚</p><p>2.é€£æ¥é»ï¼ˆJoinpointï¼‰:ç¨‹åºåŸ·è¡Œéç¨‹ä¸­çš„æŸä¸€è¡Œç‚ºï¼Œä¾‹å¦‚ï¼ŒAServiceImpl.barA()çš„èª¿ç”¨æˆ–è€…BServiceImpl.barB(String _msg, int _type)æ‹‹å‡ºç•°å¸¸ç­‰è¡Œç‚ºã€‚</p><p>3.é€šçŸ¥ï¼ˆAdviceï¼‰:â€œåˆ‡é¢â€å°æ–¼æŸå€‹â€œé€£æ¥é»â€æ‰€ç”¢ç”Ÿçš„å‹•ä½œï¼Œä¾‹å¦‚ï¼ŒTestAspectä¸­å°com.spring.serviceåŒ…ä¸‹æ‰€æœ‰é¡çš„æ–¹æ³•é€²è¡Œæ—¥èªŒè¨˜éŒ„çš„å‹•ä½œå°±æ˜¯ä¸€å€‹Adviceã€‚å…¶ä¸­ï¼Œä¸€å€‹â€œåˆ‡é¢â€å¯ä»¥åŒ…å«å¤šå€‹â€œAdviceâ€ï¼Œä¾‹å¦‚TestAspectã€‚Adviceå…±æœ‰å¦‚ä¸‹5ç¨®é¡å‹ï¼š</p><ul><li>A å‰ç½®é€šçŸ¥ï¼ˆBefore adviceï¼‰ ï¼šåœ¨æŸé€£æ¥é»ï¼ˆJoinPointï¼‰ä¹‹å‰åŸ·è¡Œçš„é€šçŸ¥ï¼Œä½†é€™å€‹é€šçŸ¥ä¸èƒ½é˜»æ­¢é€£æ¥é»å‰çš„åŸ·è¡Œã€‚xmlä¸­åœ¨aop:aspectè£¡é¢ä½¿ç”¨aop:beforeå…ƒç´ é€²è¡Œè²æ˜ï¼›ä¾‹å¦‚ï¼ŒTestAspectä¸­çš„doBeforeæ–¹æ³•ã€‚è¨»è§£ä¸­ä½¿ç”¨@Beforeè²æ˜ï¼›ä¾‹å¦‚ï¼ŒTestAnnotationAspectä¸­çš„doBeforeæ–¹æ³•ã€‚</li><li>B å¾Œé€šçŸ¥ï¼ˆAfter adviceï¼‰ï¼šç•¶æŸé€£æ¥é»é€€å‡ºçš„æ™‚å€™åŸ·è¡Œçš„é€šçŸ¥ï¼ˆä¸è«–æ˜¯æ­£å¸¸è¿”å›é‚„æ˜¯ç•°å¸¸é€€å‡ºï¼‰ã€‚xmlä¸­åœ¨aop:aspectè£¡é¢ä½¿ç”¨aop:afterå…ƒç´ é€²è¡Œè²æ˜ã€‚ä¾‹å¦‚ï¼ŒTestAspectä¸­çš„doAfteræ–¹æ³•ï¼Œæ‰€ä»¥AOPTestä¸­èª¿ç”¨BServiceImpl.barBæ‹‹å‡ºç•°å¸¸æ™‚ï¼ŒdoAfteræ–¹æ³•ä»ç„¶åŸ·è¡Œã€‚è¨»è§£ä¸­ä½¿ç”¨@Afterè²æ˜ã€‚</li><li>C è¿”å›å¾Œé€šçŸ¥ï¼ˆAfter return adviceï¼‰ï¼šåœ¨æŸé€£æ¥é»æ­£å¸¸å®Œæˆå¾ŒåŸ·è¡Œçš„é€šçŸ¥ï¼Œä¸åŒ…æ‹¬æ‹‹å‡ºç•°å¸¸çš„æƒ…æ³ã€‚xmlä¸­åœ¨aop:aspectè£¡é¢ä½¿ç”¨å…ƒç´ é€²è¡Œè²æ˜ã€‚è¨»è§£ä¸­ä½¿ç”¨@AfterReturningè²æ˜ï¼›</li><li>D ç’°ç¹é€šçŸ¥ï¼ˆAround adviceï¼‰ ï¼šåŒ…åœä¸€å€‹é€£æ¥é»çš„é€šçŸ¥ï¼Œé¡ä¼¼Webä¸­Servletè¦ç¯„ä¸­çš„Filterçš„doFilteræ–¹æ³•ã€‚å¯ä»¥åœ¨æ–¹æ³•çš„èª¿ç”¨å‰å¾Œå®Œæˆè‡ªå®šç¾©çš„è¡Œç‚ºï¼Œä¹Ÿå¯ä»¥é¸æ“‡ä¸åŸ·è¡Œã€‚xmlä¸­åœ¨aop:aspectè£¡é¢ä½¿ç”¨aop:aroundå…ƒç´ é€²è¡Œè²æ˜ã€‚ä¾‹å¦‚ï¼ŒTestAspectä¸­çš„doAroundæ–¹æ³•ã€‚è¨»è§£ä¸­ä½¿ç”¨@Aroundè²æ˜ã€‚</li><li>E æ‹‹å‡ºç•°å¸¸å¾Œé€šçŸ¥ï¼ˆAfter throwing adviceï¼‰ ï¼š åœ¨æ–¹æ³•æ‹‹å‡ºç•°å¸¸é€€å‡ºæ™‚åŸ·è¡Œçš„é€šçŸ¥ã€‚xmlä¸­åœ¨aop:aspectè£¡é¢ä½¿ç”¨aop:after-throwingå…ƒç´ é€²è¡Œè²æ˜ã€‚ä¾‹å¦‚ï¼ŒTestAspectä¸­çš„doThrowingæ–¹æ³•ã€‚è¨»è§£ä¸­ä½¿ç”¨@AfterThrowingè²æ˜ã€‚</li><li>é€šçŸ¥åŸ·è¡Œé †åºï¼šå‰ç½®é€šçŸ¥â†’ç’°ç¹é€šçŸ¥é€£æ¥é»ä¹‹å‰â†’é€£æ¥é»åŸ·è¡Œâ†’ç’°ç¹é€šçŸ¥é€£æ¥é»ä¹‹å¾Œâ†’è¿”å›é€šçŸ¥â†’å¾Œé€šçŸ¥ â†’(å¦‚æœç™¼ç”Ÿç•°å¸¸)ç•°å¸¸é€šçŸ¥â†’å¾Œé€šçŸ¥ã€‚</li></ul><p>4.åˆ‡å…¥é»ï¼ˆPointcutï¼‰åŒ¹é…é€£æ¥é»çš„æ–·è¨€ï¼Œåœ¨AOPä¸­é€šçŸ¥å’Œä¸€å€‹åˆ‡å…¥é»è¡¨é”å¼é—œè¯ã€‚ä¾‹å¦‚ï¼ŒTestAspectä¸­çš„æ‰€æœ‰é€šçŸ¥æ‰€é—œæ³¨çš„é€£æ¥é»ï¼Œéƒ½ç”±åˆ‡å…¥é»è¡¨é”å¼execution(* com.spring.service..(..))ä¾†æ±ºå®šã€‚</p><p><strong>æ³¨:ä»¥ä¸Šçš„ç†è«–çŸ¥è­˜åƒè€ƒ:https://www.cnblogs.com/yepei/p/4735298.html</strong></p><h3 class=pgc-h-arrow-right>é–‹ç™¼æº–å‚™</h3><p><strong>ç’°å¢ƒè¦æ±‚</strong></p><p><strong>JDK</strong>ï¼š1.8</p><p><strong>SpringBoot</strong>ï¼š2.2.6.RELEASE</p><p>é¦–å…ˆé‚„æ˜¯Mavençš„ç›¸é—œä¾è³´ï¼ŒåŸºæœ¬å’Œæ™®é€šspringbooté …ç›®ä¸€æ¨£ï¼Œå°±æ˜¯å¤šäº†spring-boot-starter-aopé€™jarçš„ä¾è³´ã€‚</p><p><strong>pom.xml</strong>æ–‡ä»¶å¦‚ä¸‹:</p><pre><code>&lt;properties&gt;	&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;	&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;	&lt;java.version&gt;1.8&lt;/java.version&gt;	&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;	&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;&lt;/properties&gt;&lt;parent&gt;	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;	&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;	&lt;version&gt;2.2.6.RELEASE&lt;/version&gt;	&lt;relativePath/&gt;&lt;/parent&gt;&lt;dependencies&gt;	&lt;dependency&gt;		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;		&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;	&lt;/dependency&gt;	&lt;dependency&gt;		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;		&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;		&lt;scope&gt;test&lt;/scope&gt;	&lt;/dependency&gt;	&lt;dependency&gt;		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;		&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;	&lt;/dependency&gt;	&lt;dependency&gt;		&lt;groupId&gt;com.alibaba&lt;/groupId&gt;		&lt;artifactId&gt;fastjson&lt;/artifactId&gt;		&lt;version&gt;1.2.68&lt;/version&gt;	&lt;/dependency&gt;     &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;        &lt;optional&gt;true&lt;/optional&gt;        &lt;scope&gt;test&lt;/scope&gt;	&lt;/dependency&gt;&lt;/dependencies&gt;</code></pre><p>application.propertiesçš„æ–‡ä»¶çš„é…ç½®:</p><pre><code>banner.charset=UTF-8server.tomcat.uri-encoding=UTF-8spring.http.encoding.charset=UTF-8spring.http.encoding.enabled=truespring.http.encoding.force=truespring.messages.encoding=UTF-8spring.application.name=springboot-aspectserver.port=8180</code></pre><h3 class=pgc-h-arrow-right>ä»£ç¢¼ç·¨å¯«</h3><p>SpringBootåœ¨ä½¿ç”¨åˆ‡é¢çš„æ™‚å€™ï¼Œåªéœ€è¦åœ¨è‡ªå®šç¾©çš„ä¸€å€‹åˆ‡é¢é¡ä¸­åŠ ä¸Š @Aspect è¨»è§£é€²è¡Œè²æ˜ï¼Œç„¶å¾Œåœ¨è‡ªå®šç¾©åˆ‡é¢çš„é¡æ–¹æ³•ä¸­åŠ ä¸Šå°æ‡‰çš„è¨»è§£å³å¯ã€‚æ¯”å¦‚é€™è£¡çš„ç¤ºä¾‹æˆ‘å€‘æƒ³åšä¸€å€‹è«‹æ±‚éŸ¿æ‡‰çš„åŠ è§£å¯†åˆ‡é¢è™•ç†ï¼Œæ¥­å‹™å±¤åªéœ€é—œå¿ƒä»£ç¢¼é‚è¼¯å¯¦ç¾ï¼Œè€Œä¸ç”¨é—œå¿ƒè«‹æ±‚åƒæ•¸å’ŒéŸ¿æ‡‰åƒæ•¸çš„åŠ è§£å¯†å¯¦ç¾ã€‚é‚£éº¼é¦–å…ˆæˆ‘å€‘éœ€è¦è‡ªå®šç¾©ä¸€å€‹åŠ è§£å¯†çš„åˆ‡é¢é¡ï¼Œåœ¨è©²é¡æ·»åŠ @Aspectè¨»è§£ï¼Œç„¶å¾Œåœ¨å®šç¾©ä¸€å€‹å…¬å…±çš„åˆ‡å…¥é»ï¼ˆPointcutï¼‰ï¼ŒæŒ‡å‘éœ€è¦è™•ç†çš„åŒ…ï¼Œç„¶å¾Œåœ¨å®šç¾©ä¸€å€‹å‰ç½®é€šçŸ¥(æ·»åŠ @Beforeè¨»è§£)å’Œå¾Œç½®é€šçŸ¥(æ·»åŠ @AfterReturning)æ–¹æ³•å¯¦ç¾å³å¯ã€‚</p><p>é€™è£¡æˆ‘å€‘å°±å°‡åˆ‡å…¥é»è¨­ç½®ç‚ºæ§åˆ¶å±¤åŒ…è£¡æ‰€æœ‰çš„è«‹æ±‚ã€‚</p><p><strong>åˆ‡å…¥é»ä»£ç¢¼ç¤ºä¾‹:</strong></p><pre><code>	 	 @Pointcut("execution(public * com.pancm.web.*.*(..))")  			  public void doOperation() {   		 }</code></pre><p>ç„¶å¾Œåœ¨å®šç¾©ä¸€å€‹å‰ç½®é€šçŸ¥ï¼Œå¯¦ç¾å°è«‹æ±‚åƒæ•¸çš„æ•¸æ“šè§£å¯†ï¼Œé€™è£¡æˆ‘å€‘å°±ç”¨Useré€™å€‹å¯¦é«”é¡çš„åç¨±ï¼Œå°è©²æ•¸æ“šé€²è¡Œè§£å¯†ã€‚å¯¦éš›åœ¨é‹ç”¨æ˜¯å¯ä»¥æ ¹æ“šè‡ªèº«çš„æƒ…æ³ä¾†ç·¨å¯«ã€‚</p><p><strong>å‰ç½®é€šçŸ¥ä»£ç¢¼ç¤ºä¾‹:</strong></p><pre><code>	@Before("doOperation()")    public void before(JoinPoint joinPoint) throws Throwable{        Object[] objs = joinPoint.getArgs();        for (Object obj : objs) {            User user =(User) obj;            System.out.println("å‰ç½®é€šçŸ¥æ¥å—çš„åƒæ•¸:"+user);            String name =base64DeStr(user.getName());            user.setName(name);        }    }</code></pre><p>åœ¨ç·¨å¯«å®Œå‰ç½®é€šçŸ¥çš„æ–¹æ³•ä¹‹å¾Œï¼Œæˆ‘å€‘åœ¨ç·¨å¯«å¾Œç½®é€šçŸ¥çš„ä»£ç¢¼ï¼Œé€™å¡ŠåŸºæœ¬å’Œå‰ç½®é€šçŸ¥çš„ä¸€æ¨£ï¼Œå°±æ˜¯æŠŠè¿”å›çš„æ•¸æ“šé€²è¡ŒåŠ å¯†è€Œå·²ã€‚</p><p><strong>å¾Œç½®é€šçŸ¥ä»£ç¢¼ç¤ºä¾‹:</strong></p><pre><code>    @AfterReturning(returning = "object", pointcut = "doOperation()")    public void doAfterReturning(Object object) {        ResultBody resultBody = (ResultBody) object;        String str =null;        try {             str=base64EnStr(resultBody.getResult());        } catch (UnsupportedEncodingException e) {            e.printStackTrace();        }        resultBody.setResult(str);        System.out.println("å¾Œé€šçŸ¥éŸ¿æ‡‰çš„åƒæ•¸:"+resultBody);    }</code></pre><p><strong>å®Œæ•´ä»£ç¢¼ç¤ºä¾‹:</strong></p><pre><code>@Aspect@Componentpublic class ParamAspect {    @Pointcut("execution(public * com.pancm.web.*.*(..))")    public void doOperation() {    }    @Before("doOperation()")    public void before(JoinPoint joinPoint) throws Throwable{        Object[] objs = joinPoint.getArgs();        for (Object obj : objs) {            User user =(User) obj;            System.out.println("å‰ç½®é€šçŸ¥æ¥å—çš„åƒæ•¸:"+user);            String name =base64DeStr(user.getName());            user.setName(name);        }    }    @AfterReturning(returning = "object", pointcut = "doOperation()")    public void doAfterReturning(Object object) {        ResultBody resultBody = (ResultBody) object;        String str =null;        try {             str=base64EnStr(resultBody.getResult());        } catch (UnsupportedEncodingException e) {            e.printStackTrace();        }        resultBody.setResult(str);        System.out.println("å‰ç½®é€šçŸ¥éŸ¿æ‡‰çš„åƒæ•¸:"+resultBody);    }    public  String base64EnStr(String str) throws UnsupportedEncodingException {        return Base64.getEncoder().encodeToString(str.getBytes("UTF-8"));    }    public static String base64DeStr(String encodeStr) throws UnsupportedEncodingException {        byte[] decodeStr = Base64.getDecoder().decode(encodeStr);        return new String(decodeStr, "UTF-8");    }</code></pre><p><strong>å¯¦é«”é¡ä»£ç¢¼</strong></p><pre><code>	public class User {				 private Long id;			 private String name;		 		 private Integer age;		 		//getter å’Œ setter ç•¥			}</code></pre><p>æ§åˆ¶å±¤zé€™å¡Šçš„ä»£ç¢¼å’Œæ™®é€šçš„ä¸€æ¨£ï¼Œæˆ‘å€‘é€™è£¡åªéœ€ç°¡å–®çš„åšä¸‹è™•ç†å³å¯ï¼Œé€™è£¡ç‚ºäº†æ–¹ä¾¿ç†è§£ï¼Œæ²’æœ‰ç·¨å¯«serviceå±¤å’Œdaoçš„ä»£ç¢¼ã€‚:</p><p>** æ§åˆ¶å±¤ä»£ç¢¼**</p><pre><code>@RestController@RequestMapping(value = "/api")public class UserRestController {    @GetMapping("/user")    public ResultBody findByUser(User  user) {        System.out.println("ç”¨æˆ¶æŸ¥è©¢æ¥å£è«‹æ±‚çš„åƒæ•¸:"+user);        ResultBody resultBody = new ResultBody();        List&lt;User&gt; userList =new ArrayList&lt;&gt;();        User user2=new User();        user2.setId(1L);        user2.setName("xuwujing");        user2.setAge(18);        userList.add(user2);        resultBody.setCode("0");        resultBody.setResult(userList.toString());        System.out.println("ç”¨æˆ¶æŸ¥è©¢æ¥å£éŸ¿æ‡‰çš„åƒæ•¸:"+resultBody);        return resultBody;    }}</code></pre><p><strong>App å…¥å£</strong></p><p>å’Œæ™®é€šçš„SpringBooté …ç›®åŸºæœ¬ä¸€æ¨£ï¼</p><p><strong>ä»£ç¢¼å¦‚ä¸‹:</strong></p><pre><code>	@SpringBootApplication	public class AspectApp	{	    public static void main( String[] args )	    {			SpringApplication.run(AspectApp.class, args);			System.out.println("Aspectå•Ÿå‹•æˆåŠŸï¼");	    }	}</code></pre><h3 class=pgc-h-arrow-right>åŠŸèƒ½æ¸¬è©¦</h3><p>ç·¨å¯«å®Œä»£ç¢¼ä¹‹å¾Œï¼Œæˆ‘å€‘å•Ÿå‹•ç¨‹åºï¼Œå› ç‚ºæ˜¯Getè«‹æ±‚ï¼Œåœ¨ç€è¦½å™¨æˆ–è€…ä½¿ç”¨Postmanè¼¸å…¥åœ°å€éƒ½å¯ä»¥é€²è¡Œæ¸¬è©¦ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯é€™è£¡æˆ‘å€‘éœ€è¦å°nameçš„å€¼é€²è¡Œbase64åŠ å¯†è«‹æ±‚ã€‚</p><p>è¼¸å…¥:</p><blockquote><p>http://localhost:8180/api/user?name=eHV3dWppbmc=</p></blockquote><p>æ§åˆ¶æª¯æ‰“å°:</p><blockquote><p>å‰ç½®é€šçŸ¥æ¥å—çš„åƒæ•¸:{"name":"eHV3dWppbmc="}ç”¨æˆ¶æŸ¥è©¢æ¥å£è«‹æ±‚çš„åƒæ•¸:{"name":"xuwujing"}ç”¨æˆ¶æŸ¥è©¢æ¥å£éŸ¿æ‡‰çš„åƒæ•¸:{"code":"0","result":"[{"age":18,"id":1,"name":"xuwujing"}]"}å¾Œé€šçŸ¥éŸ¿æ‡‰çš„åƒæ•¸:{"code":"0","result":"W3siYWdlIjoxOCwiaWQiOjEsIm5hbWUiOiJ4dXd1amluZyJ9XQ=="}</p></blockquote><p>è«‹æ±‚éŸ¿æ‡‰åƒæ•¸:</p><blockquote><p>{"code": "0","message": null,"result": "W3siYWdlIjoxOCwiaWQiOjEsIm5hbWUiOiJ4dXd1amluZyJ9XQ=="}</p></blockquote><p>ç¤ºä¾‹åœ–:</p><div class=pgc-img><img alt=SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ec7dea99ced1417b940a9ffe67dc81aa><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=SpringBootåˆ‡é¢Aopçš„demoç°¡å–®è¬›è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/e4d35229e4b84e94b349da1b586b82e2><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>SpringBoot</a></li><li><a>Aop</a></li><li><a>demo</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html alt=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html title=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹>SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/341006dc.html alt="SpringBootç³»åˆ—ï¼ˆ14ï¼‰ï¼šSpring AOPè£é€¼æŒ‡å—ä¹‹å¯¦ç¾æ“ä½œæ—¥èªŒè¨˜éŒ„" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7bc702acb84d4284b4df028da09900db style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/341006dc.html title="SpringBootç³»åˆ—ï¼ˆ14ï¼‰ï¼šSpring AOPè£é€¼æŒ‡å—ä¹‹å¯¦ç¾æ“ä½œæ—¥èªŒè¨˜éŒ„">SpringBootç³»åˆ—ï¼ˆ14ï¼‰ï¼šSpring AOPè£é€¼æŒ‡å—ä¹‹å¯¦ç¾æ“ä½œæ—¥èªŒè¨˜éŒ„</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html alt=å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dc38450079574dd685472184b5fa06f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html title=å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹”>å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/410360c9.html alt=SpringBooté …ç›®ä½¿ç”¨TrueLicenseç”Ÿæˆå’Œé©—è­‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c258f6f3636b44dfb9c72c23d2fc50ef style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/410360c9.html title=SpringBooté …ç›®ä½¿ç”¨TrueLicenseç”Ÿæˆå’Œé©—è­‰>SpringBooté …ç›®ä½¿ç”¨TrueLicenseç”Ÿæˆå’Œé©—è­‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/269b289.html alt="SpringBoot éŒ¯èª¤è™•ç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6b6ae6511a1c40aaadbd9708256a2dde style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/269b289.html title="SpringBoot éŒ¯èª¤è™•ç†">SpringBoot éŒ¯èª¤è™•ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fcb600f.html alt=SpringBootè‡ªå®šç¾©éŒ¯èª¤é é¢ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/17a417ace8b24067bdb1d528e6bc6be2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fcb600f.html title=SpringBootè‡ªå®šç¾©éŒ¯èª¤é é¢>SpringBootè‡ªå®šç¾©éŒ¯èª¤é é¢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/65aee0c.html alt="SpringBoot>08 - é…ç½®æ–‡ä»¶ã€åŸºæœ¬è¨»è§£ä½¿ç”¨" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/65aee0c.html title="SpringBoot>08 - é…ç½®æ–‡ä»¶ã€åŸºæœ¬è¨»è§£ä½¿ç”¨">SpringBoot>08 - é…ç½®æ–‡ä»¶ã€åŸºæœ¬è¨»è§£ä½¿ç”¨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/16141dc.html alt=SpringBootä¹‹é…ç½®æ–‡ä»¶ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9be2b97daab14982b35a52cdecc2cf4b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16141dc.html title=SpringBootä¹‹é…ç½®æ–‡ä»¶>SpringBootä¹‹é…ç½®æ–‡ä»¶</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/201295f.html alt=SpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶è¦åŠƒã€å¤šç’°å¢ƒæ”¯æŒï¼ˆä¸€ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d5249d1faf2741c8a538e35f13e04666 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/201295f.html title=SpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶è¦åŠƒã€å¤šç’°å¢ƒæ”¯æŒï¼ˆä¸€ï¼‰>SpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶è¦åŠƒã€å¤šç’°å¢ƒæ”¯æŒï¼ˆä¸€ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6845cc4.html alt=SpringBootç²å–é…ç½®æ–‡ä»¶ï¼Œå°±é€™éº¼ç°¡å–® class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/32a771927a234585855909887759b126 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6845cc4.html title=SpringBootç²å–é…ç½®æ–‡ä»¶ï¼Œå°±é€™éº¼ç°¡å–®>SpringBootç²å–é…ç½®æ–‡ä»¶ï¼Œå°±é€™éº¼ç°¡å–®</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/457b4da.html alt=SpringBootç³»åˆ—ä¹¾è²¨ï¼šé…ç½®æ–‡ä»¶è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4406be7272824cf8956780530ff96706 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/457b4da.html title=SpringBootç³»åˆ—ä¹¾è²¨ï¼šé…ç½®æ–‡ä»¶è©³è§£>SpringBootç³»åˆ—ä¹¾è²¨ï¼šé…ç½®æ–‡ä»¶è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62c273e.html alt=SpringBooté…ç½®æ–‡ä»¶è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0a45e7ad17914e0e9efbef923ec8be39 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62c273e.html title=SpringBooté…ç½®æ–‡ä»¶è©³è§£>SpringBooté…ç½®æ–‡ä»¶è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a519b6a.html alt=ä¼æ¥­ç´šSpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶ä¹‹é…ç½®ä¸­å¿ƒï¼ˆä¸‰ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/8103eeec65e647f9a1c3604ec802acb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a519b6a.html title=ä¼æ¥­ç´šSpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶ä¹‹é…ç½®ä¸­å¿ƒï¼ˆä¸‰ï¼‰>ä¼æ¥­ç´šSpringBootæ‡‰ç”¨å¤šå€‹å­é …ç›®é…ç½®æ–‡ä»¶ä¹‹é…ç½®ä¸­å¿ƒï¼ˆä¸‰ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb3dea9.html alt=SpringBootä¸­ç•°æ­¥è«‹æ±‚å’Œç•°æ­¥èª¿ç”¨ï¼ˆçœ‹é€™ä¸€ç¯‡å°±å¤ äº†ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f7f2ca86c513422bb316aacfbb8b29e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb3dea9.html title=SpringBootä¸­ç•°æ­¥è«‹æ±‚å’Œç•°æ­¥èª¿ç”¨ï¼ˆçœ‹é€™ä¸€ç¯‡å°±å¤ äº†ï¼‰>SpringBootä¸­ç•°æ­¥è«‹æ±‚å’Œç•°æ­¥èª¿ç”¨ï¼ˆçœ‹é€™ä¸€ç¯‡å°±å¤ äº†ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ced5638.html alt=SpringBootï½œç¬¬äºŒåç« ï¼šç•°æ­¥é–‹ç™¼ä¹‹ç•°æ­¥è«‹æ±‚ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/06812bbf96624d6a94aad8694d5f523e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ced5638.html title=SpringBootï½œç¬¬äºŒåç« ï¼šç•°æ­¥é–‹ç™¼ä¹‹ç•°æ­¥è«‹æ±‚>SpringBootï½œç¬¬äºŒåç« ï¼šç•°æ­¥é–‹ç™¼ä¹‹ç•°æ­¥è«‹æ±‚</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>