<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 | 极客快訊</title><meta property="og:title" content="「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/2e4fabf17d884e528808fed5a908ed73"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a4722a3b.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a4722a3b.html><meta property="article:published_time" content="2020-11-14T20:59:22+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:22+08:00"><meta name=Keywords content><meta name=description content="「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/a4722a3b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1>系列視頻《WinCC+PLC綜合實戰演練》已經累計發佈了十餘期了，鑑於有網友要求對一些關鍵知識點形成文字資料，因此，特別概括性的做一些總結，以彌補視頻中遺漏的、未提到的部分，供有需要的小夥伴做參考。</h1><hr><p>前文總結了WinCC畫面中，沉降池水位的動態跟蹤及液位超限（太高或太低）時，如何在畫面中實現報警。本文把啟停控制程序捋一遍（泵的啟停、閥的開合用的同一套程序）。</p><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2e4fabf17d884e528808fed5a908ed73><p class=pgc-img-caption></p></div><p>"啟停"程序（on_off）寫在FC1中，其調用時的管腳圖如圖1所示，其中定義輸入管腳4個，輸入/輸出管腳3個，輸出管腳4個。為什麼要這樣定義呢？接下來我們細細道來。</p><hr><h1>一、程序體分解釋疑</h1><p>為了方便說明，我們先逐段說明一下程序，再解釋為何要將接口定義成圖1那種方式（<strong>注意，程序中所有帶"#"標識的觸點、線圈變量都為FC1塊中定義的接口或臨時變量</strong>）。</p><blockquote><p><strong>1、啟停控制</strong></p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cac33f10b91441e9bf38764e02900c06><p class=pgc-img-caption></p></div><p>如圖2所示，"程序段1"中的程序為"啟停控制程序"。</p><ul><li><strong>"#order"為啟停命令，其為圖1中輸出接口的一個，信號最終與Q點相連；</strong></li><li><strong>"#start"為啟動信號、"#stop"為停止信號，其指令來自畫面（如圖3所示），用於啟動或停止泵（閥）；</strong></li><li><strong>當"#order"為1時，通過"復位"指令，復位"#start"的信號，這樣做的目的是使"#start"端的信號變為一個脈衝信號，方便信號處理。而由於"#start"既作為輸入接收來自畫面的指令，又作為"線圈"被"復位"指令復位，因此要將該信號接口定義為"輸入/輸出接口"；</strong></li><li><strong>"#fault"為故障信號，當其為1時，停泵、關閥。</strong></li></ul><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/34d24f0e15404ac091de0df2ba115cdb><p class=pgc-img-caption></p></div><blockquote><p>2、"#start"、"#stop"、"#ack"信號的脈衝化處理</p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b0429e4c68ff49fc9d3d256d088c59cf><p class=pgc-img-caption></p></div><p>"#start"、"#stop"及"#ack"指令均來自WinCC畫面（如圖3所示），畫面側通過點擊相應的按鈕，發過來一個高電平信號，為了簡化信號處理，統一在程序使其"脈衝化"，如圖4所示。</p><p>邏輯也很簡單：</p><ul><li><strong>當泵（或閥）啟動命令發出後（"#order"上升沿），復位"#start"；</strong></li><li><strong>當泵（或閥）停止命令發出後（"#order"下降沿），復位"#stop"；</strong></li><li><strong>"#ack"為故障確認信號，當"#ack"發出確認指令且故障清除後（"#fault"下降沿），復位"#ack"。</strong></li></ul><blockquote><p>3、狀態反饋"響應時間"監控</p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f612219936e847ba9b50c7babefa66f7><p class=pgc-img-caption></p></div><p>"#T_no"是定時器的形參地址，實際調用該FC塊時，需要關聯一個實際的定時器號。（1）"程序段4"的邏輯是，當"#order"為1時，啟動定時器；</p><p>"程序段5"的邏輯是，在定時器計時完成（計時完成後，常閉觸點"#T_no"）前檢測到運行反饋信號"#fbk"，此時說明泵（或閥）啟動正常，則復位定時器。</p><p>故障確認指令"#ack"也會復位定時器。</p><blockquote><p>4、"運行信號"判定</p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6308b3ac2dd144dfb2a79b4bc975431f><p class=pgc-img-caption></p></div><p>"程序段6"和"程序段7"用於判定泵（或閥）是否正在運行。</p><ul><li><strong>當有輸出命令（"#order"=1）且有反饋信號（"#fbk"=1）時，說明泵（或閥）正在運行；</strong></li><li><strong>當無輸出（"#order"=0）或有故障（"#fault=1"）時，認為泵（或閥）處於停止狀態。</strong></li></ul><blockquote><p>5、"故障"判定及確認</p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e9c7ad030c5e4ee69ed8ea0bac16f097><p class=pgc-img-caption></p></div><p>當以下情況發生時，認為泵（或閥）有故障：</p><ul><li><strong>在正常運行（"#running=1"）時，反饋信號（"#fbk"）突然丟失，此時系統判定主迴路由於某種原因失電，從而觸發故障；</strong></li><li><strong>在啟動命令發出後，規定的時間內（定時器"T_no"計時完成）未檢測到反饋信號（"#fbk"），系統認為泵（或閥）啟動失敗，觸發故障。</strong></li></ul><p>"#ack"接入"SR觸發器"的復位端，用於做故障確認。</p><blockquote><p>6、狀態字</p></blockquote><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7de3f2cc2831430a8f76909920519415><p class=pgc-img-caption></p></div><p>"狀態字"定義的核心指令為：MOVE指令。滿足不同條件時，將不同的值送給狀態字"#status"。</p><hr><h1>二、接口定義</h1><div class=pgc-img><img alt=「視頻隨手文檔」編寫泵、閥等設備的啟停控制模板程序 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/471b4280289f4925b072747a8543406f><p class=pgc-img-caption></p></div><p>經過前面對程序的"逐段"分析，我們對"接口"為什麼做如是定義，也有了基本的瞭解，再補充以下幾點：</p><ol><li><strong>"#start"、"#stop"和"#ack"之所以定義為"輸入/輸出"接口類型，是因為它們既接受外部的信號，在程序中又作為"線圈"輸出。</strong></li><li><strong>"定時器號"的形式參數的數據類型為"Timer"。</strong></li><li><strong>"#sim_on"是預留的仿真用接口，目前的程序中，它是沒用的。</strong></li><li><strong>FC中定義的接口變量，在本塊中尋址方式為："#+符號名"，如"#start"、"#status"等。</strong></li></ol><p>相關視頻：</p><p><a class=pgc-link data-content=mp href=https://www.ixigua.com/i6727286692346069511/ target=_blank>《PLC編程實現“泵”的啟停控制，如何自定義運行狀態及狀態字》</a></p><p><a class=pgc-link data-content=mp href=https://www.ixigua.com/i6727636737662648839/ target=_blank>《程序“pumb1_FC"的勘誤和優化，完善故障的類別信息》</a></p><hr><p>上一篇<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6730222235023311363/?group_id=6730222235023311363" target=_blank>《「視頻隨手文檔」WinCC實現“液位”的動態跟蹤以及超限報警》</a></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>視頻</a></li><li><a>隨手</a></li><li><a>文檔</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/6639baec.html alt=在線播放視頻網站應該如何選擇服務器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6639baec.html title=在線播放視頻網站應該如何選擇服務器>在線播放視頻網站應該如何選擇服務器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b91b414b.html alt=講述者│一起活到好事發生的那一天（視頻） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b91b414b.html title=講述者│一起活到好事發生的那一天（視頻）>講述者│一起活到好事發生的那一天（視頻）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/22525cee.html alt=數字音視頻壓縮編碼標準及H.265的編碼優勢 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/558a023201a84604894ebc359d178ed2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/22525cee.html title=數字音視頻壓縮編碼標準及H.265的編碼優勢>數字音視頻壓縮編碼標準及H.265的編碼優勢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e71fb88c.html alt=和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8cd49cb368f1488b8c4a65a3fe556d75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e71fb88c.html title=和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你>和麵、揉麵技巧，視頻詳細講解，10年和麵經驗，全部告訴你</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8557ba0.html alt=小說：窮小子隨手挖個何首烏，世家弟子大驚：三千年天心烏！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/fe4d000045340a9fc75a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8557ba0.html title=小說：窮小子隨手挖個何首烏，世家弟子大驚：三千年天心烏！>小說：窮小子隨手挖個何首烏，世家弟子大驚：三千年天心烏！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2565ddd2.html alt=PHP100視頻教程07：PHP函數和自定義函數 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a348885afabf4af3859d03ef12a81979 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2565ddd2.html title=PHP100視頻教程07：PHP函數和自定義函數>PHP100視頻教程07：PHP函數和自定義函數</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a4defce7.html alt=PHP視頻教程01：環境配置與代碼調試 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9189621803214d559b7c006fc2b9b411 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a4defce7.html title=PHP視頻教程01：環境配置與代碼調試>PHP視頻教程01：環境配置與代碼調試</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/513caa91.html alt="php視頻教程 PHP編程從入門到精通2019實戰開發在線課程" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d4bcba1beecd439da2426778b71972ac style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/513caa91.html title="php視頻教程 PHP編程從入門到精通2019實戰開發在線課程">php視頻教程 PHP編程從入門到精通2019實戰開發在線課程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/af4897c3.html alt="素描排線 素描排線技巧 視頻教程" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/99f60e6707bf4ff5bf6d620263a2ac4b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/af4897c3.html title="素描排線 素描排線技巧 視頻教程">素描排線 素描排線技巧 視頻教程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7e4b1039.html alt=Linux用戶、用戶組與文檔屬性 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/54f39d7a23d64846b3fee43d438f13bb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7e4b1039.html title=Linux用戶、用戶組與文檔屬性>Linux用戶、用戶組與文檔屬性</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/83c61a56.html alt=一個視頻揭祕集成電路到底有多難造 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1529403855728b32a45b881 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/83c61a56.html title=一個視頻揭祕集成電路到底有多難造>一個視頻揭祕集成電路到底有多難造</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d64fdbdf.html alt=視頻丨花樣畢業季！湖師大附屬德山學校迎來首屆小學、初中畢業生 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d64fdbdf.html title=視頻丨花樣畢業季！湖師大附屬德山學校迎來首屆小學、初中畢業生>視頻丨花樣畢業季！湖師大附屬德山學校迎來首屆小學、初中畢業生</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/06970da8.html alt=Word文檔中5個常用的小技巧，你知道嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b12b846f7f7143038ea2c9db335aa509 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/06970da8.html title=Word文檔中5個常用的小技巧，你知道嗎？>Word文檔中5個常用的小技巧，你知道嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8cc5b217.html alt=老闆讓把Word文檔字體調好看點？設置字體快捷鍵，1秒搞定 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/42f34d2a-f318-4d34-9927-9453dba5ba5b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8cc5b217.html title=老闆讓把Word文檔字體調好看點？設置字體快捷鍵，1秒搞定>老闆讓把Word文檔字體調好看點？設置字體快捷鍵，1秒搞定</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8f5cf60.html alt=表格文檔技巧丨快速選取單元格區域的11種方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/568c0001ac51422bdf8b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8f5cf60.html title=表格文檔技巧丨快速選取單元格區域的11種方法>表格文檔技巧丨快速選取單元格區域的11種方法</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>