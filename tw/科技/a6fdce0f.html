<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Java高級編程基礎：如何理解進程、線程與併發編程的關係 | 极客快訊</title><meta property="og:title" content="Java高級編程基礎：如何理解進程、線程與併發編程的關係 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/dfic-imagehandler/426d60ae-7dd7-4ab4-90bd-4dfeb286a68b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a6fdce0f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a6fdce0f.html><meta property="article:published_time" content="2020-11-14T21:06:37+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:37+08:00"><meta name=Keywords content><meta name=description content="Java高級編程基礎：如何理解進程、線程與併發編程的關係"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/a6fdce0f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Java高級編程基礎：如何理解進程、線程與併發編程的關係</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/dfic-imagehandler/426d60ae-7dd7-4ab4-90bd-4dfeb286a68b><p class=pgc-img-caption>併發編程與線程</p></div><p>我們知道隨著計算機芯片技術的發展，由最初的單核CPU發展到現在的多核CPU是在集成技術發展到一定程度後，採取的另外一項提高處理能力的方案。</p><p>由於多核CPU的出現，使得並行執行成為可能。即使對單個應用程序來說，由於編譯器優化和多核處理器的性能優化也會早就很多併發執行的情況。</p><p>如此依賴併發編程成為一種編程方案，它主要藉助多線程設計方式來完成。</p><p>我們常說的併發性是指程序同時執行多個計算的能力。它可以通過將計算分配到一臺機器的所有可用CPU內核上，甚至可以被分配到同一網絡中的不同機器上來實現。</p><h1>併發編程與線程</h1><p>前面我們說過，這種併發能力主要依靠程序的線程來完成，所以，為了更好地理解並行執行，我們必須區分進程和線程。</p><p>這麼說吧，進程是一段獨立運行的程序，它的執行環境是由操作系統親自安排提供，我們都知道操作系統擁有自己的一組私有資源，比如內存，文件系統等。</p><p>而線程則是位於進程內部，使用進程提供的共享資源的多個代碼獨立執行單元。它們共享進程所提供的比如內存，打開的文件等資源。</p><p>由於在同一個進程中，所以多個不同的線程可以共享該進程的所有資源，這讓線程能夠更好的執行一些複雜的高級任務。</p><p>雖然可以在同一臺機器上甚至同一網絡內的不同機器上運行的不同進程之間建立進程間通信，但是出於性能原因，通常選擇線程來在一臺機器上並行化計算。</p><p>回到我們Java編程中，在Java中，進程應該對應於正在運行的Java虛擬機(JVM)，而線程則是位於同一個JVM中，它可以由Java應用程序在運行期間動態創建和停止。</p><p>我們開發的每個程序至少有一個線程,我們通常稱之為主線程。這個主線程是在每個Java應用程序開始時創建的，它負責調用執行程序的入口main()方法。</p><p>從從這個主線程開始，Java應用程序可以根據業務的需要來創建新的線程並使用它們。</p><h1>Thread類</h1><p>下面這段代碼使用JDK提供的抽象線程特徵的類java.lang.Thread中定義的currentThread()方法來訪問當前線程。</p><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/7cb64066de9f42669a84bffc7178acf0><p class=pgc-img-caption></p></div><p>從這個簡單應用程序的源代碼中可以看到，我們直接在main()方法中訪問當前線程，並打印出它提供的一些信息:</p><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d03e0234dc69495bbe2e588f998ec6d8><p class=pgc-img-caption></p></div><p>上面輸出結果中顯示，每個線程都有一個標識符，它在JVM中是唯一的。</p><p>我們通常可以用線程的name來通過其它監視工具比如JConsole等來對我們程序的運行進行監視。</p><p>這裡的優先級priority屬性，是當有多個線程需要執行時，用它來決定接下來執行哪。</p><p>雖然線程的執行由優先級決定，但是關於線程真正執行的事實是，並不是所有線程都是同時執行的，但是每個CPU內核上的執行時間被劃分為小片，下一個時間片被分配給下一個具有最高優先級的等待線程。</p><p>我們的JVM會使用其調度程序根據線程的優先級決定接下來執行哪個線程。</p><p>除了優先級屬性，線程還有一個狀態屬性state，一個線程在其生命週期中的狀態有以下情形:</p><ul><li>NEW：被創建後尚未啟動的線程處於這種狀態。</li><li>RUNNABLE: 在Java虛擬機中執行的線程處於這種狀態。</li><li>BLOCKED: 等待監視器鎖而被阻塞的線程處於這種狀態。</li><li>WAITING: 無限期等待另一個線程執行特定操作的線程處於這種狀態。</li><li>TIMED_WAITING:正在等待另一個線程執行某個操作的線程在指定的等待時間內處於這種狀態。</li><li>TERMINATED:已退出的線程處於這種狀態。</li></ul><p>顯然，我們上面示例中的主線程應該是處於RUNNABLE狀態。</p><p>其中最複雜的一個狀態應該是BLOCKED，這樣的狀態名已經表明線程管理是一個很複雜高級的主題。如果處理不當，線程可能互相阻塞，從而導致應用程序掛起。</p><p>最後線程有一個很特別的屬性那就是線程組threadGroup，它表明線程是被放在組中管理的。</p><p>每個線程都屬於一個線程組。Java為其抽象成了java.lang.ThreadGroup類定義，該類提供了一些方法來處理整個線程組的線程。</p><p>使用這些整體性方法，我們可以方便的中斷組中的所有線程，或者設置它們的最大優先級。</p><h1>新線程的創建</h1><p>線程創建和啟動了解了線程的基本屬性和狀態後，我們就開始創建並啟動一個線程，來看一下在Java編程中是如何定義和使用線程的。</p><p>Java語言中，創建線程基本上有兩種方法，分別是Thread類繼承方法和Runnable接口實現法。</p><p>第一種方式是繼承java.lang.Thread類定義一個自己的線程類。</p><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/551ae73c481b48b9bbc6da7e8d5c2cad><p class=pgc-img-caption></p></div><p>正如上面所看到的，類MyThread擴展了Thread類並覆蓋了方法run()。這裡方法run()會在虛擬機JVM上啟動新線程後執行。</p><p>這裡需要注意的是，由於虛擬機必須做一些工作來設置線程的執行環境，所以我們不能直接調用這個方法來啟動線程。</p><p>我們只能在類MyThread的實例上調用start()方法，由於這個類繼承了它的超類中的start()方法，所以這個方法背後的代碼告訴JVM為線程分配所有必要的資源並啟動它。</p><p>當我們運行上面的代碼時，我們看到輸出。</p><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e17367bb130147a99827dce275c6014c><p class=pgc-img-caption></p></div><p>我們可以看到，run()方法中的代碼不是在“main”線程中執行的，而是在我們自己的名為“myThread”的線程中執行的。</p><h1>實現Runnable接口創建線程</h1><div class=pgc-img><img alt=Java高級編程基礎：如何理解進程、線程與併發編程的關係 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1172f770677049d0b2d355a869a55466><p class=pgc-img-caption></p></div><p>與上面的子類化實現方式創建一個java.lang.Thread實例不同在於我們提供了一個類來實現Runnable接口，並將它作為參數傳遞給Thread的構造函數。</p><p>同時我們還傳遞了一個Thread線程名字。</p><h1>線程創建選擇</h1><p>那麼我們到底應該使用子類化方法還是接口方法來創建新的線程呢？在某種程度上取決於個人的習慣和喜好。</p><p>相比較而言，實現Runnable接口是一種更輕量級的方法，因為我們只需要做的就是實現接口Runnable。</p><p>實現該接口的類仍然可以是其他類的子類，不會發生類型的變化。</p><p>而其使用實現接口我們還可以將這個實現類作為參數傳遞給構造函數，而通過子類化Thread創建的線程，則只能被限制在這個類線程的可用構造函數裡，沒辦法用到其它函數中。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Java</a></li><li><a>高級</a></li><li><a>編程</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/7816c067.html alt=Java高級面試寶典，必備分享 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7816c067.html title=Java高級面試寶典，必備分享>Java高級面試寶典，必備分享</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6785387f.html alt=20個高級Java面試題彙總 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/48f61a2c724c464a8774a34e68d84974 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6785387f.html title=20個高級Java面試題彙總>20個高級Java面試題彙總</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c500d29b.html alt="高級網絡編程之疑症：TCP 的 Peer 兩端同時斷開連接" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/153201394276200d66036c8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c500d29b.html title="高級網絡編程之疑症：TCP 的 Peer 兩端同時斷開連接">高級網絡編程之疑症：TCP 的 Peer 兩端同時斷開連接</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b4cccd0e.html alt=Java基礎：面向接口編程詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/fdda4de3-84ff-4cff-bb1e-c691ed81ff9c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b4cccd0e.html title=Java基礎：面向接口編程詳解>Java基礎：面向接口編程詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/06b80ade.html alt=5種人工智能編程語言！Java依然屹立不倒！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/e322fe75a0d34e36a7a876d3ccebf871 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/06b80ade.html title=5種人工智能編程語言！Java依然屹立不倒！>5種人工智能編程語言！Java依然屹立不倒！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a836fe1.html alt=Java編程技巧：如何實現參數的輸入輸出？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b36247aabf154a46aca31b642fc3cd0c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a836fe1.html title=Java編程技巧：如何實現參數的輸入輸出？>Java編程技巧：如何實現參數的輸入輸出？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/85f832a.html alt=最佳推薦：阿里巴巴對Java編程的規約—集合處理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0698a302502242dabe2d579bbe9869a9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/85f832a.html title=最佳推薦：阿里巴巴對Java編程的規約—集合處理>最佳推薦：阿里巴巴對Java編程的規約—集合處理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8683c5c.html alt=Java高級進階-從計算機底層解析左移、右移、無符號右移 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8683c5c.html title=Java高級進階-從計算機底層解析左移、右移、無符號右移>Java高級進階-從計算機底層解析左移、右移、無符號右移</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f74b39f.html alt="Java 異步編程導論" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3c356b1aa9b4416ca7b35a07f3033e13 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f74b39f.html title="Java 異步編程導論">Java 異步編程導論</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2c802a4.html alt="Java面向對象編程三大特徵 - 多態" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a5bb9d2879b949319bd0cff669dad24a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2c802a4.html title="Java面向對象編程三大特徵 - 多態">Java面向對象編程三大特徵 - 多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d4044e1f.html alt=2019年中式烹調師（高級）安全生產模擬考試題庫及答案（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d4044e1f.html title=2019年中式烹調師（高級）安全生產模擬考試題庫及答案（一）>2019年中式烹調師（高級）安全生產模擬考試題庫及答案（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f855d5ae.html alt=2019年中式烹調師（高級）安全生產模擬考試題庫及答案（二） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9796cfd44f754f9ab22310d91088423e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f855d5ae.html title=2019年中式烹調師（高級）安全生產模擬考試題庫及答案（二）>2019年中式烹調師（高級）安全生產模擬考試題庫及答案（二）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48ba24d7.html alt=深入淺出：Java事務原理和應用兼JDBC事務詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/3c5e0002a8059c1311aa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48ba24d7.html title=深入淺出：Java事務原理和應用兼JDBC事務詳解>深入淺出：Java事務原理和應用兼JDBC事務詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html alt=「Java」隨機數詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b471807e699b44c2b1dedc580ea3f3af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html title=「Java」隨機數詳解>「Java」隨機數詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/816b04b7.html alt=從JVM層面帶你分析Java的Object類源碼第一部分 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/816b04b7.html title=從JVM層面帶你分析Java的Object類源碼第一部分>從JVM層面帶你分析Java的Object類源碼第一部分</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>