<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>消息隊列之常見消息隊列分析彙總 | 极客快訊</title><meta property="og:title" content="消息隊列之常見消息隊列分析彙總 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/b13ad5e5ff6b478797dcb7efcb7d6331"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a97678b1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a97678b1.html><meta property="article:published_time" content="2020-11-14T21:01:45+08:00"><meta property="article:modified_time" content="2020-11-14T21:01:45+08:00"><meta name=Keywords content><meta name=description content="消息隊列之常見消息隊列分析彙總"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/a97678b1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>消息隊列之常見消息隊列分析彙總</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><blockquote><p><strong>一、消息隊列(MQ)概述</strong></p></blockquote><p>消息隊列（Message Queue），是分佈式系統中重要的組件，其通用的使用場景可以簡單地描述為：</p><blockquote><p>當不需要立即獲得結果，但是併發量又需要進行控制的時候，差不多就是需要使用消息隊列的時候。</p></blockquote><p>消息隊列主要解決了應用耦合、異步處理、流量削鋒等問題。</p><p>當前使用較多的消息隊列有RabbitMQ、RocketMQ、ActiveMQ、Kafka、ZeroMQ、MetaMq等，而部分數據庫如Redis、Mysql以及phxsql也可實現消息隊列的功能。</p><blockquote><p><strong>二、消息隊列使用場景</strong></p></blockquote><p>消息隊列在實際應用中包括如下四個場景：</p><ul><li>應用耦合：多應用間通過消息隊列對同一消息進行處理，避免調用接口失敗導致整個過程失敗；</li><li>異步處理：多應用對消息隊列中同一消息進行處理，應用間併發處理消息，相比串行處理，減少處理時間；</li><li>限流削峰：廣泛應用於秒殺或搶購活動中，避免流量過大導致應用系統掛掉的情況；</li><li>消息驅動的系統：系統分為消息隊列、消息生產者、消息消費者，生產者負責產生消息，消費者(可能有多個)負責對消息進行處理；</li></ul><p>下面詳細介紹上述四個場景以及消息隊列如何在上述四個場景中使用：</p><h1><strong>2.1 異步處理</strong></h1><p>具體場景：用戶為了使用某個應用，進行註冊，系統需要發送註冊郵件並驗證短信。對這兩個操作的處理方式有兩種：串行及並行。</p><p>（1<strong>）串行方式</strong>：新註冊信息生成後，先發送註冊郵件，再發送驗證短信；</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/b13ad5e5ff6b478797dcb7efcb7d6331><p class=pgc-img-caption></p></div><p>在這種方式下，需要最終發送驗證短信後再返回給客戶端。</p><p>（2<strong>）並行處理</strong>：新註冊信息寫入後，由發短信和發郵件並行處理；</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/339af0bf37bb462ea0ca004182ba9947><p class=pgc-img-caption></p></div><p>在這種方式下，發短信和發郵件 需處理完成後再返回給客戶端。</p><p>假設以上三個子系統處理的時間均為50ms，且不考慮網絡延遲，則總的處理時間：</p><blockquote><p>串行：50+50+50=150ms</p><p>並行：50+50 = 100ms</p></blockquote><p>若使用消息隊列：</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4f082a564b544e3e938529084b859039><p class=pgc-img-caption></p></div><p>並在寫入消息隊列後立即返回成功給客戶端，則總的響應時間依賴於寫入消息隊列的時間，而寫入消息隊列的時間本身是可以很快的，基本可以忽略不計，因此總的處理時間相比串行提高了2倍，相比並行提高了一倍；</p><h1><strong>2.2 應用耦合</strong></h1><p>具體場景：用戶使用QQ相冊上傳一張圖片，人臉識別系統會對該圖片進行人臉識別，一般的做法是，服務器接收到圖片後，圖片上傳系統立即調用人臉識別系統，調用完成後再返回成功，如下圖所示：</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/95877dc0f06842f79b3cf0b14725c056><p class=pgc-img-caption></p></div><p><strong>該方法有如下缺點：</strong></p><ul><li>人臉識別系統被調失敗，導致圖片上傳失敗；</li><li>延遲高，需要人臉識別系統處理完成後，再返回給客戶端，即使用戶並不需要立即知道結果；</li><li>圖片上傳系統與人臉識別系統之間互相調用，需要做耦合；</li></ul><p><strong>若使用消息隊列：</strong></p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/fefa52c5f1f14eee8674ffde8c7b1ba5><p class=pgc-img-caption></p></div><p>客戶端上傳圖片後，圖片上傳系統將圖片信息如uin、批次寫入消息隊列，直接返回成功；而人臉識別系統則定時從消息隊列中取數據，完成對新增圖片的識別。</p><p>此時圖片上傳系統並不需要關心人臉識別系統是否對這些圖片信息的處理、以及何時對這些圖片信息進行處理。事實上，由於用戶並不需要立即知道人臉識別結果，人臉識別系統可以選擇不同的調度策略，按照閒時、忙時、正常時間，對隊列中的圖片信息進行處理。</p><h1><strong>2.3 限流削峰</strong></h1><p>具體場景：購物網站開展秒殺活動，一般由於瞬時訪問量過大，服務器接收過大，會導致流量暴增，相關係統無法處理請求甚至崩潰。而加入消息隊列後，系統可以從消息隊列中取數據，相當於消息隊列做了一次緩衝。</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/656831e3dfb84147a746b52c336947d0><p class=pgc-img-caption></p></div><p><strong>該方法有如下優點：</strong></p><ol><li>請求先入消息隊列，而不是由業務處理系統直接處理，做了一次緩衝,極大地減少了業務處理系統的壓力；</li><li>隊列長度可以做限制，事實上，秒殺時，後入隊列的用戶無法秒殺到商品，這些請求可以直接被拋棄，返回活動已結束或商品已售完信息；</li></ol><h1><strong>2.4 消息驅動的系統</strong></h1><p>具體場景：用戶新上傳了一批照片， 人臉識別系統需要對這個用戶的所有照片進行聚類，聚類完成後由對賬系統重新生成用戶的人臉索引(加快查詢)。這三個子系統間由消息隊列連接起來，前一個階段的處理結果放入隊列中，後一個階段從隊列中獲取消息繼續處理。</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/38421cdfc5544b69ac6ac9a8ad89e49e><p class=pgc-img-caption></p></div><p><strong>該方法有如下優點：</strong></p><ul><li>避免了直接調用下一個系統導致當前系統失敗；</li><li>每個子系統對於消息的處理方式可以更為靈活，可以選擇收到消息時就處理，可以選擇定時處理，也可以劃分時間段按不同處理速度處理；</li></ul><blockquote><p><strong>三、消息隊列的兩種模式</strong></p></blockquote><p>消息隊列包括兩種模式，點對點模式（point to point， queue）和發佈/訂閱模式（publish/subscribe，topic）。</p><h1><strong>3.1 點對點模式</strong></h1><p><strong>點對點模式下包括三個角色：</strong></p><ul><li>消息隊列</li><li>發送者 (生產者)</li><li>接收者（消費者）</li></ul><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/122cec40eee94bceaa9ba1cd4b768cd2><p class=pgc-img-caption></p></div><p>消息發送者生產消息發送到queue中，然後消息接收者從queue中取出並且消費消息。消息被消費以後，queue中不再有存儲，所以消息接收者不可能消費到已經被消費的消息。</p><p><strong>點對點模式特點：</strong></p><ul><li>每個消息只有一個接收者（Consumer）(即一旦被消費，消息就不再在消息隊列中)；</li><li>發送者和接收者間沒有依賴性，發送者發送消息之後，不管有沒有接收者在運行，都不會影響到發送者下次發送消息；</li><li>接收者在成功接收消息之後需向隊列應答成功，以便消息隊列刪除當前接收的消息；</li></ul><h1><strong>3.2 發佈/訂閱模式</strong></h1><p><strong>發佈/訂閱模式下包括三個角色：</strong></p><ul><li>角色主題（Topic）</li><li>發佈者(Publisher)</li><li>訂閱者(Subscriber)</li></ul><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a026cf9e9e80472ebbf8c54aab59cf8e><p class=pgc-img-caption></p></div><p>發佈者將消息發送到Topic,系統將這些消息傳遞給多個訂閱者。</p><p><strong>發佈/訂閱模式特點：</strong></p><ul><li>每個消息可以有多個訂閱者；</li><li>發佈者和訂閱者之間有時間上的依賴性。針對某個主題（Topic）的訂閱者，它必須創建一個訂閱者之後，才能消費發佈者的消息。</li><li>為了消費消息，訂閱者需要提前訂閱該角色主題，並保持在線運行；</li></ul><blockquote><p><strong>四、常用消息隊列介紹</strong></p></blockquote><p>本部分主要介紹四種常用的消息隊列（RabbitMQ/ActiveMQ/RocketMQ/Kafka）的主要特性、優點、缺點。</p><h1><strong>4.1 RabbitMQ</strong></h1><p>RabbitMQ 2007年發佈，是一個在AMQP(高級消息隊列協議)基礎上完成的，可複用的企業消息系統，是當前最主流的消息中間件之一。</p><p><strong>主要特性：</strong></p><ol><li>可靠性: 提供了多種技術可以讓你在性能和可靠性之間進行權衡。這些技術包括持久性機制、投遞確認、發佈者證實和高可用性機制；</li><li>靈活的路由： 消息在到達隊列前是通過交換機進行路由的。RabbitMQ為典型的路由邏輯提供了多種內置交換機類型。如果你有更復雜的路由需求，可以將這些交換機組合起來使用，你甚至可以實現自己的交換機類型，並且當做RabbitMQ的插件來使用；</li><li>消息集群：在相同局域網中的多個RabbitMQ服務器可以聚合在一起，作為一個獨立的邏輯代理來使用；</li><li>隊列高可用：隊列可以在集群中的機器上進行鏡像，以確保在硬件問題下還保證消息安全；</li><li>多種協議的支持：支持多種消息隊列協議；</li><li>服務器端用Erlang語言編寫，支持只要是你能想到的所有編程語言；</li><li>管理界面: RabbitMQ有一個易用的用戶界面，使得用戶可以監控和管理消息Broker的許多方面；</li><li>跟蹤機制：如果消息異常，RabbitMQ提供消息跟蹤機制，使用者可以找出發生了什麼；</li><li>插件機制：提供了許多插件，來從多方面進行擴展，也可以編寫自己的插件；</li></ol><p><strong>使用RabbitMQ需要：</strong></p><ul><li>ErLang語言包</li><li>RabbitMQ安裝包</li></ul><p>R<strong>abbitMQ可以運行在Erlang語言所支持的平臺之上：</strong></p><blockquote><p>Solaris</p><p>BSD</p><p>Linux</p><p>MacOSX</p><p>TRU64</p><p>Windows NT/2000/XP/Vista/Windows 7/Windows 8</p><p>Windows Server 2003/2008/2012</p><p>Windows 95, 98</p><p>VxWorks</p></blockquote><p><strong>優點：</strong></p><ol><li>由於erlang語言的特性，mq 性能較好，高併發；</li><li>健壯、穩定、易用、跨平臺、支持多種語言、文檔齊全；</li><li>有消息確認機制和持久化機制，可靠性高；</li><li>高度可定製的路由；</li><li>管理界面較豐富，在互聯網公司也有較大規模的應用；</li><li>社區活躍度高；</li></ol><p><strong>缺點：</strong></p><ol><li>儘管結合erlang語言本身的併發優勢，性能較好，但是不利於做二次開發和維護；</li><li>實現了代理架構，意味著消息在發送到客戶端之前可以在中央節點上排隊。此特性使得RabbitMQ易於使用和部署，但是使得其運行速度較慢，因為中央節點增加了延遲，消息封裝後也比較大；</li><li>需要學習比較複雜的接口和協議，學習和維護成本較高；</li></ol><h1><strong>4.2 ActiveMQ</strong></h1><p>ActiveMQ是由Apache出品，ActiveMQ 是一個完全支持JMS1.1和J2EE 1.4規範的 JMS Provider實現。它非常快速，支持多種語言的客戶端和協議，而且可以非常容易的嵌入到企業的應用環境中，並有許多高級功能。</p><p><strong>主要特性：</strong></p><ol><li>服從 JMS 規範：JMS 規範提供了良好的標準和保證，包括：同步或異步的消息分發，一次和僅一次的消息分發，消息接收和訂閱等等。遵從 JMS 規範的好處在於，不論使用什麼 JMS 實現提供者，這些基礎特性都是可用的；</li><li>連接性：ActiveMQ 提供了廣泛的連接選項，支持的協議有：HTTP/S，IP 多播，SSL，STOMP，TCP，UDP，XMPP等等。對眾多協議的支持讓 ActiveMQ 擁有了很好的靈活性。</li><li>支持的協議種類多：OpenWire、STOMP、REST、XMPP、AMQP ；</li><li>持久化插件和安全插件：ActiveMQ 提供了多種持久化選擇。而且，ActiveMQ 的安全性也可以完全依據用戶需求進行自定義鑑權和授權；</li><li>支持的客戶端語言種類多：除了 Java 之外，還有：C/C++，.NET，Perl，PHP，Python，Ruby；</li><li>代理集群：多個 ActiveMQ 代理可以組成一個集群來提供服務；</li><li>異常簡單的管理：ActiveMQ 是以開發者思維被設計的。所以，它並不需要專門的管理員，因為它提供了簡單又使用的管理特性。有很多中方法可以監控 ActiveMQ 不同層面的數據，包括使用在 JConsole 或者 ActiveMQ 的Web Console 中使用 JMX，通過處理 JMX 的告警消息，通過使用命令行腳本，甚至可以通過監控各種類型的日誌。</li></ol><p>使用ActiveMQ需要：</p><ul><li>Java JDK</li><li>ActiveMQ安裝包</li></ul><p>ActiveMQ可以運行在Java語言所支持的平臺之上。</p><p><strong>優點：</strong></p><ol><li>跨平臺(JAVA編寫與平臺無關有，ActiveMQ幾乎可以運行在任何的JVM上)</li><li>可以用JDBC：可以將數據持久化到數據庫。雖然使用JDBC會降低ActiveMQ的性能，但是數據庫一直都是開發人員最熟悉的存儲介質。將消息存到數據庫，看得見摸得著。而且公司有專門的DBA去對數據庫進行調優，主從分離；</li><li>支持JMS ：支持JMS的統一接口;</li><li>支持自動重連；</li><li>有安全機制：支持基於shiro，jaas等多種安全配置機制，可以對Queue/Topic進行認證和授權。</li><li>監控完善：擁有完善的監控，包括Web Console，JMX，Shell命令行，Jolokia的REST API；</li><li>界面友善：提供的Web Console可以滿足大部分情況，還有很多第三方的組件可以使用，如hawtio；</li><li>缺點：</li><li>社區活躍度不及RabbitMQ高；</li><li>根據其他用戶反饋，會出莫名其妙的問題，會丟失消息；</li><li>目前重心放到activemq6.0產品-apollo，對5.x的維護較少；</li><li>不適合用於上千個隊列的應用場景；</li></ol><h1><strong>4.3 RocketMQ</strong></h1><p>RocketMQ出自 阿里公司的開源產品，用 Java 語言實現，在設計時參考了 Kafka，並做出了自己的一些改進，消息可靠性上比 Kafka 更好。RocketMQ在阿里集團被廣泛應用在訂單，交易，充值，流計算，消息推送，日誌流式處理，binglog分發等場景。</p><p><strong>主要特性：</strong></p><ol><li>是一個隊列模型的消息中間件，具有高性能、高可靠、高實時、分佈式特點；</li><li>Producer、Consumer、隊列都可以分佈式；</li><li>Producer向一些隊列輪流發送消息，隊列集合稱為Topic，Consumer如果做廣播消費，則一個consumer實例消費這個Topic對應的所有隊列，如果做集群消費，則多個Consumer實例平均消費這個topic對應的隊列集合；</li><li>能夠保證嚴格的消息順序；</li><li>提供豐富的消息拉取模式；</li><li>高效的訂閱者水平擴展能力；</li><li>實時的消息訂閱機制；</li><li>億級消息堆積能力；</li><li>較少的依賴；</li></ol><p>使用RocketMQ需要：</p><ul><li>Java JDK</li><li>安裝git、Maven</li><li>RocketMQ安裝包</li></ul><p>RocketMQ可以運行在Java語言所支持的平臺之上。</p><p><strong>優點：</strong></p><ol><li>單機支持 1 萬以上持久化隊列</li><li>RocketMQ 的所有消息都是持久化的，先寫入系統 PAGECACHE，然後刷盤，可以保證內存與磁盤都有一份數據，</li><li>訪問時，直接從內存讀取。</li><li>模型簡單，接口易用（JMS 的接口很多場合並不太實用）；</li><li>性能非常好，可以大量堆積消息在broker中；</li><li>支持多種消費，包括集群消費、廣播消費等。</li><li>各個環節分佈式擴展設計，主從HA；</li><li>開發度較活躍，版本更新很快。</li></ol><p><strong>缺點：</strong></p><p>支持的客戶端語言不多，目前是java及c++，其中c++不成熟；</p><p>RocketMQ社區關注度及成熟度也不及前兩者；</p><p>沒有web管理界面，提供了一個CLI(命令行界面)管理工具帶來查詢、管理和診斷各種問題；</p><p>沒有在 mq 核心中去實現JMS等接口；</p><h1><strong>4.4 Kafka</strong></h1><p>Apache Kafka是一個分佈式消息發佈訂閱系統。它最初由LinkedIn公司基於獨特的設計實現為一個分佈式的提交日誌系統( a distributed commit log)，，之後成為Apache項目的一部分。Kafka系統快速、可擴展並且可持久化。它的分區特性，可複製和可容錯都是其不錯的特性。</p><p><strong>主要特性：</strong></p><ol><li>快速持久化，可以在O(1)的系統開銷下進行消息持久化；</li><li>高吞吐，在一臺普通的服務器上既可以達到10W/s的吞吐速率；</li><li>.完全的分佈式系統，Broker、Producer、Consumer都原生自動支持分佈式，自動實現負載均衡；</li><li>支持同步和異步複製兩種HA；</li><li>支持數據批量發送和拉取；</li><li>zero-copy：減少IO操作步驟；</li><li>數據遷移、擴容對用戶透明；</li><li>無需停機即可擴展機器；</li><li>其他特性：嚴格的消息順序、豐富的消息拉取模型、高效訂閱者水平擴展、實時的消息訂閱、億級的消息堆積能力、定期刪除機制；</li></ol><p><strong>使用Kafka需要：</strong></p><ul><li>Java JDK</li><li>Kafka安裝包</li></ul><p><strong>優點：</strong></p><ol><li>客戶端語言豐富，支持java、.net、php、ruby、python、go等多種語言；</li><li>性能卓越，單機寫入TPS約在百萬條/秒，消息大小10個字節；</li><li>提供完全分佈式架構, 並有replica機制, 擁有較高的可用性和可靠性, 理論上支持消息無限堆積；</li><li>支持批量操作；</li><li>消費者採用Pull方式獲取消息, 消息有序, 通過控制能夠保證所有消息被消費且僅被消費一次;</li><li>有優秀的第三方Kafka Web管理界面Kafka-Manager；</li><li>在日誌領域比較成熟，被多家公司和多個開源項目使用；</li></ol><p><strong>缺點：</strong></p><ol><li>Kafka單機超過64個隊列/分區，Load會發生明顯的飆高現象，隊列越多，load越高，發送消息響應時間變長</li><li>使用短輪詢方式，實時性取決於輪詢間隔時間；</li><li>消費失敗不支持重試；</li><li>支持消息順序，但是一臺代理宕機後，就會產生消息亂序；</li><li>社區更新較慢；</li></ol><h1><strong>4.5 RabbitMQ/ActiveMQ/RocketMQ/Kafka對比</strong></h1><p>這裡列舉了上述四種消息隊列的差異對比：</p><div class=pgc-img><img alt=消息隊列之常見消息隊列分析彙總 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/c1c1d7ee1eec4b0497868158efc5443b><p class=pgc-img-caption></p></div><h1>結論:</h1><p>Kafka在於分佈式架構，RabbitMQ基於AMQP協議來實現，RocketMQ/思路來源於kafka，改成了主從結構，在事務性可靠性方面做了優化。廣泛來說，電商、金融等對事務性要求很高的，可以考慮RabbitMQ和RocketMQ，對性能要求高的可考慮Kafka。</p><blockquote><p><strong>五、參考資料：</strong></p></blockquote><h1><strong>5.1 消息隊列：</strong></h1><ol><li>大型網站架構之分佈式消息隊列 http://blog.csdn.net/shaobingj126/article/details/50585035</li><li>消息隊列的使用場景 https://www.zhihu.com/question/34243607/answer/127666030</li><li>淺談異步消息隊列模型 http://www.cnblogs.com/sunkeydev/p/5248855.html</li><li>消息隊列的兩種模式 http://blog.csdn.net/heyutao007/article/details/50131089</li></ol><h1><strong>5.2 RabbitMQ</strong></h1><ol><li>RabbitMQ主頁 https://www.rabbitmq.com/</li><li>RabbitMQ學習教程 https://www.rabbitmq.com/getstarted.html</li><li>專欄:RabbitMQ從入門到精通 http://blog.csdn.net/column/details/rabbitmq.html</li><li>RabbitMQ能為你做些什麼 http://rabbitmq.mr-ping.com/description.html</li><li>RabbitMQ指南(1)-特性及功能 https://blog.zenfery.cc/archives/79.html</li></ol><h1><strong>5.3 ActiveMQ</strong></h1><ol><li>ActiveMQ主頁 http://activemq.apache.org/</li><li>Apache ActiveMQ介紹 http://jfires.iteye.com/blog/1187688</li><li>ActiveMQ的簡介與安裝 http://blog.csdn.net/sl1992/article/details/72824562</li><li>ActiveMQ 和消息簡介 http://www.cnblogs.com/craftsman-gao/p/7002605.html</li></ol><h1><strong>5.4 RocketMQ</strong></h1><ol><li>主頁 https://github.com/alibaba/RocketMQ</li><li>RocketMQ 原理簡介 http://alibaba.github.io/RocketMQ-docs/document/design/RocketMQ_design.pdf</li><li>RocketMQ與kafka對比（18項差異） http://jm.taobao.org/2016/03/24/rmq-vs-kafka/</li></ol><h1><strong>5.5 Kafka</strong></h1><p>1.Kafka主頁： http://kafka.apache.org/</p><ol><li>Kafka特性 http://www.cnblogs.com/lsx1993/p/4847719.html</li><li>Kafka客戶端支持語言 https://cwiki.apache.org/confluence/display/KAFKA/Clients</li></ol><h1><strong>5.6 RabbitMQ/ActiveMQ/RocketMQ/Kafka對比</strong></h1><ol><li>RocketMQ，隊列選型 http://www.zmannotes.com/index.php/2016/01/17/rocketmq/</li><li>RabbitMQ和Kafka http://www.dongcoder.com/detail-416804.html</li><li>即時通信RabbitMQ二-性能測試 http://www.jianshu.com/p/d31ae9e3bfb6</li><li>RabbitMq、ActiveMq、ZeroMq、kafka之間的比較,資料彙總 http://blog.csdn.net/linsongbin1/article/details/47781187</li><li>消息隊列軟件產品大比拼 http://www.cnblogs.com/amityat/archive/2011/08/31/2160293.html</li></ol><h1><strong>總結：</strong></h1><p>消息隊列利用高效可靠的消息傳遞機制進行平臺無關的數據交流，並基於數據通信來進行分佈式系統的集成。目前業界有很多的MQ產品，例如RabbitMQ、RocketMQ、ActiveMQ、Kafka、ZeroMQ、MetaMq等，也有直接使用數據庫redis充當消息隊列的案例。而這些消息隊列產品，各有側重，在實際選型時，需要結合自身需求及MQ產品特徵，綜合考慮。</p><p><strong>原文鏈接：https://cloud.tencent.com/community/article/129032</strong></p><blockquote><p><strong>參考原文：https://www.cnblogs.com/Terry-Wu/p/7644279.html</strong></p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>隊列</a></li><li><a>之常見</a></li><li><a>消息</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d913f87.html alt=中醫健康養生之常見的病脈 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0f4c97aae8644d55883b1c3777b51a5a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d913f87.html title=中醫健康養生之常見的病脈>中醫健康養生之常見的病脈</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/209e1626.html alt="釘釘有消息提醒音但是刷不出來消息怎麼回事 消息延遲原因" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RpPX1Uf68LFLsU style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/209e1626.html title="釘釘有消息提醒音但是刷不出來消息怎麼回事 消息延遲原因">釘釘有消息提醒音但是刷不出來消息怎麼回事 消息延遲原因</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d6ce79d6.html alt=沒空回你消息的人，可能也沒空愛你 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/92d6784799a240d584de52ff9cc468e6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d6ce79d6.html title=沒空回你消息的人，可能也沒空愛你>沒空回你消息的人，可能也沒空愛你</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0155a40.html alt=消息隊列及常見消息隊列介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/3c780000da0d4ae15990 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0155a40.html title=消息隊列及常見消息隊列介紹>消息隊列及常見消息隊列介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a7ee8a5.html alt=消息隊列的使用之RabbitMq的選型 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15404744718207c9b0a18d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a7ee8a5.html title=消息隊列的使用之RabbitMq的選型>消息隊列的使用之RabbitMq的選型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0dc00e68.html alt=淺談消息隊列及常見的消息中間件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/99348ece13f64ce49f498270b88717c4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0dc00e68.html title=淺談消息隊列及常見的消息中間件>淺談消息隊列及常見的消息中間件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/26710420.html alt=消息隊列MQ面試專題（rabbitmq） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/S86eRASG4qdgs4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/26710420.html title=消息隊列MQ面試專題（rabbitmq）>消息隊列MQ面試專題（rabbitmq）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bd67ae90.html alt=淺談消息隊列用途及常見的消息中間件的區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6b0acb1aef6b4fe792b1fbd6a18d26f4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bd67ae90.html title=淺談消息隊列用途及常見的消息中間件的區別>淺談消息隊列用途及常見的消息中間件的區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e31bd69.html alt=電工新手入門之常見電器順序控制符號 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/24081aaf062640f0a22496e7f8a57625 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e31bd69.html title=電工新手入門之常見電器順序控制符號>電工新手入門之常見電器順序控制符號</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/25e7ec6d.html alt=沒有消息就是最好的消息 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/65d23829da884d11ba4b66ca341a7296 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/25e7ec6d.html title=沒有消息就是最好的消息>沒有消息就是最好的消息</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/42975f9b.html alt=安防弱電系統不求人之常見拓撲圖篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1534249979911b796a687c2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/42975f9b.html title=安防弱電系統不求人之常見拓撲圖篇>安防弱電系統不求人之常見拓撲圖篇</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/23902a3f.html alt=【重要消息】房源發佈 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bd13feb5530b4b4cbc0220b42227083d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/23902a3f.html title=【重要消息】房源發佈>【重要消息】房源發佈</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/199264e1.html alt=使用環形隊列解決串口打印阻塞問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6595586e75984d5e9968f9ca0cab6a2e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/199264e1.html title=使用環形隊列解決串口打印阻塞問題>使用環形隊列解決串口打印阻塞問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac006a7.html alt=如何打造可以無限擴展的分佈式消息隊列？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/47f42465ac1542a6a73d611fa70090a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac006a7.html title=如何打造可以無限擴展的分佈式消息隊列？>如何打造可以無限擴展的分佈式消息隊列？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a5a3083.html alt=豆腐塊？軍姿？隊列指揮？管他什麼東西，警校生照樣盤他！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bf0e7b78a3344611b00df1a45eb2ce93 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a5a3083.html title=豆腐塊？軍姿？隊列指揮？管他什麼東西，警校生照樣盤他！>豆腐塊？軍姿？隊列指揮？管他什麼東西，警校生照樣盤他！</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>