<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>華為、思科交換機路由器常用命令大全 | 极客快訊</title><meta property="og:title" content="華為、思科交換機路由器常用命令大全 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/9ef35e9c911b4bc3b65ce59c1327fd89"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/a9fe964.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/a9fe964.html><meta property="article:published_time" content="2020-10-29T21:05:53+08:00"><meta property="article:modified_time" content="2020-10-29T21:05:53+08:00"><meta name=Keywords content><meta name=description content="華為、思科交換機路由器常用命令大全"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/a9fe964.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>華為、思科交換機路由器常用命令大全</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><div class=pgc-img><img alt=華為、思科交換機路由器常用命令大全 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9ef35e9c911b4bc3b65ce59c1327fd89><p class=pgc-img-caption></p></div><h1>遠程連接訪問控制</h1><h1>Cisco</h1><h1>Console配置</h1><p>Enable password cisco：明碼</p><p>enable secret cisco：加密密碼</p><h1>Telnet 配置</h1><p>Username aaa password aaa</p><p>line vty 0 4</p><p>login local</p><p>transport input telnet</p><h1>SSH配置</h1><p>username aaa privilege 1 password aaa</p><p>ip domain name acme.org</p><p>hostname aaa</p><p>crypto key generate rsa</p><p>ip ssh maxstartups 5</p><p>ip ssh logging events</p><p>line vty 0 4</p><p>login local</p><p>transport input ssh</p><p>router#ssh –l aaa xx.xx.xx.xx（遠程登錄）</p><h1>常見配置錯誤分析與排錯</h1><p>1、 Telent 登錄失敗的故障分析與排除</p><p>1、 查看VTY用戶界面視圖是否允許支持Telnet</p><p>2、 查看是否是登錄上限：</p><p>3、 查看是否存在ACL</p><p>4、 查看VTY用戶界面圖示下是否設置登錄密碼</p><p>5、 如果用AAA驗證方式，查看用戶名密碼是否正確</p><p>6、 查看網絡是否連通</p><p>2、 SSH登錄失敗的故障分析與排除</p><p>1、 查看VTY用戶界面視圖是否允許支持ssh</p><p>2、查看是否是登錄上限</p><p>3、查看是否存在ACL</p><p>5、如果用AAA驗證方式，查看用戶名密碼是否正確</p><p>6、查看網絡是否連通</p><p>7、查看服務有無開啟</p><p>8、查看是否設置域名</p><p>9、查看認證是否開啟</p><p>10、查看設備名稱是否需要修改</p><h1>華為</h1><h1>Console配置</h1><p>交換機Console口初始密碼</p><p>user-interface con 0</p><p>authentication-mode aaa</p><p>user privilege level 15</p><p>aaa</p><p>local-user aaa password cipher aaa</p><p>local-user aaa privilege level 15</p><h1>Telnet 配置</h1><p>user-interface vty 0 4</p><p>authentication-mode aaa</p><p>user privilege level 15</p><p>history-command max-size 20 設置歷史緩衝區</p><p>idle-timeout 20 0 設置用戶超時時間</p><p>screen-length 30 設置終端屏幕顯示的行數</p><p>aaa</p><p>local-user aaa password cipher aaa</p><p>local-user aaa privilege level 15</p><p>local-user aaa service-type telnet terminal</p><h1>STelnet配置</h1><p>Stelnet(secure telnet)是基於SSH的協議，在傳輸過程中客戶端和服務端之間需要經過協商，建立安全傳輸連接，以確保在登錄和遠程交換機配置與管理中的數據傳輸安全</p><p>R1：</p><p>user-interface vty 0 4</p><p>authentication-mode aaa</p><p>user privilege level 15</p><p>protocol inbound ssh</p><p>aaa</p><p>local-user aaa password cipher aaa</p><p>local-user aaa privilege level 15</p><p>local-user aaa service-type terminal ssh</p><p>quit</p><p>ssh user aaa authentication-type password 認證方式為PASSWORD</p><p>stelnet server enable 開啟服務</p><p>R2:</p><p>ssh client first-time enable 第一次登錄需要下載密鑰</p><p>stelnet xx.xx.xx.xx</p><h1>HTTPWeb網管登錄</h1><h1>常見配置錯誤分析與排錯</h1><p>3、 Telent 登錄失敗的故障分析與排除</p><p>查看VTY用戶界面視圖是否允許支持Telnet</p><p>查看是否是登錄上限：display user-interface maximum-vty</p><p>查看是否存在ACL</p><p>查看VTY用戶界面圖示下是否設置登錄密碼</p><p>如果用AAA驗證方式，查看用戶名密碼是否正確</p><p>查看網絡是否連通</p><p>查看服務有無開啟</p><p>4、 STelnet登錄失敗的故障分析與排除</p><p>查看VTY用戶界面視圖是否允許支持ssh</p><p>查看是否是登錄上限：display user-interface maximum-vty</p><p>查看是否存在ACL</p><p>查看VTY用戶界面圖示下是否設置登錄密碼</p><p>如果用AAA驗證方式，查看用戶名密碼是否正確</p><p>查看網絡是否連通</p><p>查看服務有無開啟</p><h1>企業網園區架構</h1><p>核心層</p><p>分佈層</p><p>接入層</p><h1>接口及以太網鏈路配置與管理</h1><h1>接口分類</h1><p>1、 管理接口（Console）</p><p>2、 物理接口(百兆以太網接口、千兆以太網接口…)</p><p>3、 邏輯接口（Loopback接口、Null接口、Tunnel接口…）</p><h1>Cisco</h1><h1>華為</h1><p>Set flow-stat interval 400 全局配置接口的流量統計時間間隔，取值範圍為10---600</p><p>Description xxx 接口信息描述</p><p>Display interface brief 查看各接口狀態和配置的簡要信息。</p><h1>Vlan</h1><p>Vlan(virtual local area network )的中文名字叫虛擬局域網：是一組邏輯上的設備和用戶，在計算機網絡中，可以將一個二層設備劃分為多個不同的廣播域根據IEEE802.1Q協議定義VLAN在數據幀中是通過VID字段信息來標識，VID是一個12位的二進制字段信息，也就是說最多可以標識2的12次方個valn，其中0和4095是協議保留的不啟用，其中1—1005的vlan是普通valn，提供正常vlan的功能，1006—4094的valn是擴展vlan，提供部分valn功能，一般所有廠家的交換機默認所有交換機都屬於VLAN1.</p><p>Vxlan(virtual extensible lan)虛擬可擴展局域網，普通VLAN的個數為4096遠遠不能滿足大規模雲計算的數據中心的需求，所以才開發了VXLAN</p><p>VLAN 有以下優點：(1) 控制網絡的廣播問題：每一個VLAN是一個廣播域，一個VLAN上的廣播不會擴散到另一VLAN；(2) 簡化網絡管理：當VLAN中的用戶位置移動時，網絡管理員只需設置幾條命令即可；(3) 提高網絡的安全性：VLAN 能控制廣播；VLAN 之間不能直接通信。定義交換機的端口在什麼 VLAN 上的常用方法有：(1) 基於端口的 VLAN ：管理員把交換機某一端口指定為某一 VLAN 的成員；(2) 基於 MAC 地址的 VLAN ：交換機根據節點的 MAC 地址，決定將其放置於哪個 VLAN 中。</p><p>Catalyst交換機最多支持4096個vlan。</p><h1>VLAN劃分方式</h1><p>根據端口劃分:基於端口的VLAN</p><p>根據MAC劃分: 基於MAC的VLAN</p><p>根據IP進行劃分: 基於IP子網的VLAN</p><p>根據協議劃分: 基於協議的VLAN</p><p>根據幾種劃分依據組合進行劃分: 基於策略的VLAN</p><h1>Cisco</h1><p>Vlan</p><p>Name vlanx</p><p>Int vlan x</p><p>Ip add xx.xx.xx.xx xx.xx.xx.xx</p><p>Interface gig0/0</p><p>Sw moa cc</p><p>Sw acc vlan x</p><h1>私用vlan</h1><p>定義：在有些情況下，管理員希望隔離位於交換機同一VLAN中的終端設備之間的通信，同時還不希望將這些設備劃分進不同的IP子網中，因為劃分多個IP子網會使IP地址遭到浪費。私有VLAN中的端口屬於孤立端口（Lsolated）雜合端口（promiscuous）團體端口（community）</p><p>孤立端口：可以與雜合端口通信</p><p>雜合端口：可與孤立、團體端口通信</p><p>團體端口：可以與雜合、團體端口通信</p><p>輔助私用VLAN：每個輔助VLAN都是主VLAN的附庸VLAN，它們會被映射給主VLAN，而每臺設備都會與輔助VLAN相連。</p><p>輔助VLAN的類型：</p><p>團體VLAN：可以與團體VLAN中的其他端口通信，也可與主VLAN中的雜合端口通信</p><p>孤立VLAN：孤立端口不能與孤立VLAN中的其他端口通信，只能與雜合端口通信，每個PVLAN中只能由一個孤立VLAN</p><p>配置案例：</p><p>VLAN 200</p><p>Private-vlan isolated 設置為孤立VLAN</p><p>VLAN 201</p><p>Private-vlan community 設置為團體VLAN</p><p>VLAN 100</p><p>Private-vlan primary 設置為主VLAN</p><p>Private-vlan association 201 202 關聯輔助VLAN</p><p>Interface fastethernet 0/24</p><p>Switchport mode private-vlan promiscuous 將二層端口設置為雜合端口</p><p>Switchport private-vlan mapping 100 200,200 將雜合端口映射到私有VLAN</p><p>Switchport mode private-vlan host 將二層端口設置為主機端口</p><p>Switchport private-vlan host-assciation 100 201</p><h1>華為</h1><p>Vlan x</p><p>Interface vlanif x</p><p>Ip add xx.xx.xx.xx xx.xx.xx.xx</p><p>interface GigabitEthernet 0/0/1</p><p>port link-type access</p><p>port default vlan 1</p><h1>Mux VLAN（multiplex vlan）基本原理</h1><p>定義：MUX VLAN 提供了一種在VLAN 的端口間進行二層流量隔離的機制。</p><p>特點：</p><p>1、 主VLAN可以與任何從VLAN間直接二層tongxin</p><p>2、 任何不同的從VLAN（包括隔離型從VLAN和互通型從VLAN）之間不能直接二層通信</p><p>3、 互通型從VLAN內部可以進行二層通信。隔離型從VLAN內部的用戶間不能直接通信，起到在同一個VLAN內實現用戶互相隔離的目的。</p><p>Mux VLAN:分為Principal vlan(主VLAN，所屬端口：主端口) 和Subordinate valn(從VLAN)，Subordinate valn又分為Separate vlan(隔離型從VLAN 所屬端口：隔離型從端口) 和Group vlan(互通型從VLAN 互通型從端口)</p><p>配置案例：</p><p>&lt;Huawei>sys</p><p>[Huawei]vlan batch 2 to 4</p><p>[Huawei]vlan 2</p><p>[Huawei-vlan2]mux-vlan 設置為主VLAN</p><p>[Huawei-vlan2]subordinate group 3 將VLAN3設置為互通</p><p>[Huawei-vlan2]subordinate separate 4 將VLAN4設置為隔離型</p><p>[Huawei-vlan2]int g0/0/1</p><p>[Huawei-GigabitEthernet0/0/1]port link-type access</p><p>[Huawei-GigabitEthernet0/0/1]port default vlan 2</p><p>[Huawei-GigabitEthernet0/0/1]port mux-vlan enable</p><p>[Huawei-GigabitEthernet0/0/1]int g0/0/2</p><p>[Huawei-GigabitEthernet0/0/2]port link-type access</p><p>[Huawei-GigabitEthernet0/0/2]port mux-vlan en</p><p>[Huawei-GigabitEthernet0/0/2]int g0/0/3</p><p>[Huawei-GigabitEthernet0/0/3]port link-type access</p><p>[Huawei-GigabitEthernet0/0/3]port default vlan 4</p><p>[Huawei-GigabitEthernet0/0/3]port mux-vlan enable</p><p>注意：互通VLAN下的端口可以直接通信，隔離VLAN下的端口不能通信，從VLAN都可以與主VLAN通信</p><h1>QinQ技術（802.1Q-in-802.1Q）</h1><p>VLAN都是單標籤封裝，QinQ技術是一項可以在原有標籤頭基礎上再增加一層標籤，實現雙VLAN標籤的目的。注意，啟用了雙標籤技術的交換機端口具有添加和剝離外層VLAN標籤的雙重功能。</p><p>基本封裝：是將進入一個端口的所有流行全部封裝一個相同的外層VLAN標籤，是一種基於端口的封裝方式。</p><p>配置案例：</p><p>[Huawei]sysname sw1</p><p>[sw1]vlan batch 100 200</p><p>[sw1]int g0/0/2</p><p>[sw1-GigabitEthernet0/0/2]port link-type dot1q-tunnel</p><p>[sw1-GigabitEthernet0/0/2]port default vlan 100</p><p>[sw1-GigabitEthernet0/0/3]port link-type dot1q-tunnel</p><p>[sw1-GigabitEthernet0/0/3]port default vlan 200</p><p>[sw1-GigabitEthernet0/0/3]int g0/0/1</p><p>[sw1-GigabitEthernet0/0/1]port link-type trunk</p><p>[sw1-GigabitEthernet0/0/1]port trunk allow-pass vlan 100 200</p><p>[sw1-GigabitEthernet0/0/1]qinq protocol 9100</p><p>&lt;Huawei>sys</p><p>[Huawei]sysname sw2</p><p>[sw2]vlan batch 100 200</p><p>[sw2]int g0/0/2</p><p>[sw2-GigabitEthernet0/0/2]port link-type do</p><p>[sw2-GigabitEthernet0/0/2]port default vlan 100</p><p>[sw2-GigabitEthernet0/0/2]int g0/0/3</p><p>[sw2-GigabitEthernet0/0/3]port link-type dot1q-tunnel</p><p>[sw2-GigabitEthernet0/0/3]port default vlan 200</p><p>[sw2-GigabitEthernet0/0/3]int g0/0/1</p><p>[sw2-GigabitEthernet0/0/1]port link-type trunk</p><p>[sw2-GigabitEthernet0/0/1]port trunk allow-pass vlan 100 200</p><p>[sw2-GigabitEthernet0/0/1]qinq protocol 9100</p><p>靈活封裝：是對封裝一種更靈活的實現，是基於端口封裝與基於VLAN封裝的結合方式。除了實現所有基本封裝功能外，靈活封裝對於同一個端口接受的數據還可以根據不同的內層VLAN標籤執行外層標籤封裝。主要分為三類：</p><p>1、 基於VLAN ID 的靈活封裝</p><p>2、 基於802.1P優先級的靈活封裝</p><p>3、 基於流策略的靈活封裝</p><p>QinQ映射：對數據幀中的VLAN標籤進行替換，最根本的不同就是QinQ映射是在路由子接口上應用的，而VLAN映射是在物理端口上應用的。</p><h1>VLAN聚合</h1><p>定義：VLAN聚合，只在super-VLAN 接口上配置IP 地址，而不必為每個sub-VLAN 分配IP 地址。所有sub-VLAN 共用IP 網段，解決了IP 地址資源浪費的問題。</p><p>注意：super-VLAN 必須是三層VLANIF接口，但不能有交換機端口成員，各個Sub-VLAN成員同處Super-VLAN的VLANIF接口IP地址所在的一個IP子網中，必須有交換機端口成員，但都不能配置三層的VLANIF接口。在Super-VLAN的VLANIF接口上默認了Sub-VLAN間的ARP代理功能。</p><p>配置案例：</p><p>[Huawei]int gig 0/0/2</p><p>[Huawei-GigabitEthernet0/0/2]port link-type access</p><p>[Huawei-GigabitEthernet0/0/2]int g0/0/3</p><p>[Huawei-GigabitEthernet0/0/3]port link-type access</p><p>[Huawei-GigabitEthernet0/0/3]int g0/0/4</p><p>[Huawei-GigabitEthernet0/0/4]port link-type access</p><p>[Huawei-GigabitEthernet0/0/4]int g0/0/5</p><p>[Huawei-GigabitEthernet0/0/5]port link-type access</p><p>[Huawei-GigabitEthernet0/0/5]vlan2</p><p>[Huawei-vlan2]port GigabitEthernet 0/0/2 0/0/3</p><p>[Huawei-vlan2]vlan 3</p><p>[Huawei-vlan3]port GigabitEthernet 0/0/5 0/0/4</p><p>[Huawei-vlan3]vlan 4</p><p>[Huawei-vlan4]aggregate-vlan</p><p>[Huawei-vlan4]access-vlan 2 to 3 關聯vlan 2-3</p><p>[Huawei-vlan4]int vlan 4</p><p>[Huawei-Vlanif4]ip add 100.100.100.100 255.2555.255.0</p><p>[Huawei-Vlanif4]arp-proxy inner-sub-vlan-proxy en 開啟ARP代理</p><h1>VLAN Mapping</h1><p>定義：VLAN Mapping 也叫做VLAN translation，可以實現在用戶VLAN ID（私有VLAN）和運營商VLAN ID(業務VLAN,也可以說是公有VLAN)之間相互轉換的一個功能。</p><p>配置案例：</p><h1>端口安全</h1><h1>CISCO</h1><p>Switchport port-securit 開啟端口安全</p><p>Switchport port-security mac-address xx-xx-xx 靜態綁定MAC</p><p>Switchport port-security maximum x 限制此端口允許通過的MAC個數</p><h1>華為</h1><p>port-security enable 開啟端口安全</p><p>port-security mac-address sticky</p><p>port-security mac-address sticky xx-xx-xx vlan x靜態綁定MAC</p><p>port-security max-mac-num x 最大學習數</p><h1>Trunk</h1><p>Trunk 技術使得在一條物理線路上可以傳送多個 VLAN 的信息。</p><p>有兩種常見的幀標記技術：ISL （Inter-Switch Link 交換機間鏈路）和 802.1Q。ISL 技術在原有的幀上重新加了一個幀頭，並重新生成了幀較驗序列（FCS），ISL 是思科特有的技術，因此不能在 Cisco 交換機和非Cisco 交換機之間使用。而 802.1Q 技術在原有幀的源 MAC 地址字段後插入標記字段，同時用新的 FCS 字段替代了原有的 FCS 字段，該技術是國際標準，得到所有廠家的支持。</p><h1>Cisco</h1><p>switch mode { trunk | dynamic desirable | dynamic auto }trunk:這個設置將端口置為永久 trunk 模式，封裝類型由"switchport trunkencapsulation" 命令決定dynamic desirable：端口主動變為 trunk，如果另一端為 negotiate、dynamicdesirable 、dynamic auto 將成功協商dynamic auto： 被動協商，如果另一端為 negotiate、dynamic desirable 將成功協商</p><p>如果想把接口配置為negotiate，使用：S1(config-if)#switchport trunk encapsulation ｛ isl | dot1q ｝S1(config-if)#switchport mode trunkS1(config-if)#no switchport negotiate如果想把接口配置為nonegotiate，使用：S1(config-if)#switchport trunk encapsulation ｛ isl | dot1q ｝S1(config-if)#switchport mode trunkS1(config-if)#switchport nonegotiate如果想把接口配置為desirable，使用：S1(config-if)#switchport mode dynamic desirableS1(config-if)#switchport trunk encapsulation ｛ negotiate | isl | dot1q ｝如果想把接口配置為auto，使用：S1(config-if)#switchport mode dynamic autoS1(config-if)#switchport trunk encapsulation ｛ negotiate | isl | dot1q ｝</p><h1>華為</h1><p>端口模式：port link-type trunk</p><h1>EtherChannel</h1><p>EtherChannel（以太通道）是由Cisco公司開發的，應用於交換機之間的多鏈路捆綁技術。它的基本原理是：將兩個設備間多條快速以太或千兆以太物理鏈路捆綁在一起組成一條邏輯鏈路，從而達到帶寬倍增的目的。除了增加帶寬外，EtherChannel還可以在多條鏈路上均衡分配流量，起到負載分擔的作用；在一條或多條鏈路故障時，只要還有鏈路正常，流量將轉移到其他的鏈路上，整個過程在幾毫秒內完成，從而起到冗餘的作用，增強了網絡的穩定性和安全性。 EtherChannel中， 負載在各個鏈路上的分佈可以根據源IP地址、 目的IP地址、源MAC地址、目的MAC地址、源IP地址和目的IP地址組合、源MAC地址和目的MAC地址組合等來進行分佈。兩臺交換機之間是否形成EtherChannel也可以用協議自動協商。目前有兩個協商協議：PAGP和LACP，前者是CISCO專有的協議，而LACP是公共的標準。</p><h1>Cisco</h1><p>interface port-channel 1//以上是創建以太通道，要指定一個唯一的通道組號，組號的範圍是1～6的正整數。</p><p>interface f0/13channel-group 1 mode oninterface f0/14channel-group 1 mode on//以上將物理接口指定到已創建的通道中。int port-channel 1switchport mode trunkspeed 100duplex full//以上配置通道中的物理接口的屬性interface port-channel 1interface f0/13channel-group 1 mode oninterface f0/14channel-group 1 mode onint port-channel 1switchport mode trunkspeed 100duplex fullport-channel load-balance dst-macport-channel load-balance dst-mac//以上是配置EtherChannel的負載平衡方式，命令格式為"port-channel load-balance負載平衡的方式有：dst-ip、dst-mac、src-dst-ip、src-dst-mac等。（3） 查看etherchannel信息S1#show etherchannel summaryEtherChannel 已經形成，"SU"表示 EtherChannel 正常，如果顯示為"SD"，把EtherChannel 接口關掉重新開啟。（4） 配置 PAGP 或者 LAGP我們這裡進行如下配置：interface range f0/13 -14channel-group 1 mode desirableinterface range f0/13 -14channel-group 1 mode desirableshow etherchannel summary可以看到 etherchannel 協商成功。注意應在鏈路的兩端都進行檢查，確認兩端都形成以太通道才行。</p><h1>華為</h1><p>system-view</p><p>interface Eth-Trunk 1</p><p>mode manual l</p><p>mode manual load-balance</p><p>trunkport GigabitEthernet 0/0/1 to 0/0/3</p><p>port link-type trunk</p><p>load-balance src-dst-mac</p><p>display eth-trunk 1</p><h1>VTP(CISCO)</h1><p>VTP（VLAN Trunk Protocol）提供了一種用於在交換機上管理 VLAN 的方法，該協議使得我們可以一個或者幾個中央點（Server）上創建、修改、刪除 VLAN， VLAN 信息通過 Trunk鏈路自動擴散到其他交換機，任何參與 VTP 的交換機就可以接受這些修改，所有交換機保持相同的 VLAN 信息。VTP 被組織成管理域（VTP Domain）,相同域中的交換機能共享 VLAN 信息。根據交換機在 VTP 域中的作用不同，VTP 可以分為三種模式：（1） 服務器模式(Server)：在 VTP 服務器上能創建、修改、刪除 VLAN，同時這些信息會通告給域中的其他交換機。默認情況下，交換機是服務器模式。每個 VTP 域必須至少有一臺服務器，域中的 VTP 服務器可以有多臺。（2） 客戶機模式(Client)：VTP 客戶機上不允許創建、修改、刪除 VLAN，但它會監聽來自其他交換機的 VTP 通告並更改自己的 VLAN 信息。接收到的 VTP 信息也會在 Trunk鏈路上向其他交換機轉發，因此這種交換機還能充當 VTP 中繼。（3） 透明模式(Transparent)：這種模式的交換機不參與 VTP。可以在這種模式的交換機上創建、修改、刪除 VLAN，但是這些 VLAN 信息並不會通告給其他交換機，它也不接受其他交換機的 VTP 通告而更新自己的 VLAN 信息。然而需要注意的是，它會通過Trunk 鏈路轉發接收到的 VTP 通告從而充當了 VTP 中繼的角色，因此完全可以把該交換機看成是透明的</p><h1>GVRP（華為）</h1><p>GVRP(GVRP VLAN Registration Protocol ,VLAN註冊協議)：通過它只需在其中一個交換機上創建所需的VLAN,然後通過自動註冊功能在網絡中其他交換機中自動創建所需的VLAN，大大減輕了網絡管理員的工作量，也減少了錯誤出現的機率。</p><p>GVRP註冊功能僅可在連接網絡設備的TRUNK端口上使能，所以用戶計算機所連接的端口仍不能通過GVRP功能自動加入到所需的VLAN中，仍需要採取手動配置。</p><p>消息類型</p><p>在應用實體之間的信息交互過程中主要還有三類消息起作用，分別為Join消息、Leave消息、LeaveALL消息。</p><p>1、 Join（加入）消息：當一個GVRP應用實體通過希望其他設備註冊自己的屬性信息時，對外發送Join消息，當收到其他實體發來的Jion消息，或本設備靜態配置了某些屬性，需要其他GVRP應用實體進行註冊時，也會向外發送Jion消息。</p><p>2、 Leve（註銷）消息：當一個GVRP應用實體希望其他設備註銷自己的某個屬性時，它將對外發送Leve消息：當收到其他實體的Leve消息註銷某些屬性，或靜態註銷了某些屬性後，也會向外發送Leve消息</p><p>3、 LeveALL(全部註銷)消息：每個應用實體啟用後，將同時啟用leaveALL定時器，當該定時器超時後應用實體將對外發送LeveALL消息。LeveALL消息用來註銷所有屬性，以使其他應用實體重新註冊本實體上所有的屬性信息，以此來週期性地清除網絡中的垃圾屬性（例如某個屬性已經被刪除，但由於設備突然斷電，並沒有發生Leave消息來通知其他實體註銷此屬性）</p><p>註冊模式</p><p>1、 Normal 模式：允許該該端口動態註冊、註銷VLAN、傳播動態VLAN和靜態VLAN消息，這是最常用的一種動態註冊模式，也是唯一一種具有動態註冊VLAN功能的模式</p><p>2、 Fixed模式：禁止該端口動態註冊、註銷VLAN，只傳播靜態VLAN信息，不傳播動態VLAN信息，也就是說被設置為Fixed模式的TRUNK端口，即使允許所有VLAN通過，實際通過的VLAN也只能時手動創建的那部分。</p><p>3、 Forbidden 模式：禁止該端口動態註冊、註銷VLAN、不傳播除VLAN1以為的任何的VLAN信息。也就是說被配置的Forbidden模式 的TRUNK端口，即使允許所有的VLAN通過，實際通過的VLAN也只能時VLAN1</p><p>華為交換機缺省GVRP參數配置</p><p>配置案例：</p><p>&lt;Huawei>sys</p><p>[Huawei-GigabitEthernet0/0/1]port link-type trunk</p><p>[Huawei-GigabitEthernet0/0/1]port trunk allow-pass vlan all</p><p>[Huawei-GigabitEthernet0/0/1]gvrp</p><p>[Huawei-GigabitEthernet0/0/1]gvrp registration normal</p><h1>STP</h1><p>STP定義了一個在擴展網絡中可以延伸到所有交換機的樹形結構。STP只允許存在一條活動的（active）路徑,並同時阻塞其他冗餘路徑。</p><p>交換環路會帶來三個問題：廣播風暴、同一幀的多個拷貝、交換機 CAM 表不穩定。</p><p>STP 基本思路是阻斷一些交換機接口，構建一棵沒有環路的轉發樹。STP 利用 BPDU(Bridge Protocol Data Unit)和其他交換機進行通信，從而確定哪個交換機該阻斷哪個接口。</p><p>為了在網絡中形成一個沒有環路的拓撲，網絡中的交換機要進行以下三個步驟：（1）舉根橋、（2）選取根口、（3）選取指定口。這些步驟中，哪個交換機能獲勝將取決於以下因素（按順序進行）：</p><p>（1） 最低的根橋 ID（網橋優先級+MAC 地址：交換機的默認優先級為 32768）；（2） 最低的根路徑代價；（3） 最低發送者橋 ID；（4） 最低發送者端口 ID。</p><p>交換機的端口要經過幾種狀態：</p><p>禁用（Disable）</p><p>阻塞（Blocking）</p><p>監聽狀態(Listening)</p><p>學習狀態（Learning）</p><p>最後是轉發狀態(Forwarding)。</p><p>RSTP</p><p>RSTP 中接口分為邊界接口（Edge Port）、點到點接口（Point-to-Point Port）、共享接口（Share Port）。如果接口上配置了 spanning portfast，接口就為邊界接口；如果接口是半雙工，接口就為共享接口；如果接口是全雙工，接口就為點到點接口。在接口上指明類型有利於 RSTP 的運行。</p><p>丟棄（Discarding）</p><p>學習狀態（Learning）</p><p>轉發狀態(Forwarding)</p><p>Postfast：當計算機接入時， 接口立即進入Listening 狀態，隨後經過 Learning，最後才成為 Forwarding，這期間需要 30 秒的時間。這對於有些場合是不可忍受的可以配置 portfast 特性，使得計算機一接入，接口立即進入 Forwarding。S1(config-if)#spanning-tree portfast</p><p>Uplinkfast：沒有配置 uplinkfast 時，交換機如果能直接檢測到接口上的鏈路故障，阻塞端口會立即進入 Listen 狀態，這樣 30 秒就能進入 Forward 狀態。然而如果 sw1 和 sw2之間存在一個 Hub，sw 1上的接口故障了，sw1將無法直接檢測到故障，sw1 只能等待 10個週期沒有收到 sw2 的 BPDU（每個週期 2 秒），20 秒中後，sw1 的接口才進入 Listen 狀態，這樣總共 50 秒才就能進入 Forward 狀態。所以 STP 重新收斂的時間通常需要 30—50 秒。</p><p>S1(config)#spanning-tree backbonefastSTP 保護：sw 將從 f0/15 收到 S3 發送的更優的 BPDU，然而由於該接口上配置Root guard，sw 的接口進入阻斷狀態。</p><p>sw(config-if)#spanning-tree guard root</p><h1>Cisco</h1><h1>Pvst</h1><p>Spanning-tree mode rapid-pvst</p><p>Spanning-tree vlan x root primary 或 spanning-tree vlan x pri 0</p><p>Spanning-tree vlan x root sercondary 或 spanning-tree vlan x pri 4096</p><h1>Mstp</h1><p>Spanning-tree mode mst</p><p>Spanning-tree mst configuration</p><p>Name xxx</p><p>Revision 1</p><p>Instance 1 vlan x,x,x,x</p><p>Instance 2 vlan x,x,x,x</p><p>Spanning-tree mst 1 root primary 或 spanning-tree mst 1 pri 0</p><p>Spanning-tree mst 2 root sercondary 或 spanning-tree mst 2 pri 4096</p><h1>華為</h1><p>兩種度量：</p><p>1、 ID:STP中的ID包括：BID(Bridge ID 橋ID)和PID(Port ID 端口ID)</p><p>2、 路徑開銷</p><p>三個選舉要素：</p><p>1、 跟橋</p><p>2、 跟端口</p><p>3、 指定端口</p><p>四個比較原則</p><p>1、 跟橋ID</p><p>2、 累計根路徑開銷</p><p>3、 發送者BID</p><p>4、 發送端口PID</p><h1>STP/RSTP配置</h1><p>Stp</p><p>System-view</p><p>Stp mode stp</p><p>Stp root (primary | secondary) 設置交換機為根橋或備份跟橋</p><p>stp enable 全局下開啟STP</p><p>stp pathxost-standard legacy 使網絡內的所有交換機設備的端口路徑開銷使用相同的計算方法（華為私有）</p><p>端口模式下：stp disable 連接計算機的端口去掉stp</p><p>Stp cost xxxx 修改接口COSR值</p><p>Rstp</p><p>System-view</p><p>Sysname switchA</p><p>Stp mode rstp</p><p>Stp root primary</p><p>Stp root secondary</p><p>端口模式下：stp edged-port enable 配置為邊緣端口</p><p>Stp bpdu-filter enable 配置BPDU過濾</p><h1>MSTP配置</h1><p>System-view</p><p>Sysname switchA</p><p>Stp region-configuration</p><p>Region-name RG1</p><p>Instance 1 vlan 2 to 10</p><p>Instance 2 vlan 11 to 20</p><p>Active region-configuration</p><p>Stp instance 1 root primary 配置為的根橋</p><p>Stp instance 2 root seconadary 配置為備份根橋</p><h1>在園區網中實施高可用性和冗餘性</h1><p>擁有高可用性的網絡可以為用戶訪問所有設備的路徑和關鍵服務器提供可供替換的方案，高可用性方案絕不僅僅指添加冗餘設備。它意味著網絡設計人員在瞭解故障點的基礎上才對網絡進行設計和規劃，以便在這些故障點出現問題時能夠使用可替換的解決方案。</p><p>理解高可用性</p><p>高可用性是確保整個網絡能過快速復原的技術，旨在增強IP網絡的可用性。用戶對網絡應用的訪問必須跨越不同的網段，從企業骨幹網到企業邊緣，在到服務提供商邊緣，最後穿越服務提供商核心網。所有網段必須具有足夠快速的復原能力，使用戶和網絡服務感受不到曾經發生的任何問題。</p><h1>SNMP</h1><p>SNMP（簡單網絡管理協議）由一組網絡管理的標準組成</p><p>一、Snmp版本：V1、V2定義在RFC1157中，其中定義了下列5種基本的SNMP消息，網絡管理器可以利用這些消息來被管理設備中的代理請求數據</p><p>1、 GET REQUEST （獲得請求）：用於向代理請求指定MIB變量的值</p><p>2、 GET NEXT REQUEST (獲得下一個請求)：用於初始的GET REQUEST之後，用於請求表格或列表中的下一個對象</p><p>3、 SET REQUEST(設置請求)：用來設置代理上的一個MIB變量</p><p>4、 GET RESPONSE(獲得響應)：代理用其來相應管理器發出的GET REQUEST 或GET NEXT REQUEST 消息</p><p>5、 TRAP（陷阱）：代理用其向管理器主動發出告警。當發生特定事件時，代理會發送TRAP消息，比如設備狀態的變更、設備或組成部分發生故障、代理初始化或重啟等。</p><p>二、基於團體的SNMPV2定義在RFC1901中，這是最常見的SNMP實施版本。SNMPV2C部署了SNMPV1中定義的管理框架，也就是用戶需要通過讀/寫團體字符串來獲得管理訪問權限。</p><p>SNMPV2中引入了以下兩個新的消息類型。</p><p>GET BULK REQUEST (獲取批量請求)：在請求大量數據時（比如請求表格），該消息減少了重複的請求和相應消息，增強了性能</p><p>INFORM REQUEST(信息請求)：向SNMP管理器通告特定事件，與SNMP Trap消息不同的是，Trap消息是未經請求而主動發送的，而NMS則是通過向請求設備返回INFORM RESPONSE （信息相應）消息，來回復INFORM REQUEST消息的。</p><p>SNMPV2中添加了的數據類型：64位計數器，這是因為32位計數器很快會由於快速網絡接口而過時。</p><p>三、SNMPV3定義在RFC3410-3415中，這個版本為了保護被管理設備間傳輸重要數據的安全性，而添加了一些保護機制。</p><p>SNMP中引入了下列三個安全級別。</p><p>NOAUTHNOPRIV：不需要認證，不提供隱私性（加密）</p><p>AUTHNOPRIV:基於HMAC-MD5或HMAC-SHA的認證。不提供加密。</p><p>AUTHPRIV：除了認證之外，還將CBC-DES加密算法用作隱私性協議</p><h1>Cisco</h1><p>Access-list 100 permit ip 10.1.1.0 0.0.0.255 any</p><p>Snmp-server community cisco RO 100</p><p>Snmp-server community xyz123 RW 100</p><p>Snmp-server trap 10.1.1.50</p><h1>華為</h1><h1>IP服務水平協議</h1><p>對於客戶來說。網絡已經變得越來越重要，任何因故障造成的中斷或性能下降都會對其收益造成惡劣的影響。因此企業需要某種形式的IP服務可預見性。SLA是網絡服務提供商與其客戶之間的合約，或者是網絡部門與內部企業客戶之間達成的共識。SLA可以為客戶提供某種形式的保障，用來確保用於體驗的水平。</p><p>主要功能：</p><p>邊緣到邊緣的網絡可用性監測</p><p>網絡性能檢測和網絡性能的可見度</p><p>VOIP/視頻和VPN檢測</p><p>IP服務網絡健康狀態的準備或評估</p><p>MPLS網絡檢測。</p><p>網絡運營的故障排除。</p><p>通過以下數據統計：、</p><p>網絡延遲和相應時間</p><p>丟包狀態統計</p><p>網絡抖動和語音質量評分</p><p>端到端網絡連通性</p><p>配置案例：</p><h1>Cisco</h1><p>Ip sla monitor 11 使其能夠相應這個消息。</p><p>Type echo prot ipicmpecho xx.xx.xx.xx source-int fa0/1</p><p>Frequency 10 10秒一次</p><p>Exit</p><p>Ip sla monitor schedule 11 life forever start-time now</p><p>Track 1 ip sla 11 reachability</p><h1>華為</h1><h1>RPR(路由處理器冗餘性 Cisco)</h1><p>版本：</p><p>RPR</p><p>RPR+</p><p>配置：</p><p>redundancy</p><p>mode rpr-plus ：配置RPR+</p><h1>狀態化故障倒換（SSO Cisco）</h1><p>配置：</p><p>redundancy</p><p>mode sso ：配置sso</p><h1>FHRP(首跳冗餘性協議 First Hop Redundancy Protocols )</h1><p>提供了默認網關的冗餘性，其方法是讓一臺路由器充當活躍的網關路由器，而另一臺或多臺其他的路由器則處於備用模式。</p><h1>HSRP（熱備份路由協議 Cisco）</h1><p>它可以提供網關的冗餘性，且無需在子網內的終端設備上進行任何額外的配置。HSRP協議配置在一組路由器之間，這些路由器將會共同工作，對於局域網中的主機來說他們就是一個虛擬路由器。</p><p>管理員需要把虛擬路由器的IP地址配置為該網段中的主機的默認網關。</p><p>HSRP提供了一種機制，來判斷哪臺路由器應該充當活躍角色而轉發流量。</p><p>HSRP狀態</p><p>配置案例：</p><p>Interface vlan 10</p><p>Ip address 10.1.1.2 255.255.255.0</p><p>Standby 10 ip 10.1.1.1</p><p>Standby 10 priority 110 默認值是0，優先級越高，越優先</p><p>Standby 10 preempt 啟動搶佔機制</p><p>Standby 10 track xx decrement xx配置追蹤變量</p><h1>VRRP(虛擬路由器冗餘性協議)</h1><h1>Cisco</h1><p>與HSRP相比，主要加入了一些特性並於IEEE兼容，可以實現一主多備</p><p>配置案例：</p><p>Interface vlan 1</p><p>Ip address 10.0.2.1 255.255.255.0</p><p>Vrrp 1 ip 10.0.2.254</p><p>Vrrp 1 timers advertise msec 500 更改計時器，計時器參數指明設備作為主用路由器的公告間隔時間</p><p>Vrrp 1 priority 90 設置優先級</p><p>Vrrp 1 timers learn 作為備有路由器的學習狀態</p><h1>GLBP(CISCO)</h1><p>最多支持1024個組（HSRP最多支持16個）</p><p>一個AVG、若干AVF，AVG負責負載分擔AVF和AVG之間的流量</p><p>虛擬IP地址與AVG和AVF的真實IP地址不同</p><p>每組中的每個AVF/AVG有一個虛擬MAC</p><p>使用224.0.0.102發送HELLO數據包</p><p>只可以追蹤對象訪問控制列表</p><h1>訪問控制列表</h1><h1>ACL</h1><p>標準</p><p>檢查源地址</p><p>通常允許、拒絕的是完整的協議</p><p>擴展</p><p>檢查源地址和目的地址</p><p>通常允許、拒絕的是某個特定的協議</p><p>進方向和出方向</p><p>注意：</p><p>訪問列表的編號指明瞭使用何種協議的訪問列表</p><p>每個端口、每個方向、每條協議只能對應於一條訪問列表</p><p>訪問列表的內容決定了數據的控制順序</p><p>具有嚴格限制條件的語句應放在訪問列表所有語句的最上面</p><p>在訪問列表的最後有一條隱含聲明：deny any－每一條正確的訪問列表都至少應該有一條允許語句</p><p>先創建訪問列表，然後應用到端口上</p><p>訪問列表不能過濾由路由器自己產生的數據</p><h1>Cisco</h1><p>標準訪問列表 (1 to 99) 檢查 IP 數據包的源地址</p><p>access-list access-list-number {permit|deny} source [mask]</p><p>ip access-group access-list-number { in | out }</p><p>擴展訪問列表 (100 to 199) 檢查源地址和目的地址、具體的 TCP/IP 協議和目的端口</p><p>access-list access-list-number { permit | deny } protocol source source-wildcard [operator port] destination destination-wildcard [ operator port ] [ established ] [log]</p><p>配置案例：</p><p>access-list 101 deny tcp 172.16.4.0 0.0.0.255 172.16.3.0 0.0.0.255 eq 21</p><p>access-list 101 deny tcp 172.16.4.0 0.0.0.255 172.16.3.0 0.0.0.255 eq 20</p><p>其它訪問列表編號範圍表示不同協議的訪問列表</p><h1>華為</h1><p>按功能劃分的ACL</p><p>注意：華為設備在最後都會有一條默認的permit any any Cisco設備默認為deny any any 這一點要特別注意</p><p>配置案例：</p><p>基本ACL：</p><p>[Huawei]acl number 2100</p><p>[Huawei-acl-basic-2100]acl name test1 2001 命名</p><p>[Huawei-acl-basic-test1]rule 5 deny source 192.168.1.1 0 設置生效順序及規則</p><p>[Huawei-acl-basic-test1]int g0/0/1</p><p>[Huawei-GigabitEthernet0/0/1]traffic-filter inbound acl 2001 應用到端口</p><p>高級ACL：</p><p>基於時間：</p><p>[Huawei]time-range satime 10:05 to 10:07 working-day 規定時間段</p><p>[Huawei]acl 3002</p><p>[Huawei-acl-adv-3002]rule 5 deny ip source 192.168.1.10 0.0.0.255 destination 192.168.1.253 0.0.0.0 time-range satime 基於源、目的IP地址，調用時間段</p><p>[Huawei-acl-adv-3002]int g0/0/5</p><p>[Huawei-GigabitEthernet0/0/5]traffic-filter inbound acl 3002</p><p>基於端口：</p><p>[Huawei]acl 3333</p><p>[Huawei-acl-adv-3333]rule deny udp destination-port eq 2222 source 192.168.1.11 0.0.0.255 destination 192.168.1.253 0.0.0.0</p><p>[Huawei-acl-adv-3333]int g0/0/6</p><p>[Huawei-GigabitEthernet0/0/6]traffic-filter inbound acl 3333</p><h1>ROUTER-MAP</h1><h1>VLAN-MAP</h1><h1>DHCP</h1><p>動態主機配置協議（DHCP）允許設備動態獲得地址信息。</p><p>DHCP在RFC2131中定義，實際是基於BOOTP的。安建立在客戶/服務器模型上並定義了兩個組件：</p><p>服務器：傳送主機配置信息。</p><p>客戶：請求並獲得主機配置信息。</p><p>DHCP提供下面的優點：</p><p>它減少了設備上的配置量</p><p>它減少了配置錯誤的可能性</p><p>它通過集中IP尋址信息從而提供了更多的控制</p><p>當請求地址信息時，DHCP客戶經歷4個過程：</p><p>1.客戶端產生dhcpdiscover廣播以發現在局域網段上有哪些DHCP服務器。</p><p>2.網絡中的所有DHCP服務器用dhcpoffer單播信息迴應客戶端，向客戶端提供IP地址信息。如果客戶端從多如服務器接受到住處，它選擇一個（通常情況下是第一個）</p><p>3.在選擇一個提供後，客戶端向相應的服務器迴應一條dhcprequest信息，告訴服務器它需要使用服務器提供的地址信息。如果只有一個服務器並且服務器的信息和客戶配置衝突，客戶將回應一條dhcpdecline信息。</p><p>4.DHCP服務器迴應dhcpack作為客戶端的確認，表明它接收到dhcprequest信息，客戶接收地址信息。</p><p>注意：服務器也能迴應dhcpnack，告訴客戶端提供不再有效，客戶需要重新請求地址信息。這在服務器產生dhcpoffer信息後，如果客戶端的dhcprequest迴應不及時就會發生。</p><h1>Cisco</h1><p>DHCP包含兩種類型的設備：服務器與客戶端，IOS路由器支持這兩種功能。</p><p>服務器負責為客戶端分配地址信息。</p><p>客戶端從服務器請求地址信息。</p><p>配置案例：</p><p>r1(config)#ip dhcp excluded-address 192.168.10.1 禁止192.168.10.1自動分配</p><p>r1(config)#ip dhcp excluded-address 192.168.10.2禁止192.168.10.2自動分配</p><p>r1(config)#ip dhcp pool DHCP</p><p>r1(dhcp-config)#network 192.168.10.0 255.255.255.0</p><p>r1(dhcp-config)#domain-name hongtuit.com</p><p>r1(dhcp-config)#dns-server 202.103.24.68 202.103.24.69</p><p>r1(dhcp-config)#default-router 192.168.10.254 網關</p><p>r1(dhcp-config)#lease 5 租期</p><h1>華為</h1><h1>組播</h1><p>組播特點：</p><p>解決了網絡中用戶數量不確定的問題，一份信息,多個接收者。</p><p>相同的組播數據流在每一條鏈路上最多僅有一份</p><p>組播優勢：</p><p>減輕服務器和CPU負荷</p><p>減少了鏈路帶寬資源的佔用</p><p>減輕了網絡設備的負載</p><p>組播劣勢：</p><p>盡力投遞:報文丟失是不可避免的。因此組播應用程序不能依賴組播網絡進行可靠性保證，必須針對組播網絡的這個特點進行特別設計。"可靠組播"目前仍然處於研究階段。</p><p>沒有擁塞避免機制: 缺少TCP窗口機制和慢啟動機制，組播可能會出現擁塞。如果可能的話，組播應用程序應該嘗試檢測並避免擁塞。</p><p>報文重複: 某些組播協議的特殊機制（如Assert機制和SPT切換機制）可能會造成偶爾的數據包的重複。組播應用程序應該容忍這種現象。</p><p>報文失序 : 同樣組播協議有的時候會造成報文到達的次序錯亂，組播應用程序必須自己採用某種手段進行糾正（比如緩衝池機制等）。</p><p>組播實施的條件：</p><p>硬件設施：</p><p>1.組播服務器</p><p>2.支持組播分發的網絡</p><p>3.能接收組播流的客戶端</p><p>軟件技術：</p><p>1.必須存在組播地址</p><p>2.必須有多播路由協議的支持</p><p>3.客戶端必須能自由加入或離開多播組</p><p>預留常用的組播地址：</p><h1>Cisco</h1><p>ip multicast-routing</p><p>int e0/1</p><p>ip pim sparse-mode</p><p>int loo0</p><p>ip pim sparse-mode</p><p>ip pim bsr-candidate Loopback0ip pim rp-candidate Loopback0</p><h1>華為</h1><p>System-view</p><p>Sysname XXX</p><p>Dhcp enable(啟動DHCP服務)</p><p>Ip pool 1(配置地址池)</p><p>Network 10.1.1.0 mask 255.255.255.0(地址池範圍)</p><p>Dns-list 10.1.1.2 (DNS地址)</p><p>Gateway-list 10.1.1.1 (網關)</p><p>Excluded-ip-address 10.1.1.4(剔除地址)</p><p>Lease day 10 (租期)</p><p>Interface vlanif 10</p><p>Ip add 10.1.1.129 255.255.255.0</p><p>Dhcp select global</p><p>NTP（地址轉換）靜態 NAT ：這種 NAT 能夠在本地地址和全局地址之間進行一對一的映射。 NAT 時，必須為網絡中的每臺主機提供一個公有因特網 E 地址 。</p><p>動態 NAT： 它能夠將未註冊的 IP 地址映射到註冊 IP 地址池中的一個地址。不像使用靜態NAT 那樣，你無需靜態地配置路由器，使其將每個內部地址映射到一個外部地址，但必須有足夠的公有因特網 IP 地址，讓連接到因特網的主機都能夠同時發送和接收分組。NAT 重載這是最常用的 NAT 類型。</p><p>NAT 重載也是動態 NAT ，它利用源端口將多個非註冊IP 地址映射到一個註冊 IP 地址(多對一)。 那麼，宮的獨特之處何在呢?它也被稱為端口地址特換 (PAT)。通過使用 PAT (NAT 重載)，只需使用一個全局 1 地址，就可將數千名用戶連接到因特網，這是不是很酷?因特網 IP 地址之所以還未耗盡，真正的原因就在於使用了 NAT重載。</p><h1>Cisco</h1><p>靜態NAT:</p><p>ip nat inside source static 10.1.1.1 170.46.2.2interface EthernetXip address 10.1.1.10 255.255.255.0ip nat insideinterface SerialXip address 170.46.2.1 255.255.255.0i p nat outside</p><p>動態NAT：</p><p>ip nat pool todd 170.168.2.3 170.168.2.254netmask 255.255.255.0ip nat inside source 1ist 1 pool toddinterface Ethernet0</p><p>ip address 10.1.1.10 255.255.255.0ip nat insideinterface Serial0ip address 170.168.2.1 255.255.255.0ip nat outsideaccess-list 1 permit 10.1.1.0 0.0.0.255命令 ip nat inside source list 1 pool todd 讓路由器這樣做:將與 access-list 1 匹配的 IP 地址轉換為 IPNAT 地址池 todd 中的一個可用地址。在這裡，不同於出於安全考慮而過濾數據流，訪問控制列表並非用來禁止或允許數據流通過，而用於指定感興趣的數據流。如果數據流與訪問控制列表匹配(即為感興趣的數據流)，則將其交給 NAT 進程進行轉換。這是訪問控制列表的一種常見用途，訪問控制列表並非總是用於在接口處阻斷數據流。</p><p>NAT重載：</p><p>這個示例將演示如何配置內部全局地址重載，這是當今使用的典型 NATo 除非需要進行靜態映射(如映射到服務器 )，否則很少使用靜態 NAT 和動態 NAT。下面是一個 PAT 配置示例:ip nat pool globalnet 170.168.2.1 170.168.2.1 netmask 255.255.255.0ip nat inside source list 1 pool globalnet overloadinterface EthernetOjOip address 10.1.1.10 255.255.255.0ip nat insideinterface SerialOjOip address 170.168.2.1 255.255.255.0ip nat outsideaccess-list 1 permit 10.1.1.0 0.0.0.255相比於前面的動態 NAT 配置，該配置唯一不同的地方是，地址池只包含一個 IP 地址，且命令 ipnat inside source 末尾包含關鍵字 overload 。在這個示例中，注意到地址池只包含一個 IP 地址，它是外部接口的 E 地址。這適合只從 ISP 獲取一個 IP 地址的家庭或小型辦公室配置 NAT 重載。然而，如果有其他地址，如 170.168.2.2 ，也可使用它，這適合大型網絡，在這種環境中，可能有很多內部用戶需要同時訪問困特網，必須重載多個公有 IP 地址。</p><p>驗證：</p><p>Router#show ip nat translations查看 IPNAT 轉換條目時，可能看到很多包含同一個目標地址的轉換條目，這通常是由於有很多到同一臺服務器的連接。另外，還可使用命令 debug ip nat 來驗證 NAT 配置。在該命令的每個調試輸出行中，都包含發送地址、轉換條目和目標地址:Router#debug ip nat</p><h1>華為</h1></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>華為</a></li><li><a>交換機</a></li><li><a>常用命令</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1879a0b.html alt=華為交換機基本配置指令操作步驟 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1879a0b.html title=華為交換機基本配置指令操作步驟>華為交換機基本配置指令操作步驟</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b2e56fb8.html alt=華為交換機端口鏡像配置 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6e8e93c665714123a93e2d607f8ce26e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b2e56fb8.html title=華為交換機端口鏡像配置>華為交換機端口鏡像配置</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7716935e.html alt="華為 FreeBuds Pro 體驗" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/d875ba12de174368bd8d1546d44dc699 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7716935e.html title="華為 FreeBuds Pro 體驗">華為 FreeBuds Pro 體驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cd4cfe46.html alt=華為P40手機5200萬像素像素，能打敗小米1億像素鏡頭嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fc9919cf92c34784beed41e142f20503 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cd4cfe46.html title=華為P40手機5200萬像素像素，能打敗小米1億像素鏡頭嗎？>華為P40手機5200萬像素像素，能打敗小米1億像素鏡頭嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/51c6dcb7.html alt=經典分享：華為模擬集成電路設計講義 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ReTMiwsAymTebE style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/51c6dcb7.html title=經典分享：華為模擬集成電路設計講義>經典分享：華為模擬集成電路設計講義</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b690d039.html alt=「專利解密」“多穿一堵牆”——華為Wifi6+如何提升功率譜密度 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4ae57316ed024517a9bf8396c80de9f0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b690d039.html title=「專利解密」“多穿一堵牆”——華為Wifi6+如何提升功率譜密度>「專利解密」“多穿一堵牆”——華為Wifi6+如何提升功率譜密度</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2dc2b98b.html alt=和華為合作有望落地，股價又將翻倍的風華高科，要注意些什麼？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c3776da5ae4a453eacb21a7b4ac70cb3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2dc2b98b.html title=和華為合作有望落地，股價又將翻倍的風華高科，要注意些什麼？>和華為合作有望落地，股價又將翻倍的風華高科，要注意些什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d21477ec.html alt="Huawei/華為麥芒9新機發布，感覺很實在 參數配置指南" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/c28c82ca-8b9f-4b9a-bb4c-299630be7546 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d21477ec.html title="Huawei/華為麥芒9新機發布，感覺很實在 參數配置指南">Huawei/華為麥芒9新機發布，感覺很實在 參數配置指南</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ba7a4e76.html alt="華為P40系列旗艦影像實力的背後，XD Fusion圖像引擎功不可沒！" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0cf20266b951477cb87fdb5a7ce20f32 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ba7a4e76.html title="華為P40系列旗艦影像實力的背後，XD Fusion圖像引擎功不可沒！">華為P40系列旗艦影像實力的背後，XD Fusion圖像引擎功不可沒！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c6b2a07d.html alt=華為Phoenix引擎：定義圖形之美 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0999d0958a034618a5ebb844544e3c5b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c6b2a07d.html title=華為Phoenix引擎：定義圖形之美>華為Phoenix引擎：定義圖形之美</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9856fe2d.html alt=華為推進CloudOptiX技術創新，引領全光網新時代 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15299385055354e5a2775aa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9856fe2d.html title=華為推進CloudOptiX技術創新，引領全光網新時代>華為推進CloudOptiX技術創新，引領全光網新時代</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fed0e97d.html alt=華為、騰訊、阿里被評亞洲品牌前10強；聯通電信將聯手共建5G網絡 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f254f371b68a426eb3b1dadaa6992676 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fed0e97d.html title=華為、騰訊、阿里被評亞洲品牌前10強；聯通電信將聯手共建5G網絡>華為、騰訊、阿里被評亞洲品牌前10強；聯通電信將聯手共建5G網絡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3f613aa4.html alt=再次確認！華為Mate40或將採用雙處理器，麒麟1020供貨數量曝光 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e9406472c66b47699bc63e74bfbfcf65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3f613aa4.html title=再次確認！華為Mate40或將採用雙處理器，麒麟1020供貨數量曝光>再次確認！華為Mate40或將採用雙處理器，麒麟1020供貨數量曝光</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2c87dfe4.html alt=效仿三星？華為Mate40或採用雙處理器，國行版5nm麒麟心不變 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/276067e9f547421bbc8b038cc31c2b4c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2c87dfe4.html title=效仿三星？華為Mate40或採用雙處理器，國行版5nm麒麟心不變>效仿三星？華為Mate40或採用雙處理器，國行版5nm麒麟心不變</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c84bbce6.html alt=海思芯片被加碼制裁，華為Mate40或用雙處理器，國行搭載麒麟1020 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/76e9a6e897dc44658958306ae732e34f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c84bbce6.html title=海思芯片被加碼制裁，華為Mate40或用雙處理器，國行搭載麒麟1020>海思芯片被加碼制裁，華為Mate40或用雙處理器，國行搭載麒麟1020</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>