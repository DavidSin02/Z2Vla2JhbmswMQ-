<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法 | 极客快訊</title><meta property="og:title" content="基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8b32378fa21b4789ac4af3aeb065d579"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ac3bf48.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ac3bf48.html><meta property="article:published_time" content="2020-10-29T21:07:00+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:00+08:00"><meta name=Keywords content><meta name=description content="基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/ac3bf48.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>所謂手自動勿擾S7-200 SMART PLC切換，是指在將PID迴路從手動模式切換到自動模式，或者是自動模式切換的手動模式時，PID輸出不會發生跳變，也就是不會產生任何波動。本文闡述內容主要以中的PID功能為實例。</p><p>一、PID 自動/手動調節的無擾動切換</p><p>有些工程項目中可能需要根據工藝要求在不同的時刻投入、或者退出 PID 自動控制；退出 PID 自動控制時，控制器的輸出部分可以由操作人員直接手動控制。這就是所謂的 PID 手動/自動切換。</p><p>PID 控制處於自動方式時，PID 控制器（以S7-200 SMART 中的 PID 調節為例）會按照 PID 算法，自動通過輸出的作用使過程反饋值跟隨給定值變化，並保持穩定。這是一個自動的閉環控制系統。操作人員可以根據現場工藝的要求，改變給定（即設定值）的值。</p><p>PID 控制處於手動方式時，PID 控制器不再起自動計算的作用。這時，控制迴路的輸出是由操作人員手動控制、調整，由操作人員觀察現場的控制效果，從而構成人工閉環控制。</p><p>所謂 PID 自動/手動控制，就是看控制系統的輸出是由 PID 控制器自動控制，還是由操作人員手動控制。</p><p>有些控制系統的執行機構不能承受較大的衝擊，這就要求在進行 PID 自動/手動切換時，保持控制輸出的穩定。這就是要求無擾動切換。為了達到 PID 自動/手動控制的無擾動切換，需要在編程時注意一些相關事項。下面分別就直接使用 PID 指令編程，和使用 PID 嚮導編程兩種情況作一介紹。</p><p>二、直接使用 PID 指令編程時的 PID 自動/手動無擾切換</p><p>直接使用 PID 指令塊編寫 PID 控制程序時，可以簡單地使用“調用/不調用”指令的方式控制自動/手動模式。因為 PID 指令本身已經具有實現無擾動切換的能力，此時在 PID 指令控制環節之外編程沒有多大必要。</p><p>PID 指令的 EN 輸入端使能（為“1”）時，我們認為是自動控制模式；EN 輸入端未使能（為“0”）時，我們認為是手動控制模式。PID 指令本身有一個“能流歷史狀態位”，以記錄指令的狀態切換。在 EN 端從“0”變為”“1”時，PID 指令認為這是從“手動”模式向“自動”模式切換。PID 指令此時會自動執行一系列動作，以配合無擾動切換：</p><ul class=list-paddingleft-2><li>使設定值（ SPn） = 當前過程反饋變量（PVn）</li><li>設置上次採樣過程變量（PVn-1） = 當前過程反饋變量（PVn）</li><li>設置積分偏差和（或所謂積分前項）（Mx） = 當前輸出值（Mn）</li></ul><p>使設定值等於當前反饋值可以避免出現偏差，使之不存在調整的要求；當然如果有工藝要求，也可以後續調整設定值。其他的動作都是為了使 PID 在後續的操作中不改變輸出的值。</p><p>在編程時要注意：</p><ul class=list-paddingleft-2><li>從自動模式向手動模式切換時，PID 指令的 EN 端不再有能流，計算停止，輸出值 Mn 不再變化。此時如果需要操作人員人工觀察控制的結果，手動控制輸出量，就可以通過用戶程序直接改變回路表中的輸出值存儲單元內容（見數據塊或系統手冊的相關部分內容）。如果有必要，操作人員的操作可能要進行一些標準化換算。</li><li>為保證從手動模式向自動模式的切換無擾動，需要在手動控制時，或在切換過程中，禁止對 PID 迴路表中設定值的更新，以便切換時 PID 指令用當前過程反饋值替代設定值。切換完成後，操作人員可以調整設定值。</li></ul><p>三、使用 PID 嚮導編程時的 PID 自動/手動無擾切換</p><p>使用 PID 指令嚮導編程時，指令嚮導會自動調用 PID 指令，並且編寫外圍的控制變量標準化換算、定時採樣等功能。用戶在使用 PID 指令嚮導時，需要在用戶程序中用 SM0.0 調用指令嚮導生成的子程序（如 PIDx_CTRL 子程序）。PID 嚮導可以生成帶自動/手動切換功能的子程序，這個子程序使用一個數字量點為“1”、“0”的狀態來控制是否投入 PID 自動控制。</p><p>到目前為止（STEP 7-Micro/WIN SMART），使用 PID 嚮導生成的子程序時，由於用戶程序不能直接使用 PID 指令，它的無擾切換能力因為隔了外殼子程序，所以受到了侷限。如果對無擾切換要求比較嚴格，需要另外編一些程序加以處理。但在高級一點的PLC中，無擾動切換功能只需打個勾即可。對於SMART來說則不能這麼簡單了。</p><p>S7-200SMART中，考察如下 PID 控制子程序：</p><div class=pgc-img><img alt="基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8b32378fa21b4789ac4af3aeb065d579><p class=pgc-img-caption></p></div><p>圖 1. PID 嚮導生成的指令</p><p>圖中：a、過程反饋量 ；b、設定值，實數 ；c、自動/手動控制，“1”=自動，“0”=手動 ；d、手動控制輸出值，0.0 - 1.0 之間的一個實數；e、PID 控制輸出值。</p><p>要實現無擾動切換，必須：</p><ul class=list-paddingleft-2><li>在從自動向手動切換時，使手動輸出值（VD2004）等於當前的實際控制輸出值；</li><li>在從手動向自動切換時，使設定值相當於當前的過程反饋值。</li></ul><p>為此，可編寫類似下圖所示的程序，放在 PID 控制子程序之前：</p><div class=pgc-img><img alt="基於西門子S7-200 SMART PLC的PID無擾動手動-自動切換方法" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/839050d2908441b787ef693ea074a839><p class=pgc-img-caption></p></div><p>圖 2. 無擾切換處理程序</p><p>圖中：</p><p>a、自動/手動切換控制點 ；</p><p>b、從自動向手動切換時，使手動輸出值等於實際當前值 ；</p><p>c、從手動向自動切換時，把當前反饋量換算為相應的給定值 。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>西門子</a></li><li><a>S7</a></li><li><a>200</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/ec066a0.html alt="深入剖析西門子 S7-200 PLC的常用數據存儲區" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6a86e8c2577e4f30a19c800f9ed5fb9f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ec066a0.html title="深入剖析西門子 S7-200 PLC的常用數據存儲區">深入剖析西門子 S7-200 PLC的常用數據存儲區</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/42e6c061.html alt="S7-200 SMART模擬量模塊常問問題彙總" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/935e8a72b6e24084a8eb0c06e5aec51f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/42e6c061.html title="S7-200 SMART模擬量模塊常問問題彙總">S7-200 SMART模擬量模塊常問問題彙總</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea62b7ce.html alt=西門子S7-300下載後停機了？怎麼找故障？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1536064859530d698e386b0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea62b7ce.html title=西門子S7-300下載後停機了？怎麼找故障？>西門子S7-300下載後停機了？怎麼找故障？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9e7b9f23.html alt="西門子S7-1500 PLC的基本數據類型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b66e147b6b5447c5b208c67bd24adad7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9e7b9f23.html title="西門子S7-1500 PLC的基本數據類型">西門子S7-1500 PLC的基本數據類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/37260344.html alt="西門子S7-200SMART PLC 循環走馬燈如何編寫？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/4ff65441e7ce47d19a3373f98cc10d82 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37260344.html title="西門子S7-200SMART PLC 循環走馬燈如何編寫？">西門子S7-200SMART PLC 循環走馬燈如何編寫？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/407d4a4f.html alt=西門子S7-300利用循環左移指令實現自復位按鈕一鍵啟停 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/37d30003bef90889115a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/407d4a4f.html title=西門子S7-300利用循環左移指令實現自復位按鈕一鍵啟停>西門子S7-300利用循環左移指令實現自復位按鈕一鍵啟停</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38866f8c.html alt=西門子S7-1200，如何在FB塊中使用操作定時器？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1fcd95c6bb184bc2925a32c27fd70940 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38866f8c.html title=西門子S7-1200，如何在FB塊中使用操作定時器？>西門子S7-1200，如何在FB塊中使用操作定時器？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/77aec7af.html alt="西門子S7-300PLC 通過SM331模塊對熱電偶進行採集設置" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1540180249572cd69d4211b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/77aec7af.html title="西門子S7-300PLC 通過SM331模塊對熱電偶進行採集設置">西門子S7-300PLC 通過SM331模塊對熱電偶進行採集設置</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/8b650f91.html alt="S7-200 SMART通過MODBUS庫與稱重儀表通訊" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/e380b52fb591423ba3ecea97aa81fb97 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/8b650f91.html title="S7-200 SMART通過MODBUS庫與稱重儀表通訊">S7-200 SMART通過MODBUS庫與稱重儀表通訊</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/875eec94.html alt=西門子S7-1500MODBUS通訊知識一文總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/29c72b89f7f2466cb90f74a0b2577ca7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/875eec94.html title=西門子S7-1500MODBUS通訊知識一文總結>西門子S7-1500MODBUS通訊知識一文總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/04adffdc.html alt=可編程控制器（西門子S7-300）的通訊網絡介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7cd9f5d6efe64d1e8874dc4335547a6c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/04adffdc.html title=可編程控制器（西門子S7-300）的通訊網絡介紹>可編程控制器（西門子S7-300）的通訊網絡介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb99bd5e.html alt=西門子S7-200SMART通過PROFINET連接V90實現速度控制的方案1 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4d14be560a9c483f8fe422baffa881f4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb99bd5e.html title=西門子S7-200SMART通過PROFINET連接V90實現速度控制的方案1>西門子S7-200SMART通過PROFINET連接V90實現速度控制的方案1</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48560d50.html alt="西門子S7-300（Step7 v5.5軟件）仿真器PLCSIM_V54_SP5安裝說明" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15401773108505523528a33 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48560d50.html title="西門子S7-300（Step7 v5.5軟件）仿真器PLCSIM_V54_SP5安裝說明">西門子S7-300（Step7 v5.5軟件）仿真器PLCSIM_V54_SP5安裝說明</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/72f9408c.html alt=入門西門子S7-200PLC，工程師詳細解析包裝秤編程控制程序案例 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/154028213168186ae00708b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/72f9408c.html title=入門西門子S7-200PLC，工程師詳細解析包裝秤編程控制程序案例>入門西門子S7-200PLC，工程師詳細解析包裝秤編程控制程序案例</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d9462d.html alt="西門子S7-300 PLC 的50個經典問題，都懂了你就是專家" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9bebd2b74bd24c6a9eb04f29184c6d4a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d9462d.html title="西門子S7-300 PLC 的50個經典問題，都懂了你就是專家">西門子S7-300 PLC 的50個經典問題，都懂了你就是專家</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>