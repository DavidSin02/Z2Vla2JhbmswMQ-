<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>003 IP網絡技術基礎，一文了解清楚 | 极客快訊</title><meta property="og:title" content="003 IP網絡技術基礎，一文了解清楚 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/afc8df19.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/afc8df19.html><meta property="article:published_time" content="2020-10-29T21:11:47+08:00"><meta property="article:modified_time" content="2020-10-29T21:11:47+08:00"><meta name=Keywords content><meta name=description content="003 IP網絡技術基礎，一文了解清楚"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/afc8df19.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>003 IP網絡技術基礎，一文了解清楚</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>文章目錄</p><p>一、以太網（Ethernet）</p><p>以太網概述</p><p>以太網幀格式</p><p>DIX Ethernet V2幀格式</p><p>802.3 幀格式</p><p>以太網分類</p><p>標準以太網</p><p>快速以太網</p><p>千兆以太網</p><p>萬兆以太網</p><p>二、常用網絡通信設備</p><p>互聯網（Internet）概述</p><p>交換機</p><p>集線器（HUB）</p><p>中繼器（Repeater）</p><p>路由器（Router）</p><p>典型IP城域網拓撲</p><p>寬帶接入服務器（BAS）</p><p>數字用戶線路接入複用器（DSLAM）</p><p>光通信網絡組網結構</p><p>光線路終端（OLT）</p><p>光網絡單元（ONU）</p><p>家庭網關（HomeGate）</p><p>三、關鍵網絡技術</p><p>接入網技術 － ADSL</p><p>接入網技術 －無源光網絡（PON）</p><p>接入網技術 － EPON/GPON</p><p>虛擬局域網（VLAN）</p><p>四、IP網絡體系結構</p><p>網絡體系結構的概述</p><p>OSI參考模型</p><p>TCP/IP協議</p><p>五、IP網絡通信過程及網絡協議</p><p>HTTP協議</p><p>DNS協議</p><p>傳輸層協議：TCP</p><p>UDP協議</p><p>TCP和UDP協議之間的比較</p><p>IP協議</p><p>DHCP協議</p><p>ICMP協議</p><p>ARP和RARP</p><div class=tt-column-card data-content='{"new_thumb_url": "http://sf1-ttcdn-tos.pstatp.com/img/pgc-image/1560586841545084195efb3", "title": "\u5f31\u7535\u9ad8\u7aef\u65b9\u6848\u62a5\u4ef7\u53ca\u8d44\u6599\u6574\u7406", "distribution_user_id": 5452532311, "price": 59, "column_id": "6702670369758642439", "author_description": "\u5f31\u7535", "share_price": 4.72, "thumb_url": "http://p6.pstatp.com/large/pgc-image/1560586841545084195efb3", "sold": 204}'><p class=column-placeholder></p></div><p>一、以太網（Ethernet）</p><p>以太網概述</p><p>以太網（Ethernet）是由Xerox（施樂）公司開發的一種基帶局域網技術，是當今現有局域網採用的最通用的通信協議標準。</p><p>共享式以太網（即用HUB連接的局域網）採用帶衝突檢測的載波幀聽多路訪問（CSMA/CD）機制。</p><p>以太網中節點都可以看到在網絡中發送的所有信息，因此，我們說以太網是一種廣播網絡。</p><p>在新近的網絡設計時一般採用物理上是星型結構，邏輯上是總線結構。</p><p>以太網幀格式</p><p>以太網出現兩種MAC幀結構：</p><p>一種是以太網DIX V2標準定義的幀結構；</p><p>一種是IEEE802.3標準定義的MAC幀結構。</p><p>DIX V2 標準與 IEEE 的 802.3 標準只有很小的差別，通常可以將 802.3 局域網簡稱為“以太網”。</p><p>DIX Ethernet V2幀格式</p><p>引導碼為 1 和 0 交替的64比特，其最後兩位是 “11”，可以通知目標站作好接收準備。</p><p>類型字段說( 正如端口號 )用於指定接收數據的高層協議。</p><p>數據字段 至少 46 字節，但不超過 1500 字節。</p><p>如果數據大於 1500 字節, 該幀有錯，被視為超長幀 ( Jabber)。</p><p>如果數據小於 46 字節，則必須加填充字節( pad )，或被視為超短幀 (runt )。</p><p>FSC是指幀校驗序列。</p><p>802.3 幀格式</p><p>IEEE 802.3幀的前導碼佔用7個字節，緊隨其後的是長度為1個字節的幀首定界符，表示一幀實際開始。</p><p>源地址，目的地址，FCS字段與 Ethernet 的定義相同。</p><p>類型字段則由長度字段替代，在該字段後是數據的字節數。</p><p>需要額外的字段來規定上一層的協議。此字段定義為目的地服務訪問點 (DSAP)、 源服務訪問點 (SSAP)。</p><p>控制字段 (CTRL) 對LAN 並不附任何功能。</p><p>以太網分類</p><p>IEEE802.3規定了包括物理層的連線、電信號和介質訪問層協議的內容，以太網是當前應用最普遍的局域網技術，它很大程度上取代了其他局域網標準。如令牌環、FDDI和ARCNET。</p><p>以太網包括：</p><p>標準以太網（10Mbit/s)</p><p>快速以太網（100Mbit/s）</p><p>千兆以太網（1000Mbit/s）</p><p>10G（10Gbit/s）以太網</p><p>標準以太網</p><p>快速、可靠、低廉、易於安裝維護</p><p>使用粗同軸電纜、細同軸電纜、非屏蔽雙絞線、屏蔽雙絞線和光纖等多種傳輸介質進行連接</p><p>傳輸速率是10Mbps，不同傳輸介質支持的最大網段長度不一樣</p><p>快速以太網</p><p>快速、可靠、低廉、易於安裝維護</p><p>支持3、4、5類雙絞線以及光纖的連接，支持全/半雙工工作方式</p><p>傳輸速率是100Mpbs，在使用單模光纖為傳輸介質時，最大通信距離能達到3000米</p><p>千兆以太網</p><p>快速、可靠、低廉、易於安裝維護</p><p>採用了與10M以太網相同的幀格式、幀結構、網絡協議、全/半雙工工作方式、流控模式以及佈線系統</p><p>千兆以太網技術有兩個標準：IEEE802.3z和IEEE802.3ab。IEEE802.3z制定了光纖和短程銅線連接方案的標準。IEEE802.3ab制定了五類雙絞線上較長距離連接方案的標準。</p><p>傳輸速率是1000Mpbs</p><p>萬兆以太網</p><p>以全雙工方式連接到網絡交換器等網絡設備，並不支持半雙工模式與CSMA/CD</p><p>只能在光纖上傳輸，傳輸速率是10GMbps</p><p>二、常用網絡通信設備</p><p>互聯網（Internet）概述</p><p>隨著微型計算機的廣泛應用，大量的微型計算機是通過局域網連入廣域網，而局域網與廣域網、廣域網與廣域網的互連是通過路由器實現的；</p><p>在Internet中，用戶計算機需要通過校園網、企業網或ISP聯入地區主幹網，地區主幹網通過國家主幹網聯入國家間的高速主幹網，這樣就形成一種由路由器互聯的大型、層次結構的互聯網絡。</p><p>交換機</p><p>交換機(英文：Switch，意為“開關”)是一種用於電（光）信號轉發的網絡設備。它工作在數據鏈路層，可以為接入交換機的任意兩個網絡節點提供獨享的電信號通路。</p><p>交換機在同一時刻可進行多個端口對之間的數據傳輸。每一端口都可視為獨立的物理網段（注：非IP網段），連接在其上的網絡設備獨自享有全部的帶寬，無須同其他設備競爭使用</p><p>交換機的三個主要功能：</p><p>學習：以太網交換機瞭解每一端口相連設備的MAC地址，並將地址同相應的端口映射起來存放在交換機緩存中的MAC地址表中。</p><p>轉發/過濾：當一個數據幀的目的地址在MAC地址表中有映射時，它被轉發到連接目的節點的端口而不是所有端口（如該數據幀為廣播/組播幀則轉發至所有端口）。</p><p>消除迴路：當交換機包括一個冗餘迴路時，以太網交換機通過生成樹協議避免迴路的產生，同時允許存在後備路徑。</p><p>集線器（HUB）</p><p>集線器，英文稱為“Hub”。</p><p>HUB是一個多端口的轉發器，當以HUB為中心設備時，網絡中某條線路產生了故障，並不影響其它線路的工作。所以HUB在局域網中得到了廣泛的應用。</p><p>集線器的主要功能是對接收到的信號進行再生整形放大，以擴大網絡的傳輸距離，同時把所有節點集中在以它為中心的節點上。</p><p>Hub屬於純硬件網絡底層設備，基本上不具有類似於交換機的"智能記憶"能力和"學習"能力。它也不具備交換機所具有的MAC地址表，所以它發送數據時都是沒有針對性的，而是採用廣播方式發送。</p><p>中繼器（Repeater）</p><p>中繼器（Repeater）工作於OSI的物理層，是局域網上所有節點的中心，它的作用是放大信號，補償信號衰減，支持遠距離的通信。</p><p>實際上，通過中繼器連接起來的網絡相當於同一條電線組成的更大的網絡。</p><p>中繼器也能把不同傳輸介質的網絡連在一起，多用在數據鏈路層以上相同的局域網的互連中。</p><p>路由器（Router）</p><p>路由器（Router），是互聯網絡的重要設備之一，工作在網絡層，路由器最基本的功能是轉發數據包。</p><p>在同個路由器實現的互聯網絡中，路由器要對數據包進行檢測，判斷其中所含的目的地址，若數據包不是發向本地網絡的某個節點，路由器就要轉發該數據包，並決定轉發到哪一個目的地址（可能是路由器，也可能是最終目的節點）以及從哪個網絡接口轉發出去。</p><p>路由器的功能：</p><p>隔絕廣播，劃分廣播域</p><p>通過路由選擇算法決定最優路徑</p><p>轉發基於三層目的地址的數據包</p><p>典型IP城域網拓撲</p><p>寬帶接入服務器（BAS）</p><p>BAS 全稱：Broadband Access Server/ Broadband Remote Access Server)</p><p>BAS是一種設置在網絡匯聚層的用戶接入服務設備，可以智能化地實現用戶的匯聚、認證、計費等服務</p><p>BAS還可以根據用戶的需要，方便地提供多種IP增值業</p><p>BRAS</p><p>數字用戶線路接入複用器（DSLAM）</p><p>DSLAM是Digital Subscriber Line Access Multiplexer的簡稱，即數字用戶線路接入複用器。</p><p>DSLAM是各種DSL系統的局端設備，屬於最後一公里接入設備（the last mile）</p><p>其功能是接納所有的DSL線路，匯聚流量，相當於一個二層交換機。</p><p>光通信網絡組網結構</p><p>光線路終端（OLT）</p><p>OLT: optical line terminal(光線路終端），用於連接光纖幹線的終端設備</p><p>向ONU(光網絡單元）以廣播方式發送以太網數據；</p><p>發起並控制測距過程，並記錄測距信息；</p><p>OLT除了提供業務匯聚的功能外，還是集中網絡管理平臺。</p><p>在OLT上可以實現基於設備的網元管理和基於業務的安全管理和配置管理。</p><p>不僅可以監測、管理設備及端口，還可以進行業務開通和用戶狀態監測，而且還能夠針對不同用戶的QoS/SLA要求進行帶寬分配。</p><p>光網絡單元（ONU）</p><p>ONU (Optical Network Unit) 光網絡單元，ONU分為有源光網絡單元和無源光網元單元</p><p>選擇接收OLT發送的廣播數據；</p><p>響應OLT發出的測距及功率控制命令；並作相應的調整；</p><p>對用戶的以太網數據進行緩存，並在OLT分配的發送窗口中向上行方向發送；</p><p>家庭網關（HomeGate）</p><p>一個在家庭內的網絡化信息設備與智能寬帶接入網之間的智能化網關，將家庭外部的接入網絡和家庭內部網絡聯繫起來。</p><p>作為所有外部接入網連接到家庭內部，同時將家庭內部網絡連接到外部的一種物理接口；</p><p>使住宅用戶可以獲得各種家庭服務（包括現有的服務和未來可能出現的服務）的平臺。</p><p>三、關鍵網絡技術</p><p>接入網技術 － ADSL</p><p>ADSL屬於DSL技術的一種，全稱Asymmetric Digital Subscriber Line（ 非對稱數字用戶線路），亦可稱作非對稱數字用戶環路,提供的上行和下行帶寬不對稱.</p><p>ADSL技術採用頻分複用技術把普通的電話線分成了電話、上行和下行三個相對獨立的信道，從而避免了相互之間的干擾。用戶可以邊打電話邊上網，不用擔心上網速率和通話質量下降的情況。</p><p>接入網技術 －無源光網絡（PON）</p><p>Passive Optical Network無源光網絡。目前PON是實現FTTB/FTTH的主要技術。</p><p>PON是一種採用點到多點（P2MP）結構的單纖雙向光接入網絡。PON系統由局端的光線路終端（OLT）、光分配網絡（ODN）和用戶側的光網絡單元（ONU）組成，為單纖雙向系統。在下行方向（OLT到ONU），OLT發送的信號通過ODN到達各個ONU。在上行方向（ONU到OLT），ONU發送的信號只會到達OLT，而不會到達其他ONU。為了避免數據衝突並提高網絡效率，上行方向採用TDMA多址接入方式，並對各ONU的數據發送進行管理。ODN在OLT和ONU間提供光通道。</p><p>接入網技術 － EPON/GPON</p><p>Ethernet Passive Optical Network，以太網無源光網絡，EPON是基於以太網技術的寬帶接入系統，它利用PON的拓撲結構實現以太網的接入。它採用點到多點結構、無源光纖傳輸，在以太網之上提供多種業務。EPON不僅能綜合現有的有線電視、數據和語音業務，還能兼容未來業務如數字電視、VoIP、電視會議和VOD等，實現綜合業務接入。</p><p>GPON(Gigabit-Capable PON) 技術是基於ITU-TG.984.x標準的最新一代寬帶無源光綜合接入標準，具有高帶寬，高效率，大覆蓋範圍，用戶接口豐富等眾多優點，被大多數運營商視為實現接入網業務寬帶化，綜合化改造的理想技術。</p><p>虛擬局域網（VLAN）</p><p>在計算機網絡中，一個二層網絡可以被劃分為多個不同的廣播域，一個廣播域對應了一個特定的用戶組，默認情況下這些不同的廣播域是相互隔離的。不同的廣播域之間想要通信，需要通過一個或多個路由器。這樣的一個廣播域就稱為VLAN。</p><p>虛擬局域網（VLAN）中設備和用戶並不受物理位置的限制，可以根據功能、部門及應用等因素將它們組織起來，相互之間的通信就好像它們在同一個網段中一樣</p><p>與傳統的局域網技術相比較，VLAN技術更加靈活，它具有以下優點： 網絡設備的移動、添加和修改的管理開銷減少；可以控制廣播活動；可提高網絡的安全性。</p><p>四、IP網絡體系結構</p><p>網絡體系結構的概述</p><p>網絡協議的概念</p><p>計算機網絡中為進行數據傳輸而建立的一系列規則、標準或約定稱為網絡協議（Protocol）。</p><p>網絡層次的概念</p><p>不同系統中的實體的通信任務十分複雜，相互間不可能作為一個整體來處理，否則任何一方的改變，就要修改整個軟件包。</p><p>層次結構使用結構化的設計和實現技術，即把協議按功能分為若干層次，每層完成一定的功能（同層協議），並對其上層提供支持（接口）。</p><p>由於通信功能是分層實現的，因而進行通信的兩個系統就必須具有相同的層次結構，兩個不同系統上的相同層稱為同等層或對等層。</p><p>計算機網絡採用層次化結構的優越性</p><p>各層之間相互獨立。</p><p>靈活性好。</p><p>易於實現和維護。</p><p>有利於網絡標準化。</p><p>OSI參考模型</p><p>國際標準化組織 (ISO，international standards organization）和一些科研機構、大的網絡公司做了大量的工作，在1983年提出了開放式系統互連參考模型（ISO/OSI RM，international standards organization/open system interconnect reference model）。</p><p>OSI參考模型將整個網絡通信的功能劃分為7個層次，由底層到高層分別是物理層、鏈路層、網絡層、傳輸層、會話層、表示層和應用層。</p><p>每層完成一定的功能，都直接為其上層提供服務，並且所有層次都互相支持。</p><p>第4層到第7層主要負責互操作性，而1～3層則用於創造兩個網絡設備間的物理連接。</p><p>OSI七層參考模型層次劃分</p><p>物理層:規定了通信連接端口與傳輸媒體的物理和電氣特性，比特數據的同步和傳輸方式。</p><p>數據鏈路層：負責建立和管理節點間的鏈路，通過各種控制協議，將有差錯的物理信道變為無差錯的、能可靠傳輸數據幀的數據鏈路。。</p><p>網絡層：控制數據鏈路層與傳輸層之間的信息轉發，建立、維持和終止網絡的連接。</p><p>傳輸層：向用戶提供可靠的端到端的差錯和流量控制，保證報文的正確傳輸。</p><p>會話層：負責建立、管理和終止表示層實體之間的通信會話。該層的通信由不同設備中的應用程序之間的服務請求和響應組成。</p><p>表示層：提供各種用於應用層數據的編碼和轉換功能，確保一個系統的應用層發送的數據能被另一個系統的應用層識別。</p><p>應用層：OSI參考模型中最靠近用戶的一層，為應用程序提供網絡服務。</p><p>計算機網絡從邏輯上可以劃分為通信子網和資源子網。</p><p>從功能的角度看，OSI參考模型的下四層（物理層、數據鏈路層、網絡層、傳輸層）主要提供電信傳輸功能，以節點到節點之間的通信為主；</p><p>上三層（會話層、表示層、應用層）則以提供使用者與應用程序之間的處理功能為主。</p><p>即下四層屬於通信功能（通信子網），上三層屬於處理功能（資源子網）。</p><p>TCP/IP協議</p><p>TCP/IP協議是目前最流行的商業化網絡協議，儘管它不是某一標準化組織提出的正式標準，但它已經被公認為目前的工業標準或“事實標準”。因特網之所以能迅速發展，就是因為TCP/IP協議能夠適應和滿足世界範圍內數據通信的需要。</p><p>TCP/IP協議具有以下幾個特點。</p><p>（1）開放的協議標準，可以免費使用，並且獨立於特定的計算機硬件與操作系統。</p><p>（2）獨立於特定的網絡硬件，可以運行在局域網、廣域網，以及互聯網中。</p><p>（3）統一的網絡地址分配方案，使得整個TCP/IP設備在網中都有惟一的地址。</p><p>（4）標準化的高層協議，可以提供多種可靠的用戶服務。</p><p>TCP/IP參考模型</p><p>與ISO/OSI參考模型不同，TCP/IP體系結構將網絡劃分為應用層、傳輸層、互聯層、和網絡接口層4層。</p><p>TCP/IP的分層體系結構與ISO/OSI參考模型有一定的對應關係</p><p>TCP/IP體系結構中各層的功能</p><p>網絡接口層：網絡接入層與OSI參考模型中的物理層和數據鏈路層相對應。它負責監視數據在主機和網絡之間的交換。事實上，TCP/IP本身並未定義該層的協議，而由參與互連的各網絡使用自己的物理層和數據鏈路層協議，然後與TCP/IP的網絡接入層進行連接。地址解析協議（ARP）工作在此層，即OSI參考模型的數據鏈路層。</p><p>互聯層：網際互聯層對應於OSI參考模型的網絡層，主要解決主機到主機的通信問題。它所包含的協議設計數據包在整個網絡上的邏輯傳輸。注重重新賦予主機一個IP地址來完成對主機的尋址，它還負責數據包在多種網絡中的路由。該層有三個主要協議：網際協議（IP）、互聯網組管理協議（IGMP）和互聯網控制報文協議（ICMP）。</p><p>傳輸層:傳輸層對應於OSI參考模型的傳輸層，為應用層實體提供端到端的通信功能，保證了數據包的順序傳送及數據的完整性。該層定義了兩個主要的協議：傳輸控制協議（TCP）和用戶數據報協議（UDP)。</p><p>應用層：應用層對應於OSI參考模型的高層，為用戶提供所需要的各種服務，例如：HTTP、FTP、Telnet、DNS、SMTP等</p><p>五、IP網絡通信過程及網絡協議</p><p>在網絡中，數據都是從源端發出，經過網絡傳達到目的端。若主機A要與主機B的交換數據，交換過程如圖所示。</p><p>網絡中兩臺主機的網絡協議流程</p><p>1.主機A在應用層的操作</p><p>主機A啟用一個網絡應用時，A自動打開本機上的一個大於1024的端口（動態端口），做為訪問網絡服務的源端口。目的端口根據主機A申請的網絡服務而定，為保留端口。</p><p>主機A的應用程序將發送的數據表示為網絡上通用的格式。（OSI表示層功能）</p><p>TCP/IP的應用層為每一個具有源端口與目的端口的數據流建立一個單一的會話。即使訪問同一網絡服務，源端口是不同的。如同時訪問HTTP（不同網頁）。</p><p>HTTP協議</p><p>超文本傳輸協議（ HyperText Transfer Protocol）</p><p>傳輸互連網Web數據的協議</p><p>運行在TCP之上——HTTP 的知名端口是 80</p><p>HTTP 是傳送頁面內容的協議</p><p>頁面的格式是由HTML代碼組成的</p><p>HTTP協議流程</p><p>DNS協議</p><p>DNS（Domain Name System），計算機域名系統</p><p>將主機名和IP地址對應起來的一種機制</p><p>通常情況下 DNS 運行在 UDP 之上——DNS 的知名端口是 53</p><p>DNS 使用 TCP 來進行域名傳送</p><p>DNS 查詢示例</p><p>2.主機A在傳輸層的操作</p><p>傳輸層在傳輸數據前將數據分段，每個分段稱為Segment。</p><p>主機A在傳輸層為數據分段添加控制信息，TCP或UDP頭。主要是源端口、目的端口和順序號。源端口和目的端口表示數據是由哪個協議或應用程序發出的，送到哪個應用程序及協議。順序號是該數據段在整個數據流中的位置。</p><p>傳輸層協議：TCP</p><p>Transmission Control Protocol，傳輸控制協議，是第 4 層面向連接的協議。</p><p>TCP 提供下列可靠流的功能：</p><p>— 在網絡端點間的數據可靠，透明傳送。</p><p>— 端到端差錯檢測和恢復以及數據流控制。</p><p>— 用戶數據和高層協議的分段和重組。</p><p>TCP三次握手（Three -Way Handshake）</p><p>為建立連接,TCP使用三次握手 。</p><p>確保雙方準備好傳送數據。</p><p>也使雙方明確其初始序列號。</p><p>三次握手為的是雙方準確的同步。</p><p>“握手”期間能發數據，但必須保持該數據，直到握手完畢。</p><p>TCP協議封裝過程</p><p>TCP包頭結構</p><p>每個 TCP 段可分為標題 ( 首部、或頭標 ) 和後隨的數據兩部分</p><p>源端口和宿端口 (Source and Destination ports)識別連接的每一端的應用。</p><p>序列號 (Sequence Number) 可識別數據字段中的字節流位置。</p><p>應答號 (Ack Number )可視為源端已收到最高字節的位置。</p><p>偏移量 ( Offset )是該段的數據位置 (任選字段為可變長 )</p><p>UDP協議</p><p>User Datagram Protocol，用戶數據報協議</p><p>UDP 是無連接、不可靠的第 4 層協議。</p><p>UDP 消息也許會丟失、重複 或無序到達。</p><p>由於無流量控制，消息到達對方比有流控的來得快。</p><p>就象 IP那樣， 從一個設備到另一個設備運載 UDP 消息 。</p><p>正如TCP為上層協議那樣，UDP 使用相同的端口號機制 。</p><p>UDP協議的數據包頭格式</p><p>–宿端口(Destination port)指明該數據報直接對應的上層協議。</p><p>–源端口(Source port ) 是任選的 (若不用，則為 0 ) ，並記為數據報的源端口。</p><p>–長度 (Length )是以包括首部在內的八位組( octets )計。</p><p>–校驗和 (Checksum)是任選的 (若不用，則為 0 ) ，並且端口號不用。</p><p>----帶有UDP的IP數據報獲取 IP 地址，則需計算。</p><p>----如果校驗和是正確的，則無錯到達的消息和端口也是正確的。</p><p>TCP和UDP協議之間的比較</p><p>UDP和TCP協議的主要區別是兩者在如何實現信息的可靠傳遞方面不同。</p><p>TCP協議中包含了專門的傳遞保證機制，當數據接收方收到發送方傳來的信息時，會自動向發送方發出確認消息；發送方只有在接收到該確認消息之後才繼續傳送其他信息，否則將一直等待直到收到確認信息為止與TCP不同；</p><p>UDP協議與TCP協議相比，具有明顯的速度優勢，因此在有些情況下，UDP協議可能會變得非常有用。因為雖然TCP協議中植入了各種安全保障功能，但是在實際執行的過程中會佔用大量的系統開銷，無疑使速度受到嚴重的影響。而UDP由於排除了信息可靠傳遞機制，將安全和排序等功能移交給上層應用來完成，極大地降低了執行時間，使速度得到了保證。</p><p>3.主機A在網絡層的操作</p><p>在每個數據分段的前面封裝IP頭，網絡層把數據分段封裝為數據包（Packet）。包頭中，主要是源IP和目的IP地址。</p><p>源IP地址是主機A的，目的IP地址是主機B的。</p><p>IP協議</p><p>Internet Protocol，網際協議</p><p>IP 顯然是現代網間互聯 (internetworking )的出色協議。</p><p>它也是一個不可靠的、無連接的投遞機制 。</p><p>任何 IP 數據報也許會丟失、重複 或被投錯，並不會予以通。</p><p>IP 規定了數據格式、分組處理 和出錯處理。</p><p>IP報頭格式</p><p>–Version 是 IP 規範所發佈的版本號 4 （IPv4)或 快要使用的IP版本 6(IPv6)。</p><p>–服務類型(Type of Service)字段可分為 優先級 ( Precedence ), D 比特, T 比特和 R比特：</p><p>–生存期 (Time to Live：TTL), 度量單位為秒, 表明數據報的壽命。當路由表指明為一循環，該消息將被移去。 它採用一種簡單的時間估價，由每個路由器扣去 1 秒 ( 一個TTL單位)。</p><p>–上層協議(Next Protocol) 說明了“數據”直接投到哪個高層協議，如UDP或TCP。該字段的值應取自標準表。</p><p>DHCP協議</p><p>DHCP（Dynamic Host Configuration Protocol，動態主機配置協議）是一個局域網的網絡協議，使用UDP協議工作， 主要有兩個用途：給內部網絡或網絡服務供應商自動分配IP地址，給用戶或者內部網絡管理員作為對所有計算機作中央管理的手段。</p><p>DHCP協議採用客戶端/服務器模型，主機地址的動態分配任務由網絡主機驅動。當DHCP服務器接收到來自網絡主機申請地址的信息時，才會向網絡主機發送相關的地址配置等信息，以實現網絡主機地址信息的動態配置。</p><p>DHCP請求IP地址過程</p><p>–主機發送DHCPDISCOVER廣播包在網絡上尋找DHCP服務器</p><p>–DHCP服務器向本網絡發送DHCPOFFER單播數據包（回覆主機的DHCP報文、目的地址為主機地址所以單播），包含IP地址及地址租期等；</p><p>–主機發送DHCPREQUEST廣播包，正式向服務器請求分配已提供的IP地址；</p><p>–DHCP服務器向主機發送DHCPACK單播包，確認主機的請求</p><p>ICMP協議</p><p>Internet Control Message Protocol,互聯網控制消息協議，工作在網絡層。</p><p>ICMP 承載差錯報告消息，封裝在 IP 數據報的數據字段部分。</p><p>當裝載在IP中(象一個第 4 層協議) ，ICMP 是認為IP擴展的最佳選擇。</p><p>該ICMP消息是 由 IP 數據報上一層協議字段來標註 。</p><p>ICMP 報頭是編了碼的，呈現的差錯映射到對應的編號。</p><p>為了採集和解釋ICMP 消息，分析儀是必不可少的儀器。</p><p>ICMP報頭格式</p><p>–ICMP消息類型的擴展表，歸納如下：</p><p>----信宿不可達 Destination Unreachable (3): 網絡，主機，協議或端口不可達。</p><p>----請求分片但不允許，源路由失效。</p><p>----超時 (11)： 數據報在轉送或重裝時失效。</p><p>----參數問題 (12): 發送IP報頭 + 8字節的 出錯報文。</p><p>–這些消息形成了基本的差錯報告功能。</p><p>4.主機A在數據鏈路層的操作</p><p>數據鏈路層在數據包前面封裝數據幀頭，主要是源MAC地址和目的MAC地址；在數據包後面封裝校驗位，從而把數據包封裝成數據幀(Frame)。根據網絡傳輸介質的不同，數據幀的格式也不同。</p><p>同一網段內，源MAC為主機A的，目的MAC為服務器B的。如果主機A不知道B的MAC地址，可以向交換網絡上發送ARP廣播，解析到B的MAC地址。</p><p>不同網段時，源MAC為主機A的，目的MAC為路由器AE0接口的MAC地址。因為ARP廣播不能通過路由器。</p><p>ARP和RARP</p><p>地址解析協議ARP (Address Resolution Protocol)和反向地址解析協議RARP</p><p>計算機網絡中各主機之間要進行通信時，必須要知道彼此的物理地址（OSI模型中數據鏈路層的地址）。因此，在TCP/IP的網際層有ARP協議和RARP協議，它們的作用是將源主機和目的主機的IP地址與它們的物理地址相匹配。</p><p>地址解析協議ARP</p><p>5.主機A在物理層的操作</p><p>物理層負責把數據幀轉化成在網絡介質上傳遞的電子信號。通過接口發送出去。</p><p>6.交換機A上的工作</p><p>不能對數據進行任何的改動，只是根據數據幀的目的MAC地址將數據幀轉發給路由器A。</p><p>7.路由器A上的工作</p><p>拆幀頭，根據目的IP地址,在自己的路由表裡查找路徑，知道必須經過路由器B.</p><p>源IP地址和目的IP地址是不變的。如果有使用NAT主機(網絡地址轉換)，則源私有IP地址，轉換為公有IP地址，路由器A的S0口的IP。</p><p>封裝幀頭,源MAC地址是路由器A的S0口的，目的MAC地址是路由器B的S0口的。</p><p>將封裝的數據，轉發給路由器B。</p><p>8.路由器B上的工作</p><p>拆幀頭；</p><p>根據目的IP查找自己的路由表，看自己是否有到達該目的地的路徑。發現目的IP在自己的E0口直連的網段，路由器B向該網段發出一個ARP解析廣播，查找服務器B的MAC地址。</p><p>在收到迴應後，路由器B以自己的E0口的MAC為源MAC,以服務器B的MAC為目的MAC,封裝數據幀。</p><p>轉發給交換機B.</p><p>注:IP地址沒有改動。</p><p>9.交換機B上的工作</p><p>不做改動，轉發給服務器B。</p><p>10.FTP服務器B上的工作</p><p>逐層拆封。在傳輸層將數據段組和，傳給應用層的端口。</p><p>如果FTP服務器B向主機A發送數據，目的地址時218.68.45.2,然後，路由器A再轉換為其目的IP192.168.1.2。</p><p>遠程主機之間的數據傳輸是依靠IP地址標明目的地，而通過不斷變換源MAC地址與目的MAC地址傳輸數據。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>003</a></li><li><a>IP</a></li><li><a>網絡</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html alt=網絡基本概念-TCP/IP架構及各層網絡協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7f834ac140184ca6a079de4d0d3e515c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html title=網絡基本概念-TCP/IP架構及各層網絡協議>網絡基本概念-TCP/IP架構及各層網絡協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2eb6f16c.html alt="一文讀懂 TCP/IP 網絡模型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c7aa7812af5c4f46b1cfc94a150dc976 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2eb6f16c.html title="一文讀懂 TCP/IP 網絡模型">一文讀懂 TCP/IP 網絡模型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html alt=光纜——未來網絡主導 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e75c1afe12354a93bad8495ad1057693 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ea1bb612.html title=光纜——未來網絡主導>光纜——未來網絡主導</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bdc59733.html alt="網絡詞名場面是什麼意思 名場面是什麼梗" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bdc59733.html title="網絡詞名場面是什麼意思 名場面是什麼梗">網絡詞名場面是什麼意思 名場面是什麼梗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a002ca18.html alt=王一博那句年度網絡流行語「不愧是我」的：正版英文翻譯 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/26add5cdc08e4214800b25e21b623eb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a002ca18.html title=王一博那句年度網絡流行語「不愧是我」的：正版英文翻譯>王一博那句年度網絡流行語「不愧是我」的：正版英文翻譯</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ad6f0929.html alt=谷歌大腦發佈神經網絡的「核磁共振」，並公開相關代碼 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/65c4000bda98898dcdbb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ad6f0929.html title=谷歌大腦發佈神經網絡的「核磁共振」，並公開相關代碼>谷歌大腦發佈神經網絡的「核磁共振」，並公開相關代碼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8dce33e7.html alt=理解生成對抗網絡，一步一步推理得到GANs（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bee194d6fbec4d6f82e82998def3f7a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8dce33e7.html title=理解生成對抗網絡，一步一步推理得到GANs（一）>理解生成對抗網絡，一步一步推理得到GANs（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1fe1c2dd.html alt=瞭解生成對抗網絡（GAN） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/634604de44ad4d17931ccc0bcf3e46ef style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1fe1c2dd.html title=瞭解生成對抗網絡（GAN）>瞭解生成對抗網絡（GAN）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a9a3956.html alt="100 個網絡基礎知識普及，看完成半個網絡高手！" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/955ea722-be77-4b2d-b87a-64a8a04c8ea8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a9a3956.html title="100 個網絡基礎知識普及，看完成半個網絡高手！">100 個網絡基礎知識普及，看完成半個網絡高手！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/78c87167.html alt=奧迪A7車載電路與網絡連接之網絡連接 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d34213e3b03545bd8e87ab074b54ca0f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/78c87167.html title=奧迪A7車載電路與網絡連接之網絡連接>奧迪A7車載電路與網絡連接之網絡連接</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8a15db0b.html alt=網絡上共享跨平臺的點對點文件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/666bf87a9e16425ea1c9adc4f2c10acd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8a15db0b.html title=網絡上共享跨平臺的點對點文件>網絡上共享跨平臺的點對點文件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2b6ecb90.html alt=網絡基礎知識術語你知道哪些？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2b6ecb90.html title=網絡基礎知識術語你知道哪些？>網絡基礎知識術語你知道哪些？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6474ccee.html alt=點對點網絡的基本知識分享 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8678a34470a144ad88fc0487f0d8da91 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6474ccee.html title=點對點網絡的基本知識分享>點對點網絡的基本知識分享</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a61e29b6.html alt="幫助信息網絡犯罪活動罪 | 廈門刑事律師--辦案資料" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a61e29b6.html title="幫助信息網絡犯罪活動罪 | 廈門刑事律師--辦案資料">幫助信息網絡犯罪活動罪 | 廈門刑事律師--辦案資料</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ded83afe.html alt=博士論文摘要｜馬下平：“陸態網絡”並址站歸心基線精密解算及GNSS基準站數據處理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/53350006726e50ef72f9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ded83afe.html title=博士論文摘要｜馬下平：“陸態網絡”並址站歸心基線精密解算及GNSS基準站數據處理>博士論文摘要｜馬下平：“陸態網絡”並址站歸心基線精密解算及GNSS基準站數據處理</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>