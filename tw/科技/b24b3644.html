<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>「推薦」國產開源分佈式關係型HTAP數據庫TiDB | 极客快訊</title><meta property="og:title" content="「推薦」國產開源分佈式關係型HTAP數據庫TiDB - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/aefc66e503924c11aaba720c9fe88803"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b24b3644.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b24b3644.html><meta property="article:published_time" content="2020-11-14T21:00:58+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:58+08:00"><meta name=Keywords content><meta name=description content="「推薦」國產開源分佈式關係型HTAP數據庫TiDB"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/b24b3644.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>「推薦」國產開源分佈式關係型HTAP數據庫TiDB</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>TiDB 是一款由國內 PingCAP 公司自主設計、研發的開源分佈式關係型數據庫，同時支持在線事務處理與在線分析處理 (Hybrid Transactional and Analytical Processing, HTAP）的融合型分佈式數據庫產品，具備水平擴容或者縮容、金融級高可用、實時 HTAP、雲原生的分佈式數據庫、兼容 MySQL 5.7 協議和 MySQL 生態等重要特性。目標是為用戶提供一站式 OLTP (Online Transactional Processing)、OLAP (Online Analytical Processing)、HTAP 解決方案。TiDB 適合高可用、強一致要求較高、數據規模較大等各種應用場景。</p><h1 class=pgc-h-center-line>五大核心特性</h1><ul><li><strong>一鍵水平擴容或者縮容</strong></li></ul><p>得益於 TiDB 存儲計算分離的架構的設計，可按需對計算、存儲分別進行在線擴容或者縮容，擴容或者縮容過程中對應用運維人員透明。</p><ul><li><strong>金融級高可用</strong></li></ul><p>數據採用多副本存儲，數據副本通過 Multi-Raft 協議同步事務日誌，多數派寫入成功事務才能提交，確保數據強一致性且少數副本發生故障時不影響數據的可用性。可按需配置副本地理位置、副本數量等策略滿足不同容災級別的要求。</p><ul><li><strong>實時 HTAP</strong></li></ul><p>提供行存儲引擎 TiKV、列存儲引擎 TiFlash 兩款存儲引擎，TiFlash 通過 Multi-Raft Learner 協議實時從 TiKV 複製數據，確保行存儲引擎 TiKV 和列存儲引擎 TiFlash 之間的數據強一致。TiKV、TiFlash 可按需部署在不同的機器，解決 HTAP 資源隔離的問題。</p><ul><li><strong>雲原生的分佈式數據庫</strong></li></ul><p>專為雲而設計的分佈式數據庫，通過 TiDB Operator 可在公有云、私有云、混合雲中實現部署工具化、自動化。</p><ul><li><strong>兼容 MySQL 5.7 協議和 MySQL 生態</strong></li></ul><p>兼容 MySQL 5.7 協議、MySQL 常用的功能、MySQL 生態，應用無需或者修改少量代碼即可從 MySQL 遷移到 TiDB。提供豐富的數據遷移工具幫助應用便捷完成數據遷移。</p><h1 class=pgc-h-center-line>四大核心應用場景</h1><ul><li><strong>對數據一致性及高可靠、系統高可用、可擴展性、容災要求較高的金融行業屬性的場景</strong></li></ul><p>眾所周知，金融行業對數據一致性及高可靠、系統高可用、可擴展性、容災要求較高。傳統的解決方案是同城兩個機房提供服務、異地一個機房提供數據容災能力但不提供服務，此解決方案存在以下缺點：資源利用率低、維護成本高、RTO (Recovery Time Objective) 及 RPO (Recovery Point Objective) 無法真實達到企業所期望的值。TiDB 採用多副本 + Multi-Raft 協議的方式將數據調度到不同的機房、機架、機器，當部分機器出現故障時系統可自動進行切換，確保系統的 RTO &lt;= 30s 及 RPO = 0 。</p><ul><li><strong>對存儲容量、可擴展性、併發要求較高的海量數據及高併發的 OLTP 場景</strong></li></ul><p>隨著業務的高速發展，數據呈現爆炸性的增長，傳統的單機數據庫無法滿足因數據爆炸性的增長對數據庫的容量要求，可行方案是採用分庫分表的中間件產品或者 NewSQL 數據庫替代、採用高端的存儲設備等，其中性價比最大的是 NewSQL 數據庫，例如：TiDB。TiDB 採用計算、存儲分離的架構，可對計算、存儲分別進行擴容和縮容，計算最大支持 512 節點，每個節點最大支持 1000 併發，集群容量最大支持 PB 級別。</p><ul><li><strong>Real-time HTAP 場景</strong></li></ul><p>隨著 5G、物聯網、人工智能的高速發展，企業所生產的數據會越來越多，其規模可能達到數百 TB 甚至 PB 級別，傳統的解決方案是通過 OLTP 型數據庫處理在線聯機交易業務，通過 ETL 工具將數據同步到 OLAP 型數據庫進行數據分析，這種處理方案存在存儲成本高、實時性差等多方面的問題。TiDB 在 4.0 版本中引入列存儲引擎 TiFlash 結合行存儲引擎 TiKV 構建真正的 HTAP 數據庫，在增加少量存儲成本的情況下，可以同一個系統中做聯機交易處理、實時數據分析，極大地節省企業的成本。</p><ul><li><strong>數據匯聚、二次加工處理的場景</strong></li></ul><p>當前絕大部分企業的業務數據都分散在不同的系統中，沒有一個統一的彙總，隨著業務的發展，企業的決策層需要了解整個公司的業務狀況以便及時做出決策，故需要將分散在各個系統的數據匯聚在同一個系統並進行二次加工處理生成 T+0 或 T+1 的報表。傳統常見的解決方案是採用 ETL + Hadoop 來完成，但 Hadoop 體系太複雜，運維、存儲成本太高無法滿足用戶的需求。與 Hadoop 相比，TiDB 就簡單得多，業務通過 ETL 工具或者 TiDB 的同步工具將數據同步到 TiDB，在 TiDB 中可通過 SQL 直接生成報表。</p><h1 class=pgc-h-center-line>TiDB 整體架構</h1><p><strong>與傳統的單機數據庫相比，TiDB 具有以下優勢</strong>：</p><ul><li>純分佈式架構，擁有良好的擴展性，支持彈性的擴縮容</li></ul><ul><li>支持 SQL，對外暴露 MySQL 的網絡協議，併兼容大多數 MySQL 的語法，在大多數場景下可以直接替換 MySQL</li></ul><ul><li>默認支持高可用，在少數副本失效的情況下，數據庫本身能夠自動進行數據修復和故障轉移，對業務透明</li></ul><ul><li>支持 ACID 事務，對於一些有強一致需求的場景友好，例如：銀行轉賬</li></ul><ul><li>具有豐富的工具鏈生態，覆蓋數據遷移、同步、備份等多種場景</li></ul><p>在內核設計上，TiDB 分佈式數據庫將整體架構拆分成了多個模塊，各模塊之間互相通信，組成完整的 TiDB 系統。對應的架構圖如下：</p><div class=pgc-img><img alt=「推薦」國產開源分佈式關係型HTAP數據庫TiDB onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/aefc66e503924c11aaba720c9fe88803><p class=pgc-img-caption>TiDB架構圖</p></div><ul><li><strong>TiDB Server：</strong></li></ul><p>SQL 層，對外暴露 MySQL 協議的連接 endpoint，負責接受客戶端的連接，執行 SQL 解析和優化，最終生成分佈式執行計劃。TiDB 層本身是無狀態的，實踐中可以啟動多個 TiDB 實例，通過負載均衡組件（如 LVS、HAProxy 或 F5）對外提供統一的接入地址，客戶端的連接可以均勻地分攤在多個 TiDB 實例上以達到負載均衡的效果。TiDB Server 本身並不存儲數據，只是解析 SQL，將實際的數據讀取請求轉發給底層的存儲節點 TiKV（或 TiFlash）。</p><ul><li><strong>PD Server：</strong></li></ul><p>整個 TiDB 集群的元信息管理模塊，負責存儲每個 TiKV 節點實時的數據分佈情況和集群的整體拓撲結構，提供 TiDB Dashboard 管控界面，併為分佈式事務分配事務 ID。PD 不僅存儲元信息，同時還會根據 TiKV 節點實時上報的數據分佈狀態，下發數據調度命令給具體的 TiKV 節點，可以說是整個集群的“大腦”。此外，PD 本身也是由至少 3 個節點構成，擁有高可用的能力。建議部署奇數個 PD 節點。</p><ul><li><strong>存儲節點：</strong></li></ul><ul><li>TiKV Server：負責存儲數據，從外部看 TiKV 是一個分佈式的提供事務的 Key-Value 存儲引擎。存儲數據的基本單位是 Region，每個 Region 負責存儲一個 Key Range（從 StartKey 到 EndKey 的左閉右開區間）的數據，每個 TiKV 節點會負責多個 Region。TiKV 的 API 在 KV 鍵值對層面提供對分佈式事務的原生支持，默認提供了 SI (Snapshot Isolation) 的隔離級別，這也是 TiDB 在 SQL 層面支持分佈式事務的核心。TiDB 的 SQL 層做完 SQL 解析後，會將 SQL 的執行計劃轉換為對 TiKV API 的實際調用。所以，數據都存儲在 TiKV 中。另外，TiKV 中的數據都會自動維護多副本（默認為三副本），天然支持高可用和自動故障轉移。</li></ul><ul><li>TiFlash：TiFlash 是一類特殊的存儲節點。和普通 TiKV 節點不一樣的是，在 TiFlash 內部，數據是以列式的形式進行存儲，主要的功能是為分析型的場景加速。</li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>推薦</a></li><li><a>國產</a></li><li><a>開源分</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/e55aaf9b.html alt="論文推薦 | 袁修孝：航攝影像密集匹配的研究進展與展望" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6Ieh75DBRtmcY style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e55aaf9b.html title="論文推薦 | 袁修孝：航攝影像密集匹配的研究進展與展望">論文推薦 | 袁修孝：航攝影像密集匹配的研究進展與展望</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4653cf8e.html alt=論文推薦｜王濤：國產機載大視場三線陣CCD相機GNSS偏心矢量和IMU視軸偏心角標定技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6Ieh75DBRtmcY style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4653cf8e.html title=論文推薦｜王濤：國產機載大視場三線陣CCD相機GNSS偏心矢量和IMU視軸偏心角標定技術>論文推薦｜王濤：國產機載大視場三線陣CCD相機GNSS偏心矢量和IMU視軸偏心角標定技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html alt=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8716c57443b84bf39d12f7181c19e5d7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/43600b7e.html title=推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣>推薦10個值得一去的國外神器網站！登錄無需任何手段，實用又有趣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c4bdc082.html alt=化學老師推薦：按元素歸類的初中化學方程式集合！考前複習好資料 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e672e532fceb4bde92dc10ca986250ad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c4bdc082.html title=化學老師推薦：按元素歸類的初中化學方程式集合！考前複習好資料>化學老師推薦：按元素歸類的初中化學方程式集合！考前複習好資料</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/55e7373d.html alt=國產“像素屏小電腦”評測：機械鍵盤設計，內置多個趣味小功能 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7628f9fd959c499bb544a81933633bde style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/55e7373d.html title=國產“像素屏小電腦”評測：機械鍵盤設計，內置多個趣味小功能>國產“像素屏小電腦”評測：機械鍵盤設計，內置多個趣味小功能</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5718fd72.html alt="論文推薦 | 閆廣峰：L1範數探測粗差失效的觀測量識別方法" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/R6W0QpMHySg0Qb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5718fd72.html title="論文推薦 | 閆廣峰：L1範數探測粗差失效的觀測量識別方法">論文推薦 | 閆廣峰：L1範數探測粗差失效的觀測量識別方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/406f0d45.html alt=全球模擬芯片產業梳理，國產替代的機遇在哪？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/0ed6878fb0654a7dabc0f949b5fb9d75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/406f0d45.html title=全球模擬芯片產業梳理，國產替代的機遇在哪？>全球模擬芯片產業梳理，國產替代的機遇在哪？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6618c5c8.html alt=國產替代加速推進，模擬芯片是否大有可為？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2e96f5445ca34a5e9f0856230f090315 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6618c5c8.html title=國產替代加速推進，模擬芯片是否大有可為？>國產替代加速推進，模擬芯片是否大有可為？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0017144f.html alt=國產模擬芯片突破！AC-DC電源頭部設計公司的技術創新之路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RAfMLEP2ZwYLcE style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0017144f.html title=國產模擬芯片突破！AC-DC電源頭部設計公司的技術創新之路>國產模擬芯片突破！AC-DC電源頭部設計公司的技術創新之路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e8f54bf0.html alt=清華大學教授王志華：國產模擬芯片的兩條路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RzssB1Z2ZU783k style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e8f54bf0.html title=清華大學教授王志華：國產模擬芯片的兩條路>清華大學教授王志華：國產模擬芯片的兩條路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/81499f49.html alt=清華大學王志華：國產模擬芯片的兩條路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5c461f480c9f4bb19e497dd94044ea33 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/81499f49.html title=清華大學王志華：國產模擬芯片的兩條路>清華大學王志華：國產模擬芯片的兩條路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1fb68281.html alt=新品推薦｜你要的三防漆新品來啦 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0d18e71454334714a9ab8ac0e0e8d019 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1fb68281.html title=新品推薦｜你要的三防漆新品來啦>新品推薦｜你要的三防漆新品來啦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2c7df1e.html alt=「論文推薦」左建平教授談岩層移動研究進展及重點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RmTmvrAHAwNOUb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2c7df1e.html title=「論文推薦」左建平教授談岩層移動研究進展及重點>「論文推薦」左建平教授談岩層移動研究進展及重點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/811e0e2a.html alt=中科地信推薦丨這些地質動圖，帶你看盡地球板塊變化理解地質構造 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1622aa4e323b417592715cfb657cdede style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/811e0e2a.html title=中科地信推薦丨這些地質動圖，帶你看盡地球板塊變化理解地質構造>中科地信推薦丨這些地質動圖，帶你看盡地球板塊變化理解地質構造</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d77a0e0.html alt=「論文推薦」郭廣禮等：無井式煤炭地下氣化岩層及地表移動與控制 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ReafrDd7EHXniF style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d77a0e0.html title=「論文推薦」郭廣禮等：無井式煤炭地下氣化岩層及地表移動與控制>「論文推薦」郭廣禮等：無井式煤炭地下氣化岩層及地表移動與控制</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>