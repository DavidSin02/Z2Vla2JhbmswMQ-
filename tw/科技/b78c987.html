<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>GoF之適配器模式、策略模式詳解 | 极客快訊</title><meta property="og:title" content="GoF之適配器模式、策略模式詳解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b78c987.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b78c987.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b78c987.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="GoF之適配器模式、策略模式詳解"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/b78c987.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>GoF之適配器模式、策略模式詳解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify><strong>適配器模式(Adapter Pattern)</strong></p><p class=ql-align-justify>將一個接口轉換成客戶希望的另一個接口，使接口不兼容的那些類可以一起工作，其別名為包裝器(Wrapper)。適配器模式既可以作為類結構型模式，也可以作為對象結構型模式。</p><p class=ql-align-justify><strong>優點</strong></p><p class=ql-align-justify>1、可以讓任何兩個沒有關聯的類一起運行。</p><p class=ql-align-justify>2、提高了類的複用。</p><p class=ql-align-justify>3、增加了類的透明度。</p><p class=ql-align-justify>4、靈活性和擴展性都非常好，符合“開閉原則”。</p><p class=ql-align-justify><strong>缺點：</strong></p><p class=ql-align-justify>1、過多地使用適配器，會讓系統變複雜。比如，明明看到調用的是A 接口，其實內部被適配成了 B 接口的實現。如果不是很有必要，可以不使用適配器，而是直接對系統進行重構。</p><p class=ql-align-justify>2.由於 JAVA至多繼承一個類，所以至多隻能適配一個適配者類，而且目標類必須是抽象類。</p><p class=ql-align-justify><strong>使用場景：</strong>有動機地修改一個正常運行的系統的接口，這時應該考慮使用適配器模式。</p><p class=ql-align-justify><strong>注意事項：</strong>適配器不是在詳細設計時添加的，而是解決正在服役的項目的問題。</p><p class=ql-align-justify></p><p class=ql-align-justify>類適配器模式（adapter pattern）</p><p class=ql-align-justify>具體實現：通過電源適配器，將電源輸入220V（適配者）轉換為5V輸出（目標）。</p><pre>//目標角色public interface PowerTarget{ public int output5V();}//適配者角色public class PowerAdaptee{ private int output = 220; public int output220V() { System.out.println("電源輸出電壓：" + output); return output; }} //適配器角色public class PowerAdapterextends PowerAdapteeimplements PowerTarget{ @Override public int output5V() { int output =output220V(); System.out.println("電源適配器開始工作，此時輸出電壓是：" + output); output = 5; System.out.println("電源適配器工作完成，此時輸出電壓是：" + output); return output; }}電源適配器類實現了電源目標，繼承了適配者。//類適配器模式測試public class ClassAdapterPatternTest{ public static void main(String[] args) { PowerTargettarget = new PowerAdapter(); target.output5V(); }} </pre><p class=ql-align-justify>對象適配器模式（object adapter pattern）</p><p class=ql-align-justify>對象適配器模式在運行時實現target（目標）接口。在這種適配器模式中，適配器包裝了一個類實例。適配器通過調用包裝對象實例的方法實現適配。</p><p class=ql-align-justify></p><p class=ql-align-justify>代碼示例和類適配器模式只有Adapter類有不同，其他都一樣，只貼上Adapter類。</p><pre>//適配器角色public class PowerAdapterimplements PowerTarget{ private PowerAdaptee powerAdaptee; public PowerAdapter(PowerAdapteepowerAdaptee) { super(); this.powerAdaptee = powerAdaptee; } @Override public int output5V() { int output = powerAdaptee.output220V(); System.out.println("電源適配器開始工作，此時輸出電壓是：" + output); output = 5; System.out.println("電源適配器工作完成，此時輸出電壓是：" + output); return output; }}</pre><p class=ql-align-justify>實現了PowerTarget（目標角色），在創建對象時引入PowerAdaptee（適配者角色）。</p><p class=ql-align-justify></p><p class=ql-align-justify>缺省適配器模式（defaultadapter pattern）（客戶端，繼承b，調用b中的方法，不必直接實現a（直接實現a需要實現a中的所有的方法））</p><p class=ql-align-justify>當不需要全部實現接口提供的方法時，可以設計一個適配器抽象類實現接口，併為接口中的每個方法提供默認方法，抽象類的子類就可以有選擇的覆蓋父類的某些方法實現需求，它適用於一個接口不想使用所有的方法的情況。</p><p class=ql-align-justify>在java8後，接口中可以有default方法，就不需要這種缺省適配器模式了。接口中方法都設置為default，實現為空，這樣同樣同樣可以達到缺省適配器模式同樣的效果。</p><p class=ql-align-justify></p><p class=ql-align-justify>策略模式（Strategy Pattern）也叫 政策模式（Policy Pattern）。</p><p class=ql-align-justify>指的是對象具備某個行為，但是在不同的場景中，該行為有不同的實現算法。比如一個人的交稅比率與他的工資有關，不同的工資水平對應不同的稅率。</p><p class=ql-align-justify><strong>優點：</strong></p><p class=ql-align-justify>1、算法可以自由切換。</p><p class=ql-align-justify>2、避免使用多重條件判斷。</p><p class=ql-align-justify>3、擴展性良好。</p><p class=ql-align-justify><strong>缺點：</strong></p><p class=ql-align-justify>1、策略類會增多。</p><p class=ql-align-justify>2、所有策略類都需要對外暴露。</p><p class=ql-align-justify>具體實現：建立加減乘算法族，解決在有多種算法相似的情況下，使用 if...else 所帶來的複雜和難以維護。</p><pre>//創建一個接口，定策略或算法的行為。public interface Strategy{ public int doOperation(int num1, int num2);} //創建實現接口的實體類，裡面包含具體的策略或算法實現。利用多態，使行為在不同場景下產生不同結果。public class OperationAddimplements Strategy{ @Override public int doOperation(int num1, int num2) { return num1 + num2; }} public class OperationSubstractimplements Strategy{ @Override public int doOperation(int num1, int num2) { return num1 - num2; }} public class OperationMultiplyimplements Strategy{ @Override public int doOperation(int num1, int num2) { return num1 * num2; }} //創建Context類，用來操作策略的上下文環境，屏蔽高層模塊（客戶端）對策略，算法的直接訪問，封裝可能存在的變化；public class Context { private Strategy strategy; public Context(){ } public SetStrategy(Strategy strategy){ this.strategy = strategy; } public int executeStrategy(int num1, int num2){ return strategy.doOperation(num1, num2); }} //使用 Context 來查看當它改變策略 Strategy 時的行為變化。public class StrategyPatternClient{ public static void main(String[] args) { Contextcontext = new Context(); context.SetStrategy(new OperationAdd()); System.out.println("10 + 5 =" + context.executeStrategy(10, 5)); context.SetStrategy(new OperationSubstract()); System.out.println("10 - 5 =" + context.executeStrategy(10, 5)); context.SetStrategy(new OperationMultiply()); System.out.println("10 * 5 =" + context.executeStrategy(10, 5)); }}</pre><p class=ql-align-justify>輸出結果：</p><p class=ql-align-justify>10 + 5 = 15</p><p class=ql-align-justify>10 - 5 = 5</p><p class=ql-align-justify>10 * 5 =50</p><p class=ql-align-justify><strong>注意事項：</strong>如果一個系統的策略多於四個，就需要考慮使用混合模式，解決策略類膨脹的問題。</p><blockquote><p>原文：https://mp.weixin.qq.com/s/g20WQyzJNmvkH-kLPZRYBA</p><p>作者：專注一行代碼</p><p>來源：微信公眾號</p></blockquote></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>模式</a></li><li><a>GoF</a></li><li><a>之適</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d82db79.html alt=設計模式之適配器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/192d2146bd524e1b83f9f0e9185b188f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d82db79.html title=設計模式之適配器模式>設計模式之適配器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4874d5d.html alt=死磕設計模式之適配器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/024995ec185149dd82e4f07c5f48e993 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4874d5d.html title=死磕設計模式之適配器模式>死磕設計模式之適配器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html alt=虛擬製造：信息時代的全新制造模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/53f60001361786aae83a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html title=虛擬製造：信息時代的全新制造模式>虛擬製造：信息時代的全新制造模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html alt=PHP進階教程-設計模式之建造者模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ef25f91086df41eca76e35ff3434b003 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html title=PHP進階教程-設計模式之建造者模式>PHP進階教程-設計模式之建造者模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html alt=PHP進階教程-設計模式之橋接模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html title=PHP進階教程-設計模式之橋接模式>PHP進階教程-設計模式之橋接模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d7236ae9.html alt=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fd1548c124ea4f0887e86263835219b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d7236ae9.html title=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法）>PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html alt=PHP進階教程-設計模式之組合模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6f2acee37d624649ac7a592bfe5b29af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html title=PHP進階教程-設計模式之組合模式>PHP進階教程-設計模式之組合模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html alt=PHP進階教程-設計模式之裝飾器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8cbbfcfedd544572a62adc6df84d2e60 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html title=PHP進階教程-設計模式之裝飾器模式>PHP進階教程-設計模式之裝飾器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/46df0dbc.html alt="耶魯模式能複製到中國嗎？| 出類" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/558f3f2b01fe4639b2b24f24a342e3af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/46df0dbc.html title="耶魯模式能複製到中國嗎？| 出類">耶魯模式能複製到中國嗎？| 出類</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d2f4d9c.html alt=EPC模式+BIM技術+裝配式構件的新型建造模式，來這個項目探究竟！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e00f80cf38524aedabf4ff5e878da96b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d2f4d9c.html title=EPC模式+BIM技術+裝配式構件的新型建造模式，來這個項目探究竟！>EPC模式+BIM技術+裝配式構件的新型建造模式，來這個項目探究竟！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4d1d0543.html alt=7種錯誤的家庭教育模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/43080f648b6d41079c90fca6bd2466ed style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4d1d0543.html title=7種錯誤的家庭教育模式>7種錯誤的家庭教育模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/456bd2e5.html alt=7種錯誤的家庭教育模式，你躺槍了嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2703723e0b7644c8a870f5f6bff01db7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/456bd2e5.html title=7種錯誤的家庭教育模式，你躺槍了嗎？>7種錯誤的家庭教育模式，你躺槍了嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/607d1f83.html alt=教育孩子的錯誤模式：喋喋不休 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/386a14069a9243f3af81c4330f6b42ae style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/607d1f83.html title=教育孩子的錯誤模式：喋喋不休>教育孩子的錯誤模式：喋喋不休</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b0c55cc8.html alt=那些因商業模式錯誤而死掉的公司（小白也要懂的商業模式提高篇） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/4387000373f55dd91708 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b0c55cc8.html title=那些因商業模式錯誤而死掉的公司（小白也要懂的商業模式提高篇）>那些因商業模式錯誤而死掉的公司（小白也要懂的商業模式提高篇）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03cdc824.html alt=情緒與心智模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3b99b62f48334aa3875f8b6ca9ace3fe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03cdc824.html title=情緒與心智模式>情緒與心智模式</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>