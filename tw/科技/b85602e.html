<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Node è…³æœ¬é­é‡ç•°å¸¸æ™‚å¦‚ä½•å®‰å…¨é€€å‡º | æå®¢å¿«è¨Š</title><meta property="og:title" content="Node è…³æœ¬é­é‡ç•°å¸¸æ™‚å¦‚ä½•å®‰å…¨é€€å‡º - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/dfic-imagehandler/a871ebab-ec2d-4b54-9bf4-035082ee6005"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b85602e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/b85602e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/b85602e.html><meta property="article:published_time" content="2020-10-29T21:04:55+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:55+08:00"><meta name=Keywords content><meta name=description content="Node è…³æœ¬é­é‡ç•°å¸¸æ™‚å¦‚ä½•å®‰å…¨é€€å‡º"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/b85602e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Node è…³æœ¬é­é‡ç•°å¸¸æ™‚å¦‚ä½•å®‰å…¨é€€å‡º</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div class=pgc-img><img alt="Node è…³æœ¬é­é‡ç•°å¸¸æ™‚å¦‚ä½•å®‰å…¨é€€å‡º" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/dfic-imagehandler/a871ebab-ec2d-4b54-9bf4-035082ee6005><p class=pgc-img-caption></p></div><p class=pgc-end-literature>ä½œè€…ï¼šå±±æœˆè¡Œ</p><p class=pgc-end-literature>è½‰ç™¼éˆæ¥ï¼šhttps://mp.weixin.qq.com/s/LihozvtnAcVTN8s_v_ylFg</p><h1 class=pgc-h-arrow-right>å‰è¨€</h1><p>ä¸€å€‹ Node ç›¸é—œçš„é …ç›®ä¸­ï¼Œç¸½æ˜¯å°‘ä¸äº†è·‘è…³æœ¬ã€‚è·‘ä¸€å€‹è…³æœ¬æ‹‰å–é…ç½®ã€è™•ç†ä¸€äº›æ•¸æ“šä»¥åŠå®šæ™‚ä»»å‹™æ›´æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚</p><p>åœ¨ä¸€äº›é‡è¦æµç¨‹ä¸­èƒ½å¤ çœ‹åˆ°è…³æœ¬çš„èº«å½±ï¼š</p><ol start=1><li><span style="color:#595959;--tt-darkmode-color: #595959">CIï¼Œç”¨æ–¼æ¸¬è©¦ã€è³ªé‡ä¿éšœåŠéƒ¨ç½²ç­‰</span></li><li><span style="color:#595959;--tt-darkmode-color: #595959">Dockerï¼Œç”¨ä»¥æ§‹å»ºé¡åƒ</span></li><li><span style="color:#595959;--tt-darkmode-color: #595959">Cronï¼Œç”¨æ–¼å®šæ™‚ä»»å‹™</span></li></ol><p>å¦‚æœåœ¨é€™äº›é‡è¦æµç¨‹ä¸­è…³æœ¬å‡ºéŒ¯ç„¡æ³•åŠæ™‚ç™¼ç¾å•é¡Œï¼Œå°‡æœ‰å¯èƒ½å¼•ç™¼æ›´åŠ éš±è”½çš„å•é¡Œã€‚</p><p>æœ€è¿‘è§€å¯Ÿé …ç›®é¡åƒæ§‹å»ºï¼Œæœƒå¶çˆ¾ç™¼ç¾ä¸€å…©å€‹é¡åƒé›–ç„¶æ§‹å»ºæˆåŠŸï¼Œä½†å®¹å™¨å»è·‘ä¸èµ·ä¾†çš„æƒ…æ³ã€‚<strong><span style="color:#3594f7;--tt-darkmode-color: #3594F7">ã€Œç©¶å…¶åŸå› ï¼Œæ˜¯å› ç‚º Exit Code çš„å•é¡Œã€</span></strong>ã€‚</p><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">Exit Code</span></strong></h1><blockquote><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">ä»€éº¼æ˜¯ exit code?</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p></blockquote><p><span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span> ä»£è¡¨ä¸€å€‹é€²ç¨‹çš„è¿”å›ç¢¼ï¼Œé€šéç³»çµ±èª¿ç”¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit_group</span> ä¾†è§¸ç™¼ã€‚åœ¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">POSIX</span> ä¸­ï¼Œ<span style="color:#3594f7;--tt-darkmode-color: #3594F7">0</span> ä»£è¡¨æ­£å¸¸çš„è¿”å›ç¢¼ï¼Œ<span style="color:#3594f7;--tt-darkmode-color: #3594F7">1-255</span> ä»£è¡¨ç•°å¸¸è¿”å›ç¢¼ï¼Œä¸€èˆ¬ä¸»å‹•æ‹‹å‡ºçš„éŒ¯èª¤ç¢¼éƒ½æ˜¯ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">1</span>ã€‚åœ¨ Node æ‡‰ç”¨ä¸­ä½¿ç”¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">process.exitCode = 1</span> ä¾†ä»£è¡¨å› ä¸æœŸæœ›çš„ç•°å¸¸è€Œä¸­æ–·ã€‚</p><p>é€™è£¡æœ‰ä¸€å¼µé—œæ–¼ç•°å¸¸ç¢¼çš„é™„è¡¨ <span style="color:#595959;--tt-darkmode-color: #595959">Appendix E. Exit Codes With Special Meanings[1]</span>ã€‚</p><p>ç•°å¸¸ç¢¼åœ¨æ“ä½œç³»çµ±ä¸­éš¨è™•å¯è¦‹ï¼Œä»¥ä¸‹æ˜¯ä¸€å€‹é—œæ–¼ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">cat</span> å‘½ä»¤çš„ç•°å¸¸ä»¥åŠå®ƒçš„ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span>ï¼Œä¸¦ä½¿ç”¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">strace</span> è¿½è¹¤ç³»çµ±èª¿ç”¨ã€‚</p><pre><code>$Â catÂ acat:Â a:Â NoÂ suchÂ fileÂ orÂ directory#Â ä½¿ç”¨Â straceÂ æŸ¥çœ‹Â catÂ çš„ç³»çµ±èª¿ç”¨#Â -eÂ åªé¡¯ç¤ºÂ writeÂ èˆ‡Â exit_groupÂ çš„ç³»çµ±èª¿ç”¨$Â straceÂ -eÂ write,exit_groupÂ catÂ awrite(2,Â "cat:Â ",Â 5cat:Â )Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â 5write(2,Â "a",Â 1a)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â 1write(2,Â ":Â NoÂ suchÂ fileÂ orÂ directory",Â 27:Â NoÂ suchÂ fileÂ orÂ directory)Â =Â 27write(2,Â "\n",Â 1)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â 1exit_group(1)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â =Â ?+++Â exitedÂ withÂ 1Â +++</code></pre><p>å¾ç³»çµ±èª¿ç”¨çš„æœ€å¾Œä¸€è¡Œå¯ä»¥çœ‹å‡ºï¼Œè©²é€²è¡Œçš„ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span> æ˜¯ 1ï¼Œä¸¦æŠŠéŒ¯èª¤ä¿¡æ¯è¼¸å‡ºåˆ° <span style="color:#3594f7;--tt-darkmode-color: #3594F7">stderr</span> (æ¨™æº–éŒ¯èª¤çš„ fd ç‚º 2) ä¸­</p><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">å¦‚ä½•æŸ¥çœ‹ exit code</span></strong></h1><p>å¾ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">strace</span> ä¸­å¯ä»¥ä¾†åˆ¤æ–·é€²ç¨‹çš„ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span>ï¼Œä½†æ˜¯ä¸å¤ æ–¹ä¾¿éæ–¼å†—é¤˜ï¼Œç‰¹åˆ¥èº«è™• shell ç·¨ç¨‹ç’°å¢ƒä¸­ã€‚</p><p><strong><span style="color:#3594f7;--tt-darkmode-color: #3594F7">ã€Œæœ‰ä¸€ç¨®ç°¡å–®çš„æ–¹æ³•ï¼Œé€šé echo $? ä¾†ç¢ºèªè¿”å›ç¢¼ã€</span></strong></p><pre><code>$Â catÂ acat:Â a:Â NoÂ suchÂ fileÂ orÂ directory$Â echoÂ $?1</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">throw new Errorèˆ‡Promise.rejectå€åˆ¥</span></strong></h1><p>ä»¥ä¸‹æ˜¯å…©æ®µä»£ç¢¼ï¼Œç¬¬ä¸€æ®µæ‹‹å‡ºä¸€å€‹ç•°å¸¸ï¼Œç¬¬äºŒæ®µ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject</span>ï¼Œå…©æ®µä»£ç¢¼éƒ½æœƒå¦‚ä¸‹æ‰“å°å‡ºä¸€æ®µç•°å¸¸ä¿¡æ¯ï¼Œé‚£éº¼å…©è€…æœ‰ä»€éº¼å€åˆ¥ï¼Ÿ</p><pre><code>functionÂ errorÂ ()Â {Â Â throwÂ newÂ Error('hello,Â error')}error()//Â Output://Â /Users/shanyue/Documents/note/demo.js:2//Â Â Â throwÂ newÂ Error('hello,Â world')//Â Â Â ^////Â Error:Â hello,Â world//Â Â Â Â Â atÂ errorÂ (/Users/shanyue/Documents/note/demo.js:2:9)//Â Â Â Â Â atÂ Object.&lt;anonymous&gt;Â (/Users/shanyue/Documents/note/demo.js:5:1)//Â Â Â Â Â atÂ Module._compileÂ (internal/modules/cjs/loader.js:701:30)</code></pre><pre><code>asyncÂ functionÂ errorÂ ()Â {Â Â returnÂ newÂ Error('hello,Â error')}error()//Â Output://Â (node:60356)Â UnhandledPromiseRejectionWarning:Â Error:Â hello,Â world//Â Â Â Â atÂ errorÂ (/Users/shanyue/Documents/note/demo.js:2:9)//Â Â Â Â atÂ Object.&lt;anonymous&gt;Â (/Users/shanyue/Documents/note/demo.js:5:1)//Â Â Â Â atÂ Module._compileÂ (internal/modules/cjs/loader.js:701:30)//Â Â Â Â atÂ Object.Module._extensions..jsÂ (internal/modules/cjs/loader.js:712:10)//Â (node:2787)Â UnhandledPromiseRejectionWarning:Â UnhandledÂ promiseÂ rejection.Â ThisÂ errorÂ originatedÂ eitherÂ byÂ throwingÂ insideÂ ofÂ anÂ asyncÂ functionÂ withoutÂ aÂ catchÂ block,Â orÂ byÂ rejectingÂ aÂ promiseÂ whichÂ wasÂ notÂ handledÂ withÂ .catch().Â ToÂ terminateÂ theÂ nodeÂ processÂ onÂ unhandledÂ promiseÂ rejection,Â useÂ theÂ CLIÂ flagÂ `--unhandled-rejections=strict`Â (seeÂ https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode).Â (rejectionÂ id:Â 1)//Â (node:2787)Â [DEP0018]Â DeprecationWarning:Â UnhandledÂ promiseÂ rejectionsÂ areÂ deprecated.Â InÂ theÂ future,Â promiseÂ rejectionsÂ thatÂ areÂ notÂ handledÂ willÂ terminateÂ theÂ Node.jsÂ processÂ withÂ aÂ non-zeroÂ exitÂ code.</code></pre><p>åœ¨å°ä¸Šè¿°å…©å€‹æ¸¬è©¦ç”¨ä¾‹ä½¿ç”¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">echo $?</span> æŸ¥çœ‹ exit codeï¼Œæˆ‘å€‘æœƒç™¼ç¾<span style="color:#3594f7;--tt-darkmode-color: #3594F7">throw new Error()</span> çš„ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span> ç‚º 1ï¼Œè€Œ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject()</span> çš„ç‚º 0ã€‚</p><p><strong><span style="color:#3594f7;--tt-darkmode-color: #3594F7">ã€Œå¾æ“ä½œç³»çµ±çš„è§’åº¦ä¾†è¬›ï¼Œexit code ç‚º 0 ä»£è¡¨é€²ç¨‹æˆåŠŸé‹è¡Œä¸¦é€€å‡ºï¼Œæ­¤æ™‚å³ä½¿æœ‰ Promise.rejectï¼Œæ“ä½œç³»çµ±ä¹Ÿæœƒè¦–ç‚ºå®ƒåŸ·è¡ŒæˆåŠŸã€‚ã€</span></strong></p><p>é€™åœ¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Dockerfile</span> èˆ‡ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">CI</span> ä¸­å°‡ç•™æœ‰å®‰å…¨éš±æ‚£ã€‚</p><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">Dockerfile åœ¨ node ä¸­çš„æ³¨æ„é»</span></strong></h1><p>ç•¶ä½¿ç”¨ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Dockerfile</span> æ§‹å»ºé¡åƒæ™‚ï¼Œå¦‚æœ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">RUN</span> çš„é€²ç¨‹è¿”å›é 0 çš„è¿”å›ç¢¼ï¼Œæ§‹å»ºå°±æœƒå¤±æ•—ã€‚</p><p><strong><span style="color:#3594f7;--tt-darkmode-color: #3594F7">ã€Œè€Œåœ¨ Node ä¸­çš„éŒ¯èª¤è™•ç†ä¸­ï¼Œæˆ‘å€‘å‚¾å‘æ–¼æ‰€æœ‰çš„ç•°å¸¸éƒ½äº¤ç”± async/await ä¾†è™•ç†ï¼Œè€Œç•¶ç™¼ç”Ÿç•°å¸¸æ™‚ï¼Œç”±æ–¼æ­¤æ™‚ exit code ç‚º 0 ä¸¦ä¸æœƒå°è‡´é¡åƒæ§‹å»ºå¤±æ•—ã€‚ã€</span></strong></p><p>é€™æ˜¯ä¸€å€‹æ·ºé¡¯æ˜“æ‡‚çš„å« <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject()</span> å•é¡Œçš„é¡åƒã€‚</p><pre><code>FROMÂ node:12-alpineRUNÂ nodeÂ -eÂ "Promise.reject('hello,Â world')"</code></pre><p>æ§‹å»ºé¡åƒéç¨‹å¦‚ä¸‹ï¼š<strong><span style="color:#3594f7;--tt-darkmode-color: #3594F7">ã€Œå³ä½¿åœ¨æ§‹å»ºéç¨‹æ‰“å°å‡ºäº† unhandledPromiseRejection ä¿¡æ¯ï¼Œä½†æ˜¯é¡åƒä»ç„¶æ§‹å»ºæˆåŠŸã€‚ã€</span></strong></p><pre><code>$Â dockerÂ buildÂ -tÂ demoÂ .SendingÂ buildÂ contextÂ toÂ DockerÂ daemonÂ Â 33.28kBStepÂ 1/2Â :Â FROMÂ node:12-alpineÂ ---&gt;Â 18f4bc975732StepÂ 2/2Â :Â RUNÂ nodeÂ -eÂ "Promise.reject('hello,Â world')"Â ---&gt;Â RunningÂ inÂ 79a6d53c5aa6(node:1)Â UnhandledPromiseRejectionWarning:Â hello,Â world(node:1)Â UnhandledPromiseRejectionWarning:Â UnhandledÂ promiseÂ rejection.Â ThisÂ errorÂ originatedÂ eitherÂ byÂ throwingÂ insideÂ ofÂ anÂ asyncÂ functionÂ withoutÂ aÂ catchÂ block,Â orÂ byÂ rejectingÂ aÂ promiseÂ whichÂ wasÂ notÂ handledÂ withÂ .catch().Â ToÂ terminateÂ theÂ nodeÂ processÂ onÂ unhandledÂ promiseÂ rejection,Â useÂ theÂ CLIÂ flagÂ `--unhandled-rejections=strict`Â (seeÂ https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode).Â (rejectionÂ id:Â 1)(node:1)Â [DEP0018]Â DeprecationWarning:Â UnhandledÂ promiseÂ rejectionsÂ areÂ deprecated.Â InÂ theÂ future,Â promiseÂ rejectionsÂ thatÂ areÂ notÂ handledÂ willÂ terminateÂ theÂ Node.jsÂ processÂ withÂ aÂ non-zeroÂ exitÂ code.RemovingÂ intermediateÂ containerÂ 79a6d53c5aa6Â ---&gt;Â 09f07eb993feSuccessfullyÂ builtÂ 09f07eb993feSuccessfullyÂ taggedÂ demo:latest</code></pre><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">Promise.reject è…³æœ¬è§£æ±ºæ–¹æ¡ˆ</span></strong></h1><p>èƒ½åœ¨ç·¨è­¯æ™‚èƒ½ç™¼ç¾çš„å•é¡Œï¼Œçµ•ä¸è¦æ”¾åœ¨é‹è¡Œæ™‚ã€‚æ‰€ä»¥ï¼Œæ§‹å»ºé¡åƒæˆ– CI ä¸­éœ€è¦åŸ·è¡Œ node è…³æœ¬æ™‚ï¼Œå°ç•°å¸¸è™•ç†éœ€è¦æ‰‹å‹•æŒ‡å®š <span style="color:#3594f7;--tt-darkmode-color: #3594F7">process.exitCode = 1</span> ä¾†æå‰æš´éœ²å•é¡Œ</p><pre><code>runScript().catch(()Â =&gt;Â {Â Â process.exitCodeÂ =Â 1})</code></pre><p>åœ¨æ§‹å»ºé¡åƒæ™‚ï¼Œä¹Ÿæœ‰é—œæ–¼ç•°å¸¸è§£æ±ºæ–¹æ¡ˆçš„å»ºè­°ï¼š</p><blockquote><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">(node:1) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag </span><span style="color:#3594f7;--tt-darkmode-color: #3594F7">--unhandled-rejections=strict</span> (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 1)</p><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p></blockquote><p>æ ¹æ“šæç¤ºï¼Œ<span style="color:#3594f7;--tt-darkmode-color: #3594F7">--unhandled-rejections=strict</span> å°‡æœƒæŠŠ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject</span> çš„é€€å‡ºç¢¼è¨­ç½®ç‚º <span style="color:#3594f7;--tt-darkmode-color: #3594F7">1</span>ï¼Œä¸¦åœ¨å°‡ä¾†çš„ node ç‰ˆæœ¬ä¸­ä¿®æ­£ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise</span>ç•°å¸¸é€€å‡ºç¢¼ã€‚</p><pre><code>$Â nodeÂ --unhandled-rejections=strictÂ error.js</code></pre><p><span style="color:#3594f7;--tt-darkmode-color: #3594F7">--unhandled-rejections=strict</span> çš„é…ç½®å° node æœ‰ç‰ˆæœ¬è¦æ±‚ï¼š</p><blockquote><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">Added in: v12.0.0, v10.17.0</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">By default all unhandled rejections trigger a warning plus a deprecation warning for the very first unhandled rejection in case no unhandledRejection hook is used.</span></p><p><span style="color:#595959;--tt-darkmode-color: #595959">â</span></p></blockquote><h1 class=pgc-h-arrow-right><strong><span style="color:#40b8fa;--tt-darkmode-color: #40B8FA">ç¸½çµ</span></strong></h1><ol start=1><li><span style="color:#595959;--tt-darkmode-color: #595959">ç•¶é€²ç¨‹çµæŸçš„ exit code ç‚ºé 0 æ™‚ï¼Œç³»çµ±æœƒèªç‚ºè©²é€²ç¨‹åŸ·è¡Œå¤±æ•—</span></li><li><span style="color:#595959;--tt-darkmode-color: #595959">é€šé </span><span style="color:#3594f7;--tt-darkmode-color: #3594F7">echo $?</span> å¯æŸ¥çœ‹çµ‚ç«¯ä¸Šä¸€é€²ç¨‹çš„ exit code</li><li><span style="color:#595959;--tt-darkmode-color: #595959">Node ä¸­ </span><span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject</span> æ™‚ exit code ç‚º 0</li><li><span style="color:#595959;--tt-darkmode-color: #595959">Node ä¸­å¯ä»¥é€šé </span><span style="color:#3594f7;--tt-darkmode-color: #3594F7">process.exitCode = 1</span> é¡¯å¼è¨­ç½® exit code</li><li><span style="color:#595959;--tt-darkmode-color: #595959">åœ¨ Node12+ ä¸­å¯ä»¥é€šé </span><span style="color:#3594f7;--tt-darkmode-color: #3594F7">node --unhandled-rejections=strict error.js</span> åŸ·è¡Œè…³æœ¬ï¼Œè¦– <span style="color:#3594f7;--tt-darkmode-color: #3594F7">Promise.reject</span> çš„ <span style="color:#3594f7;--tt-darkmode-color: #3594F7">exit code</span>ç‚º 1</li></ol><p class=pgc-end-literature>ä½œè€…ï¼šå±±æœˆè¡Œ</p><p class=pgc-end-literature>è½‰ç™¼éˆæ¥ï¼šhttps://mp.weixin.qq.com/s/LihozvtnAcVTN8s_v_ylFg</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Node</a></li><li><a>è…³æœ¬</a></li><li><a>ç•°å¸¸æ™‚</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/967407b2.html alt=ç†è§£Shellè…³æœ¬ä¸­çš„å¤šé€²ç¨‹å’Œå¤šç·šç¨‹ä½µç™¼ï¼Œè®“å·¥ä½œæ•ˆç‡æå‡1000å€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dcec6fa5c6a046fdbc7eed5cc5dcf73d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/967407b2.html title=ç†è§£Shellè…³æœ¬ä¸­çš„å¤šé€²ç¨‹å’Œå¤šç·šç¨‹ä½µç™¼ï¼Œè®“å·¥ä½œæ•ˆç‡æå‡1000å€>ç†è§£Shellè…³æœ¬ä¸­çš„å¤šé€²ç¨‹å’Œå¤šç·šç¨‹ä½µç™¼ï¼Œè®“å·¥ä½œæ•ˆç‡æå‡1000å€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4457abd0.html alt="linux shellè…³æœ¬è¼¸å‡ºå­—ç¬¦é¡¯ç¤ºé¡è‰²å’Œç‰¹æ®Šæ•ˆæœ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/905bf9d0a3134b08ae696d92970e6a6d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4457abd0.html title="linux shellè…³æœ¬è¼¸å‡ºå­—ç¬¦é¡¯ç¤ºé¡è‰²å’Œç‰¹æ®Šæ•ˆæœ">linux shellè…³æœ¬è¼¸å‡ºå­—ç¬¦é¡¯ç¤ºé¡è‰²å’Œç‰¹æ®Šæ•ˆæœ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c382d8ba.html alt=Node.jséŒ¯èª¤è™•ç†æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/512f67b59dea4ffc888df6a86064c804 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c382d8ba.html title=Node.jséŒ¯èª¤è™•ç†æ¨¡å¼>Node.jséŒ¯èª¤è™•ç†æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/247e1389.html alt="ä½¿ç”¨ Node.js å¯«ä¸€å€‹ä»£ç¢¼ç”Ÿæˆå™¨" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2cba7942e6784844bac56d6b44752c5c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/247e1389.html title="ä½¿ç”¨ Node.js å¯«ä¸€å€‹ä»£ç¢¼ç”Ÿæˆå™¨">ä½¿ç”¨ Node.js å¯«ä¸€å€‹ä»£ç¢¼ç”Ÿæˆå™¨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a3eb352f.html alt=åˆ†äº«ä¸€ä»½å¯¦ç”¨è…³æœ¬ï¼šä¸€éµéƒ¨ç½²rsyncé ç¨‹åŒæ­¥æœå‹™ï¼Œå€¼å¾—æ”¶è— class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8e7094ddd7b94e7cafbdb4d72b9c1375 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a3eb352f.html title=åˆ†äº«ä¸€ä»½å¯¦ç”¨è…³æœ¬ï¼šä¸€éµéƒ¨ç½²rsyncé ç¨‹åŒæ­¥æœå‹™ï¼Œå€¼å¾—æ”¶è—>åˆ†äº«ä¸€ä»½å¯¦ç”¨è…³æœ¬ï¼šä¸€éµéƒ¨ç½²rsyncé ç¨‹åŒæ­¥æœå‹™ï¼Œå€¼å¾—æ”¶è—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/203a82ce.html alt=Node.JSå¯¦æˆ°35ï¼šçµ¦ç¨‹åºç•™ä¸€å€‹â€œå¾Œé–€â€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c00bf51426364a668bc103128b489fa7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/203a82ce.html title=Node.JSå¯¦æˆ°35ï¼šçµ¦ç¨‹åºç•™ä¸€å€‹â€œå¾Œé–€â€>Node.JSå¯¦æˆ°35ï¼šçµ¦ç¨‹åºç•™ä¸€å€‹â€œå¾Œé–€â€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a0461727.html alt="æƒ³è¦æ™éŒ¢å‰µæ”¶ é‚£å°±ç”¨è…³æœ¬æ“ä½œæ‰‹æ©Ÿç¾¤æ§è»Ÿä»¶å•Š" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/014688336a77441a8c5e463c88c16962 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a0461727.html title="æƒ³è¦æ™éŒ¢å‰µæ”¶ é‚£å°±ç”¨è…³æœ¬æ“ä½œæ‰‹æ©Ÿç¾¤æ§è»Ÿä»¶å•Š">æƒ³è¦æ™éŒ¢å‰µæ”¶ é‚£å°±ç”¨è…³æœ¬æ“ä½œæ‰‹æ©Ÿç¾¤æ§è»Ÿä»¶å•Š</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/122da5e.html alt="Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸Šï¼‰ã€Œä¹¾è²¨ã€" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/3e88283f-59ea-4552-ad5a-af642291fdd9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/122da5e.html title="Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸Šï¼‰ã€Œä¹¾è²¨ã€">Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸Šï¼‰ã€Œä¹¾è²¨ã€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6ece3e8.html alt="Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸‹ï¼‰ã€Œä¹¾è²¨ã€" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/793cc204-c1e4-41d7-9b9e-810052752b26 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6ece3e8.html title="Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸‹ï¼‰ã€Œä¹¾è²¨ã€">Node.js å¯¦ç¾æ¶ç¥¨å°å·¥å…·&çŸ­ä¿¡é€šçŸ¥æé†’ï¼ˆä¸‹ï¼‰ã€Œä¹¾è²¨ã€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e312fca.html alt="Shellè…³æœ¬100ä¾‹ï¼š14 ä½¿ç”¨è…³æœ¬å°mysqlå‚™ä»½ã€å‚³è¼¸ã€åˆªé™¤ï¼ˆæ­·å²åº«ï¼‰" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15360237764630c2b34e7d9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e312fca.html title="Shellè…³æœ¬100ä¾‹ï¼š14 ä½¿ç”¨è…³æœ¬å°mysqlå‚™ä»½ã€å‚³è¼¸ã€åˆªé™¤ï¼ˆæ­·å²åº«ï¼‰">Shellè…³æœ¬100ä¾‹ï¼š14 ä½¿ç”¨è…³æœ¬å°mysqlå‚™ä»½ã€å‚³è¼¸ã€åˆªé™¤ï¼ˆæ­·å²åº«ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d8df31.html alt=è‡ªå‹•åŒ–é‹ç¶­ä¸­çš„è…³æœ¬ç®¡ç†å’Œå·¥å–®ç®¡ç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153434908925368fadccbe7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d8df31.html title=è‡ªå‹•åŒ–é‹ç¶­ä¸­çš„è…³æœ¬ç®¡ç†å’Œå·¥å–®ç®¡ç†>è‡ªå‹•åŒ–é‹ç¶­ä¸­çš„è…³æœ¬ç®¡ç†å’Œå·¥å–®ç®¡ç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ae8fa62.html alt=å¦‚ä½•ä½¿ç”¨Node.jså„ç¨®ç•°æ­¥æ¨¡å¼èˆ‡æ•¸æ“šåº«äº¤äº’ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/3202000408db3cf640af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ae8fa62.html title=å¦‚ä½•ä½¿ç”¨Node.jså„ç¨®ç•°æ­¥æ¨¡å¼èˆ‡æ•¸æ“šåº«äº¤äº’>å¦‚ä½•ä½¿ç”¨Node.jså„ç¨®ç•°æ­¥æ¨¡å¼èˆ‡æ•¸æ“šåº«äº¤äº’</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2dbb2c8.html alt="Node.js æ‡‰ç”¨æ•…éšœæ’æŸ¥æ‰‹å†Š â€”â€” å†—é¤˜é…ç½®å‚³éå¼•ç™¼çš„å…§å­˜æº¢å‡º" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e49bab5e69304add9032153d21d21229 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2dbb2c8.html title="Node.js æ‡‰ç”¨æ•…éšœæ’æŸ¥æ‰‹å†Š â€”â€” å†—é¤˜é…ç½®å‚³éå¼•ç™¼çš„å…§å­˜æº¢å‡º">Node.js æ‡‰ç”¨æ•…éšœæ’æŸ¥æ‰‹å†Š â€”â€” å†—é¤˜é…ç½®å‚³éå¼•ç™¼çš„å…§å­˜æº¢å‡º</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/92ed232.html alt=èº«é«”å‡ºç¾é€™5å€‹ç•°å¸¸æ™‚ï¼Œæˆ–æ˜¯æœç”¨è—¥ç‰©æå‚·äº†è‚è‡Ÿï¼Œåˆ¥ç„¡è¦–äº† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1534857089798e103f84f8a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/92ed232.html title=èº«é«”å‡ºç¾é€™5å€‹ç•°å¸¸æ™‚ï¼Œæˆ–æ˜¯æœç”¨è—¥ç‰©æå‚·äº†è‚è‡Ÿï¼Œåˆ¥ç„¡è¦–äº†>èº«é«”å‡ºç¾é€™5å€‹ç•°å¸¸æ™‚ï¼Œæˆ–æ˜¯æœç”¨è—¥ç‰©æå‚·äº†è‚è‡Ÿï¼Œåˆ¥ç„¡è¦–äº†</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/a1b5b89.html alt=javaè…³æœ¬å¼•æ“çš„è¨­è¨ˆåŸç†æ·ºæ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1a656528bc904cc6849ed9b4387e28dc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/a1b5b89.html title=javaè…³æœ¬å¼•æ“çš„è¨­è¨ˆåŸç†æ·ºæ>javaè…³æœ¬å¼•æ“çš„è¨­è¨ˆåŸç†æ·ºæ</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>