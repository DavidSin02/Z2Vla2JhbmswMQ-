<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>高速信號-交流耦合電容 | 极客快訊</title><meta property="og:title" content="高速信號-交流耦合電容 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/285fa243da7c4d929207ce134a60a186"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c2bf501.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c2bf501.html><meta property="article:published_time" content="2020-10-29T21:07:03+08:00"><meta property="article:modified_time" content="2020-10-29T21:07:03+08:00"><meta name=Keywords content><meta name=description content="高速信號-交流耦合電容"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/c2bf501.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>高速信號-交流耦合電容</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify>我們在處理高速差分信號的時候，經常使用交流耦合，也會使用直流耦合， 比如PCI Express我們看到的是交流耦合， 早期光模塊和芯片之間的LVPECL則更多地使用直流耦合， 這篇文章我們不打算討論什麼情況下使用交流耦合，什麼情況下使用直流耦合，我們要討論的是使用交流耦合時需要解決的問題。</p><p class=ql-align-justify>很簡單的一個問題， 交流耦合的電容需要選擇多大？我們最常見的有0.1uF和0.01uF, 可是我們有想過為什麼嗎？為什麼不選更大或者更小的？今天我們試圖來用最簡單的方式來解釋，我們先使用頻域的方式。</p><p class=ql-align-justify><br></p><p>◆◆<strong>1. 頻域</strong>◆◆</p><p class=ql-align-justify><br></p><p class=ql-align-justify>以PCIE為例， 我們知道PCIE內含8b/10b編碼，並且我們知道它的所謂2.5Gbps (PCIE1.0)， 5Gbps （PCIE2.0），8Gbps （PCIE3.0）速率指的包含了8b/10b後的速率，也就波特率，這一點和以太網不一樣，千兆以太網的SGMII接口速率其實1.25Gbps，去除8b/10b後比特率是1000M，所以這裡的千兆指的payload速率，而且PCIE的速率指的是加上開銷以後的速率。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/285fa243da7c4d929207ce134a60a186><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>題外話不多說， 我們知道8b/10b作用是確保0和1的平衡，使得信號不會出現很長0和很長的1，防止接收端的CDR失鎖，也就是去除了信號的低頻部分，使得信號的頻譜保持在某個頻率以上。如圖所示經過8b/10b編碼後信號的頻譜在低頻段衰減了8dB</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8389cf3a65bd4c31830e546ac357ba0f><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>那麼我們怎麼去除為什麼我們要去除低頻，保留高頻呢？這還得從AC耦合的結構原理說起：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3e0b67a68a8d428d9f0a78e24647995e><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>根據上圖，我們進一步細化一下模型如下：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/00c0f7d1211043c5861d6f9c58e4b666><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>我們看到耦合電容和傳輸線的特徵阻抗組成了一個高通的濾波器， 如下面的圖所示我們需要確保此High pass filter的截止頻率（綠色線）要低於信號經過8b/10b後的頻譜的最低點（紅色線），因為只有這樣才能確保信號的能量完整的通過。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/add90661daf84d2ca846d895a37e8b3e><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>下面我們來計算一下：</p><p><strong>1. 傳輸線特徵阻抗Zr=50；</strong></p><p><strong>2. AC coupling電容值為C；</strong></p><p><strong>3. PCIE信號經過8b/10b後的信號頻譜也是已知的，用頻譜儀測一下或者簡單用速率（比如PCIE2.0的5Gbps）除以4簡單估算一下， 因為8b/10b最長0或者1只有4位了；</strong></p><p><strong>下面我們就來計算電容的值：</strong></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/ffe5fded4a894727902e45687c3c7afb><p class=pgc-img-caption></p></div><p class=ql-align-justify>我們很容易就能得出C的值了，簡單吧。</p><p>◆◆<strong>2. 時域</strong>◆◆</p><p class=ql-align-justify><br></p><p class=ql-align-justify>從時域來解釋， 如果不用8b/10b的話，問題有兩個，請看下面這段英文的精妙論述：AC coupled data signals would have DC drifts depending on the data content. A long sequence of 1´s will lead into positive drift and many 0´s will drift toward negative voltage. 意思是說如果沒有8b/10b的話，信號的長0和長1會使得信號本身發生直流漂移。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/29b579e9e82a4d82a23bcfc7a0357313><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>而加了8b/10b以後， CDR和恢復和信號直流漂移問題解決，下面這張圖我們再來看， 所謂的“constant average value”已經趨於水平而不會上下搖擺。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/cec8c6c9b277437bbb64123434c45b22><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify>我們繼續闡述8b/10b在時域的作用，信號經過了ac coupling電容之後，相當於經過了一個高通的濾波器，會產生的問題如下，高頻跳變的能量可以順利通過， 而低頻的長0和長1則不能通過， 低頻信號發生了畸變，而經過了8b/10b後，信號的低頻部分被消除，也不會有畸變的事情發生了。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/08030aad45f24ca1a06cb6a713759113><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>那麼是不是就說加了8b/10b後，使用ac coupling就什麼問題都沒有了呢？ 否， 我們需要仔細考慮計算我們的ac coupling電容的大小。我們先來看看經過high pass後時域信號發生的變化：</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/22c0253e1c4e489087525ea00945c160><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>我們看到仍然有部分低頻部分被去除，這可能是由於電容選擇不合理，我們先來看看電容取值如果太小會怎麼樣？</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/91c203445d4f406f9a63e3784a412b6c><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>電容如果取值太小，高速信號在充放電的時候，很顯然容易飽和，我們知道電容一旦飽和，阻抗就會變得很大，抵抗外面的高速信號的變化，為什麼小電容容易飽和呢？ 我們想象一下， 電容的正負極板其實是隨著信號跳變也在不停地做充放電，這樣極板兩邊的極性才會隨著信號的高低而變化，如果是小電容再加上長0長1的低頻部分到來，一下就充滿了。一旦充滿，最終導致信號的有效低頻部分被去除，如下如所示，連續三個1就會導致電容飽和，我們仔細看一下變化的步驟：</p><p><strong>1) 開關打到1；</strong></p><p><strong>2) 電容阻抗無窮小，電阻分壓最大；</strong></p><p><strong>3) 隨著電容充電，電容的阻抗在變大，如果飽和了，阻抗就變得無窮大，阻礙外部的交流變化，而且電阻上的分壓變得很小，導致直流漂移；</strong></p><p><strong>4) 開關打到2；</strong></p><p><strong>5) 電容開始放電，如此周而復始。</strong></p><p class=ql-align-justify><br></p><p class=ql-align-justify>我們可以看到直流電平緩慢下降的直流漂移會帶來什麼， 會帶來抖動，這種特殊的抖動叫PDJ。</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=高速信號-交流耦合電容 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8446814af3174f7aa72eca7aa66fb8d2><p class=pgc-img-caption></p></div><p class=ql-align-center><br></p><p class=ql-align-justify><br></p><p class=ql-align-justify>我們看到當出現1110的數據時，就會在1到0轉變的邊沿偏離，產生抖動，產生的原因很簡單，就是因為直流電平的起點低了，導致下降沿比正常的週期跳變信號提前了， 這種抖動是我們不喜歡的，一方面信號變形，另外一方面CDR需要跟蹤並且修復這種抖動， 是的眼圖質量裂化，誤碼率升高。</p><p class=ql-align-justify>那麼電容選太大會怎麼樣？ 當然很容易想明白，不能選太大的電容，因為大電容含有ESL/ESR，也會對信號有衰減。</p><p class=ql-align-justify>所以從時域和頻域的兩個角度，我們知道高速信號的ac coupling的電容選擇需要仔細計算和考量， 不能隨意。</p><p class=ql-align-justify></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>信號</a></li><li><a>電容</a></li><li><a>耦合</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/f8f5dff.html alt=信號耦合對於迴路面積控制的意義 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0f4746416b014185baa85b0026f7895c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f8f5dff.html title=信號耦合對於迴路面積控制的意義>信號耦合對於迴路面積控制的意義</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0614064.html alt=耦合電容，耦電路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/b47f107f-8352-45f0-893a-285595e3271a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0614064.html title=耦合電容，耦電路>耦合電容，耦電路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/82e3c47.html alt=電容有耦合，退耦！電阻有上拉，下拉！你都懂？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/29a87572-0975-43de-b2cf-eef8856f268d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/82e3c47.html title=電容有耦合，退耦！電阻有上拉，下拉！你都懂？>電容有耦合，退耦！電阻有上拉，下拉！你都懂？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2f2b7ced.html alt=新買的短波收音機收不到信號？可能是這幾方面的原因 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2ada73fab2c94718a95683a62062dc47 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2f2b7ced.html title=新買的短波收音機收不到信號？可能是這幾方面的原因>新買的短波收音機收不到信號？可能是這幾方面的原因</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0ec03b9c.html alt=教你三步看懂電路圖（電容、電阻、二三極管、晶振） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/abb2a77cdf064af4abb45e0f12332d4a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0ec03b9c.html title=教你三步看懂電路圖（電容、電阻、二三極管、晶振）>教你三步看懂電路圖（電容、電阻、二三極管、晶振）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f08a601c.html alt=35kV變電站電容電流測試培訓 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ba3bf560f15a412a9d974f2dcf2b257e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f08a601c.html title=35kV變電站電容電流測試培訓>35kV變電站電容電流測試培訓</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dac49c2e.html alt="全自動電容電流測試儀（中性點電容法）安全事項 不看就虧大了" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/435e000404a0715ee208 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dac49c2e.html title="全自動電容電流測試儀（中性點電容法）安全事項 不看就虧大了">全自動電容電流測試儀（中性點電容法）安全事項 不看就虧大了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/812bf0a3.html alt=電容電感測試儀操作手冊—鼎升電力 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1533017470288ebbedec391 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/812bf0a3.html title=電容電感測試儀操作手冊—鼎升電力>電容電感測試儀操作手冊—鼎升電力</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e1c6e5f0.html alt=電阻、電容、電感測試儀設計方案與系統的原理框圖 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4d313152616a406d8f2290fab6b43cbc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e1c6e5f0.html title=電阻、電容、電感測試儀設計方案與系統的原理框圖>電阻、電容、電感測試儀設計方案與系統的原理框圖</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a13ed5a1.html alt=電容電流測試儀的兩種測試方法和測試步驟介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/91e554d450544460bcdbc8fff33f7e3a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a13ed5a1.html title=電容電流測試儀的兩種測試方法和測試步驟介紹>電容電流測試儀的兩種測試方法和測試步驟介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/269cf310.html alt=乾式報警閥組—信號蝶閥和信號閘閥 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/63e490037083439e9782da12f5947f11 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/269cf310.html title=乾式報警閥組—信號蝶閥和信號閘閥>乾式報警閥組—信號蝶閥和信號閘閥</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c1916805.html alt=當身體出現這5個信號，是告訴你已經疲勞到極限，趕緊休息！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153414836007155e4e3fe24 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c1916805.html title=當身體出現這5個信號，是告訴你已經疲勞到極限，趕緊休息！>當身體出現這5個信號，是告訴你已經疲勞到極限，趕緊休息！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9100c6e1.html alt=身體的這5個信號是提醒你：已經疲勞到極限！趕緊休息了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15350949932138ebc5e69ee style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9100c6e1.html title=身體的這5個信號是提醒你：已經疲勞到極限！趕緊休息了>身體的這5個信號是提醒你：已經疲勞到極限！趕緊休息了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/14bddd32.html alt=R&S羅德與施瓦茨信號發生器自檢自校準方法彙總-安泰維修中心 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/14bddd32.html title=R&S羅德與施瓦茨信號發生器自檢自校準方法彙總-安泰維修中心>R&S羅德與施瓦茨信號發生器自檢自校準方法彙總-安泰維修中心</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/310d551e.html alt=五個信號30％頻段協議（BAND）校正才剛剛開始 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f23399b5df9d4b76b5f71864b6042441 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/310d551e.html title=五個信號30％頻段協議（BAND）校正才剛剛開始>五個信號30％頻段協議（BAND）校正才剛剛開始</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>