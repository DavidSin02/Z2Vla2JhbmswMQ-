<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>SCAT：信令收集和分析工具 | 极客快訊</title><meta property="og:title" content="SCAT：信令收集和分析工具 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c441c56.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c441c56.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c441c56.html><meta property="article:published_time" content="2020-10-29T20:52:44+08:00"><meta property="article:modified_time" content="2020-10-29T20:52:44+08:00"><meta name=Keywords content><meta name=description content="SCAT：信令收集和分析工具"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/c441c56.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>SCAT：信令收集和分析工具</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>SCAT是一個由python編寫的信令收集和分析工具，它會通過USB解析Qualcomm和Samsung基帶的診斷信息，並生成包含蜂窩控制平面消息的GSMTAP數據包流。</p><p>安裝要求<strong>PC</strong></p><p>目前僅在Linux上測試過，且多數為Ubuntu的各種衍生版本。Python版本不得低於python 3，另外還需要安裝以下外部模塊：</p><blockquote><p>pyUSB</p><p>pySerial</p></blockquote><p>要正確解碼SCAT生成的GSMTAP數據包，需要Wireshark 2.6.0或更高版本。對於老版本的Wireshark，我們提供了一個Wireshark Lua插件來幫助其擴展GSMTAP解碼功能。SCAT使用的GSMTAP定義基於libosmocore 0.11.0。</p><p><strong>智能手機</strong></p><p>蜂窩設備必須通過USB暴露診斷端口。這主要取決於所使用的設備，我們無法為所有設備提供一個通用的解決方案。使用關鍵字（你的設備名稱）qpst在網上搜索獲取，基於Qualcomm的智能手機暴露診斷端口的方法。</p><blockquote><p>三星：在撥號器中輸入*#0808#，選擇包含DM的任意USB模式條目；</p><p>韓版：在撥號器中輸入3197123580，密碼為9964127764320821。</p></blockquote><p>2018年以後的某些版本的固件，將會阻止使用上述代碼訪問隱藏菜單。目前並無解決方案。</p><p><strong>LG：在撥號器中輸入277634#*#（TODO：USB測試菜單的確切位置）</strong></p><blockquote><p>在某些LG設備上，即使啟用USB測試模式診斷端口也不會在Linux中暴露。這是由於使用了多個USB設備配置導致的；建議在此類設備中更改當前USB配置的udev規則。</p></blockquote><p>索尼：需要root。獲取一個有root權限的adb shell，並輸入命令setprop persist.usb.eng 1。</p><p>Nexus：需要root。獲取一個有root權限的adb shell，並輸入命令setprop sys.usb.config diag,adb。</p><blockquote><p>不適用於Pixel設備！</p></blockquote><p>Sailfish OS：( TODO：如何修改usb-moded設置）</p><p>雖然我們建議大家直接使用USB來訪問診斷端口，但如果你的智能手機的診斷端口可以通過串行端口訪問，那也是個不錯的選擇。所有基於Qualcomm的智能手機的qcserial內核模塊並沒有包含有關診斷端口的信息，而基於三星的智能手機也沒有這樣的模塊。</p><p>通過USB訪問基帶診斷：</p><p>$ scat.py -t qc -u -a 001:010 -i 2</p><p>-t qc 定義我們正在解析Qualcomm基帶。對於Samsung基帶需要將qc替換為sec，且需要我們手動提供型號，如下所示：</p><p>$ scat.py -t sec -m e333 -u -a 001:006 -i 2</p><p>可用型號類型如下：</p><blockquote><p>-m cmc221s：CMC221S，用於早期的三星LTE調制解調器/智能手機；</p><p>-m e303：調制解調器芯片Exynos Modem 303；</p><p>-m e333：調制解調器芯片Exynos Modem 333</p></blockquote><p>較新的Exynos調制解調器可與-m e333選項一起使用，YMMV。</p><p>雖然有啟發式算法可以確定連接的設備，但還是建議大家能明確指定診斷節點的USB設備地址和接口編號。-a 001:010 指定地址，該地址遵循lsusb命令中可見的相同語法。-i 2 指定診斷節點的接口編號，該編號也是特定於設備的。</p><p>通過串口訪問基帶診斷：</p><p>$ scat.py -t qc -s /dev/ttyUSB0</p><p>將/dev/ttyUSB0替換為你的診斷設備。</p><p>默認情況下，scat將包發送到127.0.0.1，控制平面包作為gsmtap發送到udp端口4729，用戶平面包作為ip發送到udp端口47290。</p><p>使用Ctrl+C退出應用程序。</p><p><strong>高級選項</strong></p><p>可以使用-H 127.0.0.2開關更改發送GSMTAP數據包的目的地。例如，以下命令將所有數據包發送到127.0.0.2：</p><p>$ scat.py -t sec -m e333 -u -a 001:006 -i 2 -H 127.0.0.2</p><p>使用以下命令，以便能夠使用Wireshark輕鬆對其進行排序：</p><p>ifconfig ethUSB 127.0.0.2 netmask 255.255.255.0 upsudo route add -net 127.0.0.0 netmask 255.255.255.0 gw 127.0.0.1</p><p>可以使用其他命令的輸出自動確定USB總線地址。以下示例適用於三星Galaxy S5 Mini：</p><p>設備名稱/型號處理器基帶必要參數是/否需要root</p><p>Nokia 8110 4G (TA-1048)Snapdragon 205 MSM8905X5-t qcYes</p><p>Google Nexus 5 (LG-D821)Snapdragon 800 MSM8974MDM9x25-t qcYes</p><p>Google Nexus 5X (LG-H791)Snapdragon 808 MSM8992X10-t qcYes</p><p>Google Pixel 2 (G011A)Snapdragon 835 MSM8998X16-t qcYes還需修改系統分區LG G Flex 2 (LG-H955)Snapdragon 810 MSM8994X10-t qcNo</p><p>Sierra Wireless EM7455-X7 (MDM9635)-t qc-</p><p>Sony Xperia X (F5122)Snapdragon 650 MSM8956X8-t qcYes</p><p>Samsung Galaxy S III LTE (SHW-M210K)Exynos 4412CMC221S-t sec -m cmc221sNo</p><p>Samsung Galaxy S4 LTE (GT-I9505)Snapdragon APQ8064TQualcomm MDM9215-t qcNo</p><p>Samsung Galaxy S5 Mini (SM-G800F)Exynos 3470Exynos Modem 303-t sec -m e303No</p><p>Samsung Galaxy S6 (SM-G920F)Exynos 7420Exynos Modem 333-t sec -m e333No/Yes</p><p>Samsung Galaxy S6 Edge+ (SM-G928F)Exynos 7420Exynos Modem 333-t sec -m e333No/Yes</p><p>Samsung Galaxy S8 (SM-G950F)Exynos 8895Exynos Modem 355-t sec -m e333No/Yes</p><p>注：以上列表並未列出所有基於Qualcomm的設備。</p><p>已知錯誤</p><blockquote><p>在某些Qualcomm設備上，退出並多次啟動應用程序後初始化最終會掛起，並且不會顯示任何消息。根本原因仍在調查中。解決方案：重啟智能手機；</p><p>在某些三星設備上，缺少EARFCN等元數據信息或沒有出現控制平面消息。如果遇到此類情況，請告知你的環境以獲取解決方案。</p></blockquote><p>參考文獻</p><p>Byeongdo Hong，Shinjo Park，Hongil Kim，Dongkwan Kim，Hyunwook Hong，Hyunwoo Choi，Jean-Pierre Seifert，Sung-Ju Lee，Yongdae Kim。</p><p>窺視蜂窩圍牆花園 - 一種封閉式網絡診斷方法<strong> - </strong>IEEE Transactions on Mobile Computing（2018.2）</p><p><strong>轉載來自FreeBuf.COM</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>信令</a></li><li><a>SCAT</a></li><li><a>收集</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/f2b7fed8.html alt=拓撲學集合（收集中） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0a86db474bfa4b89ae5b62abf6d215b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f2b7fed8.html title=拓撲學集合（收集中）>拓撲學集合（收集中）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0a7a1e6e.html alt=裝修問題收集 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1eba07ce7b514dd3a85c40914d46d932 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0a7a1e6e.html title=裝修問題收集>裝修問題收集</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/bea12287.html alt=盤點下我收集到的幾種團扇，仙人掌愛好者的收集癖 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c0314c2f0d394c8280bff5c5aa131d78 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/bea12287.html title=盤點下我收集到的幾種團扇，仙人掌愛好者的收集癖>盤點下我收集到的幾種團扇，仙人掌愛好者的收集癖</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/63334414.html alt="王者榮耀五五守護星收集方法攻略 五五守護星最多能收集幾個" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/63334414.html title="王者榮耀五五守護星收集方法攻略 五五守護星最多能收集幾個">王者榮耀五五守護星收集方法攻略 五五守護星最多能收集幾個</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/2d4c120d.html alt=《黑暗之魂3》戒指全收集 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5dd4ebd99d704d58a62216ec70d21cbb style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/2d4c120d.html title=《黑暗之魂3》戒指全收集>《黑暗之魂3》戒指全收集</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/2125ce03.html alt=拓撲學集合（二）（收集中） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/619f934168b84f259422ee8a32710a34 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/2125ce03.html title=拓撲學集合（二）（收集中）>拓撲學集合（二）（收集中）</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/80a6efb4.html alt="《寶可夢劍盾》全圖鑑收集指南 怎麼收集全圖鑑" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fa39d0bd796949f3bd3dc3dc01d43717 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/80a6efb4.html title="《寶可夢劍盾》全圖鑑收集指南 怎麼收集全圖鑑">《寶可夢劍盾》全圖鑑收集指南 怎麼收集全圖鑑</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/29c85664.html alt=全Z水晶收集 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RrQA7hu9BE9BCG style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/29c85664.html title=全Z水晶收集>全Z水晶收集</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/068cf778.html alt=魔獸懷舊服：收集強散時，不要忘記收集帶抗性的T1和T2套件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/727f9b92cc3c4812a77b40733b31922f style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/068cf778.html title=魔獸懷舊服：收集強散時，不要忘記收集帶抗性的T1和T2套件>魔獸懷舊服：收集強散時，不要忘記收集帶抗性的T1和T2套件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3497980.html alt=排風收集罩及其應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8f75fbc887ca4c0a8243f0600a647c7e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3497980.html title=排風收集罩及其應用>排風收集罩及其應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ffed08c.html alt=高併發場景下分佈式實時信令系統的架構實踐 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3f4f3c66418c47f499d7e99c7e9c7191 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ffed08c.html title=高併發場景下分佈式實時信令系統的架構實踐>高併發場景下分佈式實時信令系統的架構實踐</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b8764ce.html alt="羅德與施瓦茨基於華為巴龍5000成功調試5G NR手機信令測試方案" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RHuzdvgEHihjbm style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b8764ce.html title="羅德與施瓦茨基於華為巴龍5000成功調試5G NR手機信令測試方案">羅德與施瓦茨基於華為巴龍5000成功調試5G NR手機信令測試方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0db7e2f.html alt=羅德與施瓦茨提供業界領先的藍牙低功耗信令測試方案 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/65be0004bedcb33a2474 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0db7e2f.html title=羅德與施瓦茨提供業界領先的藍牙低功耗信令測試方案>羅德與施瓦茨提供業界領先的藍牙低功耗信令測試方案</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/cbcb1e4.html alt=除了厚敦菊屬植物，還有收集奇峰錦屬植物，收集都不容易 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6b09d2a6340f4b64a6a371e0133859e0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/cbcb1e4.html title=除了厚敦菊屬植物，還有收集奇峰錦屬植物，收集都不容易>除了厚敦菊屬植物，還有收集奇峰錦屬植物，收集都不容易</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0cbfd86.html alt="400G 以太網改用 PAM-4 信令取代 NRZ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RmArbsO5xD7ZR2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0cbfd86.html title="400G 以太網改用 PAM-4 信令取代 NRZ">400G 以太網改用 PAM-4 信令取代 NRZ</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>