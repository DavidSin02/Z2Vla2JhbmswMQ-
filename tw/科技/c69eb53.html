<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ | æå®¢å¿«è¨Š</title><meta property="og:title" content="Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/f84645784a434e5e925752a6dcf83cb7"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c69eb53.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c69eb53.html><meta property="article:published_time" content="2020-10-29T20:59:53+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:53+08:00"><meta name=Keywords content><meta name=description content="Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/c69eb53.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>ä¸Šé€±æŠŠè©±æ’‚å‡ºä¾†ï¼Œçœ‹èµ·ä¾†å°å¤¥ä¼´å€‘éƒ½æŒºæœŸå¾…çš„ï¼Œå…¶å¯¦é¬†å“¥ä¹Ÿè¿«ä¸åŠå¾…æƒ³è¦é–‹å•Ÿä¸€å€‹å…¨æ–°çš„ç³»åˆ—ã€‚</p><p>ä½†æ˜¯ç›®å‰çš„ Spring Security ç³»åˆ—é‚„åœ¨é€£è¼‰ä¸­ï¼Œé‚„æ²’å¯«å®Œã€‚é€£è¼‰é€™äº‹ï¼Œä¸€é¼“ä½œæ°£ï¼Œå†è€Œè¡°ä¸‰è€Œç«­ï¼Œä¸€å®šè¦ä¸€æ¬¡æå®šï¼ŒSpring Security å¦‚æœé€™æ¬¡æ”¾ä¸‹ä¾†ï¼Œä»¥å¾Œå°±å¾ˆé›£å†æ‹¾èµ·ä¾†äº†ã€‚</p><p>æ‰€ä»¥ç›®å‰çš„æ›´æ–°é‚„æ˜¯ Spring Security ç‚ºä¸»ï¼Œ<strong>åŒæ™‚ Spring æºç¢¼è§£è®€æ¯é€±è‡³å°‘æ›´æ–°ä¸€ç¯‡</strong>ï¼Œç­‰ Spring Security ç³»åˆ—æ›´æ–°å®Œç•¢å¾Œï¼Œå°±é–‹è¶³é¦¬åŠ›æ›´æ–° Spring æºç¢¼ã€‚å…¶å¯¦ Spring Security ä¸­ä¹Ÿæœ‰å¾ˆå¤šå’Œ Spring ç›¸é€šçš„åœ°æ–¹ï¼ŒSpring Security å¤§å®¶æ–‡ç« èªçœŸçœ‹ï¼Œé¬†å“¥ä¸æœƒè®“å¤§å®¶å¤±æœ›çš„ï¼</p><h2 class=pgc-h-arrow-right>1.å¾ä½•èªªèµ·</h2><p>Spring è¦å¾ä½•èªªèµ·å‘¢ï¼Ÿé€™å€‹å•é¡Œæˆ‘è€ƒæ…®äº†å¾ˆé•·æ™‚é–“ã€‚</p><p>å› ç‚º Spring æºç¢¼å¤ªç¹é›œäº†ï¼Œä¸€å®šè¦é¸æ“‡ä¸€å€‹åˆé©çš„åˆ‡å…¥é»ï¼Œå¦å‰‡ä¸€ä¸Šä¾†å°±æŠŠå„ä½å°å¤¥ä¼´æ•´æ‡µäº†ï¼Œé‚£å‰©ä¸‹çš„æ–‡ç« ä¼°è¨ˆå°±ä¸æƒ³çœ‹äº†ã€‚</p><p>æƒ³äº†å¾ˆä¹…ä¹‹å¾Œï¼Œæˆ‘æ±ºå®šå°±å…ˆå¾é…ç½®æ–‡ä»¶åŠ è¼‰è¬›èµ·ï¼Œåœ¨é€æ­¥å±•é–‹ï¼Œé…ç½®æ–‡ä»¶åŠ è¼‰ä¹Ÿæ˜¯æˆ‘å€‘åœ¨ä½¿ç”¨ Spring æ™‚é‡åˆ°çš„ç¬¬ä¸€å€‹å•é¡Œï¼Œä»Šå¤©å°±å…ˆä¾†èªªèªªé€™å€‹è©±é¡Œã€‚</p><h2 class=pgc-h-arrow-right>2.ç°¡å–®çš„æ¡ˆä¾‹</h2><p>å…ˆä¾†ä¸€å€‹ç°¡å–®çš„æ¡ˆä¾‹ï¼Œå¤§å®¶æ„Ÿå—ä¸€ä¸‹ï¼Œç„¶å¾Œæˆ‘å€‘é †è‘—æ¡ˆä¾‹è¬›èµ·ã€‚</p><p>é¦–å…ˆæˆ‘å€‘å‰µå»ºä¸€å€‹æ™®é€šçš„ Maven é …ç›®ï¼Œå¼•å…¥ spring-beans ä¾è³´ï¼š</p><pre><code>&lt;dependency&gt;Â Â Â Â &lt;groupId&gt;org.springframework&lt;/groupId&gt;Â Â Â Â &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;Â Â Â Â &lt;version&gt;5.2.6.RELEASE&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>ç„¶å¾Œæˆ‘å€‘å‰µå»ºä¸€å€‹å¯¦é«”é¡ï¼Œå†æ·»åŠ ä¸€å€‹ç°¡å–®çš„é…ç½®æ–‡ä»¶ï¼š</p><pre><code>publicÂ classÂ UserÂ {Â Â Â Â privateÂ StringÂ username;Â Â Â Â privateÂ StringÂ address;Â Â Â Â //çœç•¥Â getter/setter}</code></pre><p>resources ç›®éŒ„ä¸‹å‰µå»ºé…ç½®æ–‡ä»¶ï¼š</p><pre><code>&lt;?xmlÂ version="1.0"Â encoding="UTF-8"?&gt;&lt;beansÂ xmlns="http://www.springframework.org/schema/beans"Â Â Â Â Â Â Â xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"Â Â Â Â Â Â Â xsi:schemaLocation="http://www.springframework.org/schema/beansÂ http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;Â Â Â Â &lt;beanÂ class="org.javaboy.loadxml.User"Â id="user"/&gt;&lt;/beans&gt;</code></pre><p>ç„¶å¾Œå»åŠ è¼‰é€™å€‹é…ç½®æ–‡ä»¶ï¼š</p><pre><code>publicÂ staticÂ voidÂ main(String[]Â args)Â {Â Â Â Â XmlBeanFactoryÂ factoryÂ =Â newÂ XmlBeanFactory(newÂ ClassPathResource("beans.xml"));Â Â Â Â UserÂ userÂ =Â factory.getBean(User.class);Â Â Â Â System.out.println("userÂ =Â "Â +Â user);}</code></pre><p>é€™è£¡ç‚ºäº†å±•ç¤ºæ•¸æ“šçš„è®€å–éç¨‹ï¼Œæˆ‘å°±å…ˆç”¨é€™å€‹å·²ç¶“éæœŸçš„ XmlBeanFactory ä¾†åŠ è¼‰ï¼Œé€™ä¸¦ä¸å½±éŸ¿æˆ‘å€‘é–±è®€æºç¢¼ã€‚</p><p>ä¸Šé¢é€™å€‹æ˜¯ä¸€å€‹éå¸¸ç°¡å–®çš„ Spring å…¥é–€æ¡ˆä¾‹ï¼Œç›¸ä¿¡å¾ˆå¤šå°å¤¥ä¼´åœ¨ç¬¬ä¸€æ¬¡æ¥è§¸ Spring çš„æ™‚å€™ï¼Œå¯«å‡ºä¾†çš„å¯èƒ½éƒ½æ˜¯é€™å€‹ Demoã€‚</p><p>åœ¨ä¸Šé¢é€™æ®µä»£ç¢¼åŸ·è¡Œéç¨‹ä¸­ï¼Œé¦–å…ˆè¦åšçš„äº‹æƒ…å°±æ˜¯å…ˆæŠŠ XML é…ç½®æ–‡ä»¶åŠ è¼‰åˆ°å…§å­˜ä¸­ï¼Œå†å»è§£æå®ƒï¼Œå†å»ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>ä¸€æ­¥ä¸€æ­¥ä¾†å§ï¼Œå…ˆä¾†çœ‹ XML æ–‡ä»¶å¦‚ä½•è¢«åŠ å…¥åˆ°å…§å­˜ä¸­å»ã€‚</p><h2 class=pgc-h-arrow-right>3.æ–‡ä»¶è®€å–</h2><p>æ–‡ä»¶è®€å–åœ¨ Spring ä¸­å¾ˆå¸¸è¦‹ï¼Œä¹Ÿç®—æ˜¯ä¸€å€‹æ¯”è¼ƒåŸºæœ¬çš„åŠŸèƒ½ï¼Œè€Œä¸” Spring æä¾›çš„æ–‡ä»¶åŠ è¼‰æ–¹å¼ï¼Œä¸åƒ…åƒ…åœ¨ Spring æ¡†æ¶ä¸­å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘å€‘åœ¨é …ç›®ä¸­æœ‰å…¶ä»–æ–‡ä»¶åŠ è¼‰éœ€æ±‚ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p><p>é¦–å…ˆï¼ŒSpring ä¸­ä½¿ç”¨ Resource æ¥å£ä¾†å°è£åº•å±¤è³‡æºï¼ŒResource æ¥å£æœ¬èº«å¯¦ç¾è‡ª InputStreamSource æ¥å£ï¼š</p><div class=pgc-img><img alt="Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f84645784a434e5e925752a6dcf83cb7><p class=pgc-img-caption></p></div><p>æˆ‘å€‘ä¾†çœ‹ä¸‹é€™å…©å€‹æ¥å£çš„å®šç¾©ï¼š</p><pre><code>publicÂ interfaceÂ InputStreamSourceÂ {Â InputStreamÂ getInputStream()Â throwsÂ IOException;}publicÂ interfaceÂ ResourceÂ extendsÂ InputStreamSourceÂ {Â booleanÂ exists();Â defaultÂ booleanÂ isReadable()Â {Â Â returnÂ exists();Â }Â defaultÂ booleanÂ isOpen()Â {Â Â returnÂ false;Â }Â defaultÂ booleanÂ isFile()Â {Â Â returnÂ false;Â }Â URLÂ getURL()Â throwsÂ IOException;Â URIÂ getURI()Â throwsÂ IOException;Â FileÂ getFile()Â throwsÂ IOException;Â defaultÂ ReadableByteChannelÂ readableChannel()Â throwsÂ IOExceptionÂ {Â Â returnÂ Channels.newChannel(getInputStream());Â }Â longÂ contentLength()Â throwsÂ IOException;Â longÂ lastModified()Â throwsÂ IOException;Â ResourceÂ createRelative(StringÂ relativePath)Â throwsÂ IOException;Â @NullableÂ StringÂ getFilename();Â StringÂ getDescription();}</code></pre><p>ä»£ç¢¼å€’ä¸é›£ï¼Œæˆ‘ä¾†ç¨å¾®è§£é‡‹ä¸‹ï¼š</p><ol start=1><li>InputStreamSource é¡åªæä¾›äº†ä¸€å€‹ getInputStream æ–¹æ³•ï¼Œè©²æ–¹æ³•è¿”å›ä¸€å€‹ InputStreamï¼Œä¹Ÿå°±æ˜¯èªªï¼ŒInputStreamSource æœƒå°‡å‚³å…¥çš„ File ç­‰è³‡æºï¼Œå°è£æˆä¸€å€‹ InputStream å†é‡æ–°è¿”å›ã€‚</li><li>Resource æ¥å£å¯¦ç¾äº† InputStreamSource æ¥å£ï¼Œä¸¦ä¸”å°è£äº† Spring å…§éƒ¨å¯èƒ½æœƒç”¨åˆ°çš„åº•å±¤è³‡æºï¼Œå¦‚ Fileã€URL ä»¥åŠ classpath ç­‰ã€‚</li><li>exists æ–¹æ³•ç”¨ä¾†åˆ¤æ–·è³‡æºæ˜¯å¦å­˜åœ¨ã€‚</li><li>isReadable æ–¹æ³•ç”¨ä¾†åˆ¤æ–·è³‡æºæ˜¯å¦å¯è®€ã€‚</li><li>isOpen æ–¹æ³•ç”¨ä¾†åˆ¤æ–·è³‡æºæ˜¯å¦æ‰“é–‹ã€‚</li><li>isFile æ–¹æ³•ç”¨ä¾†åˆ¤æ–·è³‡æºæ˜¯å¦æ˜¯ä¸€å€‹æ–‡ä»¶ã€‚</li><li>getURL/getURI/getFile/readableChannel åˆ†åˆ¥è¡¨ç¤ºç²å–è³‡æºå°æ‡‰çš„ URL/URI/File ä»¥åŠå°‡è³‡æºè½‰ç‚º ReadableByteChannel é€šé“ã€‚</li><li>contentLength è¡¨ç¤ºç²å–è³‡æºçš„å¤§å°ã€‚</li><li>lastModified è¡¨ç¤ºç²å–è³‡æºçš„æœ€å¾Œä¿®æ”¹æ™‚é–“ã€‚</li><li>createRelative è¡¨ç¤ºæ ¹æ“šç•¶å‰è³‡æºå‰µå»ºä¸€å€‹ç›¸å°è³‡æºã€‚</li><li>getFilename è¡¨ç¤ºç²å–æ–‡ä»¶åã€‚</li><li>getDescription è¡¨ç¤ºåœ¨è³‡æºå‡ºéŒ¯æ™‚ï¼Œè©³ç´°æ‰“å°å‡ºå‡ºéŒ¯çš„æ–‡ä»¶ã€‚</li></ol><p>ç•¶æˆ‘å€‘åŠ è¼‰ä¸åŒè³‡æºæ™‚ï¼Œå°æ‡‰äº† Resource çš„ä¸åŒå¯¦ç¾é¡ï¼Œä¾†çœ‹ä¸‹ Resource çš„ç¹¼æ‰¿é—œä¿‚ï¼š</p><div class=pgc-img><img alt="Spring æºç¢¼ç¬¬ä¸€ç¯‡é–‹æ•´ï¼é…ç½®æ–‡ä»¶æ˜¯æ€éº¼åŠ è¼‰çš„ï¼Ÿ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4f870e802797400dae9960fcfbc7997e><p class=pgc-img-caption></p></div><p>å¯ä»¥çœ‹åˆ°ï¼Œé‡å°ä¸åŒé¡å‹çš„æ•¸æ“šæºï¼Œéƒ½æœ‰å„è‡ªçš„å¯¦ç¾ï¼Œæˆ‘å€‘é€™è£¡ä¾†é‡é»çœ‹ä¸‹ ClassPathResource çš„å¯¦ç¾æ–¹å¼ã€‚</p><p>ClassPathResource æºç¢¼æ¯”è¼ƒé•·ï¼Œæˆ‘é€™è£¡æŒ‘ä¸€äº›é—œéµéƒ¨åˆ†ä¾†å’Œå¤§å®¶åˆ†äº«ï¼š</p><pre><code>publicÂ classÂ ClassPathResourceÂ extendsÂ AbstractFileResolvingResourceÂ {Â privateÂ finalÂ StringÂ path;Â @NullableÂ privateÂ ClassLoaderÂ classLoader;Â @NullableÂ privateÂ Class&lt;?&gt;Â clazz;Â publicÂ ClassPathResource(StringÂ path)Â {Â Â this(path,Â (ClassLoader)Â null);Â }Â publicÂ ClassPathResource(StringÂ path,Â @NullableÂ ClassLoaderÂ classLoader)Â {Â Â Assert.notNull(path,Â "PathÂ mustÂ notÂ beÂ null");Â Â StringÂ pathToUseÂ =Â StringUtils.cleanPath(path);Â Â ifÂ (pathToUse.startsWith("/"))Â {Â Â Â pathToUseÂ =Â pathToUse.substring(1);Â Â }Â Â this.pathÂ =Â pathToUse;Â Â this.classLoaderÂ =Â (classLoaderÂ !=Â nullÂ ?Â classLoaderÂ :Â ClassUtils.getDefaultClassLoader());Â }Â publicÂ ClassPathResource(StringÂ path,Â @NullableÂ Class&lt;?&gt;Â clazz)Â {Â Â Assert.notNull(path,Â "PathÂ mustÂ notÂ beÂ null");Â Â this.pathÂ =Â StringUtils.cleanPath(path);Â Â this.clazzÂ =Â clazz;Â }Â publicÂ finalÂ StringÂ getPath()Â {Â Â returnÂ this.path;Â }Â @NullableÂ publicÂ finalÂ ClassLoaderÂ getClassLoader()Â {Â Â returnÂ (this.clazzÂ !=Â nullÂ ?Â this.clazz.getClassLoader()Â :Â this.classLoader);Â }Â @OverrideÂ publicÂ booleanÂ exists()Â {Â Â returnÂ (resolveURL()Â !=Â null);Â }Â @NullableÂ protectedÂ URLÂ resolveURL()Â {Â Â ifÂ (this.clazzÂ !=Â null)Â {Â Â Â returnÂ this.clazz.getResource(this.path);Â Â }Â Â elseÂ ifÂ (this.classLoaderÂ !=Â null)Â {Â Â Â returnÂ this.classLoader.getResource(this.path);Â Â }Â Â elseÂ {Â Â Â returnÂ ClassLoader.getSystemResource(this.path);Â Â }Â }Â @OverrideÂ publicÂ InputStreamÂ getInputStream()Â throwsÂ IOExceptionÂ {Â Â InputStreamÂ is;Â Â ifÂ (this.clazzÂ !=Â null)Â {Â Â Â isÂ =Â this.clazz.getResourceAsStream(this.path);Â Â }Â Â elseÂ ifÂ (this.classLoaderÂ !=Â null)Â {Â Â Â isÂ =Â this.classLoader.getResourceAsStream(this.path);Â Â }Â Â elseÂ {Â Â Â isÂ =Â ClassLoader.getSystemResourceAsStream(this.path);Â Â }Â Â ifÂ (isÂ ==Â null)Â {Â Â Â throwÂ newÂ FileNotFoundException(getDescription()Â +Â "Â cannotÂ beÂ openedÂ becauseÂ itÂ doesÂ notÂ exist");Â Â }Â Â returnÂ is;Â }Â @OverrideÂ publicÂ URLÂ getURL()Â throwsÂ IOExceptionÂ {Â Â URLÂ urlÂ =Â resolveURL();Â Â ifÂ (urlÂ ==Â null)Â {Â Â Â throwÂ newÂ FileNotFoundException(getDescription()Â +Â "Â cannotÂ beÂ resolvedÂ toÂ URLÂ becauseÂ itÂ doesÂ notÂ exist");Â Â }Â Â returnÂ url;Â }Â @OverrideÂ publicÂ ResourceÂ createRelative(StringÂ relativePath)Â {Â Â StringÂ pathToUseÂ =Â StringUtils.applyRelativePath(this.path,Â relativePath);Â Â returnÂ (this.clazzÂ !=Â nullÂ ?Â newÂ ClassPathResource(pathToUse,Â this.clazz)Â :Â Â Â Â newÂ ClassPathResource(pathToUse,Â this.classLoader));Â }Â @OverrideÂ @NullableÂ publicÂ StringÂ getFilename()Â {Â Â returnÂ StringUtils.getFilename(this.path);Â }Â @OverrideÂ publicÂ StringÂ getDescription()Â {Â Â StringBuilderÂ builderÂ =Â newÂ StringBuilder("classÂ pathÂ resourceÂ [");Â Â StringÂ pathToUseÂ =Â this.path;Â Â ifÂ (this.clazzÂ !=Â nullÂ &amp;&amp;Â !pathToUse.startsWith("/"))Â {Â Â Â builder.append(ClassUtils.classPackageAsResourcePath(this.clazz));Â Â Â builder.append('/');Â Â }Â Â ifÂ (pathToUse.startsWith("/"))Â {Â Â Â pathToUseÂ =Â pathToUse.substring(1);Â Â }Â Â builder.append(pathToUse);Â Â builder.append(']');Â Â returnÂ builder.toString();Â }}</code></pre><ol start=1><li>é¦–å…ˆï¼ŒClassPathResource çš„æ§‹é€ æ–¹æ³•æœ‰å››å€‹ï¼Œä¸€å€‹å·²ç¶“éæœŸçš„æ–¹æ³•æˆ‘é€™è£¡æ²’æœ‰åˆ—å‡ºä¾†ã€‚å¦å¤–ä¸‰å€‹ï¼Œæˆ‘å€‘ä¸€èˆ¬èª¿ç”¨ä¸€å€‹åƒæ•¸çš„å³å¯ï¼Œä¹Ÿå°±æ˜¯å‚³å…¥æ–‡ä»¶è·¯å¾‘å³å¯ï¼Œå®ƒå…§éƒ¨æœƒèª¿ç”¨å¦å¤–ä¸€å€‹é‡è¼‰çš„æ–¹æ³•ï¼Œçµ¦ classloader è³¦ä¸Šå€¼ï¼ˆå› ç‚ºåœ¨å¾Œé¢è¦é€šé classloader å»è®€å–æ–‡ä»¶ï¼‰ã€‚</li><li>åœ¨ ClassPathResource åˆå§‹åŒ–çš„éç¨‹ä¸­ï¼Œæœƒå…ˆèª¿ç”¨ StringUtils.cleanPath æ–¹æ³•å°å‚³å…¥çš„è·¯å¾‘é€²è¡Œæ¸…ç†ï¼Œæ‰€è¬‚çš„è·¯å¾‘æ¸…ç†ï¼Œå°±æ˜¯è™•ç†è·¯å¾‘ä¸­çš„ç›¸å°åœ°å€ã€Windows ç³»çµ±ä¸‹çš„ \\ è®Šç‚º / ç­‰ã€‚</li><li>getPath æ–¹æ³•ç”¨ä¾†è¿”å›æ–‡ä»¶è·¯å¾‘ï¼Œé€™æ˜¯ä¸€å€‹ç›¸å°è·¯å¾‘ï¼Œä¸åŒ…å« classpathã€‚</li><li>resolveURL æ–¹æ³•è¡¨ç¤ºè¿”å›è³‡æºçš„ URLï¼Œè¿”å›çš„æ™‚å€™å„ªå…ˆç”¨ Class.getResource åŠ è¼‰ï¼Œç„¶å¾Œæ‰æœƒç”¨ ClassLoader.getResource åŠ è¼‰ï¼Œé—œæ–¼ Class.getResource å’Œ ClassLoader.getResource çš„å€åˆ¥ï¼Œåˆèƒ½å¯«ä¸€ç¯‡æ–‡ç« å‡ºä¾†ï¼Œæˆ‘é€™è£¡å°±å¤§æ¦‚èªªä¸‹ï¼ŒClass.getResource æœ€çµ‚é‚„æ˜¯æœƒèª¿ç”¨ ClassLoader.getResourceï¼Œåªä¸é Class.getResource æœƒå…ˆå°è·¯å¾‘é€²è¡Œè™•ç†ã€‚</li><li>getInputStream è®€å–è³‡æºï¼Œä¸¦è¿”å› InputStream å°è±¡ã€‚</li><li>createRelative æ–¹æ³•æ˜¯æ ¹æ“šç•¶å‰çš„è³‡æºï¼Œå†å‰µå»ºä¸€å€‹ç›¸å°è³‡æºã€‚</li></ol><p>é€™æ˜¯ ClassPathResourceï¼Œå¦å¤–ä¸€å€‹å¤§å®¶å¯èƒ½æœƒæ¥è§¸åˆ°çš„ FileSystemResource ï¼Œå°å¤¥ä¼´å€‘å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹å…¶æºç¢¼ï¼Œæ¯” ClassPathResource ç°¡å–®ã€‚</p><p>å¦‚æœä¸æ˜¯ä½¿ç”¨ Springï¼Œæˆ‘å€‘åƒ…åƒ…æƒ³è‡ªå·±åŠ è¼‰ resources ç›®éŒ„ä¸‹çš„è³‡æºï¼Œä¹Ÿå¯ä»¥æ¡ç”¨é€™ç¨®æ–¹å¼ï¼š</p><pre><code>ClassPathResourceÂ resourceÂ =Â newÂ ClassPathResource("beans.xml");InputStreamÂ inputStreamÂ =Â resource.getInputStream();</code></pre><p>æ‹¿åˆ° IO æµä¹‹å¾Œè‡ªè¡Œè§£æå³å¯ã€‚</p><p>åœ¨ Spring æ¡†æ¶ï¼Œæ§‹é€ å‡º Resource å°è±¡ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†é‚„æœƒæŠŠ Resource å°è±¡è½‰ç‚º EncodedResourceï¼Œé€™è£¡æœƒå°è³‡æºé€²è¡Œç·¨ç¢¼è™•ç†ï¼Œç·¨ç¢¼ä¸»è¦é«”ç¾åœ¨ getReader æ–¹æ³•ä¸Šï¼Œåœ¨ç²å– Reader å°è±¡æ™‚ï¼Œå¦‚æœæœ‰ç·¨ç¢¼ï¼Œå‰‡çµ¦å‡ºç·¨ç¢¼æ ¼å¼ï¼š</p><pre><code>publicÂ ReaderÂ getReader()Â throwsÂ IOExceptionÂ {Â ifÂ (this.charsetÂ !=Â null)Â {Â Â returnÂ newÂ InputStreamReader(this.resource.getInputStream(),Â this.charset);Â }Â elseÂ ifÂ (this.encodingÂ !=Â null)Â {Â Â returnÂ newÂ InputStreamReader(this.resource.getInputStream(),Â this.encoding);Â }Â elseÂ {Â Â returnÂ newÂ InputStreamReader(this.resource.getInputStream());Â }}</code></pre><p>æ‰€æœ‰é€™ä¸€åˆ‡æå®šä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†å°±æ˜¯é€šé XmlBeanDefinitionReader å»åŠ è¼‰ Resource äº†ã€‚</p><h2 class=pgc-h-arrow-right>4.å°çµ</h2><p>å¥½å•¦ï¼Œä»Šå¤©ä¸»è¦å’Œå°å¤¥ä¼´å€‘åˆ†äº«ä¸€ä¸‹ Spring ä¸­çš„è³‡æºåŠ è¼‰å•é¡Œï¼Œé€™æ˜¯å®¹å™¨å•Ÿå‹•çš„èµ·é»ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘å€‘ä¾†çœ‹ XML æ–‡ä»¶çš„è§£æã€‚</p><p>å¦‚æœå°å¤¥ä¼´å€‘è¦ºå¾—æœ‰æ”¶ç©«ï¼Œè¨˜å¾—é»å€‹åœ¨çœ‹é¼“å‹µä¸‹é¬†å“¥å“¦ï½</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>é…ç½®æ–‡ä»¶</a></li><li><a>Spring</a></li><li><a>æºç¢¼</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ad16f9.html alt="Spring Boot å…¥é–€ç³»åˆ—ï¼ˆäºŒåäº”ï¼‰è®€å–é…ç½®æ–‡ä»¶çš„ä¸‰ç¨®æ–¹å¼" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ad16f9.html title="Spring Boot å…¥é–€ç³»åˆ—ï¼ˆäºŒåäº”ï¼‰è®€å–é…ç½®æ–‡ä»¶çš„ä¸‰ç¨®æ–¹å¼">Spring Boot å…¥é–€ç³»åˆ—ï¼ˆäºŒåäº”ï¼‰è®€å–é…ç½®æ–‡ä»¶çš„ä¸‰ç¨®æ–¹å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3312eb6.html alt="Spring Boot åœ¨å•Ÿå‹•æ™‚é€²è¡Œé…ç½®æ–‡ä»¶åŠ è§£å¯†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/677858a9ea4e455e840b8fb8dc7656b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3312eb6.html title="Spring Boot åœ¨å•Ÿå‹•æ™‚é€²è¡Œé…ç½®æ–‡ä»¶åŠ è§£å¯†">Spring Boot åœ¨å•Ÿå‹•æ™‚é€²è¡Œé…ç½®æ–‡ä»¶åŠ è§£å¯†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/07c6935.html alt="Spring Booté…ç½®æ–‡ä»¶ymlæ ¼å¼è©³è§£" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c60ba743367141da8cddac4cb8bd7412 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/07c6935.html title="Spring Booté…ç½®æ–‡ä»¶ymlæ ¼å¼è©³è§£">Spring Booté…ç½®æ–‡ä»¶ymlæ ¼å¼è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/55b5b18.html alt=Springå­¸ç¿’ç¸½çµï¼ˆ3ï¼‰â€”â€”Springé…ç½®æ–‡ä»¶è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/43600001bb8d069efbc5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/55b5b18.html title=Springå­¸ç¿’ç¸½çµï¼ˆ3ï¼‰â€”â€”Springé…ç½®æ–‡ä»¶è©³è§£>Springå­¸ç¿’ç¸½çµï¼ˆ3ï¼‰â€”â€”Springé…ç½®æ–‡ä»¶è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3c09a7c2.html alt=ç¶²ç«™æºç¢¼ï¼Œæœå‹™å™¨ï¼ŒåŸŸåä¸‰è€…æ˜¯ä»€éº¼é—œä¿‚ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S1xQDgS3bmZd8q style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3c09a7c2.html title=ç¶²ç«™æºç¢¼ï¼Œæœå‹™å™¨ï¼ŒåŸŸåä¸‰è€…æ˜¯ä»€éº¼é—œä¿‚ï¼Ÿ>ç¶²ç«™æºç¢¼ï¼Œæœå‹™å™¨ï¼ŒåŸŸåä¸‰è€…æ˜¯ä»€éº¼é—œä¿‚ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/000afa08.html alt="Spring Boot 2.xåŸºç¤æ•™ç¨‹ï¼šSwaggeræ¥å£åˆ†é¡èˆ‡å„å…ƒç´ æ’åºå•é¡Œè©³è§£" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/daa2cfd29ec34306a4be6f3f257b824b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/000afa08.html title="Spring Boot 2.xåŸºç¤æ•™ç¨‹ï¼šSwaggeræ¥å£åˆ†é¡èˆ‡å„å…ƒç´ æ’åºå•é¡Œè©³è§£">Spring Boot 2.xåŸºç¤æ•™ç¨‹ï¼šSwaggeræ¥å£åˆ†é¡èˆ‡å„å…ƒç´ æ’åºå•é¡Œè©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6cfd4e0e.html alt="Spring æ ¸å¿ƒçŸ¥è­˜è¬›è§£ï¼Œå¤ªç°¡å–®å•¦" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6cfd4e0e.html title="Spring æ ¸å¿ƒçŸ¥è­˜è¬›è§£ï¼Œå¤ªç°¡å–®å•¦">Spring æ ¸å¿ƒçŸ¥è­˜è¬›è§£ï¼Œå¤ªç°¡å–®å•¦</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/090306a0.html alt="[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a8c6dbd7c51741f5a76262e8e2c7a670 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/090306a0.html title="[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†">[Spring] æ·±å…¥ç­è§£äº‹å‹™åŸç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html alt="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html title="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†">ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1678b1c4.html alt=ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/433259b5-1936-4cee-ab74-70aef36536ee style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1678b1c4.html title=ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç†>ï¼ˆæ”¶è—ï¼‰Springäº‹å‹™å°ˆé¡Œï¼šäº‹å‹™çš„åŸºæœ¬æ¦‚å¿µï¼ŒMysqläº‹å‹™è™•ç†åŸç†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d3c48fcc.html alt=Springè²æ˜å¼äº‹å‹™è™•ç†çš„å¯¦ç¾åŸç†ï¼Œä¾†è‡ªé¢è©¦å®˜çš„çª®è¿½æ‹·å• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d3c48fcc.html title=Springè²æ˜å¼äº‹å‹™è™•ç†çš„å¯¦ç¾åŸç†ï¼Œä¾†è‡ªé¢è©¦å®˜çš„çª®è¿½æ‹·å•>Springè²æ˜å¼äº‹å‹™è™•ç†çš„å¯¦ç¾åŸç†ï¼Œä¾†è‡ªé¢è©¦å®˜çš„çª®è¿½æ‹·å•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a5fae7e.html alt=HashMapæºç¢¼åˆ†æ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4852d5083ec340be9f50ded10636e4b0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a5fae7e.html title=HashMapæºç¢¼åˆ†æ>HashMapæºç¢¼åˆ†æ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e590a5d4.html alt="thinkphp6å­¸ç¿’æ•™ç¨‹èˆ‡æºç¢¼ tp6é–‹æºCMSç³»çµ±æºç¢¼ç ”ç©¶" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5ab1d67934084ab6bd585f4c84094c76 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e590a5d4.html title="thinkphp6å­¸ç¿’æ•™ç¨‹èˆ‡æºç¢¼ tp6é–‹æºCMSç³»çµ±æºç¢¼ç ”ç©¶">thinkphp6å­¸ç¿’æ•™ç¨‹èˆ‡æºç¢¼ tp6é–‹æºCMSç³»çµ±æºç¢¼ç ”ç©¶</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html alt=Win10ç³»çµ±å¦‚ä½•åˆªé™¤ç”¨æˆ¶é…ç½®æ–‡ä»¶ï¼Ÿé€™å€‹æ–¹æ³•éº»ç…©æ”¶å¥½ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5d9b3c531d8e4d64ac1f5582c2a6867e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html title=Win10ç³»çµ±å¦‚ä½•åˆªé™¤ç”¨æˆ¶é…ç½®æ–‡ä»¶ï¼Ÿé€™å€‹æ–¹æ³•éº»ç…©æ”¶å¥½>Win10ç³»çµ±å¦‚ä½•åˆªé™¤ç”¨æˆ¶é…ç½®æ–‡ä»¶ï¼Ÿé€™å€‹æ–¹æ³•éº»ç…©æ”¶å¥½</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html alt="Windows 10 KB4549951è£œä¸è®“ç”¨æˆ¶é…ç½®æ–‡ä»¶ç¼ºå¤±æ•…éšœå†æ¬¡ç™¼ç”Ÿ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Ry0yIZwBOBWLcl style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html title="Windows 10 KB4549951è£œä¸è®“ç”¨æˆ¶é…ç½®æ–‡ä»¶ç¼ºå¤±æ•…éšœå†æ¬¡ç™¼ç”Ÿ">Windows 10 KB4549951è£œä¸è®“ç”¨æˆ¶é…ç½®æ–‡ä»¶ç¼ºå¤±æ•…éšœå†æ¬¡ç™¼ç”Ÿ</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>