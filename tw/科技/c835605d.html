<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>互聯網公司面試經，你不得不知道的哈希 | 极客快訊</title><meta property="og:title" content="互聯網公司面試經，你不得不知道的哈希 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/80891c3b3b5d4f04b84078744a653aeb"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c835605d.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c835605d.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c835605d.html><meta property="article:published_time" content="2020-11-14T21:07:43+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:43+08:00"><meta name=Keywords content><meta name=description content="互聯網公司面試經，你不得不知道的哈希"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/c835605d.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>互聯網公司面試經，你不得不知道的哈希</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><pre>來源：公眾號崖邊小生 ，作者崖邊小生</pre><p class=ql-align-justify><strong>前言</strong></p><p>哈希表，又名散列表。是非常常用的一種數據結構，C#的Hashtable、字典，Java的HashMap，Redis的Hash，其底層實現都是散列表。</p><p>而在一些互聯網公司的面試中，更是技術面試官們必問的一道題目。其提問方式無非以下幾種。</p><p>本文將簡單瞭解哈希表(散列表)這種數據結構。</p><p class=ql-align-justify><strong>一、散列表</strong></p><p class=ql-align-justify><strong>1.1 散列表</strong></p><p>散列表(哈希表)，其思想主要是基於數組支持按照下標隨機訪問數據時間複雜度為O(1)的特性。可是說是數組的一種擴展。</p><p>假設，我們為了方便記錄某高校數學專業的所有學生的信息。要求可以按照學號(學號格式為:入學時間+年級+專業+專業內自增序號，如2011 1101 0001)能夠快速找到某個學生的信息。</p><p>這個時候我們可以取學號的自增序號部分，即後四位作為數組的索引下標，把學生相應的信息存儲到對應的空間內即可。</p><div class=pgc-img><img alt=互聯網公司面試經，你不得不知道的哈希 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/80891c3b3b5d4f04b84078744a653aeb><p class=pgc-img-caption></p></div><p>如上圖所示，我們把學號作為key，通過截取學號後四位的函數計算後得到索引下標，將數據存儲到數組中。</p><p>當我們按照鍵值(學號)查找時，只需要再次計算出索引下標，然後取出相應數據即可。以上便是散列思想。</p><p class=ql-align-justify><strong>1.2 散列函數</strong></p><p>上面的例子中，截取學號後四位的函數即是一個簡單的散列函數。</p><pre class=ql-align-justify>//散列函數 偽代碼int Hash(string key) { // 獲取後四位字符 string hashValue =int.parse(key.Substring(key.Length-4, 4)); // 將後兩位字符轉換為整數 return hashValue;}</pre><p>在這裡散列函數的作用就是講key值映射成數組的索引下標。關於散列函數的設計方法有很多，如:直接尋址法、數字分析法、隨機數法等等。</p><p>但即使是再優秀的設計方法也不能避免散列衝突。在散列表中散列函數不應設計太複雜。</p><p class=ql-align-justify><strong>1.3 散列衝突</strong></p><div class=pgc-img><img alt=互聯網公司面試經，你不得不知道的哈希 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c3829d333ef44de79423207e0b147e63><p class=pgc-img-caption></p></div><p class=ql-align-justify>散列函數具有確定性和不確定性。</p><ul><li class=ql-align-justify>確定性:哈希的散列值不同，那麼哈希的原始輸入也就不同。</li><li class=ql-align-justify>即:key1=key2,那麼hash(key1)=hash(key2)。</li><li class=ql-align-justify>不確定性:同一個散列值很有可能對應多個不同的原始輸入。</li><li class=ql-align-justify>即:key1≠key2，hash(key1)=hash(key2)。</li></ul><p>散列衝突，即key1≠key2，hash(key1)=hash(key2)的情況。</p><p>散列衝突是不可避免的，如果我們key的長度為100，而數組的索引數量只有50，那麼再優秀的算法也無法避免散列衝突。</p><p>關於散列衝突也有很多解決辦法，這裡簡單複習兩種：<strong>開放尋址法</strong>和<strong>鏈表法</strong>。</p><p class=ql-align-justify><strong>1.3.1 開放尋址法</strong></p><p class=ql-align-justify>開放尋址法的核心思想是，如果出現了散列衝突，我們就重新探測一一個空閒位置，將其插入。</p><p class=ql-align-justify>比如，我們可以使用線性探測法。</p><p class=ql-align-justify>當我們往散列表中插入數據時，如果某個數據經過散列函數散列之後，存儲位置已經被佔用了，我們就從當前位置開始，依次往後查找，看是否有空閒位置；如果遍歷到尾部都沒有找到空閒的位置，那麼我們就再從表頭開始找，直到找到為止。</p><div class=pgc-img><img alt=互聯網公司面試經，你不得不知道的哈希 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/177dc281123740c394960700a2fc0bc3><p class=pgc-img-caption></p></div><p class=ql-align-justify>散列表中查找元素的時候，我們通過散列函數求出要查找元素的鍵值對應的散列值，然後比較數組中下標為散列值的元素和要查找的元素。</p><p class=ql-align-justify>如果相等，則說明就是我們要找的元素；否則就順序往後依次查找。</p><p class=ql-align-justify>如果遍歷到數組中的空閒位置還沒有找到，就說明要查找的元素並沒有在散列表中。</p><p class=ql-align-justify>對於刪除操作稍微有些特別，不能單純地把要刪除的元素設置為空。</p><p class=ql-align-justify>因為在查找的時候，一旦我們通過線性探測方法，找到一個空閒位置，我們就可以認定散列表中不存在這個數據。</p><p class=ql-align-justify>但是，如果這個空閒位置是我們後來刪除的，就會導致原來的查找算法失效。</p><p class=ql-align-justify>這裡我們可以將刪除的元素，特殊標記為 deleted。當線性探測查找的時候，遇到標記為 deleted 的空間，並不是停下來，而是繼續往下探測。</p><p class=ql-align-justify>線性探測法存在很大問題。當散列表中插入的數據越來越多時，其散列衝突的可能性就越大，極端情況下甚至要探測整個散列表,因此最壞時間複雜度為O(N)。</p><p class=ql-align-justify>在開放尋址法中，除了線性探測法，我們還可以二次探測和雙重散列等方式。</p><p class=ql-align-justify><strong>1.3.2 鏈表法(拉鍊法)</strong></p><p class=ql-align-justify>簡單來講就是在衝突的位置拉一條鏈表來存儲數據。</p><p class=ql-align-justify>鏈表法是一種比較常用的散列衝突解決辦法，Redis使用的就是鏈表法來解決散列衝突。</p><p class=ql-align-justify>鏈表法的原理是:如果遇到衝突，他就會在原地址新建一個空間，然後以鏈表結點的形式插入到該空間。</p><p class=ql-align-justify>當插入的時候，我們只需要通過散列函數計算出對應的散列槽位，將其插入到對應鏈表中即可。</p><div class=pgc-img><img alt=互聯網公司面試經，你不得不知道的哈希 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0cbfc55aa6fc481ebd3fb8fa5861790f><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>1.3.3 負載因子與rehash</strong></p><p class=ql-align-justify>我們可以使用裝載因子來衡量散列表的“健康狀況”。</p><pre class=ql-align-justify>散列表的負載因子 = 填入表中的元素個數/散列表的長度</pre><p class=ql-align-justify>散列表負載因子越大，代表空閒位置越少，衝突也就越多，散列表的性能會下降。</p><p class=ql-align-justify>對於散列表來說，負載因子過大或過小都不好，負載因子過大，散列表的性能會下降。而負載因子過小，則會造成內存不能合理利用，從而形成內存浪費。</p><p class=ql-align-justify>因此我們為了保證負載因子維持在一個合理的範圍內，要對散列表的大小進行收縮或擴展，即rehash。散列表的rehash過程類似於數組的收縮與擴容。</p><p class=ql-align-justify><strong>1.3.4 開放尋址法與鏈表法比較</strong></p><p class=ql-align-justify>對於開放尋址法解決衝突的散列表，由於數據都存儲在數組中，因此可以有效地利用 CPU 緩存加快查詢速度(數組佔用一塊連續的空間)。</p><p class=ql-align-justify>但是刪除數據的時候比較麻煩，需要特殊標記已經刪除掉的數據。而且，在開放尋址法中，所有的數據都存儲在一個數組中，比起鏈表法來說，衝突的代價更高。</p><p class=ql-align-justify>所以，使用開放尋址法解決衝突的散列表，負載因子的上限不能太大。這也導致這種方法比鏈表法更浪費內存空間。</p><p class=ql-align-justify>對於鏈表法解決衝突的散列表，對內存的利用率比開放尋址法要高。</p><p class=ql-align-justify>因為鏈表結點可以在需要的時候再創建，並不需要像開放尋址法那樣事先申請好。鏈表法比起開放尋址法，對大裝載因子的容忍度更高。</p><p class=ql-align-justify>開放尋址法只能適用裝載因子小於1的情況。接近1時，就可能會有大量的散列衝突，性能會下降很多。</p><p class=ql-align-justify>但對於鏈表法來說，只要散列函數的值隨機均勻，即便裝載因子變成10，也就是鏈表的長度變長了而已，雖然查找效率有所下降，但是比起順序查找還是快很多。</p><p class=ql-align-justify>但是，鏈表因為要存儲指針，所以對於比較小的對象的存儲，是比較消耗內存的，而且鏈表中的結點是零散分佈在內存中的，不是連續的，所以對CPU緩存是不友好的，這對於執行效率有一定的影響。</p><p class=ql-align-justify><strong>小結</strong></p><p class=ql-align-justify>對於一些一線城市的互聯網公司，技術面試官比較喜歡考察一個人的基礎，像哈希這種經典而又應用廣泛的數據結構更是老生常談之題目。</p><p class=ql-align-justify>大致提問方式無非以下幾種</p><ol><li class=ql-align-justify>C#字典（java hashmap或者Redis hash）的底層實現方式</li><li class=ql-align-justify>說一下什麼是哈希表(散列表)</li><li class=ql-align-justify>哈希如何解決碰撞(散列如何解決衝突)</li></ol></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>互聯網</a></li><li><a>面試經</a></li><li><a>哈希</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/50cb2e79.html alt=互聯網再現刪庫事故—教育培訓機構該如何選擇Saas合作伙伴 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bc2ebf764d80448491809f9f92d58473 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/50cb2e79.html title=互聯網再現刪庫事故—教育培訓機構該如何選擇Saas合作伙伴>互聯網再現刪庫事故—教育培訓機構該如何選擇Saas合作伙伴</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f5131775.html alt=C++哈希表是如何解決衝突的? class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5ac4410086e640ea82846bde1dd72c65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f5131775.html title=C++哈希表是如何解決衝突的?>C++哈希表是如何解決衝突的?</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2ea7884b.html alt=java程序員注意：少有人知的哈希衝突解決策略，學到就是賺到 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/54d45b20ef6a4a3f960411db61474538 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2ea7884b.html title=java程序員注意：少有人知的哈希衝突解決策略，學到就是賺到>java程序員注意：少有人知的哈希衝突解決策略，學到就是賺到</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html alt=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3609570de59a49a9be5667dd9a637f65 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/37396ded.html title=數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心>數據結構系列：哈希表？這涉及的是“加密/區塊鏈”等技術的核心</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/01b66ad2.html alt="漫畫 | 什麼是散列表（哈希表）？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/e8a38bd3470c4c06befa051c4adbf665 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/01b66ad2.html title="漫畫 | 什麼是散列表（哈希表）？">漫畫 | 什麼是散列表（哈希表）？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b312402f.html alt=程序員面試中常見的哈希表，到底是什麼？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/35e957fe50484e03a497b640373bc5ec style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b312402f.html title=程序員面試中常見的哈希表，到底是什麼？>程序員面試中常見的哈希表，到底是什麼？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/92675aff.html alt=關於哈希表，你該瞭解這些 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8d18861a74ac4577abd03b0064a1016b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/92675aff.html title=關於哈希表，你該瞭解這些>關於哈希表，你該瞭解這些</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/21474a0e.html alt=一張圖搞定對哈希表的理解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4a49c66caf9044e7b086f48696b04283 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/21474a0e.html title=一張圖搞定對哈希表的理解>一張圖搞定對哈希表的理解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html alt=數據結構一(哈希表)想進大廠的必備知識點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/86ad7a2f62cc48f98bbe53b42ca4bf9a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e03941dc.html title=數據結構一(哈希表)想進大廠的必備知識點>數據結構一(哈希表)想進大廠的必備知識點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a9ce2034.html alt=互聯網撞擊資本，改變命運的時代來臨了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/be0b6c28921f486b9f1b3e1e73088302 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a9ce2034.html title=互聯網撞擊資本，改變命運的時代來臨了>互聯網撞擊資本，改變命運的時代來臨了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d0cd1e37.html alt=國家互聯網應急中心：大量APP有讀寫用戶文件等異常行為 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d0cd1e37.html title=國家互聯網應急中心：大量APP有讀寫用戶文件等異常行為>國家互聯網應急中心：大量APP有讀寫用戶文件等異常行為</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5fde51d0.html alt=量子互聯網發展的重要里程碑：混合量子網絡誕生！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/47010001a51dbcedc23a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5fde51d0.html title=量子互聯網發展的重要里程碑：混合量子網絡誕生！>量子互聯網發展的重要里程碑：混合量子網絡誕生！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8800f439.html alt=互聯網公司高頻面試題目：一網打盡二叉樹！（三十三道題目精講） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8800f439.html title=互聯網公司高頻面試題目：一網打盡二叉樹！（三十三道題目精講）>互聯網公司高頻面試題目：一網打盡二叉樹！（三十三道題目精講）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1cf46c57.html alt=互聯網公司如何備戰雙十一？為你揭祕京東數科團隊5大核心鏈路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f328e237e0fe40cd8fabc6272117f9bf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1cf46c57.html title=互聯網公司如何備戰雙十一？為你揭祕京東數科團隊5大核心鏈路>互聯網公司如何備戰雙十一？為你揭祕京東數科團隊5大核心鏈路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9be3efd7.html alt=數字化演進：從互聯網+到全鏈路數字化 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6c7d0a20c6454717944d6921ce56a06e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9be3efd7.html title=數字化演進：從互聯網+到全鏈路數字化>數字化演進：從互聯網+到全鏈路數字化</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>