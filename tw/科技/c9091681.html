<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>MySQL 學習筆記 | 极客快訊</title><meta property="og:title" content="MySQL 學習筆記 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c9091681.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/c9091681.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/c9091681.html><meta property="article:published_time" content="2020-11-14T21:08:12+08:00"><meta property="article:modified_time" content="2020-11-14T21:08:12+08:00"><meta name=Keywords content><meta name=description content="MySQL 學習筆記"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/c9091681.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>MySQL 學習筆記</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>MySQL 學習筆記</h1><h3 class=pgc-h-arrow-right>數據庫操作</h3><pre><code>-- 查看當前數據庫    SELECT DATABASE();-- 顯示當前時間、用戶名、數據庫版本    SELECT now(), user(), version();-- 創建庫    CREATE DATABASE[ IF NOT EXISTS] 數據庫名 數據庫選項    數據庫選項：        CHARACTER SET charset_name        COLLATE collation_name-- 查看已有庫    SHOW DATABASES[ LIKE &#39;PATTERN&#39;]-- 查看當前庫信息    SHOW CREATE DATABASE 數據庫名-- 修改庫的選項信息    ALTER DATABASE 庫名 選項信息-- 刪除庫    DROP DATABASE[ IF EXISTS] 數據庫名        同時刪除該數據庫相關的目錄及其目錄內容</code></pre><h3 class=pgc-h-arrow-right>表的操作</h3><pre><code>-- 創建表    CREATE [TEMPORARY] TABLE[ IF NOT EXISTS] [庫名.]表名 ( 表的結構定義 )[ 表選項]        每個字段必須有數據類型        最後一個字段後不能有逗號        TEMPORARY 臨時表，會話結束時表自動消失        對於字段的定義：            字段名 數據類型 [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT &#39;string&#39;]-- 表選項    -- 字符集        CHARSET = charset_name        如果表沒有設定，則使用數據庫字符集    -- 存儲引擎        ENGINE = engine_name        表在管理數據時採用的不同的數據結構，結構不同會導致處理方式、提供的特性操作等不同        常見的引擎：InnoDB MyISAM Memory/Heap BDB Merge Example CSV MaxDB Archive        不同的引擎在保存表的結構和數據時採用不同的方式        MyISAM表文件含義：.frm表定義，.MYD表數據，.MYI表索引        InnoDB表文件含義：.frm表定義，表空間數據和日誌文件        SHOW ENGINES -- 顯示存儲引擎的狀態信息        SHOW ENGINE 引擎名 {LOGS|STATUS} -- 顯示存儲引擎的日誌或狀態信息    -- 自增起始數        AUTO_INCREMENT = 行數    -- 數據文件目錄        DATA DIRECTORY = &#39;目錄&#39;    -- 索引文件目錄        INDEX DIRECTORY = &#39;目錄&#39;    -- 表註釋        COMMENT = &#39;string&#39;    -- 分區選項        PARTITION BY ... (詳細見手冊)-- 查看所有表    SHOW TABLES[ LIKE &#39;pattern&#39;]    SHOW TABLES FROM 表名-- 查看錶機構    SHOW CREATE TABLE 表名 （信息更詳細）    DESC 表名 / DESCRIBE 表名 / EXPLAIN 表名 / SHOW COLUMNS FROM 表名 [LIKE &#39;PATTERN&#39;]    SHOW TABLE STATUS [FROM db_name] [LIKE &#39;pattern&#39;]-- 修改表    -- 修改表本身的選項        ALTER TABLE 表名 表的選項        eg: ALTER TABLE 表名 ENGINE=MYISAM;    -- 對錶進行重命名        RENAME TABLE 原表名 TO 新表名        RENAME TABLE 原表名 TO 庫名.表名 （可將表移動到另一個數據庫）        -- RENAME可以交換兩個表名    -- 修改表的字段機構（13.1.2. ALTER TABLE語法）        ALTER TABLE 表名 操作名        -- 操作名            ADD[ COLUMN] 字段定義       -- 增加字段                AFTER 字段名          -- 表示增加在該字段名後面                FIRST               -- 表示增加在第一個            ADD PRIMARY KEY(字段名)   -- 創建主鍵            ADD UNIQUE [索引名] (字段名)-- 創建唯一索引            ADD INDEX [索引名] (字段名) -- 創建普通索引            DROP[ COLUMN] 字段名      -- 刪除字段            MODIFY[ COLUMN] 字段名 字段屬性     -- 支持對字段屬性進行修改，不能修改字段名(所有原有屬性也需寫上)            CHANGE[ COLUMN] 原字段名 新字段名 字段屬性      -- 支持對字段名修改            DROP PRIMARY KEY    -- 刪除主鍵(刪除主鍵前需刪除其AUTO_INCREMENT屬性)            DROP INDEX 索引名 -- 刪除索引            DROP FOREIGN KEY 外鍵    -- 刪除外鍵-- 刪除表    DROP TABLE[ IF EXISTS] 表名 ...-- 清空表數據    TRUNCATE [TABLE] 表名-- 複製表結構    CREATE TABLE 表名 LIKE 要複製的表名-- 複製表結構和數據    CREATE TABLE 表名 [AS] SELECT * FROM 要複製的表名-- 檢查表是否有錯誤    CHECK TABLE tbl_name [, tbl_name] ... [option] ...-- 優化表    OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...-- 修復表    REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]-- 分析表    ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</code></pre><h3 class=pgc-h-arrow-right>數據操作</h3><pre><code>-- 增    INSERT [INTO] 表名 [(字段列表)] VALUES (值列表)[, (值列表), ...]        -- 如果要插入的值列表包含所有字段並且順序一致，則可以省略字段列表。        -- 可同時插入多條數據記錄！        REPLACE 與 INSERT 完全一樣，可互換。    INSERT [INTO] 表名 SET 字段名=值[, 字段名=值, ...]-- 查    SELECT 字段列表 FROM 表名[ 其他子句]        -- 可來自多個表的多個字段        -- 其他子句可以不使用        -- 字段列表可以用*代替，表示所有字段-- 刪    DELETE FROM 表名[ 刪除條件子句]        沒有條件子句，則會刪除全部-- 改    UPDATE 表名 SET 字段名=新值[, 字段名=新值] [更新條件]</code></pre><h3 class=pgc-h-arrow-right>字符集編碼</h3><pre><code>-- MySQL、數據庫、表、字段均可設置編碼-- 數據編碼與客戶端編碼不需一致SHOW VARIABLES LIKE &#39;character_set_%&#39;   -- 查看所有字符集編碼項    character_set_client        客戶端向服務器發送數據時使用的編碼    character_set_results       服務器端將結果返回給客戶端所使用的編碼    character_set_connection    連接層編碼SET 變量名 = 變量值    SET character_set_client = gbk;    SET character_set_results = gbk;    SET character_set_connection = gbk;SET NAMES GBK;  -- 相當於完成以上三個設置-- 校對集    校對集用以排序    SHOW CHARACTER SET [LIKE &#39;pattern&#39;]/SHOW CHARSET [LIKE &#39;pattern&#39;]   查看所有字符集    SHOW COLLATION [LIKE &#39;pattern&#39;]     查看所有校對集    CHARSET 字符集編碼     設置字符集編碼    COLLATE 校對集編碼     設置校對集編碼</code></pre><h3 class=pgc-h-arrow-right>數據類型（列類型）</h3><p><strong>1. 數值類型</strong></p><pre><code>-- a. 整型 ----------    類型         字節     範圍（有符號位）    tinyint     1字節    -128 ~ 127      無符號位：0 ~ 255    smallint    2字節    -32768 ~ 32767    mediumint   3字節    -8388608 ~ 8388607    int         4字節    bigint      8字節    int(M)  M表示總位數    - 默認存在符號位，unsigned 屬性修改    - 顯示寬度，如果某個數不夠定義字段時設置的位數，則前面以0補填，zerofill 屬性修改        例：int(5)   插入一個數&#39;123&#39;，補填後為&#39;00123&#39;    - 在滿足要求的情況下，越小越好。    - 1表示bool值真，0表示bool值假。MySQL沒有布爾類型，通過整型0和1表示。常用tinyint(1)表示布爾型。-- b. 浮點型 ----------    類型             字節     範圍    float(單精度)     4字節    double(雙精度)    8字節    浮點型既支持符號位 unsigned 屬性，也支持顯示寬度 zerofill 屬性。        不同於整型，前後均會補填0.    定義浮點型時，需指定總位數和小數位數。        float(M, D)     double(M, D)        M表示總位數，D表示小數位數。        M和D的大小會決定浮點數的範圍。不同於整型的固定範圍。        M既表示總位數（不包括小數點和正負號），也表示顯示寬度（所有顯示符號均包括）。        支持科學計數法表示。        浮點數表示近似值。-- c. 定點數 ----------    decimal -- 可變長度    decimal(M, D)   M也表示總位數，D表示小數位數。    保存一個精確的數值，不會發生數據的改變，不同於浮點數的四捨五入。    將浮點數轉換為字符串來保存，每9位數字保存為4個字節。</code></pre><p><strong>2. 字符串類型</strong></p><pre><code>-- a. char, varchar ----------    char    定長字符串，速度快，但浪費空間    varchar 變長字符串，速度慢，但節省空間    M表示能存儲的最大長度，此長度是字符數，非字節數。    不同的編碼，所佔用的空間不同。    char,最多255個字符，與編碼無關。    varchar,最多65535字符，與編碼有關。    一條有效記錄最大不能超過65535個字節。        utf8 最大為21844個字符，gbk 最大為32766個字符，latin1 最大為65532個字符    varchar 是變長的，需要利用存儲空間保存 varchar 的長度，如果數據小於255個字節，則採用一個字節來保存長度，反之需要兩個字節來保存。    varchar 的最大有效長度由最大行大小和使用的字符集確定。    最大有效長度是65532字節，因為在varchar存字符串時，第一個字節是空的，不存在任何數據，然後還需兩個字節來存放字符串的長度，所以有效長度是64432-1-2=65532字節。    例：若一個表定義為 CREATE TABLE tb(c1 int, c2 char(30), c3 varchar(N)) charset=utf8; 問N的最大值是多少？ 答：(65535-1-2-4-30*3)/3-- b. blob, text ----------    blob 二進制字符串（字節字符串）        tinyblob, blob, mediumblob, longblob    text 非二進制字符串（字符字符串）        tinytext, text, mediumtext, longtext    text 在定義時，不需要定義長度，也不會計算總長度。    text 類型在定義時，不可給default值-- c. binary, varbinary ----------    類似於char和varchar，用於保存二進制字符串，也就是保存字節字符串而非字符字符串。    char, varchar, text 對應 binary, varbinary, blob.</code></pre><p><strong>3. 日期時間類型</strong></p><pre><code>一般用整型保存時間戳，因為PHP可以很方便的將時間戳進行格式化。datetime    8字節    日期及時間     1000-01-01 00:00:00 到 9999-12-31 23:59:59date        3字節    日期         1000-01-01 到 9999-12-31timestamp   4字節    時間戳        19700101000000 到 2038-01-19 03:14:07time        3字節    時間         -838:59:59 到 838:59:59year        1字節    年份         1901 - 2155datetime    YYYY-MM-DD hh:mm:sstimestamp   YY-MM-DD hh:mm:ss            YYYYMMDDhhmmss            YYMMDDhhmmss            YYYYMMDDhhmmss            YYMMDDhhmmssdate        YYYY-MM-DD            YY-MM-DD            YYYYMMDD            YYMMDD            YYYYMMDD            YYMMDDtime        hh:mm:ss            hhmmss            hhmmssyear        YYYY            YY            YYYY            YY</code></pre><p><strong>4. 枚舉和集合</strong></p><pre><code>-- 枚舉(enum) ----------enum(val1, val2, val3...)    在已知的值中進行單選。最大數量為65535.    枚舉值在保存時，以2個字節的整型(smallint)保存。每個枚舉值，按保存的位置順序，從1開始逐一遞增。    表現為字符串類型，存儲卻是整型。    NULL值的索引是NULL。    空字符串錯誤值的索引值是0。-- 集合（set） ----------set(val1, val2, val3...)    create table tab ( gender set(&#39;男&#39;, &#39;女&#39;, &#39;無&#39;) );    insert into tab values (&#39;男, 女&#39;);    最多可以有64個不同的成員。以bigint存儲，共8個字節。採取位運算的形式。    當創建表時，SET成員值的尾部空格將自動被刪除。/* 選擇類型 */-- PHP角度1. 功能滿足2. 存儲空間儘量小，處理效率更高3. 考慮兼容問題</code></pre><p><strong>IP存儲</strong></p><pre><code>1. 只需存儲，可用字符串2. 如果需計算，查找等，可存儲為4個字節的無符號int，即unsigned    1) PHP函數轉換        ip2long可轉換為整型，但會出現攜帶符號問題。需格式化為無符號的整型。        利用sprintf函數格式化字符串        sprintf(&#34;%u&#34;, ip2long(&#39;192.168.3.134&#39;));        然後用long2ip將整型轉回IP字符串    2) MySQL函數轉換(無符號整型，UNSIGNED)        INET_ATON(&#39;127.0.0.1&#39;) 將IP轉為整型        INET_NTOA(2130706433) 將整型轉為IP</code></pre><h3 class=pgc-h-arrow-right>列屬性（列約束）</h3><pre><code>1. PRIMARY 主鍵    - 能唯一標識記錄的字段，可以作為主鍵。    - 一個表只能有一個主鍵。    - 主鍵具有唯一性。    - 聲明字段時，用 primary key 標識。        也可以在字段列表之後聲明            例：create table tab ( id int, stu varchar(10), primary key (id));    - 主鍵字段的值不能為null。    - 主鍵可以由多個字段共同組成。此時需要在字段列表後聲明的方法。        例：create table tab ( id int, stu varchar(10), age int, primary key (stu, age));2. UNIQUE 唯一索引（唯一約束）    使得某字段的值也不能重複。3. NULL 約束    null不是數據類型，是列的一個屬性。    表示當前列是否可以為null，表示什麼都沒有。    null, 允許為空。默認。    not null, 不允許為空。    insert into tab values (null, &#39;val&#39;);        -- 此時表示將第一個字段的值設為null, 取決於該字段是否允許為null4. DEFAULT 默認值屬性    當前字段的默認值。    insert into tab values (default, &#39;val&#39;);    -- 此時表示強制使用默認值。    create table tab ( add_time timestamp default current_timestamp );        -- 表示將當前時間的時間戳設為默認值。        current_date, current_time5. AUTO_INCREMENT 自動增長約束    自動增長必須為索引（主鍵或unique）    只能存在一個字段為自動增長。    默認為1開始自動增長。可以通過表屬性 auto_increment = x進行設置，或 alter table tbl auto_increment = x;6. COMMENT 註釋    例：create table tab ( id int ) comment &#39;註釋內容&#39;;7. FOREIGN KEY 外鍵約束    用於限制主表與從表數據完整性。    alter table t1 add constraint `t1_t2_fk` foreign key (t1_id) references t2(id);        -- 將表t1的t1_id外鍵關聯到表t2的id字段。        -- 每個外鍵都有一個名字，可以通過 constraint 指定    存在外鍵的表，稱之為從表（子表），外鍵指向的表，稱之為主表（父表）。    作用：保持數據一致性，完整性，主要目的是控制存儲在外鍵表（從表）中的數據。    MySQL中，可以對InnoDB引擎使用外鍵約束：    語法：    foreign key (外鍵字段） references 主表名 (關聯字段) [主表記錄刪除時的動作] [主表記錄更新時的動作]    此時需要檢測一個從表的外鍵需要約束為主表的已存在的值。外鍵在沒有關聯的情況下，可以設置為null.前提是該外鍵列，沒有not null。    可以不指定主表記錄更改或更新時的動作，那麼此時主表的操作被拒絕。    如果指定了 on update 或 on delete：在刪除或更新時，有如下幾個操作可以選擇：    1. cascade，級聯操作。主表數據被更新（主鍵值更新），從表也被更新（外鍵值更新）。主表記錄被刪除，從表相關記錄也被刪除。    2. set null，設置為null。主表數據被更新（主鍵值更新），從表的外鍵被設置為null。主表記錄被刪除，從表相關記錄外鍵被設置成null。但注意，要求該外鍵列，沒有not null屬性約束。    3. restrict，拒絕父表刪除和更新。    注意，外鍵只被InnoDB存儲引擎所支持。其他引擎是不支持的。</code></pre><h3 class=pgc-h-arrow-right>建表規範</h3><pre><code>    -- Normal Format, NF        - 每個表保存一個實體信息        - 每個具有一個ID字段作為主鍵        - ID主鍵 + 原子表    -- 1NF, 第一範式        字段不能再分，就滿足第一範式。    -- 2NF, 第二範式        滿足第一範式的前提下，不能出現部分依賴。        消除符合主鍵就可以避免部分依賴。增加單列關鍵字。    -- 3NF, 第三範式        滿足第二範式的前提下，不能出現傳遞依賴。        某個字段依賴於主鍵，而有其他字段依賴於該字段。這就是傳遞依賴。        將一個實體信息的數據放在一個表內實現。</code></pre><h3 class=pgc-h-arrow-right>SELECT</h3><pre><code>SELECT [ALL|DISTINCT] select_expr FROM -&gt; WHERE -&gt; GROUP BY [合計函數] -&gt; HAVING -&gt; ORDER BY -&gt; LIMITa. select_expr    -- 可以用 * 表示所有字段。        select * from tb;    -- 可以使用表達式（計算公式、函數調用、字段也是個表達式）        select stu, 29+25, now() from tb;    -- 可以為每個列使用別名。適用於簡化列標識，避免多個列標識符重複。        - 使用 as 關鍵字，也可省略 as.        select stu+10 as add10 from tb;b. FROM 子句    用於標識查詢來源。    -- 可以為表起別名。使用as關鍵字。        SELECT * FROM tb1 AS tt, tb2 AS bb;    -- from子句後，可以同時出現多個表。        -- 多個表會橫向疊加到一起，而數據會形成一個笛卡爾積。        SELECT * FROM tb1, tb2;    -- 向優化符提示如何選擇索引        USE INDEX、IGNORE INDEX、FORCE INDEX        SELECT * FROM table1 USE INDEX (key1,key2) WHERE key1=1 AND key2=2 AND key3=3;        SELECT * FROM table1 IGNORE INDEX (key3) WHERE key1=1 AND key2=2 AND key3=3;c. WHERE 子句    -- 從from獲得的數據源中進行篩選。    -- 整型1表示真，0表示假。    -- 表達式由運算符和運算數組成。        -- 運算數：變量（字段）、值、函數返回值        -- 運算符：            =, &lt;=&gt;, &lt;&gt;, !=, &lt;=, &lt;, &gt;=, &gt;, !, &&, ||,            in (not) null, (not) like, (not) in, (not) between and, is (not), and, or, not, xor            is/is not 加上ture/false/unknown，檢驗某個值的真假            &lt;=&gt;與&lt;&gt;功能相同，&lt;=&gt;可用於null比較d. GROUP BY 子句, 分組子句    GROUP BY 字段/別名 [排序方式]    分組後會進行排序。升序：ASC，降序：DESC    以下[合計函數]需配合 GROUP BY 使用：    count 返回不同的非NULL值數目  count(*)、count(字段)    sum 求和    max 求最大值    min 求最小值    avg 求平均值    group_concat 返回帶有來自一個組的連接的非NULL值的字符串結果。組內字符串連接。e. HAVING 子句，條件子句    與 where 功能、用法相同，執行時機不同。    where 在開始時執行檢測數據，對原數據進行過濾。    having 對篩選出的結果再次進行過濾。    having 字段必須是查詢出來的，where 字段必須是數據表存在的。    where 不可以使用字段的別名，having 可以。因為執行WHERE代碼時，可能尚未確定列值。    where 不可以使用合計函數。一般需用合計函數才會用 having    SQL標準要求HAVING必須引用GROUP BY子句中的列或用於合計函數中的列。f. ORDER BY 子句，排序子句    order by 排序字段/別名 排序方式 [,排序字段/別名 排序方式]...    升序：ASC，降序：DESC    支持多個字段的排序。g. LIMIT 子句，限制結果數量子句    僅對處理好的結果進行數量限制。將處理好的結果的看作是一個集合，按照記錄出現的順序，索引從0開始。    limit 起始位置, 獲取條數    省略第一個參數，表示從索引0開始。limit 獲取條數h. DISTINCT, ALL 選項    distinct 去除重複記錄    默認為 all, 全部記錄</code></pre><h3 class=pgc-h-arrow-right>UNION</h3><blockquote><p>將多個select查詢的結果組合成一個結果集合。</p></blockquote><pre><code>SELECT ... UNION [ALL|DISTINCT] SELECT ...默認 DISTINCT 方式，即所有返回的行都是唯一的建議，對每個SELECT查詢加上小括號包裹。ORDER BY 排序時，需加上 LIMIT 進行結合。需要各select查詢的字段數量一樣。每個select查詢的字段列表(數量、類型)應一致，因為結果中的字段名以第一條select語句為準。</code></pre><h3 class=pgc-h-arrow-right>子查詢</h3><blockquote><p>子查詢需用括號包裹。</p></blockquote><pre><code>-- from型    from後要求是一個表，必須給子查詢結果取個別名。    - 簡化每個查詢內的條件。    - from型需將結果生成一個臨時表格，可用以原表的鎖定的釋放。    - 子查詢返回一個表，表型子查詢。    select * from (select * from tb where id&gt;0) as subfrom where id&gt;1;-- where型    - 子查詢返回一個值，標量子查詢。    - 不需要給子查詢取別名。    - where子查詢內的表，不能直接用以更新。    select * from tb where money = (select max(money) from tb);    -- 列子查詢        如果子查詢結果返回的是一列。        使用 in 或 not in 完成查詢        exists 和 not exists 條件            如果子查詢返回數據，則返回1或0。常用於判斷條件。            select column1 from t1 where exists (select * from t2);    -- 行子查詢        查詢條件是一個行。        select * from t1 where (id, gender) in (select id, gender from t2);        行構造符：(col1, col2, ...) 或 ROW(col1, col2, ...)        行構造符通常用於與對能返回兩個或兩個以上列的子查詢進行比較。    -- 特殊運算符    != all()    相當於 not in    = some()    相當於 in。any 是 some 的別名    != some()   不等同於 not in，不等於其中某一個。    all, some 可以配合其他運算符一起使用。</code></pre><h3 class=pgc-h-arrow-right>連接查詢(join)```mysql</h3><blockquote><p>將多個表的字段進行連接，可以指定連接條件。</p></blockquote><pre><code>-- 內連接(inner join)    - 默認就是內連接，可省略inner。    - 只有數據存在時才能發送連接。即連接結果不能出現空行。    on 表示連接條件。其條件表達式與where類似。也可以省略條件（表示條件永遠為真）    也可用where表示連接條件。    還有 using, 但需字段名相同。 using(字段名)-- 交叉連接 cross join   即，沒有條件的內連接。   select * from tb1 cross join tb2;-- 外連接(outer join)    - 如果數據不存在，也會出現在連接結果中。    -- 左外連接 left join        如果數據不存在，左表記錄會出現，而右表為null填充    -- 右外連接 right join        如果數據不存在，右表記錄會出現，而左表為null填充-- 自然連接(natural join)    自動判斷連接條件完成連接。    相當於省略了using，會自動查找相同字段名。    natural join    natural left join    natural right joinselect info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex from info, extra_info where info.stu_num = extra_info.stu_id;</code></pre><h3 class=pgc-h-arrow-right>導入導出</h3><pre><code>select * into outfile 文件地址 [控制格式] from 表名;   -- 導出表數據load data [local] infile 文件地址 [replace|ignore] into table 表名 [控制格式]; -- 導入數據    生成的數據默認的分隔符是製表符    local未指定，則數據文件必須在服務器上    replace 和 ignore 關鍵詞控制對現有的唯一鍵記錄的重複的處理-- 控制格式fields  控制字段格式默認：fields terminated by &#39;\t&#39; enclosed by &#39;&#39; escaped by &#39;\\&#39;    terminated by &#39;string&#39;  -- 終止    enclosed by &#39;char&#39;      -- 包裹    escaped by &#39;char&#39;       -- 轉義    -- 示例：        SELECT a,b,a+b INTO OUTFILE &#39;/tmp/result.text&#39;        FIELDS TERMINATED BY &#39;,&#39; OPTIONALLY ENCLOSED BY &#39;&#34;&#39;        LINES TERMINATED BY &#39;\n&#39;        FROM test_table;lines   控制行格式默認：lines terminated by &#39;\n&#39;    terminated by &#39;string&#39;  -- 終止</code></pre><h3 class=pgc-h-arrow-right>INSERT</h3><pre><code>select語句獲得的數據可以用insert插入。可以省略對列的指定，要求 values () 括號內，提供給了按照列順序出現的所有字段的值。    或者使用set語法。    INSERT INTO tbl_name SET field=value,...；可以一次性使用多個值，採用(), (), ();的形式。    INSERT INTO tbl_name VALUES (), (), ();可以在列值指定時，使用表達式。    INSERT INTO tbl_name VALUES (field_value, 10+10, now());可以使用一個特殊值 DEFAULT，表示該列使用默認值。    INSERT INTO tbl_name VALUES (field_value, DEFAULT);可以通過一個查詢的結果，作為需要插入的值。    INSERT INTO tbl_name SELECT ...;可以指定在插入的值出現主鍵（或唯一索引）衝突時，更新其他非主鍵列的信息。    INSERT INTO tbl_name VALUES/SET/SELECT ON DUPLICATE KEY UPDATE 字段=值, …;</code></pre><h3 class=pgc-h-arrow-right>DELETE</h3><pre><code>DELETE FROM tbl_name [WHERE where_definition] [ORDER BY ...] [LIMIT row_count]按照條件刪除。where指定刪除的最多記錄數。limit可以通過排序條件刪除。order by + limit支持多表刪除，使用類似連接語法。delete from 需要刪除數據多表1，表2 using 表連接操作 條件。</code></pre><h3 class=pgc-h-arrow-right>TRUNCATE</h3><pre><code>TRUNCATE [TABLE] tbl_name清空數據刪除重建表區別：1，truncate 是刪除表再創建，delete 是逐條刪除2，truncate 重置auto_increment的值。而delete不會3，truncate 不知道刪除了幾條，而delete知道。4，當被用於帶分區的表時，truncate 會保留分區</code></pre><h3 class=pgc-h-arrow-right>備份與還原</h3><blockquote><p>備份，將數據的結構與表內數據保存起來。 利用 mysqldump 指令完成。</p></blockquote><pre><code>-- 導出mysqldump [options] db_name [tables]mysqldump [options] ---database DB1 [DB2 DB3...]mysqldump [options] --all--database1. 導出一張表　　mysqldump -u用戶名 -p密碼 庫名 表名 &gt; 文件名(D:/a.sql)2. 導出多張表　　mysqldump -u用戶名 -p密碼 庫名 表1 表2 表3 &gt; 文件名(D:/a.sql)3. 導出所有表　　mysqldump -u用戶名 -p密碼 庫名 &gt; 文件名(D:/a.sql)4. 導出一個庫　　mysqldump -u用戶名 -p密碼 --lock-all-tables --database 庫名 &gt; 文件名(D:/a.sql)可以-w攜帶WHERE條件-- 導入1. 在登錄mysql的情況下：　　source  備份文件2. 在不登錄的情況下　　mysql -u用戶名 -p密碼 庫名 &lt; 備份文件</code></pre><h3 class=pgc-h-arrow-right>視圖</h3><blockquote><p>什麼是視圖： 視圖是一個虛擬表，其內容由查詢定義。同真實的表一樣，視圖包含一系列帶有名稱的列和行數據。但是，視圖並不在數據庫中以存儲的數據值集形式存在。行和列數據來自由定義視圖的查詢所引用的表，並且在引用視圖時動態生成。 視圖具有表結構文件，但不存在數據文件。 對其中所引用的基礎表來說，視圖的作用類似於篩選。定義視圖的篩選可以來自當前或其它數據庫的一個或多個表，或者其它視圖。通過視圖進行查詢沒有任何限制，通過它們進行數據修改時的限制也很少。 視圖是存儲在數據庫中的查詢的sql語句，它主要出於兩種原因：安全原因，視圖可以隱藏一些數據，如：社會保險基金錶，可以用視圖只顯示姓名，地址，而不顯示社會保險號和工資數等，另一原因是可使複雜的查詢易於理解和使用。</p></blockquote><pre><code>-- 創建視圖CREATE [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW view_name [(column_list)] AS select_statement    - 視圖名必須唯一，同時不能與表重名。    - 視圖可以使用select語句查詢到的列名，也可以自己指定相應的列名。    - 可以指定視圖執行的算法，通過ALGORITHM指定。    - column_list如果存在，則數目必須等於SELECT語句檢索的列數-- 查看結構    SHOW CREATE VIEW view_name-- 刪除視圖    - 刪除視圖後，數據依然存在。    - 可同時刪除多個視圖。    DROP VIEW [IF EXISTS] view_name ...-- 修改視圖結構    - 一般不修改視圖，因為不是所有的更新視圖都會映射到表上。    ALTER VIEW view_name [(column_list)] AS select_statement-- 視圖作用    1. 簡化業務邏輯    2. 對客戶端隱藏真實的表結構-- 視圖算法(ALGORITHM)    MERGE       合併        將視圖的查詢語句，與外部查詢需要先合併再執行！    TEMPTABLE   臨時表        將視圖執行完畢後，形成臨時表，再做外層查詢！    UNDEFINED   未定義(默認)，指的是MySQL自主去選擇相應的算法。</code></pre><h3 class=pgc-h-arrow-right>事務(transaction)</h3><blockquote><p>事務是指邏輯上的一組操作，組成這組操作的各個單元，要不全成功要不全失敗。</p></blockquote><pre><code>- 支持連續SQL的集體成功或集體撤銷。- 事務是數據庫在數據晚自習方面的一個功能。- 需要利用 InnoDB 或 BDB 存儲引擎，對自動提交的特性支持完成。- InnoDB被稱為事務安全型引擎。-- 事務開啟    START TRANSACTION; 或者 BEGIN;    開啟事務後，所有被執行的SQL語句均被認作當前事務內的SQL語句。-- 事務提交    COMMIT;-- 事務回滾    ROLLBACK;    如果部分操作發生問題，映射到事務開啟前。-- 事務的特性    1. 原子性（Atomicity）        事務是一個不可分割的工作單位，事務中的操作要麼都發生，要麼都不發生。    2. 一致性（Consistency）        事務前後數據的完整性必須保持一致。        - 事務開始和結束時，外部數據一致        - 在整個事務過程中，操作是連續的    3. 隔離性（Isolation）        多個用戶併發訪問數據庫時，一個用戶的事務不能被其它用戶的事物所幹擾，多個併發事務之間的數據要相互隔離。    4. 持久性（Durability）        一個事務一旦被提交，它對數據庫中的數據改變就是永久性的。-- 事務的實現    1. 要求是事務支持的表類型    2. 執行一組相關的操作前開啟事務    3. 整組操作完成後，都成功，則提交；如果存在失敗，選擇回滾，則會回到事務開始的備份點。-- 事務的原理    利用InnoDB的自動提交(autocommit)特性完成。    普通的MySQL執行語句後，當前的數據提交操作均可被其他客戶端可見。    而事務是暫時關閉“自動提交”機制，需要commit提交持久化數據操作。-- 注意    1. 數據定義語言（DDL）語句不能被回滾，比如創建或取消數據庫的語句，和創建、取消或更改表或存儲的子程序的語句。    2. 事務不能被嵌套-- 保存點    SAVEPOINT 保存點名稱 -- 設置一個事務保存點    ROLLBACK TO SAVEPOINT 保存點名稱 -- 回滾到保存點    RELEASE SAVEPOINT 保存點名稱 -- 刪除保存點-- InnoDB自動提交特性設置    SET autocommit = 0|1;   0表示關閉自動提交，1表示開啟自動提交。    - 如果關閉了，那普通操作的結果對其他客戶端也不可見，需要commit提交後才能持久化數據操作。    - 也可以關閉自動提交來開啟事務。但與START TRANSACTION不同的是，        SET autocommit是永久改變服務器的設置，直到下次再次修改該設置。(針對當前連接)        而START TRANSACTION記錄開啟前的狀態，而一旦事務提交或回滾後就需要再次開啟事務。(針對當前事務)</code></pre><h3 class=pgc-h-arrow-right>鎖表</h3><blockquote><p>表鎖定只用於防止其它客戶端進行不正當地讀取和寫入 MyISAM 支持表鎖，InnoDB 支持行鎖</p></blockquote><pre><code>-- 鎖定    LOCK TABLES tbl_name [AS alias]-- 解鎖    UNLOCK TABLES</code></pre><h3 class=pgc-h-arrow-right>觸發器</h3><blockquote><p>觸發程序是與表有關的命名數據庫對象，當該表出現特定事件時，將激活該對象 監聽：記錄的增加、修改、刪除。</p></blockquote><pre><code>-- 創建觸發器CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt    參數：    trigger_time是觸發程序的動作時間。它可以是 before 或 after，以指明觸發程序是在激活它的語句之前或之後觸發。    trigger_event指明瞭激活觸發程序的語句的類型        INSERT：將新行插入表時激活觸發程序        UPDATE：更改某一行時激活觸發程序        DELETE：從表中刪除某一行時激活觸發程序    tbl_name：監聽的表，必須是永久性的表，不能將觸發程序與TEMPORARY表或視圖關聯起來。    trigger_stmt：當觸發程序激活時執行的語句。執行多個語句，可使用BEGIN...END複合語句結構-- 刪除DROP TRIGGER [schema_name.]trigger_name可以使用old和new代替舊的和新的數據    更新操作，更新前是old，更新後是new.    刪除操作，只有old.    增加操作，只有new.-- 注意    1. 對於具有相同觸發程序動作時間和事件的給定表，不能有兩個觸發程序。-- 字符連接函數concat(str1,str2,...])concat_ws(separator,str1,str2,...)-- 分支語句if 條件 then    執行語句elseif 條件 then    執行語句else    執行語句end if;-- 修改最外層語句結束符delimiter 自定義結束符號    SQL語句自定義結束符號delimiter ;     -- 修改回原來的分號-- 語句塊包裹begin    語句塊end-- 特殊的執行1. 只要添加記錄，就會觸發程序。2. Insert into on duplicate key update 語法會觸發：    如果沒有重複記錄，會觸發 before insert, after insert;    如果有重複記錄並更新，會觸發 before insert, before update, after update;    如果有重複記錄但是沒有發生更新，則觸發 before insert, before update3. Replace 語法 如果有記錄，則執行 before insert, before delete, after delete, after insert</code></pre><h3 class=pgc-h-arrow-right>SQL編程</h3><pre><code>--// 局部變量 ------------ 變量聲明    declare var_name[,...] type [default value]    這個語句被用來聲明局部變量。要給變量提供一個默認值，請包含一個default子句。值可以被指定為一個表達式，不需要為一個常數。如果沒有default子句，初始值為null。-- 賦值    使用 set 和 select into 語句為變量賦值。    - 注意：在函數內是可以使用全局變量（用戶自定義的變量）--// 全局變量 ------------ 定義、賦值set 語句可以定義併為變量賦值。set @var = value;也可以使用select into語句為變量初始化並賦值。這樣要求select語句只能返回一行，但是可以是多個字段，就意味著同時為多個變量進行賦值，變量的數量需要與查詢的列數一致。還可以把賦值語句看作一個表達式，通過select執行完成。此時為了避免=被當作關係運算符看待，使用:=代替。（set語句可以使用= 和 :=）。select @var:=20;select @v1:=id, @v2=name from t1 limit 1;select * from tbl_name where @var:=30;select into 可以將表中查詢獲得的數據賦給變量。    -| select max(height) into @max_height from tb;-- 自定義變量名為了避免select語句中，用戶自定義的變量與系統標識符（通常是字段名）衝突，用戶自定義變量在變量名前使用@作為開始符號。@var=10;    - 變量被定義後，在整個會話週期都有效（登錄到退出）--// 控制結構 ------------ if語句if search_condition then    statement_list   [elseif search_condition then    statement_list]...[else    statement_list]end if;-- case語句CASE value WHEN [compare-value] THEN result[WHEN [compare-value] THEN result ...][ELSE result]END-- while循環[begin_label:] while search_condition do    statement_listend while [end_label];- 如果需要在循環內提前終止 while循環，則需要使用標籤；標籤需要成對出現。    -- 退出循環        退出整個循環 leave        退出當前循環 iterate        通過退出的標籤決定退出哪個循環--// 內置函數 ------------ 數值函數abs(x)          -- 絕對值 abs(-10.9) = 10format(x, d)    -- 格式化千分位數值 format(1234567.456, 2) = 1,234,567.46ceil(x)         -- 向上取整 ceil(10.1) = 11floor(x)        -- 向下取整 floor (10.1) = 10round(x)        -- 四捨五入去整mod(m, n)       -- m%n m mod n 求餘 10%3=1pi()            -- 獲得圓周率pow(m, n)       -- m^nsqrt(x)         -- 算術平方根rand()          -- 隨機數truncate(x, d)  -- 截取d位小數-- 時間日期函數now(), current_timestamp();     -- 當前日期時間current_date();                 -- 當前日期current_time();                 -- 當前時間date(&#39;yyyy-mm-dd hh:ii:ss&#39;);    -- 獲取日期部分time(&#39;yyyy-mm-dd hh:ii:ss&#39;);    -- 獲取時間部分date_format(&#39;yyyy-mm-dd hh:ii:ss&#39;, &#39;%d %y %a %d %m %b %j&#39;); -- 格式化時間unix_timestamp();               -- 獲得unix時間戳from_unixtime();                -- 從時間戳獲得時間-- 字符串函數length(string)          -- string長度，字節char_length(string)     -- string的字符個數substring(str, position [,length])      -- 從str的position開始,取length個字符replace(str ,search_str ,replace_str)   -- 在str中用replace_str替換search_strinstr(string ,substring)    -- 返回substring首次在string中出現的位置concat(string [,...])   -- 連接字串charset(str)            -- 返回字串字符集lcase(string)           -- 轉換成小寫left(string, length)    -- 從string2中的左邊起取length個字符load_file(file_name)    -- 從文件讀取內容locate(substring, string [,start_position]) -- 同instr,但可指定開始位置lpad(string, length, pad)   -- 重複用pad加在string開頭,直到字串長度為lengthltrim(string)           -- 去除前端空格repeat(string, count)   -- 重複count次rpad(string, length, pad)   --在str後用pad補充,直到長度為lengthrtrim(string)           -- 去除後端空格strcmp(string1 ,string2)    -- 逐字符比較兩字串大小-- 流程函數case when [condition] then result [when [condition] then result ...] [else result] end   多分支if(expr1,expr2,expr3)  雙分支。-- 聚合函數count()sum();max();min();avg();group_concat()-- 其他常用函數md5();default();--// 存儲函數，自定義函數 ------------ 新建    CREATE FUNCTION function_name (參數列表) RETURNS 返回值類型        函數體    - 函數名，應該合法的標識符，並且不應該與已有的關鍵字衝突。    - 一個函數應該屬於某個數據庫，可以使用db_name.funciton_name的形式執行當前函數所屬數據庫，否則為當前數據庫。    - 參數部分，由&#34;參數名&#34;和&#34;參數類型&#34;組成。多個參數用逗號隔開。    - 函數體由多條可用的mysql語句，流程控制，變量聲明等語句構成。    - 多條語句應該使用 begin...end 語句塊包含。    - 一定要有 return 返回值語句。-- 刪除    DROP FUNCTION [IF EXISTS] function_name;-- 查看    SHOW FUNCTION STATUS LIKE &#39;partten&#39;    SHOW CREATE FUNCTION function_name;-- 修改    ALTER FUNCTION function_name 函數選項--// 存儲過程，自定義功能 ------------ 定義存儲存儲過程 是一段代碼（過程），存儲在數據庫中的sql組成。一個存儲過程通常用於完成一段業務邏輯，例如報名，交班費，訂單入庫等。而一個函數通常專注與某個功能，視為其他程序服務的，需要在其他語句中調用函數才可以，而存儲過程不能被其他調用，是自己執行 通過call執行。-- 創建CREATE PROCEDURE sp_name (參數列表)    過程體參數列表：不同於函數的參數列表，需要指明參數類型IN，表示輸入型OUT，表示輸出型INOUT，表示混合型注意，沒有返回值。</code></pre><h3 class=pgc-h-arrow-right>存儲過程</h3><blockquote><p>存儲過程是一段可執行性代碼的集合。相比函數，更偏向於業務邏輯。 調用：CALL 過程名</p></blockquote><pre><code>-- 注意- 沒有返回值。- 只能單獨調用，不可夾雜在其他語句中-- 參數IN|OUT|INOUT 參數名 數據類型IN      輸入：在調用過程中，將數據輸入到過程體內部的參數OUT     輸出：在調用過程中，將過程體處理完的結果返回到客戶端INOUT   輸入輸出：既可輸入，也可輸出-- 語法CREATE PROCEDURE 過程名 (參數列表)BEGIN    過程體END</code></pre><h3 class=pgc-h-arrow-right>用戶和權限管理</h3><pre><code>-- root密碼重置1. 停止MySQL服務2.  [Linux] /usr/local/mysql/bin/safe_mysqld --skip-grant-tables &    [Windows] mysqld --skip-grant-tables3. use mysql;4. UPDATE `user` SET PASSWORD=PASSWORD(&#34;密碼&#34;) WHERE `user` = &#34;root&#34;;5. FLUSH PRIVILEGES;用戶信息表：mysql.user-- 刷新權限FLUSH PRIVILEGES;-- 增加用戶CREATE USER 用戶名 IDENTIFIED BY [PASSWORD] 密碼(字符串)    - 必須擁有mysql數據庫的全局CREATE USER權限，或擁有INSERT權限。    - 只能創建用戶，不能賦予權限。    - 用戶名，注意引號：如 &#39;user_name&#39;@&#39;192.168.1.1&#39;    - 密碼也需引號，純數字密碼也要加引號    - 要在純文本中指定密碼，需忽略PASSWORD關鍵詞。要把密碼指定為由PASSWORD()函數返回的混編值，需包含關鍵字PASSWORD-- 重命名用戶RENAME USER old_user TO new_user-- 設置密碼SET PASSWORD = PASSWORD(&#39;密碼&#39;)  -- 為當前用戶設置密碼SET PASSWORD FOR 用戶名 = PASSWORD(&#39;密碼&#39;) -- 為指定用戶設置密碼-- 刪除用戶DROP USER 用戶名-- 分配權限/添加用戶GRANT 權限列表 ON 表名 TO 用戶名 [IDENTIFIED BY [PASSWORD] &#39;password&#39;]    - all privileges 表示所有權限    - *.* 表示所有庫的所有表    - 庫名.表名 表示某庫下面的某表    GRANT ALL PRIVILEGES ON `pms`.* TO &#39;pms&#39;@&#39;%&#39; IDENTIFIED BY &#39;pms0817&#39;;-- 查看權限SHOW GRANTS FOR 用戶名    -- 查看當前用戶權限    SHOW GRANTS; 或 SHOW GRANTS FOR CURRENT_USER; 或 SHOW GRANTS FOR CURRENT_USER();-- 撤消權限REVOKE 權限列表 ON 表名 FROM 用戶名REVOKE ALL PRIVILEGES, GRANT OPTION FROM 用戶名   -- 撤銷所有權限-- 權限層級-- 要使用GRANT或REVOKE，您必須擁有GRANT OPTION權限，並且您必須用於您正在授予或撤銷的權限。全局層級：全局權限適用於一個給定服務器中的所有數據庫，mysql.user    GRANT ALL ON *.*和 REVOKE ALL ON *.*只授予和撤銷全局權限。數據庫層級：數據庫權限適用於一個給定數據庫中的所有目標，mysql.db, mysql.host    GRANT ALL ON db_name.*和REVOKE ALL ON db_name.*只授予和撤銷數據庫權限。表層級：表權限適用於一個給定表中的所有列，mysql.talbes_priv    GRANT ALL ON db_name.tbl_name和REVOKE ALL ON db_name.tbl_name只授予和撤銷表權限。列層級：列權限適用於一個給定表中的單一列，mysql.columns_priv    當使用REVOKE時，您必須指定與被授權列相同的列。-- 權限列表ALL [PRIVILEGES]    -- 設置除GRANT OPTION之外的所有簡單權限ALTER   -- 允許使用ALTER TABLEALTER ROUTINE   -- 更改或取消已存儲的子程序CREATE  -- 允許使用CREATE TABLECREATE ROUTINE  -- 創建已存儲的子程序CREATE TEMPORARY TABLES     -- 允許使用CREATE TEMPORARY TABLECREATE USER     -- 允許使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。CREATE VIEW     -- 允許使用CREATE VIEWDELETE  -- 允許使用DELETEDROP    -- 允許使用DROP TABLEEXECUTE     -- 允許用戶運行已存儲的子程序FILE    -- 允許使用SELECT...INTO OUTFILE和LOAD DATA INFILEINDEX   -- 允許使用CREATE INDEX和DROP INDEXINSERT  -- 允許使用INSERTLOCK TABLES     -- 允許對您擁有SELECT權限的表使用LOCK TABLESPROCESS     -- 允許使用SHOW FULL PROCESSLISTREFERENCES  -- 未被實施RELOAD  -- 允許使用FLUSHREPLICATION CLIENT  -- 允許用戶詢問從屬服務器或主服務器的地址REPLICATION SLAVE   -- 用於複製型從屬服務器（從主服務器中讀取二進制日誌事件）SELECT  -- 允許使用SELECTSHOW DATABASES  -- 顯示所有數據庫SHOW VIEW   -- 允許使用SHOW CREATE VIEWSHUTDOWN    -- 允許使用mysqladmin shutdownSUPER   -- 允許使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL語句，mysqladmin debug命令；允許您連接（一次），即使已達到max_connections。UPDATE  -- 允許使用UPDATEUSAGE   -- “無權限”的同義詞GRANT OPTION    -- 允許授予權限</code></pre><h3 class=pgc-h-arrow-right>表維護</h3><pre><code>-- 分析和存儲表的關鍵字分佈ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE 表名 ...-- 檢查一個或多個表是否有錯誤CHECK TABLE tbl_name [, tbl_name] ... [option] ...option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}-- 整理數據文件的碎片OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</code></pre><h3 class=pgc-h-arrow-right>雜項</h3><pre><code>1. 可用反引號（`）為標識符（庫名、表名、字段名、索引、別名）包裹，以避免與關鍵字重名！中文也可以作為標識符！2. 每個庫目錄存在一個保存當前數據庫的選項文件db.opt。3. 註釋：    單行註釋 # 註釋內容    多行註釋 /* 註釋內容 */    單行註釋 -- 註釋內容     (標準SQL註釋風格，要求雙破折號後加一空格符（空格、TAB、換行等）)4. 模式通配符：    _   任意單個字符    %   任意多個字符，甚至包括零字符    單引號需要進行轉義 \&#39;5. CMD命令行內的語句結束符可以為 &#34;;&#34;, &#34;\G&#34;, &#34;\g&#34;，僅影響顯示結果。其他地方還是用分號結束。delimiter 可修改當前對話的語句結束符。6. SQL對大小寫不敏感7. 清除已有語句：\c</code></pre><p>原文連接：https://shockerli.net/post/1000-line-mysql-note/ 趙小胖個人博客</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>MySQL</a></li><li><a>學習</a></li><li><a>筆記</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html alt=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/13adbab9c7f94c7fa81d49a98861b051 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc2af9c9.html title=機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式>機器學習筆記(七)——初識邏輯迴歸、不同方法推導梯度公式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html alt=HTMLCSS學習筆記（六）——元素類型 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb5988349894ce9bf568c6418f85b7d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a1bc38f3.html title=HTMLCSS學習筆記（六）——元素類型>HTMLCSS學習筆記（六）——元素類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html alt=深入學習MySQL事務：ACID特性的實現原理「轉」 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/cdc702d66d6943499997d11e931425eb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/175f9730.html title=深入學習MySQL事務：ACID特性的實現原理「轉」>深入學習MySQL事務：ACID特性的實現原理「轉」</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/112d1b5f.html alt=一造學習筆記—管理篇（2）：工程造價管理的組織和內容 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/9e65b076-038f-4720-96ff-182898f42dee style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/112d1b5f.html title=一造學習筆記—管理篇（2）：工程造價管理的組織和內容>一造學習筆記—管理篇（2）：工程造價管理的組織和內容</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0a02618e.html alt=某教程學習筆記（一）：17、php漏洞 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/6d21bdb33b0a49e8b6eaa2c2a725a1d8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0a02618e.html title=某教程學習筆記（一）：17、php漏洞>某教程學習筆記（一）：17、php漏洞</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html alt=【學習筆記】Android開發之kotlin語言（一） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ee3f9c8348ae4de58a5f62922d2042e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b37aac89.html title=【學習筆記】Android開發之kotlin語言（一）>【學習筆記】Android開發之kotlin語言（一）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7e630244.html alt="一千行 MySQL 詳細學習筆記" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7e630244.html title="一千行 MySQL 詳細學習筆記">一千行 MySQL 詳細學習筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b33d00d0.html alt=CV學習筆記（十二）：圖像金字塔 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/74c73f94d57a4f5d8f2e5183e78c8e67 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b33d00d0.html title=CV學習筆記（十二）：圖像金字塔>CV學習筆記（十二）：圖像金字塔</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f564827a.html alt="吳恩達深度學習筆記(108)-序列模型介紹(Sequence Models)" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/dfa0587764f14afb8ccfd7a33796cd74 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f564827a.html title="吳恩達深度學習筆記(108)-序列模型介紹(Sequence Models)">吳恩達深度學習筆記(108)-序列模型介紹(Sequence Models)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7f69ae29.html alt="Python 3 學習筆記：Excel 基礎操作（二）" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a777a023a91a465fb317de8de7e4cd37 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7f69ae29.html title="Python 3 學習筆記：Excel 基礎操作（二）">Python 3 學習筆記：Excel 基礎操作（二）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b75ffe84.html alt=學習《建築材料第9節》的筆記 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b75ffe84.html title=學習《建築材料第9節》的筆記>學習《建築材料第9節》的筆記</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9d5a3df4.html alt=MySQL基礎筆記——SQL語法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fb3962cf436642ecae678e1d65d70d4a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9d5a3df4.html title=MySQL基礎筆記——SQL語法>MySQL基礎筆記——SQL語法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/269cb6ac.html alt=學霸學習筆記整理:二年級上冊語文生字組詞、語文園地、背誦內容 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e104e9dc17d9403daf57edff22a8141d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/269cb6ac.html title=學霸學習筆記整理:二年級上冊語文生字組詞、語文園地、背誦內容>學霸學習筆記整理:二年級上冊語文生字組詞、語文園地、背誦內容</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/efabb5bb.html alt=吳恩達深度學習筆記(106)-風格遷移網絡講解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/01def15aa8654252990f709965d5b769 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/efabb5bb.html title=吳恩達深度學習筆記(106)-風格遷移網絡講解>吳恩達深度學習筆記(106)-風格遷移網絡講解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3605c009.html alt="吳恩達深度學習筆記(67)-遷移學習（Transfer learning)" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f00ccb946c7a451aa25adba4b28799e5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3605c009.html title="吳恩達深度學習筆記(67)-遷移學習（Transfer learning)">吳恩達深度學習筆記(67)-遷移學習（Transfer learning)</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>