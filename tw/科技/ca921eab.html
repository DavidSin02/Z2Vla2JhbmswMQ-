<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ | 极客快訊</title><meta property="og:title" content="面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/506a1a25353c493da1259ef8c299e898"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/ca921eab.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/ca921eab.html><meta property="article:published_time" content="2020-11-14T21:04:30+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:30+08:00"><meta name=Keywords content><meta name=description content="面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/ca921eab.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>本期教程會從下面從以下幾個問題展開對 IoC & AOP 的解釋</p><ul><li>什麼是 IoC？</li><li>IoC 解決了什麼問題？</li><li>IoC 和 DI 的區別？</li><li>什麼是 AOP？</li><li>AOP 解決了什麼問題？</li><li>AOP 為什麼叫做切面編程？</li></ul><p>首先聲明：IoC & AOP 不是 Spring 提出來的，它們在 Spring 之前其實已經存在了，只不過當時更加偏向於理論。Spring 在技術層次將這兩個思想進行了很好的實現。</p><p><strong>什麼是 IoC</strong></p><p>IoC （Inversion of control ）控制反轉/反轉控制。它是一種思想不是一個技術實現。描述的是：Java 開發領域對象的創建以及管理的問題。</p><p>例如：現有類 A 依賴於類 B</p><ul><li><strong>傳統的開發方式</strong> ：往往是在類 A 中手動通過 new 關鍵字來 new 一個 B 的對象出來</li><li><strong>使用 IoC 思想的開發方式</strong> ：不通過 new 關鍵字來創建對象，而是通過 IoC 容器(Spring 框架) 來幫助我們實例化對象。我們需要哪個對象，直接從 IoC 容器裡面過去即可。</li></ul><p>從以上兩種開發方式的對比來看：我們 “喪失了一個權力” (創建、管理對象的權力)，從而也得到了一個好處（不用再考慮對象的創建、管理等一系列的事情）</p><h4 class=pgc-h-arrow-right>為什麼叫控制反轉</h4><p><strong>控制</strong> ：指的是對象創建（實例化、管理）的權力</p><p><strong>反轉</strong> ：控制權交給外部環境（Spring 框架、IoC 容器）</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/506a1a25353c493da1259ef8c299e898><p class=pgc-img-caption></p></div><p><strong>IoC 解決了什麼問題</strong></p><p>IoC 的思想就是兩方之間不互相依賴，由第三方容器來管理相關資源。這樣有什麼好處呢？</p><ol start=1><li>對象之間的耦合度或者說依賴程度降低；</li><li>資源變的容易管理；比如你用 Spring 容器提供的話很容易就可以實現一個單例。</li></ol><p>例如：現有一個針對 User 的操作，利用 Service 和 Dao 兩層結構進行開發</p><p>在沒有使用 IoC 思想的情況下，Service 層想要使用 Dao 層的具體實現的話，需要通過 new 關鍵字在UserServiceImpl 中手動 new 出 IUserDao 的具體實現類 UserDaoImpl（不能直接 new 接口類）。</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/58c8c8c7a16c4c35b7161ccdc3145569><p class=pgc-img-caption></p></div><p>很完美，這種方式也是可以實現的，但是我們想象一下如下場景：</p><p>開發過程中突然接到一個新的需求，針對對IUserDao 接口開發出另一個具體實現類。因為 Server 層依賴了IUserDao的具體實現，所以我們需要修改UserServiceImpl中 new 的對象。如果只有一個類引用了IUserDao的具體實現，可能覺得還好，修改起來也不是很費力氣，但是如果有許許多多的地方都引用了IUserDao的具體實現的話，一旦需要更換IUserDao 的實現方式，那修改起來將會非常的頭疼。</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/dc24390c5cd8420c8666eeb6c3e38cd8><p class=pgc-img-caption></p></div><p>使用 IoC 的思想，我們將對象的控制權（創建、管理）交有 IoC 容器去管理，我們在使用的時候直接向 IoC 容器 “要” 就可以了</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b3747a4550e74778a9026c43a03d404c><p class=pgc-img-caption></p></div><p><strong>IoC 和 DI 別再傻傻分不清楚</strong></p><p>IoC（Inverse of Control:控制反轉）是一種<strong>設計思想</strong> 或者說是某種模式。這個設計思想就是 <strong>將原本在程序中手動創建對象的控制權，交由 Spring 框架來管理。</strong> IoC 在其他語言中也有應用，並非 Spring 特有。<strong>IoC 容器是 Spring 用來實現 IoC 的載體， IoC 容器實際上就是個 Map（key，value）,Map 中存放的是各種對象。</strong></p><p>IoC 最常見以及最合理的實現方式叫做依賴注入（Dependency Injection，簡稱 DI）。</p><p><br></p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/934c596e57074ec1a9e0c0af12033d27><p class=pgc-img-caption></p></div><p>意思是 IoC 太普遍並且不表意，很多人會因此而迷惑，所以，使用 DI 來精確指名這個模式比較好。</p><p>什麼是 AOP</p><p>AOP：Aspect oriented programming 面向切面編程，AOP 是 OOP（面向對象編程）的一種延續。</p><p>下面我們先看一個 OOP 的例子。</p><p>例如：現有三個類，Horse、Pig、Dog，這三個類中都有 eat 和 run 兩個方法。</p><p>通過 OOP 思想中的繼承，我們可以提取出一個 Animal 的父類，然後將 eat 和 run 方法放入父類中，Horse、Pig、Dog通過繼承Animal類即可自動獲得 eat() 和 run() 方法。這樣將會少些很多重複的代碼。</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cf9849ac01c0484a8be693b27935f7c3><p class=pgc-img-caption></p></div><p>OOP 編程思想可以解決大部分的代碼重複問題。但是有一些問題是處理不了的。比如在父類 Animal 中的多個方法的相同位置出現了重複的代碼，OOP 就解決不了。</p><pre><code>/** * 動物父類 */public class Animal {    /** 身高 */    private String height;    /** 體重 */    private double weight;    public void eat() {        // 性能監控代碼        long start = System.currentTimeMillis();        // 業務邏輯代碼        System.out.println("I can eat...");        // 性能監控代碼        System.out.println("執行時長：" + (System.currentTimeMillis() - start)/1000f + "s");    }    public void run() {        // 性能監控代碼        long start = System.currentTimeMillis();        // 業務邏輯代碼        System.out.println("I can run...");        // 性能監控代碼        System.out.println("執行時長：" + (System.currentTimeMillis() - start)/1000f + "s");    }}</code></pre><p>這部分重複的代碼，一般統稱為 <strong>橫切邏輯代碼</strong>。</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/d7d7aa0725ec4e0ea18fe3fa9b871b4c><p class=pgc-img-caption></p></div><p>橫切邏輯代碼存在的問題：</p><ul><li>代碼重複問題</li><li>橫切邏輯代碼和業務代碼混雜在一起，代碼臃腫，不便維護</li></ul><p><strong>AOP 就是用來解決這些問題的</strong></p><p>AOP 另闢蹊徑，提出橫向抽取機制，將橫切邏輯代碼和業務邏輯代碼分離</p><div class=pgc-img><img alt=面試屢屢被問的IoC和AOP，你還傻傻搞不清楚？ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cb52b25d8afc46cf8517e68cd4a19d05><p class=pgc-img-caption></p></div><p>代碼拆分比較容易，難的是如何在不改變原有業務邏輯的情況下，悄無聲息的將橫向邏輯代碼應用到原有的業務邏輯中，達到和原來一樣的效果。</p><p><strong>AOP 解決了什麼問題</strong></p><p>通過上面的分析可以發現，AOP 主要用來解決：在不改變原有業務邏輯的情況下，增強橫切邏輯代碼，根本上解耦合，避免橫切邏輯代碼重複。</p><p><strong>AOP 為什麼叫面向切面編程</strong></p><p><strong>切</strong> ：指的是橫切邏輯，原有業務邏輯代碼不動，只能操作橫切邏輯代碼，所以面向橫切邏輯</p><p><strong>面</strong> ：橫切邏輯代碼往往要影響的是很多個方法，每個方法如同一個點，多個點構成一個面。</p><p><br>更多的教程也會繼續更新，夥伴們多多支持一下，不清楚的地方，可以留言！</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>面試</a></li><li><a>被問</a></li><li><a>IoC</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/cbdd8647.html alt=面試被問http協議？這篇文章足夠覆蓋所有相關問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/33e2b2c4fce5437080704a68cec38cd7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cbdd8647.html title=面試被問http協議？這篇文章足夠覆蓋所有相關問題>面試被問http協議？這篇文章足夠覆蓋所有相關問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html alt=面試總結：關於MySQL事務的10個問題常見面試問答 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/1669c986-315c-4339-a5a0-a918a47f2e57 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html title=面試總結：關於MySQL事務的10個問題常見面試問答>面試總結：關於MySQL事務的10個問題常見面試問答</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/adc31f83.html alt=Java面試知識點總結⑥——算法與數據結構_一點課堂（多岸學院） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/68ac43b98fa343f2874d08bacae73ee8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/adc31f83.html title=Java面試知識點總結⑥——算法與數據結構_一點課堂（多岸學院）>Java面試知識點總結⑥——算法與數據結構_一點課堂（多岸學院）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cdbf5cb4.html alt=面試中常被問到的Hash表，你瞭解嗎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/ba5ea1b5-dee5-4145-8f0d-8eee90a5eba6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cdbf5cb4.html title=面試中常被問到的Hash表，你瞭解嗎>面試中常被問到的Hash表，你瞭解嗎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2eecc1b9.html alt=面試再問ThreadLocal，別說你不會 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3a95ff3cd79a456d9221f66851f8c2f9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2eecc1b9.html title=面試再問ThreadLocal，別說你不會>面試再問ThreadLocal，別說你不會</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1d10456.html alt=面試總結-Java高級篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/4afe0004abfd4a7bb3c5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1d10456.html title=面試總結-Java高級篇>面試總結-Java高級篇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b10623ce.html alt=你不得不知道的HashMap面試連環炮 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/278ed0687f4d436f9cb8389a38b1603e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b10623ce.html title=你不得不知道的HashMap面試連環炮>你不得不知道的HashMap面試連環炮</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ae15b401.html alt="有關 HashMap 面試會問的一切" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/25263d0d73a143bab5e44096efdd931d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ae15b401.html title="有關 HashMap 面試會問的一切">有關 HashMap 面試會問的一切</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e2c89d5.html alt="面試官：為什麼 HashMap 的加載因子是0.75？" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15a700f4ff6a4082a566db903915ea1b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e2c89d5.html title="面試官：為什麼 HashMap 的加載因子是0.75？">面試官：為什麼 HashMap 的加載因子是0.75？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95a57792.html alt=面試官：100萬個成員的數組取第一個和最後一個有性能差距嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5d61204d36a64ca9864df863782072b0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95a57792.html title=面試官：100萬個成員的數組取第一個和最後一個有性能差距嗎？>面試官：100萬個成員的數組取第一個和最後一個有性能差距嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8db576a1.html alt=面試必問，進程和線程概念詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/31f152f300834172b846a27e904440e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8db576a1.html title=面試必問，進程和線程概念詳解>面試必問，進程和線程概念詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2fb2eaa.html alt="不怕面試被問了！二叉樹算法大盤點 | 原力計劃" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RseEOGoFGbwiHH style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2fb2eaa.html title="不怕面試被問了！二叉樹算法大盤點 | 原力計劃">不怕面試被問了！二叉樹算法大盤點 | 原力計劃</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8f670109.html alt="別再翻了，百度大牛整理的面試二叉樹有這 11 個就夠了~" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dcd72bc8778d44e6bffbf74b1e60ca72 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8f670109.html title="別再翻了，百度大牛整理的面試二叉樹有這 11 個就夠了~">別再翻了，百度大牛整理的面試二叉樹有這 11 個就夠了~</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/be7d76b3.html alt=大無語！每次面試必問的二叉樹的設計與編碼，你還敢不當回事？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f47e6a7038d9408dbc02ccb0517ff715 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/be7d76b3.html title=大無語！每次面試必問的二叉樹的設計與編碼，你還敢不當回事？>大無語！每次面試必問的二叉樹的設計與編碼，你還敢不當回事？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html alt=數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/02b77c3c1c434606997aa740529d8b17 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html title=數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎>數據結構系列：面試常問的二叉樹的遍歷和基本應用，不進來看看嗎</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>