<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>微服務平臺之全鏈路追蹤 | 极客快訊</title><meta property="og:title" content="微服務平臺之全鏈路追蹤 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/1d84c5114a1e4f58a74dc83840b3cc9d"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cead246c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cead246c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cead246c.html><meta property="article:published_time" content="2020-11-14T21:06:12+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:12+08:00"><meta name=Keywords content><meta name=description content="微服務平臺之全鏈路追蹤"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/cead246c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>微服務平臺之全鏈路追蹤</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1d84c5114a1e4f58a74dc83840b3cc9d><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/876a69bbcf6f4779ad4cdc50a7643b6a><p class=pgc-img-caption></p></div><p style=text-align:justify><strong>轉載本文需註明出處：微信公眾號EAWorld，違者必究。</strong></p><p><br></p><p><strong>前言：</strong></p><p><br></p><p>隨著微服務架構技術的普及和廣泛在企業應用中落地，由於微服務架構本身的特性，架構由一系列相對獨立的細粒度的服務組成，一個完整的業務邏輯調用請求的背後可能牽涉後端幾個、幾十個甚至上百個服務接口，每個服務可能是由不同的團隊開發，使用了不同的編程語言，還有可能部署在不同的機器上，分佈在不同的數據中心，對於這樣的一個邏輯調用關係，如果在調用過程中發生問題，比如說調用失敗，或者調用過程響應很慢，如何在這樣一個分佈式環境下快速定位問題所在、快速分析業務處理中的響應慢的瓶頸在哪？多個微服務之間存在調用關係，如何在系統運行時總覽一個系統中微服務間的拓撲關係？如何完整還原一次請求的鏈路情況？</p><p>以上這些問題可以藉助鏈路追蹤技術進行解決。鏈路追蹤組件通過在微服務應用中以代碼侵入或者非侵入的方式進行數據表示、埋點、傳遞、收集、存儲、展示等技術手段，達到將一次分佈式請求還原成調用鏈路，將一次分佈式請求的調用情況集中展示，比如各個服務節點上的耗時、請求具體到達哪臺機器上、每個服務節點的請求狀態等等。</p><p><br></p><p><strong>目錄：</strong></p><p><br></p><p>1.鏈路追蹤的應用場景</p><p>2.鏈路追蹤基本原理</p><p>3.鏈路追蹤的Demo實現</p><p>4.普元微服務平臺的鏈路追蹤應用</p><p><br></p><h1 class=pgc-h-arrow-right>1.鏈路追蹤的應用場景</h1><p style=text-align:justify>移動平臺8.0打開了以往eclipse平臺的枷鎖，全面擁抱了主流的VSCode編輯器，包括支持實用的cli命令行支持、及優秀的跨平臺開發框架ReactNative。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/5c4ca7883c574fe3a14646d46639ae76><p class=pgc-img-caption></p></div><p style=text-align:justify>在微服務架構下，分佈式系統變得日趨複雜，越來越多的組件開始走向分佈式化，如微服務、分佈式數據庫、分佈式緩存等，使得後臺服務構成了一種複雜的分佈式網絡，這樣一個場景下，對於用戶的每一次請求調用，後端執行了多少組件間的調用無法知曉，由於分佈式的調用，增加了程序調用異常的錯誤率，在這樣的應用場景下，新的架構技術帶來了新的問題。</p><p style=text-align:justify><strong>場景下的關鍵問題</strong></p><p style=text-align:justify>1. 如何在請求發生異常時快速定義問題所在</p><p style=text-align:justify>2. 如何在請求響應慢的時候快速找出慢的原因</p><p style=text-align:justify>3. 如何通過日誌文件快速定位問題的根本原因</p><p style=text-align:justify><strong>傳統的問題排查手段</strong></p><p style=text-align:justify>一般在系統發生問題時，比如系統異常或者系統性能出現問題時，通常都是從系統記錄的日誌文件中找出蛛絲馬腳，而對於微服務架構下的分佈式部署，日誌文件的分散，想從日誌中查找問題工作量很大。對於用戶某一次請求調用後端哪些服務，每個服務執行情況，想從日誌中獲得更是不可能的事。</p><p style=text-align:justify>對於傳統的監控告警平臺也緊針對平臺資源的監控包括cpu、內存、網絡帶寬情況等，對業務微服務應用的指標（平均響應時間、慢端點情況等）的監控顯得無從下手。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/881c555fb1734878a3170fd120449b37><p class=pgc-img-caption></p></div><p style=text-align:justify>在這樣的背景下，新的監控體系下的細分領域-鏈路追蹤問世了。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/00a0b950b84b44d49f93f984e023f16e><p class=pgc-img-caption></p></div><p style=text-align:justify>首先，我們來看看在系統監控的體系下具體的細分領域的專注點：</p><p style=text-align:justify><strong>Logging</strong> - 用於記錄離散的事件。例如，應用程序的調試信息或錯誤信息。它是我們診斷問題的依據。</p><p style=text-align:justify><strong>Metrics</strong> - 用於記錄可聚合的數據。例如，隊列的當前深度可被定義為一個度量值，在元素入隊或出隊時被更新；HTTP 請求個數可被定義為一個計數器，新請求到來時進行累加。</p><p style=text-align:justify><strong>Tracing </strong>- 用於記錄請求範圍內的信息。例如，一次遠程方法調用的執行過程和耗時。它是我們排查系統性能問題的利器。</p><h1 class=pgc-h-arrow-right>2.鏈路追蹤基本原理</h1><p style=text-align:justify>在每個請求調用的入口和出口進行代碼埋點記錄調用之間的關係、每個調用處理時間點信息。</p><p style=text-align:justify>通過調用關係梳理出一次請求的完整鏈路還原、請求具體到達哪臺機器。</p><p style=text-align:justify>通過每次處理記錄的時間點，計算出相關的調用執行時間、響應時間、網絡延時。</p><p style=text-align:justify>對調用請求量進行統計。</p><p style=text-align:justify>顯示鏈路拓撲結構、應用依賴關係。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/ae34ade397694ff89fd25c6eeb96b4c5><p class=pgc-img-caption></p></div><p style=text-align:justify><strong>Trace：</strong>指一個請求經過後端所有服務的路徑，每一條鏈路都用一個全局唯一的traceid來標識。</p><p style=text-align:justify><strong>Span：</strong>鏈路中的調用由span來表示，每個span由spanid和parentid來標識，可以記錄調用的父子關係。</p><p style=text-align:justify><strong>Timestamp：</strong>調用點的時間戳，記錄每個執行點的時間信息。</p><p style=text-align:justify>如果想知道一個接口在哪個環節出現了問題，就必須清楚該接口調用了哪些服務，以及調用的順序，如果把這些服務串起來，看起來就像鏈條一樣，我們稱其為調用鏈。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/caa325140b2d4d2e93897965510125d7><p class=pgc-img-caption></p></div><p style=text-align:justify>到現在，已經知道調用順序和層級關係了，但是接口出現問題後，還是不能找到出問題的環節，如果某個服務有問題，那個被調用執行的服務一定耗時很長，要想計算出耗時，上述的三個標識還不夠，還需要加上時間戳，時間戳可以更精細一點，精確到微秒級。</p><p style=text-align:justify>只記錄發起調用時的時間戳還算不出耗時，要記錄下服務返回時的時間戳，有始有終才能算出時間差，既然返回的也記了，就把上述的三個標識都記一下吧，不然區分不出是誰的時間戳。</p><h1 class=pgc-h-arrow-right>3.鏈路追蹤的Demo實現</h1><p style=text-align:justify>前面我們介紹了鏈路追蹤的技術原理，以及相關的實現鏈路追蹤的開源組件，那麼我們實際在項目中要怎麼做，是否需要根據技術原理去實現底層的相關開發。通過這個章節，我簡單的通過一個demo去演示如何在微服務架構系統中完成鏈路追蹤的功能。</p><p style=text-align:justify>我們簡單描述一下demo的相關情況，首先demo是要基於微服務架構的，那麼我們提供2個微服務應用（訂單服務、產品服務），並且提供一個服務註冊發現中心，訂單服務會調用產品服務，並且是通過註冊中心去發現服務調用服務，這樣從前端請求調用訂單服務，再由訂單服務調用產品服務，完成了一個簡單的鏈路調用，需求鏈路很短，只有兩次調用，足夠演示demo的鏈路追蹤功能。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/994fec2a0cd846268e18247c7c003e49><p class=pgc-img-caption></p></div><p style=text-align:justify>通過demo將教打家一步一步的去實現鏈路的相關功能，包括還原請求的完整調用鏈路情況，能夠查看請求過程中訂單服務，產品服務執行的耗時情況，總的請求響應時間，並且可以根據請求鏈路的traceid查看到對應的請求處理的日誌信息。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/672874af26dc4a3881681fdb7fd165b3><p class=pgc-img-caption></p></div><p style=text-align:justify>首先創建springboot項目，通過依賴eureka組件，提供服務的註冊中心，實現服務的註冊與發現。</p><p style=text-align:justify>添加依賴</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cc84a6162c2a4435b7bc7730ba2c97f1><p class=pgc-img-caption></p></div><p style=text-align:justify>Properties配置信息</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/782eb7dd21c1436c99d0d052e835d74c><p class=pgc-img-caption></p></div><p style=text-align:justify>再添加兩個springboot項目，一個訂單服務，一個產品服務</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/0b52daf8a2814799a09b8d32f895c5eb><p class=pgc-img-caption></p></div><p style=text-align:justify>由於服務需要註冊到註冊中心，因此兩個項目需要添加依賴</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/dcf97fc86e5f493f805557e631ea0270><p class=pgc-img-caption></p></div><p style=text-align:justify>並添加配置信息</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/36681af1db1e4530a7f5a28f7d561be7><p class=pgc-img-caption></p></div><p>並且訂單服務需要調用產品服務的方法，在demo中我們使用feign的方式進行服務調用，因此在訂單服務項目中需要添加依賴</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/500a576b0d2f49c6848d3b0ade9f95ad><p class=pgc-img-caption></p></div><p style=text-align:justify>由於是demo，因此我們服務中的方法就簡單通過返回字符串的方式實現。</p><p style=text-align:justify>至此我們啟動兩個微服務應用，可以在註冊中心中看到兩個服務都已經註冊上來，再通過瀏覽器請求訂單服務的接口，可以看到後端通過調用產品服務的接口，並返回信息。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/962e9cc9c31c4f41b8a580a8c2e3ea1c><p class=pgc-img-caption></p></div><p style=text-align:justify>到目前為止，我們只是構建好了微服務應用，對應鏈路追蹤功能還沒有實現，其實在微服務架構下實現鏈路追蹤很簡單，畢竟有很多開源的組件封裝了底層實現原理，我們只需要引用這些組件就可以實現鏈路追蹤功能，在demo中我通過skywalking來進行鏈路追蹤，由於skywalking本身的特性無需代碼侵入，只需要以探針的方式啟動微服務應用即可。並自動採集服務調用的相關信息，寫入數據庫，然後通過自帶的dashboard查看相關信息。</p><p style=text-align:justify>首先我們先下載skywalking</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/601b6d6a95ee4899883fdf4c1f8d8697><p class=pgc-img-caption></p></div><p style=text-align:justify>其中，agent目錄是應用啟動時用的代理，bin目錄是skywalking後端服務和dashboard，在bin目錄執行startup.bat文件，啟動服務。</p><p style=text-align:justify>在訂單服務和產品服務的項目啟動配置中，加上jvm參數，以探針方式啟動2個服務應用</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2b4f231629b64a598ab141814906e7f8><p class=pgc-img-caption></p></div><p style=text-align:justify>啟動後，我們可以通過skywalking自帶的dashboard查看信息。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/6428414f7af54f58a540ec2bd6b427ad><p class=pgc-img-caption></p></div><p style=text-align:justify>可以看到請求的鏈路情況，以及每個路徑上的處理時間，總的響應時間等信息。</p><p style=text-align:justify>還有一個目標就是，如何將鏈路跟我們實際的日誌記錄進行綁定，這樣方便在某個鏈路出現問題時，我們可以針對這個具體的鏈路去查看具體問題原因。</p><p style=text-align:justify>在demo中，我們通過logback記錄日誌，添加依賴</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/86052ab2ad6246f7a7bee1a7ecfa2596><p class=pgc-img-caption></p></div><p style=text-align:justify>目前很多的鏈路追蹤組件都已經實現了與日誌組件的集成，只需要引入依賴，即可完成將鏈路traceid對應寫入到日誌中。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e51e447ff15744c9bf7d04245e468a63><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/009d73caefdc4a04860adfd115131db1><p class=pgc-img-caption></p></div><p style=text-align:justify>在代碼中加入寫日誌的代碼</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/4fa8903dd24643ea9ca5c5388bc3eb28><p class=pgc-img-caption></p></div><p style=text-align:justify>增加配置信息，以及logback-spring.xml文件</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1793558777c64477ab38e733d46300eb><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/b5d42d96920b46d4ac3be1240f80c6b1><p class=pgc-img-caption></p></div><p style=text-align:justify>可以看到控制檯日誌中，記錄的日誌前面都加上了TID信息，也就是traceid。</p><h1 class=pgc-h-arrow-right>4.普元微服務平臺的鏈路追蹤應用</h1><p style=text-align:justify>上面的demo只是簡單的驗證瞭如何快速通過第三方組件實現微服務架構下的鏈路追蹤功能，對於在實際項目應用中我們需要進行優化和整合，這章節中介紹我們普元微服務平臺在鏈路追蹤中的相關應用場景：</p><p style=text-align:justify>1. 系統拓撲結構</p><p style=text-align:justify>2. 應用運行時</p><p style=text-align:justify>3. 業務鏈路</p><p style=text-align:justify>4. 跟蹤日誌</p><p>5. 服務統計</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/f1246b108d4f423ca5b691c15e3d9bd5><p class=pgc-img-caption></p></div><p>在鏈路追蹤下，系統可以根據請求調用關係繪製去系統拓撲結構，通過系統拓撲結構你可以清楚知道當前系統下有多少微服務應用，微服務應用間是否有調用關係，每個服務的具體概況。</p><p><br></p><p>由於微服務架構下，一個系統的微服務相對比較多，如果沒有這個系統拓撲結構，後期對系統的情況，尤其是系統間的調用依賴關係跟蹤也很困難。</p><p><br></p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/36fdfbea45144742a3a619a0024115e0><p class=pgc-img-caption></p></div><p><br></p><p>應用運行時，通過收集統計相關調用請求信息，計算相關性能指標，幫助系統管理員運維人員快速瞭解系統的相關情況，主要是微服務應用實例的能力指標，比如平均響應時間、平均響應成功率等指標。</p><p><br></p><p>由於普元微服務平臺的架構特性，每一個服務對應多個應用實例組，因此在查看時可以選擇具體實例組下的實例節點。幫助我們瞭解應用節點的性能，以及慢節點情況。</p><p><br></p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8829a0fbaaba43ac8911429c9597e11e><p class=pgc-img-caption></p></div><p>業務鏈路，快速查看某個應用、甚至應用下某個具體的操作的完整鏈路調用情況，鏈路中每個過程處理的時間信息，每個鏈路上顯示traceid信息，並提供快速複製功能，方便用戶在跟蹤日誌中快速查看此次鏈路對應的日誌信息。</p><p><br></p><p>根據請求中的時間信息，在請求響應慢的時候追溯具體慢的操作。</p><p><br></p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/3304faa341e04715af34e8eae8ff05eb><p class=pgc-img-caption></p></div><p>鏈路調用的時序情況，通過不同顏色區分應用系統，可以查看具體調用的詳細信息（組件、url、請求方式、異常信息等）。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7077e43d8a3c4781b6a3d76ea5f9aa4e><p class=pgc-img-caption></p></div><p>鏈路日誌，前面我們已經完成了請求完整鏈路的還原，不過這些信息還不能查出根本原因，對應異常發生的根本原因，我們有時還需要通過系統記錄的日誌文件進行查看，通過日誌文件記錄的錯誤信息進行排查根本原因。</p><p>我們在查看日誌文件時，也不是直接顯示日誌文件所有內容，而是通過以與鏈路對應的方式，顯示每個鏈路環節中記錄的日誌信息，查看異常詳細原因。</p><p>另外，在跟蹤日誌模塊，我們針對性的過濾篩選錯誤日誌、事務日誌等信息。</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/bf4a033cacf043e7ac298d61985d9399><p class=pgc-img-caption></p></div><p><br></p><p>平臺通過鏈路組件採集的請求處理信息，對這些信息進行統計，從多個維度提供統計數據供運維人員進行參考分析</p><p><br></p><p>統計某個應用、某個請求路徑的總請求數、正常響應數、錯誤響應數、最長處理時間、最少處理時間、平均處理時間以及各類異常處理的統計</p><div class=pgc-img><img alt=微服務平臺之全鏈路追蹤 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/cff2d8040189409e9dab9b1ca1506e06><p class=pgc-img-caption></p></div><p>在平臺正常運行一段時間後，運維人員普遍關注平臺的運行情況，尤其是哪些請求比較頻繁、哪些請求比較耗時、哪些請求錯誤率比較高、哪些錯誤數多，而這些信息對於運維人員比較敏感，因此平臺中提供直接顯示統計數據的方式供參考。</p><p>本文主要介紹微服務架構下的鏈路追蹤的應用場景，主要解決哪些問題，對於一個剛接觸鏈路追蹤的新人來說，如何快速上手將鏈路追蹤引入到項目中，也將我們普元微服務平臺下的鏈路追蹤的應用簡單介紹了一下，便於大家在項目中進行實際的應用參考。文中沒有對目前市場上開源的鏈路追蹤的組件做過多介紹以及之間的比較，也沒有對skywalking這個組件的使用配置做詳細介紹，相關的這些知識我們有專欄介紹，大家可以查看歷史文章進行了解。</p><p><br></p><p><strong>關於作者</strong>：軒雨，普元產品經理，主要負責公司微服務、容器雲相關產品的研發和實施，在分佈式架構、微服務、DevOps、容器雲、軟件工程等領域方向具有較深的積累，擁有十多年的產品研發與多個大型平臺項目管理經驗。</p><p><strong>關於EAWorld</strong>：微服務，DevOps，數據治理，移動架構原創技術分享。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>務平</a></li><li><a>全鏈</a></li><li><a>微服</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/1cd5d250.html alt=3個案例讀懂：全鏈路用戶路徑分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RjZyevYGAPnBiN style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1cd5d250.html title=3個案例讀懂：全鏈路用戶路徑分析>3個案例讀懂：全鏈路用戶路徑分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9a0cbd7f.html alt=微服務-如何解決鏈路追蹤問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6ad951a771234a11bf19e1aefb90ac22 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9a0cbd7f.html title=微服務-如何解決鏈路追蹤問題>微服務-如何解決鏈路追蹤問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e743ec99.html alt=愛奇藝全鏈路自動化監控平臺的探索與實踐 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a251285ab0114113a21ddb71be44f4a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e743ec99.html title=愛奇藝全鏈路自動化監控平臺的探索與實踐>愛奇藝全鏈路自動化監控平臺的探索與實踐</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/205fd96b.html alt=詳解全鏈路監控架構--目標、功能模塊、Dapper和方案比較 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0b9522caad164be69c095a59cd295572 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/205fd96b.html title=詳解全鏈路監控架構--目標、功能模塊、Dapper和方案比較>詳解全鏈路監控架構--目標、功能模塊、Dapper和方案比較</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c7fb95fc.html alt=智能網呼喚“全鏈安防” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c7fb95fc.html title=智能網呼喚“全鏈安防”>智能網呼喚“全鏈安防”</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/06d144fa.html alt=我國國立科研機構全鏈條式創新的模式研究 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/06d144fa.html title=我國國立科研機構全鏈條式創新的模式研究>我國國立科研機構全鏈條式創新的模式研究</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9007567.html alt="支持基礎研究 促進全鏈條顛覆性技術創新" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/594d6e55b93a43bd91eb17627d65d72d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9007567.html title="支持基礎研究 促進全鏈條顛覆性技術創新">支持基礎研究 促進全鏈條顛覆性技術創新</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/55144eb.html alt="京東小程序正式發佈 致力提供全鏈路一站式用戶體驗" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/55144eb.html title="京東小程序正式發佈 致力提供全鏈路一站式用戶體驗">京東小程序正式發佈 致力提供全鏈路一站式用戶體驗</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/745cef4.html alt=微服務：小型系統如何“微服務”化開發？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4eddd2b379094df6ae94f1dd83c4de59 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/745cef4.html title=微服務：小型系統如何“微服務”化開發？>微服務：小型系統如何“微服務”化開發？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f580802.html alt=恕我直言，你可能誤解了微服務 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d1f5ae170be849acaf745afe22345217 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f580802.html title=恕我直言，你可能誤解了微服務>恕我直言，你可能誤解了微服務</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0f1e574.html alt=【微服務】自助服務渠道之修改密碼篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/acb196943cf741c5b2b19e57c395ef3a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0f1e574.html title=【微服務】自助服務渠道之修改密碼篇>【微服務】自助服務渠道之修改密碼篇</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/d30f98e.html alt=“開展全鏈條打擊”——中國依法嚴打電信網絡詐騙違法犯罪“迎難而上” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/d30f98e.html title=“開展全鏈條打擊”——中國依法嚴打電信網絡詐騙違法犯罪“迎難而上”>“開展全鏈條打擊”——中國依法嚴打電信網絡詐騙違法犯罪“迎難而上”</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>