<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/be3198d6b6434788b6b4caf468fda2d2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf16069.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf16069.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf16069.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/cf16069.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>ä¸€ã€é©é…å™¨æ¨¡å¼çš„æ‡‰ç”¨å ´æ™¯</h1><p>æˆ‘å€‘åœ¨ç¾å¯¦ç”Ÿæ´»è¦‹è­˜åˆ°çš„é›»æºæ’é ­è½‰æ›å™¨ã€æ‰‹æ©Ÿå……é›»è½‰æ›é ­ã€é¡¯ç¤ºå™¨è½‰æ¥é ­ç­‰éƒ½æ˜¯é©é…å™¨æ¨¡å¼çš„é«”ç¾ã€‚é©é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ˜¯æŒ‡ä¸€å€‹é¡çš„æ¥å£è½‰æ›æˆå®¢æˆ¶æœŸæœ›çš„å¦ä¸€å€‹æ¥å£ï¼Œä½¿åŸæœ¬çš„æ¥å£ä¸å…¼å®¹çš„é¡å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p><div class=pgc-img><img alt=æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/be3198d6b6434788b6b4caf468fda2d2><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a33d44c251af4c59a4bd8819219cc38f><p class=pgc-img-caption></p></div><div class=pgc-img><img alt=æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/08eba25d25a84ae9a799459c2db0c100><p class=pgc-img-caption></p></div><p>é©é…å™¨æ¨¡å¼é©ç”¨æ–¼ä»¥ä¸‹å¹¾ç¨®æ‡‰ç”¨å ´æ™¯ï¼š</p><ul><li>å·²ç¶“å­˜åœ¨çš„é¡ï¼Œå®ƒçš„æ–¹æ³•å’Œéœ€æ±‚ä¸åŒ¹é…ï¼ˆæ–¹æ³•çµæœç›¸åŒæˆ–ç›¸ä¼¼ï¼‰çš„æƒ…æ³ã€‚</li><li>é©é…å™¨æ¨¡å¼ä¸æ˜¯åœ¨è»Ÿä»¶åˆå§‹éšæ®µè€ƒæ…®çš„è¨­è¨ˆæ¨¡å¼ï¼Œå®ƒæ˜¯éš¨è‘—è»Ÿä»¶çš„ç™¼å±•ï¼Œç”±æ–¼ä¸åŒçš„ç”¢å“ã€ä¸åŒçš„å» å®¶é€ æˆåŠŸèƒ½é¡ä¼¼è€Œæ¥å£ä¸åŒçš„å•é¡Œçš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ‰é»äº¡ç¾Šè£œç‰¢çš„æ„Ÿè¦ºã€‚</li></ul><h2 class=pgc-h-arrow-right>1.1 ä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œ</h2><p>å¤§å®¶éƒ½çŸ¥é“ï¼Œæˆ‘åœ‹æ°‘ç”¨é›»é›»å£“æ˜¯220Vï¼Œè€Œæ—¥æœ¬çš„é›»å£“ç‚º100Vï¼Œå¦‚æœå»éæ—¥æœ¬æ—…éŠçš„æœ‹å‹æ‡‰è©²æœƒçŸ¥é“ï¼Œæˆ‘å€‘åœ¨å…¥ä½é…’åº—æ™‚ä½¿ç”¨é›»æºä¾†çµ¦æ‰‹æ©Ÿå……é›»çš„æ™‚å€™å°±éœ€è¦ä½¿ç”¨é›»æºæ’é ­è½‰æ›å™¨ä¾†é€²è¡Œè½‰æ›é›»å£“ï¼Œé€™æ¨£æ‰èƒ½çµ¦è‡ªå·±çš„æ‰‹æ©Ÿé€²è¡Œå……é›»ã€‚</p><p>é¦–å…ˆå‰µå»ºAC220é¡ ï¼Œè¡¨ç¤º220Väº¤æµé›»ä¸­åœ‹æ¨™æº–ï¼š</p><pre><code>public class AC220 {    public BigDecimal outputAC220V(){        BigDecimal output = new BigDecimal(220);        System.out.println("ä¸­åœ‹è¼¸å‡ºäº¤æµé›»" + output + "V");        return output;    }}</code></pre><p>å‰µå»º DC100 æ¥å£ï¼Œè¡¨ç¤º 100V ç›´æµé›»çš„æ—¥æœ¬æ¨™æº–ï¼š</p><pre><code>public interface DC100 {    BigDecimal outputDC100V();}</code></pre><p>å‰µå»ºé›»æºé©é…å™¨ PowerAdapter é¡ï¼š</p><pre><code>public class PowerAdapter implements DC100 {    private AC220 ac220;    public PowerAdapter(AC220 ac220) {        this.ac220 = ac220;    }    @Override    public BigDecimal outputDC100V() {        BigDecimal adapterInput = ac220.outputAC220V();        BigDecimal adapterOutput = adapterInput.divide(new BigDecimal(2.2), 2, BigDecimal.ROUND_HALF_UP)  ;        System.out.println("ä½¿ç”¨ PowerAdapter è¼¸å…¥ AC: " + adapterInput.intValue() +                "V" + "ï¼Œæ—¥æœ¬è¼¸å‡º DC: " + adapterOutput.intValue() + "V");        return  adapterOutput;    }}</code></pre><p>æ¸¬è©¦mainæ–¹æ³•ï¼š</p><pre><code>public static void main(String[] args) {    DC100 dc100 = new PowerAdapter(new AC220());    dc100.outputDC100V(); }</code></pre><p>ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œé€šéå¢åŠ  PowerAdapteré›»æºé©é…å™¨ï¼Œå¯¦ç¾äº†ä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“äºŒè€…çš„å…¼å®¹æ€§å•é¡Œã€‚</p><h2 class=pgc-h-arrow-right>1.2 ç¬¬ä¸‰æ–¹ç™»éŒ„è‡ªç”±é©é…çš„å•é¡Œ</h2><p>ç¾åœ¨ç€è¦½ä¸€äº›ç¶²ç«™ã€åšå®¢ã€è«–å£‡ä»¥åŠæ‰‹æ©ŸAPPçš„æ™‚å€™ï¼Œæˆ‘å€‘å¯ä»¥ä»¥QQã€å¾®ä¿¡ã€æ–°æµªå¾®åšç­‰å¤šç¨®æ–¹å¼é€²è¡Œç³»çµ±ç™»éŒ„ã€‚é›–ç„¶ç™»éŒ„å½¢å¼è±å¯Œäº†ï¼Œä½†æ˜¯ç™»éŒ„å¾Œçš„é‚è¼¯ä¸ç”¨ä¿®æ”¹ï¼ŒåŒæ¨£æ˜¯ä¿å­˜ç™»éŒ„ç‹€æ…‹åˆ°sessionï¼Œéµå¾ªé–‹é–‰åŸå‰‡ã€‚</p><p>é¦–å…ˆå‰µå»ºçµ±ä¸€çš„çµæœè¿”å›é¡ï¼š</p><pre><code>public class ResultMsg {    private int code;    private String msg;    private Object data;    public ResultMsg(int code, String msg, Object data) {        this.code = code;        this.msg = msg;        this.data = data;    }    public int getCode() {        return code;    }    public void setCode(int code) {        this.code = code;    }    public String getMsg() {        return msg;    }    public void setMsg(String msg) {        this.msg = msg;    }    public Object getData() {        return data;    }    public void setData(Object data) {        this.data = data;    }    @Override    public String toString() {        return "ResultMsg{" +                "code=" + code +                ", msg='" + msg + '\'' +                ", data=" + data +                '}';    }}</code></pre><p>å‰µå»ºç”¨æˆ¶é¡ï¼š</p><pre><code>public class User {    private String id;    private String username;    private String password;    private String info;    public String getId() {        return id;    }    public void setId(String id) {        this.id = id;    }    public String getUsername() {        return username;    }    public void setUsername(String username) {        this.username = username;    }    public String getPassword() {        return password;    }    public void setPassword(String password) {        this.password = password;    }    public String getInfo() {        return info;    }    public void setInfo(String info) {        this.info = info;    }}</code></pre><p>ä¹‹å‰è€çš„ç™»éŒ„é‚è¼¯é¡æ˜¯é€™æ¨£å­çš„ï¼š</p><pre><code>public class SignService {    /**     * è¨»å†Š     * @param username     * @param password     * @return     */    public ResultMsg register(String username, String password) {        User user = new User();        user.setUsername(username);        user.setPassword(password);        return new ResultMsg(0, "è¨»å†ŠæˆåŠŸ", user);    }    /**     * ç™»éŒ„     * @param username     * @param password     * @return     */    public ResultMsg login(String username, String password) {        return null;    }}</code></pre><p>æˆ‘å€‘æœƒå‰µå»ºä¸€å€‹æ–°çš„é¡ç¹¼æ‰¿åŸä¾†çš„ç™»éŒ„é‚è¼¯é¡ï¼Œä¹‹å‰çš„ä»£ç¢¼æˆ‘å€‘ç„¡éœ€åšä»»ä½•æ”¹å‹•ï¼š</p><pre><code>public class Sign4ThirdpartyService extends SignService {    public ResultMsg login4Register(String username,String password){        super.register(username,password);        return super.login(username,password);    }    public ResultMsg login4Phone(String phone,String code){        return null;    }    public ResultMsg login4Token(String token){        //é€šé token æ‹¿åˆ°ç”¨æˆ¶ä¿¡æ¯ï¼Œç„¶å¾Œå†é‡æ–°ç™»é™¸äº†ä¸€æ¬¡        return null;    }    public ResultMsg login4QQ(String openId){        //1ã€openId æ˜¯å…¨å±€å”¯ä¸€        //2ã€å¯†ç¢¼é»˜èªç‚º QQ_EMPTY        //3ã€è¨»å†Šï¼ˆåœ¨åŸæœ‰ç³»çµ±è£¡é¢å‰µå»ºä¸€å€‹ç”¨æˆ¶ï¼‰        //4ã€èª¿ç”¨åŸä¾†çš„ç™»éŒ„æ–¹æ³•        return login4Register(openId,null);    }    public ResultMsg login4Wechat(String openId){        return null;    }}</code></pre><p>mainæ–¹æ³•ï¼š</p><pre><code> public static void main(String[] args) {    Sign4ThirdpartyService service = new Sign4ThirdpartyService();    service.login4QQ("qwqwqweyrtyrt13234");}</code></pre><p>ç•¶ç„¶æˆ‘å€‘é‚„å¯ä»¥æ ¹æ“šä¸åŒçš„ç™»éŒ„æ–¹å¼å‰µå»ºä¸åŒçš„Adapteré©é…å™¨ï¼Œæ¥è‘—æ”¹é€ ä»£ç¢¼ï¼š</p><p>é¦–å…ˆï¼Œå‰µå»º LoginAdapter æ¥å£ï¼š</p><pre><code>public interface LoginAdapter {    boolean support(Object adapter);    ResultMsg login(String id, Object adapter);}</code></pre><p>åˆ†åˆ¥å¯¦ç¾ä¸åŒçš„ç™»éŒ„é©é…ï¼ŒQQ ç™»éŒ„ LoginForQQAdapterï¼š</p><pre><code>public class Login4QQAdapter implements LoginAdapter {    @Override    public boolean support(Object adapter) {        return adapter instanceof Login4QQAdapter;    }    @Override    public ResultMsg login(String id, Object adapter) {        return null;    }}</code></pre><p>å¾®ä¿¡ç™»éŒ„ LoginForWechatAdapterï¼š</p><pre><code>public class Login4WechatAdapter implements LoginAdapter {    @Override    public boolean support(Object adapter) {        return adapter instanceof Login4WechatAdapter;    }    @Override    public ResultMsg login(String id, Object adapter) {        return null;    }}</code></pre><p>tokenç™»éŒ„ Login4TokenAdapterï¼š</p><pre><code>public class Login4TokenAdapter implements LoginAdapter {    @Override    public boolean support(Object adapter) {        return adapter instanceof Login4TokenAdapter;    }    @Override    public ResultMsg login(String id, Object adapter) {        return null;    }}</code></pre><p>æ‰‹æ©Ÿè™Ÿç¢¼ç™»éŒ„ Login4TelphoneAdapterï¼š</p><pre><code>public class Login4TelphoneAdapter implements LoginAdapter {    @Override    public boolean support(Object adapter) {        return adapter instanceof Login4TelphoneAdapter;    }    @Override    public ResultMsg login(String id, Object adapter) {        return null;    }}</code></pre><p>å‰µå»ºèˆ‡ç¬¬ä¸‰æ–¹å…¼å®¹æ¥å£ IPassport4Thirdpartyï¼š</p><pre><code>public interface IPassport4Thirdparty {    /**     * QQ ç™»éŒ„     * @param id     * @return    23     */    ResultMsg login4QQ(String id);    /**     * å¾®ä¿¡ç™»éŒ„     * @param id     * @return     */    ResultMsg login4Wechat(String id);    /**     * è¨˜ä½ç™»éŒ„ç‹€æ…‹å¾Œè‡ªå‹•ç™»éŒ„     * @param token     * @return     */    ResultMsg login4Token(String token);    /**     * æ‰‹æ©Ÿè™Ÿç™»éŒ„     * @param telphone     * @param code     * @return     */    ResultMsg login4Telphone(String telphone, String code);    /**     * è¨»å†Šå¾Œè‡ªå‹•ç™»éŒ„     * @param username     * @param passport     * @return     */    ResultMsg login4Register(String username, String passport);}</code></pre><p>å¯¦ç¾å…¼å®¹é©é…å™¨ Passport4ThirdpartyAdapterï¼š</p><pre><code>public class Passport4ThirdpartyAdapter extends SignService implements IPassport4Thirdparty {    private ResultMsg processLogin(String key, Class&lt;? extends LoginAdapter&gt; clazz) {        try {            LoginAdapter loginAdapter = clazz.newInstance();            if(loginAdapter.support(loginAdapter)) {                return loginAdapter.login(key, loginAdapter);            }else {                return null;            }        } catch (InstantiationException e) {            e.printStackTrace();        } catch (IllegalAccessException e) {            e.printStackTrace();        }        return null;    }    @Override    public ResultMsg login4QQ(String id) {        return processLogin(id, Login4QQAdapter.class);    }    @Override    public ResultMsg login4Wechat(String id) {        return processLogin(id, Login4WechatAdapter.class);    }    @Override    public ResultMsg login4Token(String token) {        return processLogin(token, Login4TokenAdapter.class);    }    @Override    public ResultMsg login4Telphone(String telphone, String code) {        return processLogin(telphone, Login4TelphoneAdapter.class);    }    @Override    public ResultMsg login4Register(String username, String passport) {        super.register(username,null);        return super.login(username,null);    }}</code></pre><p>æœ€å¾Œä¾†çœ‹ä¸€ä¸‹é¡åœ–ï¼š</p><div class=pgc-img><img alt=æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/2db21526f8384846bc2d1d97741e10f4><p class=pgc-img-caption></p></div><p>è‡³æ­¤ï¼Œæˆ‘å€‘åœ¨éµå¾ªé–‹é–‰åŸå‰‡çš„å‰æä¸‹ï¼Œå®Œæ•´åœ°å¯¦ç¾äº†ä¸€å€‹å…¼å®¹å¤šå¹³è‡ºç™»éŒ„çš„æ¥­å‹™å ´æ™¯ã€‚ç•¶ç„¶ï¼Œç›®å‰çš„é€™å€‹è¨­è¨ˆä¹Ÿä¸¦ä¸å®Œç¾ï¼Œåƒ…ä¾›åƒè€ƒã€‚ä¸Šé¢çš„ä»£ç¢¼å¯ä»¥èªªæ˜¯<strong>ç­–ç•¥æ¨¡å¼ã€ç°¡å–®å·¥å» æ¨¡å¼å’Œé©é…å™¨æ¨¡å¼çš„ç¶œåˆé‹ç”¨ã€‚</strong></p><h1 class=pgc-h-arrow-right>äºŒã€é©é…å™¨æ¨¡å¼åœ¨æºç¢¼ä¸­çš„é«”ç¾</h1><h2 class=pgc-h-arrow-right>2.1 Springä¸­çš„AdvisorAdapteræ¥å£</h2><p>Spring ä¸­é©é…å™¨æ¨¡å¼ä¹Ÿæ‡‰ç”¨å¾—éå¸¸å»£æ³›ï¼Œä¾‹å¦‚ï¼šSpringAOP ä¸­çš„ <strong>AdvisorAdapter</strong> é¡ï¼Œå®ƒæœ‰ä¸‰å€‹å¯¦ç¾é¡ <strong>MethodBeforeAdviceAdapter</strong>ã€<strong>AfterReturningAdviceAdapter</strong> å’Œ<strong>ThrowsAdviceAdapter</strong>ï¼Œå…ˆä¾†çœ‹é ‚å±¤æ¥å£ AdvisorAdapter çš„æºä»£ç¢¼ï¼š</p><pre><code>public interface AdvisorAdapter {    boolean supportsAdvice(Advice var1);    MethodInterceptor getInterceptor(Advisor var1);}</code></pre><p>å†çœ‹ MethodBeforeAdviceAdapter é¡ï¼š</p><pre><code>class MethodBeforeAdviceAdapter implements AdvisorAdapter, Serializable {    MethodBeforeAdviceAdapter() {    }    public boolean supportsAdvice(Advice advice) {        return advice instanceof MethodBeforeAdvice;    }    public MethodInterceptor getInterceptor(Advisor advisor) {        MethodBeforeAdvice advice = (MethodBeforeAdvice)advisor.getAdvice();        return new MethodBeforeAdviceInterceptor(advice);    }}</code></pre><p>ç„¶å¾Œä¾†çœ‹ AfterReturningAdviceAdapter é¡ï¼š</p><pre><code>class AfterReturningAdviceAdapter implements AdvisorAdapter, Serializable {    AfterReturningAdviceAdapter() {    }    public boolean supportsAdvice(Advice advice) {        return advice instanceof AfterReturningAdvice;    }    public MethodInterceptor getInterceptor(Advisor advisor) {        AfterReturningAdvice advice = (AfterReturningAdvice)advisor.getAdvice();        return new AfterReturningAdviceInterceptor(advice);    }}</code></pre><p>æœ€å¾Œä¾†çœ‹ ThrowsAdviceAdapter é¡ï¼š</p><pre><code>class ThrowsAdviceAdapter implements AdvisorAdapter, Serializable {    ThrowsAdviceAdapter() {    }    public boolean supportsAdvice(Advice advice) {        return advice instanceof ThrowsAdvice;    }    public MethodInterceptor getInterceptor(Advisor advisor) {        return new ThrowsAdviceInterceptor(advisor.getAdvice());    }}</code></pre><p>Spring æœƒæ ¹æ“šä¸åŒçš„ AOP é…ç½®ä¾†ç¢ºå®šä½¿ç”¨å°æ‡‰çš„ Adviceï¼Œè·Ÿç­–ç•¥æ¨¡å¼ä¸åŒçš„ä¸€å€‹æ–¹æ³•å¯ä»¥åŒæ™‚æ“æœ‰å¤šå€‹ Adviceã€‚</p><h2 class=pgc-h-arrow-right>2.2 Springä¸­çš„HandlerAdapter</h2><p>ä¸‹é¢å†ä¾†çœ‹ä¸€å€‹ SpringMVC ä¸­çš„ <strong>HandlerAdapter</strong> é¡ï¼Œå®ƒä¹Ÿæœ‰å¤šå€‹å­é¡ï¼Œé¡åœ–å¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt=æ¶æ§‹å¸«å…§åŠŸå¿ƒæ³•ï¼Œä¸­åœ‹èˆ‡æ—¥æœ¬äº¤æµé›»å£“å…¼å®¹æ€§å•é¡Œçš„é©é…å™¨æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/d6b7c5966d4d4582a1faa2ab8e1ef6c0><p class=pgc-img-caption></p></div><p>ä¸‰ã€é©é…å™¨æ¨¡å¼çš„å„ªç¼ºé»</p><p>å„ªé»ï¼š</p><ul><li>èƒ½æé«˜é¡çš„é€æ˜æ€§å’Œè¤‡ç”¨æ€§ï¼Œç¾æœ‰çš„é¡è¤‡ç”¨ä½†ä¸éœ€è¦æ”¹è®Šï¼›</li><li>ç›®æ¨™é¡å’Œé©é…å™¨é¡è§£è€¦ï¼Œæé«˜ç¨‹åºçš„æ“´å±•æ€§ï¼›</li><li>åœ¨å¾ˆå¤šæ¥­å‹™å ´æ™¯ä¸­ç¬¦åˆé–‹é–‰åŸå‰‡ã€‚</li></ul><p>ç¼ºé»ï¼š</p><ul><li>é©é…å™¨ç·¨å¯«éç¨‹éœ€è¦å…¨é¢è€ƒæ…®ï¼Œå¯èƒ½æœƒå¢åŠ ç³»çµ±çš„è¤‡é›œæ€§ï¼›</li><li>å¢åŠ ä»£ç¢¼é–±è®€é›£åº¦ï¼Œé™ä½ä»£ç¢¼å¯è®€æ€§ï¼Œéå¤šä½¿ç”¨é©é…å™¨æœƒä½¿ç³»çµ±ä»£ç¢¼è®Šå¾—å‡Œäº‚ã€‚</li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>æ¶æ§‹</a></li><li><a>å¸«å…§åŠŸ</a></li><li><a>ä¸­åœ‹</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/24a6006e.html alt=æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/2af10e2429bc47a5823244277a07bb77 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24a6006e.html title=æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹>æœå‹™å™¨æ¶æ§‹ï¼šåå¼µåœ–å¸¶ä½ ç­è§£å¤§å‹ç¶²ç«™æ¶æ§‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/81e23745.html alt=2018å¹´ä¸­åœ‹è™›æ“¬ç¾å¯¦è¡Œæ¥­è¦æ¨¡è¶…200å„„å…ƒï¼Œå…¶ä¸­è™›æ“¬è£½é€ ä½”æ¯”æœ€é«˜ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9ea544b278cc4007bf1ea7c686f4af6a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/81e23745.html title=2018å¹´ä¸­åœ‹è™›æ“¬ç¾å¯¦è¡Œæ¥­è¦æ¨¡è¶…200å„„å…ƒï¼Œå…¶ä¸­è™›æ“¬è£½é€ ä½”æ¯”æœ€é«˜>2018å¹´ä¸­åœ‹è™›æ“¬ç¾å¯¦è¡Œæ¥­è¦æ¨¡è¶…200å„„å…ƒï¼Œå…¶ä¸­è™›æ“¬è£½é€ ä½”æ¯”æœ€é«˜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3698dff7.html alt=ä¸æ„§ä¸­åœ‹è¶³çƒæœ€å¥½çš„çƒå“¡ï¼šå³æ›¦æ˜¨æ™šå†ç¾4é¡é ­ç¢¾å£“æ†å¤§å¤–æ´ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/20a2b5c2d49b41dfab4816c0956739db style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3698dff7.html title=ä¸æ„§ä¸­åœ‹è¶³çƒæœ€å¥½çš„çƒå“¡ï¼šå³æ›¦æ˜¨æ™šå†ç¾4é¡é ­ç¢¾å£“æ†å¤§å¤–æ´>ä¸æ„§ä¸­åœ‹è¶³çƒæœ€å¥½çš„çƒå“¡ï¼šå³æ›¦æ˜¨æ™šå†ç¾4é¡é ­ç¢¾å£“æ†å¤§å¤–æ´</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9feb8b0e.html alt="ä¸­åœ‹éŠ€è¯åŠ©åŠ›æ‹›è¡ŒæŒä¸Šç”Ÿæ´»APPå…¬ç¹³å ´æ™¯å»ºè¨­ æœå‹™æ›´å»£å¤§æŒå¡äºº" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9feb8b0e.html title="ä¸­åœ‹éŠ€è¯åŠ©åŠ›æ‹›è¡ŒæŒä¸Šç”Ÿæ´»APPå…¬ç¹³å ´æ™¯å»ºè¨­ æœå‹™æ›´å»£å¤§æŒå¡äºº">ä¸­åœ‹éŠ€è¯åŠ©åŠ›æ‹›è¡ŒæŒä¸Šç”Ÿæ´»APPå…¬ç¹³å ´æ™¯å»ºè¨­ æœå‹™æ›´å»£å¤§æŒå¡äºº</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb83c54f.html alt=ä¸­åœ‹æœ€å¤§è·¨åº¦é€£çºŒç®¡ç¿¼ç·£é‹¼æ··çµ„åˆæ©‹è˜­å·è‡³è˜­å·æ–°å€æ®µæ¶è¨­ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e7b723dc504143a19e9b274c7169a5f2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb83c54f.html title=ä¸­åœ‹æœ€å¤§è·¨åº¦é€£çºŒç®¡ç¿¼ç·£é‹¼æ··çµ„åˆæ©‹è˜­å·è‡³è˜­å·æ–°å€æ®µæ¶è¨­>ä¸­åœ‹æœ€å¤§è·¨åº¦é€£çºŒç®¡ç¿¼ç·£é‹¼æ··çµ„åˆæ©‹è˜­å·è‡³è˜­å·æ–°å€æ®µæ¶è¨­</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/783bab9e.html alt="ä¸­åœ‹é£›é¾æ•™å“¡è¶™å®ˆå¿—ï¼šè€é©¥ä¼æ«ª å¿—åœ¨è—å¤©" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Rab9Rb7CjjwTad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/783bab9e.html title="ä¸­åœ‹é£›é¾æ•™å“¡è¶™å®ˆå¿—ï¼šè€é©¥ä¼æ«ª å¿—åœ¨è—å¤©">ä¸­åœ‹é£›é¾æ•™å“¡è¶™å®ˆå¿—ï¼šè€é©¥ä¼æ«ª å¿—åœ¨è—å¤©</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/098d6e68.html alt=ä¸­åœ‹äººæ°‘å¤§å­¸2021å¹´ä¿„èªèªè¨€æ–‡å­¸è€ƒç ”ç¶“é©—å‚™è€ƒæŒ‡å°å½™ç¸½ç¦åˆ©è²¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e036169e9f3d431396228d76fffaa745 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/098d6e68.html title=ä¸­åœ‹äººæ°‘å¤§å­¸2021å¹´ä¿„èªèªè¨€æ–‡å­¸è€ƒç ”ç¶“é©—å‚™è€ƒæŒ‡å°å½™ç¸½ç¦åˆ©è²¼>ä¸­åœ‹äººæ°‘å¤§å­¸2021å¹´ä¿„èªèªè¨€æ–‡å­¸è€ƒç ”ç¶“é©—å‚™è€ƒæŒ‡å°å½™ç¸½ç¦åˆ©è²¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b1cff9b4.html alt=2019å¹´ä¸­åœ‹æ¸›é€Ÿæ©Ÿè¡Œæ¥­ç¾ç‹€åŠæ¸›é€Ÿæ©Ÿç›¸é—œä¼æ¥­åˆ†æ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b9243cdf1fec40aabbcd359410a91d1d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b1cff9b4.html title=2019å¹´ä¸­åœ‹æ¸›é€Ÿæ©Ÿè¡Œæ¥­ç¾ç‹€åŠæ¸›é€Ÿæ©Ÿç›¸é—œä¼æ¥­åˆ†æ>2019å¹´ä¸­åœ‹æ¸›é€Ÿæ©Ÿè¡Œæ¥­ç¾ç‹€åŠæ¸›é€Ÿæ©Ÿç›¸é—œä¼æ¥­åˆ†æ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6237da3d.html alt=æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0670cbc9828449c782ac323a238b99e3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6237da3d.html title=æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ>æœ—å¤é›™æ¨¡ITæ¶æ§‹çš„æ™ºæ…§é›»å» ï¼Œæ›´å®‰å…¨ã€æ›´ç¶“æ¿Ÿã€æ›´ç’°ä¿ã€æ›´é«˜æ•ˆ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8809067a.html alt=åœ–è§£ï¼šä¸­åœ‹é¦–æ¬¾é‡ç”¢çš„å…©æª”é›»é©…å‹•æ©‹ï¼Œå°ˆç‚ºSUVé›»å‹•åŒ–è€Œä¾†ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153809842787775889e4159 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8809067a.html title=åœ–è§£ï¼šä¸­åœ‹é¦–æ¬¾é‡ç”¢çš„å…©æª”é›»é©…å‹•æ©‹ï¼Œå°ˆç‚ºSUVé›»å‹•åŒ–è€Œä¾†ï¼>åœ–è§£ï¼šä¸­åœ‹é¦–æ¬¾é‡ç”¢çš„å…©æª”é›»é©…å‹•æ©‹ï¼Œå°ˆç‚ºSUVé›»å‹•åŒ–è€Œä¾†ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7d23b4d2.html alt=ä¸­åœ‹çš„ç¬¬ä¸€ä»½å…ƒç´ é€±æœŸè¡¨æ˜¯æ€éº¼ä¾†çš„ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/b412283a73a64e9aab0ca179d95ed889 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7d23b4d2.html title=ä¸­åœ‹çš„ç¬¬ä¸€ä»½å…ƒç´ é€±æœŸè¡¨æ˜¯æ€éº¼ä¾†çš„ï¼Ÿ>ä¸­åœ‹çš„ç¬¬ä¸€ä»½å…ƒç´ é€±æœŸè¡¨æ˜¯æ€éº¼ä¾†çš„ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d7b1999c.html alt=ä¸­åœ‹æœ‰ä¸€æ¢é•·é”50å…¬é‡Œå…§é™¸æˆˆå£è…¹åœ°ï¼Œç«Ÿç„¶æ·±è—ä¸€å€‹å·¨å¤§è¿·å®® class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1538199204255b651f767a1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d7b1999c.html title=ä¸­åœ‹æœ‰ä¸€æ¢é•·é”50å…¬é‡Œå…§é™¸æˆˆå£è…¹åœ°ï¼Œç«Ÿç„¶æ·±è—ä¸€å€‹å·¨å¤§è¿·å®®>ä¸­åœ‹æœ‰ä¸€æ¢é•·é”50å…¬é‡Œå…§é™¸æˆˆå£è…¹åœ°ï¼Œç«Ÿç„¶æ·±è—ä¸€å€‹å·¨å¤§è¿·å®®</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/82d3d051.html alt=ä¸­åœ‹æ¹–æ³Šä¹‹æ–°ç–†ç¯‡ï¼šé¯¨é­šæ¹– class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15375166781853367289587 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/82d3d051.html title=ä¸­åœ‹æ¹–æ³Šä¹‹æ–°ç–†ç¯‡ï¼šé¯¨é­šæ¹–>ä¸­åœ‹æ¹–æ³Šä¹‹æ–°ç–†ç¯‡ï¼šé¯¨é­šæ¹–</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9692432a.html alt=ä¸­åœ‹é€™äº›è¶…ç´šé¹½æ¹–ï¼Œå¯¦åŠ›èˆ‡é­…åŠ›ä¸¦å­˜ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15379278320496657273e6c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9692432a.html title=ä¸­åœ‹é€™äº›è¶…ç´šé¹½æ¹–ï¼Œå¯¦åŠ›èˆ‡é­…åŠ›ä¸¦å­˜>ä¸­åœ‹é€™äº›è¶…ç´šé¹½æ¹–ï¼Œå¯¦åŠ›èˆ‡é­…åŠ›ä¸¦å­˜</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/348cc5a0.html alt=ä¸­åœ‹æ­·å²ä¸­é—œæ–¼èˆ¹çš„å‰å¤§ç™¼æ˜â€”â€”æ°´å¯†è‰™å£æŠ€è¡“ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/153607142775819b8d0b1db style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/348cc5a0.html title=ä¸­åœ‹æ­·å²ä¸­é—œæ–¼èˆ¹çš„å‰å¤§ç™¼æ˜â€”â€”æ°´å¯†è‰™å£æŠ€è¡“>ä¸­åœ‹æ­·å²ä¸­é—œæ–¼èˆ¹çš„å‰å¤§ç™¼æ˜â€”â€”æ°´å¯†è‰™å£æŠ€è¡“</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>