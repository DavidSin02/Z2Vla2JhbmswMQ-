<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š | æå®¢å¿«è¨Š</title><meta property="og:title" content="é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p9.pstatp.com/large/pgc-image/0ca013e258664cbb94ab2d6883b0fd97"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/cf7f98c8.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/cf7f98c8.html><meta property="article:published_time" content="2020-11-14T21:04:30+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:30+08:00"><meta name=Keywords content><meta name=description content="é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/cf7f98c8.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right>1 å‰è¨€</h1><ol start=1><li>Springæ˜¯ä¸€å€‹è¼•é‡ç´šé–‹æºæ¡†æ¶ï¼Œå®ƒæ˜¯ç‚ºäº†è§£æ±ºä¼æ¥­æ‡‰ç”¨é–‹ç™¼çš„è¤‡é›œæ€§è€Œå‰µå»ºçš„ã€‚æ¡†æ¶çš„ä¸»è¦å„ªå‹¢ä¹‹ä¸€å°±æ˜¯å…¶åˆ†å±¤æ¶æ§‹ï¼Œåˆ†å±¤æ¶æ§‹å…è¨±ä½¿ç”¨è€…é¸æ“‡ä½¿ç”¨å“ªä¸€å€‹çµ„ä»¶ï¼ŒåŒæ™‚ç‚º J2EE æ‡‰ç”¨ç¨‹åºé–‹ç™¼æä¾›é›†æˆçš„æ¡†æ¶ã€‚</li><li>Springæ˜¯çœ¾å¤šå„ªç§€è¨­è¨ˆæ¨¡å¼çš„çµ„åˆï¼ˆå·¥å» ã€å–®ä¾‹ã€ä»£ç†ã€é©é…å™¨ã€åŒ…è£å™¨ã€è§€å¯Ÿè€…ã€æ¨¡æ¿ã€ç­–ç•¥ï¼‰ã€‚</li><li>Springçš„ç”¨é€”ä¸åƒ…é™æ–¼æœå‹™å™¨ç«¯çš„é–‹ç™¼ã€‚å¾ç°¡å–®æ€§ã€å¯æ¸¬è©¦æ€§å’Œé¬†è€¦åˆçš„è§’åº¦è€Œè¨€ï¼Œä»»ä½•Javaæ‡‰ç”¨éƒ½å¯ä»¥å¾Springä¸­å—ç›Šã€‚</li><li>Springä¸¦æœªæ›¿ä»£ç¾æœ‰æ¡†æ¶ç”¢å“ï¼Œè€Œæ˜¯å°‡çœ¾å¤šæ¡†æ¶é€²è¡Œæœ‰æ©Ÿæ•´åˆï¼Œç°¡åŒ–ä¼æ¥­ç´šé–‹ç™¼ï¼Œä¿—ç¨±"è† æ°´æ¡†æ¶"ã€‚</li></ol><h1 class=pgc-h-arrow-right>2 Springæ¶æ§‹çµ„æˆ</h1><p>Springæ¶æ§‹ç”±è«¸å¤šæ¨¡å¡Šçµ„æˆï¼Œå¯åˆ†é¡ç‚º</p><ul><li>æ ¸å¿ƒæŠ€è¡“ï¼šä¾è³´æ³¨å…¥ï¼Œäº‹ä»¶ï¼Œè³‡æºï¼Œi18nï¼Œé©—è­‰ï¼Œæ•¸æ“šç¶å®šï¼Œé¡å‹è½‰æ›ï¼ŒSpELï¼ŒAOPã€‚</li><li>æ¸¬è©¦ï¼šæ¨¡æ“¬å°è±¡ï¼ŒTestContextæ¡†æ¶ï¼ŒSpring MVCæ¸¬è©¦ï¼ŒWebTestClientã€‚</li><li>æ•¸æ“šè¨ªå•ï¼šäº‹å‹™ï¼ŒDAOæ”¯æŒï¼ŒJDBCï¼ŒORMï¼Œå°é€XMLã€‚</li><li>Spring MVCå’Œ Spring WebFlux Webæ¡†æ¶ã€‚</li><li>é›†æˆï¼šé ç¨‹è™•ç†ï¼ŒJMSï¼ŒJCAï¼ŒJMXï¼Œé›»å­éƒµä»¶ï¼Œä»»å‹™ï¼Œèª¿åº¦ï¼Œç·©å­˜ã€‚</li><li>èªè¨€ï¼šKotlinï¼ŒGroovyï¼Œå‹•æ…‹èªè¨€ã€‚</li><li>List item</li></ul><p>Springæ¶æ§‹çµ„æˆå¦‚ä¸‹åœ–</p><p><br></p><div class=pgc-img><img alt="é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/0ca013e258664cbb94ab2d6883b0fd97><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>3 Springç’°å¢ƒæ­å»º</h1><h1 class=pgc-h-arrow-right>3.1 pom.xmlä¸­å¼•å…¥Springå¸¸ç”¨ä¾è³´</h1><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xsi:schemaLocation=         "http://maven.apache.org/POM/4.0.0           http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;com.qf&lt;/groupId&gt;    &lt;artifactId&gt;hello-spring&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;dependencies&gt;        &lt;!-- Springå¸¸ç”¨ä¾è³´ --&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;            &lt;version&gt;5.1.6.RELEASE&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/project&gt;</code></pre><h1 class=pgc-h-arrow-right>3.2 å‰µå»ºSpringé…ç½®æ–‡ä»¶</h1><p>å‘½åç„¡é™åˆ¶ï¼Œç´„å®šä¿—æˆå‘½åæœ‰ï¼šspring-context.xmlã€applicationContext.xmlã€beans.xml</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;&lt;/beans&gt;</code></pre><h1 class=pgc-h-arrow-right>4 Springå·¥å» ç·¨ç¢¼ï¼ˆå…¥é–€ç¨‹åºï¼‰</h1><h1 class=pgc-h-arrow-right>4.1 å®šç¾©ç›®æ¨™Beané¡å‹</h1><pre><code>public class MyClass{    public void show(){        System.out.println("HelloWorld");    }}</code></pre><h1 class=pgc-h-arrow-right>4.2spring-context.xmlä¸­çš„&lt; beans >å…§éƒ¨é…ç½®bean</h1><p>åœ¨spring-context.xmlä¸­é…ç½®MyClassçš„beanå¾Œï¼Œç•¶é …ç›®å•Ÿå‹•æ™‚ï¼Œspringå®¹å™¨æœƒè‡ªå‹•å‰µå»ºMyClasså¯¦ä¾‹ï¼Œé€™å€‹å¯¦ä¾‹åå­—å«mc</p><pre><code>&lt;!-- é…ç½®å¯¦ä¾‹ï¼ˆid:â€œå”¯ä¸€æ¨™è­˜â€  class="éœ€è¦è¢«å‰µå»ºçš„ç›®æ¨™å°è±¡å…¨é™å®šå"ï¼‰ --&gt;&lt;bean id="mc" class="com.qf.spring.part1.factory.MyClass" /&gt;</code></pre><p>æ¸¬è©¦ä»£ç¢¼</p><pre><code>public class TestFactory{    /**     * ç¨‹åºä¸­çš„å°è±¡éƒ½äº¤ç”±Springçš„ApplicationContextå·¥å» é€²è¡Œå‰µå»ºã€‚     */    public static void main(String[] args){        //1\. è®€å–é…ç½®æ–‡ä»¶ä¸­æ‰€éœ€å‰µå»ºçš„beanå°è±¡ï¼Œä¸¦ç²å¾—å·¥å» å°è±¡        ApplicationContext ctx = new ClassPathXmlApplicationContext("spring-context.xml");        //2\. é€šéidç²å–beanå°è±¡        MyClass mc = (MyClass) ctx.getBean("mc");        //3\. ä½¿ç”¨å°è±¡        mc.show();    }}</code></pre><h1 class=pgc-h-arrow-right>5 IoCï¼ˆInversion of Control ï¼‰æ§åˆ¶åè½‰</h1><p>æ§åˆ¶åè½‰æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒï¼Œæ‰€è¬‚æ§åˆ¶åè½‰å°±æ˜¯æ‡‰ç”¨æœ¬èº«ä¸è² è²¬ä¾è³´å°è±¡çš„å‰µå»ºåŠç¶­è­·ï¼Œä¾è³´å°è±¡çš„å‰µå»ºåŠç¶­è­·æ˜¯ç”±å¤–éƒ¨å®¹å™¨è² è²¬çš„ï¼Œ é€™æ¨£æ§åˆ¶æ¬Šå°±ç”±æ‡‰ç”¨è½‰ç§»åˆ°äº†å¤–éƒ¨å®¹å™¨ï¼Œæ§åˆ¶æ¬Šçš„è½‰ç§»å°±æ˜¯æ‰€è¬‚åè½‰ã€‚é€™æ¨£å°±ç”±ä¹‹å‰çš„è‡ªå·±å‰µå»ºä¾è³´å°è±¡ï¼Œè®Šç‚ºç”±springå®¹å™¨å‰µå»ºã€‚(è®Šä¸»å‹•ç‚ºè¢«å‹•ï¼Œå³åè½‰)ã€‚æ§åˆ¶åè½‰è§£æ±ºäº†å…·æœ‰ä¾è³´é—œä¿‚çš„çµ„ä»¶ä¹‹é–“çš„å¼·è€¦åˆï¼Œä½¿å¾—é …ç›®å½¢æ…‹æ›´åŠ ç©©å¥ã€‚</p><h1 class=pgc-h-arrow-right>5.1 é …ç›®ä¸­å¼·è€¦åˆå•é¡Œ</h1><pre><code>public class UserDAOImpl implements UserDAO{....}</code></pre><pre><code>public class UserServiceImpl implements UserService {    // é€šéå‚³çµ±çš„newæ–¹å¼å¼·è€¦åˆäº†UserDAOImpl!!!,ä½¿å¾—UserServiceImplè®Šå¾—ä¸ç©©å¥!!    private UserDAO userDAO= new UserDAOImpl();    @Override    public User queryUser() {        return userDAO.queryUser();    }    ....}</code></pre><h1 class=pgc-h-arrow-right>5.2 è§£æ±ºæ–¹æ¡ˆ</h1><pre><code>// ä¸å¼•ç”¨ä»»ä½•ä¸€å€‹å…·é«”çš„çµ„ä»¶(å¯¦ç¾é¡)ï¼Œåœ¨éœ€è¦å…¶ä»–çµ„ä»¶çš„ä½ç½®é ç•™å­˜å–å€¼å…¥å£(set/get)public class UserServiceImpl implements UserService {    // !!!ä¸å†è€¦åˆä»»ä½•DAOå¯¦ç¾!!!,æ¶ˆé™¤ä¸ç©©å¥å› ç´ !!    private UserDAO userDAOï¼›    // ç‚ºuserDAOå®šç¾©set/get,å…è¨±userDAOå±¬æ€§æ¥æ”¶springè³¦å€¼    //Getters And Setters    @Override    public User queryUser() {        return userDAO.queryUser();    }    ....}</code></pre><p>åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®UserDAOå’ŒUserServiceå°æ‡‰çš„bean</p><pre><code>&lt;bean id="userDAO" class="com.qf.spring.part1.injection.UserDaoImpl"&gt;&lt;/bean&gt;&lt;!-- UserServiceImplçµ„ä»¶ --&gt;&lt;bean id="userService" class="com.qf.spring.part1.injection.UserServiceImpl"&gt;    &lt;!-- ç”±springç‚ºuserDAOå±¬æ€§è³¦å€¼ï¼Œå€¼ç‚ºid="userDAO"çš„bean --&gt;    &lt;property name="userDAO" ref="userDAO"/&gt;&lt;/bean&gt;</code></pre><h1 class=pgc-h-arrow-right>6 DIï¼ˆDependency Injectionï¼‰ä¾è³´æ³¨å…¥</h1><h1 class=pgc-h-arrow-right>6.1 æ¦‚å¿µ</h1><p>åœ¨Springå‰µå»ºå°è±¡çš„åŒæ™‚ï¼Œç‚ºå…¶å±¬æ€§è³¦å€¼ï¼Œç¨±ä¹‹ç‚ºä¾è³´æ³¨å…¥,æ³¨å…¥æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹2ç¨®</p><ul><li>æ§‹é€ å‡½æ•¸æ³¨å…¥</li><li>Setteræ–¹æ³•æ³¨å…¥</li></ul><h1 class=pgc-h-arrow-right>6.2 Setteræ–¹æ³•æ³¨å…¥</h1><p>å‰µå»ºå°è±¡æ™‚ï¼ŒSpringå·¥å» æœƒé€šéSetteræ–¹æ³•ç‚ºå°è±¡çš„å±¬æ€§è³¦å€¼ã€‚</p><h1 class=pgc-h-arrow-right>6.2.1 å®šç¾©ç›®æ¨™Beané¡å‹</h1><pre><code>public class User {    private Integer id;    private String password;    private String sex;    private Integer age;    private Date bornDate;    private String[] hobbys;    private Set&lt;String&gt; phones;    private List&lt;String&gt; names;    private Map&lt;String,String&gt; countries;    private Properties files;    //Getters And Setters}</code></pre><h1 class=pgc-h-arrow-right>6.2.2 åŸºæœ¬é¡å‹ + å­—ç¬¦ä¸²é¡å‹ + æ—¥æœŸé¡å‹</h1><pre><code>&lt;bean id="u1" class="com.qf.spring.part1.injection.User"&gt;    &lt;!--base field--&gt;    &lt;property name="id" value="1001" /&gt;    &lt;property name="password" value="123456" /&gt;    &lt;property name="sex" value="male" /&gt;    &lt;property name="age" value="20" /&gt;    &lt;property name="bornDate" value="1990/1/1" /&gt;&lt;!--æ³¨æ„æ ¼å¼"/"--&gt;&lt;/bean&gt;</code></pre><h1 class=pgc-h-arrow-right>6.2.3 å®¹å™¨é¡å‹ï¼ˆlist,set,map,Propertiesï¼‰</h1><pre><code>&lt;bean id="u1" class="com.qf.spring.part1.injection.User"&gt;       &lt;!--Array--&gt;    &lt;property name="hobbys"&gt;        &lt;array&gt;            &lt;value&gt;Run&lt;/value&gt;            &lt;value&gt;Swim&lt;/value&gt;            &lt;value&gt;Climb&lt;/value&gt;        &lt;/array&gt;    &lt;/property&gt;    &lt;!--Set--&gt;    &lt;property name="phones"&gt;        &lt;set&gt;            &lt;value&gt;13777777777&lt;/value&gt;            &lt;value&gt;13888888888&lt;/value&gt;            &lt;value&gt;13999999999&lt;/value&gt;        &lt;/set&gt;    &lt;/property&gt;    &lt;!--List--&gt;    &lt;property name="names"&gt;        &lt;list&gt;            &lt;value&gt;tom&lt;/value&gt;            &lt;value&gt;jack&lt;/value&gt;            &lt;value&gt;marry&lt;/value&gt;        &lt;/list&gt;    &lt;/property&gt;    &lt;!--Map--&gt;    &lt;property name="countries"&gt;        &lt;map&gt;            &lt;entry key="CN" value="China" /&gt;            &lt;entry key="US" value="America" /&gt;            &lt;entry key="KR" value="Korea" /&gt;        &lt;/map&gt;    &lt;/property&gt;    &lt;!--Properties--&gt;    &lt;property name="files"&gt;        &lt;props&gt;            &lt;prop key="first"&gt;One&lt;/prop&gt;            &lt;prop key="second"&gt;Two&lt;/prop&gt;            &lt;prop key="third"&gt;Three&lt;/prop&gt;        &lt;/props&gt;    &lt;/property&gt;&lt;/bean&gt;</code></pre><h1 class=pgc-h-arrow-right>6.2.4 è‡ªå®šç¾©é¡å‹</h1><pre><code>&lt;!--æ¬¡è¦beanï¼Œè¢«ä½œç‚ºå±¬æ€§--&gt;&lt;bean id="addr" class="com.qf.spring.part1.injection.Address"&gt;    &lt;property name="position" value="åŒ—äº¬å¸‚æµ·æ·€å€" /&gt;    &lt;property name="zipCode" value="100001" /&gt;&lt;/bean&gt;&lt;!--ä¸»è¦beanï¼Œæ“ä½œçš„ä¸»é«”--&gt;&lt;bean id="u2" class="com.qf.spring.part1.injection.User"&gt;    &lt;property name="address" ref="addr" /&gt;&lt;!--addresså±¬æ€§å¼•ç”¨addrå°è±¡--&gt;&lt;/bean&gt;</code></pre><h1 class=pgc-h-arrow-right>6.3 æ§‹é€ æ³¨å…¥</h1><p>å‰µå»ºå°è±¡æ™‚ï¼ŒSpringå·¥å» æœƒé€šéæ§‹é€ æ–¹æ³•ç‚ºå°è±¡çš„å±¬æ€§è³¦å€¼ã€‚</p><h1 class=pgc-h-arrow-right>6.3.1 å®šç¾©ç›®æ¨™Beané¡å‹</h1><pre><code>public class Student {    private Integer id;    private String name;    private String sex;    private Integer age;    //Constructors    public Student(Integer id , String name , String sex , Integer age){        this.id = id;        this.name = name;        this.sex = sex;        this.age = age;    }}è¤‡è£½ä»£ç¢¼</code></pre><h1 class=pgc-h-arrow-right>6.3.2 æ³¨å…¥</h1><pre><code> &lt;!--æ§‹é€ æ³¨å…¥--&gt;&lt;bean id="u3" class="com.qf.zcg.spring.day1.t2.ioc.Student"&gt;    &lt;constructor-arg name="id" value="1234" /&gt; &lt;!-- é™¤æ¨™ç±¤åç¨±æœ‰è®ŠåŒ–ï¼Œå…¶ä»–å‡å’ŒSetæ³¨å…¥ä¸€è‡´ --&gt;    &lt;constructor-arg name="name" value="tom" /&gt;    &lt;constructor-arg name="age" value="20" /&gt;    &lt;constructor-arg name="sex" value="male" /&gt;&lt;/bean&gt;</code></pre><h1 class=pgc-h-arrow-right>7 Springå·¥å» ç‰¹æ€§</h1><h1 class=pgc-h-arrow-right>7.1 é¤“æ¼¢å¼å‰µå»ºå„ªå‹¢</h1><p>å·¥å» å‰µå»ºä¹‹å¾Œï¼Œæœƒå°‡Springé…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰å°è±¡éƒ½å‰µå»ºå®Œæˆï¼ˆé¤“æ¼¢å¼ï¼‰ï¼Œæé«˜ç¨‹åºé‹è¡Œæ•ˆç‡ï¼Œé¿å…å¤šæ¬¡IOï¼Œæ¸›å°‘å°è±¡å‰µå»ºæ™‚é–“ã€‚ï¼ˆæ¦‚å¿µæ¥è¿‘é€£æ¥æ± ï¼Œä¸€æ¬¡æ€§å‰µå»ºå¥½ï¼Œä½¿ç”¨æ™‚ç›´æ¥ç²å–ï¼‰</p><h1 class=pgc-h-arrow-right>7.2 ç”Ÿå‘½é€±æœŸæ–¹æ³•</h1><ul><li>è‡ªå®šç¾©åˆå§‹åŒ–æ–¹æ³•ï¼šæ·»åŠ â€œinit-methodâ€å±¬æ€§ï¼ŒSpringå‰‡æœƒåœ¨å‰µå»ºå°è±¡ä¹‹å¾Œï¼Œèª¿ç”¨æ­¤æ–¹æ³•ã€‚</li><li>è‡ªå®šç¾©éŠ·ç‡¬æ–¹æ³•ï¼šæ·»åŠ â€œdestroy-methodâ€å±¬æ€§ï¼ŒSpringå‰‡æœƒåœ¨éŠ·ç‡¬å°è±¡ä¹‹å‰ï¼Œèª¿ç”¨æ­¤æ–¹æ³•ã€‚</li><li>éŠ·ç‡¬ï¼šå·¥å» çš„close()æ–¹æ³•è¢«èª¿ç”¨ä¹‹å¾Œï¼ŒSpringæœƒæ¯€æ‰æ‰€æœ‰å·²å‰µå»ºçš„å–®ä¾‹å°è±¡ã€‚</li><li>åˆ†é¡ï¼šSingletonå°è±¡ç”±Springå®¹å™¨éŠ·ç‡¬ã€Prototypeå°è±¡ç”±JVMéŠ·ç‡¬ã€‚</li></ul><h1 class=pgc-h-arrow-right>7.3 ç”Ÿå‘½é€±æœŸè¨»è§£</h1><pre><code>import javax.annotation.PostConstruct;import javax.annotation.PreDestroy;@PostConstruct //åˆå§‹åŒ– public void init(){    System.out.println("init method executed");}@PreDestroy //éŠ·ç‡¬public void destroy(){    System.out.println("destroy method executed");}</code></pre><h1 class=pgc-h-arrow-right>7.4 ç”Ÿå‘½é€±æœŸéšæ®µ</h1><p>å–®ä¾‹beanï¼šsingleton</p><p>éš¨å·¥å» å•Ÿå‹•å‰µå»º ==ã€‹ æ§‹é€ æ–¹æ³• ==ã€‹ setæ–¹æ³•(æ³¨å…¥å€¼) ==ã€‹ init(åˆå§‹åŒ–) ==ã€‹ æ§‹å»ºå®Œæˆ ==ã€‹éš¨å·¥å» é—œé–‰éŠ·ç‡¬</p><p>å¤šä¾‹beanï¼šprototype</p><p>è¢«ä½¿ç”¨æ™‚å‰µå»º ==ã€‹ æ§‹é€ æ–¹æ³• ==ã€‹ setæ–¹æ³•(æ³¨å…¥å€¼) ==ã€‹ init(åˆå§‹åŒ–) ==ã€‹ æ§‹å»ºå®Œæˆ ==ã€‹JVMåƒåœ¾å›æ”¶éŠ·ç‡¬</p><h1 class=pgc-h-arrow-right>8 ä»£ç†è¨­è¨ˆæ¨¡å¼</h1><h1 class=pgc-h-arrow-right>8.1 æ¦‚å¿µ</h1><p>å°‡æ ¸å¿ƒåŠŸèƒ½èˆ‡è¼”åŠ©åŠŸèƒ½ï¼ˆäº‹å‹™ã€æ—¥èªŒã€æ€§èƒ½ç›£æ§ä»£ç¢¼ï¼‰åˆ†é›¢ï¼Œé”åˆ°æ ¸å¿ƒæ¥­å‹™åŠŸèƒ½æ›´ç´”ç²¹ã€è¼”åŠ©æ¥­å‹™åŠŸèƒ½å¯è¤‡ç”¨ã€‚</p><p><br></p><div class=pgc-img><img alt="é¢è©¦é˜¿é‡Œï¼Œç¾åœ˜éƒ½æœƒè¢«å•åˆ°çš„Spring ,å¾åŸºç¤åˆ°æºç¢¼çµ±çµ±å¹«ä½ æå®š" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/1c33a6fb3c684f86912ca073acada557><p class=pgc-img-caption></p></div><p><br></p><h1 class=pgc-h-arrow-right>8.2 éœæ…‹ä»£ç†è¨­è¨ˆæ¨¡å¼</h1><p>é€šéä»£ç†é¡çš„å°è±¡ï¼Œç‚ºåŸå§‹é¡çš„å°è±¡ï¼ˆç›®æ¨™é¡çš„å°è±¡ï¼‰æ·»åŠ è¼”åŠ©åŠŸèƒ½ï¼Œæ›´å®¹æ˜“æ›´æ›ä»£ç†å¯¦ç¾é¡ã€åˆ©æ–¼ç¶­è­·ã€‚</p><ul><li>ä»£ç†é¡ = å¯¦ç¾åŸå§‹é¡ç›¸åŒæ¥å£ + æ·»åŠ è¼”åŠ©åŠŸèƒ½ + èª¿ç”¨åŸå§‹é¡çš„æ¥­å‹™æ–¹æ³•ã€‚</li><li>éœæ…‹ä»£ç†çš„å•é¡Œ ä»£ç†é¡æ•¸é‡éå¤šï¼Œä¸åˆ©æ–¼é …ç›®çš„ç®¡ç†ã€‚ å¤šå€‹ä»£ç†é¡çš„è¼”åŠ©åŠŸèƒ½ä»£ç¢¼å†—é¤˜ï¼Œä¿®æ”¹æ™‚ï¼Œç¶­è­·æ€§å·®ã€‚</li></ul><h1 class=pgc-h-arrow-right>8.3 å‹•æ…‹ä»£ç†è¨­è¨ˆæ¨¡å¼</h1><h1 class=pgc-h-arrow-right>8.3.1 JDKå‹•æ…‹ä»£ç†å¯¦ç¾ï¼ˆåŸºæ–¼æ¥å£ï¼‰</h1><pre><code>//ç›®æ¨™final OrderService os = new OrderServiceImpl();//é¡å¤–åŠŸèƒ½InvocationHandler handler = new InvocationHandler(){//1.è¨­ç½®å›èª¿å‡½æ•¸ï¼ˆé¡å¤–åŠŸèƒ½ä»£ç¢¼ï¼‰    @Override    public Object invoke(Object proxy, Method method, Object[] args)        throws Throwable {        System.out.println("start...");        method.invoke(os, args);         System.out.println("end...");        return null;    }};//2.å‰µå»ºå‹•æ…‹ä»£ç†é¡Object proxyObj = Proxy.newProxyInstance(ClassLoader , Interfaces , InvocationHandler);</code></pre><h1 class=pgc-h-arrow-right>8.3.2 CGlibå‹•æ…‹ä»£ç†å¯¦ç¾ï¼ˆåŸºæ–¼ç¹¼æ‰¿ï¼‰</h1><pre><code>final OrderService os = new OrderServiceImpl();Enhancer cnh = new Enhancer();//1.å‰µå»ºå­—ç¯€ç¢¼æ›¾å¼·å°è±¡enh.setSuperclass(os.getClass());//2.è¨­ç½®çˆ¶é¡ï¼ˆç­‰åƒ¹æ–¼å¯¦ç¾åŸå§‹é¡æ¥å£ï¼‰enh.setCallback(new InvocationHandler(){//3.è¨­ç½®å›èª¿å‡½æ•¸ï¼ˆé¡å¤–åŠŸèƒ½ä»£ç¢¼ï¼‰    @Override    public Object invoke(Object proxy , Method method, Object[] args) throws Throwable{        System.out.println("start...");        Object ret = method.invoke(os,args);        System.out.println("end...");        return ret;    }});OrderService proxy = (OrderService)enh.create();//4.å‰µå»ºå‹•æ…‹ä»£ç†é¡proxy,createOrder();</code></pre><h1 class=pgc-h-arrow-right>9 é¢å‘åˆ‡é¢ç·¨ç¨‹</h1><h1 class=pgc-h-arrow-right>9.1 æ¦‚å¿µ</h1><p>AOPï¼ˆAspect Oriented Programmingï¼‰ï¼Œå³é¢å‘åˆ‡é¢ç·¨ç¨‹ï¼Œåˆ©ç”¨ä¸€ç¨®ç¨±ç‚º"æ©«åˆ‡"çš„æŠ€è¡“ï¼Œå‰–é–‹å°è£çš„å°è±¡å…§éƒ¨ï¼Œä¸¦å°‡é‚£äº›å½±éŸ¿äº†å¤šå€‹é¡çš„å…¬å…±è¡Œç‚ºå°è£åˆ°ä¸€å€‹å¯é‡ç”¨æ¨¡å¡Šï¼Œä¸¦å°‡å…¶å‘½åç‚º"Aspect"ï¼Œå³åˆ‡é¢ã€‚æ‰€è¬‚"åˆ‡é¢"ï¼Œç°¡å–®èªªå°±æ˜¯é‚£äº›èˆ‡æ¥­å‹™ç„¡é—œï¼Œå»ç‚ºæ¥­å‹™æ¨¡å¡Šæ‰€å…±åŒèª¿ç”¨çš„é‚è¼¯æˆ–è²¬ä»»å°è£èµ·ä¾†ï¼Œä¾¿æ–¼æ¸›å°‘ç³»çµ±çš„é‡è¤‡ä»£ç¢¼ï¼Œé™ä½æ¨¡å¡Šä¹‹é–“çš„è€¦åˆåº¦ï¼Œä¸¦æœ‰åˆ©æ–¼æœªä¾†çš„å¯æ“ä½œæ€§å’Œå¯ç¶­è­·æ€§ã€‚</p><p>é€šä¿—çš„æ¦‚å¿µä¾†è¬›ï¼Œæ‰€è¬‚çš„é¢å‘åˆ‡é¢ç·¨ç¨‹å°±æ˜¯é‡å°è¢«ä»£ç†å°è±¡çš„æ–¹æ³•åœ¨æŸå€‹ç‰¹å®šçš„åŸ·è¡Œæ™‚æ©Ÿ(æ–¹æ³•èª¿ç”¨ä¹‹å‰ã€æ–¹æ³•èª¿ç”¨ä¹‹å¾Œã€æ–¹æ³•æ‹‹å‡ºç•°å¸¸)ï¼Œåšå‡ºä¸€äº›é¡å¤–çš„æ©«å‘çš„è™•ç†ã€‚å¥½è™•åœ¨æ–¼ï¼š1. å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç¢¼åŸºç¤ä¸Šæ©«å‘æ“´å±•æˆ‘å€‘çš„å…§å®¹ï¼›2. å°‡ä¸€äº›æ–¹æ³•ä¸­çš„é€šç”¨é‚è¼¯é€²è¡Œçµ±ä¸€åŒ–çš„è™•ç†ã€‚</p><p>OOP(é¢å‘å°è±¡ç·¨ç¨‹)å’ŒAOP(é¢å‘åˆ‡é¢ç·¨ç¨‹)çš„å€åˆ¥ï¼šoopæ˜¯å°é¡ç¸±å‘çš„æ“´å±•ï¼›aopæ˜¯æ©«å‘çš„æ“´å±•ã€‚</p><h1 class=pgc-h-arrow-right>9.2 AOPé–‹ç™¼è¡“èª</h1><ul><li>é€£æ¥é»(Joinpoint)ï¼šé€£æ¥é»æ˜¯ç¨‹åºé¡ä¸­å®¢è§€å­˜åœ¨çš„æ–¹æ³•ï¼Œå¯è¢«Springæ””æˆªä¸¦åˆ‡å…¥å…§å®¹ã€‚</li><li>åˆ‡å…¥é»(Pointcut)ï¼šè¢«åˆ‡å…¥é€£æ¥é»ã€‚</li><li>é€šçŸ¥ã€å¢å¼·(Advice)ï¼šå¯ä»¥ç‚ºåˆ‡å…¥é»æ·»åŠ é¡å¤–åŠŸèƒ½ï¼Œåˆ†ç‚ºï¼šå‰ç½®é€šçŸ¥ã€å¾Œç½®é€šçŸ¥ã€ç•°å¸¸é€šçŸ¥ã€ç’°ç¹é€šçŸ¥ç­‰ã€‚</li><li>ç›®æ¨™å°è±¡(Target)ï¼šä»£ç†çš„ç›®æ¨™å°è±¡</li><li>ç¹”å…¥(Weaving)ï¼šæŠŠé€šçŸ¥æ‡‰ç”¨åˆ°å…·é«”çš„é¡ï¼Œé€²è€Œå‰µå»ºæ–°çš„ä»£ç†é¡çš„éç¨‹ã€‚</li><li>ä»£ç†(Proxy)ï¼šè¢«AOPç¹”å…¥é€šçŸ¥å¾Œï¼Œç”¢ç”Ÿçš„çµæœé¡ã€‚</li><li>åˆ‡é¢(Aspect)ï¼šç”±åˆ‡é»å’Œé€šçŸ¥çµ„æˆï¼Œå°‡æ©«åˆ‡é‚è¼¯ç¹”å…¥åˆ‡é¢æ‰€æŒ‡å®šçš„é€£æ¥é»ä¸­ã€‚</li></ul><h1 class=pgc-h-arrow-right>9.3 ä½œç”¨</h1><p>Springçš„AOPç·¨ç¨‹å³æ˜¯é€šéå‹•æ…‹ä»£ç†é¡ç‚ºåŸå§‹é¡çš„æ–¹æ³•æ·»åŠ è¼”åŠ©åŠŸèƒ½ã€‚</p><h1 class=pgc-h-arrow-right>9.4 ç’°å¢ƒæ­å»º</h1><p>å¼•å…¥AOPç›¸é—œä¾è³´</p><pre><code>&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;    &lt;version&gt;5.1.6.RELEASE&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>spring-context.xmlå¼•å…¥AOPå‘½åç©ºé–“</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans"       xmlns:context="http://www.springframework.org/schema/context"       xmlns:aop="http://www.springframework.org/schema/aop"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xsi:schemaLocation="       http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/aop       http://www.springframework.org/schema/aop/spring-aop.xsd       "&gt;&lt;/beans&gt;</code></pre><h1 class=pgc-h-arrow-right>9.5 é–‹ç™¼æµç¨‹</h1><p>å®šç¾©åŸå§‹é¡</p><pre><code>package com.qf.aaron.aop.basic;public interface UserService {    public void save();}è¤‡è£½ä»£ç¢¼</code></pre><pre><code>package com.qf.aaron.aop.basic;public class UserServiceImpl implements UserService {    public void save() {        System.out.println("save method executed...");    }}</code></pre><p>å®šç¾©é€šçŸ¥é¡ï¼ˆæ·»åŠ é¡å¤–åŠŸèƒ½</p><pre><code>package com.qf.aaron.aop.basic;import org.springframework.aop.MethodBeforeAdvice;import java.lang.reflect.Method;public class MyAdvice implements MethodBeforeAdvice { //å¯¦ç¾å‰ç½®é€šçŸ¥æ¥å£    public void before(Method method, Object[] args, Object target) throws Throwable {        System.out.println("before advice executed...");    }}</code></pre><p>å®šç¾©beanæ¨™ç±¤</p><pre><code>&lt;!--åŸå§‹å°è±¡--&gt;&lt;bean id="us" class="com.qf.aaron.aop.basic.UserServiceImpl" /&gt;&lt;!--è¼”åŠ©å°è±¡--&gt;&lt;bean id="myAdvice" class="com.qf.aaron.aop.basic.MyAdvice" /&gt;</code></pre><p>å®šç¾©åˆ‡å…¥é»ï¼ˆPointCutï¼‰</p><p>å½¢æˆåˆ‡é¢ï¼ˆAspectï¼‰</p><pre><code>&lt;aop:config&gt;    &lt;!--åˆ‡é»--&gt;    &lt;aop:pointcut id="myPointCut" expression="execution(* save())" /&gt;&lt;/aop:config&gt;```java&lt;aop:config&gt;    &lt;!--çµ„è£åˆ‡é¢ --&gt;    &lt;aop:advisor advice-ref="myAdvice" pointcut-ref="myPointCut" /&gt;&lt;/aop:config&gt;</code></pre><h1 class=pgc-h-arrow-right>9.6 é€šçŸ¥é¡</h1><p>å¯å®šç¾©çš„é€šçŸ¥é¡æœ‰6ç¨®ï¼Œå¯ä»¥æŒ‰éœ€æ±‚é¸æ“‡é€šçŸ¥é¡ã€‚</p><pre><code>å‰ç½®é€šçŸ¥ï¼šMethodBeforeAdviceå¾Œç½®é€šçŸ¥ï¼šAfterAdviceå¾Œç½®é€šçŸ¥ï¼šAfterReturningAdvice //æœ‰ç•°å¸¸ä¸åŸ·è¡Œï¼Œæ–¹æ³•æœƒå› ç•°å¸¸è€ŒçµæŸï¼Œç„¡è¿”å›å€¼ç•°å¸¸é€šçŸ¥ï¼šThrowsAdviceç’°ç¹é€šçŸ¥ï¼šMethodInterceptor</code></pre><h1 class=pgc-h-arrow-right>9.7 JDKå‹•æ…‹ä»£ç†å’ŒCGLIBå‹•æ…‹ä»£ç†çš„é¸æ“‡</h1><ul><li>springåº•å±¤ï¼ŒåŒ…å«äº†jdkä»£ç†å’Œcglibä»£ç†å…©ç¨®å‹•æ…‹ä»£ç†ç”Ÿæˆæ©Ÿåˆ¶</li><li>åŸºæœ¬è¦å‰‡æ˜¯ï¼šç›®æ¨™æ¥­å‹™é¡å¦‚æœæœ‰æ¥å£å‰‡ç”¨JDKä»£ç†ï¼Œæ²’æœ‰æ¥å£å‰‡ç”¨CGLibä»£ç†</li></ul><p>ä½†æ˜¯springä¸­é»˜èªé–‹å•ŸJDKå‹•æ…‹ä»£ç†ï¼Œç•¶éœ€è¦ä½¿ç”¨CGLIBå‹•æ…‹ä»£ç†æ™‚ï¼Œéœ€è¦åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚</p><pre><code>&lt;!--  ä½¿ç”¨cglibçš„æ–¹å¼å¯¦ç¾aop --&gt;    &lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;</code></pre><h1 class=pgc-h-arrow-right>10 åŸºæ–¼aspectJçš„AOPå¯¦ç¾</h1><p>ç·¨å¯«aspectJé€šçŸ¥ä»£ç¢¼:</p><pre><code>@Aspectpublic class AspectJAdvisor {    // ç’°ç¹é€šçŸ¥    @Around("execution(* org.example.service.impl.*.*(..))")    public Object timer(ProceedingJoinPoint pjp) throws Throwable{        System.out.println("å‰ç½®é€šçŸ¥");        Object o = pjp.proceed();        System.out.println("ã€å¾Œç½®é€šçŸ¥ã€‘");        return o;    }    // å¾Œç½®é€šçŸ¥    @After("execution(* org.example.service.impl.*.*(..))")    public void after(JoinPoint jp) throws Throwable{        System.out.println("====After method invokded====");    }    // å‰ç½®é€šçŸ¥    @Before("execution(* org.example.service.impl.*.*(..))")    public void before(JoinPoint jp){        System.out.println("====before method invoked====");    }    // æ­£å¸¸è¿”å›çš„é€šçŸ¥    @AfterReturning("execution(* org.example.service.impl.*.*(..))")    public void afterReturning(JoinPoint jp){        System.out.println("====after value return====");    }    // æ‹‹å‡ºç•°å¸¸å¾Œçš„é€šçŸ¥ï¼Œæ–¹æ³•çš„ç•°å¸¸å¿…é ˆèˆ‡ä»£ç†é¡æ‹‹å‡ºçš„ç•°å¸¸ä¸€è‡´ï¼Œthrowingçš„å€¼è¦èˆ‡ç•°å¸¸çš„å½¢åƒåä¿æŒä¸€è‡´    @AfterThrowing(value = "execution(* org.example.service.impl.*.*(..))", throwing="npe")    public void afterThrowException(JoinPoint jp, NullPointerException npe){        System.out.println("====after exception throwing====");    }}</code></pre><p>é…ç½®</p><pre><code>&lt;bean id="userService" class="org.example.service.impl.UserServiceImpl"&gt;&lt;/bean&gt;&lt;bean id="throwsAdvisor" class="org.example.advisor.AspectJAdvisor"&gt;&lt;/bean&gt;&lt;!--- aspectJæ˜¯ä½¿ç”¨cglibä¾†å¯¦ç¾å‹•æ…‹ä»£ç†çš„ --&gt;&lt;aop:aspectj-autoproxy proxy-target-class="true"&gt;&lt;/aop:aspectj-autoproxy&gt;</code></pre><h1 class=pgc-h-arrow-right>11 åŸºæ–¼è¨»è§£é–‹ç™¼</h1><h1 class=pgc-h-arrow-right>11.1 è²æ˜bean</h1><p>ç”¨æ–¼æ›¿æ›è‡ªå»ºé¡å‹çµ„ä»¶çš„ &lt;beanâ€¦>æ¨™ç±¤ï¼›å¯ä»¥æ›´å¿«é€Ÿçš„è²æ˜bean</p><ul><li>@Service æ¥­å‹™é¡å°ˆç”¨ @Repository daoå¯¦ç¾é¡å°ˆç”¨ @Controller webå±¤å°ˆç”¨</li><li>@Component é€šç”¨</li><li>@Scope ç”¨æˆ¶æ§åˆ¶beançš„å‰µå»ºæ¨¡å¼</li></ul><pre><code>// @Serviceèªªæ˜ æ­¤é¡æ˜¯ä¸€å€‹æ¥­å‹™é¡ï¼Œéœ€è¦å°‡æ­¤é¡ç´å…¥å·¥å»   ç­‰åƒ¹æ›¿æ›æ‰ &lt;bean class="xxx.UserServiceImpl"&gt;// @Serviceé»˜èªbeanId == é¦–å­—æ¯å°å¯«çš„é¡å"userServiceImpl"// @Service("userService") è‡ªå®šç¾©beanIdç‚º"userService"@Service //è²æ˜beanï¼Œä¸”id="userServiceImpl"@Scope("singleton") //è²æ˜å‰µå»ºæ¨¡å¼ï¼Œé»˜èªç‚ºå–®ä¾‹æ¨¡å¼ ï¼›@Scope("prototype")å³å¯è¨­ç½®ç‚ºå¤šä¾‹æ¨¡å¼public class UserServiceImpl implements UserService {    ...   }</code></pre><h1 class=pgc-h-arrow-right>11.2 æ³¨å…¥(DI)</h1><p>ç”¨æ–¼å®Œæˆbeanä¸­å±¬æ€§å€¼çš„æ³¨å…¥</p><ul><li>@Autowired åŸºæ–¼é¡å‹è‡ªå‹•æ³¨å…¥</li><li>@Resource åŸºæ–¼åç¨±è‡ªå‹•æ³¨å…¥</li><li>@Qualifier(â€œuserDAOâ€) é™å®šè¦è‡ªå‹•æ³¨å…¥çš„beançš„idï¼Œä¸€èˆ¬å’Œ@Autowiredè¯ç”¨</li><li>@Value æ³¨å…¥ç°¡å–®é¡å‹æ•¸æ“š (jdk8ç¨®+String)</li></ul><pre><code>@Servicepublic class UserServiceImpl implements UserService {    @Autowired //æ³¨å…¥é¡å‹ç‚ºUserDAOçš„bean    @Qualifier("userDAO2") //å¦‚æœæœ‰å¤šå€‹é¡å‹ç‚ºUserDAOçš„beanï¼Œå¯ä»¥ç”¨æ­¤è¨»è§£å¾ä¸­æŒ‘é¸ä¸€å€‹    private UserDAO userDAO;}</code></pre><pre><code>@Servicepublic class UserServiceImpl implements UserService {    @Resource("userDAO3") //æ³¨å…¥id=â€œuserDAO3â€çš„bean    private UserDAO userDAO;    /*    @Resource //æ³¨å…¥id=â€œuserDAOâ€çš„bean    private UserDAO userDAO;    */}</code></pre><pre><code>public class XX{    @Value("100") //æ³¨å…¥æ•¸å­—    private Integer id;    @Value("shine") //æ³¨å…¥String    private String name;}</code></pre><h1 class=pgc-h-arrow-right>11.3 äº‹å‹™æ§åˆ¶</h1><p>ç”¨æ–¼æ§åˆ¶äº‹å‹™åˆ‡å…¥</p><ul><li>@Transactional</li><li>å·¥å» é…ç½®ä¸­çš„ &lt;tx:adviceâ€¦ å’Œ &lt;aop:configâ€¦ å¯ä»¥çœç•¥ !!</li></ul><pre><code>//é¡ä¸­çš„æ¯å€‹æ–¹æ³•éƒ½åˆ‡å…¥äº‹å‹™(æœ‰è‡ªå·±çš„äº‹å‹™æ§åˆ¶çš„æ–¹æ³•é™¤å¤–)@Transactional(isolation=Isolation.READ_COMMITTED,propagation=Propagation.REQUIRED,readOnly=false,rollbackFor=Exception.class,timeout = -1)public class UserServiceImpl implements UserService {    ...    //è©²æ–¹æ³•è‡ªå·±çš„äº‹å‹™æ§åˆ¶ï¼Œåƒ…å°æ­¤æ–¹æ³•æœ‰æ•ˆ    @Transactional(propagation=Propagation.SUPPORTS)    public List&lt;User&gt; queryAll() {        return userDao.queryAll();    }    public void save(User user){        userDao.save(user);    }}</code></pre><h1 class=pgc-h-arrow-right>11.4 è¨»è§£æ‰€éœ€é…ç½®</h1><pre><code>&lt;!-- å‘ŠçŸ¥springï¼Œå“ªäº›åŒ…ä¸­ æœ‰è¢«è¨»è§£çš„é¡ã€æ–¹æ³•ã€å±¬æ€§ --&gt;&lt;!-- &lt;context:component-scan base-package="com.qf.a,com.xx.b"&gt;&lt;/context:component-scan&gt; --&gt;&lt;context:component-scan base-package="com.qf"&gt;&lt;/context:component-scan&gt;&lt;!-- å‘ŠçŸ¥springï¼Œ@Transactionalåœ¨å®šè£½äº‹å‹™æ™‚ï¼ŒåŸºæ–¼txManager=DataSourceTransactionManager --&gt;&lt;tx:annotation-driven transaction-manager="txManager"/&gt;</code></pre><h1 class=pgc-h-arrow-right>11.5 AOPé–‹ç™¼</h1><h1 class=pgc-h-arrow-right>11.5.1 è¨»è§£ä½¿ç”¨</h1><pre><code>import org.aspectj.lang.JoinPoint;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.AfterThrowing;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Pointcut;import org.springframework.stereotype.Component;@Aspect // è²æ˜æ­¤é¡æ˜¯ä¸€å€‹åˆ‡é¢é¡ï¼šæœƒåŒ…å«åˆ‡å…¥é»(pointcut)å’Œé€šçŸ¥(advice)@Component //è²æ˜çµ„ä»¶ï¼Œé€²å…¥å·¥å» public class MyAspect {    // å®šç¾©åˆ‡å…¥é»    @Pointcut("execution(* com.qf.spring.service.UserServiceImpl.*(..))")    public void pc(){}    @Before("pc()") // å‰ç½®é€šçŸ¥    public void mybefore(JoinPoint a) {        System.out.println("target:"+a.getTarget());        System.out.println("args:"+a.getArgs());        System.out.println("method's name:"+a.getSignature().getName());        System.out.println("before~~~~");    }    @AfterReturning(value="pc()",returning="ret") // å¾Œç½®é€šçŸ¥    public void myAfterReturning(JoinPoint a,Object ret){        System.out.println("after~~~~:"+ret);    }    @Around("pc()") // ç’°ç¹é€šçŸ¥    public Object myInterceptor(ProceedingJoinPoint p) throws Throwable {        System.out.println("interceptor1~~~~");        Object ret = p.proceed();        System.out.println("interceptor2~~~~");        return ret;    }    @AfterThrowing(value="pc()",throwing="ex") // ç•°å¸¸é€šçŸ¥    public void myThrows(JoinPoint jp,Exception ex){        System.out.println("throws");        System.out.println("===="+ex.getMessage());    }}</code></pre><h1 class=pgc-h-arrow-right>11.5.2 é…ç½®</h1><pre><code>&lt;!-- æ·»åŠ å¦‚ä¸‹é…ç½®,å•Ÿç”¨aopè¨»è§£ --&gt;&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</code></pre><h1 class=pgc-h-arrow-right>12 Springå–®å…ƒæ¸¬è©¦</h1><h1 class=pgc-h-arrow-right>12.1 å°å…¥ä¾è³´</h1><pre><code>&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;    &lt;version&gt;4.3.6.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;junit&lt;/groupId&gt;    &lt;artifactId&gt;junit&lt;/artifactId&gt;    &lt;version&gt;4.12&lt;/version&gt;&lt;/dependency&gt;</code></pre><h1 class=pgc-h-arrow-right>12.2 æ¸¬è©¦ç·¨ç¢¼</h1><p>å¯ä»¥å…å»å·¥å» çš„å‰µå»ºéç¨‹ï¼›</p><p>å¯ä»¥ç›´æ¥å°‡è¦æ¸¬è©¦çš„çµ„ä»¶æ³¨å…¥åˆ°æ¸¬è©¦é¡ã€‚</p><pre><code>@RunWith(SpringJUnit4ClassRunner.class) //ç”±SpringJUnit4ClassRunnerå•Ÿå‹•æ¸¬è©¦@ContextConfiguration("classpath:applicationContext.xml") //springçš„é…ç½®æ–‡ä»¶ä½ç½®public class SpringTest{//ç•¶å‰æ¸¬è©¦é¡ä¹Ÿæœƒè¢«ç´å…¥å·¥å» ä¸­ï¼Œæ‰€ä»¥å…¶ä¸­å±¬æ€§å¯ä»¥æ³¨å…¥    @Autowired // æ³¨å…¥è¦æ¸¬è©¦çš„çµ„ä»¶    @Qualifier("userDAO")    private UserDAO userDAO;    @Test    public void test(){        // æ¸¬è©¦ä½¿ç”¨userDAO        userDAO.queryUser();        ....    }}æœ€å¾Œ</code></pre><h1 class=pgc-h-arrow-right>å…§å®¹å°±å…ˆå¯«åˆ°é€™è£¡ã€‚</h1><h1 class=pgc-h-arrow-right>æœ€å¾Œè¦ºå¾—æ–‡ç« å°ä½ æœ‰å¹«åŠ©çš„è©±è¨˜å¾—çµ¦æˆ‘é»å€‹è´Šã€‚</h1><h1 class=pgc-h-arrow-right>æ­¡è¿å¤§å®¶<strong>é—œæ³¨</strong>å’Œ<strong>è½‰ç™¼</strong>æ–‡ç« ï¼</h1></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>é¢è©¦</a></li><li><a>ç¾åœ˜</a></li><li><a>å•åˆ°</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/cdbf5cb4.html alt=é¢è©¦ä¸­å¸¸è¢«å•åˆ°çš„Hashè¡¨ï¼Œä½ ç­è§£å— class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/ba5ea1b5-dee5-4145-8f0d-8eee90a5eba6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cdbf5cb4.html title=é¢è©¦ä¸­å¸¸è¢«å•åˆ°çš„Hashè¡¨ï¼Œä½ ç­è§£å—>é¢è©¦ä¸­å¸¸è¢«å•åˆ°çš„Hashè¡¨ï¼Œä½ ç­è§£å—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html alt=é¢è©¦ç¸½çµï¼šé—œæ–¼MySQLäº‹å‹™çš„10å€‹å•é¡Œå¸¸è¦‹é¢è©¦å•ç­” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/1669c986-315c-4339-a5a0-a918a47f2e57 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/677306ff.html title=é¢è©¦ç¸½çµï¼šé—œæ–¼MySQLäº‹å‹™çš„10å€‹å•é¡Œå¸¸è¦‹é¢è©¦å•ç­”>é¢è©¦ç¸½çµï¼šé—œæ–¼MySQLäº‹å‹™çš„10å€‹å•é¡Œå¸¸è¦‹é¢è©¦å•ç­”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/adc31f83.html alt=Javaé¢è©¦çŸ¥è­˜é»ç¸½çµâ‘¥â€”â€”ç®—æ³•èˆ‡æ•¸æ“šçµæ§‹_ä¸€é»èª²å ‚ï¼ˆå¤šå²¸å­¸é™¢ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/68ac43b98fa343f2874d08bacae73ee8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/adc31f83.html title=Javaé¢è©¦çŸ¥è­˜é»ç¸½çµâ‘¥â€”â€”ç®—æ³•èˆ‡æ•¸æ“šçµæ§‹_ä¸€é»èª²å ‚ï¼ˆå¤šå²¸å­¸é™¢ï¼‰>Javaé¢è©¦çŸ¥è­˜é»ç¸½çµâ‘¥â€”â€”ç®—æ³•èˆ‡æ•¸æ“šçµæ§‹_ä¸€é»èª²å ‚ï¼ˆå¤šå²¸å­¸é™¢ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2eecc1b9.html alt=é¢è©¦å†å•ThreadLocalï¼Œåˆ¥èªªä½ ä¸æœƒ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3a95ff3cd79a456d9221f66851f8c2f9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2eecc1b9.html title=é¢è©¦å†å•ThreadLocalï¼Œåˆ¥èªªä½ ä¸æœƒ>é¢è©¦å†å•ThreadLocalï¼Œåˆ¥èªªä½ ä¸æœƒ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1d10456.html alt=é¢è©¦ç¸½çµ-Javaé«˜ç´šç¯‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/4afe0004abfd4a7bb3c5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1d10456.html title=é¢è©¦ç¸½çµ-Javaé«˜ç´šç¯‡>é¢è©¦ç¸½çµ-Javaé«˜ç´šç¯‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b10623ce.html alt=ä½ ä¸å¾—ä¸çŸ¥é“çš„HashMapé¢è©¦é€£ç’°ç‚® class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/278ed0687f4d436f9cb8389a38b1603e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b10623ce.html title=ä½ ä¸å¾—ä¸çŸ¥é“çš„HashMapé¢è©¦é€£ç’°ç‚®>ä½ ä¸å¾—ä¸çŸ¥é“çš„HashMapé¢è©¦é€£ç’°ç‚®</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ae15b401.html alt="æœ‰é—œ HashMap é¢è©¦æœƒå•çš„ä¸€åˆ‡" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/25263d0d73a143bab5e44096efdd931d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ae15b401.html title="æœ‰é—œ HashMap é¢è©¦æœƒå•çš„ä¸€åˆ‡">æœ‰é—œ HashMap é¢è©¦æœƒå•çš„ä¸€åˆ‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e2c89d5.html alt="é¢è©¦å®˜ï¼šç‚ºä»€éº¼ HashMap çš„åŠ è¼‰å› å­æ˜¯0.75ï¼Ÿ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/15a700f4ff6a4082a566db903915ea1b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e2c89d5.html title="é¢è©¦å®˜ï¼šç‚ºä»€éº¼ HashMap çš„åŠ è¼‰å› å­æ˜¯0.75ï¼Ÿ">é¢è©¦å®˜ï¼šç‚ºä»€éº¼ HashMap çš„åŠ è¼‰å› å­æ˜¯0.75ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/95a57792.html alt=é¢è©¦å®˜ï¼š100è¬å€‹æˆå“¡çš„æ•¸çµ„å–ç¬¬ä¸€å€‹å’Œæœ€å¾Œä¸€å€‹æœ‰æ€§èƒ½å·®è·å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5d61204d36a64ca9864df863782072b0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/95a57792.html title=é¢è©¦å®˜ï¼š100è¬å€‹æˆå“¡çš„æ•¸çµ„å–ç¬¬ä¸€å€‹å’Œæœ€å¾Œä¸€å€‹æœ‰æ€§èƒ½å·®è·å—ï¼Ÿ>é¢è©¦å®˜ï¼š100è¬å€‹æˆå“¡çš„æ•¸çµ„å–ç¬¬ä¸€å€‹å’Œæœ€å¾Œä¸€å€‹æœ‰æ€§èƒ½å·®è·å—ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8db576a1.html alt=é¢è©¦å¿…å•ï¼Œé€²ç¨‹å’Œç·šç¨‹æ¦‚å¿µè©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/31f152f300834172b846a27e904440e1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8db576a1.html title=é¢è©¦å¿…å•ï¼Œé€²ç¨‹å’Œç·šç¨‹æ¦‚å¿µè©³è§£>é¢è©¦å¿…å•ï¼Œé€²ç¨‹å’Œç·šç¨‹æ¦‚å¿µè©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2fb2eaa.html alt="ä¸æ€•é¢è©¦è¢«å•äº†ï¼äºŒå‰æ¨¹ç®—æ³•å¤§ç›¤é» | åŸåŠ›è¨ˆåŠƒ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RseEOGoFGbwiHH style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2fb2eaa.html title="ä¸æ€•é¢è©¦è¢«å•äº†ï¼äºŒå‰æ¨¹ç®—æ³•å¤§ç›¤é» | åŸåŠ›è¨ˆåŠƒ">ä¸æ€•é¢è©¦è¢«å•äº†ï¼äºŒå‰æ¨¹ç®—æ³•å¤§ç›¤é» | åŸåŠ›è¨ˆåŠƒ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8f670109.html alt="åˆ¥å†ç¿»äº†ï¼Œç™¾åº¦å¤§ç‰›æ•´ç†çš„é¢è©¦äºŒå‰æ¨¹æœ‰é€™ 11 å€‹å°±å¤ äº†~" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dcd72bc8778d44e6bffbf74b1e60ca72 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8f670109.html title="åˆ¥å†ç¿»äº†ï¼Œç™¾åº¦å¤§ç‰›æ•´ç†çš„é¢è©¦äºŒå‰æ¨¹æœ‰é€™ 11 å€‹å°±å¤ äº†~">åˆ¥å†ç¿»äº†ï¼Œç™¾åº¦å¤§ç‰›æ•´ç†çš„é¢è©¦äºŒå‰æ¨¹æœ‰é€™ 11 å€‹å°±å¤ äº†~</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/be7d76b3.html alt=å¤§ç„¡èªï¼æ¯æ¬¡é¢è©¦å¿…å•çš„äºŒå‰æ¨¹çš„è¨­è¨ˆèˆ‡ç·¨ç¢¼ï¼Œä½ é‚„æ•¢ä¸ç•¶å›äº‹ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f47e6a7038d9408dbc02ccb0517ff715 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/be7d76b3.html title=å¤§ç„¡èªï¼æ¯æ¬¡é¢è©¦å¿…å•çš„äºŒå‰æ¨¹çš„è¨­è¨ˆèˆ‡ç·¨ç¢¼ï¼Œä½ é‚„æ•¢ä¸ç•¶å›äº‹ï¼Ÿ>å¤§ç„¡èªï¼æ¯æ¬¡é¢è©¦å¿…å•çš„äºŒå‰æ¨¹çš„è¨­è¨ˆèˆ‡ç·¨ç¢¼ï¼Œä½ é‚„æ•¢ä¸ç•¶å›äº‹ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html alt=æ•¸æ“šçµæ§‹ç³»åˆ—ï¼šé¢è©¦å¸¸å•çš„äºŒå‰æ¨¹çš„éæ­·å’ŒåŸºæœ¬æ‡‰ç”¨ï¼Œä¸é€²ä¾†çœ‹çœ‹å— class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/02b77c3c1c434606997aa740529d8b17 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a85e2fa9.html title=æ•¸æ“šçµæ§‹ç³»åˆ—ï¼šé¢è©¦å¸¸å•çš„äºŒå‰æ¨¹çš„éæ­·å’ŒåŸºæœ¬æ‡‰ç”¨ï¼Œä¸é€²ä¾†çœ‹çœ‹å—>æ•¸æ“šçµæ§‹ç³»åˆ—ï¼šé¢è©¦å¸¸å•çš„äºŒå‰æ¨¹çš„éæ­·å’ŒåŸºæœ¬æ‡‰ç”¨ï¼Œä¸é€²ä¾†çœ‹çœ‹å—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a819fbd.html alt=é¢è©¦ä¸‰é€£äºŒå‰æ¨¹ï¼ŒåŸä¾†äºŒå‰æ¨¹é‚„å¯ä»¥è¬›çš„é€™éº¼ç°¡å–®ï¼Œä¸çœ‹çœ‹å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/afef1f6cac3540d785def8bbf641f8d9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a819fbd.html title=é¢è©¦ä¸‰é€£äºŒå‰æ¨¹ï¼ŒåŸä¾†äºŒå‰æ¨¹é‚„å¯ä»¥è¬›çš„é€™éº¼ç°¡å–®ï¼Œä¸çœ‹çœ‹å—ï¼Ÿ>é¢è©¦ä¸‰é€£äºŒå‰æ¨¹ï¼ŒåŸä¾†äºŒå‰æ¨¹é‚„å¯ä»¥è¬›çš„é€™éº¼ç°¡å–®ï¼Œä¸çœ‹çœ‹å—ï¼Ÿ</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>