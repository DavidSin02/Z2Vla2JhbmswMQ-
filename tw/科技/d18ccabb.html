<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>正則表達式使用總結 | 极客快訊</title><meta property="og:title" content="正則表達式使用總結 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d18ccabb.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d18ccabb.html><meta property="article:published_time" content="2020-10-29T21:09:08+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:08+08:00"><meta name=Keywords content><meta name=description content="正則表達式使用總結"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/d18ccabb.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>正則表達式使用總結</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p><strong>正則表達式中的問號（？）</strong></p><p>1 分組的時候，？可以不記錄一些組，比如：</p><p>var str="abc";</p><p>var reg=/(?:a)b(c)/g</p><p>reg.test(str);</p><p>alert(RegExp.$1);//結果為c</p><p>此時雖然第一個小括號也滿足，但是如果用?:標註之後，它不會被存入正則表達式的緩存中。</p><p>2 遇見功能，"?="，意識說目標串中肯定存在什麼，比如：</p><p>var str="ab4";</p><p>var reg=/ab(?=\d)/g</p><p>alert(reg.test(str));//結果為true</p><p>意思是第三位肯定是數字；</p><p>"?!"，意思說目標串中不應該存在什麼</p><p>var str="ab1";</p><p>var reg=/ab(?!\d)/g</p><p>alert(reg.test(str));//結果為false</p><p>意思是目標串中的第三位不應該是數字。</p><p>正則表達式-問號的四種用法</p><p>原文符號</p><p>因為?在正則表達式中有特殊的含義，所以如果想匹配?本身，則需要轉義，\?</p><p>有無量詞</p><p>問號可以表示重複前面內容的0次或一次，也就是要麼不出現，要麼出現一次。</p><p>非貪婪匹配</p><p>貪婪匹配</p><p>在滿足匹配時，匹配儘可能長的字符串，默認情況下，採用貪婪匹配</p><p>string pattern1 = @"a.*c"; // greedy match</p><p>Regex regex = new Regex(pattern1);</p><p>regex.Match("abcabc"); // return "abcabc"</p><p>非貪婪匹配</p><p>在滿足匹配時，匹配儘可能短的字符串，使用?來表示非貪婪匹配</p><p>string pattern1 = @"a.*?c"; // non-greedy match</p><p>Regex regex = new Regex(pattern1);</p><p>regex.Match("abcabc"); // return "abc"</p><p>幾個常用的非貪婪匹配Pattern</p><p>*? 重複任意次，但儘可能少重複</p><p>+? 重複1次或更多次，但儘可能少重複</p><p>?? 重複0次或1次，但儘可能少重複</p><p>{n,m}? 重複n到m次，但儘可能少重複</p><p>{n,}? 重複n次以上，但儘可能少重複</p><p>不捕捉模式</p><p>如何關閉圓括號的捕獲能力？而只是用它來做分組，方法是在左括號的後邊加上:?，這裡第一個圓括弧只是用來分組，而不會佔用捕獲變量，所以$1的內容只能是steak或者burger</p><p><strong>正則表達式的先行斷言(lookahead)和後行斷言(lookbehind)</strong></p><p>正則表達式的先行斷言和後行斷言一共有4種形式：</p><p>(?=pattern) 零寬正向先行斷言(zero-width positive lookahead assertion)</p><p>(?!pattern) 零寬負向先行斷言(zero-width negative lookahead assertion)</p><p>(?&lt;=pattern) 零寬正向後行斷言(zero-width positive lookbehind assertion)</p><p>(?&lt;!pattern) 零寬負向後行斷言(zero-width negative lookbehind assertion)</p><p>這裡面的pattern是一個正則表達式。</p><p>如同^代表開頭，$代表結尾，\b代表單詞邊界一樣，先行斷言和後行斷言也有類似的作用，它們只匹配某些位置，在匹配過程中，不佔用字符，所以被稱為"零寬"。所謂位置，是指字符串中(每行)第一個字符的左邊、最後一個字符的右邊以及相鄰字符的中間（假設文字方向是頭左尾右）。</p><p>下面分別舉例來說明這4種斷言的含義。</p><p>(?=pattern) 正向先行斷言</p><p>代表字符串中的一個位置，緊接該位置之後的字符序列能夠匹配pattern。</p><p>例如對"a regular expression"這個字符串，要想匹配regular中的re，但不能匹配expression中的re，可以用"re(?=gular)"，該表達式限定了re右邊的位置，這個位置之後是gular，但並不消耗gular這些字符，將表達式改為"re(?=gular)."，將會匹配reg，元字符.匹配了g，括號這一砣匹配了e和g之間的位置。</p><p>(?!pattern) 負向先行斷言</p><p>代表字符串中的一個位置，緊接該位置之後的字符序列不能匹配pattern。</p><p>例如對"regex represents regular expression"這個字符串，要想匹配除regex和regular之外的re，可以用"re(?!g)"，該表達式限定了re右邊的位置，這個位置後面不是字符g。負向和正向的區別，就在於該位置之後的字符能否匹配括號中的表達式。</p><p>(?&lt;=pattern) 正向後行斷言</p><p>代表字符串中的一個位置，緊接該位置之前的字符序列能夠匹配pattern。</p><p>例如對"regex represents regular expression"這個字符串，有4個單詞，要想匹配單詞內部的re，但不匹配單詞開頭的re，可以用"(?&lt;=\w)re"，單詞內部的re，在re前面應該是一個單詞字符。之所以叫後行斷言，是因為正則表達式引擎在匹配字符串和表達式時，是從前向後逐個掃描字符串中的字符，並判斷是否與表達式符合，當在表達式中遇到該斷言時，正則表達式引擎需要往字符串前端檢測已掃描過的字符，相對於掃描方向是向後的。</p><p>(?&lt;!pattern) 負向後行斷言</p><p>代表字符串中的一個位置，緊接該位置之前的字符序列不能匹配pattern。</p><p>例如對"regex represents regular expression"這個字符串，要想匹配單詞開頭的re，可以用"(?&lt;!\w)re"。單詞開頭的re，在本例中，也就是指不在單詞內部的re，即re前面不是單詞字符。當然也可以用"\bre"來匹配。</p><p>對於這4個斷言的理解，可以從兩個方面入手：</p><p>1. 關於先行(lookahead)和後行(lookbehind)：正則表達式引擎在執行字符串和表達式匹配時，會從頭到尾（從前到後）連續掃描字符串中的字符，設想有一個掃描指針指向字符邊界處並隨匹配過程移動。<strong>先行斷言，是當掃描指針位於某處時，引擎會嘗試匹配指針還未掃過的字符，先於指針到達該字符，故稱為先行。後行斷言，引擎會嘗試匹配指針已掃過的字符，後於指針到達該字符，故稱為後行</strong>。</p><p>2.關於正向(positive)和負向(negative)：正向就表示匹配括號中的表達式，負向表示不匹配。</p><p>對這4個斷言形式的記憶：</p><p>1. 先行和後行：後行斷言(?&lt;=pattern)、(?&lt;!pattern)中，有個小於號，同時也是箭頭，對於自左至右的文本方向，這個箭頭是指向後的，這也比較符合我們的習慣。把小於號去掉，就是先行斷言。</p><p>2. 正向和負向：不等於(!=)、邏輯非(!)都是用!號來表示，所以有!號的形式表示不匹配、負向；將!號換成=號，就表示匹配、正向。</p><p>我們經常用正則表達式來檢測一個字符串中包含某個子串，要表示一個字符串中不包含某個字符或某些字符也很容易，用[^...]形式就可以了。要表示一個字符串中不包含某個子串（由字符序列構成）呢？</p><p>用[^...]這種形式就不行了，這時就要用到（負向）先行斷言或後行斷言、或同時使用。</p><p>例如判斷一句話中包含this，但不包含that。</p><p>包含this比較好辦，一句話中不包含that，可以認為這句話中每個字符的前面都不是that或每個字符的後面都不是that。正則表達式如下：</p><p>^((?&lt;!that).)*this((?&lt;!that).)*$ 或 ^(.(?!that))*this(.(?!that))*$</p><p>對於"this is the case"這句話，兩個表達式都能夠匹配成功，而"note that this is the case"都匹配失敗。</p><p>在一般情況下，這兩個表達式基本上都能夠滿足要求了。考慮極端情況，如一句話以that開頭、以that結尾、that和this連在一起時，上述表達式就可能不勝任了。</p><p>如"note thatthis is the case"或者"this is the case, not that"等。</p><p>只要靈活運用這幾個斷言，就很容易解決：</p><p>^(.(?&lt;!that))*this(.(?&lt;!that))*$</p><p>^(.(?&lt;!that))*this((?!that).)*$</p><p>^((?!that).)*this(.(?&lt;!that))*$</p><p>^((?!that).)*this((?!that).)*$</p><p>這4個正則表達式測試上述的幾句話，結果都能夠滿足要求。</p><p>上述4種斷言，括號裡的pattern本身是一個正則表達式。但對2種後行斷言有所限制，在Perl和Python中，這個表達式必須是定長(fixed length)的，即不能使用*、+、?等元字符，如(?&lt;=abc)沒有問題，但(?&lt;=a*bc)是不被支持的，特別是當表達式中含有|連接的分支時，各個分支的長度必須相同。之所以不支持變長表達式，是因為當引擎檢查後行斷言時，無法確定要回溯多少步。Java支持?、{m}、{n,m}等符號，但同樣不支持*、+字符。Javascript乾脆不支持後行斷言，不過一般來說，這不是太大的問題。</p><p><strong>正則無順序匹配</strong></p><p>String str="http://www.baidu.com?a=BBB&c=CCC&b=AAA";</p><p>regex="http://www.baidu.com.*?(?=.*?[\\&|\\?]a\\=).*(?=.*?[\\&|\\?]b\\=).*(?=.*?[\\&|\\?]c\\=).*";</p><p>System.out.println(str.matches(regex));</p><p>來源：</p><p>http://blog.csdn.net/u012047933/article/details/38365541</p><p>https://www.cnblogs.com/leezhxing/p/4333773.html</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>正則</a></li><li><a>表達式</a></li><li><a>總結</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2dd7ebf.html alt="Java 正則表達式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2dd7ebf.html title="Java 正則表達式">Java 正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/22c24c31.html alt="Java 正則表達式 StackOverflowError 問題及其優化" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/28110ae7b0fc46f1a5ad2e6bcf0e40c1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/22c24c31.html title="Java 正則表達式 StackOverflowError 問題及其優化">Java 正則表達式 StackOverflowError 問題及其優化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/53f942fa.html alt=Java正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1531051821759d2705acacc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/53f942fa.html title=Java正則表達式>Java正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0c20e1e.html alt=Java正則表達式介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0c20e1e.html title=Java正則表達式介紹>Java正則表達式介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5c2f2cd7.html alt=Java正則表達式模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6d9eaa59ae704773aef9e0851d9625fd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5c2f2cd7.html title=Java正則表達式模式>Java正則表達式模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38a1ca5a.html alt=Java正則表達式組 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cb895437221f4629a7a4f697a8ac9f7a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38a1ca5a.html title=Java正則表達式組>Java正則表達式組</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html alt="java 常用的正則表達式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1540129072390e6c4c05126 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html title="java 常用的正則表達式">java 常用的正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a3910c22.html alt=javascript正則表達式基礎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a3910c22.html title=javascript正則表達式基礎>javascript正則表達式基礎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html alt=java常用正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c811c3c14e4a4fa4825845b2868ee645 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html title=java常用正則表達式>java常用正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4480dc1b.html alt=不會正則表達式？看這篇就夠了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/061586043d964e5eaa9f75ab5602f1f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4480dc1b.html title=不會正則表達式？看這篇就夠了>不會正則表達式？看這篇就夠了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a4031d46.html alt=正則表達式-javaScript class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/71e4c14f52284cf48db00f3e10ea4ad4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a4031d46.html title=正則表達式-javaScript>正則表達式-javaScript</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8d84c536.html alt=正則表達式基本語法和常用的正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/153137431384891e4a04908 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8d84c536.html title=正則表達式基本語法和常用的正則表達式>正則表達式基本語法和常用的正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0639976.html alt=正則表達式教程：實例速查 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0639976.html title=正則表達式教程：實例速查>正則表達式教程：實例速查</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/63001fb4.html alt=正則表達式真的很騷，可惜你不會寫！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a9c90ac0178e426b8357329883822384 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/63001fb4.html title=正則表達式真的很騷，可惜你不會寫！>正則表達式真的很騷，可惜你不會寫！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/47bf383c.html alt="JavaScript 正則表達式理論學習和案例分析" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/23450277ff8a4edb976123f0d7b823d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/47bf383c.html title="JavaScript 正則表達式理論學習和案例分析">JavaScript 正則表達式理論學習和案例分析</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>