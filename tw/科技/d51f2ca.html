<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>西門子PLC學習實例：過程控制畢業設計 | 极客快訊</title><meta property="og:title" content="西門子PLC學習實例：過程控制畢業設計 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/b7f38cec0e8e4cc79d8635c16b863f94"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d51f2ca.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d51f2ca.html><meta property="article:published_time" content="2020-10-29T20:59:51+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:51+08:00"><meta name=Keywords content><meta name=description content="西門子PLC學習實例：過程控制畢業設計"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/d51f2ca.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>西門子PLC學習實例：過程控制畢業設計</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p><br></p><h1 class=pgc-h-arrow-right>關注：頭條號+轉發，領取設計源文件和PLC學習資料</h1><div class=pgc-img><img alt=西門子PLC學習實例：過程控制畢業設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b7f38cec0e8e4cc79d8635c16b863f94><p class=pgc-img-caption></p></div><p><br></p><p><strong>中文：雙容液位控制系統設計</strong></p><p>摘 要</p><p>本設計完成對雙容液位控制系統的設計。該系統的簡要工作流程為：水泵將儲水</p><p>箱中的水往上壓，流經調節閥繼續往上注入上水箱。上水箱的水再注入下水箱，下水</p><p>箱再回流至儲水箱。PLC 通過設在下水箱底部的壓力/液位變送器讀取下水箱的當前</p><p>液位值，經 PID 指令運算來控制調節閥的開啟程度。採用 PLC 作為主控制器，由</p><p>CPU226 模塊和 EM235 模塊組成。選擇 PID 控制作為主控制策略，通過 PLC 中的 PID</p><p>指令運算實現對調節閥的 PID 單迴路控制。通過控制迴路實現本地與遠程的選擇，通</p><p>過組態軟件實現手動與自動的切換。電路中設有斷路器和熱繼電器，能實現對電路的</p><p>保護和報警。通過運用 A3000 過程控制實驗平臺來檢驗本設計的可行性和合理性。</p><p>關鍵詞：CPU226；EM235；PID；A3000；自動化；過程控制；雙容液位；PLC；單</p><p>迴路；雙容液位控制系統設計</p><p><br></p><p><strong>英文：雙容液位控制系統設計</strong></p><p>Abstract</p><p>The design is completed on the two-tank liquid level control system. Brief workflow</p><p>of the system are: water pump to the water tank up in pressure, flows through the control</p><p>valve to continue up into the tank. On the water tank under the tank and then into the next</p><p>tank and then back to the tank. PLC through a water tank at the bottom of the next level</p><p>transducer to read the current level value under the tank, to control by the PID instruction</p><p>operation control valve opening degree. By PLC as the main controller, the CPU226</p><p>module and EM235 module. Select PID control as the main control strategy, through the</p><p>PLC PID instruction in the operation of the control valve to achieve single-loop PID</p><p>control. Through the control loop to achieve local and remote option, through</p><p>configuration software manual and automatic switching. Circuit with circuit breakers and</p><p>thermal relays, to achieve the protection and alarm circuit. A3000 process control through</p><p>the use of experimental platform to test the feasibility and rationality of the design.</p><p>Key words: CPU226；EM235；PID；A3000</p><p><br></p><h1 class=pgc-h-arrow-right>雙容液位控制系統設計</h1><p><strong>目 錄</strong></p><p>摘要 . .......................................................................................................................................I</p><p>Abstract. ................................................................................................................................ II</p><p>第 1 章 緒論 . ........................................................................................................................ 1</p><p>1.1 選題背景 . ................................................................................................................ 1</p><p>1.2 過程控制的發展過程 . ............................................................................................ 1</p><p>1.3 過程控制策略與算法的進展 ........................................................................... 2 1.4</p><p>傳統過程控制存在的問題 . .................................................................................... 3</p><p>第 2 章 A3000 過程控制實驗系統及設計方案介紹 ......................................................... 4</p><p>2.1 A3000 過程控制實驗系統總體架構簡介............................................................... 4</p><p>2.1.1 A3000 現場系統特性. .................................................................................... 5</p><p>2.1.2 A3000 上的控制器. ........................................................................................ 6</p><p>2.1.3 通訊面板 . ...................................................................................................... 9</p><p>2.1.4 一般控制器信號連接和操作 ....................................................................... 9</p><p>2.1.5 面板接線 . ...................................................................................................... 9</p><p>2.2 本設計方案介紹 . .................................................................................................. 10</p><p>2.2.1 本設計方案的總體概括 . ....................... 10</p><p>2.2.2 本設計方案的詳細明................................................................................................... 10</p><p>第 3 章 方案論證 . .............................................................................................................. 12</p><p>3.1 控制策略的選擇 . .................................................................................................. 12</p><p>3.1.1 控制策略方案一 . ........................................................................................ 12</p><p>3.1.1.1 模糊控制器的概念 ........................................................................... 12</p><p>3.1.1.2 模糊控制器的優點 ........................................................................... 13</p><p>3.1.1.3 模糊控制器的缺點 ........................................................................... 13</p><p>3.1.1.4 結合本設計分析 . .............................................................................. 13</p><p>3.1.2 控制策略方案二 . ........................................................................................ 13</p><p>3.1.2.1 串級控制的概念 . .............................................................................. 13</p><p>3.1.2.2 串級控制的優點 . .............................................................................. 14</p><p>3.1.2.3 串級控制的缺點 . .............................................................................. 14</p><p>3.1.2.4 結合本設計分析 . .............................................................................. 14</p><p>3.1.3 控制策略方案三 . ........................................................................................ 14</p><p>3.1.3.1 PID控制器概念. ................................................................................. 14</p><p>3.1.3.2 PID控制器的優點. ............................................................................. 15</p><p>3.1.3.3 PID控制器的缺點. ............................................................................. 15</p><p>3.1.3.4 結合本設計的分析 ........................................................................... 15</p><p>3.2 控制器的選擇 . ...................................................................................................... 16</p><p>3.2.1 控制器的選擇方案一 . ................................................................................ 16</p><p>3.2.1.1 DCS的概念 . ....................................................................................... 16</p><p>3.2.1.2 DCS的優點 . ....................................................................................... 16</p><p>3.2.1.3 DCS的缺點 . ....................................................................................... 17</p><p>3.2.1.4 結合本設計分析 . .............................................................................. 17</p><p>3.2.2 控制器的選擇方案二 . ................................................................................ 17</p><p>3.2.2.1 軟PLC的概念 . ................................................................................... 17</p><p>3.2.2.2 軟PLC的優點 . ................................................................................... 17</p><p>3.2.2.3 軟PLC的缺點 . ................................................................................... 17</p><p>3.2.2.4 結合本設計分析 . .............................................................................. 18</p><p>3.2.3 控制器的選擇方案三 . ................................................................................ 18</p><p>3.2.3.1 PLC的概念 . ........................................................................................ 18</p><p>3.2.3.2 PLC的優點 . ........................................................................................ 18</p><p>3.2.3.3 PLC的缺點 . ............................................ 18</p><p>3.2.3.4 結合本設計分析 .................................................................... 18</p><p>第 4 章 供配電設計 . .......................................................................................................... 19</p><p>4.1 用電設備選型 . ...................................................................................................... 20</p><p>4.1.1 對水泵的選擇 . ............................................................................................. 20</p><p>4.1.2 電動調節閥的選擇 . .................................................................................... 20</p><p>4.1.3 直流電源的選擇 . ......................................................................................... 21</p><p>4.1.4 壓力/液位變送器的選擇 . ........................................................................... 22</p><p>4.1.5 接觸器的選擇 . ............................................................................................ 22</p><p>4.1.6 輔組繼電器的選擇 . .................................................................................... 22</p><p>4.2 功率統計 . ............................................................................................................... 23</p><p>4.3 電氣設備的選擇 . ................................................................................................... 23</p><p>4.3.1 水泵電源迴路的電氣設備的選擇 ............................................................. 23</p><p>4.3.2 控制迴路的電氣設備的選擇 ..................................................................... 24</p><p>4.3.3 直流電源迴路的電氣設備的選擇 ............................................................. 25</p><p>4.3.4 電動調節閥電源電氣設備的選擇 . ... 25</p><p>4.3.5 PC迴路的電氣設備的選擇 .............................................................................. 26</p><p>第 5 章 控制接線設計 . ...................................................................................................... 27</p><p>5.1 西門子S7-200 PLC CPU226 和EM235 模塊介紹................................................ 27</p><p>5.1.1 CPU模塊外形結構 . ..................................................................................... 27</p><p>5.1.2 模擬量模塊的接線 . ..................................................................................... 29</p><p>5.1.3 模擬量I/O的數據格式 . ....................................... 30</p><p>5.2 本設計的控制接線 .......................................................................... 30</p><p>第 6 章 軟件流程圖和程序設計 . ...................................................................................... 33</p><p>6.1 軟件流程圖 . ........................................................................................................... 33</p><p>6.1.1 主程序流程圖 . ............................................................................................. 33</p><p>6.1.2 中斷 0 子程序流程圖 . ................................................................................. 36</p><p>6.1.3 中斷 1 子程序流程圖 . ................................................................................. 36</p><p>6.2 程序設計 . ............................................................................................................... 38</p><p>6.2.1 主程序梯形圖： . ......................................................................................... 38</p><p>6.2.2 中斷 0 子程序梯形圖： . ......................... 42</p><p>6.2.3 中斷 2 子程序梯形圖： .......................................................... 43</p><p>第 7 章 上位組態設計 . ...................................................................................................... 44</p><p>7.1 新建工程 . .............................................................................................................. 44</p><p>7.2 選擇設備及設備配置 . .......................................................................................... 45</p><p>7.3 建立數據庫 . .......................................................................................................... 47</p><p>7.4 建立組態動畫 . ...................................................................................................... 49</p><p>7.5 組態畫面及功能介紹 . .......................................................................................... 51</p><p>7.6 製作上位組態需要注意的事項 ........................................................................... 53</p><p>7.6.1 如何修改當前工程的屬性 . ..................................... 53</p><p>7.6.2 如何備份工程 ............................................................................................... 53</p><p>第 8 章 總結 . ......................................................................................54</p><p><br></p><p>雙容液位控制系統設計</p><p>第 1 章 緒論</p><p>1.1 選題背景</p><p>過程控制是工業自動化的重要分支。幾十年來，工業過程控制取得了驚人的發展，</p><p>無論是在大規模的結構複雜的工業生產過程中，還是在傳統工業過程改造中，過程控</p><p>制技術對於提高產品質量以及節省能源等均起著十分重要的作用。</p><p>1.2 過程控制的發展過程</p><p>在現代工業控制中, 過程控制技術是一歷史較為久遠的分支。在本世紀 30 年代</p><p>就已有應用。過程控制技術發展至今天, 在控制方式上經歷了從人工控制到自動控制</p><p>兩個發展時期。在自動控制時期內，過程控制系統又經歷了三個發展階段, 它們是：</p><p>分散控制階段, 集中控制階段和集散控制階段。</p><p>從過程控制採用的理論與技術手段來看，可以粗略地把它劃為三個階段：開始到</p><p>70 年代為第一階段，70 年代至 90 年代初為第二階段，90 年代初為第三階段開始。</p><p>其中 70 年代既是古典控制應用發展的鼎盛時期，又是現代控制應用發展的初期，90</p><p>年代初既是現代控制應用發展的繁榮時期，又是高級控制發展的初期。第一階段是初</p><p>級階段，包括人工控制，以古典控制理論為主要基礎，採用常規氣動、液動和電動儀</p><p>表，對生產過程中的溫度、流量、壓力和液位進行控制，在諸多控制系統中，以單回</p><p>路結構、PID 策略為主，同時針對不同的對象與要求，創造了一些專門的控制系統，</p><p>如：使物料按比例配製的比值控制，克服大滯後的 Smith 預估器，克服干擾的前饋控</p><p>制和串級控制等等，這階段的主要任務是穩定系統，實現定值控制。這與當時生產水</p><p>平是相適應的。</p><p>第二階段是發展階段，以現代控制理論為主要基礎，以微型計算機和高檔儀表為</p><p>工具，對較複雜的工業過程進行控制。這階段的建模理論、在線辨識和實時控制已突</p><p>破前期的形式，繼而湧現了大量的先進控制系統和高級控制策略，如克服對象特性時</p><p>變和環境干擾等不確定影響的自適應控制，消除因模型失配而產生不良影響的預測控</p><p>制等。這階段的主要任務是克服干擾和模型變化，滿足複雜的工藝要求，提高控制質</p><p>量。1975 年，世界上第一臺分散控制系統在美國 Honeywell 公司問世，從而揭開了</p><p>過程控制嶄新的一頁。分散控制系統也叫集散控制系統，它綜合了計算機技術、控制</p><p>技術、通信技術和顯示技術，採用多層分級的結構形式,按總體分散、管理集中的原</p><p>則，完成對工業過程的操作、監視、控制。由於採用了分散的結構和冗餘等技術，使</p><p>系統的可靠性極高，再加上硬件方面的開放式框架和軟件方面的模塊化形式，使得它</p><p>組態、擴展極為方便，還有眾多的控制算法(幾十至上百種) 、較好的人—機界面和</p><p>故障檢測報告功能。經過 20 多年的發展，它已日臻完善，在眾多的控制系統中，顯</p><p>示出出類拔萃的風範，因此，可以毫不誇張地說，分散控制系統是過程控制發展史上</p><p>的一個里程碑。第三階段是高級階段，目前正在來到。</p><p>1.3 過程控制策略與算法的進展</p><p>幾十年來，過程控制策略與算法出現了三種類型：簡單控制、複雜控制與先進控</p><p>制。通常將單迴路 PID 控制稱為簡單控制。它一直是過程控制的主要手段。PID 控制</p><p>以經典控制理論為基礎，主要用頻域方法對控制系統進行分析與綜合。目前，PID 控</p><p>制仍然得到廣泛應用。在許多 DCS 和 PLC 系統中，均設有 PID 控制算法軟件，或</p><p>PID 控制模塊。</p><p>從 20 世紀 50 年代開始，過程控制界逐漸發展了串級控制、比值控制、前饋控制、</p><p>均勻控制和 Smith 預估控制等控制策略與算法，稱之為複雜控制。它們在很大程度上，</p><p>滿足了複雜過程工業的一些特殊控制要求。它們仍然以經典控制理論為基礎，但是在</p><p>結構與應用上各有特色，而且在目前仍在繼續改進與發展。</p><p>20 世紀 70 年代中後期，出現了以 DCS 和 PLC 為代表的新型計算機控制裝置，</p><p>為過程控制提供了強有力的硬件與軟件平臺。</p><p>從 20 世紀 80 年代開始，在現代控制理論和人工智能發展的理論基礎上，針對工</p><p>業過程控制本身的非線性、時變性、耦合性和不確定性等特性，提出了許多行之有效</p><p>的解決方法，如解耦控制、推斷控制、預測控制、模糊控制、自適應控制、人工神經</p><p>網絡控制等，常統稱為先進過程控制。近十年來，以專家系統、模糊邏輯、神經網絡、</p><p>遺傳算法為主要方法的基於知識的智能處理方法已經成為過程控制的一種重要技術。</p><p>先進過程控制方法可以有效地解決那些採用常規控制效果差，甚至無法控制的複雜工</p><p>業過程的控制問題。實踐證明，先進過程控制方法能取得更高的控制品質和更大的經</p><p>濟效益，具有廣闊的發展前景。</p><p>1.4 傳統過程控制存在的問題</p><p>隨著人們物質生活水平的提高以及市場競爭的日益激烈，產品的質量和功能也向</p><p>更高的檔次發展，製造產品的工藝過程變得越來越複雜，為滿足優質、高產、低消耗，</p><p>以及安全生產、保護環境等要求，過程控制的任務也愈來愈繁重。這樣的生產過程一</p><p>般具有大慣性、大滯後、時變性、關聯性、不確定性和非線性的特點。這裡的關聯性</p><p>不僅包含過程對象中各物理參量之間的耦合交錯，而且包括被控量、操作量和干擾量</p><p>之間的聯繫；不確定性不單指結構上的不確定性，而且還指參數的不確定性；非線性</p><p>既有非本質的非線性，也有本質非線性。由於工業過程的這種複雜性，決定了控制的</p><p>艱難性。</p><p>第 2 章 A3000 過程控制實驗系統及設計方案介紹</p><p>2.1 A3000 過程控制實驗系統總體架構簡介</p><p>A3000 測試平臺總體物理系統如圖 2.1 所示。（控制系統有 30 多種，現場系統可能具有現場總線。）</p><p>圖 2.1 A3000 測試平臺物理系統</p><p>圖 2.2 總體邏輯結構</p><p>2.1.1 A3000 現場系統特性</p><p>1. 尺寸：1450（毫米寬度）X700（毫米深度）X1950（毫米高度）。全不鏽鋼框架。</p><p>2. 電力：三相接地四線制 380V±10%，單相三線制，220V±10%，</p><p>3. 能耗：最大額定用電 6kw/h。自來水 120L，可重複使用。</p><p>A3000 控制系統特性：</p><p>1. 尺寸：800(寬度)X60（深度）X1950（高度）。標準工業機櫃。</p><p>2. 電力：單相三線制，220V±10%，</p><p>3. 能耗：最大額定用電 1kw/h。</p><p>現場系統工藝流程圖如圖 2.3 所示。</p><p>圖 2.3 系統工藝示意流程圖(不含控制系統) 總體的測點清單如表 2.1 所示。</p><div class=pgc-img><img alt=西門子PLC學習實例：過程控制畢業設計 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/309a1ca85ff548728921e412133357bf><p class=pgc-img-caption></p></div><p><br></p><p>序號位號或代號</p><p>設備名稱 用途 原始信號類型 工程量</p><p>1 TE-101 熱電阻 鍋爐水溫 Pt100 AI 0～100℃</p><p>2 TE-102 熱電阻 鍋爐回水溫度 Pt100 AI 0～100℃</p><p>3 TE-103 熱電阻 換熱器熱水出口水溫 Pt100 AI 0～100℃</p><p>4 TE-104 熱電阻 換熱器冷水出口水溫 Pt100 AI 0～100℃</p><p>5 TE-105 熱電阻 儲水箱水溫 Pt100 AI 0～100℃</p><p>6 LSL-105 液位開關 鍋爐液位極低聯鎖 幹接點 DI NC</p><p>7 LSH-106 液位開關 鍋爐液位極高聯鎖 幹接點 DI NC</p><p>8 XV-101 電磁閥 一支路給水切斷 光電隔離 DO NC</p><p>9 XV-102 電磁閥 二支路給水切斷 光電隔離 DO NC</p><p>10 AL-101 告警 光電隔離 DO NC</p><p>11 FT-101 渦輪流量計 一支路給水流量 4-20mADC AI</p><p>12 FT-102 電磁流量計 二支路給水流量 4-20mADC AI</p><p>13 PT-101 壓力變送器 給水壓力 4-20mADC AI 150kPa</p><p>14 LT-101 液位變送器 上水箱液位 4-20mADC AI 2.5kPa</p><p>15 LT-102 液位變送器 中水箱液位 4-20mADC AI 2.5kPa</p><p>16 LT-103 液位變送器 下水箱液位 4-20mADC AI 2.5kPa</p><p>17 LT-104 液位變送器 鍋爐/中水箱右液位 4-20mADC AI 0～5kPa</p><p>18 FV-101 電動調節閥 閥位控制 4-20mADC AO 0～100％</p><p>19 GZ-101 調壓模塊 鍋爐水溫控制 4-20mADC AO 0～100％</p><p>20 U-101 變頻器 頻率控制 4-20mADC AO 0～100％</p><p>表 2.1 整體流程測點清單</p><p>注：所列信號類型為原始信號，在控制櫃中 Pt100 經過變送器轉換成了 4～20mA。一般兩線制信號在 IO 面板上已經連接了 24V 和 GND，可以按照四線制方式使用。執行機構一般為 2～10V 控制，控制信號經過 500 歐姆採樣電阻，被轉換成 4-20 毫安控制。</p><p>2.1.2 A3000 上的控制器</p><p>採用標準機櫃安裝控制系統，要求可靠接地。機櫃尺寸 800 寬 X600 深 X1900高，單位 mm。 如果控制系統均為 24V 供電。 則提供 24V 10A開關電源供電， 如果部分控制系統為 220V 供 電，則提供24V</p><p>5A 開關電源供 電。</p><p>圖 2.4：控制機櫃</p><p>圖 2.5 電源，執行器 IO 面板</p><p>圖 2.6 溫度傳感器，直流電源 IO 面板</p><p>這裡各個溫度接線端子通過溫度變送器輸出 4~20mA 信號。直流電源提供 24V和 GND 接線端子。</p><p>圖 2.7 壓力、液位和流量 IO 面板</p><p>液位變送器可能有 4個，中水箱右液位和鍋爐液位通過三通連接，可以進行切換，測量兩個測點的液位。</p><p>圖 2.8 數字量接口和信號切換 IO 面板</p><p>從前端可見，控制系統包括一個標準機櫃，標題眉板，單相漏電保護器，24VDC電壓表，IO 面板，多塊基本控制系統板，上面安裝智能儀表，PLC 等控制系統，還可能包括一塊評分系統面板。通訊板可能提供 RS485 轉接，以及 RS485 轉以太網。</p><p>2.1.3 通訊面板</p><p>通訊面板具有三個串行口。一般情況下 1#串口連接智能 PID 控制器，2#串口連接 ADAM4000 DDC 控制系統。具體操作請參考接線圖。</p><p>2.1.4 一般控制器信號連接和操作</p><p>控制器的信號直接連接到面板上，再通過插孔和鎖緊連接線連接到現場系統的 IO 信號面板上。計算機和控制系統通過 RS232，或者以太網，或者專門的卡件進行聯接。</p><p>2.1.5 面板接線</p><p>一般控制系統 IO 接口圖，如圖 1.3.6 所示。</p><p>圖 2.9 一般控制系統面板圖</p><p>其中，ADAM4000，ADAM5000 的 DOCOM 連接了 24V，DICOM 連接 GND。一般情況下，PLC（S7-200，S7-300，ADAM8000，FX2N，SLC500）和 MACS DCS的 DOCOM 連接了 GND，DICOM 連接 24V。現場的幹接點閉上時，輸入為 0，否則為 1。數字量輸出 1 時，外部負載變化。</p><p>2.2 本設計方案介紹</p><p>2.2.1 本設計方案的總體概括</p><p>本設計方案是工作流程將兩個小型水箱和一個大型儲水箱呈垂直放置，通過水泵，把儲水箱中的水往上壓，流經調節閥，順著水管注入上水箱。而上水箱又可以往下水箱注水，下水箱的水又迴流到儲水箱。在下水箱底部設有壓力/液位變送器，PLC讀取下水箱液位並運算處理使之能控制調節閥開啟程度的大下，進而控制上水箱的注水量，間接控制了下水箱的液位。本方案設有上位組態監控，能實現現場及遠程的切換並控制，亦能實現手/自動控制。本設計方案可以概括為雙容液位液位調節閥 PID 單迴路控制系統設計。</p><p>2.2.2 本設計方案的詳細說明</p><p>上水箱採用 5 面有機玻璃組成一個上面無蓋，底面有孔的長方體。該長方體長、寬為 0.5 米，高分均為 0.23 米，水箱前面有機玻璃刻有最小刻度為 1 毫米，量程為0.2 米的刻度表。底面圓孔引出一個直徑為 5 釐米的有機玻璃圓管，作為出水管。上水箱透視圖如圖 2.10 所示。</p><p>圖 2.10：上水箱透視圖</p><p>出水管長 0.3 米。出水管管口設有擋板，通過抽伸擋板就可以調節出水量的大小，進而可以模擬負載。出水管如圖 2.11 所示。</p><p>圖 2.11 出水管</p><p>下水箱和上水箱的材料和結構還有尺寸基本上是系統的，唯一不同的地方下水箱底面上對了一個引壓孔，用來放置壓力/液位變送器的。下水箱底面構造如圖 2.12 所示。</p><p>圖 2.12：下水箱底面構造</p><p>上下水箱間隔 0.3 米，下水箱與儲水箱間隔也是 0.3 米。對於儲水箱沒有特殊的要求，只需容積是上水箱的 5 倍，側面底部設有出水孔，接水泵，上面無蓋，方便下水箱注水。水泵的進水口接在儲水箱的出水口上，用外徑 0.018 米的塑膠水管接。水泵距離儲水箱有 0.1 米即可，因為水泵有一定的防水能力。水泵出水口與電動調節閥連接。電動調節閥與水泵距離 0.5 米。電動調節閥另一出口引出塑膠水管至上水箱頂部。下水箱底面的壓力/液位變送器的導線接在PLC的模擬量輸入模塊的AIW0端口。雙容液位控制系統設計模擬量輸出端口 AQW0 接電動調節閥控制端口，電動調節閥的閥為反饋端口接至模擬量輸入端口 AIW2。在離水箱 1 米遠處設有一個現場控制箱，將 PLC，開關電源，控制迴路等安置進去，在控制箱表面有控制迴路導線上的開啟開關，還有指示 4 盞指示燈，兩個手動控制水泵啟動、停止的按鈕，以及一個能選擇"LOCAL"或"REMOTE"兩個點的選擇開關。從選擇控制箱引出 PPI 導線，把 PLC 和 PC 連接起來，PC 上有組態王軟件和本設計的監控畫面。系統結構示意圖如圖 2.13 所示。</p><p>圖 2.14：系統結構示意圖</p><p>第 3 章 方案論證</p><p>3.1 控制策略的選擇</p><p>3.1.1 控制策略方案一</p><p>3.1.1.1 模糊控制器的概念</p><p>定義變量</p><p>也就是決定程序被觀察的狀況及考慮控制的動作，例如在一般控制問題上，輸入變量有輸出誤差 E 與輸出誤差之變化率 CE，而控制變量則為下一個狀態之輸入 U。其中 E、CE、U 統稱為模糊變量。模糊化將輸入值以適當的比例轉換到論域的數值，利用口語化變量來描述測量物理量的過程，依適合的語言值求該值相對之隸屬度，此口語化變量我們稱之為模糊子集合。</p><p>知識庫</p><p>包括數據庫與規則庫兩部分，其中數據庫是提供處理模糊數據之相關定義；而規則庫則藉由一群語言控制規則描述控制目標和策略。</p><p>邏輯判斷</p><p>模仿人類下判斷時的模糊概念，運用模糊邏輯和模糊推論法進行推論，而得到模糊控制訊號。此部分是模糊控制器的精髓所在。</p><p>解模糊化</p><p>將推論所得到的模糊值轉換為明確的控制訊號，做為系統的輸入值。</p><p>3.1.1.2 模糊控制器的優點</p><p>模糊控制是建立在人工經驗基礎之上，無需知道控制對象的數學模型，它採用語言變量來描述系統特徵，並依據系統的動態信息和模糊控制規則進行推理以獲得合適的控制量，具有對參數變化不敏感和魯棒性強等特點, 使用於過於複雜或難以精確描述的系統。</p><p>3.1.1.3 模糊控制器的缺點</p><p>控制規則的來源比較困難，模糊控制規則的型式十分複雜，變量選擇與論域分割需要長時間的培訓才能掌握。對於隸屬度函數的取得十分繁瑣。</p><p>3.1.1.4 結合本設計分析</p><p>本設計是一個十分簡單的系統，變量很少，只對調節閥進行控制，且能用簡單的數學模型來描述系統的特徵。因此，縱觀模糊控制器有控制精確度高，參數變化不敏感和魯棒性強等特點，但是實現以來過於複雜，可維護性不高，所以本設計不採用模糊控制作為系統的控制策略。</p><p>3.1.2 控制策略方案二</p><p>3.1.2.1 串級控制的概念</p><p>串級控制系統採用兩套檢測變送器和兩個調節器，前一個調節器的輸出作為後一個調節器的設定，後一個調節器的輸出送往調節閥。前一個調節器稱為主調節器，它所檢測和控制的變量稱主變量（主被控參數），即工藝控制指標；後一個調節器稱為副調節器，它所檢測和控制的變量稱副變量（副被控參數），是為了穩定主變量而引入的輔助變量。整個系統包括兩個控制迴路，主迴路和副迴路。副迴路由副變量檢測變送、副調節器、調節閥和副過程構成；主迴路由主變量檢測變送、主調節器、副調節器、調節閥、副過程和主過程構成。一次擾動：作用在主被控過程上的，而不包括在副迴路範圍內的擾動。二次擾動：作用在副被控過程上的，即包括在副迴路範圍內的擾動。</p><p>3.1.2.2 串級控制的優點</p><p>改善了過程的動態特性，提高了系統控制質量。能迅速克服進入副迴路的二次擾動。提高了系統的工作頻率。對負荷變化的適應性較強。應用於容量滯後較大的過程應用於純時延較大的過程。應用於擾動變化激烈而且幅度大的過程。應用於參數互相關聯的過程。應用於非線性過程。</p><p>3.1.2.3 串級控制的缺點</p><p>串級控制器設計需要主參數的選擇和主迴路的設計和副參數的選擇和副迴路的設計，設計過程比較有難度。主、副迴路必須匹配，否則系統工作不穩定或者不能工作。</p><p>3.1.2.4 結合本設計分析</p><p>串級控制器更加適用於：用於克服被控過程較大的容量滯後；用於克服被控過程的純滯後；用於抑制變化劇烈幅度較大的擾動；用於克服被控過程的非線性。本設計只是一個簡單的反饋控制系統，沒有被控過程較大的容量滯後，沒有幅度較大的擾動，且被控過程是線性的，因此串級控制雖有諸多優點，但是由於控制本系統，需要設計兩個迴路，比較繁瑣，不值當。</p><p>3.1.3 控制策略方案三</p><p>3.1.3.1 PID 控制器概念</p><p>PID 控制器由比例單元（P）、積分單元（I）和微分單元（D）組成。其輸入 e (t)與輸出 u (t)的關係為</p><p>u(t)=Kp(e((t)+1/Ti∫e(t)dt+Td·de(t)/dt)式中積分的上下限分別是 0 和 t，因此它的傳遞函數為：</p><p>G(s)=U(s)/E(s)=Kp(1+1/(Ti·s)+Td·s)</p><p>其中 kp 為比例係數；TI 為積分時間常數；TD 為微分時間常數。</p><p>3.1.3.2 PID 控制器的優點</p><p>它由於用途廣泛、使用靈活，已有系列化產品，使用中只需設定三個參數（Kp，Ti 和 Td）即可。在很多情況下，並不一定需要全部三個單元，可以取其中的一到兩個單元，但比例控制單元是必不可少的。首先，PID 應用範圍廣。雖然很多工業過程是非線性或時變的，但通過對其簡化可以變成基本線性和動態特性不隨時間變化的系統，這樣 PID 就可控制了。其次，PID 參數較易整定。也就是，PID 參數 Kp，Ti 和Td 可以根據過程的動態特性及時整定。如果過程的動態特性變化，例如可能由負載的變化引起系統動態特性變化，PID 參數就可以重新整定。</p><p>3.1.3.3 PID 控制器的缺點</p><p>如果自整定要以模型為基礎，為了 PID 參數的重新整定在線尋找和保持好過程模型是較難的。閉環工作時，要求在過程中插入一個測試信號。這個方法會引起擾動，所以基於模型的 PID 參數自整定在工業應用不是太好。如果自整定是基於控制律的，經常難以把由負載干擾引起的影響和過程動態特性變化引起的影響區分開來，因此受到干擾的影響控制器會產生超調，產生一個不必要的自適應轉換。另外，由於基於控制律的系統沒有成熟的穩定性分析方法，參數整定可靠與否存在很多問題。因此，許多自身整定參數的 PID 控制器經常工作在自動整定模式而不是連續的自身整定模式。自動整定通常是指根據開環狀態確定的簡單過程模型自動計算 PID 參數。PID 在控制非線性、時變、耦合及參數和結構不確定的複雜過程時，工作地不是太好。最重要的是，如果 PID 控制器不能控制複雜過程，無論怎麼調參數都沒用。</p><p>3.1.3.4 結合本設計的分析</p><p>PID 控制器應用靈活、廣泛，對於小型簡單的系統尤其適用。本設計的系統十分簡單，變量很少，能用簡單的數學模型描述，且不需要參數自整定，控制器設計也簡單，容易實現。PID 控制器應用與本設計會得到快速，精確，穩定，有效的控制。</p><p>3.2 控制器的選擇</p><p>3.2.1 控制器的選擇方案一</p><p>3.2.1.1 DCS 的概念</p><p>DCS 是分佈式控制系統的英文縮寫是 Distributed Control System，在國內自控行業又稱之為集散控制系統。它是在集中式控制系統的基礎上發展、演變而來的。它是一個由過程控制級和過程監控級組成的以通信網絡為紐帶的多級計算機系統，綜合了計算機，通信、顯示和控制等 4C 技術，其基本思想是分散控制、集中操作、分級管理、配置靈活以及組態方便。在系統功能方面，DCS 和集中式控制系統的區別不大，但在系統功能的實現方法上卻完全不同。</p><p>3.2.1.2 DCS 的優點</p><p>高可靠性 由於 DCS 將系統控制功能分散在各臺計算機上實現，系統結構採用容錯設計，因此某一臺計算機出現的故障不會導致系統其它功能的喪失。此外，由於系統中各臺計算機所承擔的任務比較單一，可以針對需要實現的功能採用具有特定結構和軟件的專用計算機，從而使系統中每臺計算機的可靠性也得到提高。開放性 DCS 採用開放式、標準化、模塊化和系列化設計，系統中各臺計算機採用局域網方式通信，實現信息傳輸，當需要改變或擴充系統功能時，可將新增計算機方便地連入系統通信網絡或從網絡中卸下，幾乎不影響系統其他計算機的工作。靈活性 通過組態軟件根據不同的流程應用對象進行軟硬件組態，即確定測量與控制信號及相互間連接關係、從控制算法庫選擇適用的控制規律以及從圖形庫調用基本圖形組成所需的各種監控和報警畫面，從而方便地構成所需的控制系統。易於維護 功能單一的小型或微型專用計算機，具有維護簡單、方便的特點，當某一局部或某個計算機出現故障時，可以在不影響整個系統運行的情況下在線更換，迅速排除故障。協調性 各工作站之間通過通信網絡傳送各種數據，整個系統信息共享，協調工作，以完成控制系統的總體功能和優化處理。控制功能齊全 控制算法豐富，集連續控制、順序控制和批處理控制於一體，可實現串級、前饋、解耦、自適應和預測控制等先進控制，並可方便地加入所需的特殊控制算法。</p><p>3.2.1.3 DCS 的缺點</p><p>價格過於昂貴，應用大型，複雜的控制系統中更能體現他的價值。對使用環境要求較嚴格。性價比不高。</p><p>3.2.1.4 結合本設計分析</p><p>本設計只有 2 個輸入數字量，4 個輸出數字量，2 個輸入模擬量，1 個輸出模擬量，應選擇性能指標符合，性價比高的控制器。</p><p>3.2.2 控制器的選擇方案二</p><p>3.2.2.1 軟 PLC 的概念</p><p>軟 PLC 基於 PC 機，建立在一定操作系統平臺之上，通過軟件方法實現傳統 PLC的計算、控制、存儲以及編程等功能，通過 IO 模塊以及現場總線等物理設備完成現場數據的採集以及信號的輸出。</p><p>3.2.2.2 軟 PLC 的優點</p><p>體現了 IPC，PLC 和 DOC 先進技術的集成。可充分利用 PC 平臺上的硬件和軟件資源，使控制系統更具特色。系統更開放，應用更方便。軟件 PLC 通過自己開發工具提供的 OPC 功能和 Active 控件，既可連接 Office 軟件，也可連接用 VB，VC 開發的軟件。基於 PC+現場總線+分佈式 IO 的控制系統簡化了複雜控制系統的體系結構，提高了通信效率和速度，降低了投資成本。PC 機廠家的激烈競爭使得基於 PC機的軟 PLC 的性價比得以提高。</p><p>3.2.2.3 軟 PLC 的缺點</p><p>儘管軟 PLC 技術具有很大的發展潛力，但是這項技術的實現需要解決一些重要的問題。其中主要是以 PC 為基礎的控制引擎的實時性問題。軟 PLC 首選的操作系統是 WindowsNT，但是它並不是一個硬實時的操作系統。傳統 PLC 具有硬實時性，正因為如此它才能提供快速、確定而且可重複的響應。而要讓 WindowsNT 具有硬實時性，必須對它進行擴展，使得 PC 的控制任務具有最高的優先級，不因為 NT 的系統功能和用戶程序的調用而被搶佔。現在，我們可以通過一些方法將實時性能加入到NT 系統中去。比如，修改 NT 的硬件抽象層，或者 NT 與一種經過實用驗證的硬實時操作系統組合。另外，WindowsCE 等操作系統具有了 NT 在硬實時性方面所不具備的特性。在實際開發中也可使用其他的操作系統作為平臺。</p><p>3.2.2.4 結合本設計分析</p><p>本設計需要每隔 100ms 採用數據並處理數據。軟 PLC 不具有硬實時性，不能提供快速、確定而且可重複的響應。實現本設計要求較困難。</p><p>3.2.3 控制器的選擇方案三</p><p>3.2.3.1 PLC 的概念</p><p>可編程控制器是計算機家族中的一員，是為工業控制應用而設計製造的。早期的可編程控制器稱作可編程邏輯控制器(Programmable Logic Controller)，簡稱 PLC，它主要用來代替繼電器實現邏輯控制。隨著技術的發展，這種裝置的功能已經大大超過了邏輯控制的範圍，因此，今天這種裝置稱作可編程控制器，簡稱 PC。但是為了避免與個人計算機(Personal Computer)的簡稱混淆，所以將可編程控制器簡稱 PLC。</p><p>3.2.3.2 PLC 的優點</p><p>體積小，操作簡便，可維護性高。具備實時性，能提供快速、確定而且可重複的響應。指令集簡單，容易培訓和掌握。性價比很高，生產廠家眾多，零配件渠道廣泛。已經成為市場的主流，該方面技術人才眾多。</p><p>3.2.3.3 PLC 的缺點</p><p>系統結構未採用容錯設計，控制集中，可靠行不高；硬件體系結構封閉，不夠開放；功能比較單一；指令集是固定的，不便於在實際工業應用中定義算法。</p><p>3.2.3.4 結合本設計分析</p><p>目前市場上，PLC 的品牌和產品眾多，如松下，西門子，三菱，歐姆龍，臺達，富士，施耐德，ABB 等。單就西門子生產的 PLC 而言，其 S7 系列有 S7-200 系列，S7-300 系列，S7-400 系列等。單就 S7-200 系列而言，又有 CPU 221，CPU222，CPU224，CPU226 等。首先，本設計點數較少，S7-200 系列完全能夠勝任，採用 S7-300 系列甚至S7-400 系列則完全浪費。然而，本設計涉及到模擬量的操作，單個 CPU 是沒有模擬量端口的，必須擴展，而 CPU221 是不具備擴展能力的，則不選擇。在剩下的型號中，本設計選擇了 CPU 226 模塊和 EM235 模塊。由於 EM235 模塊具有 4 路模擬量輸入，1 路模擬量輸出，則符合要求。對於CPU226 模塊的選擇，是因為 CPU226 在 CPU22x 系列中數字量最多，而 CPU22x的價格相對比較接近，性格比較高，且方便以後選擇點數的增多。</p><p>第 4 章 供配電設計</p><p>4.1 用電設備選型</p><p>4.1.1 對水泵的選擇</p><p>本設計中流體介質為水，比重為 1，無毒，無腐蝕性，介質溫度為 0~100℃，所需流量 0~3000L/H，所需最小揚程 3M。根據設計所需選擇水泵型號為 S18WG—18，為上海新西山實業有限公司生產。最大流量 38 升/分，最高揚程 18 米，進出口管徑 18 毫米。實物如圖 4.1 所示。</p><p>圖 4.1：S18WG—18 型水泵</p><p>該水泵的電機為單相電容運轉異步電動機，輸入功率 260W，輸出功率 120W，額定電壓 220V，額定電流為 1.2A，功率因數為 0.67（根據該同類電機查手冊得）。</p><p>4.1.2 電動調節閥的選擇</p><p>本設計由於系統比較小，選擇的是一臺體積相對也小巧的電動調節閥。</p><p>圖 4.2: ZD(R)SJP 型精小型電動調節閥</p><p>該調節閥為 ZD(R)SJP 型精小型電動調節閥，實物照片如圖 4.2 所示。由國內著名的川滬公司生產，採用頂部導向結構，由 3810 系列(或者 PSL 系列)電動執行器和精小型調節閥體組成，內含飼服功能，接受統一的 4-20mA 或 1-5V·DC 的標準信號，將電流信號轉變成相對應的直線位移，自動地控制調節閥開 度，達到對管道內流體的壓力、流量、溫度、液位等工藝參數的連續調節。精小型電動調節閥具有結構緊湊、重量輕、動作靈敏、閥容量大、流量特性精確、拆裝方便等優點。精小型電動調節閥廣 泛應用於精確控制氣體、液體、蒸汽等介質，工藝參數加如壓力、流量、溫度、液位保持在給定值。特別適用於允許壓差小，而允許洩漏量也較小壓差不大的工作場合。</p><p>該調節閥性能指標</p><p>公稱通徑：DN20；公稱壓力：PN1.6；法蘭標準：GB/T9113、JB/T79；電源電壓：220V/50Hz；功率：220W；輸入輸入信號：4-20mA 直流電或1-5V 直流電，本設計選用的是4-20mA 直流電流信號；輸出信號：4-20mA 直流電；體積為0.1·0.1·0.3立方米；防護等級：相當 IP55；隔爆標誌：ExdⅡBT4；手操功能：手柄；環境溫度：-25～+70℃；環境溼度：≤95%。根據推算，該電動調節閥導線上的最大工作電流為1A。</p><p>4.1.3 直流電源的選擇</p><p>由於系統電源進線為 220V 的交流電， PLC CPU 226 模塊，EM 235 模塊和液位變送器的工作電源均為 24V 直流電，所以需要一臺將 220V 交流轉換 24V 直流電的且至少有三路直流電輸出的開關電源。其中，CPU 226 模塊空載功率為 17W，在連接上 4 個交直流中間繼電器（？？？每個中間繼電器線圈吸合功率為 7W）後實際最大用電功率為 45W。EM 235 模塊用電功率為 8W，壓力/液位變送器用電功率為 5W。所以需要的直流電源輸出功率最少要有（17W+7W·4+8W+5W）58W。所以我選擇的巨力實業生產的 S-100-24 開關電源。實物照片如圖 4.3 所示。</p><p>圖 4.3：巨力實業產的 S-100-24</p><p>S-100-24 開關電源的性能指標如表 4.1 所示。</p><p>100-120VAC 1.9A 輸入</p><p>200-240VAC 0.8A 輸出 24VDC 4.5A</p><p>表 4.1：S-100-24 開關電源的性能指標</p><p>4.1.4 壓力/液位變送器的選擇</p><p>本設計的液位檢測是由壓力變送器完成的，本設計沒有設置專門的液位傳感起。運用壓力變送器的工作原理是將壓力變送器的感應接口與下水箱的底部同一水平用軟管連接，形成聯通器效應，保持同一水平的原因是讓下水箱底部的壓力和壓力變送器感應接口壓力相同。本設計所需測量的液位高度為 0.3 米，最大壓強為（3kpa+1個大氣壓）103kpa。</p><p>本設計選擇的壓力變送器為福州福光百特自動化設備有限公司生產的型號為FB0803CE2R。供電電壓為 24V 直流，功率為 5W，最大工作壓力為 225kpa，量程為0-150kpa，輸出為 4 到 20mA 直流電，精度為 0.25 級。</p><p>4.1.5 接觸器的選擇</p><p>本設計在水泵控制迴路中設有交流接觸器 KM，用來實現水泵的遠程運行，停止的控制。本設計選擇的水泵的工作電源為 220VAC，所以需要一臺工作電源 220VAC及以上，線圈工作電壓為 220VAC 的交流接觸器。本設計選擇的交流接觸器為 BLJ交流接觸器。其性能指標如表 4.2 所示。 工作電壓 工作電流 線圈電源 線圈吸合功率220VAC,50Hz 20A 220AV,50Hz 25W</p><p>表 4.2：BLJ 交流接觸器</p><p>4.1.6 輔組繼電器的選擇</p><p>本設計中，為了控制迴路的和信號的傳遞，設置了 6 個輔組繼電器 KA，其中 2個的電磁線圈控制迴路中（ KA2,KA3 ）， 4 個的電磁線圈在 PLC 接線上（KA1,KA4,KA5,KA6）。由於控制迴路的工作電壓為 22VAC,PLC 的負載電壓為24VDC，所以選擇了 JZ14-11JZ/0 型交直流中間繼電器。JZ14-11JZ/0 型交直流中間繼電器的性能指標如表 4.3 所示。型號 線圈電壓 線圈吸合功率 線圈吸合時間</p><p>JZ14-11JZ/0 AC:36、127、220、380 DC：24、48、110、220</p><p>AC:10VA DC:7W ≤0.5S</p><p>表 4.3：JZ14-11JZ/0 型交直流中間繼電器的性能指標</p><p>4.2 功率統計</p><p>下表 4.4 為本設計中各項用電設備的最大使用功率統計。項目 用電功率(W) 水泵 260 電動調節閥 220 直流電源 176 PLC（CPU 226 和 EM 235） 53 壓力/液位變送器 5 接觸器 25 輔組繼電器 7·2+10·4=68 PC 500</p><p>表 4.4：各項用電設備功率統計</p><p>4.3 電氣設備的選擇</p><p>本設計電氣設備的選擇主要考慮斷路器（空氣開關），熔斷器和導線的選擇。為了方便計算，將本設計的電路分為下面 4 部分，分別為水泵電源迴路，控制迴路，直流電源迴路和 PC 電源迴路。</p><p>4.3.1 水泵電源迴路的電氣設備的選擇</p><p>圖 4.4：水泵電源迴路</p><p>水泵電源迴路中，工作電源電壓為 220VAC，最大工作電流為 1.76A。選擇的空氣開關的工作電壓為 220V，能承受的電流至少要打到 1.76A，所以選擇德力西型號為 1P16A 的空氣開關。實物照片如圖 4.5 所示。</p><p>圖 4.5：德力西空氣開關 1P16A</p><p>熔斷器由熔斷器支持件和熔斷體組合而成，熔斷器因內配置的熔斷體（亦稱保險管），按照最大負工作電流的 1.5 至 2 倍原則選擇熔斷器，則選擇熔斷電流 3A 玻璃保險管和德力西產的熔斷器支持件 RT14-20 組成的熔斷器。實物照片如圖 4.6 所示。圖 4.6：玻璃保險管（左）和德力西產的熔斷器支持件（右）對於該回路電流是選擇是按長時允許電流選擇導線截面，選擇 TJ-4 無氧銅導線。</p><p>4.3.2 控制迴路的電氣設備的選擇</p><p>圖 4.7：控制迴路 項目 功率(W)</p><p>指示燈·4 10·4 接觸器線圈·1 25 中間繼電器·2 10·2 統計 85</p><p>表 4.5：控制迴路的功率統計</p><p>則本回路的最大工作電流為 0.38A，所以選擇德力西型號為 1P16A 的空氣開關也適用。同一型號採購數量的增加會降低每個的採購成本。選擇由德力西產的熔斷器RT14-20 支持件和熔斷電流為 1A 的玻璃保險管組成的熔斷器。導線選擇為 TJ-4 無氧銅導線。</p><p>4.3.3 直流電源迴路的電氣設備的選擇</p><p>圖 4.8：直流電源迴路</p><p>本回路的最大用電功率為 58W，本回路的最大工作電流為 0.26A，所以選擇德力西型號為 1P16A 的空氣開關同樣適用。同一型號採購數量的增加會降低每個的採購成本。選擇由德力西產的熔斷器 RT14-20 支持件和熔斷電流為 0.5A 的玻璃保險管組成的熔斷器。導線選擇為 TJ-4 無氧銅導線。</p><p>4.3.4 電動調節閥電源電氣設備的選擇</p><p>圖 4.9：電動調節閥電源迴路</p><p>本回路的最大用電功率為 220W，本回路的最大工作電流為 1A，所以選擇德力西型號為 1P16A 的空氣開關同樣適用。同一型號採購數量的增加會降低每個的採購成本。選擇由德力西產的熔斷器 RT14-20 支持件和熔斷電流為 2A 的玻璃保險管組成的熔斷器。導線選擇為 TJ-4 無氧銅導線。</p><p>4.3.5 PC 迴路的電氣設備的選擇</p><p>圖 4.10:PC 電源迴路</p><p>本回路的最大用電功率為 500W，本回路的最大工作電流為 2.27A，所以選擇德力西型號為 1P16A 的空氣開關同樣適用。同一型號採購數量的增加會降低每個的採購成本。選擇由德力西產的熔斷器 RT14-20 支持件和熔斷電流為 4A 的玻璃保險管組成的熔斷器。導線選擇為 TJ-4 無氧銅導線。</p><p>第 5 章 控制接線設計</p><p>5.1 西門子 S7-200 PLC CPU226 和 EM235 模塊介紹</p><p>S7-200 系列 PLC 的 CPU 模塊有兩個子系列，即 CPU21X 和 CPU22X。目前市場上 CPU22X 系列 PLC 已經取代了第一代 CPU21X 系列，併成為市場的主流的產品。</p><p>5.1.1 CPU 模塊外形結構</p><p>S7-200 系列 PLC 的 CPU22X 系列主要有 CPU221、CPU222、CPU224、CPU224、XP、CPU226 等型號，其外形結構基本系統，如圖 5.1 所示。</p><p>圖 5.1：S7-200 系列 PLC CPU 模塊外形結構圖</p><p>（1）輸入/輸出端子：CPU 模塊上集成了部分 I/O 端子，分別為於模塊的上端和下端。打開上、下端蓋板，即可看到接線端子排，其中上端排為輸出端子和 PLC 電源端子，下端子排為輸入端子。為接線方便，高端的 CPU 模塊（CPU224 以上）採用可拔插式端子。</p><p>（2）系統狀態 LED 指示：用於指示 PLC 當前工作狀態（RUN 或 STOP）,以及系統故障與診斷（SF/DIAG）.</p><p>（3）I/O 點 LED 指示：為方便查詢，CPU 模塊上的每個 I/O 點均設有 LED 指示燈，以顯示其當前狀態。指示燈分別位於上蓋板的下部和下蓋板的上部。</p><p>（4）工作方式選擇開頭及擴展端口：位於 CPU 模塊右端蓋板下，包括方式選擇開關、模擬電位器和擴展端口。撥動工作方式選擇開關可設置 PLC 的工作方式。RUN 為運行方式；STOP 為停止運行方式，也稱為編程方式；TERM 為終端方式，允許由編程軟件來控制 PLC 的工作雙容液位控制系統設計方式。</p><p>每一個模擬電位器均與 PLC 內部的一個特殊功能寄存器（SMB28、SMB29）相對應，旋轉電位器可改變寄存器的值。擴展端口用於 I/O 模塊的擴展連接。</p><p>（5）通信口：S7-200 系列 PLC 的 CPU 模塊上均配有一個或兩個 RS-485T 通信接口，可與編程器、計算機或其他通信設備連接，進行數據交換。</p><p>（6）可選卡件插槽：如插入存儲卡，則可對 PLC 的存儲器容量進行擴展，還可插入實時時鐘卡，電池卡等。 性能指標 CPU226 外形尺寸 196x80x62 端子可拆卸 是存儲器 用戶程序 16384 字節 用戶數據 掉電保持 10240 字節</p><p>I/O 數字量 I/O 24/16 模擬量 I/O 無</p><p>數字量 I/O 映像區 128 入/128 出模擬量 I/O 映像區 32 入/32 出 最大允許擴展模塊 7 脈衝捕捉輸入 24 脈衝輸出 2主要內部元件 輔助繼電器 M 256 定時器/計數器 256/256 狀態寄存器 S 256 高速計數器 6常規性能 定時中斷 2(1-255ms) 邊沿中斷 4 個上升沿/4 個下降沿 模擬電位器 2（8bit）布爾量運算速度 0.22us/指令 口令保護 有通信功能 通信口 2 通信協議 9.6，19.2，187.5kb/s 最大主站數 32</p><p>表 5.1：CPU226 的主要技術性能指標</p><p>圖 5.2：CPU226 DC/DC/DC 端子接線圖</p><p>5.1.2 模擬量模塊的接線</p><p>如圖 5.3 所示,圖中的 L+和 M 端為電源端。上部端子為 4 路模擬輸入端，分別由A、B、C、D 標註，可分別接入標準電壓和電流信號。為電壓輸入時（如 A 口），電壓信號的正極接入 A+端，負極接入 A-端，RA 端懸空。為電流輸入時（如 B 口），須將 RB 與 B+端短接，然後與電流信號的輸出端相連，電流信號輸入端則與 B-相連。若 4 個接口未全部使用（如 C 口），則應將未用的接口用導線短接，以免受到外部干擾。下部端子為 1 路模擬量輸出端，有 3 個接線端子 MO、VO、IO，其中，MO 為數字接地接口，VO 為電壓輸出接口，IO 為電流輸出接口，若為電壓負載，則將負載接入 MO、VO 接口；若為電流負載，則接入 MO、IO 接口。</p><p>圖 5.3：EM235 模塊的端子接線圖</p><p>5.1.3 模擬量 I/O 的數據格式</p><p>對單極性輸入格式，MSB 位為符號位，0 表示正數，底 3 位無效，A/D 轉換的數據值每變化 1 個單位相當於 I/O 數據字的值變化 8 個單位。對雙極性輸入格式，低 4位無效，A/D 轉換的數據值每變化 1 個單位相當於 I/O 數據字的值變化 16 個單位。數字量到模擬量的轉化時，12 位數據的數據格式是左對齊，最高有效位 MSB 為符號，0 表示正數，電流輸出數據格式的低 3 位和電壓輸出數據格式的低 4 位不影響輸出信號的值。</p><p>5.2 本設計的控制接線</p><p>圖 5.4：控制接線部分一</p><p>如圖 5.4 所示，這部分控制接線的設計的作用主要是對水泵電機的控制等以及狀態檢測和報警等。FR 的觸點與 KA3 的線圈串聯的工作原理是：當水泵電機上的 FR 線圈通電，使FR 觸點接觸，使得 KA3 的線圈通電，KA3 的觸點接在 CPU 模塊的 I0.0 上，讓 PLC檢測到水泵電機過熱，通過程序命令讓水泵停止工作，並報警。KA4 與燈 L2 串聯的作用是：PLC 的 Q0.1 與 KA4 的線圈相連，當燈 L2 點亮意為壓力/液位變送器在系統工作前檢測通過。燈 L3 和燈 L4 的作用和燈 L2 的作用很相似。燈 L3 點亮意為調節閥已經全部打開。燈 L4 閃爍意為等待用戶將選擇開關打到"REMOTE"，燈 L4 點亮意為用戶已經將選擇開關打打到"REMOTE"。按鈕 SB1 的作用是當系統失效時，可以認為強制將水泵關閉。選擇開關 SA 的作用是可以選擇現場還是遠程控制水泵運行。KA1 是遠程控制水泵的觸點。</p><p>KM 是控制水泵接觸器的線圈。</p><p>KM 的觸點能將按鈕 SB2 鎖住，使得用戶不必長按按鈕 SB2 就可以讓水泵運行。</p><p>KA2 是用來檢測"REMOTE"模式的線圈。</p><p>燈 L1 會和 KA 線圈同時通電，用來表示水泵運行狀態。</p><p>圖 5.5：控制接線部分二：CPU 模塊接線</p><p>如圖 5.5 所示，Q0.3 與 KA6 線圈連接的作用是使燈 L4 點亮，意為用戶已經將選擇開關打打到"REMOTE"。Q0.2 與 KA5 線圈及 Q0.1 與 KA4 線圈連接的作用和 Q0.3 與 KA6 線圈連接的作用十分相似。分別使燈 L3 和燈 L2 點亮，KA2 觸點和 KA3 觸點具體意義在控制接線部分一已介紹。</p><p>圖 5.6：控制接線部分三：EM235 接線</p><p>如圖 5.6 所示，MO，IO 端口輸出調節閥的控制電流，4 到 20mA。A+，A-端口輸入壓力/液位變送器的液位檢測電流，4 到 20mA。由於壓力/液位變送器輸出的是電流信號，所以 RA 與 A+短接。B+，B-端口輸入調節閥的當前閥位反饋電流信號，4 到 20mA，RB 與 B+也必須短接，原因同上。C+與 C-要短接是液位 C 端口未被使用，為使 EM235 模塊不受干擾。D+與 D-短接的原因也一樣，也為的使 EM235 模塊不受干擾。</p><p>第 6 章 軟件流程圖和程序設計</p><p>6.1 軟件流程圖</p><p>6.1.1 主程序流程圖</p><p>此處將中斷事件 0 設為中斷 0，該中斷事件為水泵的熱繼電器響應，使得 KA3的線圈也德電，並讓 I0.0 有數字量為"1"的輸入。該中斷優先級最高。此處將中斷事件 10 設為中斷 1，該中斷事件是一個定時中斷，為每間隔 100ms自動響應一次，防備執行一次從壓力/液位變送器讀取數據轉化後存入 PID 的 PV 中的操作，和根據數據變化 PLC 內的 PID 控制器執行一次運算的操作，以及將 PID 的MV 數值轉化後附給模擬量輸出端口，讓調節閥按要求工作的操作。此處的操作是對 PID 控制器進行初始化，設 PID 的 SP 為 0.3，即對寄存器 VD104存入實數 0.3。此處的操作是設 PID 的 P 為 2.0，即對寄存器 VD112 存入實數 2.0。此處的操作是設置 PID 的採樣時間為 100ms，即對寄存器 VD116 存入實數 0.1。此處的操作是設 PID 的 I 為 1.0，即對寄存器 VD120 存入實數 1.0。此處的操作是設 PID 的 D 為 0.0，即對寄存器 VD124 存入實數 0.0。此處的操作是先讓 PLC 讀取壓力/液位變送器當前的液位數值，存入到 VW200中，如果該數值在 6400 到 32000 內，則檢測正常，否則就報警，同時壓力/液位變送器故障。</p><p>首先我們要明白的是當調節閥關閉或者開啟程度很小就讓水泵運行，水泵此時會負載很大，最水泵有嚴重的傷害，可能會燒燬水泵。所以在系統自動運行前一定要讓調節閥打開，此處的操作是先判斷調節閥是否開到最大，是則往執行下一個指令；否，則將對 AQW0 端口（調節閥控制電流輸出端口）附給 32000（數值量為 32000，對應的電流值為 20mA,意為最大值）。此處的操作是判斷用戶是否將選擇開關 SA 打到"REMOTE"處，如果沒有，則L4 說持續閃爍，而不執行下一步指令，知道用戶將選擇開關打到"REMOTE"為止。當用戶打到"REMOTE"端時燈 L4 會持續電亮。此處的作用是當組態軟件單擊"自動"按鈕時，系統會自動控制調節閥；當單擊"手動"時，組態軟件會彈出一個對話框，讓用戶輸入需要開啟調節閥的百分比。不操作，則默認為自動控制調節閥。</p><p>6.1.2 中斷 0 子程序流程圖</p><p>此處為中斷響應，該中斷的作用是停止水泵或停止繼續給水泵供電，避免事故發生，該中斷優先級最高</p><p>6.1.3 中斷 1 子程序流程圖</p><p>PLC 讀取 AIW0 的數值量是 16 位的，而下面轉化為實數是 32 位的，所以先將轉化數據，把該數據存入 AC0，會自動生 32 位數據而不改變原數值的大小。把 AC0 減去 6400 再存回 AC0，該處為雙整型的減法計算。把 AC0 的數值按浮點數計算除以 25600 得到 0 到 1 之間是實數存入 VD424。此處操作就是讓 PID 的 PV 得到剛才運算實數。PID 控制會根據給定的參數處理運算。經過 PID 控制器運算得到的 MV 先存在寄存器 VD416 中。先把該實數乘以 25600 得到一個 0 到 25600 之間的數值量，存入 AC1。由於控制調節閥的數值量是 16 位的數據，而計數器 AC1 經過剛才的計算為一個32 位的數據了，需要轉化為 16 位的數據才能進行接下來的操作。如果將 AC1 的數據直接附給 AQW0 會出現編譯錯誤，需要先"寄存"在一個 1個字的空間裡再附給 AQW0。</p><p>6.2 程序設計</p><p>本設計採用 PLC 作為過程系統控制器，該 PLC 型號為西門子 S7-200 PLC，其CPU 型號為 226，程序的編寫軟件為 V4.0 STEP 7 MicroWIN SP3。設計程序梯形圖如下：</p><p>6.2.1 主程序梯形圖：</p><p>網絡 1：</p><p>註釋（中斷 0 初始化：中斷事件 0）</p><p>網絡 2：</p><p>註釋（中斷 1 初始化：中斷事件 10）</p><p>網絡 3：</p><p>雙容液位控制系統設計</p><p>註釋（PID 初始化）</p><p>網絡 4：</p><p>註釋（壓力/液位便送器檢測： 讀取 AIW0 的值存入 VW200）</p><p>網絡 5：</p><p>註釋（壓力/液位便送器檢測：讀取值小於 6400 或大於 32000 為故障，燈 L2 閃爍，5</p><p>秒計時器打開）</p><p>網絡 6：</p><p>註釋（壓力/液位便送器檢測：5 秒計時到，停止閃爍，程序停止） 網絡</p><p>7：註釋（壓力/液位便送器檢測：讀取值在 6400 到 32000 內，壓力/液位便送器檢測通過，</p><p>L2 常亮）</p><p>網絡 8：註釋（當前閥位判斷是否全開：讀取閥位）</p><p>網絡 9：註釋（當前閥位判斷是否全開：未全開，控制調節閥開到最大）</p><p>網絡 10：註釋（當前閥位判斷是否全開：全開，燈 L3 常亮）網絡 11：</p><p>註釋（燈 L4 閃爍，對待選擇開關打到'REMOTE',即 I0.1） 網絡</p><p>12：註釋（是否自動控制調節閥：0 為自動）</p><p>網絡 13：</p><p>註釋（是否自動控制調節閥：1 為自動）網絡 14：</p><p>註釋（判斷是否為自動控制調節閥：0 為自動，1 為手動）</p><p>6.2.2 中斷 0 子程序梯形圖：</p><p>網絡 1：</p><p>註釋（燈 L2，L3，L4 閃爍）</p><p>網絡 2：</p><p>註釋（開 5 秒計時器）</p><p>網絡 3：</p><p>註釋（5 秒時間到，停止閃爍，程序停止）</p><p>6.2.3 中斷 2 子程序梯形圖：</p><p>網絡 1：</p><p>註釋（把讀取液位的數值量轉化為實數）</p><p>網絡 2：</p><p>註釋（PID 計算）網絡 3：</p><p>註釋（把結果 PID 計算的 MV 實數型數據轉化為數值量並輸出）</p><p>第 7 章 上位組態設計</p><p>7.1 新建工程</p><p>組態軟件，又稱組態監控軟件系統軟件。它是指一些數據採集與過程控制的專用</p><p>軟件。它們處在自動控制系統監控層一級的軟件平臺和開發環境，使用靈活的組態方</p><p>式，為用戶提供快速構建工業自動控制系統監控功能的、通用層次的軟件工具。組態</p><p>軟件的應用領域很廣，可以應用於電力系統、給水系統、石油、化工等領域的數據採</p><p>集與監視控制以及過程控制等諸多領域。在電力系統以及電氣化鐵道上又稱遠動系</p><p>統。</p><p>本設計用組態王 6.53 作上位組態軟件。</p><p>要建立新的組態王工程，請首先為工程指定工作目錄（或稱"工程路徑"）。"組</p><p>態王"用工作目錄標識工程，不同的工程應置於不同的目錄。工作目錄下的文件由"組</p><p>態王"自動管理。如圖 7.1 所示。</p><p>圖 7.1：工程管理器對話框</p><p>組態王把那些需要與之交換數據的設備或程序都作為外部設備。外部設備包括：</p><p>下位機（PLC、儀表、模塊、板卡、變頻器等），它們一般通過串行口和上位機交換</p><p>數據；其他 Windows 應用程序，它們之間一般通過 DDE 交換數據；外部設備還包括</p><p>網絡上的其他計算機。</p><p>7.2 選擇設備及設備配置</p><p>只有在定義了外部設備之後，組態王才能通過 I/O 變量和它們交換數據。為方便</p><p>定義外部設備，組態王設計了"設備配置嚮導"引導用戶一步步完成設備的連接。</p><p>在最左邊的菜單欄上點擊"系統"按鈕，再在"設備"欄上選擇"COM1"，單</p><p>擊新建，出現如下的"設備配置嚮導"對話框。如圖 7.2 所示。</p><p>本設計，我選用的控制器是西門子的 S7-200PLC，所以在"設備配置嚮導"對話</p><p>框中選擇"設備驅動">"PLC">"西門子">"S7-200 系列">"PPI"。出現的結</p><p>果如下，再選擇"下一步"。如圖 7.3 所示。</p><p>圖 7.2：設備配置嚮導——生產廠家、設備名稱、通訊方式對話框 1</p><p>圖 7.3：設備配置嚮導——生產廠家、設備名稱、通訊方式對話框 2</p><p>出現"設備配置嚮導——邏輯名稱"對話框，在"請給要安裝的設備指定唯一的</p><p>名稱"的文本輸入欄目中輸入給下位機起的名字，根據本設計，我給下位機起的名字</p><p>叫"S7_200PLC"。</p><p>單擊"下一步"後出現"設備配置嚮導——選擇串口號"對話框，由於是在"COM1"</p><p>下新建的設備配置，所以本設計選擇的是"COM1"串口。</p><p>在接下來的對話框中需要輸入地址"2"，恢復時間間隔"30"秒，最長恢復時間</p><p>該文檔是極速PDF編輯器生成，</p><p>"24"小時的操作得到如下"設備配置嚮導——信息總結"對話框。如圖 7.4 所示。</p><p>圖 7.4：設備配置嚮導——信息總結對話框</p><p>單擊"完成"後算是新建完成設備配置了。</p><p>7.3 建立數據庫</p><p>數據庫是"組態王"軟件的核心部分，工業現場的生產狀況要以動畫的形式反映</p><p>在屏幕上，操作者在計算機前發佈的指令也要迅速送達生產現場，所有這一切都是以</p><p>實時數據庫為中介環節，所以說數據庫是聯繫上位機和下位機的橋樑。在 TouchVew</p><p>運行時，它含有全部數據變量的當前值。變量在畫面製作系統組態王畫面開發系統中</p><p>定義，定義時要指定變量名和變量類型，某些類型的變量還需要一些附加信息。數據</p><p>庫中變量的集合形象地稱為"數據詞典"，數據詞典記錄了所有用戶可使用的數據變</p><p>量的詳細信息。</p><p>接下來進入"數據庫"，"數據詞典"，構造數據庫。如圖 7.5 所示。</p><p>圖 7.5 數據詞典樣子</p><p>選擇工程瀏覽器左側大綱項"數據庫\數據詞典"，在工程瀏覽器右側用鼠標左鍵</p><p>雙擊"新建"圖標，彈出"變量屬性"對話框如圖 7.6 所示。</p><p>圖 7.6：定義變量對話框</p><p>需要注意初始值和最大原始值的大小，寄存器的類型的選擇及寄存器地址的編</p><p>碼，寄存器的數據類型的選擇，寄存器內存的數據的讀寫屬性，必須以上保證所有的</p><p>定義全部正確，否則組態王將不能正常工作。</p><p>本設計所構造的數據庫列表如下表 7.1 所示。</p><p>雙容液位控制系統設計</p><p>表 7.1：數據庫列表 變量名 變量類型 寄存器 數據類型 讀寫屬性PID_PV I/O 實數 V100 FLOAT 只讀 PID_SP I/O 實數 V104 FLOAT 讀寫 PID_MV I/O 實數 V108 FLOAT 讀寫 PID_P I/O 實數 V112 FLOAT 讀寫 PID_I I/O 實數 V120 FLOAT 讀寫 PID_D I/O 實數 V124 FLOAT 讀寫 AO I/O 實數 V416 FLOAT 讀寫 AI I/O 實數 V424 FLOAT 只讀 PID_AM I/O 整數 V481 BYTE 讀寫 PID_STOP I/O 整數 V482 BYTE 讀寫 PID_MAN I/O 實數 V488 FLOAT 讀寫</p><p>7.4 建立組態動畫</p><p>在完成設備定義和數據庫構造後，是本設計的組態畫面的設計</p><p>進入組態王開發系統後，就可以為每個工程建立數目不限的畫面，在每個畫面上</p><p>生成互相關聯的靜態或動態圖形對象。這些畫面都是由"組態王"提供的類型豐富的</p><p>圖形對象組成的。系統為用戶提供了矩形（圓角矩形）、直線、橢圓（圓）、扇形（圓</p><p>弧）、點位圖、多邊形（多邊線）、文本等基本圖形對象，及按鈕、趨勢曲線窗口、報</p><p>警窗口、報表等複雜的圖形對象。提供了對圖形對象在窗口內任意移動、縮放、改變</p><p>形狀、複製、刪除、對齊等編輯操作，全面支持鍵盤、鼠標繪圖，並可提供對圖形對</p><p>象的顏色、線型、填充屬性進行改變的操作工具。</p><p>"組態王"採用面向對象的編程技術，使用戶可以方便地建立畫面的圖形界面。</p><p>用戶構圖時可以像搭積木那樣利用系統提供的圖形對象完成畫面的生成。同時支持畫</p><p>面之間的圖形對象拷貝，可重複使用以前的開發結果。</p><p>進入新建的組態王工程，選擇工程瀏覽器左側大綱項"文件\畫面"，在工程瀏覽</p><p>器右側用鼠標左鍵雙擊"新建"圖標，彈出對話框如圖 7.7 所示。</p><p>圖 7.7：新建畫面對話框</p><p>由於我在做本設計是所用的顯示器是 1024x768 的，所以選擇的畫面顯示寬度和</p><p>高度分別是 1024 像素和 768 像素。</p><p>新建後畫面後可以見到組態畫面的製作環境，如圖 7.8 所示。</p><p>圖：7.8 組態畫面製作環境</p><p>圖 7.9：本設計的組態畫面</p><p>7.5 組態畫面及功能介紹</p><p>見圖 7.9 的左邊，這部分有上水箱、下水箱和儲水箱，通過水泵、電動調節閥和</p><p>水管連接，PLC 檢測下水箱的液位和控制電動調節閥的開啟程度，這部分畫面就很好</p><p>地模擬了本設計控制系統的現場設備。</p><p>畫面左邊佈置了 6 個數據顯示小窗口和 8 個功能按鈕。這 6 個數據顯示小窗口分</p><p>別是目標液位值顯示，當前液位值顯示，調節閥控制值顯示及 PID 控制參數的比例參</p><p>數顯示，積分時間顯示和微分時間顯示。其中，調節閥的控制值不是調節閥的當前值，</p><p>調節閥的控制值是一個"期望值"，調節閥從當前閥位運行到"期望"閥位是需要一</p><p>定時間的，經數據推算，需要最短時間可以達到 100ms，最長事件可能需要 28 秒，</p><p>即調節閥從完全開啟打到完全關閉或完全關閉打到完全開啟的時間，這與調節閥頭的</p><p>執行能力有關。另外，積分時間顯示的數據是以秒為單位顯示的，微分時間顯示也一</p><p>樣。此外，當前液位顯示和目標液位顯示所顯示的是百分比的值，而非實際的以釐米</p><p>為單位的液位高度。</p><p>在 6 個數據顯示小窗口周圍的是 8 個功能按鈕，他們分別是目標液位設定按鈕，</p><p>運行和停止控制按鈕，自動和手動控制按鈕，以及 PID 參數設定按鈕。這 8 個按鈕可</p><p>以分兩類介紹，其中，運行和停止按鈕與自動和手動按鈕可以歸為控制按鈕。他們是</p><p>通過組態軟件訪問 PLC 寄存器並改變寄存器內的數據實現他們各自的功能的。例如：</p><p>運行按鈕，只要組態軟件正常工作時單擊該按鈕，就能給寄存器 VB482 附上整數"1"，</p><p>當 PLC 掃描檢測到 VB482 的值為"1"，則會執行相應的指令，讓水泵停止運行。在</p><p>組態軟件中實現該功能是命令語句是"BitSet( \\本站點\PID_STOP, 1, 1);"，設置為按</p><p>鈕彈起時執行該命令語句。其他三個控制類按鈕的功能，用法及設置都很相似，都是</p><p>彈起時執行命令語句，運行按鈕的命令語句是"BitSet( \\本站點\PID_STOP, 1, 0);"；</p><p>自動按鈕的命令語句是"BitSet( \\本站點\PID_AM, 1, 0);";手動按鈕的命令語句是</p><p>"BitSet( \\本站點\PID_AM, 1, 1);"。此外，無論是執行手動還是自動的時候，單擊停</p><p>止或運行都能正常工作，不會起衝突。</p><p>剩下的目標液位設定按鈕，比例參數設定按鈕，積分時間設定按鈕和微分時間設</p><p>定按鈕功能就該按鈕名字的字面意義。無需寫命令語句，只要設定變量名即可。如目</p><p>標液位設定按鈕的變量名為"\\本站點\PID_SP"，比例參數設定按鈕的變量名為"\\</p><p>本站點\PID_P"，積分時間設定按鈕的變量名為"\\本站點\PID_I"，微分時間設定按</p><p>鈕的變量名為"\\本站點\PID_D"，他們都屬於模擬量輸入。當單擊這些按鈕時會出</p><p>現如下對話框，如圖 7.10 所示，可以通過單擊數字執行輸入操作。</p><p>圖 7.10 模擬量輸入對話框</p><p>7.6 製作上位組態需要注意的事項</p><p>7.6.1 如何修改當前工程的屬性</p><p>修改工程屬性主要包括工程名稱和工程描述兩個部分。選中要修改屬性的工程，</p><p>使之加亮顯示，單擊菜單欄"文件\工程屬性"命令或工具條"屬性"按鈕或快捷菜</p><p>單"工程屬性"命令後，彈出修改"工程屬性"的對話框如圖 7.10 所示。</p><p>"工程名稱"文本框中顯示的為原工程名稱，用戶可直接修改。</p><p>"版本"、"分辨率"文本框中分別顯示開發該工程的組態王軟件版本和工程的分</p><p>辨率。</p><p>"工程路徑"顯示該工程所在的路徑。</p><p>"描述"顯示該工程的描述文本，允許用戶直接修改。</p><p>圖 7.10：修改工程屬性對話框</p><p>7.6.2 如何備份工程</p><p>選中要備份的工程，使之加亮顯示。單擊菜單欄"工具\工程備份"命令或工具</p><p>條"備份"按鈕或快捷菜單"工程備份"命令後，彈出備份工程對話框，如圖 3.30</p><p>所示。</p><p>圖 7.11：備份工程對話框</p><p>工程備份文件分為兩種形式：不分卷、分卷。不分卷是指將工程壓縮為一個備份</p><p>文件，無論該文件有多大。分卷是指將工程備份為若干指定大小的壓縮文件。系統的</p><p>默認方式為不分卷。</p><p>默認（不分卷）：選擇該選項，系統將把整個工程壓縮為一個備份文件。單擊"瀏</p><p>覽"按鈕，選擇備份文件存儲的路徑和文件名稱，如圖 7.12 所示。工程被存儲成擴</p><p>展名為.cmp 的文件，如：filename.cmp。工程備份完後，生成一個 filename.cmp 文件。</p><p>圖 7.12：工程備份路徑選擇</p><p>自定義（分卷）：選擇該選項，系統將把整個工程按照給定的分捲尺寸壓縮為給</p><p>定大小的多個文件。"分捲尺寸"文本框變為有效，在該文本中輸入分卷的尺寸，即</p><p>規定每個備份文件的大小，單位為兆。分捲尺寸不能為空，否則系統會提示用戶輸入</p><p>分捲尺寸大小。單擊"瀏覽"按鈕，選擇備份文件存儲的路徑和文件名稱。分卷文件</p><p>存儲時會自動生成一系列文件，生成的第一個文件的文件名為所定義的文件名.cmp，</p><p>其它依次為：文件名.c01、文件名.c02…。如：定義的文件名為 filename，則備份產</p><p>生的文件為：filename.cmp、filename.c01、filename.c02…。</p><p>如果用戶指定的存儲路徑為軟驅，在保存時若磁盤滿則系統會自動提示用戶更換</p><p>磁盤。這種情況下，建議用戶使用"自定義"方式備份工程。</p><p>備份過程中在工程管理器的狀態欄的左邊有文字提示，右邊有備份進度條標識當</p><p>前進度。</p><p>注意：備份的文件名不能為空。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>西門子</a></li><li><a>PLC</a></li><li><a>學習</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/e18864df.html alt=深入淺出西門子PLC連載一：西門子S7-300/400通信功能 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d2fa4bebce394c979e42408cab824fdb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e18864df.html title=深入淺出西門子PLC連載一：西門子S7-300/400通信功能>深入淺出西門子PLC連載一：西門子S7-300/400通信功能</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/11dfc117.html alt=「分享」西門子PLC雙字、字、字節和位的關係總結 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/91f157294c4f47b7a0b96ba34d950b79 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/11dfc117.html title=「分享」西門子PLC雙字、字、字節和位的關係總結>「分享」西門子PLC雙字、字、字節和位的關係總結</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c914526c.html alt=新手入門PLC，掌握學習方法是關鍵 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15355275026304e8d787f10 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c914526c.html title=新手入門PLC，掌握學習方法是關鍵>新手入門PLC，掌握學習方法是關鍵</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9ceb6ec4.html alt=西門子PLC的局部變量的類型和賦值 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1585607cef83497c86e68f92b6ba0abb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9ceb6ec4.html title=西門子PLC的局部變量的類型和賦值>西門子PLC的局部變量的類型和賦值</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/fb2f220d.html alt=西門子PLC常用的指令有哪些？中英文解釋 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/fb2f220d.html title=西門子PLC常用的指令有哪些？中英文解釋>西門子PLC常用的指令有哪些？中英文解釋</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/fc6093fe.html alt=西門子PLC的這些實用知識，你知道多少？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1531311178017c5912377d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/fc6093fe.html title=西門子PLC的這些實用知識，你知道多少？>西門子PLC的這些實用知識，你知道多少？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/236fea2b.html alt=西門子PLC用TIA博途SCL語言寫的一個產生隨機實數的指令塊 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/254c756a-5d36-44e7-a93e-9346a4d43a23 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/236fea2b.html title=西門子PLC用TIA博途SCL語言寫的一個產生隨機實數的指令塊>西門子PLC用TIA博途SCL語言寫的一個產生隨機實數的指令塊</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/376c65a.html alt=西門子PLC與NPN（源型）和PNP（漏型）傳感器的接線，你會了嗎？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/289deea5aa594ac395f861cca641941e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/376c65a.html title=西門子PLC與NPN（源型）和PNP（漏型）傳感器的接線，你會了嗎？>西門子PLC與NPN（源型）和PNP（漏型）傳感器的接線，你會了嗎？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/91968ce.html alt=西門子PLC最常見問題故障及解決辦法71例 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/73a4413fcee6480381a2af62a9e82d56 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/91968ce.html title=西門子PLC最常見問題故障及解決辦法71例>西門子PLC最常見問題故障及解決辦法71例</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1b5cba.html alt=西門子PLC狀態字大揭祕，讀懂對程序理解更深刻！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1b5cba.html title=西門子PLC狀態字大揭祕，讀懂對程序理解更深刻！>西門子PLC狀態字大揭祕，讀懂對程序理解更深刻！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7d8fd1.html alt=西門子PLC信號邊沿檢測與邏輯結果邊沿檢測有什麼不同？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/32a4408910874af69fe8fe1114a6d22c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7d8fd1.html title=西門子PLC信號邊沿檢測與邏輯結果邊沿檢測有什麼不同？>西門子PLC信號邊沿檢測與邏輯結果邊沿檢測有什麼不同？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/60e40d4.html alt=西門子PLC指令 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0d69eb23e552491d89f4788f38bdf81a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/60e40d4.html title=西門子PLC指令>西門子PLC指令</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/237eec3.html alt=西門子PLC的SCL語言實現上升沿與下降沿的使用感受 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15330441188655852199c12 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/237eec3.html title=西門子PLC的SCL語言實現上升沿與下降沿的使用感受>西門子PLC的SCL語言實現上升沿與下降沿的使用感受</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3ef5f0e.html alt=很多人說西門子PLC編程不可以速成，本文可以幫助你！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/380be87886ea44c98178dc80e404f1a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3ef5f0e.html title=很多人說西門子PLC編程不可以速成，本文可以幫助你！>很多人說西門子PLC編程不可以速成，本文可以幫助你！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/376d2fe.html alt=新手必懂，西門子PLC常用指令有哪些？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1539304964872a4a812fa2c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/376d2fe.html title=新手必懂，西門子PLC常用指令有哪些？>新手必懂，西門子PLC常用指令有哪些？</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>