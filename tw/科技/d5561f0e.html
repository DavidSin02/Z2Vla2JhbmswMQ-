<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路 | 极客快訊</title><meta property="og:title" content="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e4f9a827706a444d8d40a2d7eb1748b2"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d5561f0e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d5561f0e.html><meta property="article:published_time" content="2020-10-29T21:12:22+08:00"><meta property="article:modified_time" content="2020-10-29T21:12:22+08:00"><meta name=Keywords content><meta name=description content="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/d5561f0e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><h2 class=pgc-h-arrow-right>網絡數據安全得到前所未有的重視 HTTPS成為解決傳輸安全問題利器</h2><p>大家都知道，HTTP 本身是明文傳輸的，沒有經過任何安全處理，網站HTTPS解決方案通過在HTTP協議之上引入證書服務，完美解決網站的安全問題。</p><p>下圖左側表示Chrome瀏覽器在HTTPS頁面時會顯示安全掛鎖圖標，這是在2016年Chrome55版本上的新增功能，用於引導互聯網向安全的HTTPS協議轉變。右側是截止2020年1月，Chrome平臺上HTTPS流量佔比已經超過90%，另外通過Chrome平臺的HTTPS瀏覽時間佔比也超過90%，這些數據都表明網絡數據安全得到了前所未有的重視。</p><p><strong>HTTPS的實現原理是什麼？</strong></p><p>HTTPS協議通過TCP層之上引入TLS/SSL協議，來實現對HTTP數據的保護，實現數據加密、完整性校驗以及防篡改。整個HTTPS過程包括：TCP建聯、SSL握手、應用數據加密傳輸階段。其中SSL握手的目的是為了在服務端和客戶端協商出一個對稱密鑰，在應用數據傳輸階段使用這對稱密鑰進行數據的加密和解密。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e4f9a827706a444d8d40a2d7eb1748b2><p class=pgc-img-caption></p></div><p>在HTTPS交互過程中主要使用三種算法，首先SSL握手階段用到非對稱加密的算法，通過公鑰和私鑰對數據記性加密解密。在應用數據加密傳輸的階段，主要使用的是對稱加密的算法和hash算法。</p><p>目前，國際上通用的非對稱加密算法包括rsa算法和ecdsa算法。對稱加密算法主要是aes分組加密算法族以及chacha20流式加密，其中aes加密根據密鑰位數和加密模式還能細分成多種不同的算法，所以這裡寫成aes(x)，哈希算法主要是sha-1、sha-2、sha-3算法族。</p><p><strong>行業信息系統需要“安全可控” 國密算法標準化加速實施</strong></p><p>隨著金融安全高度不斷上升，近年來國家有關機關和監管機構提出了推動國密算法應用實施、加強行業安全可控的要求。密碼算法是保障信息安全的核心技術，尤其是最關鍵的銀行業核心領域長期以來都是沿用3DES、SHA-1、RSA等國際通用的密碼算法體系及相關標準。</p><p>國家高度重視商用密碼工作，自1999年國務院頒佈《商用密碼管理條例》以來，截止目前，已經有多項政策陸續出臺，推進國密算法的實施落地。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/155908e82b464570867c4a7d3f77c8a6><p class=pgc-img-caption></p></div><p><strong>究竟什麼是國密算法？</strong></p><p>國密算法是國家密碼局制定標準的一系列算法，包括了對稱加密算法，橢圓曲線非對稱加密算法，哈希算法。其中，SM1和SM4為對稱加密，SM1加密強度與AES相當。調用該算法時，需要硬件實現。SM4的密鑰長度和分組長度均為128位。SM2為非對稱加密，基於ECC。該算法基於ECC，故其簽名速度與祕鑰生成速度都快於RSA。SM3 密碼哈希算法，摘要長度為256位。</p><p>國密算法具備更安全、更快速以及自主可控的優勢，在安全層面，SM2作為一種ECC算法的安全性要高於2048位的RSA。同時SM3的摘要長度為256bit，安全強度也是要高於MD5算法及SHA1算法；在通訊過程中，256位的SM2算法相比於2048位的RSA算法，可以傳輸更少的數據，也就意味著更少的傳輸時間，同時在簽名過程上，SM2算法速度要優於RSA大約在10倍左右。</p><p><strong>國密算法與TLS協議的結合</strong></p><p>根據中華人民共和國密碼行業標準的規定，目前和互聯網行業重度相關的國密相關標準，除了獨立的SM2，SM3，SM4等算法外，就是雙證書TLS協議。這套TLS協議是基於RFC 4346 TLSv1.1修改而來，主要在SSL握手環節引入了加密證書和簽名證書的方式，並對TLSv1.1的握手流程進行了一些修改以適應雙證書的結構。GM/T 0024的標準名稱是《SSL VPN技術規範》，其宗旨是規範SSL VPN設備的通信協議以及增強互聯互通性。個人用戶使用VPN的情況較少，而互聯網行業大部分以to C為主，大量的個人用戶一般使用更加輕量級且通用的手段，例如為解決Web安全的HTTPS就是其中之一。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fce120953e3044daa10a0ea0da5b7d2e><p class=pgc-img-caption></p></div><p><br></p><p>（國密算法雙證書標準交互流程）</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/852cf248d38e414689739094addac070><p class=pgc-img-caption></p></div><p><br></p><p>（國密算法雙證書標準支持加密套件）</p><h2 class=pgc-h-arrow-right>互聯網應用現行國密技術標準的難點</h2><ul><li>協議性能問題，當應用需要承載海量請求的時候，基於TLS1.1或者TLS1.2的雙證書方案，需要2-RTT握手，會使得性能下降，導致用戶體驗變差甚至交易失敗率上升等問題。</li><li>證書數量問題。以手機端的移動應用為例，雙證書方案需要交換的證書量是標準的TLS協議的2倍，在弱網環境下會導致RTT的增多及應用性能變差。</li><li>易用性問題，如果直接套用當前的SSL VPN標準到互聯網場景，例如手機到服務器的場景，則手機端需要增加VPN客戶端進行撥號，然後才能開始正常的業務交互，這會破壞手機應用的易用性。</li><li>技術路線衝突問題。新型技術在互聯網行業中的演進十分快速，下一代網絡通信協議QUIC已經在被逐漸應用，QUIC標準目前唯一指定加密協議就是標準的TLS1.3。對TLS1.3協議層面的任何修改，都會導致和QUIC協議的不兼容，從而導致兼容性問題的發生。</li><li>技術標準推廣問題。當一種技術標準如果能得到主流開源社區的認可和支持，就會在互聯網行業得到快速推廣，反之則很難。開源社區對修改協議流程的接納程度很低，這就導致了國密雙證書TLS協議難以擴大推廣使用。但是獨立的密碼學算法則沒有這個問題，因此SM系列算法要比修改版的TLS協議更容易在開源社區中推廣。</li></ul><p><strong>國密算法單證書標準的推進</strong></p><p>基於以上的困難，螞蟻進入提出了單證書的方案，這個草案是基於TLS1.3的交互流程，新增國密算法套件進行支持。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/023433b1fd644f17ba65f6c21bf1b394><p class=pgc-img-caption></p></div><p><br></p><p>（國密算法單證書標準化推進）</p><p>相較於之前2個RTT的性能開銷來說，TLS1.3完整握手開銷只有1個RTT，性能有很大提升。並且TLS1.3只支持安全等級較高的加密算法，整個協議安全性也得到了較大提升。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/65a2e00a6c0844e7b00845990d2f5313><p class=pgc-img-caption></p></div><p><br></p><p>（國密算法單證書標準交互過程）</p><p>草案中描述的兩個加密套件是需要添加到TLS1.3中，分別是TLS-SM4-GCM-SM3及TLS-SM4-CCM-SM3。這兩個加密套件的基本含義是，非對稱加密使用的是SM2算法，對稱加密使用的SM4算法，哈希算法使用的SM3算法，不同的部分是分別使用了不同的對稱加密模式，一種使用GCM，另一種使用CCM模式，這兩種模式都屬於AEAD，所以滿足TLS1.3對算法的要求。由於這種方式具備更強的通用性，所以能夠得到更快的推廣。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/a0f00d6c2a254371bb5a25d09db176e0><p class=pgc-img-caption></p></div><p><br></p><p>（國密算法單證書標準支持加密套件）</p><h2 class=pgc-h-arrow-right>標準化國密算法在阿里雲CDN上的具體應用</h2><p>阿里雲的CDN支持國密是通過Tengine加上babassl兩個軟件的結合實現的，其中Tengine是阿里雲CDN的接入開源框架，babassl是螞蟻金服為了支持國密算法，基於openssl1.1.1的開源版本進行深度定製開發的代碼庫。通過阿里雲CDN和螞蟻金服的深入合作為客戶打造國密合規的代理服務。該軟件部署到全網2000+節點，對外提供國內最大規模的國密接入能力。</p><p>第一階段阿里雲CDN會先支持接入層的國密算法能力，通過控制檯上傳國密證書後，配置選擇單證書或者雙證書方案，客戶端即可通過CDN邊緣節點完成國密算法的接入。這裡更推薦客戶使用的是單證書方案，該方案的通用性比較高，與國際標準接軌，同時該方案的客戶端開發複雜度低，能降低開發成本。</p><div class=pgc-img><img alt="基於https國密算法 阿里雲CDN構建安全數據傳輸鏈路" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/df9a3ee8c70642b6bd348cfe0f5ebe15><p class=pgc-img-caption></p></div><p>第二階段，阿里雲CDN會支持全鏈路的國密算法能力，包括接入層、節點之間的加密傳輸鏈路以及回源的數據鏈路，通過這個能力極大保障客戶數據的安全。但是需要客戶端以及源站均支持國密的接入能力。</p><p>正如前文所述，隨著密碼法頒佈及各項密碼相關標準的發佈和實施，國密合規已經成為國家高度關注的重點，尤其是對金融和政企行業的數據安全提出了更高的要求。阿里雲CDN推出的國密能力，能夠幫助客戶構建更加安全的數據傳輸鏈路，從而滿足國密合規的要求。</p><p>這裡有個好消息是：babassl在充分驗證可用性和安全性之後有計劃作為開源軟件推出，客戶端和源站的開發可以基於babassl代碼庫實現。</p><p>為了更好的支持國密算法的推廣，螞蟻金服相關團隊針對國密算法的性能進行深度優化，以openssl1.1.1版本的實現為基線，目前sm4能夠實現2倍以上的性能優化，sm2能夠實現5倍以上的性能優化。算法性能的提升讓阿里雲CDN能夠對外提供更加優質的國密服務，歡迎更多用戶一同參與到國密算法的開發和使用，一起共建安全合規的互聯網環境。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>https</a></li><li><a>國密</a></li><li><a>CDN</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/73b9ac39.html alt=玩概念還是真好用？一文讀懂融合CDN class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ROSxt4mE5HqAil style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/73b9ac39.html title=玩概念還是真好用？一文讀懂融合CDN>玩概念還是真好用？一文讀懂融合CDN</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0bc8e815.html alt=復旦國密CPU讀卡器、遠距離國密CPU讀卡器、CPU卡髮卡機、加密器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dfd3d7b270f4418eb71d81343c1f7d97 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0bc8e815.html title=復旦國密CPU讀卡器、遠距離國密CPU讀卡器、CPU卡髮卡機、加密器>復旦國密CPU讀卡器、遠距離國密CPU讀卡器、CPU卡髮卡機、加密器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5f9e30bc.html alt=上海復旦國密FM12AG08卡CPU韋根門禁讀卡器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/2ccafa82e88f493496eb9a8899bd930b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5f9e30bc.html title=上海復旦國密FM12AG08卡CPU韋根門禁讀卡器>上海復旦國密FM12AG08卡CPU韋根門禁讀卡器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/99d6681.html alt="政策已定：雲服務、CDN、SD-WAN 跨境數據" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/99d6681.html title="政策已定：雲服務、CDN、SD-WAN 跨境數據">政策已定：雲服務、CDN、SD-WAN 跨境數據</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8b6cca2.html alt="詳解國密 SM2 的數字簽名" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f20e76df310648109b1f4c62c4e2decf style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8b6cca2.html title="詳解國密 SM2 的數字簽名">詳解國密 SM2 的數字簽名</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>