<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） | 极客快訊</title><meta property="og:title" content="PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/fd1548c124ea4f0887e86263835219b4"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/d7236ae9.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/d7236ae9.html><meta property="article:published_time" content="2020-11-14T21:07:27+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:27+08:00"><meta name=Keywords content><meta name=description content="PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法）"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/d7236ae9.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法）</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>簡單工廠模式是屬於創建型模式，又叫做靜態工廠方法（Static Factory Method）模式，但不屬於23種GOF設計模式之一。</p><p>簡單工廠模式是由一個工廠對象決定創建出哪一種產品類的實例。簡單工廠模式是工廠模式家族中最簡單實用的模式，可以理解為是不同工廠模式的一個特殊實現。</p><p>定義：定義一個工廠類根據不同的參數返回不同類的實例，被創建的類實例通常擁有相同的一個父類或者實現某個相同接口。</p><p>解決問題：解決類的構造把類的實例化操作都放在工廠方法實現通常一個工廠的創建方法返回具有相同行為方法的對象，調用者不必關心構造對象實例的細節和複雜過程。</p><p>舉例：一個緩存功能可以支持MySQL、Redis、MongoDB等等驅動。MySQl和Redis連接方式不一樣，構造方法也有可能不一樣，因此我們可以通過簡單工廠方法傳遞一個參數來獲取所需要的對象，new的操作由工廠幫我們實現。</p><p><strong>UML圖</strong></p><div class=pgc-img><img alt=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fd1548c124ea4f0887e86263835219b4><p class=pgc-img-caption></p></div><p><strong>示例代碼</strong></p><p><strong>沒有使用工廠之前</strong></p><pre><code>$cache = new RedisCache();$cache-&gt;set("name","sunny");</code></pre><p>以上代碼如果在多個地方使用，那麼需要進行多次使用 <strong class=highlight-text>new RedisCache() </strong>來得到一個實例，如果在很多地方都使用了這樣都代碼，如果有一天想要修改為 <strong class=highlight-text>new MongoDBCache()</strong> 的驅動的時候所有地方都需要修改，那工程量就會非常的浩大。</p><p><strong>使用工廠</strong></p><pre><code>$cache = CacheFactory::getDrive('r');$cache-&gt;set("name","sunny");</code></pre><p>使用工廠之後，如果有一天想要修改為 <strong class=highlight-text>new MongoDBCache()</strong> 只要在 <strong class=highlight-text>CacheFactory::getDrive('r')</strong> 只要針對參數為 <strong class=highlight-text>`r`</strong> 進行修改就好了。</p><p><strong>該模式中包含的角色及其職責</strong></p><p><strong>工廠（Creator）角色</strong></p><p>簡單工廠模式的核心，它負責實現創建所有實例的內部邏輯。工廠類的創建產品類的方法可以被外界直接調用，創建所需的產品對象。根據不同參數生產不同的具體產品對象，例如本文中的CacheFactory。</p><p><strong>抽象產品（Product）角色</strong></p><p>簡單工廠模式所創建的所有對象的父類，它負責描述所有實例所共有的公共接口。它一般是具體產品繼承的父類或者實現的接口。由接口或者抽象類來實現。如例中的CacheInterface接口。</p><p><strong>具體產品（Concrete Product）角色</strong></p><p>是簡單工廠模式的創建目標，所有創建的對象都是充當這個角色的某個具體類的實例。例如本文的MySQLCache和RedisCache。</p><p>在本例子中：</p><p><br></p><div class=pgc-img><img alt=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/390540d73b074d8282c5d5a8b5ec5d86><p class=pgc-img-caption></p></div><p><strong>優點</strong></p><ul><li>簡單工廠模式能夠根據外界給定的信息，決定應該創建哪個具體類的對象。</li><li>明確區分了各自的職責和權力，有利於整個軟件體系結構的優化。</li><li>調用者不需要知道具體實現，只要面向接口編程即可。</li></ul><p><strong>缺點</strong></p><ul><li>很明顯工廠類集中了所有實例的創建邏輯，違反高內聚的責任分配原則，如果有新類添加則需要去修改工廠類。</li><li>使用簡單工廠模式將會增加系統中類的個數，在一定程序上增加了系統的複雜度和理解難度。</li><li>簡單工廠模式由於使用了靜態工廠方法，造成工廠角色無法形成基於繼承的等級結構。</li></ul><p><strong>代碼</strong></p><p>CacheInterface.php 定義接口</p><pre><code>interface CacheInterface{    public function get($key);    public function set($key, $value);    public function exists($key);}</code></pre><p>MySQLCache.php MySQL的緩存實現</p><pre><code>class MySQLCache implements CacheInterface{    private $host;    private $user;    private $passwd;    public function __construct($host, $user, $passwd){        $this-&gt;host = $host;        $this-&gt;user = $user;        $this-&gt;passwd = $passwd;    }    public function get($key){        echo sprintf("MySQLCache host：%s user：%s passwd：%s get key：%s\n", $this-&gt;host, $this-&gt;user, $this-&gt;passwd, $key);    }    public function set($key, $value){        echo sprintf("MySQLCache host：%s user：%s passwd：%s set key：%s value：%s\n", $this-&gt;host, $this-&gt;user, $this-&gt;passwd, $key, $value);    }    public function exists($key){        echo sprintf("MySQLCache host：%s user：%s passwd：%s exists key：%s\n", $this-&gt;host, $this-&gt;user, $this-&gt;passwd, $key);    }}</code></pre><p>RedisCache.php Redis的緩存實現</p><pre><code>class RedisCache implements CacheInterface{    private $host;    private $auth;    /**     * RedisCache constructor.     * @param $host     * @param $auth     */    public function __construct($host, $auth){        $this-&gt;host = $host;        $this-&gt;auth = $auth;    }    public function get($key){        echo sprintf("RedisCache host：%s auth：%s get key：%s\n", $this-&gt;host, $this-&gt;auth, $key);    }    public function set($key, $value){        echo sprintf("RedisCache host：%s auth：%s set key：%s value：%s\n", $this-&gt;host, $this-&gt;auth, $key, $value);    }    public function exists($key){        echo sprintf("RedisCache host：%s auth：%s exists key：%s\n", $this-&gt;host, $this-&gt;auth, $key);    }}</code></pre><p>CacheFactory.php 工廠類</p><pre><code>class CacheFactory{    /**     * 驅動只要任何驅動實現了 CacheInterface 接口就可以在getDrive方法根據不同參數直接更換new的對象     * @param string $drive     * @return CacheInterface     * @throws \Exception     */    public static function getDrive(string $drive): CacheInterface{        if ($drive == 'r') {            return new RedisCache("127.0.0.1:6379","redisPasswd");        }        if ($drive == 'm') {            return new MySQLCache("localhost","root","mysqlPasswd");        }        throw new \Exception("找不到該類型的驅動");    }}</code></pre><p>代碼調用</p><pre><code>$cache = CacheFactory::getDrive('r');$cache-&gt;set("name", "sunny");輸出結果：RedisCache host：127.0.0.1:6379 auth：redisPasswd set key：name value：sunny</code></pre><p>代碼調用</p><pre><code>$cache = CacheFactory::getDrive('m');$cache-&gt;set("name", "sunny");輸出結果：MySQLCache host：localhost user：root passwd：mysqlPasswd set key：name value：sunny</code></pre><p>當哪天再新增 mongodb 驅動類型的緩存，只需要實現 CacheInterface 接口和修改CacheFactory工廠。</p><p>看完上面代碼如果還覺得對簡單工廠模式我們把上面代碼代入生活對公式裡面去了解一下。</p><p><br></p><div class=pgc-img><img alt=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f15a72bd96244c68a8ef54e17f1c41c3><p class=pgc-img-caption></p></div><pre><code>// 獲取3系車型$car = BMWFactory::getCar(3);// 獲取5系車型$car = BMWFactory::getCar(5);</code></pre><p>具體實現大家參考一下上面緩存對例子修改一個更貼近生活的案例，這樣更容易理解。</p><p>如果覺得文章還不錯，請把文章分享給更多的人學習，在文章中發現有誤的地方也希望各位指出更正。</p><p>更多經常文章關注微信公眾號：IT不是挨踢</p><p><br></p><div class=pgc-img><img alt=PHP進階教程-設計模式之簡單工廠模式（靜態工廠方法） onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/339d11ad5085429a817c67ec8bcb1b24><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>工廠</a></li><li><a>模式</a></li><li><a>PHP</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html alt=PHP進階教程-設計模式之建造者模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ef25f91086df41eca76e35ff3434b003 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html title=PHP進階教程-設計模式之建造者模式>PHP進階教程-設計模式之建造者模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html alt=PHP進階教程-設計模式之橋接模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html title=PHP進階教程-設計模式之橋接模式>PHP進階教程-設計模式之橋接模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html alt=PHP進階教程-設計模式之組合模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6f2acee37d624649ac7a592bfe5b29af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html title=PHP進階教程-設計模式之組合模式>PHP進階教程-設計模式之組合模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html alt=PHP進階教程-設計模式之裝飾器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8cbbfcfedd544572a62adc6df84d2e60 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html title=PHP進階教程-設計模式之裝飾器模式>PHP進階教程-設計模式之裝飾器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48a6b6a.html alt="5 PHP 設計模式系列「對象池模式（Object Pool）」" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/29c712d86aa04c48ad6b0d262ed8026e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48a6b6a.html title="5 PHP 設計模式系列「對象池模式（Object Pool）」">5 PHP 設計模式系列「對象池模式（Object Pool）」</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a0586cb.html alt=PHP進階教程-設計模式之適配器模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7c5019f7addc404d8c07f18f7dda0feb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a0586cb.html title=PHP進階教程-設計模式之適配器模式>PHP進階教程-設計模式之適配器模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1801773a.html alt="AI芯天下丨虛擬工廠 ，2025智能製造新路徑" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/9fc63c421a37451d950eb1efcde49091 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1801773a.html title="AI芯天下丨虛擬工廠 ，2025智能製造新路徑">AI芯天下丨虛擬工廠 ，2025智能製造新路徑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/70b7fdfb.html alt=新銳丨虛擬工廠，2025智能製造新路徑 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/Rw0wheGANJXrpx style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/70b7fdfb.html title=新銳丨虛擬工廠，2025智能製造新路徑>新銳丨虛擬工廠，2025智能製造新路徑</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html alt=虛擬製造：信息時代的全新制造模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/53f60001361786aae83a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html title=虛擬製造：信息時代的全新制造模式>虛擬製造：信息時代的全新制造模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3e5d8e2f.html alt=智慧工廠丨為工業生產植入“智慧大腦” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b206c786c22d4af0bd25865473308540 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3e5d8e2f.html title=智慧工廠丨為工業生產植入“智慧大腦”>智慧工廠丨為工業生產植入“智慧大腦”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/be4a0bec.html alt=遍佈中國汽車工廠之長城汽車，看中國品牌最先進工廠什麼樣？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/31f700027a1005bfb843 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/be4a0bec.html title=遍佈中國汽車工廠之長城汽車，看中國品牌最先進工廠什麼樣？>遍佈中國汽車工廠之長城汽車，看中國品牌最先進工廠什麼樣？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a198e2d8.html alt="PHP 超級全局變量—教程大全" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/39b600034ed511258ffb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a198e2d8.html title="PHP 超級全局變量—教程大全">PHP 超級全局變量—教程大全</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7cd733c.html alt=PHP基礎及實例 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/786c159d-c845-451f-b199-fbd90c81925a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7cd733c.html title=PHP基礎及實例>PHP基礎及實例</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9eb3d63.html alt=PHP實現各種經典算法詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15357595091626cf296dc3e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9eb3d63.html title=PHP實現各種經典算法詳解>PHP實現各種經典算法詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/740f5b7b.html alt=PHP怎麼實現分頁功能？（圖文+視頻教程） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e81c52a014dd4c34adcbfb26482bd690 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/740f5b7b.html title=PHP怎麼實現分頁功能？（圖文+視頻教程）>PHP怎麼實現分頁功能？（圖文+視頻教程）</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>