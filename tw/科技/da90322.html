<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ | æå®¢å¿«è¨Š</title><meta property="og:title" content="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/b05b4b9e4256491692f94a47e5c03297"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/da90322.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/da90322.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/da90322.html><meta property="article:published_time" content="2020-10-29T20:59:15+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:15+08:00"><meta name=Keywords content><meta name=description content="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/da90322.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><h1>å‰è¨€ï¼š</h1><p>Spring StateMachineæ¡†æ¶æ˜¯Spring.ioæä¾›çµ¦é–‹ç™¼è€…ä¸€ç¨®å¯ä»¥ç°¡åŒ–ç‹€æ…‹æ©Ÿå¯¦ç¾çš„éç¨‹ï¼Œè®“ç‹€æ…‹æ©Ÿçµæ§‹æ›´åŠ å±¤æ¬¡åŒ–ã€‚æœ¬æ¬¡ç‹€æ…‹æ©Ÿçš„å¯¦ç¾Showcaseä¸»è¦æ˜¯æ¨¡æ“¬ä¸€å€‹å•†å“è³¼è²·çš„å ´æ™¯ï¼Œå¾ä¸‹å–®åˆ°æ”¶è²¨é€™å€‹æ¥­å‹™æµç¨‹ä¸‹æ‰€æ¶‰åŠçš„äº‹ä»¶ã€ç‹€æ…‹ä¾†æè¿°Spring StateMachineå¦‚ä½•ä½¿ç”¨èˆ‡é‹ä½œã€‚</p><hr><h1>æ­£æ–‡ï¼š</h1><p>ä¸‹é¢è©³ç´°çš„ä»‹ç´¹æ•´å€‹å¯¦ç¾éç¨‹ï¼š</p><h1>1.å‰µå»ºåŸºæœ¬çš„springbooté …ç›®ä¸¦ä¸”æ·»åŠ ä¾è³´ï¼š</h1><p>å®Œæ•´çš„pomä¾è³´å¦‚ä¸‹ï¼š</p><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.3.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;statemachine&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;statemachine&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- statemachine --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt; &lt;artifactId&gt;spring-statemachine-core&lt;/artifactId&gt; &lt;version&gt;1.2.0.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.statemachine&lt;/groupId&gt; &lt;artifactId&gt;spring-statemachine-test&lt;/artifactId&gt; &lt;version&gt;1.2.0.RELEASE&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt;</pre><h1>2.æ ¹æ“šå ´æ™¯éœ€è¦ï¼Œè¨­è¨ˆäº‹ä»¶ã€ç‹€æ…‹çš„å°è±¡ï¼š</h1><p>äº‹ä»¶æšèˆ‰é¡</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/b05b4b9e4256491692f94a47e5c03297><p class=pgc-img-caption>Events</p></div><p>Events.javaå®Œæ•´ä»£ç¢¼å¦‚ä¸‹ï¼š</p><pre>package com.example.statemachine.enums;/** * @package: com.example.statemachine.enums * @description: äº‹ä»¶æšèˆ‰é¡ * @author: @ITè¬›å£‡ * @create: 2018-12-16 17:27 **/public enum Events { ORDERING, // ä¸‹è¨‚å–® PAY, // æ”¯ä»˜ä¸­ PAYED, // å·²æ”¯ä»˜ RECEIVE, // å¾…æ”¶è²¨ RECEIVED, // å·²æ”¶è²¨ FINISH // å®Œæˆæµç¨‹}</pre><p>ç‹€æ…‹æšèˆ‰é¡ï¼š</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/fd76b5335f7946898ddb0cc8c3656695><p class=pgc-img-caption>States</p></div><p>States.javaå®Œæ•´ä»£ç¢¼å¦‚ä¸‹ï¼š</p><pre>package com.example.statemachine.enums;/** * @package: com.example.statemachine.enums * @description: ç‹€æ…‹æšèˆ‰é¡ * @author: @ITè¬›å£‡ * @create: 2018-12-16 17:27 **/public enum States { MAKE_AN_ORDER, // ç”Ÿæˆè¨‚å–® UNPAID, // å¾…æ”¯ä»˜ PAYING, // æ”¯ä»˜ä¸­ PAYED, // å·²æ”¯ä»˜ WAITING_FOR_RECEIVE, // å¾…æ”¶è²¨ CUSTOMER_RECEIVED, // å·²æ”¶è²¨ DONE // è¨‚å–®çµæŸ}</pre><p><strong>èªªæ˜ï¼š</strong></p><p>äº‹ä»¶æœƒè§¸ç™¼ç‹€æ…‹çš„è½‰è®Šï¼Œä¾‹å¦‚ï¼šORDERINGäº‹ä»¶å¯ä»¥å‡ºç™¼ç‹€æ…‹å¾MAKE_AN_ORDERè½‰è®Šç‚ºUNPAIDï¼Œå¾Œé¢å°æ–¼StateMachineçš„é…ç½®ä¸Šå°‡æœƒé«”ç¾ã€‚</p><h1>3.å‰µå»ºStateMachineçš„é…ç½®é¡ï¼Œé€™å€‹é…ç½®é¡ä¹Ÿæ˜¯Spring Bootçš„è‡ªå‹•è£é…çš„å¿…å‚™ï¼Œä¹Ÿæ˜¯å¤§å®¶å¾xmlé…ç½®è½‰ç‚ºbeané…ç½®çš„æœ€ä¸é©æ‡‰çš„åœ°æ–¹</h1><p>StateMachineConfig.javaå®Œæ•´ä»£ç¢¼å¦‚ä¸‹ï¼š</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/9163657951af426894ce282bc9906eab><p class=pgc-img-caption>StateMachineConfig</p></div><pre>package com.example.statemachine.config;import com.example.statemachine.enums.Events;import com.example.statemachine.enums.States;import com.example.statemachine.persist.InMemoryStateMachinePersist;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.statemachine.config.EnableStateMachine;import org.springframework.statemachine.config.EnumStateMachineConfigurerAdapter;import org.springframework.statemachine.config.builders.StateMachineStateConfigurer;import org.springframework.statemachine.config.builders.StateMachineTransitionConfigurer;import org.springframework.statemachine.persist.DefaultStateMachinePersister;import org.springframework.statemachine.persist.StateMachinePersister;import java.util.EnumSet;/** * @package: com.example.statemachine.config * @description: ç‹€æ…‹æ©Ÿé…ç½®é¡ * @author: @ITè¬›å£‡ * @create: 2018-12-16 17:17 **/@Configuration@EnableStateMachine(name="stateMachine") //å¯ä»¥é€šéè¨­ç½®åç¨±ä¾†å®šç¾©è‹¥å¹²å€‹ç‹€æ…‹æ©Ÿçš„Configï¼Œä¸¦å¯ä»¥é€šéåˆ¶å®šç‹€æ…‹æ©Ÿé…ç½®åç¨±ä¾†ä½¿ç”¨åˆ¶å®šçš„ç‹€æ…‹æ©Ÿ @EnableStateMachine(name="testMachine")public class StateMachineConfig extends EnumStateMachineConfigurerAdapter&lt;States, Events&gt; { @Autowired private InMemoryStateMachinePersist inMemoryStateMachinePersist; @Bean(name = "myPersister") public StateMachinePersister&lt;States, Events, String&gt; getPersister() { return new DefaultStateMachinePersister&lt;&gt;(inMemoryStateMachinePersist); } /** * * @title åˆå§‹åŒ–ç‹€æ…‹æ©ŸåŠåˆå§‹ç‹€æ…‹ * * @description * * @see org.springframework.statemachine.config.AbstractStateMachineConfigurerAdapter#configure(org.springframework.statemachine.config.builders.StateMachineStateConfigurer) * @param states * @throws Exception */ @Override public void configure(StateMachineStateConfigurer&lt;States, Events&gt; states) throws Exception { states .withStates() .initial(States.MAKE_AN_ORDER) //åˆå§‹åŒ–ç‹€æ…‹ç‚ºUNPAID .states(EnumSet.allOf(States.class)); } /** * * @title äº‹ä»¶åŠç‹€æ…‹æµè½‰é…ç½® * * @description * * @see org.springframework.statemachine.config.AbstractStateMachineConfigurerAdapter#configure(org.springframework.statemachine.config.builders.StateMachineTransitionConfigurer) * @param transitions * @throws Exception */ @Override public void configure(StateMachineTransitionConfigurer&lt;States, Events&gt; transitions) throws Exception { transitions .withExternal() .event(Events.ORDERING) //ç•¶äº‹ä»¶ç‚ºORDERINGæ™‚ï¼Œæºç‹€æ…‹å¾MAKE_AN_ORDERè®Šç‚ºUNPAID .source(States.MAKE_AN_ORDER).target(States.UNPAID) .and() .withExternal() .event(Events.PAY) //ç•¶äº‹ä»¶ç‚ºPAYæ™‚ï¼Œæºç‹€æ…‹å¾UNPAIDè®Šç‚ºPAYING .source(States.UNPAID).target(States.PAYING) .and() .withExternal() .event(Events.PAYED) //ç•¶äº‹ä»¶ç‚ºPAYEDæ™‚ï¼Œæºç‹€æ…‹å¾PAYINGè®Šç‚ºPAYED .source(States.PAYING).target(States.PAYED) .and() .withExternal() .event(Events.RECEIVE) //ç•¶äº‹ä»¶ç‚ºRECEIVEæ™‚ï¼Œæºç‹€æ…‹å¾PAYEDè®Šç‚ºWAITING_FOR_RECEIVE .source(States.PAYED).target(States.WAITING_FOR_RECEIVE) .and() .withExternal() .event(Events.RECEIVED) //ç•¶äº‹ä»¶ç‚ºRECEIVEDæ™‚ï¼Œæºç‹€æ…‹å¾WAITING_FOR_RECEIVEè®Šç‚ºCUSTOMER_RECEIVED .source(States.WAITING_FOR_RECEIVE).target(States.CUSTOMER_RECEIVED) .and() .withExternal() .event(Events.FINISH) //ç•¶äº‹ä»¶ç‚ºFINISHæ™‚ï¼Œæºç‹€æ…‹å¾CUSTOMER_RECEIVEDè®Šç‚ºDONE .source(States.CUSTOMER_RECEIVED).target(States.DONE); }}</pre><p><strong>èªªæ˜ï¼š</strong></p><p>1)è¨»è§£ï¼š@Configurationå’Œ@EnableStateMachineï¼Œä¸€å€‹æ˜¯è¡¨æ˜æ­¤é¡ç‚ºä¸€å€‹Springçš„Beané…ç½®é¡ï¼Œå¦ä¸€å€‹å‰‡æ˜¯è¡¨æ˜ç•¶å‰çš„é…ç½®æ˜¯è¦å•Ÿç”¨ç‹€æ…‹æ©Ÿçš„è‡ªå‹•è£é…ã€‚</p><p>2)çˆ¶é¡EnumStateMachineConfigurerAdapter&lt;States,Events>ï¼Œç‚ºç‹€æ…‹æ©Ÿçš„è‡ªå‹•è£é…æä¾›è‡ªå®šç¾©çš„é…ç½®é‡å¯«ï¼Œéœ€è¦é‡å¯«configureæ–¹æ³•ã€‚</p><p>3)å¯ä»¥æš«æ™‚å¿½ç•¥æœ¬é¡ä¸­çš„é—œæ–¼ç‹€æ…‹æŒä¹…åŒ–çš„é…ç½®ï¼Œå› ç‚ºï¼Œé€™å€‹é…ä¸é…ä¸å½±éŸ¿ä¸€å€‹ç‹€æ…‹æ©ŸShowcaseçš„å¯¦ç¾ï¼Œä¾‹å¦‚ï¼šInMemoryStateMachinePersist</p><p>4)configure(StateMachineStateConfigurer&lt;States, Events> states)throws Exception æ–¹æ³•æ˜¯ç”¨ä¾†å®šç¾©ç‹€æ…‹æ©Ÿçš„åˆå§‹åŒ–ç‹€æ…‹ä»¥åŠæ‰€èƒ½åŒ…å«çš„ç‹€æ…‹é›†åˆã€‚</p><p>5)configure(StateMachineTransitionConfigurer&lt;States, Events> transitions)throws Exception æ–¹æ³•æ˜¯ç”¨ä¾†å®šç¾©ç‹€æ…‹æ©Ÿç”±å“ªäº›äº‹ä»¶å°è‡´ç‹€æ…‹å¾å“ªå€‹ç‹€æ…‹é·ç§»åˆ°å“ªå€‹ç‹€æ…‹ï¼Œå…¶ä¸­å‘½åä¸­æˆ‘å€‘å¾ˆå®¹æ˜“ç†è§£æ¯ä¸€å€‹é·ç§»å‹•ä½œï¼Œsourceæ˜¯æºç‹€æ…‹ï¼Œtargetæ˜¯ç›®æ¨™ç‹€æ…‹ï¼Œeventç‚ºè§¸ç™¼äº‹ä»¶ã€‚</p><h1>4.é…ç½®äº‹ä»¶è™•ç†è€…ï¼Œç”¨æ–¼ç›£è½ç‹€æ…‹è®ŠåŒ–ï¼Œå…è¨±ç•¶ç‹€æ…‹ç™¼ç”Ÿè®ŠåŒ–æ™‚å‰‡åŸ·è¡Œå°æ‡‰çš„æ–¹æ³•ä¾†é€²è¡Œç›¸é—œæ¥­å‹™è™•ç†</h1><p>EventProcessor.java:</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1f581051a90141c396e16abf1d2849f0><p class=pgc-img-caption>EventProcessor</p></div><pre>package com.example.statemachine.handle;import lombok.extern.slf4j.Slf4j;import org.springframework.statemachine.annotation.OnTransition;import org.springframework.statemachine.annotation.WithStateMachine;/** * @package: com.example.statemachine.handle * @description: äº‹ä»¶è™•ç†é¡ * @author: @ITè¬›å£‡ * @create: 2018-12-17 09:17 **/@WithStateMachine@Slf4jpublic class EventProcessor{ /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”1.å‰µå»ºè¨‚å–® * * @description ç•¶ç‹€æ…‹ç‚ºMAKE_AN_ORDERï¼Œä¸¦è½‰ç‚ºUNPAIDç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransition(source="MAKE_AN_ORDER",target = "UNPAID") public void makeAnOrder() { log.info("è¨‚å–®å·²å‰µå»ºï¼Œç­‰å¾…ç”¨æˆ¶æ”¯ä»˜"); } /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”6.å®Œæˆè¨‚å–® * * @description ç•¶ç‹€æ…‹ç‚ºRECEIVEDï¼Œä¸¦è½‰ç‚ºDONEç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransition(source = "CUSTOMER_RECEIVED", target = "DONE") public void finishOrder() { log.info("è¨‚å–®æµç¨‹å·²å®Œæˆ"); }}</pre><p>EventProcessor2.java</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/22cd636671d4462cb0b167cfe72a71b9><p class=pgc-img-caption>EventProcessor2</p></div><pre>package com.example.statemachine.handle;import lombok.extern.slf4j.Slf4j;import org.springframework.statemachine.annotation.OnTransition;import org.springframework.statemachine.annotation.OnTransitionEnd;import org.springframework.statemachine.annotation.OnTransitionStart;import org.springframework.statemachine.annotation.WithStateMachine;/** * @package: com.example.statemachine.handle * @description: äº‹ä»¶è™•ç†é¡ * @author: @ITè¬›å£‡ * @create: 2018-12-17 09:17 **/@WithStateMachine@Slf4jpublic class EventProcessor2 { /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”2.é–‹å§‹æ”¯ä»˜ * * @description ç•¶ç‹€æ…‹ç‚ºUNPAIDï¼Œä¸¦è½‰ç‚ºPAYINGç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransitionStart(source = "UNPAID", target = "PAYING") public void paying() { log.info("ç”¨æˆ¶æ”¯ä»˜ä¸­....."); } /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”3.å®Œæˆæ”¯ä»˜ * * @description ç•¶ç‹€æ…‹ç‚ºPAYINGï¼Œä¸¦è½‰ç‚ºPAYEDç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransition(source = "PAYING", target = "PAYED") public void payed() { log.info("ç”¨æˆ¶å®Œæˆæ”¯ä»˜"); } /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”ä¸¦è¡Œ 4.1.æ”¶åˆ°æ”¯ä»˜æˆåŠŸçŸ­ä¿¡ * * @description ç•¶ç‹€æ…‹ç‚ºPAYEDï¼Œä¸¦è½‰ç‚ºWAITING_FOR_RECEIVEç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransitionEnd(source = "PAYED", target = "WAITING_FOR_RECEIVE") public void syncNotifyFromSMS() { log.info("æ”¶åˆ°ç”¨æˆ¶æ”¯ä»˜æˆåŠŸçŸ­ä¿¡ï¼Œæº–å‚™ç™¼è²¨"); } /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”ä¸¦è¡Œ 4.2.ç™¼è²¨ä¸­ * * @description ç•¶ç‹€æ…‹ç‚ºPAYEDï¼Œä¸¦è½‰ç‚ºWAITING_FOR_RECEIVEç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransitionEnd(source = "PAYED", target = "WAITING_FOR_RECEIVE") public void waitingForReceive() { log.info("ç­‰å¾…ç”¨æˆ¶ç°½æ”¶è²¨å“......"); } /** * * @title è‡ªå®šç¾©äº‹ä»¶åŸ·è¡Œæ–¹æ³•â€”â€”5.ç”¨æˆ¶å®Œæˆæ”¶è²¨ * * @description ç•¶ç‹€æ…‹ç‚ºWAITING_FOR_RECEIVEï¼Œä¸¦è½‰ç‚ºRECEIVEDç‹€æ…‹å°±åŸ·è¡Œæ­¤æ–¹æ³• * */ @OnTransitionEnd(source = "WAITING_FOR_RECEIVE", target = "CUSTOMER_RECEIVED") public void received() { log.info("ç”¨æˆ¶å·²ç°½æ”¶è²¨å“"); }}</pre><p><strong>èªªæ˜:</strong></p><p>å…¶å¯¦ä¸€å€‹EventProcessoré¡å°±å¯ä»¥å®Œæˆéœ€è¦çš„è™•ç†ï¼Œä½†ç‚ºä»€éº¼è¦é€™è£¡è¦åˆ†æˆå…©å€‹Processoré¡ä¾†å¯¦ç¾ï¼Œä¸»è¦åŸå› å°±æ˜¯æƒ³ç°¡å–®è¨­è¨ˆä¸€ä¸‹å°æ–¼è™•ç†éç¨‹çš„æŠ½è±¡ï¼ŒæŠŠé–‹å§‹èˆ‡çµæŸæ”¾åœ¨ä¸€å€‹é¡ä¸­ï¼Œå…·é«”éç¨‹æ”¾åœ¨å¦å¤–ä¸€å€‹é¡ä¸­ï¼›æ­¤é¡æœ‰å¹¾é»éœ€è¦æ³¨æ„ï¼š</p><p>1)è¨»è§£@WithStateMachineï¼Œå®šç¾©æ­¤é¡ç‚ºä¸€å€‹ç‹€æ…‹ç›£è½è€…ï¼Œ@OnTransition(source="",target = "")ï¼Œä¸»è¦æ˜¯å®šç¾©ä¸€å€‹æ–¹æ³•çš„åŸ·è¡Œæ™‚æ©Ÿï¼Œä¹Ÿå°±æ˜¯ç•¶æºç‹€æ…‹æ˜¯Aï¼Œç›®æ¨™ç‹€æ…‹æ˜¯Bæ™‚ï¼Œå‰‡åŸ·è¡Œé€™å€‹æ–¹æ³•</p><p>2) ILogæ¥å£ï¼Œé€™å€‹æ¥å£æ˜¯è‡ªå·±ç‚ºäº†æ–¹ä¾¿æ‰“å°æ—¥èªŒï¼Œè‡ªå·±å°è£çš„ä¸€å€‹Logback loggerçš„Handlerï¼Œå°æ–¼ç‹€æ…‹æ©Ÿçš„showcaseæ²’æœ‰å½±éŸ¿ï¼Œå„ä½å¯ä»¥ç›´æ¥å¿½ç•¥ã€‚</p><h1>5.æœ€å¾Œå‰µå»ºä¸»å…¥å£é¡ä¾†å®Œæˆæ•´å€‹Showcaseçš„æµç¨‹</h1><p>StateMachineApplication.java</p><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/730c61941d3242c48d33f5ef2e2c6afe><p class=pgc-img-caption>StateMachineApplication</p></div><pre>package com.example.statemachine;import com.example.statemachine.enums.Events;import com.example.statemachine.enums.States;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.CommandLineRunner;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.statemachine.StateMachine;import org.springframework.statemachine.persist.StateMachinePersister;import javax.annotation.Resource;@SpringBootApplication@Slf4jpublic class StatemachineApplication implements CommandLineRunner { @Value("${spring.application.name}") private String proName; /** ç‹€æ…‹æ©Ÿå°è±¡ */ @Resource //ä½¿ç”¨åˆ¶å®šçš„ç‹€æ…‹æ©Ÿé…ç½®é€²è¡Œæ³¨å…¥ï¼Œä¾‹å¦‚ï¼š@Resource(name="testMachine"); é€™æ¨£å¯ä»¥æœ‰å¤šå€‹ç‹€æ…‹æ©Ÿå¯¦ä¾‹ private StateMachine&lt;States, Events&gt; stateMachine; /** ç‹€æ…‹æ©ŸæŒä¹…åŒ– */ @Autowired private StateMachinePersister&lt;States, Events, String&gt; persist; public static void main(String[] args) { SpringApplication.run(StatemachineApplication.class, args); } /** * * @title äº‹ä»¶é©…å‹•æ¥­å‹™æµç¨‹ä¸»æ§æ–¹æ³• * * @description * 1.å•Ÿå‹•ç‹€æ…‹æ©Ÿ * 2.ç™¼é€äº‹ä»¶ * 3.å°‡æŸä¸€äº‹ä»¶é€²è¡ŒæŒä¹…åŒ– * 4.æ‰“å°ç‹€æ…‹æ©Ÿçš„ç•¶å‰ç‹€æ…‹ * 5.å–å›è¢«æŒä¹…åŒ–çš„ç‹€æ…‹ä¸¦æ‰“å°  * * * @see org.springframework.boot.CommandLineRunner#run(java.lang.String[]) * @param args * @throws Exception */ @Override public void run(String... args) throws Exception { log.info("==========================================Project name : {}" , proName); stateMachine.start(); stateMachine.sendEvent(Events.ORDERING); stateMachine.sendEvent(Events.PAY); stateMachine.sendEvent(Events.PAYED); persist.persist(stateMachine, "MyRegion"); log.info("Store the state in MyRegion ================1: {}",stateMachine.getState().getId()); stateMachine.sendEvent(Events.RECEIVE); stateMachine.sendEvent(Events.RECEIVED); stateMachine.sendEvent(Events.FINISH); log.info("The state Now ================2: {}",stateMachine.getState().getId()); persist.restore(stateMachine, "MyRegion"); log.info("Restore the state from MyRegion ================3: {}",stateMachine.getState().getId()); }}</pre><p><strong>èªªæ˜ï¼š</strong></p><p>åœ¨runæ–¹æ³•ä¸­ï¼Œå®šç¾©äº†æµç¨‹çš„é©…å‹•è™•ç†éç¨‹ï¼Œå…¶ä¸­start()æ˜¯æ ¹æ“šä¹‹å‰çš„å®šç¾©è§¸ç™¼ç‹€æ…‹æ©Ÿå•Ÿå‹•é€™å€‹è¨‚å–®æµç¨‹ï¼Œä¸¦ä¸€æ­¥æ­¥çš„sendEventä¾†æŒçºŒé©…å‹•ï¼Œç›´è‡³æœ€çµ‚çš„FINISHäº‹ä»¶ç™¼å‡ºã€‚</p><p>æ³¨æ„å¹¾é»ï¼š</p><p>1)persist.persistå’Œpersist.restoreé€™å…©å€‹æ–¹æ³•èª¿ç”¨æ˜¯é—œæ–¼æŒä¹…åŒ–å’Œç²å–é€™å€‹æµç¨‹ç‹€æ…‹çš„ï¼Œå¯ä»¥ä¸ç”¨é—œå¿ƒï¼Œé™¤éæƒ³äº†è§£å¦‚ä½•æŒä¹…åŒ–ç‹€æ…‹æ©Ÿå…§ç¬æ™‚ç‹€æ…‹åŠç‹€æ…‹ç²å–çš„ã€‚</p><p>2)ç›´æ¥é‹è¡Œé€™å€‹Mainå‡½æ•¸ã€JUnitæˆ–ä½¿ç”¨mavenå®¢æˆ¶ç«¯ä¾†åŸ·è¡Œspring boot cliå‘½ä»¤ï¼Œä¾‹å¦‚ï¼š clean compile spring-boot:run</p><p>è‡³æ­¤ï¼Œå°±å®Œæˆäº†ä¸€å€‹æ¨¡æ“¬è¨‚å–®ä¸‹å–®å ´æ™¯çš„ç‹€æ…‹æ©Ÿé©…å‹•éç¨‹çš„Showcaseã€‚</p><h1>6.é©—è­‰</h1><div class=pgc-img><img alt="SpringBoot é›†æˆStateMachineå¯¦ç¾ç‹€æ…‹æ©Ÿ" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/73b2bf94197d40138c2bb3e2440d508b><p class=pgc-img-caption>é©—è­‰</p></div><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºå„å€‹ç‹€æ…‹ä¹‹é–“çš„è®ŠåŒ–ï¼Œå¾ˆæ¸…æ™°äº†ã€‚å¦‚æœå„ä½åŒå­¸é‚„æœ‰ä¸æ˜ç™½çš„åœ°æ–¹å¯ä»¥ç§ä¿¡å›è¦†å“ˆï¼ŒåŒæ™‚å¦‚æœæœ‰ä¸å°çš„åœ°æ–¹ï¼Œæ­¡è¿å„ä½å°å¤¥ä¼´æ‰¹è©•æŒ‡æ•™ã€‚</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>SpringBoot</a></li><li><a>StateMachine</a></li><li><a>å¯¦ç¾</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html alt=å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹” class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/dc38450079574dd685472184b5fa06f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4dcbf00d.html title=å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹”>å¦‚ä½•ä¾†å¯¦ç¾SpringBootæ‡‰ç”¨çš„JPAæ•¸æ“šæŒä¹…åŒ–å’Œç†±æ’æ‹”</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html alt=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RkPMb9G6tipobr style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html title=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢>å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html alt=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/44c014a1.html title=SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹>SpringBootäº‹å‹™è©³ç´°ç°¡ä»‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html alt=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb044d821f74107a3fd9119fc34c642 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html title=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§>[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html alt="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html title="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†">ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e41fd8de.html alt="æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e41fd8de.html title="æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›">æ’«é †å„é …é˜²æ±›å·¥ä½œå¯¦ç¾â€œå…­åˆ°ä½â€ ç¢ºä¿å…¨å¸‚å®‰å…¨åº¦æ±›</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f22ee5ad.html alt="Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f22ee5ad.html title="Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬">Redis è¨­è¨ˆèˆ‡å¯¦ç¾ : Lua è…³æœ¬</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/56e2a065.html alt=é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/50ab0003166decded7e4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/56e2a065.html title=é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡>é€™ä½å¤§å”åœ¨éš¨æ©Ÿçš„å½©ç¥¨ä¸Šå¯¦ç¾äº†90%çš„ä¸­çç‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html alt="Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9d3b0e55813d46b4982ae7d9b81d1802 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html title="Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½">Java å¤šæ…‹çš„å¯¦ç¾æ©Ÿåˆ¶ï¼Œçœ‹äº†éƒ½èªªå¥½</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d0662f03.html alt="å»£è¥¿éµè·¯å‡ºæµ·å¤§é€šé“ å…¨é¢å¯¦ç¾é›»æ°£åŒ–é‹ç‡Ÿ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d0662f03.html title="å»£è¥¿éµè·¯å‡ºæµ·å¤§é€šé“ å…¨é¢å¯¦ç¾é›»æ°£åŒ–é‹ç‡Ÿ">å»£è¥¿éµè·¯å‡ºæµ·å¤§é€šé“ å…¨é¢å¯¦ç¾é›»æ°£åŒ–é‹ç‡Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c78a6fe2.html alt=HashMapçš„åº•å±¤å¯¦ç¾ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0f9ffe95e10e4ff5804a8fd9cf591cfc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c78a6fe2.html title=HashMapçš„åº•å±¤å¯¦ç¾>HashMapçš„åº•å±¤å¯¦ç¾</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7c3d9f70.html alt=æ–°ç©çš„æ··åˆææ–™æˆ–æœ‰åŠ©æ–¼å¯¦ç¾é«˜æ•ˆçš„ä¸‹ä¸€ä»£é¡¯ç¤ºå™¨ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/47050004da4f36dcec1b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7c3d9f70.html title=æ–°ç©çš„æ··åˆææ–™æˆ–æœ‰åŠ©æ–¼å¯¦ç¾é«˜æ•ˆçš„ä¸‹ä¸€ä»£é¡¯ç¤ºå™¨>æ–°ç©çš„æ··åˆææ–™æˆ–æœ‰åŠ©æ–¼å¯¦ç¾é«˜æ•ˆçš„ä¸‹ä¸€ä»£é¡¯ç¤ºå™¨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8d93e49d.html alt=æ•™ç¨‹ï¼šæ¡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å¯¦ç¾ç·šæ€§è¿´æ­¸ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1537162000876f4501fb1c4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8d93e49d.html title=æ•™ç¨‹ï¼šæ¡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å¯¦ç¾ç·šæ€§è¿´æ­¸ï¼>æ•™ç¨‹ï¼šæ¡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å¯¦ç¾ç·šæ€§è¿´æ­¸ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e8e17d90.html alt=é‡è¦çªç ´ï¼ä¸­åœ‹ç§‘å­¸å®¶å¯¦ç¾åŸºåº•ç´°èƒç™Œ4.1ç§’äººå·¥æ™ºèƒ½ç²¾æº–è­˜åˆ¥ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RtbWBYL9koJMmN style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e8e17d90.html title=é‡è¦çªç ´ï¼ä¸­åœ‹ç§‘å­¸å®¶å¯¦ç¾åŸºåº•ç´°èƒç™Œ4.1ç§’äººå·¥æ™ºèƒ½ç²¾æº–è­˜åˆ¥>é‡è¦çªç ´ï¼ä¸­åœ‹ç§‘å­¸å®¶å¯¦ç¾åŸºåº•ç´°èƒç™Œ4.1ç§’äººå·¥æ™ºèƒ½ç²¾æº–è­˜åˆ¥</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1b218e68.html alt=åœ–åƒæ‹¼æ¥ç®—æ³•åŠå¯¦ç¾ï¼ˆä¸€ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1534489824878547eee8fc2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1b218e68.html title=åœ–åƒæ‹¼æ¥ç®—æ³•åŠå¯¦ç¾ï¼ˆä¸€ï¼‰>åœ–åƒæ‹¼æ¥ç®—æ³•åŠå¯¦ç¾ï¼ˆä¸€ï¼‰</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>