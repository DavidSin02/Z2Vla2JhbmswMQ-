<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>JavaScript正則表達式詳細總結 | 极客快訊</title><meta property="og:title" content="JavaScript正則表達式詳細總結 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/6cd0893b009045c794771d55a21a19a6"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/de5a6f15.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/de5a6f15.html><meta property="article:published_time" content="2020-11-14T21:07:13+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:13+08:00"><meta name=Keywords content><meta name=description content="JavaScript正則表達式詳細總結"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/de5a6f15.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>JavaScript正則表達式詳細總結</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><blockquote><p>點擊右上方紅色按鈕關注“web秀”，讓你真正秀起來</p></blockquote><h1><strong>前言</strong></h1><p>作為一名程序猿，對正則表達式一定不會很陌生，但在平時開發中有時依然會遇到這樣或那樣的問題。本文從基礎出發，本著讓初學者入門，高手溫故的初衷，相對系統性的介紹正了則相關知識。如有不準確的地方，歡迎吐槽</p><p>本文僅介紹 javascript 語言中的正則，其他語言雖有不同，但很類似，感興趣的自行google吧。另外本文針對所有示例都給了輸出結果，希望讀者思考為什麼返回這樣的結果，和自己期望的有什麼不一樣，建議自己也動手輸入一下，加深記憶。</p><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6cd0893b009045c794771d55a21a19a6><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>本文總體分兩部分：基礎知識</strong> 和 <strong>案例分析</strong></p><hr><h1><strong>第一部分 基礎知識</strong></h1><hr><p><strong>一、正則申明方式</strong></p><p><strong>1、構造函數方式</strong></p><pre> var reg = new RegExp('\d', 'gi');</pre><ul><li>通過 new 構造一個正則表達式對象，其中第一個參數 '\d' 是正則內容，第二個參數 'gi' 是修飾符。兩個參數皆為字符串類型</li><li>修飾符的作用是對匹配過程進行限定</li><li>修飾符有三種：i, g, m，可以同時出現，沒有順序（即 gi 與 ig 一樣），請參考下方說明</li></ul><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/e517993323d844d8b8cb3046d358970b><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>說明：</strong></p><ul><li>[a-z] 表示從小寫字母a到小寫字母z之間的任意字符(含a和z)，下文會有詳細說明</li><li>+ 表示至少出現一次</li><li>\n 在js中表示換行</li><li>^[a-z] 表示以任意小寫字母開頭的行</li></ul><pre> 'aBcd efg'.match(/[a-z]+/); // ["a"] 'aBcd efg'.match(/[a-z]+/i); // ["aBcd"] 'aBcd efg'.match(/[a-z]+/g); // ["a", "cd", "efg"] 'aBcd efg'.match(/[a-z]+/gi); // ["aBcd", "efg"] 'aB\ncd\n efg'.match(/^[a-z]+/m); // ["a"] 'aB\ncd\n efg'.match(/^[a-z]+/g); // ["a"] 'aB\ncd\n efg'.match(/^[a-z]+/gm); // ["a", "cd"] // 注意不是 ["a", "cd", "efg"]</pre><p>具體用法請看下文相關的示例</p><p><strong>2、字面量方式</strong></p><p>相比較上一種方式，這一種更為常見，上面示例也都使用了這種方式</p><pre> var reg = /\d/gi;</pre><p><strong>兩個斜線內為正則的內容，後面可以跟修飾符，與第一種構造函數方式相比更簡潔，缺點是正則內容不能拼接，對於大多數場景倆說足夠了</strong></p><p><strong>二、正則相關符號</strong></p><p><strong>1、方括號 [] 用法</strong></p><p>用於查找方括號內的任意字符：</p><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/082640aef37b49b6b5ef4a453c034708><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>注意：</strong></p><p><strong>1）^ 在 [] 內開始位置及正則雙斜線開始位置有特殊含義，其他位置表示 ^ 字符本身</strong></p><ul><li>// 正則開頭位置表示以某某開頭的字符串，如下表示以大寫或小寫字母開頭的且連續為字母的字符串：</li></ul><pre> 'adobe 2016'.match(/^[a-zA-Z]+/); // ["adobe"]</pre><ul><li>在正則 <strong>或</strong> 匹配中(即 | 匹配)，表示 <strong>或者以某某字符開始的字符串</strong>，如下表示匹配 <em>連續數字</em> 或 <em>以小寫字母開頭且連續為小寫字母的字符串</em>，所以返回結果包含2016 和 adobe，注意返回結果不是 ["2016", "adobe"]</li></ul><pre> 'adobe2016ps'.match(/\d+|^[a-z]+/g); // ["adobe", "2016"]</pre><ul><li>在 [] 內開始位置時，表示不匹配 [] 內除 ^ 以外的所有字符：</li></ul><pre> 'adobe'.match(/[^abc]/g); // ["d", "o", "e"]</pre><p><strong>注：</strong> $ 與 ^ 的前兩個用法相似，只不過匹配的是以某某字符<strong>結尾</strong>的字符串，舉例：</p><pre> 'adobe 2016'.match(/\d+|[a-z]+$/g); // ["2016"] 'adobe'.match(/\d+|[a-z]+$/g); // ["adobe"]</pre><p><strong>2）- (連字符)表示左邊字符的 ASCII 值到右邊字符 ASCII 編碼值之間及左右字符自身的所有字符</strong></p><pre> 'adobe PS 2016'.match(/[a-g]/g); // ["a", "d", "b", "e"]</pre><p><strong>3）- 連字符左側的字符對應的 ASCII 值一定要小於或等於右側的字符，否則會報語法錯誤</strong></p><pre> 'adobe'.match(/[z-a]/); // Uncaught SyntaxError: Invalid regular expression: /[z-a]/: Range out of order in character class...</pre><p><strong>4）如果希望對連字符 - 本身進行匹配，需要用反斜線轉義</strong></p><pre> 'adobe-2016'.match(/[a-g\-]/g); // ["a", "d", "b", "e", "-"]</pre><p><strong>5）查看 ASCII 表就會發現，大寫字母的 ASCII 值是小於小寫字母的，因此下面用法會報語法錯誤</strong></p><pre> 'adobe-2016'.match(/[a-Z]/g); // Uncaught SyntaxError: Invalid regular expression: /[a-Z]/: Range out of order in character ...</pre><p>那麼問題來了，如果要表示所有字母，不區分大小寫怎麼辦呢？其實有兩種方式：</p><p><strong>A、第一種是使用修飾符 i</strong>，前面提到過。舉例：</p><pre> 'adobe-PS'.match(/[a-z]/gi); // ["a", "d", "o", "b", "e", "P", "S"]</pre><p><strong>B、第二種是在正則中明確指明大小寫字母</strong>，舉例：</p><pre> 'adobe-PS'.match(/[a-zA-Z]/g); // ["a", "d", "o", "b", "e", "P", "S"]</pre><p>返回結果跟第一種一樣。當然這個例子有些特殊：匹配了所有大小寫字母。當只匹配部分大小寫字母的時候只能使用第二種方式，在此就不做示例了，讀者可以自己測試</p><p><strong>6）匹配大小字母不能寫成 [A-z]，雖然不會報語法錯誤，但隱式的放大了匹配範圍，查看 ASCII 會發現，在大寫字母 Z 到小寫字母 a 之間還有 [、 \、 ]、 ^、 _、 ` 這6個字符，因此不能這麼寫。</strong></p><p><strong>7）想必有同學會問， \w 不也可以匹配字母麼？是的，\w 確實可以匹配字母，但跟上面說的一樣,也隱式的放大了匹配範圍，\w 除了匹配大小字母外還匹配了數字和下劃線，即 \w 與 [A-Za-z0-9_] 等價，當然 A-Z、a-z、0-9(等價於\d)、_這四組沒順序之分</strong></p><p><strong>2、特殊含義字符</strong></p><ul><li><strong>. 匹配任意單個字符，除換行和結束符</strong></li></ul><pre> '1+0.2*2=1.4'.match(/.{2}/g); // ["1+", "0.", "2*", "2=", "1."]</pre><ul><li><strong>\w 匹配任意單詞字符（數字、字母、下劃線），等價於[A-Za-z0-9_]</strong></li></ul><pre> 'ad34~!@$ps'.match(/\w/g); // ["a", "d", "3", "4", "p", "s"]</pre><ul><li><strong>\W 匹配任意單詞字符，與\w相反，等價於[^A-Za-z0-9_]</strong></li></ul><pre> 'ad34~!@$ps'.match(/\W/g); // ["~", "!", "@", "$"]</pre><ul><li><strong>\d 匹配數字，等價於 [0-9]</strong></li></ul><pre> 'ps6'.match(/\d/g); // ["6"]</pre><ul><li><strong>\D 匹配非數字，等價於 [0-9]</strong></li></ul><pre> 'ps6'.match(/\D/g); // ["p", "s"]</pre><ul><li><strong>\s 匹配空白字符，主要有(\n、\f、\r、\t、\v)，注意'a\sb'中的\s依然是字符s，所以'a\sb'.match(/\s/g)返回 null</strong></li></ul><pre> 'adobe ps'.match(/\s/g); // [" "]</pre><ul><li><strong>\S 匹配非空白字符，與\s相反</strong></li></ul><pre> 'adobe ps'.match(/\S/g); // ["a", "d", "o", "b", "e", "p", "s"]</pre><ul><li><strong>\b 匹配單詞邊界，注意連續的數字、字母或下劃線組成的字符串會認為一個單詞</strong></li></ul><pre> 'adobe(2016) ps6.4'.match(/\b(\w+)/g); // ["adobe", "2016", "ps6", "4"]</pre><ul><li><strong>\B 匹配非單詞邊界，仔細體會下面的示例與\b的結果</strong></li></ul><pre> 'adobe(2016) ps6.4'.match(/\B(\w+)/g); // ["dobe", "016", "s6"]</pre><ul><li><strong>\0 匹配NUL字符</strong></li></ul><pre> '\0'.match(/\0/); // ["NUL"]</pre><ul><li><strong>\n 匹配換行符（編碼：10，newline）</strong></li></ul><pre> 'adobe\nps'.match(/\n/).index; // 5</pre><ul><li><strong>\f 匹配換頁符</strong></li></ul><pre> 'adobe\fps'.match(/\f/).index; // 5</pre><ul><li><strong>\r 匹配回車符（編碼：13，return）</strong></li></ul><pre> 'adobe\rps'.match(/\r/).index; // 5</pre><ul><li><strong>\t 匹配製表符，鍵盤tab對應的字符</strong></li></ul><pre> 'adobe\tps'.match(/\t/).index; // 5</pre><ul><li><strong>\v 匹配垂直製表符</strong></li></ul><pre> 'adobe\vps'.match(/\v/).index; // 5</pre><ul><li><strong>xx 匹配以八進制數xxx規定的字符</strong></li></ul><pre> 'a'.charCodeAt(0).toString(8); // "141" 'adobe ps'.match(/\141/g); // ["a"]</pre><ul><li><strong>dd 匹配以十六進制數dd規定的字符</strong></li></ul><pre> 'a'.charCodeAt(0).toString(16); // "61" 'adobe ps'.match(/61/g); // ["a"]</pre><ul><li><strong>\uxxxx 匹配以十六進制數xxxx規定的 Unicode字符，注意位數不夠需要補0</strong></li></ul><pre> 'a'.charCodeAt(0).toString(16); // "61" 'adobe ps'.match(/\u0061/g); // ["a"]</pre><p><strong>注意</strong>：</p><blockquote><p>window系統回車換行符為\r\n，linux系統下沒有\r，linux系統通過vi編輯器打開window系統的文本文件時候，經常在行尾出現^M符號，也就是\r的原因，解析文本的時候需要注意相關判斷。</p></blockquote><p><strong>3、量詞說明</strong></p><ul><li><strong>n+ 匹配包含至少一個n的字符串</strong></li></ul><pre> 'adobe paas'.match(/a+\w+/g); // ["adobe", "aas"]</pre><ul><li><strong>n* 匹配包含零個或多個n的字符串</strong></li></ul><pre> 'ab3 aa12bb'.match(/a*\d+/g); // ["3", "aa12"]</pre><ul><li><strong>n? 匹配包含零個或一個n的字符串</strong></li></ul><pre> 'ab3 aa12bb'.match(/a?\d+/g); // ["3", "a12"]</pre><ul><li><strong>n{x} 匹配包含連續x個n的字符串</strong></li></ul><pre> 'ab3 aa12bb aaa34'.match(/a{2}\d+/g); // ["aa12", "aa34"]</pre><ul><li><strong>n{x,y} 匹配包含至少連續x個且最多連續y個n的字符串</strong></li></ul><pre> 'a3 aaa12bb aaaaaaa34'.match(/a{2,4}\d+/g); // ["aaa12", "aaaa34"]</pre><ul><li><strong>n{x,} 匹配包含至少連續x個n的字符串</strong></li></ul><pre> 'a3 aaa12bbaa4'.match(/a{2,}\d+/g); // ["aaa12", "aa4"]</pre><p>由上可知，以下 <em>表達式1</em> 與 <em>表達式2</em> 等價</p><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/3b81b06f9f4847818cd360de4cacdd8d><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>4、符號說明</strong></p><p>符號 {}、^、$、*、+、?、[]、[^]、- 已經在前面介紹過，接下來看下其他特殊字符</p><ul><li><strong>a|b 匹配包含a或b的字符串</strong></li></ul><pre> 'adobe ps13'.match(/([a-g]+l\d+)/g); // ["ad", "be", "13"]</pre><ul><li><strong>/ 字面量方式申明正則時的界定符</strong></li></ul><pre> 'adobe'.match(/\w+/); // ["adobe"]</pre><ul><li><strong>\ 普通反斜線字符</strong></li></ul><pre> 'a\\dobe'.match(/\\/); // ["\"]</pre><p><strong>5、小括號 () 用法</strong></p><p><strong>正則在非全局(g)模式下，通過match方式，返回的數組第一個值整體匹配的字符串，其他值為通過括號分組匹配到的</strong></p><p><strong>1）捕獲用法</strong></p><ul><li><strong>表示對匹配的字符串進行分組</strong></li></ul><pre> 'adobe cs9cs10, adobe cs11'.match(/([a-z]+\d+)+/); // ["cs9cs10", "cs10"] // 注意{2,}是對 括弧內的匹配 的描述</pre><ul><li><strong>與|一起使用表示選擇性</strong></li></ul><pre> "he is 12. she is 13. it's box".match(/(it|she|he)\s+is/g); // ["he is", "she is"]</pre><ul><li><strong>表示對匹配的字符串捕獲</strong></li></ul><pre> 'adobe cs9'.match(/[a-z]+\d+/); // ["cs9"] 'adobe cs9'.match(/[a-z]+(\d+)/); // ["cs9", "9"]</pre><ul><li><strong>表示對匹配的字符串反向引用，引用從 \1 開始，從正則左側第一個左括號（當然要是閉合的括號才行）開始計算，每多一對括號，引用數加一，在非捕獲情況下不會加一。但正則比較複雜時，減少引用可以提升匹配性能，關於 非捕獲 下方會詳細介紹</strong></li></ul><p><strong>引用的結果可以通過 構造函數 RegExp 獲取，即 RegExp.$1一直到 RegExp.$9</strong></p><pre> 'Can you can a can as a canner can can a can?'.match(/([cC]an+)\s+\1/g); // ["can can"] // 注意 `\1` 等價於正則裡的 `([a-z]+)`，即與下面示例相同 'Can you can a can as a canner can can a can?'.match(/[cC]an+\s+[cC]an+/g); // ["can can"] // 如果把括弧去掉可以看下結果 'Can you can a can as a canner can can a can?'.match(/[cC]an+\s+\1/g); // null</pre><p><strong>2）非捕獲用法，以(?)形式出現</strong></p><ul><li><strong>(?:n ) 表示非捕獲組</strong></li></ul><pre> // 不使用括號時 'adobe12ps15test'.match(/[a-z]+\d+[a-z]+/); // ["adobe12ps"] // 使用括號分組 'adobe12ps15test'.match(/[a-z]+(\d+)([a-z]+)/); // ["adobe12ps", "12", "ps"] 'adobe12ps15test'.match(/[a-z]+(?:\d+)([a-z]+)/); // ["adobe12ps", "ps"] // 看起來上面語句不用(?:)也可以得到相同結果，即： 'adobe12ps15test'.match(/[a-z]+\d+([a-z]+)/); // ["adobe12ps", "ps"] // 注意，但需求希望匹配字母之間的規則複雜時，如希望匹配字母，且字母之間可以為1或3時，但不需要1和3 'adobe11ps15test'.match(/[a-z]+(1|3)+([a-z]+)/); // ["adobe11ps", "1", "ps"] // 返回中不希望包含數字怎麼辦，可以使用非捕獲 'adobe11ps15test'.match(/[a-z]+(?:1|3)+([a-z]+)/); // ["adobe11ps", "ps"]</pre><ul><li><strong>(?=n ) 匹配任何其後緊跟字符n的字符串，但返回中不包含n</strong></li></ul><pre> 'adobe12ps15test'.match(/[a-z]+(?=\d)/g); // ["adobe", "ps"]</pre><ul><li><strong>(?!n ) 匹配任何其後沒有緊跟字符n的字符串，返回中不包含n</strong></li></ul><pre> 'adobe12ps15test'.match(/[a-z]+(?!\d)/g); // ["adob", "p", "test"]</pre><ul><li><strong>(?&lt;=n ) 匹配任何其前緊跟字符n的字符串，返回中不包含n</strong></li></ul><pre> 'adobe12ps15test'.match(/(?&lt;=\d)[a-z]+/g); // ["ps", "test"]</pre><ul><li><strong>(?&lt;!n ) 匹配任何其前緊跟字符n的字符串，返回中不包含n</strong></li></ul><pre> 'adobe12ps15test'.match(/(?&lt;!\d)[a-z]+/g); // ["adobe", "s", "est"]</pre><p><strong>3）注意</strong></p><ul><li><strong>A、如果希望對上面特殊字符本身進行匹配，需要在其前面添加\進行轉移</strong></li></ul><pre> '11+2=13'.match(/\d+\+/g);  // ["11+"] '(11+2)*2=26'.match(/\(\d+\+\d+\)/g);  // ["(11+2)"]</pre><ul><li><strong>B、\\舉例</strong></li></ul><pre> // 注意下面兩個表達式返回的結果 'path C:\Windows\System32'.match(/([a-zA-Z]:\\\w+)/g);  // null 'path C:\\Windows\\System32'.match(/([a-zA-Z]:\\\w+)/g);  // ["C:\Windows"]</pre><p><strong>說明:</strong></p><blockquote><p>在申明字符串 'path C:\Windows\System32' 時，其中的 '' 就已經被當做轉移符，既是 '\W' === 'W',所以如果希望申明的字符串中包含反斜線，需要在加一個反斜線轉義，即 \\</p></blockquote><p><strong>6、正則相關方法</strong></p><p><strong>1） RegExp對象相關方法</strong></p><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/18d92446b954453b97719311b07a53aa><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>2）String對象相關方法</strong></p><div class=pgc-img><img alt=JavaScript正則表達式詳細總結 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/cba268a91c5841c08c52ef0c0f819e66><p class=pgc-img-caption>JavaScript正則表達式詳細總結</p></div><p><strong>3）replace 具體用法</strong></p><p>顧名思義，是字符串替換方法，但用法比較廣泛，相信讀者已經非常熟悉了。在此就當複習了</p><p>A、 <strong>基本用法</strong></p><p><strong>直接傳入字符串進行替換，找到子串後只替換一次，舉例：</strong></p><pre> 'adobe abc'.replace('b', '_') // "ado_e abc" // 注意 第二個 b 沒有被替換</pre><p>如果希望全部替換，可以使用正則表達式並用全局修飾符 g 方式，舉例：</p><pre> 'adobe abc'.replace(/b/g, '_') // "ado_e a_c"</pre><p>B、 <strong>高級用法</strong></p><p><strong>第二個參數可以使用 function，其中有三個參數，分別為 匹配的字符串</strong>、<strong>當前匹配的字符串index值</strong>、<strong>匹配的源字符串</strong>，最終結果根據每次匹配結果進行相應的替換</p><p>舉例：</p><pre> 'adobe aacc bbaa'.replace(/a+/g, function(str, index, source){ if(index &gt; 0){ return str.toUpperCase(); } else { return str; } }); // "adobe AAcc bbAA"</pre><h1><strong>第二部分 案例分析</strong></h1><p><strong>一、常見匹配</strong></p><p>在寫正則之前，需要注意以下幾點：</p><ol><li>一定要清楚期望的規則是什麼，不然無從匹配</li><li>有些正則不只一種寫法，要注意簡短幹練，複雜的正則表達式不僅難懂，而且容易出BUG，性能也不是很好</li><li>正則雖好，可要適度奧。有些字符串處理不一定適合用正則</li></ol><p><strong>1、手機號</strong></p><p>規則：以1開頭第二位為3、5、7、8且長度為11位的數字組合</p><pre> /^1[3578]\d{9}$/.test(13600001111); // true</pre><p><strong>2、 字符串提取</strong></p><p>舉例：提取字符串中的數字</p><p><strong>分析：</strong></p><blockquote><p>根據對數字的理解，可能為負數，即-?，如果是負數，其後需要是數字且至少一位，即 -?\d+，小數部分可能有也可能沒有，所以需要對小數部分括弧起來用 ? 或 {0, 1}限定，因為.是特殊字符需要轉義，於是表達式為：-?\d+(\.\d+)?</p></blockquote><pre> '(12.3 - 32.3)*2 = -40'.match(/-?\d+(\.\d+)?/g); // ["12.3", "32.3", "2", "-40"]</pre><p><strong>二、jQuery中的正則片段</strong></p><p><strong>1、表達式</strong></p><p>在jQuery 3.1.2-pre中找到一個解析單標籤的正則，如下：</p><pre> /^&lt;([a-z][^\/\0&gt;:20\t\r\n\f]*)[20\t\r\n\f]*\/?&gt;(?:&lt;\/\1&gt;|)$/i</pre><p><strong>2、分解</strong></p><p>乍一看有點懵，其實拆解之後就容易理解了，注意拆解的步驟，通常來說：</p><p>1） <strong>第一步可以先看括號 () ，可以將各個小括號及非括號的分成不同部分，如</strong></p><pre> /^&lt; ([a-z][^\/\0&gt;:20\t\r\n\f]*) [20\t\r\n\f]*\/?&gt; (?:&lt;\/\1&gt;|) $/i</pre><p>2） <strong>第二步可以將中括號分開</strong></p><pre> /^&lt; ( [a-z] [^\/\0&gt;:20\t\r\n\f]* ) [20\t\r\n\f]* \/?&gt; (?:&lt;\/\1&gt;|) $/i</pre><p>現在是不是已經很清楚了，接下來分解下，就很容易理解了</p><p><strong>3、詳解</strong></p><ul><li>1）^&lt; 很明顯在匹配標籤左尖括號括號，且以其開始</li><li><br></li><li>2）( [a-z] [^\/\0>:20\t\r\n\f]* ) 這個括號有兩部分，第一個 [a-z] 沒什麼好解釋，即標籤&lt;緊跟的必須為字母，因為全局加了 i(忽略大小寫) 修飾符，所以大小寫字母都可以；[^\/\0>:20\t\r\n\f]*，及限制標籤名必須以字母開始，且第二個字母不能為/ \0 > : \20 t\r \n \f的任意多個字符（思考為什麼），() 表示對標籤的分組，方便取到標籤名</li><li><br></li><li>3）[20\t\r\n\f]* 表示可能含有 [20\t\r\n\f] 這些特殊字符，與前面的 [^\/\0>:20\t\r\n\f]* 相似卻不一樣，通過這裡可以看出&lt;br之後進行回車也能匹配到</li><li><br></li><li>4）\/?> 能匹配 &lt;br>或&lt;br/></li><li><br></li><li>5）(?:&lt;\/\1>|) 這裡不捕獲，並用\1去反向引用第一個括號的表達式 ([a-z][^\/\0>:20\t\r\n\f]*)。這裡的|表示 &lt;\/\1> 可有可無，即：(?:&lt;\/\1>|) 與 (?:&lt;\/\1>)?匹配結果一樣</li></ul><h1><strong>公告</strong></h1><p>喜歡小編的點擊關注，瞭解更多知識！</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>JavaScript</a></li><li><a>正則</a></li><li><a>表達式</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/47bf383c.html alt="JavaScript 正則表達式理論學習和案例分析" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/23450277ff8a4edb976123f0d7b823d0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/47bf383c.html title="JavaScript 正則表達式理論學習和案例分析">JavaScript 正則表達式理論學習和案例分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d2dd7ebf.html alt="Java 正則表達式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d2dd7ebf.html title="Java 正則表達式">Java 正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/22c24c31.html alt="Java 正則表達式 StackOverflowError 問題及其優化" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/28110ae7b0fc46f1a5ad2e6bcf0e40c1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/22c24c31.html title="Java 正則表達式 StackOverflowError 問題及其優化">Java 正則表達式 StackOverflowError 問題及其優化</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/53f942fa.html alt=Java正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1531051821759d2705acacc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/53f942fa.html title=Java正則表達式>Java正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0c20e1e.html alt=Java正則表達式介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0c20e1e.html title=Java正則表達式介紹>Java正則表達式介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5c2f2cd7.html alt=Java正則表達式模式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6d9eaa59ae704773aef9e0851d9625fd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5c2f2cd7.html title=Java正則表達式模式>Java正則表達式模式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/38a1ca5a.html alt=Java正則表達式組 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cb895437221f4629a7a4f697a8ac9f7a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/38a1ca5a.html title=Java正則表達式組>Java正則表達式組</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html alt="java 常用的正則表達式" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1540129072390e6c4c05126 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/19cbd4c3.html title="java 常用的正則表達式">java 常用的正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a3910c22.html alt=javascript正則表達式基礎 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a3910c22.html title=javascript正則表達式基礎>javascript正則表達式基礎</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html alt=java常用正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c811c3c14e4a4fa4825845b2868ee645 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a81470d4.html title=java常用正則表達式>java常用正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4480dc1b.html alt=不會正則表達式？看這篇就夠了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/061586043d964e5eaa9f75ab5602f1f8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4480dc1b.html title=不會正則表達式？看這篇就夠了>不會正則表達式？看這篇就夠了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a2847433.html alt=常用JavaScript正則表達式彙編與示例詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/dca255e6-9611-4395-afc6-7e9fa5ac5e38 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a2847433.html title=常用JavaScript正則表達式彙編與示例詳解>常用JavaScript正則表達式彙編與示例詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a4031d46.html alt=正則表達式-javaScript class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/71e4c14f52284cf48db00f3e10ea4ad4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a4031d46.html title=正則表達式-javaScript>正則表達式-javaScript</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8d84c536.html alt=正則表達式基本語法和常用的正則表達式 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/153137431384891e4a04908 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8d84c536.html title=正則表達式基本語法和常用的正則表達式>正則表達式基本語法和常用的正則表達式</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e0639976.html alt=正則表達式教程：實例速查 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e0639976.html title=正則表達式教程：實例速查>正則表達式教程：實例速查</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>