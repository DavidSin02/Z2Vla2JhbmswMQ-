<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>尚學堂百戰程序員之AOP面向切面編程 | 极客快訊</title><meta property="og:title" content="尚學堂百戰程序員之AOP面向切面編程 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/152764326574400ee36d92e"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e360dd06.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e360dd06.html><meta property="article:published_time" content="2020-11-14T21:04:29+08:00"><meta property="article:modified_time" content="2020-11-14T21:04:29+08:00"><meta name=Keywords content><meta name=description content="尚學堂百戰程序員之AOP面向切面編程"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e360dd06.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>尚學堂百戰程序員之AOP面向切面編程</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>spring之 AOP面向切面編程</p><p>AOP（Aspect Oriented Programming），面向切面編程，是面向對象編程OOP（Object Oriented Programming）的補充和完善。</p><p>OOP引入封裝、繼承、多態等概念來建立一種對象層次結構，用於模擬公共行為的一個集合。不過OOP允許開發者定義縱向的關係，但並不適合定義橫向的關係，例如日誌功能。日誌代碼往往橫向地散佈在所有對象層次中，而與它對應地對象的核心功能毫無關係對於其他類型的代碼，如安全性、異常處理、和透明的持續性也是如此。這種散佈在各處的無關的代碼被稱為橫切（cross cutting），在OOP設計中，它導致了大量代碼的重複，而不利於各個模塊的重用。</p><div class=pgc-img><img alt=尚學堂百戰程序員之AOP面向切面編程 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/152764326574400ee36d92e><p class=pgc-img-caption></p></div><p>AOP技術恰恰相反，它利用一種稱為“橫切”的技術，剖解開封裝的對象的內部，並將那些影響了多個類的公共行為封裝到一個可重用模塊，並將其命名為“Aspect”，即切面。所謂“切面”，簡單的說就是那些與業務 無關，卻為業務模塊所共有調用的邏輯或責任封裝起來，便於減少系統的重複代碼，降低模塊之間的耦合度，並有利於未來的可操作性和可維護性。</p><p>使用“橫切”技術，AOP把軟件系統分為兩個部分：核心關注點和橫切關注點。業務處理的主要流程是核心關注點，與之關係不大的部分是橫切關注點，橫切關注點的一個特點是，他們經常發生在核心關注點的多處，而各處基本類似，比如權限認證、日誌、事物。</p><p>AOP的作用在於分離系統中的各種關注點，將核心關注點（核心業務邏輯）和橫切關注點（增強邏輯）分離開來。應用了AOP之後，進行功能的擴展便不需要修改核心業務邏輯了。</p><p>應用場景：日誌記錄、性能統計、安全控制、事務處理、異常處理等等</p><p>主要意圖：將日誌記錄、性能統計、安全控制、事務處理、異常處理等代碼從業務邏輯代碼中劃分出來，通過對這些行為的分離，我們希望可以將它們獨立到非業務邏輯的方法中去，進而改變這些行為的時候不會影響到業務邏輯的代碼。</p><p>AOP核心概念：</p><p>連接點（Joinpoint）：表示需要在程序中插入橫切關注點的擴展點，連接點可能是類初始化、方法執行、方法調用、字段調用或處理異常等等，spring只支持方法執行連接點，其實在類中有很多的方法可以被增強，那麼在實際操作中，定義要被增強的方法為切入點即可。</p><p>切入點（Pointcut）：所謂切入點是指我們要對哪些Joinpoint進行攔截的定義</p><p>通知（Advice）：所謂通知是指攔截到Joinpoint之後要做的事情就是通知，通知分為前置通知、後置通知、異常通知、最終通知、環繞通知</p><p>前置通知（Before Advice）：在方法之前執行</p><p>後置通知（After Advice）：在方法之後執行</p><p>環繞通知（Around Advice）：在方法之前和之後執行</p><p>異常通知（After-Throwing Advice）：方法出現異常執行</p><p>最終通知（After-Returning Advice）：在返回之後執行</p><p>切面（Aspect）：一個關注點的模塊化，這個關注點實現可能另外橫切多個對象。</p><p>引入（Introduction）：引入是一種特殊的通知在不修改類代碼的前提下，Introduction可以在允許期間為類動態地添加一些方法或屬性</p><p>目標對象（Target Object）：包含連接點的對象，也被稱作被通知或被代理對象。</p><p>AOP代理（AOP Proxy）：AOP框架使用代理模式創建的對象，從而實現在連接點處插入通知（即應用切面），就是通過代理來對目標對象應用切面。在spring中，AOP代理可以用JDK代理或CGLIB代理實現，而通過攔截器模型應用切面。</p><p>織入（Weaving）：織入就是把一個advice應用到target的過程，是將切面增強邏輯應用到目標對象的連接點從而創建處AOP代理對象的過程。織入可以在編譯期、類裝載期、運行期進行。</p><p>spring AOP的底層實現</p><p>spring中AOP代理由spring的IOC容器負責生成、管理、其依賴關係也由IOC容器負責管理，因此，AOP代理可以直接使用容器中的其他Bean實例作為目標，這種關係可由IOC容器的依賴注入提供，spring AOP 的底層使用動態代理。</p><div class=pgc-img><img alt=尚學堂百戰程序員之AOP面向切面編程 onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/15276432786078e713fcfc1><p class=pgc-img-caption></p></div><p>動態代理的方式</p><p>如果代理對象實現了接口，默認使用JDK動態代理來創建AOP代理，針對接口</p><p>如果代理對象沒有實現接口，spring會切換使用CGLIB代理，針對類，當然spring AOP也可強制使用CGLIB</p><p>JDK動態代理實現：只能對實現了接口的類生成代理，而不是針對類，該目標類型實現的接口都將被代理，原理是通過在運行期間創建一個接口的實現類來完成對目標對象的代理，步驟如下</p><p>1. 定義一個實現接口InvocationHandler的類</p><p>2. 通過構造函數或者靜態工廠方法等，注入被代理類</p><p>3. 實現invoke（Object proxy,Method method,Object[]args）方法</p><p>4. 在主函數中獲得被代理類的類加載器</p><p>5. 使用Proxy.newProxyInstance（classLoader,interfaces,args）產生一個代理對象</p><p>6. 通過代理對象調用各種方法​</p><div class=pgc-img><img alt=尚學堂百戰程序員之AOP面向切面編程 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/15276432930618fcbdfb2e6><p class=pgc-img-caption></p></div><p>CGLIB動態代理實現：針對類代理實現，對是否實現接口無要求，原理是對指定的類生成一個子類，覆蓋其中的方法，因為是繼承，所以被代理的類最好不要聲明為final類型。</p><p>1. 定義一個實現了MethodInterceptor接口的類</p><p>2. 實現其intercept()方法，在其中調用proxy.invokeSuper()​</p><p>靜態代理和動態代理的區別</p><p>靜態代理：自己編寫代理類，然後在進行編譯，在程序運行之前，代理類的.class文件就已經存在了</p><p>動態代理：在實現階段不用關心代理誰，而在運行階段（通過反射機制）才指定代理哪一個對象</p><p><strong>後記：</strong>對於大部分轉行的人來說，找機會把自己的基礎知識補齊，邊工作邊補基礎知識，真心很重要。</p><p><strong>“</strong>我們相信人人都可以成為一個IT大神，現在開始，選擇一條陽光大道，助你入門，學習的路上不再迷茫。這裡是北京尚學堂，初學者轉行到IT行業的聚集地。"</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>尚學堂</a></li><li><a>百戰</a></li><li><a>AOP</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d7b0ca25.html alt=尚學堂百戰程序員：Java中的父類與子類 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/87c12d44-c689-4d97-ab24-4e56469eb408 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d7b0ca25.html title=尚學堂百戰程序員：Java中的父類與子類>尚學堂百戰程序員：Java中的父類與子類</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4db51b45.html alt="尚學堂知識整理：Java boolean與short數據類型" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/6c3e00031bc69dbd5f67 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4db51b45.html title="尚學堂知識整理：Java boolean與short數據類型">尚學堂知識整理：Java boolean與short數據類型</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b91a8349.html alt="Spring AOP簡介與底層實現機制——動態代理" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/413780d1-cf47-4038-9471-b686d97aa99b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b91a8349.html title="Spring AOP簡介與底層實現機制——動態代理">Spring AOP簡介與底層實現機制——動態代理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a1f64551.html alt=Spring4基礎二一-AOP篇-通知(1)-入門講解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/a10d085c1a514da38412fab206aa734d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a1f64551.html title=Spring4基礎二一-AOP篇-通知(1)-入門講解>Spring4基礎二一-AOP篇-通知(1)-入門講解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b5dd97d4.html alt=Spring框架AOP技術 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/760bf32faca443cb8e28ed0b9bc20205 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b5dd97d4.html title=Spring框架AOP技術>Spring框架AOP技術</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/60d27d99.html alt=Spring面向切面編程AOP的初步瞭解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6eb76749eacf41f1ac8d6bb660ae18ab style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/60d27d99.html title=Spring面向切面編程AOP的初步瞭解>Spring面向切面編程AOP的初步瞭解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b949fbad.html alt=小實例理解Spring中的AOP----面向切面編程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/35942664cec244f88d6a0f7b1e7067cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b949fbad.html title=小實例理解Spring中的AOP----面向切面編程>小實例理解Spring中的AOP----面向切面編程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a7b6ff44.html alt=談談AOP（面向切面編程） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1534580818763e7a06b5c87 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a7b6ff44.html title=談談AOP（面向切面編程）>談談AOP（面向切面編程）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/833fcd87.html alt="重磅開源｜AOP for Flutter開發利器——AspectD" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a9081cd0f8f5469dbff78c136b207e34 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/833fcd87.html title="重磅開源｜AOP for Flutter開發利器——AspectD">重磅開源｜AOP for Flutter開發利器——AspectD</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/82a2f71a.html alt=面向切面編程（AOP）中的術語你能說出幾個？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/5436586b-f08f-4845-b15a-7da897dc9b16 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/82a2f71a.html title=面向切面編程（AOP）中的術語你能說出幾個？>面向切面編程（AOP）中的術語你能說出幾個？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0ef619f7.html alt=Autofac的AOP面向切面編程研究 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15b5a9a952f84c688e4f9a33c0fe0f13 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0ef619f7.html title=Autofac的AOP面向切面編程研究>Autofac的AOP面向切面編程研究</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2798be0b.html alt="Spring AOP 面向切面編程需要知道的事" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/63832e5a-4ec8-451b-87cf-c6295ac2adf5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2798be0b.html title="Spring AOP 面向切面編程需要知道的事">Spring AOP 面向切面編程需要知道的事</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fcef4925.html alt="Spring AOP：Spring的面向切面，提供AOP（面向切面編程）的實現" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fcef4925.html title="Spring AOP：Spring的面向切面，提供AOP（面向切面編程）的實現">Spring AOP：Spring的面向切面，提供AOP（面向切面編程）的實現</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c632ef26.html alt=Spring4基礎二十-AOP篇-AOP入門介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c632ef26.html title=Spring4基礎二十-AOP篇-AOP入門介紹>Spring4基礎二十-AOP篇-AOP入門介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/af398a38.html alt=Spring—面向切面編程（AOP）詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/3ad8b3ec-d7c5-4b89-9b46-e473a4f5d570 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/af398a38.html title=Spring—面向切面編程（AOP）詳解>Spring—面向切面編程（AOP）詳解</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>