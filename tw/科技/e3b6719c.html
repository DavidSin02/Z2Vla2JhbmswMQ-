<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨ | æå®¢å¿«è¨Š</title><meta property="og:title" content="PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/423ce7eefc5d433f86a14589b1ba0043"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e3b6719c.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e3b6719c.html><meta property="article:published_time" content="2020-11-14T21:07:27+08:00"><meta property="article:modified_time" content="2020-11-14T21:07:27+08:00"><meta name=Keywords content><meta name=description content="PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e3b6719c.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h3 class=pgc-h-arrow-right><strong>â€‹å®¹å™¨æ˜¯ä»€éº¼ï¼Ÿ</strong></h3><p>ç›¸ä¿¡å¾ˆå¤šäººè½èªªéä¾è³´æ³¨å…¥ï¼Œä¾è³´æ³¨å…¥å¯¦ç¾çš„åŸºç¤æ¢ä»¶é›¢ä¸é–‹å®¹å™¨ï¼Œå®¹å™¨å°±æ˜¯ç”¨ä¾†ç®¡ç†é¡ä¾è³´å’Œæ³¨å…¥çš„ï¼Œè² è²¬æœå‹™çš„ç®¡ç†å’Œè§£è€¦çµ„ä»¶ï¼Œæœ€ç°¡å–®çš„ç†è§£æˆ‘å€‘å¯ä»¥æŠŠå®¹å™¨ç†è§£æˆä¸€å€‹è¶…ç´šå¤§ã€å°ˆé–€å­˜å°è±¡çš„æ•¸çµ„ã€‚</p><div class=pgc-img><img alt=PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/423ce7eefc5d433f86a14589b1ba0043><p class=pgc-img-caption></p></div><p>åœ–1</p><p>å¦‚åœ–æ‰€ç¤ºèª¿ç”¨è€…é€šéå®¹å™¨çš„æ¨™ç¤ºç²å–åˆ°å°è±¡å¯¦ä¾‹ï¼Œåœ–è£¡å¯ä»¥çœ‹å‡ºä¾†ï¼Œå¯ä»¥é€šé ::class çš„æ–¹å¼ä¾†ç²å–ä¹Ÿå¯ä»¥ç›´æ¥é€šéå°è±¡æ¨™ç¤ºç²å–å¯¦ä¾‹å°è±¡ã€‚</p><p><br></p><p><strong>IOCæ˜¯ä»€éº¼ï¼Ÿ</strong></p><p>å¤§å®¶å¯èƒ½éƒ½è½èªªéIOCå®¹å™¨ï¼ŒIOCçš„å…¨ç¨±æ˜¯ï¼š(Inversion Of Controlï¼Œåè½‰æ§åˆ¶)ã€‚</p><p>æˆ‘å€‘ä¾†ç†è§£ä¸€ä¸‹ä»€éº¼æ˜¯åè½‰æ§åˆ¶ï¼Œåœ¨æˆ‘å€‘å‚³çµ±ç·¨ç¢¼ä¸­æˆ‘å€‘åœ¨é¡èˆ‡é¡ä¹‹é–“çš„ä¾è³´é€šå¸¸æ˜¯æˆ‘å€‘é€šéç·¨ç¢¼çš„æ–¹å¼newå‡ºä¾†å°è±¡å†å‚³éçš„ï¼Œè€Œä½¿ç”¨æ§åˆ¶åè½‰æˆ‘å€‘å¯ä»¥æŠŠå°è±¡çš„æ§åˆ¶æ¬Šäº¤çµ¦å®¹å™¨æˆ–è€…æ¡†æ¶å»å¯¦ç¾ã€‚ç›®çš„æ˜¯ç‚ºäº†è®“æˆ‘å€‘ä¸éœ€è¦ç¡¬ç·¨ç¢¼å»å‰µå»ºå°è±¡ï¼Œçœ‹åœ–1å¯ä»¥çŸ¥é“ï¼Œå®¹å™¨è£¡é¢å­˜æ”¾è‘—å¾ˆå¤šå°è±¡ï¼Œç•¶æˆ‘å€‘è¦ä½¿ç”¨çš„æ™‚å€™å¯ä»¥ç›´æ¥å»ç”¨ã€‚è€Œå®¹å™¨è£¡é¢çš„å°è±¡ä¸éœ€è¦æˆ‘å€‘åœ¨ä»£ç¢¼ä¸­ç·¨ç¢¼å‰µå»ºã€‚åœ¨éœ€è¦æŸå€‹é¡å°è±¡çš„æ™‚å€™æœƒå»å®¹å™¨è£¡é¢ç²å–å°è±¡ï¼Œå¦‚æœå°è±¡ä¸å­˜åœ¨å‰‡æœƒè‡ªå‹•å‰µå»ºã€‚é€™å°±æ˜¯çœç•¥äº†æˆ‘å€‘åœ¨ä»£ç¢¼è£¡é¢å»å‰µå»ºå°è±¡çš„éç¨‹ï¼Œç”±å®¹å™¨å»å¹«æˆ‘å€‘å¯¦ç¾é€™å€‹å‰µå»ºçš„éç¨‹ï¼Œé€™å°±å«åè½‰æ§åˆ¶ã€‚ä¸€å¥è©±ç¸½çµIOCï¼šæŠŠå‰µå»ºå°è±¡çš„æ§åˆ¶æ¬Šè½‰ç§»çµ¦å®¹å™¨å¯¦ç¾é¡çš„å¯¦ä¾‹åŒ–ã€‚</p><p>ä¾‹å¦‚ï¼šæ²’æœ‰ä½¿ç”¨IOCçš„æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘æƒ³è¦å‰µå»ºé¡</p><pre><code>&lt;?phpclass Sunny{}$sunny = new Sunny();</code></pre><p>æˆ‘å€‘éœ€è¦æ‰‹å‹•å»newä¸€å€‹é¡ï¼Œé€™ç¨®æƒ…æ³å°±æ˜¯ç¡¬ç·¨ç¢¼åœ¨ä»£ç¢¼è£¡é¢å»å¯¦ç¾çš„ã€‚</p><p>è€Œä½¿ç”¨IOCå®¹å™¨çš„ä»£ç¢¼å‰‡å¯ä»¥é€™æ¨£å¯«ã€‚</p><pre><code>&lt;?phpclass Sunny{}$sunny = Container::getBean(Sunny::class);</code></pre><p>åœ¨å®¹å™¨çš„å…§éƒ¨å»å¹«æˆ‘å€‘å¯¦ç¾é€™å€‹é¡ï¼Œæœ‰åŒå­¸çœ‹åˆ°é€™è£¡å¯èƒ½æœƒæœ‰ç–‘å•ï¼Œæˆ‘ä½¿ç”¨ new Sunny ä¸æ˜¯ä»£ç¢¼å¯«å¾—æ›´çŸ­æ›´ç°¡å–®å—ï¼Ÿæˆ‘å€‘çœ‹å®Œä¾è³´æ³¨å…¥å†çœ‹ä¸€å€‹ä¾‹å­ã€‚</p><p><strong>ä¾è³´æ³¨å…¥</strong></p><p>ç¾åœ¨çŸ¥é“äº†IOCæ˜¯ä»€éº¼ï¼Œé‚£éº¼ä¸€å€‹æ–°çš„å•é¡Œå‡ºä¾†äº†ï¼Œæˆ‘å€‘åœ¨å‰µå»ºé¡çš„æ™‚å€™æœ‰äº›é¡çš„æ§‹é€ æ–¹æ³•æœƒéœ€è¦æˆ‘å€‘å‚³éåƒæ•¸æ€éº¼è¾¦ï¼Ÿé€šéIOCçš„å­¸ç¿’æˆ‘å€‘çŸ¥é“äº†IOCå®¹å™¨æœƒå¹«æˆ‘å€‘è§£æ±ºé€™å€‹å°è±¡å¯¦ä¾‹å‰µå»ºçš„å•é¡Œï¼Œé‚£éº¼åœ¨å®¹å™¨è£¡é¢å‰µå»ºå°è±¡çš„æ™‚å€™ç™¼ç¾é¡æœ‰å…¶ä»–ä¾è³´å‰‡æœƒé€²è¡Œä¾è³´æŸ¥æ‰¾ï¼Œå®¹å™¨å°‹æ‰¾éœ€è¦å°è±¡çš„éç¨‹ï¼Œç¨±ç‚ºDL(Dependency Lookup, ä¾è³´æŸ¥æ‰¾)ã€‚è€ŒæŠŠéœ€è¦çš„ä¾è³´æ³¨å…¥åˆ°ä»£ç¢¼ç‰‡æ®µä¸­é€™å€‹ç¨±ç‚ºDI(Dependency Injection,ä¾è³´æ³¨å…¥)ã€‚</p><p>ä¾‹å¦‚IOCè£¡é¢èªªåˆ°çš„ new Sunny é€™å€‹ä¾‹å­ã€‚å¦‚æœåœ¨é¡èˆ‡é¡ä¹‹é–“æœ‰å¤šé‡ä¾è³´ã€‚</p><pre><code>&lt;?phpclass Computer{    public function run(){        echo "ç·¨ç¨‹ä¸­....\n";    }}class Sunny{    private $computer;    public function __construct(Computer $computer){        $this-&gt;computer = $computer;    }    public function program(){        $this-&gt;computer-&gt;run();    }}$sunny = new Sunny(new Computer());$sunny-&gt;program();</code></pre><p>é€™è£¡å¯ä»¥çœ‹åˆ° Sunny é€™å€‹é¡æƒ³è¦ç·¨ç¨‹ä¾è³´é¡ Computer é€™å€‹é¡ï¼Œè€Œå¦‚æœä½¿ç”¨IOCå®¹å™¨å¯¦ç¾ä¾è³´æ³¨å…¥çš„è©±ï¼Œä»£ç¢¼å°±ç°¡å–®äº†ã€‚</p><pre><code>&lt;?phpclass Computer{    public function run(){        echo "ç·¨ç¨‹ä¸­....\n";    }}class Sunny{    private $computer;    public function __construct(Computer $computer){        $this-&gt;computer = $computer;    }    public function program(){        $this-&gt;computer-&gt;run();    }}$sunny = Container::getBean(Sunny::class);$sunny-&gt;program();</code></pre><h3 class=pgc-h-arrow-right>ä¸€å¥è©±ç¸½çµï¼šè§£æ±ºå‰µå»ºé¡å¯¦ä¾‹ç•¶ä¸­å°å…¶ä»–é¡çš„ä¾è³´ï¼Œå‹•æ…‹çš„å‘æŸå€‹å°è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–å°è±¡ã€‚</h3><h3 class=pgc-h-arrow-right><strong>ä¾è³´å€’ç½®</strong></h3><p>ä¾è³´å€’ç½®è§£æ±ºçš„å•é¡Œæ˜¯é¬†è€¦å„å€‹æ¨¡å¡Šä¹‹é–“çš„é‡åº¦ä¾è³´ï¼Œä¸Šå±¤æ¨¡å¡Šä¸æ‡‰è©²ä¾è³´åº•å±¤æ¨¡å¡Šï¼Œå®ƒå€‘éƒ½æ‡‰è©²ä¾è³´æ–¼æŠ½è±¡ã€‚é€šå¸¸ç°¡å–®çš„ç†è§£ä¾è³´å€’ç½®å°±æ˜¯é¢å‘æ¥å£æˆ–è€…é¢å‘æŠ½è±¡ä¾†é€²è¡Œç·¨ç¨‹ã€‚æˆ‘å€‘é€šéä¸‹é¢çš„ä¾‹å­ä¾†çœ‹çœ‹é¢å‘æ¥å£ç·¨ç¨‹ã€‚</p><pre><code>class Cache{    public function set($key,$value){        $redis = new CFile();        $redis-&gt;set($key,$value);    }}class CFile{    public function set($key,$value){        echo "file:{$key}-&gt;{$value}\n";    }}$cache = new Cache();$cache-&gt;set("name","sunny");</code></pre><p>ä¸Šé¢çš„é€™æ®µä»£ç¢¼çœ‹ä¼¼æ²’æœ‰ä»€éº¼å¤§å•é¡Œï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€å¤©æŠŠæ–‡ä»¶ç·©å­˜æ”¹æˆRedisç·©å­˜å‘¢ï¼Ÿ</p><pre><code>class Cache{    public function set($key,$value){        $redis = new CRedis();        $redis-&gt;set($key,$value);    }}class CRedis{    public function set($key,$value){        echo "redis:{$key}-&gt;{$value}\n";    }}$cache = new Cache();$cache-&gt;set("name","sunny");</code></pre><p>é€šéé€™æ®µä»£ç¢¼å¯ä»¥çœ‹å‡ºä¾†ç•¶ä¸€å€‹ç·©å­˜ä½¿ç”¨çš„é©…å‹•æ”¹è®Šäº†çš„æ™‚å€™ï¼ŒCacheçš„ä»£ç¢¼ä¹Ÿå¿…é ˆä½œå‡ºç›¸æ‡‰çš„æ”¹è®Šï¼Œå› ç‚ºä»£ç¢¼å¯«æ­»åœ¨èª¿ç”¨è€…èº«ä¸Šäº†ï¼Œè€¦åˆåº¦è®Šå¾—é«˜äº†ã€‚å†å°ä»£ç¢¼é€²è¡Œæ”¹é€ ä¸€æ¨£ï¼Œè®“ç¨‹åºå“¡é¢å‘interfaceç·¨ç¨‹ï¼Œè®“ä»£ç¢¼è®Šå¾—æ›´é€šç”¨ï¼Œæ›´è¦ç¯„ã€‚</p><pre><code>interface ICache{    public function set($key,$value);}class CRedis implements ICache {    public function set($key,$value){        echo "redis:{$key}-&gt;{$value}\n";    }}class CFile implements ICache{    public function set($key,$value){        echo "file:{$key}-&gt;{$value}\n";    }}class Cache{    private $drive;    public function __construct(ICache $drive){        $this-&gt;drive = $drive;    }    public function set($key,$value){        $this-&gt;drive-&gt;set($key,$value);    }}$cache = new Cache(new CFile());$cache-&gt;set("name","sunny");</code></pre><p>å¾ˆå¤šäººçœ‹åˆ°é€™æ®µä»£ç¢¼çš„æ™‚å€™æƒ³è‘—ï¼Œé‚£æˆ‘åœ¨æ§‹é€ æ–¹æ³•ç›´æ¥æŠŠè¦çš„å°è±¡å‚³é€²å»ä¸å°±å¥½äº†å—ï¼Ÿç‚ºä»€éº¼é‚„è¦å®šç¾©ä¸€å€‹interfaceå‘¢ï¼Ÿå…¶å¯¦å®šç¾©interfaceæ˜¯ç‚ºäº†è¦ç¯„ä»£ç¢¼ï¼Œä¸ç®¡ä½ ä½¿ç”¨å“ªå€‹é©…å‹•ï¼Œåªè¦å¯¦ç¾äº†æˆ‘é€™å€‹interfaceçš„éƒ½å¯ä»¥ç”¨ï¼Œæ²’æœ‰interfaceé–‹ç™¼è€…åœ¨é–‹ç™¼é©…å‹•çš„æ™‚å€™å°±æœƒä¸çŸ¥é“é€™å€‹é©…å‹•è£¡é¢è©²æœ‰ä»€éº¼æ–¹æ³•ã€‚ç•¶æˆ‘å€‘ä½¿ç”¨interfaceä¹‹å¾Œå¤§å®¶åªè¦é¢å‘æ¥å£ç·¨ç¨‹ï¼ŒCacheå®Œå…¨ä¸ç®¡é¡æ˜¯æ€éº¼å¯¦ç¾çš„ï¼ŒCacheåªæ˜¯æ ¹æ“šinterfaceçš„æ–¹æ³•é€²è¡Œæ“ä½œã€‚</p><p>ä¸€å¥è©±ç¸½çµï¼šä¾è³´å€’ç½®å¯¦ç¾é¬†è€¦åˆ</p><p><br></p><h1 class=pgc-h-arrow-right><strong>å¯¦æˆ°ï¼šæ ¹æ“šå®¹å™¨åŸç†å¯¦ç¾å®¹å™¨</strong></h1><pre><code>&lt;?phpclass Container{    // ç•¶å‰å®¹å™¨å°è±¡    private static $instance;    // å­˜æ”¾åœ¨å®¹å™¨è£¡é¢åˆ°å¯¦ä¾‹    protected $instances = [];    private function __construct(){    }    public static function getInstance(){        if (!self::$instance) {            self::$instance = new static();        }        return self::$instance;    }    /**     * ç²å–å°è±¡å¯¦ä¾‹     * @param $key     * @return mixed     */    public function get($key){        if (isset($this-&gt;instances[$key])) {            return $this-&gt;instances[$key];        }    }    /**     * ç¶å®šå°è±¡ã€é–‰åŒ…ã€é¡åˆ°å®¹å™¨     * @param $key     * @param null $concrete     * @return Container     */    public function bind($key, $concrete = null){        if ($concrete instanceof Closure) {            $this-&gt;instances[$key] = $concrete;        } elseif (is_object($concrete)) {            $this-&gt;instances[$key] = $concrete;        }        return $this;    }}class Sunny{    public function getName(){        echo time() . "\n";    }}$app = Container::getInstance();$sunny = $app-&gt;bind(Sunny::class,new Sunny());$sunny = $app-&gt;get(Sunny::class);$sunny-&gt;getName();</code></pre><p><br></p><h1 class=pgc-h-arrow-right><strong>å¯¦æˆ°ï¼šå¯¦ç¾ä¾è³´æ³¨å…¥</strong></h1><h3 class=pgc-h-arrow-right>Container.php</h3><pre><code>&lt;?phpclass Container{    // ç•¶å‰å®¹å™¨å°è±¡    private static $instance;    // å­˜æ”¾åœ¨å®¹å™¨è£¡é¢åˆ°å¯¦ä¾‹    protected $instances = [];    private function __construct(){    }    public static function getInstance(){        if (!self::$instance) {            self::$instance = new static();        }        return self::$instance;    }    /**     * ç²å–å°è±¡å¯¦ä¾‹     * @param $key     * @return mixed     * @throws ReflectionException     */    public function get($key){        if (isset($this-&gt;instances[$key])) {            return $this-&gt;instances[$key];        }        return $this-&gt;make($key);    }    /**     * ç¶å®šå°è±¡ã€é–‰åŒ…ã€é¡åˆ°å®¹å™¨     * @param $key     * @param null $concrete     * @return Container     * @throws ReflectionException     */    public function bind($key, $concrete = null){        if ($concrete instanceof Closure) {            $this-&gt;instances[$key] = $concrete;        } elseif (is_object($concrete)) {            $this-&gt;instances[$key] = $concrete;        } else {            $this-&gt;make($key, $concrete);        }        return $this;    }    /**     * å‰µå»ºé¡ç¶å®šåˆ°é¡å¯¦ä¾‹     * @param $abstract     * @param null $atgs     * @return mixed     * @throws ReflectionException     */    public function make($abstract, $atgs = null){        if (isset($this-&gt;instances[$abstract])) {            return $this-&gt;instances[$abstract];        }        $object = $this-&gt;invokeClass($abstract);        $this-&gt;instances[$abstract] = $object;        return $object;    }    /**     * åå°„è§£æé¡     * @param $abstract     * @return object     * @throws ReflectionException     */    public function invokeClass($abstract){        $reflectionClass = new \ReflectionClass($abstract);        // ç²å–æ§‹é€ æ–¹æ³•        $construct = $reflectionClass-&gt;getConstructor();        // ç²å–åƒæ•¸å¾—åˆ°å¯¦ä¾‹        $params = $construct ? $this-&gt;parserParams($construct) : [];        $object = $reflectionClass-&gt;newInstanceArgs($params);        return $object;    }    /**     * è§£ææ§‹é€ æ–¹æ³•åƒæ•¸     * @param $reflect     * @return array     * @throws ReflectionException     */    public function parserParams(ReflectionMethod $reflect){        $args = [];        $params = $reflect-&gt;getParameters();        if (!$params) {            return $args;        }        if (count($params) &gt; 0) {            foreach ($params as $param) {                $class = $param-&gt;getClass();                if ($class) {                    $args[] = $this-&gt;make($class-&gt;getName());                    continue;                }                // ç²å–è®Šé‡çš„åç¨±                $name = $param-&gt;getName();                // é»˜èªå€¼                $def = null;                // å¦‚æœæœ‰é»˜èªå€¼ï¼Œå¾é»˜èªå€¼ç²å–é¡å‹                if ($param-&gt;isOptional()) {                    $def = $param-&gt;getDefaultValue();                }                $args[] = $_REQUEST[$name] ?? $def;            }        }        return $args;    }}</code></pre><h3 class=pgc-h-arrow-right>Test.php</h3><pre><code>&lt;?phpclass Test{    public $name;    private $test1;    public function __construct(Test1 $test1){        $this-&gt;test1 = $test1;        $this-&gt;name = $this-&gt;test1-&gt;getName();    }}</code></pre><h3 class=pgc-h-arrow-right>Test1.php</h3><pre><code>&lt;?phpclass Test1{    public function getName(){        return "test1è¿”å›çš„åå­—";    }}</code></pre><h3 class=pgc-h-arrow-right>Sunny.php</h3><pre><code>&lt;?phprequire_once "./Container.php";require_once "./Test.php";require_once "./Test1.php";class Sunny{    private $test;    public function __construct(Test $test){        $this-&gt;test = $test;    }    public function getName(){        echo "ç²å–testè£¡é¢çš„nameï¼š{$this-&gt;test-&gt;name}\n";    }}$app = Container::getInstance();$sunny = $app-&gt;get(Sunny::class);$sunny-&gt;getName();</code></pre><p>å¦‚æœå–œæ­¡æˆ‘å€‘çš„æ–‡ç« è«‹é—œæ³¨ + è½‰ç™¼ è®“æ›´å¤šäººçœ‹åˆ°ï¼Œæˆ‘å€‘ä¹ŸæœƒæŒçºŒæä¾›æ›´å¤šåŸå‰µçš„å¥½æ–‡ç« ã€‚</p><div class=pgc-img><img alt=PHPé€²éšæ•™ç¨‹-ä¸€æ–‡ç†è§£å’Œå¯¦ç¾ç¾ä»£PHPæ¡†æ¶è£¡çš„IOCå®¹å™¨ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/379e095c9bd843c3b958f1b161a81130><p class=pgc-img-caption></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>PHP</a></li><li><a>é€²éš</a></li><li><a>å¯¦ç¾</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/fe9184d7.html alt=PHPé€²éšæ•™ç¨‹-å¯¦ç¾ä¸€å€‹ç°¡å–®çš„MySQLé€£æ¥æ±  class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/aa2df096a4274ba1b5c8540bcb5b5c73 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fe9184d7.html title=PHPé€²éšæ•™ç¨‹-å¯¦ç¾ä¸€å€‹ç°¡å–®çš„MySQLé€£æ¥æ± >PHPé€²éšæ•™ç¨‹-å¯¦ç¾ä¸€å€‹ç°¡å–®çš„MySQLé€£æ¥æ± </a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c9eb3d63.html alt=PHPå¯¦ç¾å„ç¨®ç¶“å…¸ç®—æ³•è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15357595091626cf296dc3e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c9eb3d63.html title=PHPå¯¦ç¾å„ç¨®ç¶“å…¸ç®—æ³•è©³è§£>PHPå¯¦ç¾å„ç¨®ç¶“å…¸ç®—æ³•è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/740f5b7b.html alt=PHPæ€éº¼å¯¦ç¾åˆ†é åŠŸèƒ½ï¼Ÿï¼ˆåœ–æ–‡+è¦–é »æ•™ç¨‹ï¼‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e81c52a014dd4c34adcbfb26482bd690 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/740f5b7b.html title=PHPæ€éº¼å¯¦ç¾åˆ†é åŠŸèƒ½ï¼Ÿï¼ˆåœ–æ–‡+è¦–é »æ•™ç¨‹ï¼‰>PHPæ€éº¼å¯¦ç¾åˆ†é åŠŸèƒ½ï¼Ÿï¼ˆåœ–æ–‡+è¦–é »æ•™ç¨‹ï¼‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4e632b6e.html alt=PHPé€²éšæ•™ç¨‹-PHPçš„å”ç¨‹æ€éº¼ç©ï¼Ÿé€™ä¸€ç¯‡å¸¶ä½ æå®šswooleå”ç¨‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a646cf102cf74b4a953855ebedbc7d29 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4e632b6e.html title=PHPé€²éšæ•™ç¨‹-PHPçš„å”ç¨‹æ€éº¼ç©ï¼Ÿé€™ä¸€ç¯‡å¸¶ä½ æå®šswooleå”ç¨‹>PHPé€²éšæ•™ç¨‹-PHPçš„å”ç¨‹æ€éº¼ç©ï¼Ÿé€™ä¸€ç¯‡å¸¶ä½ æå®šswooleå”ç¨‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cd56e2f3.html alt=PHPé€²éšæ•™ç¨‹-PHPé‚„èƒ½ç©å¤šç·šç¨‹ï¼Ÿçœ‹æˆ‘æ€éº¼ç”¨å¤šç·šç¨‹å¯¦ç¾CCæ”»æ“Šå™¨ã€‚ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/cce9b3fb23ce41b88311823510e419da style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cd56e2f3.html title=PHPé€²éšæ•™ç¨‹-PHPé‚„èƒ½ç©å¤šç·šç¨‹ï¼Ÿçœ‹æˆ‘æ€éº¼ç”¨å¤šç·šç¨‹å¯¦ç¾CCæ”»æ“Šå™¨ã€‚>PHPé€²éšæ•™ç¨‹-PHPé‚„èƒ½ç©å¤šç·šç¨‹ï¼Ÿçœ‹æˆ‘æ€éº¼ç”¨å¤šç·šç¨‹å¯¦ç¾CCæ”»æ“Šå™¨ã€‚</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/637cf111.html alt=PHPé€²éšæ•™ç¨‹-phperéœ€è¦çŸ¥é“å¸¸é§å…§å­˜ä¸­çš„ä¸Šä¸‹æ–‡æ˜¯ä»€éº¼æ±è¥¿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/bc66832213514f2996f2e48c9e9cc747 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/637cf111.html title=PHPé€²éšæ•™ç¨‹-phperéœ€è¦çŸ¥é“å¸¸é§å…§å­˜ä¸­çš„ä¸Šä¸‹æ–‡æ˜¯ä»€éº¼æ±è¥¿>PHPé€²éšæ•™ç¨‹-phperéœ€è¦çŸ¥é“å¸¸é§å…§å­˜ä¸­çš„ä¸Šä¸‹æ–‡æ˜¯ä»€éº¼æ±è¥¿</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html alt=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ef25f91086df41eca76e35ff3434b003 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/45c31c17.html title=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼>PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html alt=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹æ©‹æ¥æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3719c139b93342fe9e5526fa59ca1c89 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b034084e.html title=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹æ©‹æ¥æ¨¡å¼>PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹æ©‹æ¥æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html alt=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹çµ„åˆæ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6f2acee37d624649ac7a592bfe5b29af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a89954da.html title=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹çµ„åˆæ¨¡å¼>PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹çµ„åˆæ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html alt=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹è£é£¾å™¨æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8cbbfcfedd544572a62adc6df84d2e60 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/baec5ab6.html title=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹è£é£¾å™¨æ¨¡å¼>PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹è£é£¾å™¨æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/854d0c39.html alt=Androidé€²éšï¼šå¿«é€Ÿå¯¦ç¾è‡ªå®šç¾©é™°å½±æ•ˆæœ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d9b37a24c58b4f60941881773a95c9cb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/854d0c39.html title=Androidé€²éšï¼šå¿«é€Ÿå¯¦ç¾è‡ªå®šç¾©é™°å½±æ•ˆæœ>Androidé€²éšï¼šå¿«é€Ÿå¯¦ç¾è‡ªå®šç¾©é™°å½±æ•ˆæœ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a0586cb.html alt=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹é©é…å™¨æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7c5019f7addc404d8c07f18f7dda0feb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a0586cb.html title=PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹é©é…å™¨æ¨¡å¼>PHPé€²éšæ•™ç¨‹-è¨­è¨ˆæ¨¡å¼ä¹‹é©é…å™¨æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html alt=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RkPMb9G6tipobr style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f09ac34c.html title=å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢>å½©è‰²é›»å­æ›¸åœ¨å»£å·ç‡å…ˆå¯¦ç¾é‡ç”¢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html alt=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdb044d821f74107a3fd9119fc34c642 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2d12804e.html title=[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§>[ç©è½‰MySQLä¹‹ä¹]MySQLå¯¦ç¾ACIDä¹‹åŸå­æ€§</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html alt="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fb2bc471.html title="ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†">ã€Œè­¯ã€ Spring çš„åˆ†ä½ˆå¼äº‹å‹™å¯¦ç¾â€”ä½¿ç”¨å’Œä¸ä½¿ç”¨ XAâ€”ç¬¬äºŒéƒ¨åˆ†</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>