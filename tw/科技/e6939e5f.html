<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>看了這篇就知道如何開發一個優秀的API | 极客快訊</title><meta property="og:title" content="看了這篇就知道如何開發一個優秀的API - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6939e5f.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6939e5f.html><meta property="article:published_time" content="2020-11-14T20:59:18+08:00"><meta property="article:modified_time" content="2020-11-14T20:59:18+08:00"><meta name=Keywords content><meta name=description content="看了這篇就知道如何開發一個優秀的API"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e6939e5f.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>看了這篇就知道如何開發一個優秀的API</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p>到目前為止，已經負責API接近兩年了，這兩年中發現現有的API存在的問題越來越多，但很多API一旦發佈後就不再能修改了，即時升級和維護是必須的。一旦API發生變化，就可能對相關的調用者帶來巨大的代價，用戶需要排查所有調用的代碼，需要調整所有與之相關的部分，這些工作對他們來說都是額外的。如果辛辛苦苦完成這些以後，還發現了相關的bug，那對用戶的打擊就更大。如果API經常發生變化，用戶就會失去對提供方失去信心，從而也會影響目前的業務。</p><p>但是我們為什麼還要修改API呢？為了API看起來更加漂亮？為了提供更多功能？為了提供更好的性能？還是僅僅覺得到了改變了時候了？對於用戶來說，他們更願意使用一個穩定但是看起來不那麼時髦的API，這並不意味著我們不再改進API了。當糟糕的API帶來的維護成本越來越大時，我想就是我們去重構它的時候。</p><p>如果可以回頭重新再做一遍，那麼我心目中的優秀的API應該是怎麼樣的？</p><p>判斷一個API是否優秀，並不是簡單地根據第一個版本給出判斷的，而是要看隨著時間的推移，該API是否還能存在，是否仍舊保持得不錯。槽糕的API接口各種各樣，但是好的API接口對於用戶來說必須滿足以下幾個點：</p><ul><li>易學習：有完善的文檔及提供儘可能多的示例和可copy－paste的代碼，像其他設計工作一樣，你應該應用最小驚訝原則。</li><li>易使用：沒有複雜的程序、複雜的細節，易於學習；靈活的API允許按字段排序、可自定義分頁、 排序和篩選等。一個完整的API意味著被期望的功能都包含在內。</li><li>難誤用：對詳細的錯誤提示，有些經驗的用戶可以直接使用API而不需要閱讀文檔。</li></ul><p>而對於開發人員來說，要求又是不一樣的：</p><ul><li>易閱讀：代碼的編寫只需要一次一次，但是當調試或者修改的時候都需要對代碼進行閱讀。</li><li>易開發：個最小化的接口是使用儘可能少的類以及儘可能少的類成員。這樣使得理解、記憶、調試以及改變API更容易。</li></ul><p>如何做到以上幾點，以下是一些總結：</p><p><strong>1、 面向用例設計</strong></p><p>如果一個API被廣泛使用了，那麼就不可能瞭解所有使用該API的用戶。如果設計者希望能夠設計出被廣泛使用的API，那麼必須站在用戶的角度來理解如何設計API庫，以及如何才能設計出這樣的API庫。</p><p><strong>2、 採用良好的設計思路</strong></p><p>在設計過程中，如果能按照下面的方式來進行設計，會讓這個API生命更長久</p><ul><li>面向用例的設計，收集用戶建議，把自己模擬成用戶，保證API設計的易用和合理</li><li>保證後續的需求可以通過擴展的形式完成</li><li>第一版做盡量少的內容，由於新需求可以通過擴展的形式完成，因此儘量少做事情是抑制API設計錯誤的一個有效方案</li><li>對外提供清晰的API和文檔規範，避免用戶錯誤的使用API，尤其是避免API（見第一節）靠後級別的API被用戶知曉與誤用</li></ul><p>除此之外，下面還列出了一些具體的設計方法：</p><ul><li>方法優於屬性</li><li>工廠方法優於構造函數</li><li>避免過多繼承</li><li>避免由於優化或者複用代碼影響API</li><li>面向接口編程</li><li>擴展參數應當是便利的</li><li>對組件進行合理定位，確定暴露多少接口</li><li>提供擴展點</li></ul><p><strong>3、 避免極端的意見</strong></p><p>在設計API的時候，一定要避免任何極端的意見，尤其是以下幾點：</p><ul><li>必須漂亮（API不一定需要漂亮）</li><li>API必須被正確地使用（用戶很難理解如何正確的使用API，API的設計者要充分考慮API被誤用的情況：如果一個API可能會被誤用，那麼它一定會被誤用）</li><li>必須簡單（我們總會面臨複雜的需求，能兩者兼顧的API是更好的API）</li><li>必須高性能（性能可以通過其他手段優化，不應該影響API的設計）</li><li>必須絕對兼容（儘管本文一直提到如何保證兼容，但是我們仍然要意識到，一些極少情況下會遇到的不兼容是可以容忍的）</li></ul><p><strong>4、 有效的API評審</strong></p><p>API設計完成以後，需要經過周密的設計評審，評審的重點如下：</p><ul><li>用例驅動，評審前必須提供完善的使用用例，確保用例的合理性和完備性。</li><li>一致性，是否與系統中其他模塊的接口風格一致，是否與對稱接口的設計一致。</li><li>簡單明瞭，API應該簡單好理解，容易學習和使用的API才不容易被誤用，給我們帶來更多的麻煩。</li><li>API儘可能少，如果一個API可以暴露也可以不暴露，那麼就不要暴露他，等到用戶真正有需求的時候再將它成為一個公開接口也不遲。</li><li>支持持續改進，API是否能夠方便地通過擴展的方式增加功能和優化。</li></ul><p><strong>5、 提高API的可測試性</strong></p><p>API需要是可測試的，測試不應依賴實現，測試充分的API，尤其是經過了嚴格的“兼容性整合測試”的API，更能保證在升級的過程中不出現兼容性問題。兼容性整合測試，是指一組測試用例集合，這組測試用例會站在使用者的立場上使用API。在API升級以後，再檢測這組測試用例是否能完全符合預期的通過測試，儘可能的發現兼容性問題。</p><p><strong>6、 保證API的向後兼容</strong></p><p>對於每一個API的設計者來說，都渴望做到“向後兼容”，因為不管是現在的API用戶，還是潛在的API用戶，都只信任那些可兼容的API。但向後兼容有多個層次上的意義，而且不同層次的向後兼容，也意味著不同的重要性和複雜度。</p><p><strong>7、 保持逐步改善</strong></p><p>過去我們總希望能將現有的“不合理”的設計完全推翻，然後按照現在“美好”的思路，重新設計這個API，但是在一段時間以後，又會碰到一樣的狀況，需要再推翻一次。 如果我們沒有有效的逐步改善的辦法，依靠推翻現有設計，重新設計API只能讓我們回到起點，然後重現之前的過程。 要有一套行之有效的持續改善的辦法來在API兼容的同時，改善API使之更好。</p><p><strong>8、 把握API的生命週期</strong></p><p>每一個API都是有生命週期的，我們需要讓API的生命週期更長，並且在API的生命週期結束時能讓其平滑的消亡。</p><ul><li>告訴用戶我們是如何設計的，避免誤用，提供指導，錯誤的使用往往是縮短API壽命的一大殺手</li><li>提供試用期，API不可能一開始就是穩定，經過試用的API才能有更強的生命力</li><li>為API分級：內部使用；二次開發使用；開發或試用中；穩定；棄用API。避免API被濫用的同時，我們可以通過調整API的級別，來擴大其影響力，也能更優雅的結束一個API的生命週期。</li></ul><p>開發API的過程其實就是一個溝通交流的過程。溝通的雙方就是API用戶和API設計者。</p><p><strong>9、 一些具體的實施方案</strong></p><p>在一個API不可避免要消亡或者改變的時候，我們應該接受並且面對這個事實，下面列舉了幾種保證兼容性的前提下，對API進行調整的辦法：</p><ul><li>將API標記為棄用，重新建立一個新的API。如果一個API不可避免要被消亡，這是唯一的辦法。</li><li>為其添加額外的參數或者參數選項來實現功能添加</li><li>將現有API拆成兩部分，提供一個精簡的核心API，過去的API通過封裝核心API上實現。這通常用於解決用戶需要一個代碼精簡的版本時。</li><li>在現有的API基礎上進行封裝，提供一個功能更豐富的包或者類</li></ul><p><strong>一些好的API示例：</strong></p><ol><li>Flickr API，這裡是文檔的示例，同時提供了一個非常方便的API測試工具。</li><li>Mediawiki API</li><li>Ebay API，這裡有一個非常詳盡的文檔示例。</li></ol><p>轉載地址：http://www.apkbus.com/blog-822715-68552.html</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>這篇</a></li><li><a>開發</a></li><li><a>一個</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/04325a58.html alt=如何開發一個商城網站？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/419032d87ab348289bf357c4e6b3379f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/04325a58.html title=如何開發一個商城網站？>如何開發一個商城網站？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0e6e909b.html alt=一個企業信息化的開發基礎平臺Maple class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0c43eea204dc410192e52f15450feaae style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0e6e909b.html title=一個企業信息化的開發基礎平臺Maple>一個企業信息化的開發基礎平臺Maple</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1653bd2a.html alt=建設開發一個類似工品彙商城的工業用品電商平臺網站大概多少錢？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0a381799697c4b3fa51a1e35fe1ac849 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1653bd2a.html title=建設開發一個類似工品彙商城的工業用品電商平臺網站大概多少錢？>建設開發一個類似工品彙商城的工業用品電商平臺網站大概多少錢？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb4ae2c.html alt=開發一個APP固然重要，但進行APP推廣才是重中之重 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/78932312a70b418dad13954eedc79765 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb4ae2c.html title=開發一個APP固然重要，但進行APP推廣才是重中之重>開發一個APP固然重要，但進行APP推廣才是重中之重</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ac25d2d0.html alt=30分鐘教你搭建一個網站（一）：購買和配置服務器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5f26f1582a564e93bde33a7dd9448c3b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ac25d2d0.html title=30分鐘教你搭建一個網站（一）：購買和配置服務器>30分鐘教你搭建一個網站（一）：購買和配置服務器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d8be5e94.html alt=不會買服務器？一個辦法讓你輕鬆搭網站 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/84d9c54578de46058796824f1bcb6a9b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d8be5e94.html title=不會買服務器？一個辦法讓你輕鬆搭網站>不會買服務器？一個辦法讓你輕鬆搭網站</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c811c5f7.html alt=使用服務器搭建一個網站 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/63a6cc0eb4d146e0890515500c0040ca style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c811c5f7.html title=使用服務器搭建一個網站>使用服務器搭建一個網站</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4b69aa7f.html alt=做一個小型網站，服務器需要什麼配置的呢？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4b69aa7f.html title=做一個小型網站，服務器需要什麼配置的呢？>做一個小型網站，服務器需要什麼配置的呢？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/eee4b8ad.html alt=搭建一個網站，租服務器大概多少錢？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/eee4b8ad.html title=搭建一個網站，租服務器大概多少錢？>搭建一個網站，租服務器大概多少錢？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62d46b38.html alt=素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5e7b0005767168b2b87d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62d46b38.html title=素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！>素描祕籍｜一個耳朵！9大知識點，360度全方位深度剖析講解示範！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/647df9c2.html alt=一個男人每天24小時跟妻子在一起，久而久之會怎樣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8359cc22f03e478a8cdb889dcfea3f99 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/647df9c2.html title=一個男人每天24小時跟妻子在一起，久而久之會怎樣>一個男人每天24小時跟妻子在一起，久而久之會怎樣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5a86d7d9.html alt=每天一個好習慣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RKdGgquJFM6gnc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5a86d7d9.html title=每天一個好習慣>每天一個好習慣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/756b16fb.html alt=奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/dfic-imagehandler/3fd8ec4e-64c1-446a-adfa-38088fb06c01 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/756b16fb.html title=奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點>奶粉寄出一個月，家人遲遲收不到，物流信息也查詢不到，事發阜陽某韻達快遞網點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b29ee719.html alt=又一個走上不歸路的搬磚人 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/bf471da0a06441f88bce49b959234257 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b29ee719.html title=又一個走上不歸路的搬磚人>又一個走上不歸路的搬磚人</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d6d5661.html alt=多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/833949926ebf49b89c5fb4075a9cffdd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d6d5661.html title=多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏>多收藏一個，就少求一次人—哪些日常必備神級網站，真正值得收藏</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>