<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>常見的網站故障分析 | 极客快訊</title><meta property="og:title" content="常見的網站故障分析 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e6db71a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e6db71a.html><meta property="article:published_time" content="2020-10-29T21:06:16+08:00"><meta property="article:modified_time" content="2020-10-29T21:06:16+08:00"><meta name=Keywords content><meta name=description content="常見的網站故障分析"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e6db71a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>常見的網站故障分析</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>網站運行一段時間後，會出現各種各樣的故障，對於需要進行壓力測試，關注系統性能的同學瞭解常見的引起故障的原因可以很好地拓展測試的思路，下面和大家分享一下常見的故障及原因：</p><hr><h1 class=pgc-h-arrow-right>1、寫日誌引起故障</h1><p><strong>故障分析：</strong>由於開發人員將log輸出的level全局配置成debug。導致一次請求就會產生大量的log文件，在高併發的用戶請求下，很快就消耗完磁盤空間</p><p><strong>解決方案：</strong>配置日誌輸出的級別，至少為warn，檢查log輸出代碼調用，開源的第三方組件也會輸出error日誌，需要關閉</p><h1 class=pgc-h-arrow-right>2、高併發下鎖引發的故障</h1><p><strong>故障分析：</strong>程序中的某個單例對象中多處使用了synchronized，由於this對象只有一個，所有的併發請求都要排隊獲得這唯一的一把鎖。但是如果某個遠程操作也加了這個鎖，每次都是佔用很長的時間，其他的用戶線程都在等待，響應超時。這個操作執行完後釋放鎖，其他線程執行，超時解除。</p><p><strong>解決方案：</strong>謹慎使用鎖</p><h1 class=pgc-h-arrow-right>3、數據庫高併發訪問引發的故障</h1><p><strong>故障現象：</strong>沒有新應用發佈，但是數據庫服務器突然load飆升，並很快失去響應。DBA將數據庫訪問切換到備機，load也很快飆升，並失去響應。</p><p><strong>原因分析：</strong>數據庫查詢時，一條sql已經使用了索引，但是由於執行頻率非常高，超過正常水平，繼續定位發現是因為網站首頁調用了，而首頁是被訪問最頻繁的頁面。</p><p><strong>解決方案：</strong>首頁不應該訪問數據庫，首頁需要的數據可以從緩存服務器或者搜索引擎服務器獲取，並且首頁最好是靜態的</p><h1 class=pgc-h-arrow-right>4、應用啟動不同步引發的故障</h1><p><strong>故障現象：</strong>應用發佈後，服務器立即崩潰。</p><p><strong>原因分析：</strong>應用程序web環境使用apache和JBOSS的模式，apache完成啟動了，但是jbosss還沒有完全啟動，大量請求阻塞在jboss進程中，最終導致jboss崩潰。類似的情況有後臺服務還沒有準備好，前臺應用已經打開</p><p><strong>解決方案：</strong>在應用程序的特定頁面加入一個動態頁面，比如只返回ok兩個字母，啟動腳本先啟動jboss，然後在腳本中不斷用curl命令訪問這個特定頁面，直到收到ok，才啟動apache。</p><h1 class=pgc-h-arrow-right>5、大文件讀寫獨佔磁盤引發的故障</h1><p><strong>故障現象：</strong>上傳圖片非常慢，原來只需要一兩秒，現在需要等待幾十秒，有時候還會超時。</p><p><strong>原因分析</strong>：圖片需要存儲，最可能出錯的地方是存儲服務器。大文件有數百M,讀寫這些大文件需要幾十秒，這段時間磁盤被獨佔，導致其他用戶的文件操作緩慢。</p><p><strong>解決方案</strong>：存儲 的使用需要根據不同的文件類型和用途進行管理，圖片都是小文件，應用使用專門的服務器，不能與大文件共用存儲，批處理用的大文件可以使用其他類型的分佈式文件系統。</p><h1 class=pgc-h-arrow-right>6、濫用生產環境引發的故障</h1><p><strong>故障現象：</strong>某個時間段，應用突然變慢，內部網絡訪問延遲非常厲害</p><p><strong>原因分析</strong>：網卡流量下降，沒有找到原因。過了一陣子，發現是測試工程師在生產環境進行壓力測試佔用了帶寬</p><p><strong>解決方案：</strong>訪問線上環境要規範</p><h1 class=pgc-h-arrow-right>7、不規範的流程引發的故障</h1><p><strong>故障現象</strong>：應用發佈後，數據了load迅速飆升，回滾發佈後報警消除。</p><p><strong>原因分析：</strong>發現應用發佈後出現大量的數據庫讀操作，而這些數據本來應該從分佈式緩存中讀取，檢出緩存，發現數據已經被緩存了。檢查代碼發現訪問緩存的代碼被註釋掉了，原來工程師在開放的時候，調試特意註釋掉讀取緩存的代碼，結果忘記去掉註釋了</p><p><strong>解決方案：</strong>代碼提交前使用diff命令進行代碼比較，確認沒有提交不該提交的代碼</p><h1 class=pgc-h-arrow-right>8、不好的編程習慣引發的故障</h1><p><strong>故障現象：</strong>應用更新某功能後，有少量用戶投訴無法正常訪問，點擊報錯</p><p><strong>原因分析</strong>：分析這些用戶，都是第一次使用該功能，檢查代碼，發現程序根據歷史使用記錄構造一個對象，如果該對象為null，則會導致空指針。</p><p><strong>解決方案：</strong>程序在處理一個輸入的對象時，如果不能明確該對象是否為空，必須做空指針判斷</p><p>程序在調用其他方法時，輸入的對象儘量保證不是null，必要時構造空對象</p><h1 class=pgc-h-arrow-right>9、緩存引發的故障</h1><p><strong>故障現象：</strong>沒有新應用發佈，數據庫服務負載飆升，並很快失去響應，DBA將數據庫切換到備機，load還是很快飆升，失去響應，最終網站癱瘓。</p><p><strong>原因分析：</strong>緩存服務器在網站服務器集群中的地位一直比較低，服務器配置和管理級別都比其他服務器要低一些。人們都認為緩存是改善性能的手段，都是一些緩存也沒什麼問題，有時候關閉一兩臺緩存服務器也確實對應用沒有明顯影響，結果一個缺乏經驗的工程師關閉了緩存服務器集群中全部的十幾臺memcached服務器。導致了網站全部癱瘓。</p><p><strong>解決方案：</strong>對緩存的管理要提高到和其他服務器一個級別，不能輕視。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>常見</a></li><li><a>網站</a></li><li><a>故障</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/d736b143.html alt=迴轉分級篩的常見故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/26cf41a86ef84e8ba3dc28d4e1d9f814 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d736b143.html title=迴轉分級篩的常見故障>迴轉分級篩的常見故障</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1544ed55.html alt=電動機的常見故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1544ed55.html title=電動機的常見故障>電動機的常見故障</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1a2d16a7.html alt=常見電動機故障分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1ceee795680545c0a472298756df47bd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1a2d16a7.html title=常見電動機故障分析>常見電動機故障分析</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/3132794b.html alt=常見的網站攻擊方式和防護方法（小白通俗篇） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/3132794b.html title=常見的網站攻擊方式和防護方法（小白通俗篇）>常見的網站攻擊方式和防護方法（小白通俗篇）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/91c2d13b.html alt=電容器常見的故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3a22094b643f4f688e8bf0f7d0fc76bb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/91c2d13b.html title=電容器常見的故障>電容器常見的故障</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/62376994.html alt=CAN總線故障的常見故障與檢修方法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a1201f9c4cc5412da5a2152d09d1b887 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/62376994.html title=CAN總線故障的常見故障與檢修方法>CAN總線故障的常見故障與檢修方法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/152ccc20.html alt=鬥式提升機5類故障常見故障解讀，及維護保養祕訣 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/66ae00050ed68641deae style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/152ccc20.html title=鬥式提升機5類故障常見故障解讀，及維護保養祕訣>鬥式提升機5類故障常見故障解讀，及維護保養祕訣</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/611de3d9.html alt=鬥式提升機的常見故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5b96df35281741889593544886b9dc06 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/611de3d9.html title=鬥式提升機的常見故障>鬥式提升機的常見故障</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03dde91.html alt=數控加工中心常見的故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3944152272864ceda96c7d24d9da4232 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03dde91.html title=數控加工中心常見的故障>數控加工中心常見的故障</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f37dc4d.html alt=汽車常見故障：廢氣再循環系統故障分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/de4ac07f58e946ea8157dc1294220dd2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f37dc4d.html title=汽車常見故障：廢氣再循環系統故障分析>汽車常見故障：廢氣再循環系統故障分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bd224a3.html alt=離合器的常見故障 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/49c5af60807f4c2ca3bbd21df4ae2ee2 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bd224a3.html title=離合器的常見故障>離合器的常見故障</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/ad0062e.html alt=千分尺常見故障排除 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=http://p1.pstatp.com/large/pgc-image/1529655830148f280527917 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/ad0062e.html title=千分尺常見故障排除>千分尺常見故障排除</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/07ed115b.html alt=化工常見實驗儀器及表徵儀器原理動畫 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1c6f9ee6148943499d7bc3d62aefe0ea style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/07ed115b.html title=化工常見實驗儀器及表徵儀器原理動畫>化工常見實驗儀器及表徵儀器原理動畫</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/005f5437.html alt=哪些網站可以使用雲服務器呢 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ad0017473d694263a74bf6ca9dd5b544 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/005f5437.html title=哪些網站可以使用雲服務器呢>哪些網站可以使用雲服務器呢</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24092427.html alt=在自己的電腦上搭建服務器，發佈自己的網站 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24092427.html title=在自己的電腦上搭建服務器，發佈自己的網站>在自己的電腦上搭建服務器，發佈自己的網站</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>