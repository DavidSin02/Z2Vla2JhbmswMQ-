<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ | æå®¢å¿«è¨Š</title><meta property="og:title" content="ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/322c0001962a9d0a3860"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7b4670e.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7b4670e.html><meta property="article:published_time" content="2020-10-29T21:09:16+08:00"><meta property="article:modified_time" content="2020-10-29T21:09:16+08:00"><meta name=Keywords content><meta name=description content="ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e7b4670e.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><div><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/322c0001962a9d0a3860></p><p><strong>CATransformLayer</strong></p><p>æˆ‘å€‘å…ˆçœ‹ä¸€ä¸‹ç³»çµ±æœ‰æ²’æœ‰åƒä¹‹å‰è¬›éçš„å¹¾å€‹å­é¡ä¸€æ¨£ï¼Œçµ¦å®ƒä¸€äº›ç‰¹æ®Šçš„å±¬æ€§æˆ–è€…æ–¹æ³•ï¼š</p><p><code>@interface CATransformLayer : CALayer</code></p><p><code>@end</code></p><p>å•¥éƒ½æ²’æœ‰ï¼Œæˆ‘æ“¦å˜ï¼Œä½†æ˜¯ä¸Šé¢å¥½åƒæœ‰ä¸€æ®µæè¿°æˆ‘å€‘çœ‹ä¸€ä¸‹ï¼š</p><p><code>/* "Transform" layers are used to create true 3D layer hierarchies.</code></p><p><code></code><code>*</code></p><p><code></code><code>* Unlike normal layers, transform layers do not project (i.e. flatten)</code></p><p><code></code><code>* their sublayers into the plane at Z=0. However due to this neither</code></p><p><code></code><code>* do they support many features of the 2D compositing model:</code></p><p><code></code><code>*</code></p><p><code></code><code>* - only their sublayers are rendered (i.e. no background, contents,</code></p><p><code></code><code>* border)</code></p><p><code></code><code>*</code></p><p><code></code><code>* - filters, backgroundFilters, compositingFilter, mask, masksToBounds</code></p><p><code></code><code>* and shadow related properties are ignored (they all assume 2D</code></p><p><code></code><code>* image processing of the projected layer)</code></p><p><code></code><code>*</code></p><p><code></code><code>* - opacity is applied to each sublayer individually, i.e. the transform</code></p><p><code></code><code>* layer does not form a compositing group.</code></p><p><code></code><code>*</code></p><p><code></code><code>* Also, the -hitTest: method should never be called on transform</code></p><p><code></code><code>* layers (they do not have a 2D coordinate space into which to map the</code></p><p><code></code><code>* supplied point.) CALayer will pass over transform layers directly to</code></p><p><code></code><code>* their sublayers, applying the effects of the transform layer's</code></p><p><code></code><code>* geometry when hit-testing each sublayer. */</code></p><p>æˆ‘å€‘å¾ä¸­å¯ä»¥çœ‹å‡ºå®ƒä½œç‚ºçˆ¶Layeræ™‚ï¼Œå°ä»–çš„sublayersæœƒæœ‰3Dæ•ˆæœï¼Œä¹Ÿå°±æ˜¯èªªä¸å¹³é¢åŒ–å®ƒçš„å­åœ–å±¤ï¼Œå¤§å®¶ä¸€æåˆ°3Dæ•ˆæœï¼Œå°±æœƒæƒ³åˆ°ä¸€å€‹ç¥å¥‡çš„æ±è¥¿æ™¯æ·±ï¼Œå…ˆèªªä¸€ä¸‹æ™¯æ·±æ˜¯å€‹ä»€éº¼æ±è¥¿ï¼Œæåˆ°æ™¯æ·±ï¼Œé‚£æˆ‘å€‘å°±ä¸€å®šè¦èªªCATransform3Dï¼Œå®ƒå®šç¾©äº†ä¸€å€‹4x4 çš„ CGFloatå€¼çš„çŸ©é™£ï¼Œå°±æ˜¯é€™æ¨£çš„ï¼š</p><p><code>struct CATransform3D</code></p><p><code>{</code></p><p><code></code><code>CGFloat m11, m12, m13, m14;</code></p><p><code></code><code>CGFloat m21, m22, m23, m24;</code></p><p><code></code><code>CGFloat m31, m32, m33, m34;</code></p><p><code></code><code>CGFloat m41, m42, m43, m44;</code></p><p><code>}</code></p><p>å…¶ä¸­çš„m34ï¼Œå°±æ˜¯ä¸Šé¢æåˆ°çš„æ™¯æ·±æ•ˆæœçš„æºé ­ï¼Œæˆ‘å€‘å¯«ä¸€æ®µä»£ç¢¼çœ‹ä¸€ä¸‹ï¼š</p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>// Do any additional setup after loading the view, typically from a nib.</code></p><p><code></code><code>CALayer *layer_ = [CALayer layer];</code></p><p><code></code><code>layer_.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer_.position = CGPointMake(self.view.center.x, 200);</code></p><p><code></code><code>layer_.opacity = 0.6;</code></p><p><code></code><code>layer_.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer_.borderWidth = 5;</code></p><p><code></code><code>layer_.borderColor = [[UIColor greenColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer_.cornerRadius = 20;</code></p><p><code></code><code>layer_.masksToBounds = YES;</code></p><p><code></code><code>[self.view.layer addSublayer:layer_];</code></p><p><code></code><code>//</code></p><p><code></code><code>CATransform3D fromValue_ = CATransform3DIdentity;</code></p><p><code></code><code>fromValue_ = CATransform3DRotate(fromValue_, M_PI_2 / 2, 0, 1, 0);</code></p><p><code></code><code>layer_.transform = fromValue_;</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer.position = self.view.center;</code></p><p><code></code><code>layer.opacity = 0.6;</code></p><p><code></code><code>layer.backgroundColor = [UIColor blueColor].CGColor;</code></p><p><code></code><code>layer.borderWidth = 5;</code></p><p><code></code><code>layer.borderColor = [[UIColor orangeColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 20;</code></p><p><code></code><code>layer.masksToBounds = YES;</code></p><p><code></code><code>[self.view.layer addSublayer:layer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CATransform3D fromValue = CATransform3DIdentity;</code></p><p><code></code><code>fromValue.m34 = 1.0 / -500;</code></p><p><code></code><code>fromValue = CATransform3DRotate(fromValue, M_PI_2 / 2, 0, 1, 0);</code></p><p><code></code><code>layer.transform = fromValue;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/322d00042e798384e986></p><p>æ˜¯ä¸æ˜¯æ˜é¡¯ç™¼ç¾è—è‰²çš„layer3Dæ•ˆæœæ›´å¼·çƒˆä¸€äº›ã€‚</p><p>ä¸‹é¢æˆ‘å€‘è©¦ä¸€ä¸‹é€™æ¨£çš„ä»£ç¢¼ï¼š</p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer.opacity = 0.6;</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.borderWidth = 5;</code></p><p><code></code><code>layer.borderColor = [[UIColor greenColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 20;</code></p><p><code></code><code>layer.masksToBounds = YES;</code></p><p><code></code><code>CALayer *layer_2 = [CALayer layer];</code></p><p><code></code><code>layer_2.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer_2.opacity = 0.6;</code></p><p><code></code><code>layer_2.backgroundColor = [UIColor blueColor].CGColor;</code></p><p><code></code><code>layer_2.borderWidth = 5;</code></p><p><code></code><code>layer_2.borderColor = [[UIColor orangeColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer_2.cornerRadius = 20;</code></p><p><code></code><code>layer_2.masksToBounds = YES;</code></p><p><code></code><code>//</code></p><p><code></code><code>CALayer *containerLayer = [CALayer layer];</code></p><p><code></code><code>containerLayer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>containerLayer.position = self.view.center;</code></p><p><code></code><code>layer.position = CGPointMake(50, 50);</code></p><p><code></code><code>layer_2.position = CGPointMake(50, 50);</code></p><p><code></code><code>[containerLayer addSublayer:layer];</code></p><p><code></code><code>[containerLayer addSublayer:layer_2];</code></p><p><code></code><code>[self.view.layer addSublayer:containerLayer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CATransform3D containerTransform = CATransform3DIdentity;</code></p><p><code></code><code>containerTransform.m34 = -1.0 / 500.0;</code></p><p><code></code><code>containerLayer.transform = containerTransform;</code></p><p><code></code><code>//</code></p><p><code></code><code>CATransform3D fromValue = CATransform3DIdentity;</code></p><p><code></code><code>fromValue = CATransform3DRotate(fromValue, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>fromValue = CATransform3DTranslate(fromValue, 0, 0, -10);</code></p><p><code></code><code>layer.transform = fromValue;</code></p><p><code></code><code>CATransform3D fromValue_2 = CATransform3DIdentity;</code></p><p><code></code><code>fromValue_2 = CATransform3DRotate(fromValue_2, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>fromValue_2 = CATransform3DTranslate(fromValue_2, 0, 0, -50);</code></p><p><code></code><code>layer_2.transform = fromValue_2;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼Œä¸€ç‰‡ç©ºç™½ï¼Œå•¥éƒ½æ²’æœ‰ã€‚</p><p>æˆ‘å€‘åšä¸€è™•æ”¹å‹•ï¼š</p><p>1</p><p><code>CATransformLayer *containerLayer = [CATransformLayer layer];</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/32100004d63d26bbca87></p><p>??ï¼šæ‰€ä»¥æœ‰äººèªªCATransformLayerä¾¿æ˜¯çµ¦ä»–çš„å­åœ–å±¤æ·»åŠ äº†æ™¯æ·±çš„æ•ˆæœã€‚çæï¼ŒæŠŠè¨­ç½®æ™¯æ·±çš„ä»£ç¢¼containerTransform.m34 = -1.0 / 500.0;å»æ‰ï¼Œé‹è¡Œï¼Œä½ æœƒç™¼ç¾é‚„æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚é€™å°±èªªæ˜CATransformLayerä¸¦ä¸æ˜¯é€™éº¼å€‹ä½œç”¨ã€‚é‚£é€™å€‹æ±è¥¿çš„ç‰¹æ®Šä¹‹è™•ç©¶ç«Ÿæ˜¯ä»€éº¼å‘¢ï¼Ÿ</p><p>å…¶å¯¦å°±æ˜¯ä¸Šé¢èªªçš„ï¼šCATransformLayerä¸¦ä¸å¹³é¢åŒ–å®ƒçš„å­åœ–å±¤ï¼Œæ‰€ä»¥å®ƒèƒ½å¤ ç”¨æ–¼æ§‹é€ ä¸€å€‹å±¤ç´šåˆ†æ˜çš„3Dçµæ§‹ã€‚</p><p>ä¸Šä»£ç¢¼ï¼š</p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer.opacity = 0.6;</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.borderWidth = 5;</code></p><p><code></code><code>layer.borderColor = [[UIColor greenColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 20;</code></p><p><code></code><code>layer.masksToBounds = YES;</code></p><p><code></code><code>CALayer *containerLayer = [CALayer layer];</code></p><p><code></code><code>containerLayer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>containerLayer.position = self.view.center;</code></p><p><code></code><code>layer.position = CGPointMake(50, 50);</code></p><p><code></code><code>layer_2.position = CGPointMake(50, 50);</code></p><p><code></code><code>[containerLayer addSublayer:layer];</code></p><p><code></code><code>[self.view.layer addSublayer:containerLayer];</code></p><p><code></code><code>CATransform3D containerTransform = CATransform3DIdentity;</code></p><p><code></code><code>containerLayer.transform = containerTransform;</code></p><p><code></code><code>CATransform3D fromValue = CATransform3DIdentity;</code></p><p><code></code><code>fromValue = CATransform3DRotate(fromValue, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>layer.transform = fromValue;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼šä¸å‡ºæ‰€æ–™ï¼Œä¸€ç‰‡ç©ºç™½ã€‚</p><p>æ–¼æ˜¯ï¼Œæˆ‘å€‘æŠŠcontainerLayerç”±CALayeræ”¹æˆCATransformLayer ï¼Œçµæœï¼Œé‚„æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚</p><p>ç¾åœ¨ï¼Œä½ è‚¯å®šè¦ºçš„æˆ‘ä¹Ÿæ˜¯åœ¨æ‰¯æ·¡ï¼Œä¸‹é¢ç²¾å½©çš„éƒ¨åˆ†ä¾†äº†ï¼š</p><p>æˆ‘å€‘çµ¦containerLayeræ·»åŠ ä¸€å€‹æ–°çš„transformï¼Œä»£ç¢¼ä¹Ÿå°±æ˜¯é€™æ¨£çš„ï¼š</p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>layer.opacity = 0.6;</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.borderWidth = 5;</code></p><p><code></code><code>layer.borderColor = [[UIColor greenColor] colorWithAlphaComponent:0.4].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 20;</code></p><p><code></code><code>layer.masksToBounds = YES;</code></p><p><code></code><code>CALayer *containerLayer = [CALayer layer];</code></p><p><code></code><code>containerLayer.bounds = CGRectMake(0, 0, 100, 100);</code></p><p><code></code><code>containerLayer.position = self.view.center;</code></p><p><code></code><code>layer.position = CGPointMake(50, 50);</code></p><p><code></code><code>layer_2.position = CGPointMake(50, 50);</code></p><p><code></code><code>[containerLayer addSublayer:layer];</code></p><p><code></code><code>[self.view.layer addSublayer:containerLayer];</code></p><p><code></code><code>CATransform3D containerTransform = CATransform3DIdentity;</code></p><p><code></code><code>//çœ‹é€™ï¼Œæˆ‘æ˜¯æ–°åŠ çš„</code></p><p><code></code><code>containerTransform = CATransform3DRotate(containerTransform, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>//</code></p><p><code></code><code>containerLayer.transform = containerTransform;</code></p><p><code></code><code>CATransform3D fromValue = CATransform3DIdentity;</code></p><p><code></code><code>fromValue = CATransform3DRotate(fromValue, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>layer.transform = fromValue;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/32100004d63cb1ed7d8d></p><p>ç¾åœ¨ï¼Œæˆ‘å€‘å†æŠŠcontainerLayerç”±CATransformLayeræ”¹æˆCALayer ï¼Œçµæœï¼Œä¸€ç‰‡ç©ºç™½ï¼ä½ æ˜¯ä¸æ˜¯æ˜ç™½äº†å‘¢ï¼Ÿå…¶å¯¦é‚„æ˜¯ä¸Šé¢é‚£å¥è©±ï¼</p><p>æˆ‘å€‘åˆ©ç”¨å®ƒä¾†åšä¸€å€‹ç«‹æ–¹é«”ï¼š</p><p><code>#import "ViewController.h"</code></p><p><code>@interface ViewController (){</code></p><p><code></code><code>CGPoint startPoint;</code></p><p><code></code><code>CATransformLayer *s_Cube;</code></p><p><code></code><code>float pix, piy;</code></p><p><code>}</code></p><p><code>@end</code></p><p><code>@implementation ViewController</code></p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>// Do any additional setup after loading the view, typically from a nib.</code></p><p><code></code><code>//</code></p><p><code></code><code>CATransform3D c1t = CATransform3DIdentity;</code></p><p><code></code><code>CALayer *cube1 = [self cubeWithTransform:c1t];</code></p><p><code></code><code>s_Cube = (CATransformLayer *)cube1;</code></p><p><code></code><code>[self.view.layer addSublayer:cube1];</code></p><p><code>}</code></p><p><code>- (CALayer *)faceWithTransform:(CATransform3D)transform color:(UIColor*)color</code></p><p><code>{</code></p><p><code></code><code>CALayer *face = [CALayer layer];</code></p><p><code></code><code>face.frame = CGRectMake(-50, -50, 100, 100);</code></p><p><code></code><code>face.backgroundColor = color.CGColor;</code></p><p><code></code><code>face.transform = transform;</code></p><p><code></code><code>return</code> <code>face;</code></p><p><code>}</code></p><p><code>- (CALayer *)cubeWithTransform:(CATransform3D)transform</code></p><p><code>{</code></p><p><code></code><code>//å®¹å™¨</code></p><p><code></code><code>CATransformLayer *cube = [CATransformLayer layer];</code></p><p><code></code><code>//å‰</code></p><p><code></code><code>CATransform3D ct = CATransform3DMakeTranslation(0, 0, 50);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor redColor]]];</code></p><p><code></code><code>//å³</code></p><p><code></code><code>ct = CATransform3DMakeTranslation(50, 0, 0);</code></p><p><code></code><code>ct = CATransform3DRotate(ct, M_PI_2, 0, 1, 0);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor yellowColor]]];</code></p><p><code></code><code>//ä¸Š</code></p><p><code></code><code>ct = CATransform3DMakeTranslation(0, -50, 0);</code></p><p><code></code><code>ct = CATransform3DRotate(ct, M_PI_2, 1, 0, 0);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor blueColor]]];</code></p><p><code></code><code>//ä¸‹</code></p><p><code></code><code>ct = CATransform3DMakeTranslation(0, 50, 0);</code></p><p><code></code><code>ct = CATransform3DRotate(ct, -M_PI_2, 1, 0, 0);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor brownColor]]];</code></p><p><code></code><code>//å·¦</code></p><p><code></code><code>ct = CATransform3DMakeTranslation(-50, 0, 0);</code></p><p><code></code><code>ct = CATransform3DRotate(ct, -M_PI_2, 0, 1, 0);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor greenColor]]];</code></p><p><code></code><code>//å¾Œ</code></p><p><code></code><code>ct = CATransform3DMakeTranslation(0, 0, -50);</code></p><p><code></code><code>ct = CATransform3DRotate(ct, M_PI, 0, 1, 0);</code></p><p><code></code><code>[cube addSublayer:[self faceWithTransform:ct color:[UIColor orangeColor]]];</code></p><p><code></code><code>//</code></p><p><code></code><code>CGSize containerSize = self.view.bounds.size;</code></p><p><code></code><code>cube.position = CGPointMake(containerSize.width / 2.0,</code></p><p><code></code><code>containerSize.height / 2.0);</code></p><p><code></code><code>cube.transform = transform;</code></p><p><code></code><code>return</code> <code>cube;</code></p><p><code>}</code></p><p><code>- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event</code></p><p><code>{</code></p><p><code></code><code>UITouch *touch = [touches anyObject];</code></p><p><code></code><code>startPoint = [touch locationInView:self.view];</code></p><p><code>}</code></p><p><code>- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event</code></p><p><code>{</code></p><p><code></code><code>UITouch *touch = [touches anyObject];</code></p><p><code></code><code>CGPoint currentPosition = [touch locationInView:self.view];</code></p><p><code></code><code>CGFloat deltaX = startPoint.x - currentPosition.x;</code></p><p><code></code><code>CGFloat deltaY = startPoint.y - currentPosition.y;</code></p><p><code></code><code>CATransform3D c1t = CATransform3DIdentity;</code></p><p><code></code><code>c1t = CATransform3DRotate(c1t, pix + M_PI_2 * deltaY / 100, 1, 0, 0);</code></p><p><code></code><code>c1t = CATransform3DRotate(c1t, piy - M_PI_2 * deltaX / 100, 0, 1, 0);</code></p><p><code></code><code>s_Cube.transform = c1t;</code></p><p><code>}</code></p><p><code>- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event</code></p><p><code>{</code></p><p><code></code><code>UITouch *touch = [touches anyObject];</code></p><p><code></code><code>CGPoint currentPosition = [touch locationInView:self.view];</code></p><p><code></code><code>CGFloat deltaX = startPoint.x - currentPosition.x;</code></p><p><code></code><code>CGFloat deltaY = startPoint.y - currentPosition.y;</code></p><p><code></code><code>pix = M_PI_2 * deltaY / 100;</code></p><p><code></code><code>piy = -M_PI_2 * deltaX / 100;</code></p><p><code>}</code></p><p><code>- (void)didReceiveMemoryWarning {</code></p><p><code></code><code>[</code><code>super</code> <code>didReceiveMemoryWarning];</code></p><p><code></code><code>// Dispose of any resources that can be recreated.</code></p><p><code>}</code></p><p><code>@end</code></p><p>é‹è¡Œçµæœï¼š</p><p>å¦‚æœé‡å°ä¸Šé¢çš„è§£é‡‹ä½ é‚„ä¸æ˜¯å¾ˆç†è§£ï¼Œé‚£éº¼ä½ å¯ä»¥æŠŠé€™å€‹ç«‹æ–¹é«”çš„CATransformLayeræ›æˆCALayerï¼Œè©¦è©¦çœ‹å˜ã€‚</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/321f0000b8b81b7e7f69></p><p><strong>CAReplicatorLayer</strong></p><p>é€šéé€™å€‹åå­—ï¼Œæˆ‘å°±ç¢ºå®šå®ƒå’Œåœ–å±¤è¤‡è£½æœ‰é—œï¼Œä½ ä¿¡ä¸ä¿¡ï¼Ÿ</p><p>æˆ‘å€‘çœ‹ä¸€ä¸‹ç³»çµ±æä¾›çš„APIï¼š</p><p><code>@interface CAReplicatorLayer : CALayer</code></p><p><code>@property NSInteger instanceCount; </code><code>//è¤‡è£½åœ–å±¤çš„å€‹æ•¸ï¼ŒåŒ…æ‹¬åŠ åˆ°ä¸Šé¢çš„</code></p><p><code>@property BOOL preservesDepth; </code><code>// å­åœ–å±¤æ˜¯å¦å¹³é¢åŒ–ï¼ˆçœ‹ä¸Šé¢é‚£å€‹CATransformLayerï¼‰</code></p><p><code>@property CFTimeInterval instanceDelay; </code><code>// è¤‡è£½å±¤å‹•ç•«å»¶é²æ™‚é–“</code></p><p><code>@property CATransform3D instanceTransform; </code><code>//å­åœ–å±¤çš„transformè®Šæ›ï¼Œä¸€èˆ¬ç”¨ä¾†æ±ºå®šè¤‡è£½åœ–å±¤çš„åˆå§‹ä½ç½®ä»¥åŠåˆå§‹è©¦åœ–è®Šæ›</code></p><p><code>@property(nullable) CGColorRef instanceColor; </code><code>// è¤‡è£½å±¤é¡è‰²ï¼Œè©²é¡è‰²æ˜¯èˆ‡æœ¬é«”å…ƒç´ è‰²å€¼ç›¸ä¹˜ï¼Œé¬¼çŸ¥é“æ˜¯ä»€éº¼é¡è‰²</code></p><p><code>@property float instanceRedOffset; </code><code>// è¤‡è£½å±¤ç´…è‰²åç§»é‡</code></p><p><code>@property float instanceGreenOffset; </code><code>// è¤‡è£½å±¤ç¶ è‰²åç§»é‡</code></p><p><code>@property float instanceBlueOffset; </code><code>// è¤‡è£½å±¤è—è‰²åç§»é‡</code></p><p><code>@property float instanceAlphaOffset; </code><code>// è¤‡è£½å±¤é€æ˜åº¦åç§»é‡</code></p><p><code>@end</code></p><p>å±¬æ€§é›–å°‘ï¼Œè®ŠåŒ–å¾ˆå¤§ï¼Œä¸»è¦æ˜¯æ–¼æ ¸å¿ƒå‹•ç•«çš„å¼·å¼·è¯åˆï¼Œä»–å°±æœ‰ç„¡é™çš„å¯èƒ½æ€§ï¼Œä¸‰ç¨®æ•ˆæœï¼Œæ‚¨ä¸Šçœ¼ï¼š</p><p>NO.1ï¼šæ·±å¤œé›»è‡ºå»£æ’­</p><p><code>-(void)lineWave{</code></p><p><code></code><code>CAReplicatorLayer *replicatorLayer = [CAReplicatorLayer layer];</code></p><p><code></code><code>replicatorLayer.bounds = self.view.frame;</code></p><p><code></code><code>replicatorLayer.position = self.view.center;</code></p><p><code></code><code>[self.view.layer addSublayer:replicatorLayer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 10, 40);</code></p><p><code></code><code>layer.position = CGPointMake(50, self.view.center.y);</code></p><p><code></code><code>[replicatorLayer addSublayer:layer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CABasicAnimation *basicAni = [CABasicAnimation animationWithKeyPath:@</code><code>"transform.scale.y"</code><code>];</code></p><p><code></code><code>basicAni.toValue = @(0.1);</code></p><p><code></code><code>basicAni.duration = 0.3;</code></p><p><code></code><code>basicAni.autoreverses = YES;</code></p><p><code></code><code>basicAni.repeatCount = NSIntegerMax;</code></p><p><code></code><code>[layer addAnimation:basicAni forKey:@</code><code>"layerPosition"</code><code>];</code></p><p><code></code><code>replicatorLayer.instanceCount = 8;</code></p><p><code></code><code>CATransform3D transform = CATransform3DIdentity;</code></p><p><code></code><code>transform = CATransform3DTranslate(transform, 40, 0, 0);</code></p><p><code></code><code>replicatorLayer.instanceTransform = transform;</code></p><p><code></code><code>replicatorLayer.instanceDelay = 0.3;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/320c0000bb013503c633></p><p>NO. 2ï¼šå‚¬çœ ç­‰å¾…å°åœˆåœˆ</p><p><code>-(void)lineRoundRoll{</code></p><p><code></code><code>CAReplicatorLayer *replicatorLayer = [CAReplicatorLayer layer];</code></p><p><code></code><code>replicatorLayer.bounds = self.view.frame;</code></p><p><code></code><code>replicatorLayer.position = self.view.center;</code></p><p><code></code><code>[self.view.layer addSublayer:replicatorLayer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 20;</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 40, 40);</code></p><p><code></code><code>layer.position = CGPointMake(50, self.view.center.y);</code></p><p><code></code><code>[replicatorLayer addSublayer:layer];</code></p><p><code></code><code>layer.transform = CATransform3DMakeScale(0.01, 0.01, 0.01);</code></p><p><code></code><code>//</code></p><p><code></code><code>CABasicAnimation *basicAni = [CABasicAnimation animationWithKeyPath:@</code><code>"transform.scale"</code><code>];</code></p><p><code></code><code>basicAni.fromValue = @(1);</code></p><p><code></code><code>basicAni.toValue = @(0.1);</code></p><p><code></code><code>basicAni.duration = 0.75;</code></p><p><code></code><code>basicAni.repeatCount = NSIntegerMax;</code></p><p><code></code><code>[layer addAnimation:basicAni forKey:@</code><code>"layerPosition"</code><code>];</code></p><p><code></code><code>replicatorLayer.instanceCount = 15;</code></p><p><code></code><code>replicatorLayer.preservesDepth = YES;</code></p><p><code></code><code>CATransform3D transform = CATransform3DIdentity;</code></p><p><code></code><code>transform = CATransform3DRotate(transform, M_PI * 2 / 15.0, 0, 0, 1);</code></p><p><code></code><code>replicatorLayer.instanceTransform = transform;</code></p><p><code></code><code>replicatorLayer.instanceDelay = 0.05;</code></p><p><code></code><code>replicatorLayer.instanceAlphaOffset = -1.0 / 15.0;</code></p><p><code></code><code>//replicatorLayer.instanceBlueOffset = 1.0 / 15;</code></p><p><code></code><code>//replicatorLayer.instanceColor = [UIColor redColor].CGColor;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p>NO.3ï¼šè·¯å¾‘è·Ÿéš¨</p><p><code>-(void)followPathLayer{</code></p><p><code></code><code>UIBezierPath *path = [self followPath];</code></p><p><code></code><code>//</code></p><p><code></code><code>CAReplicatorLayer *replicatorLayer = [CAReplicatorLayer layer];</code></p><p><code></code><code>replicatorLayer.bounds = self.view.frame;</code></p><p><code></code><code>replicatorLayer.position = self.view.center;</code></p><p><code></code><code>[self.view.layer addSublayer:replicatorLayer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CALayer *layer = [CALayer layer];</code></p><p><code></code><code>layer.backgroundColor = [UIColor redColor].CGColor;</code></p><p><code></code><code>layer.cornerRadius = 5;</code></p><p><code></code><code>layer.bounds = CGRectMake(0, 0, 10, 10);</code></p><p><code></code><code>layer.position = CGPointMake(20, self.view.center.y);</code></p><p><code></code><code>[replicatorLayer addSublayer:layer];</code></p><p><code></code><code>//</code></p><p><code></code><code>CAKeyframeAnimation *basicAni = [CAKeyframeAnimation animationWithKeyPath:@</code><code>"position"</code><code>];</code></p><p><code></code><code>basicAni.path = path.CGPath;</code></p><p><code></code><code>basicAni.duration = 3;</code></p><p><code></code><code>basicAni.repeatCount = NSIntegerMax;</code></p><p><code></code><code>[layer addAnimation:basicAni forKey:@</code><code>"layerPosition"</code><code>];</code></p><p><code></code><code>//</code></p><p><code></code><code>replicatorLayer.instanceCount = 15;</code></p><p><code></code><code>replicatorLayer.instanceDelay = 0.3;</code></p><p><code>}</code></p><p><code>-(UIBezierPath*)followPath{</code></p><p><code></code><code>//CAShapeLayer *shapeLayer = [CAShapeLayer layer];</code></p><p><code></code><code>UIBezierPath *path = [UIBezierPath bezierPath];</code></p><p><code></code><code>[path moveToPoint:CGPointMake(20, self.view.center.y)];</code></p><p><code></code><code>[path addCurveToPoint:CGPointMake(self.view.bounds.size.width - 20, self.view.center.y) controlPoint1:CGPointMake(130, self.view.center.y - 100) controlPoint2:CGPointMake(240, self.view.center.y + 100)];</code></p><p><code></code><code>[path closePath];</code></p><p><code></code><code>//shapeLayer.path = path.CGPath;</code></p><p><code></code><code>//shapeLayer.lineWidth = 5;</code></p><p><code></code><code>//shapeLayer.strokeColor = [UIColor grayColor].CGColor;</code></p><p><code></code><code>//shapeLayer.fillColor = [UIColor clearColor].CGColor;</code></p><p><code></code><code>//[self.view.layer addSublayer:shapeLayer];</code></p><p><code></code><code>return</code> <code>path;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/32130002934cf1c3fb6d></p><p>é€™å¹¾å€‹æ•ˆæœåªæ˜¯æä¾›å¹¾å€‹æ€è·¯ï¼Œæ‹‹ç£šå¼•ç‰å•¦ã€‚ï¼ˆé€™é¬¼éŒ„å±å¡å¹€åŠ æ¨¡ç³Šï¼Œå¤§å®¶å°‡å°±è‘—çœ‹ã€‚)</p><p><strong>CAScrollLayer</strong></p><p>ä¸€çœ‹åˆ°é€™å€‹ä½ ä¸€å®šæƒ³åˆ°äº†UIScrollViewï¼Œå…¶å¯¦å®ƒå€‘ä¸¦æ²’æœ‰ä»€éº¼åµé—œä¿‚ï¼Œä¸¦ä¸”æˆ‘å€‹äººè¦ºå¾—é€™å€‹æ±è¥¿å¥½åƒæ²’æœ‰å¤ªå¤§çš„ç”¨è™•ã€‚é¦–å…ˆï¼Œä»–æ²’æœ‰æä¾›æœ‰é—œé‚Šç•Œçš„ç›¸é—œæ€è·¯ï¼Œå¦å¤–ï¼Œä¹Ÿä¸èƒ½éŸ¿æ‡‰äº¤äº’ã€‚åªæœ‰ä¸€ä¸‹æ»¾åˆ°é€™ï¼Œæ»¾åˆ°é‚£çš„æ–¹æ³•ã€‚</p><p>åŒæ¨£æˆ‘å€‘å¯ä»¥çœ‹åˆ°åœ¨é€™å€‹æ–‡ä»¶ä¸‹ï¼Œé‚„æœ‰å€‹CALayerçš„CALayerScrollingçš„åˆ†é¡ï¼Œä¸è¦ä»¥ç‚ºå®ƒçµ¦CALayeræ·»åŠ äº†å¯æ»‘å‹•çš„æ–¹æ³•ï¼Œå…¶å¯¦åªæ˜¯æŸ¥æ‰¾ç¬¬ä¸€å€‹å¯ç”¨çš„CAScrollLayerï¼Œä¸¦å°‡åˆ¶å®šé»æˆ–è€…æŒ‡å®šå€åŸŸæ»¾å‹•åˆ°å¯è¦–ç¯„åœã€‚</p><p>ä¸éç‚ºäº†çœ‹ä¸€ä¸‹å®ƒçš„æ•ˆæœï¼Œä½¿å®ƒéŸ¿æ‡‰æ™‚é–“ï¼Œæˆ‘å€‘å¯ä»¥ç”¨UIViewçš„å­é¡ä¾†è‡ªå·±å¯«ä¸€å€‹ç°¡å–®çš„ScrollViewï¼š</p><p><code>//</code></p><p><code>// YSScrollView.m</code></p><p><code>// CAScrollLayerDemo</code></p><p><code>//</code></p><p><code>// Created by ys on 2017/3/13.</code></p><p><code>// Copyright ? 2017å¹´ ys. All rights reserved.</code></p><p><code>//</code></p><p><code>#import "YSScrollView.h"</code></p><p><code>@implementation YSScrollView</code></p><p><code>+ (Class)layerClass</code></p><p><code>{</code></p><p><code></code><code>return</code> <code>[CAScrollLayer class];</code></p><p><code>}</code></p><p><code>- (void)setUp</code></p><p><code>{</code></p><p><code></code><code>self.layer.masksToBounds = YES;</code></p><p><code></code><code>//</code></p><p><code></code><code>UIPanGestureRecognizer *panGes = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panAction:)];</code></p><p><code></code><code>[self addGestureRecognizer:panGes];</code></p><p><code>}</code></p><p><code>- (id)initWithFrame:(CGRect)frame</code></p><p><code>{</code></p><p><code></code><code>if</code> <code>((self = [</code><code>super</code> <code>initWithFrame:frame])) {</code></p><p><code></code><code>[self setUp];</code></p><p><code></code><code>}</code></p><p><code></code><code>return</code> <code>self;</code></p><p><code>}</code></p><p><code>- (void)panAction:(UIPanGestureRecognizer *)pan</code></p><p><code>{</code></p><p><code></code><code>CGPoint offset = self.bounds.origin;</code></p><p><code></code><code>offset.x -= [pan translationInView:self].x;</code></p><p><code></code><code>offset.y -= [pan translationInView:self].y;</code></p><p><code></code><code>//</code></p><p><code></code><code>[(CAScrollLayer *)self.layer scrollToPoint:offset];</code></p><p><code></code><code>//</code></p><p><code></code><code>[pan setTranslation:CGPointZero inView:self];</code></p><p><code>}</code></p><p><code>@end</code></p><p><code>ç„¶å¾Œèª¿ç”¨åŠ è¼‰ä¸€å¼µå¤§åœ–ï¼š</code></p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>// Do any additional setup after loading the view, typically from a nib.</code></p><p><code></code><code>YSScrollView *ysSView = [[YSScrollView alloc] initWithFrame:self.view.bounds];</code></p><p><code></code><code>UIImageView* imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 700, 1040)];</code></p><p><code></code><code>imageView.image = [UIImage imageNamed:@</code><code>"0101010.jpg"</code><code>];</code></p><p><code></code><code>[self.view addSubview:ysSView];</code></p><p><code></code><code>[ysSView addSubview:imageView];</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p>æˆ‘å€‘ç™¼ç¾ï¼Œå…¶å¯¦ä»–ä¸¦æ²’æœ‰æ»‘å‹•å€åŸŸçš„é™åˆ¶ï¼Œæœ¬äººæ‰ç–å­¸æ·ºï¼Œæœ›é«˜äººæŒ‡é»ä»€éº¼æ™‚å€™ç”¨é€™å€‹æ±è¥¿ã€‚</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/321200046199b2f9e67e></p><p>CATiledLayer</p><p>ä¸€å€‹å¤§ç¥å¿…å‚™çš„Layerå­é¡ï¼Œç‚ºç¯€çœå…§å­˜æ¸²æŸ“é–‹éŠ·æä¾›äº†é€”å¾‘ã€‚æ¯”å¦‚æˆ‘å€‘è¦å»åŠ è¼‰ä¸€å€‹ä¸–ç•Œåœ°åœ–ï¼Œç²¾ç¢ºåˆ°ä½ å€‘æ‘çš„é‚£ç¨®ï¼Œå¦‚æœå…¨éƒ¨ä¸€æ¬¡æ€§åŠ è¼‰åˆ°å…§å­˜ä¸­ï¼Œé€™ç„¡ç–‘æ˜¯åƒä¸æ¶ˆçš„ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥æŠŠåœ°åœ–ä¸€ç‰‡ç‰‡åˆ‡é–‹ï¼Œç„¶å¾ŒæŒ‰éƒ¨åˆ†åŠ è¼‰ï¼Œå¤§å®¶è¯æƒ³ä¸€ä¸‹åœ°åœ–æ‡‰ç”¨ï¼Œæ‡‰è©²å°±çŸ¥é“å¤§è‡´æ˜¯ä»€éº¼æ•ˆæœã€‚æˆ‘å€‘ç›´æ¥ä¸Šä»£ç¢¼ï¼š</p><p><code>#import "ViewController.h"</code></p><p><code>@interface ViewController ()</code></p><p><code>@property (nonatomic, strong) UIScrollView *scrollView;</code></p><p><code>@end</code></p><p><code>@implementation ViewController</code></p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>//</code></p><p><code></code><code>CATiledLayer *tileLayer = [CATiledLayer layer];</code></p><p><code></code><code>tileLayer.frame = CGRectMake(0, 0, self.view.frame.size.width * 4, self.view.frame.size.height * 4);</code></p><p><code></code><code>tileLayer.tileSize = self.view.frame.size;</code></p><p><code></code><code>tileLayer.delegate = self;</code></p><p><code></code><code>//</code></p><p><code></code><code>self.scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];</code></p><p><code></code><code>[self.view addSubview:_scrollView];</code></p><p><code></code><code>self.scrollView.contentSize = tileLayer.frame.size;</code></p><p><code></code><code>[self.scrollView.layer addSublayer:tileLayer];</code></p><p><code></code><code>//</code></p><p><code></code><code>[tileLayer setNeedsDisplay];</code></p><p><code>}</code></p><p><code>-(void)drawLayer:(CATiledLayer *)layer inContext:(CGContextRef)ctx{</code></p><p><code></code><code>CGRect bounds = CGContextGetClipBoundingBox(ctx);</code></p><p><code></code><code>NSInteger x = floor(bounds.origin.x / layer.tileSize.width);</code></p><p><code></code><code>NSInteger y = floor(bounds.origin.y / layer.tileSize.height);</code></p><p><code></code><code>//</code></p><p><code></code><code>NSString *imageName = [NSString stringWithFormat: @</code><code>"image_%@_%@"</code><code>, @(x), @(y)];</code></p><p><code></code><code>NSString *imagePath = [[NSBundle mainBundle] pathForResource:imageName ofType:@</code><code>"jpg"</code><code>];</code></p><p><code></code><code>UIImage *tileImage = [UIImage imageWithContentsOfFile:imagePath];</code></p><p><code></code><code>//</code></p><p><code></code><code>UIGraphicsPushContext(ctx);</code></p><p><code></code><code>[tileImage drawInRect:bounds];</code></p><p><code></code><code>UIGraphicsPopContext();</code></p><p><code>}</code></p><p><code>- (void)didReceiveMemoryWarning {</code></p><p><code></code><code>[</code><code>super</code> <code>didReceiveMemoryWarning];</code></p><p><code></code><code>// Dispose of any resources that can be recreated.</code></p><p><code>}</code></p><p>@end</p><p>é‹è¡Œçµæœï¼š</p><p>å…¶å¯¦æ–°åŠ è¼‰çš„åœ–åƒç¢ç‰‡éƒ½æ˜¯æ·¡å…¥åˆ°ç•Œé¢çš„ï¼ˆè¬æƒ¡çš„éŒ„å±è»Ÿä»¶ï¼Œæ ¹æœ¬çœ‹ä¸å‡ºä¾†ï¼‰ã€‚é€™æ˜¯ç³»çµ±è‡ªå·±å¸¶çš„é»˜èªæ•ˆæœï¼Œä½ å¯ä»¥é€šéèª¿ç¯€fadeDurationå±¬æ€§ä¾†ä¿®æ”¹æ”¹æ·¡å…¥å‹•ç•«çš„æ™‚é•·ã€‚</p><p><strong>CATextLayer</strong></p><p>æˆ‘å€‘é‚„æ˜¯å¾ç³»çµ±æä¾›çš„APIå…¥æ‰‹ï¼š</p><p><code>@property(nullable, copy) id string; </code><code>//é¡¯ç¤ºå…§å®¹</code></p><p><code>@property(nullable) CFTypeRef font; </code><code>//å­—é«”</code></p><p><code>@property CGFloat fontSize; </code><code>//å­—è™Ÿ</code></p><p><code>@property(nullable) CGColorRef foregroundColor; </code><code>//æ–‡å­—é¡è‰²</code></p><p><code>@property(getter=isWrapped) BOOL wrapped;</code><code>//æ˜¯å¦è‡ªé©æ‡‰layerçš„boundsçš„å¤§å°</code></p><p><code>@property(copy) NSString *truncationMode;</code><code>//æ–‡å­—çœç•¥æ–¹å¼ï¼Œå…¶å¯¦å°±æ˜¯é¡¯ç¤ºä¸ä¸‹æ™‚çœç•¥è™Ÿçš„ä½ç½®</code></p><p><code>@property(copy) NSString *alignmentMode;</code><code>// å°é½Šæ–¹å¼</code></p><p>æˆ‘å€‘ä¾†ç”¨å®ƒé¡¯ç¤ºä¸€æ®µæ–‡å­—ï¼Œä½ å¯ä»¥è‡ªç”±ä¿®æ”¹ä¸€ä¸‹å®ƒçš„å±¬æ€§ä¾†ç†Ÿæ‚‰æ¯å€‹å±¬æ€§çš„ä½œç”¨ï¼š</p><p><code>- (void)viewDidLoad {</code></p><p><code></code><code>[</code><code>super</code> <code>viewDidLoad];</code></p><p><code></code><code>// Do any additional setup after loading the view, typically from a nib.</code></p><p><code></code><code>//</code></p><p><code></code><code>CATextLayer *textLayer = [CATextLayer layer];</code></p><p><code></code><code>textLayer.bounds = CGRectMake(0, 0, 200, 200);</code></p><p><code></code><code>textLayer.position = self.view.center;</code></p><p><code></code><code>[self.view.layer addSublayer:textLayer];</code></p><p><code></code><code>textLayer.foregroundColor = [UIColor blackColor].CGColor;</code></p><p><code></code><code>textLayer.alignmentMode = kCAAlignmentLeft;</code></p><p><code></code><code>textLayer.wrapped = YES;</code></p><p><code></code><code>//ä»¥Retinaæ–¹å¼ä¾†æ¸²æŸ“ï¼Œé˜²æ­¢ç•«å‡ºä¾†çš„æ–‡æœ¬æ¨¡ç³Š</code></p><p><code></code><code>textLayer.contentsScale = [UIScreen mainScreen].scale;</code></p><p><code></code><code>textLayer.truncationMode = kCATruncationEnd;</code></p><p><code></code><code>UIFont *font = [UIFont systemFontOfSize:15];</code></p><p><code></code><code>CFStringRef fontName = (__bridge CFStringRef)font.fontName;</code></p><p><code></code><code>CGFontRef fontRef = CGFontCreateWithFontName(fontName);</code></p><p><code></code><code>textLayer.font = fontRef;</code></p><p><code></code><code>textLayer.fontSize = font.pointSize;</code></p><p><code></code><code>CGFontRelease(fontRef);</code></p><p><code></code><code>NSString *text = @</code><code>"Age has reached the end of the beginning of a word. May be guilty in his seems to passing a lot of different life became the appearance of the same day; May be back in the past, to oneself the paranoid weird belief disillusionment, these days, my mind has been very messy, in my mind constantly. Always feel oneself should go to do something, or write something. Twenty years of life trajectory deeply shallow, suddenly feel something, do it."</code><code>;</code></p><p><code></code><code>textLayer.string = text;</code></p><p><code>}</code></p><p>é‹è¡Œçµæœï¼š</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/32130002934bdf39797d></p><p><strong>CAEAGLLayerï¼ŒAVPlayerLayer</strong></p><p>CAEAGLLayerçœ‹èµ·ä¾†å°±å¾ˆé«˜å¤§ä¸Šï¼Œå…¶å¯¦çœŸçš„æŒºé«˜å¤§ä¸Šçš„ï¼Œæ²’æœ‰OpenGLçŸ¥è­˜åŸºç¤çš„å¾ˆé›£ç†è§£æ›´ä¸ç”¨èªªä½¿ç”¨äº†ï¼Œå“ªå¤©ï¼Œç­‰æˆ‘å­¸æœƒfreeStyleï¼Œæˆ‘å”±çµ¦ä½ è½ï¼Œå‘¦ï¼Œå‘¦ã€‚ï¼ˆä½ å¯«ä»£ç¢¼æœ‰freeStyleå—ï¼Ÿï¼‰</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/322d00042e7740b57f57></p><p>AVPlayerLayerå®ƒå±¬æ–¼AVFoundationæ¡†æ¶ï¼Œä¸ç”¨æ‡·ç–‘ï¼Œå®ƒå°±æ˜¯ç”¨ä¾†æ’­æ”¾è¦–é »çš„ï¼Œ+ (AVPlayerLayer *)playerLayerWithPlayer:(nullable AVPlayer *)player;å®ƒçš„åˆå§‹åŒ–ä¾è³´æ–¼AVPlayerï¼Œç•¶ç„¶ï¼Œå®ƒæ—¢ç„¶æ˜¯CALayerçš„å­é¡ï¼Œæˆ‘å€‘å°±å¯ä»¥å°å®ƒé€²è¡Œé…·ç‚«çš„æ•ˆæœè®Šæ›ï¼ŒåŒæ¨£ä¹Ÿå…‹æœäº†ç³»çµ±æä¾›çš„æ’­æ”¾å™¨ç”±æ–¼é«˜åº¦çš„å°è£æ€§ï¼Œ ä½¿å¾—è‡ªå®šç¾©æ’­æ”¾å™¨è®Šçš„å¾ˆé›£çš„å•é¡Œã€‚æ”¹å¤©ï¼Œä½ æœ‰éœ€æ±‚ï¼Œæˆ‘æœ‰æ™‚é–“ï¼Œä¸å¦‚æˆ‘å€‘å¯«ä¸€å€‹æ’­æ”¾å™¨å•Šã€‚</p><p><img alt=ä¾†çœ‹çœ‹CALayeré‚£äº›ç‰›é€¼çš„å­é¡ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/32120004619be2ebaf72></p><p><strong>ç¸½çµ</strong></p><p>CALayerçš„æ‰€æœ‰å­é¡éƒ½èªªå®Œäº†ï¼Œå¸Œæœ›åœ¨ä¸€å®šçš„ç¨‹åº¦ä¸Šèƒ½çµ¦ä½ çš„é–‹ç™¼å¸¶ä¾†æ–¹ä¾¿ï¼Œåƒ…æ­¤è€Œå·²ï¼Œæˆ‘å€‘ä¸‹æœŸå†è¦‹ã€‚</p><p>å‰›æ‰èªªåˆ°çš„æ’­æ”¾å™¨çš„éœ€æ±‚å¤§æ¦‚æ‡‰è©²å¿…éœ€å°±æ˜¯é€™æ¨£çš„ï¼</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>CALayer</a></li><li><a>å­é¡</a></li><li><a>çœ‹çœ‹</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/5bfec3e4.html alt=æ‹‰é¤Œï¼Ÿçœ‹çœ‹é¡†ç²’é¤Œæ–™æ–¹æ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1534903419032f15413c09c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5bfec3e4.html title=æ‹‰é¤Œï¼Ÿçœ‹çœ‹é¡†ç²’é¤Œæ–™æ–¹æ³•>æ‹‰é¤Œï¼Ÿçœ‹çœ‹é¡†ç²’é¤Œæ–™æ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/725eb250.html alt=é•·æ²™ä»Šå¤©ç™¼ä½ˆäº†å¤§é‡å•†æ©Ÿï¼Œéœ€è¦çš„ä¾†çœ‹çœ‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/486bd3cc13cd4cd487851d55fec60a18 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/725eb250.html title=é•·æ²™ä»Šå¤©ç™¼ä½ˆäº†å¤§é‡å•†æ©Ÿï¼Œéœ€è¦çš„ä¾†çœ‹çœ‹>é•·æ²™ä»Šå¤©ç™¼ä½ˆäº†å¤§é‡å•†æ©Ÿï¼Œéœ€è¦çš„ä¾†çœ‹çœ‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f7a535ee.html alt=è¶…ç´šæœ‰æ•ˆçš„é™¤é½æ–¹æ³•ï¼Œå¿«ä¾†çœ‹çœ‹å§ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1529827073459413e9ced32 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f7a535ee.html title=è¶…ç´šæœ‰æ•ˆçš„é™¤é½æ–¹æ³•ï¼Œå¿«ä¾†çœ‹çœ‹å§ï¼>è¶…ç´šæœ‰æ•ˆçš„é™¤é½æ–¹æ³•ï¼Œå¿«ä¾†çœ‹çœ‹å§ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/03c5103c.html alt=æ±½è»Šç¸½è·‘åï¼Ÿçœ‹çœ‹å¦‚ä½•è®“å®ƒæ”¹â€œæ–œâ€æ­¸æ­£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e6352e8aee174fd7a877c414bdbcf6b5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/03c5103c.html title=æ±½è»Šç¸½è·‘åï¼Ÿçœ‹çœ‹å¦‚ä½•è®“å®ƒæ”¹â€œæ–œâ€æ­¸æ­£>æ±½è»Šç¸½è·‘åï¼Ÿçœ‹çœ‹å¦‚ä½•è®“å®ƒæ”¹â€œæ–œâ€æ­¸æ­£</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/5b8c9228.html alt=ä¹¾è²¨ï½œè¦æƒ³è·‘çš„å¿«ï¼Œå…ˆçœ‹çœ‹ä½ åƒå°äº†å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/271d9e1eeb5d4407955064f9f3173cff style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/5b8c9228.html title=ä¹¾è²¨ï½œè¦æƒ³è·‘çš„å¿«ï¼Œå…ˆçœ‹çœ‹ä½ åƒå°äº†å—ï¼Ÿ>ä¹¾è²¨ï½œè¦æƒ³è·‘çš„å¿«ï¼Œå…ˆçœ‹çœ‹ä½ åƒå°äº†å—ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0b73f3a5.html alt=æ™‚é–“ç¹¼é›»å™¨ï¼Œä¸æ˜¯å¾ˆæ‡‚çš„ï¼Œå¯ä»¥çœ‹çœ‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15325290768260571b4780e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0b73f3a5.html title=æ™‚é–“ç¹¼é›»å™¨ï¼Œä¸æ˜¯å¾ˆæ‡‚çš„ï¼Œå¯ä»¥çœ‹çœ‹>æ™‚é–“ç¹¼é›»å™¨ï¼Œä¸æ˜¯å¾ˆæ‡‚çš„ï¼Œå¯ä»¥çœ‹çœ‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/b26ed822.html alt=å¸¶å¤§å®¶çœ‹çœ‹æ–°ç–†çœŸæ­£çš„ç¾…å¸ƒéº» class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8ddea1a1a6cd40c89021b73c5f561a94 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/b26ed822.html title=å¸¶å¤§å®¶çœ‹çœ‹æ–°ç–†çœŸæ­£çš„ç¾…å¸ƒéº»>å¸¶å¤§å®¶çœ‹çœ‹æ–°ç–†çœŸæ­£çš„ç¾…å¸ƒéº»</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/e771d5d3.html alt=çœ‹çœ‹æœ‰æ‡‚å¾—å—ï¼Ÿçµ¦å€‹åƒ¹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/tos-cn-i-0022/4d534628d9a74ce29aab7f537449e46f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/e771d5d3.html title=çœ‹çœ‹æœ‰æ‡‚å¾—å—ï¼Ÿçµ¦å€‹åƒ¹>çœ‹çœ‹æœ‰æ‡‚å¾—å—ï¼Ÿçµ¦å€‹åƒ¹</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/cdbc74a8.html alt="å‚…ï¼ˆä»˜ï¼‰æ° å®¶è­œ å­—è¼© å½™ç·¨ï¼Œçœ‹çœ‹å§~" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/15342278358423993b2c85c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/cdbc74a8.html title="å‚…ï¼ˆä»˜ï¼‰æ° å®¶è­œ å­—è¼© å½™ç·¨ï¼Œçœ‹çœ‹å§~">å‚…ï¼ˆä»˜ï¼‰æ° å®¶è­œ å­—è¼© å½™ç·¨ï¼Œçœ‹çœ‹å§~</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/5fd485b6.html alt=500å¹´çš„äººè”˜ï¼çœ‹çœ‹é•·å•¥æ¨£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/tos-cn-i-0022/5c6b4be87b3647d88abe5173047584cc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/5fd485b6.html title=500å¹´çš„äººè”˜ï¼çœ‹çœ‹é•·å•¥æ¨£>500å¹´çš„äººè”˜ï¼çœ‹çœ‹é•·å•¥æ¨£</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/fc982e4d.html alt=çœ‹çœ‹ä¸–ç•Œå„åœ‹äººçœ¼ä¸­çš„äººè”˜ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/4378000054a940e0b27b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/fc982e4d.html title=çœ‹çœ‹ä¸–ç•Œå„åœ‹äººçœ¼ä¸­çš„äººè”˜>çœ‹çœ‹ä¸–ç•Œå„åœ‹äººçœ¼ä¸­çš„äººè”˜</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/d813ffca.html alt=èƒèŸ¹è…¿æ–·äº†ï¼Œé‚„èƒ½åƒå—ï¼Ÿä¸€èµ·ä¾†çœ‹çœ‹ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/341f64d1-6af6-4b45-8500-e16dcdea1285 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/d813ffca.html title=èƒèŸ¹è…¿æ–·äº†ï¼Œé‚„èƒ½åƒå—ï¼Ÿä¸€èµ·ä¾†çœ‹çœ‹>èƒèŸ¹è…¿æ–·äº†ï¼Œé‚„èƒ½åƒå—ï¼Ÿä¸€èµ·ä¾†çœ‹çœ‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6a0fceb3.html alt=ä¸åŒçš„èŒ¶é€€ç«å¤šä¹…æ‰èƒ½å–ï¼Ÿçœ‹çœ‹ä½ åšå°äº†å—ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/13e80ba4fd6b42c3af96680af2a1ef54 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6a0fceb3.html title=ä¸åŒçš„èŒ¶é€€ç«å¤šä¹…æ‰èƒ½å–ï¼Ÿçœ‹çœ‹ä½ åšå°äº†å—ï¼Ÿ>ä¸åŒçš„èŒ¶é€€ç«å¤šä¹…æ‰èƒ½å–ï¼Ÿçœ‹çœ‹ä½ åšå°äº†å—ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f95d5bfd.html alt=C++å­é¡çš„æˆå“¡å‡½æ•¸å¦‚ä½•æˆç‚ºçˆ¶é¡çš„å‹å…ƒå‡½æ•¸ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/912200096040d5e4e8cd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f95d5bfd.html title=C++å­é¡çš„æˆå“¡å‡½æ•¸å¦‚ä½•æˆç‚ºçˆ¶é¡çš„å‹å…ƒå‡½æ•¸ï¼Ÿ>C++å­é¡çš„æˆå“¡å‡½æ•¸å¦‚ä½•æˆç‚ºçˆ¶é¡çš„å‹å…ƒå‡½æ•¸ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9541deca.html alt=Listçš„å­é¡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/dfic-imagehandler/0642e15b-8435-485b-857f-023548e2841d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9541deca.html title=Listçš„å­é¡>Listçš„å­é¡</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>