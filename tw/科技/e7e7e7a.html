<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>典型算法思想與應用8｜回溯法與分書問題 | 极客快訊</title><meta property="og:title" content="典型算法思想與應用8｜回溯法與分書問題 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/22cf0000774f33967078"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e7e7e7a.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e7e7e7a.html><meta property="article:published_time" content="2020-10-29T21:04:52+08:00"><meta property="article:modified_time" content="2020-10-29T21:04:52+08:00"><meta name=Keywords content><meta name=description content="典型算法思想與應用8｜回溯法與分書問題"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e7e7e7a.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>典型算法思想與應用8｜回溯法與分書問題</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>回溯法也叫試探法，試探法的處事方式比較委婉，它先暫時放棄關於問題規模大小的限制，並將問題的候選解按某種順序逐一進行枚舉和檢驗。當發現當前候選解不可能是正確的解時，就選擇下一個候選解。如果當前候選解除了不滿足問題規模要求外能夠滿足所有其他要求時，則繼續擴大當前候選解的規模，並繼續試探。如果當前候選解滿足包括問題規模在內的所有要求時，該候選解就是問題的一個解。在試探算法中，放棄當前候選解，並繼續尋找下一個候選解的過程稱為回溯。擴大當前候選解的規模，並繼續試探的過程稱為向前試探。</p><h1 class=pgc-h-arrow-right>1 基本概念</h1><p>回溯算法實際上一個<strong>類似枚舉</strong>的搜索嘗試過程，主要是在搜索嘗試過程中尋找問題的解，當發現已不滿足求解條件時，就“回溯”返回，嘗試別的路徑。</p><p>回溯法是一種<strong>選優搜索</strong>法，按選優條件向前搜索，以達到目標。但當探索到某一步時，發現原先選擇並不優或達不到目標，就退回一步重新選擇，這種走不通就退回再走的技術為回溯法，而滿足回溯條件的某個狀態的點稱為“回溯點”。許多複雜的，規模較大的問題都可以使用回溯法，有“<strong>通用解題方法</strong>”的美稱。</p><h1 class=pgc-h-arrow-right>2 基本思想</h1><p>在包含問題的所有解的解空間樹中，按照深度優先搜索的策略，從根結點出發深度探索解空間樹。當探索到某一結點時，要先判斷該結點是否包含問題的解，如果包含，就從該結點出發繼續探索下去，如果該結點不包含問題的解，則<strong>逐層向其祖先結點回溯</strong>。</p><p>若用回溯法求問題的所有解時，要回溯到根，且根結點的所有可行的子樹都要已被搜索遍才結束。而若使用回溯法求任一個解時，只要搜索到問題的一個解就可以結束。</p><h1 class=pgc-h-arrow-right>3 解題步驟</h1><p>① 針對所給問題，確定問題的解空間，問題的解空間應至少包含問題的一個（最優）解；</p><p>② 確定易於搜索的解空間結構，確定結點的擴展搜索規則；</p><p>③ 以深度優先方式搜索解空間，並在搜索過程中用剪枝函數避免無效搜索。</p><p>試探法為了求得問題的正確解，會先委婉地試探某一種可能的情況。在進行試探的過程中，一旦發現原來選擇的假設情況是不正確的，立即會自覺地退回一步重新選擇，然後繼續向前試探，如此這般反覆進行，直至得到解或證明無解時才死心。</p><h1 class=pgc-h-arrow-right>4 算法框架</h1><p>（1）問題框架</p><p>設問題的解是一個n維向量(a1,a2,………,an)，約束條件是ai(i=1,2,3,…..,n)之間滿足某種條件，記為f(ai)。</p><p>（2）非遞歸回溯框架</p><pre><code>int a[n],i;	初始化數組a[];	i = 1;	while(i&gt;0(有路可走) and (未達到目標)) //還未回溯到頭	{	    if(i &gt; n) //搜索到葉結點	    {	        搜索到一個解，輸出；	    }	    else //處理第i個元素	    {	        a[i]第一個可能的值；	        while(a[i]在不滿足約束條件且在搜索空間內)	        {	            a[i]下一個可能的值；	        }	        if(a[i]在搜索空間內)	        {	            標識佔用的資源；	            i = i+1; //擴展下一個結點	        }	        else	        {	            清理所佔的狀態空間； //回溯	            i = i–1;	        }	    }}	</code></pre><p>（3）遞歸的算法框架</p><p>回溯法是對解空間的深度優先搜索，在一般情況下使用遞歸函數來實現回溯法比較簡單，其中i為搜索的深度，框架如下：</p><pre><code>int a[n];	try(int i)	{	    if(i&gt;n)	        輸出結果;	    else	    {	        for(j =下界; j &lt;= 上界; j=j+1) //枚舉i所有可能的路徑	        {	            if(fun(j)) //滿足限界函數和約束條件	            {	                a[i] = j;	                ... //其他操作	                try(i+1);	                回溯前的清理工作（如a[i]置空值等）;	            }	        }	    }	}	</code></pre><h1 class=pgc-h-arrow-right>5 典型問題應用：分書問題</h1><p>有編號為0，1，2，3，4的5本書，準備分給5個人A，B，C，D，E，寫一個程序，輸出所有皆大歡喜的分書方案。</p><p>每個人的閱讀興趣用一個二維數組like描述：</p><p>Like[i][j] = true i喜歡書j</p><p>Like[i][j] = false i不喜歡書j</p><div class=pgc-img><img alt=典型算法思想與應用8｜回溯法與分書問題 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/22cf0000774f33967078><p class=pgc-img-caption></p></div><p>設計一個函數trynext(int i)給第i個人分書。</p><p>用一個一維數組take表示某本書分給了某人。take[j]=i+1;//把第j本書分配給第i個人</p><p>依次嘗試把書j分給人i。</p><p>如果第i個人不喜歡第j本書，則嘗試下一本書，如果喜歡，並且第j本書尚未分配，則把書j分配給i。</p><p>如果i是最後一個人，則方案數加1，輸出該方案。否則調用trynext(i+1)為第i+1個人分書。</p><p>如果對第i個人枚舉了他喜歡的所有的書，都沒有找到可行的方案，那就回到前一個狀態i-1，讓i-1把分到的書退回去，重新找喜歡的書，再遞歸調用函數，尋找可行的方案。</p><p>代碼：</p><div class=pgc-img><img alt=典型算法思想與應用8｜回溯法與分書問題 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/5d7a555608034594874aa2f0e6f74853><p class=pgc-img-caption></p></div><p>運行結果：</p><pre><code>分配方案1:書本0→B書本1→C書本2→A書本3→D書本4→E分配方案2:書本0→B書本1→E書本2→A書本3→D書本4→C分配方案3:書本0→D書本1→B書本2→C書本3→A書本4→E分配方案4:書本0→D書本1→E書本2→C書本3→A書本4→B</code></pre><p>遞歸與回溯就一步之遙，但正因為這一步，導致的是一個解和全部解的區別（如果不考慮回溯，也就是把倒數第四行代碼take[j]=0;去掉，則可得到單一解決方案）。</p><p>這就是遞歸函數後面有沒有代碼可執行的區別，如果後面（迴歸階段）沒有代碼可執行，稱為尾遞歸，如果後面（迴歸階段）有代碼可執行，稱為非尾遞歸。</p><p>附代碼：</p><pre><code>#include &lt;iostream&gt;using namespace std;int like[5][5]={    {0,0,1,1,0},    {1,1,0,0,1},    {0,1,1,0,1},    {1,0,0,1,0},    {0,1,0,0,1}};int take[5]={0,0,0,0,0};  // 記錄每一本書的分配情況int n = 0;                // n表示分書方案數void trynext(int i);int main(){    trynext(0);    cin.get();    return 0;}void trynext(int i)        // 對第 i 個人進行分配{    for(int j=0;j&lt;5;j++)   // 窮舉    {        if(like[i][j]&amp;&amp;take[j]==0)        {            take[j]=i+1;// 把第j本書分配給第i個人            if(i==4)    // 第5個人分配結束，也即所有的書已經分配完畢，                        // 可以將方案進行輸出            {                n++;                cout&lt;&lt;"分配方案"&lt;&lt;n&lt;&lt;":"&lt;&lt;endl;                for(int k=0;k&lt;5;k++)                    cout&lt;&lt;"書本"&lt;&lt;k&lt;&lt;"→"&lt;&lt;static_cast&lt;char&gt;(take[k]+'A'-1)&lt;&lt;endl;                cout&lt;&lt;endl;            }            else                trynext(i+1);    // 遞歸，對下一個人進行分配，直到形成一種方案            take[j]=0;           // 回溯，以j為回溯點，尋找下一種方案        }    }}</code></pre><p>－End－</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>應用</a></li><li><a>分書</a></li><li><a>問題</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/b533e6c4.html alt=繼電器應用需要注意的問題！環境對繼電器應用的影響 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/2c92c9d4740d4cc38fd09cb49dee8b94 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b533e6c4.html title=繼電器應用需要注意的問題！環境對繼電器應用的影響>繼電器應用需要注意的問題！環境對繼電器應用的影響</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5e4be374.html alt=鈦及鈦合金鑄件的應用領域​ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/Rca7hqUCttQBq0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5e4be374.html title=鈦及鈦合金鑄件的應用領域​>鈦及鈦合金鑄件的應用領域​</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/958c038a.html alt=鑄造鋁合金應用現狀及未來前景分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8dcaa42ff9a64e2cad814e4e025fc52c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/958c038a.html title=鑄造鋁合金應用現狀及未來前景分析>鑄造鋁合金應用現狀及未來前景分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2f87337a.html alt=收不到交警便民通知？可能是這裡出了問題 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/bdf88511c83f431c9f75609d9e44d585 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2f87337a.html title=收不到交警便民通知？可能是這裡出了問題>收不到交警便民通知？可能是這裡出了問題</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8db1a012.html alt=問題408:在變壓器送電前後怎樣檢測差動保護裝置？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e7912ea051664f678d2616da1c042a37 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8db1a012.html title=問題408:在變壓器送電前後怎樣檢測差動保護裝置？>問題408:在變壓器送電前後怎樣檢測差動保護裝置？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/16133b9e.html alt=深度語義模型以及在淘寶搜索中的應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/48529b82dc7c4f048fc3e45d586717e6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/16133b9e.html title=深度語義模型以及在淘寶搜索中的應用>深度語義模型以及在淘寶搜索中的應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/657370c9.html alt=從起源講到應用，幾乎所有齒輪知識都在這裡了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6a14e31844e14b5aace5360ee6f8601a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/657370c9.html title=從起源講到應用，幾乎所有齒輪知識都在這裡了>從起源講到應用，幾乎所有齒輪知識都在這裡了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fc32dcc9.html alt=牛常用飼料添加劑的種類與應用！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/57c1b1c2-20c8-4927-8161-242643381796 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fc32dcc9.html title=牛常用飼料添加劑的種類與應用！>牛常用飼料添加劑的種類與應用！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7fa2c409.html alt=精密三角高程在長距離一等跨河水準測量中的應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/514529e0543f408583046cefc73fac13 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7fa2c409.html title=精密三角高程在長距離一等跨河水準測量中的應用>精密三角高程在長距離一等跨河水準測量中的應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a90a489a.html alt=JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15310942260931dda577a75 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a90a489a.html title=JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點>JAVA中多態的概念和應用，通過案例分析成員變量、方法的訪問特點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7f03f742.html alt=正切和差角變形式應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/e1f38ef5d20445488e9e180576f12a61 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7f03f742.html title=正切和差角變形式應用>正切和差角變形式應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d1c7184b.html alt=高中數學：正、餘二倍角公式的變式及其應用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/R6f5aXZEqbpi9N style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d1c7184b.html title=高中數學：正、餘二倍角公式的變式及其應用>高中數學：正、餘二倍角公式的變式及其應用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3a04345b.html alt=《三極管應用分析精粹》已經交稿，從單管放大到模擬集成電路設計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3a04345b.html title=《三極管應用分析精粹》已經交稿，從單管放大到模擬集成電路設計>《三極管應用分析精粹》已經交稿，從單管放大到模擬集成電路設計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5928048c.html alt=大漆歷史文化，區域分佈，應用領域 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/768822cfc3c94c5bb8362d33fe2c6b03 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5928048c.html title=大漆歷史文化，區域分佈，應用領域>大漆歷史文化，區域分佈，應用領域</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/84e317ac.html alt=檢測虛設問題，應當採取強有力的措施加以解決 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/115bad769be144f19346317e77eed4b3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/84e317ac.html title=檢測虛設問題，應當採取強有力的措施加以解決>檢測虛設問題，應當採取強有力的措施加以解決</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>