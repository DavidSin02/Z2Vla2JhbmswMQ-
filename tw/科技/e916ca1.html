<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>IP協議是不可靠無連接的，那為什麼當初不直接把它設計為可靠的？ | 极客快訊</title><meta property="og:title" content="IP協議是不可靠無連接的，那為什麼當初不直接把它設計為可靠的？ - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/1537486641604199bd5c793"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/e916ca1.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/e916ca1.html><meta property="article:published_time" content="2020-10-29T20:49:59+08:00"><meta property="article:modified_time" content="2020-10-29T20:49:59+08:00"><meta name=Keywords content><meta name=description content="IP協議是不可靠無連接的，那為什麼當初不直接把它設計為可靠的？"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/e916ca1.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>IP協議是不可靠無連接的，那為什麼當初不直接把它設計為可靠的？</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><p class=ql-align-justify>因特網使用的IP協議是無連接的，因此其傳輸是不可靠的。這樣容易使人們感到因特網很不可靠，那為什麼當初不直接把它設計為可靠的？</p><p class=ql-align-justify>先打一個比方。郵局寄送的平信很像無連接的IP數據報。每封平信可能走不同的傳送路徑，同時平信也不保證不丟失。當我們發現收信人沒有收到寄出的平信時，去找郵局索賠是沒有用的。郵局會說：“平信不保證不丟失。怕丟失就請你寄掛號信”。但是大家並不會將所有的信件都用掛號方式郵寄，這是因為郵局從來不會隨意地將平信丟棄，而丟失平信的概率並不大，況且寄掛號信要多花些錢，還要去郵局排隊，太麻煩。總之，儘管寄平信有可能會丟失，但絕大多數的信件還是平信，因為寄平信方便、便宜。</p><p class=ql-align-justify>我們知道，傳統的電信網的最主要的用途是進行電話通信。普通的電話機很簡單，沒有什麼智能，因此電信公司就不得不把電信網設計得非常好，這種電信網可以保證用戶通話時的通信質量。這點對使用非常簡單的電話機的用戶則是非常方便的。但電信公司為了建設能夠確保傳輸質量的電信網則付出了巨大的代價（使用昂貴的程控交換機和網管系統）。</p><p class=ql-align-justify>數據的傳送顯然必須是非常可靠的。當初美國國防部在設計 ARPANET 時有一個很重要的討論內容就是：“誰應當負責數據傳輸的可靠性？”這時出現了兩種對立的意見。一種意見是主張應當像電信網那樣，由通信網絡負責數據傳輸的可靠性（因為電信網的發展歷史及其技術水平已經證明了人們可以將網絡設計得相當可靠）。但另一種意見則堅決主張由用戶的主機負責數據傳輸的可靠性。這裡最重要的理由是：這樣可以使計算機網絡便宜、靈活，同時還可以滿足軍事上的各種特殊的需求。</p><p class=ql-align-justify><strong>下面用一個簡單例子來說明這一問題。</strong></p><p class=ql-align-justify>設主機 A 通過因特網向主機 B 傳送文件（如下圖所示）。怎樣才能實現文件數據的可靠傳輸呢？</p><p class=ql-align-center><br></p><div class=pgc-img><img alt=IP協議是不可靠無連接的，那為什麼當初不直接把它設計為可靠的？ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/1537486641604199bd5c793><p class=pgc-img-caption></p></div><p class=ql-align-justify><br></p><p class=ql-align-justify>如按照電信網的思路，就是設法（這需要花費相當多的錢）將不可靠的因特網做成為可靠的因特網。</p><p class=ql-align-justify>但設計計算機網絡的人採用另外一種思路，即設法實現端到端的可靠傳輸。</p><p class=ql-align-justify>提出這種思路的人認為，計算機網絡和電信網的一個重大區別就是終端設備的性能差別很大。電信網的終端是非常簡單的、沒有什麼智能的電話機。因此電信網的不可靠必然會嚴重地影響人們利用電話的通信。但計算機網絡的終端是有很多智能的主機。這樣就使得計算機網絡和電信網有兩個重要區別。第一，即使傳送數據的因特網有一些缺陷（如造成比特差錯或分組丟失），但具有很多智能的終端主機仍然有辦法實現可靠的數據傳輸（例如，能夠及時發現差錯並通知發送方重傳剛才出錯的數據）。第二，即使網絡可以實現 100% 地無差錯傳輸，端到端的數據傳輸仍然有可能出現差錯。</p><p class=ql-align-justify>為了說明這點，我們可以用一個簡單例子來說明這個問題。這就是主機 A 向主機 B 傳送一個文件的情況。</p><p class=ql-align-justify>文件是通過一個文件系統存儲在主機 A 的硬盤中。主機 B 也有一個文件系統，用來接收和存儲從 A 發送過來的文件。應用層使用的應用程序現在就是文件傳送程序，這個程序一部分在主機 A 運行，另一部分在主機 B 運行。</p><p class=ql-align-justify><strong>現在討論文件傳送的大致步驟：</strong></p><blockquote>(1)主機 A 的文件傳送程序調用文件系統將文件從硬盤中讀出。然後文件系統將文件傳遞給文件傳送程序。(2)主機 A 請求數據通信系統將文件傳送到主機 B。這裡包括使用一些通信協議和將數據文件劃分為適當大小的分組。(3)通信網絡將這些數據分組逐個傳送給主機 B。(4)在主機 B，數據通信協議將收到的數據傳遞給文件傳送應用程序在主機 B 運行的那一部分。(5)在主機 B，文件傳送程序請求主機 B 的文件系統將收到的數據寫到主機 B 的硬盤中。</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify><strong>在以上的幾個步驟中，都存在使數據受到損傷的一些因素。例如：</strong></p><blockquote>(1)雖然文件原來是正確寫在主機 A 的硬盤上，但在讀出後就可能出現差錯（如在磁盤存儲系統中的硬件出現了故障）。(2)文件系統、文件傳送程序或數據通信系統的軟件在對文件中的數據進行緩存或複製的過程中都有可能出現故障。(3)主機 A 或 B 的硬件處理機或存儲器在主機 A 或 B 進行數據緩存或複製的過程中也有可能出現故障。(4)通信系統在傳輸數據分組時有可能產生檢測不出來的比特差錯或甚至丟失某些分組。(5)主機 A 或 B 都有可能在進行數據處理的過程中突然崩潰。</blockquote><p class=ql-align-justify><br></p><p class=ql-align-justify>由此可看出，即使對於這樣一個簡單的文件傳送任務，僅僅使通信網絡非常可靠並不能保證文件從主機 A 硬盤到主機 B 硬盤的傳送是可靠的。也就是說，花費很多的錢將通信網絡做成為非常可靠的，對傳送計算機數據來說是得不償失的。既然現在的終端設備有智能，就應當把網絡設計得簡單些，而讓具有智能的終端來完成“使傳輸變得可靠”的任務。</p><p class=ql-align-justify>於是，計算機網絡的設計者採用了一種策略，這就是“端到端的可靠傳輸”。更具體些，就是在運輸層使用面向連接的 TCP 協議，它可保證端到端的可靠傳輸。只要主機 B 的 TCP 發現了數據的傳輸有差錯，就告訴主機 A 將出現差錯的那部分數據重傳，直到這部分數據正確傳送到主機 B 為止。而 TCP 發現不了數據有差錯的概率是很小的。採用這樣的建網策略，既可以使網絡部分價格便宜和靈活可靠，又能夠保證端到端的可靠傳輸。</p><p class=ql-align-justify>這樣，我們可以這樣想像，將因特網的範圍稍微擴大一些，即擴大到主機中的運輸層。由於運輸層使用了 TCP 協議，使得端到端的數據傳輸成為可靠的，因此這樣擴大了範圍的因特網就成為可靠的網絡。</p><p class=ql-align-justify>因此，說“因特網提供的數據傳輸是不可靠的”或“因特網提供的數據傳輸是可靠的”這兩種說法都可以在文獻中找到，問題是是怎樣界定因特網的範圍。如果說因特網提供的數據傳輸是不可靠的，那麼這裡的因特網指的是不包括主機在內的網絡（僅有下三層）。說因特網提供的數據傳輸是可靠的，就表明因特網的範圍已經擴大到主機的運輸層。</p><p class=ql-align-justify><strong>再回到通過郵局寄平信的例子。當我們寄出一封平信後，可以等待收信人的確認（通過他的回信）。如果隔了一些日子還沒有收到回信，我們可以將該信件再寄一次。這就是將“端到端的可靠傳輸”的原理用於寄信的例子</strong></p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>可靠</a></li><li><a>IP</a></li><li><a>協議</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/1358e7a.html alt=電腦的IP協議4是如何產生IP的地址的，一文教你如何計算IP地址 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/ec761853702144c19a9736f9ea96393a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1358e7a.html title=電腦的IP協議4是如何產生IP的地址的，一文教你如何計算IP地址>電腦的IP協議4是如何產生IP的地址的，一文教你如何計算IP地址</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1bd1e17.html alt=一文讀懂TCP/IP協議工作原理和工作流程 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/ea27784370b9441090baaf9c8cf57977 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1bd1e17.html title=一文讀懂TCP/IP協議工作原理和工作流程>一文讀懂TCP/IP協議工作原理和工作流程</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/13955a3.html alt="TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/8f291e6a61fa4b45a91b81f2589002c5 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/13955a3.html title="TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）">TCP/IP 結構模型/Internet 協議（IP）/傳輸控制協議（TCP）</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8da7b9.html alt=TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/250b6d508b7a4694baa0371a1f53a17c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8da7b9.html title=TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別>TCP/IP協議分為哪四層，具體作用是什麼？http與tcp區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3364d34.html alt=TCP/IP協議是網絡協議中的核心協議，含三次握手，四次分手 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fc06324c0dfc4990bb88bbf41769b159 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3364d34.html title=TCP/IP協議是網絡協議中的核心協議，含三次握手，四次分手>TCP/IP協議是網絡協議中的核心協議，含三次握手，四次分手</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7302fb0.html alt=TCP/IP協議：傳輸層協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/5bccccba9b1243d3afefcee4cc0d04ed style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7302fb0.html title=TCP/IP協議：傳輸層協議>TCP/IP協議：傳輸層協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8756f3f.html alt=以太網接口TCP/IP協議介紹，說的很容易懂了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/d073c29b03984e3aa025b70cd50cc493 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8756f3f.html title=以太網接口TCP/IP協議介紹，說的很容易懂了>以太網接口TCP/IP協議介紹，說的很容易懂了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a286add.html alt=KNX-EIB通信協議的基本原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0eb231dd55b34ebcbbd7ac0328fd48a9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a286add.html title=KNX-EIB通信協議的基本原理>KNX-EIB通信協議的基本原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/decdc747.html alt=PPP協議（點對點協議）詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/888a1b78159844579e62e13ed788ff33 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/decdc747.html title=PPP協議（點對點協議）詳解>PPP協議（點對點協議）詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/69d23a45.html alt=工業控制常用的接口協議大全 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/2fb460305abe4cbaa0210943132dca15 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/69d23a45.html title=工業控制常用的接口協議大全>工業控制常用的接口協議大全</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ea884f1.html alt=達成執行和解協議，執行處於一種暫停狀態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5f266a9654cd4baea7b6bfe99f1e6fad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ea884f1.html title=達成執行和解協議，執行處於一種暫停狀態>達成執行和解協議，執行處於一種暫停狀態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/eef1832a.html alt=IP電話專線（運營商中繼線）業務介紹 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/eef1832a.html title=IP電話專線（運營商中繼線）業務介紹>IP電話專線（運營商中繼線）業務介紹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html alt=網絡基本概念-TCP/IP架構及各層網絡協議 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/7f834ac140184ca6a079de4d0d3e515c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a660d731.html title=網絡基本概念-TCP/IP架構及各層網絡協議>網絡基本概念-TCP/IP架構及各層網絡協議</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/17e3ef59.html alt="G park生意經：引入更具流量IP，為西安商業賦能" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d46e6272b998414e9d3a0ede20ecab11 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/17e3ef59.html title="G park生意經：引入更具流量IP，為西安商業賦能">G park生意經：引入更具流量IP，為西安商業賦能</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4b0d0bba.html alt=7、90秒快速“讀懂”IP編址（有類IP和無類IP） class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4c8ac4e1cad442f89eb5560d9164f0e4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4b0d0bba.html title=7、90秒快速“讀懂”IP編址（有類IP和無類IP）>7、90秒快速“讀懂”IP編址（有類IP和無類IP）</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>