<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>基於硬件加速器的高性能芯片仿真與驗證 | 极客快訊</title><meta property="og:title" content="基於硬件加速器的高性能芯片仿真與驗證 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/RZe8TIVFhN5VmS"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/eb452313.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/eb452313.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/eb452313.html><meta property="article:published_time" content="2020-10-29T21:10:39+08:00"><meta property="article:modified_time" content="2020-10-29T21:10:39+08:00"><meta name=Keywords content><meta name=description content="基於硬件加速器的高性能芯片仿真與驗證"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/eb452313.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>基於硬件加速器的高性能芯片仿真與驗證</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>隨著超大規模集成電路的發展，芯片數字電路的規模時鐘保持快速增長的態勢。這一發展趨勢在給電路設計帶來了巨大挑戰的同時，也使得電路的仿真驗證相比之前更為困難。當前在子模塊設計階段，設計人員主要採用軟件模擬（Software Simulation）進行初步驗證，但是在整個芯片層面如果依然採用軟件模擬，其耗時非常長，往往模擬單一幀的時間需要數個小時甚至數十個小時；而如果採用FPGA驗證，對於全芯片設計的綜合時間需要數個小時，而且在實際運行中出現問題難以快速定位，每次添加觀測信號都需要重新綜合。使用新的驗證工具來更好地進行錯誤定位和修正後驗證成為了保證芯片按時完成設計的關鍵<sup>[1-2]</sup>。</p><p><strong>1 測試芯片簡介</strong></p><p>本項目所要仿真驗證的設計是一款基於IEEE 802.11 AC（Wi-Fi 5）標準的無線通信基帶芯片，採用了4×4 Multiple Input Multiple Output（MIMO），256 QAM信道調製模式等多種技術，可以實現協議層最高1.2 Gb/s的吞吐率。該芯片內集成了JESD204B接口、PCIE 2.0接口、下層媒體介入層（low Media Access Control，low MAC）模塊、發送機、接收機等模塊。在FPGA原型綜合中使用了超過200k ALM，35k的寄存器單元和2 Mb以上的存儲器資源，整體芯片等效門超過了1 000萬。該芯片整體的架構如圖1所示，主控端通過PCIE接口與芯片通信，而模擬和射頻芯片則通過JESD204B接口進行通信。發送機部分主要包括擾碼生成、交織、反傅里葉變換、調製器等模塊；接收機部分則包括濾波器、同步器、傅里葉變換、信道估計、MIMO檢查、去交織、維特比解碼和去擾碼等模塊。</p><img alt=基於硬件加速器的高性能芯片仿真與驗證 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/RZe8TIVFhN5VmS><p>該芯片設計主要規格指標如下：</p><p>(1)具有4根天線，支持最高4個空間流動發送接收；</p><p>(2)向下兼容802.11a/b/g/n；</p><p>(3)支持802.11AC 20M/40M/80MHz 3種帶寬；</p><p>(4)支持多種調製編碼模式，最高支持256 QAM，支持短GI，物理層可實現最高速率1.7 Gb/s。</p><p>2 硬件仿真與加速器</p><p>在電路的開發階段，主要採用Verilog可綜合語句進行電路表達，使用非可綜合語句進行測試環境的搭建。該方法是軟件模擬中常用的方式，保證了芯片各個子模塊能夠快速地完成初步開發。但是在整體調試階段，如果還是採用軟件模擬的方式，耗時非常長，而且只能使用非常簡單的測試用例。如果採用FPGA原型系統進行驗證，雖然整體驗證系統可以全速運行，但是在發生運行異常需要尋找設計中錯誤點的時候，往往需要修改觀測信號，而每次修改都意味著需重新綜合整個設計。在調試開始的階段，整體設計中不完善的部分還非常多，如果只採用軟件模擬和FPGA硬件仿真，其調試效率無法達到一個合理的速度。</p><p>在這種情況下，採用硬件仿真加速器就成為了一個非常合理的選擇。它在仿真速度上介於軟件模擬和FPGA原型系統之間，但是對內部信號的觀測與下載要比FPGA方便，能夠提供與軟件模擬相類似的波形觀測能力，且在修改RTL代碼後重新綜合的時間也與軟件模擬相近，要比同一款芯片進行FPGA綜合的時間減少很多。</p><p>Cadence公司的Palladium XP硬件仿真加速器是一款業內領先的仿真加速器。其工作模式主要可分為軟件模擬加速（Simulation Acceleration，SA）與全系統仿真（In-Circuit Emulation，ICE）。在SA模式下，待測芯片（Die Under Test，DUT）部分下載到硬件仿真器後仿真運行，而不可綜合的測試代碼部分還是運行在服務器上由軟件模擬實現。這種方式的好處在於可以不用修改原來測試代碼。而在ICE模式下，DUT和測試代碼均需要下載到仿真器上，因此測試代碼也需要符合可綜合的要求。</p><p><strong>3 仿真代碼修改與ICE模式仿真實現</strong></p><p>在電路子模塊的開發階段，設計人員積累了較多不可綜合的測試代碼，因此希望能夠在硬件仿真階段繼續使用之前的大部分測試代碼，所以選用SA模式進行硬件仿真。但是在測試過程中發現，由於測試部分依然運行在服務器上，其運行速率的瓶頸受限於服務器的性能，依然難以實現更為快速的仿真測試。從仿真時間來看，雖然相比全部由軟件模擬可以減小90%的仿真時間，但是依然難以滿足本項目對仿真效率的要求。</p><p>為了進一步提高測試效率，需要對測試代碼進行可綜合性修改。通過對仿真器說明文檔的研究，發現對於仿真器的可綜合代碼要求與FPGA或者其他綜合工具的要求有較多不同之處<sup>[3]</sup>。特別是其對task、initial、for語句的支持使得測試代碼整體架構不需要作過多的調整，依然採用initial塊控制測試用例的先後順序，task語句定義具體測試用例的方式來進行。當然相比軟件模擬中對測試語句基本無限制相比，依然需要對測試代碼進行諸多修改以滿足可硬件加速器可綜合的要求。修改中發現的主要修改點和注意點包括：</p><p>(1)在同一個initial塊及其內部調用的task必須採用同一個時鐘信號進行同步；</p><p>(2)不支持“#延時”的寫法，可以通過插入若干個時鐘週期來控制兩條相鄰指令的間隔；</p><p>(3)task內可以調用同一module內的task，但是不能調用子模塊內定義的task；</p><p>(4)task內可以檢測子模塊內的信號，但是不能改變此類信號的賦值；</p><p>(5)wait指令只能對電平信號使用，不能進行邊沿觸發，可以通過在後面增加一個時鐘邊沿來保證同步；</p><p>(6)task內儘量使用非阻塞賦值，信號的先後時序則通過@(posedge clk)來實現；</p><p>(7)如果採用for循環進行操作，要注意for循環的控制語句理論上能夠實現的最大週期數，如果語句內某些信號無法滿足該最大週期數，則會綜合出錯。</p><p>通過對相關測試代碼的修改，最終使得整個DUT和測試代碼均可完成仿真綜合並下載至仿真加速器內進行運行，成功地提高了整個系統的運行速度。在ICE模式下一個1 000幀的測試用例只需要20 min便可運行完成，相比原有的軟件模擬提高了400倍的整體運行效率。主要模塊的信號也可全部下載下來，大大提高了代碼錯誤定位的速度。</p><p><strong>4 結論</strong></p><p>在目前的超大規模芯片設計過程中，電路調試與驗證所需的人員和時間往往超過了電路設計階段的人員及時間。因此在整體芯片的開發過程中必須重視芯片驗證的效率。而合理地使用硬件仿真加速器就是一個能夠大大提高芯片調試與驗證效率的方法。</p><p>而對於設計人員而言，在開發階段如果能夠考慮今後驗證的需求，設計更為符合可綜合語句要求的測試用例，也能夠更好地兼顧設計階段模擬和後續仿真的需求，從而提高整體的開發進度。</p><p><strong>參考文獻</strong></p><p>[1] 柏穎，馬玲芝，郭嘉，等.基於硬件仿真加速平臺的PCIE系統級調測試方法[J].電子技術應用，2017，43(8)：28-31.</p><p>[2] 蘇一萌.基於Palladium XP的Emulation運行性能和資源消耗的優化方法[J].中國集成電路，2012，11(162)：65-67.</p><p>[3] UXE User Guide(Product Version 15.1)[M].Cadence，2016.</p><p><strong>作者信息:</strong></p><p>王 雷，王晨光，吳 斌</p><p>(中國科學院微電子研究所，北京100029)</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>與驗證</a></li><li><a>仿真</a></li><li><a>芯片</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/25707bf3.html alt="海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ccecc8a705b74016a0d67974abf3b156 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/25707bf3.html title="海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生">海克斯康增材製造設計仿真方案 聚焦虛擬製造仿真數字孿生</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0bfbfb31.html alt=模擬芯片成資本熱門，信號鏈芯片第一股芯海科技估值可期 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/c4982031aea54782abb3de15c038d065 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0bfbfb31.html title=模擬芯片成資本熱門，信號鏈芯片第一股芯海科技估值可期>模擬芯片成資本熱門，信號鏈芯片第一股芯海科技估值可期</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b724593e.html alt=Abaqus仿真厚板軋製 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/a36558480ee246e39b30529a9b9e921b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b724593e.html title=Abaqus仿真厚板軋製>Abaqus仿真厚板軋製</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b2ddd0ad.html alt=混凝土內部缺陷仿真分析 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/8aebafd082d641faaf8c6d24f22880fb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b2ddd0ad.html title=混凝土內部缺陷仿真分析>混凝土內部缺陷仿真分析</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/098249b7.html alt=華為芯片被斷，Mate40芯片成謎，華為手機將首次使用雙處理器 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8ccd6b2290574048800fb9e899cad7c9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/098249b7.html title=華為芯片被斷，Mate40芯片成謎，華為手機將首次使用雙處理器>華為芯片被斷，Mate40芯片成謎，華為手機將首次使用雙處理器</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/aca2135b.html alt=中國科學院物理研究所磁性智能材料與芯片精密製備表徵系統採購項目公開招標公告 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/aca2135b.html title=中國科學院物理研究所磁性智能材料與芯片精密製備表徵系統採購項目公開招標公告>中國科學院物理研究所磁性智能材料與芯片精密製備表徵系統採購項目公開招標公告</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/408b28ff.html alt=解密AI芯片的加速原理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RcmBnwg8xNu7at style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/408b28ff.html title=解密AI芯片的加速原理>解密AI芯片的加速原理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cd21b1cc.html alt=專注存算一體芯片研發，「知存科技」如何打破AI芯片困局？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/S4z9XopEGDWkI style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cd21b1cc.html title=專注存算一體芯片研發，「知存科技」如何打破AI芯片困局？>專注存算一體芯片研發，「知存科技」如何打破AI芯片困局？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d049b31f.html alt="全球十大邏輯芯片廠去年銷售361億美元 芯片業發展規模及分佈情況" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/86341247d26d4a4cb72c6e492a66fa81 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d049b31f.html title="全球十大邏輯芯片廠去年銷售361億美元 芯片業發展規模及分佈情況">全球十大邏輯芯片廠去年銷售361億美元 芯片業發展規模及分佈情況</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0cae55b6.html alt=交通工程跨界思考:無人駕駛仿真中的交通流仿真,可用平臺有哪些？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/a51dd596375f4349a99aac2896808858 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0cae55b6.html title=交通工程跨界思考:無人駕駛仿真中的交通流仿真,可用平臺有哪些？>交通工程跨界思考:無人駕駛仿真中的交通流仿真,可用平臺有哪些？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3d393f37.html alt="無線充行業芯片方案彙總 共有37種熱門芯片型號" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15285120960050a9fcfa264 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3d393f37.html title="無線充行業芯片方案彙總 共有37種熱門芯片型號">無線充行業芯片方案彙總 共有37種熱門芯片型號</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/23e4e45b.html alt=無線充行業芯片方案彙總：11家原廠推出37種熱門芯片 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/23e4e45b.html title=無線充行業芯片方案彙總：11家原廠推出37種熱門芯片>無線充行業芯片方案彙總：11家原廠推出37種熱門芯片</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bf0ebf50.html alt=無線充行業芯片方案彙總：11家原廠推出37種熱門芯片型號 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1528474719017d30d9f0a60 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bf0ebf50.html title=無線充行業芯片方案彙總：11家原廠推出37種熱門芯片型號>無線充行業芯片方案彙總：11家原廠推出37種熱門芯片型號</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/3bc472fe.html alt="無線充裡面有哪些芯片 打包一次性看完" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f743c4923f964e9385c23d6003f49461 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/3bc472fe.html title="無線充裡面有哪些芯片 打包一次性看完">無線充裡面有哪些芯片 打包一次性看完</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/21323d62.html alt=一文了解儲存芯片 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/14e754c6c3bf4e3283f422a1b376a182 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/21323d62.html title=一文了解儲存芯片>一文了解儲存芯片</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>