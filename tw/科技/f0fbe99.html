<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>“後浪”日誌框架logback的使用和配置文件詳解 | 极客快訊</title><meta property="og:title" content="“後浪”日誌框架logback的使用和配置文件詳解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/a24a21ca714d4e7a8a6ab2fcf9f66cc0"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f0fbe99.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f0fbe99.html><meta property="article:published_time" content="2020-10-29T20:59:53+08:00"><meta property="article:modified_time" content="2020-10-29T20:59:53+08:00"><meta name=Keywords content><meta name=description content="“後浪”日誌框架logback的使用和配置文件詳解"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/f0fbe99.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>“後浪”日誌框架logback的使用和配置文件詳解</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><blockquote class=pgc-blockquote-abstract><p>原文鏈接：https://www.cnblogs.com/warking/p/5710303.html</p><p>作者：行走在雲端的愚公</p></blockquote><p><strong>說明：</strong>用過了不少日誌框架或包，但最近發現還是slf4j和logback是黃金組合。昨天寫了篇快速上手的貼文，本來想再寫一篇關於logback日誌框架的文章，就查看到了這篇，寫得比較不錯，就轉載於此，並修改了部分錯別字等（如果英文好，可以去官網：http://logback.qos.ch/一探究竟）。</p><p>可以結合我昨天發佈的<a class=pgc-link data-content=mp href="https://www.toutiao.com/i6834775665250664967/?group_id=6834775665250664967" rel="noopener noreferrer" target=_blank>如何快速實現SL4J和logback日誌框架的Web項目整合配置？</a>深入的來理解logback日誌框架。</p><p><br></p><div class=pgc-img><img alt=“後浪”日誌框架logback的使用和配置文件詳解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/a24a21ca714d4e7a8a6ab2fcf9f66cc0><p class=pgc-img-caption></p></div><p><br></p><p><strong>轉發內容如下：</strong></p><p><strong>一、logback的介紹</strong></p><p>Logback是由log4j創始人設計的另一個開源日誌組件,官方網站： http://logback.qos.ch。它當前分為下面下個模塊：</p><ul><li>logback-core：其它兩個模塊的基礎模塊</li><li>logback-classic：它是log4j的一個改良版本，同時它完整實現了slf4j API使你可以很方便地更換成其它日誌系統如log4j或JDK14 Logging</li><li>logback-access：訪問模塊與Servlet容器集成提供通過Http來訪問日誌的功能</li></ul><p><strong>二、logback取代log4j的理由：</strong></p><ol start=1><li>更快的實現：Logback的內核重寫了，在一些關鍵執行路徑上性能提升10倍以上。而且logback不僅性能提升了，初始化內存加載也更小了。</li><li>非常充分的測試：Logback經過了幾年，數不清小時的測試。Logback的測試完全不同級別的。</li><li>Logback-classic非常自然實現了SLF4j：Logback-classic實現了SLF4j。在使用SLF4j中，你都感覺不到logback-classic。而且因為logback-classic非常自然地實現了slf4j ， 所 以切換到log4j或者其它，非常容易，只需要提供成另一個jar包就OK，根本不需要去動那些通過SLF4JAPI實現的代碼。</li><li>非常充分的文檔 官方網站有兩百多頁的文檔。</li><li>自動重新加載配置文件，當配置文件修改了，Logback-classic能自動重新加載配置文件。掃描過程快且安全，它並不需要另外創建一個掃描線程。這個技術充分保證了應用程序能跑得很歡在JEE環境裡面。</li><li>Lilith是log事件的觀察者，和log4j的chainsaw類似。而lilith還能處理大數量的log數據 。</li><li>謹慎的模式和非常友好的恢復，在謹慎模式下，多個FileAppender實例跑在多個JVM下，能 夠安全地寫道同一個日誌文件。RollingFileAppender會有些限制。Logback的FileAppender和它的子類包括 RollingFileAppender能夠非常友好地從I/O異常中恢復。</li><li>配置文件可以處理不同的情況，開發人員經常需要判斷不同的Logback配置文件在不同的環境下（開發，測試，生產）。而這些配置文件僅僅只有一些很小的不同，可以通過,和來實現，這樣一個配置文件就可以適應多個環境。</li><li>Filters（過濾器）有些時候，需要診斷一個問題，需要打出日誌。在log4j，只有降低日誌級別，不過這樣會打出大量的日誌，會影響應用性能。在Logback，你可以繼續 保持那個日誌級別而除掉某種特殊情況，如alice這個用戶登錄，她的日誌將打在DEBUG級別而其他用戶可以繼續打在WARN級別。要實現這個功能只需加4行XML配置。可以參考MDCFIlter 。</li><li>SiftingAppender（一個非常多功能的Appender）：它可以用來分割日誌文件根據任何一個給定的運行參數。如，SiftingAppender能夠區別日誌事件跟進用戶的Session，然後每個用戶會有一個日誌文件。</li><li>自動壓縮已經打出來的log：RollingFileAppender在產生新文件的時候，會自動壓縮已經打出來的日誌文件。壓縮是個異步過程，所以甚至對於大的日誌文件，在壓縮過程中應用不會受任何影響。</li><li>堆棧樹帶有包版本：Logback在打出堆棧樹日誌時，會帶上包的數據。</li><li>自動去除舊的日誌文件：通過設置TimeBasedRollingPolicy或者SizeAndTimeBasedFNATP的maxHistory屬性，你可以控制已經產生日誌文件的最大數量。如果設置maxHistory 12，那那些log文件超過12個月的都會被自動移除。</li></ol><p><strong>三、logback的配置介紹</strong></p><ul><li>Logger、appender及layout</li></ul><p>　　Logger作為日誌的記錄器，把它關聯到應用的對應的context上後，主要用於存放日誌對象，也可以定義日誌類型、級別。　　Appender主要用於指定日誌輸出的目的地，目的地可以是控制檯、文件、遠程套接字服務器、 MySQL、PostreSQL、 Oracle和其他數據庫、 JMS和遠程UNIX Syslog守護進程等。　　Layout 負責把事件轉換成字符串，格式化的日誌信息的輸出。</p><ul><li>logger context</li></ul><p>　　各個logger 都被關聯到一個 LoggerContext，LoggerContext負責製造logger，也負責以樹結構排列各logger。其他所有logger也通過org.slf4j.LoggerFactory 類的靜態方法getLogger取得。 getLogger方法以 logger名稱為參數。用同一名字調用LoggerFactory.getLogger 方法所得到的永遠都是同一個logger對象的引用。</p><ul><li>有效級別及級別的繼承</li></ul><p>　　Logger 可以被分配級別。級別包括：TRACE、DEBUG、INFO、WARN 和 ERROR，定義於ch.qos.logback.classic.Level類。如果 logger沒有被分配級別，那麼它將從有被分配級別的最近的祖先那裡繼承級別。root logger 默認級別是 DEBUG。</p><ul><li>打印方法與基本的選擇規則</li></ul><p>　　打印方法決定記錄請求的級別。例如，如果 L 是一個 logger 實例，那麼，語句 L.info("..")是一條級別為 INFO的記錄語句。記錄請求的級別在高於或等於其 logger 的有效級別時被稱為被啟用，否則，稱為被禁用。記錄請求級別為 p，其 logger的有效級別為 q，只有則當 p>=q時，該請求才會被執行。該規則是 logback 的核心。級別排序為： TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR<strong>四、logback的默認配置</strong></p><p>如果配置文件 logback-test.xml 和 logback.xml 都不存在，那麼 logback 默認地會調用BasicConfigurator ，創建一個最小化配置。最小化配置由一個關聯到根 logger 的ConsoleAppender 組成。輸出用模式為%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n 的 PatternLayoutEncoder 進行格式化。root logger 默認級別是 DEBUG。</p><ul><li>Logback的配置文件</li></ul><p>　　Logback 配置文件的語法非常靈活。正因為靈活，所以無法用 DTD 或 XML schema 進行定義。儘管如此，可以這樣描述配置文件的基本結構：以&lt;configuration>開頭，後面有零個或多個&lt;appender>元素，有零個或多個&lt;logger>元素，有最多一個&lt;root>元素。</p><ul><li>Logback默認配置的步驟</li></ul><ol start=1><li>嘗試在 classpath下查找文件logback-test.xml；</li><li>如果文件不存在，則查找文件logback.xml；</li><li>如果兩個文件都不存在，logback用BasicConfigurator自動對自己進行配置，這會導致記錄輸出到控制檯。</li></ol><p><strong>五、logback.xml常用配置詳解</strong></p><p></p><div class=pgc-img><img alt=“後浪”日誌框架logback的使用和配置文件詳解 onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/10ab836e85f1493fbc006c45948a0b92><p class=pgc-img-caption></p></div><p><br></p><li>(1) 根節點&lt;configuration>，包含下面三個屬性：</li><p>　　　　scan: 當此屬性設置為true時，配置文件如果發生改變，將會被重新加載，默認值為true。　　　　</p><p>　　　　scanPeriod: 設置監測配置文件是否有修改的時間間隔，如果沒有給出時間單位，默認單位是毫秒。當scan為true時，此屬性生效。默認的時間間隔為1分鐘。</p><p>　　　　debug: 當此屬性設置為true時，將打印出logback內部日誌信息，實時查看logback運行狀態。默認值為false。　　例如：</p><pre><code>&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; 　　  &lt;!--其他配置省略--&gt; &lt;/configuration&gt;　</code></pre><ul><li>(2) 子節點&lt;contextName>：用來設置上下文名稱，每個logger都關聯到logger上下文，默認上下文名稱為default。但可以使用&lt;contextName>設置成其他名字，用於區分不同應用程序的記錄。一旦設置，不能修改。</li></ul><p>　　例如：</p><pre><code>&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt;      &lt;contextName&gt;myAppName&lt;/contextName&gt; 　　  &lt;!--其他配置省略--&gt;&lt;/configuration&gt;    </code></pre><ul><li>(3) 子節點&lt;property> ：用來定義變量值，它有兩個屬性name和value，通過&lt;property>定義的值會被插入到logger上下文中，可以使“${}”來使用變量。</li></ul><p>　　　　name: 變量的名稱;</p><p>　　　　value: 的值時變量定義的值</p><p>　　例如：</p><pre><code>&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; 　　　&lt;property name="APP_Name" value="myAppName" /&gt; 　　　&lt;contextName&gt;${APP_Name}&lt;/contextName&gt; 　　　&lt;!--其他配置省略--&gt; &lt;/configuration&gt;</code></pre><ul><li>(4) 子節點&lt;timestamp>：獲取時間戳字符串，它有兩個屬性key和datePattern</li></ul><p>　　　　key: 標識此&lt;timestamp> 的名字；</p><p>　　　　datePattern: 設置將當前時間（解析配置文件的時間）轉換為字符串的模式，遵循java.txt.SimpleDateFormat的格式。　　例如：</p><pre><code>&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; 　　&lt;timestamp key="bySecond" datePattern="yyyyMMdd'T'HHmmss"/&gt; 　　&lt;contextName&gt;${bySecond}&lt;/contextName&gt; 　　&lt;!-- 其他配置省略--&gt; &lt;/configuration&gt;</code></pre><ul><li>(5) 子節點&lt;appender>：負責寫日誌的組件，它有兩個必要屬性name和class。</li><li>name指定appender名稱，</li><li>class指定appender的全限定名</li></ul><p>　　　　5.1、ConsoleAppender 把日誌輸出到控制檯，有以下子節點：</p><p>　　　　　　&lt;encoder>：對日誌進行格式化。（具體參數稍後講解 ）</p><p>　　　　　　&lt;target>：字符串System.out(默認)或者System.err（區別不多說了）</p><p>例如：</p><pre><code>&lt;configuration&gt; 　　　&lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt; 　　　　　 &lt;encoder&gt; 　　　　　　　　　&lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg %n&lt;/pattern&gt; 　　　　　 &lt;/encoder&gt; 　　　&lt;/appender&gt; 　　　&lt;root level="DEBUG"&gt; 　　　　　　&lt;appender-ref ref="STDOUT" /&gt; 　　　&lt;/root&gt; &lt;/configuration&gt;</code></pre><p>上述配置表示把>=DEBUG級別的日誌都輸出到控制檯</p><p>　　　　5.2、FileAppender：把日誌添加到文件，有以下子節點：</p><p>　　　　　　&lt;file>：被寫入的文件名，可以是相對目錄，也可以是絕對目錄，如果上級目錄不存在會自動創建，沒有默認值。</p><p>　　　　　　&lt;append>：如果是 true，日誌被追加到文件結尾，如果是 false，清空現存文件，默認是true。</p><p>　　　　　　&lt;encoder>：對記錄事件進行格式化。（具體參數稍後講解 ）</p><p>　　　　　　&lt;prudent>：如果是 true，日誌會被安全的寫入文件，即使其他的FileAppender也在向此文件做寫入操作，效率低，默認是 false。</p><p>　　　　例如：</p><pre><code>&lt;configuration&gt; 　　&lt;appender name="FILE" class="ch.qos.logback.core.FileAppender"&gt; 　　　　&lt;file&gt;testFile.log&lt;/file&gt; 　　　　&lt;append&gt;true&lt;/append&gt; 　　　　&lt;encoder&gt; 　　　　　　&lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt; 　　　　&lt;/encoder&gt; 　　&lt;/appender&gt; 　　&lt;root level="DEBUG"&gt; 　　　　&lt;appender-ref ref="FILE" /&gt; 　　&lt;/root&gt; &lt;/configuration&gt;</code></pre><p>上述配置表示把>=DEBUG級別的日誌都輸出到testFile.log</p><p>　　　　5.3、RollingFileAppender：滾動記錄文件，先將日誌記錄到指定文件，當符合某個條件時，將日誌記錄到其他文件。有以下子節點：</p><p>　　　　　　&lt;file>：被寫入的文件名，可以是相對目錄，也可以是絕對目錄，如果上級目錄不存在會自動創建，沒有默認值。</p><p>　　　　　　&lt;append>：如果是 true，日誌被追加到文件結尾，如果是 false，清空現存文件，默認是true。</p><p>　　　　　　&lt;rollingPolicy>:當發生滾動時，決定RollingFileAppender的行為，涉及文件移動和重命名。</p><p>屬性class定義具體的滾動策略類　　　　　　class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"： 最常用的滾動策略，它根據時間來制定滾動策略，既負責滾動也負責觸發滾動。有以下子節點：</p><p>　　　　　　　　&lt;fileNamePattern>：必要節點，包含文件名及“%d”轉換符，“%d”可以包含一個java.text.SimpleDateFormat指定的時間格式，如：%d{yyyy-MM}。如果直接使用 %d，默認格式是 yyyy-MM-dd。RollingFileAppender的file字節點可有可無，通過設置file，可以為活動文件和歸檔文件指定不同位置，當前日誌總是記錄到file指定的文件（活動文件），活動文件的名字不會改變；如果沒設置file，活動文件的名字會根據fileNamePattern 的值，每隔一段時間改變一次。“/”或者“\”會被當做目錄分隔符。</p><p>　　　　　　　　&lt;maxHistory>:可選節點，控制保留的歸檔文件的最大數量，超出數量就刪除舊文件。假設設置每個月滾動，且&lt;maxHistory>是6，則只保存最近6個月的文件，刪除之前的舊文件。注意，刪除舊文件時，那些為了歸檔而創建的目錄也會被刪除。　　　　　　class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"： 查看當前活動文件的大小，如果超過指定大小會告知RollingFileAppender 觸發當前活動文件滾動。只有一個節點:</p><p>　　　　　　　　&lt;maxFileSize>:這是活動文件的大小，默認值是10MB。</p><p>　　　　　　　　&lt;prudent>：當為true時，不支持FixedWindowRollingPolicy。支持TimeBasedRollingPolicy，但是有兩個限制，1不支持也不允許文件壓縮，2不能設置file屬性，必須留空。</p><p>　　　　　　&lt;triggeringPolicy >: 告知 RollingFileAppender 合適激活滾動。　　　　　　class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy" 根據固定窗口算法重命名文件的滾動策略。有以下子節點：</p><p>　　　　　　　　&lt;minIndex>:窗口索引最小值</p><p>　　　　　　　　&lt;maxIndex>:窗口索引最大值，當用戶指定的窗口過大時，會自動將窗口設置為12。</p><p>　　　　　　　　&lt;fileNamePattern>:必須包含“%i”例如，假設最小值和最大值分別為1和2，命名模式為 mylog%i.log,會產生歸檔文件mylog1.log和mylog2.log。還可以指定文件壓縮選項，例如，mylog%i.log.gz 或者 沒有log%i.log.zip例如： 　　　　　　　　</p><pre><code>&lt;configuration&gt; 　　　&lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; 　　　　　　&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; 　　　　　　　　　&lt;fileNamePattern&gt;logFile.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt; 　　　　　　　　　&lt;maxHistory&gt;30&lt;/maxHistory&gt; 　　　　　　&lt;/rollingPolicy&gt; 　　　　　　&lt;encoder&gt; 　　　　　　　　　&lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt; 　　　　　　&lt;/encoder&gt; 　　　&lt;/appender&gt; 　　　&lt;root level="DEBUG"&gt; 　　　　　　&lt;appender-ref ref="FILE" /&gt; 　　　&lt;/root&gt; &lt;/configuration&gt;</code></pre><p>備註：上述配置表示每天生成一個日誌文件，保存30天的日誌文件。　　　　　　　　</p><pre><code>&lt;configuration&gt; 　　　&lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; 　　　　　　&lt;file&gt;test.log&lt;/file&gt; 　　　　　　&lt;rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy"&gt; 　　　　　　　　　　&lt;fileNamePattern&gt;tests.%i.log.zip&lt;/fileNamePattern&gt; 　　　　　　　　　　&lt;minIndex&gt;1&lt;/minIndex&gt; 　　　　　　　　　　&lt;maxIndex&gt;3&lt;/maxIndex&gt; 　　　　　　&lt;/rollingPolicy&gt; 　　　　　　&lt;triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"&gt; 　　　　　　　　　　&lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt; 　　　　　　&lt;/triggeringPolicy&gt; 　　　　　　&lt;encoder&gt; 　　　　　　　　　&lt;pattern&gt;%-4relative [%thread] %-5level %logger{35} - %msg%n&lt;/pattern&gt; 　　　　　　&lt;/encoder&gt; 　　　&lt;/appender&gt; 　　　&lt;root level="DEBUG"&gt; 　　　　　　&lt;appender-ref ref="FILE" /&gt; 　　　&lt;/root&gt; &lt;/configuration&gt;</code></pre><p>備註：上述配置表示按照固定窗口模式生成日誌文件，當文件大於5MB時，生成新的日誌文件。窗口大小是1到3，當保存了3個歸檔文件後，將覆蓋最早的日誌。&lt;encoder>：對記錄事件進行格式化。負責兩件事，一是把日誌信息轉換成字節數組，二是把字節數組寫入到輸出流。PatternLayoutEncoder 是唯一有用的且默認的encoder ，有一個&lt;pattern>節點，用來設置日誌的輸入格式。使用“%”加“轉換符”方式，如果要輸出“%”，則必須用“\”對“\%”進行轉義。</p><p>　　　　5.4、還有SocketAppender、SMTPAppender、DBAppender、SyslogAppender、SiftingAppender，並不常用，這裡就不詳解了。大家可以參考官方文檔（http://logback.qos.ch/documentation.html），還可以編寫自己的Appender。</p><ul><li>（6）子節點&lt;loger>：用來設置某一個包或具體的某一個類的日誌打印級別、以及指定&lt;appender>。&lt;loger>僅有一個name屬性，一個可選的level和一個可選的additivity屬性。</li></ul><p>可以包含零個或多個&lt;appender-ref>元素，標識這個appender將會添加到這個loger</p><p>　　　　name: 用來指定受此loger約束的某一個包或者具體的某一個類。</p><p>　　　　level: 用來設置打印級別，大小寫無關：TRACE, DEBUG, INFO, WARN, ERROR, ALL和OFF，還有一個特殊值INHERITED或者同義詞NULL，代表強制執行上級的級別。 如果未設置此屬性，那麼當前loger將會繼承上級的級別。</p><p>additivity: 是否向上級loger傳遞打印信息。默認是true。同&lt;loger>一樣，可以包含零個或多個&lt;appender-ref>元素，標識這個appender將會添加到這個loger。</p><ul><li>（7）子節點&lt;root>:它也是&lt;loger>元素，但是它是根loger,是所有&lt;loger>的上級。只有一個level屬性，因為name已經被命名為"root",且已經是最上級了。</li></ul><p>　　　　level: 用來設置打印級別，大小寫無關：TRACE, DEBUG, INFO, WARN, ERROR, ALL和OFF，不能設置為INHERITED或者同義詞NULL。 默認是DEBUG。</p><p><strong>六、常用logger配置</strong></p><pre><code>&lt;!-- show parameters for hibernate sql 專為 Hibernate 定製 --&gt;&lt;logger name="org.hibernate.type.descriptor.sql.BasicBinder" level="TRACE" /&gt;&lt;logger name="org.hibernate.type.descriptor.sql.BasicExtractor" level="DEBUG" /&gt;&lt;logger name="org.hibernate.SQL" level="DEBUG" /&gt;&lt;logger name="org.hibernate.engine.QueryParameters" level="DEBUG" /&gt;&lt;logger name="org.hibernate.engine.query.HQLQueryPlan" level="DEBUG" /&gt;&lt;!--myibatis log configure--&gt;&lt;logger name="com.apache.ibatis" level="TRACE"/&gt;&lt;logger name="java.sql.Connection" level="DEBUG"/&gt;&lt;logger name="java.sql.Statement" level="DEBUG"/&gt;&lt;logger name="java.sql.PreparedStatement" level="DEBUG"/&gt;</code></pre><p><strong>七、Demo</strong></p><ul><li>（1）添加依賴包logback使用需要和slf4j一起使用，所以總共需要添加依賴的包有slf4j-api</li></ul><p>logback使用需要和slf4j一起使用，所以總共需要添加依賴的包有slf4j-api.jar，logback-core.jar，logback-classic.jar，logback-access.jar這個暫時用不到所以不添加依賴了，maven配置</p><pre><code>　　&lt;properties&gt;　　　　&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;　　　　&lt;logback.version&gt;1.1.7&lt;/logback.version&gt;　　　　&lt;slf4j.version&gt;1.7.21&lt;/slf4j.version&gt;　　&lt;/properties&gt;　　&lt;dependencies&gt;　　　　&lt;dependency&gt;　　　　　　&lt;groupId&gt;org.slf4j&lt;/groupId&gt;　　　　　　&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;　　　　　　&lt;version&gt;${slf4j.version}&lt;/version&gt;　　　　　　&lt;scope&gt;compile&lt;/scope&gt;　　　　&lt;/dependency&gt;　　　　&lt;dependency&gt;　　　　　　&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;　　　　　　&lt;artifactId&gt;logback-core&lt;/artifactId&gt;　　　　　　&lt;version&gt;${logback.version}&lt;/version&gt;　　　　&lt;/dependency&gt;　　　　&lt;dependency&gt;　　　　　　&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;　　　　　　&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;　　　　　　&lt;version&gt;${logback.version}&lt;/version&gt;　　　　　　&lt;/dependency&gt;　　&lt;/dependencies&gt;</code></pre><ul><li>（2）logback.xml配置</li></ul><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;configuration debug="false"&gt;&lt;!--定義日誌文件的存儲地址 勿在 LogBack 的配置中使用相對路徑--&gt;&lt;property name="LOG_HOME" value="/home" /&gt;&lt;!-- 控制檯輸出 --&gt;&lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;&lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;&lt;!--格式化輸出：%d表示日期，%thread表示線程名，%-5level：級別從左顯示5個字符寬度%msg：日誌消息，%n是換行符--&gt;&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;&lt;/encoder&gt;&lt;/appender&gt;&lt;!-- 按照每天生成日誌文件 --&gt;&lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;&lt;!--日誌文件輸出的文件名--&gt;&lt;FileNamePattern&gt;${LOG_HOME}/TestWeb.log.%d{yyyy-MM-dd}.log&lt;/FileNamePattern&gt;&lt;!--日誌文件保留天數--&gt;&lt;MaxHistory&gt;30&lt;/MaxHistory&gt;&lt;/rollingPolicy&gt;&lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;&lt;!--格式化輸出：%d表示日期，%thread表示線程名，%-5level：級別從左顯示5個字符寬度%msg：日誌消息，%n是換行符--&gt;&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;&lt;/encoder&gt;&lt;!--日誌文件最大的大小--&gt;&lt;triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"&gt;&lt;MaxFileSize&gt;10MB&lt;/MaxFileSize&gt;&lt;/triggeringPolicy&gt;&lt;/appender&gt;&lt;!-- 日誌輸出級別 --&gt;&lt;root level="INFO"&gt;&lt;appender-ref ref="STDOUT" /&gt;&lt;/root&gt;&lt;/configuration&gt;</code></pre><ul><li>（3）java代碼</li></ul><pre><code>/**　　* Hello world!　　*/　　public class App {　　private final static Logger logger = LoggerFactory.getLogger(App.class);　　　　public static void main(String[] args) {　　　　　　logger.info("logback 成功了");　　　　　　logger.error("logback 成功了");　　　　　　logger.debug("logback 成功了");　　　　}　　}</code></pre><ul><li>（4）輸出</li></ul><div class=pgc-img><img alt=“後浪”日誌框架logback的使用和配置文件詳解 onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/6952abc0607d49ac8e0969fc990ab769><p class=pgc-img-caption></p></div><p><strong>八、總結</strong></p><p>logback的配置，需要配置輸出源appender，打日誌的loger（子節點）和root（根節點）。實際上，它輸出日誌是從子節點開始，子節點如果有輸出源直接輸出，如果無，判斷配置的additivity，是否向上級傳遞，即是否向root傳遞，傳遞則採用root的輸出源，否則不輸出日誌。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>配置文件</a></li><li><a>日誌</a></li><li><a>logback</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/9cdd9391.html alt=9.29炒股日誌，賺3714元，如何快速買進賣出股票併成交 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/4c74ae96a7cb43149f4141d0a6bf996e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9cdd9391.html title=9.29炒股日誌，賺3714元，如何快速買進賣出股票併成交>9.29炒股日誌，賺3714元，如何快速買進賣出股票併成交</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html alt=Win10系統如何刪除用戶配置文件？這個方法麻煩收好 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/5d9b3c531d8e4d64ac1f5582c2a6867e style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6d3adf54.html title=Win10系統如何刪除用戶配置文件？這個方法麻煩收好>Win10系統如何刪除用戶配置文件？這個方法麻煩收好</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html alt="Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/Ry0yIZwBOBWLcl style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b54ce2e1.html title="Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生">Windows 10 KB4549951補丁讓用戶配置文件缺失故障再次發生</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e5f86559.html alt="外媒發現Windows 10用戶配置文件丟失問題仍舊存在" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RxyuIVJ8HFwmLA style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e5f86559.html title="外媒發現Windows 10用戶配置文件丟失問題仍舊存在">外媒發現Windows 10用戶配置文件丟失問題仍舊存在</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8abef354.html alt=關於監控、鏈路追蹤、日誌三者的區別 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fca2d1c614b645dba05902fc81eef87d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8abef354.html title=關於監控、鏈路追蹤、日誌三者的區別>關於監控、鏈路追蹤、日誌三者的區別</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ba9dfd14.html alt=時光日誌-日常生活記錄軟件 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/f9af7b4ed8264323a8d39151dae8e013 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ba9dfd14.html title=時光日誌-日常生活記錄軟件>時光日誌-日常生活記錄軟件</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0f8e9216.html alt=寫個日誌請求切面，前後端甩鍋更方便 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/9ee016d0-a9b0-43a8-95a8-2d6d7b5e7e21 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0f8e9216.html title=寫個日誌請求切面，前後端甩鍋更方便>寫個日誌請求切面，前後端甩鍋更方便</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/398a9b5e.html alt=精品推薦！Nginx的日誌文件、緩存、自動列目錄、壓縮等相關配置 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/3c72000101f59eee9921 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/398a9b5e.html title=精品推薦！Nginx的日誌文件、緩存、自動列目錄、壓縮等相關配置>精品推薦！Nginx的日誌文件、緩存、自動列目錄、壓縮等相關配置</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0a164e33.html alt=方塊世界開發日誌 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RngjZzeJ8ibu9k style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0a164e33.html title=方塊世界開發日誌>方塊世界開發日誌</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/f06d74f0.html alt="內蒙古長城地帶考察日誌（下） | 苗潤博" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RRNCsWXIk1H5KM style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/f06d74f0.html title="內蒙古長城地帶考察日誌（下） | 苗潤博">內蒙古長城地帶考察日誌（下） | 苗潤博</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/73637a26.html alt="騎馬與砍殺2：霸主 開發日誌 遠程武器" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1525334116266004dd62a11 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/73637a26.html title="騎馬與砍殺2：霸主 開發日誌 遠程武器">騎馬與砍殺2：霸主 開發日誌 遠程武器</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/6d7e44bc.html alt="悟空雲課堂 | 第十期：日誌偽造漏洞" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/0fb69214bf034ba584a34f313ae7ca09 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/6d7e44bc.html title="悟空雲課堂 | 第十期：日誌偽造漏洞">悟空雲課堂 | 第十期：日誌偽造漏洞</a></li><hr><li><a href=../../tw/%E7%A7%91%E5%AD%B8/0c1a40da.html alt=《醫線日誌》裡的醫患情 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RurYhtVCJjAmLD style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/0c1a40da.html title=《醫線日誌》裡的醫患情>《醫線日誌》裡的醫患情</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/25c0913d.html alt=9.24炒股日誌，虧3189元，今天分享橫盤趨勢中如何找買點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4346faf3d00a42deb4e4da8476203069 style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/25c0913d.html title=9.24炒股日誌，虧3189元，今天分享橫盤趨勢中如何找買點>9.24炒股日誌，虧3189元，今天分享橫盤趨勢中如何找買點</a></li><hr><li><a href=../../tw/%E9%81%8A%E6%88%B2/8161f937.html alt="騎馬與砍殺2：霸主 開發日誌——馬匹" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/15274261233126fd232ee2b style=border-radius:25px></a>
<a href=../../tw/%E9%81%8A%E6%88%B2/8161f937.html title="騎馬與砍殺2：霸主 開發日誌——馬匹">騎馬與砍殺2：霸主 開發日誌——馬匹</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>