<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ | æå®¢å¿«è¨Š</title><meta property="og:title" content="å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p3.pstatp.com/large/pgc-image/d055f9ada84b4227bc9c9f892143df3f"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f6bba30.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f6bba30.html><meta property="article:published_time" content="2020-10-29T20:53:45+08:00"><meta property="article:modified_time" content="2020-10-29T20:53:45+08:00"><meta name=Keywords content><meta name=description content="å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/f6bba30.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><p>11.é©é…å™¨æ¨¡å¼</p><h3 class="md-end-block md-heading">11.1.å®šç¾©</h3><p><strong>é©é…å™¨æ¨¡å¼</strong>æ˜¯ä¸€ç¨®çµæ§‹å‹è¨­è¨ˆæ¨¡å¼ï¼Œ å®ƒèƒ½ä½¿æ¥å£ä¸å…¼å®¹çš„å°è±¡èƒ½å¤ ç›¸äº’åˆä½œã€‚</p><p>é©é…å™¨æ¨¡å¼çš„è‹±æ–‡ç¿»è­¯æ˜¯ <strong>Adapter Design Pattern</strong>ã€‚é¡§åæ€ç¾©ï¼Œé€™å€‹æ¨¡å¼å°±æ˜¯ç”¨ä¾†åšé©é…çš„ï¼Œå®ƒå°‡ä¸å…¼å®¹çš„æ¥å£è½‰æ›ç‚ºå¯å…¼å®¹çš„æ¥å£ï¼Œè®“åŸæœ¬ç”±æ–¼æ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é¡å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p><p><strong>ç¤ºæ„åœ–</strong></p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/d055f9ada84b4227bc9c9f892143df3f><p class=pgc-img-caption></p></div><p><strong>ç”Ÿæ´»å ´æ™¯ï¼š</strong>é›»æºæ’è½‰æ›é ­ã€æ‰‹æ©Ÿå……é›»è½‰æ›é ­ã€é¡¯ç¤ºå™¨è½‰æ¥é ­ã€‚</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7d2dd6539ec843cc916f12a14446d9ff><p class=pgc-img-caption></p></div><p>ä½ å¯ä»¥å‰µå»ºä¸€å€‹<strong>é©é…å™¨</strong>ã€‚ é€™æ˜¯ä¸€å€‹ç‰¹æ®Šçš„å°è±¡ï¼Œ èƒ½å¤ <strong>è½‰æ›å°è±¡æ¥å£</strong>ï¼Œ ä½¿å…¶èƒ½<strong>èˆ‡å…¶ä»–å°è±¡é€²è¡Œäº¤äº’</strong>ã€‚</p><p>é©é…å™¨æ¨¡å¼é€šéå°è£å°è±¡<strong>å°‡è¤‡é›œçš„è½‰æ›éç¨‹è—æ–¼å¹•å¾Œ</strong>ã€‚ è¢«å°è£çš„å°è±¡ç”šè‡³å¯Ÿè¦ºä¸åˆ°é©é…å™¨çš„å­˜åœ¨ã€‚</p><p>é©é…å™¨ä¸åƒ…å¯ä»¥è½‰æ›ä¸åŒæ ¼å¼çš„æ•¸æ“šï¼Œ å…¶é‚„æœ‰åŠ©æ–¼æ¡ç”¨ä¸åŒæ¥å£çš„å°è±¡ä¹‹é–“çš„åˆä½œã€‚ å®ƒçš„é‹ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p><ol start=0><li>é©é…å™¨å¯¦ç¾èˆ‡å…¶ä¸­ä¸€å€‹ç¾æœ‰å°è±¡å…¼å®¹çš„æ¥å£ã€‚</li><li>ç¾æœ‰å°è±¡å¯ä»¥ä½¿ç”¨è©²æ¥å£å®‰å…¨åœ°èª¿ç”¨é©é…å™¨æ–¹æ³•ã€‚</li><li>é©é…å™¨æ–¹æ³•è¢«èª¿ç”¨å¾Œå°‡ä»¥å¦ä¸€å€‹å°è±¡å…¼å®¹çš„æ ¼å¼å’Œé †åºå°‡è«‹æ±‚å‚³éçµ¦è©²å°è±¡ã€‚</li></ol><p>æœ‰æ™‚ä½ ç”šè‡³å¯ä»¥å‰µå»ºä¸€å€‹é›™å‘é©é…å™¨ä¾†å¯¦ç¾é›™å‘è½‰æ›èª¿ç”¨ã€‚</p><h3 class="md-end-block md-heading">11.2.æ‡‰ç”¨å ´æ™¯</h3><ol start=0><li>å°è£æœ‰ç¼ºé™·çš„æ¥å£è¨­è¨ˆ</li><li>çµ±ä¸€å¤šå€‹é¡çš„æ¥å£è¨­è¨ˆ</li><li>æ›¿æ›ä¾è³´çš„å¤–éƒ¨ç³»çµ±</li><li>å…¼å®¹è€ç‰ˆæœ¬æ¥å£</li><li>é©é…ä¸åŒæ ¼å¼çš„æ•¸æ“š</li></ol><h3 class="md-end-block md-heading">11.3.é©é…å™¨è§’è‰²</h3><p>Adaptee æ˜¯ä¸€çµ„ä¸å…¼å®¹ ITarget æ¥å£å®šç¾©çš„æ¥å£ã€‚</p><p>ITarget è¡¨ç¤ºè¦è½‰åŒ–æˆçš„æ¥å£å®šç¾©ã€‚</p><p>Adapter/Adaptor å°‡ Adaptee è½‰åŒ–æˆä¸€çµ„ç¬¦åˆ ITarget æ¥å£å®šç¾©çš„æ¥å£ã€‚</p><p>é©é…å™¨æœ‰3ä¸­å½¢å¼ï¼šé¡é©é…å™¨ã€å°è±¡é©é…å™¨ã€æ¥å£é©é…å™¨</p><h3 class="md-end-block md-heading">11.4.é¡é©é…å™¨</h3><p>é¡é©é…å™¨: åŸºæ–¼ç¹¼æ‰¿ã€‚</p><p>åšæ³•ï¼šè®“Adaptorå¯¦ç¾ITargetæ¥å£ï¼Œä¸¦ä¸”ç¹¼æ‰¿Adapteeï¼Œé€™æ¨£Adaptorå°±å…·å‚™ITargetå’ŒAdapteeçš„ç‰¹æ€§ï¼Œå°±å¯ä»¥å°‡å…©è€…é€²è¡Œè½‰åŒ–ã€‚</p><p>UMLé¡åœ–ï¼š</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/5ff8fdba5fc6449da83b4fa0595e8512><p class=pgc-img-caption></p></div><pre><code>Â // é¡é©é…å™¨: åŸºæ–¼ç¹¼æ‰¿Â â€‹Â // ITarget è¡¨ç¤ºè¦è½‰åŒ–æˆçš„æ¥å£å®šç¾©Â public interface ITarget {Â  Â void f1();Â  Â void f2();Â  Â void fc();Â }Â â€‹Â // Adaptee æ˜¯ä¸€çµ„ä¸å…¼å®¹ ITarget æ¥å£å®šç¾©çš„æ¥å£Â public class Adaptee {Â  Â public void fa() { //... }Â  Â public void fb() { //... }Â  Â public void fc() { //... }Â }Â â€‹Â // Adaptor å°‡ Adaptee è½‰åŒ–æˆä¸€çµ„ç¬¦åˆ ITarget æ¥å£å®šç¾©çš„æ¥å£ Â  Â  Â Â public class Adaptor extends Adaptee implements ITarget {Â  Â public void f1() {Â  Â  Â super.fa();Â   }Â  Â Â  Â public void f2() {Â  Â  Â //...é‡æ–°å¯¦ç¾f2()...Â   }Â  Â Â  Â // é€™è£¡fc()ä¸éœ€è¦å¯¦ç¾ï¼Œç›´æ¥ç¹¼æ‰¿è‡ªAdapteeï¼Œé€™æ˜¯è·Ÿå°è±¡é©é…å™¨æœ€å¤§çš„ä¸åŒé»Â }</code></pre><h3 class="md-end-block md-heading">11.5.å°è±¡é©é…å™¨</h3><p>å°è±¡é©é…å™¨ï¼šåŸºæ–¼çµ„åˆã€‚</p><p>åšæ³•ï¼šè®“Adaptor å¯¦ç¾ITarget æ¥å£ï¼Œç„¶å¾Œå…§éƒ¨æŒæœ‰Adapteeå¯¦ä¾‹ï¼Œç„¶å¾Œåœ¨ITargetæ¥å£è¦å®šçš„æ–¹æ³•å…§è½‰æ›Adapteeã€‚</p><p>URLé¡åœ–ï¼š</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/92485d340cd440d5bfecd87140f4169c><p class=pgc-img-caption></p></div><pre><code>Â // å°è±¡é©é…å™¨ï¼šåŸºæ–¼çµ„åˆÂ â€‹Â // ITarget è¡¨ç¤ºè¦è½‰åŒ–æˆçš„æ¥å£å®šç¾©Â public interface ITarget {Â  Â void f1();Â  Â void f2();Â  Â void fc();Â }Â â€‹Â // Adaptee æ˜¯ä¸€çµ„ä¸å…¼å®¹ ITarget æ¥å£å®šç¾©çš„æ¥å£Â public class Adaptee {Â  Â public void fa() { //... }Â  Â public void fb() { //... }Â  Â public void fc() { //... }Â }Â â€‹Â // Adaptor å°‡ Adaptee è½‰åŒ–æˆä¸€çµ„ç¬¦åˆ ITarget æ¥å£å®šç¾©çš„æ¥å£ Â  Â  Â  Â  Â  Â Â public class Adaptor implements ITarget {Â  Â private Adaptee adaptee;Â  Â Â  Â public Adaptor(Adaptee adaptee) {Â  Â  Â this.adaptee = adaptee;Â   }Â  Â Â  Â public void f1() {Â  Â  Â adaptee.fa(); //å§”è¨—çµ¦AdapteeÂ   }Â  Â Â  Â public void f2() {Â  Â  Â //...é‡æ–°å¯¦ç¾f2()...Â   }Â  Â Â  Â public void fc() {Â  Â  Â adaptee.fc();Â   }Â }</code></pre><h3 class="md-end-block md-heading">11.5.æ¥å£é©é…å™¨</h3><p>ä½¿ç”¨æ¥å£é©é…å™¨è®“æˆ‘å€‘åªå¯¦ç¾æˆ‘å€‘æ‰€éœ€è¦çš„æ¥å£æ–¹æ³•</p><pre><code>Â public class CD { //é€™å€‹é¡ä¾†è‡ªå¤–éƒ¨sdkï¼Œæˆ‘å€‘ç„¡æ¬Šä¿®æ”¹å®ƒçš„ä»£ç¢¼Â  Â //...Â  Â public static void staticFunction1() { //... }Â  Â Â  Â public void uglyNamingFunction2() { //... }Â â€‹Â  Â public void tooManyParamsFunction3(int paramA, int paramB, ...) { //... }Â  Â Â  Â public void lowPerformanceFunction4() { //... }Â }Â â€‹Â // ä½¿ç”¨é©é…å™¨æ¨¡å¼é€²è¡Œé‡æ§‹Â public class ITarget {Â  Â void function1();Â  Â void function2();Â  Â void fucntion3(ParamsWrapperDefinition paramsWrapper);Â  Â void function4();Â  Â //...Â }Â // æ³¨æ„ï¼šé©é…å™¨é¡çš„å‘½åä¸ä¸€å®šéå¾—æœ«å°¾å¸¶AdaptorÂ public class CDAdaptor extends CD implements ITarget {Â  Â //...Â  Â public void function1() {Â  Â  Â  super.staticFunction1();Â   }Â  Â Â  Â public void function2() {Â  Â  Â super.uglyNamingFucntion2();Â   }Â  Â Â  Â public void function3(ParamsWrapperDefinition paramsWrapper) {Â  Â  Â  super.tooManyParamsFunction3(paramsWrapper.getParamA(), ...);Â   }Â  Â Â  Â public void function4() {Â  Â  Â //...reimplement it...Â   }Â }</code></pre><h3 class="md-end-block md-heading">11.6.å¯¦æˆ°</h3><p>é‡æ§‹ç¬¬ä¸‰æ–¹ç™»éŒ„è‡ªç”±é©é…å ´æ™¯</p><p>é¦–å…ˆå‰µå»ºçµ±ä¸€ç™»é™¸çµæœResultMsgé¡ï¼š</p><pre><code>Â @DataÂ public class ResultMsg {Â â€‹Â  Â  Â private int code;Â  Â  Â private String msg;Â  Â  Â private Object data;Â â€‹Â  Â  Â public ResultMsg(int code, String msg, Object data) {Â  Â  Â  Â  Â this.code = code;Â  Â  Â  Â  Â this.msg = msg;Â  Â  Â  Â  Â this.data = data;Â  Â   }Â }</code></pre><p>å‡è¨­è€ç³»çµ±çš„çš„ç™»éŒ„é‚è¼¯PasswordServiceï¼š</p><pre><code>Â public class PassportService {Â â€‹Â  Â  Â /**Â  Â  Â  * è¨»å†Šæ–¹æ³•Â  Â  Â  * @param usernameÂ  Â  Â  * @param passwordÂ  Â  Â  * @returnÂ  Â  Â  */Â  Â  Â public ResultMsg regist(String username,String password){Â  Â  Â  Â  Â return Â new ResultMsg(200,"è¨»å†ŠæˆåŠŸ",new Member());Â  Â   }Â â€‹Â  Â  Â /**Â  Â  Â  * ç™»éŒ„çš„æ–¹æ³•Â  Â  Â  * @param usernameÂ  Â  Â  * @param passwordÂ  Â  Â  * @returnÂ  Â  Â  */Â  Â  Â public ResultMsg login(String username,String password){Â  Â  Â  Â  Â return null;Â  Â   }Â }</code></pre><p>éµå¾ªé–‹é–‰åŸå‰‡ï¼Œè€ä»£ç¢¼æˆ‘å€‘ä¸ä¿®æ”¹ã€‚é–‹å•Ÿä»£ç¢¼é‡æ§‹ä¹‹è·¯ï¼Œå‰µå»ºMemberé¡ï¼š</p><pre><code>Â @DataÂ public class Member {Â â€‹Â  Â  Â private String username;Â  Â  Â private String password;Â  Â  Â private String mid;Â  Â  Â private String info;Â }</code></pre><p>é‹è¡Œç©©å®šçš„ä»£ç¢¼ä¸æ”¹å‹•ã€‚å‰µå»ºITargetè§’è‰²IPassportForThirdæ¥å£ã€‚</p><pre><code>Â public interface IPassportForThird {Â â€‹Â  Â  Â ResultMsg loginForQQ(String openId);Â â€‹Â  Â  Â ResultMsg loginForWechat(String openId);Â â€‹Â  Â  Â ResultMsg loginForToken(String token);Â â€‹Â  Â  Â ResultMsg loginForTelphone(String phone, String code);Â }</code></pre><p>å‰µå»ºé©é…å™¨å…¼å®¹Adaptorè§’è‰²PassportForThirdAdapteré¡</p><pre><code>Â public class PassportForThirdAdapter implements IPassportForThird {Â â€‹Â  Â  Â public ResultMsg loginForQQ(String openId) {Â  Â  Â  Â  Â return processLogin(openId, LoginForQQAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForWechat(String openId) {Â  Â  Â  Â  Â return processLogin(openId, LoginForWechatAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForToken(String token) {Â  Â  Â  Â  Â return processLogin(token, LoginForTokenAdapter.class);Â  Â   }Â â€‹Â  Â  Â public ResultMsg loginForTelphone(String phone, String code) {Â  Â  Â  Â  Â return processLogin(phone, LoginForTelAdapter.class);Â  Â   }Â â€‹Â  Â  Â private ResultMsg processLogin(String id,Class&lt;? extends ILoginAdapter&gt; clazz){Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â ILoginAdapter adapter = clazz.newInstance();Â  Â  Â  Â  Â  Â  Â if (adapter.support(adapter)){Â  Â  Â  Â  Â  Â  Â  Â  Â return adapter.login(id,adapter);Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   } catch (Exception e) {Â  Â  Â  Â  Â  Â  Â e.printStackTrace();Â  Â  Â  Â   }Â  Â  Â  Â  Â return null;Â  Â   }Â }</code></pre><p>æ ¹æ“šä¸åŒç™»éŒ„æ–¹å¼ï¼Œå‰µå»ºä¸åŒç™»éŒ„Adaptorã€‚é¦–å…ˆï¼Œå‰µå»ºLoginAdapteræ¥å£ï¼š</p><pre><code>public interface ILoginAdapter {    boolean support(Object object);    ResultMsg login(String id,Object adapter);}</code></pre><p>å‰µå»ºä¸€å€‹æŠ½è±¡é¡AbstraceAdapterç¹¼æ‰¿PassportServiceåŸæœ‰åŠŸèƒ½ï¼ŒåŒæ™‚å¯¦ç¾ILoginAdapteræ¥å£ï¼Œç„¶å¾Œåˆ†åˆ¥å¯¦ç¾ä¸åŒçš„ç™»éŒ„é©é…ã€‚</p><p>QQç™»éŒ„</p><pre><code>public class LoginForQQAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForQQAdapter;    }    public ResultMsg login(String id, Object adapter) {        if(!support(adapter)){return null;}        //accesseToken        //time        return super.loginForRegist(id,null);    }}</code></pre><p>å¾®ä¿¡ç™»éŒ„</p><pre><code>public class LoginForWechatAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForWechatAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>æ‰‹æ©Ÿç™»éŒ„</p><pre><code>public class LoginForTelAdapter extends AbstraceAdapter{    public boolean support(Object adapter) {        return adapter instanceof LoginForTelAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>Tokenç™»éŒ„</p><pre><code>public class LoginForTokenAdapter extends AbstraceAdapter {    public boolean support(Object adapter) {        return adapter instanceof LoginForTokenAdapter;    }    public ResultMsg login(String id, Object adapter) {        return super.loginForRegist(id,null);    }}</code></pre><p>å‰µå»ºé©é…å™¨PassportForThirdAdapteré¡ï¼Œå¯¦ç¾ç›®æ¨™æ¥å£IPassportForThirdå…¼å®¹ã€‚</p><pre><code>public class PassportForThirdAdapter implements IPassportForThird {    public ResultMsg loginForQQ(String openId) {        return processLogin(openId, LoginForQQAdapter.class);    }    public ResultMsg loginForWechat(String openId) {        return processLogin(openId, LoginForWechatAdapter.class);    }    public ResultMsg loginForToken(String token) {        return processLogin(token, LoginForTokenAdapter.class);    }    public ResultMsg loginForTelphone(String phone, String code) {        return processLogin(phone, LoginForTelAdapter.class);    }    private ResultMsg processLogin(String id,Class&lt;? extends ILoginAdapter&gt; clazz){        try {            ILoginAdapter adapter = clazz.newInstance();            if (adapter.support(adapter)){                return adapter.login(id,adapter);            }        } catch (Exception e) {            e.printStackTrace();        }        return null;    }}</code></pre><p>å®¢æˆ¶ç«¯æ¸¬è©¦ä»£ç¢¼</p><pre><code>public class Test {    public static void main(String[] args) {        IPassportForThird adapter = new PassportForThirdAdapter();        adapter.loginForQQ("sdfasdfasfasfas");    }}</code></pre><p>é¡åœ–</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/159ef15e18c94b68badfa664f99f1035><p class=pgc-img-caption></p></div><p>æˆ‘å€‘ç‚ºæ¯ä¸€å€‹é©é…å™¨åŠ ä¸Šäº†support()æ–¹æ³•ï¼Œç”¨ä¾†åˆ¤æ–·æ˜¯å¦å…¼å®¹ï¼Œåƒæ•¸æ˜¯Objectï¼Œä¾†æºæ–¼æ¥å£ã€‚ILoginAdapteræ¥å£æ˜¯ç‚ºäº†ä»£ç¢¼è¦ç¯„ã€‚ä¸Šé¢çš„ä»£ç¢¼ç¶œåˆäº†ç­–ç•¥æ¨¡å¼ã€ç°¡å–®å·¥å» å’Œé©é…å™¨æ¨¡å¼ã€‚</p><h3 class="md-end-block md-heading">11.7.æºç¢¼</h3><p>Spring AOPä¸­çš„AdvisorAdapterã€‚æœ‰ä¸‰å€‹å¯¦ç¾é¡MethodBeforeAdviceAdapterã€AfterReturningAdviceAdapterã€ThrowsAdviceAdapterã€‚</p><p>é ‚å±¤æ¥å£AdvisorAdapteré¡</p><pre><code>public interface AdvisorAdapter {    boolean supportsAdvice(Advice var1);    MethodInterceptor getInterceptor(Advisor var1);}</code></pre><p>MethodBeforeAdviceAdapterå¯¦ç¾ã€‚å…¶é¤˜å…©å€‹ä¸è²¼äº†ã€‚</p><pre><code>class AfterReturningAdviceAdapter implements AdvisorAdapter, Serializable {    AfterReturningAdviceAdapter() {    }    public boolean supportsAdvice(Advice advice) {        return advice instanceof AfterReturningAdvice;    }    public MethodInterceptor getInterceptor(Advisor advisor) {        AfterReturningAdvice advice = (AfterReturningAdvice)advisor.getAdvice();        return new AfterReturningAdviceInterceptor(advice);    }}</code></pre><p>Spring æ ¹æ“šä¸åŒçš„AOPé…ç½®ç¢ºå®šä½¿ç”¨ç›¸æ‡‰çš„Adviceã€‚</p><p>ä¸‹é¢çœ‹SpringMVCçš„HandlerAdapteré¡ï¼Œå®ƒä¹Ÿæœ‰å¤šå€‹å­é¡ã€‚</p><p>é¡åœ–ï¼š</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/860311ff5b5c4d4b8e5df465d66e4b6c><p class=pgc-img-caption></p></div><p><br></p><p>ä»–çš„é©é…é—œéµä»£ç¢¼åœ¨DispatcherServletçš„doDispatch()æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘çœ‹æºç¢¼ï¼š</p><pre><code>protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {    HttpServletRequest processedRequest = request;    HandlerExecutionChain mappedHandler = null;    boolean multipartRequestParsed = false;    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);    try {        try {            ModelAndView mv = null;            Object dispatchException = null;            try {                processedRequest = this.checkMultipart(request);                multipartRequestParsed = processedRequest != request;                mappedHandler = this.getHandler(processedRequest);                if (mappedHandler == null) {                    this.noHandlerFound(processedRequest, response);                    return;                }                HandlerAdapter ha = this.getHandlerAdapter(mappedHandler.getHandler());                String method = request.getMethod();                boolean isGet = "GET".equals(method);                if (isGet || "HEAD".equals(method)) {                    long lastModified = ha.getLastModified(request, mappedHandler.getHandler());                    if (this.logger.isDebugEnabled()) {                        this.logger.debug("Last-Modified value for [" + getRequestUri(request) + "] is: " + lastModified);                    }                    if ((new ServletWebRequest(request, response)).checkNotModified(lastModified) &amp;&amp; isGet) {                        return;                    }                }                if (!mappedHandler.applyPreHandle(processedRequest, response)) {                    return;                }                mv = ha.handle(processedRequest, response, mappedHandler.getHandler());                if (asyncManager.isConcurrentHandlingStarted()) {                    return;                }                this.applyDefaultViewName(processedRequest, mv);                mappedHandler.applyPostHandle(processedRequest, response, mv);            } catch (Exception var20) {                dispatchException = var20;            } catch (Throwable var21) {                dispatchException = new NestedServletException("Handler dispatch failed", var21);            }            this.processDispatchResult(processedRequest, response, mappedHandler, mv, (Exception)dispatchException);        } catch (Exception var22) {            this.triggerAfterCompletion(processedRequest, response, mappedHandler, var22);        } catch (Throwable var23) {            this.triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException("Handler processing failed", var23));        }    } finally {        if (asyncManager.isConcurrentHandlingStarted()) {            if (mappedHandler != null) {                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);            }        } else if (multipartRequestParsed) {            this.cleanupMultipart(processedRequest);        }    }}</code></pre><p>doDispatchæ–¹æ³•èª¿ç”¨äº†getHandlerAdaperæ–¹æ³•</p><pre><code>@Nullableprotected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception {    if (this.handlerMappings != null) {        Iterator var2 = this.handlerMappings.iterator();        while(var2.hasNext()) {            HandlerMapping hm = (HandlerMapping)var2.next();            if (this.logger.isTraceEnabled()) {                this.logger.trace("Testing handler map [" + hm + "] in DispatcherServlet with name '" + this.getServletName() + "'");            }            HandlerExecutionChain handler = hm.getHandler(request);            if (handler != null) {                return handler;            }        }    }    return null;}</code></pre><p>getHandlerAdapteræ–¹æ³•å¾ªç’°èª¿ç”¨supportsæ–¹æ³•åˆ¤æ–·æ˜¯å¦å…¼å®¹ï¼Œå¾ªç’°è¿­ä»£é›†åˆä¸­çš„Adapteræ˜¯åœ¨åˆå§‹åŒ–æ™‚æ—©å°±è³¦äº†å€¼çš„ã€‚åªæœ‰æºç¢¼å°ˆé¡Œç¹¼çºŒè¬›è§£ã€‚</p><h3 class="md-end-block md-heading">11.8.é©é…å™¨èˆ‡è£é£¾å™¨çš„å°æ¯”</h3><p>å…©è€…éƒ½æ˜¯åŒ…è£æ¨¡å¼</p><p><strong>é©é…å™¨è£é£¾å™¨</strong>å½¢å¼é©é…å™¨æ²’æœ‰å±¤ç´šé—œä¿‚ï¼Œè£é£¾å™¨æœ‰å±¤ç´šé—œä¿‚ã€‚ç‰¹æ®Šçš„é©é…å™¨å®šç¾©é©é…å™¨èˆ‡è¢«é©é…è€…æ²’æœ‰å¿…ç„¶è¯ç¹«ï¼Œé€šå¸¸é€šéç¹¼æ‰¿æˆ–ä»£ç†é€²è¡ŒåŒ…è£è£é£¾å™¨èˆ‡è¢«è£é£¾è€…å¯¦ç¾åŒä¸€å€‹æ¥å£ï¼Œç›®çš„æ˜¯ç‚ºäº†æ“´å±•å¾Œä¿ç•™OOPé—œä¿‚é—œä¿‚has-açš„é—œä¿‚is-açš„é—œä¿‚åŠŸèƒ½æ³¨é‡å…¼å®¹ã€è½‰æ›æ³¨é‡è¦†è“‹ã€æ“´å±•è¨­è¨ˆå¾Œç½®è€ƒæ…®å‰ç½®è€ƒæ…®</p><h3 class="md-end-block md-heading">11.9.é©é…å™¨æ¨¡å¼çš„å„ªç¼ºé»</h3><p>å„ªé»ï¼š</p><ul class=ul-list><li><strong>å–®ä¸€è·è²¬åŸå‰‡</strong>ã€‚ä½ å¯ä»¥å°‡æ¥å£æˆ–æ•¸æ“šè½‰æ›ä»£ç¢¼å¾ç¨‹åºä¸»è¦æ¥­å‹™é‚è¼¯ä¸­åˆ†é›¢ã€‚</li><li><strong>é–‹é–‰åŸå‰‡</strong>ã€‚åªè¦å®¢æˆ¶ç«¯ä»£ç¢¼é€šéå®¢æˆ¶ç«¯æ¥å£èˆ‡é©é…å™¨é€²è¡Œäº¤äº’ï¼Œ ä½ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç¾æœ‰å®¢æˆ¶ç«¯ä»£ç¢¼çš„æƒ…æ³ä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æ–°é¡å‹çš„é©é…å™¨ã€‚</li></ul><p>ç¼ºé»ï¼š</p><ul class=ul-list><li><strong>ä»£ç¢¼æ•´é«”è¤‡é›œåº¦å¢åŠ </strong>ï¼Œ å› ç‚ºä½ éœ€è¦æ–°å¢ä¸€ç³»åˆ—æ¥å£å’Œé¡ã€‚ æœ‰æ™‚ç›´æ¥æ›´æ”¹æœå‹™é¡ä½¿å…¶èˆ‡å…¶ä»–ä»£ç¢¼å…¼å®¹æœƒæ›´ç°¡å–®ã€‚</li></ul><h3 class="md-end-block md-heading">11.10.ç¸½çµ</h3><p>ä¸€èˆ¬ä¾†èªªï¼Œé©é…å™¨æ¨¡å¼å¯ä»¥çœ‹ä½œä¸€ç¨®â€œè£œå„Ÿæ¨¡å¼â€ï¼Œç”¨ä¾†è£œæ•‘è¨­è¨ˆä¸Šçš„ç¼ºé™·ã€‚æ‡‰ç”¨é€™ç¨®æ¨¡å¼ç®—æ˜¯â€œç„¡å¥ˆä¹‹èˆ‰â€ï¼Œå¦‚æœåœ¨è¨­è¨ˆåˆæœŸï¼Œæˆ‘å€‘å°±èƒ½å”èª¿è¦é¿æ¥å£ä¸å…¼å®¹çš„å•é¡Œï¼Œé‚£é€™ç¨®æ¨¡å¼å°±æ²’æœ‰æ‡‰ç”¨çš„æ©Ÿæœƒäº†ã€‚é‚£åœ¨å¯¦éš›çš„é–‹ç™¼ä¸­ï¼Œä»€éº¼æƒ…æ³ä¸‹æ‰æœƒå‡ºç¾æ¥å£ä¸å…¼å®¹å‘¢ï¼Ÿæˆ‘ç¸½çµä¸‹äº†ä¸‹é¢é€™æ¨£ 5 ç¨®å ´æ™¯ï¼š</p><ul class=ul-list><li>å°è£æœ‰ç¼ºé™·çš„æ¥å£è¨­è¨ˆ</li><li>çµ±ä¸€å¤šå€‹é¡çš„æ¥å£è¨­è¨ˆ</li><li>æ›¿æ›ä¾è³´çš„å¤–éƒ¨ç³»çµ±</li><li>å…¼å®¹è€ç‰ˆæœ¬æ¥å£</li><li>é©é…ä¸åŒæ ¼å¼çš„æ•¸æ“š</li></ul><h2 class="md-end-block md-heading">12.æ©‹æ¥æ¨¡å¼</h2><p>å…ˆè¤‡ç¿’ä»£ç†æ¨¡å¼ã€‚å®ƒåœ¨ä¸æ”¹è®ŠåŸå§‹é¡ï¼ˆæˆ–è€…å«è¢«ä»£ç†é¡ï¼‰ä»£ç¢¼çš„æƒ…æ³ä¸‹ï¼Œé€šéå¼•å…¥ä»£ç†é¡ä¾†çµ¦åŸå§‹é¡é™„åŠ åŠŸèƒ½ã€‚ä»£ç†æ¨¡å¼åœ¨å¹³æ™‚çš„é–‹ç™¼ç¶“å¸¸è¢«ç”¨åˆ°ï¼Œå¸¸ç”¨åœ¨æ¥­å‹™ç³»çµ±ä¸­é–‹ç™¼ä¸€äº›éåŠŸèƒ½æ€§éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šç›£æ§ã€çµ±è¨ˆã€é‘‘æ¬Šã€é™æµã€äº‹å‹™ã€å†ªç­‰ã€æ—¥èªŒã€‚</p><p>ä»Šå¤©å­¸ç¿’æ©‹æ¥æ¨¡å¼ã€‚æ©‹æ¥æ¨¡å¼çš„ä»£ç¢¼å¯¦ç¾éå¸¸ç°¡å–®ï¼Œä½†æ˜¯ç†è§£èµ·ä¾†ç¨å¾®æœ‰é»é›£åº¦ï¼Œä¸¦ä¸”æ‡‰ç”¨å ´æ™¯ä¹Ÿæ¯”è¼ƒä¾·é™ï¼Œæ‰€ä»¥ï¼Œç›¸ç•¶æ–¼ä»£ç†æ¨¡å¼ä¾†èªªï¼Œæ©‹æ¥æ¨¡å¼åœ¨å¯¦éš›çš„é …ç›®ä¸­ä¸¦æ²’æœ‰é‚£éº¼å¸¸ç”¨ï¼Œä½ åªéœ€è¦ç°¡å–®ç­è§£ï¼Œè¦‹åˆ°èƒ½èªè­˜å°±å¯ä»¥ï¼Œä¸¦ä¸æ˜¯æˆ‘å€‘å­¸ç¿’çš„é‡é»ã€‚</p><h3 class="md-end-block md-heading">12.1.åŸç†è§£æ</h3><p>æ©‹æ¥æ¨¡å¼ï¼Œä¹Ÿå«ä½œæ©‹æ¨‘æ¨¡å¼ï¼Œè‹±æ–‡æ˜¯ Bridge Design Patternã€‚é€™å€‹æ¨¡å¼å¯ä»¥èªªæ˜¯ 23 ç¨®è¨­è¨ˆæ¨¡å¼ä¸­æœ€é›£ç†è§£çš„æ¨¡å¼ä¹‹ä¸€äº†ã€‚æˆ‘æŸ¥é–±äº†æ¯”è¼ƒå¤šçš„æ›¸ç±å’Œè³‡æ–™ä¹‹å¾Œç™¼ç¾ï¼Œå°æ–¼é€™å€‹æ¨¡å¼æœ‰å…©ç¨®ä¸åŒçš„ç†è§£æ–¹å¼ã€‚</p><p><strong>ç¤ºæ„åœ–</strong></p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/bffad490149e4871a49e5dd95cece3e6><p class=pgc-img-caption></p></div><p>ç•¶ç„¶ï¼Œé€™å…¶ä¸­â€œæœ€ç´”æ­£â€çš„ç†è§£æ–¹å¼ï¼Œç•¶å±¬ GoF çš„ã€Šè¨­è¨ˆæ¨¡å¼ã€‹ä¸€æ›¸ä¸­å°æ©‹æ¥æ¨¡å¼çš„å®šç¾©ã€‚ç•¢ç«Ÿï¼Œé€™ 23 ç¨®ç¶“å…¸çš„è¨­è¨ˆæ¨¡å¼ï¼Œæœ€åˆå°±æ˜¯ç”±é€™æœ¬æ›¸ç¸½çµå‡ºä¾†çš„ã€‚åœ¨ GoF çš„ã€Šè¨­è¨ˆæ¨¡å¼ã€‹ä¸€æ›¸ä¸­ï¼Œæ©‹æ¥æ¨¡å¼æ˜¯é€™éº¼å®šç¾©çš„ï¼šâ€œDecouple an abstraction from its implementation so that the two can vary independentlyã€‚â€ç¿»è­¯æˆä¸­æ–‡å°±æ˜¯ï¼šâ€œå°‡æŠ½è±¡å’Œå¯¦ç¾è§£è€¦ï¼Œè®“å®ƒå€‘å¯ä»¥ç¨ç«‹è®ŠåŒ–ã€‚â€</p><p>é—œæ–¼æ©‹æ¥æ¨¡å¼ï¼Œå¾ˆå¤šæ›¸ç±ã€è³‡æ–™ä¸­ï¼Œé‚„æœ‰å¦å¤–ä¸€ç¨®ç†è§£æ–¹å¼ï¼šâ€œä¸€å€‹é¡å­˜åœ¨å…©å€‹ï¼ˆæˆ–å¤šå€‹ï¼‰ç¨ç«‹è®ŠåŒ–çš„ç¶­åº¦ï¼Œæˆ‘å€‘é€šéçµ„åˆçš„æ–¹å¼ï¼Œè®“é€™å…©å€‹ï¼ˆæˆ–å¤šå€‹ï¼‰ç¶­åº¦å¯ä»¥ç¨ç«‹é€²è¡Œæ“´å±•ã€‚â€é€šéçµ„åˆé—œä¿‚ä¾†æ›¿ä»£ç¹¼æ‰¿é—œä¿‚ï¼Œé¿å…ç¹¼æ‰¿å±¤æ¬¡çš„æŒ‡æ•¸ç´šçˆ†ç‚¸ã€‚é€™ç¨®ç†è§£æ–¹å¼éå¸¸é¡ä¼¼æ–¼ï¼Œæˆ‘å€‘ä¹‹å‰è¬›éçš„â€œçµ„åˆå„ªæ–¼ç¹¼æ‰¿â€è¨­è¨ˆåŸå‰‡ï¼Œæ‰€ä»¥ï¼Œé€™è£¡æˆ‘å°±ä¸å¤šè§£é‡‹äº†ã€‚æˆ‘å€‘é‡é»çœ‹ä¸‹ GoF çš„ç†è§£æ–¹å¼ã€‚</p><p>æ©‹æ¥æ¨¡å¼é€šéçµ„åˆé—œä¿‚ä¾†æ›¿ä»£ç¹¼æ‰¿é—œä¿‚ï¼Œé¿å…ç¹¼æ‰¿å±¤æ¬¡çš„æŒ‡æ•¸ç´šçˆ†ç‚¸ã€‚</p><h3 class="md-end-block md-heading">12.2.è§’è‰²</h3><p>é¡åœ–ï¼š</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8971327982bf4c7d8cae7b806f38e3bc><p class=pgc-img-caption></p></div><p><br></p><p>æ©‹æ¥æ¨¡å¼æœ‰å››å€‹è§’è‰²ï¼š</p><p>æŠ½è±¡ï¼ˆAbstraction)ï¼šè©²é¡æŒæœ‰ä¸€å€‹å°å¯¦ç¾è§’è‰²çš„å¼•ç”¨ï¼ŒæŠ½è±¡è§’è‰²ä¸­çš„æ–¹æ³•éœ€è¦å¯¦ç¾è§’è‰²ã€‚è©²é¡ä¸€èˆ¬ç‚ºæŠ½è±¡é¡ã€‚</p><p>ä¿®æ­£æŠ½è±¡è§’è‰²ï¼ˆRefinedAbstractionï¼‰ï¼šAbstractionçš„å…·é«”å¯¦ç¾ï¼Œå°Abstractionæ–¹æ³•é€²è¡Œå®Œå–„èˆ‡æ“´å±•ã€‚</p><p>æŠ½è±¡å¯¦ç¾è§’è‰²ï¼ˆImplementorï¼‰ï¼šç¢ºå®šå¯¦ç¾ç¶­åº¦çš„åŸºæœ¬æ“ä½œï¼Œæä¾›çµ¦Abstractionä½¿ç”¨ã€‚è©²é¡ä¸€èˆ¬ç‚ºæ¥å£æˆ–æŠ½è±¡é¡ã€‚</p><p>å…·é«”å¯¦ç¾è§’è‰²ï¼ˆConcreteImplementorï¼‰ï¼šImplementorçš„å…·é«”å¯¦ç¾ã€‚</p><h3 class="md-end-block md-heading">12.3.é€šç”¨å¯«æ³•</h3><p>å‰µå»ºæŠ½è±¡è§’è‰²</p><pre><code>// æŠ½è±¡public abstract class Abstraction {    protected IImplementor mImplementor;    public Abstraction(IImplementor implementor) {        this.mImplementor = implementor;    }    public void operation() {        this.mImplementor.operationImpl();    }}</code></pre><p>ä¿®æ­£æŠ½è±¡è§’è‰²</p><pre><code>// ä¿®æ­£æŠ½è±¡public class RefinedAbstraction extends Abstraction {    public RefinedAbstraction(IImplementor implementor) {        super(implementor);    }    @Override    public void operation() {        super.operation();        System.out.println("refined operation");    }}</code></pre><p>æŠ½è±¡å¯¦ç¾è§’è‰²</p><pre><code>// æŠ½è±¡å¯¦ç¾public interface IImplementor {    void operationImpl();}</code></pre><p>å…·é«”å¯¦ç¾è§’è‰²</p><pre><code>// å…·é«”å¯¦ç¾public class ConcreteImplementorA implements IImplementor {    public void operationImpl() {        System.out.println("I'm ConcreteImplementor A");    }}</code></pre><p>æ¸¬è©¦ä»£ç¢¼</p><pre><code>public class Test {    public static void main(String[] args) {        // ä¾†ä¸€å€‹å¯¦ç¾åŒ–è§’è‰²        IImplementor imp = new ConcreteImplementorA();        // ä¾†ä¸€å€‹æŠ½è±¡åŒ–è§’è‰²ï¼Œèšåˆå¯¦ç¾        Abstraction abs = new RefinedAbstraction(imp);        // åŸ·è¡Œæ“ä½œ        abs.operation();    }}</code></pre><p>é‹è¡Œçµæœ</p><pre><code>I'm ConcreteImplementor Arefined operation</code></pre><h3 class="md-end-block md-heading">12.4.æ‡‰ç”¨å ´æ™¯</h3><ul class=ul-list><li><strong>æ‹†åˆ†æˆ–é‡çµ„ä¸€å€‹å…·æœ‰å¤šé‡åŠŸèƒ½çš„é¾é›œé¡ ï¼ˆä¾‹å¦‚èƒ½èˆ‡å¤šå€‹æ•¸æ“šåº«æœå‹™å™¨é€²è¡Œäº¤äº’çš„é¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ©‹æ¥æ¨¡å¼ã€‚</strong></li><li><strong>å¦‚æœä½ å¸Œæœ›åœ¨å¹¾å€‹ç¨ç«‹ç¶­åº¦ä¸Šæ“´å±•ä¸€å€‹é¡ï¼Œå¯ä½¿ç”¨è©²æ¨¡å¼ã€‚</strong></li><li><strong>å¦‚æœä½ éœ€è¦åœ¨é‹è¡Œæ™‚åˆ‡æ›ä¸åŒå¯¦ç¾æ–¹æ³•ï¼Œå¯ä½¿ç”¨æ©‹æ¥æ¨¡å¼ã€‚</strong></li></ul><h3 class="md-end-block md-heading">12.5.æ¥­å‹™å ´æ™¯ä¸­çš„é‹ç”¨</h3><p>è¾¦å…¬ç™¼é€éƒµä»¶ã€çŸ­ä¿¡æ¶ˆæ¯æˆ–è€…ç³»çµ±æ¶ˆæ¯ã€‚ç·Šæ€¥ç¨‹åº¦åˆ†ç‚ºæ™®é€šæ¶ˆæ¯ã€ç·Šæ€¥æ¶ˆæ¯ã€ç‰¹æ€¥æ¶ˆæ¯ã€‚</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/05e9710013ee4e25b7ee7e19e3aa9bd7><p class=pgc-img-caption></p></div><p>ä½¿ç”¨ç¹¼æ‰¿çš„è©±ï¼Œæƒ…æ³è¤‡é›œï¼Œä¹Ÿä¸åˆ©æ–¼æ“´å±•ã€‚é€šéæ©‹æ¥ä¾†è§£æ±ºã€‚</p><p>å‰µå»ºä¸€å€‹IMessageæ¥å£æ“”ä»»æ©‹æ¥è§’è‰²ï¼š</p><pre><code>public interface IMessage {    //ç™¼é€æ¶ˆæ¯çš„å…§å®¹å’Œæ¥æ”¶äºº    void send(String message,String toUser);}</code></pre><p>å‰µå»ºéƒµä»¶æ¶ˆæ¯å¯¦ç¾EmailMessageé¡ï¼š</p><pre><code>public class EmailMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨éƒµä»¶æ¶ˆæ¯ç™¼é€" + message + "çµ¦" + toUser);    }}</code></pre><p>å‰µå»ºæ‰‹æ©Ÿæ¶ˆæ¯å¯¦ç¾SmsMessageé¡ï¼š</p><pre><code>public class SmsMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯ç™¼é€" + message + "çµ¦" + toUser);    }}</code></pre><p>å‰µå»ºæ©‹æ¥æŠ½è±¡è§’è‰²AbastractMessageé¡</p><pre><code>public abstract class AbastractMessage {    private IMessage message;    public AbastractMessage(IMessage message) {        this.message = message;    }    void sendMessage(String message,String toUser){        this.message.send(message,toUser);    }}</code></pre><p>å‰µå»ºå…·é«”å¯¦ç¾æ™®é€šæ¶ˆæ¯é¡NormalMessageï¼š</p><pre><code>public class NomalMessage extends AbastractMessage {    public NomalMessage(IMessage message) {        super(message);    }}</code></pre><p>å‰µå»ºçŸ­ä¿¡æ¶ˆæ¯é¡SmsMessageï¼š</p><pre><code>public class SmsMessage implements IMessage {    public void send(String message, String toUser) {        System.out.println("ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯ç™¼é€" + message + "çµ¦" + toUser);    }}</code></pre><p>å‰µå»ºç·Šæ€¥æ¶ˆæ¯UrgencyMessageé¡ï¼š</p><pre><code>public class UrgencyMessage extends AbastractMessage {    public UrgencyMessage(IMessage message) {        super(message);    }    void sendMessage(String message, String toUser){        message = "ã€åŠ æ€¥ã€‘" + message;        super.sendMessage(message,toUser);    }    public Object watch(String messageId){        return null;    }}</code></pre><p>ä»£ç¢¼æ¸¬è©¦</p><pre><code>public class Test {    public static void main(String[] args) {        IMessage message = new SmsMessage();        AbastractMessage abastractMessage = new NomalMessage(message);        abastractMessage.sendMessage("åŠ ç­ç”³è«‹","ç‹ç¸½");        message = new EmailMessage();        abastractMessage = new UrgencyMessage(message);        abastractMessage.sendMessage("åŠ ç­ç”³è«‹","ç‹ç¸½");    }}</code></pre><p>é‹è¡Œæ•ˆæœï¼š</p><pre><code>ä½¿ç”¨çŸ­ä¿¡æ¶ˆæ¯ç™¼é€åŠ ç­ç”³è«‹çµ¦ç‹ç¸½ä½¿ç”¨éƒµä»¶æ¶ˆæ¯ç™¼é€ã€åŠ æ€¥ã€‘åŠ ç­ç”³è«‹çµ¦ç‹ç¸½</code></pre><h3 class="md-end-block md-heading">12.6.æºç¢¼</h3><p>JDBC APIï¼Œå…¶ä¸­Driveré¡å°±æ˜¯æ©‹æ¥å°è±¡ã€‚ä½¿ç”¨Class.forNameæ–¹æ³•å‹•æ…‹åŠ è¼‰å„å€‹æ•¸æ“šåº«å» å•†çš„Driveré¡ã€‚</p><p>ä»¥MySQLçš„å¯¦ç¾ç‚ºä¾‹ï¼š</p><pre><code>//1.åŠ è¼‰é©…å‹•Class.forName("com.mysql.jdbc.Driver");  //åå°„æ©Ÿåˆ¶åŠ è¼‰é©…å‹•é¡// 2.ç²å–é€£æ¥Connection//ä¸»æ©Ÿ:ç«¯å£è™Ÿ/æ•¸æ“šåº«åConnection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");// 3.å¾—åˆ°åŸ·è¡Œsqlèªå¥çš„å°è±¡StatementStatement stmt = conn.createStatement();// 4.åŸ·è¡Œsqlèªå¥ï¼Œä¸¦è¿”å›çµæœ</code></pre><p>æˆ‘å€‘çœ‹ä¸€ä¸‹Driveræ¥å£å®šç¾©ï¼š</p><pre><code>public interface Driver {    Connection connect(String url, java.util.Properties info)        throws SQLException;    boolean acceptsURL(String url) throws SQLException;    DriverPropertyInfo[] getPropertyInfo(String url, java.util.Properties info)                         throws SQLException;    int getMajorVersion();    int getMinorVersion();    boolean jdbcCompliant();    public Logger getParentLogger() throws SQLFeatureNotSupportedException;}</code></pre><p>Driveråœ¨JDBCä¸­æ²’æœ‰åšä»»ä½•å¯¦ç¾ï¼Œå…·é«”çš„åŠŸèƒ½ç”±å„å€‹å» å•†å®Œæˆï¼Œä»¥MySQLçš„å¯¦ç¾ç‚ºä¾‹ã€‚</p><pre><code>public class Driver extends NonRegisteringDriver implements java.sql.Driver {    public Driver() throws SQLException {    }    static {        try {            DriverManager.registerDriver(new Driver());        } catch (SQLException var1) {            throw new RuntimeException("Can't register driver!");        }    }}</code></pre><p>ç•¶æˆ‘å€‘åŸ·è¡ŒClass.forName("com.mysql.jdbc.Driver")æ–¹æ³•çš„æ™‚å€™ï¼Œå°±æœƒåŸ·è¡Œcom.mysql.jdbc.Drvieré€™å€‹é¡çš„éœæ…‹å¡Šä¸­çš„ä»£ç¢¼ã€‚éœæ…‹å¡Šä¸­çš„ä»£ç¢¼åªæ˜¯èª¿ç”¨äº†ä¸€ä¸‹DriverManagerçš„referisterDriver()æ–¹æ³•ï¼Œç„¶å¾Œå°‡Driverå°è±¡è¨»å†Šåˆ°DriverManangerä¸­ã€‚æˆ‘å€‘ç¹¼çºŒè·Ÿé€²åˆ°DriverManageré€™å€‹é¡ä¸­ï¼Œä¾†çœ‹ç›¸é—œä»£ç¢¼ï¼š</p><pre><code>public class DriverManager {     // List of registered JDBC drivers    private final static CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = new CopyOnWriteArrayList&lt;&gt;();        /* Prevent the DriverManager class from being instantiated. */    private DriverManager(){}        /**     * Load the initial JDBC drivers by checking the System property     * jdbc.properties and then use the {@code ServiceLoader} mechanism     */    static {        loadInitialDrivers();        println("JDBC DriverManager initialized");    }        public static synchronized void registerDriver(java.sql.Driver driver)        throws SQLException {        registerDriver(driver, null);    }    public static synchronized void registerDriver(java.sql.Driver driver,            DriverAction da)        throws SQLException {        /* Register the driver if it has not already been added to our list */        if(driver != null) {            registeredDrivers.addIfAbsent(new DriverInfo(driver, da));        } else {            // This is for compatibility with the original DriverManager            throw new NullPointerException();        }        println("registerDriver: " + driver);    }}</code></pre><p>åœ¨è¨»å†Šä¹‹å‰ï¼Œå°‡å‚³éä¾†çš„Driverå°è±¡ï¼Œå°è£æˆäº†ä¸€å€‹DriverInfoå°è±¡ã€‚æ¥ä¸‹ä¾†ç¹¼çºŒåŸ·è¡Œå®¢æˆ¶ç«¯ä»£ç¢¼çš„ç¬¬äºŒéƒ¨ï¼Œèª¿ç”¨DriverManagerçš„getConnectionæ–¹æ³•ç²å–éˆæ¥å°è±¡ï¼Œè·Ÿé€²æºç¢¼ï¼š</p><pre><code>Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url,Â  Â  Â  Â  Â java.util.Properties info) throws SQLException {Â â€‹Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url,Â  Â  Â  Â  Â String user, String password) throws SQLException {Â  Â  Â  Â  Â java.util.Properties info = new java.util.Properties();Â â€‹Â  Â  Â  Â  Â if (user != null) {Â  Â  Â  Â  Â  Â  Â info.put("user", user);Â  Â  Â  Â   }Â  Â  Â  Â  Â if (password != null) {Â  Â  Â  Â  Â  Â  Â info.put("password", password);Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â @CallerSensitiveÂ  Â  Â public static Connection getConnection(String url)Â  Â  Â  Â  Â throws SQLException {Â â€‹Â  Â  Â  Â  Â java.util.Properties info = new java.util.Properties();Â  Â  Â  Â  Â return (getConnection(url, info, Reflection.getCallerClass()));Â  Â   }Â â€‹Â  Â  Â //  Worker method called by the public getConnection() methods.Â  Â  Â private static Connection getConnection(Â  Â  Â  Â  Â String url, java.util.Properties info, Class&lt;?&gt; caller) throws SQLException {Â  Â  Â  Â  Â /*Â  Â  Â  Â  Â  * When callerCl is null, we should check the application'sÂ  Â  Â  Â  Â  * (which is invoking this class indirectly)Â  Â  Â  Â  Â  * classloader, so that the JDBC driver class outside rt.jarÂ  Â  Â  Â  Â  * can be loaded from here.Â  Â  Â  Â  Â  */Â  Â  Â  Â  Â ClassLoader callerCL = caller != null ? caller.getClassLoader() : null;Â  Â  Â  Â  Â synchronized(DriverManager.class) {Â  Â  Â  Â  Â  Â  Â // synchronize loading of the correct classloader.Â  Â  Â  Â  Â  Â  Â if (callerCL == null) {Â  Â  Â  Â  Â  Â  Â  Â  Â callerCL = Thread.currentThread().getContextClassLoader();Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â if(url == null) {Â  Â  Â  Â  Â  Â  Â throw new SQLException("The url cannot be null", "08001");Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â println("DriverManager.getConnection(\"" + url + "\")");Â â€‹Â  Â  Â  Â  Â // Walk through the loaded registeredDrivers attempting to make a connection.Â  Â  Â  Â  Â // Remember the first exception that gets raised so we can reraise it.Â  Â  Â  Â  Â SQLException reason = null;Â â€‹Â  Â  Â  Â  Â for(DriverInfo aDriver : registeredDrivers) {Â  Â  Â  Â  Â  Â  Â // If the caller does not have permission to load the driver thenÂ  Â  Â  Â  Â  Â  Â // skip it.Â  Â  Â  Â  Â  Â  Â if(isDriverAllowed(aDriver.driver, callerCL)) {Â  Â  Â  Â  Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â println(" Â   trying " + aDriver.driver.getClass().getName());Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Connection con = aDriver.driver.connect(url, info);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (con != null) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // Success!Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â println("getConnection returning " + aDriver.driver.getClass().getName());Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â return (con);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â  Â  Â  Â  Â   } catch (SQLException ex) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (reason == null) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â reason = ex;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â  Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â  Â   } else {Â  Â  Â  Â  Â  Â  Â  Â  Â println(" Â   skipping: " + aDriver.getClass().getName());Â  Â  Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â // if we got here nobody could connect.Â  Â  Â  Â  Â if (reason != null) Â   {Â  Â  Â  Â  Â  Â  Â println("getConnection failed: " + reason);Â  Â  Â  Â  Â  Â  Â throw reason;Â  Â  Â  Â   }Â â€‹Â  Â  Â  Â  Â println("getConnection: no suitable driver found for "+ url);Â  Â  Â  Â  Â throw new SQLException("No suitable driver found for "+ url, "08001");Â  Â   }</code></pre><p>åœ¨getConnection()ä¸­åˆæœƒèª¿ç”¨å„å€‹å» å•†å¯¦ç¾çš„Driverçš„connect()æ–¹æ³•ç²å¾—éˆæ¥å°è±¡ã€‚é€™æ¨£çš„è©±ï¼Œå°±å·§å¦™åœ°é¿é–‹äº†ä½¿ç”¨ç¹¼æ‰¿ï¼Œç‚ºä¸åŒæ•¸æ“šåº«æä¾›ç›¸åŒæ¥å£ã€‚JDBC APIä¸­DriverManagerå°±æ˜¯æ©‹ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/2cc52f173e32443ba57f04ace0ec36c9><p class=pgc-img-caption></p></div><h3 class="md-end-block md-heading">12.7.æ©‹æ¥æ¨¡å¼å„ªç¼ºé»</h3><p>å„ªé»</p><ul class=ul-list><li>ä½ å¯ä»¥å‰µå»ºèˆ‡å¹³è‡ºç„¡é—œçš„é¡å’Œç¨‹åºã€‚</li><li>å®¢æˆ¶ç«¯ä»£ç¢¼åƒ…èˆ‡é«˜å±¤æŠ½è±¡éƒ¨åˆ†é€²è¡Œäº’å‹•ï¼Œ ä¸æœƒæ¥è§¸åˆ°å¹³è‡ºçš„è©³ç´°ä¿¡æ¯ã€‚</li><li>é–‹é–‰åŸå‰‡ã€‚ ä½ å¯ä»¥æ–°å¢æŠ½è±¡éƒ¨åˆ†å’Œå¯¦ç¾éƒ¨åˆ†ï¼Œ ä¸”å®ƒå€‘ä¹‹é–“ä¸æœƒç›¸äº’å½±éŸ¿ã€‚</li><li>å–®ä¸€è·è²¬åŸå‰‡ã€‚ æŠ½è±¡éƒ¨åˆ†å°ˆæ³¨æ–¼è™•ç†é«˜å±¤é‚è¼¯ï¼Œ å¯¦ç¾éƒ¨åˆ†è™•ç†å¹³è‡ºç´°ç¯€ã€‚</li></ul><p>ç¼ºé»</p><ul class=ul-list><li>å°é«˜å…§èšçš„é¡ä½¿ç”¨è©²æ¨¡å¼å¯èƒ½æœƒè®“ä»£ç¢¼æ›´åŠ è¤‡é›œã€‚</li></ul><h3 class="md-end-block md-heading">12.8.ä»£ç†ã€æ©‹æ¥ã€è£é£¾å™¨ã€é©é…å™¨ 4 ç¨®è¨­è¨ˆæ¨¡å¼çš„å€åˆ¥</h3><p>ä»£ç†ã€æ©‹æ¥ã€è£é£¾å™¨ã€é©é…å™¨ï¼Œé€™ 4 ç¨®æ¨¡å¼æ˜¯æ¯”è¼ƒå¸¸ç”¨çš„çµæ§‹å‹è¨­è¨ˆæ¨¡å¼ã€‚å®ƒå€‘çš„ä»£ç¢¼çµæ§‹éå¸¸ç›¸ä¼¼ã€‚ç± çµ±ä¾†èªªï¼Œå®ƒå€‘éƒ½å¯ä»¥ç¨±ç‚º Wrapper æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é€šé Wrapper é¡äºŒæ¬¡å°è£åŸå§‹é¡ã€‚</p><p>###</p><p><strong>ä»£ç†æ¨¡å¼ï¼š</strong>ä»£ç†æ¨¡å¼åœ¨ä¸æ”¹è®ŠåŸå§‹é¡æ¥å£çš„æ¢ä»¶ä¸‹ï¼Œç‚ºåŸå§‹é¡å®šç¾©ä¸€å€‹ä»£ç†é¡ï¼Œä¸»è¦ç›®çš„æ˜¯æ§åˆ¶è¨ªå•ï¼Œè€ŒéåŠ å¼·åŠŸèƒ½ï¼Œé€™æ˜¯å®ƒè·Ÿè£é£¾å™¨æ¨¡å¼æœ€å¤§çš„ä¸åŒã€‚</p><p><strong>æ©‹æ¥æ¨¡å¼ï¼š</strong>æ©‹æ¥æ¨¡å¼çš„ç›®çš„æ˜¯å°‡æ¥å£éƒ¨åˆ†å’Œå¯¦ç¾éƒ¨åˆ†åˆ†é›¢ï¼Œå¾è€Œè®“å®ƒå€‘å¯ä»¥è¼ƒç‚ºå®¹æ˜“ã€ä¹Ÿç›¸å°ç¨ç«‹åœ°åŠ ä»¥æ”¹è®Šã€‚</p><p><strong>è£é£¾å™¨æ¨¡å¼ï¼š</strong>è£é£¾è€…æ¨¡å¼åœ¨ä¸æ”¹è®ŠåŸå§‹é¡æ¥å£çš„æƒ…æ³ä¸‹ï¼Œå°åŸå§‹é¡åŠŸèƒ½é€²è¡Œå¢å¼·ï¼Œä¸¦ä¸”æ”¯æŒå¤šå€‹è£é£¾å™¨çš„åµŒå¥—ä½¿ç”¨ã€‚</p><p><strong>é©é…å™¨æ¨¡å¼ï¼š</strong>é©é…å™¨æ¨¡å¼æ˜¯ä¸€ç¨®äº‹å¾Œçš„è£œæ•‘ç­–ç•¥ã€‚é©é…å™¨æä¾›è·ŸåŸå§‹é¡ä¸åŒçš„æ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ã€è£é£¾å™¨æ¨¡å¼æä¾›çš„éƒ½æ˜¯è·ŸåŸå§‹é¡ç›¸åŒçš„æ¥å£ã€‚</p><h3 class="md-end-block md-heading">12.9.ä½œæ¥­</h3><p>1ã€å®Œå–„ç¬¬ä¸‰æ–¹ç™»éŒ„æ¥å£ï¼Œå®Œæˆä¸ä¿®æ”¹æ¥å£ä¹Ÿèƒ½å¯¦ç¾è‡ªå‹•é©é…çš„åŠŸèƒ½ã€‚</p><p>é€šéåœ¨æ¥å£ILoginForThirdçš„æ–¹æ³•åƒæ•¸æ·»åŠ æ³›å‹ç´„æŸã€‚</p><pre><code>Â /**Â  * ç¬¬ä¸‰æ–¹ç™»éŒ„çš„æ¥å£ï¼Œæ–¹æ³•é™åˆ¶é©é…å™¨çš„ClassÂ  */Â public interface ILoginForThird {Â  Â  Â ResultMsg loginForThird(String id, Class&lt;? extends ILoginAdapter&gt; clazz);Â }Â â€‹Â /**Â  * ç¬¬ä¸‰æ–¹ç™»éŒ„é©é…å™¨å¯¦ç¾ï¼Œé€šéé©é…å™¨å°è±¡åˆ¤æ–·æ˜¯å¦å…¼å®¹Â  */Â public class LoginForThirdAdapter implements ILoginForThird {Â  Â  Â @OverrideÂ  Â  Â public ResultMsg loginForThird(String id, Class&lt;? extends ILoginAdapter&gt; clazz) {Â  Â  Â  Â  Â try {Â  Â  Â  Â  Â  Â  Â ILoginAdapter adapter = clazz.newInstance();Â  Â  Â  Â  Â  Â  Â if (adapter.support(adapter)) {Â  Â  Â  Â  Â  Â  Â  Â  Â return adapter.login(id, adapter);Â  Â  Â  Â  Â  Â   }Â  Â  Â  Â   } catch (Exception e) {Â  Â  Â  Â  Â  Â  Â e.printStackTrace();Â  Â  Â  Â   }Â  Â  Â  Â  Â return null;Â  Â   }Â }Â â€‹Â /**Â  * ç™»éŒ„é©é…å™¨æ¥å£Â  */Â public interface ILoginAdapter {Â  Â  Â Boolean support(Object object);Â  Â  Â ResultMsg login(String id, Object adapter);Â }Â â€‹Â /**Â  * å¾®åšç™»éŒ„é©é…å™¨Â  */Â public class LoginForWeiboAdapter extends AbstractAdapter {Â  Â  Â @OverrideÂ  Â  Â public Boolean support(Object adapter) {Â  Â  Â  Â  Â return adapter instanceof LoginForWeiboAdapter;Â  Â   }Â â€‹Â  Â  Â @OverrideÂ  Â  Â public ResultMsg login(String id, Object adapter) {Â  Â  Â  Â  Â if (! support(adapter)) {Â  Â  Â  Â  Â  Â  Â return null;Â  Â  Â  Â   }Â  Â  Â  Â  Â return super.loginForRegist(id, null);Â  Â   }Â }Â â€‹Â /**Â  * æŠ½è±¡é©é…å™¨Â  */Â public abstract class AbstractAdapter extends PassportService implements ILoginAdapter {Â  Â  Â protected ResultMsg loginForRegist(String username, String password) {Â  Â  Â  Â  Â if(null == password){Â  Â  Â  Â  Â  Â  Â password = "THIRD_EMPTY";Â  Â  Â  Â   }Â  Â  Â  Â  Â super.regist(username,password);Â  Â  Â  Â  Â return super.login(username,password);Â  Â   }Â }Â â€‹Â // åŸæœ‰çš„è¨»å†Šèˆ‡ç™»éŒ„æ–¹æ³•Â public class PassportService {Â  Â  Â // è¨»å†Šæ–¹æ³•Â  Â  Â public ResultMsg regist(String username, String password) {Â  Â  Â  Â  Â return new ResultMsg(200, "è¨»å†ŠæˆåŠŸ", new Member());Â  Â   }Â â€‹Â  Â  Â // ç™»éŒ„çš„æ–¹æ³•Â  Â  Â public ResultMsg login(String username, String password) {Â  Â  Â  Â  Â return new ResultMsg(200, "ç™»éŒ„æˆåŠŸ", new Member());Â  Â   }Â }</code></pre><p>æ¸¬è©¦ä»£ç¢¼</p><pre><code>Â public class Test {Â  Â  Â public static void main(String[] args) {Â  Â  Â  Â  Â // æ–°å¢å¾®åšç™»éŒ„Â  Â  Â  Â  Â ILoginForThird loginForThird = new LoginForThirdAdapter();Â  Â  Â  Â  Â ResultMsg resultMsg = loginForThird.loginForThird("å¾®åšè³¬è™Ÿ", LoginForWeiboAdapter.class);Â  Â  Â  Â  Â System.out.println(resultMsg.toString());Â  Â   }Â }</code></pre><p>é‹è¡Œæ•ˆæœ</p><pre><code>Â ResultMsg(code=200, msg=ç™»éŒ„æˆåŠŸ, data=Member(username=null, password=null, mid=null, info=null))</code></pre><p>é¡åœ–</p><div class=pgc-img><img alt=å…«ã€é©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ onerror=errorimg.call(this); src=https://p9.pstatp.com/large/pgc-image/68c636735b48427882086eeba8122392><p class=pgc-img-caption></p></div><p>2ã€èªªèªªä½ å°æ©‹æ¥æ¨¡å¼çš„ç†è§£ã€‚</p><p><strong>æ©‹æ¥æ¨¡å¼</strong>æ˜¯ä¸€ç¨®çµæ§‹å‹è¨­è¨ˆæ¨¡å¼ï¼Œ å¯å°‡ä¸€å€‹å¤§é¡æˆ–ä¸€ç³»åˆ—ç·Šå¯†ç›¸é—œçš„é¡æ‹†åˆ†ç‚ºæŠ½è±¡å’Œå¯¦ç¾å…©å€‹ç¨ç«‹çš„å±¤æ¬¡çµæ§‹ï¼Œ å¾è€Œèƒ½åœ¨é–‹ç™¼æ™‚åˆ†åˆ¥ä½¿ç”¨ã€‚</p><p><strong>æ©‹æ¥æ¨¡å¼ï¼š</strong>æ©‹æ¥æ¨¡å¼çš„ç›®çš„æ˜¯å°‡æ¥å£éƒ¨åˆ†å’Œå¯¦ç¾éƒ¨åˆ†åˆ†é›¢ï¼Œå¾è€Œè®“å®ƒå€‘å¯ä»¥è¼ƒç‚ºå®¹æ˜“ã€ä¹Ÿç›¸å°ç¨ç«‹åœ°åŠ ä»¥æ”¹è®Šã€‚</p><p>åœ¨ GoF çš„ã€Šè¨­è¨ˆæ¨¡å¼ã€‹ä¸€æ›¸ä¸­ï¼Œæ©‹æ¥æ¨¡å¼è¢«å®šç¾©ç‚ºï¼šâ€œå°‡æŠ½è±¡å’Œå¯¦ç¾è§£è€¦ï¼Œè®“å®ƒå€‘å¯ä»¥ç¨ç«‹è®ŠåŒ–ã€‚â€</p><p>å®šç¾©ä¸­çš„â€œæŠ½è±¡â€ï¼ŒæŒ‡çš„ä¸¦éâ€œæŠ½è±¡é¡â€æˆ–â€œæ¥å£â€ï¼Œè€Œæ˜¯è¢«æŠ½è±¡å‡ºä¾†çš„ä¸€å¥—â€œé¡åº«â€ï¼Œå®ƒåªåŒ…å«éª¨æ¶ä»£ç¢¼ï¼ŒçœŸæ­£çš„æ¥­å‹™é‚è¼¯éœ€è¦å§”æ´¾çµ¦å®šç¾©ä¸­çš„â€œå¯¦ç¾â€ä¾†å®Œæˆã€‚</p><p>è€Œå®šç¾©ä¸­çš„â€œå¯¦ç¾â€ï¼Œä¹Ÿä¸¦éâ€œæ¥å£çš„å¯¦ç¾é¡â€ï¼Œè€Œæ˜¯çš„ä¸€å¥—ç¨ç«‹çš„â€œé¡åº«â€ã€‚â€œæŠ½è±¡â€å’Œâ€œå¯¦ç¾â€ç¨ç«‹é–‹ç™¼ï¼Œé€šéå°è±¡ä¹‹é–“çš„çµ„åˆé—œä¿‚ï¼Œçµ„è£åœ¨ä¸€èµ·ã€‚</p><p>ç°¡å–®çš„ç†è§£ï¼šâ€œä¸€å€‹é¡å­˜åœ¨å…©å€‹ï¼ˆæˆ–å¤šå€‹ï¼‰ç¨ç«‹è®ŠåŒ–çš„ç¶­åº¦ï¼Œæˆ‘å€‘é€šéçµ„åˆçš„æ–¹å¼ï¼Œè®“é€™å…©å€‹ï¼ˆæˆ–å¤šå€‹ï¼‰ç¶­åº¦å¯ä»¥ç¨ç«‹é€²è¡Œæ“´å±•ã€‚â€</p><p>éµå¾ªâ€œçµ„åˆå„ªæ–¼ç¹¼æ‰¿â€è¨­è¨ˆåŸå‰‡ï¼Œé€šéçµ„åˆé—œä¿‚ä¾†æ›¿ä»£ç¹¼æ‰¿é—œä¿‚ï¼Œé¿å…ç¹¼æ‰¿å±¤æ¬¡çš„æŒ‡æ•¸ç´šçˆ†ç‚¸ã€‚</p><p><br></p><hr><p>åƒè€ƒè³‡æ–™</p><ol start=0><li>AlexanÂ­der Shvetsã€ŠDive into Design Patternsã€‹</li><li>æ¥µå®¢æ™‚é–“ã€Šè¨­è¨ˆæ¨¡å¼ä¹‹ç¾ã€‹</li><li>å’•æ³¡å­¸é™¢ã€Šé©é…å™¨æ¨¡å¼èˆ‡æ©‹æ¥æ¨¡å¼è©³è§£ã€‹</li></ol><p><br></p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>æ¨¡å¼</a></li><li><a>æ©‹æ¥</a></li><li><a>è©³è§£</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html alt=è™›æ“¬è£½é€ ï¼šä¿¡æ¯æ™‚ä»£çš„å…¨æ–°åˆ¶é€ æ¨¡å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/53f60001361786aae83a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c6909bb4.html title=è™›æ“¬è£½é€ ï¼šä¿¡æ¯æ™‚ä»£çš„å…¨æ–°åˆ¶é€ æ¨¡å¼>è™›æ“¬è£½é€ ï¼šä¿¡æ¯æ™‚ä»£çš„å…¨æ–°åˆ¶é€ æ¨¡å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f8b2a960.html alt="æ€è·¯æ–¹æ³•è©³è§£ é«˜ä¸‰æ•¸å­¸è¤‡ç¿’é›£é»çªç ´ åœ“éŒæ›²ç·šä¸­çš„å®šé»ã€å®šå€¼å•é¡Œ" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/afd28158b4384f5eaa05c44c3104e24f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f8b2a960.html title="æ€è·¯æ–¹æ³•è©³è§£ é«˜ä¸‰æ•¸å­¸è¤‡ç¿’é›£é»çªç ´ åœ“éŒæ›²ç·šä¸­çš„å®šé»ã€å®šå€¼å•é¡Œ">æ€è·¯æ–¹æ³•è©³è§£ é«˜ä¸‰æ•¸å­¸è¤‡ç¿’é›£é»çªç ´ åœ“éŒæ›²ç·šä¸­çš„å®šé»ã€å®šå€¼å•é¡Œ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/17054f8d.html alt=è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹é‡åŒ–ç¯‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6f23d12bac3843e2b09628221846ce0f style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/17054f8d.html title=è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹é‡åŒ–ç¯‡>è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹é‡åŒ–ç¯‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/c84544ec.html alt=è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹æ¡æ¨£ç¯‡ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/5dc880024dac477f8aed432054712f82 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c84544ec.html title=è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹æ¡æ¨£ç¯‡>è©³è§£CDç·¨ç¢¼æ ¼å¼ï¼ˆ16bit/44.1kHzï¼‰åˆç†æ€§ä¹‹æ¡æ¨£ç¯‡</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/feaa3a52.html alt=è©³è§£éŸ³é »ç·¨è§£ç¢¼çš„åŸç†ã€æ¼”é€²å’Œæ‡‰ç”¨é¸å‹ç­‰ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c0abba2ccef04296b442c6457cc98f49 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/feaa3a52.html title=è©³è§£éŸ³é »ç·¨è§£ç¢¼çš„åŸç†ã€æ¼”é€²å’Œæ‡‰ç”¨é¸å‹ç­‰>è©³è§£éŸ³é »ç·¨è§£ç¢¼çš„åŸç†ã€æ¼”é€²å’Œæ‡‰ç”¨é¸å‹ç­‰</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8293e598.html alt=MySQläº‹å‹™æœ€å…¨è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/c61163c863114226b14bb3760da19e4d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8293e598.html title=MySQläº‹å‹™æœ€å…¨è©³è§£>MySQläº‹å‹™æœ€å…¨è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb944fe7.html alt=Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cb7ba6cbda8c44438d9d3d7c57bd25b9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb944fe7.html title=Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™)>Mysqläº‹å‹™è©³è§£(ä¸€æ–‡è®€æ‡‚æ•¸æ“šåº«äº‹å‹™)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dc1a27dd.html alt="è©³è§£Oracle æ•¸æ“šåº«å•Ÿå‹•éç¨‹" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1538236609349861be8e044 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dc1a27dd.html title="è©³è§£Oracle æ•¸æ“šåº«å•Ÿå‹•éç¨‹">è©³è§£Oracle æ•¸æ“šåº«å•Ÿå‹•éç¨‹</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html alt=ã€ŒJavaã€éš¨æ©Ÿæ•¸è©³è§£ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b471807e699b44c2b1dedc580ea3f3af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html title=ã€ŒJavaã€éš¨æ©Ÿæ•¸è©³è§£>ã€ŒJavaã€éš¨æ©Ÿæ•¸è©³è§£</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f44ab8f6.html alt=è©³è§£13é …é‹¼ç­‹å®‰è£è³ªé‡æ¨™æº–åŠé€šç—…é˜²æ²» class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fd3ff534941a487884c7a67361337cfb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f44ab8f6.html title=è©³è§£13é …é‹¼ç­‹å®‰è£è³ªé‡æ¨™æº–åŠé€šç—…é˜²æ²»>è©³è§£13é …é‹¼ç­‹å®‰è£è³ªé‡æ¨™æº–åŠé€šç—…é˜²æ²»</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/464b2d9e.html alt=å²ä¸Šæœ€å…¨é›»è·¯åœ–è©³è§£ï¼è€é›»å·¥éƒ½æ”¶è—äº†ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1533138404073909636bf43 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/464b2d9e.html title=å²ä¸Šæœ€å…¨é›»è·¯åœ–è©³è§£ï¼è€é›»å·¥éƒ½æ”¶è—äº†ï¼>å²ä¸Šæœ€å…¨é›»è·¯åœ–è©³è§£ï¼è€é›»å·¥éƒ½æ”¶è—äº†ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/79cb5594.html alt=æ¯ä¸€æ»´æ²¹åŠ›çˆ­åšåˆ°ä¸æµªè²»ï¼Œè©³è§£å„ç¨®ç‡ƒæ²¹å™´å°„æ–¹å¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/3ed00001d75ac552f05c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/79cb5594.html title=æ¯ä¸€æ»´æ²¹åŠ›çˆ­åšåˆ°ä¸æµªè²»ï¼Œè©³è§£å„ç¨®ç‡ƒæ²¹å™´å°„æ–¹å¼>æ¯ä¸€æ»´æ²¹åŠ›çˆ­åšåˆ°ä¸æµªè²»ï¼Œè©³è§£å„ç¨®ç‡ƒæ²¹å™´å°„æ–¹å¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4ea3618a.html alt="Excelè¬é‡‘æ²¹å¥—è·¯è©³è§£ å–®æ¢ä»¶æŸ¥æ‰¾è¿”å›å¤šè¡Œæ•¸æ“š" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2633664673fd439a862a2527763e82c7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4ea3618a.html title="Excelè¬é‡‘æ²¹å¥—è·¯è©³è§£ å–®æ¢ä»¶æŸ¥æ‰¾è¿”å›å¤šè¡Œæ•¸æ“š">Excelè¬é‡‘æ²¹å¥—è·¯è©³è§£ å–®æ¢ä»¶æŸ¥æ‰¾è¿”å›å¤šè¡Œæ•¸æ“š</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4d1e6d96.html alt=è©³è§£å¦‚ä½•ä½¿ç”¨sum+offset+matchå‡½æ•¸é€²è¡Œå‹•æ…‹å€åŸŸæ±‚å’Œï¼Œå¤§ç¥ç¥•ç± class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/7360fe7df5e241e7af4b15f75f6474fd style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4d1e6d96.html title=è©³è§£å¦‚ä½•ä½¿ç”¨sum+offset+matchå‡½æ•¸é€²è¡Œå‹•æ…‹å€åŸŸæ±‚å’Œï¼Œå¤§ç¥ç¥•ç±>è©³è§£å¦‚ä½•ä½¿ç”¨sum+offset+matchå‡½æ•¸é€²è¡Œå‹•æ…‹å€åŸŸæ±‚å’Œï¼Œå¤§ç¥ç¥•ç±</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e2946ed8.html alt=è©³è§£è®Šé…é›»æ‰€çš„ä½ˆç½® class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9fe764b6e4db4a01b0f251f70eb4e912 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e2946ed8.html title=è©³è§£è®Šé…é›»æ‰€çš„ä½ˆç½®>è©³è§£è®Šé…é›»æ‰€çš„ä½ˆç½®</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>