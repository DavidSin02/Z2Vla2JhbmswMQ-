<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å— | æå®¢å¿«è¨Š</title><meta property="og:title" content="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å— - æå®¢å¿«è¨Š"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/8a4624de47524aa69601b3047226a318"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f7005116.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/f7005116.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/f7005116.html><meta property="article:published_time" content="2020-11-14T21:00:34+08:00"><meta property="article:modified_time" content="2020-11-14T21:00:34+08:00"><meta name=Keywords content><meta name=description content="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—"><meta name=author content="æå®¢å¿«è¨Š"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/f7005116.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>ğŸ¤“ æå®¢å¿«è¨Š Geek Bank</a></h1><p class=description>ç‚ºä½ å¸¶ä¾†æœ€å…¨çš„ç§‘æŠ€çŸ¥è­˜ ğŸ§¡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>çŒœä½ å–œæ­¡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=ç§‘æŠ€>ç§‘æŠ€</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=éŠæˆ²>éŠæˆ²</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=ç§‘å­¸>ç§‘å­¸</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>ç§‘æŠ€</a></span></div><div class=post-content><h1 class=pgc-h-arrow-right><strong>Web é–‹ç™¼ä¸­çš„ cookie æ˜¯ä»€éº¼?</strong></h1><p><strong>cookie æ˜¯å¾Œç«¯å¯ä»¥å­˜å„²åœ¨ç”¨æˆ¶ç€è¦½å™¨ä¸­çš„å°å¡Šæ•¸æ“šã€‚</strong> Cookie æœ€å¸¸è¦‹ç”¨ä¾‹åŒ…æ‹¬ç”¨æˆ¶è·Ÿè¹¤ï¼Œå€‹æ€§åŒ–ä»¥åŠèº«ä»½é©—è­‰ã€‚</p><p><strong>Cookies</strong> å…·æœ‰å¾ˆå¤šéš±ç§å•é¡Œï¼Œå¤šå¹´ä¾†ä¸€ç›´å—åˆ°åš´æ ¼çš„ç›£ç®¡ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œä¸»è¦å´é‡æ–¼æŠ€è¡“æ–¹é¢ï¼šå­¸ç¿’å¦‚ä½•åœ¨å‰ç«¯å’Œå¾Œç«¯å‰µå»ºï¼Œä½¿ç”¨ HTTP cookieã€‚</p><h1 class=pgc-h-arrow-right><strong>å¾Œç«¯é…ç½®</strong></h1><p>å¾Œç«¯ç¤ºä¾‹æ˜¯<strong>Flask</strong>ç·¨å¯«çš„ã€‚å¦‚æœä½ æƒ³è·Ÿè‘—å­¸ç¿’ï¼Œå¯ä»¥å‰µå»ºä¸€å€‹æ–°çš„Pythonè™›æ“¬ç’°å¢ƒï¼Œç§»å‹•åˆ°å…¶ä¸­ä¸¦å®‰è£Flask</p><pre><code>mkdirÂ cookiesÂ &amp;&amp;Â cdÂ $_python3Â -mÂ venvÂ venvsourceÂ venv/bin/activatepipÂ installÂ Flask</code></pre><p>åœ¨é …ç›®æ–‡ä»¶å¤¾ä¸­å‰µå»ºä¸€å€‹åç‚ºflask app.pyçš„æ–°æ–‡ä»¶ï¼Œä¸¦ä½¿ç”¨æœ¬æ–‡çš„ç¤ºä¾‹åœ¨æœ¬åœ°é€²è¡Œå¯¦é©—ã€‚</p><h1 class=pgc-h-arrow-right><strong>èª°å‰µå»º cookies ?</strong></h1><p>é¦–å…ˆï¼Œcookies å¾ä½•è€Œä¾†ï¼Ÿèª°å‰µå»º cookies ï¼Ÿ</p><p>é›–ç„¶å¯ä»¥ä½¿ç”¨document.cookieåœ¨ç€è¦½å™¨ä¸­å‰µå»º cookieï¼Œä½†å¤§å¤šæ•¸æƒ…æ³ä¸‹ï¼Œå¾Œç«¯çš„è²¬ä»»æ˜¯åœ¨å°‡éŸ¿æ‡‰å®¢æˆ¶ç«¯è«‹æ±‚ä¹‹å‰åœ¨è«‹æ±‚ä¸­è¨­ç½® cookieã€‚</p><p>å¾Œç«¯æ˜¯æŒ‡å¯ä»¥é€šéä»¥ä¸‹æ–¹å¼å‰µå»º Cookieï¼š</p><ul><li>å¾Œç«¯å¯¦éš›æ‡‰ç”¨ç¨‹åºçš„ä»£ç¢¼(Pythonã€JavaScriptã€PHPã€Java)</li><li>éŸ¿æ‡‰è«‹æ±‚çš„Webæœå‹™å™¨ï¼ˆNginxï¼ŒApacheï¼‰</li></ul><p>å¾Œç«¯å¯ä»¥åœ¨ HTTP è«‹æ±‚æ±‚ä¸­ Set-Cookie å±¬æ€§ä¾†è¨­ç½® cookieï¼Œå®ƒæ˜¯ç”±éµ/å€¼å°ä»¥åŠå¯é¸å±¬æ€§çµ„æˆçš„ç›¸æ‡‰å­—ç¬¦ä¸²ï¼š</p><pre><code>Set-Cookie:Â myfirstcookie=somecookievalue</code></pre><p>ä»€éº¼æ™‚å€™éœ€è¦å‰µå»º cookieï¼Ÿé€™å–æ±ºæ–¼éœ€æ±‚ã€‚</p><p>cookie æ˜¯ç°¡å–®çš„å­—ç¬¦ä¸²ã€‚åœ¨é …ç›®æ–‡ä»¶å¤¾ä¸­å‰µå»ºä¸€å€‹åç‚ºflask_app.pyçš„Pythonæ–‡ä»¶ï¼Œä¸¦è¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š</p><pre><code>fromÂ flaskÂ importÂ Flask,Â make_responseappÂ =Â Flask(__name__)@app.route("/index/",Â methods=["GET"])defÂ index():Â Â Â Â responseÂ =Â make_response("Here,Â takeÂ someÂ cookie!")Â Â Â Â response.headers["Set-Cookie"]Â =Â "myfirstcookie=somecookievalue"Â Â Â Â returnÂ response</code></pre><p>ç„¶å¾Œé‹è¡Œæ‡‰ç”¨ç¨‹åº:</p><pre><code>FLASK_ENV=developmentÂ FLASK_APP=flask_app.pyÂ flaskÂ run</code></pre><p>ç•¶è©²æ‡‰ç”¨ç¨‹åºé‹è¡Œæ™‚ï¼Œç”¨æˆ¶è¨ªå•http://127.0.0.1:5000/index/ï¼Œå¾Œç«¯å°‡è¨­ç½®ä¸€å€‹å…·æœ‰éµ/å€¼å°çš„åç‚ºSet-Cookieçš„éŸ¿æ‡‰æ¨™é ­ã€‚</p><p>ï¼ˆ127.0.0.1:5000æ˜¯é–‹ç™¼ä¸­çš„ Flask æ‡‰ç”¨ç¨‹åºçš„é»˜èªåµè½åœ°å€/ç«¯å£ï¼‰ã€‚</p><p>Set-Cookieæ¨™é ­æ˜¯ç­è§£å¦‚ä½•å‰µå»ºcookieçš„é—œéµï¼š</p><pre><code>response.headers["Set-Cookie"]Â =Â "myfirstcookie=somecookievalue"</code></pre><p>å¤§å¤šæ•¸æ¡†æ¶éƒ½æœ‰è‡ªå·±è¨­ç½® cookie çš„æ–¹æ³•ï¼Œæ¯”å¦‚Flaskçš„set_cookie()ã€‚</p><h1 class=pgc-h-arrow-right><strong>å¦‚ä½•æŸ¥çœ‹ cookies ï¼Ÿ</strong></h1><p>è¨ªå•http://127.0.0.1:5000/index/å¾Œï¼Œå¾Œç«¯å°‡åœ¨ç€è¦½å™¨ä¸­è¨­ç½®cookieã€‚è¦æŸ¥çœ‹æ­¤cookieï¼Œå¯ä»¥å¾ç€è¦½å™¨çš„æ§åˆ¶æª¯èª¿ç”¨document.cookieï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/8a4624de47524aa69601b3047226a318><p class=pgc-img-caption></p></div><p>æˆ–è€…å¯ä»¥åœ¨é–‹ç™¼äººå“¡å·¥å…·ä¸­é¸ä¸­Storageé¸é …å¡ã€‚å–®æ“Šcookie,æœƒçœ‹åˆ° cookie å…·é«”çš„å…§å®¹ï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/61a36d7e7fae49ecabbb7c65b5c868bb><p class=pgc-img-caption></p></div><p>åœ¨å‘½ä»¤è¡Œä¸Šï¼Œé‚„å¯ä»¥ä½¿ç”¨curlæŸ¥çœ‹å¾Œç«¯è¨­ç½®äº†å“ªäº› cookie</p><pre><code>curlÂ -IÂ http://127.0.0.1:5000/index/</code></pre><p>å¯ä»¥å°‡ Cookie ä¿å­˜åˆ°æ–‡ä»¶ä¸­ä»¥ä¾›ä»¥å¾Œä½¿ç”¨ï¼š</p><pre><code>curlÂ -IÂ http://127.0.0.1:5000/index/Â --cookie-jarÂ mycookies</code></pre><p>åœ¨ stdout ä¸Šé¡¯ç¤º cookie:</p><pre><code>curlÂ -IÂ http://127.0.0.1:5000/index/Â --cookie-jarÂ -</code></pre><p>è«‹æ³¨æ„ï¼Œæ²’æœ‰HttpOnlyå±¬æ€§çš„cookieï¼Œåœ¨ç€è¦½å™¨ä¸­å¯ä»¥ä½¿ç”¨document.cookieä¸Šè¨ªå•ï¼Œå¦‚æœè¨­ç½®äº† HttpOnly å±¬æ€§ï¼Œdocument.cookieå°±è®€å–ä¸åˆ°ã€‚</p><pre><code>Set-Cookie:Â myfirstcookie=somecookievalue;Â HttpOnly</code></pre><p>ç¾åœ¨ï¼Œè©²cookie ä»å°‡å‡ºç¾åœ¨ Storage é¸é …å¡ä¸­ï¼Œä½†æ˜¯ document.cookieè¿”å›çš„æ˜¯ä¸€å€‹ç©ºå­—ç¬¦ä¸²ã€‚</p><p>å¾ç¾åœ¨é–‹å§‹ï¼Œç‚ºæ–¹ä¾¿èµ·è¦‹ï¼Œä½¿ç”¨Flaskçš„ response.set_cookie() åœ¨å¾Œç«¯ä¸Šå‰µå»º cookieã€‚</p><h1 class=pgc-h-arrow-right><strong>æˆ‘æœ‰ä¸€å€‹ cookieï¼Œç¾åœ¨æ€éº¼è¾¦ï¼Ÿ</strong></h1><p>ä½ çš„ç€è¦½å™¨å¾—åˆ°ä¸€å€‹ cookieã€‚ç¾åœ¨æ€éº¼è¾¦å‘¢?ä¸€æ—¦æœ‰äº† cookieï¼Œç€è¦½å™¨å°±å¯ä»¥å°‡cookieç™¼é€å›å¾Œç«¯ã€‚</p><p>é€™æœ‰è¨±å¤šç”¨é€”ç™¼å¦‚ï¼šç”¨æˆ¶è·Ÿè¹¤ã€å€‹æ€§åŒ–ï¼Œä»¥åŠæœ€é‡è¦çš„èº«ä»½é©—è­‰ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€æ—¦ä½ ç™»éŒ„ç¶²ç«™ï¼Œå¾Œç«¯å°±æœƒçµ¦ä½ ä¸€å€‹cookieï¼š</p><pre><code>Set-Cookie:Â userid=sup3r4n0m-us3r-1d3nt1f13r</code></pre><p>ç‚ºäº†åœ¨æ¯å€‹å¾ŒçºŒè«‹æ±‚ä¸­æ­£ç¢ºè­˜åˆ¥ æˆ‘å€‘çš„èº«ä»½ï¼Œå¾Œç«¯æœƒæª¢æŸ¥ä¾†è‡ªè«‹æ±‚ä¸­ç€è¦½å™¨çš„ cookie</p><p>è¦ç™¼é€Cookieï¼Œç€è¦½å™¨æœƒåœ¨è«‹æ±‚ä¸­é™„åŠ ä¸€å€‹Cookieæ¨™é ­ï¼š</p><pre><code>Cookie:Â userid=sup3r4n0m-us3r-1d3nt1f13r</code></pre><h1 class=pgc-h-arrow-right><strong>cookie å¯ä»¥è¨­ç½®éæœŸæ™‚é–“: Max-Age å’Œ expires</strong></h1><p>é»˜èªæƒ…æ³ä¸‹ï¼Œcookie åœ¨ç”¨æˆ¶é—œé–‰æœƒè©±æ™‚å³é—œé–‰ç€è¦½å™¨æ™‚éæœŸã€‚è¦æŒä¹…åŒ–cookieï¼Œæˆ‘å€‘å¯ä»¥é€šéexpiresæˆ–Max-Ageå±¬æ€§</p><pre><code>Set-Cookie:Â myfirstcookie=somecookievalue;Â expires=Tue,Â 09Â JunÂ 2020Â 15:46:52Â GMT;Â Max-Age=1209600</code></pre><p>æ³¨æ„ï¼š<strong>Max-Age</strong>å„ªå…ˆæ–¼<strong>expires</strong>ã€‚</p><h1 class=pgc-h-arrow-right><strong>cookieçš„ä½œç”¨åŸŸæ˜¯ç¶²ç«™è·¯å¾‘: path å±¬æ€§</strong></h1><p>è€ƒæ…®è©²å¾Œç«¯ï¼Œè©²å¾Œç«¯åœ¨è¨ªå•http://127.0.0.1:5000/æ™‚ç‚ºå…¶å‰ç«¯è¨­ç½®äº†ä¸€å€‹æ–°çš„ cookieã€‚ç›¸åï¼Œåœ¨å…¶ä»–å…©æ¢è·¯å¾‘ä¸Šï¼Œæˆ‘å€‘æ‰“å°è«‹æ±‚çš„cookieï¼š</p><pre><code>fromÂ flaskÂ importÂ Flask,Â make_response,Â requestappÂ =Â Flask(__name__)@app.route("/",Â methods=["GET"])defÂ index():Â Â Â Â responseÂ =Â make_response("Here,Â takeÂ someÂ cookie!")Â Â Â Â response.set_cookie(key="id",Â value="3db4adj3d",Â path="/about/")Â Â Â Â returnÂ response@app.route("/about/",Â methods=["GET"])defÂ about():Â Â Â Â print(request.cookies)Â Â Â Â returnÂ "HelloÂ world!"@app.route("/contact/",Â methods=["GET"])defÂ contact():Â Â Â Â print(request.cookies)Â Â Â Â returnÂ "HelloÂ world!"</code></pre><p>é‹è¡Œè©²æ‡‰ç”¨ç¨‹åº:</p><pre><code>FLASK_ENV=developmentÂ FLASK_APP=flask_app.pyÂ flaskÂ run</code></pre><p>åœ¨å¦ä¸€å€‹çµ‚ç«¯ä¸­ï¼Œå¦‚æœæˆ‘å€‘èˆ‡æ ¹è·¯ç”±å»ºç«‹é€£æ¥ï¼Œå‰‡å¯ä»¥åœ¨Set-Cookieä¸­çœ‹åˆ°cookieï¼š</p><pre><code>curlÂ -IÂ http://127.0.0.1:5000/Â --cookie-jarÂ cookiesHTTP/1.0Â 200Â OKContent-Type:Â text/html;Â charset=utf-8Content-Length:Â 23Set-Cookie:Â id=3db4adj3d;Â Path=/about/Server:Â Werkzeug/1.0.1Â Python/3.8.3Date:Â Wed,Â 27Â MayÂ 2020Â 09:21:37Â GMT</code></pre><p>è«‹æ³¨æ„ï¼Œæ­¤æ™‚ cookie å…·æœ‰Pathå±¬æ€§ï¼š</p><pre><code>Set-Cookie:Â id=3db4adj3d;Â Path=/about/</code></pre><p>/about/ è·¯ç”±ä¸¦ä¿å­˜ cookit</p><pre><code>curlÂ -IÂ http://127.0.0.1:5000/about/Â --cookieÂ cookies</code></pre><p>åœ¨ Flask æ‡‰ç”¨ç¨‹åºçš„çµ‚ç«¯ä¸­é‹è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><pre><code>ImmutableMultiDict([('id',Â '3db4adj3d')])127.0.0.1Â -Â -Â [27/May/2020Â 11:27:55]Â "HEADÂ /about/Â HTTP/1.1"Â 200Â -</code></pre><p>æ­£å¦‚é æœŸçš„é‚£æ¨£ï¼Œcookie è¿”å›åˆ°å¾Œç«¯ã€‚ç¾åœ¨å˜—è©¦è¨ªå• /contact/ è·¯ç”±ï¼š</p><pre><code>urlÂ -IÂ http://127.0.0.1:5000/contact/Â --cookieÂ cookies</code></pre><p>åœ¨ Flask æ‡‰ç”¨ç¨‹åºçš„çµ‚ç«¯ä¸­é‹è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><pre><code>ImmutableMultiDict([])127.0.0.1Â -Â -Â [27/May/2020Â 11:29:00]Â "HEADÂ /contact/Â HTTP/1.1"Â 200Â -</code></pre><p>é€™èªªæ˜å•¥?cookie çš„ä½œç”¨åŸŸæ˜¯Path ã€‚å…·æœ‰çµ¦å®šè·¯å¾‘å±¬æ€§çš„cookieä¸èƒ½è¢«é«®é€åˆ°å¦ä¸€å€‹ä¸ç›¸é—œçš„è·¯å¾‘ï¼Œå³ä½¿é€™å…©å€‹è·¯å¾‘ä½æ–¼åŒä¸€åŸŸä¸­ã€‚</p><p><strong>é€™æ˜¯cookieæ¬Šé™çš„ç¬¬ä¸€å±¤ã€‚</strong></p><p>åœ¨cookieå‰µå»ºéç¨‹ä¸­çœç•¥Pathæ™‚ï¼Œç€è¦½å™¨é»˜èªç‚º/ã€‚</p><h1 class=pgc-h-arrow-right><strong>cookie çš„ä½œç”¨åŸŸæ˜¯åŸŸå: domain å±¬æ€§</strong></h1><p>cookie çš„ Domain å±¬æ€§çš„å€¼æ§åˆ¶ç€è¦½å™¨æ˜¯å¦æ‡‰è©²æ¥å—cookieä»¥åŠcookieè¿”å›çš„ä½ç½®ã€‚</p><p>è®“æˆ‘å€‘çœ‹ä¸€äº›ä¾‹å­ã€‚</p><h1 class=pgc-h-arrow-right><strong>ä¸»æ©Ÿä¸åŒ¹é…ï¼ˆéŒ¯èª¤çš„ä¸»æ©Ÿï¼‰</strong></h1><p>æŸ¥çœ‹ https://serene-bastion-01422.herokuapp.com/get-wrong-domain-cookie/è¨­ç½®çš„cookieï¼š</p><pre><code>Set-Cookie:Â coookiename=wr0ng-d0m41n-c00k13;Â Domain=api.valentinog.com</code></pre><p>é€™è£¡çš„ cookie ä¾†è‡ª<strong>serene-bastion-01422.herokuapp.com</strong>ï¼Œä½†æ˜¯Domainå±¬æ€§å…·æœ‰<strong>api.valentinog.com</strong>ã€‚</p><p>ç€è¦½å™¨æ²’æœ‰å…¶ä»–é¸æ“‡ä¾†æ‹’çµ•é€™å€‹ cookieã€‚æ¯”å¦‚ Chrome æœƒçµ¦å‡ºä¸€å€‹è­¦å‘Š(Firefoxæ²’æœ‰)</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7c81fe6e3a2446dbb6b576bfad0f481e><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>ä¸»æ©Ÿä¸åŒ¹é…ï¼ˆå­åŸŸåï¼‰</strong></h1><p>æŸ¥çœ‹ https://serene-bastion-01422.herokuapp.com/get-wrong-subdomain-cookie/è¨­ç½®çš„cookieï¼š</p><pre><code>Set-Cookie:Â coookiename=wr0ng-subd0m41n-c00k13;Â Domain=secure-brushlands-44802.herokuapp.com</code></pre><p>é€™è£¡çš„ Cookie ä¾†è‡ªserene-bastion-01422.herokuapp.comï¼Œä½†**â€œDomainâ€**å±¬æ€§æ˜¯secure-brushlands-44802.herokuapp.comã€‚</p><p>å®ƒå€‘åœ¨ç›¸åŒçš„åŸŸä¸Šï¼Œä½†æ˜¯å­åŸŸåä¸åŒã€‚åŒæ¨£ï¼Œç€è¦½å™¨ä¹Ÿæ‹’çµ•æ­¤cookieï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/8a96594e351b44a6be4a707ee00506bf><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>ä¸»æ©ŸåŒ¹é…ï¼ˆæ•´å€‹åŸŸï¼‰</strong></h1><p>æŸ¥çœ‹ https://www.valentinog.com/get-domain-cookie.htmlè¨­ç½®çš„cookieï¼š</p><pre><code>set-cookie:Â cookiename=d0m41n-c00k13;Â Domain=valentinog.com</code></pre><p>æ­¤cookieæ˜¯ä½¿ç”¨ Nginx add_headeråœ¨Webæœå‹™å™¨ä¸Šè¨­ç½®çš„ï¼š</p><pre><code>add_headerÂ Set-CookieÂ "cookiename=d0m41n-c00k13;Â Domain=valentinog.com";</code></pre><p>é€™è£¡ä½¿ç”¨ Nginx ä¸­è¨­ç½®cookieçš„å¤šç¨®æ–¹æ³•ã€‚Cookie æ˜¯ç”± Web æœå‹™å™¨æˆ–æ‡‰ç”¨ç¨‹åºçš„ä»£ç¢¼è¨­ç½®çš„ï¼Œå°æ–¼ç€è¦½å™¨ä¾†èªªç„¡é—œç·Šè¦ã€‚</p><p>é‡è¦çš„æ˜¯ cookie ä¾†è‡ªå“ªå€‹åŸŸã€‚</p><p>åœ¨æ­¤ç€è¦½å™¨å°‡æ„‰å¿«åœ°æ¥å—cookieï¼Œå› ç‚ºDomainä¸­çš„ä¸»æ©ŸåŒ…æ‹¬cookieæ‰€ä¾†è‡ªçš„ä¸»æ©Ÿã€‚</p><p>æ›å¥è©±èªªï¼Œvalentinog.comåŒ…æ‹¬å­åŸŸåwww.valentinog.comã€‚</p><p>åŒæ™‚ï¼Œå°valentinog.comçš„æ–°è«‹æ±‚,cookie éƒ½æœƒæ”œå¸¶è‘—ï¼Œä»¥åŠä»»ä½•å°valentinog.comå­åŸŸåçš„è«‹æ±‚ã€‚</p><p>é€™æ˜¯ä¸€å€‹é™„åŠ äº†Cookieçš„ www å­åŸŸè«‹æ±‚ï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/9dc2184e57334a21b7116989b14435cb><p class=pgc-img-caption></p></div><p>ä¸‹é¢æ˜¯å°å¦ä¸€å€‹è‡ªå‹•é™„åŠ cookieçš„å­åŸŸçš„è«‹æ±‚</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/220b42278e584c89b7a7d7081dcd9cb5><p class=pgc-img-caption></p></div><h1 class=pgc-h-arrow-right><strong>Cookies å’Œå…¬å…±å¾Œç¶´åˆ—è¡¨</strong></h1><p>æŸ¥çœ‹ https://serene-bastion-01422.herokuapp.com/get-domain-cookie/:è¨­ç½®çš„ cookieï¼š</p><pre><code>Set-Cookie:Â coookiename=d0m41n-c00k13;Â Domain=herokuapp.com</code></pre><p>é€™è£¡çš„ cookie ä¾†è‡ªserene-bas-01422.herokuapp.comï¼ŒDomain å±¬æ€§æ˜¯herokuapp.comã€‚ç€è¦½å™¨åœ¨é€™è£¡æ‡‰è©²åšä»€éº¼</p><p>ä½ å¯èƒ½èªç‚ºserene-base-01422.herokuapp.comåŒ…å«åœ¨herokuapp.comåŸŸä¸­ï¼Œå› æ­¤ç€è¦½å™¨æ‡‰è©²æ¥å—cookieã€‚</p><p>ç›¸åï¼Œå®ƒæ‹’çµ• cookieï¼Œå› ç‚ºå®ƒä¾†è‡ª<strong>å…¬å…±å¾Œç¶´åˆ—è¡¨</strong>ä¸­åŒ…å«çš„åŸŸã€‚</p><p>Public Suffix Listï¼ˆå…¬å…±å¾Œç¶´åˆ—è¡¨ï¼‰ã€‚æ­¤åˆ—è¡¨åˆ—èˆ‰äº†é ‚ç´šåŸŸåå’Œé–‹æ”¾è¨»å†Šçš„åŸŸåã€‚ç€è¦½å™¨ç¦æ­¢æ­¤åˆ—è¡¨ä¸Šçš„åŸŸåè¢«å­åŸŸåå¯«å…¥Cookieã€‚</p><h1 class=pgc-h-arrow-right><strong>ä¸»æ©ŸåŒ¹é…ï¼ˆå­åŸŸï¼‰</strong></h1><p>æŸ¥çœ‹ https://serene-bastion-01422.herokuapp.com/get-subdomain-cookie/:è¨­ç½®çš„ cookieï¼š</p><pre><code>Set-Cookie:Â coookiename=subd0m41n-c00k13</code></pre><p>ç•¶åŸŸåœ¨cookieå‰µå»ºæœŸé–“è¢«çœç•¥æ™‚ï¼Œç€è¦½å™¨æœƒé»˜èªåœ¨åœ°å€æ¬„ä¸­é¡¯ç¤ºåŸå§‹ä¸»æ©Ÿï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæˆ‘çš„ä»£ç¢¼æœƒé€™æ¨£åš:</p><pre><code>response.set_cookie(key="coookiename",Â value="subd0m41n-c00k13")</code></pre><p>ç•¶ Cookie é€²å…¥ç€è¦½å™¨çš„ Cookie å­˜å„²å€æ™‚ï¼Œæˆ‘å€‘çœ‹åˆ°å·²æ‡‰ç”¨Domain ï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/c6e523e434ec47de96940fcf5fa3d1ea><p class=pgc-img-caption></p></div><p>ç¾åœ¨ï¼Œæˆ‘å€‘æœ‰ä¾†è‡ªserene-bastion-01422.herokuapp.com çš„ cookie, é‚£ cookie ç¾åœ¨æ‡‰è©²é€åˆ°å“ªè£¡?</p><p>å¦‚æœä½ è¨ªå•https://serene-bastion-01422.herokuapp.com/ï¼Œå‰‡ cookie éš¨è«‹æ±‚ä¸€èµ·å‡ºç¾ï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/14758019996745419eb718a261cde202><p class=pgc-img-caption></p></div><p>ä½†æ˜¯ï¼Œå¦‚æœè¨ªå•herokuapp.comï¼Œå‰‡ cookie ä¸æœƒéš¨è«‹æ±‚ä¸€èµ·å‡ºç¾ï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f38726407a5d46afa1acd29b16c93669><p class=pgc-img-caption></p></div><p>æ¦‚æ‹¬åœ°èªªï¼Œç€è¦½å™¨ä½¿ç”¨ä»¥ä¸‹å•Ÿç™¼å¼è¦å‰‡ä¾†æ±ºå®šå¦‚ä½•è™•ç†cookies(é€™è£¡çš„ç™¼é€è€…ä¸»æ©ŸæŒ‡çš„æ˜¯ä½ è¨ªå•çš„å¯¦éš›ç¶²å€):</p><ul><li>å¦‚æœâ€œDomainâ€ä¸­çš„åŸŸæˆ–å­åŸŸèˆ‡è¨ªå•çš„ä¸»æ©Ÿä¸åŒ¹é…ï¼Œå‰‡å®Œå…¨æ‹’çµ• Cookie</li><li>å¦‚æœ Domain çš„å€¼åŒ…å«åœ¨å…¬å…±å¾Œç¶´åˆ—è¡¨ä¸­ï¼Œå‰‡æ‹’çµ• cookie</li><li>å¦‚æœDomain ä¸­çš„åŸŸæˆ–å­åŸŸèˆ‡è¨ªå•åœ¨ä¸»æ©ŸåŒ¹é…ï¼Œå‰‡æ¥å— Cookie</li></ul><p>ä¸€æ—¦ç€è¦½å™¨æ¥å—äº†cookieï¼Œä¸¦ä¸”å³å°‡ç™¼å‡ºè«‹æ±‚ï¼Œå®ƒå°±æœƒèªªï¼š</p><ul><li>å¦‚æœè«‹æ±‚ä¸»æ©Ÿèˆ‡æˆ‘åœ¨Domainä¸­çœ‹åˆ°çš„å€¼å®Œå…¨åŒ¹é…ï¼Œå‰‡æœƒå›å‚³ cookie</li><li>å¦‚æœè«‹æ±‚ä¸»æ©Ÿæ˜¯èˆ‡æˆ‘åœ¨â€œDomainâ€ä¸­çœ‹åˆ°çš„å€¼å®Œå…¨åŒ¹é…çš„å­åŸŸï¼Œå‰‡å°‡å›å‚³ cookie</li><li>å¦‚æœè«‹æ±‚ä¸»æ©Ÿæ˜¯sub.example.devä¹‹é¡çš„å­åŸŸï¼ŒåŒ…å«åœ¨example.devä¹‹é¡çš„ Domain ä¸­ï¼Œå‰‡å°‡å›å‚³ cookie</li><li>å¦‚æœè«‹æ±‚ä¸»æ©Ÿæ˜¯ä¾‹å¦‚example.devä¹‹é¡çš„ä¸»åŸŸï¼Œè€Œ Domain æ˜¯sub.example.devä¹‹é¡ï¼Œå‰‡ä¸æœƒå›å‚³cookieã€‚</li></ul><p><strong>Domain å’Œ Path å±¬æ€§ä¸€ç›´æ˜¯ cookie æ¬Šé™çš„ç¬¬äºŒå±¤ã€‚</strong></p><h1 class=pgc-h-arrow-right><strong>Cookieså¯ä»¥é€šéAJAXè«‹æ±‚å‚³é</strong></h1><p>Cookies å¯ä»¥é€šéAJAXè«‹æ±‚å‚³æ’­ã€‚<strong>AJAX è«‹æ±‚</strong>æ˜¯ä½¿ç”¨ JS ï¼ˆXMLHttpRequestæˆ–Fetchï¼‰é€²è¡Œçš„ç•°æ­¥HTTPè«‹æ±‚ï¼Œç”¨æ–¼ç²å–æ•¸æ“šä¸¦å°‡å…¶ç™¼é€å›å¾Œç«¯ã€‚</p><p>è€ƒæ…® Flaskçš„å¦ä¸€å€‹ç¤ºä¾‹ï¼Œå…¶ä¸­æœ‰ä¸€å€‹æ¨¡æ¿ï¼Œè©²æ¨¡æ¿åˆæœƒåŠ è¼‰ JS æ–‡ä»¶ï¼š</p><pre><code>fromÂ flaskÂ importÂ Flask,Â make_response,Â render_templateappÂ =Â Flask(__name__)@app.route("/",Â methods=["GET"])defÂ index():Â Â Â Â returnÂ render_template("index.html")@app.route("/get-cookie/",Â methods=["GET"])defÂ get_cookie():Â Â Â Â responseÂ =Â make_response("Here,Â takeÂ someÂ cookie!")Â Â Â Â response.set_cookie(key="id",Â value="3db4adj3d")Â Â Â Â returnÂ response</code></pre><p>ä»¥ä¸‹æ˜¯ templates/index.html æ¨¡æ¿ï¼š</p><pre><code>&lt;!DOCTYPEÂ html&gt;&lt;htmlÂ lang="en"&gt;&lt;head&gt;Â Â Â Â &lt;metaÂ charset="UTF-8"&gt;Â Â Â Â &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;button&gt;FETCH&lt;/button&gt;&lt;/body&gt;&lt;scriptÂ src="{{Â url_for('static',Â filename='index.js')Â }}"&gt;&lt;/script&gt;&lt;/html&gt;</code></pre><p>ä¸‹é¢æ˜¯ static/index.js çš„å…§å®¹ï¼š</p><pre><code>constÂ buttonÂ =Â document.getElementsByTagName("button")[0];button.addEventListener("click",Â function()Â {Â Â getACookie();});functionÂ getACookie()Â {Â Â fetch("/get-cookie/")Â Â Â Â .then(responseÂ =&gt;Â {Â Â Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â Â Â returnÂ response.text();Â Â Â Â })Â Â Â Â .then(textÂ =&gt;Â console.log(text));}</code></pre><p>ç•¶è¨ªå•http://127.0.0.1:5000/æ™‚ï¼Œæˆ‘å€‘æœƒçœ‹åˆ°ä¸€å€‹æŒ‰éˆ•ã€‚é€šéå–®æ“ŠæŒ‰éˆ•ï¼Œæˆ‘å€‘å‘/get-cookie/ç™¼å‡ºç²å–è«‹æ±‚ä¸¦ç²å–Cookieã€‚æ­£å¦‚é æœŸçš„é‚£æ¨£ï¼Œcookie è½åœ¨ç€è¦½å™¨çš„ Cookie storageä¸­ã€‚</p><p>å° Flask æ‡‰ç”¨ç¨‹åºé€²è¡Œä¸€äº›æ›´æ”¹ï¼Œå¤šåŠ ä¸€å€‹è·¯ç”±ï¼š</p><pre><code>fromÂ flaskÂ importÂ Flask,Â make_response,Â request,Â render_template,Â jsonifyappÂ =Â Flask(__name__)@app.route("/",Â methods=["GET"])defÂ index():Â Â Â Â returnÂ render_template("index.html")@app.route("/get-cookie/",Â methods=["GET"])defÂ get_cookie():Â Â Â Â responseÂ =Â make_response("Here,Â takeÂ someÂ cookie!")Â Â Â Â response.set_cookie(key="id",Â value="3db4adj3d")Â Â Â Â returnÂ response@app.route("/api/cities/",Â methods=["GET"])defÂ cities():Â Â Â Â ifÂ request.cookies["id"]Â ==Â "3db4adj3d":Â Â Â Â Â Â Â Â citiesÂ =Â [{"name":Â "Rome",Â "id":Â 1},Â {"name":Â "Siena",Â "id":Â 2}]Â Â Â Â Â Â Â Â returnÂ jsonify(cities)Â Â Â Â returnÂ jsonify(msg="Ops!")</code></pre><p>å¦å¤–ï¼Œèª¿æ•´ä¸€ä¸‹ JS ä»£ç¢¼ï¼Œç”¨æ–¼ä¸‹è«‹æ±‚å‰›æ–°å¢çš„è·¯ç”±ï¼š</p><pre><code>constÂ buttonÂ =Â document.getElementsByTagName("button")[0];button.addEventListener("click",Â function()Â {Â Â getACookie().then(()Â =&gt;Â getData());});functionÂ getACookie()Â {Â Â returnÂ fetch("/get-cookie/").then(responseÂ =&gt;Â {Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â returnÂ Promise.resolve("AllÂ good,Â fetchÂ theÂ data");Â Â });}functionÂ getData()Â {Â Â fetch("/api/cities/")Â Â Â Â .then(responseÂ =&gt;Â {Â Â Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â Â Â returnÂ response.json();Â Â Â Â })Â Â Â Â .then(jsonÂ =&gt;Â console.log(json));</code></pre><p>ç•¶è¨ªå•http://127.0.0.1:5000/æ™‚ï¼Œæˆ‘å€‘æœƒçœ‹åˆ°ä¸€å€‹æŒ‰éˆ•ã€‚é€šéå–®æ“ŠæŒ‰éˆ•ï¼Œæˆ‘å€‘å‘/get-cookie/ç™¼å‡ºç²å–è«‹æ±‚ä»¥ç²å–Cookieã€‚Cookieå‡ºç¾å¾Œï¼Œæˆ‘å€‘å°±æœƒå°/api/cities/å†æ¬¡ç™¼å‡ºFetchè«‹æ±‚ã€‚</p><p>åœ¨ç€è¦½å™¨çš„æ§åˆ¶æª¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è«‹æ±‚å›ä¾† çš„æ•¸æ“šã€‚å¦å¤–ï¼Œåœ¨é–‹ç™¼è€…å·¥å…·çš„Networké¸é …å¡ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å€‹åç‚ºCookieçš„é ­ï¼Œé€™æ˜¯é€šéAJAXè«‹æ±‚å‚³çµ¦å¾Œç«¯ã€‚</p><p>åªè¦å‰ç«¯èˆ‡å¾Œç«¯åœ¨åŒä¸€ä¸Šä¸‹æ–‡ä¸­ï¼Œåœ¨å‰ç«¯å’Œå¾Œç«¯ä¹‹é–“ä¾†å›äº¤æ›cookieå°±å¯ä»¥æ­£å¸¸å·¥ä½œï¼šæˆ‘å€‘èªªå®ƒå€‘ä¾†è‡ªåŒæºã€‚</p><p>é€™æ˜¯å› ç‚ºé»˜èªæƒ…æ³ä¸‹ï¼ŒFetch åƒ…åœ¨è«‹æ±‚åˆ°é”è§¸ç™¼è«‹æ±‚çš„ä¾†æºæ™‚æ‰ç™¼é€æ†‘æ“šï¼Œå³ Cookieã€‚</p><h1 class=pgc-h-arrow-right><strong>cookie ä¸èƒ½ç¸½æ˜¯é€šéAJAXè«‹æ±‚å‚³é</strong></h1><p>è€ƒæ…®å¦ä¸€ç¨®æƒ…æ³ï¼Œåœ¨å¾Œç«¯ç¨ç«‹é‹è¡Œï¼Œå¯ä»¥é€™æ¨£å•Ÿå‹•æ‡‰ç”¨ç¨‹åº:</p><pre><code>FLASK_ENV=developmentÂ FLASK_APP=flask_app.pyÂ flaskÂ run</code></pre><p>ç¾åœ¨ï¼Œåœ¨ Flask æ‡‰ç”¨ç¨‹åºä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶å¤¾ä¸­ï¼Œå‰µå»ºindex.htmlï¼š</p><pre><code>&lt;!DOCTYPEÂ html&gt;&lt;htmlÂ lang="en"&gt;&lt;head&gt;Â Â Â Â &lt;metaÂ charset="UTF-8"&gt;Â Â Â Â &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;button&gt;FETCH&lt;/button&gt;&lt;/body&gt;&lt;scriptÂ src="index.js"&gt;&lt;/script&gt;&lt;/html&gt;</code></pre><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç¢¼åœ¨åŒä¸€æ–‡ä»¶å¤¾ä¸­å‰µå»ºä¸€å€‹åç‚ºindex.jsçš„ JS æ–‡ä»¶ï¼š</p><pre><code>button.addEventListener("click",Â function()Â {Â Â getACookie().then(()Â =&gt;Â getData());});functionÂ getACookie()Â {Â Â returnÂ fetch("http://localhost:5000/get-cookie/").then(responseÂ =&gt;Â {Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â returnÂ Promise.resolve("AllÂ good,Â fetchÂ theÂ data");Â Â });}functionÂ getData()Â {Â Â fetch("http://localhost:5000/api/cities/")Â Â Â Â .then(responseÂ =&gt;Â {Â Â Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â Â Â returnÂ response.json();Â Â Â Â })Â Â Â Â .then(jsonÂ =&gt;Â console.log(json));}</code></pre><p>åœ¨åŒä¸€æ–‡ä»¶å¤¾ä¸­ï¼Œå¾çµ‚ç«¯é‹è¡Œï¼š</p><pre><code>npxÂ serve</code></pre><p>æ­¤å‘½ä»¤ç‚ºæ‚¨æä¾›äº†è¦é€£æ¥çš„æœ¬åœ°åœ°å€/ç«¯å£ï¼Œä¾‹å¦‚http://localhost:42091/ã€‚è¨ªå•é é¢ä¸¦å˜—è©¦åœ¨ç€è¦½å™¨æ§åˆ¶æª¯æ‰“é–‹çš„æƒ…æ³ä¸‹å–®æ“ŠæŒ‰éˆ•ã€‚åœ¨æ§åˆ¶æª¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><pre><code>Cross-OriginÂ RequestÂ Blocked:Â TheÂ SameÂ OriginÂ PolicyÂ disallowsÂ readingÂ theÂ remoteÂ resourceÂ atÂ http://localhost:5000/get-cookie/.Â (Reason:Â CORSÂ headerÂ â€˜Access-Control-Allow-Originâ€™Â missing)</code></pre><p>å› ç‚º http://localhost:5000/ èˆ‡http://localhost:42091/.ä¸åŒã€‚å®ƒå€‘æ˜¯ä¸åŒçš„åŸŸï¼Œå› æ­¤æœƒ CORS çš„é™åˆ¶ã€‚</p><h1 class=pgc-h-arrow-right><strong>è™•ç† CORS</strong></h1><p>CORS æ˜¯ä¸€å€‹ W3C æ¨™æº–ï¼Œå…¨ç¨±æ˜¯â€œè·¨åŸŸè³‡æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰ã€‚å®ƒå…è¨±ç€è¦½å™¨å‘è·¨åŸŸçš„æœå‹™å™¨ï¼Œç™¼å‡ºXMLHttpRequestè«‹æ±‚ï¼Œå¾è€Œå…‹æœäº† AJAX åªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚</p><p>æ•´å€‹ CORS é€šä¿¡éç¨‹ï¼Œéƒ½æ˜¯ç€è¦½å™¨è‡ªå‹•å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ¶åƒèˆ‡ã€‚å°æ–¼é–‹ç™¼è€…ä¾†èªªï¼ŒCORS é€šä¿¡èˆ‡æ™®é€šçš„ AJAX é€šä¿¡æ²’æœ‰å·®åˆ¥ï¼Œä»£ç¢¼å®Œå…¨ä¸€æ¨£ã€‚ç€è¦½å™¨ä¸€æ—¦ç™¼ç¾ AJAX è«‹æ±‚è·¨åŸŸï¼Œå°±æœƒè‡ªå‹•æ·»åŠ ä¸€äº›é™„åŠ çš„é ­ä¿¡æ¯ï¼Œæœ‰æ™‚é‚„æœƒå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è«‹æ±‚ï¼Œä½†ç”¨æˆ¶ä¸æœƒæœ‰æ„ŸçŸ¥ã€‚å› æ­¤ï¼Œå¯¦ç¾ CORS é€šä¿¡çš„é—œéµæ˜¯æœå‹™å™¨ã€‚åªè¦æœå‹™å™¨å¯¦ç¾äº† CORS æ¥å£ï¼Œå°±å¯ä»¥è·¨åŸŸé€šä¿¡ã€‚</p><p>é»˜èªæƒ…æ³ä¸‹ï¼Œé™¤éæœå‹™å™¨è¨­ç½®äº†Access-Control-Allow-Originçš„ç‰¹å®šHTTPæ¨™é ­ï¼Œå¦å‰‡ç€è¦½å™¨å°‡é˜»æ­¢AJAXå°éç›¸åŒä¾†æºçš„é ç¨‹è³‡æºçš„è«‹æ±‚ã€‚</p><p>è¦è§£æ±ºæ­¤ç¬¬ä¸€å€‹éŒ¯èª¤ï¼Œæˆ‘å€‘éœ€è¦ç‚ºFlaské…ç½®CORSï¼š</p><pre><code>pipÂ installÂ flask-cors</code></pre><p>ç„¶å¾Œå°‡ CORS æ‡‰ç”¨æ–¼ Flaskï¼š</p><pre><code>fromÂ flaskÂ importÂ Flask,Â make_response,Â request,Â render_template,Â jsonifyfromÂ flask_corsÂ importÂ CORSappÂ =Â Flask(__name__)CORS(app=app)@app.route("/",Â methods=["GET"])defÂ index():Â Â Â Â returnÂ render_template("index.html")@app.route("/get-cookie/",Â methods=["GET"])defÂ get_cookie():Â Â Â Â responseÂ =Â make_response("Here,Â takeÂ someÂ cookie!")Â Â Â Â response.set_cookie(key="id",Â value="3db4adj3d")Â Â Â Â returnÂ response@app.route("/api/cities/",Â methods=["GET"])defÂ cities():Â Â Â Â ifÂ request.cookies["id"]Â ==Â "3db4adj3d":Â Â Â Â Â Â Â Â citiesÂ =Â [{"name":Â "Rome",Â "id":Â 1},Â {"name":Â "Siena",Â "id":Â 2}]Â Â Â Â Â Â Â Â returnÂ jsonify(cities)Â Â Â Â returnÂ jsonify(msg="Ops!")</code></pre><p>ç¾åœ¨å˜—è©¦åœ¨ç€è¦½å™¨æ§åˆ¶æª¯æ‰“é–‹çš„æƒ…æ³ä¸‹å†æ¬¡å–®æ“ŠæŒ‰éˆ•ã€‚åœ¨æ§åˆ¶æª¯ä¸­ä½ æ‡‰è©²çœ‹åˆ°</p><pre><code>Cross-OriginÂ RequestÂ Blocked:Â TheÂ SameÂ OriginÂ PolicyÂ disallowsÂ readingÂ theÂ remoteÂ resourceÂ atÂ http://localhost:5000/api/cities/.Â (Reason:Â CORSÂ headerÂ â€˜Access-Control-Allow-Originâ€™Â missing)</code></pre><p>å„˜ç®¡æˆ‘å€‘çŠ¯äº†åŒæ¨£çš„éŒ¯èª¤ï¼Œä½†é€™æ¬¡çš„ç½ªé­ç¦é¦–æ˜¯ç¬¬äºŒå€‹è·¯ç”±ã€‚</p><p>ä½ å¯ä»¥é€šéæŸ¥çœ‹ â€œNetworkâ€ æ¨™ç±¤ä¸­çš„è«‹æ±‚ä¾†ç¢ºèª,æ²’æœ‰ç™¼é€æ­¤é¡Cookieï¼š</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/9b32b26734f34c2490259a7785b8d6c4><p class=pgc-img-caption></p></div><p>ç‚ºäº†åœ¨ä¸åŒä¾†æºçš„Fetchè«‹æ±‚ä¸­åŒ…å«cookieï¼Œæˆ‘å€‘å¿…é ˆæcredentials æ¨™èªŒï¼ˆé»˜èªæƒ…æ³ä¸‹ï¼Œå®ƒæ˜¯ç›¸åŒä¾†æºï¼‰ã€‚</p><p>å¦‚æœæ²’æœ‰é€™å€‹æ¨™èªŒï¼ŒFetch å°±æœƒå¿½ç•¥ cookieï¼Œå¯ä»¥é€™æ¨£ä¿®å¾©ï¼š</p><pre><code>constÂ buttonÂ =Â document.getElementsByTagName("button")[0];button.addEventListener("click",Â function()Â {Â Â getACookie().then(()Â =&gt;Â getData());});functionÂ getACookie()Â {Â Â returnÂ fetch("http://localhost:5000/get-cookie/",Â {Â Â Â Â credentials:Â "include"Â Â }).then(responseÂ =&gt;Â {Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â returnÂ Promise.resolve("AllÂ good,Â fetchÂ theÂ data");Â Â });}functionÂ getData()Â {Â Â fetch("http://localhost:5000/api/cities/",Â {Â Â Â Â credentials:Â "include"Â Â })Â Â Â Â .then(responseÂ =&gt;Â {Â Â Â Â Â Â //Â makeÂ sureÂ toÂ checkÂ response.okÂ inÂ theÂ realÂ world!Â Â Â Â Â Â returnÂ response.json();Â Â Â Â })Â Â Â Â .then(jsonÂ =&gt;Â console.log(json));}</code></pre><p>credentials: "include" å¿…é ˆåœ¨ç¬¬ä¸€å€‹ Fetch è«‹æ±‚ä¸­å‡ºç¾ï¼Œæ‰èƒ½å°‡Cookieä¿å­˜åœ¨ç€è¦½å™¨çš„Cookie storage ä¸­ï¼š</p><pre><code>fetch("http://localhost:5000/get-cookie/",Â {Â Â Â Â credentials:Â "include"Â Â })</code></pre><p>å®ƒé‚„å¿…é ˆåœ¨ç¬¬äºŒå€‹è«‹æ±‚æ™‚å‡ºç¾ï¼Œä»¥å…è¨±å°‡cookieå‚³è¼¸å›å¾Œç«¯</p><pre><code>Â Â fetch("http://localhost:5000/api/cities/",Â {Â Â Â Â credentials:Â "include"Â Â })</code></pre><p>å†è©¦ä¸€æ¬¡ï¼Œæˆ‘å€‘é‚„éœ€è¦åœ¨å¾Œç«¯ä¿®å¾©å¦ä¸€å€‹éŒ¯èª¤ï¼š</p><pre><code>Cross-OriginÂ RequestÂ Blocked:Â TheÂ SameÂ OriginÂ PolicyÂ disallowsÂ readingÂ theÂ remoteÂ resourceÂ atÂ http://localhost:5000/get-cookie/.Â (Reason:Â expectedÂ â€˜trueâ€™Â inÂ CORSÂ headerÂ â€˜Access-Control-Allow-Credentialsâ€™).</code></pre><p>ç‚ºäº†å…è¨±åœ¨CORSè«‹æ±‚ä¸­å‚³è¼¸cookieï¼Œå¾Œç«¯é‚„éœ€è¦è¨­ç½® Access-Control-Allow-Credentialsæ¨™é ­ã€‚</p><pre><code>CORS(app=app,Â supports_credentials=True)</code></pre><p>è¦é»ï¼šç‚ºäº†ä½¿Cookieåœ¨ä¸åŒä¾†æºä¹‹é–“é€šéAJAXè«‹æ±‚å‚³éï¼Œå¯ä»¥é€™æ¨£åšï¼š</p><ul><li>credentials: "include" ç”¨æ–¼å‰ç«¯çš„ fetch è«‹æ±‚ä¸­</li><li>Access-Control-Allow-Credentials å’Œ Access-Control-Allow-Origin ç”¨æ–¼å¾Œç«¯</li></ul><p>cookieå¯ä»¥é€šéAJAXè«‹æ±‚å‚³éï¼Œä½†æ˜¯å®ƒå€‘å¿…é ˆéµå®ˆæˆ‘å€‘å‰é¢æè¿°çš„åŸŸè¦å‰‡ã€‚</p><h1 class=pgc-h-arrow-right><strong>Cookie çš„ Secure å±¬æ€§</strong></h1><p>Secure å±¬æ€§æ˜¯èªªå¦‚æœä¸€å€‹ cookie è¢«è¨­ç½®äº†Secure=trueï¼Œé‚£éº¼é€™å€‹cookieåªèƒ½ç”¨httpså”è­°ç™¼é€çµ¦æœå‹™å™¨ï¼Œç”¨ http å”è­°æ˜¯ä¸ç™¼é€çš„ã€‚æ›å¥è©±èªªï¼Œcookie æ˜¯åœ¨httpsçš„æƒ…æ³ä¸‹å‰µå»ºçš„ï¼Œè€Œä¸”ä»–çš„Secure=trueï¼Œé‚£éº¼ä¹‹å¾Œä½ ä¸€ç›´ç”¨httpsè¨ªå•å…¶ä»–çš„é é¢ï¼ˆæ¯”å¦‚ç™»éŒ„ä¹‹å¾Œé»æ“Šå…¶ä»–å­é é¢ï¼‰ï¼Œcookieæœƒè¢«é«®é€åˆ°æœå‹™å™¨ï¼Œä½ ç„¡éœ€é‡æ–°ç™»éŒ„å°±å¯ä»¥è·³è½‰åˆ°å…¶ä»–é é¢ã€‚ä½†æ˜¯å¦‚æœé€™æ™‚ä½ æŠŠurlæ”¹æˆhttpå”è­°è¨ªå•å…¶ä»–é é¢ï¼Œä½ å°±éœ€è¦é‡æ–°ç™»éŒ„äº†ï¼Œå› ç‚ºé€™å€‹cookieä¸èƒ½åœ¨httpå”è­°ä¸­ç™¼é€ã€‚</p><p>å¯ä»¥é€™æ¨£è¨­ç½® Secure å±¬æ€§</p><pre><code>response.set_cookie(key="id",Â value="3db4adj3d",Â secure=True)</code></pre><p>å¦‚æœè¦åœ¨çœŸå¯¦ç’°å¢ƒä¸­å˜—è©¦ï¼Œè«‹å¯ä»¥é‹è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸¦æ³¨æ„curlåœ¨æ­¤è™•æ˜¯ä¸é€šéHTTPä¿å­˜cookieï¼š</p><pre><code>curlÂ -IÂ http://serene-bastion-01422.herokuapp.com/get-secure-cookie/Â --cookie-jarÂ -</code></pre><p>ç›¸åï¼Œé€šéHTTPSï¼Œcookie å‡ºç¾åœ¨cookie jarä¸­ï¼š</p><pre><code>curlÂ -IÂ https://serene-bastion-01422.herokuapp.com/get-secure-cookie/Â --cookie-jarÂ -</code></pre><p>cookie jar æ–‡ä»¶ï¼š</p><pre><code>serene-bastion-01422.herokuapp.comÂ Â Â Â Â Â FALSEÂ Â Â /Â Â Â Â Â Â Â TRUEÂ Â Â Â 0</code></pre><p>ä¸è¦è¢«Secureæ¬ºé¨™ï¼šç€è¦½å™¨é€šéHTTPSæ¥å—cookieï¼Œä½†æ˜¯ä¸€æ—¦cookieé€²å…¥ç€è¦½å™¨ï¼Œå°±æ²’æœ‰ä»»ä½•ä¿è­·ã€‚</p><p>å› ç‚ºå¸¶æœ‰ Secure çš„ Cookie ä¸€èˆ¬ä¹Ÿä¸ç”¨æ–¼å‚³è¼¸æ•æ„Ÿæ•¸æ“š.</p><h1 class=pgc-h-arrow-right><strong>Cookie çš„ HttpOnly å±¬æ€§</strong></h1><p>å¦‚æœcookieä¸­è¨­ç½®äº†HttpOnlyå±¬æ€§ï¼Œé‚£éº¼é€šéjsè…³æœ¬å°‡ç„¡æ³•è®€å–åˆ°cookieä¿¡æ¯ï¼Œé€™æ¨£èƒ½æœ‰æ•ˆçš„é˜²æ­¢XSSæ”»æ“Šï¼Œç«Šå–cookieå…§å®¹ï¼Œé€™æ¨£å°±å¢åŠ äº†cookieçš„å®‰å…¨æ€§ï¼Œå³ä¾¿æ˜¯é€™æ¨£ï¼Œä¹Ÿä¸è¦å°‡é‡è¦ä¿¡æ¯å­˜å…¥cookieã€‚</p><blockquote><p>XSS å…¨ç¨±Cross SiteScriptï¼Œè·¨ç«™è…³æœ¬æ”»æ“Šï¼Œæ˜¯Webç¨‹åºä¸­å¸¸è¦‹çš„æ¼æ´ï¼ŒXSSå±¬æ–¼è¢«å‹•å¼ä¸”ç”¨æ–¼å®¢æˆ¶ç«¯çš„æ”»æ“Šæ–¹å¼ï¼Œæ‰€ä»¥å®¹æ˜“è¢«å¿½ç•¥å…¶å±å®³æ€§ã€‚å…¶åŸç†æ˜¯æ”»æ“Šè€…å‘æœ‰XSSæ¼æ´çš„ç¶²ç«™ä¸­è¼¸å…¥(å‚³å…¥)æƒ¡æ„çš„HTMLä»£ç¢¼ï¼Œç•¶å…¶å®ƒç”¨æˆ¶ç€è¦½è©²ç¶²ç«™æ™‚ï¼Œé€™æ®µHTMLä»£ç¢¼æœƒè‡ªå‹•åŸ·è¡Œï¼Œå¾è€Œé”åˆ°æ”»æ“Šçš„ç›®çš„ã€‚å¦‚ï¼Œç›œå–ç”¨æˆ¶Cookieã€ç ´å£é é¢çµæ§‹ã€é‡å®šå‘åˆ°å…¶å®ƒç¶²ç«™ç­‰ã€‚</p></blockquote><p>å¦‚æœæœ‰è¨­ç½® HttpOnly çœ‹èµ·ä¾†æ˜¯é€™æ¨£çš„ï¼š</p><pre><code>Set-Cookie:Â "id=3db4adj3d;Â HttpOnly"</code></pre><p>åœ¨ Flask ä¸­</p><pre><code>response.set_cookie(key="id",Â value="3db4adj3d",Â httponly=True)</code></pre><p>é€™æ¨£ï¼Œcookie è¨­ç½®äº†HttpOnlyå±¬æ€§ï¼Œé‚£éº¼é€šéjsè…³æœ¬å°‡ç„¡æ³•è®€å–åˆ°cookieä¿¡æ¯ã€‚å¦‚æœåœ¨æ§åˆ¶æª¯ä¸­é€²è¡Œæª¢æŸ¥ï¼Œå‰‡document.cookieå°‡è¿”å›ä¸€å€‹ç©ºå­—ç¬¦ä¸²ã€‚</p><p>ä½•æ™‚ä½¿ç”¨HttpOnlyï¼Ÿcookie æ‡‰è©²å§‹çµ‚æ˜¯HttpOnlyçš„ï¼Œé™¤éæœ‰ç‰¹å®šçš„è¦æ±‚å°‡å®ƒå€‘æš´éœ²çµ¦é‹è¡Œæ™‚ JSã€‚</p><h1 class=pgc-h-arrow-right><strong>å¯æ€•çš„ SameSite å±¬æ€§</strong></h1><h1 class=pgc-h-arrow-right><strong>first-party cookie å’Œ third-party cookie</strong></h1><p>æŸ¥çœ‹https://serene-bastion-01422.herokuapp.com/get-cookie/ ä¸­æ‰€æ”œå¸¶çš„ Cookie</p><pre><code>Set-Cookie:Â simplecookiename=c00l-c00k13;Â Path=/</code></pre><p>first-partyæ˜¯æŒ‡ä½ ç™»éŒ„æˆ–ä½¿ç”¨çš„ç¶²ç«™æ‰€ç™¼è¡Œçš„ cookieï¼Œè€Œthird-party cookie å¸¸ç‚ºä¸€äº›å»£å‘Šç¶²ç«™ï¼Œæœ‰ä¾µçŠ¯éš±ç§ä»¥åŠå®‰å…¨éš±æ‚£ã€‚</p><p>æˆ‘å€‘å°‡é€™é¡ Cookie ç¨±ç‚º first-partyã€‚ä¹Ÿå°±æ˜¯èªªï¼Œæˆ‘åœ¨ç€è¦½å™¨ä¸­è¨ªå•è©²URLï¼Œä¸¦ä¸”å¦‚æœæˆ‘è¨ªå•ç›¸åŒçš„URLæˆ–è©²ç«™é»çš„å¦ä¸€å€‹è·¯å¾‘ï¼ˆå‡è¨­Pathç‚º/ï¼‰ï¼Œå‰‡ç€è¦½å™¨æœƒå°‡cookieç™¼é€å›è©²ç¶²ç«™ã€‚</p><p>ç¾åœ¨è€ƒæ…®åœ¨https://serene-bastion-01422.herokuapp.com/get-frog/ä¸Šçš„å¦ä¸€å€‹ç¶²é ã€‚è©²é é¢è¨­ç½®äº†ä¸€å€‹cookieï¼Œæ­¤å¤–ï¼Œå®ƒé‚„å¾https://www.valentinog.com/cookie-frog.jpgè¨—ç®¡çš„é ç¨‹è³‡æºä¸­åŠ è¼‰åœ–åƒã€‚</p><p>è©²é ç¨‹è³‡æºåˆæœƒè‡ªè¡Œè¨­ç½®ä¸€å€‹cookie:</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/1b74edbd458949768cb0dcbf91765f8c><p class=pgc-img-caption></p></div><p>æˆ‘å€‘å°‡é€™ç¨® cookie ç¨±ç‚ºthird-party(ç¬¬ä¸‰æ–¹) Cookieã€‚</p><p><strong>ç¬¬ä¸‰æ–¹ Cookie</strong> é™¤äº†ç”¨æ–¼ CSRF æ”»æ“Šï¼Œé‚„å¯ä»¥ç”¨æ–¼ç”¨æˆ¶è¿½è¹¤ã€‚æ¯”å¦‚ï¼ŒFacebook åœ¨ç¬¬ä¸‰æ–¹ç¶²ç«™æ’å…¥ä¸€å¼µçœ‹ä¸è¦‹çš„åœ–ç‰‡ã€‚</p><pre><code>&lt;imgÂ src="facebook.com"Â style="visibility:hidden;"&gt;</code></pre><p>ç€è¦½å™¨åŠ è¼‰ä¸Šé¢ä»£ç¢¼æ™‚ï¼Œå°±æœƒå‘ Facebook ç™¼å‡ºå¸¶æœ‰ Cookie çš„è«‹æ±‚ï¼Œå¾è€Œ Facebook å°±æœƒçŸ¥é“ä½ æ˜¯èª°ï¼Œè¨ªå•äº†ä»€éº¼ç¶²ç«™ã€‚</p><h1 class=pgc-h-arrow-right><strong>ä½¿ç”¨ SameSite å±¬æ€§</strong></h1><p>Cookie çš„SameSite å±¬æ€§ç”¨ä¾†é™åˆ¶third-party Cookieï¼Œå¾è€Œæ¸›å°‘å®‰å…¨é¢¨éšªã€‚å®ƒå¯ä»¥è¨­ç½®ä¸‰å€‹å€¼ã€‚</p><ul><li>Strict</li><li>Lax</li><li>None</li></ul><p>Strictæœ€ç‚ºåš´æ ¼ï¼Œå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹ Cookieï¼Œè·¨ç«™é»æ™‚ï¼Œä»»ä½•æƒ…æ³ä¸‹éƒ½ä¸æœƒç™¼é€ Cookieã€‚æ›è¨€ä¹‹ï¼Œåªæœ‰ç•¶å‰ç¶²é çš„ URL èˆ‡è«‹æ±‚ç›®æ¨™ä¸€è‡´ï¼Œæ‰æœƒå¸¶ä¸Š Cookieã€‚</p><pre><code>Set-Cookie:Â CookieName=CookieValue;Â SameSite=Strict;</code></pre><p>é€™å€‹è¦å‰‡éæ–¼åš´æ ¼ï¼Œå¯èƒ½é€ æˆéå¸¸ä¸å¥½çš„ç”¨æˆ¶é«”é©—ã€‚æ¯”å¦‚ï¼Œç•¶å‰ç¶²é æœ‰ä¸€å€‹ GitHub éˆæ¥ï¼Œç”¨æˆ¶é»æ“Šè·³è½‰å°±ä¸æœƒå¸¶æœ‰ GitHub çš„ Cookieï¼Œè·³è½‰éå»ç¸½æ˜¯æœªç™»é™¸ç‹€æ…‹ã€‚</p><p>Laxè¦å‰‡ç¨ç¨æ”¾å¯¬ï¼Œå¤§å¤šæ•¸æƒ…æ³ä¹Ÿæ˜¯ä¸ç™¼é€ç¬¬ä¸‰æ–¹ Cookieï¼Œä½†æ˜¯å°èˆªåˆ°ç›®æ¨™ç¶²å€çš„ Get è«‹æ±‚é™¤å¤–ã€‚</p><pre><code>Set-Cookie:Â CookieName=CookieValue;Â SameSite=Lax;</code></pre><p>å°èˆªåˆ°ç›®æ¨™ç¶²å€çš„ GET è«‹æ±‚ï¼ŒåªåŒ…æ‹¬ä¸‰ç¨®æƒ…æ³ï¼šéˆæ¥ï¼Œé åŠ è¼‰è«‹æ±‚ï¼ŒGET è¡¨å–®ã€‚è©³è¦‹ä¸‹è¡¨ã€‚</p><div class=pgc-img><img alt="ã€Œå¿…éœ€çŸ¥é“ã€å¯¦ç”¨ï¼Œå®Œæ•´çš„HTTP cookieæŒ‡å—" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/pgc-image/f8c4f74cd6444e6f9bf8b6f044e6d646><p class=pgc-img-caption></p></div><p>è¨­ç½®äº†Strictæˆ–Laxä»¥å¾Œï¼ŒåŸºæœ¬å°±æœçµ•äº† CSRF æ”»æ“Šã€‚ç•¶ç„¶ï¼Œå‰ææ˜¯ç”¨æˆ¶ç€è¦½å™¨æ”¯æŒ SameSite å±¬æ€§ã€‚</p><p>Chrome è¨ˆåŠƒå°‡Laxè®Šç‚ºé»˜èªè¨­ç½®ã€‚é€™æ™‚ï¼Œç¶²ç«™å¯ä»¥é¸æ“‡é¡¯å¼é—œé–‰SameSiteå±¬æ€§ï¼Œå°‡å…¶è¨­ç‚ºNoneã€‚ä¸éï¼Œå‰ææ˜¯å¿…é ˆåŒæ™‚è¨­ç½®Secureå±¬æ€§ï¼ˆCookie åªèƒ½é€šé HTTPS å”è­°ç™¼é€ï¼‰ï¼Œå¦å‰‡ç„¡æ•ˆã€‚</p><p>ä¸‹é¢çš„è¨­ç½®ç„¡æ•ˆã€‚</p><pre><code>Set-Cookie:Â widget_session=abc123;Â SameSite=None</code></pre><p>ä¸‹é¢çš„è¨­ç½®æœ‰æ•ˆã€‚</p><pre><code>Set-Cookie:Â widget_session=abc123;Â SameSite=None;Â Secure</code></pre><h1 class=pgc-h-arrow-right><strong>Cookies å’Œ èªè­‰</strong></h1><p>èº«ä»½é©—è­‰æ˜¯ web é–‹ç™¼ä¸­æœ€å…·æŒ‘æˆ°æ€§çš„ä»»å‹™ä¹‹ä¸€ã€‚é—œæ–¼é€™å€‹ä¸»é¡Œä¼¼ä¹æœ‰å¾ˆå¤šå›°æƒ‘ï¼Œå› ç‚ºJWTä¸­çš„åŸºæ–¼ä»¤ç‰Œçš„èº«ä»½é©—è­‰ä¼¼ä¹è¦å–ä»£â€œèˆŠçš„â€ã€å¯é çš„æ¨¡å¼ï¼Œå¦‚åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰ã€‚</p><p>ä¾†çœ‹çœ‹ cookie åœ¨é€™è£¡æ‰®æ¼”ä»€éº¼è§’è‰²ã€‚</p><h1 class=pgc-h-arrow-right><strong>åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰</strong></h1><p>èº«ä»½é©—è­‰æ˜¯ cookie æœ€å¸¸è¦‹çš„ç”¨ä¾‹ä¹‹ä¸€ã€‚</p><p>ç•¶ä½ è¨ªå•ä¸€å€‹è«‹æ±‚èº«ä»½é©—è­‰çš„ç¶²ç«™æ™‚ï¼Œå¾Œç«¯å°‡é€šé<strong>æ†‘æ“š</strong>æäº¤ï¼ˆä¾‹å¦‚é€šéè¡¨å–®ï¼‰åœ¨å¾Œè‡ºç™¼é€ä¸€å€‹Set-Cookieæ¨™é ­åˆ°å‰ç«¯ã€‚</p><p>å‹çš„æœƒè©± cookie å¦‚ä¸‹æ‰€ç¤º:</p><pre><code>Set-Cookie:Â sessionid=sty1z3kz11mpqxjv648mqwlx4ginpt6c;Â expires=Tue,Â 09Â JunÂ 2020Â 15:46:52Â GMT;Â HttpOnly;Â Max-Age=1209600;Â Path=/;Â SameSite=Lax</code></pre><p>é€™å€‹Set-Cookieé ­ä¸­ï¼Œæœå‹™å™¨å¯ä»¥åŒ…æ‹¬ä¸€å€‹åç‚ºsessionã€session idæˆ–é¡ä¼¼çš„cookieã€‚</p><p>é€™æ˜¯ç€è¦½å™¨å¯ä»¥æ¸…æ¥šçœ‹åˆ°çš„å”¯ä¸€æ¨™è­˜ç¬¦ã€‚æ¯ç•¶é€šéèº«ä»½é©—è­‰çš„ç”¨æˆ¶å‘å¾Œç«¯è«‹æ±‚æ–°é é¢æ™‚ï¼Œç€è¦½å™¨å°±æœƒç™¼å›æœƒè©±cookieã€‚</p><p>åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰æ˜¯æœ‰ç‹€æ…‹çš„ï¼Œå› ç‚ºå¾Œç«¯å¿…é ˆè·Ÿè¹¤æ¯å€‹ç”¨æˆ¶çš„æœƒè©±ã€‚é€™äº›æœƒè©±çš„å­˜å„²å¯èƒ½æ˜¯ï¼š</p><ul><li>æ•¸æ“šåº«</li><li>åƒ Redis é€™æ¨£çš„éµ/å€¼å­˜å„²</li><li>æ–‡ä»¶ç³»çµ±</li></ul><p>åœ¨é€™ä¸‰å€‹æœƒè©±å­˜å„²ä¸­ï¼ŒRedis ä¹‹é¡æ‡‰å„ªå…ˆæ–¼æ•¸æ“šåº«æˆ–æ–‡ä»¶ç³»çµ±ã€‚</p><p>è«‹æ³¨æ„ï¼ŒåŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰èˆ‡ç€è¦½å™¨çš„æœƒè©±å­˜å„²ç„¡é—œã€‚</p><p>ä¹‹æ‰€ä»¥ç¨±ç‚º<strong>åŸºæ–¼æœƒè©±</strong>çš„æœƒè©±ï¼Œæ˜¯å› ç‚ºç”¨æ–¼ç”¨æˆ¶è­˜åˆ¥çš„ç›¸é—œæ•¸æ“šå­˜åœ¨æ–¼å¾Œç«¯çš„æœƒè©±å­˜å„²ä¸­ï¼Œé€™èˆ‡ç€è¦½å™¨çš„æœƒè©±å­˜å„²ä¸åŒã€‚</p><h1 class=pgc-h-arrow-right><strong>ä½•æ™‚ä½¿ç”¨åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰</strong></h1><p>åªè¦èƒ½ä½¿ç”¨å°±ä½¿ç”¨å®ƒã€‚åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰æ˜¯ä¸€ç¨®æœ€ç°¡å–®ã€å®‰å…¨ã€ç›´æ¥çš„ç¶²ç«™èº«ä»½é©—è­‰å½¢å¼ã€‚é»˜èªæƒ…æ³ä¸‹ï¼Œå®ƒå¯ä»¥åœ¨Djangoç­‰æ‰€æœ‰æµè¡Œçš„webæ¡†æ¶ä¸Šä½¿ç”¨ã€‚</p><p>ä½†æ˜¯ï¼Œå®ƒçš„ç‹€æ…‹ç‰¹æ€§ä¹Ÿæ˜¯å®ƒçš„ä¸»è¦ç¼ºé»ï¼Œç‰¹åˆ¥æ˜¯ç•¶ç¶²ç«™æ˜¯ç”±è² è¼‰å‡è¡¡å™¨æä¾›æœå‹™æ™‚ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œåƒç²˜è²¼æœƒè©±ï¼Œæˆ–è€…åœ¨é›†ä¸­çš„Rediså­˜å„²ä¸Šå­˜å„²æœƒè©±é€™æ¨£çš„æŠ€è¡“æœƒæœ‰æ‰€å¹«åŠ©ã€‚</p><h1 class=pgc-h-arrow-right><strong>é—œæ–¼ JWT çš„èªªæ˜</strong></h1><p><strong>JWT</strong>æ˜¯ JSON Web Tokensçš„ç¸®å¯«ï¼Œæ˜¯ä¸€ç¨®èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œè¿‘å¹´ä¾†è¶Šä¾†è¶Šæµè¡Œã€‚</p><p>JWT éå¸¸é©åˆå–®é å’Œç§»å‹•æ‡‰ç”¨ç¨‹åºï¼Œä½†å®ƒå¸¶ä¾†äº†ä¸€ç³»åˆ—æ–°æŒ‘æˆ°ã€‚æƒ³è¦é‡å°APIé€²è¡Œèº«ä»½é©—è­‰çš„å‰ç«¯æ‡‰ç”¨ç¨‹åºçš„å…¸å‹æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å‰ç«¯å°‡æ†‘è­‰ç™¼é€åˆ°å¾Œç«¯</li><li>å¾Œç«¯æª¢æŸ¥æ†‘è­‰ä½µç™¼å›ä»¤ç‰Œ</li><li>å‰ç«¯åœ¨æ¯å€‹å¾ŒçºŒè«‹æ±‚ä¸Šå¸¶ä¸Šè©²ä»¤ç‰Œ</li></ul><p>é€™ç¨®æ–¹æ³•å¸¶ä¾†çš„ä¸»è¦å•é¡Œæ˜¯ï¼šç‚ºäº†ä½¿ç”¨æˆ¶ä¿æŒç™»éŒ„ç‹€æ…‹ï¼Œæˆ‘å°‡è©²ä»¤ç‰Œå­˜å„²åœ¨å‰ç«¯çš„å“ªå€‹åœ°æ–¹ï¼Ÿ</p><p>å°æ–¼å‰ç«¯é–‹ç™¼ä¾†èªªï¼Œæœ€è‡ªç„¶çš„äº‹æƒ…æ˜¯å°‡ä»¤ç‰Œä¿å­˜åœ¨localStorageä¸­ã€‚ç”±æ–¼è¨±å¤šåŸå› ï¼Œé€™å¾ˆç³Ÿç³•ã€‚</p><p>localStorageå¾ˆå®¹æ˜“å¾ JS ä»£ç¢¼è¨ªå•ï¼Œè€Œä¸”å®ƒå¾ˆå®¹æ˜“æˆç‚º<strong>XSS</strong>æ”»æ“Šçš„ç›®æ¨™ã€‚</p><p>ç‚ºäº†è§£æ±ºæ­¤å•é¡Œï¼Œå¤§å¤šæ•¸é–‹ç™¼äººå“¡éƒ½å°‡<strong>JWT</strong>ä»¤ç‰Œä¿å­˜åœ¨cookieä¸­ï¼Œä»¥ç‚ºHttpOnlyå’ŒSecureå¯ä»¥ä¿è­·cookieï¼Œè‡³å°‘å¯ä»¥å…å—XSSæ”»æ“Šã€‚</p><p>å°‡ SameSite è¨­ç½®ç‚º strict å°±å¯ä»¥å®Œå…¨ä¿è­· JWTå…å—CSRFæ”»æ“Š</p><p>è¨­ç½®ç‚ºSameSite = Strictçš„æ–°SameSiteå±¬æ€§é‚„å°‡ä¿è­·ä½ çš„â€œç†ŸåŒ–â€ JWTå…å—CSRFæ”»æ“Šã€‚ä½†æ˜¯ï¼Œç”±æ–¼SameSite = Strictä¸æœƒåœ¨è·¨åŸŸè«‹æ±‚ä¸Šç™¼é€cookieï¼Œå› æ­¤ï¼Œé€™ä¹Ÿå®Œå…¨ä½¿JWTçš„ç”¨ä¾‹ç„¡æ•ˆã€‚</p><p>é‚£SameSite=Laxå‘¢ï¼Ÿæ­¤æ¨¡å¼å…è¨±ä½¿ç”¨å®‰å…¨çš„HTTPæ–¹æ³•ï¼ˆå³GETï¼ŒHEADï¼ŒOPTIONSå’ŒTRACEï¼‰å°‡ cookieç™¼é€å›å»ã€‚POST è«‹æ±‚ä¸æœƒä»¥ä»»ä½•ä¸€ç¨®æ–¹å¼å‚³è¼¸ cookieã€‚</p><p>å¯¦éš›ä¸Šï¼Œå°‡JWTæ¨™è¨˜å­˜å„²åœ¨cookieæˆ–localStorageä¸­éƒ½ä¸æ˜¯å¥½ä¸»æ„ã€‚</p><p>å¦‚æœä½ ç¢ºå¯¦è¦ä½¿ç”¨JWTè€Œä¸æ˜¯å …æŒä½¿ç”¨åŸºæ–¼æœƒè©±çš„èº«ä»½é©—è­‰ä¸¦æ“´å±•æœƒè©±å­˜å„²ï¼Œå‰‡å¯èƒ½è¦ä½¿ç”¨å¸¶æœ‰åˆ·æ–°ä»¤ç‰Œçš„JWTä¾†ä¿æŒç”¨æˆ¶ç™»éŒ„ã€‚</p><h1 class=pgc-h-arrow-right><strong>ç¸½çµ</strong></h1><p>è‡ª1994å¹´ä»¥ä¾†ï¼ŒHTTP cookieä¸€ç›´å­˜åœ¨ï¼Œå®ƒå€‘ç„¡è™•ä¸åœ¨ã€‚</p><p>Cookiesæ˜¯ç°¡å–®çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½†å¯ä»¥é€šé<strong>Domain</strong>å’ŒPathå°å…¶æ¬Šé™é€²è¡Œæ§åˆ¶ï¼Œå…·æœ‰Secureçš„Cookieï¼Œåªèƒ½é€šé HTTP Sé€²è¡Œå‚³è¼¸ï¼Œè€Œå¯ä»¥ä½¿ç”¨ HttpOnlyå¾ JSéš±è—ã€‚</p><p>ä½†æ˜¯ï¼Œå°æ–¼æ‰€æœ‰é æœŸçš„ç”¨é€”ï¼Œcookieéƒ½å¯èƒ½ä½¿ç”¨æˆ¶æš´éœ²æ–¼æ”»æ“Šå’Œæ¼æ´ä¹‹ä¸­ã€‚</p><p>ç€è¦½å™¨çš„ä¾›æ‡‰å•†å’ŒInternetå·¥ç¨‹ä»»å‹™çµ„ï¼ˆInternet Engineering Task Forceï¼‰å¹´å¾©ä¸€å¹´åœ°è‡´åŠ›æ–¼æé«˜cookieçš„å®‰å…¨æ€§ï¼Œæœ€è¿‘çš„ä¸€æ­¥æ˜¯SameSiteã€‚</p><p>é‚£éº¼ï¼Œä»€éº¼æ‰ç®—æ˜¯æ¯”è¼ƒå®‰å…¨cookieï¼Ÿï¼Œå¦‚ä¸‹å¹¾é»ï¼š</p><ul><li>åƒ…ä½¿ç”¨ HTTPS</li><li>å„˜å¯èƒ½å¸¶æœ‰ HttpOnly å±¬æ€§</li><li>æ­£ç¢ºçš„SameSiteé…ç½®</li><li>ä¸æ”œå¸¶æ•æ„Ÿæ•¸æ“š</li></ul><p>äººæ‰å€‘çš„ <strong>ã€ä¸‰é€£ã€‘</strong> å°±æ˜¯å°æ™ºä¸æ–·åˆ†äº«çš„æœ€å¤§å‹•åŠ›ï¼Œå¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•éŒ¯èª¤å’Œå»ºè­°ï¼Œæ­¡è¿äººæ‰å€‘ç•™è¨€ï¼Œæœ€å¾Œï¼Œè¬è¬å¤§å®¶çš„è§€çœ‹ã€‚</p><hr><p>ä½œè€…ï¼švalentinog è­¯è€…ï¼šå‰ç«¯å°æ™º ä¾†æºï¼švalentinog</p><p>åŸæ–‡ï¼šhttps://gizmodo.com/the-complete-guide-to-cookies-and-all-the-stuff-w-1794247382</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>å¯¦ç”¨</a></li><li><a>HTTP</a></li><li><a>cookie</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=æœç´¢>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>ğŸ”</button></form></section><section class=widget><h3 class=widget-title>æœ€æ–°æ–‡ç«  âš¡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/c8dddaa7.html alt="è»Šé ‚é ç•™å°å­”å¾ˆå¯¦ç”¨ å¥§è¿ªSUVè»Šä¸»å€‘è«‹æ³¨æ„" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/403a0000cf2a8c40c1c6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/c8dddaa7.html title="è»Šé ‚é ç•™å°å­”å¾ˆå¯¦ç”¨ å¥§è¿ªSUVè»Šä¸»å€‘è«‹æ³¨æ„">è»Šé ‚é ç•™å°å­”å¾ˆå¯¦ç”¨ å¥§è¿ªSUVè»Šä¸»å€‘è«‹æ³¨æ„</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html alt=åª½åª½æ•™çš„å‰ªåˆ€é¢åšæ³•ï¼Œç„¡ä¿ç•™åˆ†äº«ï¼Œç°¡å–®åˆå¯¦ç”¨ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/2e3e5ec81da04a70bf4d1fe077acb24c style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/dacdca28.html title=åª½åª½æ•™çš„å‰ªåˆ€é¢åšæ³•ï¼Œç„¡ä¿ç•™åˆ†äº«ï¼Œç°¡å–®åˆå¯¦ç”¨>åª½åª½æ•™çš„å‰ªåˆ€é¢åšæ³•ï¼Œç„¡ä¿ç•™åˆ†äº«ï¼Œç°¡å–®åˆå¯¦ç”¨</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html alt=6å€‹å¯¦ç”¨é›»è·¯åœ–ï¼Œç°¡å–®æ˜“æ‡‚ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d4ccc825dea840e0bccda3481c8a96ce style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a2d512e5.html title=6å€‹å¯¦ç”¨é›»è·¯åœ–ï¼Œç°¡å–®æ˜“æ‡‚ï¼>6å€‹å¯¦ç”¨é›»è·¯åœ–ï¼Œç°¡å–®æ˜“æ‡‚ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f35ba13a.html alt=12å€‹å¯¦ç”¨çš„é›»è·¯åœ–ï¼Œç†Ÿç·´æŒæ¡äº†ä½ å°±æ˜¯åˆç´šé›»å·¥äº† class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/8b97dc8eb0fd4558be06c6528dfe81b4 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f35ba13a.html title=12å€‹å¯¦ç”¨çš„é›»è·¯åœ–ï¼Œç†Ÿç·´æŒæ¡äº†ä½ å°±æ˜¯åˆç´šé›»å·¥äº†>12å€‹å¯¦ç”¨çš„é›»è·¯åœ–ï¼Œç†Ÿç·´æŒæ¡äº†ä½ å°±æ˜¯åˆç´šé›»å·¥äº†</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/03ac1cd8.html alt=11å€‹æœ€å¯¦ç”¨çš„Excelæ±‚å’Œå…¬å¼ï¼Œå„é¡æ±‚å’Œæƒ…æ³éƒ½æœ‰æ¨¡æ¿äº†ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1535796946527b7df391e10 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/03ac1cd8.html title=11å€‹æœ€å¯¦ç”¨çš„Excelæ±‚å’Œå…¬å¼ï¼Œå„é¡æ±‚å’Œæƒ…æ³éƒ½æœ‰æ¨¡æ¿äº†ï¼>11å€‹æœ€å¯¦ç”¨çš„Excelæ±‚å’Œå…¬å¼ï¼Œå„é¡æ±‚å’Œæƒ…æ³éƒ½æœ‰æ¨¡æ¿äº†ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ce42a78b.html alt=å¯¦ç”¨ç¶“æ¿Ÿçš„å°å®¢å»³å…¨æ™¯è²4Kå®¶åº­å½±é™¢æ™’å–® class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fc1376d7a7e34c65b134f37430a33a87 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ce42a78b.html title=å¯¦ç”¨ç¶“æ¿Ÿçš„å°å®¢å»³å…¨æ™¯è²4Kå®¶åº­å½±é™¢æ™’å–®>å¯¦ç”¨ç¶“æ¿Ÿçš„å°å®¢å»³å…¨æ™¯è²4Kå®¶åº­å½±é™¢æ™’å–®</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/9c8d1ac6.html alt=é˜²æ»‘é‚„å¸¶è€ç£¨å±¤çš„æ–°å‹åœ°æ¿ï¼Œçµ•å°å¯¦ç”¨ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/0ee487c89e3543c8ad923577ae6518a7 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/9c8d1ac6.html title=é˜²æ»‘é‚„å¸¶è€ç£¨å±¤çš„æ–°å‹åœ°æ¿ï¼Œçµ•å°å¯¦ç”¨ï¼>é˜²æ»‘é‚„å¸¶è€ç£¨å±¤çš„æ–°å‹åœ°æ¿ï¼Œçµ•å°å¯¦ç”¨ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/db890d60.html alt=2018å¹´åº¦æœ€å…·å¯¦ç”¨åƒ¹å€¼çš„10å€‹å…‰å­¸å¯¦é©—ç¶“é©— class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/f83c6e7c0b204acebb859b60ca4a5cb1 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/db890d60.html title=2018å¹´åº¦æœ€å…·å¯¦ç”¨åƒ¹å€¼çš„10å€‹å…‰å­¸å¯¦é©—ç¶“é©—>2018å¹´åº¦æœ€å…·å¯¦ç”¨åƒ¹å€¼çš„10å€‹å…‰å­¸å¯¦é©—ç¶“é©—</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/f0597b78.html alt=è‡ªæˆ‘ä¿è­·æ—©çŸ¥é“ï¼å¯¦ç”¨ä¹¾è²¨å¹«ä½ æˆ°â€œç–«â€ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/RoyDw4jFfZipnT style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/f0597b78.html title=è‡ªæˆ‘ä¿è­·æ—©çŸ¥é“ï¼å¯¦ç”¨ä¹¾è²¨å¹«ä½ æˆ°â€œç–«â€>è‡ªæˆ‘ä¿è­·æ—©çŸ¥é“ï¼å¯¦ç”¨ä¹¾è²¨å¹«ä½ æˆ°â€œç–«â€</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/67ee75de.html alt=ã€Œå¯¦ç”¨ç‡Ÿå•†æŒ‡å—ã€ä¼æ¥­è¢«åˆ—å…¥ç¶“ç‡Ÿç•°å¸¸åéŒ„ï¼Œè©²å’‹è¾¦ï¼Ÿ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/67ee75de.html title=ã€Œå¯¦ç”¨ç‡Ÿå•†æŒ‡å—ã€ä¼æ¥­è¢«åˆ—å…¥ç¶“ç‡Ÿç•°å¸¸åéŒ„ï¼Œè©²å’‹è¾¦ï¼Ÿ>ã€Œå¯¦ç”¨ç‡Ÿå•†æŒ‡å—ã€ä¼æ¥­è¢«åˆ—å…¥ç¶“ç‡Ÿç•°å¸¸åéŒ„ï¼Œè©²å’‹è¾¦ï¼Ÿ</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e582bbe8.html alt=3ç¨®ä¹¾èŠ±çš„è£½ä½œæ–¹æ³•ï¼Œç°¡å–®åˆå¯¦ç”¨ï¼ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/152998203374031197e03d3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e582bbe8.html title=3ç¨®ä¹¾èŠ±çš„è£½ä½œæ–¹æ³•ï¼Œç°¡å–®åˆå¯¦ç”¨ï¼>3ç¨®ä¹¾èŠ±çš„è£½ä½œæ–¹æ³•ï¼Œç°¡å–®åˆå¯¦ç”¨ï¼</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5b4e3cb5.html alt=5ç¨®è¶…å¯¦ç”¨ä¹¾èŠ±è£½ä½œæ–¹æ³• class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/f60989faa2b94085a8e54e27c5e6975d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5b4e3cb5.html title=5ç¨®è¶…å¯¦ç”¨ä¹¾èŠ±è£½ä½œæ–¹æ³•>5ç¨®è¶…å¯¦ç”¨ä¹¾èŠ±è£½ä½œæ–¹æ³•</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/55a37938.html alt=å¾ˆå¯¦ç”¨çš„è£ä¿®å•ç­”(2) class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/55a37938.html title=å¾ˆå¯¦ç”¨çš„è£ä¿®å•ç­”(2)>å¾ˆå¯¦ç”¨çš„è£ä¿®å•ç­”(2)</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/0d69a860.html alt=ã€Šå¯¦ç”¨çŸ¥è­˜ã€‹ï¼šæ±½è»Šå„éƒ¨ä»¶è‹±æ–‡ç¸®å¯« class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/46e70000a9a334d7255d style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/0d69a860.html title=ã€Šå¯¦ç”¨çŸ¥è­˜ã€‹ï¼šæ±½è»Šå„éƒ¨ä»¶è‹±æ–‡ç¸®å¯«>ã€Šå¯¦ç”¨çŸ¥è­˜ã€‹ï¼šæ±½è»Šå„éƒ¨ä»¶è‹±æ–‡ç¸®å¯«</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1531f919.html alt=è¶…å¯¦ç”¨ï¼50å€‹éå¸¸å¯¦ç”¨çš„PSå¿«æ·éµå‘½ä»¤å¤§å…¨åˆ†äº« class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/6d11d0bcd997456b828eb55bc85fa4dc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1531f919.html title=è¶…å¯¦ç”¨ï¼50å€‹éå¸¸å¯¦ç”¨çš„PSå¿«æ·éµå‘½ä»¤å¤§å…¨åˆ†äº«>è¶…å¯¦ç”¨ï¼50å€‹éå¸¸å¯¦ç”¨çš„PSå¿«æ·éµå‘½ä»¤å¤§å…¨åˆ†äº«</a></li><hr></ul></section><section class=widget><h3 class=widget-title>å…¶ä»–</h3><ul class=widget-list><li><a href=TOS.html>ä½¿ç”¨æ¢æ¬¾</a></li><li><a href=CommentPolicy.html>ç•™è¨€æ”¿ç­–</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>è¯çµ¡æˆ‘å€‘</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>æå®¢å¿«è¨Š</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>