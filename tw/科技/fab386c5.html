<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>可視化了解一下？ECharts 4.0最全技術攻略 | 极客快訊</title><meta property="og:title" content="可視化了解一下？ECharts 4.0最全技術攻略 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/7888000304ef1b538617"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fab386c5.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fab386c5.html><meta property="article:published_time" content="2020-11-14T21:06:58+08:00"><meta property="article:modified_time" content="2020-11-14T21:06:58+08:00"><meta name=Keywords content><meta name=description content="可視化了解一下？ECharts 4.0最全技術攻略"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/fab386c5.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>可視化了解一下？ECharts 4.0最全技術攻略</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><p>2018 年 1 月 16 日，百度 EFE團隊正式發佈了旗下知名開源產品 ECharts 的最新大版本 4.0，新版本在產品的性能、功能、易用性等各個方面進行了全面提升，標誌著百度在可視化領域又一突破性里程碑的到來。</p><p>3月 31日，由百度開發者中心主辦、極客邦科技承辦、百度創新中心贊助的第 77期百度技術沙龍邀請了來自百度高級技術經理祖明、百度資深前端研發工程師宿爽、百度高級前端研發工程師張雯莉、百度高級前端研發工程師王俊婷、百度資深前端研發工程師沈毅和百度高級前端研發工程師李德清六位講師，從 ECharts 的產品特性、技術實現、可視化實踐、開源社區建設等四個維度出發，全面介紹如何更好運用 ECharts 來讓用戶洞察數據，為聽眾帶來一場深入瞭解 ECharts的分享盛宴。</p><p>1 ECharts開源之路</p><p>百度高級技術經理祖明做了開場演講，他首先介紹了百度開源的 ECharts項目的發展史，在 2013年 6月 ECharts 1.0 發佈到 2018年 1月 ECharts 4.0 發佈的四年時間裡，ECharts項目累計迭代了 64個版本，Github 關注數達到 26,530，受到了來自業界權威的關注和廣泛好評。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7888000304ef1b538617><p>2013年 6月，ECharts 發佈 1.0版本；2014年 6月，ECharts發佈 2.0版本，在 1.0的基礎上使性能有 3+倍的提升，增加直角系全圖表，支持大規模數據，新增時間軸、儀表盤、漏斗圖、異變地圖並且支持 svg擴展；隨後，團隊根據前端技術發展的趨勢及用戶的需求，對 ECharts整體的技術架構進行了極大的重構優化，在 2016年 1月發佈了 ECharts 3.0，3.0無論在功能上、性能上、包括產品的樣式與交互都有著極大的提升。</p><p>今年的 1月 16日，ECharts 4.0橫空出世，八項新特性，讓產品更上一個臺階，ECharts 4.0 希望打造一款能讓更多的人在更多的場景都能享受到數據可視化帶來的價值，幫助人們探索世界、瞭解真實。</p><p>ECharts 4.0 最大的亮點是帶來了 8 項堪稱“黑科技”的全新特性：</p><ul><li><p>千萬級數據可視化渲染能力</p></li><li><p>SVG + Canvas 雙引擎</p></li><li><p>全新旭日圖</p></li><li><p>數據與樣式分離</p></li><li><p>更扁平的配置項</p></li><li><p>無障礙訪問支持</p></li><li><p>微信小程序支持</p></li><li><p>PowerPoint 插件</p></li></ul><p>ECharts的未來</p><p>近日，全球著名開源社區 Apache基金會宣佈“百度開源的 ECharts項目全票通過進入 Apache孵化器”。這是百度第一個進入國際頂級開源社區的項目，也標誌著百度開源正式進入開源發展的快車道。在未來，ECharts團隊會持續維護，希望有更多的人來加入，為開發者提供更好的體驗。</p><p>2 ECharts 4.0 核心特性解析</p><p>ECharts的成功和廣泛應用，必然離不開其顛覆性的功能設計和技術特徵。ECharts資深研發工程師宿爽和張雯莉以 ECharts 4.0新的技術特徵為起點，介紹新版本在大數據渲染、數據集、跨平臺、無障礙訪問等多個技術特性的使用場景和設計原理。</p><p>大數據量渲染</p><p>大數據量渲染在本文中指的是千到千萬的數據在瀏覽器中的渲染和交互，ECharts4.0在優化這些事情上下了很大的功夫。數據可視化以瀏覽器作為一個重要的輸出方式，但瀏覽器在性能上有一定的限制。主要為以下幾個方面：</p><ul><li><p>程序執行的時長。在瀏覽器裡面，JS的執行會阻塞渲染和用戶交互的響應。</p></li><li><p>內存的佔用。大數據的運算可能會引起瀏覽器崩潰，也有可能會因 GC開銷過大導致運行不流暢。</p></li><li><p>網絡加載。對於百兆千兆的數據，文件體積有可能數十甚至上百 MB，如果在網絡上展示，則不能在數據全部下載完成才開始渲染。</p></li></ul><p>ECharts 對這些做了一系列優化，包括：基於場景特點的優化、程序層面的優化、用戶感官的優化、加載的優化：</p><p>基於場景特點的優化</p><p>以圖形的簡化為例，講述了 ECharts 是如何基於場景特點進行優化。如下圖是一個 K線圖，每個圖形的複雜結構在渲染時會比繪製簡單圖形需要更長的時間，導致大數據量時的交互卡頓。而當實際縮放到一定程度時，將這些圖形簡化成線，則會較大提高渲染效率。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/7889000209c6b0b98aeb><p>程序層面的優化</p><p>主要從程序結構和代碼表達入手，從而優化程序運行效率。</p><p>例如合併路徑，在處理大數據量的時候，主要使用 Canvas。Canvas提供的 API比較底層，需要進行抽象後才能構築複雜的、易維護的應用。ECharts的底層庫 Zrender，用面向對象的方式把被渲染和管理的實體抽象成為圖形元素，每個圖形元素自己負責自己的渲染。抽象的弊端是犧牲了一定性能：渲染時因為每個圖形渲染都要先調用 Canvas API設置樣式，然後構建路徑，頻繁的狀態切換帶來了性能的損失。所以可以對大數據的場景，合併圖形元素，設置一次樣式，構建所有路徑。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7889000209c732371d32><p>另外關於內存的使用，程序的 GC時間過長可能會導致渲染的卡頓。</p><p>如下面的截圖，瀏覽器花了 5毫秒的時間進行了 10兆的 Minor GC，時間聽起來不長，實際上如果能保證不卡頓，每一幀的允許時間只有幾十毫秒，那麼 GC消耗的時間就比較可觀了。優化手段，可以是重用對象，減少老生代大對象的頻繁回收。也可以使用 Typed Array或定長 Array，從而降低內存佔用、減少 reallocation。但是帶來的麻煩就是，需要自己管理 array length、擴容、以及手動把多維度數組降為一維。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/788a000006a188b4971e><p>因此，程序層級的優化是通用的，但是會導致可讀性的破壞，程序魯棒性的降低，所以，這種優化只在必要時使用。</p><p>用戶感觀的優化</p><p>看如下 ECharts3的渲染流程圖，最左邊是原始的數據，經過從左到右的過程，進行處理數據，佈局，渲染，最後畫到屏幕上面。如果出現了交互，就需要重新佈局，重新渲染，重走這個過程。在大數據下，整體流程全走完的時間是很可觀的。當時間難於減少時，經常的思路就是流，或者說漸進增量的渲染。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/78870005df764b5fb7f0><p>如下是 ECharts4的一個管線圖，最左邊是原始數據，會被 ECharts自動分片，每一個 Chunk從左到右走完整的渲染流程，走完後直接在 SVG或者 Canvas中被渲染出來。然後按時間線往下，下一個 Chunk繼續走。這樣將任務分片進行而非整塊阻塞，使用戶覺得並沒有卡頓。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7884000d943c510f4bb6><p>數據加載的優化</p><p>對於百兆千兆的數據，文件體積有可能數十甚至上百 MB。</p><p>優化的手段，首先是可以使用 Typed Array直接存成二進制文件而非文本文件，這樣能極大的壓縮數據文件的體積。ECharts已支持直接使用 Typed Array傳入數據。</p><p>另外，如果在網絡上展示，不宜在數據全部下載完成才開始渲染，ECharts支持了增量渲染後，使用者可以將文件分片加載，加載的文件直接傳入 ECharts進行渲染。</p><p>數據集</p><p>數據集為數據輸入方式提供了一個新的選項：直接傳入二維表（二維數組或者對象數組）形式的數據，然後通過配置視覺映射（即，哪些行哪些列映射到哪些軸、顏色等）來得到可視化結果。這比較符合數據可視化製作和探索的操作思路：基於一份數據，改變映射規則，發現信息。這也方便了數據和樣式的分別管理，從而易於程序開發。</p><p>跨平臺圖形接口</p><p>什麼是跨平臺的圖形接口？</p><p>對於一個 2D的圖形接口而言，通常包括矩形、圓形、路徑等這樣一些圖形元素，而圖形元素又包括屬性，並且圖形元素和元素之間可以進行相互的組合，進行遮罩處理等。我們說 ECharts支持跨平臺，指的是哪些平臺呢？我們考慮了以下幾個方面：首先是瀏覽器，瀏覽器是基於不同的方式進行渲染的，比如 Canvas，SVG，VML，這樣的場景下不同的分辨率我們可能希望使用不同的佈局方式，通過響應式的方式使得空間的利用更加合理。對於特殊平臺，比如說像服務端的渲染以及微信小程序端，也對它進行了兼容。除此之外，還對盲人使用的朗讀設備進行無障礙訪問的設置。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/788a000006a9ed90779f><p>為什麼需要跨平臺的圖形接口？</p><p>對於用戶，他其實並不關心這個圖表是用 Canvas做的，還是 SVG做的。對他而言，良好的體驗才是最重要的，他只希望能夠看到正常的圖表，並且有良好體驗的圖形渲染結果。至於這個圖形是如何渲染的，他並不關心。而對於開發者而言，他則需要將所有的平臺一一實現。</p><p>基於這樣的場景，就需要對不同的平臺進行兼容，並且不同的平臺有些設備存在一些性能上的差異。</p><p>ECharts解決方案——ZRender 提供三種渲染器</p><p>ECharts使用的是 ZRender底層渲染器。ZRender提供了三種渲染器，分別是 Canvas，SVG和 VML。它對上提供了一種渲染平臺無關的圖形接口，對下封裝兼容不同平臺的實現算法。</p><p>1、如何支持多種渲染方式？</p><p>百度高級前端工程師羨轍舉例說明。首先聲明一個矩形，只需要告訴它 X座標，Y座標，寬度以及高度信息，它的渲染引擎就會根據具體的渲染平臺去做不同的渲染底層的實現，底層是一個叫路徑代理 PathProxy的類，它會負責記錄這個底層的繪製指令。根據不同的渲染器，底層進行不同的實現。通過這樣的一種方式，不但可以使用一種統一的方式，還可以對於不同的渲染器進行渲染。它還有一個好處是，假設使用 Web Worker進行批量化渲染，也可以根據這個數組實現渲染。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7884000d943f07d712a6><p>2、如何支持事件處理</p><p>為了不同的渲染器有相同的事件處理機制，我們對整個圖表容器綁定了事件。也就是說，對於 SVG、VML 而言，我們不對其 DOM 樹下的每個元素綁定事件。這樣就能和 Canvas 有一套統一的事件處理機制。</p><p>在判斷事件將被哪個圖形元素響應的時候，我們會反向循環渲染列表，也就是先判斷鼠標是否在位於屏幕前面的圖形內。判斷的時候，會先將鼠標座標變換到圖形座標系。這是因為圖形可能是經過平移旋轉縮放的，甚至圖形與圖形之間還可能有組合的變換。將鼠標變換到圖形座標系後，我們就可以知道兩者的相對關係，然後先根據包圍盒做粗略的判斷，再根據路徑做精確的判斷。如果鼠標在該圖形內，則讓這個圖形進行事件分發與冒泡，如果不在，則對位於屏幕後方的元素一一判斷。</p><p>3、SVG渲染如何部分更新</p><p>Canvas 在渲染的時候會完全重繪，但是它的效率很高。而對於 SVG 而言，比如有一千個點的散點圖，在 DOM 中就有一千個對應的節點。如果每一幀都需要將所有 DOM 元素刪除再重新添加，那麼效率是很低的。</p><p>因此，我們維護一個渲染對象列表，每幀將新的渲染對象列表與上一幀的進行 diff，獲得新增、修改、刪除的渲染對象列表，再根據列表對 DOM 相關節點進行調整。</p><p>4、SVG渲染如何優化效率</p><p>以漸變為例，採用複用漸變定義的實現方式</p><ul><li><p>定義一個 SVG 中</p></li><ul><li><p>漸變、遮罩、陰影等繼承該類</p></li></ul><li><p>每一個漸變對象共享一個</p></li><li><p>更新渲染對象的時候</p></li><ul><li><p>檢查漸變對象是否生成過 DOM 節點</p></li></ul></ul><p>如果有，則將 fill 或 stroke 設為該 DOM id 對應的 url</p><p>如果沒有，則生成一個新的 DOM，並在漸變對象中引用</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/788a000006a7777b34de><p>更新渲染對象的時候</p><ul><li><p>渲染前將所有漸變標記為未被使用</p></li><li><p>新增或更新對象時，如果有漸變，將其標記為已使用</p></li><li><p>更新漸變屬性（顏色、位置等）</p></li><li><p>渲染後未被使用的漸變 DOM 將從</p></li></ul><p>ECharts解決方案——響應式設計支持</p><p>ECharts支持三種定位方式：</p><p>像素、百分比、位置描述定位</p><p>除此之外 ECharts還實現了一種響應式的佈局方式，也就是可以將圖表在不同分辨下，使用不同的配置以及佈局。這個是如何實現的，看下方右邊這張圖，它由兩部分組成，一個是 baseOption，一個是 media。baseOption說的是對所有分辨率都會採用的配置項，而 media是一個數組，它的每一項包括代表了一個分辨率的配置情況。每一項包括一個 query和一個 option，query是對每一個分辨率採取這個配置，option是在這個分辨率下使用哪個配置項。query可以包括它的寬度，高度以及長寬比，並且可以使用最大最小值。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/78870005df80a6e39e79><p>ECharts解決方案——特殊平臺及特殊設備</p><p>特殊平臺的處理</p><ul><li><p>判斷平臺</p></li><li><p>兼容特定方法</p></li></ul><p>無障礙訪問</p><ul><li><p>根據圖表內容生成描述</p></li><li><p>提供模板供開發者修改</p></li></ul><p>對於盲人朗讀設備使用的無障礙訪問，W3C制定了無障礙互聯網應用規範集的標準。它的目的就是使網頁內容和應用能夠被更多的殘障人士訪問。對於 ECharts而言，希望實現的效果是根據一張圖，生成關於這個圖的數據，並且這個描述不是用戶寫的，而是根據它的配置項來自動生成的。它會綁定在一個屬性 aria-label 上，這個屬性會被盲人的朗讀設備識別並且進行朗讀。但是也會遇到很多難點：不同圖表類型的描述方式不同、不同數量、不同形式數據的描述、生成的描述需符合語法規範、需要簡明扼要地表達圖表內容以及需要支持不同語言。那最終是怎麼實現的呢？ECharts實現了一套基於模板塊的方法，對於不同的圖表類型、數據量、數據形式使用不同的模板，不同的語言也可以由用戶自定義模板。</p><p>3 ECharts教你如何選擇和設計你的圖表</p><p>基於可視化理論以及 ECharts的數據可視化設計規範和項目經驗，百度高級前端研發工程師王俊婷為大家詳細的闡述瞭如何根據不同需求及目的來選擇正確的可視化圖表類型，以及如何正確合理的使用圖表來展現數據。結合實際行業案例總結了數據可視化作品設計的方法和原則，從而幫助大家獲得更好的數據展現效果。</p><p>選擇合適的圖表</p><p>圖表是為數據服務的，數據類型決定了可選擇的圖表類型。我們首先要從數據本身入手，選擇可滿足其展示需求的圖表類型。按照每個圖表類型的功能及適合的數據類型，將圖表分為比較、關係、佔比、分佈、趨勢五大類，並且對每個功能類型所對應的圖表做了總結展示。</p><p>聚焦重點</p><p>利用一些技術和設計手段，讓用戶的注意力集中在可視化作品中最重要的區域，可以利用使用對比色、使用不同的形狀、位置的變化、添加動效等手段來集中強調關鍵數據。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7884000d9446b6259e0d><p>合理適度</p><p>要儘量避免在可視化圖表內注入太多雜亂沒有意義的東西。例如避免過多的圖形元素，避免多度的設計，並且要避免使用不恰當的方式展示過多的數據造成的數據無法清晰地解讀。</p><p>保證可視化作品的空間平衡</p><p>考慮數據是以一個怎樣的形式呈現在圖表上的，要儘量注意可視化的設計空間被有效平衡地利用，儘量保證重要的元素在中心區域，保證圖表內元素尺寸大小合理，圖表元素的間隔適當。</p><p>例如，柱狀圖柱子間的合理的寬度和間隙應該是單個柱子的寬度不小於柱間間隙的兩倍。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7888000304fc03d74d66><p>遵循習慣與常識</p><p>在使用圖標展示數據時，要遵循一些視覺習慣來擺放或排列數據，進而讓用戶可以更正確迅速的解讀數據，並且要避免一些違背常識的數據展示方式。</p><p>利用情感共鳴和語義共鳴</p><p>顏色是可以用來傳達不同情感的，所以在可視化中針對不同的數據主題選擇其匹配的顏色，例如甜品的售量佔比，使用吻合甜品及甜品用戶群體的的顏色，可以恰當喚起用戶的情感共鳴。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/7889000209dec4ad00e6><p>而顏色的語音共鳴則是基於“斯魯普效應”研究，給有固定顏色的事物匹配具有語義共鳴的顏色，能有效地提升閱讀效率及準確度。例如展示獼猴桃、香蕉、橙子、草莓四種水果的銷量，我們分別選擇綠色、黃色、橙色、紅色四個與我們對水果顏色的認知一致的顏色。來展現四種水果的銷量，我們只需要根據顏色就能快速定位閱讀數據。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/7885000bc5b8f4c7d569><p>注意圖表會“騙人”</p><p>在製作和閱讀可視化作品時，要注意避免不當的數據展示方式誤導了用戶對數據錯誤的解讀。</p><p>總結:</p><p>以上內容依次從指導如何選擇合適的圖表，如何獲取更好的數據展示的方法，怎樣利用用戶的心理和用戶習慣，總結的一些更好的數據展示，更好的提升用戶體驗進而更好地解讀數據的方法和建議。這些建議和技巧對於日後正確的選擇及設計可視化作品有很多指導意義。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/7889000209d836e7d8d4><p>主題配色</p><p>除此之外，王俊婷還分享了 ECharts 在設計主題配色時的寶貴經驗。一般的數據系列需要用到五到六種顏色的，而為了滿足絕大多數的使用場景，ECharts顏色需要要提供到八到十二種顏色，滿足大多數的需求。並且考慮到不同的數據系列數量，為了獲得更好的展示方式，在與配色方案一致的基礎上，建議依次提供相應的九色方案、六色配色方案。並且還要提供冷色調，暖色調。以及用來表示數據的增量變化的漸變色。</p><p>需要特別注意的一點是視覺障礙的用戶群體需求，我們要保證可視化方案以及可視化作品，讓這一部分有視覺障礙的群體能夠準確無誤的去閱讀。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p9.pstatp.com/large/78860005e715c532cdb6><p>另外，王俊婷還展示了顏色過於接近的一些不合理案例。例如第一種數據系列的顏色過於接近，導致無法辨識某一個單獨的數據系列。第二種數據的系列和背景色過於接近，數據本身不容易突出。第三種是座標軸、表現標題、軸線和背景色過於接近，不好識別具體的數據的大小。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/788a000006b59a239255><p>因此，建議可視化的顏色的選擇時明度跨度要大。明度與色調跨度越大，就能承載越多的數據。</p><p>而針對某些特殊行業、民族、宗教的數據展示，例如股票數據的展示，紅色和綠的都是有特殊含義的。因此在顏色等元素的使用上，要保證嚴格遵循其行業、民族或宗教等特點，恰當合理的展示數據。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/78870005df90ce7385b9><p>4 WebGL給 ECharts 帶來了什麼</p><p>這幾年 WebGL 已經越來越普及，百度資深前端研發工程師沈毅分享在 ECharts GL 中 WebGL 的嘗試，其中重點介紹 ECharts GL 的底層 WebGL 框架 ClayGL，以及對未來的一些規劃。</p><p>ClayGL</p><p>ClayGL是 ECharts GL的底層圖形引擎，是一個漸進式的高性能 WebGL開發框架。ClayGL易於使用，提供了非常豐富的功能能夠讓大家用最少的代碼去快速的打造 3D的應用，基於微內核機制可以保證最小的打包體積足夠小，可擴展至高質量的渲染。</p><p>易於使用</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/78870005df9378591924><p>這段代碼加上空行和註釋總共只有 19 行，就加載了一個有跳舞的機器人模型，創建了一個帶燈光，陰影和動畫的 3D應用</p><p>ClayGL核心模塊的抽象</p><p>作為一個通用框架，ClayGL 需要面向各種場景的需求，比如實現一個像 ECharts GL 這樣的可視化庫，但是不同場景之間可能用到的功能完全不一樣，比如可視化可能就不需要那些三維模型加載的模塊。</p><p>ClayGL 中對核心模塊做了抽象，並把這些核心模塊與那些更面向場景的模塊做了解耦。</p><p>ClayGL 中的核心功能包括：</p><ul><li><p>Shader, Attribute Buffer 等 GPU 資源管理</p></li><li><p>渲染管理</p></li><ul><li><p>保證繪製的高效</p></li></ul><li><p>數學庫</p></li><ul><li><p>可以做矩陣、向量、包圍盒的計算</p></li></ul></ul><p>WebGL 是一個狀態機的接口，大部分 WebGL 的接口都是在創建和提交上述 GPU 資源，管理繪製的狀態等等，這種狀態機的接口非常複雜，囉嗦，繪製效果一複雜就會很難管理狀態。經常我們寫完一大段代碼之後瀏覽器刷新一看就什麼東西都沒有，還沒有報錯，於是只能一行一行去過代碼看哪裡出了問題。</p><p>ClayGL最首要的任務就是解決這些資源和狀態管理的問題。例如下 main代碼繪製了一個三角形，最上面一行是通過 ES6 語法引入一些必要的模塊，比如像渲染器。然後是創建一個渲染器，這個渲染器主要負責整個渲染的管理。接下來的 Geometry 負責所有頂點數據的管理，比如說頂點的位置等。再下面的 Material 和 Shader 管理了頂點著色器和像素著色器的代碼，以及提供給外面的一些 uniform。最後一行就是把這些東西都提交給整個渲染器，讓渲染器去負責各種瑣碎的事情，把圖形畫出來。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p3.pstatp.com/large/78870005dfa0dbbfcede><p>最後通過 Webpack 4 打包的代碼 gzip 之後只有 22k，對比 THREE.js 打包後有上百 K 的體積。</p><p>最常見場景的整合 - App3D</p><p>對於很多想要開箱即用的 3D 應用來說，只有上述的核心模塊是遠遠不夠的，ClayGL 提供了很對功能模塊去快速解決場景中的具體問題，比如模型加載，陰影，攝像機控制，內置材質，骨骼動畫等等，其中 App3D 是針對我們常見場景對這些模塊做的一個整合。上面機器人模型的加載就使用到了 App3D 模塊。它提供了下面這些</p><ul><li><p>管理整個應用的循環</p></li><li><p>GPU 資源的自動回收</p></li><li><p>鼠標事件的檢測和管理</p></li><li><p>更方便的創建場景物體，燈光，攝像機</p></li><li><p>Promisify 的紋理，模型加載接口</p></li><li><p>內置 PBR 材質</p></li><li><p>Cubemap Prefilter</p></li></ul><p>等等的功能區幫助開發者更爽的去開發一個 3D 應用。</p><p>ClayGL Advanced Renderer</p><p>為了讓渲染出的畫面可以有更豐富的光影、更豐富的材質、更養眼的顏色、更真實的鏡頭以及更平滑的畫面。ClayGL 提供了 Advanced Renderer。下面是使用 Advanced Renderer 渲染的展示各種材質的材質球的畫面。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7884000d945c429f4ce6><p>5 VisualDL — ECharts 與深度學習</p><p>VisualDL 是百度發佈的深度學習可視化工具，它可以通過可視化的方法將模型訓練過程中的各個參數以及計算的數據流圖（computation graph）實時地展現出來，以幫助模型訓練者更好地理解、調試、優化模型。百度高級前端研發工程師李德清結合 VisualDL 項目的實踐經驗，介紹深度學習領域是如何使用可視化來解決問題的。</p><p>VisualDL</p><p>VisualDL 主要解決深度學習訓練過程的“黑盒化”這一特性，它使用可視化的方式幫助模型訓練者理解、調試模型結構，並且可視化模型訓練過程中各種超參數的變化。</p><p>VisualDL的四大功能</p><p>Scalar</p><p>在模型訓練的時候，可將訓練過程中產生的各種數值信息以折線圖的形式展現出來，方便觀察參數的整體變化趨勢，並且能在同一個可視化視圖中呈現多條折線，方便用戶對比分析多個參數。</p><p>如下圖是一個 Scalar 界面，上面包含了一個篩選的功能，因為一個大的模型可能會有一千多層，所以涉及到的參數會非常多，用戶可能會只想看錯誤率或者準確率，VisualDL因此提供了一個篩選的功能。另外還有平滑（smooth）功能，將訓練初期的噪聲參數值過濾掉。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7889000209ebf46b04da><p>Graph</p><p>幫助用戶理解、調試深度學習模型的網絡結構。Graph 支持 ONNX，也就間接支持不同深度學習框架的模型結構可視化功能，便於用戶排查網絡結構配置錯誤，幫助理解網絡結構。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/7889000209fb14015bab><p>Image</p><p>用戶可輕鬆查看輸入圖片數據樣本的質量，也可以方便地查看訓練的中間結果，例如卷積層的結果或者 GAN生成的圖片等。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/78860005e71f6ac3d7d3><p>Histogram</p><p>Histogram 主要用來可視化參數隨時間和訓練次數變化的分佈情況，如下圖所示。</p><img alt="可視化了解一下？ECharts 4.0最全技術攻略" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/5b2600090c14f959e3aa><p>VisualDL的未來</p><p>在未來，VisualDL 會實現 Interactive Graph，還會加上模型的可解釋性，音頻可視化，文本可視化等。同時，ECharts 和 PaddlePaddle 的合作，將在深度學習開源領域持續發力，打造更豐富的可視化工具生態，為開發者提供真真切切的實用幫助。</p></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>可視化</a></li><li><a>ECharts</a></li><li><a>4.0</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/7739dc7a.html alt=Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5d4a0000046e1bea8b90 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7739dc7a.html title=Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？>Python數據可視化Matplotlib，如何在一副圖像中顯示多組柱形圖？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8ad40b08.html alt="工業4.0 海外併購 浙江雙“龍”騰飛" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/1529826662890d48f475874 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8ad40b08.html title="工業4.0 海外併購 浙江雙“龍”騰飛">工業4.0 海外併購 浙江雙“龍”騰飛</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8182c7ef.html alt=加速新基建，優鍩科技的數字孿生可視化運營平臺迎來最好時代 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/57b433f28912474b8f051f552e2728d9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8182c7ef.html title=加速新基建，優鍩科技的數字孿生可視化運營平臺迎來最好時代>加速新基建，優鍩科技的數字孿生可視化運營平臺迎來最好時代</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/df53d8fc.html alt="可視化在線繪圖引擎 Topology" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/4904a8e500d04576a068ffc81201f9af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/df53d8fc.html title="可視化在線繪圖引擎 Topology">可視化在線繪圖引擎 Topology</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8fc4f50d.html alt=這些讓人驚豔的數據可視化工具，各個都好用！還不趕緊收藏起來？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/cc68ade3fb8b4f52b79ea84252e967a6 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8fc4f50d.html title=這些讓人驚豔的數據可視化工具，各個都好用！還不趕緊收藏起來？>這些讓人驚豔的數據可視化工具，各個都好用！還不趕緊收藏起來？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/982b53c7.html alt=用於可視化定量檢測鎘離子的熒光試紙技術研究獲進展 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/RyD2JwJ84YgKny style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/982b53c7.html title=用於可視化定量檢測鎘離子的熒光試紙技術研究獲進展>用於可視化定量檢測鎘離子的熒光試紙技術研究獲進展</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bd8aafc5.html alt=5G助力分佈式，遠程可視化管控高效可期 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/fcbe139fdab9439a995e1c5ff9189584 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bd8aafc5.html title=5G助力分佈式，遠程可視化管控高效可期>5G助力分佈式，遠程可視化管控高效可期</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7bac74d8.html alt="USB 4.0 技術來了，每秒 40Gbps 的數據傳輸速度" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/e95ecbd6d0684d41a6f7d053ece01757 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7bac74d8.html title="USB 4.0 技術來了，每秒 40Gbps 的數據傳輸速度">USB 4.0 技術來了，每秒 40Gbps 的數據傳輸速度</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/4355449d.html alt=R中的數據表可視化工具——DT包 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9f0f614d2a204747b3d7ae56d70358f9 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/4355449d.html title=R中的數據表可視化工具——DT包>R中的數據表可視化工具——DT包</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/8895f05b.html alt=Python數據可視化Matplotlib，如何改變柱狀圖中柱體寬度及顏色？ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/5e86000416e5b4683dfb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/8895f05b.html title=Python數據可視化Matplotlib，如何改變柱狀圖中柱體寬度及顏色？>Python數據可視化Matplotlib，如何改變柱狀圖中柱體寬度及顏色？</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/6bcd4103.html alt=【視頻下載】可視化交底-冠樑、砼支撐及擋土牆篇 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/6bcd4103.html title=【視頻下載】可視化交底-冠樑、砼支撐及擋土牆篇>【視頻下載】可視化交底-冠樑、砼支撐及擋土牆篇</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5f855877.html alt=產品戰略丨中樑控股4.0住宅產品全面提升產品力 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/96bc36855e3348dbaf2ec410a7051fa3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5f855877.html title=產品戰略丨中樑控股4.0住宅產品全面提升產品力>產品戰略丨中樑控股4.0住宅產品全面提升產品力</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1031a719.html alt=科技賦能居住匠心，中樑4.0「WEI生活」美好初現 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/fa25c43236f444cba27b1d4330044ada style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1031a719.html title=科技賦能居住匠心，中樑4.0「WEI生活」美好初現>科技賦能居住匠心，中樑4.0「WEI生活」美好初現</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cb7a3bf8.html alt=MIT、浙大等打造AutoML可視化工具：模型自選、超參數自調 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d8c6ee79db484968b50d09ae74687f5a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cb7a3bf8.html title=MIT、浙大等打造AutoML可視化工具：模型自選、超參數自調>MIT、浙大等打造AutoML可視化工具：模型自選、超參數自調</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/fce8edc3.html alt=程序員工具：可視化的Gizp壓縮效率 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ae65f0e26b6e4d41ab69de429e92033a style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/fce8edc3.html title=程序員工具：可視化的Gizp壓縮效率>程序員工具：可視化的Gizp壓縮效率</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>