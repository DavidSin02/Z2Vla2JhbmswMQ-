<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>Java集合類根接口：Collection 和 Map的深入瞭解 | 极客快訊</title><meta property="og:title" content="Java集合類根接口：Collection 和 Map的深入瞭解 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="https://p1.pstatp.com/large/pgc-image/e6b0b352d7b44345afe8b4d5ec473a7b"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e7%a7%91%e6%8a%80/fd963681.html><link rel=canonical href=https://geekbank.cf/tw/%e7%a7%91%e6%8a%80/fd963681.html><meta property="article:published_time" content="2020-11-14T21:05:53+08:00"><meta property="article:modified_time" content="2020-11-14T21:05:53+08:00"><meta name=Keywords content><meta name=description content="Java集合類根接口：Collection 和 Map的深入瞭解"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E7%A7%91%E6%8A%80/fd963681.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>Java集合類根接口：Collection 和 Map的深入瞭解</h1></header><date class="post-meta meta-date">2020-11-14</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E7%A7%91%E6%8A%80.html>科技</a></span></div><div class=post-content><div><h1><strong>前言</strong></h1><p>在前文中我們瞭解了幾種常見的數據結構，這些數據結構有著各自的應用場景，並且被廣泛的應用於編程語言中，其中，Java中的集合類就是基於這些數據結構為基礎。</p><p>Java的集合類是一些非常實用的工具類，主要用於存儲和裝載數據 (包括對象)，因此，Java的集合類也被成為容器。在Java中，所有的集合類都位於java.util包下，這些集合類主要是基於兩個根接口派生而來，它們就是 <strong>Collection</strong>和 <strong>Map</strong>。</p><h1><strong>Collection接口</strong></h1><p>Collection派生出三個子接口，Set代表不可重複的無序集合、List代表可重複的有序集合、Queue是java提供的隊列實現，通過它們不斷的擴展出很多的集合類，例如HashMap、ArrayList、LinkedList、Deque等，其分佈圖如下：</p><div class=pgc-img><img alt="Java集合類根接口：Collection 和 Map的深入瞭解" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/e6b0b352d7b44345afe8b4d5ec473a7b><p class=pgc-img-caption></p></div><p>作為最基本的兩個根接口之一，Collection提供了很多的基礎方法，供它的子類調用。下面是Collection接口的源碼：</p><pre>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; { int size(); boolean isEmpty(); boolean contains(Object var1); Iterator&lt;E&gt; iterator(); Object[] toArray(); &lt;T&gt; T[] toArray(T[] var1); boolean add(E var1); boolean remove(Object var1); boolean containsAll(Collection&lt;?&gt; var1); boolean addAll(Collection&lt;? extends E&gt; var1); boolean removeAll(Collection&lt;?&gt; var1); default boolean removeIf(Predicate&lt;? super E&gt; var1) { Objects.requireNonNull(var1); boolean var2 = false; Iterator var3 = this.iterator(); while(var3.hasNext()) { if (var1.test(var3.next())) { var3.remove(); var2 = true; } } return var2; } boolean retainAll(Collection&lt;?&gt; var1); void clear(); boolean equals(Object var1); int hashCode(); default Spliterator&lt;E&gt; spliterator() { return Spliterators.spliterator(this, 0); } default Stream&lt;E&gt; stream() { return StreamSupport.stream(this.spliterator(), false); } default Stream&lt;E&gt; parallelStream() { return StreamSupport.stream(this.spliterator(), true); }}</pre><p>從源碼可以看出，裡面有很多方法是針對集合的基礎操作，例如添加，刪除，查詢。例如：</p><ul><li>int size() 獲取元素個數</li><li>boolean isEmpty() 是否個數為 0</li><li>boolean contains(Object element) 是否包含指定元素</li><li>boolean add(E element) 添加元素，成功時返回 true</li><li>boolean remove(Object element) 刪除元素，成功時返回 true</li><li>Iterator&lt;E> iterator() 獲取迭代器</li></ul><p>還有一些操作整個集合的方法：</p><p>boolean containsAll(Collection&lt;?> c)</p><p>是否包含指定集合 c 的全部元素</p><p>boolean addAll(Collection&lt;? extends E> c)</p><p>添加集合 c 中所有的元素到本集合中，如果集合有改變就返回 true</p><p>boolean removeAll(Collection&lt;?> c)</p><p>刪除本集合中和 c 集合中一致的元素，如果集合有改變就返回 true</p><p>boolean retainAll(Collection&lt;?> c)</p><p>保留本集合中 c 集合中兩者共有的，如果集合有改變就返回 true</p><p>void clear()</p><p>刪除所有元素</p><p>值得說明的是，在jdk1.8之後，Collection 接口還提供了從集合獲取連續的或者並行流的方法：</p><p>Stream&lt;E> stream() 在這個集合上返回一個順序流 ，單線程</p><p>Stream&lt;E> parallelStream() 在這個集合上返回一個並行的代碼流 ，多線程</p><p>Stream相當於高級版本的iterator，可以對集合做比較，分類，甚至是過濾等操作，一般是結合lambda表達式來使用，這樣會使代碼變得更加簡潔 (有人說會更難理解，這個仁者見仁) ，下面舉幾個簡單的例子：</p><p>1、使用順序流來過濾掉集合中為 “aaa” 的元素並做輸出：</p><pre>List&lt;String&gt; list = Arrays.asList("aaa", "bbb", "ccc");list.stream().filter(e -&gt; !e.contains("aaa")) .forEach(e -&gt; System.out.println(e));</pre><p>2、使用並行流來操作集合：</p><pre>List&lt;String&gt; list = Arrays.asList("aaa", "bbb", "ccc");list.parallelStream().filter(e -&gt; !e.contains("aaa")) .forEach(e -&gt; System.out.println(e));</pre><p>當使用順序流去遍歷時，每個item讀完後再讀下一個item。</p><p>而使用並行流去遍歷時，集合會被分成多個段，其中每一個都在不同的線程中處理，然後將結果一起輸出，所以理論上，並行流的效率至少是順序流的兩倍以上。</p><h1><strong>Map接口</strong></h1><p>Map接口是和Collection同等級的根接口，它表示一個鍵值對（key-value）的映射，每一個key對應一個value，查找Map中的數據，總是根據key來獲取，所以key是不可重複的，它用於標識集合裡的每項數據。跟Collection一樣，Map接口派生了很多的集合子類，這是Map的體系架構圖：</p><div class=pgc-img><img alt="Java集合類根接口：Collection 和 Map的深入瞭解" onerror=errorimg.call(this); src=https://p1.pstatp.com/large/pgc-image/7fb03926e47248f39d03ee0105b10c36><p class=pgc-img-caption></p></div><p>Map接口提供了很多集合的初識方法，其底層結構是封裝一個名為entry的接口，源碼如下：</p><pre>public interface Entry&lt;K, V&gt; { K getKey(); V getValue(); V setValue(V var1); boolean equals(Object var1); int hashCode(); static &lt;K extends Comparable&lt;? super K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey() { return (Comparator)((Serializable)((var0x, var1x) -&gt; { return ((Comparable)var0x.getKey()).compareTo(var1x.getKey()); })); } static &lt;K, V extends Comparable&lt;? super V&gt;&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue() { return (Comparator)((Serializable)((var0x, var1x) -&gt; { return ((Comparable)var0x.getValue()).compareTo(var1x.getValue()); })); } static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? super K&gt; var0) { Objects.requireNonNull(var0); return (Comparator)((Serializable)((var1x, var2x) -&gt; { return var0.compare(var1x.getKey(), var2x.getKey()); })); } static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? super V&gt; var0) { Objects.requireNonNull(var0); return (Comparator)((Serializable)((var1x, var2x) -&gt; { return var0.compare(var1x.getValue(), var2x.getValue()); })); }}</pre><p>從源碼中可以看出，entry中封裝了一系列設值和比較器，這也是Map實現類的元素操作的基礎接口，一個entry就相當於一個封裝了鍵值對的元素，是Map接口裡的架構核心。</p><p>除此之外，Map中還提供了兩個集合來操作自身，這就是 <strong>KeySet</strong> 和 <strong>Values</strong>。</p><pre>Set&lt;K&gt; keySet();Collection&lt;V&gt; values();</pre><p>KeySet 是一個 Map 中 key 的集合，<strong>以 Set 的形式保存</strong>，不允許重複，因此鍵存儲的對象需要重寫 equals() 和 hashCode() 方法。</p><p>Values 是一個 Map 中 value 的集合，<strong>以 Collection 的形式保存</strong>，可以重複。</p><p>通過這三種視圖，Map可以對自身結構以及內部元素做操作，在集合中非常常用，建議讀者們可以多看看源碼，作深入的瞭解。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>Java</a></li><li><a>類根</a></li><li><a>Collection</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E6%8A%80/a6ca1002.html alt=Java中Collection集合ArrayList和HashSet的使用 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a6ca1002.html title=Java中Collection集合ArrayList和HashSet的使用>Java中Collection集合ArrayList和HashSet的使用</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/da488e5c.html alt=Java集合-Collection class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/da488e5c.html title=Java集合-Collection>Java集合-Collection</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/e7b89313.html alt=十年程序員總結：Java之集合Collection總覽 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/ff7018c5f0c247fe9e1065846beba6f0 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/e7b89313.html title=十年程序員總結：Java之集合Collection總覽>十年程序員總結：Java之集合Collection總覽</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/7f01d3f2.html alt=吃透Java集合系列二：Collection與其子接口 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/691aeb05fb314dfa98f57c29c5694b6b style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/7f01d3f2.html title=吃透Java集合系列二：Collection與其子接口>吃透Java集合系列二：Collection與其子接口</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2a352c48.html alt=必須要知道：Java中的Collection重要知識點，為你簡明梳理 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1521010146662fb7b5e0210 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2a352c48.html title=必須要知道：Java中的Collection重要知識點，為你簡明梳理>必須要知道：Java中的Collection重要知識點，為你簡明梳理</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/48ba24d7.html alt=深入淺出：Java事務原理和應用兼JDBC事務詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/3c5e0002a8059c1311aa style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/48ba24d7.html title=深入淺出：Java事務原理和應用兼JDBC事務詳解>深入淺出：Java事務原理和應用兼JDBC事務詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html alt=「Java」隨機數詳解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/b471807e699b44c2b1dedc580ea3f3af style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b8bda645.html title=「Java」隨機數詳解>「Java」隨機數詳解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/816b04b7.html alt=從JVM層面帶你分析Java的Object類源碼第一部分 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/816b04b7.html title=從JVM層面帶你分析Java的Object類源碼第一部分>從JVM層面帶你分析Java的Object類源碼第一部分</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html alt="Java 多態的實現機制，看了都說好" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9d3b0e55813d46b4982ae7d9b81d1802 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/cf633068.html title="Java 多態的實現機制，看了都說好">Java 多態的實現機制，看了都說好</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/12498348.html alt="Java 編譯時多態和運行時多態" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/1531535784468c357213ffe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/12498348.html title="Java 編譯時多態和運行時多態">Java 編譯時多態和運行時多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d60e504d.html alt=Java基礎之多態，動態綁定多態的代碼案例，簡單卻很重要 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ab338c7287fe4649a96227987579c844 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d60e504d.html title=Java基礎之多態，動態綁定多態的代碼案例，簡單卻很重要>Java基礎之多態，動態綁定多態的代碼案例，簡單卻很重要</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/bb876e43.html alt=Java特性之一：多態詳解，學java不求人 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/39a700034bab2e1401a3 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/bb876e43.html title=Java特性之一：多態詳解，學java不求人>Java特性之一：多態詳解，學java不求人</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/234d55fa.html alt=Java開發課程（十）——面向對象5、多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/df3621e51e4242fd90731dd013472f12 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/234d55fa.html title=Java開發課程（十）——面向對象5、多態>Java開發課程（十）——面向對象5、多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/96d2083b.html alt=「Java三分鐘」Java三大特性——多態理解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/6a9b8965-0a4c-4cb4-9389-6cbbda0e9d93 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/96d2083b.html title=「Java三分鐘」Java三大特性——多態理解>「Java三分鐘」Java三大特性——多態理解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/b96b5bf9.html alt=如何正確認識Java多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/d2896b2f39694d39957b901a62cfe7fb style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/b96b5bf9.html title=如何正確認識Java多態>如何正確認識Java多態</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>