<!doctype html><html lang=tw><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><link rel=dns-prefetch href=https://i.geekbank.cf/><title>數據缺失值填充的三大統計方法總結實現 | 极客快訊</title><meta property="og:title" content="數據缺失值填充的三大統計方法總結實現 - 极客快訊"><meta property="og:type" content="article"><meta property="og:locale" content="tw"><meta property="og:image" content="http://p1.pstatp.com/large/pgc-image/1342cf1d8e144ff7a70ca5131c77cb53"><link rel=alternate hreflang=x-default href=https://geekbank.cf/tw/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-tw href=https://geekbank.cf/tw/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-cn href=https://geekbank.cf/cn/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-hk href=https://geekbank.cf/tw/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-mo href=https://geekbank.cf/tw/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-my href=https://geekbank.cf/cn/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=alternate hreflang=zh-sg href=https://geekbank.cf/cn/%e9%81%8a%e6%88%b2/2171f6b.html><link rel=canonical href=https://geekbank.cf/tw/%e9%81%8a%e6%88%b2/2171f6b.html><meta property="article:published_time" content="2020-10-29T20:48:06+08:00"><meta property="article:modified_time" content="2020-10-29T20:48:06+08:00"><meta name=Keywords content><meta name=description content="數據缺失值填充的三大統計方法總結實現"><meta name=author content="极客快訊"><meta property="og:url" content="/tw/%E9%81%8A%E6%88%B2/2171f6b.html"><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#ffc40d"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://geekbank.cf/css/normalize.css><link rel=stylesheet href=https://geekbank.cf/css/style.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script type=text/javascript src=https://geekbank.cf/js/jqthumb.min.js></script><script data-ad-client=ca-pub-3525055026201463 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><h1><a id=logo href>🤓 极客快訊 Geek Bank</a></h1><p class=description>為你帶來最全的科技知識 🧡</p></div><div><nav id=nav-menu class=clearfix><a class=current href>猜你喜歡</a>
<a href=../../tw/categories/%E7%A7%91%E6%8A%80.html title=科技>科技</a>
<a href=../../tw/categories/%E9%81%8A%E6%88%B2.html title=遊戲>遊戲</a>
<a href=../../tw/categories/%E7%A7%91%E5%AD%B8.html title=科學>科學</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title>數據缺失值填充的三大統計方法總結實現</h1></header><date class="post-meta meta-date">2020-10-29</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=tw/categories/%E9%81%8A%E6%88%B2.html>遊戲</a></span></div><div class=post-content><div><div class=pgc-img><img alt=數據缺失值填充的三大統計方法總結實現 onerror=errorimg.call(this); src=http://p1.pstatp.com/large/pgc-image/1342cf1d8e144ff7a70ca5131c77cb53><p class=pgc-img-caption></p></div><p>在我上一篇文章裡面寫到了平時工作積累到的一些比較常用的數據科學處理方法，其中第一大部分主要將的就是數據缺失值相關的內容，在實際的應用中，數據缺失值是一個不可避免的問題，造成數據中有缺失值的原因有很多，但是我們更重要的是要聚焦如何去進行缺失數據的填充，進可能降低缺失值數據帶來的影響。</p><p>在這裡我基於自己實際項目經驗，總結了三種統計上的數據缺失值填充方法，分別是：滑動平均數據填充方法、移動加權數據填充方法和卡爾曼濾波數據填充方法，相關的介紹和原理網上有很多，我這裡就不再累贅了，這裡給出來具體的代碼實現，感興趣的可以拿去使用，歡迎交流技術問題，共同進步。</p><p>具體的代碼實現如下：</p><pre>#!usr/bin/env python#encoding:utf-8from __future__ import division'''__Author__:沂水寒城功能： 缺失數據填充模塊主要包括： 滑動平均缺失值填充算法、移動加權缺失值填充算法、卡爾曼濾波缺失值填充算法'''import sysfrom pykalman import KalmanFilterreload(sys)sys.setdefaultencoding("utf-8")def sliceWindowAverage(one_all_list,num=10,flag=False): ''' 滑動平均缺失值填充算法： 基於滑窗在時序數據上的滑動實現對窗口內缺失值的填充（使用窗口內其餘值的均值進行填充） ''' nozero_list=[one for one in one_all_list if one&gt;0] before_avg,last_avg=sum(nozero_list[:num])/num,sum(nozero_list[-1*num:])/num res_list=[] for i in range(len(one_all_list)): if one_all_list[i]!=0: res_list.append(one_all_list[i]) else: tmp=int(num/2) if i&lt;=tmp: if flag: res_list.append(float(before_avg)) else: res_list.append(int(before_avg)) elif i&gt;=len(one_all_list)-tmp: if flag: res_list.append(float(last_avg)) else: res_list.append(int(last_avg)) else: one_index_list=list(range(i-tmp,i))+list(range(i+1,i+tmp+1)) one_value=[one_all_list[h] for h in one_index_list] one_value=[one for one in one_value if one&gt;0] if len(one_value): if flag: res_list.append(float(sum(one_value)/len(one_value))) else: res_list.append(int(sum(one_value)/len(one_value))) return res_listdef weightGenerate(weight_list): ''' 基於時間步長生成權重值 ''' total=sum(weight_list) return [one/total for one in weight_list]def sliceWindowWeight(one_all_list,num=7,flag=False): ''' 移動加權缺失值填充算法： 基於滑窗在時序數據上的滑動實現對窗口內缺失值的填充（使用窗口內其餘值的加權均值進行填充） ''' nozero_list=[one for one in one_all_list if one&gt;0] before_avg,last_avg=sum(nozero_list[:num])/num,sum(nozero_list[-1*num:])/num res_list=[] for i in range(len(one_all_list)): if one_all_list[i]&gt;0: res_list.append(one_all_list[i]) else: tmp=int(num/2)+1 if i&lt;=tmp: if flag: res_list.append(float(before_avg)) else: res_list.append(int(before_avg)) elif i&gt;=len(one_all_list)-tmp: if flag: res_list.append(float(last_avg)) else: res_list.append(int(last_avg)) else:  one_index_list=range(i-tmp,i)+range(i+1,i+tmp) #去除i位置 one_value=[one_all_list[h] for h in one_index_list] weight_list=[abs(1/(B-i)) for B in range(i-tmp,i)]+[abs(1/(L-i)) for L in range(i+1,i+tmp)] one_w=weightGenerate(weight_list) one_weight_value=[one_value[j]*one_w[j] for j in range(len(one_w))] res_list.append(int(sum(one_weight_value))) return res_listdef kaerman(one_all_list): ''' 卡爾曼濾波器缺失值填充算法： 基於觀測值和估計值來還原系統真實的狀態值 ''' observations=measurements=one_all_list kf=KalmanFilter(initial_state_mean=observations[0]) kf=kf.em(observations,n_iter=5,em_vars='all') measurements_predicted=(kf.smooth(measurements)[0])[:, 0] res_list=measurements_predicted.tolist() return [int(one) for one in res_list]if __name__ == '__main__': print 'missingDataHandle!!!' data=[19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 0, 18, 20, 22, 23, 24, 24, 24, 24, 26, 0, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122] D1=sliceWindowAverage(data,num=7,flag=False) D2=sliceWindowWeight(data,num=7,flag=False) D3=kaerman(data) print 'D1: ',D1 print 'D2: ',D2 print 'D3: ',D3</pre><p>簡單的測試結果輸出如下：</p><pre>missingDataHandle!!!D1: [19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 18, 18, 20, 22, 23, 24, 24, 24, 24, 26, 25, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122]D2: [19, 18, 17, 17, 17, 17, 16, 16, 17, 17, 17, 18, 20, 22, 23, 24, 24, 24, 24, 26, 25, 28, 26, 25, 24, 25, 26, 26, 30, 33, 33, 32, 30, 32, 35, 33, 35, 39, 42, 43, 40, 35, 32, 35, 38, 36, 38, 38, 36, 33, 35, 33, 35, 36, 35, 33, 33, 33, 33, 30, 30, 32, 36, 38, 39, 40, 43, 35, 30, 32, 35, 38, 36, 35, 35, 39, 42, 45, 45, 45, 46, 48, 52, 60, 65, 68, 73, 74, 70, 68, 66, 65, 69, 73, 74, 75, 85, 95, 113, 122]D3: [18, 18, 17, 17, 17, 16, 16, 16, 16, 14, 9, 15, 19, 21, 22, 23, 23, 23, 23, 21, 13, 22, 24, 24, 24, 25, 26, 27, 29, 31, 32, 31, 31, 32, 33, 34, 35, 38, 40, 41, 39, 35, 34, 35, 36, 36, 37, 37, 35, 34, 34, 33, 34, 35, 34, 33, 33, 32, 32, 31, 31, 32, 35, 37, 38, 39, 39, 35, 32, 33, 34, 36, 36, 35, 36, 39, 41, 43, 44, 45, 46, 49, 53, 59, 63, 67, 70, 71, 69, 68, 66, 66, 69, 72, 74, 78, 86, 96, 109, 118][Finished in 0.9s]</pre><p>學習記錄了。</p></div></div><div class="post-meta meta-tags"><ul class=clearfix><li><a>數據</a></li><li><a>三大</a></li><li><a>統計</a></li></ul></div></article></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=搜索>
<input type=hidden name=sitesearch value=geekbank.cf>
<button type=submit>🔍</button></form></section><section class=widget><h3 class=widget-title>最新文章 ⚡</h3><ul class=widget-list><li><a href=../../tw/%E7%A7%91%E5%AD%B8/8433dc3b.html alt=統計數據：一個成功數據科學項目的最佳起點 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/245ded0d0b6a4f87bafaafc2906af8ec style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E5%AD%B8/8433dc3b.html title=統計數據：一個成功數據科學項目的最佳起點>統計數據：一個成功數據科學項目的最佳起點</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/5fc946c5.html alt=數據統計抓偏態，獨藍組合中11！大樂透091期排除號碼的心法 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p3.pstatp.com/large/pgc-image/3795899eab0742a28af7e810ab72a672 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/5fc946c5.html title=數據統計抓偏態，獨藍組合中11！大樂透091期排除號碼的心法>數據統計抓偏態，獨藍組合中11！大樂透091期排除號碼的心法</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1dd03690.html alt=阿里建成三大超級數據中心,服務器超百萬臺,2019年獨角獸企業發佈 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/ce35a72bb9be43f185403b4734379bda style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1dd03690.html title=阿里建成三大超級數據中心,服務器超百萬臺,2019年獨角獸企業發佈>阿里建成三大超級數據中心,服務器超百萬臺,2019年獨角獸企業發佈</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/2e6b172.html alt=數據分析：數據挖掘--數據的描述性統計 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/6bfb952743824d589b10c788459cfe06 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/2e6b172.html title=數據分析：數據挖掘--數據的描述性統計>數據分析：數據挖掘--數據的描述性統計</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1b41dd4.html alt=數據統計：2019年25省市註冊給排水，專業考試通過總人數彙總！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/57276f409d2b4616ba413a8d00220e35 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1b41dd4.html title=數據統計：2019年25省市註冊給排水，專業考試通過總人數彙總！>數據統計：2019年25省市註冊給排水，專業考試通過總人數彙總！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/74d5111.html alt=數據區間統計總出錯，Excel四組函數公式一鍵搞定，還不會就out了 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/9206abdbebed4802ac8c5f4802907b85 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/74d5111.html title=數據區間統計總出錯，Excel四組函數公式一鍵搞定，還不會就out了>數據區間統計總出錯，Excel四組函數公式一鍵搞定，還不會就out了</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/96d2083b.html alt=「Java三分鐘」Java三大特性——多態理解 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/6a9b8965-0a4c-4cb4-9389-6cbbda0e9d93 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/96d2083b.html title=「Java三分鐘」Java三大特性——多態理解>「Java三分鐘」Java三大特性——多態理解</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/a8984de6.html alt=面向對象程序設計三大重要機制之多態 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/1529987756501ead8b951fe style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/a8984de6.html title=面向對象程序設計三大重要機制之多態>面向對象程序設計三大重要機制之多態</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/132ebe4e.html alt=《新世界》三大女兒結局，柳爺抱憾終生，最慘的是她！ class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/9c5a4af4921f4c3f808a9254e26789ad style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/132ebe4e.html title=《新世界》三大女兒結局，柳爺抱憾終生，最慘的是她！>《新世界》三大女兒結局，柳爺抱憾終生，最慘的是她！</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/862c99dd.html alt=數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/3e507bb24abc482fb28df1121a7ee097 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/862c99dd.html title=數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出>數據告訴你，為什麼要在上升趨勢買入和下降趨勢賣出</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/1f742b21.html alt="數據科學家常犯的 10 個編程錯誤" class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/1f742b21.html title="數據科學家常犯的 10 個編程錯誤">數據科學家常犯的 10 個編程錯誤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/d5773fc2.html alt=數據科學家常遇到的10個錯誤 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/59f660bac8b541888e71459b604ba733 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/d5773fc2.html title=數據科學家常遇到的10個錯誤>數據科學家常遇到的10個錯誤</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/ebe4518e.html alt=明朝衰落的三大原因，每一個都足以置國家於死地，想翻身都難 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p9.pstatp.com/large/pgc-image/7582eedff5d6415891a608f8e7b984dc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/ebe4518e.html title=明朝衰落的三大原因，每一個都足以置國家於死地，想翻身都難>明朝衰落的三大原因，每一個都足以置國家於死地，想翻身都難</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/24249b2f.html alt=2020年雅安市各區縣高速路長度統計，有兩個縣還沒有高速公路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/pgc-image/7627cb26b45c4b73b7ddc64e52586ccc style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/24249b2f.html title=2020年雅安市各區縣高速路長度統計，有兩個縣還沒有高速公路>2020年雅安市各區縣高速路長度統計，有兩個縣還沒有高速公路</a></li><hr><li><a href=../../tw/%E7%A7%91%E6%8A%80/419a0323.html alt=樂山市各區縣高速路長度統計，這五個地區還沒開通高速公路 class="image featured" style=display:block;margin-left:auto;margin-right:auto;width:100%><img src=https://p1.pstatp.com/large/dfic-imagehandler/fac6df0b-5dff-46a6-8659-6046a0793dd8 style=border-radius:25px></a>
<a href=../../tw/%E7%A7%91%E6%8A%80/419a0323.html title=樂山市各區縣高速路長度統計，這五個地區還沒開通高速公路>樂山市各區縣高速路長度統計，這五個地區還沒開通高速公路</a></li><hr></ul></section><section class=widget><h3 class=widget-title>其他</h3><ul class=widget-list><li><a href=TOS.html>使用條款</a></li><li><a href=CommentPolicy.html>留言政策</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>DMCA</a></li><li><a href=mailto:gdnews@tuta.io rel=nofollow>聯絡我們</a></li></ul></section></div></div></div></div><footer id=footer><div class=container>&copy; 2020 <a href>极客快訊</a></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:true}};</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script><a id=rocket href=#top></a><script type=text/javascript src=https://kknews.cf/js/totop.js async></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e508ed9e4e698bb"></script></body></html>